[{"title":"reacté¢è¯•é¢˜è®°å½•","url":"%2FreactInterview.html","content":"\n{% fi http://p33v4b0bc.bkt.clouddn.com/reactInterview.jpeg , reactInterview, React%}\n\n<!-- more -->\n\n## Reacté¢è¯•é—®é¢˜\nä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å…³äº React çš„é¢è¯•é—®é¢˜åˆ—è¡¨ï¼š\n\n* [React çš„å·¥ä½œåŸç†](#react-%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86)?\n* [ä½¿ç”¨ React æœ‰ä½•ä¼˜ç‚¹](#%E4%BD%BF%E7%94%A8-react-%E6%9C%89%E4%BD%95%E4%BC%98%E7%82%B9)ï¼Ÿ\n* [å±•ç¤ºç»„ä»¶(Presentational component)å’Œå®¹å™¨ç»„ä»¶(Container component)ä¹‹é—´æœ‰ä½•ä¸åŒ](#%E5%B1%95%E7%A4%BA%E7%BB%84%E4%BB%B6presentational-component%E5%92%8C%E5%AE%B9%E5%99%A8%E7%BB%84%E4%BB%B6container-component%E4%B9%8B%E9%97%B4%E6%9C%89%E4%BD%95%E4%B8%8D%E5%90%8C)ï¼Ÿ\n* [ç±»ç»„ä»¶(Class component)å’Œå‡½æ•°å¼ç»„ä»¶(Functional component)ä¹‹é—´æœ‰ä½•ä¸åŒ](#%E7%B1%BB%E7%BB%84%E4%BB%B6class-component%E5%92%8C%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6functional-component%E4%B9%8B%E9%97%B4%E6%9C%89%E4%BD%95%E4%B8%8D%E5%90%8C)ï¼Ÿ\n* [(ç»„ä»¶çš„)çŠ¶æ€(state)å’Œå±æ€§(props)ä¹‹é—´æœ‰ä½•ä¸åŒ](#%E7%BB%84%E4%BB%B6%E7%9A%84%E7%8A%B6%E6%80%81state%E5%92%8C%E5%B1%9E%E6%80%A7props%E4%B9%8B%E9%97%B4%E6%9C%89%E4%BD%95%E4%B8%8D%E5%90%8C)ï¼Ÿ\n* [æŒ‡å‡º(ç»„ä»¶)ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ä¸åŒ](#%E6%8C%87%E5%87%BA%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%96%B9%E6%B3%95%E7%9A%84%E4%B8%8D%E5%90%8C)ï¼Ÿ\n* [åº”è¯¥åœ¨ React ç»„ä»¶çš„ä½•å¤„å‘èµ· Ajax è¯·æ±‚](#%E5%BA%94%E8%AF%A5%E5%9C%A8-react-%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%95%E5%A4%84%E5%8F%91%E8%B5%B7-ajax-%E8%AF%B7%E6%B1%82)ï¼Ÿ\n* [ä½•ä¸ºå—æ§ç»„ä»¶(controlled component)](#%E4%BD%95%E4%B8%BA%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6controlled-component)ï¼Ÿ\n* [åœ¨ React ä¸­ï¼Œrefs çš„ä½œç”¨æ˜¯ä»€ä¹ˆ](#%E5%9C%A8-react-%E4%B8%ADrefs-%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88)ï¼Ÿ\n* [ä½•ä¸ºé«˜é˜¶ç»„ä»¶(higher order component)](#%E4%BD%95%E4%B8%BA%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6higher-order-component)ï¼Ÿ\n* [ä½¿ç”¨ç®­å¤´å‡½æ•°(arrow functions)çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆ](#%E4%BD%BF%E7%94%A8%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0arrow-functions%E7%9A%84%E4%BC%98%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88)ï¼Ÿ\n* [ä¸ºä»€ä¹ˆå»ºè®®ä¼ é€’ç»™ setState çš„å‚æ•°æ˜¯ä¸€ä¸ª callback è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡](#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BB%BA%E8%AE%AE%E4%BC%A0%E9%80%92%E7%BB%99-setstate-%E7%9A%84%E5%8F%82%E6%95%B0%E6%98%AF%E4%B8%80%E4%B8%AA-callback-%E8%80%8C%E4%B8%8D%E6%98%AF%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1)ï¼Ÿ\n* [é™¤äº†åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®š `this`ï¼Œè¿˜æœ‰å…¶å®ƒæ–¹å¼å—](#%E9%99%A4%E4%BA%86%E5%9C%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%AD%E7%BB%91%E5%AE%9A-this%E8%BF%98%E6%9C%89%E5%85%B6%E5%AE%83%E6%96%B9%E5%BC%8F%E5%90%97)ï¼Ÿ\n* [æ€ä¹ˆé˜»æ­¢ç»„ä»¶çš„æ¸²æŸ“](#%E6%80%8E%E4%B9%88%E9%98%BB%E6%AD%A2%E7%BB%84%E4%BB%B6%E7%9A%84%E6%B8%B2%E6%9F%93)ï¼Ÿ\n* [å½“æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨æ—¶ï¼Œä½•ä¸º keyï¼Ÿè®¾ç½® key çš„ç›®çš„æ˜¯ä»€ä¹ˆ](#%E5%BD%93%E6%B8%B2%E6%9F%93%E4%B8%80%E4%B8%AA%E5%88%97%E8%A1%A8%E6%97%B6%E4%BD%95%E4%B8%BA-key%E8%AE%BE%E7%BD%AE-key-%E7%9A%84%E7%9B%AE%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88)ï¼Ÿ\n* [(åœ¨æ„é€ å‡½æ•°ä¸­)è°ƒç”¨ super(props) çš„ç›®çš„æ˜¯ä»€ä¹ˆ](#%E5%9C%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%AD%E8%B0%83%E7%94%A8-superprops-%E7%9A%84%E7%9B%AE%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88)ï¼Ÿ\n* [ä½•ä¸º JSX](#%E4%BD%95%E4%B8%BA-jsx)ï¼Ÿ\n* [æ€ä¹ˆç”¨ React.createElement é‡å†™ä¸‹é¢çš„ä»£ç ](#%E6%80%8E%E4%B9%88%E7%94%A8%20React.createElement%20%E9%87%8D%E5%86%99%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81)ï¼Ÿ\n* [ä½•ä¸º `Children`](#%E4%BD%95%E4%B8%BA-children)ï¼Ÿ\n* [åœ¨ React ä¸­ï¼Œä½•ä¸º state](#%E5%9C%A8-react-%E4%B8%AD%E4%BD%95%E4%B8%BA-state)ï¼Ÿ\n* [ä½ ä¸ºä½•æ’æ–¥ create-react-app](#%E4%BD%A0%E4%B8%BA%E4%BD%95%E6%8E%92%E6%96%A5-create-react-app)ï¼Ÿ\n* [ä½•ä¸º redux](#%E4%BD%95%E4%B8%BA-redux)ï¼Ÿ\n* [åœ¨ Redux ä¸­ï¼Œä½•ä¸º store](#%E5%9C%A8-redux-%E4%B8%AD%E4%BD%95%E4%B8%BA-store)ï¼Ÿ\n* [ä½•ä¸º action](#%E4%BD%95%E4%B8%BA-action)ï¼Ÿ\n* [ä½•ä¸º reducer](#%E4%BD%95%E4%B8%BA-reducer)ï¼Ÿ\n* [Redux Thunk çš„ä½œç”¨æ˜¯ä»€ä¹ˆ](#redux-thunk-%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88)ï¼Ÿ\n* [ä½•ä¸ºçº¯å‡½æ•°(pure function)](#%E4%BD%95%E4%B8%BA%E7%BA%AF%E5%87%BD%E6%95%B0pure-function)ï¼Ÿ\n* [ä½ å–œæ¬¢ React çš„å“ªäº›æ–¹é¢](#%E4%BD%A0%E5%96%9C%E6%AC%A2-react-%E7%9A%84%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2)ï¼Ÿ\n* [ä½ ä¸å–œæ¬¢ React çš„å“ªäº›æ–¹é¢](#%E4%BD%A0%E4%B8%8D%E5%96%9C%E6%AC%A2-react-%E7%9A%84%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2)ï¼Ÿ\n* [ç¤ºä¾‹é¡¹ç›®](#%E7%A4%BA%E4%BE%8B%E9%A1%B9%E7%9B%AE)\n\n#### React çš„å·¥ä½œåŸç†\nReact ä¼šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿ DOM(virtual DOM)ã€‚å½“ä¸€ä¸ªç»„ä»¶ä¸­çš„çŠ¶æ€æ”¹å˜æ—¶ï¼ŒReact é¦–å…ˆä¼šé€šè¿‡ \"diff\" ç®—æ³•æ¥æ ‡è®°è™šæ‹Ÿ DOM ä¸­çš„æ”¹å˜ï¼Œç¬¬äºŒæ­¥æ˜¯è°ƒèŠ‚(reconciliation)ï¼Œä¼šç”¨ diff çš„ç»“æœæ¥æ›´æ–° DOMã€‚\n\n#### ä½¿ç”¨ React æœ‰ä½•ä¼˜ç‚¹\n* åªéœ€æŸ¥çœ‹ `render` å‡½æ•°å°±ä¼šå¾ˆå®¹æ˜“çŸ¥é“ä¸€ä¸ªç»„ä»¶æ˜¯å¦‚ä½•è¢«æ¸²æŸ“çš„\n* JSX çš„å¼•å…¥ï¼Œä½¿å¾—ç»„ä»¶çš„ä»£ç æ›´åŠ å¯è¯»ï¼Œä¹Ÿæ›´å®¹æ˜“çœ‹æ‡‚ç»„ä»¶çš„å¸ƒå±€ï¼Œæˆ–è€…ç»„ä»¶ä¹‹é—´æ˜¯å¦‚ä½•äº’ç›¸å¼•ç”¨çš„\n* æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ï¼Œè¿™å¯ä»¥æ”¹è¿› SEO å’Œæ€§èƒ½\n* æ˜“äºæµ‹è¯•\n* React åªå…³æ³¨ View å±‚ï¼Œæ‰€ä»¥å¯ä»¥å’Œå…¶å®ƒä»»ä½•æ¡†æ¶(å¦‚Backbone.js, Angular.js)ä¸€èµ·ä½¿ç”¨\n\n#### å±•ç¤ºç»„ä»¶(Presentational component)å’Œå®¹å™¨ç»„ä»¶(Container component)ä¹‹é—´æœ‰ä½•ä¸åŒ\nå±•ç¤ºç»„ä»¶å…³å¿ƒç»„ä»¶çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆã€‚å±•ç¤ºä¸“é—¨é€šè¿‡ props æ¥å—æ•°æ®å’Œå›è°ƒï¼Œå¹¶ä¸”å‡ ä¹ä¸ä¼šæœ‰è‡ªèº«çš„çŠ¶æ€ï¼Œä½†å½“å±•ç¤ºç»„ä»¶æ‹¥æœ‰è‡ªèº«çš„çŠ¶æ€æ—¶ï¼Œé€šå¸¸ä¹Ÿåªå…³å¿ƒ UI çŠ¶æ€è€Œä¸æ˜¯æ•°æ®çš„çŠ¶æ€ã€‚\n\nå®¹å™¨ç»„ä»¶åˆ™æ›´å…³å¿ƒç»„ä»¶æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚å®¹å™¨ç»„ä»¶ä¼šä¸ºå±•ç¤ºç»„ä»¶æˆ–è€…å…¶å®ƒå®¹å™¨ç»„ä»¶æä¾›æ•°æ®å’Œè¡Œä¸º(behavior)ï¼Œå®ƒä»¬ä¼šè°ƒç”¨ `Flux actions`ï¼Œå¹¶å°†å…¶ä½œä¸ºå›è°ƒæä¾›ç»™å±•ç¤ºç»„ä»¶ã€‚å®¹å™¨ç»„ä»¶ç»å¸¸æ˜¯æœ‰çŠ¶æ€çš„ï¼Œå› ä¸ºå®ƒä»¬æ˜¯(å…¶å®ƒç»„ä»¶çš„)æ•°æ®æºã€‚\n\n#### ç±»ç»„ä»¶(Class component)å’Œå‡½æ•°å¼ç»„ä»¶(Functional component)ä¹‹é—´æœ‰ä½•ä¸åŒ\n* ç±»ç»„ä»¶ä¸ä»…å…è®¸ä½ ä½¿ç”¨æ›´å¤šé¢å¤–çš„åŠŸèƒ½ï¼Œå¦‚ç»„ä»¶è‡ªèº«çš„çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¹Ÿèƒ½ä½¿ç»„ä»¶ç›´æ¥è®¿é—® `store` å¹¶ç»´æŒçŠ¶æ€\n* å½“ç»„ä»¶ä»…æ˜¯æ¥æ”¶ `props`ï¼Œå¹¶å°†ç»„ä»¶è‡ªèº«æ¸²æŸ“åˆ°é¡µé¢æ—¶ï¼Œè¯¥ç»„ä»¶å°±æ˜¯ä¸€ä¸ª 'æ— çŠ¶æ€ç»„ä»¶(stateless component)'ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªçº¯å‡½æ•°æ¥åˆ›å»ºè¿™æ ·çš„ç»„ä»¶ã€‚è¿™ç§ç»„ä»¶ä¹Ÿè¢«ç§°ä¸ºå“‘ç»„ä»¶(dumb components)æˆ–å±•ç¤ºç»„ä»¶\n\n#### (ç»„ä»¶çš„)çŠ¶æ€(state)å’Œå±æ€§(props)ä¹‹é—´æœ‰ä½•ä¸åŒ\n`State` æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºç»„ä»¶æŒ‚è½½æ—¶æ‰€éœ€æ•°æ®çš„é»˜è®¤å€¼ã€‚`State` å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œå‘ç”Ÿçªå˜ï¼Œä½†å¤šæ•°æ—¶å€™æ˜¯ä½œä¸ºç”¨æˆ·äº‹ä»¶è¡Œä¸ºçš„ç»“æœã€‚\n\n`Props`(properties çš„ç®€å†™)åˆ™æ˜¯ç»„ä»¶çš„é…ç½®ã€‚`props` ç”±çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå¹¶ä¸”å°±å­ç»„ä»¶è€Œè¨€ï¼Œ`props` æ˜¯ä¸å¯å˜çš„(immutable)ã€‚ç»„ä»¶ä¸èƒ½æ”¹å˜è‡ªèº«çš„ propsï¼Œä½†æ˜¯å¯ä»¥æŠŠå…¶å­ç»„ä»¶çš„ props æ”¾åœ¨ä¸€èµ·(ç»Ÿä¸€ç®¡ç†)ã€‚Props ä¹Ÿä¸ä»…ä»…æ˜¯æ•°æ®--å›è°ƒå‡½æ•°ä¹Ÿå¯ä»¥é€šè¿‡ props ä¼ é€’ã€‚\n\n#### æŒ‡å‡º(ç»„ä»¶)ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ä¸åŒ\n* `componentWillMount` -- å¤šç”¨äºæ ¹ç»„ä»¶ä¸­çš„åº”ç”¨ç¨‹åºé…ç½®\n* `componentDidMount` -- åœ¨è¿™å¯ä»¥å®Œæˆæ‰€æœ‰æ²¡æœ‰ DOM å°±ä¸èƒ½åšçš„æ‰€æœ‰é…ç½®ï¼Œå¹¶å¼€å§‹è·å–æ‰€æœ‰ä½ éœ€è¦çš„æ•°æ®ï¼›å¦‚æœéœ€è¦è®¾ç½®äº‹ä»¶ç›‘å¬ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™å®Œæˆ\n* `componentWillReceiveProps` -- è¿™ä¸ªå‘¨æœŸå‡½æ•°ä½œç”¨äºç‰¹å®šçš„ prop æ”¹å˜å¯¼è‡´çš„ state è½¬æ¢\n* `shouldComponentUpdate` -- å¦‚æœä½ æ‹…å¿ƒç»„ä»¶è¿‡åº¦æ¸²æŸ“ï¼Œ`shouldComponentUpdate` æ˜¯ä¸€ä¸ªæ”¹å–„æ€§èƒ½çš„åœ°æ–¹ï¼Œå› ä¸ºå¦‚æœç»„ä»¶æ¥æ”¶äº†æ–°çš„ `prop`ï¼Œ å®ƒå¯ä»¥é˜»æ­¢(ç»„ä»¶)é‡æ–°æ¸²æŸ“ã€‚shouldComponentUpdate åº”è¯¥è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼æ¥å†³å®šç»„ä»¶æ˜¯å¦è¦é‡æ–°æ¸²æŸ“\n* `componentWillUpdate` -- å¾ˆå°‘ä½¿ç”¨ã€‚å®ƒå¯ä»¥ç”¨äºä»£æ›¿ç»„ä»¶çš„ `componentWillReceiveProps` å’Œ `shouldComponentUpdate`(ä½†ä¸èƒ½è®¿é—®ä¹‹å‰çš„ props)\n* `componentDidUpdate` -- å¸¸ç”¨äºæ›´æ–° DOMï¼Œå“åº” prop æˆ– state çš„æ”¹å˜\n* `componentWillUnmount` -- åœ¨è¿™ä½ å¯ä»¥å–æ¶ˆç½‘ç»œè¯·æ±‚ï¼Œæˆ–è€…ç§»é™¤æ‰€æœ‰ä¸ç»„ä»¶ç›¸å…³çš„äº‹ä»¶ç›‘å¬å™¨\n\n#### åº”è¯¥åœ¨ React ç»„ä»¶çš„ä½•å¤„å‘èµ· Ajax è¯·æ±‚\nåœ¨ React ç»„ä»¶ä¸­ï¼Œåº”è¯¥åœ¨ `componentDidMount` ä¸­å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡â€œæŒ‚è½½â€(è¢«æ·»åŠ åˆ° DOM)æ—¶æ‰§è¡Œï¼Œåœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ä»…ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä½ ä¸èƒ½ä¿è¯åœ¨ç»„ä»¶æŒ‚è½½ä¹‹å‰ Ajax è¯·æ±‚å·²ç»å®Œæˆï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼Œä¹Ÿå°±æ„å‘³ç€ä½ å°†å°è¯•åœ¨ä¸€ä¸ªæœªæŒ‚è½½çš„ç»„ä»¶ä¸Šè°ƒç”¨ setStateï¼Œè¿™å°†ä¸èµ·ä½œç”¨ã€‚åœ¨ `componentDidMount` ä¸­å‘èµ·ç½‘ç»œè¯·æ±‚å°†ä¿è¯è¿™æœ‰ä¸€ä¸ªç»„ä»¶å¯ä»¥æ›´æ–°äº†ã€‚\n\n#### ä½•ä¸ºå—æ§ç»„ä»¶(controlled component)\nåœ¨ HTML ä¸­ï¼Œç±»ä¼¼ `<input>`, `<textarea>` å’Œ `<select>` è¿™æ ·çš„è¡¨å•å…ƒç´ ä¼šç»´æŠ¤è‡ªèº«çš„çŠ¶æ€ï¼Œå¹¶åŸºäºç”¨æˆ·çš„è¾“å…¥æ¥æ›´æ–°ã€‚å½“ç”¨æˆ·æäº¤è¡¨å•æ—¶ï¼Œå‰é¢æåˆ°çš„å…ƒç´ çš„å€¼å°†éšè¡¨å•ä¸€èµ·è¢«å‘é€ã€‚ä½†åœ¨ React ä¸­ä¼šæœ‰äº›ä¸åŒï¼ŒåŒ…å«è¡¨å•å…ƒç´ çš„ç»„ä»¶å°†ä¼šåœ¨ state ä¸­è¿½è¸ªè¾“å…¥çš„å€¼ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨å›è°ƒå‡½æ•°æ—¶ï¼Œå¦‚ `onChange` ä¼šæ›´æ–° stateï¼Œé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚ä¸€ä¸ªè¾“å…¥è¡¨å•å…ƒç´ ï¼Œå®ƒçš„å€¼é€šè¿‡ React çš„è¿™ç§æ–¹å¼æ¥æ§åˆ¶ï¼Œè¿™æ ·çš„å…ƒç´ å°±è¢«ç§°ä¸º\"å—æ§å…ƒç´ \"ã€‚\n\n#### åœ¨ React ä¸­ï¼Œrefs çš„ä½œç”¨æ˜¯ä»€ä¹ˆ\nRefs å¯ä»¥ç”¨äºè·å–ä¸€ä¸ª DOM èŠ‚ç‚¹æˆ–è€… React ç»„ä»¶çš„å¼•ç”¨ã€‚ä½•æ—¶ä½¿ç”¨ refs çš„å¥½çš„ç¤ºä¾‹æœ‰ç®¡ç†ç„¦ç‚¹/æ–‡æœ¬é€‰æ‹©ï¼Œè§¦å‘å‘½ä»¤åŠ¨ç”»ï¼Œæˆ–è€…å’Œç¬¬ä¸‰æ–¹ DOM åº“é›†æˆã€‚ä½ åº”è¯¥é¿å…ä½¿ç”¨ String ç±»å‹çš„ Refs å’Œå†…è”çš„ ref å›è°ƒã€‚Refs å›è°ƒæ˜¯ React æ‰€æ¨èçš„ã€‚\n\n#### ä½•ä¸ºé«˜é˜¶ç»„ä»¶(higher order component)\né«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ªä»¥ç»„ä»¶ä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶çš„å‡½æ•°ã€‚HOC è¿è¡Œä½ é‡ç”¨ä»£ç ã€é€»è¾‘å’Œå¼•å¯¼æŠ½è±¡ã€‚æœ€å¸¸è§çš„å¯èƒ½æ˜¯ Redux çš„ `connect` å‡½æ•°ã€‚é™¤äº†ç®€å•åˆ†äº«å·¥å…·åº“å’Œç®€å•çš„ç»„åˆï¼ŒHOCæœ€å¥½çš„æ–¹å¼æ˜¯å…±äº« React ç»„ä»¶ä¹‹é—´çš„è¡Œä¸ºã€‚å¦‚æœä½ å‘ç°ä½ åœ¨ä¸åŒçš„åœ°æ–¹å†™äº†å¤§é‡ä»£ç æ¥åšåŒä¸€ä»¶äº‹æ—¶ï¼Œå°±åº”è¯¥è€ƒè™‘å°†ä»£ç é‡æ„ä¸ºå¯é‡ç”¨çš„ HOCã€‚\nè£…é¥°å™¨@decoration\nç»ƒä¹ \n\n<hr />\n\n* å†™ä¸€ä¸ªåè½¬å…¶è¾“å…¥çš„ HOC\n* å†™ä¸€ä¸ªä» API æä¾›æ•°æ®ç»™ä¼ å…¥çš„ç»„ä»¶çš„ HOC\n* å†™ä¸€ä¸ªå®ç° shouldComponentUpdate æ¥é¿å… reconciliation çš„ HOC\n* å†™ä¸€ä¸ªé€šè¿‡ `React.Children.toArray` å¯¹ä¼ å…¥ç»„ä»¶çš„å­ç»„ä»¶è¿›è¡Œæ’åºçš„ HOC\n\n#### ä½¿ç”¨ç®­å¤´å‡½æ•°(arrow functions)çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆ\n* ä½œç”¨åŸŸå®‰å…¨ï¼šåœ¨ç®­å¤´å‡½æ•°ä¹‹å‰ï¼Œæ¯ä¸€ä¸ªæ–°åˆ›å»ºçš„å‡½æ•°éƒ½æœ‰å®šä¹‰è‡ªèº«çš„ `this` å€¼(åœ¨æ„é€ å‡½æ•°ä¸­æ˜¯æ–°å¯¹è±¡ï¼›åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°è°ƒç”¨ä¸­çš„ `this` æ˜¯æœªå®šä¹‰çš„ï¼›å¦‚æœå‡½æ•°è¢«ç§°ä¸ºâ€œå¯¹è±¡æ–¹æ³•â€ï¼Œåˆ™ä¸ºåŸºç¡€å¯¹è±¡ç­‰)ï¼Œä½†ç®­å¤´å‡½æ•°ä¸ä¼šï¼Œå®ƒä¼šä½¿ç”¨å°é—­æ‰§è¡Œä¸Šä¸‹æ–‡çš„ `this` å€¼ã€‚\n* ç®€å•ï¼šç®­å¤´å‡½æ•°æ˜“äºé˜…è¯»å’Œä¹¦å†™\n* æ¸…æ™°ï¼šå½“ä¸€åˆ‡éƒ½æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œä»»ä½•å¸¸è§„å‡½æ•°éƒ½å¯ä»¥ç«‹å³ç”¨äºå®šä¹‰ä½œç”¨åŸŸã€‚å¼€å‘è€…æ€»æ˜¯å¯ä»¥æŸ¥æ‰¾ next-higher å‡½æ•°è¯­å¥ï¼Œä»¥æŸ¥çœ‹ `this` çš„å€¼\n\n#### ä¸ºä»€ä¹ˆå»ºè®®ä¼ é€’ç»™ setState çš„å‚æ•°æ˜¯ä¸€ä¸ª callback è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡\nå› ä¸º `this.props` å’Œ `this.state` çš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä¸èƒ½ä¾èµ–å®ƒä»¬çš„å€¼å»è®¡ç®—ä¸‹ä¸€ä¸ª stateã€‚\n\n#### é™¤äº†åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®š `this`ï¼Œè¿˜æœ‰å…¶å®ƒæ–¹å¼å—\nä½ å¯ä»¥ä½¿ç”¨å±æ€§åˆå§‹å€¼è®¾å®šé¡¹(property initializers)æ¥æ­£ç¡®ç»‘å®šå›è°ƒï¼Œcreate-react-app ä¹Ÿæ˜¯é»˜è®¤æ”¯æŒçš„ã€‚åœ¨å›è°ƒä¸­ä½ å¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œä½†é—®é¢˜æ˜¯æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å›è°ƒã€‚\n\n#### æ€ä¹ˆé˜»æ­¢ç»„ä»¶çš„æ¸²æŸ“\nåœ¨ç»„ä»¶çš„ `render` æ–¹æ³•ä¸­è¿”å› `null` å¹¶ä¸ä¼šå½±å“è§¦å‘ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•\n\n#### å½“æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨æ—¶ï¼Œä½•ä¸º keyï¼Ÿè®¾ç½® key çš„ç›®çš„æ˜¯ä»€ä¹ˆ\nKeys ä¼šæœ‰åŠ©äº React è¯†åˆ«å“ªäº› `items` æ”¹å˜äº†ï¼Œè¢«æ·»åŠ äº†æˆ–è€…è¢«ç§»é™¤äº†ã€‚Keys åº”è¯¥è¢«èµ‹äºˆæ•°ç»„å†…çš„å…ƒç´ ä»¥èµ‹äºˆ(DOM)å…ƒç´ ä¸€ä¸ªç¨³å®šçš„æ ‡è¯†ï¼Œé€‰æ‹©ä¸€ä¸ª key çš„æœ€ä½³æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²èƒ½æƒŸä¸€åœ°æ ‡è¯†ä¸€ä¸ªåˆ—è¡¨é¡¹ã€‚å¾ˆå¤šæ—¶å€™ä½ ä¼šä½¿ç”¨æ•°æ®ä¸­çš„ IDs ä½œä¸º keysï¼Œå½“ä½ æ²¡æœ‰ç¨³å®šçš„ IDs ç”¨äºè¢«æ¸²æŸ“çš„ `items` æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é¡¹ç›®ç´¢å¼•ä½œä¸ºæ¸²æŸ“é¡¹çš„ keyï¼Œä½†è¿™ç§æ–¹å¼å¹¶ä¸æ¨èï¼Œå¦‚æœ `items` å¯ä»¥é‡æ–°æ’åºï¼Œå°±ä¼šå¯¼è‡´ `re-render` å˜æ…¢ã€‚\n\n#### (åœ¨æ„é€ å‡½æ•°ä¸­)è°ƒç”¨ super(props) çš„ç›®çš„æ˜¯ä»€ä¹ˆ\nåœ¨ `super()` è¢«è°ƒç”¨ä¹‹å‰ï¼Œå­ç±»æ˜¯ä¸èƒ½ä½¿ç”¨ `this` çš„ï¼Œåœ¨ ES2015 ä¸­ï¼Œå­ç±»å¿…é¡»åœ¨ `constructor` ä¸­è°ƒç”¨ `super()`ã€‚ä¼ é€’ `props` ç»™ `super()` çš„åŸå› åˆ™æ˜¯ä¾¿äº(åœ¨å­ç±»ä¸­)èƒ½åœ¨ `constructor` è®¿é—® `this.props`ã€‚\n\n#### ä½•ä¸º JSX\nJSX æ˜¯ JavaScript è¯­æ³•çš„ä¸€ç§è¯­æ³•æ‰©å±•ï¼Œå¹¶æ‹¥æœ‰ JavaScript çš„å…¨éƒ¨åŠŸèƒ½ã€‚JSX ç”Ÿäº§ React \"å…ƒç´ \"ï¼Œä½ å¯ä»¥å°†ä»»ä½•çš„ JavaScript è¡¨è¾¾å¼å°è£…åœ¨èŠ±æ‹¬å·é‡Œï¼Œç„¶åå°†å…¶åµŒå…¥åˆ° JSX ä¸­ã€‚åœ¨ç¼–è¯‘å®Œæˆä¹‹åï¼ŒJSX è¡¨è¾¾å¼å°±ç¼–ç¨‹äº†å¸¸è§„çš„ JavaScript å¯¹è±¡ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ `if` è¯­å¥å’Œ `for` å¾ªç¯å†…éƒ¨ä½¿ç”¨ JSXï¼Œå°†å®ƒèµ‹å€¼ç»™å˜é‡ï¼Œæ¥å—å®ƒä½œä¸ºå‚æ•°ï¼Œå¹¶ä»å‡½æ•°ä¸­è¿”å›å®ƒã€‚\n\n#### æ€ä¹ˆç”¨ React.createElement é‡å†™ä¸‹é¢çš„ä»£ç \n\nQuestionï¼š\n\n```js\nconst element = (\n  <h1 className=\"greeting\">\n    Hello, world!\n  </h1>\n);\n```\n\nAnswerï¼š\n\n```js\nconst element = React.createElement(\n  'h1',\n  {className: 'greeting'},\n  'Hello, world!'\n);\n```\n\n#### ä½•ä¸º `Children`\nåœ¨JSXè¡¨è¾¾å¼ä¸­ï¼Œä¸€ä¸ªå¼€å§‹æ ‡ç­¾(æ¯”å¦‚`<a>`)å’Œä¸€ä¸ªå…³é—­æ ‡ç­¾(æ¯”å¦‚`</a>`)ä¹‹é—´çš„å†…å®¹ä¼šä½œä¸ºä¸€ä¸ªç‰¹æ®Šçš„å±æ€§`props.children`è¢«è‡ªåŠ¨ä¼ é€’ç»™åŒ…å«ç€å®ƒçš„ç»„ä»¶ã€‚\n\nè¿™ä¸ªå±æ€§æœ‰è®¸å¤šå¯ç”¨çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ `React.Children.map`ï¼Œ`React.Children.forEach`ï¼Œ `React.Children.count`ï¼Œ `React.Children.only`ï¼Œ`React.Children.toArray`ã€‚\n\n#### åœ¨ React ä¸­ï¼Œä½•ä¸º state\nState å’Œ props ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯ç§æœ‰çš„ï¼Œå¹¶ä¸”å®Œå…¨ç”±ç»„ä»¶è‡ªèº«æ§åˆ¶ã€‚State æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒæœ‰æ•°æ®ï¼Œå¹¶å†³å®šç»„ä»¶å¦‚ä½•æ¸²æŸ“çš„å¯¹è±¡ã€‚\n\n#### ä½ ä¸ºä½•æ’æ–¥ create-react-app\nåœ¨ä½ æ’æ–¥ä¹‹å‰ï¼Œä½ å¹¶ä¸èƒ½å»é…ç½® webpack æˆ– babel presetsã€‚\n\n#### ä½•ä¸º redux\nRedux çš„åŸºæœ¬æ€æƒ³æ˜¯æ•´ä¸ªåº”ç”¨çš„ state ä¿æŒåœ¨ä¸€ä¸ªå•ä¸€çš„ store ä¸­ã€‚store å°±æ˜¯ä¸€ä¸ªç®€å•çš„ javascript å¯¹è±¡ï¼Œè€Œæ”¹å˜åº”ç”¨ state çš„å”¯ä¸€æ–¹å¼æ˜¯åœ¨åº”ç”¨ä¸­è§¦å‘ actionsï¼Œç„¶åä¸ºè¿™äº› actions ç¼–å†™ reducers æ¥ä¿®æ”¹ stateã€‚æ•´ä¸ª state è½¬åŒ–æ˜¯åœ¨ reducers ä¸­å®Œæˆï¼Œå¹¶ä¸”ä¸åº”è¯¥ç”±ä»»ä½•å‰¯ä½œç”¨ã€‚\n\n#### åœ¨ Redux ä¸­ï¼Œä½•ä¸º store\nStore æ˜¯ä¸€ä¸ª javascript å¯¹è±¡ï¼Œå®ƒä¿å­˜äº†æ•´ä¸ªåº”ç”¨çš„ stateã€‚ä¸æ­¤åŒæ—¶ï¼ŒStore ä¹Ÿæ‰¿æ‹…ä»¥ä¸‹èŒè´£ï¼š\n\n* å…è®¸é€šè¿‡ `getState()` è®¿é—® state\n* è¿è¡Œé€šè¿‡ `dispatch(action)` æ”¹å˜ state\n* é€šè¿‡ `subscribe(listener)` æ³¨å†Œ listeners\n* é€šè¿‡ `subscribe(listener)` è¿”å›çš„å‡½æ•°å¤„ç† listeners çš„æ³¨é”€\n\n#### ä½•ä¸º action\nActions æ˜¯ä¸€ä¸ªçº¯ javascript å¯¹è±¡ï¼Œå®ƒä»¬å¿…é¡»æœ‰ä¸€ä¸ª type å±æ€§è¡¨æ˜æ­£åœ¨æ‰§è¡Œçš„ action çš„ç±»å‹ã€‚å®è´¨ä¸Šï¼Œaction æ˜¯å°†æ•°æ®ä»åº”ç”¨ç¨‹åºå‘é€åˆ° store çš„æœ‰æ•ˆè½½è·ã€‚\n\n#### ä½•ä¸º reducer\nä¸€ä¸ª reducer æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œè¯¥å‡½æ•°ä»¥å…ˆå‰çš„ state å’Œä¸€ä¸ª action ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸‹ä¸€ä¸ª stateã€‚\n\n#### Redux Thunk çš„ä½œç”¨æ˜¯ä»€ä¹ˆ\nRedux thunk æ˜¯ä¸€ä¸ªå…è®¸ä½ ç¼–å†™è¿”å›ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯ä¸€ä¸ª action çš„ actions creators çš„ä¸­é—´ä»¶ã€‚å¦‚æœæ»¡è¶³æŸä¸ªæ¡ä»¶ï¼Œthunk åˆ™å¯ä»¥ç”¨æ¥å»¶è¿Ÿ action çš„æ´¾å‘(dispatch)ï¼Œè¿™å¯ä»¥å¤„ç†å¼‚æ­¥ action çš„æ´¾å‘(dispatch)ã€‚\n\n#### ä½•ä¸ºçº¯å‡½æ•°(pure function)\nä¸€ä¸ªçº¯å‡½æ•°æ˜¯ä¸€ä¸ªä¸ä¾èµ–äºä¸”ä¸æ”¹å˜å…¶ä½œç”¨åŸŸä¹‹å¤–çš„å˜é‡çŠ¶æ€çš„å‡½æ•°ï¼Œè¿™ä¹Ÿæ„å‘³ç€ä¸€ä¸ªçº¯å‡½æ•°å¯¹äºåŒæ ·çš„å‚æ•°æ€»æ˜¯è¿”å›åŒæ ·çš„ç»“æœã€‚\n\n#### ä½ å–œæ¬¢ React çš„å“ªäº›æ–¹é¢\n...\n\n#### ä½ ä¸å–œæ¬¢ React çš„å“ªäº›æ–¹é¢\n...\n\n#### ç¤ºä¾‹é¡¹ç›®\n* [React Spotify](https://github.com/Pau1fitz/react-spotify)\n* [React Soundcloud](https://github.com/andrewngu/sound-redux)\n\n#### è™šæ‹Ÿdom æ™®é€šçš„jså¯¹è±¡\næ’å…¥æ–°ç»„ä»¶æœ‰äº†keyå¯ä»¥å¸®åŠ©reactæ‰¾åˆ°æ˜ å°„\n\n#### äº‹ä»¶å§”æ‰˜\næ¯ä¸ªsetStateé‡æ–°æ¸²æŸ“æ•´ä¸ªå­æ ‘ã€‚ å¦‚æœè¦å‹ç¼©æ€§èƒ½ï¼Œè¯·å°½å¯èƒ½è°ƒç”¨ setStateï¼Œå¹¶ä½¿ç”¨shouldComponentUpdate æ¥é˜²æ­¢é‡æ–°æ¸²æŸ“å¤§å‹å­æ ‘ã€‚","tags":["é¢è¯•"],"categories":["JS"]},{"title":"æ­å»ºVPSç§‘å­¦ä¸Šç½‘","url":"%2FscienceInternet.html","content":"\n{% fi http://p33v4b0bc.bkt.clouddn.com/shadowsocks.jpg, Shadowsocks, Shadowsocks %}\n\n<!-- more -->\n\n{% note info %}\n\nå¿«é€Ÿæ­å»ºShadowsocks\n\n{% endnote %}\n\n## [è´­ä¹°VultræœåŠ¡å™¨](https://www.vultr.com/)\n\n### VultræœåŠ¡å™¨ä»·æ ¼\n\nVultræœåŠ¡å™¨æŒ‰å°æ—¶è®¡è´¹,æœ€ä½0.004ç¾å…ƒ/h,ç®—èµ·æ¥2.5ç¾å…ƒ/æœˆï¼Œä¸”destoryæ‰æœåŠ¡å™¨æ˜¯ä¸æ”¶è´¹çš„ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå¦‚æœæš‚æ—¶æ²¡æœ‰ä½¿ç”¨è¿˜ä¸€ç›´æ‰£è´¹çš„é—®é¢˜ã€‚\n\næœ€ä½ä»·æ ¼çš„æœåŠ¡å™¨æ˜¯512Mçš„å†…å­˜ï¼Œæ¯ä¸ªæœˆ500Gçš„æµé‡ï¼Œåªèƒ½è¯´99%çš„æƒ…å†µä¸‹å®Œå…¨å¤Ÿç”¨äº†ï¼\n\n![introduce](http://p33v4b0bc.bkt.clouddn.com/vultr.png)\n\n## ä¹°å¥½ä¸­æ„çš„åœ°åŒºèŠ‚ç‚¹æœåŠ¡å™¨ä¹‹åï¼Œwindowsç³»ç»Ÿå¯ä»¥ç”¨Xshell sshè¿æ¥åˆ°æœåŠ¡å™¨ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹æ­å»ºssè„šæœ¬å‘½ä»¤\n\n```javascript\n\nwget --no-check-certificate -O shadowsocks.sh\nhttps://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh\n \nchmod +x shadowsocks.sh\n \n./shadowsocks.sh 2>&1 | tee shadowsocks.log\n\n```\n\næ¥ç€æŒ‰ç…§æç¤ºè¾“å…¥å¯†ç ï¼Œç«¯å£å’ŒåŠ å¯†æ–¹å¼ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![ss1](http://p33v4b0bc.bkt.clouddn.com/ss1.png)\n\n![ss2](http://p33v4b0bc.bkt.clouddn.com/ss1.png)\n\nç„¶åå¯ä»¥å»å¬é¦–æ­Œ~ï¼ŒæˆåŠŸå®‰è£…ä¹‹åæœ‰ä½ é…ç½®çš„ä¿¡æ¯æ˜¾ç¤ºï¼Œè®°ä½è¿™äº›ä¿¡æ¯ã€‚\n\n## å®‰è£…sså®¢æˆ·ç«¯ï¼Œé…ç½®å¥½ä¸Šé¢çš„æœåŠ¡å™¨é…ç½®ä¿¡æ¯ï¼Œå°±å¯ä»¥å¼€å¿ƒåœ°ç©è€äº†ã€‚Chromeæ’ä»¶æ¨èä½¿ç”¨Proxy SwitchySharpæ¥ç®¡ç†å’Œåˆ‡æ¢ä»£ç†é…ç½®éå¸¸å¥½ç”¨ã€‚\n\nWindowså®¢æˆ·ç«¯(ä»£ç†ç«¯å£é»˜è®¤1080)\nhttps://github.com/shadowsocks/shadowsocks-windows/releases\n\nUbuntu \nsudo add-apt-repository ppa:hzwhuang/ss-qt5 \nsudo apt-get update \nsudo apt-get install shadowsocks-qt5\n\nMacå®¢æˆ·ç«¯(ä»£ç†ç«¯å£é»˜è®¤1086)\n\nhttps://github.com/shadowsocks/ShadowsocksX-NG/releases\n\nAndroidå®¢æˆ·ç«¯\n\nhttps://github.com/shadowsocks/shadowsocks-android/releases","tags":["vultr"],"categories":["å·¥å…·"]},{"title":"Promiseè¯ç”Ÿè®°","url":"%2FcreatePromise.html","content":"\n{% fi http://p33v4b0bc.bkt.clouddn.com/promise.png, Promise, Promise %}\n\nå‰ç«¯è¿‘å¹´çš„å…´èµ·ï¼Œæœ‰å¤§éƒ¨åˆ†æ˜¯å› ä¸º `NodeJS` çš„è¯ç”Ÿï¼Œè€Œ `NodeJS` æ˜¯ä¸ªé€‚ç”¨äº **å¼‚æ­¥IO** å¯†é›†å‹çš„è¯­è¨€ï¼Œä¸€äº›åŸºäº `NodeJS` çš„æ¡†æ¶ï¼Œæ¯”å–» *KOA2ã€Adonis* å°±æœ‰å¤§é‡çš„ `async` å’Œ `await` è¯­æ³•ï¼Œ`async`çš„å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯ `Promise` å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ `async` å’Œ `await` è¯­æ³•ï¼Œå†™å‡ºä¼˜é›…çš„å¼‚æ­¥ä»£ç ï¼Œæ¥æ›¿æ¢éš¾çœ‹ä¸”éš¾ç»´æŠ¤çš„å›è°ƒå‡½æ•°ã€‚\n\n## Promise æ¦‚å¿µ\n\n`Promise`æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯resolveå’Œrejectã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”± JavaScript å¼•æ“æä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²ã€‚\nç”Ÿæˆå®ä¾‹æ—¶å›æ‰§ä¿¡ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼›<Br/> \n`resolve`å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œæˆåŠŸâ€ï¼ˆå³ä» pending å˜ä¸º resolvedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼›\n`reject`å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œå¤±è´¥â€ï¼ˆå³ä» pending å˜ä¸º rejectedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚\n\n---\n<!-- more -->\n\n```javascript\n// æ‰§è¡Œé¡ºåº\nlet promise = new Promise(function(resolve, reject) {\n  console.log('Promise'); // æ–°å»ºåç«‹å³æ‰§è¡Œ\n  resolve();\n});\npromise.then(function() {\n  console.log('resolved.'); // åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆåæ‰ä¼šæ‰§è¡Œ\n});\nconsole.log('Hi!');\n// Promise\n// Hi!\n// resolved\n```\næ¥ä¸‹æ¥æˆ‘ä»¬å°±ç”¨`Promise`ç»“åˆajaxæ¥ä½¿ç”¨\n```\nconst getJSON = function(url) {\n  const promise = new Promise(function(resolve, reject){\n    const handler = function() {\n      if (this.readyState !== 4) {\n        return;\n      }\n      if (this.status === 200) {\n        resolve(this.response);\n      } else {\n        reject(new Error(this.statusText));\n      }\n    };\n    const client = new XMLHttpRequest();\n    client.open(\"GET\", url);\n    client.onreadystatechange = handler;\n    client.responseType = \"json\";\n    client.setRequestHeader(\"Accept\", \"application/json\");\n    client.send(params);\n  });\n  return promise;\n};\n\ngetJSON(\"/posts.json\").then(function(json) {\n  console.log('Contents: ' + json);\n}, function(error) {\n  console.error('å‡ºé”™äº†', error);\n});\n```\n\nè¿™é‡Œæˆ‘ä»¬ä¼šæ¸è¿›å¼çš„æ¥åˆ›å»ºä¸€ä¸ª `Promise` çš„å®ç°ï¼Œå¦‚æœï¼Œä½ è¿˜ä¸äº†è§£ `Promise` ï¼Œèµ¶å¿«ç§»æ­¥ [Promise](http://es6.ruanyifeng.com/#docs/promise) äº†è§£å­¦ä¹ ï¼Œå½“ç„¶è¿™ä¸ªå®ç°ä¼šç¬¦åˆ [Promise/A+](https://promisesaplus.com) è§„èŒƒï¼Œ`JavaScript` ä¸­æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„ `Promise` åº“ï¼Œ[bluebird](http://bluebirdjs.com/docs/getting-started.html) å°±æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ `Promise` ç±»åº“ï¼Œç›¸æ¯”å…¶å®ƒç¬¬ä¸‰æ–¹ç±»åº“æˆ–æ ‡å‡†å¯¹è±¡æ¥è¯´ï¼Œå…¶æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼šåŠŸèƒ½æ›´é½å…¨è€Œä¸è‡ƒè‚¿ã€æµè§ˆå™¨å…¼å®¹æ€§æ›´å¥½,å¤§å®¶å¯ä»¥äº†è§£ä¸‹ã€‚\n\n---\n\nåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€å¹²ã€‚ã€‚ã€‚ ğŸ˜ \n\n## å®šä¹‰ Promise ç±»å‹\n\nä¸€ä¸ªç®€å• `Promise` è¯­æ³•ï¼Œå¦‚ä¸‹\n\n```javascript\nconst promise = new Promise(function(resolve, reject) {\n  // ... doSomething\n\n  if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){\n    resolve(value);\n  } else {\n    reject(error);\n  }\n});\n\npromise.then(function(value) {\n  // success\n}, function(error) {\n  // failure ç¬¬äºŒä¸ªå‡½æ•°å¯é€‰\n});\n```\n\n### å®ç° resolve å’Œ then\n\né¦–å…ˆæˆ‘ä»¬ä»¥ä¸Š ğŸ‘† çš„è¯­æ³•ï¼Œè‡ªå·±å®šä¹‰ä¸€ä¸ª `Promise` å®ä¾‹\n\n```javascript\nfunction Promise(fn) {\n  var callback = null;\n  //å®ç° then æ–¹æ³• , å…ˆä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå®ç°ä¼ ä¸€ä¸ªå‚æ•° -- resolve\n  this.then = function(cb) {\n    callback = cb;\n  };\n\n  //å®ç° resolve , value:å¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå€¼\n  function resolve(value) {\n    callback(value);\n  }\n  //æ‰§è¡Œ function å‚æ•°\n  fn(resolve);\n}\n```\nä¸€ä¸ªç®€å•çš„å®ä¾‹å†™å¥½äº†ï¼Œç„¶åï¼Œæ¥ç”¨ä¸€ä¸‹ï¼Œçœ‹çœ‹ ğŸ‘€ ç»“æœå¦‚ä½•\n\n```javascript\nconst p = new Promise(function(resolve){\n  resolve(66);\n});\n\np.then(function(value){\n  console.log(value);\n});\n\n```\n{% note info %}\n\næ‰§è¡Œç»“æœæ˜¯ï¼š`callback is not a function`\n\n{% endnote %}\n\n### ä¿®æ”¹ callback ä¸ºå¼‚æ­¥\n\n**è¿™é‡Œå°±é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š **  \n\n** å‘ç° `resolve()` åœ¨ `then()` ä¹‹å‰è°ƒç”¨ï¼Œåœ¨ `resolve()` è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œ `callback` è¿˜æ˜¯ `null` ï¼Œæˆ‘ä»¬çš„ä»£ç æ˜¯åŒæ­¥çš„ï¼Œè€Œä¸æ˜¯å¼‚æ­¥çš„ã€‚</br> å¦‚æ˜¯ï¼Œæƒ³åŠæ³•è§£å†³æ‰è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åˆ©ç”¨ `setTimeout` , æŠŠ `callback` åŠ å…¥å¼‚æ­¥é˜Ÿåˆ—** \n\nä»£ç å¦‚ä¸‹ ğŸ‘‡\n\n```javascript\nfunction Promise(fn) {\n  var callback = null;\n  //å®ç° then æ–¹æ³• , å…ˆä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå®ç°ä¼ ä¸€ä¸ªå‚æ•° -- resolve\n  this.then = function(cb) {\n    callback = cb;\n  };\n\n  //å®ç° resolve , value:å¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå€¼\n  function resolve(value) {\n    // ç”¨ setTimeout æŠŠ callback åŠ å…¥åˆ°å¼‚æ­¥é˜Ÿåˆ—ï¼Œè¿™æ ·å°±ä¼šï¼Œå…ˆæ‰§è¡Œ then() æ–¹æ³•\n    setTimeout(function(){\n      callback(value);\n    },1)\n  }\n  //æ‰§è¡Œ function å‚æ•°\n  fn(resolve);\n}\n```\n\nç„¶åï¼Œå†æ¥ç”¨ä¸€ä¸‹,çœ‹çœ‹ ğŸ‘€ ç»“æœå¦‚ä½•\n\n```javascript\nconst p = new Promise(function(resolve){\n  resolve(66);\n});\n\np.then(function(value){\n  console.log(value);\n});\n```\n\n{% note info %}\n\næ‰§è¡Œç»“æœæ˜¯ï¼š`66`\n\n{% endnote %}\n\n## Promiseä½¿ç”¨æ³¨æ„ç‚¹\n1. ä¸€èˆ¬æ¥è¯´ï¼Œè°ƒç”¨`resolve`æˆ–`reject`ä»¥åï¼Œ`Promise`çš„ä½¿å‘½å°±å®Œæˆäº†ï¼Œåç»§æ“ä½œåº”è¯¥æ”¾åˆ°`then`æ–¹æ³•é‡Œé¢ï¼Œè€Œä¸åº”è¯¥ç›´æ¥å†™åœ¨`resolve`æˆ–`reject`çš„åé¢ã€‚æ‰€ä»¥ï¼Œæœ€å¥½åœ¨å®ƒä»¬å‰é¢åŠ ä¸Š`return`è¯­å¥ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰æ„å¤–ã€‚\n\n2. `Promise`å®ä¾‹å…·æœ‰`then`æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ`then`æ–¹æ³•æ˜¯å®šä¹‰åœ¨åŸå‹å¯¹è±¡`Promise.prototype`ä¸Šçš„ã€‚å®ƒçš„ä½œç”¨æ˜¯ä¸º`Promise`å®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ã€‚å‰é¢è¯´è¿‡ï¼Œ`then`æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯`resolved`çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰æ˜¯`rejected`çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚`then`æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„`Promise`å®ä¾‹ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯åŸæ¥é‚£ä¸ª`Promise`å®ä¾‹ï¼‰ã€‚å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³thenæ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ª`then`æ–¹æ³•ã€‚\n\n3. `Promise.prototype.catch`æ–¹æ³•æ˜¯.then(null, rejection)çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚`getJSON`æ–¹æ³•è¿”å›ä¸€ä¸ª`Promise`å¯¹è±¡ï¼Œå¦‚æœè¯¥å¯¹è±¡çŠ¶æ€å˜ä¸º`resolved`ï¼Œåˆ™ä¼šè°ƒç”¨`then`æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼›å¦‚æœå¼‚æ­¥æ“ä½œæŠ›å‡ºé”™è¯¯ï¼ŒçŠ¶æ€å°±ä¼šå˜ä¸º`rejected`ï¼Œå°±ä¼šè°ƒç”¨`catch`æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¤„ç†è¿™ä¸ªé”™è¯¯ã€‚å¦å¤–ï¼Œthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœè¿è¡Œä¸­æŠ›å‡ºé”™è¯¯ï¼Œä¹Ÿä¼šè¢«`catch`æ–¹æ³•æ•è·ã€‚\n\n4. ä¸€èˆ¬æ¥è¯´ï¼Œä¸è¦åœ¨thenæ–¹æ³•é‡Œé¢å®šä¹‰`reject`çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼ˆå³thençš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œæ€»æ˜¯ä½¿ç”¨`catch`æ–¹æ³•ã€‚\n\n5. è·Ÿä¼ ç»Ÿçš„`try/catch`ä»£ç å—ä¸åŒçš„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨`catch`æ–¹æ³•æŒ‡å®šé”™è¯¯å¤„ç†çš„å›è°ƒå‡½æ•°ï¼Œ`Promise`å¯¹è±¡æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç ï¼Œå³ä¸ä¼šæœ‰ä»»ä½•ååº”ï¼Œ`Promise`ä¼šåƒæ‰é”™è¯¯ã€‚\n","tags":["Promise"],"categories":["JS"]},{"title":"å¦‚ä½•ä½¿ç”¨ markdown è¯­æ³•å†™åšå®¢","url":"%2FmarkdownGrammar.html","content":"\n{% fi http://p33v4b0bc.bkt.clouddn.com/markdown.png, Markdown, Markdown %}\n\n# æ ‡é¢˜1\n## æ ‡é¢˜2\n*æ–œä½“*\n**ç²—ä½“**\n***ç²—æ–œä½“***<br/>\n~~åˆ é™¤çº¿~~\n<u>ä¸‹åˆ’çº¿æ–‡æœ¬</u>\n\n1. I\n2. Love \n3. You\n\n- ç‚¹\n\n+ Foo\n+ Bar\n---\n<!-- more -->\n\nåˆ†éš”çº¿\n***\n--- \n___\n\n* * *\n>ä¸€çº§å¼•ç”¨\n>>äºŒçº§å¼•ç”¨\n\n`#include<iostream>`\n```\n#include <iostream>\nint main()\n{\nreturn 0;\n}\n```\n~~~\n#include <iostream>\nint main()\n{\nreturn 0;\n}\n~~~\n|æ ‡é¢˜|æ ‡é¢˜|æ ‡é¢˜|\n|:---|:---:|---:|\n|å±…å·¦æµ‹è¯•æ–‡æœ¬|å±…ä¸­æµ‹è¯•æ–‡æœ¬|å±…å³æµ‹è¯•æ–‡æœ¬|\n|å±…å·¦æµ‹è¯•æ–‡æœ¬1|å±…ä¸­æµ‹è¯•æ–‡æœ¬2|å±…å³æµ‹è¯•æ–‡æœ¬3|\n|å±…å·¦æµ‹è¯•æ–‡æœ¬11|å±…ä¸­æµ‹è¯•æ–‡æœ¬22|å±…å³æµ‹è¯•æ–‡æœ¬33|\n|å±…å·¦æµ‹è¯•æ–‡æœ¬111|å±…ä¸­æµ‹è¯•æ–‡æœ¬222|å±…å³æµ‹è¯•æ–‡æœ¬333|\n\n- [x] å·²å®Œæˆäº‹é¡¹\n- [ ] å¾…åŠäº‹é¡¹1\n- [ ] å¾…åŠäº‹é¡¹2\n\n### åæ–œæ \n\n`Markdown` å¯ä»¥åˆ©ç”¨åæ–œæ æ¥æ’å…¥ä¸€äº›åœ¨è¯­æ³•ä¸­æœ‰å…¶å®ƒæ„ä¹‰çš„ç¬¦å·ï¼Œä¾‹å¦‚ï¼šå¦‚æœä½ æƒ³è¦ç”¨æ˜Ÿå·åŠ åœ¨æ–‡å­—æ—è¾¹çš„æ–¹å¼æ¥åšå‡ºå¼ºè°ƒæ•ˆæœï¼ˆä½†ä¸ç”¨ `<em>` æ ‡ç­¾ï¼‰ï¼Œä½ å¯ä»¥åœ¨æ˜Ÿå·çš„å‰é¢åŠ ä¸Šåæ–œæ ï¼š\n```\n\\*literal asterisks\\*\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\n\\*literal asterisks\\*\n\n`Markdown` æ”¯æŒä»¥ä¸‹è¿™äº›ç¬¦å·å‰é¢åŠ ä¸Šåæ–œæ æ¥å¸®åŠ©æ’å…¥æ™®é€šçš„ç¬¦å·ï¼š\n\n```\n  \\   åæ–œçº¿\n  `   åå¼•å·\n  *   æ˜Ÿå·\n  _   åº•çº¿\n  {}  èŠ±æ‹¬å·\n  []  æ–¹æ‹¬å·\n  ()  æ‹¬å¼§\n  #   äº•å­—å·\n  +   åŠ å·\n  -   å‡å·\n  .   è‹±æ–‡å¥ç‚¹\n  !   æƒŠå¹å·\n```\nç™»å½•[ç™¾åº¦](http://www.baidu.com)\n![Teddy Bear](http://img2.everychina.com/img/d7/f7/1b580dfa9315111397ef93fd24ea-250x250c1-77f7/love_valentine_plush_teddy_bear.jpg)\n","tags":["markdown"],"categories":["å·¥å…·"]},{"title":"Hello World - çƒ­çˆ±ç¼–ç¨‹çš„æ™®é€šäººï¼Œé¡ºä¾¿ä»¥æ­¤ä¸ºç”Ÿã€‚","url":"%2Fhello-world.html","content":"\nä¹‹å‰ä¸€ç›´åœ¨åšå®¢å›­å†™åšå®¢ï¼Œä½†éšç€æŠ€æœ¯çš„å‘å±•ï¼Œåšå®¢å›­çš„æ ·å¼å’Œè‡ªå®šä¹‰å†…å®¹è¿œè¿œä¸èƒ½è¾¾åˆ°æˆ‘æ‰€æœŸæœ›ã€‚æ•…æ­¤å†³å®šè¿ç§»åšå®¢ï¼Œå¸Œæœ›èƒ½æ€»ç»“å½’çº³å¥½è‡ªå·±çš„æŠ€æœ¯ä½“ç³»ï¼Œæ‹“å®½æ‹“æ·±æŠ€æœ¯æ ˆï¼Œé‡æ–°å¼€å‘O(âˆ©_âˆ©)Oå“ˆå“ˆ~ã€‚\n\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n---\n<!-- more -->\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]}]