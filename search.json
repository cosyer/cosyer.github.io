[{"title":"å¿«é€Ÿäº†è§£React 16æ–°ç‰¹æ€§","url":"%2Freact16.html","content":"\n## Error Boundary\nError Boundaryå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§ç‰¹æ®Šçš„Reactç»„ä»¶ï¼Œæ–°å¢äº†componentDidCatchè¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå®ƒå¯ä»¥æ•è·è‡ªèº«åŠå­æ ‘ä¸Šçš„é”™è¯¯å¹¶å¯¹é”™è¯¯åšä¼˜é›…å¤„ç†ï¼ŒåŒ…æ‹¬ä¸ŠæŠ¥é”™è¯¯æ—¥å¿—ã€å±•ç¤ºå‡ºé”™æç¤ºï¼Œè€Œä¸æ˜¯å¸è½½æ•´ä¸ªç»„ä»¶æ ‘ã€‚ï¼ˆæ³¨ï¼šå®ƒå¹¶ä¸èƒ½æ•è·runtimeæ‰€æœ‰çš„é”™è¯¯ï¼Œæ¯”å¦‚ç»„ä»¶å›è°ƒäº‹ä»¶é‡Œçš„é”™è¯¯ï¼Œå¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¼ ç»Ÿçš„try-catchè¯­å¥ï¼‰\n```javascript\n//æœ€ä½³å®è·µï¼šå°†ErrorBoundaryæŠ½è±¡ä¸ºä¸€ä¸ªå…¬ç”¨çš„ç»„ä»¶ç±»\n \nimport React, { Component } from 'react'\n \nexport default class ErrorBoundary extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n  componentDidCatch(err, info) {\n    this.setState({ hasError: true })\n    //sendErrorReport(err,info)\n  }\n  render(){\n    if(this.state.hasError){\n      return <div>Something went wrong!</div>\n    }\n    return this.props.children\n  }\n}\n```\n\n```javascript\n// ä½¿ç”¨æ–¹å¼ åŒ…è£¹å®¹æ˜“å‡ºé”™çš„ç»„ä»¶\nrender(){\n  return (\n    <div>\n      <ErrorBoundary>\n        <Profile user={this.state.user} />\n      </ErrorBoundary>\n      <button onClick={this.onClick}>Update</button>\n    </div>\n  )\n}\n```\n## renderæ–¹æ³•æ–°å¢è¿”å›ç±»å‹\nåœ¨React 16ä¸­ï¼Œrenderæ–¹æ³•æ”¯æŒç›´æ¥è¿”å›stringï¼Œnumberï¼Œbooleanï¼Œnullï¼Œportalï¼Œä»¥åŠfragments(å¸¦æœ‰keyå±æ€§çš„æ•°ç»„)ï¼Œè¿™å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘é¡µé¢çš„DOMå±‚çº§ã€‚\n\n```javascript\n//string\nrender(){\n  return 'hello,world'\n}\n \n//number\nrender(){\n  return 12345\n}\n \n//boolean\nrender(){\n  return isTrue?true:false\n}\n \n//null\nrender(){\n  return null\n}\n \n//fragmentsï¼ŒæœªåŠ keyæ ‡è¯†ç¬¦ï¼Œæ§åˆ¶å°ä¼šå‡ºç°warning\nrender(){\n  return [\n    <div>hello</div>,\n    <span>world</span>,\n    <p>oh</p>\n  ]\n}\n```\nä»¥ä¸Šå„ç§ç±»å‹ç°åœ¨å‡å¯ä»¥ç›´æ¥åœ¨renderä¸­è¿”å›ï¼Œä¸éœ€è¦å†åœ¨å¤–å±‚åŒ…è£¹ä¸€å±‚å®¹å™¨å…ƒç´ ï¼Œä¸è¿‡åœ¨è¿”å›çš„æ•°ç»„ç±»å‹ä¸­ï¼Œéœ€è¦åœ¨æ¯ä¸ªå…ƒç´ ä¸ŠåŠ ä¸€ä¸ªå”¯ä¸€ä¸”ä¸å˜çš„keyå€¼ï¼Œå¦åˆ™æ§åˆ¶å°ä¼šæŠ¥ä¸€ä¸ªwarningã€‚\n\n## ä½¿ç”¨createPortalå°†ç»„ä»¶æ¸²æŸ“åˆ°å½“å‰ç»„ä»¶æ ‘ä¹‹å¤–\n\n## æ”¯æŒè‡ªå®šä¹‰DOMå±æ€§\nåœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒReactä¼šå¿½ç•¥æ— æ³•è¯†åˆ«çš„HTMLå’ŒSVGå±æ€§ï¼Œè‡ªå®šä¹‰å±æ€§åªèƒ½é€šè¿‡data-*å½¢å¼æ·»åŠ ï¼Œç°åœ¨å®ƒä¼šæŠŠè¿™äº›å±æ€§ç›´æ¥ä¼ é€’ç»™DOMï¼ˆè¿™ä¸ªæ”¹åŠ¨è®©Reactå¯ä»¥å»æ‰å±æ€§ç™½åå•ï¼Œä»è€Œå‡å°‘äº†æ–‡ä»¶å¤§å°ï¼‰ã€‚\n\n## setStateä¼ å…¥nullæ—¶ä¸ä¼šå†è§¦å‘æ›´æ–°\n\n## æ›´å¥½çš„æœåŠ¡å™¨ç«¯æ¸²æŸ“\nReact 16çš„SSRè¢«å®Œå…¨é‡å†™ï¼Œæ–°çš„å®ç°éå¸¸å¿«ï¼Œæ¥è¿‘3å€æ€§èƒ½äºReact 15ï¼Œç°åœ¨æä¾›ä¸€ç§æµæ¨¡å¼streamingï¼Œå¯ä»¥æ›´å¿«åœ°æŠŠæ¸²æŸ“çš„å­—èŠ‚å‘é€åˆ°å®¢æˆ·ç«¯ã€‚\n\n## æ–°çš„æ‰“åŒ…ç­–ç•¥\næ–°çš„æ‰“åŒ…ç­–ç•¥ä¸­å»æ‰äº†process.envæ£€æŸ¥ã€‚\nReact 16çš„ä½“ç§¯æ¯”ä¸Šä¸ªç‰ˆæœ¬å‡å°äº†32%ï¼ˆ30% post-gzipï¼‰ï¼Œæ–‡ä»¶å°ºå¯¸çš„å‡å°ä¸€éƒ¨åˆ†è¦å½’åŠŸäºæ‰“åŒ…æ–¹æ³•çš„æ”¹å˜ã€‚\n\n## React 16é‡‡ç”¨äº†æ–°çš„æ ¸å¿ƒæ¶æ„React Fiberã€‚å®˜æ–¹è§£é‡Šæ˜¯â€œReact Fiberæ˜¯å¯¹æ ¸å¿ƒç®—æ³•çš„ä¸€æ¬¡é‡æ–°å®ç°â€","tags":["react"],"categories":["JS"]},{"title":"React 16æ–°ç‰¹æ€§context api","url":"%2Fcontextapi.html","content":"\nReact 16.3å¸¦æ¥äº†æ­£å¼ç‰ˆçš„context APIã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å“ªäº›æ”¹å˜ï¼Œåœ¨é‚£äº›åœ°æ–¹å¯ä»¥å–ä»£reduxå§ï¼\n\næˆ‘å½“å‰ä¾èµ–çš„ç‰ˆæœ¬\n```javascript\n\"dependencies\": {\n    \"react\": \"^16.4.0\",\n    \"react-dom\": \"^16.4.0\"\n}\n```\n## åˆ›å»ºcontextå®ä¾‹\n```javascript\n// åˆ›å»ºcontextå®ä¾‹\nconst ThemeContext = React.createContext({\n  background: 'red',\n  color: 'white'\n});\n\nconst {Provider,Consumer} = ThemeContext\n```\n\n## Provider ç»„ä»¶ \n**Providerç»„ä»¶ç”¨äºå°†contextæ•°æ®ä¼ ç»™è¯¥ç»„ä»¶æ ‘ä¸‹çš„æ‰€æœ‰ç»„ä»¶ valueå±æ€§æ˜¯contextçš„å†…å®¹ã€‚**\n```javascript\nclass App extends React.Component {\n  render() {\n    return (\n      <Provider value={{ text: 'hello react!' }}>\n        <Comp1 />\n        <Comp2 />\n      </Provider>\n    );\n  }\n}\n```\n## Consumer ç»„ä»¶\n**Consumeræ¶ˆè´¹Providerä¼ é€’çš„æ•°æ®**\n```javascript\n// å‡½æ•°å¼\nconst Comp1 = () => (\n  <Consumer>\n    {context => <p>{context.text}</p>}\n  </Consumer>\n);\n// ç±»\nclass Comp2 extends React.Component {\n  render() {\n    return (\n      <Consumer>\n        {context => <p>{context.text}</p>}\n      </Consumer>\n    );\n  }\n}\n```\nå¦‚æœä½ æ²¡æœ‰å°†Consumerä½œä¸ºProviderçš„å­ç»„ä»¶ï¼Œé‚£ä¹ˆConsumerå°†ä½¿ç”¨åˆ›å»ºcontextæ—¶çš„å‚æ•°ä½œä¸ºcontextã€‚","tags":["context api"],"categories":["JS"]},{"title":"å¦‚ä½•ç†è§£JSé—­åŒ…","url":"%2Fclosure.html","content":"\n{% centerquote %} \nJavaScriptä¸­çš„å‡½æ•°è¿è¡Œåœ¨å®ƒä»¬è¢«å®šä¹‰çš„ä½œç”¨åŸŸé‡Œï¼Œè€Œä¸æ˜¯å®ƒä»¬è¢«æ‰§è¡Œçš„ä½œç”¨åŸŸé‡Œã€‚\n{% endcenterquote %} \n\nåœ¨JSä¸­å‡½æ•°ä½œä¸ºæ™®é€šå¯¹è±¡è¿›è¡Œä¼ é€’\n--- \n<!-- more -->\n## ä»€ä¹ˆæ˜¯é—­åŒ…?\nç®€å•æ¥è¯´ï¼Œé—­åŒ…æ˜¯æŒ‡å¯ä»¥è®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸå˜é‡çš„å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯å®šä¹‰åœ¨å¤–å±‚å‡½æ•°ä¸­çš„å†…å±‚å‡½æ•°ã€‚\n\n## ä¸ºä»€ä¹ˆéœ€è¦é—­åŒ…ï¼Ÿ\nä½¿ç”¨é—­åŒ…ä¸»è¦æ˜¯ä¸ºäº†è®¾è®¡ç§æœ‰çš„å˜é‡å’Œæ–¹æ³•ã€‚é—­åŒ…çš„ä¼˜ç‚¹å¯ä»¥é¿å…å…¨å±€å˜é‡çš„æ±¡æŸ“ï¼Œç¼ºç‚¹æ˜¯ä¼šå¸¸é©»å†…å­˜ï¼Œå¢å¤§å†…å­˜çš„ä½¿ç”¨\né‡ï¼Œä½¿ç”¨ä¸å½“ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚\n\n## ç‰¹ç‚¹\n1. å®šä¹‰å¤–å±‚å‡½æ•°ï¼Œå°è£…è¢«ä¿æŠ¤çš„å±€éƒ¨å˜é‡ã€‚ \n2. å®šä¹‰å†…å±‚å‡½æ•°ï¼Œæ‰§è¡Œå¯¹å¤–éƒ¨å‡½æ•°å˜é‡çš„æ“ä½œã€‚ \n3. å¤–å±‚å‡½æ•°è¿”å›å†…å±‚å‡½æ•°çš„å¯¹è±¡ï¼Œå¹¶ä¸”å¤–å±‚å‡½æ•°è¢«è°ƒç”¨ï¼Œç»“æœä¿å­˜åœ¨ä¸€ä¸ªå…¨å±€çš„å˜é‡ä¸­ã€‚\n\n## ç‰¹æ€§\n1. å‡½æ•°åµŒå¥—å‡½æ•°ã€‚\n2. å‡½æ•°å†…éƒ¨å¯ä»¥å¼•ç”¨å¤–éƒ¨çš„å‚æ•°å’Œå˜é‡ã€‚\n3. å‚æ•°å’Œå˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚\n\n## å®ä¾‹\n```javascript\nvar add = (function () {\n    var counter = 0;\n    return function () {return counter += 1;}\n})();\nadd();\nadd();\nadd();\n// add()è°ƒç”¨è¿‡ååº”å½“é”€æ¯å…¶å˜é‡ï¼Œä½†å…¶å†…å±‚å‡½æ•°è¢«è¿”å›äº†ï¼Œå¹¶ä¸”è¿˜ä¿ç•™ç€å¯¹å˜é‡çš„å¼•ç”¨ï¼Œæ‰€ä»¥æ²¡æœ‰é”€æ¯è¿˜ä¿ç•™åœ¨å†…å­˜å½“ä¸­ã€‚\n```\n\n```javascript\nvar arr=['one','two','three']\nfor(var i =0;i<arr.length;i++){\nsetTimeout(function(){\n  console.log(arr[i])\n},i*1000)\n}\n// æ‰“å°3æ¬¡3 æ‰§è¡ŒsetTimeoutæ—¶forå¾ªç¯å·²ç»ç»“æŸæ­¤æ—¶çš„içš„å€¼ä¸º3\n```\n\n```javascript\nvar arr=['one','two','three']\nfor(var i =0;i<arr.length;i++){\n// åŒ¿åé—­åŒ…\n(function(index){\n  setTimeout(function(){\n  console.log(arr[index])\n},index*1000)\n})(i)\n}\n```\n\né¿å…ä½¿ç”¨è¿‡å¤šçš„é—­åŒ…ï¼Œå¯ä»¥ç”¨letå…³é”®è¯ï¼Œæ¯ä¸ªé—­åŒ…éƒ½ç»‘å®šäº†å—ä½œç”¨åŸŸçš„å˜é‡ï¼Œè¿™æ„å‘³ç€ä¸å†éœ€è¦é¢å¤–çš„é—­åŒ…ã€‚\n```javascript\nvar arr=['one','two','three']\nfor(let i =0;i<arr.length;i++){\nsetTimeout(function(){\n  console.log(arr[i])\n},i*1000)\n}\n```\n","tags":["é—­åŒ…"],"categories":["JS"]},{"title":"ä½¿ç”¨ Async/Await è®©ä½ çš„ä»£ç æ›´ç®€æ´","url":"%2Fes7async.html","content":"\nAsync/Awaitæ˜¯ä¸€ç§å…è®¸æˆ‘ä»¬åƒæ„å»ºæ²¡æœ‰å›è°ƒå‡½æ•°çš„æ™®é€šå‡½æ•°ä¸€æ ·æ„å»ºPromiseçš„æ–°è¯­æ³•ã€‚ä»¥å¾€çš„å¼‚æ­¥æ–¹æ³•æ— å¤–ä¹å›è°ƒå‡½æ•°å’Œ`Promise`ã€‚ä½†æ˜¯Async/Awaitå»ºç«‹äº[Promise](https://mydearest.cn/createPromise.html)ä¹‹ä¸Šã€‚\n\n---\n<!-- more -->\n\n## Async/Awaitè¯­æ³•\n### asyncå…³é”®å­—(æ”¾ç½®åœ¨ä¸€ä¸ªå‡½æ•°å‰é¢)ã€‚\n\n```javascript\nasync function f() {\n    return 1\n    // return Promise.resolve(1)\n}\nf().then(value) // 1\n```\n\nasyncä¿®é¥°è¿‡çš„å‡½æ•°æ€»æ˜¯è¿”å›ä¸€ä¸ªpromiseï¼Œå¦‚æœä»£ç ä¸­æœ‰return <épromise>è¯­å¥ï¼ŒJavaScriptä¼šè‡ªåŠ¨æŠŠè¿”å›çš„è¿™ä¸ªvalueå€¼åŒ…è£…æˆpromiseçš„resolvedå€¼ã€‚\n### awaitå…³é”®å­—(åªèƒ½åœ¨asyncå‡½æ•°å†…éƒ¨ä½¿ç”¨)\nå…³é”®è¯awaitå¯ä»¥è®©JavaScriptè¿›è¡Œç­‰å¾…ï¼Œç›´åˆ°ä¸€ä¸ªpromiseæ‰§è¡Œå¹¶è¿”å›å®ƒçš„ç»“æœï¼ŒJavaScriptæ‰ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚\n\n```javascript\nfunction timeout(ms) {\n    return new Promise((resolve) => {\n        setTimeout(resolve, ms);\n    });\n}\n\nasync function asyncPrint(value, ms) {\n    await timeout(ms);\n    console.log(value);\n}\n\nasyncPrint('hello world', 50);\n```\n\n### é”™è¯¯å¤„ç†(ä½¿ç”¨try-catchæ•è·)\n```javascript\nasync function f() {\n    try {\n        let response = await fetch('http://no-such-url')\n    } catch (err) {\n        alet(err) // TypeError: failed to fetch ä¹Ÿèƒ½æ•è·å¤šè¡Œè¯­å¥ ç±»ä¼¼é“¾å¼Promiseæœ€åçš„å•ä¸ªcatchå‡½æ•°\n    }\n}\nf()\n```\n\nå¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨try-catchï¼Œç„¶åasyncå‡½æ•°f()çš„è°ƒç”¨äº§ç”Ÿçš„promiseå˜æˆrejectçŠ¶æ€çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ .catchå»å¤„ç†å®ƒï¼š\n```javascript\nasync function f() {\n    let response = await fetch('http://no-such-url')\n}\n// f()å˜æˆäº†ä¸€ä¸ªrejectedçš„promise\nf().catch(alert) // TypeError: failed to fetch\n```\n\n### ç»“åˆPromise.all\nasync/awaitèƒ½å¤Ÿä¸Promise.allå‹å¥½çš„åä½œï¼Œå½“æˆ‘ä»¬éœ€è¦ç­‰å¾…å¤šä¸ªpromiseæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»–ä»¬åŒ…è£…åœ¨Promise.allä¸­ç„¶åä½¿ç”¨awaitï¼š\n\n```javascript\n\n// ç›´åˆ°æ•°ç»„å…¨éƒ¨è¿”å›ç»“æœ\nlet results = await Promise.all([\n   fetch(url1),\n   fetch(url2),\n   ...\n])\n```\n## æ€»ç»“\n\néšç€å•é¡µJavaScript webç¨‹åºçš„å…´èµ·å’Œå¯¹NodeJSçš„å¹¿æ³›é‡‡ç”¨ï¼Œå¦‚ä½•ä¼˜é›…çš„å¤„ç†å¹¶å‘å¯¹äºJavaScriptå¼€å‘äººå‘˜æ¥è¯´æ¯”ä»»ä½•ä»¥å¾€çš„æ—¶å€™éƒ½æ˜¾å¾—æ›´ä¸ºé‡è¦ã€‚Async/Awaitç¼“è§£äº†è®¸å¤šå› ä¸ºæ§åˆ¶æµé—®é¢˜è€Œå¯¼è‡´bugéåœ°çš„è¿™ä¸ªå›°æ‰°ç€JavaScriptä»£ç åº“æ•°åå¹´çš„é—®é¢˜ï¼Œå¹¶ä¸”å‡ ä¹å¯ä»¥ä¿è¯è®©ä»»ä½•å¼‚æ­¥ä»£ç å—å˜çš„æ›´ç²¾ç‚¼ï¼Œæ›´ç®€å•ï¼Œæ›´è‡ªä¿¡ã€‚","tags":["Async/Await"],"categories":["JS"]},{"title":"ä» for å¾ªç¯å…¥æ‰‹ä¼˜åŒ–æ€§èƒ½","url":"%2Fforloop.html","content":"\nä»Šå¤©è¦è¯´çš„æ˜¯æœ€ç®€å•çš„ for å¾ªç¯ï¼Œä¸€ä¸ªç®€å•çš„ for å¾ªç¯çœ‹ä¼¼æ²¡æœ‰ä»»ä½•ä¼˜åŒ–çš„æ„ä¹‰ï¼Œä½†å®è´¨ä¸Šä¼˜åŒ–å‰åå·®è·æŒºå¤§çš„ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ\n\n---\n<!-- more -->\n\nä»æœ€ç®€å•çš„éå†æ•°ç»„è¯´èµ·ã€‚\n```javascript\n// å®šä¹‰ä¸€ä¸ªæ•°ç»„arrï¼ˆå‡è®¾æ˜¯ä»åå°è¿”å›çš„æ•°æ®ï¼‰\nlet i = 0;\nlet arr = [];\nwhile (i < 50) {\n    arr.push(i);\n    i++;\n}\n```\n\nå¦‚æœæˆ‘ä»¬æƒ³ä»æ•°ç»„ arr ä¸­å–å‡ºæ•°æ®ï¼Œå°±å¿…é¡»è¦è¿›è¡Œéå†ï¼Œæ™®éçš„åšæ³•æ˜¯ï¼š\n```javascript\nfor (let i = 0; i < arr.length; i++) {\n    // arr[i]\n}\n```\n\nä½†å…¶å®è¿™æ ·çš„å†™æ³•éå†æ˜¯æœ€æ…¢çš„ï¼Œä»–è¦ç»è¿‡ä¸¤æ¬¡è¿­ä»£ï¼Œç¬¬ä¸€æ¬¡æ˜¯ i çš„è¿­ä»£ï¼Œæ¯æ¬¡éƒ½è¦åˆ¤æ–­ i æ˜¯å¦å°äº arr.lengthï¼Œç¬¬äºŒæ¬¡æ˜¯ arr çš„è¿­ä»£ï¼Œæ¯æ¬¡å¾ªç¯ arr éƒ½ä¼šè°ƒç”¨åº•å±‚çš„è¿­ä»£å™¨ï¼Œå¯¹é•¿åº¦è¿›è¡Œè®¡ç®—ï¼Œè¿™æ ·å¾ªç¯çš„æ•ˆç‡éå¸¸ä½ï¼Œæ—¶é—´ç©ºé—´å¤æ‚åº¦ä¸º O[n^2]ã€‚\n\nä¸‹é¢è¿›è¡Œä¼˜åŒ–ï¼Œçœ‹çœ‹ä¸¤è€…åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼š\n```javascript\nfor (let i = 0, len = arr.length; i < len; i++) {\n    // arr[i]\n}\n```\n\nåŒºåˆ«å°±æ˜¯ï¼Œæ•´ä¸ªå¾ªç¯å½“ä¸­ï¼Œæˆ‘ä»¬é¢„å­˜äº† len æ¥ä¿å­˜æ•°ç»„çš„é•¿åº¦ï¼Œè¿™æ ·ä¸éœ€è¦æ¯æ¬¡å¾ªç¯éƒ½è°ƒç”¨åº•å±‚è¿­ä»£å™¨ï¼Œè°ƒç”¨ä¸€æ¬¡å³å¯ï¼Œè¿™æ ·çš„æ—¶é—´ç©ºé—´å¤æ‚åº¦ä¸º O[n+1]ã€‚\n\nä½†æ˜¯è¿™å¹¶ä¸æ˜¯æœ€å®Œç¾çš„ï¼Œå› ä¸ºä¼šå¤šäº†ä¸€æ¬¡è¿­ä»£æ“ä½œï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•è¿›è¡Œä¼˜åŒ–å‘¢ï¼Ÿ\n```javascript\nfor (let i = 0, item; item = arr[i++];) {\n    // item\n}\n```\nè¿™æ¬¡è¿­ä»£çš„æ—¶é—´ç©ºé—´å¤æ‚åº¦ä¸º O[n] ï¼Œå®Œç¾åšåˆ°äº†æ¯æ¬¡ä¸€è¿­ä»£æ²¡æœ‰é€šè¿‡é•¿åº¦è¿›è¡Œåˆ¤æ–­ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ä¸‹æ ‡è¿›è¡Œå–å€¼çš„æ–¹å¼æ˜ å°„åˆ°äº†å¾ªç¯ä½“å†…éƒ¨ã€‚\n\næœ€åç”¨5ä¸‡æ¡æ•°æ®è¿›è¡Œæµ‹è¯•å„ç§æ–¹å¼çš„å¾ªç¯æ—¶é—´ï¼š\n```javascript\n// å®šä¹‰ä¸€ä¸ªæ•°ç»„arrï¼ˆå‡è®¾æ˜¯ä»åå°è¿”å›çš„æ•°æ®ï¼‰\nlet index = 0;\nlet arr = [];\nwhile (index < 50000) {\n    arr.push(index);\n    index++;\n}\n\nconsole.time('one');\nfor (let i = 0; i < arr.length; i++) {\n\n}\nconsole.timeEnd('one');\n\nconsole.time('two');\nfor (let i = 0, len = arr.length; i < len; i++) {\n\n}\nconsole.timeEnd('two');\n\nconsole.time('three');\nfor (let i = 0, item; item = arr[i++];) {\n\n}\nconsole.timeEnd('three');\n\n// es6çš„æ•°ç»„éå†\nconsole.time('four');\nfor (let i of arr) {\n\n}\nconsole.timeEnd('four');\n// ä¼šè®¿é—®å¯æšä¸¾å±æ€§å’ŒåŸå‹çš„éå†ï¼Œæ•°ç»„ä¸æ¨èä½¿ç”¨\nconsole.time('five');\nfor (let i in arr) {\n\n}\nconsole.timeEnd('five');\n// one: 0.711ms\n// two: 4.508ms\n// three: 0.006ms\n// four: 3.255ms\n// five: 11.144ms\n```\nåœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œç¬¬ä¸‰ç§å¾ªç¯æ–¹å¼æ•ˆæœæ˜¾è€Œæ˜“è§ã€‚\n\n","tags":["æ€§èƒ½ä¼˜åŒ–"],"categories":["JS"]},{"title":"es6å‡½æ•°æ–°ç‰¹æ€§","url":"%2Fes6function.html","content":"\n1. è®¾ç½®å‡½æ•°é»˜è®¤å€¼ \n2. ç»“åˆè§£æ„èµ‹å€¼é»˜è®¤å€¼ä½¿ç”¨\n3. åˆ©ç”¨rest(...å˜é‡å)ä¼ å…¥ä»»æ„å‚æ•°\n\n---\n<!-- more -->\n\n## ...restå’Œæ‰©å±•è¿ç®—ç¬¦\nrestå‚æ•°ï¼ˆâ€¦å˜é‡åï¼‰ï¼Œç”¨äºè·å–å‡½æ•°çš„å¤šä½™å‚æ•°ï¼Œrestå‚æ•°æ­é…çš„å˜é‡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥å˜é‡å°†å¤šä½™çš„å‚æ•°æ”¾å…¥å…¶ä¸­ã€‚\n```javascript\nfunction foo(...y){\n    console.log(y)  // [1,2,3,4]\n}\nfoo(1,2,3,4)\n```\n## åˆ©ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦æ•°ç»„ï¼‰æ›¿ä»£æ•°ç»„çš„applyæ–¹æ³•\nåœ¨es5ä¸­ï¼Œéœ€è¦ç”¨applyå°†æ•°ç»„è½¬åŒ–ä¸ºå‡½æ•°å‚æ•°ï¼Œåœ¨es6ä¸­å°±ä¸éœ€è¦è¿™ç§æ–¹å¼äº†ï¼Œå¯ä»¥ä½¿ç”¨â€¦æ¥ä»£æ›¿\n```javascript\nfunction f(x, y, z) {\n    console.log(x + ' ' + y + ' ' + z);\n}\nvar args = [1, 2, 3];\n// f.apply(null, args)\nf(...args)\n```\n\næ•°ç»„pushçš„ä¾‹å­ï¼š\n```javascript\nvar arr1 = [0, 1, 2]\nvar arr2 = [3, 4, 5]\nvar arr3 = arr1.concat(arr2)\nconsole.log(arr3) //[ 0, 1, 2, 3, 4, 5 ]\n\nvar arr4 = arr1.push(arr2)\nconsole.log(arr1) //[ 0, 1, 2, [ 3, 4, 5 ] ]\n```\n\nå¦‚æœæƒ³ä½¿ç”¨arr1.pushæ–¹æ³•çš„è¯ï¼Œå°±éœ€è¦ç”¨applyä¼ arr2äº†\n```javascript\nvar arr4 = Array.prototype.push.apply(arr1, arr2) //[ 0, 1, 2, 3, 4, 5 ]\n```\n\nå¦‚æœä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦çš„è¯ï¼Œå°±ç®€å•ä¸€äº›äº†\n```javascript\nvar arr4 = arr1.push(...arr2)\n```\n\n## nameå±æ€§\nå‡½æ•°çš„nameå±æ€§å¯ä»¥è¿”å›å‡½æ•°å\n```javasctrpt\nfunction abc(){\n    console.log(abc.name)\n}\nabc() // 'abc'\n```","tags":["es6"],"categories":["JS"]},{"title":"JavaScript ä¸­ this çš„è¯¦è§£","url":"%2Fjsthis.html","content":"\n## this çš„æŒ‡å‘\n\n`this` æ˜¯ js ä¸­å®šä¹‰çš„å…³é”®å­—ï¼Œ å®ƒçš„æŒ‡å‘å¹¶ä¸æ˜¯åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™ç¡®å®šçš„ï¼Œè€Œæ˜¯åœ¨è°ƒç”¨çš„æ—¶å€™ç¡®å®šçš„ã€‚æ¢å¥è¯è¯´ï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹å¼å†³å®šäº† this æŒ‡å‘ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ`this`çš„æŒ‡å‘å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å››ç§æƒ…å†µã€‚\n\n---\n<!-- more -->\n### ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨(ç›´æ¥è°ƒç”¨)ï¼šå‡½æ•°å()\nå½“å‡½æ•°ä½œä¸ºä¸€ä¸ªæ™®é€šå‡½æ•°è¢«è°ƒç”¨ï¼Œ`this`æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚åœ¨æµè§ˆå™¨é‡Œï¼Œå…¨å±€å¯¹è±¡å°±æ˜¯ windowã€‚\n```javascript\nwindow.name = 'cosyer';\nfunction getName(){\n    console.log(this.name);\n}\ngetName();                   // cosyer\n```\nå¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶`this`æŒ‡å‘äº†å…¨å±€å¯¹è±¡ windowã€‚(NodeJSçš„å…¨éƒ¨å¯¹è±¡æ˜¯global)\nåœ¨ECMAScript5çš„ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™ç§æƒ…å†µ`this`å·²ç»è¢«è§„å®šä¸ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡äº†ï¼Œè€Œæ˜¯undefinedã€‚\n```javascript\n'use strict';\nfunction fun(){\n    console.log(this);\n}\nfun();                      // undefined\n```\n### ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨\nå½“å‡½æ•°ä½œä¸ºä¸€ä¸ªå¯¹è±¡é‡Œçš„æ–¹æ³•è¢«è°ƒç”¨ï¼Œ`this`æŒ‡å‘è¯¥å¯¹è±¡\n```javascript\nvar obj = {\n    name : 'cosyer',\n    getName : function(){\n        console.log(this.name);\n    }\n}\n\nobj.getName();              // cosyer\n```\nå¦‚æœæŠŠå¯¹è±¡çš„æ–¹æ³•èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå†è°ƒç”¨è¿™ä¸ªå˜é‡ï¼š\n```javascript\nvar obj = {\n    fun1 : function(){\n        console.log(this);\n    }\n}\nvar fun2 = obj.fun1;\nfun2();                     // window\n```\næ­¤æ—¶è°ƒç”¨ fun2 æ–¹æ³• è¾“å‡ºäº† window å¯¹è±¡ï¼Œè¯´æ˜æ­¤æ—¶`this`æŒ‡å‘äº†å…¨å±€å¯¹è±¡ã€‚ç»™ fun2 èµ‹å€¼ï¼Œå…¶å®æ˜¯ç›¸å½“äºï¼š\n```javascript\nvar fun2 = function(){\n    console.log(this);\n}\n```\nå¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶çš„`this`å·²ç»è·Ÿ obj æ²¡æœ‰ä»»ä½•å…³ç³»äº†ã€‚è¿™æ—¶ fun2 æ˜¯ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨ã€‚\n\n### ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨\njsä¸­æ²¡æœ‰ç±»ï¼Œä½†æ˜¯å¯ä»¥ä»æ„é€ å™¨ä¸­åˆ›å»ºå¯¹è±¡ï¼Œå¹¶æä¾›äº†`new`è¿ç®—ç¬¦æ¥è¿›è¡Œè°ƒç”¨è¯¥æ„é€ å™¨ã€‚æ„é€ å™¨çš„å¤–è¡¨è·Ÿæ™®é€šå‡½æ•°ä¸€æ ·ï¼Œå¤§éƒ¨åˆ†çš„å‡½æ•°éƒ½å¯ä»¥å½“åšæ„é€ å™¨ä½¿ç”¨ã€‚å½“æ„é€ å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œ`this`æŒ‡å‘äº†è¯¥æ„é€ å‡½æ•°å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡ã€‚\n```javascript\nvar Person = function(){\n    this.name = 'cosyer';\n}\nvar obj = new Person();\nconsole.log(obj.name);      // cosyer\n```\nå¦‚æœæ„é€ å‡½æ•°æ˜¾å¼çš„è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆ`this`åˆ™ä¼šæŒ‡å‘è¯¥å¯¹è±¡ã€‚\n```javascript\nvar Person = function(){\n    this.name = 'cosyer';\n    return {\n        name : 'chenyu'\n    }\n}\nvar obj = new Person();\nconsole.log(obj.name);      // chenyu\n```\nå¦‚æœè¯¥å‡½æ•°ä¸ç”¨`new`è°ƒç”¨ï¼Œå½“ä½œæ™®é€šå‡½æ•°æ‰§è¡Œï¼Œé‚£ä¹ˆ`this`ä¾ç„¶æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚\n\n### call() æˆ– apply() è°ƒç”¨ Function.prototype.bind()å°†å½“å‰å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šå¯¹è±¡ç»‘å®šè¿”å›æ–°å‡½æ•°ä¹‹åå†è¿›è¡Œè°ƒç”¨\né€šè¿‡è°ƒç”¨å‡½æ•°çš„ call() æˆ– apply() æ–¹æ³•å¯åŠ¨æ€çš„æ”¹å˜`this`çš„æŒ‡å‘ã€‚\n```javascript\nvar obj1 = {\n    name : 'cosyer',\n    getName : function(){\n        console.log(this.name);\n    }\n}\nvar obj2 = {\n    name : 'chenyu'\n}\n\nobj1.getName();             // cosyer\nobj1.getName.call(obj2);    // chenyu\nobj1.getName.apply(obj2);   // chenyu\n```\n**ç®€å•çš„å®ç°bindæ–¹æ³•**\n```javascript\nconst obj = {};\n\nfunction test() {\n    console.log(this === obj);\n}\n\n// è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œæ¨¡æ‹Ÿ bind() å¯¹ this çš„å½±å“\nfunction myBind(func, target) {\n    return function() {\n        return func.apply(target, arguments); // ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå‡½æ•°è¿è¡Œçš„thisæŒ‡å‘\n    };\n}\n\nconst testObj = myBind(test, obj);\ntest();     // false\ntestObj();  // true\n```\nä»ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥çœ‹åˆ°ï¼Œé¦–å…ˆï¼Œé€šè¿‡é—­åŒ…ï¼Œä¿æŒäº† targetï¼Œå³ç»‘å®šçš„å¯¹è±¡ï¼›ç„¶ååœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œå¯¹åŸå‡½æ•°ä½¿ç”¨äº† apply æ–¹æ³•æ¥æŒ‡å®šå‡½æ•°çš„ thisã€‚\n\nä¸è¿‡ä½¿ç”¨ apply å’Œ call çš„æ—¶å€™ä»ç„¶éœ€è¦æ³¨æ„ï¼Œå¦‚æœç›®å½•å‡½æ•°æœ¬èº«æ˜¯ä¸€ä¸ªç»‘å®šäº† this å¯¹è±¡çš„å‡½æ•°ï¼Œé‚£ apply å’Œ call ä¸ä¼šåƒé¢„æœŸé‚£æ ·æ‰§è¡Œ\n```javascript\nconst obj = {};\n\nfunction test() {\n    console.log(this === obj);\n}\n\n// ç»‘å®šåˆ°ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯ obj\nconst testObj = test.bind({});\ntest.apply(obj);    // true\n\n// æœŸæœ› this æ˜¯ objï¼Œå³è¾“å‡º true\n// ä½†æ˜¯å› ä¸º testObj ç»‘å®šäº†ä¸æ˜¯ obj çš„å¯¹è±¡ï¼Œæ‰€ä»¥ä¼šè¾“å‡º false\ntestObj.apply(obj); // false\n```\n\n## ç®­å¤´å‡½æ•° \n{% note info %}\nç®­å¤´å‡½æ•°çš„å¼•å…¥æœ‰ä¸¤ä¸ªæ–¹é¢çš„ä½œç”¨ï¼šä¸€æ˜¯æ›´ç®€çŸ­çš„å‡½æ•°ä¹¦å†™ï¼ŒäºŒæ˜¯å¯¹`this`çš„è¯æ³•è§£æã€‚\nåœ¨ç®­å¤´å‡½æ•°å‡ºç°ä¹‹å‰ï¼Œæ¯ä¸ªæ–°å®šä¹‰çš„å‡½æ•°éƒ½æœ‰å…¶è‡ªå·±çš„`this`å€¼ï¼ˆä¾‹å¦‚ï¼Œæ„é€ å‡½æ•°çš„`this`æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹çš„å‡½æ•°çš„`this`å€¼ä¸º undefinedï¼›å¦‚æœå‡½æ•°æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨çš„ï¼Œåˆ™å…¶`this`æŒ‡å‘äº†é‚£ä¸ªè°ƒç”¨å®ƒçš„å¯¹è±¡ï¼‰ã€‚åœ¨é¢å‘å¯¹è±¡é£æ ¼çš„ç¼–ç¨‹ä¸­ï¼Œè¿™ä¼šå¸¦æ¥å¾ˆå¤šå›°æ‰°ã€‚\n{% endnote %}\n\n### ES6 çš„ç®­å¤´å‡½æ•° ()=>ï¼ŒæŒ‡å‘ä¸ä¸€èˆ¬functionå®šä¹‰çš„å‡½æ•°ä¸åŒï¼Œæ¯”è¾ƒå®¹æ˜“ç»•æ™•ï¼Œç®­å¤´å‡½æ•°`this`çš„å®šä¹‰ï¼šç®­å¤´å‡½æ•°ä¸­çš„`this`æ˜¯åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™ç»‘å®šï¼Œè€Œä¸æ˜¯åœ¨æ‰§è¡Œå‡½æ•°çš„æ—¶å€™ç»‘å®šã€‚æœ¬è´¨æ¥è¯´ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„`this`ï¼Œå®ƒçš„`this`æ˜¯æ´¾ç”Ÿè€Œæ¥çš„ã€‚ç®­å¤´å‡½æ•°ä¼šæ•è·å…¶æ‰€åœ¨ä¸Šä¸‹æ–‡çš„`this`å€¼ï¼Œä½œä¸ºè‡ªå·±çš„`this`å€¼ï¼Œå³æŒ‡å‘æ‰€åœ¨ä¸Šä¸‹æ–‡çš„æ‰§è¡Œç¯å¢ƒ(ç›´æ¥å¤–å±‚å‡½æ•°)ã€‚\n\n### åŸºç¡€è¯­æ³•\n```javascript\n// ç­‰ä»·äº: => { return expression; } \n(param1, param2, â€¦, paramN) => { statements }\n(param1, param2, â€¦, paramN) => expression\n\n// å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œåœ†æ‹¬å·æ˜¯å¯é€‰çš„:\n(singleParam) => { statements }\nsingleParam => { statements }\n\n// æ— å‚æ•°æˆ–è€…å¤šå‚æ•°çš„ç®­å¤´å‡½æ•°éœ€è¦ä½¿ç”¨åœ†æ‹¬å·æˆ–è€…ä¸‹åˆ’çº¿:\n() => { statements } _ => { statements }\n```\n### é«˜çº§è¯­æ³•\n```javascript\n// åªè¿”å›ä¸€ä¸ªå¯¹è±¡å­—é¢é‡,æ²¡æœ‰å…¶ä»–è¯­å¥æ—¶, åº”å½“ç”¨åœ†æ‹¬å·å°†å…¶åŒ…èµ·æ¥:\nparams => ({foo: bar})\n\n// æ”¯æŒ Rest parameters å’Œ default parameters:\n(param1, param2, ...rest) => { statements }\n(param1 = defaultValue1, param2, â€¦, paramN = defaultValueN) => { statements }\n\n// æ”¯æŒå‚æ•°åˆ—è¡¨ä¸­çš„è§£æ„èµ‹å€¼\nvar f = ([a, b] = [1, 2], = ) => a + b + c;\nf(); // 6\n```\n\n### ç®­å¤´å‡½æ•°ä¸å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡ï¼Œ\nargumentså¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ï¼Œå¦‚æœè¦ç”¨çš„è¯ï¼Œå¯ä»¥ç”¨restå‚æ•°ä»£æ›¿\n\n### ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹\n```javascript\nvar Foo = () => {};\n\nconsole.log(Foo.prototype); // undefined\n```\n### ç®­å¤´å‡½æ•°æ— æ³•æ„é€ å‡½æ•°\n```javascript\nvar Foo = () => {};\n\nvar foo = new Foo(); // TypeError: Foo is not a constructor\n```\n### ç®­å¤´å‡½æ•°æ— æ³•ä½¿ç”¨yield\nyield å…³é”®å­—é€šå¸¸ä¸èƒ½åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨ï¼ˆé™¤éæ˜¯åµŒå¥—åœ¨å…è®¸ä½¿ç”¨çš„å‡½æ•°å†…ï¼‰ã€‚å› æ­¤ï¼Œç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œç”Ÿæˆå™¨ã€‚\n\n### ç®­å¤´å‡½æ•°æˆ–è€…ç»„ä»¶ä¸Šç»‘å®šäº‹ä»¶çš„æ—¶å€™this.xxx.bind(this)ï¼Œè¿™æ ·ä¼šç”Ÿæˆæ–°å‡½æ•°ï¼Œæ¨èconstructoré‡Œbind()\n","tags":["thisæŒ‡å‘"],"categories":["JS"]},{"title":"reacté¢è¯•é¢˜è®°å½•","url":"%2FreactInterview.html","content":"\n{% fi http://p33v4b0bc.bkt.clouddn.com/reactInterview.jpeg , reactInterview, React%}\n---\n<!-- more -->\n\n## Reacté¢è¯•é—®é¢˜\nä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å…³äº React çš„é¢è¯•é—®é¢˜åˆ—è¡¨ï¼š\n\n* [React çš„å·¥ä½œåŸç†](#react-%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86)?\n* [ä½¿ç”¨ React æœ‰ä½•ä¼˜ç‚¹](#%E4%BD%BF%E7%94%A8-react-%E6%9C%89%E4%BD%95%E4%BC%98%E7%82%B9)ï¼Ÿ\n* [å±•ç¤ºç»„ä»¶(Presentational component)å’Œå®¹å™¨ç»„ä»¶(Container component)ä¹‹é—´æœ‰ä½•ä¸åŒ](#%E5%B1%95%E7%A4%BA%E7%BB%84%E4%BB%B6presentational-component%E5%92%8C%E5%AE%B9%E5%99%A8%E7%BB%84%E4%BB%B6container-component%E4%B9%8B%E9%97%B4%E6%9C%89%E4%BD%95%E4%B8%8D%E5%90%8C)ï¼Ÿ\n* [ç±»ç»„ä»¶(Class component)å’Œå‡½æ•°å¼ç»„ä»¶(Functional component)ä¹‹é—´æœ‰ä½•ä¸åŒ](#%E7%B1%BB%E7%BB%84%E4%BB%B6class-component%E5%92%8C%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BB%84%E4%BB%B6functional-component%E4%B9%8B%E9%97%B4%E6%9C%89%E4%BD%95%E4%B8%8D%E5%90%8C)ï¼Ÿ\n* [(ç»„ä»¶çš„)çŠ¶æ€(state)å’Œå±æ€§(props)ä¹‹é—´æœ‰ä½•ä¸åŒ](#%E7%BB%84%E4%BB%B6%E7%9A%84%E7%8A%B6%E6%80%81state%E5%92%8C%E5%B1%9E%E6%80%A7props%E4%B9%8B%E9%97%B4%E6%9C%89%E4%BD%95%E4%B8%8D%E5%90%8C)ï¼Ÿ\n* [æŒ‡å‡º(ç»„ä»¶)ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ä¸åŒ](#%E6%8C%87%E5%87%BA%E7%BB%84%E4%BB%B6%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%96%B9%E6%B3%95%E7%9A%84%E4%B8%8D%E5%90%8C)ï¼Ÿ\n* [åº”è¯¥åœ¨ React ç»„ä»¶çš„ä½•å¤„å‘èµ· Ajax è¯·æ±‚](#%E5%BA%94%E8%AF%A5%E5%9C%A8-react-%E7%BB%84%E4%BB%B6%E7%9A%84%E4%BD%95%E5%A4%84%E5%8F%91%E8%B5%B7-ajax-%E8%AF%B7%E6%B1%82)ï¼Ÿ\n* [ä½•ä¸ºå—æ§ç»„ä»¶(controlled component)](#%E4%BD%95%E4%B8%BA%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6controlled-component)ï¼Ÿ\n* [åœ¨ React ä¸­ï¼Œrefs çš„ä½œç”¨æ˜¯ä»€ä¹ˆ](#%E5%9C%A8-react-%E4%B8%ADrefs-%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88)ï¼Ÿ\n* [ä½•ä¸ºé«˜é˜¶ç»„ä»¶(higher order component)](#%E4%BD%95%E4%B8%BA%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6higher-order-component)ï¼Ÿ\n* [ä½¿ç”¨ç®­å¤´å‡½æ•°(arrow functions)çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆ](#%E4%BD%BF%E7%94%A8%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0arrow-functions%E7%9A%84%E4%BC%98%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88)ï¼Ÿ\n* [ä¸ºä»€ä¹ˆå»ºè®®ä¼ é€’ç»™ setState çš„å‚æ•°æ˜¯ä¸€ä¸ª callback è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡](#%E4%B8%BA%E4%BB%80%E4%B9%88%E5%BB%BA%E8%AE%AE%E4%BC%A0%E9%80%92%E7%BB%99-setstate-%E7%9A%84%E5%8F%82%E6%95%B0%E6%98%AF%E4%B8%80%E4%B8%AA-callback-%E8%80%8C%E4%B8%8D%E6%98%AF%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1)ï¼Ÿ\n* [é™¤äº†åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®š `this`ï¼Œè¿˜æœ‰å…¶å®ƒæ–¹å¼å—](#%E9%99%A4%E4%BA%86%E5%9C%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%AD%E7%BB%91%E5%AE%9A-this%E8%BF%98%E6%9C%89%E5%85%B6%E5%AE%83%E6%96%B9%E5%BC%8F%E5%90%97)ï¼Ÿ\n* [æ€ä¹ˆé˜»æ­¢ç»„ä»¶çš„æ¸²æŸ“](#%E6%80%8E%E4%B9%88%E9%98%BB%E6%AD%A2%E7%BB%84%E4%BB%B6%E7%9A%84%E6%B8%B2%E6%9F%93)ï¼Ÿ\n* [å½“æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨æ—¶ï¼Œä½•ä¸º keyï¼Ÿè®¾ç½® key çš„ç›®çš„æ˜¯ä»€ä¹ˆ](#%E5%BD%93%E6%B8%B2%E6%9F%93%E4%B8%80%E4%B8%AA%E5%88%97%E8%A1%A8%E6%97%B6%E4%BD%95%E4%B8%BA-key%E8%AE%BE%E7%BD%AE-key-%E7%9A%84%E7%9B%AE%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88)ï¼Ÿ\n* [(åœ¨æ„é€ å‡½æ•°ä¸­)è°ƒç”¨ super(props) çš„ç›®çš„æ˜¯ä»€ä¹ˆ](#%E5%9C%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E4%B8%AD%E8%B0%83%E7%94%A8-superprops-%E7%9A%84%E7%9B%AE%E7%9A%84%E6%98%AF%E4%BB%80%E4%B9%88)ï¼Ÿ\n* [ä½•ä¸º JSX](#%E4%BD%95%E4%B8%BA-jsx)ï¼Ÿ\n* [æ€ä¹ˆç”¨ React.createElement é‡å†™ä¸‹é¢çš„ä»£ç ](#%E6%80%8E%E4%B9%88%E7%94%A8%20React.createElement%20%E9%87%8D%E5%86%99%E4%B8%8B%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81)ï¼Ÿ\n* [ä½•ä¸º `Children`](#%E4%BD%95%E4%B8%BA-children)ï¼Ÿ\n* [åœ¨ React ä¸­ï¼Œä½•ä¸º state](#%E5%9C%A8-react-%E4%B8%AD%E4%BD%95%E4%B8%BA-state)ï¼Ÿ\n* [ä½ ä¸ºä½•æ’æ–¥ create-react-app](#%E4%BD%A0%E4%B8%BA%E4%BD%95%E6%8E%92%E6%96%A5-create-react-app)ï¼Ÿ\n* [ä½•ä¸º redux](#%E4%BD%95%E4%B8%BA-redux)ï¼Ÿ\n* [åœ¨ Redux ä¸­ï¼Œä½•ä¸º store](#%E5%9C%A8-redux-%E4%B8%AD%E4%BD%95%E4%B8%BA-store)ï¼Ÿ\n* [ä½•ä¸º action](#%E4%BD%95%E4%B8%BA-action)ï¼Ÿ\n* [ä½•ä¸º reducer](#%E4%BD%95%E4%B8%BA-reducer)ï¼Ÿ\n* [Redux Thunk çš„ä½œç”¨æ˜¯ä»€ä¹ˆ](#redux-thunk-%E7%9A%84%E4%BD%9C%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88)ï¼Ÿ\n* [ä½•ä¸ºçº¯å‡½æ•°(pure function)](#%E4%BD%95%E4%B8%BA%E7%BA%AF%E5%87%BD%E6%95%B0pure-function)ï¼Ÿ\n* [ä½ å–œæ¬¢ React çš„å“ªäº›æ–¹é¢](#%E4%BD%A0%E5%96%9C%E6%AC%A2-react-%E7%9A%84%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2)ï¼Ÿ\n* [ä½ ä¸å–œæ¬¢ React çš„å“ªäº›æ–¹é¢](#%E4%BD%A0%E4%B8%8D%E5%96%9C%E6%AC%A2-react-%E7%9A%84%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2)ï¼Ÿ\n* [ç¤ºä¾‹é¡¹ç›®](#%E7%A4%BA%E4%BE%8B%E9%A1%B9%E7%9B%AE)\n\n#### React çš„å·¥ä½œåŸç†\nReact ä¼šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿ DOM(virtual DOM)ã€‚å½“ä¸€ä¸ªç»„ä»¶ä¸­çš„çŠ¶æ€æ”¹å˜æ—¶ï¼ŒReact é¦–å…ˆä¼šé€šè¿‡ \"diff\" ç®—æ³•æ¥æ ‡è®°è™šæ‹Ÿ DOM ä¸­çš„æ”¹å˜ï¼Œç¬¬äºŒæ­¥æ˜¯è°ƒèŠ‚(reconciliation)ï¼Œä¼šç”¨ diff çš„ç»“æœæ¥æ›´æ–° DOMã€‚\n\n#### ä½¿ç”¨ React æœ‰ä½•ä¼˜ç‚¹\n* åªéœ€æŸ¥çœ‹ `render` å‡½æ•°å°±ä¼šå¾ˆå®¹æ˜“çŸ¥é“ä¸€ä¸ªç»„ä»¶æ˜¯å¦‚ä½•è¢«æ¸²æŸ“çš„\n* JSX çš„å¼•å…¥ï¼Œä½¿å¾—ç»„ä»¶çš„ä»£ç æ›´åŠ å¯è¯»ï¼Œä¹Ÿæ›´å®¹æ˜“çœ‹æ‡‚ç»„ä»¶çš„å¸ƒå±€ï¼Œæˆ–è€…ç»„ä»¶ä¹‹é—´æ˜¯å¦‚ä½•äº’ç›¸å¼•ç”¨çš„\n* æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ï¼Œè¿™å¯ä»¥æ”¹è¿› SEO å’Œæ€§èƒ½\n* æ˜“äºæµ‹è¯•\n* React åªå…³æ³¨ View å±‚ï¼Œæ‰€ä»¥å¯ä»¥å’Œå…¶å®ƒä»»ä½•æ¡†æ¶(å¦‚Backbone.js, Angular.js)ä¸€èµ·ä½¿ç”¨\n\n#### å±•ç¤ºç»„ä»¶(Presentational component)å’Œå®¹å™¨ç»„ä»¶(Container component)ä¹‹é—´æœ‰ä½•ä¸åŒ\nå±•ç¤ºç»„ä»¶å…³å¿ƒç»„ä»¶çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆã€‚å±•ç¤ºä¸“é—¨é€šè¿‡ props æ¥å—æ•°æ®å’Œå›è°ƒï¼Œå¹¶ä¸”å‡ ä¹ä¸ä¼šæœ‰è‡ªèº«çš„çŠ¶æ€ï¼Œä½†å½“å±•ç¤ºç»„ä»¶æ‹¥æœ‰è‡ªèº«çš„çŠ¶æ€æ—¶ï¼Œé€šå¸¸ä¹Ÿåªå…³å¿ƒ UI çŠ¶æ€è€Œä¸æ˜¯æ•°æ®çš„çŠ¶æ€ã€‚\n\nå®¹å™¨ç»„ä»¶åˆ™æ›´å…³å¿ƒç»„ä»¶æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚å®¹å™¨ç»„ä»¶ä¼šä¸ºå±•ç¤ºç»„ä»¶æˆ–è€…å…¶å®ƒå®¹å™¨ç»„ä»¶æä¾›æ•°æ®å’Œè¡Œä¸º(behavior)ï¼Œå®ƒä»¬ä¼šè°ƒç”¨ `Flux actions`ï¼Œå¹¶å°†å…¶ä½œä¸ºå›è°ƒæä¾›ç»™å±•ç¤ºç»„ä»¶ã€‚å®¹å™¨ç»„ä»¶ç»å¸¸æ˜¯æœ‰çŠ¶æ€çš„ï¼Œå› ä¸ºå®ƒä»¬æ˜¯(å…¶å®ƒç»„ä»¶çš„)æ•°æ®æºã€‚\n\n#### ç±»ç»„ä»¶(Class component)å’Œå‡½æ•°å¼ç»„ä»¶(Functional component)ä¹‹é—´æœ‰ä½•ä¸åŒ\n* ç±»ç»„ä»¶ä¸ä»…å…è®¸ä½ ä½¿ç”¨æ›´å¤šé¢å¤–çš„åŠŸèƒ½ï¼Œå¦‚ç»„ä»¶è‡ªèº«çš„çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¹Ÿèƒ½ä½¿ç»„ä»¶ç›´æ¥è®¿é—® `store` å¹¶ç»´æŒçŠ¶æ€\n* å½“ç»„ä»¶ä»…æ˜¯æ¥æ”¶ `props`ï¼Œå¹¶å°†ç»„ä»¶è‡ªèº«æ¸²æŸ“åˆ°é¡µé¢æ—¶ï¼Œè¯¥ç»„ä»¶å°±æ˜¯ä¸€ä¸ª 'æ— çŠ¶æ€ç»„ä»¶(stateless component)'ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªçº¯å‡½æ•°æ¥åˆ›å»ºè¿™æ ·çš„ç»„ä»¶ã€‚è¿™ç§ç»„ä»¶ä¹Ÿè¢«ç§°ä¸ºå“‘ç»„ä»¶(dumb components)æˆ–å±•ç¤ºç»„ä»¶\n\n#### (ç»„ä»¶çš„)çŠ¶æ€(state)å’Œå±æ€§(props)ä¹‹é—´æœ‰ä½•ä¸åŒ\n`State` æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºç»„ä»¶æŒ‚è½½æ—¶æ‰€éœ€æ•°æ®çš„é»˜è®¤å€¼ã€‚`State` å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œå‘ç”Ÿçªå˜ï¼Œä½†å¤šæ•°æ—¶å€™æ˜¯ä½œä¸ºç”¨æˆ·äº‹ä»¶è¡Œä¸ºçš„ç»“æœã€‚\n\n`Props`(properties çš„ç®€å†™)åˆ™æ˜¯ç»„ä»¶çš„é…ç½®ã€‚`props` ç”±çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå¹¶ä¸”å°±å­ç»„ä»¶è€Œè¨€ï¼Œ`props` æ˜¯ä¸å¯å˜çš„(immutable)ã€‚ç»„ä»¶ä¸èƒ½æ”¹å˜è‡ªèº«çš„ propsï¼Œä½†æ˜¯å¯ä»¥æŠŠå…¶å­ç»„ä»¶çš„ props æ”¾åœ¨ä¸€èµ·(ç»Ÿä¸€ç®¡ç†)ã€‚Props ä¹Ÿä¸ä»…ä»…æ˜¯æ•°æ®--å›è°ƒå‡½æ•°ä¹Ÿå¯ä»¥é€šè¿‡ props ä¼ é€’ã€‚\n\n#### æŒ‡å‡º(ç»„ä»¶)ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ä¸åŒ\n* `componentWillMount` -- å¤šç”¨äºæ ¹ç»„ä»¶ä¸­çš„åº”ç”¨ç¨‹åºé…ç½®\n* `componentDidMount` -- åœ¨è¿™å¯ä»¥å®Œæˆæ‰€æœ‰æ²¡æœ‰ DOM å°±ä¸èƒ½åšçš„æ‰€æœ‰é…ç½®ï¼Œå¹¶å¼€å§‹è·å–æ‰€æœ‰ä½ éœ€è¦çš„æ•°æ®ï¼›å¦‚æœéœ€è¦è®¾ç½®äº‹ä»¶ç›‘å¬ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™å®Œæˆ\n* `componentWillReceiveProps` -- è¿™ä¸ªå‘¨æœŸå‡½æ•°ä½œç”¨äºç‰¹å®šçš„ prop æ”¹å˜å¯¼è‡´çš„ state è½¬æ¢\n* `shouldComponentUpdate` -- å¦‚æœä½ æ‹…å¿ƒç»„ä»¶è¿‡åº¦æ¸²æŸ“ï¼Œ`shouldComponentUpdate` æ˜¯ä¸€ä¸ªæ”¹å–„æ€§èƒ½çš„åœ°æ–¹ï¼Œå› ä¸ºå¦‚æœç»„ä»¶æ¥æ”¶äº†æ–°çš„ `prop`ï¼Œ å®ƒå¯ä»¥é˜»æ­¢(ç»„ä»¶)é‡æ–°æ¸²æŸ“ã€‚shouldComponentUpdate åº”è¯¥è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼æ¥å†³å®šç»„ä»¶æ˜¯å¦è¦é‡æ–°æ¸²æŸ“\n* `componentWillUpdate` -- å¾ˆå°‘ä½¿ç”¨ã€‚å®ƒå¯ä»¥ç”¨äºä»£æ›¿ç»„ä»¶çš„ `componentWillReceiveProps` å’Œ `shouldComponentUpdate`(ä½†ä¸èƒ½è®¿é—®ä¹‹å‰çš„ props)\n* `componentDidUpdate` -- å¸¸ç”¨äºæ›´æ–° DOMï¼Œå“åº” prop æˆ– state çš„æ”¹å˜\n* `componentWillUnmount` -- åœ¨è¿™ä½ å¯ä»¥å–æ¶ˆç½‘ç»œè¯·æ±‚ï¼Œæˆ–è€…ç§»é™¤æ‰€æœ‰ä¸ç»„ä»¶ç›¸å…³çš„äº‹ä»¶ç›‘å¬å™¨\n\n#### åº”è¯¥åœ¨ React ç»„ä»¶çš„ä½•å¤„å‘èµ· Ajax è¯·æ±‚\nåœ¨ React ç»„ä»¶ä¸­ï¼Œåº”è¯¥åœ¨ `componentDidMount` ä¸­å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡â€œæŒ‚è½½â€(è¢«æ·»åŠ åˆ° DOM)æ—¶æ‰§è¡Œï¼Œåœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ä»…ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä½ ä¸èƒ½ä¿è¯åœ¨ç»„ä»¶æŒ‚è½½ä¹‹å‰ Ajax è¯·æ±‚å·²ç»å®Œæˆï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼Œä¹Ÿå°±æ„å‘³ç€ä½ å°†å°è¯•åœ¨ä¸€ä¸ªæœªæŒ‚è½½çš„ç»„ä»¶ä¸Šè°ƒç”¨ setStateï¼Œè¿™å°†ä¸èµ·ä½œç”¨ã€‚åœ¨ `componentDidMount` ä¸­å‘èµ·ç½‘ç»œè¯·æ±‚å°†ä¿è¯è¿™æœ‰ä¸€ä¸ªç»„ä»¶å¯ä»¥æ›´æ–°äº†ã€‚\n\n#### ä½•ä¸ºå—æ§ç»„ä»¶(controlled component)\nåœ¨ HTML ä¸­ï¼Œç±»ä¼¼ `<input>`, `<textarea>` å’Œ `<select>` è¿™æ ·çš„è¡¨å•å…ƒç´ ä¼šç»´æŠ¤è‡ªèº«çš„çŠ¶æ€ï¼Œå¹¶åŸºäºç”¨æˆ·çš„è¾“å…¥æ¥æ›´æ–°ã€‚å½“ç”¨æˆ·æäº¤è¡¨å•æ—¶ï¼Œå‰é¢æåˆ°çš„å…ƒç´ çš„å€¼å°†éšè¡¨å•ä¸€èµ·è¢«å‘é€ã€‚ä½†åœ¨ React ä¸­ä¼šæœ‰äº›ä¸åŒï¼ŒåŒ…å«è¡¨å•å…ƒç´ çš„ç»„ä»¶å°†ä¼šåœ¨ state ä¸­è¿½è¸ªè¾“å…¥çš„å€¼ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨å›è°ƒå‡½æ•°æ—¶ï¼Œå¦‚ `onChange` ä¼šæ›´æ–° stateï¼Œé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚ä¸€ä¸ªè¾“å…¥è¡¨å•å…ƒç´ ï¼Œå®ƒçš„å€¼é€šè¿‡ React çš„è¿™ç§æ–¹å¼æ¥æ§åˆ¶ï¼Œè¿™æ ·çš„å…ƒç´ å°±è¢«ç§°ä¸º\"å—æ§å…ƒç´ \"ã€‚\n\n#### åœ¨ React ä¸­ï¼Œrefs çš„ä½œç”¨æ˜¯ä»€ä¹ˆ\nRefs å¯ä»¥ç”¨äºè·å–ä¸€ä¸ª DOM èŠ‚ç‚¹æˆ–è€… React ç»„ä»¶çš„å¼•ç”¨ã€‚ä½•æ—¶ä½¿ç”¨ refs çš„å¥½çš„ç¤ºä¾‹æœ‰ç®¡ç†ç„¦ç‚¹/æ–‡æœ¬é€‰æ‹©ï¼Œè§¦å‘å‘½ä»¤åŠ¨ç”»ï¼Œæˆ–è€…å’Œç¬¬ä¸‰æ–¹ DOM åº“é›†æˆã€‚ä½ åº”è¯¥é¿å…ä½¿ç”¨ String ç±»å‹çš„ Refs å’Œå†…è”çš„ ref å›è°ƒã€‚Refs å›è°ƒæ˜¯ React æ‰€æ¨èçš„ã€‚\n\n#### ä½•ä¸ºé«˜é˜¶ç»„ä»¶(higher order component)\né«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ªä»¥ç»„ä»¶ä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶çš„å‡½æ•°ã€‚HOC è¿è¡Œä½ é‡ç”¨ä»£ç ã€é€»è¾‘å’Œå¼•å¯¼æŠ½è±¡ã€‚æœ€å¸¸è§çš„å¯èƒ½æ˜¯ Redux çš„ `connect` å‡½æ•°ã€‚é™¤äº†ç®€å•åˆ†äº«å·¥å…·åº“å’Œç®€å•çš„ç»„åˆï¼ŒHOCæœ€å¥½çš„æ–¹å¼æ˜¯å…±äº« React ç»„ä»¶ä¹‹é—´çš„è¡Œä¸ºã€‚å¦‚æœä½ å‘ç°ä½ åœ¨ä¸åŒçš„åœ°æ–¹å†™äº†å¤§é‡ä»£ç æ¥åšåŒä¸€ä»¶äº‹æ—¶ï¼Œå°±åº”è¯¥è€ƒè™‘å°†ä»£ç é‡æ„ä¸ºå¯é‡ç”¨çš„ HOCã€‚\nè£…é¥°å™¨@decoration\nç»ƒä¹ \n\n<hr />\n\n* å†™ä¸€ä¸ªåè½¬å…¶è¾“å…¥çš„ HOC\n* å†™ä¸€ä¸ªä» API æä¾›æ•°æ®ç»™ä¼ å…¥çš„ç»„ä»¶çš„ HOC\n* å†™ä¸€ä¸ªå®ç° shouldComponentUpdate æ¥é¿å… reconciliation çš„ HOC\n* å†™ä¸€ä¸ªé€šè¿‡ `React.Children.toArray` å¯¹ä¼ å…¥ç»„ä»¶çš„å­ç»„ä»¶è¿›è¡Œæ’åºçš„ HOC\n\n#### ä½¿ç”¨ç®­å¤´å‡½æ•°(arrow functions)çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆ\n* ä½œç”¨åŸŸå®‰å…¨ï¼šåœ¨ç®­å¤´å‡½æ•°ä¹‹å‰ï¼Œæ¯ä¸€ä¸ªæ–°åˆ›å»ºçš„å‡½æ•°éƒ½æœ‰å®šä¹‰è‡ªèº«çš„ `this` å€¼(åœ¨æ„é€ å‡½æ•°ä¸­æ˜¯æ–°å¯¹è±¡ï¼›åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°è°ƒç”¨ä¸­çš„ `this` æ˜¯æœªå®šä¹‰çš„ï¼›å¦‚æœå‡½æ•°è¢«ç§°ä¸ºâ€œå¯¹è±¡æ–¹æ³•â€ï¼Œåˆ™ä¸ºåŸºç¡€å¯¹è±¡ç­‰)ï¼Œä½†ç®­å¤´å‡½æ•°ä¸ä¼šï¼Œå®ƒä¼šä½¿ç”¨å°é—­æ‰§è¡Œä¸Šä¸‹æ–‡çš„ `this` å€¼ã€‚\n* ç®€å•ï¼šç®­å¤´å‡½æ•°æ˜“äºé˜…è¯»å’Œä¹¦å†™\n* æ¸…æ™°ï¼šå½“ä¸€åˆ‡éƒ½æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œä»»ä½•å¸¸è§„å‡½æ•°éƒ½å¯ä»¥ç«‹å³ç”¨äºå®šä¹‰ä½œç”¨åŸŸã€‚å¼€å‘è€…æ€»æ˜¯å¯ä»¥æŸ¥æ‰¾ next-higher å‡½æ•°è¯­å¥ï¼Œä»¥æŸ¥çœ‹ `this` çš„å€¼\n\n#### ä¸ºä»€ä¹ˆå»ºè®®ä¼ é€’ç»™ setState çš„å‚æ•°æ˜¯ä¸€ä¸ª callback è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡\nå› ä¸º `this.props` å’Œ `this.state` çš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä¸èƒ½ä¾èµ–å®ƒä»¬çš„å€¼å»è®¡ç®—ä¸‹ä¸€ä¸ª stateã€‚\n\n#### é™¤äº†åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®š `this`ï¼Œè¿˜æœ‰å…¶å®ƒæ–¹å¼å—\nä½ å¯ä»¥ä½¿ç”¨å±æ€§åˆå§‹å€¼è®¾å®šé¡¹(property initializers)æ¥æ­£ç¡®ç»‘å®šå›è°ƒï¼Œcreate-react-app ä¹Ÿæ˜¯é»˜è®¤æ”¯æŒçš„ã€‚åœ¨å›è°ƒä¸­ä½ å¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œä½†é—®é¢˜æ˜¯æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å›è°ƒã€‚\n\n#### æ€ä¹ˆé˜»æ­¢ç»„ä»¶çš„æ¸²æŸ“\nåœ¨ç»„ä»¶çš„ `render` æ–¹æ³•ä¸­è¿”å› `null` å¹¶ä¸ä¼šå½±å“è§¦å‘ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•\n\n#### å½“æ¸²æŸ“ä¸€ä¸ªåˆ—è¡¨æ—¶ï¼Œä½•ä¸º keyï¼Ÿè®¾ç½® key çš„ç›®çš„æ˜¯ä»€ä¹ˆ\nKeys ä¼šæœ‰åŠ©äº React è¯†åˆ«å“ªäº› `items` æ”¹å˜äº†ï¼Œè¢«æ·»åŠ äº†æˆ–è€…è¢«ç§»é™¤äº†ã€‚Keys åº”è¯¥è¢«èµ‹äºˆæ•°ç»„å†…çš„å…ƒç´ ä»¥èµ‹äºˆ(DOM)å…ƒç´ ä¸€ä¸ªç¨³å®šçš„æ ‡è¯†ï¼Œé€‰æ‹©ä¸€ä¸ª key çš„æœ€ä½³æ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²èƒ½æƒŸä¸€åœ°æ ‡è¯†ä¸€ä¸ªåˆ—è¡¨é¡¹ã€‚å¾ˆå¤šæ—¶å€™ä½ ä¼šä½¿ç”¨æ•°æ®ä¸­çš„ IDs ä½œä¸º keysï¼Œå½“ä½ æ²¡æœ‰ç¨³å®šçš„ IDs ç”¨äºè¢«æ¸²æŸ“çš„ `items` æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é¡¹ç›®ç´¢å¼•ä½œä¸ºæ¸²æŸ“é¡¹çš„ keyï¼Œä½†è¿™ç§æ–¹å¼å¹¶ä¸æ¨èï¼Œå¦‚æœ `items` å¯ä»¥é‡æ–°æ’åºï¼Œå°±ä¼šå¯¼è‡´ `re-render` å˜æ…¢ã€‚\n\n#### (åœ¨æ„é€ å‡½æ•°ä¸­)è°ƒç”¨ super(props) çš„ç›®çš„æ˜¯ä»€ä¹ˆ\nåœ¨ `super()` è¢«è°ƒç”¨ä¹‹å‰ï¼Œå­ç±»æ˜¯ä¸èƒ½ä½¿ç”¨ `this` çš„ï¼Œåœ¨ ES2015 ä¸­ï¼Œå­ç±»å¿…é¡»åœ¨ `constructor` ä¸­è°ƒç”¨ `super()`ã€‚ä¼ é€’ `props` ç»™ `super()` çš„åŸå› åˆ™æ˜¯ä¾¿äº(åœ¨å­ç±»ä¸­)èƒ½åœ¨ `constructor` è®¿é—® `this.props`ã€‚\n\n#### ä½•ä¸º JSX\nJSX æ˜¯ JavaScript è¯­æ³•çš„ä¸€ç§è¯­æ³•æ‰©å±•ï¼Œå¹¶æ‹¥æœ‰ JavaScript çš„å…¨éƒ¨åŠŸèƒ½ã€‚JSX ç”Ÿäº§ React \"å…ƒç´ \"ï¼Œä½ å¯ä»¥å°†ä»»ä½•çš„ JavaScript è¡¨è¾¾å¼å°è£…åœ¨èŠ±æ‹¬å·é‡Œï¼Œç„¶åå°†å…¶åµŒå…¥åˆ° JSX ä¸­ã€‚åœ¨ç¼–è¯‘å®Œæˆä¹‹åï¼ŒJSX è¡¨è¾¾å¼å°±ç¼–ç¨‹äº†å¸¸è§„çš„ JavaScript å¯¹è±¡ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ `if` è¯­å¥å’Œ `for` å¾ªç¯å†…éƒ¨ä½¿ç”¨ JSXï¼Œå°†å®ƒèµ‹å€¼ç»™å˜é‡ï¼Œæ¥å—å®ƒä½œä¸ºå‚æ•°ï¼Œå¹¶ä»å‡½æ•°ä¸­è¿”å›å®ƒã€‚\n\n#### æ€ä¹ˆç”¨ React.createElement é‡å†™ä¸‹é¢çš„ä»£ç \n\nQuestionï¼š\n\n```js\nconst element = (\n  <h1 className=\"greeting\">\n    Hello, world!\n  </h1>\n);\n```\n\nAnswerï¼š\n\n```js\nconst element = React.createElement(\n  'h1',\n  {className: 'greeting'},\n  'Hello, world!'\n);\n```\n\n#### ä½•ä¸º `Children`\nåœ¨JSXè¡¨è¾¾å¼ä¸­ï¼Œä¸€ä¸ªå¼€å§‹æ ‡ç­¾(æ¯”å¦‚`<a>`)å’Œä¸€ä¸ªå…³é—­æ ‡ç­¾(æ¯”å¦‚`</a>`)ä¹‹é—´çš„å†…å®¹ä¼šä½œä¸ºä¸€ä¸ªç‰¹æ®Šçš„å±æ€§`props.children`è¢«è‡ªåŠ¨ä¼ é€’ç»™åŒ…å«ç€å®ƒçš„ç»„ä»¶ã€‚\n\nè¿™ä¸ªå±æ€§æœ‰è®¸å¤šå¯ç”¨çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ `React.Children.map`ï¼Œ`React.Children.forEach`ï¼Œ `React.Children.count`ï¼Œ `React.Children.only`ï¼Œ`React.Children.toArray`ã€‚\n\n#### åœ¨ React ä¸­ï¼Œä½•ä¸º state\nState å’Œ props ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯ç§æœ‰çš„ï¼Œå¹¶ä¸”å®Œå…¨ç”±ç»„ä»¶è‡ªèº«æ§åˆ¶ã€‚State æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒæœ‰æ•°æ®ï¼Œå¹¶å†³å®šç»„ä»¶å¦‚ä½•æ¸²æŸ“çš„å¯¹è±¡ã€‚\n\n#### ä½ ä¸ºä½•æ’æ–¥ create-react-app\nåœ¨ä½ æ’æ–¥ä¹‹å‰ï¼Œä½ å¹¶ä¸èƒ½å»é…ç½® webpack æˆ– babel presetsã€‚\n\n#### ä½•ä¸º redux\nRedux çš„åŸºæœ¬æ€æƒ³æ˜¯æ•´ä¸ªåº”ç”¨çš„ state ä¿æŒåœ¨ä¸€ä¸ªå•ä¸€çš„ store ä¸­ã€‚store å°±æ˜¯ä¸€ä¸ªç®€å•çš„ javascript å¯¹è±¡ï¼Œè€Œæ”¹å˜åº”ç”¨ state çš„å”¯ä¸€æ–¹å¼æ˜¯åœ¨åº”ç”¨ä¸­è§¦å‘ actionsï¼Œç„¶åä¸ºè¿™äº› actions ç¼–å†™ reducers æ¥ä¿®æ”¹ stateã€‚æ•´ä¸ª state è½¬åŒ–æ˜¯åœ¨ reducers ä¸­å®Œæˆï¼Œå¹¶ä¸”ä¸åº”è¯¥ç”±ä»»ä½•å‰¯ä½œç”¨ã€‚\n\n#### åœ¨ Redux ä¸­ï¼Œä½•ä¸º store\nStore æ˜¯ä¸€ä¸ª javascript å¯¹è±¡ï¼Œå®ƒä¿å­˜äº†æ•´ä¸ªåº”ç”¨çš„ stateã€‚ä¸æ­¤åŒæ—¶ï¼ŒStore ä¹Ÿæ‰¿æ‹…ä»¥ä¸‹èŒè´£ï¼š\n\n* å…è®¸é€šè¿‡ `getState()` è®¿é—® state\n* è¿è¡Œé€šè¿‡ `dispatch(action)` æ”¹å˜ state\n* é€šè¿‡ `subscribe(listener)` æ³¨å†Œ listeners\n* é€šè¿‡ `subscribe(listener)` è¿”å›çš„å‡½æ•°å¤„ç† listeners çš„æ³¨é”€\n\n#### ä½•ä¸º action\nActions æ˜¯ä¸€ä¸ªçº¯ javascript å¯¹è±¡ï¼Œå®ƒä»¬å¿…é¡»æœ‰ä¸€ä¸ª type å±æ€§è¡¨æ˜æ­£åœ¨æ‰§è¡Œçš„ action çš„ç±»å‹ã€‚å®è´¨ä¸Šï¼Œaction æ˜¯å°†æ•°æ®ä»åº”ç”¨ç¨‹åºå‘é€åˆ° store çš„æœ‰æ•ˆè½½è·ã€‚\n\n#### ä½•ä¸º reducer\nä¸€ä¸ª reducer æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œè¯¥å‡½æ•°ä»¥å…ˆå‰çš„ state å’Œä¸€ä¸ª action ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸‹ä¸€ä¸ª stateã€‚\n\n#### Redux Thunk çš„ä½œç”¨æ˜¯ä»€ä¹ˆ\nRedux thunk æ˜¯ä¸€ä¸ªå…è®¸ä½ ç¼–å†™è¿”å›ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯ä¸€ä¸ª action çš„ actions creators çš„ä¸­é—´ä»¶ã€‚å¦‚æœæ»¡è¶³æŸä¸ªæ¡ä»¶ï¼Œthunk åˆ™å¯ä»¥ç”¨æ¥å»¶è¿Ÿ action çš„æ´¾å‘(dispatch)ï¼Œè¿™å¯ä»¥å¤„ç†å¼‚æ­¥ action çš„æ´¾å‘(dispatch)ã€‚\n\n#### ä½•ä¸ºçº¯å‡½æ•°(pure function)\nä¸€ä¸ªçº¯å‡½æ•°æ˜¯ä¸€ä¸ªä¸ä¾èµ–äºä¸”ä¸æ”¹å˜å…¶ä½œç”¨åŸŸä¹‹å¤–çš„å˜é‡çŠ¶æ€çš„å‡½æ•°ï¼Œè¿™ä¹Ÿæ„å‘³ç€ä¸€ä¸ªçº¯å‡½æ•°å¯¹äºåŒæ ·çš„å‚æ•°æ€»æ˜¯è¿”å›åŒæ ·çš„ç»“æœã€‚\n\n#### ä½ å–œæ¬¢ React çš„å“ªäº›æ–¹é¢\n...\n\n#### ä½ ä¸å–œæ¬¢ React çš„å“ªäº›æ–¹é¢\n...\n\n#### ç¤ºä¾‹é¡¹ç›®\n* [React Spotify](https://github.com/Pau1fitz/react-spotify)\n* [React Soundcloud](https://github.com/andrewngu/sound-redux)\n\n#### è™šæ‹Ÿdom æ™®é€šçš„jså¯¹è±¡\næ’å…¥æ–°ç»„ä»¶æœ‰äº†keyå¯ä»¥å¸®åŠ©reactæ‰¾åˆ°æ˜ å°„\n\n#### äº‹ä»¶å§”æ‰˜\næ¯ä¸ªsetStateé‡æ–°æ¸²æŸ“æ•´ä¸ªå­æ ‘ã€‚ å¦‚æœè¦å‹ç¼©æ€§èƒ½ï¼Œè¯·å°½å¯èƒ½è°ƒç”¨ setStateï¼Œå¹¶ä½¿ç”¨shouldComponentUpdate æ¥é˜²æ­¢é‡æ–°æ¸²æŸ“å¤§å‹å­æ ‘ã€‚","tags":["é¢è¯•"],"categories":["JS"]},{"title":"æ­å»ºVPSç§‘å­¦ä¸Šç½‘","url":"%2FscienceInternet.html","content":"\n{% fi http://p33v4b0bc.bkt.clouddn.com/shadowsocks.jpg, Shadowsocks, Shadowsocks %}\n---\n<!-- more -->\n\n{% note info %}\n\nå¿«é€Ÿæ­å»ºShadowsocks\n\n{% endnote %}\n\n## [è´­ä¹°VultræœåŠ¡å™¨](https://www.vultr.com/)\n\n### VultræœåŠ¡å™¨ä»·æ ¼\n\nVultræœåŠ¡å™¨æŒ‰å°æ—¶è®¡è´¹,æœ€ä½0.004ç¾å…ƒ/h,ç®—èµ·æ¥2.5ç¾å…ƒ/æœˆï¼Œä¸”destoryæ‰æœåŠ¡å™¨æ˜¯ä¸æ”¶è´¹çš„ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå¦‚æœæš‚æ—¶æ²¡æœ‰ä½¿ç”¨è¿˜ä¸€ç›´æ‰£è´¹çš„é—®é¢˜ã€‚\n\næœ€ä½ä»·æ ¼çš„æœåŠ¡å™¨æ˜¯512Mçš„å†…å­˜ï¼Œæ¯ä¸ªæœˆ500Gçš„æµé‡ï¼Œåªèƒ½è¯´99%çš„æƒ…å†µä¸‹å®Œå…¨å¤Ÿç”¨äº†ï¼\n\n![introduce](http://p33v4b0bc.bkt.clouddn.com/vultr.png)\n\n## ä¹°å¥½ä¸­æ„çš„åœ°åŒºèŠ‚ç‚¹æœåŠ¡å™¨ä¹‹åï¼Œwindowsç³»ç»Ÿå¯ä»¥ç”¨Xshell sshè¿æ¥åˆ°æœåŠ¡å™¨ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹æ­å»ºssè„šæœ¬å‘½ä»¤\n\n```javascript\n\nwget --no-check-certificate -O shadowsocks.sh\nhttps://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh\n \nchmod +x shadowsocks.sh\n \n./shadowsocks.sh 2>&1 | tee shadowsocks.log\n\n```\n\næ¥ç€æŒ‰ç…§æç¤ºè¾“å…¥å¯†ç ï¼Œç«¯å£å’ŒåŠ å¯†æ–¹å¼ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![ss1](http://p33v4b0bc.bkt.clouddn.com/ss1.png)\n\n![ss2](http://p33v4b0bc.bkt.clouddn.com/ss1.png)\n\nç„¶åå¯ä»¥å»å¬é¦–æ­Œ~ï¼ŒæˆåŠŸå®‰è£…ä¹‹åæœ‰ä½ é…ç½®çš„ä¿¡æ¯æ˜¾ç¤ºï¼Œè®°ä½è¿™äº›ä¿¡æ¯ã€‚\n\n## å®‰è£…sså®¢æˆ·ç«¯ï¼Œé…ç½®å¥½ä¸Šé¢çš„æœåŠ¡å™¨é…ç½®ä¿¡æ¯ï¼Œå°±å¯ä»¥å¼€å¿ƒåœ°ç©è€äº†ã€‚Chromeæ’ä»¶æ¨èä½¿ç”¨Proxy SwitchySharpæ¥ç®¡ç†å’Œåˆ‡æ¢ä»£ç†é…ç½®éå¸¸å¥½ç”¨ã€‚\n\nWindowså®¢æˆ·ç«¯(ä»£ç†ç«¯å£é»˜è®¤1080)\nhttps://github.com/shadowsocks/shadowsocks-windows/releases\n\nUbuntu \nsudo add-apt-repository ppa:hzwhuang/ss-qt5 \nsudo apt-get update \nsudo apt-get install shadowsocks-qt5\n\nMacå®¢æˆ·ç«¯(ä»£ç†ç«¯å£é»˜è®¤1086)\n\nhttps://github.com/shadowsocks/ShadowsocksX-NG/releases\n\nAndroidå®¢æˆ·ç«¯\n\nhttps://github.com/shadowsocks/shadowsocks-android/releases","tags":["vultr"],"categories":["å·¥å…·"]},{"title":"Promiseè¯ç”Ÿè®°","url":"%2FcreatePromise.html","content":"\n{% fi http://p33v4b0bc.bkt.clouddn.com/promise.png, Promise, Promise %}\n\nå‰ç«¯è¿‘å¹´çš„å…´èµ·ï¼Œæœ‰å¤§éƒ¨åˆ†æ˜¯å› ä¸º `NodeJS` çš„è¯ç”Ÿï¼Œè€Œ `NodeJS` æ˜¯ä¸ªé€‚ç”¨äº **å¼‚æ­¥IO** å¯†é›†å‹çš„è¯­è¨€ï¼Œä¸€äº›åŸºäº `NodeJS` çš„æ¡†æ¶ï¼Œæ¯”å–» *KOA2ã€Adonis* å°±æœ‰å¤§é‡çš„ `async` å’Œ `await` è¯­æ³•ï¼Œ`async`çš„å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯ `Promise` å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ `async` å’Œ `await` è¯­æ³•ï¼Œå†™å‡ºä¼˜é›…çš„å¼‚æ­¥ä»£ç ï¼Œæ¥æ›¿æ¢éš¾çœ‹ä¸”éš¾ç»´æŠ¤çš„å›è°ƒå‡½æ•°ã€‚\n\n## Promise æ¦‚å¿µ\n`Promise`æ˜¯ä¸€ç§å¯¹å¼‚æ­¥æ“ä½œçš„å°è£…ï¼Œä¸»æµçš„è§„èŒƒæ˜¯Promise/A+ã€‚\n`Promise`å¯ä»¥ä½¿å¾—å¼‚æ­¥ä»£ç å±‚æ¬¡æ¸…æ™°ï¼Œä¾¿äºç†è§£ï¼Œä¸”æ›´åŠ å®¹æ˜“ç»´æŠ¤ã€‚\n`Promise`æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯resolveå’Œrejectã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”± JavaScript å¼•æ“æä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²ã€‚\nç”Ÿæˆå®ä¾‹æ—¶å›æ‰§ä¿¡ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼›<Br/> \n`resolve`å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œæˆåŠŸâ€ï¼ˆå³ä» pending å˜ä¸º fulfilledï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼›\n`reject`å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œå¤±è´¥â€ï¼ˆå³ä» pending å˜ä¸º rejectedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚\n\n---\n<!-- more -->\n\n```javascript\n// æ‰§è¡Œé¡ºåº\nlet promise = new Promise(function(resolve, reject) {\n  console.log('Promise'); // æ–°å»ºåç«‹å³æ‰§è¡Œ\n  resolve();\n});\npromise.then(function() {\n  console.log('resolved.'); // åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆåæ‰ä¼šæ‰§è¡Œ\n});\nconsole.log('Hi!');\n// Promise\n// Hi!\n// resolved\n```\næ¥ä¸‹æ¥æˆ‘ä»¬å°±ç”¨`Promise`ç»“åˆajaxæ¥ä½¿ç”¨\n```\nconst getJSON = function(url) {\n  const promise = new Promise(function(resolve, reject){\n    const handler = function() {\n      if (this.readyState !== 4) {\n        return;\n      }\n      if (this.status === 200) {\n        resolve(this.response);\n      } else {\n        reject(new Error(this.statusText));\n      }\n    };\n    const client = new XMLHttpRequest();\n    client.open(\"GET\", url);\n    client.onreadystatechange = handler;\n    client.responseType = \"json\";\n    client.setRequestHeader(\"Accept\", \"application/json\");\n    client.send(params);\n  });\n  return promise;\n};\n\ngetJSON(\"/posts.json\").then(function(json) {\n  console.log('Contents: ' + json);\n}, function(error) {\n  console.error('å‡ºé”™äº†', error);\n});\n```\n\nè¿™é‡Œæˆ‘ä»¬ä¼šæ¸è¿›å¼çš„æ¥åˆ›å»ºä¸€ä¸ª `Promise` çš„å®ç°ï¼Œå¦‚æœï¼Œä½ è¿˜ä¸äº†è§£ `Promise` ï¼Œèµ¶å¿«ç§»æ­¥ [Promise](http://es6.ruanyifeng.com/#docs/promise) äº†è§£å­¦ä¹ ï¼Œå½“ç„¶è¿™ä¸ªå®ç°ä¼šç¬¦åˆ [Promise/A+](https://promisesaplus.com) è§„èŒƒï¼Œ`JavaScript` ä¸­æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„ `Promise` åº“ï¼Œ[bluebird](http://bluebirdjs.com/docs/getting-started.html) å°±æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ `Promise` ç±»åº“ï¼Œç›¸æ¯”å…¶å®ƒç¬¬ä¸‰æ–¹ç±»åº“æˆ–æ ‡å‡†å¯¹è±¡æ¥è¯´ï¼Œå…¶æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼šåŠŸèƒ½æ›´é½å…¨è€Œä¸è‡ƒè‚¿ã€æµè§ˆå™¨å…¼å®¹æ€§æ›´å¥½,å¤§å®¶å¯ä»¥äº†è§£ä¸‹ã€‚\n\n---\n\nåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€å¹²ã€‚ã€‚ã€‚ ğŸ˜ \n\n## å®šä¹‰ Promise ç±»å‹\n\nä¸€ä¸ªç®€å• `Promise` è¯­æ³•ï¼Œå¦‚ä¸‹\n\n```javascript\nconst promise = new Promise(function(resolve, reject) {\n  // ... doSomething\n\n  if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){\n    resolve(value);\n  } else {\n    reject(error);\n  }\n});\n\npromise.then(function(value) {\n  // success\n}, function(error) {\n  // failure ç¬¬äºŒä¸ªå‡½æ•°å¯é€‰\n});\n```\n\n### å®ç° resolve å’Œ then\n\né¦–å…ˆæˆ‘ä»¬ä»¥ä¸Š ğŸ‘† çš„è¯­æ³•ï¼Œè‡ªå·±å®šä¹‰ä¸€ä¸ª `Promise` å®ä¾‹\n\n```javascript\nfunction Promise(fn) {\n  let callback = null;\n  //å®ç° then æ–¹æ³• , å…ˆä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå®ç°ä¼ ä¸€ä¸ªå‚æ•° -- resolve\n  this.then = function(cb) {\n    callback = cb;\n  };\n\n  //å®ç° resolve , value:å¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå€¼\n  function resolve(value) {\n    callback(value);\n  }\n  //æ‰§è¡Œ function å‚æ•°\n  fn(resolve);\n}\n```\nä¸€ä¸ªç®€å•çš„å®ä¾‹å†™å¥½äº†ï¼Œç„¶åï¼Œæ¥ç”¨ä¸€ä¸‹ï¼Œçœ‹çœ‹ ğŸ‘€ ç»“æœå¦‚ä½•\n\n```javascript\nconst p = new Promise(function(resolve){\n  resolve(66);\n});\n\np.then(function(value){\n  console.log(value);\n});\n\n```\n{% note info %}\n\næ‰§è¡Œç»“æœæ˜¯ï¼š`callback is not a function`\n\n{% endnote %}\n\n### æ”¹è¿›1ï¼šå»¶æ—¶resolveï¼Œä¿®æ”¹ callback ä¸ºå¼‚æ­¥\n\n**è¿™é‡Œå°±é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š **  \n\n** ç›®å‰çš„Promiseæœ‰ä¸€ä¸ªbugï¼Œå‡å¦‚fnä¸­æ‰€åŒ…å«çš„æ˜¯åŒæ­¥ä»£ç ï¼Œåˆ™resolveä¼šç«‹å³æ‰§è¡Œï¼Œ`callback` è¿˜æ˜¯ `null` ï¼Œæˆ‘ä»¬çš„ä»£ç æ˜¯åŒæ­¥çš„ï¼Œè€Œä¸æ˜¯å¼‚æ­¥çš„ã€‚</br> å¦‚æ˜¯ï¼Œæƒ³åŠæ³•è§£å†³æ‰è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åˆ©ç”¨ `setTimeout` , æŠŠ `callback` åŠ å…¥å¼‚æ­¥é˜Ÿåˆ—** \n\nä»£ç å¦‚ä¸‹ ğŸ‘‡\n\n```javascript\nfunction Promise(fn) {\n  let callback = null;\n  //å®ç° then æ–¹æ³• , å…ˆä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå®ç°ä¼ ä¸€ä¸ªå‚æ•° -- resolve\n  this.then = function(cb) {\n    callback = cb;\n  };\n\n  //å®ç° resolve , value:å¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå€¼\n  function resolve(value) {\n    // ç”¨ setTimeout æŠŠ callback åŠ å…¥åˆ°å¼‚æ­¥é˜Ÿåˆ—ï¼Œè¿™æ ·å°±ä¼šï¼Œå…ˆæ‰§è¡Œ then() æ–¹æ³•\n    setTimeout(function(){\n      callback(value);\n    },0)\n  }\n  //æ‰§è¡Œ function å‚æ•°\n  fn(resolve);\n}\n```\n\n### æ”¹è¿›2ï¼šæ³¨å†Œå¤šä¸ªå›è°ƒå‡½æ•°ï¼Œå¹¶å®ç°thençš„é“¾å¼è°ƒç”¨\n\n```javascript\nfunction Promise(fn) {\n  let value = null\n  let callbackList = [];\n  this.then = function(cb) {\n    callbackList.push(cb);\n    // å®ç°é“¾å¼è°ƒç”¨\n    return this\n  };\n\n  function resolve(newValue) {\n    value = newValue\n    setTimeout(function(){\n       // éå†callbackListæ•°ç»„ä¾æ¬¡æ‰§è¡Œ\n       callbackList.forEach((callback)=>{\n         callback(value)\n       })\n    },0)\n  }\n  fn(resolve);\n}\n```\n### æ”¹è¿›3ï¼šå¼•å…¥çŠ¶æ€\n\n```javascript\nfunction Promise(fn) {\n  let state='pending'\n  let value = null\n  let callbackList = [];\n  this.then = function(cb) {\n    if(state=='pending'){\n      // pendingåŠ å…¥é˜Ÿåˆ—\n      callbackList.push(cb);\n      return this\n    }\n    if(state=='fulfilled'){\n      // fulfilledç«‹å³æ‰§è¡Œ\n      cb(value)\n      return this\n    }\n  };\n\n  function resolve(newValue) {\n    value = newValue\n    setTimeout(function(){\n       callbackList.forEach((callback)=>{\n         callback(value)\n       })\n    },0)\n  }\n  fn(resolve);\n}\n```\n\n**æ‰‹åŠ¨å®ç°ä¸€ä¸ªPromiseï¼š**\n```javascript\nclass Promise(){\n  construtor(fn){\n       // æ‰§è¡Œé˜Ÿåˆ—\n       this._wathcList=[]\n       // æˆåŠŸ\n       this._success_res=null\n       // å¤±è´¥\n       this._error_res=null\n       this._status=\"success\"\n       fn((...args))=>{\n          // ä¿å­˜æˆåŠŸæ•°æ®\n          this._success_res=args\n          this._status='success'\n          // è‹¥ä¸ºå¼‚æ­¥åˆ™å›å¤´æ‰§è¡ŒthenæˆåŠŸæ–¹æ³•\n          this._watchList.forEach(element => {\n              element.fn1(...args);\n          });\n       },(...args)=>{\n          // ä¿å­˜å¤±è´¥æ•°æ®\n          this._error_res=args\n          this._status='error'\n          // è‹¥ä¸ºå¼‚æ­¥åˆ™å›å¤´æ‰§è¡ŒthenæˆåŠŸæ–¹æ³•\n          this._watchList.forEach(element => {\n              element.fn2(...args);\n          });\n       }\n  }\n  // then å‡½æ•°\n  then(fn1, fn2) {\n      if (this._status === \"success\") {\n          fn1(...this._success_res);\n      } else if (this._status === \"error\") {\n          fn2(...this._error_res);\n      } else {\n          this._watchList.push({\n              fn1,\n              fn2\n          })\n      }\n  }\n}\n```\n**å®ç°Promise.all**\n```javascript\nPromise1.all = function(arr) {\n    // å­˜æ”¾ç»“æœé›†\n    let result = [];\n    return Promise1(function(resolve, reject) {\n        let i = 0;\n        // è¿›è¡Œè¿­ä»£æ‰§è¡Œ\n        function next() {\n            arr[i].then(function(res) {\n                // å­˜æ”¾æ¯ä¸ªæ–¹æ³•çš„è¿”å›å€¼\n                result.push(res);\n                i++;\n                // è‹¥å…¨éƒ¨æ‰§è¡Œå®Œ\n                if (i === result.length) {\n                    // æ‰§è¡Œthenå›è°ƒ\n                    resolve(result);\n                } else {\n                    // ç»§ç»­è¿­ä»£\n                    next();\n                }\n            }, reject)\n        }\n    })\n}\n```\n\n## Promiseä½¿ç”¨æ³¨æ„ç‚¹\n1. ä¸€èˆ¬æ¥è¯´ï¼Œè°ƒç”¨`resolve`æˆ–`reject`ä»¥åï¼Œ`Promise`çš„ä½¿å‘½å°±å®Œæˆäº†ï¼Œåç»§æ“ä½œåº”è¯¥æ”¾åˆ°`then`æ–¹æ³•é‡Œé¢ï¼Œè€Œä¸åº”è¯¥ç›´æ¥å†™åœ¨`resolve`æˆ–`reject`çš„åé¢ã€‚æ‰€ä»¥ï¼Œæœ€å¥½åœ¨å®ƒä»¬å‰é¢åŠ ä¸Š`return`è¯­å¥ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰æ„å¤–ã€‚\n\n2. `Promise`å®ä¾‹å…·æœ‰`then`æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ`then`æ–¹æ³•æ˜¯å®šä¹‰åœ¨åŸå‹å¯¹è±¡`Promise.prototype`ä¸Šçš„ã€‚å®ƒçš„ä½œç”¨æ˜¯ä¸º`Promise`å®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ã€‚å‰é¢è¯´è¿‡ï¼Œ`then`æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯`resolved`çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰æ˜¯`rejected`çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚`then`æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„`Promise`å®ä¾‹ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯åŸæ¥é‚£ä¸ª`Promise`å®ä¾‹ï¼‰ã€‚å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³thenæ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ª`then`æ–¹æ³•ã€‚\n\n3. `Promise.prototype.catch`æ–¹æ³•æ˜¯.then(null, rejection)çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚`getJSON`æ–¹æ³•è¿”å›ä¸€ä¸ª`Promise`å¯¹è±¡ï¼Œå¦‚æœè¯¥å¯¹è±¡çŠ¶æ€å˜ä¸º`resolved`ï¼Œåˆ™ä¼šè°ƒç”¨`then`æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼›å¦‚æœå¼‚æ­¥æ“ä½œæŠ›å‡ºé”™è¯¯ï¼ŒçŠ¶æ€å°±ä¼šå˜ä¸º`rejected`ï¼Œå°±ä¼šè°ƒç”¨`catch`æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¤„ç†è¿™ä¸ªé”™è¯¯ã€‚å¦å¤–ï¼Œthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœè¿è¡Œä¸­æŠ›å‡ºé”™è¯¯ï¼Œä¹Ÿä¼šè¢«`catch`æ–¹æ³•æ•è·ã€‚\n\n4. ä¸€èˆ¬æ¥è¯´ï¼Œä¸è¦åœ¨thenæ–¹æ³•é‡Œé¢å®šä¹‰`reject`çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼ˆå³thençš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œæ€»æ˜¯ä½¿ç”¨`catch`æ–¹æ³•ã€‚\n\n5. è·Ÿä¼ ç»Ÿçš„`try/catch`ä»£ç å—ä¸åŒçš„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨`catch`æ–¹æ³•æŒ‡å®šé”™è¯¯å¤„ç†çš„å›è°ƒå‡½æ•°ï¼Œ`Promise`å¯¹è±¡æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç ï¼Œå³ä¸ä¼šæœ‰ä»»ä½•ååº”ï¼Œ`Promise`ä¼šåƒæ‰é”™è¯¯ã€‚\n","tags":["Promise"],"categories":["JS"]},{"title":"å¦‚ä½•ä½¿ç”¨ markdown è¯­æ³•å†™åšå®¢","url":"%2FmarkdownGrammar.html","content":"\n{% fi http://p33v4b0bc.bkt.clouddn.com/markdown.png, Markdown, Markdown %}\n\n# æ ‡é¢˜1\n## æ ‡é¢˜2\n*æ–œä½“*\n**ç²—ä½“**\n***ç²—æ–œä½“***<br/>\n~~åˆ é™¤çº¿~~\n<u>ä¸‹åˆ’çº¿æ–‡æœ¬</u>\n\n1. I\n2. Love \n3. You\n\n- ç‚¹\n\n+ Foo\n+ Bar\n---\n<!-- more -->\n\nåˆ†éš”çº¿\n***\n--- \n___\n\n* * *\n>ä¸€çº§å¼•ç”¨\n>>äºŒçº§å¼•ç”¨\n\n`#include<iostream>`\n```\n#include <iostream>\nint main()\n{\nreturn 0;\n}\n```\n~~~\n#include <iostream>\nint main()\n{\nreturn 0;\n}\n~~~\n|æ ‡é¢˜|æ ‡é¢˜|æ ‡é¢˜|\n|:---|:---:|---:|\n|å±…å·¦æµ‹è¯•æ–‡æœ¬|å±…ä¸­æµ‹è¯•æ–‡æœ¬|å±…å³æµ‹è¯•æ–‡æœ¬|\n|å±…å·¦æµ‹è¯•æ–‡æœ¬1|å±…ä¸­æµ‹è¯•æ–‡æœ¬2|å±…å³æµ‹è¯•æ–‡æœ¬3|\n|å±…å·¦æµ‹è¯•æ–‡æœ¬11|å±…ä¸­æµ‹è¯•æ–‡æœ¬22|å±…å³æµ‹è¯•æ–‡æœ¬33|\n|å±…å·¦æµ‹è¯•æ–‡æœ¬111|å±…ä¸­æµ‹è¯•æ–‡æœ¬222|å±…å³æµ‹è¯•æ–‡æœ¬333|\n\n- [x] å·²å®Œæˆäº‹é¡¹\n- [ ] å¾…åŠäº‹é¡¹1\n- [ ] å¾…åŠäº‹é¡¹2\n\n### åæ–œæ \n\n`Markdown` å¯ä»¥åˆ©ç”¨åæ–œæ æ¥æ’å…¥ä¸€äº›åœ¨è¯­æ³•ä¸­æœ‰å…¶å®ƒæ„ä¹‰çš„ç¬¦å·ï¼Œä¾‹å¦‚ï¼šå¦‚æœä½ æƒ³è¦ç”¨æ˜Ÿå·åŠ åœ¨æ–‡å­—æ—è¾¹çš„æ–¹å¼æ¥åšå‡ºå¼ºè°ƒæ•ˆæœï¼ˆä½†ä¸ç”¨ `<em>` æ ‡ç­¾ï¼‰ï¼Œä½ å¯ä»¥åœ¨æ˜Ÿå·çš„å‰é¢åŠ ä¸Šåæ–œæ ï¼š\n```\n\\*literal asterisks\\*\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\n\\*literal asterisks\\*\n\n`Markdown` æ”¯æŒä»¥ä¸‹è¿™äº›ç¬¦å·å‰é¢åŠ ä¸Šåæ–œæ æ¥å¸®åŠ©æ’å…¥æ™®é€šçš„ç¬¦å·ï¼š\n\n```\n  \\   åæ–œçº¿\n  `   åå¼•å·\n  *   æ˜Ÿå·\n  _   åº•çº¿\n  {}  èŠ±æ‹¬å·\n  []  æ–¹æ‹¬å·\n  ()  æ‹¬å¼§\n  #   äº•å­—å·\n  +   åŠ å·\n  -   å‡å·\n  .   è‹±æ–‡å¥ç‚¹\n  !   æƒŠå¹å·\n```\nç™»å½•[ç™¾åº¦](http://www.baidu.com)\n![Teddy Bear](http://img2.everychina.com/img/d7/f7/1b580dfa9315111397ef93fd24ea-250x250c1-77f7/love_valentine_plush_teddy_bear.jpg)\n","tags":["markdown"],"categories":["å·¥å…·"]},{"title":"Hello World - çƒ­çˆ±ç¼–ç¨‹çš„æ™®é€šäººï¼Œé¡ºä¾¿ä»¥æ­¤ä¸ºç”Ÿã€‚","url":"%2Fhello-world.html","content":"\nä¹‹å‰ä¸€ç›´åœ¨åšå®¢å›­å†™åšå®¢ï¼Œä½†éšç€æŠ€æœ¯çš„å‘å±•ï¼Œåšå®¢å›­çš„æ ·å¼å’Œè‡ªå®šä¹‰å†…å®¹è¿œè¿œä¸èƒ½è¾¾åˆ°æˆ‘æ‰€æœŸæœ›ã€‚æ•…æ­¤å†³å®šè¿ç§»åšå®¢ï¼Œå¸Œæœ›èƒ½æ€»ç»“å½’çº³å¥½è‡ªå·±çš„æŠ€æœ¯ä½“ç³»ï¼Œæ‹“å®½æ‹“æ·±æŠ€æœ¯æ ˆï¼Œé‡æ–°å¼€å‘O(âˆ©_âˆ©)Oå“ˆå“ˆ~ã€‚\n\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n---\n<!-- more -->\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]}]