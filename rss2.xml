<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>cosyer&#39;s Blog</title>
    <link>http://mydearest.cn/</link>
    <atom:link href="/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>é™ˆå®‡çš„åšå®¢</description>
    <pubDate>Wed, 04 Nov 2020 13:41:42 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>reactæºç è§£æç³»åˆ—ä¸€(Reactç›¸å…³API)</title>
      <link>http://mydearest.cn/2020/react%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E7%B3%BB%E5%88%97%E4%B8%80(React%E7%9B%B8%E5%85%B3API).html</link>
      <guid>http://mydearest.cn/2020/react%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E7%B3%BB%E5%88%97%E4%B8%80(React%E7%9B%B8%E5%85%B3API).html</guid>
      <pubDate>Tue, 03 Nov 2020 11:21:48 GMT</pubDate>
      <description>
      
        &lt;p&gt;ä»Šå¤©å¼€å§‹å­¦ä¹ reactæºç ç›¸å…³çš„å†…å®¹ï¼Œæºç åŸºäºç‰ˆæœ¬&lt;code&gt;v16.6.0&lt;/code&gt;ã€‚React16ç›¸è¾ƒäºä¹‹å‰çš„ç‰ˆæœ¬æ˜¯æ ¸å¿ƒä¸Šçš„ä¸€æ¬¡é‡å†™ï¼Œè™½ç„¶ä¸»è¦çš„APIéƒ½æ²¡æœ‰å˜åŒ–ï¼Œä½†æ˜¯å¢åŠ äº†å¾ˆå¤šèƒ½åŠ›ã€‚å¹¶ä¸”é¦–æ¬¡å¼•å…¥äº†&lt;code&gt;Fiber&lt;/code&gt;çš„æ¦‚å¿µï¼Œä¹‹åæ–°çš„åŠŸèƒ½éƒ½æ˜¯å›´ç»•&lt;code&gt;Fiber&lt;/code&gt;è¿›è¡Œå®ç°ï¼Œæ¯”å¦‚&lt;code&gt;AsyncMode&lt;/code&gt;ï¼Œ&lt;code&gt;Profiler&lt;/code&gt;ç­‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Reactä¸ReactDomçš„åŒºåˆ«&quot;&gt;&lt;a href=&quot;#Reactä¸ReactDomçš„åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;Reactä¸ReactDomçš„åŒºåˆ«&quot;&gt;&lt;/a&gt;Reactä¸ReactDomçš„åŒºåˆ«&lt;/h2&gt;&lt;p&gt;é—®é¢˜ï¼š&lt;strong&gt;&lt;em&gt;reactä»…ä»…1000å¤šè¡Œä»£ç ï¼Œè€Œreact-domå´å°†è¿‘2wè¡Œ&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç­”ï¼š Reactä¸»è¦å®šä¹‰åŸºç¡€çš„æ¦‚å¿µï¼Œæ¯”å¦‚èŠ‚ç‚¹å®šä¹‰å’Œæè¿°ç›¸å…³ï¼ŒçœŸæ­£çš„å®ç°ä»£ç éƒ½æ˜¯åœ¨ReactDomé‡Œé¢çš„ï¼Œä¹Ÿå°±æ˜¯â€œå¹³å°æ— å…³â€æ¦‚å¿µï¼Œé’ˆå¯¹ä¸åŒçš„å¹³å°æœ‰ä¸åŒçš„å®ç°ï¼Œä½†
åŸºæœ¬çš„æ¦‚å¿µéƒ½å®šä¹‰åœ¨Reacté‡Œã€‚&lt;/p&gt;
&lt;h2 id=&quot;React16-6-0ä½¿ç”¨FlowTypeåšç±»å‹æ£€æŸ¥&quot;&gt;&lt;a href=&quot;#React16-6-0ä½¿ç”¨FlowTypeåšç±»å‹æ£€æŸ¥&quot; class=&quot;headerlink&quot; title=&quot;React16.6.0ä½¿ç”¨FlowTypeåšç±»å‹æ£€æŸ¥&quot;&gt;&lt;/a&gt;React16.6.0ä½¿ç”¨FlowTypeåšç±»å‹æ£€æŸ¥&lt;/h2&gt;&lt;p&gt;Flow æ˜¯ facebook å‡ºå“çš„ JavaScript é™æ€ç±»å‹æ£€æŸ¥â¼¯å…·ã€‚æ‰€è°“ç±»å‹æ£€æŸ¥ï¼Œå°±æ˜¯åœ¨ç¼–è¯‘æœŸå°½æ—©å‘ç°ï¼ˆç”±ç±»å‹é”™è¯¯å¼•èµ·çš„ï¼‰bugï¼Œâ¼œä¸å½±å“ä»£ç è¿â¾ï¼ˆä¸éœ€è¦è¿â¾æ—¶åŠ¨æ€æ£€æŸ¥ç±»å‹ï¼‰ï¼Œä½¿ç¼–å†™ JavaScript å…·æœ‰å’Œç¼–å†™ Java ç­‰å¼ºç±»å‹è¯­â¾”ç›¸è¿‘çš„ä½“éªŒã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/facebook/flow&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å®˜æ–¹ç½‘ç«™&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç®€å•ç¤ºä¾‹ğŸŒ°
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm install -g flow-bin&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;flow init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;touch index.js&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// index.js è¿›è¡Œç±»å‹æ³¨é‡Š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/*@flow*/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;x: number, y: number&lt;/span&gt;): &lt;span class=&quot;title&quot;&gt;number&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; x + y&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;add(&lt;span class=&quot;string&quot;&gt;&#39;Hello&#39;&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// æŠ¥é”™&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ä»Šå¤©å¼€å§‹å­¦ä¹ reactæºç ç›¸å…³çš„å†…å®¹ï¼Œæºç åŸºäºç‰ˆæœ¬<code>v16.6.0</code>ã€‚React16ç›¸è¾ƒäºä¹‹å‰çš„ç‰ˆæœ¬æ˜¯æ ¸å¿ƒä¸Šçš„ä¸€æ¬¡é‡å†™ï¼Œè™½ç„¶ä¸»è¦çš„APIéƒ½æ²¡æœ‰å˜åŒ–ï¼Œä½†æ˜¯å¢åŠ äº†å¾ˆå¤šèƒ½åŠ›ã€‚å¹¶ä¸”é¦–æ¬¡å¼•å…¥äº†<code>Fiber</code>çš„æ¦‚å¿µï¼Œä¹‹åæ–°çš„åŠŸèƒ½éƒ½æ˜¯å›´ç»•<code>Fiber</code>è¿›è¡Œå®ç°ï¼Œæ¯”å¦‚<code>AsyncMode</code>ï¼Œ<code>Profiler</code>ç­‰ã€‚</p><h2 id="Reactä¸ReactDomçš„åŒºåˆ«"><a href="#Reactä¸ReactDomçš„åŒºåˆ«" class="headerlink" title="Reactä¸ReactDomçš„åŒºåˆ«"></a>Reactä¸ReactDomçš„åŒºåˆ«</h2><p>é—®é¢˜ï¼š<strong><em>reactä»…ä»…1000å¤šè¡Œä»£ç ï¼Œè€Œreact-domå´å°†è¿‘2wè¡Œ</em></strong></p><p>ç­”ï¼š Reactä¸»è¦å®šä¹‰åŸºç¡€çš„æ¦‚å¿µï¼Œæ¯”å¦‚èŠ‚ç‚¹å®šä¹‰å’Œæè¿°ç›¸å…³ï¼ŒçœŸæ­£çš„å®ç°ä»£ç éƒ½æ˜¯åœ¨ReactDomé‡Œé¢çš„ï¼Œä¹Ÿå°±æ˜¯â€œå¹³å°æ— å…³â€æ¦‚å¿µï¼Œé’ˆå¯¹ä¸åŒçš„å¹³å°æœ‰ä¸åŒçš„å®ç°ï¼Œä½†åŸºæœ¬çš„æ¦‚å¿µéƒ½å®šä¹‰åœ¨Reacté‡Œã€‚</p><h2 id="React16-6-0ä½¿ç”¨FlowTypeåšç±»å‹æ£€æŸ¥"><a href="#React16-6-0ä½¿ç”¨FlowTypeåšç±»å‹æ£€æŸ¥" class="headerlink" title="React16.6.0ä½¿ç”¨FlowTypeåšç±»å‹æ£€æŸ¥"></a>React16.6.0ä½¿ç”¨FlowTypeåšç±»å‹æ£€æŸ¥</h2><p>Flow æ˜¯ facebook å‡ºå“çš„ JavaScript é™æ€ç±»å‹æ£€æŸ¥â¼¯å…·ã€‚æ‰€è°“ç±»å‹æ£€æŸ¥ï¼Œå°±æ˜¯åœ¨ç¼–è¯‘æœŸå°½æ—©å‘ç°ï¼ˆç”±ç±»å‹é”™è¯¯å¼•èµ·çš„ï¼‰bugï¼Œâ¼œä¸å½±å“ä»£ç è¿â¾ï¼ˆä¸éœ€è¦è¿â¾æ—¶åŠ¨æ€æ£€æŸ¥ç±»å‹ï¼‰ï¼Œä½¿ç¼–å†™ JavaScript å…·æœ‰å’Œç¼–å†™ Java ç­‰å¼ºç±»å‹è¯­â¾”ç›¸è¿‘çš„ä½“éªŒã€‚</p><p><a href="https://github.com/facebook/flow" target="_blank" rel="noopener">å®˜æ–¹ç½‘ç«™</a></p><p>ç®€å•ç¤ºä¾‹ğŸŒ°<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install -g flow-bin</span><br><span class="line">flow init</span><br><span class="line">touch index.js</span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js è¿›è¡Œç±»å‹æ³¨é‡Š</span></span><br><span class="line"><span class="comment">/*@flow*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x: number, y: number</span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y</span><br><span class="line">&#125;</span><br><span class="line">add(<span class="string">'Hello'</span>, <span class="number">11</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br></pre></td></tr></table></figure><hr><a id="more"></a><h2 id="Reactæš´éœ²çš„Api"><a href="#Reactæš´éœ²çš„Api" class="headerlink" title="Reactæš´éœ²çš„Api"></a>Reactæš´éœ²çš„Api</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> React = &#123;</span><br><span class="line">  Children: &#123;</span><br><span class="line">    map,</span><br><span class="line">    forEach,</span><br><span class="line">    count,</span><br><span class="line">    toArray,</span><br><span class="line">    only,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  createRef,</span><br><span class="line">  Component,</span><br><span class="line">  PureComponent,</span><br><span class="line"></span><br><span class="line">  createContext,</span><br><span class="line">  forwardRef,</span><br><span class="line"></span><br><span class="line">  Fragment: REACT_FRAGMENT_TYPE,</span><br><span class="line">  StrictMode: REACT_STRICT_MODE_TYPE,</span><br><span class="line">  unstable_AsyncMode: REACT_ASYNC_MODE_TYPE,</span><br><span class="line">  unstable_Profiler: REACT_PROFILER_TYPE,</span><br><span class="line"></span><br><span class="line">  createElement: __DEV__ ? createElementWithValidation : createElement,</span><br><span class="line">  cloneElement: __DEV__ ? cloneElementWithValidation : cloneElement,</span><br><span class="line">  createFactory: __DEV__ ? createFactoryWithValidation : createFactory,</span><br><span class="line">  isValidElement: isValidElement,</span><br><span class="line"></span><br><span class="line">  version: ReactVersion,</span><br><span class="line"></span><br><span class="line">  __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: ReactSharedInternals,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h2 id="JSXè½¬æ¢æˆä»€ä¹ˆ"><a href="#JSXè½¬æ¢æˆä»€ä¹ˆ" class="headerlink" title="JSXè½¬æ¢æˆä»€ä¹ˆ"></a>JSXè½¬æ¢æˆä»€ä¹ˆ</h2><ul><li>æ ¸å¿ƒ<code>React.createElement</code><code>ReactElement</code>é€šè¿‡<code>createElement</code>åˆ›å»ºï¼Œè°ƒç”¨è¯¥æ–¹æ³•éœ€è¦ä¼ å…¥ä¸‰ä¸ªå‚æ•°<ul><li>type</li><li>config</li><li>children</li></ul></li></ul><h3 id="typeæŒ‡ä»£è¿™ä¸ªReactElementçš„ç±»å‹"><a href="#typeæŒ‡ä»£è¿™ä¸ªReactElementçš„ç±»å‹" class="headerlink" title="typeæŒ‡ä»£è¿™ä¸ªReactElementçš„ç±»å‹"></a>typeæŒ‡ä»£è¿™ä¸ªReactElementçš„ç±»å‹</h3><ul><li>å­—ç¬¦ä¸²æ¯”å¦‚<code>div</code>åŸç”ŸDOMï¼Œç§°ä¸º<code>HostComponent</code><strong>é¦–å­—æ¯å°å†™</strong></li><li>è‡ªå®šä¹‰ç»„ä»¶å˜é‡(<code>functional Component</code>/<code>ClassComponent</code>)<strong>é¦–å­—æ¯å¤§å†™</strong>ä¸å¤§å†™ä¼šè¯†åˆ«ä¸ºåŸç”ŸDOMè§£æ</li><li>åŸç”Ÿæä¾›çš„<code>Fragment</code>ã€<code>AsyncMode</code>ç­‰æ˜¯<code>Symbol</code>ï¼Œä¼šè¢«ç‰¹æ®Šå¤„ç†</li></ul><h3 id="config"><a href="#config" class="headerlink" title="config"></a>config</h3><p>reactä¼šæŠŠå…³é”®å‚æ•°è§£æå‡ºæ¥ï¼Œä¾‹å¦‚<code>key</code>ã€<code>ref</code>ï¼Œåœ¨<code>createElement</code>ä¸­è¯†åˆ«åˆ†ç¦»ï¼Œè¿™äº›å‚æ•°ä¸ä¼šå’Œå…¶ä»–å‚æ•°ä¸€èµ·å¤„ç†è€Œæ˜¯å•ç‹¬ä½œä¸ºå˜é‡å‡ºç°åœ¨<code>ReactElement</code>ä¸Šã€‚</p><h3 id="children"><a href="#children" class="headerlink" title="children"></a>children</h3><p>ç¬¬ä¸‰ä¸ªå‚æ•°å°±æ˜¯childrenï¼Œè€Œä¸”å¯ä»¥æœ‰ä»»æ„å¤šçš„å‚æ•°ï¼Œè¡¨ç¤ºå…„å¼ŸèŠ‚ç‚¹ã€‚å¯ä»¥é€šè¿‡<code>this.props.children</code>è®¿é—®åˆ°ã€‚</p><h3 id="ç›¸å…³æºç ä»¥åŠæ³¨è§£â¬‡ï¸"><a href="#ç›¸å…³æºç ä»¥åŠæ³¨è§£â¬‡ï¸" class="headerlink" title="ç›¸å…³æºç ä»¥åŠæ³¨è§£â¬‡ï¸"></a>ç›¸å…³æºç ä»¥åŠæ³¨è§£â¬‡ï¸</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">createElement</span>(<span class="params">type, config, children</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (config != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (hasValidRef(config)) &#123; <span class="comment">// ä»ç¬¬äºŒä¸ªå‚æ•°ç­›é€‰å‡ºrefå’Œkey</span></span><br><span class="line">      ref = config.ref;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (hasValidKey(config)) &#123;</span><br><span class="line">      key = <span class="string">''</span> + config.key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Remaining properties are added to a new props object</span></span><br><span class="line">    <span class="keyword">for</span> (propName <span class="keyword">in</span> config) &#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        hasOwnProperty.call(config, propName) &amp;&amp;</span><br><span class="line">        !RESERVED_PROPS.hasOwnProperty(propName) <span class="comment">// å†…ç½®çš„refã€idå°±æ˜¯è¿™è§£æå‡ºæ¥çš„</span></span><br><span class="line">      ) &#123;</span><br><span class="line">        props[propName] = config[propName];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// </span></span><br><span class="line">  <span class="keyword">const</span> childrenLength = <span class="built_in">arguments</span>.length - <span class="number">2</span>; <span class="comment">// 3ä»¥åçš„å‚æ•°éƒ½æ˜¯children</span></span><br><span class="line">  <span class="keyword">if</span> (childrenLength === <span class="number">1</span>) &#123;</span><br><span class="line">    props.children = children;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (childrenLength &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> childArray = <span class="built_in">Array</span>(childrenLength); <span class="comment">// å¤§äº1 æ”¾åˆ°æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; childrenLength; i++) &#123;</span><br><span class="line">      childArray[i] = <span class="built_in">arguments</span>[i + <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    props.children = childArray; <span class="comment">// æ”¾åˆ°chidren props.childrenæ‹¿çš„å°±æ˜¯è¿™ä¸ª</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Resolve default props</span></span><br><span class="line">  <span class="keyword">if</span> (type &amp;&amp; type.defaultProps) &#123; <span class="comment">// è®¾ç½®propsçš„é»˜è®¤å€¼</span></span><br><span class="line">    <span class="keyword">const</span> defaultProps = type.defaultProps;</span><br><span class="line">    <span class="keyword">for</span> (propName <span class="keyword">in</span> defaultProps) &#123;</span><br><span class="line">      <span class="keyword">if</span> (props[propName] === <span class="literal">undefined</span>) &#123; <span class="comment">// å¦‚æœpropsæ˜¯undefinedæ‰ä¼šä½¿ç”¨é»˜è®¤å€¼</span></span><br><span class="line">        props[propName] = defaultProps[propName];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">return</span> ReactElement(</span><br><span class="line">    type,</span><br><span class="line">    key,</span><br><span class="line">    ref,</span><br><span class="line">    self,</span><br><span class="line">    source,</span><br><span class="line">    ReactCurrentOwner.current,</span><br><span class="line">    props,</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ReactElement = <span class="function"><span class="keyword">function</span>(<span class="params">type, key, ref, self, source, owner, props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> element = &#123;</span><br><span class="line">    <span class="comment">// This tag allows us to uniquely identify this as a React Element</span></span><br><span class="line">    $$<span class="keyword">typeof</span>: REACT_ELEMENT_TYPE,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Built-in properties that belong on the element</span></span><br><span class="line">    type: type,</span><br><span class="line">    key: key,</span><br><span class="line">    ref: ref,</span><br><span class="line">    props: props,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Record the component responsible for creating this element.</span></span><br><span class="line">    _owner: owner,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> element</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ReactElement"><a href="#ReactElement" class="headerlink" title="ReactElement"></a>ReactElement</h3><p><code>ReactElement</code>åªæ˜¯ä¸€ä¸ªç”¨æ¥æ‰¿è½½ä¿¡æ¯çš„å®¹å™¨ï¼Œå®ƒä¼šå‘Šè¯‰åç»­çš„æ“ä½œè¿™ä¸ªèŠ‚ç‚¹çš„ä»¥ä¸‹ä¿¡æ¯ï¼š</p><ul><li>typeç±»å‹ï¼Œç”¨äºåˆ¤æ–­å¦‚ä½•åˆ›å»ºèŠ‚ç‚¹</li><li>keyå’Œrefè¿™äº›ç‰¹æ®Šä¿¡æ¯</li><li>propsæ–°çš„å±æ€§å†…å®¹</li><li>$$typeofç”¨äºç¡®å®šæ˜¯å¦å±äº<code>ReactElement</code></li></ul><blockquote><p>Reacté€šè¿‡æä¾›è¿™ç§ç±»å‹çš„æ•°æ®ï¼Œæ¥è„±ç¦»å¹³å°çš„é™åˆ¶ã€‚</p></blockquote><h3 id="typeof"><a href="#typeof" class="headerlink" title="$$typeof"></a>$$typeof</h3><p>åœ¨æœ€ååˆ›å»º<code>ReactElement</code>æˆ‘ä»¬ğŸ‘€çœ‹åˆ°äº†è¿™ä¹ˆä¸€ä¸ªå˜é‡<code>$$typeof</code>ã€‚è¿™æ˜¯å•¥å‘¢ï¼ŸReactå…ƒç´ ï¼Œä¼šæœ‰ä¸€ä¸ª<code>$$typeof</code>æ¥è¡¨ç¤ºè¯¥å…ƒç´ æ˜¯ä»€ä¹ˆç±»å‹ã€‚å½“æœ¬åœ°æœ‰<code>Symbol</code>ï¼Œåˆ™ä½¿ç”¨<code>Symbol</code>ç”Ÿæˆï¼Œæ²¡æœ‰æ—¶ä½¿ç”¨16è¿›åˆ¶ã€‚ä½†æœ‰ä¸€ä¸ªç‰¹ä¾‹ï¼š<code>ReactDOM.createPortal</code>çš„æ—¶å€™æ˜¯<code>REACT_PORTAL_TYPE</code>ï¼Œä¸è¿‡å®ƒä¸æ˜¯é€šè¿‡<code>createElement</code>åˆ›å»ºçš„ï¼Œæ‰€ä»¥å®ƒä¹Ÿä¸å±äº<code>ReactElement</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> REACT_ELEMENT_TYPE = <span class="number">0xeac7</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> REACT_PORTAL_TYPE = <span class="number">0xeaca</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> REACT_FRAGMENT_TYPE = <span class="number">0xeacb</span>;</span><br><span class="line">....</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="built_in">Symbol</span> === <span class="string">'function'</span> &amp;&amp; <span class="built_in">Symbol</span>.for) &#123;</span><br><span class="line">  <span class="keyword">const</span> symbolFor = <span class="built_in">Symbol</span>.for;</span><br><span class="line">  REACT_ELEMENT_TYPE = symbolFor(<span class="string">'react.element'</span>);</span><br><span class="line">  REACT_PORTAL_TYPE = symbolFor(<span class="string">'react.portal'</span>);</span><br><span class="line">  REACT_FRAGMENT_TYPE = symbolFor(<span class="string">'react.fragment'</span>);</span><br><span class="line">  ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="cloneElement"><a href="#cloneElement" class="headerlink" title="cloneElement"></a>cloneElement</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ReactElementï¼Œç¬¬äºŒã€ä¸‰ä¸ªå‚æ•°å’ŒcreateElementä¸€è‡´</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">cloneElement</span>(<span class="params">element, config, children</span>) </span>&#123;</span><br><span class="line">  invariant(</span><br><span class="line">    !(element === <span class="literal">null</span> || element === <span class="literal">undefined</span>),</span><br><span class="line">    <span class="string">'React.cloneElement(...): The argument must be a React element, but you passed %s.'</span>,</span><br><span class="line">    element,</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> propName;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¤åˆ¶ä¼ å…¥çš„element props</span></span><br><span class="line">  <span class="keyword">const</span> props = <span class="built_in">Object</span>.assign(&#123;&#125;, element.props);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æå–å†…åµŒçš„keyå’Œref ä¸è¿›è¡Œè¦†ç›–æ˜¯åŸæœ‰çš„</span></span><br><span class="line">  <span class="keyword">let</span> key = element.key;</span><br><span class="line">  <span class="keyword">let</span> ref = element.ref;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> self = element._self;</span><br><span class="line">  <span class="comment">// Source is preserved since cloneElement is unlikely to be targeted by a</span></span><br><span class="line">  <span class="comment">// transpiler, and the original source is probably a better indicator of the</span></span><br><span class="line">  <span class="comment">// true owner.</span></span><br><span class="line">  <span class="keyword">const</span> source = element._source;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Owner will be preserved, unless ref is overridden</span></span><br><span class="line">  <span class="keyword">let</span> owner = element._owner;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// configå’Œchildrençš„è§£ææ˜¯ä¸€æ ·çš„</span></span><br><span class="line">  <span class="keyword">if</span> (config != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (hasValidRef(config)) &#123;</span><br><span class="line">      <span class="comment">// Silently steal the ref from the parent.</span></span><br><span class="line">      ref = config.ref;</span><br><span class="line">      owner = ReactCurrentOwner.current;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (hasValidKey(config)) &#123;</span><br><span class="line">      key = <span class="string">''</span> + config.key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Remaining properties override existing props</span></span><br><span class="line">    <span class="keyword">let</span> defaultProps;</span><br><span class="line">    <span class="keyword">if</span> (element.type &amp;&amp; element.type.defaultProps) &#123;</span><br><span class="line">      defaultProps = element.type.defaultProps;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (propName <span class="keyword">in</span> config) &#123;</span><br><span class="line">      <span class="keyword">if</span> (</span><br><span class="line">        hasOwnProperty.call(config, propName) &amp;&amp;</span><br><span class="line">        !RESERVED_PROPS.hasOwnProperty(propName)</span><br><span class="line">      ) &#123;</span><br><span class="line">        <span class="keyword">if</span> (config[propName] === <span class="literal">undefined</span> &amp;&amp; defaultProps !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">          <span class="comment">// Resolve default props</span></span><br><span class="line">          props[propName] = defaultProps[propName];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          props[propName] = config[propName];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Children can be more than one argument, and those are transferred onto</span></span><br><span class="line">  <span class="comment">// the newly allocated props object.</span></span><br><span class="line">  <span class="keyword">const</span> childrenLength = <span class="built_in">arguments</span>.length - <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">if</span> (childrenLength === <span class="number">1</span>) &#123;</span><br><span class="line">    props.children = children;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (childrenLength &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> childArray = <span class="built_in">Array</span>(childrenLength);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; childrenLength; i++) &#123;</span><br><span class="line">      childArray[i] = <span class="built_in">arguments</span>[i + <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    props.children = childArray;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> ReactElement(element.type, key, ref, self, source, owner, props);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Componentå’ŒPureComponentä¸¤ä¸ªåŸºç±»-ReactBaseClasses-js"><a href="#Componentå’ŒPureComponentä¸¤ä¸ªåŸºç±»-ReactBaseClasses-js" class="headerlink" title="Componentå’ŒPureComponentä¸¤ä¸ªåŸºç±»(ReactBaseClasses.js)"></a>Componentå’ŒPureComponentä¸¤ä¸ªåŸºç±»(ReactBaseClasses.js)</h2><blockquote><p>ä»¥elementä¸ºæ ·æ¿å…‹éš†è¿”å›æ–°çš„Reactå…ƒç´ ï¼Œè¿”å›çš„propsä¸ºæ–°å’Œæ—§çš„propsè¿›è¡Œæµ…å±‚åˆå¹¶åçš„ç»“æœã€‚æ–°çš„å­å…ƒç´ ä¼šæ›¿ä»£æ—§çš„å­å…ƒç´ ï¼Œä½†æ˜¯keyå’Œrefä¼šä¿ç•™ã€‚æºç è§£æâ†“<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Component</span>(<span class="params">props, context, updater</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.props = props;</span><br><span class="line">  <span class="keyword">this</span>.context = context;</span><br><span class="line">  <span class="comment">// ä½¿ç”¨string ref</span></span><br><span class="line">  <span class="keyword">this</span>.refs = emptyObject;</span><br><span class="line">  <span class="keyword">this</span>.updater = updater || ReactNoopUpdateQueue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Component.prototype.isReactComponent = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">Component.prototype.setState = <span class="function"><span class="keyword">function</span>(<span class="params">partialState, callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// æ ¡éªŒç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">  <span class="comment">// partialState: è¦æ›´æ–°çš„å¯¹è±¡</span></span><br><span class="line">  <span class="comment">// æ–°çš„reactç‰ˆæœ¬æ¨èsetStateä½¿ç”¨æ–¹æ³• =&gt; this.setState((preState) =&gt; (&#123;count:preState.count+1&#125;))</span></span><br><span class="line">  invariant(</span><br><span class="line">    <span class="keyword">typeof</span> partialState === <span class="string">'object'</span> ||</span><br><span class="line">      <span class="keyword">typeof</span> partialState === <span class="string">'function'</span> ||</span><br><span class="line">      partialState == <span class="literal">null</span>,</span><br><span class="line">    <span class="string">'setState(...): takes an object of state variables to update or a '</span> +</span><br><span class="line">      <span class="string">'function which returns an object of state variables.'</span>,</span><br><span class="line">  );</span><br><span class="line">  <span class="comment">// æ›´æ–°é˜Ÿåˆ— å®ç°åœ¨react-domé‡Œ æ•´ä¸ªComponentçš„åˆå§‹åŒ–å…¥å£</span></span><br><span class="line">  <span class="keyword">this</span>.updater.enqueueSetState(<span class="keyword">this</span>, partialState, callback, <span class="string">'setState'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼ºåˆ¶æ›´æ–°</span></span><br><span class="line">Component.prototype.forceUpdate = <span class="function"><span class="keyword">function</span>(<span class="params">callback</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// åŒæ ·ä¹Ÿåœ¨react-domé‡Œå®ç°</span></span><br><span class="line">  <span class="keyword">this</span>.updater.enqueueForceUpdate(<span class="keyword">this</span>, callback, <span class="string">'forceUpdate'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ComponentDummy</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">ComponentDummy.prototype = Component.prototype;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å’ŒComponentä¸€è‡´</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PureComponent</span>(<span class="params">props, context, updater</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.props = props;</span><br><span class="line">  <span class="keyword">this</span>.context = context;</span><br><span class="line">  <span class="keyword">this</span>.refs = emptyObject;</span><br><span class="line">  <span class="keyword">this</span>.updater = updater || ReactNoopUpdateQueue;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»§æ‰¿</span></span><br><span class="line"><span class="keyword">const</span> pureComponentPrototype = (PureComponent.prototype = <span class="keyword">new</span> ComponentDummy());</span><br><span class="line">pureComponentPrototype.constructor = PureComponent;</span><br><span class="line"><span class="comment">// å¤åˆ¶æ‹·è´ å”¯ä¸€çš„åŒºåˆ«æ˜¯æ ‡è®°ä¸Šçš„åŒºåˆ« isPureReactComponent</span></span><br><span class="line"><span class="built_in">Object</span>.assign(pureComponentPrototype, Component.prototype);</span><br><span class="line">pureComponentPrototype.isPureReactComponent = <span class="literal">true</span>;</span><br></pre></td></tr></table></figure></p></blockquote><h2 id="è®¾è®¡æ€æƒ³"><a href="#è®¾è®¡æ€æƒ³" class="headerlink" title="è®¾è®¡æ€æƒ³"></a>è®¾è®¡æ€æƒ³</h2><ul><li>å¹³å°æ€æƒ³(Reactå’ŒReactDOMåˆ†åŒ…)æŠ½è±¡å‡ºæ¦‚å¿µï¼Œå½»åº•å‰¥ç¦»å®ç°å±‚ï¼Œreactåªæ˜¯å¤„ç†äº†ç±»å‹å’Œå‚æ•°çš„è½¬æ¢ï¼Œä¸å…·ä½“çš„å®ç°ä»»ä½•ä¸šåŠ¡ã€‚å„ä¸ªå¹³å°çš„å®ç°æ”¾åˆ°ReactDomé‡Œå¤„ç†ã€‚</li></ul><p>æœªå®Œå¾…ç»­â€¦</p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/react%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90%E7%B3%BB%E5%88%97%E4%B8%80(React%E7%9B%B8%E5%85%B3API).html#disqus_thread</comments>
    </item>
    
    <item>
      <title>æ”¶é›†æœ‰ç”¨çš„ç½‘ç«™</title>
      <link>http://mydearest.cn/2020/useful-website.html</link>
      <guid>http://mydearest.cn/2020/useful-website.html</guid>
      <pubDate>Fri, 09 Oct 2020 08:32:26 GMT</pubDate>
      <description>
      
        
        
          &lt;p&gt;This page will collect some useful websets.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Alvin9999/new-pac/wiki/ss%E5%85%8D%E8%B4%B9%E8%B4%A6
        
      
      </description>
      
      <content:encoded><![CDATA[<p>This page will collect some useful websets.</p><ul><li><a href="https://github.com/Alvin9999/new-pac/wiki/ss%E5%85%8D%E8%B4%B9%E8%B4%A6%E5%8F%B7" target="_blank" rel="noopener">ss free account</a></li><li><a href="https://github.com/Alvin9999/new-pac/wiki/v2ray%E5%85%8D%E8%B4%B9%E8%B4%A6%E5%8F%B7" target="_blank" rel="noopener">v2ray free account</a></li><li><a href="https://github.com/abhisheknaiidu/awesome-github-profile-readme" target="_blank" rel="noopener">awesome-github-profile-readme</a></li></ul><h2 id="probot"><a href="#probot" class="headerlink" title="probot"></a>probot</h2><ul><li><a href="https://probot.github.io/apps/" target="_blank" rel="noopener">probot</a><ul><li><a href="https://probot.github.io/apps/auto-comment/" target="_blank" rel="noopener">Auto-comment</a></li><li><a href="https://probot.github.io/apps/pull/" target="_blank" rel="noopener">pull</a></li><li><a href="https://github.com/svanboxel/delete-merged-branch" target="_blank" rel="noopener">delete-merged-branch</a></li><li><a href="https://probot.github.io/apps/stale/" target="_blank" rel="noopener">stale</a>: use</li></ul></li></ul><h2 id="åŠå…¬å·¥å…·"><a href="#åŠå…¬å·¥å…·" class="headerlink" title="åŠå…¬å·¥å…·"></a>åŠå…¬å·¥å…·</h2><ul><li><a href="https://www.atlassian.com/software/confluence" target="_blank" rel="noopener">wiki</a></li><li><a href="https://www.weaver.com.cn/" target="_blank" rel="noopener">æ³›å¾®oa</a></li></ul><h2 id="build-sites"><a href="#build-sites" class="headerlink" title="build sites"></a>build sites</h2><ul><li><a href="https://www.netlify.com/" target="_blank" rel="noopener">netlify</a></li><li><a href="https://vercel.com/" target="_blank" rel="noopener">vercel</a><ul><li><a href="https://zhuanlan.zhihu.com/p/164585697" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/164585697</a></li></ul></li></ul><h2 id="ç»„ä»¶UIå¼€å‘å·¥å…·"><a href="#ç»„ä»¶UIå¼€å‘å·¥å…·" class="headerlink" title="ç»„ä»¶UIå¼€å‘å·¥å…·"></a>ç»„ä»¶UIå¼€å‘å·¥å…·</h2><ul><li><a href="https://github.com/storybookjs/storybook" target="_blank" rel="noopener">storybook</a></li></ul><h2 id="æ–‡æ¡£ç«™"><a href="#æ–‡æ¡£ç«™" class="headerlink" title="æ–‡æ¡£ç«™"></a>æ–‡æ¡£ç«™</h2><ul><li>Gitbooks</li><li><a href="https://docsify.js.org/#/" target="_blank" rel="noopener">docsify</a></li><li><a href="https://docusaurus.io/" target="_blank" rel="noopener">docusaurus</a></li><li><a href="https://www.docz.site/" target="_blank" rel="noopener">docz</a></li><li><a href="https://vuepress.vuejs.org/zh/" target="_blank" rel="noopener">vuepress</a></li></ul><h2 id="chromeæ’ä»¶"><a href="#chromeæ’ä»¶" class="headerlink" title="chromeæ’ä»¶"></a>chromeæ’ä»¶</h2><ul><li><a href="https://www.extfans.com/" target="_blank" rel="noopener">extfans</a></li></ul><h2 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h2><ul><li><a href="https://www.3d66.com/" target="_blank" rel="noopener">3d66</a></li></ul>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/useful-website.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>elasticsearchã€rediséƒ¨ç½²</title>
      <link>http://mydearest.cn/2020/elasticsearch%E3%80%81redis%E9%83%A8%E7%BD%B2.html</link>
      <guid>http://mydearest.cn/2020/elasticsearch%E3%80%81redis%E9%83%A8%E7%BD%B2.html</guid>
      <pubDate>Fri, 18 Sep 2020 03:14:08 GMT</pubDate>
      <description>
      
        &lt;h1 id=&quot;skywalking&quot;&gt;&lt;a href=&quot;#skywalking&quot; class=&quot;headerlink&quot; title=&quot;skywalking&quot;&gt;&lt;/a&gt;skywalking&lt;/h1&gt;&lt;h2 id=&quot;é¢„å®‰è£…JDK&quot;&gt;&lt;a href=&quot;#é¢„å®‰è£…JDK&quot; class=&quot;headerlink&quot; title=&quot;é¢„å®‰è£…JDK&quot;&gt;&lt;/a&gt;é¢„å®‰è£…JDK&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.cnblogs.com/cosyer/p/7827995.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Linuxç³»ç»Ÿï¼ˆCentosï¼‰ä¸‹å®‰è£…Javaç¯å¢ƒ&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;elasticsearch&quot;&gt;&lt;a href=&quot;#elasticsearch&quot; class=&quot;headerlink&quot; title=&quot;elasticsearch&quot;&gt;&lt;/a&gt;elasticsearch&lt;/h2&gt;&lt;h3 id=&quot;å®˜ç½‘ä¸‹è½½-https-www-elastic-co-cn-downloads-elasticsearch&quot;&gt;&lt;a href=&quot;#å®˜ç½‘ä¸‹è½½-https-www-elastic-co-cn-downloads-elasticsearch&quot; class=&quot;headerlink&quot; title=&quot;å®˜ç½‘ä¸‹è½½ https://www.elastic.co/cn/downloads/elasticsearch&quot;&gt;&lt;/a&gt;å®˜ç½‘ä¸‹è½½ &lt;a href=&quot;https://www.elastic.co/cn/downloads/elasticsearch&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.elastic.co/cn/downloads/elasticsearch&lt;/a&gt;&lt;/h3&gt;&lt;h3 id=&quot;è§£å‹&quot;&gt;&lt;a href=&quot;#è§£å‹&quot; class=&quot;headerlink&quot; title=&quot;è§£å‹&quot;&gt;&lt;/a&gt;è§£å‹&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# è§£å‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tar -zxvf elasticsearch-6.1.0.tar.gz&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# é…ç½® config/elasticsearch.yml&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cluster.name: myskywalking&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;path.data: /opt/data/es/data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;path.logs: /opt/data/es/logs&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;bootstrap.memory_lock: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;network.host: 193.160.59.45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# å•æœºè¿è¡Œ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./bin/elasticsearch -V&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# åå°è¿è¡Œ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;./bin/elasticsearch -d&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# è®¿é—®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;http://127.0.0.1:9200&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;å¸¸è§é—®é¢˜&quot;&gt;&lt;a href=&quot;#å¸¸è§é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;å¸¸è§é—®é¢˜&quot;&gt;&lt;/a&gt;å¸¸è§é—®é¢˜&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;éœ€è¦érootç”¨æˆ·å¯åŠ¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ã€æŠ¥é”™ã€‘max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144] å†…å­˜è¿‡å°
è§£å†³:&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 1.sudo vi /etc/sysctl.conf æ–‡ä»¶æœ€åæ·»åŠ ä¸€è¡Œ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#    vm.max_map_count=262144&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 2.åŠ è½½è®¾ç½®å¥½çš„ç³»ç»Ÿå‚æ•°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;#    sudo sysctl -p&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h1 id="skywalking"><a href="#skywalking" class="headerlink" title="skywalking"></a>skywalking</h1><h2 id="é¢„å®‰è£…JDK"><a href="#é¢„å®‰è£…JDK" class="headerlink" title="é¢„å®‰è£…JDK"></a>é¢„å®‰è£…JDK</h2><p><a href="https://www.cnblogs.com/cosyer/p/7827995.html" target="_blank" rel="noopener">Linuxç³»ç»Ÿï¼ˆCentosï¼‰ä¸‹å®‰è£…Javaç¯å¢ƒ</a></p><h2 id="elasticsearch"><a href="#elasticsearch" class="headerlink" title="elasticsearch"></a>elasticsearch</h2><h3 id="å®˜ç½‘ä¸‹è½½-https-www-elastic-co-cn-downloads-elasticsearch"><a href="#å®˜ç½‘ä¸‹è½½-https-www-elastic-co-cn-downloads-elasticsearch" class="headerlink" title="å®˜ç½‘ä¸‹è½½ https://www.elastic.co/cn/downloads/elasticsearch"></a>å®˜ç½‘ä¸‹è½½ <a href="https://www.elastic.co/cn/downloads/elasticsearch" target="_blank" rel="noopener">https://www.elastic.co/cn/downloads/elasticsearch</a></h3><h3 id="è§£å‹"><a href="#è§£å‹" class="headerlink" title="è§£å‹"></a>è§£å‹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar -zxvf elasticsearch-6.1.0.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½® config/elasticsearch.yml</span></span><br><span class="line">cluster.name: myskywalking</span><br><span class="line">path.data: /opt/data/es/data</span><br><span class="line">path.logs: /opt/data/es/logs</span><br><span class="line">bootstrap.memory_lock: <span class="literal">false</span></span><br><span class="line">network.host: 193.160.59.45</span><br><span class="line"></span><br><span class="line"><span class="comment"># å•æœºè¿è¡Œ</span></span><br><span class="line">./bin/elasticsearch -V</span><br><span class="line"></span><br><span class="line"><span class="comment"># åå°è¿è¡Œ</span></span><br><span class="line">./bin/elasticsearch -d</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—®</span></span><br><span class="line">http://127.0.0.1:9200</span><br></pre></td></tr></table></figure><h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><ol><li><p>éœ€è¦érootç”¨æˆ·å¯åŠ¨</p></li><li><p>ã€æŠ¥é”™ã€‘max virtual memory areas vm.max_map_count [65530] is too low, increase to at least [262144] å†…å­˜è¿‡å°è§£å†³:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1.sudo vi /etc/sysctl.conf æ–‡ä»¶æœ€åæ·»åŠ ä¸€è¡Œ</span></span><br><span class="line"><span class="comment">#    vm.max_map_count=262144</span></span><br><span class="line"><span class="comment"># 2.åŠ è½½è®¾ç½®å¥½çš„ç³»ç»Ÿå‚æ•°</span></span><br><span class="line"><span class="comment">#    sudo sysctl -p</span></span><br></pre></td></tr></table></figure></li></ol><hr><a id="more"></a><h2 id="ä¸‹è½½-skywalking-https-github-com-apache-skywalking-å¯¹äº5-0ç‰ˆæœ¬çš„Skywalkingè¦æ±‚ESçš„ç‰ˆæœ¬ä¹Ÿä¸º5-x"><a href="#ä¸‹è½½-skywalking-https-github-com-apache-skywalking-å¯¹äº5-0ç‰ˆæœ¬çš„Skywalkingè¦æ±‚ESçš„ç‰ˆæœ¬ä¹Ÿä¸º5-x" class="headerlink" title="ä¸‹è½½ skywalking https://github.com/apache/skywalking (å¯¹äº5.0ç‰ˆæœ¬çš„Skywalkingè¦æ±‚ESçš„ç‰ˆæœ¬ä¹Ÿä¸º5.x)"></a>ä¸‹è½½ skywalking <a href="https://github.com/apache/skywalking" target="_blank" rel="noopener">https://github.com/apache/skywalking</a> (å¯¹äº5.0ç‰ˆæœ¬çš„Skywalkingè¦æ±‚ESçš„ç‰ˆæœ¬ä¹Ÿä¸º5.x)</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar -xvzf apache-skywalking-apm-incubating-5.0.0-GA.tar.gz -C /usr/<span class="built_in">local</span>/</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹é…ç½® /usr/local/apache-skywalking-apm-incubating/config/application.yml </span></span><br><span class="line">host: æœ¬æœºip</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹skywalking-webappé…ç½®æ–‡ä»¶</span></span><br><span class="line">listOfServers: æœ¬æœºip:10800</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨</span></span><br><span class="line">sh /usr/<span class="built_in">local</span>/apache-skywalking-apm-incubating/bin/startup.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—®</span></span><br><span class="line">http://127.0.0.1:8080</span><br></pre></td></tr></table></figure><h1 id="eureka"><a href="#eureka" class="headerlink" title="eureka"></a>eureka</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨</span></span><br><span class="line">nohup java -jar clustereureka-0.0.1-SNAPSHOT-ui.jar --spring.profiles.active=cluster2 &gt; eureka_log.log &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹</span></span><br><span class="line">jar xvf clustereureka-0.0.1-SNAPSHOT.jar</span><br><span class="line"><span class="comment"># ä¿®æ”¹é‡Œé¢çš„jaråŒ…</span></span><br><span class="line">jar xvf spring-cloud-netflix-eureka-server-2.1.0.RELEASE.jar</span><br><span class="line"><span class="comment"># é‡æ–°æ‰“åŒ…</span></span><br><span class="line">jar -cfM0 clustereureka-0.0.1-SNAPSHOT.jar ./</span><br><span class="line"><span class="comment"># /BOOT-INF/classes </span></span><br><span class="line">application-cluster1.yml  application-cluster2.yml  application-cluster3.yml å¯¹åº”ä¿®æ”¹hostnameï¼ŒdefaultZoneå…¶ä»–æ³¨å†Œä¸­å¿ƒåœ°å€</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—®</span></span><br><span class="line">http://127.0.0.1:7072</span><br></pre></td></tr></table></figure><h1 id="redis-stat"><a href="#redis-stat" class="headerlink" title="redis-stat"></a>redis-stat</h1><h2 id="é¢„å®‰è£…redis"><a href="#é¢„å®‰è£…redis" class="headerlink" title="é¢„å®‰è£…redis"></a>é¢„å®‰è£…redis</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½</span></span><br><span class="line">wget http://download.redis.io/releases/redis-4.0.8.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar xzvf redis-4.0.8.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®‰è£…</span></span><br><span class="line"><span class="built_in">cd</span> redis-4.0.8</span><br><span class="line">make</span><br><span class="line"><span class="built_in">cd</span> src</span><br><span class="line">make install PREFIX=/usr/<span class="built_in">local</span>/redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç§»åŠ¨é…ç½®æ–‡ä»¶</span></span><br><span class="line">cp ./redis.conf /usr/<span class="built_in">local</span>/redis/bin/</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®redisä¸ºåå°å¯åŠ¨ /usr/local/redis/redis.conf </span></span><br><span class="line">å°†daemonize no æ”¹æˆdaemonize yes</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨</span></span><br><span class="line">./redis-server redis.conf</span><br><span class="line"></span><br><span class="line">redis-server &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ å…¥å¼€æœºå¯åŠ¨</span></span><br><span class="line">vi /etc/rc.local //åœ¨é‡Œé¢æ·»åŠ å†…å®¹ï¼š/usr/<span class="built_in">local</span>/redis/bin/redis-server /usr/<span class="built_in">local</span>/redis/etc/redis.conf (æ„æ€å°±æ˜¯å¼€æœºè°ƒç”¨è¿™æ®µå¼€å¯redisçš„å‘½ä»¤)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†redis-cli,redis-serveræ‹·è´åˆ°binä¸‹ï¼Œè®©redis-cliæŒ‡ä»¤å¯ä»¥åœ¨ä»»æ„ç›®å½•ä¸‹ç›´æ¥ä½¿ç”¨</span></span><br><span class="line">cp /usr/<span class="built_in">local</span>/redis/bin/redis-server /usr/<span class="built_in">local</span>/bin/</span><br><span class="line">cp /usr/<span class="built_in">local</span>/redis/bin/redis-cli /usr/<span class="built_in">local</span>/bin/</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—®</span></span><br><span class="line">/usr/<span class="built_in">local</span>/redis/bin/redis-cli</span><br></pre></td></tr></table></figure><h2 id="ä¸‹è½½-https-github-com-junegunn-redis-stat"><a href="#ä¸‹è½½-https-github-com-junegunn-redis-stat" class="headerlink" title="ä¸‹è½½ https://github.com/junegunn/redis-stat"></a>ä¸‹è½½ <a href="https://github.com/junegunn/redis-stat" target="_blank" rel="noopener">https://github.com/junegunn/redis-stat</a></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨ ä¸æ”¯æŒnohupåå°å¯åŠ¨</span></span><br><span class="line">screen java -jar redis-stat-0.4.14.jar --server</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—®</span></span><br><span class="line">http://127.0.0.1:63790</span><br></pre></td></tr></table></figure><h1 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h1><h2 id="ä¸‹è½½-https-nginx-org-download"><a href="#ä¸‹è½½-https-nginx-org-download" class="headerlink" title="ä¸‹è½½ https://nginx.org/download/"></a>ä¸‹è½½ <a href="https://nginx.org/download/" target="_blank" rel="noopener">https://nginx.org/download/</a></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸€é”®å®‰è£…ä¸Šé¢å››ä¸ªä¾èµ–</span></span><br><span class="line">yum -y install gcc pcre-devel zlib-devel openssl openssl-devel</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§£å‹</span></span><br><span class="line">tar -zxvf nginx-1.9.9.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥nginxç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> nginx-1.9.9</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®</span></span><br><span class="line">./configure --prefix=/usr/<span class="built_in">local</span>/nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># make</span></span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># cdåˆ°åˆšæ‰é…ç½®çš„å®‰è£…ç›®å½•/usr/loca/nginx/</span></span><br><span class="line">./sbin/nginx -t</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ­£å¸¸æƒ…å†µçš„ä¿¡æ¯è¾“å‡ºï¼š</span></span><br><span class="line">nginx: the configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf syntax is ok</span><br><span class="line">nginx: configuration file /usr/<span class="built_in">local</span>/nginx/conf/nginx.conf <span class="built_in">test</span> is successful</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨</span></span><br><span class="line">./sbin/nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¿é—®</span></span><br><span class="line">http://127.0.0.1:80</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ— æ³•è®¿é—® 80ç«¯å£æ²¡æœ‰å¼€å¯ã€‚no</span></span><br><span class="line">firewall-cmd --query-port=80/tcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¼€å¯80ç«¯å£</span></span><br><span class="line">firewall-cmd --add-port=80/tcp --permanent</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯é˜²ç«å¢™</span></span><br><span class="line">systemctl restart firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®å¼€æœºè‡ªå¯åŠ¨</span></span><br><span class="line">vim /etc/rc.d/rc.local</span><br><span class="line"></span><br><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡å¯nginx</span></span><br><span class="line">/usr/<span class="built_in">local</span>/nginx/sbin/nginx -s reload</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/elasticsearch%E3%80%81redis%E9%83%A8%E7%BD%B2.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>HTMLä¸­pæ ‡ç­¾ä¸­æ’å…¥divæ ‡ç­¾ä¼šå‘ç”Ÿä»€ä¹ˆ</title>
      <link>http://mydearest.cn/2020/HTML%E4%B8%ADp%E6%A0%87%E7%AD%BE%E4%B8%AD%E6%8F%92%E5%85%A5div%E6%A0%87%E7%AD%BE%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88.html</link>
      <guid>http://mydearest.cn/2020/HTML%E4%B8%ADp%E6%A0%87%E7%AD%BE%E4%B8%AD%E6%8F%92%E5%85%A5div%E6%A0%87%E7%AD%BE%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88.html</guid>
      <pubDate>Wed, 02 Sep 2020 03:13:55 GMT</pubDate>
      <description>
      
        
        
          &lt;p&gt;é¢è¯•é‡åˆ°äº†é—®é¢˜:&lt;code&gt;&amp;lt;p&amp;gt;ä¸­èƒ½ä¸èƒ½æ’å…¥&amp;lt;div&amp;gt;? æ’å…¥&amp;lt;div&amp;gt;ä¼šå¦‚ä½•?&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å…ˆç›´æ¥å®è·µä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://cdn.mydearest.cn/blog/images/di
        
      
      </description>
      
      <content:encoded><![CDATA[<p>é¢è¯•é‡åˆ°äº†é—®é¢˜:<code>&lt;p&gt;ä¸­èƒ½ä¸èƒ½æ’å…¥&lt;div&gt;? æ’å…¥&lt;div&gt;ä¼šå¦‚ä½•?</code></p><p>å…ˆç›´æ¥å®è·µä¸‹ï¼š</p><p><img src="http://cdn.mydearest.cn/blog/images/div1.png" alt="div1"></p><blockquote><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°,<div>æŠŠ<p>åˆ†æˆäº†ä¸¤æ®µ, å¹¶ä¸”divå¤–å­—æ®µå¹¶ä¸åœ¨</p><p>å†…ã€‚æŠŠdivå˜æˆè¡Œå†…å—çº§å…ƒç´ ä¹Ÿä¸è¡Œã€‚</p></div></p></blockquote><p><img src="http://cdn.mydearest.cn/blog/images/div2.png" alt="div2"></p><p>è§£ç­”:å¯ä»¥åœ¨HTMLæ ‡å‡†(<a href="https://www.w3.org/TR/html401/struct/text.html#h-9.3.1)ä¸­çœ‹åˆ°" target="_blank" rel="noopener">https://www.w3.org/TR/html401/struct/text.html#h-9.3.1)ä¸­çœ‹åˆ°</a>,</p><blockquote><p></p><p>è™½ç„¶æ˜¯å—çº§å…ƒç´ , ä½†æ˜¯åªèƒ½åŒ…å«è¡Œå†…å…ƒç´ , ä¸èƒ½åŒ…å«å—çº§å…ƒç´ (åŒ…æ‹¬</p><p>è‡ªå·±)</p></blockquote><p><img src="http://cdn.mydearest.cn/blog/images/div3.png" alt="div3"></p><p>over!</p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/HTML%E4%B8%ADp%E6%A0%87%E7%AD%BE%E4%B8%AD%E6%8F%92%E5%85%A5div%E6%A0%87%E7%AD%BE%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>Docker</title>
      <link>http://mydearest.cn/2020/react-native%E5%B0%8F%E7%BB%93.html</link>
      <guid>http://mydearest.cn/2020/react-native%E5%B0%8F%E7%BB%93.html</guid>
      <pubDate>Tue, 28 Jul 2020 03:38:27 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;react-nativeå¼€å‘ä½¿ç”¨çš„æ˜¯JS,ä½†æ˜¯å¹¶ä¸æ˜¯çº¯æ­£çš„JS,è€Œæ˜¯ä¸€ç§JSXè¯­è¨€ï¼Œå°±æ˜¯åœ¨JSä¸­åµŒå…¥XMLè¯­è¨€ï¼Œå› æ­¤ï¼Œåªè¦æœ‰ä¸€äº›JSçš„è¯­æ³•åŸºç¡€çš„åŸç”Ÿå¼€å‘è€…ï¼Œå°±å¯ä»¥è‚¯å®¹æ˜“ç†è§£JSXçš„è¯­æ³•äº†ï¼Œåœ¨RNä¸­ï¼Œæ¨èä½¿ç”¨ES6çš„è¯­æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ€§èƒ½&quot;&gt;&lt;a href=&quot;#æ€§èƒ½&quot; class=&quot;headerlink&quot; title=&quot;æ€§èƒ½&quot;&gt;&lt;/a&gt;æ€§èƒ½&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨react-nativeå¼€å‘çš„æœ€å¤§çš„æœ‰ç‚¹åœ¨äºå¼€å‘æ•ˆç‡ï¼ŒåŠ å…¥APPå¹¶ä¸å¤æ‚çš„è¯ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥ä½¿ç”¨çº¯JSå¼€å‘ï¼Œä¹Ÿå°±æ˜¯Androidå’ŒiOSå…¬ç”¨ä¸€å¥—ç•Œé¢å’Œé€»è¾‘ã€‚æå¤§çš„æé«˜äº†å¼€å‘æ•ˆç‡ã€‚åœ¨æ€§èƒ½ä¸Šï¼ŒRNçš„è¡¨ç°æ¯”åŸç”Ÿå¼±ä¸€äº›ï¼Œä½†
æ˜¯è¿œå¥½äºH5ã€‚æ‰€ä»¥æ€»ä½“æ¥çœ‹ï¼Œå…¶å®RNçš„æœªæ¥è¿˜æ˜¯å¯ä»¥æœŸå¾…çš„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¿è¡Œæœºåˆ¶&quot;&gt;&lt;a href=&quot;#è¿è¡Œæœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;è¿è¡Œæœºåˆ¶&quot;&gt;&lt;/a&gt;è¿è¡Œæœºåˆ¶&lt;/h2&gt;&lt;p&gt;RNæ˜¯è¿è¡ŒJSçš„ï¼ŒAndroidæ˜¯è¿è¡ŒJavaå­—èŠ‚ç çš„ï¼Œæ‰€ä»¥ï¼Œå®é™…ä¸ŠJSä»£ç çš„æœ€ç»ˆè¿è¡Œæ˜¯é€šè¿‡ä¸€å±‚å°è£…ï¼ŒæŠŠJSçš„ä»£ç æ˜ å°„æˆåŸç”Ÿä»£ç ï¼Œè€Œç•Œé¢ä¸Šçš„å…ƒç´ æœ€ç»ˆä½¿ç”¨çš„ä¹Ÿæ˜¯åŸç”Ÿçš„ç»„ä»¶ï¼Œè€Œä¸æ˜¯è‡ªå·±æ¸²æŸ“ï¼ˆæ‰€ä»¥åœ¨æ€§èƒ½ä¸Šï¼ŒRNæ¯”H5è¦
å¥½å¾ˆå¤šï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Componentç®€ä»‹&quot;&gt;&lt;a href=&quot;#Componentç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;Componentç®€ä»‹&quot;&gt;&lt;/a&gt;Componentç®€ä»‹&lt;/h2&gt;&lt;p&gt;åœ¨Androidä¸­ï¼Œä¸»è¦äº¤äº’å®¹å™¨æ˜¯activityæˆ–Fragment,è€Œåœ¨RNä¸­ï¼Œç•Œé¢çš„äº¤äº’å®¹å™¨æ˜¯Componentï¼šç»„ä»¶ã€‚æˆ‘è§‰å¾—Componentå’ŒåŸç”Ÿçš„Fragmentå…¶å®å¾ˆåƒï¼Œéƒ½å­˜åœ¨äºactivityä¸­ï¼Œéƒ½å—åˆ¶äºactivityçš„ç”Ÿå‘½å‘¨æœŸï¼Œéƒ½å¯å¸
è½½å’Œè£…è½½ã€‚&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>react-nativeå¼€å‘ä½¿ç”¨çš„æ˜¯JS,ä½†æ˜¯å¹¶ä¸æ˜¯çº¯æ­£çš„JS,è€Œæ˜¯ä¸€ç§JSXè¯­è¨€ï¼Œå°±æ˜¯åœ¨JSä¸­åµŒå…¥XMLè¯­è¨€ï¼Œå› æ­¤ï¼Œåªè¦æœ‰ä¸€äº›JSçš„è¯­æ³•åŸºç¡€çš„åŸç”Ÿå¼€å‘è€…ï¼Œå°±å¯ä»¥è‚¯å®¹æ˜“ç†è§£JSXçš„è¯­æ³•äº†ï¼Œåœ¨RNä¸­ï¼Œæ¨èä½¿ç”¨ES6çš„è¯­æ³•ã€‚</p><h2 id="æ€§èƒ½"><a href="#æ€§èƒ½" class="headerlink" title="æ€§èƒ½"></a>æ€§èƒ½</h2><p>ä½¿ç”¨react-nativeå¼€å‘çš„æœ€å¤§çš„æœ‰ç‚¹åœ¨äºå¼€å‘æ•ˆç‡ï¼ŒåŠ å…¥APPå¹¶ä¸å¤æ‚çš„è¯ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥ä½¿ç”¨çº¯JSå¼€å‘ï¼Œä¹Ÿå°±æ˜¯Androidå’ŒiOSå…¬ç”¨ä¸€å¥—ç•Œé¢å’Œé€»è¾‘ã€‚æå¤§çš„æé«˜äº†å¼€å‘æ•ˆç‡ã€‚åœ¨æ€§èƒ½ä¸Šï¼ŒRNçš„è¡¨ç°æ¯”åŸç”Ÿå¼±ä¸€äº›ï¼Œä½†æ˜¯è¿œå¥½äºH5ã€‚æ‰€ä»¥æ€»ä½“æ¥çœ‹ï¼Œå…¶å®RNçš„æœªæ¥è¿˜æ˜¯å¯ä»¥æœŸå¾…çš„ã€‚</p><h2 id="è¿è¡Œæœºåˆ¶"><a href="#è¿è¡Œæœºåˆ¶" class="headerlink" title="è¿è¡Œæœºåˆ¶"></a>è¿è¡Œæœºåˆ¶</h2><p>RNæ˜¯è¿è¡ŒJSçš„ï¼ŒAndroidæ˜¯è¿è¡ŒJavaå­—èŠ‚ç çš„ï¼Œæ‰€ä»¥ï¼Œå®é™…ä¸ŠJSä»£ç çš„æœ€ç»ˆè¿è¡Œæ˜¯é€šè¿‡ä¸€å±‚å°è£…ï¼ŒæŠŠJSçš„ä»£ç æ˜ å°„æˆåŸç”Ÿä»£ç ï¼Œè€Œç•Œé¢ä¸Šçš„å…ƒç´ æœ€ç»ˆä½¿ç”¨çš„ä¹Ÿæ˜¯åŸç”Ÿçš„ç»„ä»¶ï¼Œè€Œä¸æ˜¯è‡ªå·±æ¸²æŸ“ï¼ˆæ‰€ä»¥åœ¨æ€§èƒ½ä¸Šï¼ŒRNæ¯”H5è¦å¥½å¾ˆå¤šï¼‰ã€‚</p><h2 id="Componentç®€ä»‹"><a href="#Componentç®€ä»‹" class="headerlink" title="Componentç®€ä»‹"></a>Componentç®€ä»‹</h2><p>åœ¨Androidä¸­ï¼Œä¸»è¦äº¤äº’å®¹å™¨æ˜¯activityæˆ–Fragment,è€Œåœ¨RNä¸­ï¼Œç•Œé¢çš„äº¤äº’å®¹å™¨æ˜¯Componentï¼šç»„ä»¶ã€‚æˆ‘è§‰å¾—Componentå’ŒåŸç”Ÿçš„Fragmentå…¶å®å¾ˆåƒï¼Œéƒ½å­˜åœ¨äºactivityä¸­ï¼Œéƒ½å—åˆ¶äºactivityçš„ç”Ÿå‘½å‘¨æœŸï¼Œéƒ½å¯å¸è½½å’Œè£…è½½ã€‚</p><hr><a id="more"></a><h2 id="åŸæœ‰æ¶æ„å’Œé—®é¢˜"><a href="#åŸæœ‰æ¶æ„å’Œé—®é¢˜" class="headerlink" title="åŸæœ‰æ¶æ„å’Œé—®é¢˜"></a>åŸæœ‰æ¶æ„å’Œé—®é¢˜</h2><ol><li>ç”¨æˆ·ç¼–å†™çš„Reactä»£ç </li><li>Reactä»£ç è½¬æ¢ä¹‹åçš„js</li><li>The Bridge</li><li>Native side</li></ol><ul><li>ç»„ä»¶å’Œ API å¤ªè¿‡ä¾èµ– JSBridge çš„åˆå§‹åŒ–ï¼Œè€Œä¸”é€šè®¯èƒ½åŠ›ä¹Ÿå±€é™äºè¿™ä¸€æ¡é€šé“ã€‚</li><li>JSå’ŒNativeä¹‹é—´å¹¶ä¸çœŸæ­£ç›´æ¥é€šä¿¡ï¼Œå®ƒä»¬çš„é€šä¿¡ä¾èµ–äºè·¨Bridgeä¼ è¾“çš„å¼‚æ­¥JSONæ¶ˆæ¯ã€‚</li></ul><blockquote><p>UI çš„æ¸²æŸ“è¿‡ç¨‹åˆ†ä¸ºä¸‰å±‚ï¼šJS ä¸šåŠ¡å±‚ã€shadow treeã€åŸç”Ÿ UI å±‚ã€‚</p></blockquote><p>å…¶ä¸­ JS å’Œ shadow tree æ˜¯é€šè¿‡ JSBridge æ¥åŒæ­¥æ•°æ®çš„ï¼ŒJS å±‚ä¼šå°†æ‰€æœ‰ UI node ç”Ÿæˆä¸€ä¸² JSON æ•°æ®ï¼Œä¼ é€’åˆ°åŸç”Ÿ shadow å±‚ï¼ŒåŸç”Ÿ shadow å±‚é€šè¿‡ä¼ å…¥ node æ•°æ®ï¼Œæ–°å¢æ–° UI æˆ–è€…åˆ é™¤ä¸€äº›ä¸éœ€è¦çš„ UI ç»„ä»¶ã€‚</p><p>ä»æ¸²æŸ“çš„å±‚æ¬¡æ¥çœ‹ï¼ŒReact Native æ˜¯å¤šçº¿ç¨‹è¿è¡Œçš„ï¼Œæœ€å¸¸è§çš„æ˜¯ JS çº¿ç¨‹å’ŒåŸç”Ÿç«¯çš„çº¿ç¨‹ï¼Œä¸€æ—¦çº¿ç¨‹é—´å¼‚å¸¸ï¼ŒJSBridge æ•´ä½“å°†ä¼šé˜»å¡ï¼Œæˆ‘ä»¬ç»å¸¸ä¹Ÿèƒ½çœ‹åˆ° JS è¿è¡Œå¼‚å¸¸äº†ï¼Œå®é™… JS çº¿ç¨‹å·²ç»æ— å“åº”äº†ï¼Œä½†åŸç”Ÿç«¯è¿˜èƒ½å“åº”æ»šåŠ¨äº‹ä»¶ã€‚</p><h2 id="æ–°çš„æ¶æ„"><a href="#æ–°çš„æ¶æ„" class="headerlink" title="æ–°çš„æ¶æ„"></a>æ–°çš„æ¶æ„</h2><blockquote><p>RN åœ¨ 0.59 ç‰ˆæœ¬ä½¿ç”¨ JSI å–ä»£äº†å…ˆå‰çš„ JSBridgeã€‚åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p><ul><li>Fabricï¼Œæ–°æ¶æ„çš„UI manager</li><li>TurboModulesï¼Œè¿™ä¸ªä¸nativeç«¯äº¤äº’çš„æ–°ä¸€ä»£å®ç°</li></ul></blockquote><p>ç°åœ¨ä¸éœ€è¦åºåˆ—åŒ–æˆJSONå¹¶åŒå‘ä¼ é€’ç­‰ä¸€ç³»åˆ—æ“ä½œï¼Œå®ç°äº†Nativeå’Œ JSé—´çš„ç›´æ¥åŒæ­¥é€šè®¯ã€‚</p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/react-native%E5%B0%8F%E7%BB%93.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>Vueä¸­axiosçš„å°è£…</title>
      <link>http://mydearest.cn/2020/Vue%E4%B8%ADaxios%E7%9A%84%E5%B0%81%E8%A3%85.html</link>
      <guid>http://mydearest.cn/2020/Vue%E4%B8%ADaxios%E7%9A%84%E5%B0%81%E8%A3%85.html</guid>
      <pubDate>Tue, 21 Jul 2020 04:14:10 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;èŠèŠ-Vue-ä¸­-axios-çš„å°è£…&quot;&gt;&lt;a href=&quot;#èŠèŠ-Vue-ä¸­-axios-çš„å°è£…&quot; class=&quot;headerlink&quot; title=&quot;èŠèŠ Vue ä¸­ axios çš„å°è£…&quot;&gt;&lt;/a&gt;èŠèŠ Vue ä¸­ axios çš„å°è£…&lt;/h2&gt;&lt;p&gt;axios æ˜¯ Vue å®˜æ–¹æ¨èçš„ä¸€ä¸ª HTTP åº“ï¼Œç”¨ axios å®˜æ–¹ç®€ä»‹æ¥ä»‹ç»å®ƒï¼Œå°±æ˜¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½œä¸ºä¸€ä¸ªä¼˜ç§€çš„ HTTP åº“ï¼Œaxios æ‰“è´¥äº†æ›¾ç»ç”± Vue å®˜æ–¹å›¢é˜Ÿç»´æŠ¤çš„ vue-resourceï¼Œè·å¾—äº† Vue ä½œè€…å°¤å°å³çš„å¤§åŠ›æ¨èï¼Œæˆä¸ºäº† Vue é¡¹ç›®ä¸­ HTTP åº“çš„æœ€ä½³é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ï¼Œaxios æ˜¯ä¸ªä¼˜ç§€çš„ HTTP åº“ï¼Œä½†æ˜¯ï¼Œç›´æ¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å¹¶ä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œä¸€å®šç¨‹åº¦ä¸Šçš„é…ç½®å°è£…ï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥èŠèŠ Vue ä¸­ axios çš„å°è£…ã€‚&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="èŠèŠ-Vue-ä¸­-axios-çš„å°è£…"><a href="#èŠèŠ-Vue-ä¸­-axios-çš„å°è£…" class="headerlink" title="èŠèŠ Vue ä¸­ axios çš„å°è£…"></a>èŠèŠ Vue ä¸­ axios çš„å°è£…</h2><p>axios æ˜¯ Vue å®˜æ–¹æ¨èçš„ä¸€ä¸ª HTTP åº“ï¼Œç”¨ axios å®˜æ–¹ç®€ä»‹æ¥ä»‹ç»å®ƒï¼Œå°±æ˜¯ï¼š</p><blockquote><p>Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚</p></blockquote><p>ä½œä¸ºä¸€ä¸ªä¼˜ç§€çš„ HTTP åº“ï¼Œaxios æ‰“è´¥äº†æ›¾ç»ç”± Vue å®˜æ–¹å›¢é˜Ÿç»´æŠ¤çš„ vue-resourceï¼Œè·å¾—äº† Vue ä½œè€…å°¤å°å³çš„å¤§åŠ›æ¨èï¼Œæˆä¸ºäº† Vue é¡¹ç›®ä¸­ HTTP åº“çš„æœ€ä½³é€‰æ‹©ã€‚</p><p>è™½ç„¶ï¼Œaxios æ˜¯ä¸ªä¼˜ç§€çš„ HTTP åº“ï¼Œä½†æ˜¯ï¼Œç›´æ¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å¹¶ä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œä¸€å®šç¨‹åº¦ä¸Šçš„é…ç½®å°è£…ï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥èŠèŠ Vue ä¸­ axios çš„å°è£…ã€‚</p><hr><a id="more"></a><h3 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h3><p>å…¶å®ï¼Œç½‘ä¸Šå…³äº axios å°è£…çš„ä»£ç ä¸å°‘ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†éƒ½æ˜¯åœ¨å…¥å£æ–‡ä»¶ï¼ˆmain.jsï¼‰ä¸­è¿›è¡Œ axios å…¨å±€å¯¹è±¡å±æ€§å®šä¹‰çš„å½¢å¼è¿›è¡Œé…ç½®ï¼Œç±»ä¼¼äºå¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.timeout = <span class="number">10000</span></span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ¡ˆæœ‰ä¸¤ä¸ªä¸è¶³ï¼Œé¦–å…ˆï¼Œaxios å°è£…ä»£ç è€¦åˆè¿›å…¥å…¥å£æ–‡ä»¶ï¼Œä¸æ–¹ä¾¿åæœŸç»´æŠ¤ï¼›å…¶æ¬¡ï¼Œä½¿ç”¨ axios å…¨å±€å¯¹è±¡å±æ€§å®šä¹‰çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œä»£ç è¿‡äºé›¶æ•£ã€‚</p><ol><li><p>é’ˆå¯¹é—®é¢˜ä¸€ï¼Œæˆ‘ä½¿ç”¨äº† Vue æºç ç»“æ„ä¸­çš„ä¸€å¤§æ ¸å¿ƒæ€æƒ³â€”â€”å°†åŠŸèƒ½æ‹†åˆ†ä¸ºæ–‡ä»¶ï¼Œæ–¹ä¾¿åæœŸçš„ç»´æŠ¤ã€‚å•ç‹¬åˆ›å»ºä¸€ä¸ª <code>http.js</code> æˆ–è€… <code>http.ts</code> æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­å¼•å…¥ axios å¹¶å¯¹å…¶è¿›è¡Œå°è£…é…ç½®ï¼Œæœ€åå°†å…¶å¯¼å‡ºå¹¶æŒ‚è½½åˆ° Vue çš„åŸå‹ä¸Šå³å¯ã€‚æ­¤æ—¶ï¼Œæ¯æ¬¡ä¿®æ”¹ axios é…ç½®ï¼Œåªéœ€è¦ä¿®æ”¹å¯¹åº”çš„æ–‡ä»¶å³å¯ï¼Œä¸ä¼šå½±å“åˆ°ä¸ç›¸å…³çš„åŠŸèƒ½ã€‚</p></li><li><p>é’ˆå¯¹é—®é¢˜äºŒï¼Œé‡‡ç”¨ axios å®˜æ–¹æ¨èçš„ï¼Œé€šè¿‡é…ç½®é¡¹åˆ›å»º axios å®ä¾‹çš„æ–¹å¼è¿›è¡Œé…ç½®å°è£…ã€‚</p></li></ol><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// http.js</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="comment">// åˆ›å»º axios å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  <span class="comment">// é…ç½®é¡¹</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®ç¯å¢ƒè®¾ç½®-baseURL"><a href="#æ ¹æ®ç¯å¢ƒè®¾ç½®-baseURL" class="headerlink" title="æ ¹æ®ç¯å¢ƒè®¾ç½® baseURL"></a>æ ¹æ®ç¯å¢ƒè®¾ç½® baseURL</h3><p>baseURL å±æ€§æ˜¯è¯·æ±‚åœ°å€å‰ç¼€ï¼Œå°†è‡ªåŠ¨åŠ åœ¨ url å‰é¢ï¼Œé™¤é url æ˜¯ä¸ªç»å¯¹åœ°å€ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹å’Œç”Ÿäº§æ¨¡å¼ä¸‹æœ‰ç€ä¸åŒçš„ baseURLï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒçš„ç¯å¢ƒåˆ‡æ¢ä¸åŒçš„ baseURLã€‚</p><p>åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œç”±äºæœ‰ç€ devServer çš„å­˜åœ¨ï¼Œéœ€è¦æ ¹æ®å›ºå®šçš„ url å‰ç¼€è¿›è¡Œè¯·æ±‚åœ°å€é‡å†™ï¼Œæ‰€ä»¥ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œå°† baseURL è®¾ä¸ºæŸä¸ªå›ºå®šçš„å€¼ï¼Œæ¯”å¦‚ï¼š<code>/apis</code>ã€‚</p><p>åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œæ ¹æ® Java æ¨¡å—çš„è¯·æ±‚å‰ç¼€çš„ä¸åŒï¼Œå¯ä»¥è®¾ç½®ä¸åŒçš„ baseURLã€‚</p><p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ® process.env.NODE_ENV åŒºåˆ†çŠ¶æ€ï¼Œåˆ‡æ¢ä¸åŒçš„ baseURL</span></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">baseURL: process.env.NODE_ENV === <span class="string">'production'</span> ? <span class="string">`/java`</span> : <span class="string">'/apis'</span>,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="ç»Ÿä¸€è®¾ç½®è¯·æ±‚å¤´"><a href="#ç»Ÿä¸€è®¾ç½®è¯·æ±‚å¤´" class="headerlink" title="ç»Ÿä¸€è®¾ç½®è¯·æ±‚å¤´"></a>ç»Ÿä¸€è®¾ç½®è¯·æ±‚å¤´</h3><p>åœ¨è¿™é‡Œå’Œå¤§å®¶èŠä¸€ä¸ªé—®é¢˜ï¼Œä»€ä¹ˆæ˜¯å°è£…ï¼Ÿåœ¨æˆ‘çœ‹æ¥ï¼Œå°è£…æ˜¯é€šè¿‡æ›´å°‘çš„è°ƒç”¨ä»£ç è¦†ç›–æ›´å¤šçš„è°ƒç”¨åœºæ™¯ã€‚</p><p>ç”±äºï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¯·æ±‚å¤´éƒ½æ˜¯å›ºå®šçš„ï¼Œåªæœ‰å°‘éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä¼šéœ€è¦ä¸€äº›ç‰¹æ®Šçš„è¯·æ±‚å¤´ï¼Œæ‰€ä»¥ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯ï¼Œå°†æ™®é€‚æ€§çš„è¯·æ±‚å¤´ä½œä¸ºåŸºç¡€é…ç½®ã€‚å½“éœ€è¦ç‰¹æ®Šè¯·æ±‚å¤´æ—¶ï¼Œå°†ç‰¹æ®Šè¯·æ±‚å¤´ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¦†ç›–åŸºç¡€é…ç½®ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">    ...</span><br><span class="line">headers: &#123;</span><br><span class="line">        <span class="keyword">get</span>: &#123;</span><br><span class="line">          <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded;charset=utf-8'</span></span><br><span class="line">          <span class="comment">// åœ¨å¼€å‘ä¸­ï¼Œä¸€èˆ¬è¿˜éœ€è¦å•ç‚¹ç™»å½•æˆ–è€…å…¶ä»–åŠŸèƒ½çš„é€šç”¨è¯·æ±‚å¤´ï¼Œå¯ä»¥ä¸€å¹¶é…ç½®è¿›æ¥</span></span><br><span class="line">        &#125;,</span><br><span class="line">        post: &#123;</span><br><span class="line">          <span class="string">'Content-Type'</span>: <span class="string">'application/json;charset=utf-8'</span></span><br><span class="line">          <span class="comment">// åœ¨å¼€å‘ä¸­ï¼Œä¸€èˆ¬è¿˜éœ€è¦å•ç‚¹ç™»å½•æˆ–è€…å…¶ä»–åŠŸèƒ½çš„é€šç”¨è¯·æ±‚å¤´ï¼Œå¯ä»¥ä¸€å¹¶é…ç½®è¿›æ¥</span></span><br><span class="line">        &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="è·¨åŸŸã€è¶…æ—¶ã€å“åº”ç å¤„ç†"><a href="#è·¨åŸŸã€è¶…æ—¶ã€å“åº”ç å¤„ç†" class="headerlink" title="è·¨åŸŸã€è¶…æ—¶ã€å“åº”ç å¤„ç†"></a>è·¨åŸŸã€è¶…æ—¶ã€å“åº”ç å¤„ç†</h3><p>axios ä¸­ï¼Œæä¾›æ˜¯å¦å…è®¸è·¨åŸŸçš„å±æ€§â€”â€”withCredentialsï¼Œä»¥åŠé…ç½®è¶…æ—¶æ—¶é—´çš„å±æ€§â€”â€”timeoutï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå±æ€§ï¼Œå¯ä»¥è½»æ¾å¤„ç†è·¨åŸŸå’Œè¶…æ—¶çš„é—®é¢˜ã€‚</p><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥è¯´è¯´å“åº”ç å¤„ç†ï¼š</p><p>axios æä¾›äº† validateStatus å±æ€§ï¼Œç”¨äºå®šä¹‰å¯¹äºç»™å®šçš„HTTP å“åº”çŠ¶æ€ç æ˜¯ resolve æˆ– reject promiseã€‚æ‰€ä»¥ï¼Œæ­£å¸¸è®¾ç½®çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šå°†çŠ¶æ€ç ä¸º 2 ç³»åˆ—æˆ–è€… 304 çš„è¯·æ±‚è®¾ä¸º resolve çŠ¶æ€ï¼Œå…¶ä½™ä¸º reject çŠ¶æ€ã€‚ç»“æœå°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸šåŠ¡ä»£ç é‡Œï¼Œä½¿ç”¨ catch ç»Ÿä¸€æ•è·å“åº”é”™è¯¯çš„è¯·æ±‚ï¼Œä»è€Œè¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚</p><p>ä½†æ˜¯ï¼Œç”±äºæˆ‘åœ¨ä»£ç é‡Œé¢ä½¿ç”¨äº† async-awaitï¼Œè€Œä¼—æ‰€å‘¨çŸ¥ï¼Œasync-await æ•è· catch çš„æ–¹å¼æä¸ºéº»çƒ¦ï¼Œæ‰€ä»¥ï¼Œåœ¨æ­¤å¤„ï¼Œæˆ‘é€‰æ‹©å°†æ‰€æœ‰å“åº”éƒ½è®¾ä¸º resolve çŠ¶æ€ï¼Œç»Ÿä¸€åœ¨ then å¤„ç†ã€‚</p><p>æ­¤éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line"><span class="comment">// è·¨åŸŸè¯·æ±‚æ—¶æ˜¯å¦éœ€è¦ä½¿ç”¨å‡­è¯</span></span><br><span class="line">withCredentials: <span class="literal">true</span>,</span><br><span class="line">    <span class="comment">// è¯·æ±‚ 30s è¶…æ—¶</span></span><br><span class="line">timeout: <span class="number">30000</span>,</span><br><span class="line">validateStatus: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="comment">// ä½¿ç”¨async-awaitï¼Œå¤„ç†rejectæƒ…å†µè¾ƒä¸ºç¹çï¼Œæ‰€ä»¥å…¨éƒ¨è¿”å›resolveï¼Œåœ¨ä¸šåŠ¡ä»£ç ä¸­å¤„ç†å¼‚å¸¸</span></span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="è¯·æ±‚ã€å“åº”å¤„ç†"><a href="#è¯·æ±‚ã€å“åº”å¤„ç†" class="headerlink" title="è¯·æ±‚ã€å“åº”å¤„ç†"></a>è¯·æ±‚ã€å“åº”å¤„ç†</h3><p>åœ¨ä¸ä½¿ç”¨ axios çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡è¯·æ±‚æˆ–è€…æ¥å—å“åº”ï¼Œéƒ½éœ€è¦å°†è¯·æ±‚æˆ–è€…å“åº”åºåˆ—åŒ–ã€‚</p><p>è€Œåœ¨ axios ä¸­ï¼Œ <code>transformRequest</code> å…è®¸åœ¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚å‰ï¼Œä¿®æ”¹è¯·æ±‚æ•°æ®ï¼›<code>transformResponse</code> åœ¨ä¼ é€’ç»™ then/catch å‰ï¼Œå…è®¸ä¿®æ”¹å“åº”æ•°æ®ã€‚</p><p>é€šè¿‡è¿™ä¸¤ä¸ªé’©å­ï¼Œå¯ä»¥çœå»å¤§é‡é‡å¤çš„åºåˆ—åŒ–ä»£ç ã€‚</p><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">    <span class="comment">// åœ¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚å‰ï¼Œåºåˆ—åŒ–è¯·æ±‚æ•°æ®</span></span><br><span class="line">    transformRequest: [<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        data = <span class="built_in">JSON</span>.stringify(data)</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="comment">// åœ¨ä¼ é€’ç»™ then/catch å‰ï¼Œä¿®æ”¹å“åº”æ•°æ®</span></span><br><span class="line">    transformResponse: [<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">'string'</span> &amp;&amp; data.startsWith(<span class="string">'&#123;'</span>)) &#123;</span><br><span class="line">            data = <span class="built_in">JSON</span>.parse(data)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="æ‹¦æˆªå™¨"><a href="#æ‹¦æˆªå™¨" class="headerlink" title="æ‹¦æˆªå™¨"></a>æ‹¦æˆªå™¨</h3><p>æ‹¦æˆªå™¨ï¼Œåˆ†ä¸ºè¯·æ±‚æ‹¦æˆªå™¨ä»¥åŠå“åº”æ‹¦æˆªå™¨ï¼Œåˆ†åˆ«åœ¨è¯·æ±‚æˆ–å“åº”è¢« then æˆ– catch å¤„ç†å‰æ‹¦æˆªå®ƒä»¬ã€‚</p><p>ä¹‹å‰æåˆ°è¿‡ï¼Œç”±äº async-await ä¸­ catch éš¾ä»¥å¤„ç†çš„é—®é¢˜ï¼Œæ‰€ä»¥å°†å‡ºé”™çš„æƒ…å†µä¹Ÿä½œä¸º resolve çŠ¶æ€è¿›è¡Œå¤„ç†ã€‚ä½†è¿™å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œè¯·æ±‚æˆ–å“åº”å‡ºé”™çš„æƒ…å†µä¸‹ï¼Œç»“æœæ²¡æœ‰æ•°æ®åè®®ä¸­å®šä¹‰çš„ msg å­—æ®µï¼ˆæ¶ˆæ¯ï¼‰ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å‡ºé”™çš„æ—¶å€™ï¼Œæ‰‹åŠ¨ç”Ÿæˆä¸€ä¸ªç¬¦åˆè¿”å›æ ¼å¼çš„è¿”å›æ•°æ®ã€‚</p><p>ç”±äºï¼Œåœ¨ä¸šåŠ¡ä¸­ï¼Œæ²¡æœ‰éœ€è¦åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­åšé¢å¤–å¤„ç†çš„éœ€æ±‚ï¼Œæ‰€ä»¥ï¼Œè¯·æ±‚æ‹¦æˆªå™¨çš„ resolve çŠ¶æ€ï¼Œåªéœ€ç›´æ¥è¿”å›å°±å¯ä»¥äº†ã€‚</p><p>è¯·æ±‚æ‹¦æˆªå™¨ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.request.use((config) =&#123;</span><br><span class="line"><span class="keyword">return</span> config</span><br><span class="line">&#125;, (error) =&#123;</span><br><span class="line"><span class="comment">// é”™è¯¯æŠ›åˆ°ä¸šåŠ¡ä»£ç </span></span><br><span class="line">    error.data = &#123;&#125;</span><br><span class="line">    error.data.msg = <span class="string">'æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼'</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>å†æ¥èŠèŠå“åº”æ‹¦æˆªå™¨ï¼Œè¿˜æ˜¯ä¹‹å‰çš„é‚£ä¸ªé—®é¢˜ï¼Œé™¤äº†è¯·æ±‚æˆ–å“åº”é”™è¯¯ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µä¹Ÿä¼šå¯¼è‡´è¿”å›çš„æ¶ˆæ¯ä½“ä¸ç¬¦åˆåè®®è§„èŒƒï¼Œé‚£å°±æ˜¯çŠ¶æ€ç ä¸ä¸º 2 ç³»åˆ—æˆ– 304 æ—¶ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦åšä¸€æ ·çš„å¤„ç†â€”â€”æ‰‹åŠ¨ç”Ÿæˆä¸€ä¸ªç¬¦åˆè¿”å›æ ¼å¼çš„è¿”å›æ•°æ®ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ç‚¹ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ ¹æ®ä¸åŒçš„çŠ¶æ€ç ç”Ÿæˆä¸åŒçš„æç¤ºä¿¡æ¯ï¼Œä»¥æ–¹ä¾¿å¤„ç†ä¸Šçº¿åçš„é—®é¢˜ã€‚</p><p>å“åº”æ‹¦æˆªå™¨ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®ä¸åŒçš„çŠ¶æ€ç ï¼Œç”Ÿæˆä¸åŒçš„æç¤ºä¿¡æ¯</span></span><br><span class="line"><span class="keyword">const</span> showStatus = (status) =&#123;</span><br><span class="line">    <span class="keyword">let</span> message = <span class="string">''</span></span><br><span class="line">    <span class="comment">// è¿™ä¸€å¨ä»£ç å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼è¿›è¡Œä¼˜åŒ–</span></span><br><span class="line">    <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">            message = <span class="string">'è¯·æ±‚é”™è¯¯(400)'</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">            message = <span class="string">'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•(401)'</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">            message = <span class="string">'æ‹’ç»è®¿é—®(403)'</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">            message = <span class="string">'è¯·æ±‚å‡ºé”™(404)'</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">408</span>:</span><br><span class="line">            message = <span class="string">'è¯·æ±‚è¶…æ—¶(408)'</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">500</span>:</span><br><span class="line">            message = <span class="string">'æœåŠ¡å™¨é”™è¯¯(500)'</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">501</span>:</span><br><span class="line">            message = <span class="string">'æœåŠ¡æœªå®ç°(501)'</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">502</span>:</span><br><span class="line">            message = <span class="string">'ç½‘ç»œé”™è¯¯(502)'</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">503</span>:</span><br><span class="line">            message = <span class="string">'æœåŠ¡ä¸å¯ç”¨(503)'</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">504</span>:</span><br><span class="line">            message = <span class="string">'ç½‘ç»œè¶…æ—¶(504)'</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">case</span> <span class="number">505</span>:</span><br><span class="line">            message = <span class="string">'HTTPç‰ˆæœ¬ä¸å—æ”¯æŒ(505)'</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            message = <span class="string">`è¿æ¥å‡ºé”™(<span class="subst">$&#123;status&#125;</span>)!`</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;message&#125;</span>ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ï¼`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.response.use((response) =&#123;</span><br><span class="line">    <span class="keyword">const</span> status = response.status</span><br><span class="line">    <span class="keyword">let</span> msg = <span class="string">''</span></span><br><span class="line">    <span class="keyword">if</span> (status &lt; <span class="number">200</span> || status &gt;= <span class="number">300</span>) &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†httpé”™è¯¯ï¼ŒæŠ›åˆ°ä¸šåŠ¡ä»£ç </span></span><br><span class="line">        msg = showStatus(status)</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> response.data === <span class="string">'string'</span>) &#123;</span><br><span class="line">            response.data = &#123; msg &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            response.data.msg = msg</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">&#125;, (error) =&#123;</span><br><span class="line">    <span class="comment">// é”™è¯¯æŠ›åˆ°ä¸šåŠ¡ä»£ç </span></span><br><span class="line">    error.data = &#123;&#125;</span><br><span class="line">    error.data.msg = <span class="string">'è¯·æ±‚è¶…æ—¶æˆ–æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ï¼'</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(error)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><em>tipsï¼šå‹æƒ…æç¤ºï¼Œä¸Šé¢é‚£ä¸€å¨ switch-case ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼è¿›è¡Œä¼˜åŒ–~</em></p><h3 id="æ”¯æŒ-TypeScript"><a href="#æ”¯æŒ-TypeScript" class="headerlink" title="æ”¯æŒ TypeScript"></a>æ”¯æŒ TypeScript</h3><p>ç”±äºå‰æ®µæ—¶é—´ï¼Œæˆ‘åœ¨éƒ¨é—¨å†…æ¨äº† TypeScriptï¼Œä¸ºäº†æ»¡è¶³è‡ªå·±çš„å¼ºè¿«ç—‡ï¼Œå°†æ‰€æœ‰ js æ–‡ä»¶æ”¹å†™ä¸ºäº† ts æ–‡ä»¶ã€‚ç”±äº axios æœ¬èº«æœ‰ TypeScript ç›¸å…³çš„æ”¯æŒï¼Œæ‰€ä»¥åªéœ€è¦æŠŠå¯¹åº”çš„ç±»å‹å¯¼å…¥ï¼Œç„¶åèµ‹å€¼å³å¯ã€‚</p><h3 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// http.ts</span></span><br><span class="line"><span class="keyword">import</span> axios, &#123; AxiosRequestConfig, AxiosResponse &#125; <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> showStatus = (status: <span class="built_in">number</span>) =&#123;</span><br><span class="line">  <span class="keyword">let</span> message = <span class="string">''</span></span><br><span class="line">  <span class="keyword">switch</span> (status) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">      message = <span class="string">'è¯·æ±‚é”™è¯¯(400)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">      message = <span class="string">'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•(401)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">      message = <span class="string">'æ‹’ç»è®¿é—®(403)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">404</span>:</span><br><span class="line">      message = <span class="string">'è¯·æ±‚å‡ºé”™(404)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">408</span>:</span><br><span class="line">      message = <span class="string">'è¯·æ±‚è¶…æ—¶(408)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">500</span>:</span><br><span class="line">      message = <span class="string">'æœåŠ¡å™¨é”™è¯¯(500)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">501</span>:</span><br><span class="line">      message = <span class="string">'æœåŠ¡æœªå®ç°(501)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">502</span>:</span><br><span class="line">      message = <span class="string">'ç½‘ç»œé”™è¯¯(502)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">503</span>:</span><br><span class="line">      message = <span class="string">'æœåŠ¡ä¸å¯ç”¨(503)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">504</span>:</span><br><span class="line">      message = <span class="string">'ç½‘ç»œè¶…æ—¶(504)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">505</span>:</span><br><span class="line">      message = <span class="string">'HTTPç‰ˆæœ¬ä¸å—æ”¯æŒ(505)'</span></span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">      message = <span class="string">`è¿æ¥å‡ºé”™(<span class="subst">$&#123;status&#125;</span>)!`</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;message&#125;</span>ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ï¼`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  <span class="comment">// è”è°ƒ</span></span><br><span class="line">  baseURL: process.env.NODE_ENV === <span class="string">'production'</span> ? <span class="string">`/`</span> : <span class="string">'/apis'</span>,</span><br><span class="line">  headers: &#123;</span><br><span class="line">    <span class="keyword">get</span>: &#123;</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded;charset=utf-8'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    post: &#123;</span><br><span class="line">      <span class="string">'Content-Type'</span>: <span class="string">'application/json;charset=utf-8'</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// æ˜¯å¦è·¨ç«™ç‚¹è®¿é—®æ§åˆ¶è¯·æ±‚</span></span><br><span class="line">  withCredentials: <span class="literal">true</span>,</span><br><span class="line">  timeout: <span class="number">30000</span>,</span><br><span class="line">  transformRequest: [(data) =&#123;</span><br><span class="line">    data = <span class="built_in">JSON</span>.stringify(data)</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  &#125;],</span><br><span class="line">  validateStatus () &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨async-awaitï¼Œå¤„ç†rejectæƒ…å†µè¾ƒä¸ºç¹çï¼Œæ‰€ä»¥å…¨éƒ¨è¿”å›resolveï¼Œåœ¨ä¸šåŠ¡ä»£ç ä¸­å¤„ç†å¼‚å¸¸</span></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  transformResponse: [(data) =&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">'string'</span> &amp;&amp; data.startsWith(<span class="string">'&#123;'</span>)) &#123;</span><br><span class="line">      data = <span class="built_in">JSON</span>.parse(data)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯·æ±‚æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.request.use((config: AxiosRequestConfig) =&#123;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">&#125;, (error) =&#123;</span><br><span class="line">    <span class="comment">// é”™è¯¯æŠ›åˆ°ä¸šåŠ¡ä»£ç </span></span><br><span class="line">    error.data = &#123;&#125;</span><br><span class="line">    error.data.msg = <span class="string">'æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼'</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å“åº”æ‹¦æˆªå™¨</span></span><br><span class="line">service.interceptors.response.use((response: AxiosResponse) =&#123;</span><br><span class="line">    <span class="keyword">const</span> status = response.status</span><br><span class="line">    <span class="keyword">let</span> msg = <span class="string">''</span></span><br><span class="line">    <span class="keyword">if</span> (status &lt; <span class="number">200</span> || status &gt;= <span class="number">300</span>) &#123;</span><br><span class="line">        <span class="comment">// å¤„ç†httpé”™è¯¯ï¼ŒæŠ›åˆ°ä¸šåŠ¡ä»£ç </span></span><br><span class="line">        msg = showStatus(status)</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> response.data === <span class="string">'string'</span>) &#123;</span><br><span class="line">            response.data = &#123;msg&#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            response.data.msg = msg</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">&#125;, (error) =&#123;</span><br><span class="line">    <span class="comment">// é”™è¯¯æŠ›åˆ°ä¸šåŠ¡ä»£ç </span></span><br><span class="line">    error.data = &#123;&#125;</span><br><span class="line">    error.data.msg = <span class="string">'è¯·æ±‚è¶…æ—¶æˆ–æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ï¼'</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.resolve(error)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/Vue%E4%B8%ADaxios%E7%9A%84%E5%B0%81%E8%A3%85.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†ã€æ‘˜è¦ã€æ•°å­—ç­¾åã€æ•°å­—è¯ä¹¦</title>
      <link>http://mydearest.cn/2020/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E3%80%81%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E3%80%81%E6%91%98%E8%A6%81%E3%80%81%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D%E3%80%81%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6.html</link>
      <guid>http://mydearest.cn/2020/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E3%80%81%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E3%80%81%E6%91%98%E8%A6%81%E3%80%81%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D%E3%80%81%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6.html</guid>
      <pubDate>Thu, 09 Jul 2020 01:51:49 GMT</pubDate>
      <description>
      
        &lt;p&gt;ä½œä¸ºä¸€ä¸ªå¼€å‘äººå‘˜ï¼Œæˆ–å¤šæˆ–å°‘éƒ½å¬è¯´è¿‡å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†ã€æ‘˜è¦ã€æ•°å­—ç­¾åã€æ•°å­—è¯ä¹¦è¿™å‡ ä¸ªæ¦‚å¿µï¼Œå®ƒä»¬æ˜¯ç”¨æ¥ä¿è¯åœ¨äº’è”ç½‘é€šä¿¡è¿‡ç¨‹ä¸­æ•°æ®ä¼ è¾“å®‰å…¨çš„ã€‚æœ‰äººå¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼Œæˆ‘ç»™ä¼ è¾“æ•°
æ®åŠ ä¸ªå¯†ä¸å°±å®‰å…¨äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æè¿™ä¹ˆå¤šèŠ±æ ·å‡ºæ¥ï¼Ÿæœ¬æ–‡ä¸»è¦é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥è®²è§£è¿™å‡ ä¸ªæ¦‚å¿µçš„å®é™…ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘å…ˆç®€å•ä»‹ç»ä¸€ä¸‹è¿™å‡ ä¸ªæ¦‚å¿µã€‚&lt;/p&gt;
&lt;h2 id=&quot;å¯¹ç§°åŠ å¯†&quot;&gt;&lt;a href=&quot;#å¯¹ç§°åŠ å¯†&quot; class=&quot;headerlink&quot; title=&quot;å¯¹ç§°åŠ å¯†&quot;&gt;&lt;/a&gt;å¯¹ç§°åŠ å¯†&lt;/h2&gt;&lt;p&gt;å¯¹ç§°åŠ å¯†æ˜¯æŒ‡ç”¨æ¥åŠ å¯†å’Œè§£å¯†çš„æ˜¯åŒä¸€ä¸ªç§˜é’¥ã€‚å…¶ç‰¹ç‚¹æ˜¯åŠ å¯†é€Ÿåº¦å¿«ï¼Œä½†æ˜¯ç§˜é’¥å®¹æ˜“è¢«é»‘å®¢æˆªè·ï¼Œæ‰€ä»¥å®‰å…¨æ€§ä¸é«˜ã€‚å¯†é’¥ä¸å¯èƒ½ä¸€å¼€å§‹åœ¨å‘é€æ–¹å’Œæ¥æ”¶æ–¹éƒ½å…¨éƒ¨ç”Ÿæˆå¥½äº† éœ€è¦åœ¨ä¸€æ–¹ç”Ÿæˆä¹‹åä¼ é€’ç»™å¦ä¸€æ–¹ å¦‚æœåœ¨ä¼ é€’è¿‡ç¨‹å¯†é’¥è¢«åŠ«æŒ æ•´ä¸ªåŠ å¯†å°±ä¸å®‰å…¨äº†ã€‚å¸¸è§çš„æœ‰AESã€DESç®—æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;éå¯¹ç§°åŠ å¯†&quot;&gt;&lt;a href=&quot;#éå¯¹ç§°åŠ å¯†&quot; class=&quot;headerlink&quot; title=&quot;éå¯¹ç§°åŠ å¯†&quot;&gt;&lt;/a&gt;éå¯¹ç§°åŠ å¯†&lt;/h2&gt;&lt;p&gt;éå¯¹ç§°åŠ å¯†æ˜¯æŒ‡ç”¨æ¥åŠ å¯†å’Œè§£å¯†çš„æ˜¯ä¸åŒçš„ç§˜é’¥ï¼Œå®ƒä»¬æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œç§°ä¸ºå…¬é’¥å’Œç§é’¥ï¼ŒçŸ¥é“å…¶ä¸­ä¸€ä¸ªç§˜é’¥æ˜¯æ— æ³•æ¨å¯¼å‡ºå¦å¤–ä¸€ä¸ªç§˜é’¥çš„ã€‚ç”¨å…¬é’¥åŠ å¯†çš„å†…å®¹éœ€è¦ç”¨ç§é’¥æ‰èƒ½è§£å¯†ï¼Œç”¨ç§é’¥åŠ å¯†
çš„å†…å®¹éœ€è¦ç”¨å…¬é’¥æ‰èƒ½è§£å¯†ã€‚éå¯¹ç§°åŠ å¯†çš„ç‰¹ç‚¹æ˜¯å®‰å…¨æ€§é«˜ï¼Œç¼ºç‚¹æ˜¯åŠ å¯†é€Ÿåº¦æ…¢ã€‚å…¬é’¥å¯¹å¤–å…¬å¼€ å¦‚æœå¯†æ–‡æ˜¯ç§é’¥åŠ å¯† é‚£ä¹ˆä»»ä½•äººéƒ½èƒ½ç”¨å…¬é’¥è§£å¯†ã€‚å¸¸è§çš„æœ‰RSAã€ECCç®—æ³•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ··åˆåŠ å¯†&quot;&gt;&lt;a href=&quot;#æ··åˆåŠ å¯†&quot; class=&quot;headerlink&quot; title=&quot;æ··åˆåŠ å¯†&quot;&gt;&lt;/a&gt;æ··åˆåŠ å¯†&lt;/h2&gt;&lt;p&gt;åœ¨ä¼ é€’è¿‡ç¨‹æŠŠæˆ‘ä»¬çš„å¯¹ç§°åŠ å¯†ä¸­çš„å¯†é’¥ç”¨éå¯¹ç§°åŠ å¯†çš„æ–¹å¼å»ä¼ é€’å°±å¥½äº†ã€‚
&lt;img src=&quot;http://cdn.mydearest.cn/blog/images/mix.png&quot; alt=&quot;mix&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ‘˜è¦&quot;&gt;&lt;a href=&quot;#æ‘˜è¦&quot; class=&quot;headerlink&quot; title=&quot;æ‘˜è¦&quot;&gt;&lt;/a&gt;æ‘˜è¦&lt;/h2&gt;&lt;p&gt;æ‰€è°“çš„æ‘˜è¦å°±æ˜¯ä¸€æ®µä¿¡æ¯æˆ–è€…ä¸€ä¸ªæ–‡ä»¶é€šè¿‡æŸä¸ªå“ˆå¸Œç®—æ³•(ä¹Ÿå«æ‘˜è¦ç®—æ³•)è€Œå¾—åˆ°çš„ä¸€ä¸²å­—ç¬¦ã€‚æ‘˜è¦ç®—æ³•çš„ç‰¹ç‚¹å°±æ˜¯ä¸åŒçš„æ–‡ä»¶è®¡ç®—å‡ºçš„æ‘˜è¦æ˜¯ä¸åŒçš„(ä¹Ÿæœ‰å¯èƒ½ç›¸åŒï¼Œä½†æ˜¯å¯èƒ½æ€§éå¸¸éå¸¸ä½)ï¼Œ
æ¯”å¦‚ä¸€ä¸ª1Gçš„è§†é¢‘æ–‡ä»¶ï¼Œå“ªæ€•åªæ˜¯æ”¹åŠ¨å…¶ä¸­ä¸€ä¸ªå­—èŠ‚ï¼Œæœ€åè®¡ç®—å¾—åˆ°çš„æ‘˜è¦ä¹Ÿæ˜¯å®Œå…¨ä¸åŒçš„ï¼Œæ‰€ä»¥æ‘˜è¦ç®—æ³•é€šå¸¸æ˜¯ç”¨æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦è¢«ç¯¡æ”¹è¿‡ã€‚å…¶è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯é€šè¿‡æ‘˜è¦æ˜¯æ— æ³•æ¨å¯¼å‡ºæºæ–‡
ä»¶çš„ä¿¡æ¯çš„ã€‚å¸¸ç”¨çš„æ‘˜è¦(æ•£åˆ—)ç®—æ³•æœ‰MD5ã€SHAç­‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ•°å­—ç­¾å&quot;&gt;&lt;a href=&quot;#æ•°å­—ç­¾å&quot; class=&quot;headerlink&quot; title=&quot;æ•°å­—ç­¾å&quot;&gt;&lt;/a&gt;æ•°å­—ç­¾å&lt;/h2&gt;&lt;p&gt;æ•°å­—ç­¾åå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„æ‘˜è¦åŠ å¯†åçš„ä¿¡æ¯ã€‚æ•°å­—ç­¾åæ˜¯å’Œæºæ–‡ä»¶ä¸€èµ·å‘é€ç»™æ¥æ”¶æ–¹çš„ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°åå¯¹æ–‡ä»¶ç”¨æ‘˜è¦ç®—æ³•ç®—å‡ºä¸€ä¸ªæ‘˜è¦ï¼Œç„¶åå’Œæ•°å­—ç­¾åä¸­çš„æ‘˜è¦è¿›è¡Œæ¯”å¯¹ï¼Œä¸¤è€…ä¸ä¸€è‡´çš„è¯è¯´
æ˜æ–‡ä»¶è¢«ç¯¡æ”¹äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ•°å­—è¯ä¹¦&quot;&gt;&lt;a href=&quot;#æ•°å­—è¯ä¹¦&quot; class=&quot;headerlink&quot; title=&quot;æ•°å­—è¯ä¹¦&quot;&gt;&lt;/a&gt;æ•°å­—è¯ä¹¦&lt;/h2&gt;&lt;p&gt;æ•°å­—è¯ä¹¦æ˜¯ä¸€ä¸ªç»è¯ä¹¦æˆæƒä¸­å¿ƒç”Ÿæˆçš„æ–‡ä»¶ï¼Œæ•°å­—è¯ä¹¦é‡Œä¸€èˆ¬ä¼šåŒ…å«å…¬é’¥ã€å…¬é’¥æ‹¥æœ‰è€…åç§°ã€CAçš„æ•°å­—ç­¾åã€æœ‰æ•ˆæœŸã€æˆæƒä¸­å¿ƒåç§°ã€è¯ä¹¦åºåˆ—å·ç­‰ä¿¡æ¯ã€‚å…¶ä¸­CAçš„æ•°å­—ç­¾åæ˜¯éªŒè¯è¯ä¹¦æ˜¯å¦è¢«
ç¯¡æ”¹çš„å…³é”®ï¼Œå®ƒå…¶å®å°±æ˜¯å¯¹è¯ä¹¦é‡Œé¢é™¤äº†CAçš„æ•°å­—ç­¾åä»¥å¤–çš„å†…å®¹è¿›è¡Œæ‘˜è¦ç®—æ³•å¾—åˆ°ä¸€ä¸ªæ‘˜è¦ï¼Œç„¶åCAæœºæ„ç”¨ä»–è‡ªå·±çš„ç§é’¥å¯¹è¿™ä¸ªæ‘˜è¦è¿›è¡ŒåŠ å¯†å°±ç”Ÿæˆäº†CAçš„æ•°å­—ç­¾åï¼ŒCAæœºæ„ä¼šå…¬å¼€å®ƒçš„å…¬
é’¥ï¼ŒéªŒè¯è¯ä¹¦æ—¶å°±æ˜¯ç”¨è¿™ä¸ªå…¬é’¥è§£å¯†CAçš„æ•°å­—ç­¾åï¼Œç„¶åç”¨æ¥éªŒè¯è¯ä¹¦æ˜¯å¦è¢«ç¯¡æ”¹ã€‚&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ä½œä¸ºä¸€ä¸ªå¼€å‘äººå‘˜ï¼Œæˆ–å¤šæˆ–å°‘éƒ½å¬è¯´è¿‡å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†ã€æ‘˜è¦ã€æ•°å­—ç­¾åã€æ•°å­—è¯ä¹¦è¿™å‡ ä¸ªæ¦‚å¿µï¼Œå®ƒä»¬æ˜¯ç”¨æ¥ä¿è¯åœ¨äº’è”ç½‘é€šä¿¡è¿‡ç¨‹ä¸­æ•°æ®ä¼ è¾“å®‰å…¨çš„ã€‚æœ‰äººå¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼Œæˆ‘ç»™ä¼ è¾“æ•°æ®åŠ ä¸ªå¯†ä¸å°±å®‰å…¨äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æè¿™ä¹ˆå¤šèŠ±æ ·å‡ºæ¥ï¼Ÿæœ¬æ–‡ä¸»è¦é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥è®²è§£è¿™å‡ ä¸ªæ¦‚å¿µçš„å®é™…ä½œç”¨ã€‚</p><p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘å…ˆç®€å•ä»‹ç»ä¸€ä¸‹è¿™å‡ ä¸ªæ¦‚å¿µã€‚</p><h2 id="å¯¹ç§°åŠ å¯†"><a href="#å¯¹ç§°åŠ å¯†" class="headerlink" title="å¯¹ç§°åŠ å¯†"></a>å¯¹ç§°åŠ å¯†</h2><p>å¯¹ç§°åŠ å¯†æ˜¯æŒ‡ç”¨æ¥åŠ å¯†å’Œè§£å¯†çš„æ˜¯åŒä¸€ä¸ªç§˜é’¥ã€‚å…¶ç‰¹ç‚¹æ˜¯åŠ å¯†é€Ÿåº¦å¿«ï¼Œä½†æ˜¯ç§˜é’¥å®¹æ˜“è¢«é»‘å®¢æˆªè·ï¼Œæ‰€ä»¥å®‰å…¨æ€§ä¸é«˜ã€‚å¯†é’¥ä¸å¯èƒ½ä¸€å¼€å§‹åœ¨å‘é€æ–¹å’Œæ¥æ”¶æ–¹éƒ½å…¨éƒ¨ç”Ÿæˆå¥½äº† éœ€è¦åœ¨ä¸€æ–¹ç”Ÿæˆä¹‹åä¼ é€’ç»™å¦ä¸€æ–¹ å¦‚æœåœ¨ä¼ é€’è¿‡ç¨‹å¯†é’¥è¢«åŠ«æŒ æ•´ä¸ªåŠ å¯†å°±ä¸å®‰å…¨äº†ã€‚å¸¸è§çš„æœ‰AESã€DESç®—æ³•ã€‚</p><h2 id="éå¯¹ç§°åŠ å¯†"><a href="#éå¯¹ç§°åŠ å¯†" class="headerlink" title="éå¯¹ç§°åŠ å¯†"></a>éå¯¹ç§°åŠ å¯†</h2><p>éå¯¹ç§°åŠ å¯†æ˜¯æŒ‡ç”¨æ¥åŠ å¯†å’Œè§£å¯†çš„æ˜¯ä¸åŒçš„ç§˜é’¥ï¼Œå®ƒä»¬æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œç§°ä¸ºå…¬é’¥å’Œç§é’¥ï¼ŒçŸ¥é“å…¶ä¸­ä¸€ä¸ªç§˜é’¥æ˜¯æ— æ³•æ¨å¯¼å‡ºå¦å¤–ä¸€ä¸ªç§˜é’¥çš„ã€‚ç”¨å…¬é’¥åŠ å¯†çš„å†…å®¹éœ€è¦ç”¨ç§é’¥æ‰èƒ½è§£å¯†ï¼Œç”¨ç§é’¥åŠ å¯†çš„å†…å®¹éœ€è¦ç”¨å…¬é’¥æ‰èƒ½è§£å¯†ã€‚éå¯¹ç§°åŠ å¯†çš„ç‰¹ç‚¹æ˜¯å®‰å…¨æ€§é«˜ï¼Œç¼ºç‚¹æ˜¯åŠ å¯†é€Ÿåº¦æ…¢ã€‚å…¬é’¥å¯¹å¤–å…¬å¼€ å¦‚æœå¯†æ–‡æ˜¯ç§é’¥åŠ å¯† é‚£ä¹ˆä»»ä½•äººéƒ½èƒ½ç”¨å…¬é’¥è§£å¯†ã€‚å¸¸è§çš„æœ‰RSAã€ECCç®—æ³•ã€‚</p><h2 id="æ··åˆåŠ å¯†"><a href="#æ··åˆåŠ å¯†" class="headerlink" title="æ··åˆåŠ å¯†"></a>æ··åˆåŠ å¯†</h2><p>åœ¨ä¼ é€’è¿‡ç¨‹æŠŠæˆ‘ä»¬çš„å¯¹ç§°åŠ å¯†ä¸­çš„å¯†é’¥ç”¨éå¯¹ç§°åŠ å¯†çš„æ–¹å¼å»ä¼ é€’å°±å¥½äº†ã€‚<img src="http://cdn.mydearest.cn/blog/images/mix.png" alt="mix"></p><h2 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦"></a>æ‘˜è¦</h2><p>æ‰€è°“çš„æ‘˜è¦å°±æ˜¯ä¸€æ®µä¿¡æ¯æˆ–è€…ä¸€ä¸ªæ–‡ä»¶é€šè¿‡æŸä¸ªå“ˆå¸Œç®—æ³•(ä¹Ÿå«æ‘˜è¦ç®—æ³•)è€Œå¾—åˆ°çš„ä¸€ä¸²å­—ç¬¦ã€‚æ‘˜è¦ç®—æ³•çš„ç‰¹ç‚¹å°±æ˜¯ä¸åŒçš„æ–‡ä»¶è®¡ç®—å‡ºçš„æ‘˜è¦æ˜¯ä¸åŒçš„(ä¹Ÿæœ‰å¯èƒ½ç›¸åŒï¼Œä½†æ˜¯å¯èƒ½æ€§éå¸¸éå¸¸ä½)ï¼Œæ¯”å¦‚ä¸€ä¸ª1Gçš„è§†é¢‘æ–‡ä»¶ï¼Œå“ªæ€•åªæ˜¯æ”¹åŠ¨å…¶ä¸­ä¸€ä¸ªå­—èŠ‚ï¼Œæœ€åè®¡ç®—å¾—åˆ°çš„æ‘˜è¦ä¹Ÿæ˜¯å®Œå…¨ä¸åŒçš„ï¼Œæ‰€ä»¥æ‘˜è¦ç®—æ³•é€šå¸¸æ˜¯ç”¨æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦è¢«ç¯¡æ”¹è¿‡ã€‚å…¶è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯é€šè¿‡æ‘˜è¦æ˜¯æ— æ³•æ¨å¯¼å‡ºæºæ–‡ä»¶çš„ä¿¡æ¯çš„ã€‚å¸¸ç”¨çš„æ‘˜è¦(æ•£åˆ—)ç®—æ³•æœ‰MD5ã€SHAç­‰ã€‚</p><h2 id="æ•°å­—ç­¾å"><a href="#æ•°å­—ç­¾å" class="headerlink" title="æ•°å­—ç­¾å"></a>æ•°å­—ç­¾å</h2><p>æ•°å­—ç­¾åå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„æ‘˜è¦åŠ å¯†åçš„ä¿¡æ¯ã€‚æ•°å­—ç­¾åæ˜¯å’Œæºæ–‡ä»¶ä¸€èµ·å‘é€ç»™æ¥æ”¶æ–¹çš„ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°åå¯¹æ–‡ä»¶ç”¨æ‘˜è¦ç®—æ³•ç®—å‡ºä¸€ä¸ªæ‘˜è¦ï¼Œç„¶åå’Œæ•°å­—ç­¾åä¸­çš„æ‘˜è¦è¿›è¡Œæ¯”å¯¹ï¼Œä¸¤è€…ä¸ä¸€è‡´çš„è¯è¯´æ˜æ–‡ä»¶è¢«ç¯¡æ”¹äº†ã€‚</p><h2 id="æ•°å­—è¯ä¹¦"><a href="#æ•°å­—è¯ä¹¦" class="headerlink" title="æ•°å­—è¯ä¹¦"></a>æ•°å­—è¯ä¹¦</h2><p>æ•°å­—è¯ä¹¦æ˜¯ä¸€ä¸ªç»è¯ä¹¦æˆæƒä¸­å¿ƒç”Ÿæˆçš„æ–‡ä»¶ï¼Œæ•°å­—è¯ä¹¦é‡Œä¸€èˆ¬ä¼šåŒ…å«å…¬é’¥ã€å…¬é’¥æ‹¥æœ‰è€…åç§°ã€CAçš„æ•°å­—ç­¾åã€æœ‰æ•ˆæœŸã€æˆæƒä¸­å¿ƒåç§°ã€è¯ä¹¦åºåˆ—å·ç­‰ä¿¡æ¯ã€‚å…¶ä¸­CAçš„æ•°å­—ç­¾åæ˜¯éªŒè¯è¯ä¹¦æ˜¯å¦è¢«ç¯¡æ”¹çš„å…³é”®ï¼Œå®ƒå…¶å®å°±æ˜¯å¯¹è¯ä¹¦é‡Œé¢é™¤äº†CAçš„æ•°å­—ç­¾åä»¥å¤–çš„å†…å®¹è¿›è¡Œæ‘˜è¦ç®—æ³•å¾—åˆ°ä¸€ä¸ªæ‘˜è¦ï¼Œç„¶åCAæœºæ„ç”¨ä»–è‡ªå·±çš„ç§é’¥å¯¹è¿™ä¸ªæ‘˜è¦è¿›è¡ŒåŠ å¯†å°±ç”Ÿæˆäº†CAçš„æ•°å­—ç­¾åï¼ŒCAæœºæ„ä¼šå…¬å¼€å®ƒçš„å…¬é’¥ï¼ŒéªŒè¯è¯ä¹¦æ—¶å°±æ˜¯ç”¨è¿™ä¸ªå…¬é’¥è§£å¯†CAçš„æ•°å­—ç­¾åï¼Œç„¶åç”¨æ¥éªŒè¯è¯ä¹¦æ˜¯å¦è¢«ç¯¡æ”¹ã€‚</p><hr><a id="more"></a><h2 id="æ¡ˆä¾‹è®²è§£"><a href="#æ¡ˆä¾‹è®²è§£" class="headerlink" title="æ¡ˆä¾‹è®²è§£"></a>æ¡ˆä¾‹è®²è§£</h2><p>åœºæ™¯ï¼šå¼ ä¸‰è¦æ‰¾äººè£…ä¿®ä¸€ä¸ªæˆ¿å­ï¼ŒåŸåˆ™æ˜¯è°çš„å‡ºä»·ä¾¿å®œå°±ç»™è°è£…ä¿®ï¼Œæ‰€ä»¥å¯¹äºæŠ¥ä»·æ–‡ä»¶å°±æ˜¯å±äºæœºå¯†æ–‡ä»¶ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸åŒçš„æ–¹å¼ä¼ è¾“æŠ¥ä»·æ–‡ä»¶éƒ½ä¼šæœ‰ä»€ä¹ˆé£é™©ã€‚</p><h3 id="é€šè¿‡å¯¹ç§°åŠ å¯†æœ‰ä»€ä¹ˆé£é™©"><a href="#é€šè¿‡å¯¹ç§°åŠ å¯†æœ‰ä»€ä¹ˆé£é™©" class="headerlink" title="é€šè¿‡å¯¹ç§°åŠ å¯†æœ‰ä»€ä¹ˆé£é™©"></a>é€šè¿‡å¯¹ç§°åŠ å¯†æœ‰ä»€ä¹ˆé£é™©</h3><p>ç°åœ¨æå››æƒ³æ¥è¿™ä¸ªè£…ä¿®çš„æ´»ï¼Œä»–åšäº†ä¸€ä»½æŠ¥ä»·æ–‡ä»¶(æ–‡ä»¶å:lisi.txtï¼Œæ–‡ä»¶å†…å®¹:æŠ¥ä»·50ä¸‡)ã€‚ç„¶åæå››ç”¨ä¸€ä¸ªå¯¹ç§°ç§˜é’¥123å¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡ŒåŠ å¯†ã€‚æœ€åæå››å°†è¿™ä¸ªç§˜é’¥å’ŒåŠ å¯†çš„æ–‡ä»¶å‘ç»™å¼ ä¸‰ï¼Œå¼ ä¸‰æ”¶åˆ°åç”¨è¿™ä¸ªç§˜é’¥è§£å¯†ï¼ŒçŸ¥é“äº†æå››çš„æŠ¥ä»·æ˜¯50ä¸‡ã€‚åŒæ—¶ç‹äº”ä¹Ÿæƒ³æ¥è¿™ä¸ªè£…ä¿®çš„æ´»ï¼Œä»–æœ¬æ¥æ˜¯æƒ³æŠ¥ä»·55ä¸‡çš„ï¼Œä½†æ˜¯åˆæ‹…å¿ƒæŠ¥ä»·å¤ªé«˜è€Œä¸¢æ‰è¿™ä¸ªæ´»ã€‚æ°å·§ç‹äº”æ˜¯ä¸ªé»‘å®¢é«˜æ‰‹ï¼Œäºæ˜¯ä»–æˆªè·äº†æå››å‘ç»™å¼ ä¸‰çš„ç§˜é’¥å’ŒåŠ å¯†æ–‡ä»¶ï¼ŒçŸ¥é“äº†æå››æŠ¥ä»·æ˜¯50ä¸‡ã€‚æœ€åç‹äº”å°†è‡ªå·±çš„æŠ¥ä»·æ”¹æˆäº†49ä¸‡å‘ç»™å¼ ä¸‰ï¼Œç»“æœç‹äº”æ¥ä¸‹äº†è¿™ä¸ªè£…ä¿®æ´»ã€‚</p><blockquote><p>ç»“è®ºï¼šç”¨å¯¹ç§°åŠ å¯†çš„è¯ï¼Œä¸€æ—¦ç§˜é’¥è¢«é»‘å®¢æˆªè·ï¼ŒåŠ å¯†å°±å½¢åŒè™šè®¾ï¼Œæ‰€ä»¥å®‰å…¨æ€§æ¯”è¾ƒä½ã€‚</p></blockquote><h3 id="å¦‚æœç”¨éå¯¹ç§°åŠ å¯†ä¼šæ€ä¹ˆæ ·"><a href="#å¦‚æœç”¨éå¯¹ç§°åŠ å¯†ä¼šæ€ä¹ˆæ ·" class="headerlink" title="å¦‚æœç”¨éå¯¹ç§°åŠ å¯†ä¼šæ€ä¹ˆæ ·"></a>å¦‚æœç”¨éå¯¹ç§°åŠ å¯†ä¼šæ€ä¹ˆæ ·</h3><p>é¦–å…ˆå¼ ä¸‰ä¼šç”Ÿæˆä¸€å¯¹ç§˜é’¥ï¼Œç§é’¥æ˜¯zhangsan1ï¼Œå…¬é’¥æ˜¯zhangsan2ï¼Œç§é’¥å¼ ä¸‰è‡ªå·±ä¿å­˜ï¼Œå°†å…¬é’¥å…¬å¸ƒå‡ºå»ã€‚</p><p>æå››å°†æŠ¥ä»·æ–‡ä»¶list.txtç”¨å¼ ä¸‰å…¬å¸ƒçš„å…¬é’¥zhangsan2è¿›è¡ŒåŠ å¯†åä¼ ç»™å¼ ä¸‰ï¼Œç„¶åå¼ ä¸‰ç”¨ç§é’¥zhangsan1è¿›è¡Œè§£å¯†å¾—åˆ°æå››çš„æŠ¥ä»·æ˜¯50ä¸‡ã€‚</p><p>è¿™ä¸ªæ—¶å€™å³ä½¿ç‹äº”æˆªè·åˆ°äº†æå››å‘ç»™å¼ ä¸‰çš„æŠ¥ä»·æ–‡ä»¶ï¼Œç”±äºç‹äº”æ²¡æœ‰å¼ ä¸‰çš„ç§é’¥ï¼Œæ‰€ä»¥ä»–æ˜¯æ— æ³•è§£å¯†æ–‡ä»¶çš„ï¼Œä¹Ÿå°±æ— æ³•çŸ¥é“æå››çš„æŠ¥ä»·ã€‚æœ€åç‹äº”å› ä¸ºæŠ¥ä»·55ä¸‡è€Œä¸¢æ‰äº†è¿™ä¸ªè£…ä¿®çš„æœºä¼šã€‚</p><p>æ‰€ä»¥ç”¨éå¯¹ç§°åŠ å¯†æ˜¯å¯ä»¥ä¿è¯æ•°æ®ä¼ è¾“å®‰å…¨çš„ã€‚ä¸è¿‡è¿™é‡Œè¯´ä¸€å¥é¢˜å¤–è¯ï¼Œæ—¢ç„¶éå¯¹ç§°åŠ å¯†å®‰å…¨æ€§é«˜ï¼Œé‚£ä¸ºä»€ä¹ˆä¸æ·˜æ±°æ‰å¯¹ç§°åŠ å¯†å‘¢ï¼Ÿå…¶å®å…³é”®å°±åœ¨äºåŠ å¯†é€Ÿåº¦ï¼Œéå¯¹ç§°åŠ å¯†è®¡ç®—é‡å¾ˆå¤§ï¼Œæ‰€ä»¥åŠ å¯†é€Ÿåº¦æ˜¯å¾ˆæ…¢çš„ï¼Œå¦‚æœå‘é€æ¶ˆæ¯éå¸¸é¢‘ç¹ï¼Œä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„è¯å°±ä¼šå¯¹æ€§èƒ½é€ æˆå¾ˆå¤§å½±å“ã€‚æ‰€ä»¥åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­é€šå¸¸æ˜¯å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ç»“åˆä½¿ç”¨çš„ã€‚ä¹Ÿå°±æ˜¯å¯¹ç§°åŠ å¯†çš„ç§˜é’¥æ˜¯ç”¨éå¯¹ç§°åŠ å¯†åå‘é€çš„ï¼Œè¿™æ ·èƒ½ä¿è¯å¯¹ç§°åŠ å¯†çš„ç§˜é’¥ä¸è¢«é»‘å®¢æˆªè·ï¼Œç„¶ååœ¨å‘é€ä¸šåŠ¡æ•°æ®æ—¶å°±ç”¨å¯¹ç§°åŠ å¯†ã€‚è¿™æ ·æ—¢ä¿è¯äº†å®‰å…¨æ€§ä¹Ÿä¿è¯äº†åŠ å¯†é€Ÿåº¦ã€‚</p><blockquote><p>ç»“è®ºï¼šéå¯¹ç§°åŠ å¯†å¯ä»¥é˜²æ­¢é»‘å®¢æˆªè·åŠ å¯†åçš„å†…å®¹ï¼Œå®‰å…¨æ€§é«˜ã€‚</p></blockquote><h3 id="æ•°å­—ç­¾åæœ‰ä»€ä¹ˆç”¨"><a href="#æ•°å­—ç­¾åæœ‰ä»€ä¹ˆç”¨" class="headerlink" title="æ•°å­—ç­¾åæœ‰ä»€ä¹ˆç”¨"></a>æ•°å­—ç­¾åæœ‰ä»€ä¹ˆç”¨</h3><p>å‰é¢éƒ½è¯´äº†éå¯¹ç§°åŠ å¯†æ˜¯å®‰å…¨çš„ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦æ•°å­—ç­¾åå‘¢ï¼Ÿ</p><p>è®¾æƒ³ä¸€ä¸‹ï¼Œç‹äº”æˆªè·äº†æå››çš„æŠ¥ä»·æ–‡ä»¶ï¼Œç‹äº”è™½ç„¶æ— æ³•çŸ¥é“æå››çš„å®é™…æŠ¥ä»·ï¼Œä½†æ˜¯ä»–å®Œå…¨å¯ä»¥ä¼ªé€ ä¸€ä»½æå››çš„æŠ¥ä»·(æ–‡ä»¶å:lisi.txtï¼Œæ–‡ä»¶å†…å®¹:æŠ¥ä»·60ä¸‡)ï¼Œç„¶åå°†è¿™ä»½ä¼ªé€ æ–‡ä»¶ç”¨å¼ ä¸‰å…¬å¸ƒçš„å…¬é’¥zhangsan2è¿›è¡ŒåŠ å¯†åæ›¿æ¢åŸæ¥çš„æŠ¥ä»·æ–‡ä»¶ã€‚å¼ ä¸‰æ”¶åˆ°åè§£å¯†å‘ç°æŠ¥ä»·æ˜¯60ä¸‡ï¼Œäºæ˜¯å¼ ä¸‰å°±ä»¥ä¸ºæå››æŠ¥çš„ä»·æ˜¯60ä¸‡ï¼Œæœ€åå†³å®šå°†è£…ä¿®çš„æ´»ç»™æŠ¥ä»·55ä¸‡çš„ç‹äº”æ¥åšã€‚</p><p>å‘ç”Ÿè¿™ä¸ªé—®é¢˜çš„å…³é”®å°±åœ¨äºå¼ ä¸‰æ— æ³•çŸ¥é“æŠ¥ä»·æ–‡ä»¶æ˜¯å¦è¢«ç¯¡æ”¹è¿‡ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜å°±éœ€è¦ç”¨åˆ°æ•°å­—ç­¾åã€‚é¦–å…ˆæå››éœ€è¦è‡ªå·±ç”Ÿæˆä¸€å¯¹éå¯¹ç§°åŠ å¯†çš„ç§˜é’¥ï¼Œç§é’¥lisi1è‡ªå·±ä¿å­˜ï¼Œå…¬é’¥lisi2å‘ç»™å¼ ä¸‰ã€‚ç„¶åæå››å¯¹è‡ªå·±çš„æŠ¥ä»·æ–‡ä»¶é€šè¿‡æ‘˜è¦ç®—æ³•å¾—åˆ°ä¸€ä¸ªæ‘˜è¦(å‡è®¾æ‘˜è¦æ˜¯aaa)ï¼Œå†ç”¨è‡ªå·±çš„ç§é’¥lisi1åŠ å¯†è¿™ä¸ªæ‘˜è¦å°±å¾—åˆ°äº†æŠ¥ä»·æ–‡ä»¶çš„æ•°å­—ç­¾åï¼Œæœ€åå°†åŠ å¯†çš„æŠ¥ä»·æ–‡ä»¶å’Œæ•°å­—ç­¾åä¸€èµ·å‘ç»™å¼ ä¸‰ï¼Œå¼ ä¸‰æ”¶åˆ°åå…ˆç”¨æå››å‘è¿‡æ¥çš„å…¬é’¥lisi2è§£å¯†æ•°å­—ç­¾åå¾—åˆ°æ‘˜è¦aaaï¼Œç„¶åç”¨è‡ªå·±çš„ç§é’¥zhangsan1è§£å¯†åŠ å¯†çš„æ–‡ä»¶å¾—åˆ°æŠ¥ä»·æºæ–‡ä»¶ï¼Œç„¶åå¯¹æŠ¥ä»·æºæ–‡ä»¶è¿›è¡Œæ‘˜è¦ç®—æ³•ï¼Œçœ‹è®¡ç®—å¾—åˆ°çš„ç»“æœæ˜¯ä¸æ˜¯aaaï¼Œå¦‚æœä¸æ˜¯aaaçš„è¯å°±è¯´æ˜æŠ¥ä»·æ–‡ä»¶è¢«ç¯¡æ”¹äº†ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœç‹äº”æˆªè·äº†æå››å‘ç»™å¼ ä¸‰çš„æ–‡ä»¶ã€‚ç‹äº”æ˜¯æ— æ³•è§£å¯†æŠ¥ä»·æ–‡ä»¶çš„ã€‚å¦‚æœç‹äº”ä¼ªé€ ä¸€ä»½æŠ¥ä»·æ–‡ä»¶çš„è¯ï¼Œç­‰å¼ ä¸‰æ”¶åˆ°åå°±ä¼šå‘ç°æŠ¥ä»·æ–‡ä»¶å’Œæ•°å­—ç­¾åä¸åŒ¹é…ã€‚é‚£ç‹äº”èƒ½ä¸èƒ½ä¼ªé€ æŠ¥ä»·æ–‡ä»¶çš„åŒæ—¶ä¹Ÿä¼ªé€ ç­¾åå‘¢ï¼Ÿå› ä¸ºç‹äº”æ²¡æœ‰æå››çš„ç§é’¥ï¼Œæ‰€ä»¥æ²¡æ³•å¯¹ä¼ªé€ çš„æŠ¥ä»·æ–‡ä»¶çš„æ‘˜è¦è¿›è¡ŒåŠ å¯†ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æ³•ä¼ªé€ ç­¾åã€‚</p><blockquote><p>ç»“è®ºï¼šéå¯¹ç§°åŠ å¯†è™½ç„¶èƒ½ç¡®ä¿åŠ å¯†æ–‡ä»¶å†…å®¹ä¸è¢«çªƒå–ï¼Œä½†ä¸èƒ½ä¿è¯æ–‡ä»¶ä¸è¢«ç¯¡æ”¹ã€‚æ•°å­—ç­¾åå°±æ˜¯ç”¨æ¥éªŒè¯æ–‡ä»¶æ˜¯å¦è¢«ç¯¡æ”¹è¿‡ã€‚</p></blockquote><h3 id="æ•°å­—è¯ä¹¦æœ‰ä»€ä¹ˆç”¨"><a href="#æ•°å­—è¯ä¹¦æœ‰ä»€ä¹ˆç”¨" class="headerlink" title="æ•°å­—è¯ä¹¦æœ‰ä»€ä¹ˆç”¨"></a>æ•°å­—è¯ä¹¦æœ‰ä»€ä¹ˆç”¨</h3><p>æ—¢ç„¶éå¯¹ç§°åŠ å¯†å¯ä»¥ä¿è¯æ–‡ä»¶å†…å®¹çš„å®‰å…¨æ€§ï¼Œæ•°å­—ç­¾ååˆå¯ä»¥ä¿è¯æ–‡ä»¶ä¸è¢«ç¯¡æ”¹ï¼Œé‚£è¿˜è¦æ•°å­—è¯ä¹¦æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å†æ¥è®¾æƒ³ä¸€ä¸‹ï¼Œç‹äº”è‡ªå·±ä¹Ÿç”Ÿæˆäº†ä¸€å¯¹ç”¨äºéå¯¹ç§°åŠ å¯†çš„ç§˜é’¥ï¼Œç§é’¥æ˜¯wangwu1ï¼Œå…¬é’¥æ˜¯wangwu2ã€‚å‰é¢æå››å°†è‡ªå·±çš„å…¬é’¥lisi2å‘ç»™å¼ ä¸‰çš„è¿‡ç¨‹ä¸­è¢«ç‹äº”ç»™æˆªè·äº†ï¼Œç‹äº”ç”¨è‡ªå·±çš„å…¬é’¥wangwu2æ›¿æ¢äº†æå››çš„å…¬é’¥lisi2ï¼Œæ‰€ä»¥å¼ ä¸‰æœ€åæ”¶åˆ°çš„å…¬é’¥å®é™…ä¸Šæ˜¯ç‹äº”çš„ï¼Œä½†å¼ ä¸‰å¯¹è¿™å¹¶ä¸çŸ¥æƒ…ã€‚åé¢æå››å‘çš„æ•°å­—ç­¾åå’ŒåŠ å¯†çš„æŠ¥ä»·æ–‡ä»¶éƒ½è¢«ç‹äº”æˆªè·ï¼Œå¹¶ä¸”ç‹äº”ä¼ªé€ äº†ä¸€ä»½æŠ¥ä»·æ–‡ä»¶ï¼ŒåŒæ—¶ç”¨è‡ªå·±çš„ç§é’¥åŠ å¯†æŠ¥ä»·æ–‡ä»¶çš„æ‘˜è¦ç”Ÿæˆä¼ªé€ çš„ç­¾åå¹¶å‘ç»™å¼ ä¸‰ï¼Œå¼ ä¸‰æ”¶åˆ°åè¿›è¡ŒéªŒè¯å‘ç°æ•°å­—ç­¾åå’ŒæŠ¥ä»·æ–‡ä»¶æ˜¯åŒ¹é…çš„ï¼Œå°±ä»¥ä¸ºè¿™ä»½æŠ¥ä»·æ–‡ä»¶æ˜¯çœŸå®çš„ã€‚</p><p>å‡ºç°è¿™ä¸ªé—®é¢˜çš„å…³é”®å°±åœ¨äºå¼ ä¸‰æ²¡æ³•ç¡®è®¤æ”¶åˆ°çš„å…¬é’¥åˆ°åº•æ˜¯ä¸æ˜¯æå››å‘çš„ï¼Œè¿™ä¸ªæ—¶å€™æ•°å­—è¯ä¹¦å°±èµ·åˆ°ä½œç”¨äº†ã€‚æå››åˆ°æƒå¨çš„æ•°å­—è¯ä¹¦æœºæ„ç”³è¯·æ•°å­—è¯ä¹¦ï¼Œè¯ä¹¦é‡Œé¢åŒ…å«äº†å…¬é’¥(lisi2)å’Œå…¬é’¥çš„æ‹¥æœ‰è€…(æå››)ç­‰ç›¸å…³ä¿¡æ¯ï¼Œç„¶åæå››å°†è¯ä¹¦å‘ç»™å¼ ä¸‰ï¼Œå¼ ä¸‰é€šè¿‡è¯ä¹¦é‡Œé¢çš„ä¿¡æ¯å°±å¯ä»¥çŸ¥é“å…¬é’¥åˆ°åº•æ˜¯ä¸æ˜¯æå››çš„äº†ã€‚</p><p>é‚£è¯ä¹¦åœ¨å‘é€è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰å¯èƒ½è¢«ç‹äº”æˆªè·å¹¶ç¯¡æ”¹å‘¢ï¼Ÿè¦çŸ¥é“è¯ä¹¦é‡Œé¢è¿˜åŒ…å«CAçš„æ•°å­—ç­¾åï¼Œè¿™ä¸ªç­¾åæ˜¯è¯ä¹¦æœºæ„ç”¨ä»–ä»¬è‡ªå·±çš„ç§é’¥å¯¹è¯ä¹¦çš„æ‘˜è¦è¿›è¡ŒåŠ å¯†çš„ï¼Œè€Œå…¬é’¥æ˜¯å…¬å¼€çš„ã€‚æ‰€ä»¥å³ä¾¿ç‹äº”æˆªè·å¹¶ç¯¡æ”¹äº†è¯ä¹¦å†…å®¹ï¼Œä»–ä¹Ÿæ— æ³•ä¼ªé€ è¯ä¹¦æœºæ„çš„ç­¾åï¼Œå¼ ä¸‰åœ¨æ”¶åˆ°è¯ä¹¦åé€šè¿‡éªŒè¯ç­¾åä¹Ÿä¼šå‘ç°è¯ä¹¦è¢«ç¯¡æ”¹äº†ã€‚</p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E3%80%81%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E3%80%81%E6%91%98%E8%A6%81%E3%80%81%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D%E3%80%81%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>å…³äºnodeçš„é‚£äº›äº‹(è¿›é˜¶ç¯‡)</title>
      <link>http://mydearest.cn/2020/%E5%85%B3%E4%BA%8Enode%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B(%E8%BF%9B%E9%98%B6%E7%AF%87).html</link>
      <guid>http://mydearest.cn/2020/%E5%85%B3%E4%BA%8Enode%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B(%E8%BF%9B%E9%98%B6%E7%AF%87).html</guid>
      <pubDate>Wed, 01 Jul 2020 16:31:02 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;ğŸ‘¨æé—®ï¼šæ³¨å†Œè·¯ç”±æ—¶-app-getã€app-useã€app-all-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;a href=&quot;#ğŸ‘¨æé—®ï¼šæ³¨å†Œè·¯ç”±æ—¶-app-getã€app-useã€app-all-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ğŸ‘¨æé—®ï¼šæ³¨å†Œè·¯ç”±æ—¶ app.getã€app.useã€app.all çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ&quot;&gt;&lt;/a&gt;ğŸ‘¨æé—®ï¼šæ³¨å†Œè·¯ç”±æ—¶ app.getã€app.useã€app.all çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;&lt;h3 id=&quot;app-use-path-callback&quot;&gt;&lt;a href=&quot;#app-use-path-callback&quot; class=&quot;headerlink&quot; title=&quot;app.use(path,callback)&quot;&gt;&lt;/a&gt;app.use(path,callback)&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;app.useæ˜¯expressç”¨æ¥è°ƒç”¨ä¸­é—´ä»¶çš„æ–¹æ³•ã€‚ä¸­é—´ä»¶é€šå¸¸ä¸å¤„ç†è¯·æ±‚å’Œå“åº”ï¼Œä¸€èˆ¬åªå¤„ç†è¾“å…¥æ•°æ®ï¼Œå¹¶å°†å…¶äº¤ç»™é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå¤„ç†ç¨‹åºï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­app.use
(â€˜/userâ€™)ï¼Œé‚£ä¹ˆåªè¦è·¯å¾„ä»¥ /user å¼€å§‹å³å¯åŒ¹é…ï¼Œå¦‚ /user/tree å°±å¯ä»¥åŒ¹é…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;app-all&quot;&gt;&lt;a href=&quot;#app-all&quot; class=&quot;headerlink&quot; title=&quot;app.all()&quot;&gt;&lt;/a&gt;app.all()&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;app.all æ˜¯è·¯ç”±ä¸­æŒ‡ä»£æ‰€æœ‰çš„è¯·æ±‚æ–¹å¼ï¼Œç”¨ä½œè·¯ç”±å¤„ç†ï¼ŒåŒ¹é…å®Œæ•´è·¯å¾„ï¼Œåœ¨app.useä¹‹åå¯ä»¥ç†è§£ä¸ºåŒ…å«äº†app.getã€app.postç­‰çš„å®šä¹‰ï¼Œæ¯”å¦‚app.all(â€˜/
user/treeâ€™),èƒ½åŒæ—¶è¦†ç›–ï¼šget(â€˜/user/treeâ€™) ã€ post(â€˜/user/treeâ€™)ã€ put(â€˜/user/treeâ€™) ,ä¸è¿‡ç›¸å¯¹äºapp.use()çš„å‰ç¼€åŒ¹é…ï¼Œå®ƒåˆ™æ˜¯åŒ¹é…å…·ä½“çš„è·¯
ç”±ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;allå®Œæ•´åŒ¹é…ï¼ŒuseåªåŒ¹é…å‰ç¼€&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="ğŸ‘¨æé—®ï¼šæ³¨å†Œè·¯ç”±æ—¶-app-getã€app-useã€app-all-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ğŸ‘¨æé—®ï¼šæ³¨å†Œè·¯ç”±æ—¶-app-getã€app-useã€app-all-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ğŸ‘¨æé—®ï¼šæ³¨å†Œè·¯ç”±æ—¶ app.getã€app.useã€app.all çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ğŸ‘¨æé—®ï¼šæ³¨å†Œè·¯ç”±æ—¶ app.getã€app.useã€app.all çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h2><h3 id="app-use-path-callback"><a href="#app-use-path-callback" class="headerlink" title="app.use(path,callback)"></a>app.use(path,callback)</h3><blockquote><p>app.useæ˜¯expressç”¨æ¥è°ƒç”¨ä¸­é—´ä»¶çš„æ–¹æ³•ã€‚ä¸­é—´ä»¶é€šå¸¸ä¸å¤„ç†è¯·æ±‚å’Œå“åº”ï¼Œä¸€èˆ¬åªå¤„ç†è¾“å…¥æ•°æ®ï¼Œå¹¶å°†å…¶äº¤ç»™é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå¤„ç†ç¨‹åºï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­app.use(â€˜/userâ€™)ï¼Œé‚£ä¹ˆåªè¦è·¯å¾„ä»¥ /user å¼€å§‹å³å¯åŒ¹é…ï¼Œå¦‚ /user/tree å°±å¯ä»¥åŒ¹é…ã€‚</p></blockquote><h3 id="app-all"><a href="#app-all" class="headerlink" title="app.all()"></a>app.all()</h3><blockquote><p>app.all æ˜¯è·¯ç”±ä¸­æŒ‡ä»£æ‰€æœ‰çš„è¯·æ±‚æ–¹å¼ï¼Œç”¨ä½œè·¯ç”±å¤„ç†ï¼ŒåŒ¹é…å®Œæ•´è·¯å¾„ï¼Œåœ¨app.useä¹‹åå¯ä»¥ç†è§£ä¸ºåŒ…å«äº†app.getã€app.postç­‰çš„å®šä¹‰ï¼Œæ¯”å¦‚app.all(â€˜/user/treeâ€™),èƒ½åŒæ—¶è¦†ç›–ï¼šget(â€˜/user/treeâ€™) ã€ post(â€˜/user/treeâ€™)ã€ put(â€˜/user/treeâ€™) ,ä¸è¿‡ç›¸å¯¹äºapp.use()çš„å‰ç¼€åŒ¹é…ï¼Œå®ƒåˆ™æ˜¯åŒ¹é…å…·ä½“çš„è·¯ç”±ã€‚</p></blockquote><p><code>allå®Œæ•´åŒ¹é…ï¼ŒuseåªåŒ¹é…å‰ç¼€</code></p><hr><a id="more"></a><h2 id="express-responseæœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•"><a href="#express-responseæœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•" class="headerlink" title="express responseæœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•?"></a>express responseæœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•?</h2><p>express responseå¯¹è±¡æ˜¯å¯¹Node.jsåŸç”Ÿå¯¹è±¡ServerResponseçš„æ‰©å±•ï¼Œexpress responseå¸¸è§çš„æœ‰ï¼šres.end()ã€res.send()ã€res.render()ã€res.redirect()ï¼Œè€Œè¿™å‡ ä¸ªæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿæ›´å¤šè¯·çœ‹æ–‡æ¡£<a href="https://www.expressjs.com.cn/4x/api.html#res" target="_blank" rel="noopener">express Response</a></p><h3 id="res-end"><a href="#res-end" class="headerlink" title="res.end()"></a>res.end()</h3><p>ç»“æŸresponse - å¦‚æœæœåŠ¡ç«¯æ²¡æœ‰æ•°æ®å›ä¼ ç»™å®¢æˆ·ç«¯åˆ™å¯ä»¥ç›´æ¥ç”¨res.endè¿”å›ï¼Œä»¥æ­¤æ¥ç»“æŸå“åº”è¿‡ç¨‹ã€‚</p><h3 id="res-send-body"><a href="#res-send-body" class="headerlink" title="res.send(body)"></a>res.send(body)</h3><p>å¦‚æœæœåŠ¡ç«¯æœ‰æ•°æ®å¯ä»¥ä½¿ç”¨res.send,å¯ä»¥å¿½ç•¥res.endï¼Œbodyå‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªBufferå¯¹è±¡ï¼Œä¸€ä¸ªStringå¯¹è±¡æˆ–ä¸€ä¸ªArrayã€‚</p><h3 id="res-render"><a href="#res-render" class="headerlink" title="res.render"></a>res.render</h3><p>res.renderç”¨æ¥æ¸²æŸ“æ¨¡æ¿æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç»“åˆæ¨¡ç‰ˆå¼•æ“æ¥ä½¿ç”¨ï¼Œä¸‹é¢çœ‹ä¸ªç®€å•çš„demo (express+ejsæ¨¡ç‰ˆå¼•æ“)</p><p><a href="http://cdn.mydearest.cn/blog/images/node-ejs.png" target="_blank" rel="noopener">node-ejs</a></p><ul><li>é…ç½®<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">app.set(<span class="string">'views'</span>, path.join(__dirname, <span class="string">'views'</span>)); <span class="comment">// viewsï¼šæ¨¡ç‰ˆæ–‡ä»¶å­˜æ”¾çš„ä½ç½®ï¼Œé»˜è®¤æ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹</span></span><br><span class="line">app.set(<span class="string">'view engine'</span>, <span class="string">'ejs'</span>); <span class="comment">// view engineï¼šä½¿ç”¨ä»€ä¹ˆæ¨¡ç‰ˆå¼•æ“</span></span><br></pre></td></tr></table></figure></li></ul><p>å…¶æ¬¡æ˜¯æ ¹æ®ä½¿ç”¨çš„æ¨¡ç‰ˆå¼•æ“è¯­æ³•ç¼–å†™æ¨¡ç‰ˆï¼Œæœ€åé€šè¿‡res.render(view,locals, callback)å¯¼å‡ºï¼Œå…·ä½“ä½¿ç”¨å‚æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">viewï¼šæ¨¡æ¿çš„è·¯å¾„</span><br><span class="line">localsï¼šæ¸²æŸ“æ¨¡æ¿æ—¶ä¼ è¿›å»çš„æœ¬åœ°å˜é‡</span><br><span class="line">callbackï¼šå¦‚æœå®šä¹‰äº†å›è°ƒå‡½æ•°ï¼Œåˆ™å½“æ¸²æŸ“å·¥ä½œå®Œæˆæ—¶æ‰è¢«è°ƒç”¨ï¼Œè¿”å›æ¸²æŸ“å¥½çš„å­—ç¬¦ä¸²ï¼ˆæ­£ç¡®ï¼‰æˆ–è€…é”™è¯¯ä¿¡æ¯ âŒ</span><br></pre></td></tr></table></figure><h3 id="res-redirect"><a href="#res-redirect" class="headerlink" title="res.redirect"></a>res.redirect</h3><p>é‡å®šä¹‰åˆ°pathæ‰€æŒ‡å®šçš„URLï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é‡å®šå‘æ—¶å®šä¹‰å¥½HTTPçŠ¶æ€ç ï¼ˆé»˜è®¤ä¸º302ï¼‰<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">res.redirect(<span class="string">'http://baidu.com'</span>);</span><br><span class="line">res.redirect(<span class="number">301</span>, <span class="string">'http://baidu.com'</span>);</span><br></pre></td></tr></table></figure></p><h2 id="nodeå¦‚ä½•åˆ©ç”¨å¤šæ ¸CPUä»¥åŠåˆ›å»ºé›†ç¾¤"><a href="#nodeå¦‚ä½•åˆ©ç”¨å¤šæ ¸CPUä»¥åŠåˆ›å»ºé›†ç¾¤" class="headerlink" title="nodeå¦‚ä½•åˆ©ç”¨å¤šæ ¸CPUä»¥åŠåˆ›å»ºé›†ç¾¤?"></a>nodeå¦‚ä½•åˆ©ç”¨å¤šæ ¸CPUä»¥åŠåˆ›å»ºé›†ç¾¤?</h2><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œnodejsæ˜¯åŸºäºchromeæµè§ˆå™¨çš„V8å¼•æ“æ„å»ºçš„ï¼Œä¸€ä¸ªnodejsè¿›ç¨‹åªèƒ½ä½¿ç”¨ä¸€ä¸ªCPU(ä¸€ä¸ªCPUè¿è¡Œä¸€ä¸ªnodeå®ä¾‹)ï¼Œä¸¾ä¸ªä¾‹å­ï¼šæˆ‘ä»¬ç°åœ¨æœ‰ä¸€å°8æ ¸çš„æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå¦‚æœä¸åˆ©ç”¨å¤šæ ¸CPUï¼Œæ˜¯å¾ˆä¸€ç§æµªè´¹èµ„æºçš„è¡Œä¸ºï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡å¯åŠ¨å¤šä¸ªè¿›ç¨‹æ¥åˆ©ç”¨å¤šæ ¸CPUã€‚</p><p>Node.jsç»™æˆ‘ä»¬æä¾›äº†clusteræ¨¡å—ï¼Œç”¨äºnodejså¤šæ ¸å¤„ç†ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡å®ƒæ¥æ­å»ºä¸€ä¸ªç”¨äºè´Ÿè½½å‡è¡¡çš„nodeæœåŠ¡é›†ç¾¤ã€‚åˆ›å»ºå¤šè¿›ç¨‹ã€‚</p><blockquote><p>æœ¬è´¨è¿˜æ˜¯é€šè¿‡ child_process.fork() ä¸“é—¨ç”¨äºè¡ç”Ÿæ–°çš„ Node.js è¿›ç¨‹,è¡ç”Ÿçš„ Node.js å­è¿›ç¨‹ç‹¬ç«‹äºçˆ¶è¿›ç¨‹ï¼Œä½†ä¸¤è€…ä¹‹é—´å»ºç«‹çš„ IPC é€šä¿¡é€šé“é™¤å¤–ï¼Œ æ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„å†…å­˜ï¼Œå¸¦æœ‰è‡ªå·±çš„ V8 å®ä¾‹</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cluster = <span class="built_in">require</span>(<span class="string">'cluster'</span>)</span><br><span class="line"><span class="keyword">const</span> os = <span class="built_in">require</span>(<span class="string">'os'</span>)</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> ejs = <span class="built_in">require</span>(<span class="string">'ejs'</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> numCPUs = os.cpus().length</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (cluster.isMaster) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i =<span class="number">0</span> ;i&lt;numCPUs.length;++i) &#123;</span><br><span class="line">        cluster.fork()</span><br><span class="line">    &#125;</span><br><span class="line">    cluster.on(<span class="string">'exit'</span>, (worker, code, signal) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`worker <span class="subst">$&#123;worker.process.pid&#125;</span> died`</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`worker <span class="subst">$&#123;worker.process.pid&#125;</span> started`</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸€ä¸ªç«¯å£è¢«å¤šä¸ªè¿›ç¨‹ç›‘å¬</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsof -i -P -n | grep 3000</span><br><span class="line">ps -ef | grep pid</span><br></pre></td></tr></table></figure><h2 id="å¼€å¯å¤šä¸ªå­çº¿ç¨‹"><a href="#å¼€å¯å¤šä¸ªå­çº¿ç¨‹" class="headerlink" title="å¼€å¯å¤šä¸ªå­çº¿ç¨‹"></a>å¼€å¯å¤šä¸ªå­çº¿ç¨‹</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123;</span><br><span class="line">    Worker, isMainThread, parentPort, workerData</span><br><span class="line">&#125; = <span class="built_in">require</span>(<span class="string">'worker_threads'</span>);</span><br><span class="line"><span class="keyword">const</span> worker = <span class="keyword">new</span> Worker(__filename, &#123;</span><br><span class="line">    workerData: script</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><ul><li>çº¿ç¨‹é—´å¦‚ä½•ä¼ è¾“æ•°æ®: parentPort postMessage on å‘é€ç›‘å¬æ¶ˆæ¯</li><li><p>å…±äº«å†…å­˜ï¼š SharedArrayBuffer é€šè¿‡è¿™ä¸ªå…±äº«å†…å­˜</p></li><li><p>åœ¨æœåŠ¡ä¸­è‹¥éœ€è¦æ‰§è¡Œ shell å‘½ä»¤ï¼Œé‚£ä¹ˆå°±éœ€è¦å¼€å¯ä¸€ä¸ªè¿›ç¨‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> exec = <span class="built_in">require</span>(<span class="string">'child_process'</span>).exec;</span><br><span class="line">exec(<span class="string">'ls'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">error, stdout, stderr</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(error) &#123;</span><br><span class="line">        <span class="built_in">console</span>.error(<span class="string">'error: '</span> + error);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'stdout: '</span> + stdout);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul><h2 id="nodeæ˜¯æ€æ ·æ”¯æŒhttps"><a href="#nodeæ˜¯æ€æ ·æ”¯æŒhttps" class="headerlink" title="nodeæ˜¯æ€æ ·æ”¯æŒhttps?"></a>nodeæ˜¯æ€æ ·æ”¯æŒhttps?</h2><p>httpså®ç°ï¼Œç¦»ä¸å¼€è¯ä¹¦ï¼Œé€šè¿‡opensslç”Ÿæˆå…¬é’¥ç§é’¥ï¼ˆä¸åšè¯¦ç»†ä»‹ç»ï¼‰ï¼Œç„¶ååŸºäº expressçš„ httpsæ¨¡å— å®ç°ï¼Œè®¾ç½®optionsé…ç½®, optionsæœ‰ä¸¤ä¸ªé€‰é¡¹ï¼Œä¸€ä¸ªæ˜¯è¯ä¹¦æœ¬ä½“ï¼Œä¸€ä¸ªæ˜¯å¯†ç ã€‚</p><h2 id="nodeå’Œå®¢æˆ·ç«¯æ€ä¹ˆè§£å†³è·¨åŸŸçš„é—®é¢˜ï¼Ÿ"><a href="#nodeå’Œå®¢æˆ·ç«¯æ€ä¹ˆè§£å†³è·¨åŸŸçš„é—®é¢˜ï¼Ÿ" class="headerlink" title="nodeå’Œå®¢æˆ·ç«¯æ€ä¹ˆè§£å†³è·¨åŸŸçš„é—®é¢˜ï¼Ÿ"></a>nodeå’Œå®¢æˆ·ç«¯æ€ä¹ˆè§£å†³è·¨åŸŸçš„é—®é¢˜ï¼Ÿ</h2><p>app.all(â€˜*â€™,(req,res,next)=&gt;{}) æ•ˆæœç›¸å½“äºapp.use((req,res,next)=&gt;{}), è¿™ä¹Ÿæ˜¯app.allçš„ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„åº”ç”¨ï¼Œå°±æ˜¯ç”¨æ¥å¤„ç†è·¨åŸŸè¯·æ±‚ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">app.all(<span class="string">'*'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    res.header(<span class="string">'Access-Control-Allow-Origin'</span>, <span class="string">'*'</span>);</span><br><span class="line">    res.header(<span class="string">'Access-Control-Allow-Headers'</span>, <span class="string">'X-Requested-With'</span>);</span><br><span class="line">    res.header(<span class="string">'Access-Control-Allow-Methods'</span>, <span class="string">'PUT, POST, GET, DELETE, OPTIONS'</span>);</span><br><span class="line">    res.header(<span class="string">'Content-Type'</span>, <span class="string">'application/json;charset=utf-8'</span>);</span><br><span class="line">    <span class="keyword">if</span> (req.method == <span class="string">'OPTIONS'</span>) &#123;</span><br><span class="line">        res.send(<span class="number">200</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><ul><li>corsæ¨¡å—</li></ul><h2 id="ä¸¤ä¸ªnodeç¨‹åºä¹‹é—´æ€æ ·äº¤äº’"><a href="#ä¸¤ä¸ªnodeç¨‹åºä¹‹é—´æ€æ ·äº¤äº’" class="headerlink" title="ä¸¤ä¸ªnodeç¨‹åºä¹‹é—´æ€æ ·äº¤äº’?"></a>ä¸¤ä¸ªnodeç¨‹åºä¹‹é—´æ€æ ·äº¤äº’?</h2><p>é€šè¿‡forkï¼ŒåŸç†æ˜¯å­ç¨‹åºç”¨process.onæ¥ç›‘å¬çˆ¶ç¨‹åºçš„æ¶ˆæ¯ï¼Œç”¨ process.sendç»™çˆ¶ç¨‹åºå‘æ¶ˆæ¯ï¼Œçˆ¶ç¨‹åºé‡Œç”¨child.on,child.sendè¿›è¡Œäº¤äº’ï¼Œæ¥å®ç°çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹äº’ç›¸å‘é€æ¶ˆæ¯ã€‚</p><blockquote><p>child-processå’Œprocessçš„stdin,stdout,stderroræ˜¯ä¸€æ ·çš„å—?æ¦‚å¿µéƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¾“å…¥ï¼Œè¾“å‡ºï¼Œé”™è¯¯ï¼Œéƒ½æ˜¯æµï¼åŒºåˆ«æ˜¯åœ¨çˆ¶ç¨‹åºçœ¼é‡Œï¼Œå­ç¨‹åºçš„stdoutæ˜¯è¾“å…¥æµï¼Œstdinæ˜¯è¾“å‡ºæµ</p></blockquote><h2 id="æ‰§è¡Œä¸­é—´ä»¶ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰"><a href="#æ‰§è¡Œä¸­é—´ä»¶ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰" class="headerlink" title="æ‰§è¡Œä¸­é—´ä»¶ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰"></a>æ‰§è¡Œä¸­é—´ä»¶ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰</h2><p>æˆ‘ä»¬é€šè¿‡ use æ³¨å†Œä¸­é—´ä»¶ï¼Œä¸­é—´ä»¶å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ç¬¬ä¸€ä¸ªæ˜¯ä¸Šä¸‹æ–‡ï¼Œç¬¬äºŒä¸ªæ˜¯ nextï¼Œåœ¨ä¸­é—´ä»¶å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè‹¥é‡åˆ° next() ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ä¸­æ‰§è¡Œï¼Œä¸‹ä¸€ä¸ªä¸­é—´æ‰§è¡Œå®Œæˆåï¼Œåœ¨è¿”å›ä¸Šä¸€ä¸ªä¸­é—´ä»¶æ‰§è¡Œ next() åé¢çš„æ–¹æ³•ï¼Œè¿™ä¾¿æ˜¯ä¸­é—´ä»¶çš„æ‰§è¡Œé€»è¾‘ã€‚</p><h2 id="ä»‹ç»ä¸‹-stream"><a href="#ä»‹ç»ä¸‹-stream" class="headerlink" title="ä»‹ç»ä¸‹ stream"></a>ä»‹ç»ä¸‹ stream</h2><p>æµåœ¨ nodejs ç”¨çš„å¾ˆå¹¿æ³›ï¼Œä½†å¯¹äºå¤§éƒ¨åˆ†å¼€å‘è€…æ¥è¯´ï¼Œæ›´å¤šçš„æ˜¯ä½¿ç”¨æµï¼Œæ¯”å¦‚è¯´ HTTP ä¸­çš„ request respond ï¼Œæ ‡å‡†è¾“å…¥è¾“å‡ºï¼Œæ–‡ä»¶è¯»å–ï¼ˆcreateReadStreamï¼‰ï¼Œ gulp æ„å»ºå·¥å…·ç­‰ç­‰ã€‚æµï¼Œå¯ä»¥ç†è§£æˆæ˜¯ä¸€ä¸ªç®¡é“ï¼Œæ¯”å¦‚è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œå¸¸ç”¨çš„æ–¹æ³•æ˜¯ä»ç¡¬ç›˜è¯»å–åˆ°å†…å­˜ä¸­ï¼Œåœ¨ä»å†…å­˜ä¸­è¯»å–ï¼Œè¿™ç§æ–¹å¼å¯¹äºå°æ–‡ä»¶æ²¡é—®é¢˜ï¼Œä½†è‹¥æ˜¯å¤§æ–‡ä»¶ï¼Œæ•ˆç‡å°±éå¸¸ä½ï¼Œè¿˜æœ‰å¯èƒ½å†…å­˜ä¸è¶³ï¼Œé‡‡ç”¨æµçš„æ–¹å¼ï¼Œå°±å¥½åƒç»™å¤§æ–‡ä»¶æ’ä¸Šä¸€æ ¹å¸ç®¡ï¼ŒæŒç»­çš„ä¸€ç‚¹ç‚¹è¯»å–æ–‡ä»¶çš„å†…å®¹ï¼Œç®¡é“çš„å¦ä¸€ç«¯æ”¶åˆ°æ•°æ®ï¼Œå°±å¯ä»¥è¿›è¡Œå¤„ç†ï¼Œäº†è§£ Linux çš„æœ‹å‹åº”è¯¥éå¸¸ç†Ÿæ‚‰è¿™ä¸ªæ¦‚å¿µã€‚</p><ul><li>Node.js ä¸­æœ‰å››ç§åŸºæœ¬çš„æµç±»å‹ï¼š</li></ul><ol><li>Writable - å¯å†™å…¥æ•°æ®çš„æµï¼ˆä¾‹å¦‚ fs.createWriteStream()ï¼‰ã€‚</li><li>Readable - å¯è¯»å–æ•°æ®çš„æµï¼ˆä¾‹å¦‚ fs.createReadStream()ï¼‰ã€‚</li><li>Duplex - å¯è¯»åˆå¯å†™çš„æµï¼ˆä¾‹å¦‚ net.Socketï¼‰ã€‚</li><li>Transform - åœ¨è¯»å†™è¿‡ç¨‹ä¸­å¯ä»¥ä¿®æ”¹æˆ–è½¬æ¢æ•°æ®çš„ Duplex æµï¼ˆä¾‹å¦‚ zlib.createDeflate()ï¼‰ã€‚æ¥è§¦æ¯”è¾ƒå¤šçš„è¿˜æ˜¯ç¬¬ä¸€äºŒç§pipe æ¥æ¶ˆè´¹å¯è¯»æµ</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="comment">// ç›´æ¥è¯»å–æ–‡ä»¶</span></span><br><span class="line">fs.open(<span class="string">'./xxx.js'</span>, <span class="string">'r'</span>, (err, data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(data)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// æµçš„æ–¹å¼è¯»å–ã€å†™å…¥</span></span><br><span class="line"><span class="keyword">let</span> readStream = fs.createReadStream(<span class="string">'./a.js'</span>);</span><br><span class="line"><span class="keyword">let</span> writeStream = fs.createWriteStream(<span class="string">'./b.js'</span>)</span><br><span class="line">readStream.pipe(writeStream).on(<span class="string">'data'</span>, (chunk) =&gt; &#123; <span class="comment">// å¯è¯»æµè¢«å¯å†™æµæ¶ˆè´¹</span></span><br><span class="line">    <span class="built_in">console</span>.log(chunk)</span><br><span class="line">    writeStream.write(chunk);</span><br><span class="line">&#125;).on(<span class="string">'finish'</span>, () =&gt; <span class="built_in">console</span>.log(<span class="string">'finish'</span>))</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/%E5%85%B3%E4%BA%8Enode%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B(%E8%BF%9B%E9%98%B6%E7%AF%87).html#disqus_thread</comments>
    </item>
    
    <item>
      <title>å®ç°å›¾ç‰‡æ‡’åŠ è½½</title>
      <link>http://mydearest.cn/2020/%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD.html</link>
      <guid>http://mydearest.cn/2020/%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD.html</guid>
      <pubDate>Wed, 01 Jul 2020 15:58:45 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;å›¾ç‰‡æ‡’åŠ è½½åœ¨ä¸€äº›å›¾ç‰‡å¯†é›†å‹çš„ç½‘ç«™ä¸­è¿ç”¨æ¯”è¾ƒå¤šï¼Œé€šè¿‡å›¾ç‰‡æ‡’åŠ è½½å¯ä»¥è®©ä¸€äº›ä¸å¯è§†çš„å›¾ç‰‡ä¸å»åŠ è½½ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½è¿‡å¤šçš„å›¾ç‰‡å¯¼è‡´è¯·æ±‚é˜»å¡ï¼ˆæµè§ˆå™¨ä¸€èˆ¬å¯¹åŒä¸€åŸŸå
ä¸‹çš„å¹¶å‘è¯·æ±‚çš„è¿æ¥æ•°æœ‰é™åˆ¶ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥æé«˜ç½‘ç«™çš„åŠ è½½é€Ÿåº¦ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚ &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://cdn.mydearest.cn/blog/images/lazyload.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;æ•ˆæœé¢„è§ˆ&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>å›¾ç‰‡æ‡’åŠ è½½åœ¨ä¸€äº›å›¾ç‰‡å¯†é›†å‹çš„ç½‘ç«™ä¸­è¿ç”¨æ¯”è¾ƒå¤šï¼Œé€šè¿‡å›¾ç‰‡æ‡’åŠ è½½å¯ä»¥è®©ä¸€äº›ä¸å¯è§†çš„å›¾ç‰‡ä¸å»åŠ è½½ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½è¿‡å¤šçš„å›¾ç‰‡å¯¼è‡´è¯·æ±‚é˜»å¡ï¼ˆæµè§ˆå™¨ä¸€èˆ¬å¯¹åŒä¸€åŸŸåä¸‹çš„å¹¶å‘è¯·æ±‚çš„è¿æ¥æ•°æœ‰é™åˆ¶ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥æé«˜ç½‘ç«™çš„åŠ è½½é€Ÿåº¦ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚ </p><p><a href="http://cdn.mydearest.cn/blog/images/lazyload.png" target="_blank" rel="noopener">æ•ˆæœé¢„è§ˆ</a></p><hr><a id="more"></a><h2 id="å¦‚ä½•åš"><a href="#å¦‚ä½•åš" class="headerlink" title="å¦‚ä½•åš"></a>å¦‚ä½•åš</h2><h3 id="æ­¥éª¤ä¸€"><a href="#æ­¥éª¤ä¸€" class="headerlink" title="æ­¥éª¤ä¸€"></a>æ­¥éª¤ä¸€</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦è®©æˆ‘ä»¬htmlä¸­éœ€è¦æ‡’åŠ è½½çš„imgæ ‡ç­¾çš„srcè®¾ç½®ç¼©ç•¥å›¾æˆ–è€…ä¸è®¾ç½®srcï¼Œç„¶åè‡ªå®šä¹‰ä¸€ä¸ªå±æ€§ï¼Œå€¼ä¸ºçœŸæ­£çš„å›¾ç‰‡æˆ–è€…åŸå›¾çš„åœ°å€ï¼ˆæ¯”å¦‚ä¸‹é¢çš„data-srcï¼‰ï¼Œå¹¶ä¸”å®šä¹‰ä¸€ä¸ªç±»åï¼Œè¡¨ç¤ºè¯¥å›¾ç‰‡æ˜¯éœ€è¦æ‡’åŠ è½½çš„ï¼ˆæ¯”å¦‚ä¸‹é¢ä¾‹å­çš„lazy-imageï¼‰ï¼Œè¿™æœ‰ä¸¤ä¸ªä½œç”¨ï¼š</p><ol><li>ä¸ºä»¥åè·å–éœ€è¦æ‡’åŠ è½½å›¾ç‰‡çš„imgå…ƒç´  </li><li>å¯ä»¥ç»™è¿™ä¸ªç±»åè®¾ç½®èƒŒæ™¯å›¾ç‰‡ï¼Œä½œä¸ºå›¾ç‰‡æœªåŠ è½½å‰çš„è¿‡åº¦å›¾ç‰‡ï¼Œæ¯”å¦‚æ˜¾ç¤ºä¸ºloadingçš„å›¾ç‰‡ã€‚</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;img data-src=<span class="string">"https://tb1.bdstatic.com/tb/cms/liveshow/ent_slid2.jpg"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"lazy-image"</span>/&gt; </span><br><span class="line"><span class="comment">// csséƒ¨åˆ† </span></span><br><span class="line">.lazy-image &#123; </span><br><span class="line">    background: url(<span class="string">'../img/loading.gif'</span>) no-repeat center; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ­¥éª¤äºŒ"><a href="#æ­¥éª¤äºŒ" class="headerlink" title="æ­¥éª¤äºŒ"></a>æ­¥éª¤äºŒ</h3><p>é¡µé¢åŠ è½½å®Œåï¼Œæˆ‘ä»¬éœ€è¦è·å–æ‰€æœ‰éœ€è¦æ‡’åŠ è½½çš„å›¾ç‰‡çš„å…ƒç´ é›†åˆï¼Œåˆ¤æ–­æ˜¯å¦åœ¨å¯è§†åŒºåŸŸï¼Œå¦‚æœæ˜¯åœ¨å¯è§†åŒºåŸŸçš„è¯ï¼Œè®¾ç½®å…ƒç´ çš„srcå±æ€§å€¼ä¸ºçœŸæ­£å›¾ç‰‡çš„åœ°å€ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">inViewShow() &#123;     </span><br><span class="line">    <span class="keyword">let</span> imageElements = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">document</span>.querySelectorAll(<span class="string">'.lazy-image'</span>))    </span><br><span class="line">    <span class="keyword">let</span> len = imageElements.length     </span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;         </span><br><span class="line">        <span class="keyword">let</span> imageElement = imageElements[i]        </span><br><span class="line">        <span class="keyword">const</span> rect = imageElement.getBoundingClientRect() <span class="comment">// å‡ºç°åœ¨è§†é‡çš„æ—¶å€™åŠ è½½å›¾ç‰‡         </span></span><br><span class="line">        <span class="keyword">if</span>(rect.top &lt; <span class="built_in">document</span>.documentElement.clientHeight) &#123;             </span><br><span class="line">            imageElement.src = imageElement.dataset.src <span class="comment">// ç§»é™¤æ‰å·²ç»æ˜¾ç¤ºçš„             </span></span><br><span class="line">            imageElements.splice(i, <span class="number">1</span>)             </span><br><span class="line">            len--             </span><br><span class="line">            i--         </span><br><span class="line">        &#125;     </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œåˆ¤æ–­æ˜¯å¦å‡ºç°åœ¨å¯è§†åŒºåŸŸå†…ï¼Œæ˜¯é€šè¿‡è·å–å…ƒç´ çš„getBoundingClientRectå±æ€§çš„topå€¼å’Œé¡µé¢çš„clientHeightè¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœtopå€¼å°äºclientHeightï¼Œåˆ™è¯´æ˜å…ƒç´ å‡ºç°åœ¨å¯è§†åŒºåŸŸäº†ã€‚BoundingClientRectæ˜¯è·å–æŸä¸ªå…ƒç´ ç›¸å¯¹äºè§†çª—çš„ä½ç½®é›†åˆï¼Œè§ä¸‹å›¾ï¼Œæ³¨æ„bottomå’Œrightå’Œæˆ‘ä»¬å¹³æ—¶çš„bottomå’Œrightä¸ä¸€æ ·ã€‚ </p><p><a href="http://cdn.mydearest.cn/blog/images/lazyload2.png" target="_blank" rel="noopener">lazyload2</a></p><h3 id="æ­¥éª¤ä¸‰"><a href="#æ­¥éª¤ä¸‰" class="headerlink" title="æ­¥éª¤ä¸‰"></a>æ­¥éª¤ä¸‰</h3><p>ç”¨æˆ·æ»šåŠ¨çª—å£çš„æ—¶å€™ï¼Œéå†æ‰€æœ‰éœ€è¦æ‡’åŠ è½½çš„å…ƒç´ ï¼Œé€šè¿‡æ¯ä¸ªå…ƒç´ çš„BoundingClientRectå±æ€§æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å‡ºç°åœ¨å¯è§†åŒºåŸŸå†…ï¼Œåˆ¤æ–­æ–¹æ³•åŒç¬¬äºŒæ­¥ä¸€æ ·ã€‚ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'scroll'</span>, inViewShow)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬å¯ä»¥ä¼˜åŒ–ä¸‹ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°èŠ‚æµä¼˜åŒ–æ»šåŠ¨äº‹ä»¶çš„å¤„ç†å‡½æ•°ã€‚</p><h3 id="è¡¥å……-åˆ©ç”¨é«˜çº§ç‰¹æ€§Intersection-Observeræ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§ã€‚"><a href="#è¡¥å……-åˆ©ç”¨é«˜çº§ç‰¹æ€§Intersection-Observeræ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§ã€‚" class="headerlink" title="è¡¥å……-åˆ©ç”¨é«˜çº§ç‰¹æ€§Intersection Observeræ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§ã€‚"></a>è¡¥å……-åˆ©ç”¨é«˜çº§ç‰¹æ€§Intersection Observeræ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§ã€‚</h3><p>ä¸Šé¢æˆ‘ä»¬åˆ©ç”¨å…ƒç´ çš„BoundingClientRectçš„topå±æ€§å’Œbodyçš„clientHeightæ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§ï¼Œè¿™ç§ä¼ ç»Ÿæ–¹å¼è·å–å…ƒç´ æ˜¯å¦å¯è§çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯æˆ‘ä»¬è¿˜éœ€è¦ç»‘å®šscrolläº‹ä»¶ï¼Œscrolläº‹ä»¶æ˜¯ä¼´éšç€å¤§é‡è®¡ç®—çš„ï¼Œä¼šé€ æˆèµ„æºæµªè´¹ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡èŠ‚æµå‡½æ•°æ¥æé«˜æ€§èƒ½ï¼Œä½†è¿˜æ˜¯ä¼šæœ‰æ€§èƒ½æµªè´¹çš„é—®é¢˜ï¼Œè€ŒIntersection Observerå¯ä»¥ä¸ç”¨ç›‘å¬scrolläº‹ä»¶ï¼Œåšåˆ°å…ƒç´ ä¸€å¯è§ä¾¿è°ƒç”¨å›è°ƒï¼Œåœ¨å›è°ƒé‡Œé¢æˆ‘ä»¬æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">"IntersectionObserver"</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;        </span><br><span class="line">    <span class="keyword">let</span> lazyImageObserver = <span class="keyword">new</span> IntersectionObserver(<span class="function">(<span class="params">entries, observer</span>) =&gt;</span> &#123;          </span><br><span class="line">        entries.forEach(<span class="function">(<span class="params">entry, index</span>) =&gt;</span> &#123;            </span><br><span class="line">            <span class="comment">// å¦‚æœå…ƒç´ å¯è§            </span></span><br><span class="line">            <span class="keyword">if</span> (entry.intersectionRatio &gt; <span class="number">0</span>) &#123;              </span><br><span class="line">                <span class="keyword">let</span> lazyImage = entry.target              </span><br><span class="line">                lazyImage.src = lazyImage.dataset.src              </span><br><span class="line">                lazyImage.classList.remove(<span class="string">"lazy-image"</span>)              </span><br><span class="line">                lazyImageObserver.unobserve(lazyImage)              </span><br><span class="line">                <span class="comment">// this.lazyImages.splice(index, 1)            </span></span><br><span class="line">            &#125;          </span><br><span class="line">        &#125;)        </span><br><span class="line">    &#125;)        </span><br><span class="line">    <span class="keyword">this</span>.lazyImages.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">lazyImage</span>) </span>&#123;          </span><br><span class="line">        lazyImageObserver.observe(lazyImage);        </span><br><span class="line">    &#125;)      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä»“åº“ä»£ç "><a href="#ä»“åº“ä»£ç " class="headerlink" title="ä»“åº“ä»£ç "></a>ä»“åº“ä»£ç </h2><p><a href="https://github.com/cosyer/jelly/tree/gh-pages/lazyload" target="_blank" rel="noopener">lazyload</a></p><p><a href="https://cosyer.github.io/jelly/lazyload/" target="_blank" rel="noopener">åœ¨çº¿é¢„è§ˆ</a></p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>è¶…è¯¦ç»†çš„TypeScriptæ•™ç¨‹</title>
      <link>http://mydearest.cn/2020/%E8%B6%85%E8%AF%A6%E7%BB%86%E7%9A%84TypeScript%E6%95%99%E7%A8%8B.html</link>
      <guid>http://mydearest.cn/2020/%E8%B6%85%E8%AF%A6%E7%BB%86%E7%9A%84TypeScript%E6%95%99%E7%A8%8B.html</guid>
      <pubDate>Sun, 28 Jun 2020 09:12:42 GMT</pubDate>
      <description>
      
        &lt;h1 id=&quot;typescript&quot;&gt;&lt;a href=&quot;#typescript&quot; class=&quot;headerlink&quot; title=&quot;typescript&quot;&gt;&lt;/a&gt;typescript&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://www.typescriptlang.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;TypeScript&lt;/a&gt; æ˜¯ä¸€ç§ç”±å¾®è½¯å¼€å‘çš„è‡ªç”±å’Œå¼€æºçš„ç¼–ç¨‹è¯­è¨€ã€‚å®ƒæ˜¯ JavaScript çš„ä¸€ä¸ªè¶…é›†ï¼Œè€Œä¸”æœ¬è´¨ä¸Šå‘è¿™ä¸ªè¯­è¨€æ·»åŠ äº†å¯é€‰çš„é™æ€ç±»å‹å’ŒåŸºäºç±»çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;åŒºåˆ«&quot;&gt;&lt;a href=&quot;#åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;åŒºåˆ«&quot;&gt;&lt;/a&gt;åŒºåˆ«&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th style=&quot;text-align:center&quot;&gt;TypeScript&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;JavaScript&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;JavaScript çš„è¶…é›†ç”¨äºè§£å†³å¤§å‹é¡¹ç›®çš„ä»£ç å¤æ‚æ€§&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œç”¨äºåˆ›å»ºåŠ¨æ€ç½‘é¡µ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´å‘ç°å¹¶çº æ­£é”™è¯¯&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ä½œä¸ºä¸€ç§è§£é‡Šå‹è¯­è¨€ï¼Œåªèƒ½åœ¨è¿è¡Œæ—¶å‘ç°é”™è¯¯&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;å¼ºç±»å‹ï¼Œæ”¯æŒé™æ€å’ŒåŠ¨æ€ç±»å‹&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;å¼±ç±»å‹ï¼Œæ²¡æœ‰é™æ€ç±»å‹é€‰é¡¹&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;æœ€ç»ˆè¢«ç¼–è¯‘æˆ JavaScript ä»£ç ï¼Œä½¿æµè§ˆå™¨å¯ä»¥ç†è§£&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;æ”¯æŒæ¨¡å—ã€æ³›å‹å’Œæ¥å£&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ä¸æ”¯æŒæ¨¡å—ï¼Œæ³›å‹æˆ–æ¥å£&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;æ”¯æŒ ES3ï¼ŒES4ï¼ŒES5 å’Œ ES6 ç­‰&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ä¸æ”¯æŒç¼–è¯‘å…¶ä»– ES3ï¼ŒES4ï¼ŒES5 æˆ– ES6 åŠŸèƒ½&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style=&quot;text-align:center&quot;&gt;ç¤¾åŒºçš„æ”¯æŒä»åœ¨å¢é•¿ï¼Œè€Œä¸”è¿˜ä¸æ˜¯å¾ˆå¤§&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;å¤§é‡çš„ç¤¾åŒºæ”¯æŒä»¥åŠå¤§é‡æ–‡æ¡£å’Œè§£å†³é—®é¢˜çš„æ”¯æŒ&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;å®‰è£…&quot;&gt;&lt;a href=&quot;#å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…&quot;&gt;&lt;/a&gt;å®‰è£…&lt;/h3&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;npm install -g typescript&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ç¼–è¯‘&quot;&gt;&lt;a href=&quot;#ç¼–è¯‘&quot; class=&quot;headerlink&quot; title=&quot;ç¼–è¯‘&quot;&gt;&lt;/a&gt;ç¼–è¯‘&lt;/h3&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;tsc helloworld.ts&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// helloworld.ts =&amp;gt; helloworld.js&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;https://www.typescriptlang.org/play&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;åœ¨çº¿å­¦ä¹ è¯­æ³•å’Œç‰¹æ€§&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h1 id="typescript"><a href="#typescript" class="headerlink" title="typescript"></a>typescript</h1><p><a href="https://www.typescriptlang.org/" target="_blank" rel="noopener">TypeScript</a> æ˜¯ä¸€ç§ç”±å¾®è½¯å¼€å‘çš„è‡ªç”±å’Œå¼€æºçš„ç¼–ç¨‹è¯­è¨€ã€‚å®ƒæ˜¯ JavaScript çš„ä¸€ä¸ªè¶…é›†ï¼Œè€Œä¸”æœ¬è´¨ä¸Šå‘è¿™ä¸ªè¯­è¨€æ·»åŠ äº†å¯é€‰çš„é™æ€ç±»å‹å’ŒåŸºäºç±»çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚</p><h2 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h2><table><thead><tr><th style="text-align:center">TypeScript</th><th style="text-align:center">JavaScript</th></tr></thead><tbody><tr><td style="text-align:center">JavaScript çš„è¶…é›†ç”¨äºè§£å†³å¤§å‹é¡¹ç›®çš„ä»£ç å¤æ‚æ€§</td><td style="text-align:center">ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œç”¨äºåˆ›å»ºåŠ¨æ€ç½‘é¡µ</td></tr><tr><td style="text-align:center">å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´å‘ç°å¹¶çº æ­£é”™è¯¯</td><td style="text-align:center">ä½œä¸ºä¸€ç§è§£é‡Šå‹è¯­è¨€ï¼Œåªèƒ½åœ¨è¿è¡Œæ—¶å‘ç°é”™è¯¯</td></tr><tr><td style="text-align:center">å¼ºç±»å‹ï¼Œæ”¯æŒé™æ€å’ŒåŠ¨æ€ç±»å‹</td><td style="text-align:center">å¼±ç±»å‹ï¼Œæ²¡æœ‰é™æ€ç±»å‹é€‰é¡¹</td></tr><tr><td style="text-align:center">æœ€ç»ˆè¢«ç¼–è¯‘æˆ JavaScript ä»£ç ï¼Œä½¿æµè§ˆå™¨å¯ä»¥ç†è§£</td><td style="text-align:center">å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨</td></tr><tr><td style="text-align:center">æ”¯æŒæ¨¡å—ã€æ³›å‹å’Œæ¥å£</td><td style="text-align:center">ä¸æ”¯æŒæ¨¡å—ï¼Œæ³›å‹æˆ–æ¥å£</td></tr><tr><td style="text-align:center">æ”¯æŒ ES3ï¼ŒES4ï¼ŒES5 å’Œ ES6 ç­‰</td><td style="text-align:center">ä¸æ”¯æŒç¼–è¯‘å…¶ä»– ES3ï¼ŒES4ï¼ŒES5 æˆ– ES6 åŠŸèƒ½</td></tr><tr><td style="text-align:center">ç¤¾åŒºçš„æ”¯æŒä»åœ¨å¢é•¿ï¼Œè€Œä¸”è¿˜ä¸æ˜¯å¾ˆå¤§</td><td style="text-align:center">å¤§é‡çš„ç¤¾åŒºæ”¯æŒä»¥åŠå¤§é‡æ–‡æ¡£å’Œè§£å†³é—®é¢˜çš„æ”¯æŒ</td></tr></tbody></table><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g typescript</span><br></pre></td></tr></table></figure><h3 id="ç¼–è¯‘"><a href="#ç¼–è¯‘" class="headerlink" title="ç¼–è¯‘"></a>ç¼–è¯‘</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tsc helloworld.ts</span><br><span class="line"><span class="comment">// helloworld.ts =&gt; helloworld.js</span></span><br></pre></td></tr></table></figure><p><a href="https://www.typescriptlang.org/play" target="_blank" rel="noopener">åœ¨çº¿å­¦ä¹ è¯­æ³•å’Œç‰¹æ€§</a></p><hr><a id="more"></a><h2 id="ç±»å‹-11ç§"><a href="#ç±»å‹-11ç§" class="headerlink" title="ç±»å‹ (11ç§)"></a>ç±»å‹ (11ç§)</h2><h3 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean"></a>Boolean</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> isDone: boolean = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">// ES5ï¼švar isDone = false;</span></span><br></pre></td></tr></table></figure><h3 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> count: number = <span class="number">10</span>;</span><br><span class="line"><span class="comment">// ES5ï¼švar count = 10;</span></span><br></pre></td></tr></table></figure><h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name: string = <span class="string">"cosyer"</span>;</span><br><span class="line"><span class="comment">// ES5ï¼švar name = 'cosyer';</span></span><br></pre></td></tr></table></figure><h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list: number[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="comment">// ES5ï¼švar list = [1,2,3];</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> list: <span class="built_in">Array</span>&lt;number&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]; <span class="comment">// Array&lt;number&gt;æ³›å‹è¯­æ³•</span></span><br><span class="line"><span class="comment">// ES5ï¼švar list = [1,2,3];</span></span><br></pre></td></tr></table></figure><h3 id="Enum"><a href="#Enum" class="headerlink" title="Enum"></a>Enum</h3><p>ä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›å¸¦åå­—çš„å¸¸é‡ã€‚ä½¿ç”¨æšä¸¾å¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾æˆ–åˆ›å»ºä¸€ç»„æœ‰åŒºåˆ«çš„ç”¨ä¾‹ã€‚ TypeScript æ”¯æŒæ•°å­—çš„å’ŒåŸºäºå­—ç¬¦ä¸²çš„æšä¸¾ã€‚</p><h4 id="æ•°å­—æšä¸¾"><a href="#æ•°å­—æšä¸¾" class="headerlink" title="æ•°å­—æšä¸¾"></a>æ•°å­—æšä¸¾</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">  NORTH,</span><br><span class="line">  SOUTH,</span><br><span class="line">  EAST,</span><br><span class="line">  WEST,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> dir: Direction = Direction.NORTH;</span><br></pre></td></tr></table></figure><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNORTH çš„åˆå§‹å€¼ä¸º 0ï¼Œå…¶ä½™çš„æˆå‘˜ä¼šä» 1 å¼€å§‹è‡ªåŠ¨å¢é•¿ã€‚æ¢å¥è¯è¯´ï¼ŒDirection.SOUTH çš„å€¼ä¸º 1ï¼ŒDirection.EAST çš„å€¼ä¸º 2ï¼ŒDirection.WEST çš„å€¼ä¸º 3ã€‚ä¸Šé¢çš„æšä¸¾ç¤ºä¾‹ä»£ç ç»è¿‡ç¼–è¯‘åä¼šç”Ÿæˆä»¥ä¸‹ä»£ç ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> Direction;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">Direction</span>) </span>&#123;</span><br><span class="line">  Direction[(Direction[<span class="string">"NORTH"</span>] = <span class="number">0</span>)] = <span class="string">"NORTH"</span>;</span><br><span class="line">  Direction[(Direction[<span class="string">"SOUTH"</span>] = <span class="number">1</span>)] = <span class="string">"SOUTH"</span>;</span><br><span class="line">  Direction[(Direction[<span class="string">"EAST"</span>] = <span class="number">2</span>)] = <span class="string">"EAST"</span>;</span><br><span class="line">  Direction[(Direction[<span class="string">"WEST"</span>] = <span class="number">3</span>)] = <span class="string">"WEST"</span>;</span><br><span class="line">&#125;)(Direction || (Direction = &#123;&#125;));</span><br><span class="line"><span class="keyword">var</span> dir = Direction.NORTH;</span><br></pre></td></tr></table></figure>ä¹Ÿå¯ä»¥è®¾ç½® NORTH çš„åˆå§‹å€¼ï¼Œæ¯”å¦‚ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">  NORTH = <span class="number">3</span>,</span><br><span class="line">  SOUTH,</span><br><span class="line">  EAST,</span><br><span class="line">  WEST,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="å­—ç¬¦ä¸²æšä¸¾"><a href="#å­—ç¬¦ä¸²æšä¸¾" class="headerlink" title="å­—ç¬¦ä¸²æšä¸¾"></a>å­—ç¬¦ä¸²æšä¸¾</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">  NORTH = <span class="string">"NORTH"</span>,</span><br><span class="line">  SOUTH = <span class="string">"SOUTH"</span>,</span><br><span class="line">  EAST = <span class="string">"EAST"</span>,</span><br><span class="line">  WEST = <span class="string">"WEST"</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ç”Ÿæˆï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> Direction;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">Direction</span>) </span>&#123;</span><br><span class="line">    Direction[<span class="string">"NORTH"</span>] = <span class="string">"NORTH"</span>;</span><br><span class="line">    Direction[<span class="string">"SOUTH"</span>] = <span class="string">"SOUTH"</span>;</span><br><span class="line">    Direction[<span class="string">"EAST"</span>] = <span class="string">"EAST"</span>;</span><br><span class="line">    Direction[<span class="string">"WEST"</span>] = <span class="string">"WEST"</span>;</span><br><span class="line">&#125;)(Direction || (Direction = &#123;&#125;));</span><br></pre></td></tr></table></figure></p><h4 id="å¼‚æ„æšä¸¾"><a href="#å¼‚æ„æšä¸¾" class="headerlink" title="å¼‚æ„æšä¸¾"></a>å¼‚æ„æšä¸¾</h4><p>å¼‚æ„æšä¸¾çš„æˆå‘˜å€¼æ˜¯æ•°å­—å’Œå­—ç¬¦ä¸²çš„æ··åˆï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">enum Enum &#123;</span><br><span class="line">  A,</span><br><span class="line">  B,</span><br><span class="line">  C = <span class="string">"C"</span>,</span><br><span class="line">  D = <span class="string">"D"</span>,</span><br><span class="line">  E = <span class="number">8</span>,</span><br><span class="line">  F,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>ç¼–è¯‘ç”Ÿæˆï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> Enum;</span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">Enum</span>) </span>&#123;</span><br><span class="line">    Enum[Enum[<span class="string">"A"</span>] = <span class="number">0</span>] = <span class="string">"A"</span>;</span><br><span class="line">    Enum[Enum[<span class="string">"B"</span>] = <span class="number">1</span>] = <span class="string">"B"</span>;</span><br><span class="line">    Enum[<span class="string">"C"</span>] = <span class="string">"C"</span>;</span><br><span class="line">    Enum[<span class="string">"D"</span>] = <span class="string">"D"</span>;</span><br><span class="line">    Enum[Enum[<span class="string">"E"</span>] = <span class="number">8</span>] = <span class="string">"E"</span>;</span><br><span class="line">    Enum[Enum[<span class="string">"F"</span>] = <span class="number">9</span>] = <span class="string">"F"</span>;</span><br><span class="line">&#125;)(Enum || (Enum = &#123;&#125;));</span><br></pre></td></tr></table></figure>æ•°å­—æšä¸¾ç›¸å¯¹å­—ç¬¦ä¸²æšä¸¾å¤šäº† â€œåå‘æ˜ å°„â€ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(Enum.A) <span class="comment">//è¾“å‡ºï¼š0</span></span><br><span class="line"><span class="built_in">console</span>.log(Enum[<span class="number">0</span>]) <span class="comment">// è¾“å‡ºï¼šA</span></span><br></pre></td></tr></table></figure></p><h3 id="Any"><a href="#Any" class="headerlink" title="Any"></a>Any</h3><p>åœ¨ TypeScript ä¸­ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸º any ç±»å‹ã€‚è¿™è®© any ç±»å‹æˆä¸ºäº†ç±»å‹ç³»ç»Ÿçš„é¡¶çº§ç±»å‹ï¼ˆä¹Ÿè¢«ç§°ä½œå…¨å±€è¶…çº§ç±»å‹ï¼‰ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> notSure: any = <span class="number">666</span>;</span><br><span class="line">notSure = <span class="string">"cosyer"</span>;</span><br><span class="line">notSure = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>any ç±»å‹æœ¬è´¨ä¸Šæ˜¯ç±»å‹ç³»ç»Ÿçš„ä¸€ä¸ªé€ƒé€¸èˆ±ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œè¿™ç»™äº†æˆ‘ä»¬å¾ˆå¤§çš„è‡ªç”±ï¼šTypeScript å…è®¸æˆ‘ä»¬å¯¹ any ç±»å‹çš„å€¼æ‰§è¡Œä»»ä½•æ“ä½œï¼Œè€Œæ— éœ€äº‹å…ˆæ‰§è¡Œä»»ä½•å½¢å¼çš„æ£€æŸ¥ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value: any;</span><br><span class="line"></span><br><span class="line">value.foo.bar; <span class="comment">// OK</span></span><br><span class="line">value.trim(); <span class="comment">// OK</span></span><br><span class="line">value(); <span class="comment">// OK</span></span><br><span class="line"><span class="keyword">new</span> value(); <span class="comment">// OK</span></span><br><span class="line">value[<span class="number">0</span>][<span class="number">1</span>]; <span class="comment">// OK</span></span><br></pre></td></tr></table></figure>åœ¨è®¸å¤šåœºæ™¯ä¸‹ï¼Œè¿™å¤ªå®½æ¾äº†ã€‚ä½¿ç”¨ any ç±»å‹ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ç¼–å†™ç±»å‹æ­£ç¡®ä½†åœ¨è¿è¡Œæ—¶æœ‰é—®é¢˜çš„ä»£ç ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ any ç±»å‹ï¼Œå°±æ— æ³•ä½¿ç”¨ TypeScript æä¾›çš„å¤§é‡çš„ä¿æŠ¤æœºåˆ¶ã€‚ä¸ºäº†è§£å†³ any å¸¦æ¥çš„é—®é¢˜ï¼ŒTypeScript 3.0 å¼•å…¥äº† unknown ç±»å‹ã€‚AnyScript 2333.</p><h3 id="Unknown"><a href="#Unknown" class="headerlink" title="Unknown"></a>Unknown</h3><p>å°±åƒæ‰€æœ‰ç±»å‹éƒ½å¯ä»¥èµ‹å€¼ç»™ anyï¼Œæ‰€æœ‰ç±»å‹ä¹Ÿéƒ½å¯ä»¥èµ‹å€¼ç»™ unknownã€‚è¿™ä½¿å¾— unknown æˆä¸º TypeScript ç±»å‹ç³»ç»Ÿçš„å¦ä¸€ç§é¡¶çº§ç±»å‹ï¼ˆå¦ä¸€ç§æ˜¯ anyï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ unknown ç±»å‹çš„ä½¿ç”¨ç¤ºä¾‹ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value: unknown;</span><br><span class="line"></span><br><span class="line">value = <span class="literal">true</span>; <span class="comment">// OK</span></span><br><span class="line">value = <span class="number">42</span>; <span class="comment">// OK</span></span><br><span class="line">value = <span class="string">"Hello World"</span>; <span class="comment">// OK</span></span><br><span class="line">value = []; <span class="comment">// OK</span></span><br><span class="line">value = &#123;&#125;; <span class="comment">// OK</span></span><br><span class="line">value = <span class="built_in">Math</span>.random; <span class="comment">// OK</span></span><br><span class="line">value = <span class="literal">null</span>; <span class="comment">// OK</span></span><br><span class="line">value = <span class="literal">undefined</span>; <span class="comment">// OK</span></span><br><span class="line">value = <span class="keyword">new</span> <span class="built_in">TypeError</span>(); <span class="comment">// OK</span></span><br><span class="line">value = <span class="built_in">Symbol</span>(<span class="string">"type"</span>); <span class="comment">// OK</span></span><br></pre></td></tr></table></figure></p><p>å¯¹ value å˜é‡çš„æ‰€æœ‰èµ‹å€¼éƒ½è¢«è®¤ä¸ºæ˜¯ç±»å‹æ­£ç¡®çš„ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬å°è¯•å°†ç±»å‹ä¸º unknown çš„å€¼èµ‹å€¼ç»™å…¶ä»–ç±»å‹çš„å˜é‡æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value: unknown;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> value1: unknown = value; <span class="comment">// OK</span></span><br><span class="line"><span class="keyword">let</span> value2: any = value; <span class="comment">// OK</span></span><br><span class="line"><span class="keyword">let</span> value3: boolean = value; <span class="comment">// Error</span></span><br><span class="line"><span class="keyword">let</span> value4: number = value; <span class="comment">// Error</span></span><br><span class="line"><span class="keyword">let</span> value5: string = value; <span class="comment">// Error</span></span><br><span class="line"><span class="keyword">let</span> value6: object = value; <span class="comment">// Error</span></span><br><span class="line"><span class="keyword">let</span> value7: any[] = value; <span class="comment">// Error</span></span><br><span class="line"><span class="keyword">let</span> value8: <span class="built_in">Function</span> = value; <span class="comment">// Error</span></span><br></pre></td></tr></table></figure><p>unknown ç±»å‹åªèƒ½è¢«èµ‹å€¼ç»™ any ç±»å‹å’Œ unknown ç±»å‹æœ¬èº«ã€‚ç›´è§‚åœ°è¯´ï¼Œè¿™æ˜¯æœ‰é“ç†çš„ï¼šåªæœ‰èƒ½å¤Ÿä¿å­˜ä»»æ„ç±»å‹å€¼çš„å®¹å™¨æ‰èƒ½ä¿å­˜ unknown ç±»å‹çš„å€¼ã€‚æ¯•ç«Ÿæˆ‘ä»¬ä¸çŸ¥é“å˜é‡ value ä¸­å­˜å‚¨äº†ä»€ä¹ˆç±»å‹çš„å€¼ã€‚</p><p>å°† value å˜é‡ç±»å‹è®¾ç½®ä¸º unknown åï¼Œè¿™äº›æ“ä½œéƒ½ä¸å†è¢«è®¤ä¸ºæ˜¯ç±»å‹æ­£ç¡®çš„ã€‚é€šè¿‡å°† any ç±»å‹æ”¹å˜ä¸º unknown ç±»å‹ï¼Œæˆ‘ä»¬å·²å°†å…è®¸æ‰€æœ‰æ›´æ”¹çš„é»˜è®¤è®¾ç½®ï¼Œæ›´æ”¹ä¸ºç¦æ­¢ä»»ä½•æ›´æ”¹ã€‚</p><h3 id="Tuple"><a href="#Tuple" class="headerlink" title="Tuple"></a>Tuple</h3><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæ•°ç»„ä¸€èˆ¬ç”±åŒç§ç±»å‹çš„å€¼ç»„æˆï¼Œä½†æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨å•ä¸ªå˜é‡ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„å€¼ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å…ƒç»„ã€‚åœ¨ JavaScript ä¸­æ˜¯æ²¡æœ‰å…ƒç»„çš„ï¼Œå…ƒç»„æ˜¯ TypeScript ä¸­ç‰¹æœ‰çš„ç±»å‹ï¼Œå…¶å·¥ä½œæ–¹å¼ç±»ä¼¼äºæ•°ç»„ã€‚</p><p>å…ƒç»„å¯ç”¨äºå®šä¹‰å…·æœ‰æœ‰é™æ•°é‡çš„æœªå‘½åå±æ€§çš„ç±»å‹ã€‚æ¯ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªå…³è”çš„ç±»å‹ã€‚ä½¿ç”¨å…ƒç»„æ—¶ï¼Œå¿…é¡»æä¾›æ¯ä¸ªå±æ€§çš„å€¼ã€‚ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£å…ƒç»„çš„æ¦‚å¿µï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tupleType: [string, boolean]; <span class="comment">// å¼ºåˆ¶ç±»å‹åŒ¹é…</span></span><br><span class="line">tupleType = [<span class="string">"cosyer"</span>, <span class="literal">true</span>];</span><br></pre></td></tr></table></figure></p><h3 id="Void"><a href="#Void" class="headerlink" title="Void"></a>Void</h3><p>æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œvoid ç±»å‹åƒæ˜¯ä¸ any ç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ voidï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜å‡½æ•°è¿”å›å€¼ä¸ºvoid</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">warnUser</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"This is my warning message"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå£°æ˜ä¸€ä¸ª void ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆä½œç”¨ï¼Œå› ä¸ºå®ƒçš„å€¼åªèƒ½ä¸º undefined æˆ– nullï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> unusable: <span class="keyword">void</span> = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure></p><h3 id="Null-Undefined"><a href="#Null-Undefined" class="headerlink" title="Null/Undefined"></a>Null/Undefined</h3><p>TypeScript é‡Œï¼Œundefined å’Œ null ä¸¤è€…æœ‰å„è‡ªçš„ç±»å‹åˆ†åˆ«ä¸º undefined å’Œ nullã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> u: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="keyword">let</span> n: <span class="literal">null</span> = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>é»˜è®¤æƒ…å†µä¸‹ null å’Œ undefined æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ null å’Œ undefined èµ‹å€¼ç»™ number ç±»å‹çš„å˜é‡ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æŒ‡å®šäº†â€“strictNullChecks æ ‡è®°ï¼Œnull å’Œ undefined åªèƒ½èµ‹å€¼ç»™ void å’Œå®ƒä»¬å„è‡ªçš„ç±»å‹ã€‚</p><h3 id="Never"><a href="#Never" class="headerlink" title="Never"></a>Never</h3><p>never ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œnever ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">message: string</span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">infiniteLoop</span>(<span class="params"></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ TypeScript ä¸­ï¼Œå¯ä»¥åˆ©ç”¨ never ç±»å‹çš„ç‰¹æ€§æ¥å®ç°å…¨é¢æ€§æ£€æŸ¥ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">type Foo = string | number;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">controlFlowAnalysisWithNever</span>(<span class="params">foo: Foo</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> foo === <span class="string">"string"</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œ foo è¢«æ”¶çª„ä¸º string ç±»å‹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> foo === <span class="string">"number"</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œ foo è¢«æ”¶çª„ä¸º number ç±»å‹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// foo åœ¨è¿™é‡Œæ˜¯ never</span></span><br><span class="line">    <span class="keyword">const</span> check: never = foo;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ³¨æ„åœ¨ else åˆ†æ”¯é‡Œé¢ï¼Œæˆ‘ä»¬æŠŠæ”¶çª„ä¸º never çš„ foo èµ‹å€¼ç»™ä¸€ä¸ªæ˜¾ç¤ºå£°æ˜çš„ never å˜é‡ã€‚å¦‚æœä¸€åˆ‡é€»è¾‘æ­£ç¡®ï¼Œé‚£ä¹ˆè¿™é‡Œåº”è¯¥èƒ½å¤Ÿç¼–è¯‘é€šè¿‡ã€‚ä½†æ˜¯å‡å¦‚åæ¥æœ‰ä¸€å¤©ä½ çš„åŒäº‹ä¿®æ”¹äº† Foo çš„ç±»å‹ï¼štype Foo = string | number | boolean;å¤åˆ¶ä»£ç ç„¶è€Œä»–å¿˜è®°åŒæ—¶ä¿®æ”¹ controlFlowAnalysisWithNever æ–¹æ³•ä¸­çš„æ§åˆ¶æµç¨‹ï¼Œè¿™æ—¶å€™ else åˆ†æ”¯çš„ foo ç±»å‹ä¼šè¢«æ”¶çª„ä¸º boolean ç±»å‹ï¼Œå¯¼è‡´æ— æ³•èµ‹å€¼ç»™ never ç±»å‹ï¼Œè¿™æ—¶å°±ä¼šäº§ç”Ÿä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚é€šè¿‡è¿™ä¸ªæ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿controlFlowAnalysisWithNever æ–¹æ³•æ€»æ˜¯ç©·å°½äº† Foo çš„æ‰€æœ‰å¯èƒ½ç±»å‹ã€‚ é€šè¿‡è¿™ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š<code>ä½¿ç”¨ never é¿å…å‡ºç°æ–°å¢äº†è”åˆç±»å‹æ²¡æœ‰å¯¹åº”çš„å®ç°ï¼Œç›®çš„å°±æ˜¯å†™å‡ºç±»å‹ç»å¯¹å®‰å…¨çš„ä»£ç ã€‚</code></p><h2 id="ç±»å‹æ–­è¨€"><a href="#ç±»å‹æ–­è¨€" class="headerlink" title="ç±»å‹æ–­è¨€"></a>ç±»å‹æ–­è¨€</h2><h3 id="å°–æ‹¬å·"><a href="#å°–æ‹¬å·" class="headerlink" title="å°–æ‹¬å·"></a>å°–æ‹¬å·</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someValue: any = <span class="string">"this is a string"</span>;</span><br><span class="line"><span class="keyword">let</span> strLength: number = (<span class="xml"><span class="tag">&lt;<span class="name">string</span>&gt;</span>someValue).length;</span></span><br></pre></td></tr></table></figure><h3 id="as"><a href="#as" class="headerlink" title="as"></a>as</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> someValue: any = <span class="string">"this is a string"</span>;</span><br><span class="line"><span class="keyword">let</span> strLength: number = (someValue <span class="keyword">as</span> string).length;</span><br></pre></td></tr></table></figure><h2 id="ç±»å‹å®ˆå«"><a href="#ç±»å‹å®ˆå«" class="headerlink" title="ç±»å‹å®ˆå«"></a>ç±»å‹å®ˆå«</h2><p>ç±»å‹ä¿æŠ¤æ˜¯å¯æ‰§è¡Œè¿è¡Œæ—¶æ£€æŸ¥çš„ä¸€ç§è¡¨è¾¾å¼ï¼Œç”¨äºç¡®ä¿è¯¥ç±»å‹åœ¨ä¸€å®šçš„èŒƒå›´å†…ã€‚æ¢å¥è¯è¯´ï¼Œç±»å‹ä¿æŠ¤å¯ä»¥ä¿è¯ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°½ç®¡å®ƒçš„å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å€¼ã€‚ç±»å‹ä¿æŠ¤ä¸ç‰¹æ€§æ£€æµ‹å¹¶ä¸æ˜¯å®Œå…¨ä¸åŒï¼Œå…¶ä¸»è¦æ€æƒ³æ˜¯å°è¯•æ£€æµ‹å±æ€§ã€æ–¹æ³•æˆ–åŸå‹ï¼Œä»¥ç¡®å®šå¦‚ä½•å¤„ç†å€¼ã€‚ç›®å‰ä¸»è¦æœ‰å››ç§çš„æ–¹å¼æ¥å®ç°ç±»å‹ä¿æŠ¤ï¼š</p><h3 id="in-å…³é”®å­—"><a href="#in-å…³é”®å­—" class="headerlink" title="in å…³é”®å­—"></a>in å…³é”®å­—</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">interface Admin &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  privileges: string[];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Employee &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  startDate: <span class="built_in">Date</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type UnknownEmployee = Employee | Admin;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printEmployeeInformation</span>(<span class="params">emp: UnknownEmployee</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"Name: "</span> + emp.name);</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"privileges"</span> <span class="keyword">in</span> emp) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Privileges: "</span> + emp.privileges);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">"startDate"</span> <span class="keyword">in</span> emp) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Start Date: "</span> + emp.startDate);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="typeof-å…³é”®å­—"><a href="#typeof-å…³é”®å­—" class="headerlink" title="typeof å…³é”®å­—"></a>typeof å…³é”®å­—</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">padLeft</span>(<span class="params">value: string, padding: string | number</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> padding === <span class="string">"number"</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Array</span>(padding + <span class="number">1</span>).join(<span class="string">" "</span>) + value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> padding === <span class="string">"string"</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> padding + value;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">`Expected string or number, got '<span class="subst">$&#123;padding&#125;</span>'.`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>typeof ç±»å‹ä¿æŠ¤åªæ”¯æŒä¸¤ç§å½¢å¼ï¼štypeof v === â€œtypenameâ€ å’Œ typeof v !== typenameï¼Œâ€typenameâ€ å¿…é¡»æ˜¯ â€œnumberâ€ï¼Œ â€œstringâ€ï¼Œ â€œbooleanâ€ æˆ– â€œsymbolâ€ã€‚ ä½†æ˜¯ TypeScript å¹¶ä¸ä¼šé˜»æ­¢ä½ ä¸å…¶å®ƒå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œè¯­è¨€ä¸ä¼šæŠŠé‚£äº›è¡¨è¾¾å¼è¯†åˆ«ä¸ºç±»å‹ä¿æŠ¤ã€‚</p><h3 id="instanceof-å…³é”®å­—"><a href="#instanceof-å…³é”®å­—" class="headerlink" title="instanceof å…³é”®å­—"></a>instanceof å…³é”®å­—</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">interface Padder &#123;</span><br><span class="line">  getPaddingString(): string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SpaceRepeatingPadder</span> <span class="title">implements</span> <span class="title">Padder</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(private numSpaces: number) &#123;&#125;</span><br><span class="line">  getPaddingString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>(<span class="keyword">this</span>.numSpaces + <span class="number">1</span>).join(<span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StringPadder</span> <span class="title">implements</span> <span class="title">Padder</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(private value: string) &#123;&#125;</span><br><span class="line">  getPaddingString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> padder: Padder = <span class="keyword">new</span> SpaceRepeatingPadder(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (padder <span class="keyword">instanceof</span> SpaceRepeatingPadder) &#123;</span><br><span class="line">  <span class="comment">// padderçš„ç±»å‹æ”¶çª„ä¸º 'SpaceRepeatingPadder'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰ç±»å‹ä¿æŠ¤çš„ç±»å‹è°“è¯"><a href="#è‡ªå®šä¹‰ç±»å‹ä¿æŠ¤çš„ç±»å‹è°“è¯" class="headerlink" title="è‡ªå®šä¹‰ç±»å‹ä¿æŠ¤çš„ç±»å‹è°“è¯"></a>è‡ªå®šä¹‰ç±»å‹ä¿æŠ¤çš„ç±»å‹è°“è¯</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isNumber</span>(<span class="params">x: any</span>): <span class="title">x</span> <span class="title">is</span> <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> x === <span class="string">"number"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isString</span>(<span class="params">x: any</span>): <span class="title">x</span> <span class="title">is</span> <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> x === <span class="string">"string"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è”åˆç±»å‹å’Œç±»å‹åˆ«å"><a href="#è”åˆç±»å‹å’Œç±»å‹åˆ«å" class="headerlink" title="è”åˆç±»å‹å’Œç±»å‹åˆ«å"></a>è”åˆç±»å‹å’Œç±»å‹åˆ«å</h2><h3 id="è”åˆç±»å‹"><a href="#è”åˆç±»å‹" class="headerlink" title="è”åˆç±»å‹"></a>è”åˆç±»å‹</h3><p>è”åˆç±»å‹é€šå¸¸ä¸ null æˆ– undefined ä¸€èµ·ä½¿ç”¨ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sayHello = <span class="function">(<span class="params">name: string | <span class="literal">undefined</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>ä¾‹å¦‚ï¼Œè¿™é‡Œ name çš„ç±»å‹æ˜¯ string | undefined æ„å‘³ç€å¯ä»¥å°† string æˆ– undefined çš„å€¼ä¼ é€’ç»™sayHello å‡½æ•°ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sayHello(<span class="string">"cosyer"</span>);</span><br><span class="line">sayHello(<span class="literal">undefined</span>);</span><br></pre></td></tr></table></figure></p><h3 id="å¯è¾¨è¯†è”åˆ"><a href="#å¯è¾¨è¯†è”åˆ" class="headerlink" title="å¯è¾¨è¯†è”åˆ"></a>å¯è¾¨è¯†è”åˆ</h3><p>TypeScript å¯è¾¨è¯†è”åˆï¼ˆDiscriminated Unionsï¼‰ç±»å‹ï¼Œä¹Ÿç§°ä¸ºä»£æ•°æ•°æ®ç±»å‹æˆ–æ ‡ç­¾è”åˆç±»å‹ã€‚å®ƒåŒ…å« 3 ä¸ªè¦ç‚¹ï¼š<code>å¯è¾¨è¯†ã€è”åˆç±»å‹å’Œç±»å‹å®ˆå«ã€‚</code></p><p>è¿™ç§ç±»å‹çš„æœ¬è´¨æ˜¯ç»“åˆè”åˆç±»å‹å’Œå­—é¢é‡ç±»å‹çš„ä¸€ç§ç±»å‹ä¿æŠ¤æ–¹æ³•ã€‚<code>å¦‚æœä¸€ä¸ªç±»å‹æ˜¯å¤šä¸ªç±»å‹çš„è”åˆç±»å‹ï¼Œä¸”å¤šä¸ªç±»å‹å«æœ‰ä¸€ä¸ªå…¬å…±å±æ€§ï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªå…¬å…±å±æ€§ï¼Œæ¥åˆ›å»ºä¸åŒçš„ç±»å‹ä¿æŠ¤åŒºå—ã€‚</code></p><h4 id="å¯è¾¨è¯†"><a href="#å¯è¾¨è¯†" class="headerlink" title="å¯è¾¨è¯†"></a>å¯è¾¨è¯†</h4><p>å¯è¾¨è¯†è¦æ±‚è”åˆç±»å‹ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å«æœ‰ä¸€ä¸ªå•ä¾‹ç±»å‹å±æ€§(å…¬å…±å±æ€§)ï¼Œæ¯”å¦‚ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">enum CarTransmission &#123;</span><br><span class="line">  Automatic = <span class="number">200</span>,</span><br><span class="line">  Manual = <span class="number">300</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Motorcycle &#123;</span><br><span class="line">  vType: <span class="string">"motorcycle"</span>; <span class="comment">// discriminant</span></span><br><span class="line">  make: number; <span class="comment">// year</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Car &#123;</span><br><span class="line">  vType: <span class="string">"car"</span>; <span class="comment">// discriminant</span></span><br><span class="line">  transmission: CarTransmission</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Truck &#123;</span><br><span class="line">  vType: <span class="string">"truck"</span>; <span class="comment">// discriminant</span></span><br><span class="line">  capacity: number; <span class="comment">// in tons</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«å®šä¹‰äº† Motorcycleã€ Car å’Œ Truck ä¸‰ä¸ªæ¥å£ï¼Œåœ¨è¿™äº›æ¥å£ä¸­éƒ½åŒ…å«ä¸€ä¸ª vType å±æ€§ï¼Œè¯¥å±æ€§è¢«ç§°ä¸ºå¯è¾¨è¯†çš„å±æ€§ï¼Œè€Œå…¶å®ƒçš„å±æ€§åªè·Ÿç‰¹æ€§çš„æ¥å£ç›¸å…³ã€‚</p><h4 id="è”åˆç±»å‹-1"><a href="#è”åˆç±»å‹-1" class="headerlink" title="è”åˆç±»å‹"></a>è”åˆç±»å‹</h4><p>åŸºäºå‰é¢å®šä¹‰äº†ä¸‰ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª Vehicle è”åˆç±»å‹ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type Vehicle = Motorcycle | Car | Truck;</span><br></pre></td></tr></table></figure>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ä½¿ç”¨ Vehicle è”åˆç±»å‹ï¼Œå¯¹äº Vehicle ç±»å‹çš„å˜é‡ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä¸åŒç±»å‹çš„è½¦è¾†ã€‚</p><h4 id="ç±»å‹å®ˆå«-1"><a href="#ç±»å‹å®ˆå«-1" class="headerlink" title="ç±»å‹å®ˆå«"></a>ç±»å‹å®ˆå«</h4><p>ä¸‹é¢æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ª evaluatePrice æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºæ ¹æ®è½¦è¾†çš„ç±»å‹ã€å®¹é‡å’Œè¯„ä¼°å› å­æ¥è®¡ç®—ä»·æ ¼ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> EVALUATION_FACTOR = <span class="built_in">Math</span>.PI; </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">evaluatePrice</span>(<span class="params">vehicle: Vehicle</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> vehicle.capacity * EVALUATION_FACTOR;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> myTruck: Truck = &#123; <span class="attr">vType</span>: <span class="string">"truck"</span>, <span class="attr">capacity</span>: <span class="number">9.5</span> &#125;;</span><br><span class="line">evaluatePrice(myTruck);</span><br></pre></td></tr></table></figure>å¯¹äºä»¥ä¸Šä»£ç ï¼ŒTypeScript ç¼–è¯‘å™¨å°†ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Property <span class="string">'capacity'</span> does not exist on type <span class="string">'Vehicle'</span>.</span><br><span class="line">Property <span class="string">'capacity'</span> does not exist on type <span class="string">'Motorcycle'</span>.</span><br></pre></td></tr></table></figure></p><p>åŸå› æ˜¯åœ¨ Motorcycle æ¥å£ä¸­ï¼Œå¹¶ä¸å­˜åœ¨ capacity å±æ€§ï¼Œè€Œå¯¹äº Car æ¥å£æ¥è¯´ï¼Œå®ƒä¹Ÿä¸å­˜åœ¨ capacity å±æ€§ã€‚é‚£ä¹ˆï¼Œç°åœ¨æˆ‘ä»¬åº”è¯¥å¦‚ä½•è§£å†³ä»¥ä¸Šé—®é¢˜å‘¢ï¼Ÿè¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹å®ˆå«ã€‚ä¸‹é¢æˆ‘ä»¬æ¥é‡æ„ä¸€ä¸‹å‰é¢å®šä¹‰çš„ evaluatePrice æ–¹æ³•ï¼Œé‡æ„åçš„ä»£ç å¦‚ä¸‹ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">evaluatePrice</span>(<span class="params">vehicle: Vehicle</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span>(vehicle.vType) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"car"</span>:</span><br><span class="line">      <span class="keyword">return</span> vehicle.transmission * EVALUATION_FACTOR;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"truck"</span>:</span><br><span class="line">      <span class="keyword">return</span> vehicle.capacity * EVALUATION_FACTOR;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">"motorcycle"</span>:</span><br><span class="line">      <span class="keyword">return</span> vehicle.make * EVALUATION_FACTOR;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h3><p>ç±»å‹åˆ«åç”¨æ¥ç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—(alias)ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Message = string | string[];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> greet = <span class="function">(<span class="params">message: Message</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h2 id="äº¤å‰ç±»å‹"><a href="#äº¤å‰ç±»å‹" class="headerlink" title="äº¤å‰ç±»å‹"></a>äº¤å‰ç±»å‹</h2><p>TypeScript äº¤å‰ç±»å‹æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚ è¿™è®©æˆ‘ä»¬å¯ä»¥æŠŠç°æœ‰çš„å¤šç§ç±»å‹å åŠ åˆ°ä¸€èµ·æˆä¸ºä¸€ç§ç±»å‹ï¼Œå®ƒåŒ…å«äº†æ‰€éœ€çš„æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">interface IPerson &#123;</span><br><span class="line">  id: string;</span><br><span class="line">  age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface IWorker &#123;</span><br><span class="line">  companyId: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type IStaff = IPerson &amp; IWorker;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> staff: IStaff = &#123;</span><br><span class="line">  id: <span class="string">'E1006'</span>,</span><br><span class="line">  age: <span class="number">33</span>,</span><br><span class="line">  companyId: <span class="string">'EFT'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.dir(staff)</span><br></pre></td></tr></table></figure><p>åœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä¸º IPerson å’Œ IWorker ç±»å‹å®šä¹‰äº†ä¸åŒçš„æˆå‘˜ï¼Œç„¶åé€šè¿‡ &amp; è¿ç®—ç¬¦å®šä¹‰äº† IStaff äº¤å‰ç±»å‹ï¼Œæ‰€ä»¥è¯¥ç±»å‹åŒæ—¶æ‹¥æœ‰ IPerson å’Œ IWorker è¿™ä¸¤ç§ç±»å‹çš„æˆå‘˜ã€‚</p><h2 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h2><h3 id="åŒºåˆ«-1"><a href="#åŒºåˆ«-1" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h3><table><thead><tr><th style="text-align:center">TypeScript</th><th style="text-align:center">JavaScript</th></tr></thead><tbody><tr><td style="text-align:center">å«æœ‰ç±»å‹</td><td style="text-align:center">æ— ç±»å‹</td></tr><tr><td style="text-align:center">ç®­å¤´å‡½æ•°</td><td style="text-align:center">ç®­å¤´å‡½æ•°ï¼ˆES2015ï¼‰</td></tr><tr><td style="text-align:center">å‡½æ•°ç±»å‹</td><td style="text-align:center">æ— å‡½æ•°ç±»å‹</td></tr><tr><td style="text-align:center">å¿…å¡«å’Œå¯é€‰å‚æ•°</td><td style="text-align:center">æ‰€æœ‰å‚æ•°éƒ½æ˜¯å¯é€‰çš„</td></tr><tr><td style="text-align:center">é»˜è®¤å‚æ•°</td><td style="text-align:center">é»˜è®¤å‚æ•°</td></tr><tr><td style="text-align:center">å‰©ä½™å‚æ•°</td><td style="text-align:center">å‰©ä½™å‚æ•°</td></tr><tr><td style="text-align:center">å‡½æ•°é‡è½½</td><td style="text-align:center">æ— å‡½æ•°é‡è½½</td></tr></tbody></table><h3 id="ç®­å¤´å‡½æ•°"><a href="#ç®­å¤´å‡½æ•°" class="headerlink" title="ç®­å¤´å‡½æ•°"></a>ç®­å¤´å‡½æ•°</h3><p>ç®€å•çœ‹ä¸‹ç¤ºä¾‹ï¼Œè¯¦ç»†å¯è§<a href="https://mydearest.cn/jsthis.html">JavaScript ä¸­ this çš„è¯¦è§£</a><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">myBooks.forEach(<span class="function"><span class="params">()</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'reading'</span>));</span><br><span class="line"></span><br><span class="line">myBooks.forEach(<span class="function"><span class="params">title</span> =&gt;</span> <span class="built_in">console</span>.log(title));</span><br><span class="line"></span><br><span class="line">myBooks.forEach(<span class="function">(<span class="params">title, idx, arr</span>) =&gt;</span></span><br><span class="line">  <span class="built_in">console</span>.log(idx + <span class="string">'-'</span> + title);</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">myBooks.forEach(<span class="function">(<span class="params">title, idx, arr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(idx + <span class="string">'-'</span> + title);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><h3 id="å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹"><a href="#å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹" class="headerlink" title="å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹"></a>å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createUserId</span>(<span class="params">name: string, id: number</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> name + id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°ç±»å‹"><a href="#å‡½æ•°ç±»å‹" class="headerlink" title="å‡½æ•°ç±»å‹"></a>å‡½æ•°ç±»å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> IdGenerator: <span class="function">(<span class="params">chars: string, nums: number</span>) =&gt;</span> string;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createUserId</span>(<span class="params">name: string, id: number</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> name + id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">IdGenerator = createUserId;</span><br></pre></td></tr></table></figure><h3 id="å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°"><a href="#å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°" class="headerlink" title="å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°"></a>å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯é€‰å‚æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createUserId</span>(<span class="params">name: string, id: number, age?: number</span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> name + id;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createUserId</span>(<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">  name: string = <span class="string">"cosyer"</span>,</span></span></span><br><span class="line"><span class="function"><span class="params">  id: number,</span></span></span><br><span class="line"><span class="function"><span class="params">  age?: number</span></span></span><br><span class="line"><span class="function"><span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> name + id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å£°æ˜å‡½æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡ ? å·æ¥å®šä¹‰å¯é€‰å‚æ•°ï¼Œæ¯”å¦‚ age?: number è¿™ç§å½¢å¼ã€‚åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¯é€‰å‚æ•°è¦æ”¾åœ¨æ™®é€šå‚æ•°çš„åé¢ï¼Œä¸ç„¶ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</p><h3 id="å‰©ä½™å‚æ•°"><a href="#å‰©ä½™å‚æ•°" class="headerlink" title="å‰©ä½™å‚æ•°"></a>å‰©ä½™å‚æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">push</span>(<span class="params">array, ...items</span>) </span>&#123;</span><br><span class="line">  items.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">    array.push(item);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a = [];</span><br><span class="line">push(a, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure><h3 id="å‡½æ•°é‡è½½"><a href="#å‡½æ•°é‡è½½" class="headerlink" title="å‡½æ•°é‡è½½"></a>å‡½æ•°é‡è½½</h3><p>å‡½æ•°é‡è½½æˆ–æ–¹æ³•é‡è½½æ˜¯ä½¿ç”¨ç›¸åŒåç§°å’Œä¸åŒå‚æ•°æ•°é‡æˆ–ç±»å‹åˆ›å»ºå¤šä¸ªæ–¹æ³•çš„ä¸€ç§èƒ½åŠ›ã€‚è¦è§£å†³å‰é¢é‡åˆ°çš„é—®é¢˜ï¼Œæ–¹æ³•å°±æ˜¯ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰æ¥è¿›è¡Œå‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®è¿™ä¸ªåˆ—è¡¨å»å¤„ç†å‡½æ•°çš„è°ƒç”¨ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a: number, b: number</span>): <span class="title">number</span>;</span></span><br><span class="line"><span class="function"><span class="title">function</span> <span class="title">add</span>(<span class="params">a: string, b: string</span>): <span class="title">string</span>;</span></span><br><span class="line"><span class="function"><span class="title">function</span> <span class="title">add</span>(<span class="params">a: string, b: number</span>): <span class="title">string</span>;</span></span><br><span class="line"><span class="function"><span class="title">function</span> <span class="title">add</span>(<span class="params">a: number, b: string</span>): <span class="title">string</span>;</span></span><br><span class="line"><span class="function"><span class="title">function</span> <span class="title">add</span>(<span class="params">a: Combinable, b: Combinable</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> a === <span class="string">"string"</span> || <span class="keyword">typeof</span> b === <span class="string">"string"</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a.toString() + b.toString();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ–¹æ³•é‡è½½æ˜¯æŒ‡åœ¨åŒä¸€ä¸ªç±»ä¸­æ–¹æ³•åŒåï¼Œå‚æ•°ä¸åŒï¼ˆå‚æ•°ç±»å‹ä¸åŒã€å‚æ•°ä¸ªæ•°ä¸åŒæˆ–å‚æ•°ä¸ªæ•°ç›¸åŒæ—¶å‚æ•°çš„å…ˆåé¡ºåºä¸åŒï¼‰ï¼Œè°ƒç”¨æ—¶æ ¹æ®å®å‚çš„å½¢å¼ï¼Œé€‰æ‹©ä¸å®ƒåŒ¹é…çš„æ–¹æ³•æ‰§è¡Œæ“ä½œçš„ä¸€ç§æŠ€æœ¯ã€‚æ‰€ä»¥ç±»ä¸­æˆå‘˜æ–¹æ³•æ»¡è¶³é‡è½½çš„æ¡ä»¶æ˜¯ï¼šåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œæ–¹æ³•åç›¸åŒä¸”å‚æ•°åˆ—è¡¨ä¸åŒã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªæˆå‘˜æ–¹æ³•é‡è½½çš„ä¾‹å­ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> </span>&#123;</span><br><span class="line">  add(a: number, <span class="attr">b</span>: number): number;</span><br><span class="line">  add(a: string, <span class="attr">b</span>: string): string;</span><br><span class="line">  add(a: string, <span class="attr">b</span>: number): string;</span><br><span class="line">  add(a: number, <span class="attr">b</span>: string): string;</span><br><span class="line">  add(a: Combinable, <span class="attr">b</span>: Combinable) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> a === <span class="string">"string"</span> || <span class="keyword">typeof</span> b === <span class="string">"string"</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> a.toString() + b.toString();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> calculator = <span class="keyword">new</span> Calculator();</span><br><span class="line"><span class="keyword">const</span> result = calculator.add(<span class="string">"cosyer"</span>, <span class="string">" chenyu"</span>);</span><br></pre></td></tr></table></figure>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ TypeScript ç¼–è¯‘å™¨å¤„ç†å‡½æ•°é‡è½½æ—¶ï¼Œå®ƒä¼šæŸ¥æ‰¾é‡è½½åˆ—è¡¨ï¼Œå°è¯•ä½¿ç”¨ç¬¬ä¸€ä¸ªé‡è½½å®šä¹‰ã€‚ å¦‚æœåŒ¹é…çš„è¯å°±ä½¿ç”¨è¿™ä¸ªã€‚ å› æ­¤ï¼Œåœ¨å®šä¹‰é‡è½½çš„æ—¶å€™ï¼Œä¸€å®šè¦æŠŠæœ€ç²¾ç¡®çš„å®šä¹‰æ”¾åœ¨æœ€å‰é¢ã€‚å¦å¤–åœ¨ Calculator ç±»ä¸­ï¼Œadd(a: Combinable, b: Combinable){ } å¹¶ä¸æ˜¯é‡è½½åˆ—è¡¨çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å¯¹äº add æˆå‘˜æ–¹æ³•æ¥è¯´ï¼Œæˆ‘ä»¬åªå®šä¹‰äº†å››ä¸ªé‡è½½æ–¹æ³•ã€‚</p><h2 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h2><h3 id="æ•°ç»„è§£æ„"><a href="#æ•°ç»„è§£æ„" class="headerlink" title="æ•°ç»„è§£æ„"></a>æ•°ç»„è§£æ„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x: number; <span class="keyword">let</span> y: number; <span class="keyword">let</span> z: number;</span><br><span class="line"><span class="keyword">let</span> five_array = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line">[x,y,z] = five_array; <span class="comment">// 0 1 2</span></span><br></pre></td></tr></table></figure><h3 id="æ‰©å±•è¿ç®—ç¬¦"><a href="#æ‰©å±•è¿ç®—ç¬¦" class="headerlink" title="æ‰©å±•è¿ç®—ç¬¦"></a>æ‰©å±•è¿ç®—ç¬¦</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> two_array = [<span class="number">0</span>, <span class="number">1</span>];</span><br><span class="line"><span class="keyword">let</span> five_array = [...two_array, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„éå†"><a href="#æ•°ç»„éå†" class="headerlink" title="æ•°ç»„éå†"></a>æ•°ç»„éå†</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> colors: string[] = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> colors) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a>å¯¹è±¡</h2><h3 id="å¯¹è±¡è§£æ„"><a href="#å¯¹è±¡è§£æ„" class="headerlink" title="å¯¹è±¡è§£æ„"></a>å¯¹è±¡è§£æ„</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  name: <span class="string">"cosyer"</span>,</span><br><span class="line">  gender: <span class="string">"Male"</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> &#123; name, gender &#125; = person;</span><br></pre></td></tr></table></figure><h3 id="å¯¹è±¡å±•å¼€æ‰©å±•"><a href="#å¯¹è±¡å±•å¼€æ‰©å±•" class="headerlink" title="å¯¹è±¡å±•å¼€æ‰©å±•"></a>å¯¹è±¡å±•å¼€æ‰©å±•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  name: <span class="string">"cosyer"</span>,</span><br><span class="line">  gender: <span class="string">"Male"</span>,</span><br><span class="line">  address: <span class="string">"Nanjing"</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„è£…å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> personWithAge = &#123; ...person, <span class="attr">age</span>: <span class="number">33</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–é™¤äº†æŸäº›é¡¹å¤–çš„å…¶å®ƒé¡¹</span></span><br><span class="line"><span class="keyword">let</span> &#123; name, ...rest &#125; = person;</span><br></pre></td></tr></table></figure><h2 id="æ¥å£"><a href="#æ¥å£" class="headerlink" title="æ¥å£"></a>æ¥å£</h2><p>åœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œæ¥å£æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å¯¹è¡Œä¸ºçš„æŠ½è±¡ï¼Œè€Œå…·ä½“å¦‚ä½•è¡ŒåŠ¨éœ€è¦ç”±ç±»å»å®ç°ã€‚</p><p>TypeScript ä¸­çš„æ¥å£æ˜¯ä¸€ä¸ªéå¸¸çµæ´»çš„æ¦‚å¿µï¼Œé™¤äº†å¯ç”¨äºå¯¹ç±»çš„ä¸€éƒ¨åˆ†è¡Œä¸ºè¿›è¡ŒæŠ½è±¡ä»¥å¤–ï¼Œä¹Ÿå¸¸ç”¨äºå¯¹ã€Œå¯¹è±¡çš„å½¢çŠ¶ï¼ˆShapeï¼‰ã€è¿›è¡Œæè¿°</p><h3 id="å¯¹è±¡çš„å½¢çŠ¶-æè¿°"><a href="#å¯¹è±¡çš„å½¢çŠ¶-æè¿°" class="headerlink" title="å¯¹è±¡çš„å½¢çŠ¶(æè¿°)"></a>å¯¹è±¡çš„å½¢çŠ¶(æè¿°)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cosyer: Person = &#123;</span><br><span class="line">  name: <span class="string">"cosyer"</span>,</span><br><span class="line">  age: <span class="number">25</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="å¯é€‰ã€åªè¯»å±æ€§"><a href="#å¯é€‰ã€åªè¯»å±æ€§" class="headerlink" title="å¯é€‰ã€åªè¯»å±æ€§"></a>å¯é€‰ã€åªè¯»å±æ€§</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">  readonly name: string;</span><br><span class="line">  age?: number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åªè¯»å±æ€§ç”¨äºé™åˆ¶åªèƒ½åœ¨å¯¹è±¡åˆšåˆšåˆ›å»ºçš„æ—¶å€™ä¿®æ”¹å…¶å€¼ã€‚æ­¤å¤– TypeScript è¿˜æä¾›äº† ReadonlyArray<T> ç±»å‹ï¼Œå®ƒä¸ Array<T> ç›¸ä¼¼ï¼Œåªæ˜¯æŠŠæ‰€æœ‰å¯å˜æ–¹æ³•å»æ‰äº†ï¼Œå› æ­¤å¯ä»¥ç¡®ä¿æ•°ç»„åˆ›å»ºåå†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ã€‚</T></T></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a: number[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> ro: ReadonlyArray&lt;number&gt; = a;</span><br><span class="line">ro[<span class="number">0</span>] = <span class="number">12</span>; <span class="comment">// error!</span></span><br><span class="line">ro.push(<span class="number">5</span>); <span class="comment">// error!</span></span><br><span class="line">ro.length = <span class="number">100</span>; <span class="comment">// error!</span></span><br><span class="line">a = ro; <span class="comment">// error!</span></span><br></pre></td></tr></table></figure><h2 id="æ³›å‹"><a href="#æ³›å‹" class="headerlink" title="æ³›å‹"></a>æ³›å‹</h2><p>è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„ APIï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘å¯é‡ç”¨æ€§ã€‚ ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ï¼Œè¿™åœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½ã€‚</p><blockquote><p>åœ¨åƒ C# å’Œ Java è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ã€‚ è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚</p></blockquote><p>è®¾è®¡æ³›å‹çš„å…³é”®ç›®çš„æ˜¯åœ¨æˆå‘˜ä¹‹é—´æä¾›æœ‰æ„ä¹‰çš„çº¦æŸï¼Œè¿™äº›æˆå‘˜å¯ä»¥æ˜¯ï¼šç±»çš„å®ä¾‹æˆå‘˜ã€ç±»çš„æ–¹æ³•ã€å‡½æ•°å‚æ•°å’Œå‡½æ•°è¿”å›å€¼ã€‚</p><p>æ³›å‹ï¼ˆGenericsï¼‰æ˜¯å…è®¸åŒä¸€ä¸ªå‡½æ•°æ¥å—ä¸åŒç±»å‹å‚æ•°çš„ä¸€ç§æ¨¡æ¿ã€‚ç›¸æ¯”äºä½¿ç”¨ any ç±»å‹ï¼Œä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯å¤ç”¨çš„ç»„ä»¶è¦æ›´å¥½ï¼Œå› ä¸ºæ³›å‹ä¼šä¿ç•™å‚æ•°ç±»å‹ã€‚</p><h3 id="æ³›å‹æ¥å£"><a href="#æ³›å‹æ¥å£" class="headerlink" title="æ³›å‹æ¥å£"></a>æ³›å‹æ¥å£</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface GenericIdentityFn&lt;T&gt; &#123;</span><br><span class="line">  (arg: T): T;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ³›å‹ç±»"><a href="#æ³›å‹ç±»" class="headerlink" title="æ³›å‹ç±»"></a>æ³›å‹ç±»</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">GenericNumber</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  zeroValue: T;</span><br><span class="line">  add: <span class="function">(<span class="params">x: T, y: T</span>) =&gt;</span> T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myGenericNumber = <span class="keyword">new</span> GenericNumber&lt;number&gt;();</span><br><span class="line">myGenericNumber.zeroValue = <span class="number">0</span>;</span><br><span class="line">myGenericNumber.add = <span class="function"><span class="keyword">function</span> (<span class="params">x, y</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="æ³›å‹å˜é‡"><a href="#æ³›å‹å˜é‡" class="headerlink" title="æ³›å‹å˜é‡"></a>æ³›å‹å˜é‡</h3><p>å¯¹åˆšæ¥è§¦ TypeScript æ³›å‹çš„å°ä¼™ä¼´æ¥è¯´ï¼Œçœ‹åˆ° T å’Œ Eï¼Œè¿˜æœ‰ K å’Œ V è¿™äº›æ³›å‹å˜é‡æ—¶ï¼Œä¼°è®¡ä¼šä¸€è„¸æ‡µé€¼ã€‚å…¶å®è¿™äº›å¤§å†™å­—æ¯å¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨çš„åŒºåˆ«ï¼Œåªä¸è¿‡æ˜¯ä¸€ä¸ªçº¦å®šå¥½çš„è§„èŒƒè€Œå·²ã€‚ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨å¤§å†™å­—æ¯ A-Z å®šä¹‰çš„ç±»å‹å˜é‡éƒ½å±äºæ³›å‹ï¼ŒæŠŠ T æ¢æˆ Aï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ä¸€äº›å¸¸è§æ³›å‹å˜é‡ä»£è¡¨çš„æ„æ€ï¼š</p><ul><li>Tï¼ˆTypeï¼‰ï¼šè¡¨ç¤ºä¸€ä¸ª TypeScript ç±»å‹</li><li>Kï¼ˆKeyï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„é”®ç±»å‹</li><li>Vï¼ˆValueï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„å€¼ç±»å‹</li><li>Eï¼ˆElementï¼‰ï¼šè¡¨ç¤ºå…ƒç´ ç±»å‹</li></ul><h3 id="æ³›å‹å·¥å…·ç±»å‹-6ç§"><a href="#æ³›å‹å·¥å…·ç±»å‹-6ç§" class="headerlink" title="æ³›å‹å·¥å…·ç±»å‹(6ç§)"></a>æ³›å‹å·¥å…·ç±»å‹(6ç§)</h3><p>ä¸ºäº†æ–¹ä¾¿å¼€å‘è€… TypeScript å†…ç½®äº†ä¸€äº›å¸¸ç”¨çš„å·¥å…·ç±»å‹ï¼Œæ¯”å¦‚ Partialã€Requiredã€Readonlyã€Record å’Œ ReturnType ç­‰ã€‚</p><h4 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h4><p>typeof æ“ä½œç¬¦å¯ä»¥ç”¨æ¥è·å–ä¸€ä¸ªå˜é‡å£°æ˜æˆ–å¯¹è±¡çš„ç±»å‹ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> cosyer: Person = &#123; <span class="attr">name</span>: <span class="string">'cosyer'</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;;</span><br><span class="line">type Cosyer= <span class="keyword">typeof</span> cosyer; <span class="comment">// -&gt; Person</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toArray</span>(<span class="params">x: number</span>): <span class="title">Array</span>&lt;<span class="title">number</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> [x];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Func = <span class="keyword">typeof</span> toArray; <span class="comment">// -&gt; (x: number) =&gt; number[]</span></span><br></pre></td></tr></table></figure></p><h4 id="keyof"><a href="#keyof" class="headerlink" title="keyof"></a>keyof</h4><p>keyof æ“ä½œç¬¦å¯ä»¥ç”¨æ¥ä¸€ä¸ªå¯¹è±¡ä¸­çš„æ‰€æœ‰ key å€¼ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    name: string;</span><br><span class="line">    age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type K1 = keyof Person; <span class="comment">// "name" | "age"</span></span><br><span class="line">type K2 = keyof Person[]; <span class="comment">// "length" | "toString" | "pop" | "push" | "concat" | "join" </span></span><br><span class="line">type K3 = keyof &#123; [x: string]: Person &#125;;  <span class="comment">// string | number</span></span><br></pre></td></tr></table></figure></p><h4 id="in"><a href="#in" class="headerlink" title="in"></a>in</h4><p>in ç”¨æ¥éå†æšä¸¾ç±»å‹ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Keys = <span class="string">"a"</span> | <span class="string">"b"</span> | <span class="string">"c"</span></span><br><span class="line"></span><br><span class="line">type Obj =  &#123;</span><br><span class="line">  [p <span class="keyword">in</span> Keys]: any</span><br><span class="line">&#125; <span class="comment">// -&gt; &#123; a: any, b: any, c: any &#125;</span></span><br></pre></td></tr></table></figure></p><h4 id="infer"><a href="#infer" class="headerlink" title="infer"></a>infer</h4><p>åœ¨æ¡ä»¶ç±»å‹è¯­å¥ä¸­ï¼Œå¯ä»¥ç”¨ infer å£°æ˜ä¸€ä¸ªç±»å‹å˜é‡å¹¶ä¸”å¯¹å®ƒè¿›è¡Œä½¿ç”¨ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type ReturnType&lt;T&gt; = T extends (</span><br><span class="line">  ...args: any[]</span><br><span class="line">) =&gt; infer R ? R : any;</span><br></pre></td></tr></table></figure>ä»¥ä¸Šä»£ç ä¸­ infer R å°±æ˜¯å£°æ˜ä¸€ä¸ªå˜é‡æ¥æ‰¿è½½ä¼ å…¥å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ï¼Œç®€å•è¯´å°±æ˜¯ç”¨å®ƒå–åˆ°å‡½æ•°è¿”å›å€¼çš„ç±»å‹æ–¹ä¾¿ä¹‹åä½¿ç”¨ã€‚</p><h4 id="extends"><a href="#extends" class="headerlink" title="extends"></a>extends</h4><p>æœ‰æ—¶å€™æˆ‘ä»¬å®šä¹‰çš„æ³›å‹ä¸æƒ³è¿‡äºçµæ´»æˆ–è€…è¯´æƒ³ç»§æ‰¿æŸäº›ç±»ç­‰ï¼Œå¯ä»¥é€šè¿‡ extends å…³é”®å­—æ·»åŠ æ³›å‹çº¦æŸã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface ILengthwise &#123;</span><br><span class="line">  length: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loggingIdentity</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">ILengthwise</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(arg.length);</span><br><span class="line">  <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// error, number doesn't have a .length property</span></span><br><span class="line">loggingIdentity(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">loggingIdentity(&#123;<span class="attr">length</span>: <span class="number">10</span>, <span class="attr">value</span>: <span class="number">3</span>&#125;);</span><br></pre></td></tr></table></figure></p><h4 id="Partial"><a href="#Partial" class="headerlink" title="Partial"></a>Partial</h4><p>Partial<T> çš„ä½œç”¨å°±æ˜¯å°†æŸä¸ªç±»å‹é‡Œçš„å±æ€§å…¨éƒ¨å˜ä¸ºå¯é€‰é¡¹ ?ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * node_modules/typescript/lib/lib.es5.d.ts</span></span><br><span class="line"><span class="comment"> * Make all properties in T optional</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">type Partial&lt;T&gt; = &#123;</span><br><span class="line">  [P <span class="keyword">in</span> keyof T]?: T[P];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></T></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">interface Todo &#123;</span><br><span class="line">  title: string;</span><br><span class="line">  description: string;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateTodo</span>(<span class="params">todo: Todo, fieldsToUpdate: Partial&lt;Todo&gt;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; ...todo, ...fieldsToUpdate &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todo1 = &#123;</span><br><span class="line">  title: <span class="string">"organize desk"</span>,</span><br><span class="line">  description: <span class="string">"clear clutter"</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> todo2 = updateTodo(todo1, &#123;</span><br><span class="line">  description: <span class="string">"throw out trash"</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="è£…é¥°å™¨"><a href="#è£…é¥°å™¨" class="headerlink" title="è£…é¥°å™¨"></a>è£…é¥°å™¨</h2><h3 id="è£…é¥°å™¨æ˜¯ä»€ä¹ˆ"><a href="#è£…é¥°å™¨æ˜¯ä»€ä¹ˆ" class="headerlink" title="è£…é¥°å™¨æ˜¯ä»€ä¹ˆ"></a>è£…é¥°å™¨æ˜¯ä»€ä¹ˆ</h3><ul><li>å®ƒæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼</li><li>è¯¥è¡¨è¾¾å¼è¢«æ‰§è¡Œåï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°</li><li>å‡½æ•°çš„å…¥å‚åˆ†åˆ«ä¸º targetã€name å’Œ descriptor</li><li>æ‰§è¡Œè¯¥å‡½æ•°åï¼Œå¯èƒ½è¿”å› descriptor å¯¹è±¡ï¼Œç”¨äºé…ç½® target å¯¹è±¡</li></ul><h3 id="è£…é¥°å™¨çš„åˆ†ç±»"><a href="#è£…é¥°å™¨çš„åˆ†ç±»" class="headerlink" title="è£…é¥°å™¨çš„åˆ†ç±»"></a>è£…é¥°å™¨çš„åˆ†ç±»</h3><ul><li>ç±»è£…é¥°å™¨ï¼ˆClass decoratorsï¼‰</li><li>å±æ€§è£…é¥°å™¨ï¼ˆProperty decoratorsï¼‰</li><li>æ–¹æ³•è£…é¥°å™¨ï¼ˆMethod decoratorsï¼‰</li><li>å‚æ•°è£…é¥°å™¨ï¼ˆParameter decoratorsï¼‰</li></ul><h4 id="ç±»è£…é¥°å™¨"><a href="#ç±»è£…é¥°å™¨" class="headerlink" title="ç±»è£…é¥°å™¨"></a>ç±»è£…é¥°å™¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">declare type ClassDecorator = <span class="xml"><span class="tag">&lt;<span class="name">TFunction</span> <span class="attr">extends</span> <span class="attr">Function</span>&gt;</span>(</span></span><br><span class="line"><span class="xml">  target: TFunction</span></span><br><span class="line"><span class="xml">) =&gt; TFunction | void;</span></span><br></pre></td></tr></table></figure><p>ç±»è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç”¨æ¥è£…é¥°ç±»çš„ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼š</p><ul><li>target: TFunction - è¢«è£…é¥°çš„ç±»<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Greeter</span>(<span class="params">target: Function</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  target.prototype.greet = <span class="function"><span class="keyword">function</span> (<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Hello cosyer!"</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Greeter</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Greeting</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="comment">// å†…éƒ¨å®ç°</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myGreeting = <span class="keyword">new</span> Greeting();</span><br><span class="line">myGreeting.greet(); <span class="comment">// console output: 'Hello cosyer!';</span></span><br></pre></td></tr></table></figure></li></ul><p><code>è‡ªå®šä¹‰å‚æ•°</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Greeter</span>(<span class="params">greeting: string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">target: Function</span>) </span>&#123;</span><br><span class="line">    target.prototype.greet = <span class="function"><span class="keyword">function</span> (<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(greeting);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Greeter(<span class="string">"Hello TS!"</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Greeting</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="comment">// å†…éƒ¨å®ç°</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> myGreeting = <span class="keyword">new</span> Greeting();</span><br><span class="line">myGreeting.greet(); <span class="comment">// console output: 'Hello TS!';</span></span><br></pre></td></tr></table></figure></p><h4 id="å±æ€§è£…é¥°å™¨"><a href="#å±æ€§è£…é¥°å™¨" class="headerlink" title="å±æ€§è£…é¥°å™¨"></a>å±æ€§è£…é¥°å™¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">declare type PropertyDecorator = (target:<span class="built_in">Object</span>, </span><br><span class="line">  propertyKey: string | symbol ) =&gt; <span class="keyword">void</span>;</span><br></pre></td></tr></table></figure><p>å±æ€§è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œç”¨æ¥è£…é¥°ç±»çš„å±æ€§ã€‚å®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li>target: Object - è¢«è£…é¥°çš„ç±»</li><li>propertyKey: string | symbol - è¢«è£…é¥°ç±»çš„å±æ€§å</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">logProperty</span>(<span class="params">target: any, key: string</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">delete</span> target[key];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> backingField = <span class="string">"_"</span> + key;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(target, backingField, &#123;</span><br><span class="line">    writable: <span class="literal">true</span>,</span><br><span class="line">    enumerable: <span class="literal">true</span>,</span><br><span class="line">    configurable: <span class="literal">true</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// property getter</span></span><br><span class="line">  <span class="keyword">const</span> getter = <span class="function"><span class="keyword">function</span> (<span class="params">this: any</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> currVal = <span class="keyword">this</span>[backingField];</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Get: <span class="subst">$&#123;key&#125;</span> =&gt; <span class="subst">$&#123;currVal&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">return</span> currVal;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// property setter</span></span><br><span class="line">  <span class="keyword">const</span> setter = <span class="function"><span class="keyword">function</span> (<span class="params">this: any, newVal: any</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Set: <span class="subst">$&#123;key&#125;</span> =&gt; <span class="subst">$&#123;newVal&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">this</span>[backingField] = newVal;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Create new property with getter and setter</span></span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(target, key, &#123;</span><br><span class="line">    <span class="keyword">get</span>: getter,</span><br><span class="line">    <span class="keyword">set</span>: setter,</span><br><span class="line">    enumerable: true,</span><br><span class="line">    configurable: true</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Person &#123; </span><br><span class="line">  @logProperty</span><br><span class="line">  public name: string;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(name : string) &#123; </span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> Person(<span class="string">"cosyer"</span>);</span><br><span class="line">p1.name = <span class="string">"chenyu"</span>;</span><br><span class="line"><span class="comment">// Set: name =&gt; cosyer</span></span><br><span class="line"><span class="comment">// Set: name =&gt; chenyu</span></span><br></pre></td></tr></table></figure><h4 id="æ–¹æ³•è£…é¥°å™¨"><a href="#æ–¹æ³•è£…é¥°å™¨" class="headerlink" title="æ–¹æ³•è£…é¥°å™¨"></a>æ–¹æ³•è£…é¥°å™¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">declare type MethodDecorator = <span class="xml"><span class="tag">&lt;<span class="name">T</span>&gt;</span>(target:Object, propertyKey: string | symbol,  </span></span><br><span class="line">  descriptor: TypePropertyDescript&lt;T&gt;) =&gt; TypedPropertyDescriptor&lt;T&gt; | void;</span><br></pre></td></tr></table></figure><p>æ–¹æ³•è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œç”¨æ¥è£…é¥°ç±»çš„æ–¹æ³•ã€‚å®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li>target: Object - è¢«è£…é¥°çš„ç±»</li><li>propertyKey: string | symbol - æ–¹æ³•å</li><li>descriptor: TypePropertyDescript - å±æ€§æè¿°ç¬¦</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">LogOutput</span>(<span class="params">tarage: Function, key: string, descriptor: any</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> originalMethod = descriptor.value;</span><br><span class="line">  <span class="keyword">let</span> newMethod = <span class="function"><span class="keyword">function</span>(<span class="params">...args: any[]</span>): <span class="title">any</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> result: any = originalMethod.apply(<span class="keyword">this</span>, args);</span><br><span class="line">    <span class="keyword">if</span>(!<span class="keyword">this</span>.loggedOutput) &#123;</span><br><span class="line">      <span class="keyword">this</span>.loggedOutput = <span class="keyword">new</span> <span class="built_in">Array</span>&lt;any&gt;();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.loggedOutput.push(&#123;</span><br><span class="line">      method: key,</span><br><span class="line">      parameters: args,</span><br><span class="line">      output: result,</span><br><span class="line">      timestamp: <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line">  descriptor.value = newMethod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> </span>&#123;</span><br><span class="line">  @LogOutput</span><br><span class="line">  double (num: number): number &#123;</span><br><span class="line">    <span class="keyword">return</span> num * <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> calc = <span class="keyword">new</span> Calculator();</span><br><span class="line">calc.double(<span class="number">11</span>);</span><br><span class="line"><span class="comment">// console ouput: [&#123;method: "double", output: 22, ...&#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(calc.loggedOutput);</span><br></pre></td></tr></table></figure><h4 id="å‚æ•°è£…é¥°å™¨"><a href="#å‚æ•°è£…é¥°å™¨" class="headerlink" title="å‚æ•°è£…é¥°å™¨"></a>å‚æ•°è£…é¥°å™¨</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">declare type ParameterDecorator = (target: <span class="built_in">Object</span>, <span class="attr">propertyKey</span>: string | symbol, </span><br><span class="line">  parameterIndex: number ) =&gt; <span class="keyword">void</span></span><br></pre></td></tr></table></figure><p>å‚æ•°è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œæ˜¯ç”¨æ¥è£…é¥°å‡½æ•°å‚æ•°ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p><ul><li>target: Object - è¢«è£…é¥°çš„ç±»</li><li>propertyKey: string | symbol - æ–¹æ³•å</li><li>parameterIndex: number - æ–¹æ³•ä¸­å‚æ•°çš„ç´¢å¼•å€¼</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Log</span>(<span class="params">target: Function, key: string, parameterIndex: number</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> functionLogged = key || target.prototype.constructor.name;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`The parameter in position <span class="subst">$&#123;parameterIndex&#125;</span> at <span class="subst">$&#123;functionLogged&#125;</span> has</span></span><br><span class="line"><span class="string">been decorated`</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Greeter</span> </span>&#123;</span><br><span class="line">  greeting: string;</span><br><span class="line">  <span class="keyword">constructor</span>(@Log phrase: string) &#123;</span><br><span class="line"><span class="keyword">this</span>.greeting = phrase; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// console output: The parameter in position 0 </span></span><br><span class="line"><span class="comment">// at Greeter has been decorated</span></span><br></pre></td></tr></table></figure><h2 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a>ç±»</h2><h3 id="ç±»çš„å±æ€§å’Œæ–¹æ³•"><a href="#ç±»çš„å±æ€§å’Œæ–¹æ³•" class="headerlink" title="ç±»çš„å±æ€§å’Œæ–¹æ³•"></a>ç±»çš„å±æ€§å’Œæ–¹æ³•</h3><p>åœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œç±»æ˜¯ä¸€ç§é¢å‘å¯¹è±¡è®¡ç®—æœºç¼–ç¨‹è¯­è¨€çš„æ„é€ ï¼Œæ˜¯åˆ›å»ºå¯¹è±¡çš„è“å›¾ï¼Œæè¿°äº†æ‰€åˆ›å»ºçš„å¯¹è±¡å…±åŒçš„å±æ€§å’Œæ–¹æ³•ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Greeter</span> </span>&#123;</span><br><span class="line">  <span class="comment">// é™æ€å±æ€§</span></span><br><span class="line">  <span class="keyword">static</span> cname: string = <span class="string">"Greeter"</span>;</span><br><span class="line">  <span class="comment">// æˆå‘˜å±æ€§</span></span><br><span class="line">  greeting: string;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ„é€ å‡½æ•° - æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">  <span class="keyword">constructor</span>(message: string) &#123;</span><br><span class="line">    <span class="keyword">this</span>.greeting = message;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">static</span> getClassName() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Class name is Greeter"</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æˆå‘˜æ–¹æ³•</span></span><br><span class="line">  greet() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Hello, "</span> + <span class="keyword">this</span>.greeting;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> greeter = <span class="keyword">new</span> Greeter(<span class="string">"world"</span>);</span><br></pre></td></tr></table></figure>ç¼–è¯‘ç”Ÿæˆï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="keyword">var</span> Greeter = <span class="comment">/** @class */</span> (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// æ„é€ å‡½æ•° - æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">Greeter</span>(<span class="params">message</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.greeting = message;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line">    Greeter.getClassName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Class name is Greeter"</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// æˆå‘˜æ–¹æ³•</span></span><br><span class="line">    Greeter.prototype.greet = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello, "</span> + <span class="keyword">this</span>.greeting;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">// é™æ€å±æ€§</span></span><br><span class="line">    Greeter.cname = <span class="string">"Greeter"</span>;</span><br><span class="line">    <span class="keyword">return</span> Greeter;</span><br><span class="line">&#125;());</span><br><span class="line"><span class="keyword">var</span> greeter = <span class="keyword">new</span> Greeter(<span class="string">"world"</span>);</span><br></pre></td></tr></table></figure></p><h3 id="è®¿é—®å™¨-getter-setter"><a href="#è®¿é—®å™¨-getter-setter" class="headerlink" title="è®¿é—®å™¨(getter/setter)"></a>è®¿é—®å™¨(getter/setter)</h3><p>åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ getter å’Œ setter æ–¹æ³•æ¥å®ç°æ•°æ®çš„å°è£…å’Œæœ‰æ•ˆæ€§æ ¡éªŒï¼Œé˜²æ­¢å‡ºç°å¼‚å¸¸æ•°æ®ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> passcode = <span class="string">"Hello TypeScript"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">  private _fullName: string;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> fullName(): string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._fullName;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> fullName(newName: string) &#123;</span><br><span class="line">    <span class="keyword">if</span> (passcode &amp;&amp; passcode == <span class="string">"Hello TypeScript"</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>._fullName = newName;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"Error: Unauthorized update of employee!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> employee = <span class="keyword">new</span> Employee();</span><br><span class="line">employee.fullName = <span class="string">"cosyer"</span>;</span><br><span class="line"><span class="keyword">if</span> (employee.fullName) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(employee.fullName);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h3><p>ç»§æ‰¿ (Inheritance) æ˜¯ä¸€ç§è”ç»“ç±»ä¸ç±»çš„å±‚æ¬¡æ¨¡å‹ã€‚æŒ‡çš„æ˜¯ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºå­ç±»ã€å­æ¥å£ï¼‰ç»§æ‰¿å¦å¤–çš„ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºçˆ¶ç±»ã€çˆ¶æ¥å£ï¼‰çš„åŠŸèƒ½ï¼Œå¹¶å¯ä»¥å¢åŠ è‡ªå·±æ–°åŠŸèƒ½çš„èƒ½åŠ›ï¼Œç»§æ‰¿æ˜¯ç±»ä¸ç±»æˆ–è€…æ¥å£ä¸æ¥å£ä¹‹é—´æœ€å¸¸è§çš„å…³ç³»ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  name: string;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">constructor</span>(theName: string) &#123;</span><br><span class="line">    <span class="keyword">this</span>.name = theName;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  move(distanceInMeters: number = <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span> moved <span class="subst">$&#123;distanceInMeters&#125;</span>m.`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Snake</span> <span class="keyword">extends</span> <span class="title">Animal</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(name: string) &#123;</span><br><span class="line">    <span class="keyword">super</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  move(distanceInMeters = <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"Slithering..."</span>);</span><br><span class="line">    <span class="keyword">super</span>.move(distanceInMeters);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sam = <span class="keyword">new</span> Snake(<span class="string">"Sammy the Python"</span>);</span><br><span class="line">sam.move();</span><br></pre></td></tr></table></figure></p><h3 id="ç§æœ‰å­—æ®µ"><a href="#ç§æœ‰å­—æ®µ" class="headerlink" title="ç§æœ‰å­—æ®µ"></a>ç§æœ‰å­—æ®µ</h3><p>åœ¨ TypeScript 3.8 ç‰ˆæœ¬å°±å¼€å§‹æ”¯æŒECMAScript ç§æœ‰å­—æ®µ<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  #name: string;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(name: string) &#123;</span><br><span class="line">    this.#name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  greet() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Hello, my name is <span class="subst">$&#123;<span class="keyword">this</span>.#name&#125;</span>!`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> cosyer = <span class="keyword">new</span> Person(<span class="string">"cosyer"</span>);</span><br><span class="line"></span><br><span class="line">cosyer.#name;</span><br><span class="line"><span class="comment">// Property '#name' is not accessible outside class 'Person'</span></span><br><span class="line"><span class="comment">// because it has a private identifier.</span></span><br></pre></td></tr></table></figure></p><p>ä¸å¸¸è§„å±æ€§ï¼ˆç”šè‡³ä½¿ç”¨ private ä¿®é¥°ç¬¦å£°æ˜çš„å±æ€§ï¼‰ä¸åŒï¼Œç§æœ‰å­—æ®µè¦ç‰¢è®°ä»¥ä¸‹è§„åˆ™ï¼š</p><ul><li>ç§æœ‰å­—æ®µä»¥ # å­—ç¬¦å¼€å¤´ï¼Œæœ‰æ—¶æˆ‘ä»¬ç§°ä¹‹ä¸ºç§æœ‰åç§°ï¼›</li><li>æ¯ä¸ªç§æœ‰å­—æ®µåç§°éƒ½å”¯ä¸€åœ°é™å®šäºå…¶åŒ…å«çš„ç±»ï¼›</li><li>ä¸èƒ½åœ¨ç§æœ‰å­—æ®µä¸Šä½¿ç”¨ TypeScript å¯è®¿é—®æ€§ä¿®é¥°ç¬¦ï¼ˆå¦‚ public æˆ– privateï¼‰ï¼›</li><li>ç§æœ‰å­—æ®µä¸èƒ½åœ¨åŒ…å«çš„ç±»ä¹‹å¤–è®¿é—®ï¼Œç”šè‡³ä¸èƒ½è¢«æ£€æµ‹åˆ°ã€‚</li></ul><h2 id="ç¼–è¯‘ä¸Šä¸‹æ–‡"><a href="#ç¼–è¯‘ä¸Šä¸‹æ–‡" class="headerlink" title="ç¼–è¯‘ä¸Šä¸‹æ–‡"></a>ç¼–è¯‘ä¸Šä¸‹æ–‡</h2><h3 id="tsconfig-json-çš„ä½œç”¨"><a href="#tsconfig-json-çš„ä½œç”¨" class="headerlink" title="tsconfig.json çš„ä½œç”¨"></a>tsconfig.json çš„ä½œç”¨</h3><ul><li>ç”¨äºæ ‡è¯† TypeScript é¡¹ç›®çš„æ ¹è·¯å¾„ï¼›</li><li>ç”¨äºé…ç½® TypeScript ç¼–è¯‘å™¨ï¼›</li><li>ç”¨äºæŒ‡å®šç¼–è¯‘çš„æ–‡ä»¶ã€‚</li></ul><h3 id="tsconfig-json-é‡è¦å­—æ®µ"><a href="#tsconfig-json-é‡è¦å­—æ®µ" class="headerlink" title="tsconfig.json é‡è¦å­—æ®µ"></a>tsconfig.json é‡è¦å­—æ®µ</h3><ul><li>files - è®¾ç½®è¦ç¼–è¯‘çš„æ–‡ä»¶çš„åç§°ï¼›</li><li>include - è®¾ç½®éœ€è¦è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›</li><li>exclude - è®¾ç½®æ— éœ€è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›</li><li>compilerOptions - è®¾ç½®ä¸ç¼–è¯‘æµç¨‹ç›¸å…³çš„é€‰é¡¹ã€‚</li></ul><h3 id="compilerOptions-é€‰é¡¹"><a href="#compilerOptions-é€‰é¡¹" class="headerlink" title="compilerOptions é€‰é¡¹"></a>compilerOptions é€‰é¡¹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"compilerOptions"</span>: &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* åŸºæœ¬é€‰é¡¹ */</span></span><br><span class="line">    <span class="string">"target"</span>: <span class="string">"es5"</span>,                       <span class="comment">// æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬: 'ES3' (default), 'ES5', 'ES6'/'ES2015', 'ES2016', 'ES2017', or 'ESNEXT'</span></span><br><span class="line">    <span class="string">"module"</span>: <span class="string">"commonjs"</span>,                  <span class="comment">// æŒ‡å®šä½¿ç”¨æ¨¡å—: 'commonjs', 'amd', 'system', 'umd' or 'es2015'</span></span><br><span class="line">    <span class="string">"lib"</span>: [],                             <span class="comment">// æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶</span></span><br><span class="line">    <span class="string">"allowJs"</span>: <span class="literal">true</span>,                       <span class="comment">// å…è®¸ç¼–è¯‘ javascript æ–‡ä»¶</span></span><br><span class="line">    <span class="string">"checkJs"</span>: <span class="literal">true</span>,                       <span class="comment">// æŠ¥å‘Š javascript æ–‡ä»¶ä¸­çš„é”™è¯¯</span></span><br><span class="line">    <span class="string">"jsx"</span>: <span class="string">"preserve"</span>,                     <span class="comment">// æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: 'preserve', 'react-native', or 'react'</span></span><br><span class="line">    <span class="string">"declaration"</span>: <span class="literal">true</span>,                   <span class="comment">// ç”Ÿæˆç›¸åº”çš„ '.d.ts' æ–‡ä»¶</span></span><br><span class="line">    <span class="string">"sourceMap"</span>: <span class="literal">true</span>,                     <span class="comment">// ç”Ÿæˆç›¸åº”çš„ '.map' æ–‡ä»¶</span></span><br><span class="line">    <span class="string">"outFile"</span>: <span class="string">"./"</span>,                       <span class="comment">// å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶</span></span><br><span class="line">    <span class="string">"outDir"</span>: <span class="string">"./"</span>,                        <span class="comment">// æŒ‡å®šè¾“å‡ºç›®å½•</span></span><br><span class="line">    <span class="string">"rootDir"</span>: <span class="string">"./"</span>,                       <span class="comment">// ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„ --outDir.</span></span><br><span class="line">    <span class="string">"removeComments"</span>: <span class="literal">true</span>,                <span class="comment">// åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š</span></span><br><span class="line">    <span class="string">"noEmit"</span>: <span class="literal">true</span>,                        <span class="comment">// ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶</span></span><br><span class="line">    <span class="string">"importHelpers"</span>: <span class="literal">true</span>,                 <span class="comment">// ä» tslib å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°</span></span><br><span class="line">    <span class="string">"isolatedModules"</span>: <span class="literal">true</span>,               <span class="comment">// å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å— ï¼ˆä¸ 'ts.transpileModule' ç±»ä¼¼ï¼‰.</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹ */</span></span><br><span class="line">    <span class="string">"strict"</span>: <span class="literal">true</span>,                        <span class="comment">// å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹</span></span><br><span class="line">    <span class="string">"noImplicitAny"</span>: <span class="literal">true</span>,                 <span class="comment">// åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ anyç±»å‹æ—¶æŠ¥é”™</span></span><br><span class="line">    <span class="string">"strictNullChecks"</span>: <span class="literal">true</span>,              <span class="comment">// å¯ç”¨ä¸¥æ ¼çš„ null æ£€æŸ¥</span></span><br><span class="line">    <span class="string">"noImplicitThis"</span>: <span class="literal">true</span>,                <span class="comment">// å½“ this è¡¨è¾¾å¼å€¼ä¸º any ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯</span></span><br><span class="line">    <span class="string">"alwaysStrict"</span>: <span class="literal">true</span>,                  <span class="comment">// ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥ 'use strict'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* é¢å¤–çš„æ£€æŸ¥ */</span></span><br><span class="line">    <span class="string">"noUnusedLocals"</span>: <span class="literal">true</span>,                <span class="comment">// æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span></span><br><span class="line">    <span class="string">"noUnusedParameters"</span>: <span class="literal">true</span>,            <span class="comment">// æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span></span><br><span class="line">    <span class="string">"noImplicitReturns"</span>: <span class="literal">true</span>,             <span class="comment">// å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span></span><br><span class="line">    <span class="string">"noFallthroughCasesInSwitch"</span>: <span class="literal">true</span>,    <span class="comment">// æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* æ¨¡å—è§£æé€‰é¡¹ */</span></span><br><span class="line">    <span class="string">"moduleResolution"</span>: <span class="string">"node"</span>,            <span class="comment">// é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š 'node' (Node.js) or 'classic' (TypeScript pre-1.6)</span></span><br><span class="line">    <span class="string">"baseUrl"</span>: <span class="string">"./"</span>,                       <span class="comment">// ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•</span></span><br><span class="line">    <span class="string">"paths"</span>: &#123;&#125;,                           <span class="comment">// æ¨¡å—ååˆ°åŸºäº baseUrl çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨</span></span><br><span class="line">    <span class="string">"rootDirs"</span>: [],                        <span class="comment">// æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹</span></span><br><span class="line">    <span class="string">"typeRoots"</span>: [],                       <span class="comment">// åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨</span></span><br><span class="line">    <span class="string">"types"</span>: [],                           <span class="comment">// éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨</span></span><br><span class="line">    <span class="string">"allowSyntheticDefaultImports"</span>: <span class="literal">true</span>,  <span class="comment">// å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Source Map Options */</span></span><br><span class="line">    <span class="string">"sourceRoot"</span>: <span class="string">"./"</span>,                    <span class="comment">// æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ° TypeScript æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line">    <span class="string">"mapRoot"</span>: <span class="string">"./"</span>,                       <span class="comment">// æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®</span></span><br><span class="line">    <span class="string">"inlineSourceMap"</span>: <span class="literal">true</span>,               <span class="comment">// ç”Ÿæˆå•ä¸ª soucemaps æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°† sourcemaps ç”Ÿæˆä¸åŒçš„æ–‡ä»¶</span></span><br><span class="line">    <span class="string">"inlineSources"</span>: <span class="literal">true</span>,                 <span class="comment">// å°†ä»£ç ä¸ sourcemaps ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº† --inlineSourceMap æˆ– --sourceMap å±æ€§</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* å…¶ä»–é€‰é¡¹ */</span></span><br><span class="line">    <span class="string">"experimentalDecorators"</span>: <span class="literal">true</span>,        <span class="comment">// å¯ç”¨è£…é¥°å™¨</span></span><br><span class="line">    <span class="string">"emitDecoratorMetadata"</span>: <span class="literal">true</span>          <span class="comment">// ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä»“åº“ä»£ç "><a href="#ä»“åº“ä»£ç " class="headerlink" title="ä»“åº“ä»£ç "></a>ä»“åº“ä»£ç </h2><p><a href="https://github.com/cosyer/typescript-learn" target="_blank" rel="noopener">typescript-learn</a></p><h2 id="ç›¸å…³é—®é¢˜"><a href="#ç›¸å…³é—®é¢˜" class="headerlink" title="ç›¸å…³é—®é¢˜"></a>ç›¸å…³é—®é¢˜</h2><p><a href="https://mydearest.cn/2020/TypeScript%20%E4%B8%AD%EF%BC%8Cinterface%20%E5%92%8C%20type%20%E7%9A%84%E5%8C%BA%E5%88%AB.html">TypeScript ä¸­ï¼Œinterface å’Œ type çš„åŒºåˆ«</a></p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/%E8%B6%85%E8%AF%A6%E7%BB%86%E7%9A%84TypeScript%E6%95%99%E7%A8%8B.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>XSSå­¦ä¹ &amp;å®è·µ</title>
      <link>http://mydearest.cn/2020/XSS%E5%AD%A6%E4%B9%A0&amp;%E5%AE%9E%E8%B7%B5.html</link>
      <guid>http://mydearest.cn/2020/XSS%E5%AD%A6%E4%B9%A0&amp;%E5%AE%9E%E8%B7%B5.html</guid>
      <pubDate>Tue, 23 Jun 2020 17:13:10 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;code&gt;webå®‰å…¨&lt;/code&gt;ä¸€ç›´æ˜¯å¼€å‘ä¸­ä¸å¯å¿½è§†çš„ä¸€éƒ¨åˆ†ã€‚è€Œxssä½œä¸ºwebå¼€å‘ä¸­æœ€å¸¸è§çš„æ”»å‡»æ‰‹æ®µï¼Œé˜²èŒƒæ˜¯å¿…ç„¶çš„ã€‚åŸºäºwebæµè§ˆå™¨tricksï¼ŒJavaScriptçš„å‘å±•ï¼Œnpmç­‰å¼€æºé¡¹ç›®æ¼
æ´ï¼Œwebæ³¨å…¥ç­‰ä¼šè®©å¼€å‘è€…è¶Šæ¥è¶Šé˜²ä¸èƒœé˜²ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ’å…¥æ‰§è¡Œæ ‡ç­¾&quot;&gt;&lt;a href=&quot;#æ’å…¥æ‰§è¡Œæ ‡ç­¾&quot; class=&quot;headerlink&quot; title=&quot;æ’å…¥æ‰§è¡Œæ ‡ç­¾&quot;&gt;&lt;/a&gt;æ’å…¥æ‰§è¡Œæ ‡ç­¾&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;script&lt;/li&gt;
&lt;li&gt;img onerrorè§¦å‘&lt;/li&gt;
&lt;li&gt;iframe srcdocè§¦å‘&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;æ ‡ç­¾ç­‰æå‰é—­åˆ-æˆªæ–­&quot;&gt;&lt;a href=&quot;#æ ‡ç­¾ç­‰æå‰é—­åˆ-æˆªæ–­&quot; class=&quot;headerlink&quot; title=&quot;æ ‡ç­¾ç­‰æå‰é—­åˆ(æˆªæ–­)&quot;&gt;&lt;/a&gt;æ ‡ç­¾ç­‰æå‰é—­åˆ(æˆªæ–­)&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;å¦‚åœ¨å¯Œæ–‡æœ¬, input, textarea, å¯ç¼–è¾‘divç­‰ï¼Œ&lt;a href=&quot;https://xss.haozi.me/#/0x01&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;0x01&lt;/a&gt;ï¼Œ&lt;a href=&quot;https://xss.haozi.me/#/0x02&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;0x02&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;styleæ ‡ç­¾&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;style&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;&lt;span class=&quot;regexp&quot;&gt;/style &amp;gt;&amp;lt;script&amp;gt;alert(1)&amp;lt;/&lt;/span&gt;script&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;&lt;span class=&quot;regexp&quot;&gt;/style&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;æ³¨é‡Šæå‰é—­åˆ&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;--!&amp;gt;&lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;tag&quot;&gt;&amp;lt;&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;alert(1)&lt;span class=&quot;tag&quot;&gt;&amp;lt;/&lt;span class=&quot;name&quot;&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p><code>webå®‰å…¨</code>ä¸€ç›´æ˜¯å¼€å‘ä¸­ä¸å¯å¿½è§†çš„ä¸€éƒ¨åˆ†ã€‚è€Œxssä½œä¸ºwebå¼€å‘ä¸­æœ€å¸¸è§çš„æ”»å‡»æ‰‹æ®µï¼Œé˜²èŒƒæ˜¯å¿…ç„¶çš„ã€‚åŸºäºwebæµè§ˆå™¨tricksï¼ŒJavaScriptçš„å‘å±•ï¼Œnpmç­‰å¼€æºé¡¹ç›®æ¼æ´ï¼Œwebæ³¨å…¥ç­‰ä¼šè®©å¼€å‘è€…è¶Šæ¥è¶Šé˜²ä¸èƒœé˜²ã€‚</p><h2 id="æ’å…¥æ‰§è¡Œæ ‡ç­¾"><a href="#æ’å…¥æ‰§è¡Œæ ‡ç­¾" class="headerlink" title="æ’å…¥æ‰§è¡Œæ ‡ç­¾"></a>æ’å…¥æ‰§è¡Œæ ‡ç­¾</h2><ul><li>script</li><li>img onerrorè§¦å‘</li><li>iframe srcdocè§¦å‘</li></ul><h2 id="æ ‡ç­¾ç­‰æå‰é—­åˆ-æˆªæ–­"><a href="#æ ‡ç­¾ç­‰æå‰é—­åˆ-æˆªæ–­" class="headerlink" title="æ ‡ç­¾ç­‰æå‰é—­åˆ(æˆªæ–­)"></a>æ ‡ç­¾ç­‰æå‰é—­åˆ(æˆªæ–­)</h2><ul><li>å¦‚åœ¨å¯Œæ–‡æœ¬, input, textarea, å¯ç¼–è¾‘divç­‰ï¼Œ<a href="https://xss.haozi.me/#/0x01" target="_blank" rel="noopener">0x01</a>ï¼Œ<a href="https://xss.haozi.me/#/0x02" target="_blank" rel="noopener">0x02</a></li><li>styleæ ‡ç­¾<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">&lt;<span class="regexp">/style &gt;&lt;script&gt;alert(1)&lt;/</span>script&gt;</span><br><span class="line">&lt;<span class="regexp">/style&gt;</span></span><br></pre></td></tr></table></figure></li><li>æ³¨é‡Šæå‰é—­åˆ<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--!&gt;<span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span>alert(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li></ul><hr><a id="more"></a><ul><li>input typeé‡å†™inputçš„typeï¼Œåœ¨typeä¹‹å‰å¯ä»¥é‡å†™ä¸ºimageï¼Œé€šè¿‡onerroræ³¨å…¥</li></ul><h2 id="ES6-tagæ ‡ç­¾"><a href="#ES6-tagæ ‡ç­¾" class="headerlink" title="ES6 tagæ ‡ç­¾"></a>ES6 tagæ ‡ç­¾</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;alert<span class="string">`1`</span>&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><h2 id="è½¬ä¹‰å­—ç¬¦ä»å¯æ‰§è¡Œ"><a href="#è½¬ä¹‰å­—ç¬¦ä»å¯æ‰§è¡Œ" class="headerlink" title="è½¬ä¹‰å­—ç¬¦ä»å¯æ‰§è¡Œ"></a>è½¬ä¹‰å­—ç¬¦ä»å¯æ‰§è¡Œ</h2><ul><li>scriptæ ‡ç­¾å¯æ‰§è¡Œ base64çš„htmlä»£ç ç‰‡æ®µ</li><li>onerrorå¯æ‰§è¡Œ è½¬ä¹‰ä¸º html 10è¿›åˆ¶ï¼Œ 16è¿›åˆ¶çš„ä»£ç ç‰‡æ®µ</li><li>urlè½¬ä¹‰ä¸º html 10è¿›åˆ¶ï¼Œ 16è¿›åˆ¶ ä»å¯æ‰§è¡Œ, urlçš„å®šä¹‰å¯è·å–å…¶ä»–åŸŸä¸‹çš„èµ„æºæ–‡ä»¶<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scheme:[<span class="comment">//[user:password@]host[:port]][/]path[?query][#fragment]</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="svgä¸é—­åˆä¹Ÿæ‰§è¡Œ"><a href="#svgä¸é—­åˆä¹Ÿæ‰§è¡Œ" class="headerlink" title="svgä¸é—­åˆä¹Ÿæ‰§è¡Œ"></a>svgä¸é—­åˆä¹Ÿæ‰§è¡Œ</h2><h2 id="æ­£åˆ™æ›¿æ¢ä¸é è°±"><a href="#æ­£åˆ™æ›¿æ¢ä¸é è°±" class="headerlink" title="æ­£åˆ™æ›¿æ¢ä¸é è°±"></a>æ­£åˆ™æ›¿æ¢ä¸é è°±</h2><ul><li>æ­£åˆ™æ›¿æ¢</li><li>æ­£åˆ™å‘½ä¸­</li><li>è¿½åŠ æ‰§è¡Œï¼Œæ­£åˆ™æ›¿æ¢å¤±æ•ˆ</li></ul><h2 id="é˜²æŠ¤"><a href="#é˜²æŠ¤" class="headerlink" title="é˜²æŠ¤"></a>é˜²æŠ¤</h2><ul><li>é…ç½®å®‰å…¨å¤´</li><li>xssç›‘æ§</li><li>æœåŠ¡ç«¯ç™½åå•è¿‡æ»¤</li></ul>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/XSS%E5%AD%A6%E4%B9%A0&amp;%E5%AE%9E%E8%B7%B5.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>windowså®‰è£…mysql</title>
      <link>http://mydearest.cn/2020/windows%E5%AE%89%E8%A3%85mysql.html</link>
      <guid>http://mydearest.cn/2020/windows%E5%AE%89%E8%A3%85mysql.html</guid>
      <pubDate>Tue, 23 Jun 2020 09:05:10 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;å®‰è£…åŒ…ä¸‹è½½&quot;&gt;&lt;a href=&quot;#å®‰è£…åŒ…ä¸‹è½½&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…åŒ…ä¸‹è½½&quot;&gt;&lt;/a&gt;å®‰è£…åŒ…ä¸‹è½½&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ä¸‹è½½åœ°å€ï¼š&lt;a href=&quot;https://dev.mysql.com/downloads/mysql/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://dev.mysql.com/downloads/mysql/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Mysqlå›½å†…é•œåƒï¼š&lt;a href=&quot;http://mirrors.sohu.com/mysql/MySQL-8.0/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://mirrors.sohu.com/mysql/MySQL-8.0/&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹è½½å®Œæˆåï¼Œé€‰æ‹©ä¸€ä¸ªç£ç›˜å†…æ”¾ç½®å¹¶è§£å‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è®¾ç½®ç¯å¢ƒå˜é‡&quot;&gt;&lt;a href=&quot;#è®¾ç½®ç¯å¢ƒå˜é‡&quot; class=&quot;headerlink&quot; title=&quot;è®¾ç½®ç¯å¢ƒå˜é‡&quot;&gt;&lt;/a&gt;è®¾ç½®ç¯å¢ƒå˜é‡&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;å˜é‡åï¼šMYSQL_HOME&lt;/li&gt;
&lt;li&gt;å˜é‡å€¼ï¼šE:\mysql5.7.23&lt;/li&gt;
&lt;li&gt;pathé‡Œæ·»åŠ ï¼š%MYSQL_HOME%\bin&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;åˆå§‹åŒ–è®¾ç½®&quot;&gt;&lt;a href=&quot;#åˆå§‹åŒ–è®¾ç½®&quot; class=&quot;headerlink&quot; title=&quot;åˆå§‹åŒ–è®¾ç½®&quot;&gt;&lt;/a&gt;åˆå§‹åŒ–è®¾ç½®&lt;/h2&gt;&lt;h3 id=&quot;åˆ›å»ºdata-Uploadsæ–‡ä»¶å¤¹&quot;&gt;&lt;a href=&quot;#åˆ›å»ºdata-Uploadsæ–‡ä»¶å¤¹&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºdata Uploadsæ–‡ä»¶å¤¹&quot;&gt;&lt;/a&gt;åˆ›å»ºdata Uploadsæ–‡ä»¶å¤¹&lt;/h3&gt;&lt;h3 id=&quot;my-initæ–‡ä»¶&quot;&gt;&lt;a href=&quot;#my-initæ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;my.initæ–‡ä»¶&quot;&gt;&lt;/a&gt;my.initæ–‡ä»¶&lt;/h3&gt;&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[mysqld]&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;port=&lt;span class=&quot;number&quot;&gt;3306&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;character_set_server=utf8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;basedir=E:\mysql5&lt;span class=&quot;number&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.23&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;datadir=E:\mysql5&lt;span class=&quot;number&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.23&lt;/span&gt;\data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;server-id=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sql_mode=NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lower_case_table_names=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;innodb_file_per_table = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log_timestamps=SYSTEM&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log-error   = error.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;slow_query_log = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;slow_query_log_file = slow.log&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;long_query_time = &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log-bin = binlog&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;binlog_format = row&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;expire_logs_days = &lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;log_bin_trust_function_creators = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;secure-file-priv=E:\mysql5&lt;span class=&quot;number&quot;&gt;.7&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.23&lt;/span&gt;\Uploads&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[client]   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;-character-&lt;span class=&quot;keyword&quot;&gt;set&lt;/span&gt;=utf8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="å®‰è£…åŒ…ä¸‹è½½"><a href="#å®‰è£…åŒ…ä¸‹è½½" class="headerlink" title="å®‰è£…åŒ…ä¸‹è½½"></a>å®‰è£…åŒ…ä¸‹è½½</h2><ul><li><p>ä¸‹è½½åœ°å€ï¼š<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">https://dev.mysql.com/downloads/mysql/</a></p></li><li><p>Mysqlå›½å†…é•œåƒï¼š<a href="http://mirrors.sohu.com/mysql/MySQL-8.0/" target="_blank" rel="noopener">http://mirrors.sohu.com/mysql/MySQL-8.0/</a></p></li></ul><p>ä¸‹è½½å®Œæˆåï¼Œé€‰æ‹©ä¸€ä¸ªç£ç›˜å†…æ”¾ç½®å¹¶è§£å‹ã€‚</p><h2 id="è®¾ç½®ç¯å¢ƒå˜é‡"><a href="#è®¾ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="è®¾ç½®ç¯å¢ƒå˜é‡"></a>è®¾ç½®ç¯å¢ƒå˜é‡</h2><ol><li>å˜é‡åï¼šMYSQL_HOME</li><li>å˜é‡å€¼ï¼šE:\mysql5.7.23</li><li>pathé‡Œæ·»åŠ ï¼š%MYSQL_HOME%\bin</li></ol><h2 id="åˆå§‹åŒ–è®¾ç½®"><a href="#åˆå§‹åŒ–è®¾ç½®" class="headerlink" title="åˆå§‹åŒ–è®¾ç½®"></a>åˆå§‹åŒ–è®¾ç½®</h2><h3 id="åˆ›å»ºdata-Uploadsæ–‡ä»¶å¤¹"><a href="#åˆ›å»ºdata-Uploadsæ–‡ä»¶å¤¹" class="headerlink" title="åˆ›å»ºdata Uploadsæ–‡ä»¶å¤¹"></a>åˆ›å»ºdata Uploadsæ–‡ä»¶å¤¹</h3><h3 id="my-initæ–‡ä»¶"><a href="#my-initæ–‡ä»¶" class="headerlink" title="my.initæ–‡ä»¶"></a>my.initæ–‡ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">port=<span class="number">3306</span></span><br><span class="line">character_set_server=utf8</span><br><span class="line">basedir=E:\mysql5<span class="number">.7</span><span class="number">.23</span></span><br><span class="line">datadir=E:\mysql5<span class="number">.7</span><span class="number">.23</span>\data</span><br><span class="line">server-id=<span class="number">1</span></span><br><span class="line">sql_mode=NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION</span><br><span class="line">lower_case_table_names=<span class="number">1</span></span><br><span class="line">innodb_file_per_table = <span class="number">1</span></span><br><span class="line">log_timestamps=SYSTEM</span><br><span class="line"></span><br><span class="line">log-error   = error.log</span><br><span class="line">slow_query_log = <span class="number">1</span></span><br><span class="line">slow_query_log_file = slow.log</span><br><span class="line">long_query_time = <span class="number">5</span></span><br><span class="line">log-bin = binlog</span><br><span class="line">binlog_format = row</span><br><span class="line">expire_logs_days = <span class="number">15</span></span><br><span class="line">log_bin_trust_function_creators = <span class="number">1</span></span><br><span class="line">secure-file-priv=E:\mysql5<span class="number">.7</span><span class="number">.23</span>\Uploads</span><br><span class="line"></span><br><span class="line">[client]   </span><br><span class="line"><span class="keyword">default</span>-character-<span class="keyword">set</span>=utf8</span><br></pre></td></tr></table></figure><hr><a id="more"></a><h3 id="åˆå§‹åŒ–ç”Ÿæˆdataä¸‹æ–‡ä»¶-ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmd"><a href="#åˆå§‹åŒ–ç”Ÿæˆdataä¸‹æ–‡ä»¶-ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmd" class="headerlink" title="åˆå§‹åŒ–ç”Ÿæˆdataä¸‹æ–‡ä»¶(ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmd)"></a>åˆå§‹åŒ–ç”Ÿæˆdataä¸‹æ–‡ä»¶(ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmd)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --initialize-insecure</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…æœåŠ¡"><a href="#å®‰è£…æœåŠ¡" class="headerlink" title="å®‰è£…æœåŠ¡"></a>å®‰è£…æœåŠ¡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --install mysql8</span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨å’Œåœæ­¢"><a href="#å¯åŠ¨å’Œåœæ­¢" class="headerlink" title="å¯åŠ¨å’Œåœæ­¢"></a>å¯åŠ¨å’Œåœæ­¢</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net start mysql8 </span><br><span class="line">net stop mysql8</span><br></pre></td></tr></table></figure><h2 id="MySQLåˆå§‹åŒ–rootå¯†ç "><a href="#MySQLåˆå§‹åŒ–rootå¯†ç " class="headerlink" title="MySQLåˆå§‹åŒ–rootå¯†ç "></a>MySQLåˆå§‹åŒ–rootå¯†ç </h2><ul><li>mysqlé»˜è®¤rootç”¨æˆ·æ²¡æœ‰å¯†ç ï¼Œè¾“å…¥mysql â€“u root è¿›å…¥mysql</li></ul><ol><li><p>è¿›å…¥mysqlæ•°æ®åº“</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br></pre></td></tr></table></figure></li><li><p>åˆå§‹åŒ–rootå¯†ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt;update user <span class="keyword">set</span> password=PASSWORD('123456') where User='root';</span><br></pre></td></tr></table></figure></li></ol><p><code>8.0+ç‰ˆæœ¬</code><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER <span class="string">'root'</span>@<span class="string">'localhost'</span> IDENTIFIED WITH mysql_native_password BY <span class="string">'123456'</span>;</span><br></pre></td></tr></table></figure></p><h2 id="rootå¯†ç å¿˜è®°è§£å†³æ–¹æ³•ï¼ˆWindowsç¯å¢ƒï¼‰"><a href="#rootå¯†ç å¿˜è®°è§£å†³æ–¹æ³•ï¼ˆWindowsç¯å¢ƒï¼‰" class="headerlink" title="rootå¯†ç å¿˜è®°è§£å†³æ–¹æ³•ï¼ˆWindowsç¯å¢ƒï¼‰"></a>rootå¯†ç å¿˜è®°è§£å†³æ–¹æ³•ï¼ˆWindowsç¯å¢ƒï¼‰</h2><ol><li><p>ç¡®ä¿MySQLæœåŠ¡åœæ­¢</p></li><li><p>æ‰“å¼€ç¬¬ä¸€ä¸ªcmdçª—å£ï¼Œè¿›å…¥MySQLå®‰è£…ç›®å½•ä¸‹çš„binç›®å½•</p></li><li><p>è·³è¿‡æƒé™å®‰å…¨æ£€æŸ¥ï¼ŒMySQLæœåŠ¡è¿è¡Œèµ·æ¥åï¼Œä¸ç”¨è¾“å…¥å¯†ç å°±èƒ½è¿›å…¥æ•°æ®åº“</p></li></ol><p>ä¾‹å¦‚ï¼ŒD:\mysql-5.5.35-win32\bin&gt;mysqld â€“defaults-file=â€D:\mysql-5.5.35-win32\my.iniâ€ â€“console â€“skip-grant-tables</p><ol start="4"><li>æ‰“å¼€ç¬¬äºŒä¸ªcmdçª—å£ï¼Œè¿æ¥MySQL</li></ol><ul><li><p>è¾“å…¥å‘½ä»¤ï¼šmysql -uroot -p</p></li><li><p>å‡ºç° Enter password: ç›´æ¥å›è½¦</p></li></ul><ol start="5"><li><p>ä½¿ç”¨å‘½ä»¤åˆ‡æ¢åˆ°mysqlæ•°æ®åº“ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨å‘½ä»¤æ›´æ”¹rootå¯†ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">UPDATE user SET Password=PASSWORD(<span class="string">'123456'</span>) where USER=<span class="string">'root'</span>;</span><br></pre></td></tr></table></figure></li><li><p>åˆ·æ–°æƒé™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure></li><li><p>é€€å‡ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quit;</span><br></pre></td></tr></table></figure></li><li><p>å…³é—­ä¸Šé¢æ‰“å¼€çš„ä¸¤ä¸ªcmdçª—å£ï¼Œé‡æ–°å¯åŠ¨MySQLæœåŠ¡ã€‚</p></li></ol>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/windows%E5%AE%89%E8%A3%85mysql.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>ã€Mac ç»ˆç«¯é…ç½®ã€‘iTerm2 + oh-my-zsh</title>
      <link>http://mydearest.cn/2020/Mac%20iTerm2%20+%20oh-my-zsh.html</link>
      <guid>http://mydearest.cn/2020/Mac%20iTerm2%20+%20oh-my-zsh.html</guid>
      <pubDate>Sun, 21 Jun 2020 15:41:55 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;å®‰è£…iterm2&quot;&gt;&lt;a href=&quot;#å®‰è£…iterm2&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…iterm2&quot;&gt;&lt;/a&gt;å®‰è£…iterm2&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://iterm2.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;å®˜ç½‘ä¸‹è½½&lt;/a&gt;
ä¸‹è½½å®Œï¼Œæ‹–åˆ°åº”ç”¨ç¨‹åºé‡Œå³å¯&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;iterm2é…ç½®é…è‰²æ–¹æ¡ˆ&quot;&gt;&lt;a href=&quot;#iterm2é…ç½®é…è‰²æ–¹æ¡ˆ&quot; class=&quot;headerlink&quot; title=&quot;iterm2é…ç½®é…è‰²æ–¹æ¡ˆ&quot;&gt;&lt;/a&gt;iterm2é…ç½®é…è‰²æ–¹æ¡ˆ&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;ä¸‹è½½å¤åˆ¶æ–‡ä»¶å†…å®¹&lt;a href=&quot;https://github.com/mbadolato/iTerm2-Color-Schemes/blob/master/schemes/
Solarized%20Dark%20Higher%20Contrast.itermcolors&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ä¿å­˜ä¸ºæ–‡ä»¶SolarizedDarkHigherContrast.itermcolorsï¼ŒåŒå‡»å®‰è£…&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ‰“å¼€ iTerm2 ç»ˆç«¯ï¼Œä¾æ¬¡åœ¨èœå•æ é€‰æ‹©ï¼šiTerm2 â€“&amp;gt; Preferences â€“&amp;gt; Profiles â€“&amp;gt; Colors â€“&amp;gt; Colors Presets â€“&amp;gt; 
SolarizedDarkHigherContrast&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;æ¢å¤iterm2é»˜è®¤è®¾ç½®&quot;&gt;&lt;a href=&quot;#æ¢å¤iterm2é»˜è®¤è®¾ç½®&quot; class=&quot;headerlink&quot; title=&quot;æ¢å¤iterm2é»˜è®¤è®¾ç½®&quot;&gt;&lt;/a&gt;æ¢å¤iterm2é»˜è®¤è®¾ç½®&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;defaults delete com.googlecode.iterm2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;å‰ç½®æ ¡éªŒ&quot;&gt;&lt;a href=&quot;#å‰ç½®æ ¡éªŒ&quot; class=&quot;headerlink&quot; title=&quot;å‰ç½®æ ¡éªŒ&quot;&gt;&lt;/a&gt;å‰ç½®æ ¡éªŒ&lt;/h2&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 1ã€é»˜è®¤å·²å®‰è£… Homebrewã€iTerm2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# 2ã€æŸ¥çœ‹æ˜¯å¦å®‰è£…äº†zshï¼ŒæŸ¥çœ‹æ˜¯å¦è¿”å› /usr/bin/zsh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cat /etc/shells&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# è‹¥æœªå®‰è£…&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;brew install zsh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;# iTerm2 å¯åŠ¨é¡¹é…ç½®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chsh -s /bin/zsh      &lt;span class=&quot;comment&quot;&gt;# è®¾ç½®ä¸ºzsh&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;chsh -s /bin/bash     &lt;span class=&quot;comment&quot;&gt;# è®¾ç½®ä¸ºbashï¼ˆMacè‡ªå¸¦é»˜è®¤ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="å®‰è£…iterm2"><a href="#å®‰è£…iterm2" class="headerlink" title="å®‰è£…iterm2"></a>å®‰è£…iterm2</h2><ul><li><a href="https://iterm2.com/" target="_blank" rel="noopener">å®˜ç½‘ä¸‹è½½</a>ä¸‹è½½å®Œï¼Œæ‹–åˆ°åº”ç”¨ç¨‹åºé‡Œå³å¯</li></ul><h2 id="iterm2é…ç½®é…è‰²æ–¹æ¡ˆ"><a href="#iterm2é…ç½®é…è‰²æ–¹æ¡ˆ" class="headerlink" title="iterm2é…ç½®é…è‰²æ–¹æ¡ˆ"></a>iterm2é…ç½®é…è‰²æ–¹æ¡ˆ</h2><ul><li><p>ä¸‹è½½å¤åˆ¶æ–‡ä»¶å†…å®¹<a href="https://github.com/mbadolato/iTerm2-Color-Schemes/blob/master/schemes/Solarized%20Dark%20Higher%20Contrast.itermcolors"></a></p></li><li><p>ä¿å­˜ä¸ºæ–‡ä»¶SolarizedDarkHigherContrast.itermcolorsï¼ŒåŒå‡»å®‰è£…</p></li><li><p>æ‰“å¼€ iTerm2 ç»ˆç«¯ï¼Œä¾æ¬¡åœ¨èœå•æ é€‰æ‹©ï¼šiTerm2 â€“&gt; Preferences â€“&gt; Profiles â€“&gt; Colors â€“&gt; Colors Presets â€“&gt; SolarizedDarkHigherContrast</p></li></ul><h2 id="æ¢å¤iterm2é»˜è®¤è®¾ç½®"><a href="#æ¢å¤iterm2é»˜è®¤è®¾ç½®" class="headerlink" title="æ¢å¤iterm2é»˜è®¤è®¾ç½®"></a>æ¢å¤iterm2é»˜è®¤è®¾ç½®</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults delete com.googlecode.iterm2</span><br></pre></td></tr></table></figure><h2 id="å‰ç½®æ ¡éªŒ"><a href="#å‰ç½®æ ¡éªŒ" class="headerlink" title="å‰ç½®æ ¡éªŒ"></a>å‰ç½®æ ¡éªŒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ã€é»˜è®¤å·²å®‰è£… Homebrewã€iTerm2</span></span><br><span class="line"><span class="comment"># 2ã€æŸ¥çœ‹æ˜¯å¦å®‰è£…äº†zshï¼ŒæŸ¥çœ‹æ˜¯å¦è¿”å› /usr/bin/zsh</span></span><br><span class="line">cat /etc/shells</span><br><span class="line"><span class="comment"># è‹¥æœªå®‰è£…</span></span><br><span class="line">brew install zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># iTerm2 å¯åŠ¨é¡¹é…ç½®</span></span><br><span class="line">chsh -s /bin/zsh      <span class="comment"># è®¾ç½®ä¸ºzsh</span></span><br><span class="line">chsh -s /bin/bash     <span class="comment"># è®¾ç½®ä¸ºbashï¼ˆMacè‡ªå¸¦é»˜è®¤ï¼‰</span></span><br></pre></td></tr></table></figure><hr><a id="more"></a><h2 id="å®‰è£…-oh-my-zsh"><a href="#å®‰è£…-oh-my-zsh" class="headerlink" title="å®‰è£… oh-my-zsh"></a>å®‰è£… oh-my-zsh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ–¹å¼ä¸€ï¼šwegtå®‰è£…</span></span><br><span class="line">wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼äºŒï¼šcurl å®‰è£…</span></span><br><span class="line">sh -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨å®‰è£…</span></span><br><span class="line">git <span class="built_in">clone</span> git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh</span><br><span class="line">cp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸è½½</span></span><br><span class="line">uninstall_oh_my_zsh zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°</span></span><br><span class="line">upgrade_oh_my_zsh</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®ä¸»é¢˜ é»˜è®¤robbyrussell éšæœºä¸»é¢˜random</span></span><br><span class="line">vim ~/.zshrc</span><br><span class="line">ZSH_THEME=<span class="string">"agnoster"</span></span><br><span class="line"><span class="built_in">source</span> ~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸»é¢˜è®¾ç½®å®Œæˆåï¼Œç»ˆç«¯ä¸­å´å‡ºç°äº†ä¹±ç çš„å­—ç¬¦ è®¾ç½®powerlineå­—ä½“</span></span><br><span class="line"><span class="comment">## å°† Powerline å­—ä½“æ–‡ä»¶ä¸‹è½½åˆ°ã€Œä¸‹è½½ã€æ–‡ä»¶å¤¹ä¸­</span></span><br><span class="line"><span class="built_in">cd</span> ~/Downloads &amp;&amp; git <span class="built_in">clone</span> https://github.com/powerline/fonts.git</span><br><span class="line"></span><br><span class="line"><span class="comment">## å°† Powerline å­—ä½“æ–‡ä»¶ä¸‹è½½åˆ°ã€Œä¸‹è½½ã€æ–‡ä»¶å¤¹ä¸­</span></span><br><span class="line"><span class="built_in">cd</span> fonts &amp;&amp; ./install.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">## åˆ é™¤ä¸‹è½½çš„å­—ä½“æ–‡ä»¶</span></span><br><span class="line"><span class="built_in">cd</span> &amp;&amp; rm -rf ~/Downloads/fonts</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸»é¢˜</span></span><br><span class="line">ls ~/.oh-my-zsh/themes</span><br><span class="line"></span><br><span class="line"><span class="comment"># zshé…ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line">~/.zshrc</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¯å¢ƒé…ç½®é—®é¢˜</span></span><br><span class="line">ç”¨zsh ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ä¸º .zshrc</span><br><span class="line"></span><br><span class="line">ç”¨bash ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ä¸º .bash_profile</span><br></pre></td></tr></table></figure><h2 id="å¸è½½oh-my-zsh"><a href="#å¸è½½oh-my-zsh" class="headerlink" title="å¸è½½oh-my-zsh"></a>å¸è½½oh-my-zsh</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è¿›å…¥åˆ°.oh-my-zsh/toolsç›®å½•ï¼Œæ‰§è¡Œshellå‘½ä»¤ ./uninstall.sh</span><br><span class="line">ä¼šæç¤ºä¸è®©æ‰§è¡Œshellå‘½ä»¤</span><br><span class="line"></span><br><span class="line">è§£å†³åŠæ³•</span><br><span class="line">è¾“å…¥ chmod +x uninstall.sh</span><br><span class="line">ç„¶åå†æ‰§è¡Œ ./uninstall.sh ï¼Œå‘ç°oh-my-zshè¢«å¸è½½</span><br><span class="line">æœ€ååˆ é™¤.zshrcæ–‡ä»¶</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-Powerline"><a href="#å®‰è£…-Powerline" class="headerlink" title="å®‰è£… Powerline"></a>å®‰è£… Powerline</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ã€æ£€æµ‹æ˜¯å¦å·²ç»å®‰è£…ï¼Œè‹¥æœ‰ç‰ˆæœ¬ä¿¡æ¯åˆ™å·²å®‰è£…</span></span><br><span class="line">pip show powerline-status</span><br><span class="line"></span><br><span class="line"><span class="comment"># 2ã€å°† powerline-status å®‰è£…åœ¨/usr/æ ¹ç›®å½•ä¸­</span></span><br><span class="line">pip install --user powerline-status</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸Šä¸€æ­¥è‹¥æ˜¾ç¤ºæ²¡æœ‰ pip,å…ˆå®‰è£…pip</span></span><br><span class="line">sudo easy_install pip</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¸è½½</span></span><br><span class="line">pip uninstall powerline-status</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®°å½•ä¸‹locationçš„å®‰è£…è·¯å¾„ ç„¶ååœ¨.bash_profileæ–‡ä»¶åŠ ä¸Šå¯åŠ¨è„šæœ¬</span></span><br><span class="line">. /Powerlineå®‰è£…è·¯å¾„/powerline/bindings/bash/powerline.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># é‡è½½é…ç½®</span></span><br><span class="line"><span class="built_in">source</span> .bash_profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠ¥é”™çš„è¯`powerline/bindings/bash/../../../scripts/powerline-config:: No such file or directory`</span></span><br><span class="line"><span class="comment"># åŸå› æ²¡æœ‰å°†powerlineçš„ç›¸å…³å‘½ä»¤æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥ä½¿ç”¨è½¯é“¾æ¥è§£å†³</span></span><br><span class="line">ln -s /Users/chenyu/Library/Python/2.7/bin/powerline /usr/<span class="built_in">local</span>/bin</span><br><span class="line">ln -s /Users/chenyu/Library/Python/2.7/bin/powerline-config /usr/<span class="built_in">local</span>/bin</span><br><span class="line">ln -s /Users/chenyu/Library/Python/2.7/bin/powerline-daemon /usr/<span class="built_in">local</span>/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŠ¥é”™ write() failed: Bad file descriptor</span></span><br><span class="line">powerline-daemon</span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®å­—ä½“"><a href="#è®¾ç½®å­—ä½“" class="headerlink" title="è®¾ç½®å­—ä½“"></a>è®¾ç½®å­—ä½“</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1ã€æ–°å»ºæ–‡ä»¶å¤¹(å¦‚~/Desktop/OpenSource)ï¼Œæ–‡ä»¶å¤¹ä¸‹</span></span><br><span class="line"><span class="built_in">cd</span> ~/Desktop/OpenSource</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/powerline/fonts.git --depth=1</span><br><span class="line"><span class="comment"># 2ã€è¿›å…¥è„šæœ¬ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> fonts</span><br><span class="line"><span class="comment"># 3ã€æ‰§è¡Œè„šæœ¬</span></span><br><span class="line">./install.sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿›å…¥ iTerm2 -&gt; Preferences -&gt; Profiles -&gt; Text -&gt; Font -&gt; Change Font</span></span><br><span class="line"><span class="comment"># é€‰æ‹©Meslo LG S for Powerfine, å¸¸è§„ï¼Œ 12</span></span><br></pre></td></tr></table></figure><h2 id="è®¾ç½®é…è‰²æ–¹æ¡ˆ"><a href="#è®¾ç½®é…è‰²æ–¹æ¡ˆ" class="headerlink" title="è®¾ç½®é…è‰²æ–¹æ¡ˆ"></a>è®¾ç½®é…è‰²æ–¹æ¡ˆ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç›´æ¥ä¸‹è½½tar.zipåŒ…(åŒ…å«å…¨éƒ¨é…è‰²)</span></span><br><span class="line"><span class="comment"># è¿›å…¥ iTerm2 -&gt; Preferences -&gt; Profiles-&gt;Color </span></span><br><span class="line"><span class="comment"># é€‰æ‹© Color Presets-&gt;import é€‰æ‹©è§£å‹å¥½çš„ç›®å½•ä¸‹schemesç›®å½•ä¸­ç›¸åº”é…è‰²æ–¹æ¡ˆå¯¼å…¥</span></span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-oh-my-zsh-ä¸»é¢˜"><a href="#å®‰è£…-oh-my-zsh-ä¸»é¢˜" class="headerlink" title="å®‰è£… oh-my-zsh ä¸»é¢˜"></a>å®‰è£… oh-my-zsh ä¸»é¢˜</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä¸‹è½½å®‰è£… agnoster ä¸»é¢˜ï¼Œå°†ä¸»é¢˜æ‹·è´åˆ°oh my zshçš„zshä¸­</span></span><br><span class="line"><span class="built_in">cd</span> ~/Desktop/OpenSource</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/fcamblor/oh-my-zsh-agnoster-fcamblor.git</span><br><span class="line"><span class="built_in">cd</span> oh-my-zsh-agnoster-fcamblor/</span><br><span class="line">./install</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°† ZSH_THEME å€¼æ”¹ä¸º agnosterï¼Œecs é€€å‡ºï¼Œ:wq ä¿å­˜</span></span><br><span class="line">vi ~/.zshrc</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…æ’ä»¶"><a href="#å®‰è£…æ’ä»¶" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ======================== é«˜äº®æ’ä»¶ ========================</span></span><br><span class="line"><span class="comment"># åœ¨ ~ ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ zsh-plugins(~/.zshrc é»˜è®¤ç›®å½•)</span></span><br><span class="line"><span class="built_in">cd</span> zsh-plugins</span><br><span class="line">git <span class="built_in">clone</span> git://github.com/zsh-users/zsh-syntax-highlighting.git</span><br><span class="line">vim .zshrc</span><br><span class="line"><span class="comment"># æ–‡æœ«æ·»åŠ ä»¥ä¸‹é…ç½®</span></span><br><span class="line"><span class="built_in">source</span> ~/zsh-pludins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh</span><br><span class="line"><span class="built_in">cd</span> ~/.oh-my-zsh/custom/plugins</span><br><span class="line">vim .zshrc</span><br><span class="line"><span class="comment"># æ–‡æœ«æ·»åŠ ä»¥ä¸‹é…ç½®</span></span><br><span class="line">plugins=(zsh-syntax-highlighting)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ======================== è‡ªåŠ¨è¡¥é½æ’ä»¶ ========================</span></span><br><span class="line"><span class="built_in">cd</span> zsh-plugins</span><br><span class="line">http://mimosa-pudica.net/src/incr-0.2.zsh</span><br><span class="line"><span class="comment"># å°†æ–‡ä»¶æ”¾åˆ° ~/zsh-pludins/inrcä¸‹</span></span><br><span class="line">vim .zshrc</span><br><span class="line"><span class="built_in">source</span> ~/.oh-my-zsh/plugins/incr/incr*.zsh</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/Mac%20iTerm2%20+%20oh-my-zsh.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>å…³äºnodeçš„é‚£äº›äº‹(åŸºç¡€ç¯‡)</title>
      <link>http://mydearest.cn/2020/%E5%85%B3%E4%BA%8Enode%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B(%E5%9F%BA%E7%A1%80%E7%AF%87).html</link>
      <guid>http://mydearest.cn/2020/%E5%85%B3%E4%BA%8Enode%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B(%E5%9F%BA%E7%A1%80%E7%AF%87).html</guid>
      <pubDate>Sun, 21 Jun 2020 15:41:55 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;ğŸ‘¨æé—®ï¼šæœ€è¿‘Denoå¾ˆç«ï¼Œä¼šä¸ä¼šæ›¿ä»£nodeçš„æ›¿ä»£å“ï¼Œå­¦nodeæ˜¯ä¸æ˜¯æ²¡æœ‰å‰é€”ï¼Ÿ&quot;&gt;&lt;a href=&quot;#ğŸ‘¨æé—®ï¼šæœ€è¿‘Denoå¾ˆç«ï¼Œä¼šä¸ä¼šæ›¿ä»£nodeçš„æ›¿ä»£å“ï¼Œå­¦nodeæ˜¯ä¸æ˜¯æ²¡æœ‰å‰é€”ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ğŸ‘¨æé—®ï¼šæœ€è¿‘Denoå¾ˆç«ï¼Œä¼šä¸ä¼šæ›¿ä»£nodeçš„æ›¿ä»£å“ï¼Œå­¦nodeæ˜¯ä¸æ˜¯æ²¡æœ‰å‰é€”ï¼Ÿ&quot;&gt;&lt;/a&gt;ğŸ‘¨æé—®ï¼šæœ€è¿‘Denoå¾ˆç«ï¼Œä¼šä¸ä¼šæ›¿ä»£nodeçš„æ›¿ä»£å“ï¼Œå­¦nodeæ˜¯ä¸æ˜¯æ²¡æœ‰å‰é€”ï¼Ÿ&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;è«æ…Œï¼ŒNodeä¾æ—§æ˜¯ç¤¾åŒºçƒ­æ§çš„æœåŠ¡å™¨ç«¯ JavaScript è¿è¡Œç¯å¢ƒï¼ŒDenoçš„å‡ºç°å…¶å®æœ¬è´¨ä¸Šæ˜¯å®Œå–„ç°é˜¶æ®µçš„Nodeï¼ˆæ–°è½®å­ï¼‰ï¼ŒåŒ…æ‹¬åŸç”Ÿæ”¯æŒTSã€å®‰å…¨æ€§ã€æ”¯æŒES 
Moduleæµè§ˆå™¨æ¨¡å—ã€ç­‰ç‰¹å¾ã€‚ä¸‡å˜ä¸ç¦»å…¶å®—ï¼Œè™½ç„¶æœ‰äº†Denoï¼Œå°†æ¥å¯èƒ½å°±ä¸éœ€è¦ Node.jsï¼Œä½†æ˜¯æ–°äº‹ç‰©æ€»æ˜¯éœ€è¦ä¸æ–­æ¨æ¼”å’Œè€ƒéªŒåï¼Œæ‰€ä»¥è¿™ä¸€ç‚¹è€Œè¨€ï¼ŒNodeçŸ­æ—¶é—´å†…å¾ˆ
éš¾è¢«æ›¿æ¢ï¼Œæ¯•ç«ŸèƒŒåä¾é™„ç€å¼ºå¤§ç¤¾åŒºçš„æ”¯æ’‘ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;node-å¦‚ä½•è·å–å‘½ä»¤è¡Œä¼ æ¥çš„å‚æ•°ï¼Ÿ&quot;&gt;&lt;a href=&quot;#node-å¦‚ä½•è·å–å‘½ä»¤è¡Œä¼ æ¥çš„å‚æ•°ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;node å¦‚ä½•è·å–å‘½ä»¤è¡Œä¼ æ¥çš„å‚æ•°ï¼Ÿ&quot;&gt;&lt;/a&gt;node å¦‚ä½•è·å–å‘½ä»¤è¡Œä¼ æ¥çš„å‚æ•°ï¼Ÿ&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;process.argvã€‚processæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå®ƒæä¾›å½“å‰ Node.js è¿›ç¨‹çš„æœ‰å…³ä¿¡æ¯ï¼Œè€Œprocess.argv å±æ€§åˆ™è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ä¿¡æ¯åŒ…æ‹¬å¯åŠ¨Node.jsè¿›ç¨‹æ—¶çš„å‘½ä»¤è¡Œå‚æ•°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;process.argv[0] : è¿”å›å¯åŠ¨Node.jsè¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„ç»å¯¹è·¯å¾„&lt;/li&gt;
&lt;li&gt;process.argv[1] : ä¸ºå½“å‰æ‰§è¡Œçš„JavaScriptæ–‡ä»¶è·¯å¾„&lt;/li&gt;
&lt;li&gt;process.argv.splice(2) : ç§»é™¤å‰ä¸¤è€…åï¼Œå‰©ä½™çš„å…ƒç´ ä¸ºå…¶ä»–å‘½ä»¤è¡Œå‚æ•°(ä¹Ÿå°±æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰éƒ¨åˆ†)&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;script&quot;&lt;/span&gt;: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&quot;serve&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&quot;node test.js arg1 arg2 arg3&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// test.js&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt; = process.argv.splice(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;) &lt;span class=&quot;comment&quot;&gt;// [arg1, arg2, arg3]&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// ç»“åˆcommander&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;commander.parse(process.argv)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="ğŸ‘¨æé—®ï¼šæœ€è¿‘Denoå¾ˆç«ï¼Œä¼šä¸ä¼šæ›¿ä»£nodeçš„æ›¿ä»£å“ï¼Œå­¦nodeæ˜¯ä¸æ˜¯æ²¡æœ‰å‰é€”ï¼Ÿ"><a href="#ğŸ‘¨æé—®ï¼šæœ€è¿‘Denoå¾ˆç«ï¼Œä¼šä¸ä¼šæ›¿ä»£nodeçš„æ›¿ä»£å“ï¼Œå­¦nodeæ˜¯ä¸æ˜¯æ²¡æœ‰å‰é€”ï¼Ÿ" class="headerlink" title="ğŸ‘¨æé—®ï¼šæœ€è¿‘Denoå¾ˆç«ï¼Œä¼šä¸ä¼šæ›¿ä»£nodeçš„æ›¿ä»£å“ï¼Œå­¦nodeæ˜¯ä¸æ˜¯æ²¡æœ‰å‰é€”ï¼Ÿ"></a>ğŸ‘¨æé—®ï¼šæœ€è¿‘Denoå¾ˆç«ï¼Œä¼šä¸ä¼šæ›¿ä»£nodeçš„æ›¿ä»£å“ï¼Œå­¦nodeæ˜¯ä¸æ˜¯æ²¡æœ‰å‰é€”ï¼Ÿ</h2><blockquote><p>è«æ…Œï¼ŒNodeä¾æ—§æ˜¯ç¤¾åŒºçƒ­æ§çš„æœåŠ¡å™¨ç«¯ JavaScript è¿è¡Œç¯å¢ƒï¼ŒDenoçš„å‡ºç°å…¶å®æœ¬è´¨ä¸Šæ˜¯å®Œå–„ç°é˜¶æ®µçš„Nodeï¼ˆæ–°è½®å­ï¼‰ï¼ŒåŒ…æ‹¬åŸç”Ÿæ”¯æŒTSã€å®‰å…¨æ€§ã€æ”¯æŒES Moduleæµè§ˆå™¨æ¨¡å—ã€ç­‰ç‰¹å¾ã€‚ä¸‡å˜ä¸ç¦»å…¶å®—ï¼Œè™½ç„¶æœ‰äº†Denoï¼Œå°†æ¥å¯èƒ½å°±ä¸éœ€è¦ Node.jsï¼Œä½†æ˜¯æ–°äº‹ç‰©æ€»æ˜¯éœ€è¦ä¸æ–­æ¨æ¼”å’Œè€ƒéªŒåï¼Œæ‰€ä»¥è¿™ä¸€ç‚¹è€Œè¨€ï¼ŒNodeçŸ­æ—¶é—´å†…å¾ˆéš¾è¢«æ›¿æ¢ï¼Œæ¯•ç«ŸèƒŒåä¾é™„ç€å¼ºå¤§ç¤¾åŒºçš„æ”¯æ’‘ã€‚</p></blockquote><h2 id="node-å¦‚ä½•è·å–å‘½ä»¤è¡Œä¼ æ¥çš„å‚æ•°ï¼Ÿ"><a href="#node-å¦‚ä½•è·å–å‘½ä»¤è¡Œä¼ æ¥çš„å‚æ•°ï¼Ÿ" class="headerlink" title="node å¦‚ä½•è·å–å‘½ä»¤è¡Œä¼ æ¥çš„å‚æ•°ï¼Ÿ"></a>node å¦‚ä½•è·å–å‘½ä»¤è¡Œä¼ æ¥çš„å‚æ•°ï¼Ÿ</h2><blockquote><p>process.argvã€‚processæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå®ƒæä¾›å½“å‰ Node.js è¿›ç¨‹çš„æœ‰å…³ä¿¡æ¯ï¼Œè€Œprocess.argv å±æ€§åˆ™è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ä¿¡æ¯åŒ…æ‹¬å¯åŠ¨Node.jsè¿›ç¨‹æ—¶çš„å‘½ä»¤è¡Œå‚æ•°ã€‚</p></blockquote><ul><li>process.argv[0] : è¿”å›å¯åŠ¨Node.jsè¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„ç»å¯¹è·¯å¾„</li><li>process.argv[1] : ä¸ºå½“å‰æ‰§è¡Œçš„JavaScriptæ–‡ä»¶è·¯å¾„</li><li>process.argv.splice(2) : ç§»é™¤å‰ä¸¤è€…åï¼Œå‰©ä½™çš„å…ƒç´ ä¸ºå…¶ä»–å‘½ä»¤è¡Œå‚æ•°(ä¹Ÿå°±æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰éƒ¨åˆ†)</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"script"</span>: &#123;</span><br><span class="line">    <span class="string">"serve"</span>: <span class="string">"node test.js arg1 arg2 arg3"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// test.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">arguments</span> = process.argv.splice(<span class="number">2</span>) <span class="comment">// [arg1, arg2, arg3]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»“åˆcommander</span></span><br><span class="line">commander.parse(process.argv)</span><br></pre></td></tr></table></figure><hr><a id="more"></a><h2 id="ä¸ºä»€ä¹ˆè¦ç”¨nodeï¼ˆåŸºäºv8å¼•æ“è¿è¡Œåœ¨æœåŠ¡ç«¯çš„JSè¿è¡Œç¯å¢ƒï¼‰"><a href="#ä¸ºä»€ä¹ˆè¦ç”¨nodeï¼ˆåŸºäºv8å¼•æ“è¿è¡Œåœ¨æœåŠ¡ç«¯çš„JSè¿è¡Œç¯å¢ƒï¼‰" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ç”¨nodeï¼ˆåŸºäºv8å¼•æ“è¿è¡Œåœ¨æœåŠ¡ç«¯çš„JSè¿è¡Œç¯å¢ƒï¼‰"></a>ä¸ºä»€ä¹ˆè¦ç”¨nodeï¼ˆåŸºäºv8å¼•æ“è¿è¡Œåœ¨æœåŠ¡ç«¯çš„JSè¿è¡Œç¯å¢ƒï¼‰</h2><blockquote><p>æ€»ç»“èµ·æ¥nodeæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹:ç®€å•å¼ºå¤§ï¼Œè½»é‡å¯æ‰©å±•ï¼ç®€å•ä½“ç°åœ¨nodeä½¿ç”¨çš„æ˜¯javascriptï¼Œjsonæ¥è¿›è¡Œç¼–ç ï¼Œäººäººéƒ½ä¼šï¼›å¼ºå¤§ä½“ç°åœ¨éé˜»å¡IO,å¯ä»¥é€‚åº”åˆ†å—ä¼ è¾“æ•°æ®ï¼Œè¾ƒæ…¢çš„ç½‘ç»œç¯å¢ƒï¼Œå°¤å…¶æ“…é•¿é«˜å¹¶å‘è®¿é—®ï¼›è½»é‡ä½“ç°åœ¨nodeæœ¬èº«æ—¢æ˜¯ä»£ç ï¼Œåˆæ˜¯æœåŠ¡å™¨ï¼Œå‰åç«¯ä½¿ç”¨ç»Ÿä¸€è¯­è¨€;å¯æ‰©å±•ä½“ç°åœ¨å¯ä»¥è½»æ¾åº”å¯¹å¤šå®ä¾‹ï¼Œå¤šæœåŠ¡å™¨æ¶æ„ï¼ŒåŒæ—¶æœ‰æµ·é‡çš„ç¬¬ä¸‰æ–¹åº”ç”¨ç»„ä»¶ã€‚</p></blockquote><ul><li>å…¨å±€å¯¹è±¡processã€consoleã€Buffer</li></ul><p><strong>åŸºäºäº‹ä»¶é©±åŠ¨å’Œæ— é˜»å¡é€‚åˆé«˜å¹¶å‘çš„åœºæ™¯ï¼Œç»Ÿä¸€è¯­è¨€</strong></p><h2 id="æ€ä¹ˆçœ‹-nodejs-å¯æ”¯æŒé«˜å¹¶å‘"><a href="#æ€ä¹ˆçœ‹-nodejs-å¯æ”¯æŒé«˜å¹¶å‘" class="headerlink" title="æ€ä¹ˆçœ‹ nodejs å¯æ”¯æŒé«˜å¹¶å‘"></a>æ€ä¹ˆçœ‹ nodejs å¯æ”¯æŒé«˜å¹¶å‘</h2><p>nodejs å…¶å®å¹¶ä¸æ˜¯çœŸæ­£çš„å•çº¿ç¨‹æ¶æ„ï¼Œå› ä¸º nodejs è¿˜æœ‰I/Oçº¿ç¨‹å­˜åœ¨ï¼ˆç½‘ç»œI/Oã€ç£ç›˜I/Oï¼‰ï¼Œè¿™äº›I/Oçº¿ç¨‹æ˜¯ç”±æ›´åº•å±‚çš„ libuv å¤„ç†ï¼Œè¿™éƒ¨åˆ†çº¿ç¨‹å¯¹äºå¼€å‘è€…æ¥è¯´æ˜¯é€æ˜çš„ã€‚ JavaScript ä»£ç æ°¸è¿œè¿è¡Œåœ¨V8ä¸Šï¼Œæ˜¯å•çº¿ç¨‹çš„ã€‚å¼‚æ­¥é€šè¿‡ä¸€æ¬¡æ¬¡å¾ªç¯äº‹ä»¶é˜Ÿåˆ—æ¥å®ç°çš„ã€‚</p><ul><li>å•çº¿ç¨‹æ¶æ„çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿ï¼š<ul><li>ä¼˜åŠ¿ï¼š</li></ul></li></ul><ol><li>å•çº¿ç¨‹å°±ä¸€ä¸ªçº¿ç¨‹åœ¨ç©ï¼Œçœå»äº†çº¿ç¨‹é—´åˆ‡æ¢çš„å¼€é”€</li><li><p>è¿˜æœ‰çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ï¼Œçº¿ç¨‹å†²çªçš„é—®é¢˜çš„ä¹Ÿä¸éœ€è¦æ‹…å¿ƒ</p><ul><li>åŠ£åŠ¿ï¼š</li></ul></li><li><p>åŠ£åŠ¿ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œç°åœ¨èµ·æ­¥éƒ½æ˜¯ 4 æ ¸ï¼Œå•çº¿ç¨‹æ²¡æ³•å……åˆ†åˆ©ç”¨ cpu çš„èµ„æº</p></li><li>å•çº¿ç¨‹ï¼Œä¸€æ—¦å´©æºƒï¼Œåº”ç”¨å°±æŒ‚æ‰äº†ï¼Œå¤§å®¶è°ƒè¯•è„šæœ¬ä¹ŸçŸ¥é“ä¸€æ—¦æ‰§è¡Œè¿‡ç¨‹æŠ¥é”™äº†ï¼Œæœ¬æ¬¡è°ƒè¯•å°±ç›´æ¥ç»“æŸäº†</li><li>å› ä¸ºåªèƒ½åˆ©ç”¨ä¸€ä¸ª cpu ï¼Œä¸€æ—¦ cpu è¢«æŸä¸ªè®¡ç®—ä¸€ç›´å ç”¨ï¼Œ cpu å¾—ä¸åˆ°é‡Šæ”¾ï¼Œåç»­çš„è¯·æ±‚å°±ä¼šä¸€ç›´è¢«æŒ‚èµ·ï¼Œç›´æ¥æ— å“åº”äº†</li></ol><h2 id="nodeæœ‰å“ªäº›ç›¸å…³çš„æ–‡ä»¶è·¯å¾„ï¼Ÿ"><a href="#nodeæœ‰å“ªäº›ç›¸å…³çš„æ–‡ä»¶è·¯å¾„ï¼Ÿ" class="headerlink" title="nodeæœ‰å“ªäº›ç›¸å…³çš„æ–‡ä»¶è·¯å¾„ï¼Ÿ"></a>nodeæœ‰å“ªäº›ç›¸å…³çš„æ–‡ä»¶è·¯å¾„ï¼Ÿ</h2><blockquote><p>Node ä¸­çš„æ–‡ä»¶è·¯å¾„æœ‰ <strong>dirname, </strong>filename, process.cwd(), ./ æˆ–è€… ../</p></blockquote><ul><li>__dirname: æ€»æ˜¯è¿”å›è¢«æ‰§è¡Œçš„ js æ‰€åœ¨æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„</li><li>__filename: æ€»æ˜¯è¿”å›è¢«æ‰§è¡Œçš„ js çš„ç»å¯¹è·¯å¾„</li><li>process.cwd(): æ€»æ˜¯è¿”å›è¿è¡Œ node å‘½ä»¤æ—¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„</li></ul><h2 id="nodeç›¸å…³path-API-æœ‰å“ªäº›ï¼Ÿ"><a href="#nodeç›¸å…³path-API-æœ‰å“ªäº›ï¼Ÿ" class="headerlink" title="nodeç›¸å…³path API æœ‰å“ªäº›ï¼Ÿ"></a>nodeç›¸å…³path API æœ‰å“ªäº›ï¼Ÿ</h2><blockquote><p>path æ¨¡å—æä¾›äº†ä¸€äº›å®ç”¨å·¥å…·ï¼Œç”¨äºå¤„ç†æ–‡ä»¶å’Œç›®å½•çš„è·¯å¾„ï¼Œå¸¸ç”¨apiæœ‰ï¼špath.dirnameã€path.joinã€path.resolve å…¶ä»–çš„çœ‹æ–‡æ¡£ <a href="http://nodejs.cn/api/path.html" target="_blank" rel="noopener">Path API</a></p></blockquote><ul><li>path.dirname()ï¼š è¿”å› path çš„ç›®å½•å</li><li>path.join()ï¼šæ‰€æœ‰ç»™å®šçš„ path ç‰‡æ®µè¿æ¥åˆ°ä¸€èµ·ï¼Œç„¶åè§„èŒƒåŒ–ç”Ÿæˆçš„è·¯å¾„</li><li>path.resolve()ï¼šæ–¹æ³•ä¼šå°†è·¯å¾„æˆ–è·¯å¾„ç‰‡æ®µçš„åºåˆ—è§£æä¸ºç»å¯¹è·¯å¾„ï¼Œè§£æä¸ºç›¸å¯¹äºå½“å‰ç›®å½•çš„ç»å¯¹è·¯å¾„ï¼Œç›¸å½“äºcdå‘½ä»¤</li></ul><p>path.join(<strong>dirname, â€˜../lib/common.jsâ€™)å’Œ path.resolve(</strong>dirname, â€˜../lib/common.jsâ€™)è¿”å›çš„ç»“æœç›¸åŒï¼Œéš¾é“å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Ÿ</p><ol><li><p>joinæ˜¯æŠŠå„ä¸ªpathç‰‡æ®µè¿æ¥åœ¨ä¸€èµ·ï¼Œ resolveæŠŠ/å½“æˆæ ¹ç›®å½•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path.join(<span class="string">'/a'</span>, <span class="string">'/b'</span>) <span class="comment">// '/a/b'</span></span><br><span class="line">path.resolve(<span class="string">'/a'</span>, <span class="string">'/b'</span>) <span class="comment">//'/b'</span></span><br></pre></td></tr></table></figure></li><li><p>joinæ˜¯ç›´æ¥æ‹¼æ¥å­—æ®µï¼Œresolveæ˜¯è§£æè·¯å¾„å¹¶è¿”å›</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">path.join(<span class="string">"a"</span>,<span class="string">"b"</span>)  <span class="comment">// "a/b"</span></span><br><span class="line">path.resolve(<span class="string">"a"</span>, <span class="string">"b"</span>) <span class="comment">// "/Users/tree/Documents/infrastructure/KSDK/src/a/b"</span></span><br></pre></td></tr></table></figure></li></ol><h2 id="nodeçš„æ–‡ä»¶è¯»å–æ€ä¹ˆåšçš„ï¼Ÿ"><a href="#nodeçš„æ–‡ä»¶è¯»å–æ€ä¹ˆåšçš„ï¼Ÿ" class="headerlink" title="nodeçš„æ–‡ä»¶è¯»å–æ€ä¹ˆåšçš„ï¼Ÿ"></a>nodeçš„æ–‡ä»¶è¯»å–æ€ä¹ˆåšçš„ï¼Ÿ</h2><blockquote><p>é€šè¿‡fsæ–‡ä»¶ç³»ç»Ÿæ¨¡å—æä¾›çš„APIï¼Œä¹Ÿæ˜¯nodeä¸­é‡è¦çš„æ¨¡å—ä¹‹ä¸€ï¼Œfsæ¨¡å—ä¸»è¦ç”¨äºæ–‡ä»¶çš„è¯»å†™ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ é™¤ã€é‡å‘½åç­‰æ“ä½œã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fs.rename(<span class="string">'a'</span>, <span class="string">'b'</span>, (err)=&gt;&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        exec(<span class="string">'rm -rf a'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, out</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><blockquote><p>â°éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨require(â€˜fsâ€™)è½½å…¥fsæ¨¡å—ï¼Œfsæ¨¡å—ä¸­æ‰€æœ‰æ–¹æ³•éƒ½æœ‰åŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§å½¢å¼,åˆšåˆšæˆ‘ä»¬å±•ç¤ºçš„renameæ˜¯å¼‚æ­¥æ–¹æ³•çš„è°ƒç”¨ï¼Œå› ä¸ºåœ¨ç¹å¿™çš„è¿›ç¨‹ä¸­ï¼Œåº”ä½¿ç”¨å¼‚æ­¥æ–¹æ³•ï¼Œ åŒæ­¥çš„ç‰ˆæœ¬ä¼šé˜»å¡æ•´ä¸ªè¿›ç¨‹ï¼ˆåœæ­¢æ‰€æœ‰çš„è¿æ¥ï¼‰ï¼Œå½“ç„¶fs.renameå¯¹åº”çš„åŒæ­¥æ–¹æ³•å°±æ˜¯fs.renameSync</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åŒæ­¥çš„ä¾‹å­</span></span><br><span class="line"><span class="keyword">let</span> isExists = fs.existsSync(<span class="string">'dirname'</span>)</span><br><span class="line"><span class="keyword">if</span> (isExists) &#123;</span><br><span class="line">    process.exit(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ— è®ºåŒæ­¥å¼‚æ­¥å°½é‡å¯¹æŠ›å‡ºçš„å¼‚å¸¸åšç›¸åº”çš„å¤„ç†</span></span><br></pre></td></tr></table></figure><h2 id="nodeçš„urlæ¨¡å—æ˜¯ç”¨æ¥å¹²å˜›çš„ï¼Ÿ"><a href="#nodeçš„urlæ¨¡å—æ˜¯ç”¨æ¥å¹²å˜›çš„ï¼Ÿ" class="headerlink" title="nodeçš„urlæ¨¡å—æ˜¯ç”¨æ¥å¹²å˜›çš„ï¼Ÿ"></a>nodeçš„urlæ¨¡å—æ˜¯ç”¨æ¥å¹²å˜›çš„ï¼Ÿ</h2><blockquote><p>ç”¨æ¥å¯¹urlçš„å­—ç¬¦ä¸²è§£æã€urlç»„æˆç­‰åŠŸèƒ½ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªAPIã€‚url.parse()ã€url.format()</p></blockquote><ul><li>url.parseï¼šå¯ä»¥å°†ä¸€ä¸ªurlçš„å­—ç¬¦ä¸²è§£æå¹¶è¿”å›ä¸€ä¸ªurlçš„å¯¹è±¡</li><li>url.format:å°†ä¼ å…¥çš„urlå¯¹è±¡è§£ææˆä¸€ä¸ªurlå­—ç¬¦ä¸²å¹¶è¿”å›</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">url.parse(<span class="string">"https://baidu.com:8080/test/h?query=js#node"</span>)</span><br><span class="line"></span><br><span class="line">Url &#123;</span><br><span class="line">  protocol: <span class="string">'http:'</span>,</span><br><span class="line">  slashes: <span class="literal">true</span>,</span><br><span class="line">  auth: <span class="literal">null</span>,</span><br><span class="line">  host: <span class="string">'baidu.com:8080'</span>,</span><br><span class="line">  port: <span class="string">'8080'</span>,</span><br><span class="line">  hostname: <span class="string">'baidu.com'</span>,</span><br><span class="line">  hash: <span class="string">'#node'</span>,</span><br><span class="line">  search: <span class="string">'?query=js'</span>,</span><br><span class="line">  query: <span class="string">'query=js'</span>,</span><br><span class="line">  pathname: <span class="string">'/test/h'</span>,</span><br><span class="line">  path: <span class="string">'/test/h?query=js'</span>,</span><br><span class="line">  href: <span class="string">'http://baidu.com:8080/test/h?query=js#node'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="nodeçš„httpæ¨¡å—åˆ›å»ºæœåŠ¡ä¸Expressæˆ–Koaæ¡†æ¶æœ‰ä½•ä¸åŒ"><a href="#nodeçš„httpæ¨¡å—åˆ›å»ºæœåŠ¡ä¸Expressæˆ–Koaæ¡†æ¶æœ‰ä½•ä¸åŒ" class="headerlink" title="nodeçš„httpæ¨¡å—åˆ›å»ºæœåŠ¡ä¸Expressæˆ–Koaæ¡†æ¶æœ‰ä½•ä¸åŒ?"></a>nodeçš„httpæ¨¡å—åˆ›å»ºæœåŠ¡ä¸Expressæˆ–Koaæ¡†æ¶æœ‰ä½•ä¸åŒ?</h2><blockquote><p>expressæ˜¯ä¸€ä¸ªæœåŠ¡ç«¯æ¡†æ¶ï¼Œæ¡†æ¶ç®€å•å°è£…äº†nodeçš„httpæ¨¡å—ï¼Œexpressæ”¯æŒnodeåŸç”Ÿçš„å†™æ³•ï¼Œexpressä¸ä»…å°è£…å¥½æœåŠ¡å™¨ï¼Œè¿˜å°è£…äº†ä¸­é—´ä»¶ã€è·¯ç”±ç­‰ç‰¹å¾ï¼Œæ–¹ä¾¿å¼€å‘webæœåŠ¡å™¨ï¼Œæ¢å¥è¯è¯´express = httpæ¨¡å— + ä¸­é—´ä»¶ + è·¯ç”±</p></blockquote><h3 id="http"><a href="#http" class="headerlink" title="http"></a>http</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>)</span><br><span class="line"><span class="keyword">const</span> server = http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">    res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">       <span class="string">'content-type'</span>: <span class="string">'text/plain'</span></span><br><span class="line">    &#125;)</span><br><span class="line">    res.write(<span class="string">'hello world'</span>)</span><br><span class="line">    res.end()</span><br><span class="line">&#125;)</span><br><span class="line">server.listen(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure><h3 id="express"><a href="#express" class="headerlink" title="express"></a>express</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> app = express()</span><br><span class="line">app.user(middleware)</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'hello world'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">middleware</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="koa"><a href="#koa" class="headerlink" title="koa"></a>koa</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>)</span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa()</span><br><span class="line">app.user(middleware)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">middleware</span>(<span class="params">ctx, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">await</span> next()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Expresså’ŒKoaæ¡†æ¶ä¸­é—´ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"><a href="#Expresså’ŒKoaæ¡†æ¶ä¸­é—´ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ" class="headerlink" title="Expresså’ŒKoaæ¡†æ¶ä¸­é—´ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"></a>Expresså’ŒKoaæ¡†æ¶ä¸­é—´ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</h2><blockquote><p>ä¸­é—´ä»¶ï¼š app.useæ–¹æ³•å°±æ˜¯å¾€ä¸­é—´ä»¶é˜Ÿåˆ—ä¸­å¡å…¥æ–°çš„ä¸­é—´ä»¶ï¼Œexpressä¸­é—´ä»¶å¤„ç†æ–¹å¼æ˜¯çº¿æ€§çš„ï¼Œnextè¿‡åç»§ç»­å¯»æ‰¾ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå½“ç„¶å¦‚æœæ²¡æœ‰è°ƒç”¨next()çš„è¯ï¼Œå°±ä¸ä¼šè°ƒç”¨ä¸‹ä¸€ä¸ªå‡½æ•°äº†ï¼Œè°ƒç”¨å°±ä¼šè¢«ç»ˆæ­¢ã€‚</p></blockquote><ul><li>express ä¸­é—´ä»¶ï¼šæ˜¯é€šè¿‡ next çš„æœºåˆ¶ï¼Œå³ä¸Šä¸€ä¸ªä¸­é—´ä»¶ä¼šé€šè¿‡ next è§¦å‘ä¸‹ä¸€ä¸ªä¸­é—´ä»¶</li><li>koa2 ä¸­é—´ä»¶ï¼šæ˜¯é€šè¿‡ async await å®ç°çš„ï¼Œä¸­é—´ä»¶æ‰§è¡Œé¡ºåºæ˜¯â€œæ´‹è‘±åœˆâ€æ¨¡å‹ï¼ˆæ¨èï¼‰</li></ul><ol><li><p>è¯­æ³•åŒºåˆ«experss å¼‚æ­¥ä½¿ç”¨ å›è°ƒkoa1 å¼‚æ­¥ä½¿ç”¨ generator + yieldkoa2 å¼‚æ­¥ä½¿ç”¨ await/async</p></li><li><p>ä¸­é—´ä»¶åŒºåˆ«koaé‡‡ç”¨æ´‹è‘±æ¨¡å‹ï¼Œè¿›è¡Œé¡ºåºæ‰§è¡Œï¼Œå‡ºå»åå‘æ‰§è¡Œï¼Œæ”¯æŒcontextä¼ é€’æ•°æ®expressæœ¬èº«æ— æ´‹è‘±æ¨¡å‹ï¼Œéœ€è¦å¼•å…¥æ’ä»¶ï¼Œä¸æ”¯æŒcontextexpressçš„ä¸­é—´ä»¶ä¸­æ‰§è¡Œå¼‚æ­¥å‡½æ•°ï¼Œæ‰§è¡Œé¡ºåºä¸ä¼šæŒ‰ç…§æ´‹è‘±æ¨¡å‹ï¼Œå¼‚æ­¥çš„æ‰§è¡Œç»“æœæœ‰å¯èƒ½è¢«æ”¾åˆ°æœ€åï¼Œresponseä¹‹å‰ã€‚</p></li><li><p>é›†æˆåº¦åŒºåˆ«express å†…ç½®äº†å¾ˆå¤šä¸­é—´ä»¶ï¼Œé›†æˆåº¦é«˜ï¼Œä½¿ç”¨çœå¿ƒï¼Œkoa è½»é‡ç®€æ´ï¼Œå®¹æ˜“å®šåˆ¶</p></li></ol><h2 id="koa2å’Œeggçš„åŒºåˆ«"><a href="#koa2å’Œeggçš„åŒºåˆ«" class="headerlink" title="koa2å’Œeggçš„åŒºåˆ«"></a>koa2å’Œeggçš„åŒºåˆ«</h2><ul><li>eggæ˜¯åœ¨koa2ä¸Šçš„å°è£…</li><li>eggæœ‰controllerã€serviceã€router</li><li>eggçº¦å®šäº†æ–‡ä»¶ç›®å½•ç»“æ„</li></ul><h2 id="ä»€ä¹ˆæ˜¯æ¨¡ç‰ˆå¼•æ“ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯æ¨¡ç‰ˆå¼•æ“ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯æ¨¡ç‰ˆå¼•æ“ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯æ¨¡ç‰ˆå¼•æ“ï¼Ÿ</h2><blockquote><p>æ¨¡æ¿å¼•æ“æ˜¯ä¸€ä¸ªé€šè¿‡ç»“åˆé¡µé¢æ¨¡æ¿ã€è¦å±•ç¤ºçš„æ•°æ®ç”ŸæˆHTMLé¡µé¢çš„å·¥å…·ï¼Œæœ¬è´¨ä¸Šæ˜¯åç«¯æ¸²æŸ“ï¼ˆSSRï¼‰çš„éœ€æ±‚ï¼ŒåŠ ä¸ŠNodeæ¸²æŸ“é¡µé¢æœ¬èº«æ˜¯çº¯é™æ€çš„ï¼Œå½“æˆ‘ä»¬éœ€è¦é¡µé¢å¤šæ ·åŒ–ã€æ›´çµæ´»ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨æ¨¡æ¿å¼•æ“æ¥å¼ºåŒ–é¡µé¢ï¼Œæ›´å¥½çš„å‡¸æ˜¾æœåŠ¡ç«¯æ¸²æŸ“çš„ä¼˜åŠ¿ã€‚</p></blockquote><p>å¸¸è§ä¸»æµæ¨¡ç‰ˆå¼•æ“æœ‰ï¼š</p><ul><li>art-template <a href="http://aui.github.io/art-template/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a> ï¼šå·ç§°æ•ˆç‡æœ€é«˜çš„ï¼Œæ¨¡ç‰ˆå¼•æ“</li><li>ejs  <a href="https://ejs.co/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>ï¼šæ˜¯ä¸€ä¸ªJavaScriptæ¨¡æ¿åº“ï¼Œç”¨æ¥ä»JSONæ•°æ®ä¸­ç”ŸæˆHTMLå­—ç¬¦ä¸²ã€‚</li><li>pug <a href="https://pugjs.org/api/getting-started.html" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>ï¼šæ˜¯ä¸€æ¬¾å¥å£®ã€çµæ´»ã€åŠŸèƒ½ä¸°å¯Œçš„æ¨¡æ¿å¼•æ“ï¼Œä¸“é—¨ä¸º Node.js å¹³å°å¼€å‘</li></ul><p><a href="https://github.com/cosyer/node-learn" target="_blank" rel="noopener">Node.jså…¥é—¨æ•™ç¨‹</a></p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/%E5%85%B3%E4%BA%8Enode%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B(%E5%9F%BA%E7%A1%80%E7%AF%87).html#disqus_thread</comments>
    </item>
    
    <item>
      <title>react SSRæ•™ç¨‹</title>
      <link>http://mydearest.cn/2020/react%20SSR%E6%95%99%E7%A8%8B.html</link>
      <guid>http://mydearest.cn/2020/react%20SSR%E6%95%99%E7%A8%8B.html</guid>
      <pubDate>Wed, 10 Jun 2020 14:55:08 GMT</pubDate>
      <description>
      
        &lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡æ˜¯åŸºäºreact ssrçš„å…¥é—¨æ•™ç¨‹ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨è¿˜éœ€è¦åšæ›´å¤šçš„é…ç½®å’Œä¼˜åŒ–ï¼Œæ¯”è¾ƒé€‚åˆç¬¬ä¸€æ¬¡å°è¯•react ssrçš„å°ä¼™ä¼´ä»¬ã€‚æŠ€æœ¯æ¶‰åŠåˆ° koa2 + reactï¼Œæ¡ˆä¾‹ä½¿ç”¨create-react-appåˆ›å»ºã€‚&lt;/p&gt;
&lt;h2 id=&quot;å®¢æˆ·ç«¯æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“&quot;&gt;&lt;a href=&quot;#å®¢æˆ·ç«¯æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“&quot; class=&quot;headerlink&quot; title=&quot;å®¢æˆ·ç«¯æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“&quot;&gt;&lt;/a&gt;å®¢æˆ·ç«¯æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“&lt;/h2&gt;&lt;h3 id=&quot;å®¢æˆ·ç«¯æ¸²æŸ“&quot;&gt;&lt;a href=&quot;#å®¢æˆ·ç«¯æ¸²æŸ“&quot; class=&quot;headerlink&quot; title=&quot;å®¢æˆ·ç«¯æ¸²æŸ“&quot;&gt;&lt;/a&gt;å®¢æˆ·ç«¯æ¸²æŸ“&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œå®é™…ä¸Šå°±æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚é¡µé¢ï¼ŒæœåŠ¡ç«¯è¿”å›çš„æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ HTML é¡µé¢ï¼Œåœ¨è¿™ä¸ªé¡µé¢é‡Œï¼Œåªæœ‰å¾ˆå°‘çš„ä¸€äº› HTML æ ‡ç­¾&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯æ¸²æŸ“æ—¶ï¼Œé¡µé¢ä¸­æœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„ç‚¹ï¼Œç¬¬ä¸€ä¸ªæ˜¯ script æ ‡ç­¾ï¼Œå¯èƒ½ä¼šæœ‰å¥½å‡ ä¸ª script æ ‡ç­¾ï¼Œè¿™ä¸ªæ ‡ç­¾æ˜¯æ‰“åŒ…åçš„ js ä»£ç ï¼Œç”¨æ¥ç”Ÿæˆ DOM å…ƒç´ ï¼Œå‘é€è¯·æ±‚ï¼Œäº‹ä»¶ç»‘å®šç­‰ã€‚ä½†æ˜¯ï¼Œç”Ÿæˆçš„ DOM å…ƒç´ éœ€è¦æœ‰ä¸€ä¸ªåœ¨é¡µé¢ä¸Šå±•ç¤ºçš„å®¹å™¨ï¼Œæ‰€ä»¥å¦å¤–ä¸€ä¸ªç‚¹å°±æ˜¯å®¹å™¨ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ª id åä¸º root æˆ– app çš„ div æ ‡ç­¾ï¼Œç±»ä¼¼äºè¿™æ · &lt;code&gt;&amp;lt;div id=&amp;quot;root&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&lt;/code&gt; æˆ–&lt;code&gt;&amp;lt;div id=&amp;quot;app&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å®¢æˆ·ç«¯æ¸²æŸ“çš„ç‰¹ç‚¹&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯åŠ è½½æ‰€æœ‰çš„ js èµ„æºï¼Œæ¸²æŸ“ DOM å…ƒç´ &lt;/li&gt;
&lt;li&gt;åœ¨æµè§ˆå™¨é¡µé¢ä¸Šçš„æ‰€æœ‰èµ„æºï¼Œéƒ½ç”±å®¢æˆ·ç«¯ä¸»åŠ¨å»è·å–ï¼ŒæœåŠ¡ç«¯åªè´Ÿè´£é™æ€èµ„æºçš„æä¾›å’Œ API æ¥å£ï¼Œä¸å†è´Ÿè´£é¡µé¢çš„æ¸²æŸ“ï¼Œå¦‚æœé‡‡ç”¨ CDN çš„è¯ï¼ŒæœåŠ¡ç«¯ä»…ä»…éœ€è¦æä¾› API æ¥å£&lt;/li&gt;
&lt;li&gt;ä¼˜ç‚¹: å‰åç«¯åˆ†ç¦»ï¼Œè´£ä»»åŒºåˆ†ï¼Œå‰ç«¯ä¸“æ³¨é¡µé¢çš„å¼€å‘ï¼Œåç«¯ä¸“æ³¨æ¥å£çš„å¼€å‘&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹: é¦–å±åŠ è½½èµ„æºå¤šï¼Œé¦–å±åŠ è½½æ—¶å“åº”æ…¢ã€‚é¡µé¢ä¸Šæ²¡æœ‰ DOM å…ƒç´ ï¼Œä¸åˆ©äº SEO ä¼˜åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;æœåŠ¡ç«¯æ¸²æŸ“&quot;&gt;&lt;a href=&quot;#æœåŠ¡ç«¯æ¸²æŸ“&quot; class=&quot;headerlink&quot; title=&quot;æœåŠ¡ç«¯æ¸²æŸ“&quot;&gt;&lt;/a&gt;æœåŠ¡ç«¯æ¸²æŸ“&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå°±æ˜¯å®¢æˆ·ç«¯é¡µé¢ä¸Šçš„ HTML å…ƒç´ ï¼Œéƒ½è¦ç”±æœåŠ¡ç«¯è´Ÿè´£æ¸²æŸ“ã€‚æœåŠ¡ç«¯åˆ©ç”¨æ¨¡æ¿å¼•æ“ï¼ŒæŠŠæ•°æ®å¡«å……åˆ°æ¨¡æ¿ä¸­ï¼Œç”Ÿæˆ HTML å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆæŠŠ HTML å­—ç¬¦ä¸²è¿”å›åˆ°æµè§ˆå™¨ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ° HTML å­—ç¬¦ä¸²ï¼Œé€šè¿‡ HTML å¼•æ“è§£æï¼Œæœ€ç»ˆç”Ÿæˆ DOM å…ƒç´ ï¼Œæ˜¾ç¤ºåœ¨é¡µé¢ä¸Š&lt;/li&gt;
&lt;li&gt;æ¯”å¦‚ Node.js å¯ä»¥æ¸²æŸ“çš„æ¨¡æ¿å¼•æ“æœ‰ ejsï¼Œnunjucksï¼Œpug ç­‰ã€‚Java æœ€å¸¸è§çš„æ˜¯ JSP æ¨¡æ¿å¼•æ“ã€‚Python æœ€å¸¸è§çš„æ˜¯ Jinja2 æ¨¡æ¿å¼•æ“ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡ç«¯æ¸²æŸ“çš„ç‰¹ç‚¹&lt;ul&gt;
&lt;li&gt;ä¼˜ç‚¹: é¡µé¢èµ„æºå¤§å¤šç”±æœåŠ¡ç«¯è´Ÿè´£å¤„ç†ï¼Œæ‰€ä»¥é¡µé¢åŠ è½½é€Ÿåº¦å¿«ï¼Œç¼©çŸ­é¦–å±åŠ è½½æ—¶é—´ã€‚æœ‰åˆ©äº SEO ä¼˜åŒ–ã€‚æ— éœ€å ç”¨å®¢æˆ·ç«¯èµ„æº&lt;/li&gt;
&lt;li&gt;ç¼ºç‚¹: ä¸åˆ©äºå‰åç«¯åˆ†ç¦»ï¼Œå¼€å‘æ•ˆç‡ä½ã€‚å ç”¨æœåŠ¡å™¨èµ„æº&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;åŒºåˆ†ä¸é€‰æ‹©&quot;&gt;&lt;a href=&quot;#åŒºåˆ†ä¸é€‰æ‹©&quot; class=&quot;headerlink&quot; title=&quot;åŒºåˆ†ä¸é€‰æ‹©&quot;&gt;&lt;/a&gt;åŒºåˆ†ä¸é€‰æ‹©&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;å®¢æˆ·ç«¯æ¸²æŸ“å’ŒæœåŠ¡ç«¯æ¸²æŸ“æœ¬è´¨çš„åŒºåˆ«å°±æ˜¯ï¼Œæ˜¯è°è´Ÿè´£ HTML é¡µé¢çš„æ‹¼æ¥ï¼Œé‚£ä¹ˆå°±æ˜¯è°æ¸²æŸ“çš„é¡µé¢&lt;/li&gt;
&lt;li&gt;å¦‚æœå¯¹é¦–å±åŠ è½½æ—¶é—´æœ‰éå¸¸é«˜çš„éœ€æ±‚ï¼Œæˆ–è€…æ˜¯éœ€è¦ SEO ä¼˜åŒ–ï¼Œé‚£ä¹ˆå°±é€‰æ‹©æœåŠ¡ç«¯æ¸²æŸ“&lt;/li&gt;
&lt;li&gt;å¦‚æœå¯¹é¦–å±åŠ è½½æ—¶é—´æ²¡æœ‰è¦æ±‚ï¼Œä¹Ÿä¸éœ€è¦åš SEO ä¼˜åŒ–ï¼Œç±»ä¼¼äºåšåå°ç®¡ç†ç³»åˆ—çš„ä¸šåŠ¡ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€‰æ‹©å®¢æˆ·ç«¯æ¸²æŸ“&lt;/li&gt;
&lt;li&gt;å…·ä½“é€‰æ‹©å®¢æˆ·ç«¯æ¸²æŸ“è¿˜æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼Œæ²¡æœ‰å¼ºåˆ¶çš„è¦æ±‚ï¼Œå…·ä½“è¦æ ¹æ®é¡¹ç›®çš„éœ€æ±‚æ¥åŒºåˆ†é€‰æ‹©&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡æ˜¯åŸºäºreact ssrçš„å…¥é—¨æ•™ç¨‹ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨è¿˜éœ€è¦åšæ›´å¤šçš„é…ç½®å’Œä¼˜åŒ–ï¼Œæ¯”è¾ƒé€‚åˆç¬¬ä¸€æ¬¡å°è¯•react ssrçš„å°ä¼™ä¼´ä»¬ã€‚æŠ€æœ¯æ¶‰åŠåˆ° koa2 + reactï¼Œæ¡ˆä¾‹ä½¿ç”¨create-react-appåˆ›å»ºã€‚</p><h2 id="å®¢æˆ·ç«¯æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“"><a href="#å®¢æˆ·ç«¯æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“" class="headerlink" title="å®¢æˆ·ç«¯æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“"></a>å®¢æˆ·ç«¯æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“</h2><h3 id="å®¢æˆ·ç«¯æ¸²æŸ“"><a href="#å®¢æˆ·ç«¯æ¸²æŸ“" class="headerlink" title="å®¢æˆ·ç«¯æ¸²æŸ“"></a>å®¢æˆ·ç«¯æ¸²æŸ“</h3><ul><li>å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œå®é™…ä¸Šå°±æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚é¡µé¢ï¼ŒæœåŠ¡ç«¯è¿”å›çš„æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ HTML é¡µé¢ï¼Œåœ¨è¿™ä¸ªé¡µé¢é‡Œï¼Œåªæœ‰å¾ˆå°‘çš„ä¸€äº› HTML æ ‡ç­¾</li><li>å®¢æˆ·ç«¯æ¸²æŸ“æ—¶ï¼Œé¡µé¢ä¸­æœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„ç‚¹ï¼Œç¬¬ä¸€ä¸ªæ˜¯ script æ ‡ç­¾ï¼Œå¯èƒ½ä¼šæœ‰å¥½å‡ ä¸ª script æ ‡ç­¾ï¼Œè¿™ä¸ªæ ‡ç­¾æ˜¯æ‰“åŒ…åçš„ js ä»£ç ï¼Œç”¨æ¥ç”Ÿæˆ DOM å…ƒç´ ï¼Œå‘é€è¯·æ±‚ï¼Œäº‹ä»¶ç»‘å®šç­‰ã€‚ä½†æ˜¯ï¼Œç”Ÿæˆçš„ DOM å…ƒç´ éœ€è¦æœ‰ä¸€ä¸ªåœ¨é¡µé¢ä¸Šå±•ç¤ºçš„å®¹å™¨ï¼Œæ‰€ä»¥å¦å¤–ä¸€ä¸ªç‚¹å°±æ˜¯å®¹å™¨ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ª id åä¸º root æˆ– app çš„ div æ ‡ç­¾ï¼Œç±»ä¼¼äºè¿™æ · <code>&lt;div id=&quot;root&quot;&gt;&lt;/div&gt;</code> æˆ–<code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code></li><li>å®¢æˆ·ç«¯æ¸²æŸ“çš„ç‰¹ç‚¹<ul><li>å®¢æˆ·ç«¯åŠ è½½æ‰€æœ‰çš„ js èµ„æºï¼Œæ¸²æŸ“ DOM å…ƒç´ </li><li>åœ¨æµè§ˆå™¨é¡µé¢ä¸Šçš„æ‰€æœ‰èµ„æºï¼Œéƒ½ç”±å®¢æˆ·ç«¯ä¸»åŠ¨å»è·å–ï¼ŒæœåŠ¡ç«¯åªè´Ÿè´£é™æ€èµ„æºçš„æä¾›å’Œ API æ¥å£ï¼Œä¸å†è´Ÿè´£é¡µé¢çš„æ¸²æŸ“ï¼Œå¦‚æœé‡‡ç”¨ CDN çš„è¯ï¼ŒæœåŠ¡ç«¯ä»…ä»…éœ€è¦æä¾› API æ¥å£</li><li>ä¼˜ç‚¹: å‰åç«¯åˆ†ç¦»ï¼Œè´£ä»»åŒºåˆ†ï¼Œå‰ç«¯ä¸“æ³¨é¡µé¢çš„å¼€å‘ï¼Œåç«¯ä¸“æ³¨æ¥å£çš„å¼€å‘</li><li>ç¼ºç‚¹: é¦–å±åŠ è½½èµ„æºå¤šï¼Œé¦–å±åŠ è½½æ—¶å“åº”æ…¢ã€‚é¡µé¢ä¸Šæ²¡æœ‰ DOM å…ƒç´ ï¼Œä¸åˆ©äº SEO ä¼˜åŒ–</li></ul></li></ul><h3 id="æœåŠ¡ç«¯æ¸²æŸ“"><a href="#æœåŠ¡ç«¯æ¸²æŸ“" class="headerlink" title="æœåŠ¡ç«¯æ¸²æŸ“"></a>æœåŠ¡ç«¯æ¸²æŸ“</h3><ul><li>æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå°±æ˜¯å®¢æˆ·ç«¯é¡µé¢ä¸Šçš„ HTML å…ƒç´ ï¼Œéƒ½è¦ç”±æœåŠ¡ç«¯è´Ÿè´£æ¸²æŸ“ã€‚æœåŠ¡ç«¯åˆ©ç”¨æ¨¡æ¿å¼•æ“ï¼ŒæŠŠæ•°æ®å¡«å……åˆ°æ¨¡æ¿ä¸­ï¼Œç”Ÿæˆ HTML å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆæŠŠ HTML å­—ç¬¦ä¸²è¿”å›åˆ°æµè§ˆå™¨ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ° HTML å­—ç¬¦ä¸²ï¼Œé€šè¿‡ HTML å¼•æ“è§£æï¼Œæœ€ç»ˆç”Ÿæˆ DOM å…ƒç´ ï¼Œæ˜¾ç¤ºåœ¨é¡µé¢ä¸Š</li><li>æ¯”å¦‚ Node.js å¯ä»¥æ¸²æŸ“çš„æ¨¡æ¿å¼•æ“æœ‰ ejsï¼Œnunjucksï¼Œpug ç­‰ã€‚Java æœ€å¸¸è§çš„æ˜¯ JSP æ¨¡æ¿å¼•æ“ã€‚Python æœ€å¸¸è§çš„æ˜¯ Jinja2 æ¨¡æ¿å¼•æ“ã€‚</li><li>æœåŠ¡ç«¯æ¸²æŸ“çš„ç‰¹ç‚¹<ul><li>ä¼˜ç‚¹: é¡µé¢èµ„æºå¤§å¤šç”±æœåŠ¡ç«¯è´Ÿè´£å¤„ç†ï¼Œæ‰€ä»¥é¡µé¢åŠ è½½é€Ÿåº¦å¿«ï¼Œç¼©çŸ­é¦–å±åŠ è½½æ—¶é—´ã€‚æœ‰åˆ©äº SEO ä¼˜åŒ–ã€‚æ— éœ€å ç”¨å®¢æˆ·ç«¯èµ„æº</li><li>ç¼ºç‚¹: ä¸åˆ©äºå‰åç«¯åˆ†ç¦»ï¼Œå¼€å‘æ•ˆç‡ä½ã€‚å ç”¨æœåŠ¡å™¨èµ„æº</li></ul></li></ul><h3 id="åŒºåˆ†ä¸é€‰æ‹©"><a href="#åŒºåˆ†ä¸é€‰æ‹©" class="headerlink" title="åŒºåˆ†ä¸é€‰æ‹©"></a>åŒºåˆ†ä¸é€‰æ‹©</h3><ul><li>å®¢æˆ·ç«¯æ¸²æŸ“å’ŒæœåŠ¡ç«¯æ¸²æŸ“æœ¬è´¨çš„åŒºåˆ«å°±æ˜¯ï¼Œæ˜¯è°è´Ÿè´£ HTML é¡µé¢çš„æ‹¼æ¥ï¼Œé‚£ä¹ˆå°±æ˜¯è°æ¸²æŸ“çš„é¡µé¢</li><li>å¦‚æœå¯¹é¦–å±åŠ è½½æ—¶é—´æœ‰éå¸¸é«˜çš„éœ€æ±‚ï¼Œæˆ–è€…æ˜¯éœ€è¦ SEO ä¼˜åŒ–ï¼Œé‚£ä¹ˆå°±é€‰æ‹©æœåŠ¡ç«¯æ¸²æŸ“</li><li>å¦‚æœå¯¹é¦–å±åŠ è½½æ—¶é—´æ²¡æœ‰è¦æ±‚ï¼Œä¹Ÿä¸éœ€è¦åš SEO ä¼˜åŒ–ï¼Œç±»ä¼¼äºåšåå°ç®¡ç†ç³»åˆ—çš„ä¸šåŠ¡ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€‰æ‹©å®¢æˆ·ç«¯æ¸²æŸ“</li><li>å…·ä½“é€‰æ‹©å®¢æˆ·ç«¯æ¸²æŸ“è¿˜æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼Œæ²¡æœ‰å¼ºåˆ¶çš„è¦æ±‚ï¼Œå…·ä½“è¦æ ¹æ®é¡¹ç›®çš„éœ€æ±‚æ¥åŒºåˆ†é€‰æ‹©</li></ul><hr><a id="more"></a><h2 id="SSR-ä»‹ç»"><a href="#SSR-ä»‹ç»" class="headerlink" title="SSR ä»‹ç»"></a>SSR ä»‹ç»</h2><p>Server Slide Renderingï¼Œç¼©å†™ä¸º <strong>ssr</strong> å³æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œè¿™ä¸ªè¦ä»SEOè¯´èµ·ï¼Œç›®å‰reactå•é¡µåº”ç”¨HTMLä»£ç æ˜¯ä¸‹é¢è¿™æ ·çš„<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"favicon.ico"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1, shrink-to-fit=no"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"theme-color"</span> <span class="attr">content</span>=<span class="string">"#000000"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>React App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span>You need to enable JavaScript to run this app.<span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/js/main.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><ol><li>å¦‚æœmain.js åŠ è½½æ¯”è¾ƒæ…¢ï¼Œä¼šå‡ºç°ç™½å±ä¸€é—ªçš„ç°è±¡ã€‚</li><li>ä¼ ç»Ÿçš„æœç´¢å¼•æ“çˆ¬è™«å› ä¸ºä¸èƒ½æŠ“å–JSç”Ÿæˆåçš„å†…å®¹ï¼Œé‡åˆ°å•é¡µwebé¡¹ç›®ï¼ŒæŠ“å–åˆ°çš„å†…å®¹å•¥ä¹Ÿæ²¡æœ‰ã€‚åœ¨SEOä¸Šä¼šåƒå¾ˆå¤šäºï¼Œå¾ˆéš¾æ’æœç´¢å¼•æ“åˆ°å‰é¢å»ã€‚React SSRï¼ˆreactæœåŠ¡å™¨æ¸²æŸ“ï¼‰æ­£å¥½è§£å†³äº†è¿™2ä¸ªé—®é¢˜ã€‚</li></ol><h2 id="React-SSRä»‹ç»"><a href="#React-SSRä»‹ç»" class="headerlink" title="React SSRä»‹ç»"></a>React SSRä»‹ç»</h2><p>è¿™é‡Œé€šè¿‡ä¸€ä¸ªä¾‹å­æ¥å¸¦å¤§å®¶å…¥å‘ï¼å…ˆä½¿ç”¨create-react-appåˆ›å»ºä¸€ä¸ªreacté¡¹ç›®ã€‚å› ä¸ºè¦ä¿®æ”¹webpackï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨react-app-rewiredå¯åŠ¨é¡¹ç›®ã€‚æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªserverç›®å½•å­˜æ”¾æœåŠ¡ç«¯ä»£ç ï¼ŒæœåŠ¡ç«¯ä»£ç æˆ‘ä»¬è¿™é‡Œä½¿ç”¨koa2ã€‚</p><p>è¿™é‡Œå…ˆæ¥çœ‹çœ‹react ssræ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p><p><img src="http://cdn.mydearest.cn/blog/images/react-ssr.png" alt="å›¾ç‰‡æè¿°"></p><p>è¿™ä¸ªä¸šåŠ¡æµç¨‹å›¾æ¯”è¾ƒæ¸…æ™°äº†ï¼ŒæœåŠ¡ç«¯åªç”ŸæˆHTMLä»£ç ï¼Œå®é™…ä¸Šå‰ç«¯ä¼šç”Ÿæˆä¸€ä»½main.jsæä¾›ç»™æœåŠ¡ç«¯çš„HTMLä½¿ç”¨ã€‚è¿™å°±æ˜¯react ssrçš„å·¥ä½œæµç¨‹ã€‚æœ‰äº†è¿™ä¸ªå›¾ä¼šæ›´å¥½çš„ç†è§£ï¼Œå¦‚æœè¿™ä¸ªä¸šåŠ¡æ²¡ç†è§£æ¸…æ¥šï¼Œåé¢çš„ä¼°è®¡å¾ˆéš¾ç†è§£ã€‚</p><blockquote><p>reactæä¾›çš„SSRæ–¹æ³•æœ‰ä¸¤ä¸ªrenderToString å’Œ renderToStaticMarkupï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š</p></blockquote><ul><li>renderToString æ–¹æ³•æ¸²æŸ“çš„æ—¶å€™å¸¦æœ‰ data-reactid å±æ€§. åœ¨æµè§ˆå™¨è®¿é—®é¡µé¢çš„æ—¶å€™ï¼Œmain.jsèƒ½è¯†åˆ«åˆ°HTMLçš„å†…å®¹ï¼Œä¸ä¼šæ‰§è¡ŒReact.createElementäºŒæ¬¡åˆ›å»ºDOMã€‚</li><li>renderToStaticMarkup åˆ™æ²¡æœ‰ data-reactid å±æ€§ï¼Œé¡µé¢çœ‹ä¸Šå»å¹²å‡€ç‚¹ã€‚åœ¨æµè§ˆå™¨è®¿é—®é¡µé¢çš„æ—¶å€™ï¼Œmain.jsä¸èƒ½è¯†åˆ«åˆ°HTMLå†…å®¹ï¼Œä¼šæ‰§è¡Œmain.jsé‡Œé¢çš„React.createElementæ–¹æ³•é‡æ–°åˆ›å»ºDOMã€‚é€‚ç”¨äºçº¯é™æ€é¡µé¢ã€‚</li></ul><h2 id="å®ç°æµç¨‹"><a href="#å®ç°æµç¨‹" class="headerlink" title="å®ç°æµç¨‹"></a>å®ç°æµç¨‹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"./App.css"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> logo <span class="keyword">from</span> <span class="string">"./logo.svg"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">App</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å“ˆå“ˆå“ˆ~ æœåŠ¡å™¨æ¸²æŸ“æˆåŠŸäº†ï¼'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div className=<span class="string">"App"</span>&gt;</span><br><span class="line">        &lt;header className=<span class="string">"App-header"</span>&gt;</span><br><span class="line">          &lt;img src=&#123;logo&#125; className=<span class="string">"App-logo"</span> alt=<span class="string">"logo"</span> /&gt;</span><br><span class="line">          &lt;p&gt;</span><br><span class="line">            Edit &lt;code&gt;src/App.js&lt;<span class="regexp">/code&gt; and save to reload.</span></span><br><span class="line"><span class="regexp">          &lt;/</span>p&gt;</span><br><span class="line">          &lt;a</span><br><span class="line">            className=<span class="string">"App-link"</span></span><br><span class="line">            href=<span class="string">"https://reactjs.org"</span></span><br><span class="line">            target=<span class="string">"_blank"</span></span><br><span class="line">            rel=<span class="string">"noopener noreferrer"</span></span><br><span class="line">          &gt;</span><br><span class="line">            Learn React</span><br><span class="line">          &lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>header&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default App;</span></span><br></pre></td></tr></table></figure><p>åœ¨é¡¹ç›®ä¸­æ–°å»ºserverç›®å½•ï¼Œç”¨äºå­˜æ”¾æœåŠ¡ç«¯ä»£ç ã€‚é¡¹ç›®ä¸­æˆ‘ä»¬ç”¨çš„ES6ï¼Œæ‰€ä»¥è¿˜è¦é…ç½®ä¸‹.babelrc</p><blockquote><p>.babelrc é…ç½®ï¼Œå› ä¸ºè¦ä½¿ç”¨åˆ°ES6<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"presets"</span>: [</span><br><span class="line">        <span class="string">"env"</span>,</span><br><span class="line">        <span class="string">"react"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"plugins"</span>: [</span><br><span class="line">        <span class="string">"transform-decorators-legacy"</span>,</span><br><span class="line">        <span class="string">"transform-runtime"</span>,</span><br><span class="line">        <span class="string">"react-hot-loader/babel"</span>,</span><br><span class="line">        <span class="string">"add-module-exports"</span>,</span><br><span class="line">        <span class="string">"transform-object-rest-spread"</span>,</span><br><span class="line">        <span class="string">"transform-class-properties"</span>,</span><br><span class="line">        [</span><br><span class="line">            <span class="string">"import"</span>,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">"libraryName"</span>: <span class="string">"antd"</span>,</span><br><span class="line">                <span class="attr">"style"</span>: <span class="literal">true</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>index.js é¡¹ç›®å…¥å£åšä¸€äº›é¢„å¤„ç†ï¼Œä½¿ç”¨asset-require-hookè¿‡æ»¤æ‰ä¸€äº›ç±»ä¼¼ <code>import logo from &quot;./logo.svg&quot;;</code> è¿™æ ·çš„èµ„æºä»£ç ã€‚å› ä¸ºæˆ‘ä»¬æœåŠ¡ç«¯åªéœ€è¦çº¯çš„HTMLä»£ç ï¼Œä¸è¿‡æ»¤æ‰ä¼šæŠ¥é”™ã€‚è¿™é‡Œçš„nameï¼Œæˆ‘ä»¬æ˜¯å»æ‰äº†hashå€¼çš„ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">"asset-require-hook"</span>)(&#123;</span><br><span class="line">  extensions: [<span class="string">"svg"</span>, <span class="string">"css"</span>, <span class="string">"less"</span>, <span class="string">"jpg"</span>, <span class="string">"png"</span>, <span class="string">"gif"</span>],</span><br><span class="line">  name: <span class="string">'/static/media/[name].[ext]'</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"babel-core/register"</span>)();</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"babel-polyfill"</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">"./app"</span>);</span><br></pre></td></tr></table></figure><blockquote><p>public/index.html htmlæ¨¡ç‰ˆä»£ç è¦åšä¸ªè°ƒæ•´ï¼Œ<code></code> è¿™ä¸ªå¯ä»¥æ˜¯ä»»ä½•å¯ä»¥æ›¿æ¢çš„å­—ç¬¦ä¸²ï¼Œç­‰ä¸‹æœåŠ¡ç«¯ä¼šæ›¿æ¢è¿™æ®µå­—ç¬¦ä¸²ã€‚</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span> <span class="attr">href</span>=<span class="string">"%PUBLIC_URL%/favicon.ico"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1, shrink-to-fit=no"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"theme-color"</span> <span class="attr">content</span>=<span class="string">"#000000"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"manifest"</span> <span class="attr">href</span>=<span class="string">"%PUBLIC_URL%/manifest.json"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>React App<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">noscript</span>&gt;</span>You need to enable JavaScript to run this app.<span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"root"</span>&gt;</span>&#123;&#123;root&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>app.js æœåŠ¡ç«¯æ¸²æŸ“çš„ä¸»è¦ä»£ç ï¼ŒåŠ è½½App.jsï¼Œä½¿ç”¨renderToString ç”Ÿæˆhtmlä»£ç ï¼Œå»æ›¿æ¢æ‰ index.html ä¸­çš„ <code></code> éƒ¨åˆ†</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'../src/App'</span>;</span><br><span class="line"><span class="keyword">import</span> Koa <span class="keyword">from</span> <span class="string">'koa'</span>;</span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">'koa-router'</span>;</span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">'fs'</span>;</span><br><span class="line"><span class="keyword">import</span> koaStatic <span class="keyword">from</span> <span class="string">'koa-static'</span>;</span><br><span class="line"><span class="keyword">import</span> path <span class="keyword">from</span> <span class="string">'path'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; renderToString &#125; <span class="keyword">from</span> <span class="string">'react-dom/server'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é…ç½®æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  port: <span class="number">3030</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®ä¾‹åŒ– koa</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é™æ€èµ„æº</span></span><br><span class="line">app.use(</span><br><span class="line">  koaStatic(path.join(__dirname, <span class="string">'../build'</span>), &#123;</span><br><span class="line">    maxage: <span class="number">365</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">1000</span>,</span><br><span class="line">    index: <span class="string">'root'</span> </span><br><span class="line">    <span class="comment">// è¿™é‡Œé…ç½®ä¸è¦å†™æˆ'index'å°±å¯ä»¥äº†ï¼Œå› ä¸ºåœ¨è®¿é—®localhost:3030æ—¶ï¼Œä¸èƒ½è®©æœåŠ¡é»˜è®¤å»åŠ è½½index.htmlæ–‡ä»¶ï¼Œè¿™é‡Œå¾ˆå®¹æ˜“æ‰è¿›å‘ã€‚</span></span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®è·¯ç”±</span></span><br><span class="line">app.use(</span><br><span class="line">  <span class="keyword">new</span> Router()</span><br><span class="line">    .get(<span class="string">'*'</span>, <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">      ctx.response.type = <span class="string">'html'</span>; <span class="comment">//æŒ‡å®šcontent type</span></span><br><span class="line">      <span class="keyword">let</span> shtml = <span class="string">''</span>;</span><br><span class="line">      <span class="keyword">await</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        fs.readFile(path.join(__dirname, <span class="string">'../build/index.html'</span>), <span class="string">'utfa8'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">          <span class="keyword">if</span> (err) &#123;</span><br><span class="line">            reject();</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">console</span>.log(err);</span><br><span class="line">          &#125;</span><br><span class="line">          shtml = data;</span><br><span class="line">          resolve();</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="comment">// æ›¿æ¢æ‰ &#123;&#123;root&#125;&#125; ä¸ºæˆ‘ä»¬ç”Ÿæˆåçš„HTML</span></span><br><span class="line">      ctx.response.body = shtml.replace(<span class="string">'&#123;&#123;root&#125;&#125;'</span>, renderToString(<span class="xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span>));</span><br><span class="line">    &#125;)</span><br><span class="line">    .routes()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">app.listen(config.port, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'æœåŠ¡å™¨å¯åŠ¨ï¼Œç›‘å¬ portï¼š '</span> + config.port + <span class="string">'  running~'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><blockquote><p>config-overrides.js å› ä¸ºæˆ‘ä»¬ç”¨çš„æ˜¯create-react-appï¼Œè¿™é‡Œä½¿ç”¨react-app-rewiredå»æ”¹ä¸‹webpackçš„é…ç½®ã€‚å› ä¸ºæ‰§è¡Œ<strong>npm run build</strong>çš„æ—¶å€™ä¼šè‡ªåŠ¨ç»™èµ„æºåŠ äº†hashå€¼ï¼Œè€Œè¿™ä¸ªhashå€¼ï¼Œæˆ‘ä»¬åœ¨asset-require-hookçš„æ—¶å€™å»æ‰äº†hashå€¼ï¼Œé…ç½®é‡Œé¢éœ€è¦æ”¹ä¸‹ï¼Œä¸ç„¶ä¼šå‡ºç°å›¾ç‰‡ä¸æ˜¾ç¤ºçš„é—®é¢˜ï¼Œè¿™é‡Œä¹Ÿæ˜¯ä¸€ä¸ªå‘ï¼Œè¦æ³¨æ„ä¸‹ã€‚</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  webpack: <span class="function"><span class="keyword">function</span>(<span class="params">config, env</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// ...add your webpack config</span></span><br><span class="line">    <span class="comment">// console.log(JSON.stringify(config));</span></span><br><span class="line">    <span class="comment">// å»æ‰hashå€¼ï¼Œè§£å†³asset-require-hookèµ„æºé—®é¢˜</span></span><br><span class="line">    config.module.rules.forEach(<span class="function"><span class="params">d</span> =&gt;</span> &#123;</span><br><span class="line">      d.oneOf &amp;&amp;</span><br><span class="line">        d.oneOf.forEach(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (e &amp;&amp; e.options &amp;&amp; e.options.name) &#123;</span><br><span class="line">            e.options.name = e.options.name.replace(<span class="string">'[hash:8].'</span>, <span class="string">''</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>å¥½äº†ï¼Œæ‰€æœ‰çš„ä»£ç å°±è¿™äº›äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•äº†ï¼Ÿæˆ‘ä»¬koa2è¯»å–çš„é™æ€èµ„æºæ˜¯ buildç›®å½•ä¸‹é¢çš„ã€‚å…ˆæ‰§è¡Œ<strong>npm run build</strong>æ‰“åŒ…é¡¹ç›®ï¼Œå†æ‰§è¡Œ<strong>node ./server</strong> å¯åŠ¨æœåŠ¡ç«¯é¡¹ç›®ã€‚çœ‹ä¸‹<a href="http://localhost:3030" target="_blank" rel="noopener">http://localhost:3030</a> é¡µé¢çš„HTMLä»£ç æ£€æŸ¥ä¸‹ï¼š</p><p><img src="http://cdn.mydearest.cn/blog/images/react-ssr-demo.png" alt="å›¾ç‰‡æè¿°"></p><p>æ²¡æœ‰<code></code>äº†ï¼ŒæœåŠ¡å™¨æ¸²æŸ“æˆåŠŸï¼</p><blockquote><p>æ³¨: è¿™ä¸ªé¡¹ç›®åªæ˜¯ç”¨æ¥å­¦ä¹  react çš„æœåŠ¡ç«¯æ¸²æŸ“ï¼Œè€Œéå®‰åˆ©å¤§å®¶ä¸€å®šè¦ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå› ä¸º react å’Œ vue çš„æœåŠ¡ç«¯æ¸²æŸ“å’Œæ™®é€šçš„æœåŠ¡ç«¯æ¸²æŸ“æœ‰å¾ˆå¤šçš„ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å¯ä»¥å­¦ä¹ ä¸€ä¸‹ï¼Œæé«˜ä¸€ä¸‹è‡ªå·±çš„æ°´å¹³ã€‚</p></blockquote><h2 id="ä»£ç ä»“åº“åœ°å€"><a href="#ä»£ç ä»“åº“åœ°å€" class="headerlink" title="ä»£ç ä»“åº“åœ°å€"></a>ä»£ç ä»“åº“åœ°å€</h2><p><a href="https://github.com/cosyer/react-koa2-ssr" target="_blank" rel="noopener">react-koa2-ssr</a></p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/react%20SSR%E6%95%99%E7%A8%8B.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>Docker</title>
      <link>http://mydearest.cn/2020/Docker.html</link>
      <guid>http://mydearest.cn/2020/Docker.html</guid>
      <pubDate>Mon, 01 Jun 2020 08:31:45 GMT</pubDate>
      <description>
      
        &lt;p&gt;Dockerï¼Œæ˜¯ä¸€æ¬¾ç°åœ¨æœ€æµè¡Œçš„ è½¯ä»¶å®¹å™¨å¹³å°ï¼Œæä¾›äº†è½¯ä»¶è¿è¡Œæ—¶æ‰€ä¾èµ–çš„ç¯å¢ƒã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç‰©ç†æœº&quot;&gt;&lt;a href=&quot;#ç‰©ç†æœº&quot; class=&quot;headerlink&quot; title=&quot;ç‰©ç†æœº&quot;&gt;&lt;/a&gt;ç‰©ç†æœº&lt;/h2&gt;&lt;p&gt;ç¡¬ä»¶ç¯å¢ƒï¼ŒçœŸå®çš„ è®¡ç®—æœºå®ä½“ï¼ŒåŒ…å«äº†ä¾‹å¦‚ç‰©ç†å†…å­˜ï¼Œç¡¬ç›˜ç­‰ç­‰ç¡¬ä»¶ï¼›&lt;/p&gt;
&lt;h2 id=&quot;è™šæ‹Ÿæœº&quot;&gt;&lt;a href=&quot;#è™šæ‹Ÿæœº&quot; class=&quot;headerlink&quot; title=&quot;è™šæ‹Ÿæœº:&quot;&gt;&lt;/a&gt;è™šæ‹Ÿæœº:&lt;/h2&gt;&lt;p&gt;åœ¨ç‰©ç†æœºä¸Š æ¨¡æ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶ç¯å¢ƒå’Œæ“ä½œç³»ç»Ÿï¼Œåº”ç”¨è½¯ä»¶å¯ä»¥è¿è¡Œäºå…¶ä¸­ï¼Œå¹¶ä¸”æ¯«æ— æ„ŸçŸ¥ï¼Œæ˜¯ä¸€å¥—éš”ç¦»çš„å®Œæ•´ç¯å¢ƒã€‚æœ¬è´¨ä¸Šï¼Œå®ƒåªæ˜¯ç‰©ç†æœºä¸Šçš„ä¸€ä»½è¿è¡Œæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæœºï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæœºï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæœºï¼Ÿ&quot;&gt;&lt;/a&gt;ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæœºï¼Ÿ&lt;/h2&gt;&lt;h3 id=&quot;ç¯å¢ƒé…ç½®ä¸è¿ç§»&quot;&gt;&lt;a href=&quot;#ç¯å¢ƒé…ç½®ä¸è¿ç§»&quot; class=&quot;headerlink&quot; title=&quot;ç¯å¢ƒé…ç½®ä¸è¿ç§»&quot;&gt;&lt;/a&gt;ç¯å¢ƒé…ç½®ä¸è¿ç§»&lt;/h3&gt;&lt;p&gt;åœ¨è½¯ä»¶å¼€å‘å’Œè¿è¡Œä¸­ï¼Œç¯å¢ƒä¾èµ–ä¸€ç›´æ˜¯ä¸€ä¸ªå¾ˆå¤´ç–¼çš„éš¾é¢˜ï¼Œæ¯”å¦‚ä½ æƒ³è¿è¡Œ node åº”ç”¨ï¼Œé‚£è‡³å°‘ç¯å¢ƒå¾—å®‰è£… node å§ï¼Œè€Œä¸”ä¸åŒç‰ˆæœ¬ï¼Œä¸åŒç³»ç»Ÿéƒ½ä¼šå½±å“è¿è¡Œã€‚è§£å†³çš„åŠæ³•å°±æ˜¯æˆ‘ä»¬çš„åŒ…è£…åŒ…ä¸­ç›´æ¥åŒ…å«è¿è¡Œç¯å¢ƒçš„å®‰è£…ï¼Œè®©åŒä¸€ä»½ç¯å¢ƒå¯ä»¥å¿«é€Ÿå¤åˆ¶åˆ°ä»»æ„ä¸€å°ç‰©ç†æœºä¸Šã€‚&lt;/p&gt;
&lt;h3 id=&quot;èµ„æºåˆ©ç”¨ç‡ä¸éš”ç¦»&quot;&gt;&lt;a href=&quot;#èµ„æºåˆ©ç”¨ç‡ä¸éš”ç¦»&quot; class=&quot;headerlink&quot; title=&quot;èµ„æºåˆ©ç”¨ç‡ä¸éš”ç¦»&quot;&gt;&lt;/a&gt;èµ„æºåˆ©ç”¨ç‡ä¸éš”ç¦»&lt;/h3&gt;&lt;p&gt;é€šè¿‡ç¡¬ä»¶æ¨¡æ‹Ÿï¼Œå¹¶åŒ…å«ä¸€å¥—å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œåº”ç”¨å¯ä»¥ç‹¬ç«‹è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸­ï¼Œä¸å¤–ç•Œéš”ç¦»ã€‚å¹¶ä¸”å¯ä»¥åœ¨åŒä¸€å°ç‰©ç†æœºä¸Šï¼Œå¼€å¯å¤šä¸ªä¸åŒçš„è™šæ‹Ÿæœºå¯åŠ¨æœåŠ¡ï¼Œå³ä¸€å°æœåŠ¡å™¨ï¼Œæä¾›å¤šå¥—æœåŠ¡ï¼Œä¸”èµ„æºå®Œå…¨ç›¸äº’éš”ç¦»ï¼Œäº’ä¸å½±å“ã€‚ä¸ä»…èƒ½æ›´å¥½æé«˜èµ„æºåˆ©ç”¨ç‡ç‡ï¼Œé™ä½æˆæœ¬ï¼Œè€Œä¸”ä¹Ÿæœ‰åˆ©äºæœåŠ¡çš„ç¨³å®šæ€§ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç¼ºç‚¹&quot;&gt;&lt;a href=&quot;#ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç¼ºç‚¹&quot; class=&quot;headerlink&quot; title=&quot;ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç¼ºç‚¹&quot;&gt;&lt;/a&gt;ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç¼ºç‚¹&lt;/h3&gt;&lt;h4 id=&quot;èµ„æºå ç”¨å¤§&quot;&gt;&lt;a href=&quot;#èµ„æºå ç”¨å¤§&quot; class=&quot;headerlink&quot; title=&quot;èµ„æºå ç”¨å¤§&quot;&gt;&lt;/a&gt;èµ„æºå ç”¨å¤§&lt;/h4&gt;&lt;p&gt;ç”±äºè™šæ‹Ÿæœºæ˜¯æ¨¡æ‹Ÿå‡ºä¸€å¥—å®Œæ•´ç³»ç»Ÿï¼ŒåŒ…å«ä¼—å¤šç³»ç»Ÿçº§åˆ«çš„æ–‡ä»¶å’Œåº“ï¼Œè¿è¡Œä¹Ÿéœ€è¦å ç”¨ä¸€éƒ¨åˆ†èµ„æºï¼Œå•å•å¯åŠ¨ä¸€ä¸ªç©ºçš„è™šæ‹Ÿæœºï¼Œå¯èƒ½å°±è¦å ç”¨ 100+MB çš„å†…å­˜äº†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å¯åŠ¨ç¼“æ…¢&quot;&gt;&lt;a href=&quot;#å¯åŠ¨ç¼“æ…¢&quot; class=&quot;headerlink&quot; title=&quot;å¯åŠ¨ç¼“æ…¢&quot;&gt;&lt;/a&gt;å¯åŠ¨ç¼“æ…¢&lt;/h4&gt;&lt;p&gt;åŒæ ·æ˜¯ç”±äºå®Œæ•´ç³»ç»Ÿï¼Œåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­å°±éœ€è¦è¿è¡Œå„ç§ç³»ç»Ÿåº”ç”¨å’Œæ­¥éª¤ï¼Œä¹Ÿå°±æ˜¯è·Ÿæˆ‘ä»¬å¹³æ—¶å¯åŠ¨ç”µè„‘ä¸€æ ·çš„è€—æ—¶ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å†—ä½™æ­¥éª¤å¤š&quot;&gt;&lt;a href=&quot;#å†—ä½™æ­¥éª¤å¤š&quot; class=&quot;headerlink&quot; title=&quot;å†—ä½™æ­¥éª¤å¤š&quot;&gt;&lt;/a&gt;å†—ä½™æ­¥éª¤å¤š&lt;/h4&gt;&lt;p&gt;ç³»ç»Ÿæœ‰è®¸å¤šå†…ç½®çš„ç³»ç»Ÿæ“ä½œï¼Œä¾‹å¦‚ç”¨æˆ·ç™»å½•ï¼Œç³»ç»Ÿæ£€æŸ¥ç­‰ç­‰ï¼Œæœ‰äº›åœºæ™¯å…¶å®æˆ‘ä»¬è¦çš„åªæ˜¯ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒï¼Œå…¶å®ä¹Ÿå°±æ˜¯è¯´ï¼Œè™šæ‹Ÿæœºå¯¹éƒ¨åˆ†éœ€æ±‚ç—›ç‚¹æ¥è¯´ï¼Œå…¶å®æ˜¯æœ‰ç‚¹è¿‡é‡çš„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Linux-å®¹å™¨&quot;&gt;&lt;a href=&quot;#Linux-å®¹å™¨&quot; class=&quot;headerlink&quot; title=&quot;Linux å®¹å™¨&quot;&gt;&lt;/a&gt;Linux å®¹å™¨&lt;/h2&gt;&lt;p&gt;Linux ä¸­çš„ä¸€é¡¹è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œç§°ä¸º Linux å®¹å™¨æŠ€æœ¯(LXC)ã€‚å®ƒåœ¨è¿›ç¨‹å±‚é¢æ¨¡æ‹Ÿå‡ºä¸€å¥—éš”ç¦»çš„ç¯å¢ƒé…ç½®ï¼Œä½†å¹¶æ²¡æœ‰æ¨¡æ‹Ÿç¡¬ä»¶å’Œå®Œæ•´çš„æ“ä½œç³»ç»Ÿã€‚å› æ­¤å®ƒå®Œå…¨è§„é¿äº†ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç¼ºç‚¹ï¼Œåœ¨å¯åŠ¨é€Ÿåº¦ï¼Œèµ„æºåˆ©ç”¨ä¸Šè¿œè¿œä¼˜äºè™šæ‹Ÿæœºï¼›&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>Dockerï¼Œæ˜¯ä¸€æ¬¾ç°åœ¨æœ€æµè¡Œçš„ è½¯ä»¶å®¹å™¨å¹³å°ï¼Œæä¾›äº†è½¯ä»¶è¿è¡Œæ—¶æ‰€ä¾èµ–çš„ç¯å¢ƒã€‚</p><h2 id="ç‰©ç†æœº"><a href="#ç‰©ç†æœº" class="headerlink" title="ç‰©ç†æœº"></a>ç‰©ç†æœº</h2><p>ç¡¬ä»¶ç¯å¢ƒï¼ŒçœŸå®çš„ è®¡ç®—æœºå®ä½“ï¼ŒåŒ…å«äº†ä¾‹å¦‚ç‰©ç†å†…å­˜ï¼Œç¡¬ç›˜ç­‰ç­‰ç¡¬ä»¶ï¼›</p><h2 id="è™šæ‹Ÿæœº"><a href="#è™šæ‹Ÿæœº" class="headerlink" title="è™šæ‹Ÿæœº:"></a>è™šæ‹Ÿæœº:</h2><p>åœ¨ç‰©ç†æœºä¸Š æ¨¡æ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶ç¯å¢ƒå’Œæ“ä½œç³»ç»Ÿï¼Œåº”ç”¨è½¯ä»¶å¯ä»¥è¿è¡Œäºå…¶ä¸­ï¼Œå¹¶ä¸”æ¯«æ— æ„ŸçŸ¥ï¼Œæ˜¯ä¸€å¥—éš”ç¦»çš„å®Œæ•´ç¯å¢ƒã€‚æœ¬è´¨ä¸Šï¼Œå®ƒåªæ˜¯ç‰©ç†æœºä¸Šçš„ä¸€ä»½è¿è¡Œæ–‡ä»¶ã€‚</p><h2 id="ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæœºï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæœºï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæœºï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæœºï¼Ÿ</h2><h3 id="ç¯å¢ƒé…ç½®ä¸è¿ç§»"><a href="#ç¯å¢ƒé…ç½®ä¸è¿ç§»" class="headerlink" title="ç¯å¢ƒé…ç½®ä¸è¿ç§»"></a>ç¯å¢ƒé…ç½®ä¸è¿ç§»</h3><p>åœ¨è½¯ä»¶å¼€å‘å’Œè¿è¡Œä¸­ï¼Œç¯å¢ƒä¾èµ–ä¸€ç›´æ˜¯ä¸€ä¸ªå¾ˆå¤´ç–¼çš„éš¾é¢˜ï¼Œæ¯”å¦‚ä½ æƒ³è¿è¡Œ node åº”ç”¨ï¼Œé‚£è‡³å°‘ç¯å¢ƒå¾—å®‰è£… node å§ï¼Œè€Œä¸”ä¸åŒç‰ˆæœ¬ï¼Œä¸åŒç³»ç»Ÿéƒ½ä¼šå½±å“è¿è¡Œã€‚è§£å†³çš„åŠæ³•å°±æ˜¯æˆ‘ä»¬çš„åŒ…è£…åŒ…ä¸­ç›´æ¥åŒ…å«è¿è¡Œç¯å¢ƒçš„å®‰è£…ï¼Œè®©åŒä¸€ä»½ç¯å¢ƒå¯ä»¥å¿«é€Ÿå¤åˆ¶åˆ°ä»»æ„ä¸€å°ç‰©ç†æœºä¸Šã€‚</p><h3 id="èµ„æºåˆ©ç”¨ç‡ä¸éš”ç¦»"><a href="#èµ„æºåˆ©ç”¨ç‡ä¸éš”ç¦»" class="headerlink" title="èµ„æºåˆ©ç”¨ç‡ä¸éš”ç¦»"></a>èµ„æºåˆ©ç”¨ç‡ä¸éš”ç¦»</h3><p>é€šè¿‡ç¡¬ä»¶æ¨¡æ‹Ÿï¼Œå¹¶åŒ…å«ä¸€å¥—å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œåº”ç”¨å¯ä»¥ç‹¬ç«‹è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸­ï¼Œä¸å¤–ç•Œéš”ç¦»ã€‚å¹¶ä¸”å¯ä»¥åœ¨åŒä¸€å°ç‰©ç†æœºä¸Šï¼Œå¼€å¯å¤šä¸ªä¸åŒçš„è™šæ‹Ÿæœºå¯åŠ¨æœåŠ¡ï¼Œå³ä¸€å°æœåŠ¡å™¨ï¼Œæä¾›å¤šå¥—æœåŠ¡ï¼Œä¸”èµ„æºå®Œå…¨ç›¸äº’éš”ç¦»ï¼Œäº’ä¸å½±å“ã€‚ä¸ä»…èƒ½æ›´å¥½æé«˜èµ„æºåˆ©ç”¨ç‡ç‡ï¼Œé™ä½æˆæœ¬ï¼Œè€Œä¸”ä¹Ÿæœ‰åˆ©äºæœåŠ¡çš„ç¨³å®šæ€§ã€‚</p><h3 id="ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç¼ºç‚¹"><a href="#ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç¼ºç‚¹" class="headerlink" title="ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç¼ºç‚¹"></a>ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç¼ºç‚¹</h3><h4 id="èµ„æºå ç”¨å¤§"><a href="#èµ„æºå ç”¨å¤§" class="headerlink" title="èµ„æºå ç”¨å¤§"></a>èµ„æºå ç”¨å¤§</h4><p>ç”±äºè™šæ‹Ÿæœºæ˜¯æ¨¡æ‹Ÿå‡ºä¸€å¥—å®Œæ•´ç³»ç»Ÿï¼ŒåŒ…å«ä¼—å¤šç³»ç»Ÿçº§åˆ«çš„æ–‡ä»¶å’Œåº“ï¼Œè¿è¡Œä¹Ÿéœ€è¦å ç”¨ä¸€éƒ¨åˆ†èµ„æºï¼Œå•å•å¯åŠ¨ä¸€ä¸ªç©ºçš„è™šæ‹Ÿæœºï¼Œå¯èƒ½å°±è¦å ç”¨ 100+MB çš„å†…å­˜äº†ã€‚</p><h4 id="å¯åŠ¨ç¼“æ…¢"><a href="#å¯åŠ¨ç¼“æ…¢" class="headerlink" title="å¯åŠ¨ç¼“æ…¢"></a>å¯åŠ¨ç¼“æ…¢</h4><p>åŒæ ·æ˜¯ç”±äºå®Œæ•´ç³»ç»Ÿï¼Œåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­å°±éœ€è¦è¿è¡Œå„ç§ç³»ç»Ÿåº”ç”¨å’Œæ­¥éª¤ï¼Œä¹Ÿå°±æ˜¯è·Ÿæˆ‘ä»¬å¹³æ—¶å¯åŠ¨ç”µè„‘ä¸€æ ·çš„è€—æ—¶ã€‚</p><h4 id="å†—ä½™æ­¥éª¤å¤š"><a href="#å†—ä½™æ­¥éª¤å¤š" class="headerlink" title="å†—ä½™æ­¥éª¤å¤š"></a>å†—ä½™æ­¥éª¤å¤š</h4><p>ç³»ç»Ÿæœ‰è®¸å¤šå†…ç½®çš„ç³»ç»Ÿæ“ä½œï¼Œä¾‹å¦‚ç”¨æˆ·ç™»å½•ï¼Œç³»ç»Ÿæ£€æŸ¥ç­‰ç­‰ï¼Œæœ‰äº›åœºæ™¯å…¶å®æˆ‘ä»¬è¦çš„åªæ˜¯ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒï¼Œå…¶å®ä¹Ÿå°±æ˜¯è¯´ï¼Œè™šæ‹Ÿæœºå¯¹éƒ¨åˆ†éœ€æ±‚ç—›ç‚¹æ¥è¯´ï¼Œå…¶å®æ˜¯æœ‰ç‚¹è¿‡é‡çš„ã€‚</p><h2 id="Linux-å®¹å™¨"><a href="#Linux-å®¹å™¨" class="headerlink" title="Linux å®¹å™¨"></a>Linux å®¹å™¨</h2><p>Linux ä¸­çš„ä¸€é¡¹è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œç§°ä¸º Linux å®¹å™¨æŠ€æœ¯(LXC)ã€‚å®ƒåœ¨è¿›ç¨‹å±‚é¢æ¨¡æ‹Ÿå‡ºä¸€å¥—éš”ç¦»çš„ç¯å¢ƒé…ç½®ï¼Œä½†å¹¶æ²¡æœ‰æ¨¡æ‹Ÿç¡¬ä»¶å’Œå®Œæ•´çš„æ“ä½œç³»ç»Ÿã€‚å› æ­¤å®ƒå®Œå…¨è§„é¿äº†ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç¼ºç‚¹ï¼Œåœ¨å¯åŠ¨é€Ÿåº¦ï¼Œèµ„æºåˆ©ç”¨ä¸Šè¿œè¿œä¼˜äºè™šæ‹Ÿæœºï¼›</p><hr><a id="more"></a><h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><p>Docker å°±æ˜¯åŸºäº Linux å®¹å™¨çš„ä¸€ç§ä¸Šå±‚å°è£…ï¼Œæä¾›äº†æ›´ä¸ºç®€å•æ˜“ç”¨çš„ API ç”¨äºæ“ä½œ Dockerï¼Œå±äºä¸€ç§<code>å®¹å™¨è§£å†³æ–¹æ¡ˆ</code>ã€‚åŸºæœ¬æ¦‚å¿µ: åœ¨ Docker ä¸­ï¼Œæœ‰ä¸‰ä¸ªæ ¸å¿ƒçš„æ¦‚å¿µ:</p><h3 id="é•œåƒ-Image"><a href="#é•œåƒ-Image" class="headerlink" title="é•œåƒ (Image):"></a>é•œåƒ (Image):</h3><ol><li>ä»åŸç†ä¸Šè¯´ï¼Œé•œåƒå±äºä¸€ç§<code>root æ–‡ä»¶ç³»ç»Ÿ</code>ï¼ŒåŒ…å«äº†ä¸€äº›ç³»ç»Ÿæ–‡ä»¶å’Œç¯å¢ƒé…ç½®ç­‰ï¼Œå¯ä»¥å°†å…¶ç†è§£æˆä¸€å¥—<code>æœ€å°æ“ä½œç³»ç»Ÿ</code>ã€‚ä¸ºäº†è®©é•œåƒè½»é‡åŒ–å’Œå¯ç§»æ¤ï¼ŒDocker é‡‡ç”¨äº†<code>Union FS çš„åˆ†å±‚å­˜å‚¨æ¨¡å¼</code>ã€‚å°†æ–‡ä»¶ç³»ç»Ÿåˆ†æˆä¸€å±‚ä¸€å±‚çš„ç»“æ„ï¼Œé€æ­¥ä»åº•å±‚å¾€ä¸Šå±‚æ„å»ºï¼Œæ¯å±‚æ–‡ä»¶éƒ½å¯ä»¥è¿›è¡Œç»§æ‰¿å’Œå®šåˆ¶ã€‚è¿™é‡Œä»å‰ç«¯çš„è§’åº¦æ¥ç†è§£:<code>é•œåƒå°±ç±»ä¼¼äºä»£ç ä¸­çš„ classï¼Œå¯ä»¥é€šè¿‡ç»§æ‰¿ä¸ä¸Šå±‚å°è£…è¿›è¡Œå¤ç”¨</code>ã€‚</li><li>ä»å¤–å±‚ç³»ç»Ÿçœ‹æ¥ï¼Œä¸€ä¸ªé•œåƒå°±æ˜¯ä¸€ä¸ª Image<code>äºŒè¿›åˆ¶æ–‡ä»¶</code>ï¼Œå¯ä»¥ä»»æ„è¿ç§»ï¼Œåˆ é™¤ï¼Œæ·»åŠ ï¼›<code>é•œåƒæ˜¯å®¹å™¨çš„åŸºçŸ³ï¼Œä¸åŒ…å«ä»»ä½•åŠ¨æ€æ•°æ®ã€‚</code></li></ol><h3 id="å®¹å™¨-Container"><a href="#å®¹å™¨-Container" class="headerlink" title="å®¹å™¨ (Container):"></a>å®¹å™¨ (Container):</h3><ol><li>é•œåƒæ˜¯ä¸€ä»½é™æ€æ–‡ä»¶ç³»ç»Ÿï¼Œæ— æ³•è¿›è¡Œè¿è¡Œæ—¶æ“ä½œï¼Œå°±å¦‚classï¼Œå¦‚æœæˆ‘ä»¬ä¸è¿›è¡Œå®ä¾‹åŒ–æ—¶ï¼Œä¾¿æ— æ³•è¿›è¡Œæ“ä½œå’Œä½¿ç”¨ã€‚å› æ­¤<code>å®¹å™¨å¯ä»¥ç†è§£æˆé•œåƒçš„å®ä¾‹(é•œåƒè¿è¡Œçš„å®ä½“)</code>ï¼Œå³<code>new é•œåƒ()</code>ï¼Œè¿™æ ·æˆ‘ä»¬ä¾¿å¯ä»¥åˆ›å»ºã€ä¿®æ”¹ã€æ“ä½œå®¹å™¨ï¼›ä¸€æ—¦åˆ›å»ºåï¼Œå°±å¯ä»¥ç®€å•ç†è§£æˆä¸€ä¸ªè½»é‡çº§çš„æ“ä½œç³»ç»Ÿï¼Œå¯ä»¥åœ¨å†…éƒ¨è¿›è¡Œå„ç§æ“ä½œï¼Œä¾‹å¦‚è¿è¡Œ node åº”ç”¨ï¼Œæ‹‰å– git ç­‰ï¼›</li><li>åŸºäºé•œåƒçš„åˆ†å±‚ç»“æ„ï¼Œå®¹å™¨æ˜¯<code>ä»¥é•œåƒä¸ºåŸºç¡€åº•å±‚</code>ï¼Œåœ¨ä¸Šé¢å°è£…äº†ä¸€å±‚<code>å®¹å™¨çš„å­˜å‚¨å±‚</code>ï¼›</li></ol><ul><li>å­˜å‚¨ç©ºé—´çš„ç”Ÿå‘½å‘¨æœŸä¸å®¹å™¨ä¸€è‡´ï¼›</li><li>è¯¥å±‚å­˜å‚¨å±‚ä¼šéšç€å®¹å™¨çš„é”€æ¯è€Œé”€æ¯ï¼›</li><li>å°½é‡é¿å…å¾€å®¹å™¨å±‚å†™å…¥æ•°æ®ï¼›</li></ul><ol start="3"><li>å®¹å™¨ä¸­çš„æ•°æ®çš„æŒä¹…åŒ–ç®¡ç†ä¸»è¦ç”±ä¸¤ç§æ–¹å¼:</li></ol><ul><li>æ•°æ®å· (Volume): ä¸€ç§å¯ä»¥åœ¨å¤šä¸ªå®¹å™¨é—´å…±äº«çš„ç‰¹æ®Šç›®å½•ï¼Œå…¶å¤„äºå®¹å™¨å¤–å±‚ï¼Œå¹¶ä¸ä¼šéšç€å®¹å™¨é”€æ¯è€Œåˆ é™¤ï¼›</li><li>æŒ‚è½½ä¸»æœºç›®å½•: ç›´æ¥å°†ä¸€ä¸ªä¸»æœºç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­è¿›è¡Œå†™å…¥ï¼›</li></ul><ol start="4"><li>å®¹å™¨è¿è¡Œç€çœŸæ­£çš„åº”ç”¨è¿›ç¨‹ã€‚æœ‰ç€åˆå»ºã€è¿è¡Œã€åœæ­¢ã€æš‚åœå’Œåˆ é™¤5ç§çŠ¶æ€ã€‚æœ¬è´¨ä¸Šæ˜¯åœ¨ä¸»æœºä¸Šè¿è¡Œçš„ä¸€ä¸ªè¿›ç¨‹ï¼Œä½†å®¹å™¨æœ‰è‡ªå·±ç‹¬ç«‹çš„å‘½åç©ºé—´éš”ç¦»å’Œèµ„æºé™åˆ¶ã€‚</li></ol><h3 id="ä»“åº“-Repository"><a href="#ä»“åº“-Repository" class="headerlink" title="ä»“åº“ (Repository):"></a>ä»“åº“ (Repository):</h3><ol><li>ä¸ºäº†ä¾¿äºé•œåƒçš„ä½¿ç”¨ï¼ŒDocker æä¾›äº†ç±»ä¼¼äº git çš„ä»“åº“æœºåˆ¶ï¼Œåœ¨ä»“åº“ä¸­åŒ…å«ç€å„ç§å„æ ·ç‰ˆæœ¬çš„é•œåƒã€‚å®˜æ–¹æœåŠ¡æ˜¯ Docker Hubï¼›</li><li>å¯ä»¥å¿«é€Ÿåœ°ä»ä»“åº“ä¸­æ‹‰å–å„ç§ç±»å‹çš„é•œåƒï¼Œä¹Ÿå¯ä»¥åŸºäºæŸäº›é•œåƒè¿›è¡Œè‡ªå®šä¹‰ï¼Œç”šè‡³å‘å¸ƒåˆ°ä»“åº“ä¾›ç¤¾åŒºä½¿ç”¨ï¼›</li></ol><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><ul><li>linux<blockquote><p>curl -sSL <a href="https://get.docker.com/" target="_blank" rel="noopener">https://get.docker.com/</a> | shæˆ–è€…wget -qO- <a href="https://get.docker.com/" target="_blank" rel="noopener">https://get.docker.com/</a> | sh</p></blockquote></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl https://get.docker.com/ &gt; install-docker.sh <span class="comment"># ä¸‹è½½å®‰è£…è„šæœ¬</span></span><br><span class="line">sh install-docker.sh <span class="comment"># æ‰§è¡Œå®‰è£…è„šæœ¬</span></span><br></pre></td></tr></table></figure><ul><li><p>Mac<a href="https://download.docker.com/mac/stable/Docker.dmg" target="_blank" rel="noopener">https://download.docker.com/mac/stable/Docker.dmg</a></p></li><li><p>windows<a href="https://download.docker.com/win/stable/Docker%20for%20Windows%20Installer.exe" target="_blank" rel="noopener">https://download.docker.com/win/stable/Docker%20for%20Windows%20Installer.exe</a></p></li></ul><h3 id="ç¬¬ä¸€ä¸ª-docker-é¡¹ç›®"><a href="#ç¬¬ä¸€ä¸ª-docker-é¡¹ç›®" class="headerlink" title="ç¬¬ä¸€ä¸ª docker é¡¹ç›®"></a>ç¬¬ä¸€ä¸ª docker é¡¹ç›®</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ­å»ºä¸€ä¸ªèƒ½å¤Ÿæ‰˜ç®¡é™æ€æ–‡ä»¶çš„ Nginx æœåŠ¡å™¨ï¼Œå®¹å™¨è¿è¡Œç¨‹åºï¼Œè€Œå®¹å™¨å“ªæ¥çš„å‘¢ï¼Ÿå®¹å™¨æ˜¯é•œåƒåˆ›å»ºå‡ºæ¥çš„ã€‚é‚£é•œåƒåˆæ˜¯å“ªæ¥çš„å‘¢ï¼Ÿ</p><p>é•œåƒæ˜¯é€šè¿‡ä¸€ä¸ª Dockerfile æ‰“åŒ…æ¥çš„ï¼Œå®ƒéå¸¸åƒæˆ‘ä»¬å‰ç«¯çš„package.jsonæ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Dockerfile: ç±»ä¼¼äºâ€œpackage.jsonâ€</span><br><span class="line"> |</span><br><span class="line"> V</span><br><span class="line">Image: ç±»ä¼¼äºâ€œWin7çº¯å‡€ç‰ˆ.rarâ€</span><br><span class="line"> |</span><br><span class="line"> V</span><br><span class="line">Container: ä¸€ä¸ªå®Œæ•´æ“ä½œç³»ç»Ÿ</span><br></pre></td></tr></table></figure><h4 id="åˆ›å»ºæ–‡ä»¶"><a href="#åˆ›å»ºæ–‡ä»¶" class="headerlink" title="åˆ›å»ºæ–‡ä»¶"></a>åˆ›å»ºæ–‡ä»¶</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hello-docker</span><br><span class="line">  |____index.html</span><br><span class="line">  |____Dockerfile</span><br></pre></td></tr></table></figure><ul><li><p>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello docker<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>Dockerfile</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx</span><br><span class="line"></span><br><span class="line">COPY .&#x2F;index.html &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;index.html</span><br><span class="line"></span><br><span class="line">EXPOSE 80</span><br></pre></td></tr></table></figure></li></ul><h4 id="æ‰“åŒ…é•œåƒ"><a href="#æ‰“åŒ…é•œåƒ" class="headerlink" title="æ‰“åŒ…é•œåƒ"></a>æ‰“åŒ…é•œåƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> hello-docker/ <span class="comment"># è¿›å…¥åˆšåˆšçš„ç›®å½•</span></span><br><span class="line">docker image build ./ -t hello-docker:1.0.0 <span class="comment"># æ‰“åŒ…é•œåƒ</span></span><br></pre></td></tr></table></figure><p>æ­¤æ—¶é‡åˆ°é—®é¢˜<code>Docker å®‰è£…å æŠ¥ Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">sudo service docker restart</span><br><span class="line">sudo service docker status (should see active (running))</span><br></pre></td></tr></table></figure><p>ç„¶åé‡æ–°è¿è¡Œ <code>docker image build ./ -t hello-docker:1.0.0</code> å‘½ä»¤ã€‚è¿™æ¡å‘½ä»¤çš„æ„æ€æ˜¯åŸºäºè·¯å¾„./ï¼ˆå½“å‰è·¯å¾„ï¼‰æ‰“åŒ…ä¸€ä¸ªé•œåƒï¼Œé•œåƒçš„åå­—æ˜¯hello-dockerï¼Œç‰ˆæœ¬å·æ˜¯1.0.0ã€‚è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨å¯»æ‰¾Dockerfileæ¥æ‰“åŒ…å‡ºä¸€ä¸ªé•œåƒã€‚</p><p>è§£è¯»ä¸‹Dockerfileçš„å†…å®¹ï¼š</p><ul><li>FROM nginxï¼šåŸºäºå“ªä¸ªé•œåƒ</li><li>COPY ./index.html /usr/share/nginx/html/index.htmlï¼šå°†å®¿ä¸»æœºä¸­çš„./index.htmlæ–‡ä»¶å¤åˆ¶è¿›å®¹å™¨é‡Œçš„/usr/share/nginx/html/index.html</li><li>EXPOSE 80ï¼šå®¹å™¨å¯¹å¤–æš´éœ²80ç«¯å£</li></ul><blockquote><p>æ³¨æ„ï¼Docker ä¸­çš„é€‰é¡¹ï¼ˆOptionsï¼‰æ”¾çš„ä½ç½®éå¸¸æœ‰è®²ç©¶ï¼Œdocker â€“help imageå’Œdocker image â€“helpæ˜¯å®Œå…¨ä¸åŒçš„å‘½ä»¤</p></blockquote><h4 id="é…ç½®å›½å†…é•œåƒæº"><a href="#é…ç½®å›½å†…é•œåƒæº" class="headerlink" title="é…ç½®å›½å†…é•œåƒæº"></a>é…ç½®å›½å†…é•œåƒæº</h4><p>åœ¨ Linux ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ /etc/docker/daemon.json ( å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥åˆ›å»ºå®ƒ ) è¿™ä¸ª Docker æœåŠ¡çš„é…ç½®æ–‡ä»¶è¾¾åˆ°æ•ˆæœã€‚</p><ul><li>Dockerä¸­å›½å®˜æ–¹é•œåƒåŠ é€Ÿ<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;registry-mirrors&quot;: [</span><br><span class="line">        &quot;https:&#x2F;&#x2F;registry.docker-cn.com&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ç½‘æ˜“163é•œåƒåŠ é€Ÿ<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;http:&#x2F;&#x2F;hub-mirror.c.163.com&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ä¸­ç§‘å¤§é•œåƒåŠ é€Ÿ<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;registry-mirrors&quot;: [&quot;https:&#x2F;&#x2F;docker.mirrors.ustc.edu.cn&quot;]     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>ç›´æ¥ä¸‹è½½ç«™ç‚¹é•œåƒ<blockquote><p>docker pull hub.c.163.com/library/tomcat:latest  //å¤åˆ¶ç«™ç‚¹é“¾æ¥ç”¨ pull ä¸‹æ¥</p></blockquote></li></ul><p>ç„¶åé‡å¯ docker è®©é…ç½®ç”Ÿæ•ˆ<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡ docker info æ¥æŸ¥é˜…å½“å‰æ³¨å†Œçš„é•œåƒæºåˆ—è¡¨ï¼ŒéªŒè¯æˆ‘ä»¬é…ç½®çš„é•œåƒæºæ˜¯å¦ç”Ÿæ•ˆ<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker info</span><br></pre></td></tr></table></figure></p><h4 id="è¿è¡Œå®¹å™¨"><a href="#è¿è¡Œå®¹å™¨" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker container create -p 9000:80 hello-docker:1.0.0 <span class="comment"># æ ¹æ®é•œåƒåˆ›å»ºå®¹å™¨</span></span><br><span class="line">docker container start xxx <span class="comment"># xxx ä¸ºä¸Šä¸€æ¡å‘½ä»¤è¿è¡Œå¾—åˆ°çš„ç»“æœ</span></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€ip:9000ï¼Œå°±èƒ½åˆšåˆšè‡ªå·±å†™çš„index.htmlå†…å®¹ã€‚</p><p>åœ¨ä¸Šè¾¹ç¬¬ä¸€ä¸ªå‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨docker container createæ¥åˆ›å»ºåŸºäºhello-docker:1.0.0é•œåƒçš„ä¸€ä¸ªå®¹å™¨ï¼Œä½¿ç”¨-pæ¥æŒ‡å®šç«¯å£ç»‘å®šâ€”â€”å°†å®¹å™¨ä¸­çš„80ç«¯å£ç»‘å®šåœ¨å®¿ä¸»æœºçš„9000ç«¯å£ã€‚æ‰§è¡Œå®Œè¯¥å‘½ä»¤ï¼Œä¼šè¿”å›ä¸€ä¸ªå®¹å™¨IDè€Œç¬¬äºŒä¸ªå‘½ä»¤ï¼Œåˆ™æ˜¯å¯åŠ¨è¿™ä¸ªå®¹å™¨å¯åŠ¨åï¼Œå°±èƒ½é€šè¿‡è®¿é—®æœ¬æœºçš„9000ç«¯å£æ¥è¾¾åˆ°è®¿é—®å®¹å™¨å†…80ç«¯å£çš„æ•ˆæœäº†</p><blockquote><p>Tips: ä½ å¯ä»¥ä½¿ç”¨docker container lsæ¥æŸ¥çœ‹å½“å‰è¿è¡Œçš„å®¹å™¨å½“å®¹å™¨è¿è¡Œåï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›å…¥å®¹å™¨å†…éƒ¨ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container <span class="built_in">exec</span> -it xxx /bin/bash <span class="comment"># xxx ä¸ºå®¹å™¨ID</span></span><br></pre></td></tr></table></figure></p></blockquote><p>åŸç†å®é™…ä¸Šæ˜¯å¯åŠ¨äº†å®¹å™¨å†…çš„/bin/bashï¼Œæ­¤æ—¶ä½ å°±å¯ä»¥é€šè¿‡bash shellä¸å®¹å™¨å†…äº¤äº’äº†ã€‚å°±åƒè¿œç¨‹è¿æ¥äº†SSHä¸€æ ·</p><h4 id="é€€å‡ºå®¹å™¨"><a href="#é€€å‡ºå®¹å™¨" class="headerlink" title="é€€å‡ºå®¹å™¨"></a>é€€å‡ºå®¹å™¨</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span> <span class="comment"># ç›´æ¥é€€å‡º</span></span><br><span class="line"></span><br><span class="line">ctrl + p + q <span class="comment"># é€€å‡ºä¸åœæ­¢</span></span><br></pre></td></tr></table></figure><h4 id="åˆ¶ä½œé•œåƒ"><a href="#åˆ¶ä½œé•œåƒ" class="headerlink" title="åˆ¶ä½œé•œåƒ"></a>åˆ¶ä½œé•œåƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit -m=<span class="string">'message'</span> -a=<span class="string">'cosyer'</span> containerId hello-docker:1.0.1</span><br></pre></td></tr></table></figure><h4 id="DockerFile"><a href="#DockerFile" class="headerlink" title="DockerFile"></a>DockerFile</h4><ul><li>FROMï¼šè¿™ä¸ªé•œåƒä¾èµ–è°ï¼ˆåŸºç¡€é•œåƒï¼‰</li><li>MAINTAINERï¼šè¿™ä¸ªé•œåƒæ˜¯è°å†™çš„ï¼ˆç»´æŠ¤è€…çš„ä¿¡æ¯ï¼‰</li><li>RUNï¼šæ„å»ºé•œåƒéœ€è¦è¿è¡Œçš„å‘½ä»¤</li><li>ADDï¼šæ­¥éª¤ï¼šcopu æ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨è§£å‹</li><li>WORKDIRï¼šè®¾ç½®å½“å‰å·¥ä½œç›®å½•</li><li>VOLUMEï¼šè®¾ç½®åˆ¸ï¼ŒæŒ‚è½½ä¸»æœºç›®å½•</li><li>EXPOSEï¼š æš´éœ²ç«¯å£</li><li>CMDï¼šæŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ åªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£</li><li>ENTRYPOINTï¼šæŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤</li><li>ONBUILDï¼šå½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿ DockerFile è¿™ä¸ªæ—¶å€™å°±ä¼šè¿è¡Œ ONBUILD çš„å‘½ä»¤ï¼Œè§¦å‘æŒ‡ä»¤</li><li>COPYï¼šç±»ä¼¼ ADD å°†æˆ‘ä»¬çš„æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­</li><li>ENVï¼šæ„å»ºé•œåƒçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡</li></ul><h4 id="å‘å¸ƒé•œåƒ"><a href="#å‘å¸ƒé•œåƒ" class="headerlink" title="å‘å¸ƒé•œåƒ"></a>å‘å¸ƒé•œåƒ</h4><ul><li>docker login</li><li>docker tag imageId message</li><li>docker push imageId</li></ul><h4 id="é‡å‘½åé•œåƒ"><a href="#é‡å‘½åé•œåƒ" class="headerlink" title="é‡å‘½åé•œåƒ"></a>é‡å‘½åé•œåƒ</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag busybox:latest mybusybox:latest</span><br></pre></td></tr></table></figure><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><ol><li>å†™ä¸€ä¸ª Dockerfile</li><li>ä½¿ç”¨docker image buildæ¥å°†Dockerfileæ‰“åŒ…æˆé•œåƒ</li><li>ä½¿ç”¨docker container createæ¥æ ¹æ®é•œåƒåˆ›å»ºä¸€ä¸ªå®¹å™¨</li><li>ä½¿ç”¨docker container startæ¥å¯åŠ¨ä¸€ä¸ªåˆ›å»ºå¥½çš„å®¹å™¨</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># images</span></span><br><span class="line">docker pull image</span><br><span class="line">docker images <span class="comment"># æŸ¥çœ‹æ‰€æœ‰é•œåƒ</span></span><br><span class="line">docker image ls</span><br><span class="line">docker images | grep busybox</span><br><span class="line">docker rmi imageId -f <span class="comment"># å¼ºåˆ¶åˆ é™¤é•œåƒ</span></span><br><span class="line">docker rmi -f \$(docker images -aq) <span class="comment"># å°æŠ€å·§åˆ é™¤æ‰€æœ‰é•œåƒ</span></span><br><span class="line">docker image rm</span><br><span class="line"></span><br><span class="line"><span class="comment"># container</span></span><br><span class="line">docker ps <span class="comment"># æŸ¥çœ‹è¿è¡Œå®¹å™¨</span></span><br><span class="line">-a åˆ—å‡ºå†å²</span><br><span class="line">-n åˆ—å‡ºæœ€è¿‘</span><br><span class="line">-q åªæ˜¾ç¤ºç¼–å·</span><br><span class="line">docker rm containerId <span class="comment"># åˆ é™¤å®¹å™¨</span></span><br><span class="line">docker rmi -f \$(docker ps -aq) <span class="comment"># å°æŠ€å·§åˆ é™¤æ‰€æœ‰å®¹å™¨</span></span><br><span class="line">docker start id <span class="comment"># å¯åŠ¨å®¹å™¨</span></span><br><span class="line">docker restart id <span class="comment">#é‡å¯å®¹å™¨</span></span><br><span class="line">docker stop id <span class="comment"># åœæ­¢å½“å‰è¿è¡Œçš„å®¹å™¨</span></span><br><span class="line">docker <span class="built_in">kill</span> id <span class="comment"># å¼ºåˆ¶åœæ­¢å½“å‰è¿è¡Œå®¹å™¨</span></span><br><span class="line">docker inspect containerId <span class="comment"># æŸ¥çœ‹å®¹å™¨åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">docker logs containerId <span class="comment"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span></span><br><span class="line">docker <span class="built_in">exec</span> -it containerId /bin/bash <span class="comment"># è¿›å…¥å®¹å™¨</span></span><br><span class="line">docker attach <span class="comment"># æœ¬æœºè¾“å…¥åˆ°å®¹å™¨ä¸­</span></span><br><span class="line">docker cp æœ¬æœºè·¯å¾„ å®¹å™¨id:æ–‡ä»¶è·¯å¾„ <span class="comment"># ä¸»æœºå†…å®¹æ‹·è´åˆ°å®¹å™¨</span></span><br><span class="line">docker cp å®¹å™¨id:æ–‡ä»¶è·¯å¾„ æœ¬æœºè·¯å¾„ <span class="comment"># å®¹å™¨æ‹·è´å†…å®¹åˆ°ä¸»æœº</span></span><br></pre></td></tr></table></figure><p><img src="http://cdn.mydearest.cn/blog/images/docker.png" alt="docker"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">iptables --list | grep DOCKER</span><br><span class="line"></span><br><span class="line">iptables -t nat -nvL</span><br><span class="line"></span><br><span class="line">sysctl net.ipv4.ip_forward  </span><br><span class="line"></span><br><span class="line">firewall-cmd --state</span><br><span class="line"></span><br><span class="line">vi /etc/sysctl.conf</span><br><span class="line"></span><br><span class="line">docker rm -f `docker ps -a -q`</span><br><span class="line"></span><br><span class="line">docker inspect my-nginx9|grep IPAddress</span><br><span class="line"></span><br><span class="line">docker container run --name nginxserver -d -p 80:80 nginx</span><br><span class="line"></span><br><span class="line">172.17.0.2:80</span><br></pre></td></tr></table></figure><ul><li>é‡åˆ°äº†centos7ç³»ç»Ÿdocker å®¿ä¸»æœºä¸èƒ½è®¿é—®å®¹å™¨é—®é¢˜ï¼Œunbantuç³»ç»Ÿæ²¡é—®é¢˜<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœæ­¢docker</span></span><br><span class="line">systemctl stop docker</span><br><span class="line"><span class="comment">#å…³é—­docker0</span></span><br><span class="line">ip link <span class="built_in">set</span> dev docker0 down</span><br><span class="line"><span class="comment">#åˆ é™¤docker0ç½‘æ¡¥</span></span><br><span class="line">brctl delbr docker0</span><br><span class="line"><span class="comment">#é˜²ç«å¢™è®¾ç½®,åæ¥å‘ç°è¿™ä¸€æ­¥ä¸ç”¨æ‰§è¡Œå¯ä»¥</span></span><br><span class="line">iptables -t nat -F POSTROUTING</span><br><span class="line"><span class="comment">#å¢åŠ docker0 ç½‘æ¡¥</span></span><br><span class="line">brctl addbr docker0</span><br><span class="line"><span class="comment">#å¢åŠ ç½‘å¡</span></span><br><span class="line">ip addr add 172.16.10.1/24 dev docker0</span><br><span class="line"><span class="comment">#å¯ç”¨ç½‘å¡</span></span><br><span class="line">ip link <span class="built_in">set</span> dev docker0 up</span><br><span class="line"><span class="comment">#é‡å¯dockeræœåŠ¡</span></span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure></li></ul><h4 id="ä¸‰ç§ç½‘ç»œæ¨¡å¼"><a href="#ä¸‰ç§ç½‘ç»œæ¨¡å¼" class="headerlink" title="ä¸‰ç§ç½‘ç»œæ¨¡å¼"></a>ä¸‰ç§ç½‘ç»œæ¨¡å¼</h4><ul><li>bridge(æ¡¥æ¥)</li><li>host(ä¸»æœºæ¨¡å¼ä¸å®¿ä¸»æœºå…±äº«ç½‘ç»œ)</li><li>none(ä¸é…ç½®ç½‘ç»œ)<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è‡ªå®šä¹‰ç½‘ç»œ</span></span><br><span class="line">docker network create --driver bridge --subnet 192.168.3.0/16 --gateway 192.168.3.1 mynet</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹ç½‘ç»œåˆ—è¡¨</span></span><br><span class="line">docker network ls</span><br><span class="line"><span class="comment"># åˆ é™¤ç½‘ç»œ</span></span><br><span class="line">docker neteork rm id</span><br></pre></td></tr></table></figure></li></ul><h3 id="SPAåº”ç”¨é™æ€ç«™ç‚¹è¿ç§»"><a href="#SPAåº”ç”¨é™æ€ç«™ç‚¹è¿ç§»" class="headerlink" title="SPAåº”ç”¨é™æ€ç«™ç‚¹è¿ç§»"></a>SPAåº”ç”¨é™æ€ç«™ç‚¹è¿ç§»</h3><p>ä¹‹å‰çš„æ­¥éª¤ï¼š</p><ol><li>æœ¬åœ°<code>npm run build</code>æ‰“åŒ…é™æ€æ–‡ä»¶</li><li>æ‰‹åŠ¨FTPä¼ è¾“åˆ°æœåŠ¡å™¨</li><li>git pushæ›´æ–°github</li></ol><p>è‡ªåŠ¨åŒ–CIï¼š</p><ol><li>æ‰§è¡Œgit push</li><li>è‡ªåŠ¨æ£€æµ‹åˆ° github æœ‰ä»£ç æ›´æ–°ï¼Œè‡ªåŠ¨æ‰“åŒ…å‡ºä¸€ä¸ª Docker é•œåƒ</li><li>CI ç¼–è¯‘å®Œæˆåï¼ŒSSH ç™»å½• VPSï¼Œåˆ æ‰ç°æœ‰å®¹å™¨ï¼Œç”¨æ–°é•œåƒåˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨</li></ol><p>å¥½å¤„ï¼š</p><ol><li>ä¸å¿…å†æ‰‹åŠ¨ FTP ä¸Šä¼ æ–‡ä»¶</li><li>å½“è¿›è¡Œä¿®æ”¹é”™åˆ«å­—è¿™æ ·çš„ç®€å•æ“ä½œæ—¶ï¼Œå¯ä»¥å…æµ‹ã€‚æ”¹å®Œç›´æ¥git pushï¼Œè€Œä¸å¿…æœ¬åœ°npm run build</li></ol><h4 id="travis"><a href="#travis" class="headerlink" title="travis"></a>travis</h4><p>å…è´¹çš„CIèµ„æº<a href="https://www.travis-ci.org/" target="_blank" rel="noopener">travis</a>ï¼Œéœ€è¦åœ¨<a href="https://hub.docker.com/" target="_blank" rel="noopener">/hub.docker.com</a>æ³¨å†Œè´¦å·ã€‚ä½¿ç”¨ Github ç™»å½• Travis CI åï¼Œåœ¨å·¦è¾¹ç‚¹å‡»+åŠ å·æ·»åŠ è‡ªå·±çš„ Github ä»“åº“åï¼Œéœ€è¦ç§»æ­¥åˆ° Setting ä¸ºé¡¹ç›®æ·»åŠ DOCKER_USERNAMEå’ŒDOCKER_PASSWORDç¯å¢ƒå˜é‡ã€‚è¿™æ ·ä¿è¯æˆ‘ä»¬å¯ä»¥ç§˜å¯†çš„ç™»å½• Docker Hub è€Œä¸è¢«å…¶ä»–äººçœ‹åˆ°è‡ªå·±çš„å¯†ç ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">language: node_js</span><br><span class="line">node_js:</span><br><span class="line">  - &quot;12&quot;</span><br><span class="line">services:</span><br><span class="line">  - docker</span><br><span class="line"></span><br><span class="line">before_install:</span><br><span class="line">  - npm install</span><br><span class="line"></span><br><span class="line">script:</span><br><span class="line">  - npm run build</span><br><span class="line">  - echo &quot;$DOCKER_PASSWORD&quot; | docker login -u &quot;$DOCKER_USERNAME&quot; --password-stdin</span><br><span class="line">  - docker build -t cosyer&#x2F;hello-docker:1.0.0 .</span><br><span class="line">  - docker push cosyer&#x2F;hello-docker:1.0.0</span><br></pre></td></tr></table></figure><p>ç„¶åéœ€è¦æ·»åŠ  Dockerfile æ–‡ä»¶æ¥æè¿°å¦‚ä½•æ‰“åŒ… Docker é•œåƒã€‚æŒ‰ç…§.travis.ymlçš„å‘½ä»¤æ¬¡åºï¼Œåœ¨æ‰“åŒ…é•œåƒæ—¶ï¼Œnpm run buildå·²ç»æ‰§è¡Œè¿‡äº†ï¼Œé¡¹ç›®äº§å‡ºå·²ç»æœ‰äº†ã€‚ä¸å¿…åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œnpm installå’Œnpm run buildä¹‹ç±»çš„ï¼Œç›´æ¥å¤åˆ¶æ–‡ä»¶å³å¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">FROM nginx</span><br><span class="line"></span><br><span class="line">COPY .&#x2F;dist&#x2F; &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html&#x2F;</span><br><span class="line">COPY .&#x2F;vhost.nginx.conf &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;hello-docker.conf</span><br><span class="line"></span><br><span class="line">EXPOSE 80</span><br></pre></td></tr></table></figure><p>å°†ä¸è®¿é—®æ–‡ä»¶çš„è¯·æ±‚å…¨éƒ¨é‡å®šå‘åˆ°/index.htmlï¼Œå¤„ç†historyè·¯ç”±<code>vhost.nginx.conf</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name localhost;</span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line">        index index.html index.htm;</span><br><span class="line">        proxy_set_header Host $host;</span><br><span class="line"></span><br><span class="line">        if (!-f $request_filename) &#123;</span><br><span class="line">          rewrite ^.*$ &#x2F;index.html break;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page 500 502 503 504 &#x2F;50x.html;</span><br><span class="line">    location &#x3D; &#x2F;50x.html &#123;</span><br><span class="line">        root &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="nginxåå‘ä»£ç†"><a href="#nginxåå‘ä»£ç†" class="headerlink" title="nginxåå‘ä»£ç†"></a>nginxåå‘ä»£ç†</h3><p>å®¿ä¸»æœº<code>/etc/nginx/conf.d/vhost.conf</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name pea3nut.info;</span><br><span class="line"></span><br><span class="line">    location &#x2F; &#123;</span><br><span class="line">        proxy_pass http:&#x2F;&#x2F;127.0.0.1:8082;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>é…ç½®çš„æ„æ€æ˜¯ï¼Œç›‘å¬æ¥è‡ª 80 ç«¯å£çš„æµé‡ï¼Œè‹¥è®¿é—®åŸŸåæ˜¯mydearest.cnï¼ˆæ›¿æ¢ä¸ºä½ è‡ªå·±çš„åŸŸåï¼‰ï¼Œåˆ™å…¨éƒ¨è½¬å‘åˆ°<a href="http://127.0.0.1:8082ä¸­">http://127.0.0.1:8082ä¸­</a></p><h3 id="nodejsç«™ç‚¹è¿ç§»-express"><a href="#nodejsç«™ç‚¹è¿ç§»-express" class="headerlink" title="nodejsç«™ç‚¹è¿ç§»(express)"></a>nodejsç«™ç‚¹è¿ç§»(express)</h3><p>ä¹‹å‰çš„æ­¥éª¤ï¼š</p><ol><li>æœ¬åœ°ä¿®æ”¹å¥½ Ejs æˆ–è€…å…¶ä»–æ–‡ä»¶</li><li>æ‰‹åŠ¨é€šè¿‡ FTP ä¸Šä¼ åˆ°æœåŠ¡å™¨</li><li>åœ¨æœåŠ¡å™¨ç«¯é‡å¯ Nodejs è¿›ç¨‹ã€‚è‹¥æœ‰ npm åŒ…ä¾èµ–æ”¹åŠ¨ï¼Œéœ€è¦åœ¨VP SæœåŠ¡å™¨ä¸Šæ‰‹åŠ¨æ‰§è¡Œnpm install</li><li>git pushæ›´æ–° Github æºç </li></ol><blockquote><p>Tips: ä½ å¯èƒ½å‘ç°äº† Dockerfile ä¸­çš„ENTRYPOINTå‘½ä»¤å¿…é¡»æŒ‡å®šä¸€ä¸ªå‰å°è¿›ç¨‹ã€‚è‹¥ä½ çš„ Nodejs åº”ç”¨æ˜¯ä½¿ç”¨ PM2 è¿›è¡Œä¿æŠ¤çš„ï¼Œä½ éœ€è¦æ›¿æ¢pm2 start app.jsä¸ºpm2-docker app.js</p></blockquote><h3 id="docker-compose"><a href="#docker-compose" class="headerlink" title="docker-compose"></a>docker-compose</h3><p>docker-compose æ˜¯ Docker å®˜æ–¹æä¾›çš„ä¸€ä¸ª Docker ç®¡ç†å·¥å…·ã€‚</p><p>docker-compose å’Œ Docker å·®ä¸å¤šï¼Œä¹Ÿæ˜¯åªè¦ä¸€ä»½æ–‡ä»¶å°±èƒ½è·‘èµ·æ¥ã€‚docker-compose ä¸»è¦çš„ä½œç”¨å°±æ˜¯èƒ½å¤Ÿè®©ä½ ä¸å¿…æ‰‹æ•²é‚£ä¹ˆå¤š Docker å‘½ä»¤</p><ul><li><p>å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -L <span class="string">"https://github.com/docker/compose/releases/download/1.23.2/docker-compose-<span class="variable">$(uname -s)</span>-<span class="variable">$(uname -m)</span>"</span> -o /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line">chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br></pre></td></tr></table></figure></li><li><p>ç›®å½•å»ºç«‹ä¸€ä¸ªç›®å½•ï¼Œç„¶ååœ¨ç›®å½•ä¸­å»ºç«‹docker-compose.ymlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">"3.7"</span> <span class="comment"># è¿™ä¸ªæ˜¯é…ç½®æ–‡ä»¶çš„ç‰ˆæœ¬ï¼Œä¸åŒçš„ç‰ˆæœ¬å·å£°æ˜æ–¹å¼ä¼šæœ‰ç»†å¾®çš„ä¸åŒ</span></span><br><span class="line">services:</span><br><span class="line">    info:</span><br><span class="line">        container_name: hello-docker</span><br><span class="line">        image: cosyer/hello-docker:1.0.0</span><br><span class="line">        ports:</span><br><span class="line">            - <span class="string">"8082:80"</span></span><br><span class="line">        restart: on-failure</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up info</span><br></pre></td></tr></table></figure><p>docker-compose ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å»æ‹‰é•œåƒï¼Œåˆ›å»ºå®¹å™¨ï¼Œå°†å®¹å™¨ä¸­çš„80ç«¯å£æ˜ å°„ä¸ºå®¿ä¸»æœºçš„8082ç«¯å£ã€‚restartå­—æ®µè¿˜è¦æ±‚ docker-compose å½“å‘ç°å®¹å™¨æ„å¤–æŒ‚æ‰æ—¶é‡æ–°å¯åŠ¨å®¹å™¨ï¼Œç±»ä¼¼äº pm2ï¼Œæ‰€ä»¥ä½ ä¸å¿…å†åœ¨å®¹å™¨å†…ä½¿ç”¨ pm2</p></li></ul><p>å¦‚æœæƒ³è¦æ›´æ–°ä¸€ä¸ªé•œåƒåˆ›å»ºæ–°å®¹å™¨ï¼Œåªéœ€è¦ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker-compose pull info</span><br><span class="line">docker-compose stop info</span><br><span class="line">docker-compose rm info</span><br><span class="line">docker-compose up -d info <span class="comment"># -d ä»£è¡¨åå°è¿è¡Œ</span></span><br></pre></td></tr></table></figure></p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/Docker.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>Nginx</title>
      <link>http://mydearest.cn/2020/Nginx.html</link>
      <guid>http://mydearest.cn/2020/Nginx.html</guid>
      <pubDate>Mon, 01 Jun 2020 08:00:08 GMT</pubDate>
      <description>
      
        &lt;p&gt;å®šä¹‰ï¼šè½»é‡çº§ã€é«˜æ€§èƒ½çš„ Web æœåŠ¡å™¨ï¼Œåœ¨ç°ä»Šçš„å¤§å‹åº”ç”¨ã€ç½‘ç«™åŸºæœ¬éƒ½ç¦»ä¸å¼€ Nginxï¼Œå·²ç»æˆä¸ºäº†ä¸€é¡¹å¿…é€‰çš„æŠ€æœ¯ï¼›å…¶å®å¯ä»¥æŠŠå®ƒç†è§£æˆ å…¥å£ç½‘å…³ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å½“ä½ å»é“¶è¡ŒåŠç†ä¸šåŠ¡æ—¶ï¼Œåˆšèµ°è¿›é“¶è¡Œï¼Œéœ€è¦åˆ°å…¥é—¨å¤„çš„æœºå™¨æ’é˜Ÿå–å·ï¼Œç„¶åæŒ‰æŒ‡ä»¤åˆ°å¯¹åº”çš„æŸœå°åŠç†ä¸šåŠ¡ï¼Œæˆ–è€…ä¹Ÿæœ‰å¯èƒ½å‘Šè¯‰ä½ ï¼Œä»Šå¤©ä¸èƒ½æ’å·äº†ï¼Œå›å®¶å§ï¼
è¿™æ ·ä¸€ä¸ªåœºæ™¯ä¸­ï¼Œå–å·æœºå™¨å°±æ˜¯ Nginx(å…¥å£ç½‘å…³)ã€‚ä¸€ä¸ªä¸ªæŸœå°å°±æ˜¯æˆ‘ä»¬çš„ä¸šåŠ¡æœåŠ¡å™¨(åŠç†ä¸šåŠ¡)ï¼›é“¶è¡Œä¸­çš„ä¿é™©ç®±å°±æ˜¯æˆ‘ä»¬çš„æ•°æ®åº“(å­˜å–æ•°æ®)ï¼›ğŸ¤£&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;http://cdn.mydearest.cn/blog/images/nginx.png&quot; alt=&quot;nginx&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç‰¹ç‚¹&quot;&gt;&lt;a href=&quot;#ç‰¹ç‚¹&quot; class=&quot;headerlink&quot; title=&quot;ç‰¹ç‚¹&quot;&gt;&lt;/a&gt;ç‰¹ç‚¹&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;è½»é‡çº§ï¼Œé…ç½®æ–¹ä¾¿çµæ´»ï¼Œæ— ä¾µå…¥æ€§ï¼›&lt;/li&gt;
&lt;li&gt;å ç”¨å†…å­˜å°‘ï¼Œå¯åŠ¨å¿«ï¼Œæ€§èƒ½å¥½ï¼›&lt;/li&gt;
&lt;li&gt;é«˜å¹¶å‘ï¼Œäº‹ä»¶é©±åŠ¨ï¼Œå¼‚æ­¥ï¼›&lt;/li&gt;
&lt;li&gt;çƒ­éƒ¨ç½²ï¼Œä¿®æ”¹é…ç½®çƒ­ç”Ÿæ•ˆï¼›&lt;/li&gt;
&lt;/ol&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>å®šä¹‰ï¼šè½»é‡çº§ã€é«˜æ€§èƒ½çš„ Web æœåŠ¡å™¨ï¼Œåœ¨ç°ä»Šçš„å¤§å‹åº”ç”¨ã€ç½‘ç«™åŸºæœ¬éƒ½ç¦»ä¸å¼€ Nginxï¼Œå·²ç»æˆä¸ºäº†ä¸€é¡¹å¿…é€‰çš„æŠ€æœ¯ï¼›å…¶å®å¯ä»¥æŠŠå®ƒç†è§£æˆ å…¥å£ç½‘å…³ã€‚</p><blockquote><p>å½“ä½ å»é“¶è¡ŒåŠç†ä¸šåŠ¡æ—¶ï¼Œåˆšèµ°è¿›é“¶è¡Œï¼Œéœ€è¦åˆ°å…¥é—¨å¤„çš„æœºå™¨æ’é˜Ÿå–å·ï¼Œç„¶åæŒ‰æŒ‡ä»¤åˆ°å¯¹åº”çš„æŸœå°åŠç†ä¸šåŠ¡ï¼Œæˆ–è€…ä¹Ÿæœ‰å¯èƒ½å‘Šè¯‰ä½ ï¼Œä»Šå¤©ä¸èƒ½æ’å·äº†ï¼Œå›å®¶å§ï¼è¿™æ ·ä¸€ä¸ªåœºæ™¯ä¸­ï¼Œå–å·æœºå™¨å°±æ˜¯ Nginx(å…¥å£ç½‘å…³)ã€‚ä¸€ä¸ªä¸ªæŸœå°å°±æ˜¯æˆ‘ä»¬çš„ä¸šåŠ¡æœåŠ¡å™¨(åŠç†ä¸šåŠ¡)ï¼›é“¶è¡Œä¸­çš„ä¿é™©ç®±å°±æ˜¯æˆ‘ä»¬çš„æ•°æ®åº“(å­˜å–æ•°æ®)ï¼›ğŸ¤£</p></blockquote><p><img src="http://cdn.mydearest.cn/blog/images/nginx.png" alt="nginx"></p><h2 id="ç‰¹ç‚¹"><a href="#ç‰¹ç‚¹" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h2><ol><li>è½»é‡çº§ï¼Œé…ç½®æ–¹ä¾¿çµæ´»ï¼Œæ— ä¾µå…¥æ€§ï¼›</li><li>å ç”¨å†…å­˜å°‘ï¼Œå¯åŠ¨å¿«ï¼Œæ€§èƒ½å¥½ï¼›</li><li>é«˜å¹¶å‘ï¼Œäº‹ä»¶é©±åŠ¨ï¼Œå¼‚æ­¥ï¼›</li><li>çƒ­éƒ¨ç½²ï¼Œä¿®æ”¹é…ç½®çƒ­ç”Ÿæ•ˆï¼›</li></ol><hr><a id="more"></a><h2 id="æ¶æ„æ¨¡å‹"><a href="#æ¶æ„æ¨¡å‹" class="headerlink" title="æ¶æ„æ¨¡å‹"></a>æ¶æ„æ¨¡å‹</h2><ul><li><p>åŸºäº socket ä¸ Linux epoll (I/O äº‹ä»¶é€šçŸ¥æœºåˆ¶)ï¼Œå®ç°äº†é«˜å¹¶å‘ï¼›</p><ul><li>åŸºäº socket ä¸ Linux epoll (I/O äº‹ä»¶é€šçŸ¥æœºåˆ¶)ï¼Œå®ç°äº† é«˜å¹¶å‘ï¼›</li><li>ç£ç›˜ä¸è¶³çš„æƒ…å†µï¼Œå¯èƒ½ä¼šå¯¼è‡´é˜»å¡ï¼›</li></ul></li><li><p>Master-worker è¿›ç¨‹æ¨¡å¼</p><ul><li>Nginx å¯åŠ¨æ—¶ä¼šåœ¨å†…å­˜ä¸­å¸¸é©»ä¸€ä¸ª Master ä¸»è¿›ç¨‹<ul><li>è¯»å–é…ç½®æ–‡ä»¶</li><li>åˆ›å»ºã€ç»‘å®šã€å…³é—­ socket</li><li>å¯åŠ¨ã€ç»´æŠ¤ã€é…ç½® worker è¿›ç¨‹</li><li>ç¼–è¯‘è„šæœ¬ã€æ‰“å¼€æ—¥å¿—</li></ul></li><li>master è¿›ç¨‹ä¼šå¼€å¯é…ç½®æ•°é‡çš„ worker è¿›ç¨‹ï¼Œæ¯”å¦‚æ ¹æ® CPU æ ¸æ•°ç­‰<ul><li>åˆ©ç”¨ socket ç›‘å¬è¿æ¥ï¼Œä¸ä¼šæ–°å¼€è¿›ç¨‹æˆ–çº¿ç¨‹ï¼ŒèŠ‚çº¦äº†åˆ›å»ºä¸é”€æ¯è¿›ç¨‹çš„æˆæœ¬</li><li>æ£€æŸ¥ç½‘ç»œã€å­˜å‚¨ï¼ŒæŠŠæ–°è¿æ¥åŠ å…¥åˆ°è½®è¯¢é˜Ÿåˆ—ä¸­ï¼Œå¼‚æ­¥å¤„ç†</li><li>èƒ½æœ‰æ•ˆåˆ©ç”¨ cpu å¤šæ ¸ï¼Œå¹¶é¿å…äº†çº¿ç¨‹åˆ‡æ¢å’Œé”ç­‰å¾…</li></ul></li></ul></li><li>çƒ­éƒ¨ç½²æ¨¡å¼<ul><li>å½“æˆ‘ä»¬ä¿®æ”¹é…ç½®çƒ­é‡å¯åï¼Œmaster è¿›ç¨‹ä¼šä»¥æ–°çš„é…ç½®æ–°åˆ›å»º worker è¿›ç¨‹ï¼Œæ–°è¿æ¥ä¼šå…¨éƒ¨äº¤ç»™æ–°è¿›ç¨‹å¤„ç†</li><li>è€çš„ worker è¿›ç¨‹ä¼šåœ¨å¤„ç†å®Œä¹‹å‰çš„è¿æ¥åè¢« kill æ‰ï¼Œé€æ­¥å…¨æ›¿æ¢æˆæ–°é…ç½®çš„ worker è¿›ç¨‹</li></ul></li></ul><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h3 id="å®˜ç½‘ä¸‹è½½"><a href="#å®˜ç½‘ä¸‹è½½" class="headerlink" title="å®˜ç½‘ä¸‹è½½"></a>å®˜ç½‘ä¸‹è½½</h3><h3 id="é…ç½®æ–‡ä»¶è·¯å¾„ï¼š-usr-local-etc-nginx-nginx-conf"><a href="#é…ç½®æ–‡ä»¶è·¯å¾„ï¼š-usr-local-etc-nginx-nginx-conf" class="headerlink" title="é…ç½®æ–‡ä»¶è·¯å¾„ï¼š /usr/local/etc/nginx/nginx.conf"></a>é…ç½®æ–‡ä»¶è·¯å¾„ï¼š /usr/local/etc/nginx/nginx.conf</h3><h3 id="å¯åŠ¨-ç»ˆç«¯è¾“å…¥-nginxï¼Œè®¿é—®-localhost-8080-å°±èƒ½çœ‹åˆ°-Welcomeâ€¦"><a href="#å¯åŠ¨-ç»ˆç«¯è¾“å…¥-nginxï¼Œè®¿é—®-localhost-8080-å°±èƒ½çœ‹åˆ°-Welcomeâ€¦" class="headerlink" title="å¯åŠ¨: ç»ˆç«¯è¾“å…¥ nginxï¼Œè®¿é—® localhost:8080 å°±èƒ½çœ‹åˆ° Welcomeâ€¦"></a>å¯åŠ¨: ç»ˆç«¯è¾“å…¥ nginxï¼Œè®¿é—® localhost:8080 å°±èƒ½çœ‹åˆ° Welcomeâ€¦</h3><h3 id="åœæ­¢ä¸å¯åŠ¨"><a href="#åœæ­¢ä¸å¯åŠ¨" class="headerlink" title="åœæ­¢ä¸å¯åŠ¨"></a>åœæ­¢ä¸å¯åŠ¨</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx -s stop: <span class="comment"># åœæ­¢æœåŠ¡</span></span><br><span class="line">nginx -s reload <span class="comment"># çƒ­é‡å¯æœåŠ¡</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®ä»£ç†"><a href="#é…ç½®ä»£ç†" class="headerlink" title="é…ç½®ä»£ç†"></a>é…ç½®ä»£ç†</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://xxx.xxx.xx.xx:3000;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨åœºæ™¯"><a href="#å¸¸ç”¨åœºæ™¯" class="headerlink" title="å¸¸ç”¨åœºæ™¯"></a>å¸¸ç”¨åœºæ™¯</h2><h3 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h3><p>å…¶å® Nginx å¯ä»¥ç®—ä¸€å±‚ ä»£ç†æœåŠ¡å™¨ï¼Œå°†å®¢æˆ·ç«¯çš„è¯·æ±‚å¤„ç†ä¸€å±‚åï¼Œå†è½¬å‘åˆ°ä¸šåŠ¡æœåŠ¡å™¨ï¼Œè¿™é‡Œå¯ä»¥åˆ†æˆä¸¤ç§ç±»å‹ï¼Œå…¶å®å®è´¨å°±æ˜¯è¯·æ±‚çš„è½¬å‘ï¼Œä½¿ç”¨ Nginx éå¸¸åˆé€‚ã€é«˜æ•ˆï¼›</p><h3 id="æ­£å‘ä»£ç†-VPN"><a href="#æ­£å‘ä»£ç†-VPN" class="headerlink" title="æ­£å‘ä»£ç†(VPN)"></a>æ­£å‘ä»£ç†(VPN)</h3><ul><li>å³ç”¨æˆ·é€šè¿‡è®¿é—®è¿™å±‚æ­£å‘ä»£ç†æœåŠ¡å™¨ï¼Œå†ç”±ä»£ç†æœåŠ¡å™¨å»åˆ°åŸå§‹æœåŠ¡å™¨è¯·æ±‚å†…å®¹åï¼Œå†è¿”å›ç»™ç”¨æˆ·ï¼›</li><li>ä¾‹å¦‚æˆ‘ä»¬å¸¸ä½¿ç”¨çš„ VPN å°±æ˜¯ä¸€ç§å¸¸è§çš„æ­£å‘ä»£ç†æ¨¡å¼ã€‚é€šå¸¸æˆ‘ä»¬æ— æ³•ç›´æ¥è®¿é—®è°·æ­ŒæœåŠ¡å™¨ï¼Œä½†æ˜¯é€šè¿‡è®¿é—®ä¸€å°å›½å¤–çš„æœåŠ¡å™¨ï¼Œå†ç”±è¿™å°æœåŠ¡å™¨å»è¯·æ±‚è°·æ­Œè¿”å›ç»™ç”¨æˆ·ï¼Œç”¨æˆ·å³å¯è®¿é—®è°·æ­Œï¼›</li></ul><h4 id="ç‰¹ç‚¹-1"><a href="#ç‰¹ç‚¹-1" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ol><li>ä»£ç†æœåŠ¡å™¨å±äº<code>å®¢æˆ·ç«¯å±‚</code>ï¼Œç§°ä¹‹ä¸ºæ­£å‘ä»£ç†ï¼›</li><li>ä»£ç†æœåŠ¡å™¨æ˜¯<code>ä¸ºç”¨æˆ·æœåŠ¡</code>ï¼Œå¯¹äºç”¨æˆ·æ˜¯é€æ˜çš„ï¼Œç”¨æˆ·çŸ¥é“è‡ªå·±è®¿é—®ä»£ç†æœåŠ¡å™¨ï¼›</li><li>å¯¹å†…å®¹æœåŠ¡å™¨æ¥è¯´æ˜¯éšè—çš„ï¼Œå†…å®¹æœåŠ¡å™¨å¹¶æ— æ³•åˆ†æ¸…è®¿é—®æ˜¯æ¥è‡ªç”¨æˆ·æˆ–è€…ä»£ç†ï¼›</li></ol><p><img src="http://cdn.mydearest.cn/blog/images/forward-agent.png" alt="forward-agent"></p><h3 id="åå‘ä»£ç†-Nginx"><a href="#åå‘ä»£ç†-Nginx" class="headerlink" title="åå‘ä»£ç†(Nginx)"></a>åå‘ä»£ç†(Nginx)</h3><ul><li>ç”¨æˆ·è®¿é—®å¤´æ¡çš„åå‘ä»£ç†ç½‘å…³ï¼Œé€šè¿‡ç½‘å…³çš„ä¸€å±‚å¤„ç†å’Œè°ƒåº¦åï¼Œå†ç”±ç½‘å…³å°†è®¿é—®è½¬å‘åˆ°å†…éƒ¨çš„æœåŠ¡å™¨ä¸Šï¼Œè¿”å›å†…å®¹ç»™ç”¨æˆ·ï¼›</li></ul><h4 id="ç‰¹ç‚¹-2"><a href="#ç‰¹ç‚¹-2" class="headerlink" title="ç‰¹ç‚¹"></a>ç‰¹ç‚¹</h4><ol><li>ä»£ç†æœåŠ¡å™¨å±äº<code>æœåŠ¡ç«¯å±‚</code>ï¼Œå› æ­¤ç§°ä¸ºåå‘ä»£ç†ã€‚é€šå¸¸ä»£ç†æœåŠ¡å™¨ä¸å†…éƒ¨å†…å®¹æœåŠ¡å™¨ä¼šéš¶å±äºåŒä¸€å†…ç½‘æˆ–è€…é›†ç¾¤ï¼›</li><li>ä»£ç†æœåŠ¡å™¨æ˜¯<code>ä¸ºå†…å®¹æœåŠ¡å™¨</code>æœåŠ¡çš„ï¼Œå¯¹ç”¨æˆ·æ˜¯éšè—çš„ï¼Œç”¨æˆ·ä¸æ¸…æ¥šè‡ªå·±è®¿é—®çš„å…·ä½“æ˜¯å“ªå°å†…éƒ¨æœåŠ¡å™¨ï¼›</li></ol><p><img src="http://cdn.mydearest.cn/blog/images/reverse-proxy.png" alt="reverse-proxy"></p><h4 id="åå‘ä»£ç†çš„å¥½å¤„"><a href="#åå‘ä»£ç†çš„å¥½å¤„" class="headerlink" title="åå‘ä»£ç†çš„å¥½å¤„:"></a>åå‘ä»£ç†çš„å¥½å¤„:</h4><ol><li><p>å®‰å…¨ä¸æƒé™:ç”¨æˆ·è®¿é—®å¿…é¡»é€šè¿‡åå‘ä»£ç†æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯ä¾¿å¯ä»¥åœ¨åšè¿™å±‚åšç»Ÿä¸€çš„è¯·æ±‚æ ¡éªŒï¼Œè¿‡æ»¤æ‹¦æˆªä¸åˆæ³•ã€å±é™©çš„è¯·æ±‚ï¼Œä»è€Œå°±èƒ½æ›´å¥½çš„ä¿è¯æœåŠ¡å™¨çš„å®‰å…¨ä¸ç¨³å®šï¼›</p></li><li><p>è´Ÿè½½å‡è¡¡: èƒ½æœ‰æ•ˆåˆ†é…æµé‡ï¼Œæœ€å¤§åŒ–é›†ç¾¤çš„ç¨³å®šæ€§ï¼Œä¿è¯ç”¨æˆ·çš„è®¿é—®è´¨é‡ï¼›</p></li></ol><h5 id="è´Ÿè½½å‡è¡¡"><a href="#è´Ÿè½½å‡è¡¡" class="headerlink" title="è´Ÿè½½å‡è¡¡"></a>è´Ÿè½½å‡è¡¡</h5><ul><li><p>è´Ÿè½½å‡è¡¡æ˜¯åŸºäºåå‘ä»£ç†ä¸‹å®ç°çš„ä¸€ç§ æµé‡åˆ†é… åŠŸèƒ½ï¼Œç›®çš„æ˜¯ä¸ºäº†è¾¾åˆ°æœåŠ¡å™¨èµ„æºçš„å……åˆ†åˆ©ç”¨ï¼Œä»¥åŠæ›´å¿«çš„è®¿é—®å“åº”ï¼›</p></li><li><p>å…¶å®å¾ˆå¥½ç†è§£ï¼Œè¿˜æ˜¯ä»¥ä¸Šé¢é“¶è¡Œçš„ä¾‹å­æ¥çœ‹: é€šè¿‡é—¨å£çš„å–å·å™¨ï¼Œç³»ç»Ÿå°±å¯ä»¥æ ¹æ®æ¯ä¸ªæŸœå°çš„ä¸šåŠ¡æ’é˜Ÿæƒ…å†µè¿›è¡Œç”¨æˆ·çš„åˆ†é…ï¼Œä½¿æ¯ä¸ªæŸœå°éƒ½ä¿æŒåœ¨ä¸€ä¸ªæ¯”è¾ƒé«˜æ•ˆçš„è¿ä½œçŠ¶æ€ï¼Œé¿å…å‡ºç°åˆ†é…ä¸å‡çš„æƒ…å†µï¼›</p></li><li><p>ç”±äºç”¨æˆ·å¹¶ä¸çŸ¥é“å†…éƒ¨æœåŠ¡å™¨ä¸­çš„é˜Ÿåˆ—æƒ…å†µï¼Œè€Œåå‘ä»£ç†æœåŠ¡å™¨æ˜¯æ¸…æ¥šçš„ï¼Œå› æ­¤é€šè¿‡Nginxï¼Œä¾¿èƒ½å¾ˆç®€å•åœ°å®ç°æµé‡çš„å‡è¡¡åˆ†é…ï¼›</p></li><li><p>Nginx å®ç°: Upstreamæ¨¡å—ï¼Œè¿™æ ·å½“ç”¨æˆ·è®¿é—® <a href="http://xxx" target="_blank" rel="noopener">http://xxx</a> æ—¶ï¼Œæµé‡ä¾¿ä¼šè¢«æŒ‰ç…§ä¸€å®šçš„è§„åˆ™åˆ†é…åˆ°upstreamä¸­çš„3å°æœåŠ¡å™¨ä¸Šï¼›</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    upstream xxx &#123;</span><br><span class="line">        server <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span>:<span class="number">3001</span>;</span><br><span class="line">        server <span class="number">2.2</span><span class="number">.2</span><span class="number">.2</span>:<span class="number">3001</span>;</span><br><span class="line">        server <span class="number">3.3</span><span class="number">.3</span><span class="number">.3</span>:<span class="number">3001</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen <span class="number">8080</span>;</span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass http:<span class="comment">//xxx;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆ†é…çš„ç­–ç•¥<ul><li>åˆ†é…çš„æƒé‡(weight)<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">upstream xxx &#123;</span><br><span class="line">  server <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span>:<span class="number">3001</span> weight=<span class="number">1</span>;</span><br><span class="line">  server <span class="number">2.2</span><span class="number">.2</span><span class="number">.2</span>:<span class="number">3001</span> weight=<span class="number">1</span>;</span><br><span class="line">  server <span class="number">3.3</span><span class="number">.3</span><span class="number">.3</span>:<span class="number">3001</span> weight=<span class="number">8</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>æ—¶é—´é¡ºåº(é»˜è®¤): æŒ‰ç”¨æˆ·çš„è®¿é—®çš„é¡ºåºé€ä¸€çš„åˆ†é…åˆ°æ­£å¸¸è¿è¡Œçš„æœåŠ¡å™¨ä¸Šï¼›</li><li>è¿æ¥æ•°ä¼˜å…ˆ(least_conn): ä¼˜å…ˆå°†è®¿é—®åˆ†é…åˆ°åˆ—è¡¨ä¸­è¿æ¥æ•°é˜Ÿåˆ—æœ€çŸ­çš„æœåŠ¡å™¨ä¸Šï¼›</li><li>å“åº”æ—¶é—´ä¼˜å…ˆ(fair): ä¼˜å…ˆå°†è®¿é—®åˆ†é…åˆ°åˆ—è¡¨ä¸­è®¿é—®å“åº”æ—¶é—´æœ€çŸ­çš„æœåŠ¡å™¨ä¸Šï¼›</li><li>ip_hash: é€šè¿‡ ip_hash æŒ‡å®šï¼Œä½¿æ¯ä¸ª ip ç”¨æˆ·éƒ½è®¿é—®å›ºå®šçš„æœåŠ¡å™¨ä¸Šï¼Œæœ‰åˆ©äºç”¨æˆ·ç‰¹å¼‚æ€§æ•°æ®çš„ç¼“å­˜ï¼Œä¾‹å¦‚æœ¬åœ° session æœåŠ¡ç­‰</li><li>url_hash: é€šè¿‡ url_hash æŒ‡å®šï¼Œä½¿æ¯ä¸ª url éƒ½åˆ†é…åˆ°å›ºå®šçš„æœåŠ¡å™¨ä¸Šï¼Œæœ‰åˆ©äºç¼“å­˜ï¼›</li></ul></li></ul><h2 id="Nginx-å¯¹äºå‰ç«¯çš„ä½œç”¨"><a href="#Nginx-å¯¹äºå‰ç«¯çš„ä½œç”¨" class="headerlink" title="Nginx å¯¹äºå‰ç«¯çš„ä½œç”¨"></a>Nginx å¯¹äºå‰ç«¯çš„ä½œç”¨</h2><ol><li><p>å¿«é€Ÿé…ç½®é™æ€æœåŠ¡å™¨(å½“è®¿é—® localhost:80 æ—¶ï¼Œå°±ä¼šé»˜è®¤è®¿é—®åˆ° /Users/files/index.html)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">listen <span class="number">80</span>;                                                         </span><br><span class="line">server_name localhost;                                               </span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">root   /Users/files;</span><br><span class="line">index  index.html;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è®¿é—®é™åˆ¶(å¯ä»¥åˆ¶å®šä¸€ç³»åˆ—çš„è§„åˆ™è¿›è¡Œè®¿é—®çš„æ§åˆ¶ï¼Œä¾‹å¦‚ç›´æ¥é€šè¿‡ ip é™åˆ¶)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å±è”½ 192.168.1.1 çš„è®¿é—®ï¼›</span></span><br><span class="line"><span class="comment"># å…è®¸ 192.168.1.2 ~ 10 çš„è®¿é—®ï¼›</span></span><br><span class="line">location / &#123;</span><br><span class="line">    deny  192.168.1.1;</span><br><span class="line">    allow 192.168.1.2/10;</span><br><span class="line">    deny  all;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>è§£å†³è·¨åŸŸ(å…¶å®è·¨åŸŸæ˜¯æµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥ï¼Œè¿™æ„å‘³ç€åªè¦ä¸æ˜¯é€šè¿‡æµè§ˆå™¨ï¼Œå°±å¯ä»¥ç»•å¼€è·¨åŸŸçš„é—®é¢˜ã€‚æ‰€ä»¥åªè¦é€šè¿‡åœ¨åŒåŸŸä¸‹å¯åŠ¨ä¸€ä¸ª Nginx æœåŠ¡ï¼Œè½¬å‘è¯·æ±‚å³å¯)</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">location ^~/api/ &#123;</span><br><span class="line"><span class="comment"># é‡å†™è¯·æ±‚å¹¶ä»£ç†åˆ°å¯¹åº”åŸŸåä¸‹</span></span><br><span class="line">  rewrite ^/api/(.*)$ /<span class="variable">$1</span> <span class="built_in">break</span>;</span><br><span class="line">  proxy_pass https://www.cross-target.com/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å›¾ç‰‡å¤„ç†(é€šè¿‡ ngx_http_image_filter_module è¿™ä¸ªæ¨¡å—ï¼Œå¯ä»¥ä½œä¸ºä¸€å±‚å›¾ç‰‡æœåŠ¡å™¨çš„ä»£ç†ï¼Œåœ¨è®¿é—®çš„æ—¶å€™ å¯¹å›¾ç‰‡è¿›è¡Œç‰¹å®šçš„æ“ä½œï¼Œä¾‹å¦‚è£å‰ªï¼Œæ—‹è½¬ï¼Œå‹ç¼©ç­‰)</p></li><li><p>æœ¬åœ°ä»£ç†ï¼Œç»•è¿‡ç™½åå•é™åˆ¶</p></li></ol><ul><li>ä¾‹å¦‚æˆ‘ä»¬åœ¨æ¥å…¥ä¸€äº›ç¬¬ä¸‰æ–¹æœåŠ¡æ—¶ç»å¸¸ä¼šæœ‰ä¸€äº›åŸŸåç™½åå•çš„é™åˆ¶ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æœ¬åœ°é€šè¿‡localhostè¿›è¡Œå¼€å‘ï¼Œä¾¿æ— æ³•å®ŒæˆåŠŸèƒ½ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥åšä¸€å±‚æœ¬åœ°ä»£ç†ï¼Œä¾¿å¯ä»¥ç›´æ¥é€šè¿‡æŒ‡å®šåŸŸåè®¿é—®æœ¬åœ°å¼€å‘ç¯å¢ƒï¼›</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">listen <span class="number">80</span>;</span><br><span class="line">server_name www.toutiao.com;</span><br><span class="line"></span><br><span class="line"><span class="comment">// server_name xxxx.cn xxxx.xxxx.cn;</span></span><br><span class="line"><span class="comment">// rewrite ^/(.*) https://xxx.xxxx.cn permanent; #è·³è½¬åˆ°Https</span></span><br><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">    proxy_pass http:<span class="comment">//localhost:3000;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/Nginx.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>Hybridæ··åˆæ–¹æ¡ˆ</title>
      <link>http://mydearest.cn/2020/Hybrid.html</link>
      <guid>http://mydearest.cn/2020/Hybrid.html</guid>
      <pubDate>Mon, 01 Jun 2020 07:37:15 GMT</pubDate>
      <description>
      
        &lt;p&gt;éšç€ WebæŠ€æœ¯ å’Œ ç§»åŠ¨è®¾å¤‡ çš„å¿«é€Ÿå‘å±•ï¼Œåœ¨å„å®¶å¤§å‚ä¸­ï¼ŒHybrid æŠ€æœ¯å·²ç»æˆä¸ºä¸€ç§æœ€ä¸»æµæœ€ä¸å¯å–ä»£çš„æ¶æ„æ–¹æ¡ˆä¹‹ä¸€ã€‚ä¸€å¥—å¥½çš„ Hybrid æ¶æ„æ–¹æ¡ˆèƒ½è®© App æ—¢èƒ½æ‹¥æœ‰æè‡´çš„ä½“éªŒå’Œæ€§èƒ½ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ‹¥æœ‰WebæŠ€æœ¯çµæ´»çš„å¼€å‘æ¨¡å¼ã€è·¨å¹³å°èƒ½åŠ›ä»¥åŠçƒ­æ›´æ–°æœºåˆ¶ã€‚å› æ­¤ï¼Œç›¸å…³çš„ Hybrid é¢†åŸŸäººæ‰ä¹Ÿæ˜¯ååˆ†çš„åƒé¦™ï¼Œç²¾é€šHybrid æŠ€æœ¯å’Œç›¸å…³çš„å®æˆ˜ç»éªŒï¼Œä¹Ÿæ˜¯é¢è¯•ä¸­ä¸€é¡¹å¤§å¤§çš„åŠ åˆ†é¡¹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ··åˆæ–¹æ¡ˆç®€æ&quot;&gt;&lt;a href=&quot;#æ··åˆæ–¹æ¡ˆç®€æ&quot; class=&quot;headerlink&quot; title=&quot;æ··åˆæ–¹æ¡ˆç®€æ&quot;&gt;&lt;/a&gt;æ··åˆæ–¹æ¡ˆç®€æ&lt;/h2&gt;&lt;p&gt;Hybrid Appï¼Œä¿—ç§° æ··åˆåº”ç”¨ï¼Œå³æ··åˆäº† NativeæŠ€æœ¯ ä¸ WebæŠ€æœ¯ è¿›è¡Œå¼€å‘çš„ç§»åŠ¨åº”ç”¨ã€‚ç°åœ¨æ¯”è¾ƒæµè¡Œçš„æ··åˆæ–¹æ¡ˆä¸»è¦æœ‰ä¸‰ç§ï¼Œä¸»è¦æ˜¯åœ¨UIæ¸²æŸ“æœºåˆ¶ä¸Šçš„ä¸åŒ:&lt;/p&gt;
&lt;h3 id=&quot;Webview-UI&quot;&gt;&lt;a href=&quot;#Webview-UI&quot; class=&quot;headerlink&quot; title=&quot;Webview UI&quot;&gt;&lt;/a&gt;Webview UI&lt;/h3&gt;&lt;h4 id=&quot;é€šè¿‡-JSBridge-å®Œæˆ-H5-ä¸-Native-çš„åŒå‘é€šè®¯ï¼Œå¹¶-åŸºäº-Webview-è¿›è¡Œé¡µé¢çš„æ¸²æŸ“ï¼›&quot;&gt;&lt;a href=&quot;#é€šè¿‡-JSBridge-å®Œæˆ-H5-ä¸-Native-çš„åŒå‘é€šè®¯ï¼Œå¹¶-åŸºäº-Webview-è¿›è¡Œé¡µé¢çš„æ¸²æŸ“ï¼›&quot; class=&quot;headerlink&quot; title=&quot;é€šè¿‡ JSBridge å®Œæˆ H5 ä¸ Native çš„åŒå‘é€šè®¯ï¼Œå¹¶ åŸºäº Webview è¿›è¡Œé¡µé¢çš„æ¸²æŸ“ï¼›&quot;&gt;&lt;/a&gt;é€šè¿‡ JSBridge å®Œæˆ H5 ä¸ Native çš„åŒå‘é€šè®¯ï¼Œå¹¶ åŸºäº Webview è¿›è¡Œé¡µé¢çš„æ¸²æŸ“ï¼›&lt;/h4&gt;&lt;h5 id=&quot;ä¼˜åŠ¿-ç®€å•æ˜“ç”¨ï¼Œæ¶æ„é—¨æ§›-æˆæœ¬è¾ƒä½ï¼Œé€‚ç”¨æ€§ä¸çµæ´»æ€§æå¼ºï¼›&quot;&gt;&lt;a href=&quot;#ä¼˜åŠ¿-ç®€å•æ˜“ç”¨ï¼Œæ¶æ„é—¨æ§›-æˆæœ¬è¾ƒä½ï¼Œé€‚ç”¨æ€§ä¸çµæ´»æ€§æå¼ºï¼›&quot; class=&quot;headerlink&quot; title=&quot;ä¼˜åŠ¿: ç®€å•æ˜“ç”¨ï¼Œæ¶æ„é—¨æ§›/æˆæœ¬è¾ƒä½ï¼Œé€‚ç”¨æ€§ä¸çµæ´»æ€§æå¼ºï¼›&quot;&gt;&lt;/a&gt;ä¼˜åŠ¿: ç®€å•æ˜“ç”¨ï¼Œæ¶æ„é—¨æ§›/æˆæœ¬è¾ƒä½ï¼Œé€‚ç”¨æ€§ä¸çµæ´»æ€§æå¼ºï¼›&lt;/h5&gt;&lt;h5 id=&quot;Webview-æ€§èƒ½å±€é™ï¼Œåœ¨å¤æ‚é¡µé¢ä¸­ï¼Œè¡¨ç°è¿œä¸å¦‚åŸç”Ÿé¡µé¢ï¼›&quot;&gt;&lt;a href=&quot;#Webview-æ€§èƒ½å±€é™ï¼Œåœ¨å¤æ‚é¡µé¢ä¸­ï¼Œè¡¨ç°è¿œä¸å¦‚åŸç”Ÿé¡µé¢ï¼›&quot; class=&quot;headerlink&quot; title=&quot;Webview æ€§èƒ½å±€é™ï¼Œåœ¨å¤æ‚é¡µé¢ä¸­ï¼Œè¡¨ç°è¿œä¸å¦‚åŸç”Ÿé¡µé¢ï¼›&quot;&gt;&lt;/a&gt;Webview æ€§èƒ½å±€é™ï¼Œåœ¨å¤æ‚é¡µé¢ä¸­ï¼Œè¡¨ç°è¿œä¸å¦‚åŸç”Ÿé¡µé¢ï¼›&lt;/h5&gt;&lt;h3 id=&quot;Native-UI&quot;&gt;&lt;a href=&quot;#Native-UI&quot; class=&quot;headerlink&quot; title=&quot;Native UI&quot;&gt;&lt;/a&gt;Native UI&lt;/h3&gt;&lt;h4 id=&quot;é€šè¿‡-JSBridge-èµ‹äºˆ-H5-åŸç”Ÿèƒ½åŠ›ï¼Œå¹¶è¿›ä¸€æ­¥å°†-JS-ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘-Virtual-DOM-ä¼ é€’è‡³-Native-å±‚ï¼Œå¹¶ä½¿ç”¨-åŸç”Ÿç³»ç»Ÿæ¸²æŸ“ã€‚&quot;&gt;&lt;a href=&quot;#é€šè¿‡-JSBridge-èµ‹äºˆ-H5-åŸç”Ÿèƒ½åŠ›ï¼Œå¹¶è¿›ä¸€æ­¥å°†-JS-ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘-Virtual-DOM-ä¼ é€’è‡³-Native-å±‚ï¼Œå¹¶ä½¿ç”¨-åŸç”Ÿç³»ç»Ÿæ¸²æŸ“ã€‚&quot; class=&quot;headerlink&quot; title=&quot;é€šè¿‡ JSBridge èµ‹äºˆ H5 åŸç”Ÿèƒ½åŠ›ï¼Œå¹¶è¿›ä¸€æ­¥å°† JS ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘(Virtual DOM)ä¼ é€’è‡³ Native å±‚ï¼Œå¹¶ä½¿ç”¨ åŸç”Ÿç³»ç»Ÿæ¸²æŸ“ã€‚&quot;&gt;&lt;/a&gt;é€šè¿‡ JSBridge èµ‹äºˆ H5 åŸç”Ÿèƒ½åŠ›ï¼Œå¹¶è¿›ä¸€æ­¥å°† JS ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘(Virtual DOM)ä¼ é€’è‡³ Native å±‚ï¼Œå¹¶ä½¿ç”¨ åŸç”Ÿç³»ç»Ÿæ¸²æŸ“ã€‚&lt;/h4&gt;&lt;h5 id=&quot;ä¼˜åŠ¿-ç”¨æˆ·ä½“éªŒåŸºæœ¬æ¥è¿‘åŸç”Ÿï¼Œä¸”èƒ½å‘æŒ¥-WebæŠ€æœ¯-å¼€å‘çµæ´»ä¸æ˜“æ›´æ–°çš„ç‰¹æ€§ï¼›&quot;&gt;&lt;a href=&quot;#ä¼˜åŠ¿-ç”¨æˆ·ä½“éªŒåŸºæœ¬æ¥è¿‘åŸç”Ÿï¼Œä¸”èƒ½å‘æŒ¥-WebæŠ€æœ¯-å¼€å‘çµæ´»ä¸æ˜“æ›´æ–°çš„ç‰¹æ€§ï¼›&quot; class=&quot;headerlink&quot; title=&quot;ä¼˜åŠ¿: ç”¨æˆ·ä½“éªŒåŸºæœ¬æ¥è¿‘åŸç”Ÿï¼Œä¸”èƒ½å‘æŒ¥ WebæŠ€æœ¯ å¼€å‘çµæ´»ä¸æ˜“æ›´æ–°çš„ç‰¹æ€§ï¼›&quot;&gt;&lt;/a&gt;ä¼˜åŠ¿: ç”¨æˆ·ä½“éªŒåŸºæœ¬æ¥è¿‘åŸç”Ÿï¼Œä¸”èƒ½å‘æŒ¥ WebæŠ€æœ¯ å¼€å‘çµæ´»ä¸æ˜“æ›´æ–°çš„ç‰¹æ€§ï¼›&lt;/h5&gt;&lt;h5 id=&quot;ä¸Šæ‰‹-æ”¹é€ é—¨æ§›è¾ƒé«˜ï¼Œæœ€å¥½éœ€è¦æŒæ¡ä¸€å®šç¨‹åº¦çš„å®¢æˆ·ç«¯æŠ€æœ¯ã€‚ç›¸æ¯”äºå¸¸è§„Webå¼€å‘ï¼Œéœ€è¦æ›´é«˜çš„å¼€å‘è°ƒè¯•ã€é—®é¢˜æ’æŸ¥æˆæœ¬ï¼›&quot;&gt;&lt;a href=&quot;#ä¸Šæ‰‹-æ”¹é€ é—¨æ§›è¾ƒé«˜ï¼Œæœ€å¥½éœ€è¦æŒæ¡ä¸€å®šç¨‹åº¦çš„å®¢æˆ·ç«¯æŠ€æœ¯ã€‚ç›¸æ¯”äºå¸¸è§„Webå¼€å‘ï¼Œéœ€è¦æ›´é«˜çš„å¼€å‘è°ƒè¯•ã€é—®é¢˜æ’æŸ¥æˆæœ¬ï¼›&quot; class=&quot;headerlink&quot; title=&quot;ä¸Šæ‰‹/æ”¹é€ é—¨æ§›è¾ƒé«˜ï¼Œæœ€å¥½éœ€è¦æŒæ¡ä¸€å®šç¨‹åº¦çš„å®¢æˆ·ç«¯æŠ€æœ¯ã€‚ç›¸æ¯”äºå¸¸è§„Webå¼€å‘ï¼Œéœ€è¦æ›´é«˜çš„å¼€å‘è°ƒè¯•ã€é—®é¢˜æ’æŸ¥æˆæœ¬ï¼›&quot;&gt;&lt;/a&gt;ä¸Šæ‰‹/æ”¹é€ é—¨æ§›è¾ƒé«˜ï¼Œæœ€å¥½éœ€è¦æŒæ¡ä¸€å®šç¨‹åº¦çš„å®¢æˆ·ç«¯æŠ€æœ¯ã€‚ç›¸æ¯”äºå¸¸è§„Webå¼€å‘ï¼Œéœ€è¦æ›´é«˜çš„å¼€å‘è°ƒè¯•ã€é—®é¢˜æ’æŸ¥æˆæœ¬ï¼›&lt;/h5&gt;&lt;h3 id=&quot;å°ç¨‹åº&quot;&gt;&lt;a href=&quot;#å°ç¨‹åº&quot; class=&quot;headerlink&quot; title=&quot;å°ç¨‹åº&quot;&gt;&lt;/a&gt;å°ç¨‹åº&lt;/h3&gt;&lt;h4 id=&quot;é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„-JSBridgeï¼Œèµ‹äºˆäº†-Web-æ›´å¤§çš„æƒé™ï¼Œå¹¶ä½¿ç”¨åŒ-WebView-åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº†-JSé€»è¾‘-ä¸-UIæ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº†-H5-ä¸-Native-æ··åˆç¨‹åº¦ï¼Œå±äºç¬¬ä¸€ç§æ–¹æ¡ˆçš„ä¼˜åŒ–ç‰ˆæœ¬ï¼›&quot;&gt;&lt;a href=&quot;#é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„-JSBridgeï¼Œèµ‹äºˆäº†-Web-æ›´å¤§çš„æƒé™ï¼Œå¹¶ä½¿ç”¨åŒ-WebView-åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº†-JSé€»è¾‘-ä¸-UIæ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº†-H5-ä¸-Native-æ··åˆç¨‹åº¦ï¼Œå±äºç¬¬ä¸€ç§æ–¹æ¡ˆçš„ä¼˜åŒ–ç‰ˆæœ¬ï¼›&quot; class=&quot;headerlink&quot; title=&quot;é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„ JSBridgeï¼Œèµ‹äºˆäº† Web æ›´å¤§çš„æƒé™ï¼Œå¹¶ä½¿ç”¨åŒ WebView åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº† JSé€»è¾‘ ä¸ UIæ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº† H5 ä¸ Native æ··åˆç¨‹åº¦ï¼Œå±äºç¬¬ä¸€ç§æ–¹æ¡ˆçš„ä¼˜åŒ–ç‰ˆæœ¬ï¼›&quot;&gt;&lt;/a&gt;é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„ JSBridgeï¼Œèµ‹äºˆäº† Web æ›´å¤§çš„æƒé™ï¼Œå¹¶ä½¿ç”¨åŒ WebView åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº† JSé€»è¾‘ ä¸ UIæ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº† H5 ä¸ Native æ··åˆç¨‹åº¦ï¼Œå±äºç¬¬ä¸€ç§æ–¹æ¡ˆçš„ä¼˜åŒ–ç‰ˆæœ¬ï¼›&lt;/h4&gt;&lt;h5 id=&quot;ä¼˜åŠ¿-ç”¨æˆ·ä½“éªŒå¥½äºå¸¸è§„-Webview-æ–¹æ¡ˆï¼Œä¸”é€šå¸¸ä¾æ‰˜çš„å¹³å°ä¹Ÿèƒ½æä¾›æ›´ä¸ºå‹å¥½çš„å¼€å‘è°ƒè¯•ä½“éªŒä»¥åŠåŠŸèƒ½ï¼›&quot;&gt;&lt;a href=&quot;#ä¼˜åŠ¿-ç”¨æˆ·ä½“éªŒå¥½äºå¸¸è§„-Webview-æ–¹æ¡ˆï¼Œä¸”é€šå¸¸ä¾æ‰˜çš„å¹³å°ä¹Ÿèƒ½æä¾›æ›´ä¸ºå‹å¥½çš„å¼€å‘è°ƒè¯•ä½“éªŒä»¥åŠåŠŸèƒ½ï¼›&quot; class=&quot;headerlink&quot; title=&quot;ä¼˜åŠ¿: ç”¨æˆ·ä½“éªŒå¥½äºå¸¸è§„ Webview æ–¹æ¡ˆï¼Œä¸”é€šå¸¸ä¾æ‰˜çš„å¹³å°ä¹Ÿèƒ½æä¾›æ›´ä¸ºå‹å¥½çš„å¼€å‘è°ƒè¯•ä½“éªŒä»¥åŠåŠŸèƒ½ï¼›&quot;&gt;&lt;/a&gt;ä¼˜åŠ¿: ç”¨æˆ·ä½“éªŒå¥½äºå¸¸è§„ Webview æ–¹æ¡ˆï¼Œä¸”é€šå¸¸ä¾æ‰˜çš„å¹³å°ä¹Ÿèƒ½æä¾›æ›´ä¸ºå‹å¥½çš„å¼€å‘è°ƒè¯•ä½“éªŒä»¥åŠåŠŸèƒ½ï¼›&lt;/h5&gt;&lt;h5 id=&quot;åŠ£åŠ¿-éœ€è¦ä¾æ‰˜äºç‰¹å®šçš„å¹³å°çš„è§„èŒƒé™å®š&quot;&gt;&lt;a href=&quot;#åŠ£åŠ¿-éœ€è¦ä¾æ‰˜äºç‰¹å®šçš„å¹³å°çš„è§„èŒƒé™å®š&quot; class=&quot;headerlink&quot; title=&quot;åŠ£åŠ¿: éœ€è¦ä¾æ‰˜äºç‰¹å®šçš„å¹³å°çš„è§„èŒƒé™å®š&quot;&gt;&lt;/a&gt;åŠ£åŠ¿: éœ€è¦ä¾æ‰˜äºç‰¹å®šçš„å¹³å°çš„è§„èŒƒé™å®š&lt;/h5&gt;&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>éšç€ WebæŠ€æœ¯ å’Œ ç§»åŠ¨è®¾å¤‡ çš„å¿«é€Ÿå‘å±•ï¼Œåœ¨å„å®¶å¤§å‚ä¸­ï¼ŒHybrid æŠ€æœ¯å·²ç»æˆä¸ºä¸€ç§æœ€ä¸»æµæœ€ä¸å¯å–ä»£çš„æ¶æ„æ–¹æ¡ˆä¹‹ä¸€ã€‚ä¸€å¥—å¥½çš„ Hybrid æ¶æ„æ–¹æ¡ˆèƒ½è®© App æ—¢èƒ½æ‹¥æœ‰æè‡´çš„ä½“éªŒå’Œæ€§èƒ½ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ‹¥æœ‰WebæŠ€æœ¯çµæ´»çš„å¼€å‘æ¨¡å¼ã€è·¨å¹³å°èƒ½åŠ›ä»¥åŠçƒ­æ›´æ–°æœºåˆ¶ã€‚å› æ­¤ï¼Œç›¸å…³çš„ Hybrid é¢†åŸŸäººæ‰ä¹Ÿæ˜¯ååˆ†çš„åƒé¦™ï¼Œç²¾é€šHybrid æŠ€æœ¯å’Œç›¸å…³çš„å®æˆ˜ç»éªŒï¼Œä¹Ÿæ˜¯é¢è¯•ä¸­ä¸€é¡¹å¤§å¤§çš„åŠ åˆ†é¡¹ã€‚</p><h2 id="æ··åˆæ–¹æ¡ˆç®€æ"><a href="#æ··åˆæ–¹æ¡ˆç®€æ" class="headerlink" title="æ··åˆæ–¹æ¡ˆç®€æ"></a>æ··åˆæ–¹æ¡ˆç®€æ</h2><p>Hybrid Appï¼Œä¿—ç§° æ··åˆåº”ç”¨ï¼Œå³æ··åˆäº† NativeæŠ€æœ¯ ä¸ WebæŠ€æœ¯ è¿›è¡Œå¼€å‘çš„ç§»åŠ¨åº”ç”¨ã€‚ç°åœ¨æ¯”è¾ƒæµè¡Œçš„æ··åˆæ–¹æ¡ˆä¸»è¦æœ‰ä¸‰ç§ï¼Œä¸»è¦æ˜¯åœ¨UIæ¸²æŸ“æœºåˆ¶ä¸Šçš„ä¸åŒ:</p><h3 id="Webview-UI"><a href="#Webview-UI" class="headerlink" title="Webview UI"></a>Webview UI</h3><h4 id="é€šè¿‡-JSBridge-å®Œæˆ-H5-ä¸-Native-çš„åŒå‘é€šè®¯ï¼Œå¹¶-åŸºäº-Webview-è¿›è¡Œé¡µé¢çš„æ¸²æŸ“ï¼›"><a href="#é€šè¿‡-JSBridge-å®Œæˆ-H5-ä¸-Native-çš„åŒå‘é€šè®¯ï¼Œå¹¶-åŸºäº-Webview-è¿›è¡Œé¡µé¢çš„æ¸²æŸ“ï¼›" class="headerlink" title="é€šè¿‡ JSBridge å®Œæˆ H5 ä¸ Native çš„åŒå‘é€šè®¯ï¼Œå¹¶ åŸºäº Webview è¿›è¡Œé¡µé¢çš„æ¸²æŸ“ï¼›"></a>é€šè¿‡ JSBridge å®Œæˆ H5 ä¸ Native çš„åŒå‘é€šè®¯ï¼Œå¹¶ åŸºäº Webview è¿›è¡Œé¡µé¢çš„æ¸²æŸ“ï¼›</h4><h5 id="ä¼˜åŠ¿-ç®€å•æ˜“ç”¨ï¼Œæ¶æ„é—¨æ§›-æˆæœ¬è¾ƒä½ï¼Œé€‚ç”¨æ€§ä¸çµæ´»æ€§æå¼ºï¼›"><a href="#ä¼˜åŠ¿-ç®€å•æ˜“ç”¨ï¼Œæ¶æ„é—¨æ§›-æˆæœ¬è¾ƒä½ï¼Œé€‚ç”¨æ€§ä¸çµæ´»æ€§æå¼ºï¼›" class="headerlink" title="ä¼˜åŠ¿: ç®€å•æ˜“ç”¨ï¼Œæ¶æ„é—¨æ§›/æˆæœ¬è¾ƒä½ï¼Œé€‚ç”¨æ€§ä¸çµæ´»æ€§æå¼ºï¼›"></a>ä¼˜åŠ¿: ç®€å•æ˜“ç”¨ï¼Œæ¶æ„é—¨æ§›/æˆæœ¬è¾ƒä½ï¼Œé€‚ç”¨æ€§ä¸çµæ´»æ€§æå¼ºï¼›</h5><h5 id="Webview-æ€§èƒ½å±€é™ï¼Œåœ¨å¤æ‚é¡µé¢ä¸­ï¼Œè¡¨ç°è¿œä¸å¦‚åŸç”Ÿé¡µé¢ï¼›"><a href="#Webview-æ€§èƒ½å±€é™ï¼Œåœ¨å¤æ‚é¡µé¢ä¸­ï¼Œè¡¨ç°è¿œä¸å¦‚åŸç”Ÿé¡µé¢ï¼›" class="headerlink" title="Webview æ€§èƒ½å±€é™ï¼Œåœ¨å¤æ‚é¡µé¢ä¸­ï¼Œè¡¨ç°è¿œä¸å¦‚åŸç”Ÿé¡µé¢ï¼›"></a>Webview æ€§èƒ½å±€é™ï¼Œåœ¨å¤æ‚é¡µé¢ä¸­ï¼Œè¡¨ç°è¿œä¸å¦‚åŸç”Ÿé¡µé¢ï¼›</h5><h3 id="Native-UI"><a href="#Native-UI" class="headerlink" title="Native UI"></a>Native UI</h3><h4 id="é€šè¿‡-JSBridge-èµ‹äºˆ-H5-åŸç”Ÿèƒ½åŠ›ï¼Œå¹¶è¿›ä¸€æ­¥å°†-JS-ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘-Virtual-DOM-ä¼ é€’è‡³-Native-å±‚ï¼Œå¹¶ä½¿ç”¨-åŸç”Ÿç³»ç»Ÿæ¸²æŸ“ã€‚"><a href="#é€šè¿‡-JSBridge-èµ‹äºˆ-H5-åŸç”Ÿèƒ½åŠ›ï¼Œå¹¶è¿›ä¸€æ­¥å°†-JS-ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘-Virtual-DOM-ä¼ é€’è‡³-Native-å±‚ï¼Œå¹¶ä½¿ç”¨-åŸç”Ÿç³»ç»Ÿæ¸²æŸ“ã€‚" class="headerlink" title="é€šè¿‡ JSBridge èµ‹äºˆ H5 åŸç”Ÿèƒ½åŠ›ï¼Œå¹¶è¿›ä¸€æ­¥å°† JS ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘(Virtual DOM)ä¼ é€’è‡³ Native å±‚ï¼Œå¹¶ä½¿ç”¨ åŸç”Ÿç³»ç»Ÿæ¸²æŸ“ã€‚"></a>é€šè¿‡ JSBridge èµ‹äºˆ H5 åŸç”Ÿèƒ½åŠ›ï¼Œå¹¶è¿›ä¸€æ­¥å°† JS ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘(Virtual DOM)ä¼ é€’è‡³ Native å±‚ï¼Œå¹¶ä½¿ç”¨ åŸç”Ÿç³»ç»Ÿæ¸²æŸ“ã€‚</h4><h5 id="ä¼˜åŠ¿-ç”¨æˆ·ä½“éªŒåŸºæœ¬æ¥è¿‘åŸç”Ÿï¼Œä¸”èƒ½å‘æŒ¥-WebæŠ€æœ¯-å¼€å‘çµæ´»ä¸æ˜“æ›´æ–°çš„ç‰¹æ€§ï¼›"><a href="#ä¼˜åŠ¿-ç”¨æˆ·ä½“éªŒåŸºæœ¬æ¥è¿‘åŸç”Ÿï¼Œä¸”èƒ½å‘æŒ¥-WebæŠ€æœ¯-å¼€å‘çµæ´»ä¸æ˜“æ›´æ–°çš„ç‰¹æ€§ï¼›" class="headerlink" title="ä¼˜åŠ¿: ç”¨æˆ·ä½“éªŒåŸºæœ¬æ¥è¿‘åŸç”Ÿï¼Œä¸”èƒ½å‘æŒ¥ WebæŠ€æœ¯ å¼€å‘çµæ´»ä¸æ˜“æ›´æ–°çš„ç‰¹æ€§ï¼›"></a>ä¼˜åŠ¿: ç”¨æˆ·ä½“éªŒåŸºæœ¬æ¥è¿‘åŸç”Ÿï¼Œä¸”èƒ½å‘æŒ¥ WebæŠ€æœ¯ å¼€å‘çµæ´»ä¸æ˜“æ›´æ–°çš„ç‰¹æ€§ï¼›</h5><h5 id="ä¸Šæ‰‹-æ”¹é€ é—¨æ§›è¾ƒé«˜ï¼Œæœ€å¥½éœ€è¦æŒæ¡ä¸€å®šç¨‹åº¦çš„å®¢æˆ·ç«¯æŠ€æœ¯ã€‚ç›¸æ¯”äºå¸¸è§„Webå¼€å‘ï¼Œéœ€è¦æ›´é«˜çš„å¼€å‘è°ƒè¯•ã€é—®é¢˜æ’æŸ¥æˆæœ¬ï¼›"><a href="#ä¸Šæ‰‹-æ”¹é€ é—¨æ§›è¾ƒé«˜ï¼Œæœ€å¥½éœ€è¦æŒæ¡ä¸€å®šç¨‹åº¦çš„å®¢æˆ·ç«¯æŠ€æœ¯ã€‚ç›¸æ¯”äºå¸¸è§„Webå¼€å‘ï¼Œéœ€è¦æ›´é«˜çš„å¼€å‘è°ƒè¯•ã€é—®é¢˜æ’æŸ¥æˆæœ¬ï¼›" class="headerlink" title="ä¸Šæ‰‹/æ”¹é€ é—¨æ§›è¾ƒé«˜ï¼Œæœ€å¥½éœ€è¦æŒæ¡ä¸€å®šç¨‹åº¦çš„å®¢æˆ·ç«¯æŠ€æœ¯ã€‚ç›¸æ¯”äºå¸¸è§„Webå¼€å‘ï¼Œéœ€è¦æ›´é«˜çš„å¼€å‘è°ƒè¯•ã€é—®é¢˜æ’æŸ¥æˆæœ¬ï¼›"></a>ä¸Šæ‰‹/æ”¹é€ é—¨æ§›è¾ƒé«˜ï¼Œæœ€å¥½éœ€è¦æŒæ¡ä¸€å®šç¨‹åº¦çš„å®¢æˆ·ç«¯æŠ€æœ¯ã€‚ç›¸æ¯”äºå¸¸è§„Webå¼€å‘ï¼Œéœ€è¦æ›´é«˜çš„å¼€å‘è°ƒè¯•ã€é—®é¢˜æ’æŸ¥æˆæœ¬ï¼›</h5><h3 id="å°ç¨‹åº"><a href="#å°ç¨‹åº" class="headerlink" title="å°ç¨‹åº"></a>å°ç¨‹åº</h3><h4 id="é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„-JSBridgeï¼Œèµ‹äºˆäº†-Web-æ›´å¤§çš„æƒé™ï¼Œå¹¶ä½¿ç”¨åŒ-WebView-åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº†-JSé€»è¾‘-ä¸-UIæ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº†-H5-ä¸-Native-æ··åˆç¨‹åº¦ï¼Œå±äºç¬¬ä¸€ç§æ–¹æ¡ˆçš„ä¼˜åŒ–ç‰ˆæœ¬ï¼›"><a href="#é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„-JSBridgeï¼Œèµ‹äºˆäº†-Web-æ›´å¤§çš„æƒé™ï¼Œå¹¶ä½¿ç”¨åŒ-WebView-åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº†-JSé€»è¾‘-ä¸-UIæ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº†-H5-ä¸-Native-æ··åˆç¨‹åº¦ï¼Œå±äºç¬¬ä¸€ç§æ–¹æ¡ˆçš„ä¼˜åŒ–ç‰ˆæœ¬ï¼›" class="headerlink" title="é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„ JSBridgeï¼Œèµ‹äºˆäº† Web æ›´å¤§çš„æƒé™ï¼Œå¹¶ä½¿ç”¨åŒ WebView åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº† JSé€»è¾‘ ä¸ UIæ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº† H5 ä¸ Native æ··åˆç¨‹åº¦ï¼Œå±äºç¬¬ä¸€ç§æ–¹æ¡ˆçš„ä¼˜åŒ–ç‰ˆæœ¬ï¼›"></a>é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„ JSBridgeï¼Œèµ‹äºˆäº† Web æ›´å¤§çš„æƒé™ï¼Œå¹¶ä½¿ç”¨åŒ WebView åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº† JSé€»è¾‘ ä¸ UIæ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº† H5 ä¸ Native æ··åˆç¨‹åº¦ï¼Œå±äºç¬¬ä¸€ç§æ–¹æ¡ˆçš„ä¼˜åŒ–ç‰ˆæœ¬ï¼›</h4><h5 id="ä¼˜åŠ¿-ç”¨æˆ·ä½“éªŒå¥½äºå¸¸è§„-Webview-æ–¹æ¡ˆï¼Œä¸”é€šå¸¸ä¾æ‰˜çš„å¹³å°ä¹Ÿèƒ½æä¾›æ›´ä¸ºå‹å¥½çš„å¼€å‘è°ƒè¯•ä½“éªŒä»¥åŠåŠŸèƒ½ï¼›"><a href="#ä¼˜åŠ¿-ç”¨æˆ·ä½“éªŒå¥½äºå¸¸è§„-Webview-æ–¹æ¡ˆï¼Œä¸”é€šå¸¸ä¾æ‰˜çš„å¹³å°ä¹Ÿèƒ½æä¾›æ›´ä¸ºå‹å¥½çš„å¼€å‘è°ƒè¯•ä½“éªŒä»¥åŠåŠŸèƒ½ï¼›" class="headerlink" title="ä¼˜åŠ¿: ç”¨æˆ·ä½“éªŒå¥½äºå¸¸è§„ Webview æ–¹æ¡ˆï¼Œä¸”é€šå¸¸ä¾æ‰˜çš„å¹³å°ä¹Ÿèƒ½æä¾›æ›´ä¸ºå‹å¥½çš„å¼€å‘è°ƒè¯•ä½“éªŒä»¥åŠåŠŸèƒ½ï¼›"></a>ä¼˜åŠ¿: ç”¨æˆ·ä½“éªŒå¥½äºå¸¸è§„ Webview æ–¹æ¡ˆï¼Œä¸”é€šå¸¸ä¾æ‰˜çš„å¹³å°ä¹Ÿèƒ½æä¾›æ›´ä¸ºå‹å¥½çš„å¼€å‘è°ƒè¯•ä½“éªŒä»¥åŠåŠŸèƒ½ï¼›</h5><h5 id="åŠ£åŠ¿-éœ€è¦ä¾æ‰˜äºç‰¹å®šçš„å¹³å°çš„è§„èŒƒé™å®š"><a href="#åŠ£åŠ¿-éœ€è¦ä¾æ‰˜äºç‰¹å®šçš„å¹³å°çš„è§„èŒƒé™å®š" class="headerlink" title="åŠ£åŠ¿: éœ€è¦ä¾æ‰˜äºç‰¹å®šçš„å¹³å°çš„è§„èŒƒé™å®š"></a>åŠ£åŠ¿: éœ€è¦ä¾æ‰˜äºç‰¹å®šçš„å¹³å°çš„è§„èŒƒé™å®š</h5><hr><a id="more"></a><h2 id="Webview"><a href="#Webview" class="headerlink" title="Webview"></a>Webview</h2><p>Webview æ˜¯ Native App ä¸­å†…ç½®çš„ä¸€æ¬¾åŸºäºWebkitå†…æ ¸çš„æµè§ˆå™¨ï¼Œä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆ:</p><ul><li>WebCore æ’ç‰ˆå¼•æ“</li><li>JSCore è§£æå¼•æ“</li></ul><p>åœ¨åŸç”Ÿå¼€å‘ SDK ä¸­ Webview è¢«å°è£…æˆäº†ä¸€ä¸ªç»„ä»¶ï¼Œç”¨äºä½œä¸º Webé¡µé¢ çš„å®¹å™¨ã€‚å› æ­¤ä½œä¸ºå®¿ä¸»çš„å®¢æˆ·ç«¯ä¸­æ‹¥æœ‰æ›´é«˜çš„æƒé™ï¼Œå¯ä»¥å¯¹ Webview ä¸­çš„Webé¡µé¢è¿›è¡Œé…ç½®å’Œå¼€å‘ã€‚HybridæŠ€æœ¯ä¸­åŒç«¯çš„äº¤äº’åŸç†ï¼Œä¾¿æ˜¯åŸºäº Webview çš„ä¸€äº› API å’Œç‰¹æ€§ã€‚</p><h2 id="äº¤äº’åŸç†"><a href="#äº¤äº’åŸç†" class="headerlink" title="äº¤äº’åŸç†"></a>äº¤äº’åŸç†</h2><p>HybridæŠ€æœ¯ä¸­æœ€æ ¸å¿ƒçš„ç‚¹å°±æ˜¯Nativeç«¯ä¸H5ç«¯ä¹‹é—´çš„åŒå‘é€šè®¯å±‚ï¼Œå…¶å®è¿™é‡Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬éœ€è¦ä¸€å¥—è·¨è¯­è¨€é€šè®¯æ–¹æ¡ˆï¼Œä¾¿æ˜¯æˆ‘ä»¬å¸¸å¬åˆ°çš„JSBridgeã€‚</p><h3 id="JavaScript-é€šçŸ¥-Native"><a href="#JavaScript-é€šçŸ¥-Native" class="headerlink" title="JavaScript é€šçŸ¥ Native"></a>JavaScript é€šçŸ¥ Native</h3><ol><li>APIæ³¨å…¥ï¼ŒNative ç›´æ¥åœ¨ JS ä¸Šä¸‹æ–‡ä¸­æŒ‚è½½æ•°æ®æˆ–è€…æ–¹æ³•</li></ol><p>å»¶è¿Ÿè¾ƒä½ï¼Œåœ¨å®‰å“4.1ä»¥ä¸‹å…·æœ‰å®‰å…¨æ€§é—®é¢˜ï¼Œé£é™©è¾ƒé«˜</p><ol start="2"><li>WebView URL Scheme è·³è½¬æ‹¦æˆª</li></ol><p>å…¼å®¹æ€§å¥½ï¼Œä½†å»¶è¿Ÿè¾ƒé«˜ï¼Œä¸”æœ‰é•¿åº¦é™åˆ¶</p><ol start="3"><li>WebView ä¸­çš„ prompt/console/alertæ‹¦æˆª(é€šå¸¸ä½¿ç”¨ prompt)</li></ol><h3 id="Native-é€šçŸ¥-Javascript"><a href="#Native-é€šçŸ¥-Javascript" class="headerlink" title="Native é€šçŸ¥ Javascript"></a>Native é€šçŸ¥ Javascript</h3><ol><li><p>IOS: stringByEvaluatingJavaScriptFromString</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Swift</span></span><br><span class="line">webview.stringByEvaluatingJavaScriptFromString(<span class="string">"alert('NativeCall')"</span>)</span><br></pre></td></tr></table></figure></li><li><p>Android: loadUrl (4.4-)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è°ƒç”¨jsä¸­çš„JSBridge.triggeræ–¹æ³•</span></span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•çš„å¼Šç«¯æ˜¯æ— æ³•è·å–å‡½æ•°è¿”å›å€¼ï¼›</span></span><br><span class="line">webView.loadUrl(<span class="string">"javascript:JSBridge.trigger('NativeCall')"</span>)</span><br></pre></td></tr></table></figure></li><li><p>Android: evaluateJavascript (4.4+)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 4.4+åä½¿ç”¨è¯¥æ–¹æ³•ä¾¿å¯è°ƒç”¨å¹¶è·å–å‡½æ•°è¿”å›å€¼ï¼›</span></span><br><span class="line">mWebView.evaluateJavascriptï¼ˆ<span class="string">"javascript:JSBridge.trigger('NativeCall')"</span>, <span class="keyword">new</span> ValueCallback&lt;<span class="built_in">String</span>&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public <span class="keyword">void</span> onReceiveValue(<span class="built_in">String</span> value) &#123;</span><br><span class="line">        <span class="comment">//æ­¤å¤„ä¸º js è¿”å›çš„ç»“æœ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ol><h2 id="æ¥å…¥æ–¹æ¡ˆ"><a href="#æ¥å…¥æ–¹æ¡ˆ" class="headerlink" title="æ¥å…¥æ–¹æ¡ˆ"></a>æ¥å…¥æ–¹æ¡ˆ</h2><p>æ•´å¥—æ–¹æ¡ˆéœ€è¦ Web ä¸ Native ä¸¤éƒ¨åˆ†å…±åŒæ¥å®Œæˆ:</p><ul><li>Native: è´Ÿè´£å®ç°URLæ‹¦æˆªä¸è§£æã€ç¯å¢ƒä¿¡æ¯çš„æ³¨å…¥ã€æ‹“å±•åŠŸèƒ½çš„æ˜ å°„ã€ç‰ˆæœ¬æ›´æ–°ç­‰åŠŸèƒ½ï¼›</li><li>JavaScirpt: è´Ÿè´£å®ç°åŠŸèƒ½åè®®çš„æ‹¼è£…ã€åè®®çš„å‘é€ã€å‚æ•°çš„ä¼ é€’ã€å›è°ƒç­‰ä¸€ç³»åˆ—åŸºç¡€åŠŸèƒ½ã€‚</li></ul><p>æ¥å…¥æ–¹å¼:</p><ul><li><p>åœ¨çº¿H5: ç›´æ¥å°†é¡¹ç›®éƒ¨ç½²äºçº¿ä¸ŠæœåŠ¡å™¨ï¼Œå¹¶ç”±å®¢æˆ·ç«¯åœ¨ HTML å¤´éƒ¨æ³¨å…¥å¯¹åº”çš„ Bridgeã€‚</p><ul><li>ä¼˜åŠ¿: æ¥å…¥/å¼€å‘æˆæœ¬ä½ï¼Œå¯¹ App çš„ä¾µå…¥å°ï¼›</li><li>åŠ£åŠ¿: é‡åº¦ä¾èµ–ç½‘ç»œï¼Œæ— æ³•ç¦»çº¿ä½¿ç”¨ï¼Œé¦–å±åŠ è½½æ…¢ï¼›</li></ul></li><li><p>å†…ç½®ç¦»çº¿åŒ…: å°†ä»£ç ç›´æ¥å†…ç½®äº App ä¸­ï¼Œå³æœ¬åœ°å­˜å‚¨ä¸­ï¼Œå¯ç”± H5 æˆ–è€… å®¢æˆ·ç«¯å¼•ç”¨ Bridgeã€‚</p><ul><li>ä¼˜åŠ¿: é¦–å±åŠ è½½å¿«ï¼Œå¯ç¦»çº¿åŒ–ä½¿ç”¨ï¼›</li><li>åŠ£åŠ¿: å¼€å‘ã€è°ƒè¯•æˆæœ¬å˜é«˜ï¼Œéœ€è¦å¤šç«¯åˆä½œï¼Œä¸”ä¼šå¢åŠ  App åŒ…ä½“ç§¯</li></ul></li></ul><h2 id="5-ä¼˜åŒ–æ–¹æ¡ˆç®€è¿°"><a href="#5-ä¼˜åŒ–æ–¹æ¡ˆç®€è¿°" class="headerlink" title="5. ä¼˜åŒ–æ–¹æ¡ˆç®€è¿°"></a>5. ä¼˜åŒ–æ–¹æ¡ˆç®€è¿°</h2><ul><li>Webview é¢„åŠ è½½: Webview çš„åˆå§‹åŒ–å…¶å®æŒºè€—æ—¶çš„ã€‚æˆ‘ä»¬æµ‹è¯•è¿‡ï¼Œå¤§æ¦‚åœ¨100~200msä¹‹é—´ï¼Œå› æ­¤å¦‚æœèƒ½å‰ç½®åšå¥½åˆå§‹åŒ–äºå†…å­˜ä¸­ï¼Œä¼šå¤§å¤§åŠ å¿«æ¸²æŸ“é€Ÿåº¦ã€‚</li><li>æ›´æ–°æœºåˆ¶: ä½¿ç”¨ç¦»çº¿åŒ…çš„æ—¶å€™ï¼Œä¾¿ä¼šæ¶‰åŠåˆ°æœ¬åœ°ç¦»çº¿ä»£ç çš„æ›´æ–°é—®é¢˜ï¼Œå› æ­¤éœ€è¦å»ºç«‹ä¸€å¥—äº‘ç«¯ä¸‹å‘åŒ…çš„æœºåˆ¶ï¼Œç”±å®¢æˆ·ç«¯ä¸‹è½½äº‘ç«¯æœ€æ–°ä»£ç åŒ… (zipåŒ…)ï¼Œå¹¶è§£å‹æ›¿æ¢æœ¬åœ°ä»£ç ã€‚<ul><li>å¢é‡æ›´æ–°: ç”±äºä¸‹å‘åŒ…æ˜¯ä¸€ä¸ªä¸‹è½½çš„è¿‡ç¨‹ï¼Œå› æ­¤åŒ…çš„ä½“ç§¯è¶Šå°ï¼Œä¸‹è½½é€Ÿåº¦è¶Šå¿«ï¼Œæµé‡æŸè€—è¶Šä½ã€‚åªæ‰“åŒ…æ”¹å˜çš„æ–‡ä»¶ï¼Œå®¢æˆ·ç«¯ä¸‹è½½åè¦†ç›–å¼æ›¿æ¢ï¼Œèƒ½å¤§å¤§å‡å°æ¯æ¬¡æ›´æ–°åŒ…çš„ä½“ç§¯ã€‚   </li><li>æ¡ä»¶åˆ†å‘: äº‘å¹³å°ä¸‹å‘æ›´æ–°åŒ…æ—¶ï¼Œå¯ä»¥é…åˆå®¢æˆ·ç«¯è®¾ç½®ä¸€ç³»åˆ—çš„æ¡ä»¶ä¸è§„åˆ™ï¼Œä»è€Œå®ç°ä»£ç çš„æ¡ä»¶æ›´æ–°:<ul><li>å• åœ°åŒº æ›´æ–°: ä¾‹å¦‚ä¸€ä¸ªåªæœ‰ä¸­å›½åœ°åŒºæ‰èƒ½æ›´æ–°çš„ç‰ˆæœ¬ï¼›</li><li>æŒ‰ è¯­è¨€ æ›´æ–°: ä¾‹å¦‚åªæœ‰ä¸­æ–‡ç‰ˆæœ¬ä¼šæ›´æ–°ï¼›</li><li>æŒ‰ App ç‰ˆæœ¬ æ›´æ–°: ä¾‹å¦‚åªæœ‰æœ€æ–°ç‰ˆæœ¬çš„ App æ‰ä¼šæ›´æ–°ï¼›</li><li>ç°åº¦ æ›´æ–°: åªæœ‰å°æ¯”ä¾‹ç”¨æˆ·ä¼šæ›´æ–°ï¼›</li><li>ABæµ‹è¯•: åªæœ‰å‘½ä¸­çš„ç”¨æˆ·ä¼šæ›´æ–°ï¼›</li></ul></li></ul></li><li><p>é™çº§æœºåˆ¶: å½“ç”¨æˆ·ä¸‹è½½æˆ–è§£å‹ä»£ç åŒ…å¤±è´¥æ—¶ï¼Œéœ€è¦æœ‰å¥—é™çº§æ–¹æ¡ˆï¼Œé€šå¸¸æœ‰ä¸¤ç§åšæ³•:</p><ul><li>æœ¬åœ°å†…ç½®: éšç€ App æ‰“åŒ…æ—¶å†…ç½®ä¸€ä»½çº¿ä¸Šæœ€æ–°å®Œæ•´ä»£ç åŒ…ï¼Œä¿è¯æœ¬åœ°ä»£ç æ–‡ä»¶çš„å­˜åœ¨ï¼Œèµ„æºåŠ è½½å‡ä½¿ç”¨æœ¬åœ°åŒ–è·¯å¾„ï¼›</li><li>åŸŸåæ‹¦æˆª: èµ„æºåŠ è½½ä½¿ç”¨çº¿ä¸ŠåŸŸåï¼Œé€šè¿‡æ‹¦æˆªåŸŸåæ˜ å°„åˆ°æœ¬åœ°è·¯å¾„ã€‚å½“æœ¬åœ°ä¸å­˜åœ¨æ—¶ï¼Œåˆ™è¯·æ±‚çº¿ä¸Šæ–‡ä»¶ï¼Œå½“å­˜åœ¨æ—¶ï¼Œç›´æ¥åŠ è½½ï¼›</li></ul></li><li><p>è·¨å¹³å°éƒ¨ç½²: Bridgeå±‚ å¯ä»¥åšä¸€å¥—æµè§ˆå™¨é€‚é…ï¼Œåœ¨ä¸€äº›æ— æ³•é€‚é…çš„åŠŸèƒ½ï¼Œåšå¥½é™çº§å¤„ç†ï¼Œä»è€Œä¿è¯ä»£ç åœ¨ä»»ä½•ç¯å¢ƒçš„å¯ç”¨æ€§ï¼Œä¸€å¥—ä»£ç å¯åŒæ—¶è¿è¡Œäº Appå†… ä¸ æ™®é€šæµè§ˆå™¨ï¼›-ç¯å¢ƒç³»ç»Ÿ: ä¸å®¢æˆ·ç«¯è¿›è¡Œç»Ÿä¸€é…åˆï¼Œæ­å»ºå‡º æ­£å¼ / é¢„ä¸Šçº¿ / æµ‹è¯• / å¼€å‘ç¯å¢ƒï¼Œèƒ½å¤§å¤§æé«˜é¡¹ç›®ç¨³å®šæ€§ä¸é—®é¢˜æ’æŸ¥ï¼›</p></li><li>å¼€å‘æ¨¡å¼:<ul><li>èƒ½è¿æ¥PC Chrome/safari è¿›è¡Œä»£ç è°ƒè¯•ï¼›</li><li>å…·æœ‰å¼€å‘è°ƒè¯•å…¥å£ï¼Œå¯ä»¥ä½¿ç”¨åŒæ ·çš„ Webview åŠ è½½å¼€å‘æ—¶çš„æœ¬åœ°ä»£ç ï¼›</li><li>å…·å¤‡æ—¥å¿—ç³»ç»Ÿï¼Œå¯ä»¥æŸ¥çœ‹ Log ä¿¡æ¯ï¼›</li></ul></li></ul>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/Hybrid.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>å¦‚ä½•åœ¨ create-react-app ä¸­ä½¿ç”¨ CSS Modules</title>
      <link>http://mydearest.cn/2020/%E5%A6%82%E4%BD%95%E5%9C%A8%20create-react-app%20%E4%B8%AD%E4%BD%BF%E7%94%A8%20CSS%20Modules.html</link>
      <guid>http://mydearest.cn/2020/%E5%A6%82%E4%BD%95%E5%9C%A8%20create-react-app%20%E4%B8%AD%E4%BD%BF%E7%94%A8%20CSS%20Modules.html</guid>
      <pubDate>Mon, 18 May 2020 03:17:50 GMT</pubDate>
      <description>
      
        &lt;p&gt;å…ˆç®€å•äº†è§£ä¸‹ä»€ä¹ˆæ˜¯ &lt;a href=&quot;https://github.com/css-modules/css-modules&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CSS Modules&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A CSS Module is a CSS file in which all class names and animation names are scoped locally by default&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç®€å•ç‚¹è¯´ CSS Module æ˜¯å…·æœ‰å±€éƒ¨ä½œç”¨åŸŸçš„ css æ–‡ä»¶ã€‚æ—¢ç„¶æåˆ°äº†å±€éƒ¨ä½œç”¨åŸŸï¼Œé‚£ä¹ˆè‚¯å®šæœ‰å…¨å±€ä½œç”¨åŸŸï¼Œåœ¨ create-react-app ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥ css æ–‡ä»¶é€šå¸¸ä¸ºä»¥ä¸‹å½¢å¼ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/* index.css */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-class&quot;&gt;.color&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;attribute&quot;&gt;color&lt;/span&gt;: red;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/* index.tsx */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; React, &amp;#123; Component &amp;#125; &lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;react&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;string&quot;&gt;&#39;./index.css&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Index&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Component&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;comment&quot;&gt;// ...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>å…ˆç®€å•äº†è§£ä¸‹ä»€ä¹ˆæ˜¯ <a href="https://github.com/css-modules/css-modules" target="_blank" rel="noopener">CSS Modules</a></p><blockquote><p>A CSS Module is a CSS file in which all class names and animation names are scoped locally by default</p></blockquote><p>ç®€å•ç‚¹è¯´ CSS Module æ˜¯å…·æœ‰å±€éƒ¨ä½œç”¨åŸŸçš„ css æ–‡ä»¶ã€‚æ—¢ç„¶æåˆ°äº†å±€éƒ¨ä½œç”¨åŸŸï¼Œé‚£ä¹ˆè‚¯å®šæœ‰å…¨å±€ä½œç”¨åŸŸï¼Œåœ¨ create-react-app ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥ css æ–‡ä»¶é€šå¸¸ä¸ºä»¥ä¸‹å½¢å¼ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* index.css */</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* index.tsx */</span></span><br><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><a id="more"></a><h2 id="å…¨å±€æ±¡æŸ“å’Œé”™è¯¯è¦†ç›–"><a href="#å…¨å±€æ±¡æŸ“å’Œé”™è¯¯è¦†ç›–" class="headerlink" title="å…¨å±€æ±¡æŸ“å’Œé”™è¯¯è¦†ç›–"></a>å…¨å±€æ±¡æŸ“å’Œé”™è¯¯è¦†ç›–</h2><p>è¿™ç§å¼•å…¥æ–¹æ³•å°±ä¼šå‡ºç°å…¨å±€æ±¡æŸ“çš„é—®é¢˜ï¼ŒCSS ä½¿ç”¨å…¨å±€é€‰æ‹©å™¨æœºåˆ¶æ¥è®¾ç½®æ ·å¼ï¼Œä¼˜ç‚¹æ˜¯æ–¹ä¾¿é‡å†™æ ·å¼ï¼Œç¼ºç‚¹æ˜¯æ‰€æœ‰çš„æ ·å¼éƒ½æ˜¯å…¨å±€ç”Ÿæ•ˆï¼Œæ ·å¼å¯èƒ½è¢«é”™è¯¯è¦†ç›–ã€‚å‡å®šä¸€ä¸ªé¡µé¢æœ‰ä»¥ä¸‹ä¸¤ä¸ªç»„ä»¶ï¼š</p><ul><li><p><Header>ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</Header></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./header.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"color"</span>&gt;</span>Header color<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>header.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p><Content>, å†…å®¹å¦‚ä¸‹ï¼š</Content></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./content.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">"color"</span>&gt;</span>Content color<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>content.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>æˆ‘ä»¬æœŸå¾…åœ¨é¡µé¢ä¸Š Header color çš„å­—çš„é¢œè‰²ä¸º redï¼ŒContent color ä¸º greenï¼Œä½†å®é™…ä¸Šæ˜¯ä¸¤ä¸ªéƒ½ä¸º greenï¼Œè¿™å°±æ˜¯å› ä¸ºæˆ‘ä»¬ç›´æ¥å¼•å…¥ header.css å’Œ content.css åï¼Œæ ·å¼æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œè€Œç›¸åŒçš„æ ·å¼åˆå¯èƒ½å‡ºç°é”™è¯¯åœ°è¦†ç›–ï¼Œå› æ­¤å°±å‡ºç°äº†ä¸Šé¢çš„æƒ…å†µã€‚</p><p>é¿å…è¿™ç§æƒ…å†µåœ¨ create-react-app çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ CSS Modulesï¼Œä½¿ç”¨æ–¹æ³•å°±æ˜¯å°†å¯¹åº”çš„ css æ–‡ä»¶åç§°å‘½åä¸º [name].module.css çš„å½¢å¼ï¼ˆä½¿ç”¨ less æˆ–è€… sass ç±»ä¼¼ï¼‰ï¼Œä»¥ Header ç»„ä»¶ä¸ºä¾‹ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* header.module.css */</span></span><br><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; Component &#125; <span class="keyword">from</span> <span class="string">'react'</span></span><br><span class="line"><span class="keyword">import</span> headerStyle <span class="keyword">from</span> <span class="string">'./header.module.css'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">Index</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;headerStyle.color&#125;</span>&gt;</span>Header color<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ · Header color çš„é¢œè‰²å°±ä¼šä¸º redã€‚</p><p>å®ƒçš„å®ç°è¿‡ç¨‹å°±æ˜¯åˆ©ç”¨ Webpack çš„ css-loader ç”Ÿæˆï¼ˆåŸºæœ¬ï¼‰å”¯ä¸€çš„ class åç§°ï¼Œåœ¨ create-react-app ä¸­ä¼šä»¥ [filename]_[classname]__[hash] çš„å‘½åè§„åˆ™æ¥ç”Ÿæˆ class åç§°ï¼Œä¾‹å¦‚ Header ç»„ä»¶ç”Ÿæˆåçš„ html å¦‚ä¸‹ï¼š<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header_color__2Oqjl"</span>&gt;</span>Header color<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨äº† CSS Modules åï¼Œå°±ç›¸å½“äºç»™æ¯ä¸ª class åå¤–åŠ åŠ äº†ä¸€ä¸ª :localï¼Œä»¥æ­¤æ¥å®ç°æ ·å¼çš„å±€éƒ¨åŒ–ï¼Œå¦‚æœä½ æƒ³åˆ‡æ¢åˆ°å…¨å±€æ¨¡å¼ï¼Œä½¿ç”¨å¯¹åº”çš„ :globalã€‚:local ä¸ :global çš„åŒºåˆ«æ˜¯ CSS Modules åªä¼šå¯¹ :local å—çš„ class æ ·å¼åšè§„åˆ™å¤„ç†ï¼Œ:global çš„æ ·å¼ç¼–è¯‘åä¸å˜ã€‚</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.color</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* ä»¥ä¸Šä¸ä¸‹é¢ç­‰ä»· */</span></span><br><span class="line"><span class="selector-pseudo">:local(.color)</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å®šä¹‰å…¨å±€æ ·å¼ */</span></span><br><span class="line"><span class="selector-pseudo">:global(.global-bg)</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="composeså¤„ç†å¤ç”¨"><a href="#composeså¤„ç†å¤ç”¨" class="headerlink" title="composeså¤„ç†å¤ç”¨"></a>composeså¤„ç†å¤ç”¨</h2><p>åœ¨å¼€å‘ä¸­ä¼šé‡åˆ°æ ·å¼çš„å¤ç”¨é—®é¢˜ï¼ŒCSS Modules åªæä¾›äº†å”¯ä¸€çš„æ–¹å¼æ¥å¤„ç†ï¼š<code>composes</code> ç»„åˆ:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* åŸºç¡€æ ·å¼ */</span></span><br><span class="line"><span class="selector-class">.base</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#82D7F7</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">composes</span>: base;</span><br><span class="line">  <span class="comment">/* ç»„åˆå¤–éƒ¨æ–‡ä»¶ */</span></span><br><span class="line">  <span class="attribute">composes</span>: bold from <span class="string">'./content.module.css'</span>;</span><br><span class="line">  <span class="comment">/* active å…¶ä»–æ ·å¼ */</span></span><br><span class="line">  <span class="attribute">text-decoration</span>: underline;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨ active ä¸­ composes baseï¼Œç¼–è¯‘åä¼š active ä¼šå˜æˆä¸‰ä¸ª class<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"composes-demo_active__27azZ composes-demo_base__MLJCB content_bold__vgYTg"</span>&gt;</span>active<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨ create-react-app ä¸­ä½¿ç”¨ CSS Modules ä¼šé¢‘ç¹çš„è¾“å…¥ styles.<strong>ï¼Œå¯ä»¥ä½¿ç”¨ <a href="https://github.com/gajus/react-css-modules" target="_blank" rel="noopener">react-css-modules</a>æ¥é¿å…è¿™ç‚¹ï¼Œå®ƒé€šè¿‡é«˜é˜¶å‡½æ•°çš„å½¢å¼æ¥é¿å…é‡å¤è¾“å…¥ styles.</strong>ã€‚</p><p>æ —å­â†“<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> CSSModules <span class="keyword">from</span> <span class="string">'react-css-modules'</span>;</span><br><span class="line"><span class="keyword">import</span> styles <span class="keyword">from</span> <span class="string">'./table.css'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Table</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    render () &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">styleName</span>=<span class="string">'table'</span>&gt;</span></span></span><br><span class="line">            &lt;div styleName='row'&gt;</span><br><span class="line">                &lt;div styleName='cell'&gt;A0&lt;/div&gt;</span><br><span class="line">                &lt;div styleName='cell'&gt;B0&lt;/div&gt;</span><br><span class="line"><span class="xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> CSSModules(Table, styles);</span><br></pre></td></tr></table></figure></p><p>æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å‚è€ƒæ¨¡æ‹Ÿä¸‹<code>react-css-modules</code>çš„å®ç°ã€‚</p><p>æ€»çš„æ¥è¯´åœ¨ create-react-app ä¸­ä½¿ç”¨ CSS Modules è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“ï¼Œå¦‚æœè¿˜æ²¡æœ‰åœ¨é¡¹ç›®ä¸­å°è¯•çš„è¯éå¸¸å€¼å¾—å»ä½¿ç”¨ CSS ModulesğŸ‘ğŸ‘ğŸ‘ã€‚</p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/%E5%A6%82%E4%BD%95%E5%9C%A8%20create-react-app%20%E4%B8%AD%E4%BD%BF%E7%94%A8%20CSS%20Modules.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>TypeScript ä¸­ï¼Œinterface å’Œ type çš„åŒºåˆ«</title>
      <link>http://mydearest.cn/2020/TypeScript%20%E4%B8%AD%EF%BC%8Cinterface%20%E5%92%8C%20type%20%E7%9A%84%E5%8C%BA%E5%88%AB.html</link>
      <guid>http://mydearest.cn/2020/TypeScript%20%E4%B8%AD%EF%BC%8Cinterface%20%E5%92%8C%20type%20%E7%9A%84%E5%8C%BA%E5%88%AB.html</guid>
      <pubDate>Mon, 18 May 2020 02:10:54 GMT</pubDate>
      <description>
      
        &lt;p&gt;åœ¨ &lt;code&gt;TypeScript&lt;/code&gt; ä¸­ï¼Œ&lt;code&gt;interface&lt;/code&gt; å’Œ &lt;code&gt;type&lt;/code&gt; ä¸»è¦ç”¨äºç±»å‹çš„å£°æ˜ï¼Œå®ƒä»¬çš„ç›¸åŒç‚¹ä»¥åŠåŒºåˆ«å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>åœ¨ <code>TypeScript</code> ä¸­ï¼Œ<code>interface</code> å’Œ <code>type</code> ä¸»è¦ç”¨äºç±»å‹çš„å£°æ˜ï¼Œå®ƒä»¬çš„ç›¸åŒç‚¹ä»¥åŠåŒºåˆ«å¦‚ä¸‹ï¼š</p><hr><a id="more"></a><h2 id="ç›¸åŒç‚¹"><a href="#ç›¸åŒç‚¹" class="headerlink" title="ç›¸åŒç‚¹"></a>ç›¸åŒç‚¹</h2><h3 id="éƒ½å¯ä»¥æè¿°ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°"><a href="#éƒ½å¯ä»¥æè¿°ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°" class="headerlink" title="éƒ½å¯ä»¥æè¿°ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°"></a>éƒ½å¯ä»¥æè¿°ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* interface */</span></span><br><span class="line">interface User &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface SetUser &#123;</span><br><span class="line">  (name: string, <span class="attr">age</span>: number): string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* type */</span></span><br><span class="line">type User = &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type SetUser = &#123;</span><br><span class="line">  (name: string, <span class="attr">age</span>: number): string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="éƒ½å¯ä»¥è¿›è¡Œæ‹“å±•"><a href="#éƒ½å¯ä»¥è¿›è¡Œæ‹“å±•" class="headerlink" title="éƒ½å¯ä»¥è¿›è¡Œæ‹“å±•"></a>éƒ½å¯ä»¥è¿›è¡Œæ‹“å±•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* interface */</span></span><br><span class="line">interface User &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface ProUser extends User &#123;</span><br><span class="line">  email: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type VipUserType = &#123;</span><br><span class="line">  readonly vip: boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* interface å’Œ type æ‹“å±•*/</span></span><br><span class="line">interface VipUserInterfce extends VipUserType &#123;</span><br><span class="line">  member: boolean</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* type */</span></span><br><span class="line">type User = &#123;</span><br><span class="line">  name: string</span><br><span class="line">  age: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type ProUser = User &amp; &#123;</span><br><span class="line">  email: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface VipUserInterface &#123;</span><br><span class="line">  readonly vip: boolean</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* type ä¸ interface æ‹“å±• */</span></span><br><span class="line">type VipUserType = VipUserInterface &amp; &#123;</span><br><span class="line">  member: boolean</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="åŒºåˆ«"><a href="#åŒºåˆ«" class="headerlink" title="åŒºåˆ«"></a>åŒºåˆ«</h2><h3 id="type-å¯ä»¥å£°æ˜åŸºæœ¬ç±»å‹åˆ«åï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ç±»å‹ï¼Œè€Œ-interface-ä¸å¯ä»¥"><a href="#type-å¯ä»¥å£°æ˜åŸºæœ¬ç±»å‹åˆ«åï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ç±»å‹ï¼Œè€Œ-interface-ä¸å¯ä»¥" class="headerlink" title="type å¯ä»¥å£°æ˜åŸºæœ¬ç±»å‹åˆ«åï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ç±»å‹ï¼Œè€Œ interface ä¸å¯ä»¥"></a>type å¯ä»¥å£°æ˜åŸºæœ¬ç±»å‹åˆ«åï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ç±»å‹ï¼Œè€Œ interface ä¸å¯ä»¥</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* åŸºæœ¬ç±»å‹ */</span></span><br><span class="line">type Name = string</span><br><span class="line"></span><br><span class="line"><span class="comment">/* è”åˆç±»å‹ */</span></span><br><span class="line">interface Dog &#123;&#125;</span><br><span class="line">interface Cat &#123;&#125;</span><br><span class="line"></span><br><span class="line">type Pet = Dog | Cat</span><br><span class="line"></span><br><span class="line"><span class="comment">/* å…ƒç»„ç±»å‹ */</span></span><br><span class="line">type PetList = [Dog, Cat]</span><br></pre></td></tr></table></figure><h3 id="interface-å¯ä»¥è¿›è¡Œç±»å‹åˆå¹¶ï¼Œè€Œ-type-ä¸å¯ä»¥"><a href="#interface-å¯ä»¥è¿›è¡Œç±»å‹åˆå¹¶ï¼Œè€Œ-type-ä¸å¯ä»¥" class="headerlink" title="interface å¯ä»¥è¿›è¡Œç±»å‹åˆå¹¶ï¼Œè€Œ type ä¸å¯ä»¥"></a>interface å¯ä»¥è¿›è¡Œç±»å‹åˆå¹¶ï¼Œè€Œ type ä¸å¯ä»¥</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">interface Cloner &#123;</span><br><span class="line">  clone(animal: Animal): Animal</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Cloner &#123;</span><br><span class="line">  clone(animal: Sheep): Sheep</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Cloner &#123;</span><br><span class="line">  clone(animal: Dog): Dog</span><br><span class="line">  clone(animal: Cat): Cat</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥ä¸Šä¸‰ä¸ª interface ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªå£°æ˜</span></span><br><span class="line">interface Cloner &#123;</span><br><span class="line">  clone(animal: Dog): Dog</span><br><span class="line">  clone(animal: Cat): Cat</span><br><span class="line">  clone(animal: Sheep): Sheep</span><br><span class="line">  clone(animal: Animal): Animal</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://www.typescriptlang.org/docs/handbook/declaration-merging.html" target="_blank" rel="noopener">å…³äº declaration-merging</a></p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2020/TypeScript%20%E4%B8%AD%EF%BC%8Cinterface%20%E5%92%8C%20type%20%E7%9A%84%E5%8C%BA%E5%88%AB.html#disqus_thread</comments>
    </item>
    
  </channel>
</rss>
