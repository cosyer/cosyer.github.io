<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>cosyer&#39;s Blog</title>
    <link>http://mydearest.cn/</link>
    <atom:link href="/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description>é™ˆå®‡çš„åšå®¢</description>
    <pubDate>Tue, 09 Jul 2019 16:22:21 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>å¥åº·æŒ‡æ ‡</title>
      <link>http://mydearest.cn/2019/%E5%81%A5%E5%BA%B7%E6%8C%87%E6%A0%87.html</link>
      <guid>http://mydearest.cn/2019/%E5%81%A5%E5%BA%B7%E6%8C%87%E6%A0%87.html</guid>
      <pubDate>Tue, 09 Jul 2019 16:19:31 GMT</pubDate>
      <description>
      
        &lt;p&gt;æ¥ä¸Šæ¬¡çš„&lt;a href=&quot;https://mydearest.cn/2019/%E7%BB%B4%E7%94%9F%E7%B4%A0.html&quot;&gt;ç»´ç”Ÿç´ &lt;/a&gt;ğŸ˜Šï¼Œç½—åˆ—ä¸€äº›ç”Ÿæ´»ä¸­éœ€è¦çŸ¥é“å¥åº·æŒ‡æ ‡ã€‚&lt;/p&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>æ¥ä¸Šæ¬¡çš„<a href="https://mydearest.cn/2019/%E7%BB%B4%E7%94%9F%E7%B4%A0.html">ç»´ç”Ÿç´ </a>ğŸ˜Šï¼Œç½—åˆ—ä¸€äº›ç”Ÿæ´»ä¸­éœ€è¦çŸ¥é“å¥åº·æŒ‡æ ‡ã€‚</p><a id="more"></a><h1 id="è¡€ç³–"><a href="#è¡€ç³–" class="headerlink" title="è¡€ç³–"></a>è¡€ç³–</h1><p>è¡€ä¸­çš„è‘¡è„ç³–ç§°ä¸ºè¡€ç³–ã€‚</p><p>è¡€ç³–çš„æ¥æºåŒ…æ‹¬ï¼šâ‘ é£Ÿç‰©æ¶ˆåŒ–ã€å¸æ”¶ï¼›â‘¡è‚å†…å‚¨å­˜çš„ç³–åŸåˆ†è§£ï¼›â‘¢è„‚è‚ªå’Œè›‹ç™½è´¨çš„è½¬åŒ–ã€‚</p><p>è¡€ç³–çš„å»è·¯åŒ…æ‹¬ï¼šâ‘ æ°§åŒ–è½¬å˜ä¸ºèƒ½é‡ï¼›â‘¡è½¬åŒ–ä¸ºç³–åŸå‚¨å­˜äºè‚è„ã€è‚¾è„å’Œè‚Œè‚‰ä¸­ï¼›â‘¢è½¬å˜ä¸ºè„‚è‚ªå’Œè›‹ç™½è´¨ç­‰å…¶ä»–è¥å…»æˆåˆ†åŠ ä»¥å‚¨å­˜ã€‚</p><p>èƒ°å²›æ˜¯ä½“å†…è°ƒèŠ‚è¡€ç³–çš„è¡€ç³–æµ“åº¦çš„ä¸»è¦å™¨å®˜ï¼Œè‚è„å‚¨å­˜è‚ç³–å…ƒã€‚æ­¤å¤–ï¼Œè¡€ç³–æµ“åº¦è¿˜å—ç¥ç»ã€å†…åˆ†æ³Œæ¿€ç´ çš„è°ƒèŠ‚ã€‚</p><h2 id="è¡€ç³–å€¼"><a href="#è¡€ç³–å€¼" class="headerlink" title="è¡€ç³–å€¼"></a>è¡€ç³–å€¼</h2><h3 id="ç©ºè…¹è¡€ç³–"><a href="#ç©ºè…¹è¡€ç³–" class="headerlink" title="ç©ºè…¹è¡€ç³–"></a>ç©ºè…¹è¡€ç³–</h3><p>å…¨è¡€è¡€ç³–(æ‰‹æŒ‡)ã€‚è¡€æµ†è¡€ç³–(é™è„‰)ã€‚</p><p>ç©ºè…¹è¡€ç³–æ­£å¸¸å€¼ï¼Œå…¨è¡€è¡€ç³–ï¼š3.89ï½6.11 mmol/Lï¼Œè¡€æµ†è¡€ç³–ï¼š3.90ï½6.90 mmol/L</p><p>ç©ºè…¹å…¨è¡€è¡€ç³– â‰¥ 6.70 mmol/Lï¼Œè¡€æµ†è¡€ç³– â‰¥ 7.80 mmol/Lï¼Œ2 æ¬¡é‡å¤æµ‹å®šå¯è¯Šæ–­ä¸ºç³–å°¿ç—…ã€‚</p><h3 id="é¤åè¡€ç³–"><a href="#é¤åè¡€ç³–" class="headerlink" title="é¤åè¡€ç³–"></a>é¤åè¡€ç³–</h3><p>é¤å 1 å°æ—¶ï¼šè¡€ç³– 6.7-9.4 mmol/Lã€‚æœ€å¤šä¹Ÿä¸è¶…è¿‡ 11.1 mmol/Lã€‚</p><p>é¤å 2 å°æ—¶ï¼šè¡€ç³– â‰¤ 7.8 mmol/Lã€‚</p><p>é¤å 3 å°æ—¶ï¼šç¬¬ä¸‰å°æ—¶åæ¢å¤æ­£å¸¸ï¼Œå„æ¬¡å°¿ç³–å‡ä¸ºé˜´æ€§ã€‚</p><h3 id="å­•å¦‡è¡€ç³–"><a href="#å­•å¦‡è¡€ç³–" class="headerlink" title="å­•å¦‡è¡€ç³–"></a>å­•å¦‡è¡€ç³–</h3><p>ç©ºè…¹ä¸è¶…è¿‡ 5.1 mmol/Lã€‚</p><p>é¤å 1 å°æ—¶ä¸å¾—è¶…è¿‡ 10.0 mmol/L æ‰æ˜¯è¡€ç³–çš„æ­£å¸¸æ°´å¹³ã€‚</p><h2 id="ç³–å°¿ç—…"><a href="#ç³–å°¿ç—…" class="headerlink" title="ç³–å°¿ç—…"></a>ç³–å°¿ç—…</h2><p>ç³–å°¿ç—…æ‚£è€…çš„ç©ºè…¹è¡€ç³–å‚è€ƒå€¼ï¼š</p><p>è½»åº¦ç³–å°¿ç—…ï¼š7.0~8.4 mmol/Lï¼Œä¸­åº¦ç³–å°¿ç—…ï¼š8.4~11.1 mmol/Lï¼Œé‡åº¦ç³–å°¿ç—…ï¼šå¤§äº 11.1 mmol/Lã€‚</p><h2 id="è¯ç‰©"><a href="#è¯ç‰©" class="headerlink" title="è¯ç‰©"></a>è¯ç‰©</h2><p>äºŒç”²åŒèƒã€‚</p><ol><li>äºŒç”²åŒèƒç‰‡é¦–é€‰ç”¨å•çº¯é¥®é£Ÿæ§åˆ¶åŠä½“è‚²é”»ç‚¼æ²»ç–—æ— æ•ˆçš„2å‹ç³–å°¿ç—…ï¼Œç‰¹åˆ«æ˜¯è‚¥èƒ–çš„2å‹ç³–å°¿ç—…ã€‚</li><li>æœ¬å“ä¸èƒ°å²›ç´ åˆç”¨ï¼Œå¯å‡å°‘èƒ°å²›ç´ ç”¨é‡ï¼Œé˜²æ­¢ä½è¡€ç³–å‘ç”Ÿã€‚</li><li>å¯ä¸ç£ºé…°è„²ç±»é™è¡€ç³–è¯åˆç”¨ï¼Œå…·ååŒä½œç”¨ã€‚</li></ol><p>æœç”¨æœ¬å“æ—¶åº”å°½é‡é¿å…é¥®é…’ã€‚</p><h2 id="å“ªäº›é£Ÿç‰©é™è¡€ç³–"><a href="#å“ªäº›é£Ÿç‰©é™è¡€ç³–" class="headerlink" title="å“ªäº›é£Ÿç‰©é™è¡€ç³–"></a>å“ªäº›é£Ÿç‰©é™è¡€ç³–</h2><p>1.é¥®é£Ÿå®œæ¸…æ·¡ï¼Œå¿Œè¾›è¾£ï¼Œä½ç³–ã€ä½æ²¹ã€ä½ç›ï¼ŒæŒ‰æ—¶é¥®é£Ÿ</p><p>2.å¯ä»¥åƒï¼šè‹¦ç“œã€æ´‹è‘±ã€å±±è¯ã€æµ·å¸¦ã€é­”èŠ‹å¤šåƒï¼Œå†¬ç“œã€èŠ¹èœã€è èœã€è—•ç­‰å°‘åƒ</p><p>3.å¯ä»¥åƒï¼šæŸšå­ã€è‹¹æœã€æ©˜å­ã€æ¨±æ¡ƒã€è‰è“ã€æ¢¨ã€æ¡ƒç­‰å‡ç³–æŒ‡æ•°æ¯”è¾ƒä½ï¼Œè¥¿ç“œåƒé è¿‘ç“œçš®çš„ï¼Œä¸åƒç“œå¿ƒ</p><p>4.ä¸èƒ½åƒï¼šé¦™è•‰ã€å±±æ¥‚ã€æŸ¿å­ã€æ£å­</p><p>5.å¤šå–å‡‰ç™½å¼€ï¼Œä¸è¦æ†‹å°¿</p><p>6.æ£€æµ‹è¶³éƒ¨ï¼Œä¿æŠ¤è¶³éƒ¨</p><p>7.å¤šåšè¶³éƒ¨è¿åŠ¨ï¼Œè¸®è„šã€è„šè¶¾æŠ“åœ°ã€æ³¡å®Œè„šåç”¨æŒå¿ƒæ“è„šå¿ƒ</p><p>8.ä¸å«ç³–çš„ç”œå‘³å‰‚ï¼Œæ¯”å¦‚æœ¨ç³–é†‡ã€ä¸‰æ°¯è”—ç³–ã€é˜¿æ–¯å·´ç”œã€ç”œèŠç³–è‹·è¿™ç±»ç”œå‘³å‰‚ï¼›å¦‚æœå«æœ‰è¿™äº›çš„é£Ÿå“ï¼Œå¯ä»¥å°‘é‡é£Ÿç”¨ã€‚ç‡•éº¦ç‰‡</p><p>å¤šåƒï¼šå†¬ç“œã€è‹¦ç“œã€æ´‹è‘±ã€å±±è¯ã€æµ·å¸¦ã€é­”èŠ‹ã€èŠ¹èœã€è èœã€æœ¨è€³ã€è—•</p><h3 id="ç‡•éº¦ç‰‡"><a href="#ç‡•éº¦ç‰‡" class="headerlink" title="ç‡•éº¦ç‰‡"></a>ç‡•éº¦ç‰‡</h3><p>ç‡•éº¦ç‰‡æ˜¯ç‡•éº¦ç²’è½§åˆ¶è€Œæˆï¼Œå‘ˆæ‰å¹³çŠ¶ï¼Œç›´å¾„çº¦ç›¸å½“äºé»„è±†ç²’ï¼Œå½¢çŠ¶å®Œæ•´çš„ä¸€ç§é£Ÿå“ã€‚ç‡•éº¦ç…®å‡ºæ¥é«˜åº¦ç²˜ç¨ ï¼Œå…¶ä¸­ beta è‘¡èšç³–å¥åº·æˆåˆ†æ‰€å¸¦æ¥çš„ï¼Œå…·æœ‰é™è¡€è„‚ã€é™è¡€ç³–ã€é«˜é¥±è…¹çš„æ•ˆæœï¼Œé•¿æœŸé£Ÿç”¨å…·æœ‰å‡è‚¥åŠŸæ•ˆã€‚æ­¤å¤–ï¼Œç‡•éº¦ä¸­å«æœ‰ä¸°å¯Œçš„ç»´ç”Ÿç´  B1ã€B2ã€Eã€å¶é…¸ç­‰ï¼Œå¯ä»¥æ”¹å–„è¡€æ¶²å¾ªç¯ã€ç¼“è§£ç”Ÿæ´»å·¥ä½œå¸¦æ¥çš„å‹åŠ›ï¼›å«æœ‰çš„é’™ã€ç£·ã€é“ã€é”Œã€é”°ç­‰çŸ¿ç‰©è´¨ä¹Ÿæœ‰é¢„é˜²éª¨è´¨ç–æ¾ã€ä¿ƒè¿›ä¼¤å£æ„ˆåˆã€é˜²æ­¢è´«è¡€çš„åŠŸæ•ˆã€‚</p><h3 id="é­”èŠ‹"><a href="#é­”èŠ‹" class="headerlink" title="é­”èŠ‹"></a>é­”èŠ‹</h3><p>é™è¡€ç³–ã€é™è¡€è„‚ã€é™è¡€å‹ã€æ•£æ¯’ã€å…»é¢œã€é€šè„‰ã€å‡è‚¥ã€é€šä¾¿ã€å¼€èƒƒã€‚</p><p>ç”Ÿé­”èŠ‹æœ‰æ¯’ï¼Œå¿…é¡»ç…ç…® 3 å°æ—¶ä»¥ä¸Šæ‰å¯é£Ÿç”¨ã€‚</p><p>æ¶ˆåŒ–ä¸è‰¯çš„äººï¼Œæ¯æ¬¡é£Ÿé‡ä¸å®œè¿‡å¤šã€‚</p><p>æœ‰çš®è‚¤ç—…çš„äººå°‘é£Ÿã€‚</p><p>é­”èŠ‹æ€§å¯’ï¼Œæœ‰ä¼¤å¯’æ„Ÿå†’ç—‡çŠ¶çš„åº”å°‘é£Ÿç”¨ã€‚</p><h3 id="æµ·å¸¦"><a href="#æµ·å¸¦" class="headerlink" title="æµ·å¸¦"></a>æµ·å¸¦</h3><p>æµ·å¸¦æ˜¯ä¸€ç§è¥å…»ä»·å€¼å¾ˆé«˜çš„è”¬èœï¼ŒåŒæ—¶å…·æœ‰ä¸€å®šçš„è¯ç”¨ä»·å€¼ã€‚å«æœ‰ä¸°å¯Œçš„ç¢˜ç­‰çŸ¿ç‰©è´¨å…ƒç´ ã€‚æµ·å¸¦å«çƒ­é‡ä½ã€è›‹ç™½è´¨å«é‡ä¸­ç­‰ã€çŸ¿ç‰©è´¨ä¸°å¯Œã€‚ç ”ç©¶å‘ç°ï¼Œæµ·å¸¦å…·æœ‰é™è¡€è„‚ã€é™è¡€ç³–ã€è°ƒèŠ‚å…ç–«ã€æŠ—å‡è¡€ã€æŠ—è‚¿ç˜¤ã€æ’é“…è§£æ¯’å’ŒæŠ—æ°§åŒ–ç­‰å¤šç§ç”Ÿç‰©åŠŸèƒ½ã€‚</p><p>åƒæµ·å¸¦åä¸è¦é©¬ä¸Šå–èŒ¶(èŒ¶å«é£é…¸)ï¼Œä¹Ÿä¸è¦ç«‹åˆ»åƒé…¸æ¶©çš„æ°´æœ(é…¸æ¶©æ°´æœå«æ¤ç‰©é…¸)ã€‚</p><p>åƒå¤šä¹Ÿä¸å¥½ï¼Œä¼šå¾—ç”²äº¢ã€‚</p><h3 id="å±±è¯"><a href="#å±±è¯" class="headerlink" title="å±±è¯"></a>å±±è¯</h3><p>å…·æœ‰æ»‹å…»å¼ºå£®ï¼ŒåŠ©æ¶ˆåŒ–ï¼Œæ•›è™šæ±—ï¼Œæ­¢æ³»ä¹‹åŠŸæ•ˆï¼Œä¸»æ²»è„¾è™šè…¹æ³»ã€è‚ºè™šå’³å—½ã€ç³–å°¿ç—…æ¶ˆæ¸´ã€å°ä¾¿çŸ­é¢‘ã€é—ç²¾ã€å¦‡å¥³å¸¦ä¸‹åŠæ¶ˆåŒ–ä¸è‰¯çš„æ…¢æ€§è‚ ç‚ã€‚</p><h1 id="è¡€å‹"><a href="#è¡€å‹" class="headerlink" title="è¡€å‹"></a>è¡€å‹</h1><p>æ˜¯æŒ‡è¡€æ¶²åœ¨è¡€ç®¡å†…æµåŠ¨æ—¶ä½œç”¨äºå•ä½é¢ç§¯è¡€ç®¡å£çš„ä¾§å‹åŠ›ï¼Œå®ƒæ˜¯æ¨åŠ¨è¡€æ¶²åœ¨è¡€ç®¡å†…æµåŠ¨çš„åŠ¨åŠ›ã€‚åœ¨ä¸åŒè¡€ç®¡å†…è¢«åˆ†åˆ«ç§°ä¸ºåŠ¨è„‰è¡€å‹ã€æ¯›ç»†è¡€ç®¡å‹å’Œé™è„‰è¡€å‹ï¼Œé€šå¸¸æ‰€è¯´çš„è¡€å‹æ˜¯æŒ‡ä½“å¾ªç¯çš„åŠ¨è„‰è¡€å‹ã€‚</p><p>å½±å“åŠ¨è„‰è¡€å‹çš„å› ç´ ä¸»è¦æœ‰äº”ä¸ªæ–¹é¢ï¼šâ‘ æ¯æè¾“å‡ºé‡ï¼›â‘¡å¤–å‘¨é˜»åŠ›ï¼›â‘¢å¿ƒç‡ï¼›â‘£ä¸»åŠ¨è„‰å’Œå¤§åŠ¨è„‰ç®¡å£çš„å¼¹æ€§ï¼›â‘¤å¾ªç¯è¡€é‡ä¸è¡€ç®¡å®¹é‡ã€‚</p><h2 id="è¡€å‹å€¼"><a href="#è¡€å‹å€¼" class="headerlink" title="è¡€å‹å€¼"></a>è¡€å‹å€¼</h2><p>æ”¶ç¼©å‹ï¼šé«˜å‹ã€‚èˆ’å¼ å‹ï¼šä½å‹ã€‚</p><p>æ­£å¸¸æˆäººå®‰é™çŠ¶æ€ä¸‹çš„è¡€å‹èŒƒå›´è¾ƒç¨³å®šï¼Œæ­£å¸¸èŒƒå›´æ”¶ç¼©å‹ 90ï½139 mmHgï¼Œèˆ’å¼ å‹ 60ï½89 mmHgï¼Œè„‰å‹ 30ï½40 mmHgã€‚</p><p>é«˜è¡€å‹ï¼šæœªä½¿ç”¨æŠ—é«˜è¡€å‹è¯çš„å‰æä¸‹ï¼Œ18 å²ä»¥ä¸Šæˆäººæ”¶ç¼©å‹ â‰¥ 140 mmHg å’Œ(æˆ–)èˆ’å¼ å‹ â‰¥ 90mmHgã€‚</p><p>ä½è¡€å‹ï¼šæœªä½¿ç”¨æŠ—é«˜è¡€å‹è¯çš„å‰æä¸‹ï¼Œ18 å²ä»¥ä¸Šæˆäººæ”¶ç¼©å‹ &lt; 90 mmHg å’Œ(æˆ–)èˆ’å¼ å‹ &lt; 60mmHgã€‚</p><h2 id="å“ªäº›é£Ÿç‰©é™è¡€å‹"><a href="#å“ªäº›é£Ÿç‰©é™è¡€å‹" class="headerlink" title="å“ªäº›é£Ÿç‰©é™è¡€å‹"></a>å“ªäº›é£Ÿç‰©é™è¡€å‹</h2><h3 id="èŒ„å­"><a href="#èŒ„å­" class="headerlink" title="èŒ„å­"></a>èŒ„å­</h3><p>é™ä½èƒ†å›ºé†‡ï¼Œé™è¡€è„‚ã€é™è¡€å‹ï¼Œé˜²æ²»èƒƒç™Œï¼Œæ²»ç–—æ…¢æ€§èƒƒç‚ã€è‚¾ç‚æ°´è‚¿ï¼Œé˜²æ²»åè¡€ç—…åŠä¿ƒè¿›ä¼¤å£æ„ˆåˆï¼Œæ¸…çƒ­è§£æ¯’ã€‚</p><p>æ¶ˆåŒ–ä¸è‰¯ã€å®¹æ˜“è…¹æ³»ã€è„¾èƒƒè™šå¯’ã€ä¾¿æºç—‡çŠ¶çš„äººä¸å®œå¤šåƒã€‚</p><p>ç§‹åçš„èŒ„å­æœ‰ä¸€å®šçš„æ¯’ç´ ï¼Œä¸è¦åƒã€‚</p><h3 id="ç™½èåœ"><a href="#ç™½èåœ" class="headerlink" title="ç™½èåœ"></a>ç™½èåœ</h3><p>æ¸…è‚ æ’æ¯’ï¼Œä¿ƒè¿›æ¶ˆåŒ–ï¼Œå¢å¼ºé£Ÿæ¬²ï¼Œé˜²ç™ŒæŠ—ç™Œï¼Œé™è¡€å‹</p><h3 id="èŠ¹èœ"><a href="#èŠ¹èœ" class="headerlink" title="èŠ¹èœ"></a>èŠ¹èœ</h3><p>é™ä½èƒ†å›ºé†‡ï¼Œé™è¡€å‹</p><p>ã€èŠ¹èœ+é¸¡è‚‰ã€‘å®¹æ˜“ä¼¤å…ƒæ°”ã€‚</p><p>ã€èŠ¹èœ+å…”è‚‰ã€‘å®¹æ˜“å¼•èµ·è„±çš®ã€‚</p><h1 id="BMI-æŒ‡æ•°"><a href="#BMI-æŒ‡æ•°" class="headerlink" title="BMI æŒ‡æ•°"></a>BMI æŒ‡æ•°</h1><p>èº«ä½“è´¨é‡æŒ‡æ•°ï¼Œç®€ç§°ä½“è´¨æŒ‡æ•°ï¼Œåˆç§°ä½“é‡.</p><p>ä½“è´¨æŒ‡æ•°(BMI)= ä½“é‡(kg)Ã· èº«é«˜(m)^ 2</p><p>æˆäººçš„BMIæ•°å€¼ï¼š</p><ul><li>è¿‡è½»ï¼šä½äº 18.5</li><li>æ­£å¸¸ï¼š18.5-23.9</li><li>è¿‡é‡ï¼š24-27</li><li>è‚¥èƒ–ï¼š28-32</li><li>éå¸¸è‚¥èƒ–ï¼šé«˜äº 32</li></ul><p>60 / (1.68 * 1.68) = 21.26</p><p>65 / (1.68 * 1.68) = 23.04</p><p>67 / (1.68 * 1.68) = 23.74</p><p>60 / (1.70 * 1.70) = 20.77</p><p>65 / (1.70 * 1.70) = 22.50</p><p>69 / (1.70 * 1.70) = 23.88</p><p>60 / (1.72 * 1.72) = 20.29</p><p>65 / (1.72 * 1.72) = 21.98</p><p>70 / (1.72 * 1.72) = 23.67</p><h1 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h1><h2 id="éŸ­èœ"><a href="#éŸ­èœ" class="headerlink" title="éŸ­èœ"></a>éŸ­èœ</h2><p>è¡¥è‚¾ï¼Œå¥èƒƒï¼Œæç¥ï¼Œé™ä½èƒ†å›ºé†‡ã€‚</p><p>æ˜¥é£Ÿåˆ™é¦™ï¼Œå¤é£Ÿåˆ™è‡­ã€‚</p><p>ã€éŸ­èœ+è èœã€‘åŒé£Ÿä¼šæœ‰æ»‘è‚ ä½œç”¨ï¼Œå®¹æ˜“å¼•èµ·è…¹æ³»ã€‚</p><p>ã€éŸ­èœ+ç‰›è‚‰ã€‘å‘ çƒ­åŠ¨ç«ï¼Œå¼•èµ·ç‰™é½¿è‚¿ç—›ï¼Œå£ç–®ã€‚</p><p>ã€éŸ­èœ+ç™½é…’ã€‘å¼•èµ·èƒƒç‚ï¼Œèƒƒæºƒè‚ ç—…å¤å‘ã€‚</p><p>ã€éŸ­èœ+èœ‚èœœã€‘åŒé£Ÿå®¹æ˜“å¼•èµ·è…¹æ³»ã€‚</p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/%E5%81%A5%E5%BA%B7%E6%8C%87%E6%A0%87.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>EventLoop</title>
      <link>http://mydearest.cn/2019/EventLoop.html</link>
      <guid>http://mydearest.cn/2019/EventLoop.html</guid>
      <pubDate>Sun, 16 Jun 2019 04:38:46 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;æè¿°äº‹ä»¶é˜Ÿåˆ—çš„è¿‡ç¨‹ï¼Ÿ&quot;&gt;&lt;a href=&quot;#æè¿°äº‹ä»¶é˜Ÿåˆ—çš„è¿‡ç¨‹ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;æè¿°äº‹ä»¶é˜Ÿåˆ—çš„è¿‡ç¨‹ï¼Ÿ&quot;&gt;&lt;/a&gt;æè¿°äº‹ä»¶é˜Ÿåˆ—çš„è¿‡ç¨‹ï¼Ÿ&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;jsæ˜¯å•çº¿ç¨‹çš„ï¼Œä¼šå‡ºç°é˜»å¡é—®é¢˜ï¼Œå› æ­¤æœ‰äº†å¼‚æ­¥é˜Ÿåˆ—çš„å‡ºç°&lt;/li&gt;
&lt;li&gt;ä¸»è¿›ç¨‹åŒæ­¥æ‰§è¡Œä»»åŠ¡ï¼Œå¼‚æ­¥æ“ä½œå°†æ·»åŠ åˆ°å¼‚æ­¥é˜Ÿåˆ—ä¸­&lt;/li&gt;
&lt;li&gt;ç­‰å€™ä¸»è¿›ç¨‹æ‰§è¡Œå®Œæ¯•åå†æ‰§è¡Œå¼‚æ­¥é˜Ÿåˆ—ä¸­çš„æ“ä½œ&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="æè¿°äº‹ä»¶é˜Ÿåˆ—çš„è¿‡ç¨‹ï¼Ÿ"><a href="#æè¿°äº‹ä»¶é˜Ÿåˆ—çš„è¿‡ç¨‹ï¼Ÿ" class="headerlink" title="æè¿°äº‹ä»¶é˜Ÿåˆ—çš„è¿‡ç¨‹ï¼Ÿ"></a>æè¿°äº‹ä»¶é˜Ÿåˆ—çš„è¿‡ç¨‹ï¼Ÿ</h2><ul><li>jsæ˜¯å•çº¿ç¨‹çš„ï¼Œä¼šå‡ºç°é˜»å¡é—®é¢˜ï¼Œå› æ­¤æœ‰äº†å¼‚æ­¥é˜Ÿåˆ—çš„å‡ºç°</li><li>ä¸»è¿›ç¨‹åŒæ­¥æ‰§è¡Œä»»åŠ¡ï¼Œå¼‚æ­¥æ“ä½œå°†æ·»åŠ åˆ°å¼‚æ­¥é˜Ÿåˆ—ä¸­</li><li>ç­‰å€™ä¸»è¿›ç¨‹æ‰§è¡Œå®Œæ¯•åå†æ‰§è¡Œå¼‚æ­¥é˜Ÿåˆ—ä¸­çš„æ“ä½œ</li></ul><hr><a id="more"></a><h2 id="ä»€ä¹ˆæ˜¯å®ä»»åŠ¡ä»€ä¹ˆæ˜¯å¾®ä»»åŠ¡ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å®ä»»åŠ¡ä»€ä¹ˆæ˜¯å¾®ä»»åŠ¡ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å®ä»»åŠ¡ä»€ä¹ˆæ˜¯å¾®ä»»åŠ¡ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å®ä»»åŠ¡ä»€ä¹ˆæ˜¯å¾®ä»»åŠ¡ï¼Ÿ</h2><ul><li>å¼‚æ­¥é˜Ÿåˆ—ä¸­æœ‰å®ä»»åŠ¡å¾®ä»»åŠ¡ä¹‹åˆ†</li><li>ä¸€æ¬¡äº‹ä»¶å¾ªç¯ï¼šå…ˆè¿è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä¸€ä¸ªï¼Œç„¶åè¿è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰ä»»åŠ¡ã€‚æ¥ç€å¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯</li></ul><h2 id="å“ªäº›æ˜¯å®ä»»åŠ¡å“ªäº›æ˜¯å¾®ä»»åŠ¡ï¼Ÿ"><a href="#å“ªäº›æ˜¯å®ä»»åŠ¡å“ªäº›æ˜¯å¾®ä»»åŠ¡ï¼Ÿ" class="headerlink" title="å“ªäº›æ˜¯å®ä»»åŠ¡å“ªäº›æ˜¯å¾®ä»»åŠ¡ï¼Ÿ"></a>å“ªäº›æ˜¯å®ä»»åŠ¡å“ªäº›æ˜¯å¾®ä»»åŠ¡ï¼Ÿ</h2><h3 id="å®ä»»åŠ¡"><a href="#å®ä»»åŠ¡" class="headerlink" title="å®ä»»åŠ¡"></a>å®ä»»åŠ¡</h3><ul><li>setTimeout</li><li>setImmediate</li><li>setIntarval</li><li>requestAnimationFrame</li><li>I/O</li><li>UI rendering</li></ul><h3 id="å¾®ä»»åŠ¡"><a href="#å¾®ä»»åŠ¡" class="headerlink" title="å¾®ä»»åŠ¡"></a>å¾®ä»»åŠ¡</h3><ul><li>process.nextTick</li><li>Promise.then</li><li>Object.observe</li><li>MutationObserver</li></ul><h3 id="ç»ƒä¹ é¢˜"><a href="#ç»ƒä¹ é¢˜" class="headerlink" title="ç»ƒä¹ é¢˜"></a>ç»ƒä¹ é¢˜</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="keyword">var</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">    resolve();</span><br><span class="line">&#125;)</span><br><span class="line">promise.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">4</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span>)</span><br><span class="line"><span class="comment">// 13542</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> intervalId = setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">10</span>)</span><br><span class="line">    <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">11</span>)</span><br><span class="line">        resolve()</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">12</span>)</span><br><span class="line">    &#125;).then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">13</span>)</span><br><span class="line">        clearInterval(intervalId)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;, <span class="number">0</span>)</span><br><span class="line"><span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">7</span>)</span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">8</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">9</span>)</span><br><span class="line"><span class="comment">// 1 9 7 8 2 3 10 11 12 13</span></span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/EventLoop.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>å‰ç«¯æ¨¡å—åŒ–å‘å±•</title>
      <link>http://mydearest.cn/2019/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%91%E5%B1%95.html</link>
      <guid>http://mydearest.cn/2019/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%91%E5%B1%95.html</guid>
      <pubDate>Thu, 13 Jun 2019 15:37:20 GMT</pubDate>
      <description>
      
        &lt;h1 id=&quot;ä¸€ã€å‰ç«¯æ¨¡å—åŒ–å‘å±•ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ä¸€ã€å‰ç«¯æ¨¡å—åŒ–å‘å±•ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å‰ç«¯æ¨¡å—åŒ–å‘å±•ç®€ä»‹&quot;&gt;&lt;/a&gt;ä¸€ã€å‰ç«¯æ¨¡å—åŒ–å‘å±•ç®€ä»‹&lt;/h1&gt;&lt;h2 id=&quot;1-CommonJS&quot;&gt;&lt;a href=&quot;#1-CommonJS&quot; class=&quot;headerlink&quot; title=&quot;1.CommonJS&quot;&gt;&lt;/a&gt;1.CommonJS&lt;/h2&gt;&lt;p&gt;2009å¹´ï¼Œç¾å›½ç¨‹åºå‘˜Ryan Dahlåˆ›é€ äº†&lt;a href=&quot;http://nodejs.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;node.js&lt;/a&gt;é¡¹ç›®ï¼Œå°†javascriptè¯­è¨€ç”¨äºæœåŠ¡å™¨ç«¯ç¼–ç¨‹ã€‚è¿™æ ‡å¿—â€Javascriptæ¨¡å—åŒ–ç¼–ç¨‹â€æ­£å¼è¯ç”Ÿã€‚nodeJsä¸­çš„æ¨¡å—ï¼Œä¸€å¾‹ä¸º&lt;a href=&quot;https://en.wikipedia.org/wiki/CommonJS&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;CommonJS&lt;/a&gt; æ ¼å¼ã€‚&lt;/p&gt;
&lt;h3 id=&quot;1-1-è¯­æ³•é£æ ¼&quot;&gt;&lt;a href=&quot;#1-1-è¯­æ³•é£æ ¼&quot; class=&quot;headerlink&quot; title=&quot;1.1 è¯­æ³•é£æ ¼&quot;&gt;&lt;/a&gt;1.1 è¯­æ³•é£æ ¼&lt;/h3&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Math.js&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;module&lt;/span&gt;.exports = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;string&quot;&gt;&#39;add&#39;&lt;/span&gt;: &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;a, b&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; a + b;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//main.js&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;Math&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;require&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;./Math&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;built_in&quot;&gt;Math&lt;/span&gt;.add(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;console&lt;/span&gt;.log(&lt;span class=&quot;string&quot;&gt;&#39;done&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h1 id="ä¸€ã€å‰ç«¯æ¨¡å—åŒ–å‘å±•ç®€ä»‹"><a href="#ä¸€ã€å‰ç«¯æ¨¡å—åŒ–å‘å±•ç®€ä»‹" class="headerlink" title="ä¸€ã€å‰ç«¯æ¨¡å—åŒ–å‘å±•ç®€ä»‹"></a>ä¸€ã€å‰ç«¯æ¨¡å—åŒ–å‘å±•ç®€ä»‹</h1><h2 id="1-CommonJS"><a href="#1-CommonJS" class="headerlink" title="1.CommonJS"></a>1.CommonJS</h2><p>2009å¹´ï¼Œç¾å›½ç¨‹åºå‘˜Ryan Dahlåˆ›é€ äº†<a href="http://nodejs.org/" target="_blank" rel="noopener">node.js</a>é¡¹ç›®ï¼Œå°†javascriptè¯­è¨€ç”¨äºæœåŠ¡å™¨ç«¯ç¼–ç¨‹ã€‚è¿™æ ‡å¿—â€Javascriptæ¨¡å—åŒ–ç¼–ç¨‹â€æ­£å¼è¯ç”Ÿã€‚nodeJsä¸­çš„æ¨¡å—ï¼Œä¸€å¾‹ä¸º<a href="https://en.wikipedia.org/wiki/CommonJS" target="_blank" rel="noopener">CommonJS</a> æ ¼å¼ã€‚</p><h3 id="1-1-è¯­æ³•é£æ ¼"><a href="#1-1-è¯­æ³•é£æ ¼" class="headerlink" title="1.1 è¯­æ³•é£æ ¼"></a>1.1 è¯­æ³•é£æ ¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Math.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"><span class="string">'add'</span>: <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">Math</span> = <span class="built_in">require</span>(<span class="string">'./Math'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.add(<span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'done'</span>);</span><br></pre></td></tr></table></figure><hr><a id="more"></a><h3 id="1-2-åŒæ­¥åŠ è½½"><a href="#1-2-åŒæ­¥åŠ è½½" class="headerlink" title="1.2 åŒæ­¥åŠ è½½"></a>1.2 åŒæ­¥åŠ è½½</h3><h3 id="1-3-åŠ¨æ€åŠ è½½"><a href="#1-3-åŠ¨æ€åŠ è½½" class="headerlink" title="1.3 åŠ¨æ€åŠ è½½"></a>1.3 åŠ¨æ€åŠ è½½</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="built_in">Math</span> = <span class="built_in">require</span>(<span class="string">'./Ma'</span> + <span class="string">'th'</span>);<span class="comment">//åŠ¨æ€æ‹¼æ¥</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Math</span>.add(<span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'done'</span>);</span><br></pre></td></tr></table></figure><h3 id="1-4-æµè§ˆå™¨ä¸æ”¯æŒCommonJSè§„èŒƒã€‚"><a href="#1-4-æµè§ˆå™¨ä¸æ”¯æŒCommonJSè§„èŒƒã€‚" class="headerlink" title="1.4 æµè§ˆå™¨ä¸æ”¯æŒCommonJSè§„èŒƒã€‚"></a>1.4 æµè§ˆå™¨ä¸æ”¯æŒCommonJSè§„èŒƒã€‚</h3><p>æµè§ˆå™¨ä¸å…¼å®¹CommonJSçš„æ ¹æœ¬åŸå› ï¼Œåœ¨äºç¼ºå°‘å››ä¸ªNode.jsç¯å¢ƒçš„å˜é‡ã€‚</p><ul><li>module</li><li>exports</li><li>require</li><li>global</li></ul><p>å¯ä»¥ä½¿ç”¨å·¥å…·è¿›è¡Œè½¬æ¢ï¼Œä¾‹å¦‚ï¼š<a href="http://browserify.org/" target="_blank" rel="noopener">Browserify</a></p><hr><h2 id="2-AMD"><a href="#2-AMD" class="headerlink" title="2.AMD"></a>2.AMD</h2><p>CommonJSæ˜¯ä¸»è¦ä¸ºäº†JSåœ¨åç«¯çš„è¡¨ç°åˆ¶å®šçš„ï¼Œä»–æ˜¯ä¸é€‚åˆå‰ç«¯çš„ã€‚</p><p><a href="http://github.com/amdjs/amdjs-api/wiki/AMD" target="_blank" rel="noopener">AMD</a>æ˜¯â€Asynchronous Module Definitionâ€çš„ç¼©å†™ï¼Œæ„æ€å°±æ˜¯â€å¼‚æ­¥æ¨¡å—å®šä¹‰â€ã€‚</p><p><strong>RequireJS</strong>å®ç°äº†AMDè§„èŒƒã€‚ä¸‹é¢ä»¥RequireJSä¸ºä¾‹ï¼Œäº†è§£ä¸€ä¸‹AMDè§„èŒƒã€‚</p><h3 id="2-1-è¯­æ³•é£æ ¼"><a href="#2-1-è¯­æ³•é£æ ¼" class="headerlink" title="2.1 è¯­æ³•é£æ ¼"></a>2.1 è¯­æ³•é£æ ¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Math.js</span></span><br><span class="line">define([], <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="string">'add'</span>: <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">    paths : &#123;</span><br><span class="line">        <span class="string">"math"</span> : <span class="string">"Math"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">require</span>([<span class="string">'math'</span>], <span class="function"><span class="keyword">function</span> (<span class="params">math</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(math.add(<span class="number">2</span>, <span class="number">3</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'done'</span>);</span><br><span class="line"><span class="comment">//done</span></span><br><span class="line"><span class="comment">//5</span></span><br></pre></td></tr></table></figure><h3 id="2-2-å¼‚æ­¥åŠ è½½"><a href="#2-2-å¼‚æ­¥åŠ è½½" class="headerlink" title="2.2 å¼‚æ­¥åŠ è½½"></a>2.2 å¼‚æ­¥åŠ è½½</h3><h3 id="2-3-åŠ¨æ€åŠ è½½"><a href="#2-3-åŠ¨æ€åŠ è½½" class="headerlink" title="2.3 åŠ¨æ€åŠ è½½"></a>2.3 åŠ¨æ€åŠ è½½</h3><h3 id="2-4-ä¾èµ–å‰ç½®ï¼Œæå‰æ‰§è¡Œ"><a href="#2-4-ä¾èµ–å‰ç½®ï¼Œæå‰æ‰§è¡Œ" class="headerlink" title="2.4 ä¾èµ–å‰ç½®ï¼Œæå‰æ‰§è¡Œ"></a>2.4 ä¾èµ–å‰ç½®ï¼Œæå‰æ‰§è¡Œ</h3><hr><h2 id="3-CMD"><a href="#3-CMD" class="headerlink" title="3.CMD"></a>3.CMD</h2><p>CMDæ˜¯SeaJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºã€‚</p><h3 id="3-1-è¯­æ³•é£æ ¼"><a href="#3-1-è¯­æ³•é£æ ¼" class="headerlink" title="3.1 è¯­æ³•é£æ ¼"></a>3.1 è¯­æ³•é£æ ¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// CMD</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params">require, exports, module</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>);</span><br><span class="line">    a.doSomething();</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    <span class="keyword">var</span> b = <span class="built_in">require</span>(<span class="string">'./b'</span>);   <span class="comment">// ä¾èµ–å¯ä»¥å°±è¿‘ä¹¦å†™</span></span><br><span class="line">    b.doSomething();</span><br><span class="line">    <span class="comment">// ... </span></span><br><span class="line">    <span class="built_in">require</span>.async(<span class="string">'./c'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">c</span>)</span>&#123; <span class="comment">//æ”¯æŒå¼‚æ­¥åŠ è½½</span></span><br><span class="line">        c.doSomething();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// AMD é»˜è®¤æ¨èçš„æ˜¯</span></span><br><span class="line">define([<span class="string">'./a'</span>, <span class="string">'./b'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123; <span class="comment">// ä¾èµ–å¿…é¡»ä¸€å¼€å§‹å°±å†™å¥½</span></span><br><span class="line">    a.doSomething();</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">    b.doSomething();</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="3-2-AMDå’ŒCMDçš„åŒºåˆ«"><a href="#3-2-AMDå’ŒCMDçš„åŒºåˆ«" class="headerlink" title="3.2 AMDå’ŒCMDçš„åŒºåˆ«"></a>3.2 AMDå’ŒCMDçš„åŒºåˆ«</h3><p>1) <strong>å¯¹äºä¾èµ–çš„æ¨¡å—ï¼ŒAMD æ˜¯æå‰æ‰§è¡Œï¼ŒCMD æ˜¯å»¶è¿Ÿæ‰§è¡Œã€‚</strong>ä¸è¿‡ RequireJS ä» 2.0 å¼€å§‹ï¼Œä¹Ÿæ”¹æˆå¯ä»¥å»¶è¿Ÿæ‰§è¡Œï¼ˆæ ¹æ®å†™æ³•ä¸åŒï¼Œå¤„ç†æ–¹å¼ä¸åŒï¼‰ã€‚CMD æ¨å´‡ as lazy as possibleï¼ˆå°½å¯èƒ½çš„æ‡’åŠ è½½ï¼Œä¹Ÿç§°ä¸ºå»¶è¿ŸåŠ è½½ï¼Œå³åœ¨éœ€è¦çš„æ—¶å€™æ‰åŠ è½½ï¼‰ã€‚</p><p>2) <strong>CMD æ¨å´‡ä¾èµ–å°±è¿‘ï¼ŒAMD æ¨å´‡ä¾èµ–å‰ç½®ã€‚</strong>è™½ç„¶ AMD ä¹Ÿæ”¯æŒ CMD çš„å†™æ³•ï¼ŒåŒæ—¶è¿˜æ”¯æŒå°† require ä½œä¸ºä¾èµ–é¡¹ä¼ é€’ï¼Œä½† RequireJS çš„ä½œè€…é»˜è®¤æ˜¯æœ€å–œæ¬¢ä¸Šé¢çš„å†™æ³•ï¼Œä¹Ÿæ˜¯å®˜æ–¹æ–‡æ¡£é‡Œé»˜è®¤çš„æ¨¡å—å®šä¹‰å†™æ³•ã€‚</p><h3 id="3-3-æ¨èé“¾æ¥"><a href="#3-3-æ¨èé“¾æ¥" class="headerlink" title="3.3 æ¨èé“¾æ¥"></a>3.3 æ¨èé“¾æ¥</h3><p><a href="https://github.com/seajs/seajs/issues/277" target="_blank" rel="noopener">ä¸ RequireJS çš„å¼‚åŒ</a></p><p><a href="https://seajs.github.io/seajs/docs/" target="_blank" rel="noopener">SeaJSå®˜æ–¹æ–‡æ¡£</a></p><h1 id="äºŒã€Module"><a href="#äºŒã€Module" class="headerlink" title="äºŒã€Module"></a>äºŒã€Module</h1><p>ES6ä¸­Moduleçš„ç‰¹ç‚¹</p><ul><li>æµè§ˆå™¨ï¼ŒæœåŠ¡å™¨é€šç”¨</li><li>é™æ€åŠ è½½</li></ul><h2 id="1-åŸºæœ¬è¯­æ³•"><a href="#1-åŸºæœ¬è¯­æ³•" class="headerlink" title="1. åŸºæœ¬è¯­æ³•"></a>1. åŸºæœ¬è¯­æ³•</h2><h3 id="1-1-export"><a href="#1-1-export" class="headerlink" title="1.1 export"></a>1.1 export</h3><p>ä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€‚<code>export</code>å…³é”®å­—ç”¨æ¥è¾“å‡ºè¯¥å˜é‡ã€‚å¯ä»¥è¾“å‡ºå˜é‡ï¼Œå‡½æ•°æˆ–ç±»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> firstName = <span class="string">'cheng'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> lastName = <span class="string">'zhang'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> age = <span class="number">18</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.js</span></span><br><span class="line"><span class="keyword">var</span> firstName = <span class="string">'cheng'</span>;</span><br><span class="line"><span class="keyword">var</span> lastName = <span class="string">'zhang'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; firstName, lastName, age &#125;;</span><br></pre></td></tr></table></figure><p>å¯ä»¥ä½¿ç”¨<code>as</code>ä¸ºè¾“å‡ºå˜é‡é‡å‘½åã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> firstName = <span class="string">'cheng'</span>;</span><br><span class="line"><span class="keyword">var</span> lastName = <span class="string">'zhang'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">firstName <span class="keyword">as</span> name, </span><br><span class="line">    lastName <span class="keyword">as</span> lastname, </span><br><span class="line">    age</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œ<code>export</code><strong>å‘½ä»¤è§„å®šçš„æ˜¯å¯¹å¤–çš„æ¥å£</strong>ï¼Œå¿…é¡»ä¸æ¨¡å—å†…éƒ¨çš„å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">export</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">var</span> m = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">export</span> m;</span><br></pre></td></tr></table></figure><p><code>export</code>è¯­å¥è¾“å‡ºçš„æ¥å£ï¼Œä¸å…¶å¯¹åº”çš„å€¼æ˜¯<strong>åŠ¨æ€ç»‘å®šå…³ç³»</strong>ï¼Œå³é€šè¿‡è¯¥æ¥å£ï¼Œå¯ä»¥å–åˆ°æ¨¡å—å†…éƒ¨å®æ—¶çš„å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> foo = <span class="string">'bar'</span>;</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> foo = <span class="string">'baz'</span>, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure><p><code>export</code>å‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äº<strong>æ¨¡å—é¡¶å±‚</strong>å°±å¯ä»¥ã€‚</p><h3 id="1-2-import"><a href="#1-2-import" class="headerlink" title="1.2 import"></a>1.2 import</h3><p>å…¶ä»– JS æ–‡ä»¶é€šè¿‡<code>import</code>å‘½ä»¤åŠ è½½æ¨¡å—ã€‚å¤§æ‹¬å·é‡Œé¢çš„å˜é‡åï¼Œå¿…é¡»ä¸è¢«å¯¼å…¥æ¨¡å—ï¼ˆ<code>test.js</code>ï¼‰å¯¹å¤–æ¥å£çš„åç§°ç›¸åŒã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; firstName, lastName, age &#125; <span class="keyword">from</span> <span class="string">'./test.js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(firstName + <span class="string">' '</span> + lastName);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//cheng zhang</span></span><br></pre></td></tr></table></figure><p><code>import</code>å‘½ä»¤è¾“å…¥çš„å˜é‡éƒ½æ˜¯<strong>åªè¯»</strong>çš„ï¼Œå› ä¸ºå®ƒçš„æœ¬è´¨æ˜¯è¾“å…¥æ¥å£ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;a&#125; <span class="keyword">from</span> <span class="string">'./xxx.js'</span></span><br><span class="line"></span><br><span class="line">a = &#123;&#125;; <span class="comment">// Assignment to constant variable.</span></span><br></pre></td></tr></table></figure><p>å¦‚æœ<code>a</code>æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ”¹å†™<code>a</code>çš„å±æ€§æ˜¯å…è®¸çš„ã€‚å’Œconstä¸€æ ·ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;a&#125; <span class="keyword">from</span> <span class="string">'./xxx.js'</span></span><br><span class="line"></span><br><span class="line">a.foo = <span class="string">'hello'</span>; <span class="comment">// åˆæ³•æ“ä½œ</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥ç”¨æ˜Ÿå·ï¼ˆ<code>*</code>ï¼‰æŒ‡å®šä¸€ä¸ªå¯¹è±¡ï¼Œè¿›è¡Œæ•´ä½“åŠ è½½ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> test <span class="keyword">from</span> <span class="string">'./test.js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">showName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(test.firstName + <span class="string">' '</span> + test.lastName);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//cheng zhang</span></span><br><span class="line"></span><br><span class="line">test.lastName = <span class="string">'yun'</span>;</span><br><span class="line"><span class="comment">//Cannot assign to read only property 'lastName' of object '[object Module]'</span></span><br><span class="line"><span class="comment">//å¦‚æœæ˜¯å¯¹è±¡ï¼Œå¯ä»¥ä¿®æ”¹å¯¹è±¡çš„å±æ€§ã€‚</span></span><br></pre></td></tr></table></figure><p><code>import</code>å‘½ä»¤<strong>å…·æœ‰æå‡æ•ˆæœ</strong>ï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">foo();</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; foo &#125; <span class="keyword">from</span> <span class="string">'my_module'</span>;</span><br></pre></td></tr></table></figure><p>ç”±äº<code>import</code>æ˜¯é™æ€æ‰§è¡Œï¼Œæ‰€ä»¥<strong>ä¸èƒ½ä½¿ç”¨è¡¨è¾¾å¼å’Œå˜é‡</strong>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="string">'f'</span> + <span class="string">'oo'</span> &#125; <span class="keyword">from</span> <span class="string">'my_module'</span>;</span><br></pre></td></tr></table></figure><p><code>import</code>è¯­å¥<strong>ä¼šæ‰§è¡Œæ‰€åŠ è½½çš„æ¨¡å—</strong>ï¼Œå› æ­¤å¯ä»¥æœ‰ä¸‹é¢çš„å†™æ³•ã€‚ä»…ä»…æ‰§è¡Œ<code>lodash</code>æ¨¡å—ï¼Œä½†æ˜¯ä¸è¾“å…¥ä»»ä½•å€¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'lodash'</span>;</span><br></pre></td></tr></table></figure><p>å³ä½¿åŠ è½½å¤šæ¬¡ï¼Œä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>import</code>è¯­å¥æ˜¯ <strong>Singleton æ¨¡å¼</strong>ã€‚</p><h3 id="1-3-å•ä¾‹æ¨¡å¼è§£è¯»"><a href="#1-3-å•ä¾‹æ¨¡å¼è§£è¯»" class="headerlink" title="1.3 å•ä¾‹æ¨¡å¼è§£è¯»"></a>1.3 å•ä¾‹æ¨¡å¼è§£è¯»</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//counter.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> counter = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">addCounter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    counter++;</span><br><span class="line">&#125;</span><br><span class="line">addCounter();</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;counter, addCounter&#125; <span class="keyword">from</span> <span class="string">'./counter'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'main:'</span> + counter);</span><br><span class="line">addCounter();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'main:'</span> + counter);</span><br><span class="line"></span><br><span class="line"><span class="comment">//main:2</span></span><br><span class="line"><span class="comment">//main:3</span></span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>module test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span> <span class="attr">src</span>=<span class="string">'main.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span> <span class="attr">src</span>=<span class="string">'main2.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main2.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;counter, addCounter&#125; <span class="keyword">from</span> <span class="string">'./counter'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'main2:'</span> + counter);</span><br><span class="line">addCounter();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'main2:'</span> + counter);</span><br><span class="line"></span><br><span class="line"><span class="comment">//main2:3</span></span><br><span class="line"><span class="comment">//main2:4</span></span><br></pre></td></tr></table></figure><h3 id="1-4-export-default"><a href="#1-4-export-default" class="headerlink" title="1.4 export default"></a>1.4 export default</h3><p>ä½¿ç”¨<code>export default</code>å¯ä»¥ä¸ç”¨å…³æ³¨è¾“å‡ºæ¨¡å—ä¸­çš„å˜é‡åã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export-default.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'foo'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// import-default.js</span></span><br><span class="line"><span class="keyword">import</span> customName <span class="keyword">from</span> <span class="string">'./export-default'</span>;</span><br><span class="line">customName(); <span class="comment">// 'foo'</span></span><br></pre></td></tr></table></figure><p><code>import</code>å‘½ä»¤å¯ä»¥ä¸ºè¯¥åŒ¿åå‡½æ•°æŒ‡å®šä»»æ„åå­—ã€‚<code>import</code>å‘½ä»¤åé¢ï¼Œä¸ä½¿ç”¨å¤§æ‹¬å·ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// export-default.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'foo'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> foo;</span><br></pre></td></tr></table></figure><p><code>export default</code>çš„æœ¬è´¨ï¼Œå°±æ˜¯è¾“å‡ºä¸€ä¸ªå«åš<code>default</code>çš„å˜é‡æˆ–æ–¹æ³•ã€‚</p><p><code>imort something from ..</code>.çš„æœ¬è´¨ï¼Œå°±æ˜¯<code>import {default as something} from ...</code></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é”™è¯¯</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">var</span> a = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ­£ç¡®</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠ¥é”™</span></span><br><span class="line"><span class="keyword">export</span> <span class="number">42</span>;</span><br></pre></td></tr></table></figure><p>æ‰€ä»¥<code>export default</code>æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MyClass.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> MyClass <span class="keyword">from</span> <span class="string">'MyClass'</span>;</span><br><span class="line"><span class="keyword">let</span> o = <span class="keyword">new</span> MyClass();</span><br></pre></td></tr></table></figure><h3 id="1-5-import-amp-exportæ··åˆä½¿ç”¨"><a href="#1-5-import-amp-exportæ··åˆä½¿ç”¨" class="headerlink" title="1.5 import&amp;exportæ··åˆä½¿ç”¨"></a>1.5 import&amp;exportæ··åˆä½¿ç”¨</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123; foo, bar &#125; <span class="keyword">from</span> <span class="string">'my_module'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯ä»¥ç®€å•ç†è§£ä¸º</span></span><br><span class="line"><span class="keyword">import</span> &#123; foo, bar &#125; <span class="keyword">from</span> <span class="string">'my_module'</span>;</span><br><span class="line"><span class="keyword">export</span> &#123; foo, bar &#125;;</span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­ï¼Œ<code>export</code>å’Œ<code>import</code>è¯­å¥å¯ä»¥ç»“åˆåœ¨ä¸€èµ·ï¼Œå†™æˆä¸€è¡Œã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå†™æˆä¸€è¡Œä»¥åï¼Œ<code>foo</code>å’Œ<code>bar</code><strong>å®é™…ä¸Šå¹¶æ²¡æœ‰è¢«å¯¼å…¥å½“å‰æ¨¡å—</strong>ï¼Œåªæ˜¯ç›¸å½“äºå¯¹å¤–è½¬å‘äº†è¿™ä¸¤ä¸ªæ¥å£ï¼Œå¯¼è‡´<strong>å½“å‰æ¨¡å—ä¸èƒ½ç›´æ¥ä½¿ç”¨</strong><code>foo</code>å’Œ<code>bar</code>ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¥å£æ”¹å</span></span><br><span class="line"><span class="keyword">export</span> &#123; fooName <span class="keyword">as</span> newName &#125; <span class="keyword">from</span> <span class="string">'my_module'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…·åæ¥å£æ”¹ä¸ºé»˜è®¤æ¥å£</span></span><br><span class="line"><span class="keyword">export</span> &#123; foo <span class="keyword">as</span> <span class="keyword">default</span> &#125; <span class="keyword">from</span> <span class="string">'./someModule'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ¥å£ä¹Ÿå¯ä»¥æ”¹åä¸ºå…·åæ¥å£</span></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> es6 &#125; <span class="keyword">from</span> <span class="string">'./someModule'</span>;</span><br></pre></td></tr></table></figure><h3 id="1-6-æ¨¡å—çš„ç»§æ‰¿"><a href="#1-6-æ¨¡å—çš„ç»§æ‰¿" class="headerlink" title="1.6 æ¨¡å—çš„ç»§æ‰¿"></a>1.6 æ¨¡å—çš„ç»§æ‰¿</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//calculator.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//calculatorPlus.js</span></span><br><span class="line"><span class="keyword">export</span> * <span class="keyword">from</span> <span class="string">'./calculator.js'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">multiply</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> cal <span class="keyword">from</span> <span class="string">'./calculatorPlus.js'</span>;</span><br><span class="line"></span><br><span class="line">cal.add(<span class="number">2</span>, <span class="number">3</span>);<span class="comment">//5</span></span><br><span class="line">cal.multiply(<span class="number">2</span>, <span class="number">3</span>);<span class="comment">//6</span></span><br></pre></td></tr></table></figure><h3 id="1-7-import"><a href="#1-7-import" class="headerlink" title="1.7 import()"></a>1.7 import()</h3><p><code>import()</code>ææ¡ˆæ˜¯ä¸ºäº†è§£å†³<code>import</code><strong>åŠ¨æ€åŠ è½½</strong>ï¼Œå’Œ<strong>ä¸èƒ½å†™åœ¨ä»£ç å—ä¸­</strong>çš„é—®é¢˜ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span>(a + <span class="string">'.js'</span>)</span><br><span class="line">.then(...);</span><br><span class="line">      </span><br><span class="line"><span class="keyword">import</span>(f())</span><br><span class="line">.then(...);</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (condition) &#123;</span><br><span class="line">  <span class="keyword">import</span>(<span class="string">'moduleA'</span>).then(...);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">import</span>(<span class="string">'moduleB'</span>).then(...);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-Moduleè¡¥å……"><a href="#2-Moduleè¡¥å……" class="headerlink" title="2. Moduleè¡¥å……"></a>2. Moduleè¡¥å……</h2><h3 id="2-1-æµè§ˆå™¨åŠ è½½"><a href="#2-1-æµè§ˆå™¨åŠ è½½" class="headerlink" title="2.1 æµè§ˆå™¨åŠ è½½"></a>2.1 æµè§ˆå™¨åŠ è½½</h3><p>htmlä¸­åŠ è½½ ES6 æ¨¡å—ï¼Œä¹Ÿä½¿ç”¨<code>&lt;script&gt;</code>æ ‡ç­¾ï¼Œä½†æ˜¯è¦åŠ å…¥<code>type=&quot;module&quot;</code>å±æ€§ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span> <span class="attr">src</span>=<span class="string">"./myModule.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--ç­‰åŒäº--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span> <span class="attr">src</span>=<span class="string">"./myModule.js"</span> <span class="attr">defer</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span> <span class="attr">src</span>=<span class="string">"./myModule.js"</span> <span class="attr">async</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li><p><code>defer</code>:è¦ç­‰åˆ°æ•´ä¸ªé¡µé¢åœ¨å†…å­˜ä¸­æ­£å¸¸æ¸²æŸ“ç»“æŸï¼ˆDOM ç»“æ„å®Œå…¨ç”Ÿæˆï¼Œä»¥åŠå…¶ä»–è„šæœ¬æ‰§è¡Œå®Œæˆï¼‰ï¼Œæ‰ä¼šæ‰§è¡Œã€‚ä¿è¯æ‰§è¡Œé¡ºåºã€‚</p></li><li><p><code>async</code>:ä¸€æ—¦ä¸‹è½½å®Œï¼Œæ¸²æŸ“å¼•æ“å°±ä¼šä¸­æ–­æ¸²æŸ“ï¼Œæ‰§è¡Œè¿™ä¸ªè„šæœ¬ä»¥åï¼Œå†ç»§ç»­æ¸²æŸ“ã€‚ä¸èƒ½ä¿è¯æ‰§è¡Œé¡ºåºã€‚</p></li></ul><p>å¯¹äºå¤–éƒ¨çš„æ¨¡å—è„šæœ¬ï¼Œè¦æ³¨æ„ï¼š</p><ul><li>ä»£ç æ˜¯åœ¨æ¨¡å—ä½œç”¨åŸŸä¹‹ä¸­è¿è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸè¿è¡Œã€‚æ¨¡å—å†…éƒ¨çš„é¡¶å±‚å˜é‡ï¼Œå¤–éƒ¨ä¸å¯è§ã€‚</li><li>æ¨¡å—è„šæœ¬è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸ç®¡æœ‰æ²¡æœ‰å£°æ˜<code>use strict</code>ã€‚</li><li>æ¨¡å—ä¹‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>import</code>å‘½ä»¤åŠ è½½å…¶ä»–æ¨¡å—ï¼ˆ<code>.js</code>åç¼€ä¸å¯çœç•¥ï¼Œéœ€è¦æä¾›ç»å¯¹ URL æˆ–ç›¸å¯¹ URLï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨<code>export</code>å‘½ä»¤è¾“å‡ºå¯¹å¤–æ¥å£ã€‚</li><li><strong>æ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„<code>this</code>å…³é”®å­—è¿”å›<code>undefined</code>ï¼Œè€Œä¸æ˜¯æŒ‡å‘<code>window</code>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ¨¡å—é¡¶å±‚ä½¿ç”¨<code>this</code>å…³é”®å­—ï¼Œæ˜¯æ— æ„ä¹‰çš„</strong>ã€‚</li><li>åŒä¸€ä¸ªæ¨¡å—å¦‚æœåŠ è½½å¤šæ¬¡ï¼Œå°†åªæ‰§è¡Œä¸€æ¬¡ã€‚</li></ul><h3 id="2-2-å¾ªç¯åŠ è½½"><a href="#2-2-å¾ªç¯åŠ è½½" class="headerlink" title="2.2 å¾ªç¯åŠ è½½"></a>2.2 å¾ªç¯åŠ è½½</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;bar&#125; <span class="keyword">from</span> <span class="string">'./b'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'a.js'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(bar);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> foo = <span class="string">'foo'</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;foo&#125; <span class="keyword">from</span> <span class="string">'./a'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'b.js'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(foo);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">let</span> bar = <span class="string">'bar'</span>;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>module test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"module"</span> <span class="attr">src</span>=<span class="string">'a.js'</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--Cannot access 'foo' before initialization--&gt;</span></span><br></pre></td></tr></table></figure><hr><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;bar&#125; <span class="keyword">from</span> <span class="string">'./b'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'a.js'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(bar());</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="string">'foo'</span> &#125;</span><br><span class="line"><span class="keyword">export</span> &#123;foo&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="keyword">import</span> &#123;foo&#125; <span class="keyword">from</span> <span class="string">'./a'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'b.js'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(foo());</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="string">'bar'</span> &#125;</span><br><span class="line"><span class="keyword">export</span> &#123;bar&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//b.mjs</span></span><br><span class="line"><span class="comment">//foo</span></span><br><span class="line"><span class="comment">//a.mjs</span></span><br><span class="line"><span class="comment">//bar</span></span><br></pre></td></tr></table></figure><p>å› ä¸ºå‡½æ•°å…·æœ‰æå‡ä½œç”¨ã€‚</p><h3 id="2-3-ES6æ¨¡å—å’ŒCommonJSæ¨¡å—çš„å·®å¼‚"><a href="#2-3-ES6æ¨¡å—å’ŒCommonJSæ¨¡å—çš„å·®å¼‚" class="headerlink" title="2.3 ES6æ¨¡å—å’ŒCommonJSæ¨¡å—çš„å·®å¼‚"></a>2.3 ES6æ¨¡å—å’ŒCommonJSæ¨¡å—çš„å·®å¼‚</h3><ol><li><p><code>import</code>å’Œ<code>export</code>æ˜¯å…³é”®å­—ï¼Œ<code>require</code>ä¸æ˜¯ã€‚</p></li><li><p>CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚(è¯¦æƒ…è§ä¸Šæ–¹ã€å•ä¾‹æ¨¡å¼è§£è¯»ã€‘)</p></li><li><p>CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ã€‚</p><pre><code>   å› ä¸º CommonJS åŠ è½½çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆå³`module.exports`å±æ€§ï¼‰ï¼Œè¯¥å¯¹è±¡åªæœ‰åœ¨è„šæœ¬è¿è¡Œå®Œæ‰ä¼šç”Ÿæˆã€‚è€Œ ES6 æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œå®ƒçš„å¯¹å¤–æ¥å£åªæ˜¯ä¸€ç§é™æ€å®šä¹‰ï¼Œåœ¨ä»£ç é™æ€è§£æé˜¶æ®µå°±ä¼šç”Ÿæˆã€‚<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//counter.js</span></span><br><span class="line"><span class="keyword">let</span> counter = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addCounter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    counter++;</span><br><span class="line">&#125;</span><br><span class="line">addCounter();</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    counter,</span><br><span class="line">    addCounter: addCunter</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">var</span> counter = <span class="built_in">require</span>(<span class="string">'./addCounter.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'main:'</span> + counter.counter);<span class="comment">//3</span></span><br><span class="line">counter.addCounter();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'main:'</span> + counter.counter);<span class="comment">//3</span></span><br></pre></td></tr></table></figure></code></pre></li><li><p><strong><code>this</code>æŒ‡å‘ä¸åŒ</strong>ã€‚ES6 æ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„<code>this</code>æŒ‡å‘<code>undefined</code>ï¼›CommonJS æ¨¡å—çš„é¡¶å±‚<code>this</code>æŒ‡å‘å½“å‰æ¨¡å—ï¼Œè¿™æ˜¯ä¸¤è€…çš„ä¸€ä¸ªé‡å¤§å·®å¼‚ã€‚</p></li></ol>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%91%E5%B1%95.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>PWAæ‰‹è®°</title>
      <link>http://mydearest.cn/2019/PWA%E6%89%8B%E8%AE%B0.html</link>
      <guid>http://mydearest.cn/2019/PWA%E6%89%8B%E8%AE%B0.html</guid>
      <pubDate>Sun, 26 May 2019 13:18:30 GMT</pubDate>
      <description>
      
        &lt;p&gt;PWAä½œä¸º2018æœ€ç«çƒ­çš„æŠ€æœ¯æ¦‚å¿µä¹‹ä¸€ï¼Œå¯¹æå‡Webåº”ç”¨çš„å®‰å…¨ã€æ€§èƒ½å’Œä½“éªŒæœ‰ç€å¾ˆå¤§çš„æ„ä¹‰ï¼Œéå¸¸å€¼å¾—æˆ‘ä»¬å»äº†è§£ä¸å­¦ä¹ ã€‚&lt;/p&gt;
&lt;p&gt;PWAæ˜¯Progressive Web Appçš„è‹±æ–‡ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯æ¸è¿›å¼å¢å¼ºWEBåº”ç”¨ã€‚ç›®çš„å°±æ˜¯åœ¨ç§»åŠ¨ç«¯åˆ©ç”¨æä¾›çš„æ ‡å‡†åŒ–æ¡†æ¶ï¼Œåœ¨ç½‘é¡µåº”ç”¨ä¸­å®ç°å’ŒåŸç”Ÿåº”ç”¨ç›¸è¿‘çš„ç”¨æˆ·ä½“éªŒã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ª PWA åº”ç”¨é¦–å…ˆæ˜¯ä¸€ä¸ªç½‘é¡µ, å¯ä»¥é€šè¿‡ Web æŠ€æœ¯ç¼–å†™å‡ºä¸€ä¸ªç½‘é¡µåº”ç”¨. éšåæ·»åŠ ä¸Š App Manifest å’Œ Service Worker æ¥å®ç° PWA çš„&lt;/p&gt;
&lt;p&gt;å®‰è£…å’Œç¦»çº¿ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦ç†è§£çš„æ˜¯ï¼ŒPWAä¸æ˜¯æŸä¸€é¡¹æŠ€æœ¯ï¼Œæˆ–è€…æŸä¸€ä¸ªæ–°çš„äº§ç‰©ï¼›è€Œæ˜¯ä¸€ç³»åˆ—WebæŠ€æœ¯ä¸æ ‡å‡†çš„é›†åˆä¸åº”ç”¨ã€‚é€šè¿‡åº”ç”¨è¿™äº›æ–°çš„æŠ€æœ¯ä¸æ ‡å‡†ï¼Œå¯ä»¥ä»å®‰&lt;/p&gt;
&lt;h2 id=&quot;å…¨ã€æ€§èƒ½å’Œä½“éªŒä¸‰ä¸ªæ–¹é¢ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„Web-Appã€‚æ‰€ä»¥ï¼Œå…¶å®PWAæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ªWeb-Appã€‚&quot;&gt;&lt;a href=&quot;#å…¨ã€æ€§èƒ½å’Œä½“éªŒä¸‰ä¸ªæ–¹é¢ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„Web-Appã€‚æ‰€ä»¥ï¼Œå…¶å®PWAæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ªWeb-Appã€‚&quot; class=&quot;headerlink&quot; title=&quot;å…¨ã€æ€§èƒ½å’Œä½“éªŒä¸‰ä¸ªæ–¹é¢ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„Web Appã€‚æ‰€ä»¥ï¼Œå…¶å®PWAæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ªWeb Appã€‚&quot;&gt;&lt;/a&gt;å…¨ã€æ€§èƒ½å’Œä½“éªŒä¸‰ä¸ªæ–¹é¢ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„Web Appã€‚æ‰€ä»¥ï¼Œå…¶å®PWAæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ªWeb Appã€‚&lt;/h2&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>PWAä½œä¸º2018æœ€ç«çƒ­çš„æŠ€æœ¯æ¦‚å¿µä¹‹ä¸€ï¼Œå¯¹æå‡Webåº”ç”¨çš„å®‰å…¨ã€æ€§èƒ½å’Œä½“éªŒæœ‰ç€å¾ˆå¤§çš„æ„ä¹‰ï¼Œéå¸¸å€¼å¾—æˆ‘ä»¬å»äº†è§£ä¸å­¦ä¹ ã€‚</p><p>PWAæ˜¯Progressive Web Appçš„è‹±æ–‡ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯æ¸è¿›å¼å¢å¼ºWEBåº”ç”¨ã€‚ç›®çš„å°±æ˜¯åœ¨ç§»åŠ¨ç«¯åˆ©ç”¨æä¾›çš„æ ‡å‡†åŒ–æ¡†æ¶ï¼Œåœ¨ç½‘é¡µåº”ç”¨ä¸­å®ç°å’ŒåŸç”Ÿåº”ç”¨ç›¸è¿‘çš„ç”¨æˆ·ä½“éªŒã€‚</p><p>ä¸€ä¸ª PWA åº”ç”¨é¦–å…ˆæ˜¯ä¸€ä¸ªç½‘é¡µ, å¯ä»¥é€šè¿‡ Web æŠ€æœ¯ç¼–å†™å‡ºä¸€ä¸ªç½‘é¡µåº”ç”¨. éšåæ·»åŠ ä¸Š App Manifest å’Œ Service Worker æ¥å®ç° PWA çš„</p><p>å®‰è£…å’Œç¦»çº¿ç­‰åŠŸèƒ½ã€‚</p><p>æˆ‘ä»¬éœ€è¦ç†è§£çš„æ˜¯ï¼ŒPWAä¸æ˜¯æŸä¸€é¡¹æŠ€æœ¯ï¼Œæˆ–è€…æŸä¸€ä¸ªæ–°çš„äº§ç‰©ï¼›è€Œæ˜¯ä¸€ç³»åˆ—WebæŠ€æœ¯ä¸æ ‡å‡†çš„é›†åˆä¸åº”ç”¨ã€‚é€šè¿‡åº”ç”¨è¿™äº›æ–°çš„æŠ€æœ¯ä¸æ ‡å‡†ï¼Œå¯ä»¥ä»å®‰</p><h2 id="å…¨ã€æ€§èƒ½å’Œä½“éªŒä¸‰ä¸ªæ–¹é¢ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„Web-Appã€‚æ‰€ä»¥ï¼Œå…¶å®PWAæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ªWeb-Appã€‚"><a href="#å…¨ã€æ€§èƒ½å’Œä½“éªŒä¸‰ä¸ªæ–¹é¢ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„Web-Appã€‚æ‰€ä»¥ï¼Œå…¶å®PWAæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ªWeb-Appã€‚" class="headerlink" title="å…¨ã€æ€§èƒ½å’Œä½“éªŒä¸‰ä¸ªæ–¹é¢ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„Web Appã€‚æ‰€ä»¥ï¼Œå…¶å®PWAæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ªWeb Appã€‚"></a>å…¨ã€æ€§èƒ½å’Œä½“éªŒä¸‰ä¸ªæ–¹é¢ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„Web Appã€‚æ‰€ä»¥ï¼Œå…¶å®PWAæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ªWeb Appã€‚</h2><a id="more"></a><h2 id="æ ¸å¿ƒæŠ€æœ¯"><a href="#æ ¸å¿ƒæŠ€æœ¯" class="headerlink" title="æ ¸å¿ƒæŠ€æœ¯"></a>æ ¸å¿ƒæŠ€æœ¯</h2><ul><li><p>Service Worker ï¼ˆå¯ä»¥ç†è§£ä¸ºæœåŠ¡å·¥å‚ï¼‰</p></li><li><p>Manifest ï¼ˆåº”ç”¨æ¸…å•ï¼‰</p></li><li><p>Push Notificationï¼ˆæ¨é€é€šçŸ¥ï¼‰</p></li></ul><h2 id="service-worker-web-worker"><a href="#service-worker-web-worker" class="headerlink" title="service worker (web worker)"></a>service worker (web worker)</h2><ul><li>ä¸€ä¸ªç‹¬ç«‹çš„ worker çº¿ç¨‹ï¼Œç‹¬ç«‹äºå½“å‰ç½‘é¡µè¿›ç¨‹ï¼Œæœ‰è‡ªå·±ç‹¬ç«‹çš„ worker contextã€‚</li><li>ä¸€æ—¦è¢« installï¼Œå°±æ°¸è¿œå­˜åœ¨ï¼Œé™¤éè¢« uninstall</li><li>éœ€è¦çš„æ—¶å€™å¯ä»¥ç›´æ¥å”¤é†’ï¼Œä¸éœ€è¦çš„æ—¶å€™è‡ªåŠ¨ç¡çœ ï¼ˆæœ‰æ•ˆåˆ©ç”¨èµ„æºï¼‰</li><li>å¯ç¼–ç¨‹æ‹¦æˆªä»£ç†è¯·æ±‚å’Œè¿”å›ï¼Œç¼“å­˜æ–‡ä»¶ï¼Œç¼“å­˜çš„æ–‡ä»¶å¯ä»¥è¢«ç½‘é¡µè¿›ç¨‹å–åˆ°ï¼ˆåŒ…æ‹¬ç½‘ç»œç¦»çº¿çŠ¶æ€ï¼‰</li><li>ä¸èƒ½ç›´æ¥æ“ä½œDOMå‡ºäºå®‰å…¨çš„è€ƒè™‘ï¼Œå¿…é¡»åœ¨ HTTPS ç¯å¢ƒä¸‹æ‰èƒ½å·¥ä½œ</li><li>å¼‚æ­¥å®ç°ï¼Œå†…éƒ¨å¤§éƒ½æ˜¯é€šè¿‡ Promise å®ç°</li></ul><p>web workerweb worker  æ˜¯è¿è¡Œåœ¨åå°çš„JavaScriptï¼Œç‹¬ç«‹äºå…¶ä»–è„šæœ¬ï¼Œä¸ä¼šå½±å“é¡µé¢çš„æ€§èƒ½ã€‚</p><p>æµè§ˆå™¨ä¸€èˆ¬æœ‰ä¸‰ç±» web Worker</p><ul><li><p>Dedicated Worker ï¼šä¸“ç”¨çš„ workerï¼Œåªèƒ½è¢«åˆ›å»ºå®ƒçš„ JS è®¿é—®ï¼Œåˆ›å»ºå®ƒçš„é¡µé¢å…³é—­ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸå°±ç»“æŸäº†ã€‚</p></li><li><p>Shared  Worker ï¼šå…±äº«çš„ workerï¼Œå¯ä»¥è¢«åŒä¸€åŸŸåä¸‹çš„ JS è®¿é—®ï¼Œå…³è”çš„é¡µé¢éƒ½å…³é—­æ—¶ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸå°±ç»“æŸäº†ã€‚</p></li><li><p>Service Worker ï¼šæ˜¯äº‹ä»¶é©±åŠ¨çš„ workerï¼Œç”Ÿå‘½å‘¨æœŸä¸é¡µé¢æ— å…³ï¼Œå…³è”é¡µé¢æœªå…³é—­æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥é€€å‡ºï¼Œæ²¡æœ‰å…³è”é¡µé¢æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥å¯åŠ¨ã€‚SW ä½œç”¨äºæµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´ï¼Œç›¸å½“äºä¸€ä¸ªä»£ç†æœåŠ¡å™¨ã€‚</p></li></ul><h3 id="Service-Workerç”Ÿå‘½å‘¨æœŸ"><a href="#Service-Workerç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="Service Workerç”Ÿå‘½å‘¨æœŸ"></a>Service Workerç”Ÿå‘½å‘¨æœŸ</h3><p>çœ‹æˆçº¢ç»¿ç¯çº¢ ä¸‹è½½å’Œè§£æé»„ æ­£åœ¨æ‰§è¡Œ è¿˜æ²¡å‡†å¤‡å¥½ç»¿ éšæ—¶å¯ä½¿ç”¨ä¸”ç¬¬ä¸€æ¬¡åŠ è½½é¡µé¢ swè¿˜æ²¡æœ‰æ¿€æ´» ä¸ä¼šå¤„ç†ä»»ä½•è¯·æ±‚ åªæœ‰å®‰è£…å’Œæ¿€æ´»åæ‰èƒ½ä½¿ç”¨ã€‚ï¼ˆåˆ·æ–°é¡µé¢å’Œè·³è½¬æ–°é¡µé¢æ‰ä¼šç”Ÿæ•ˆï¼‰</p><ul><li>æ­¥éª¤</li></ul><ol><li>ç”¨æˆ·å¯¼èˆªåˆ°url</li><li>æ³¨å†Œsw è¿‡ç¨‹ä¸­æµè§ˆå™¨ä¸‹è½½è§£ææ‰§è¡Œsw</li><li>ä¸€æ—¦æ‰§è¡Œæ¿€æ´»å®‰è£…æ—¶é—´</li><li>å®‰è£…æˆåŠŸå°±å¯ä»¥æ§åˆ¶å®¢æˆ·ç«¯åŠŸèƒ½äº‹ä»¶</li></ol><h3 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h3><ul><li>self: è¡¨ç¤º Service Worker ä½œç”¨åŸŸ, ä¹Ÿæ˜¯å…¨å±€å˜é‡SW çš„é»˜è®¤ä½œç”¨åŸŸä¸ºåŸºäºå½“å‰æ–‡ä»¶ URL çš„ ./ã€‚æ„æ€å°±æ˜¯å¦‚æœä½ åœ¨//example.com/foo/bar.jsé‡Œæ³¨å†Œäº†ä¸€ä¸ª SWï¼Œé‚£ä¹ˆå®ƒé»˜è®¤çš„ä½œç”¨åŸŸä¸º //example.com/foo/ã€‚</li></ul><p>é€šè¿‡æŸ¥çœ‹navigator.serviceWorker.controlleræ˜¯å¦ä¸º null æ¥æŸ¥çœ‹ä¸€ä¸ªclientæ˜¯å¦è¢« SW æ§åˆ¶ã€‚</p><ul><li>caches: è¡¨ç¤ºç¼“å­˜</li><li>skipWaiting: è¡¨ç¤ºå¼ºåˆ¶å½“å‰å¤„åœ¨ waiting çŠ¶æ€çš„è„šæœ¬è¿›å…¥ activate çŠ¶æ€ï¼ˆä¸ºäº†åœ¨é¡µé¢æ›´æ–°çš„è¿‡ç¨‹å½“ä¸­ï¼Œæ–°çš„ SW è„šæœ¬èƒ½å¤Ÿç«‹åˆ»æ¿€æ´»å’Œç”Ÿæ•ˆã€‚æ— éœ€åˆ·æ–°æˆ–è€…è·³è½¬æ–°é¡µé¢ã€‚ï¼‰</li><li>clients: è¡¨ç¤º Service Worker æ¥ç®¡çš„é¡µé¢</li><li>clients.claim() åœ¨ activate äº‹ä»¶å›è°ƒä¸­æ‰§è¡Œè¯¥æ–¹æ³•è¡¨ç¤ºå–å¾—é¡µé¢çš„æ§åˆ¶æƒ, è¿™æ ·ä¹‹åæ‰“å¼€é¡µé¢éƒ½ä¼šä½¿ç”¨ç‰ˆæœ¬æ›´æ–°çš„ç¼“å­˜ã€‚æ—§çš„ Service Worker è„šæœ¬ä¸å†æ§åˆ¶ç€é¡µé¢ï¼Œä¹‹åä¼šè¢«åœæ­¢ã€‚</li></ul><h3 id="Service-Worker-æ³¨å†Œ"><a href="#Service-Worker-æ³¨å†Œ" class="headerlink" title="Service Worker æ³¨å†Œ"></a>Service Worker æ³¨å†Œ</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ£€æŸ¥å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒsw</span></span><br><span class="line"><span class="keyword">if</span> (<span class="string">'serviceWorker'</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœæ”¯æŒå¼€å§‹æ³¨å†Œsw</span></span><br><span class="line">    navigator.serviceWorker</span><br><span class="line">        .register(<span class="string">'./service-worker.js'</span>)</span><br><span class="line">        .then(<span class="function"><span class="params">registration</span> =&gt;</span> &#123; </span><br><span class="line">            <span class="built_in">console</span>,log(<span class="string">'æ³¨å†ŒæˆåŠŸ'</span>, registration)</span><br><span class="line">            <span class="comment">// æ¶ˆæ¯æ¨é€ è·å–æˆæƒ</span></span><br><span class="line">            <span class="comment">// Notification.requestPermission(function(result) &#123;</span></span><br><span class="line">            <span class="comment">//         console.log('result', result)</span></span><br><span class="line">            <span class="comment">//         if (result === 'granted') &#123;</span></span><br><span class="line">            <span class="comment">//             registration.showNotification('Vibration Sample', &#123;</span></span><br><span class="line">            <span class="comment">//                 body: 'Buzz! Buzz!',</span></span><br><span class="line">            <span class="comment">//                 icon: './img/mario.png',</span></span><br><span class="line">            <span class="comment">//                 vibrate: [200, 100, 200, 100, 200, 100, 200],</span></span><br><span class="line">            <span class="comment">//                 tag: 'vibration-sample'</span></span><br><span class="line">            <span class="comment">//             &#125;);</span></span><br><span class="line">            <span class="comment">//         &#125; else &#123;</span></span><br><span class="line">            <span class="comment">//             alert(result);</span></span><br><span class="line">            <span class="comment">//         &#125;     </span></span><br><span class="line">            <span class="comment">// &#125;);</span></span><br><span class="line">            <span class="comment">// æ‰‹åŠ¨æ›´æ–°</span></span><br><span class="line">            <span class="comment">// registration.update();</span></span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function"><span class="params">err</span> =&gt;</span> <span class="built_in">console</span>.log(<span class="string">'æ³¨å†Œå¤±è´¥'</span>,err));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æŸ¥çœ‹æ˜¯å¦æ³¨å†ŒæˆåŠŸå¯ä»¥åœ¨ PC ä¸Šchrome æµè§ˆå™¨, è¾“å…¥ chrome://inspect/#service-workers</span></span><br></pre></td></tr></table></figure><h3 id="Service-Worker-å®‰è£…ï¼ˆå¤„ç†é™æ€ç¼“å­˜ï¼‰"><a href="#Service-Worker-å®‰è£…ï¼ˆå¤„ç†é™æ€ç¼“å­˜ï¼‰" class="headerlink" title="Service Worker å®‰è£…ï¼ˆå¤„ç†é™æ€ç¼“å­˜ï¼‰"></a>Service Worker å®‰è£…ï¼ˆå¤„ç†é™æ€ç¼“å­˜ï¼‰</h3><ol><li><p>è¿™ä¸ªçŠ¶æ€å‘ç”Ÿåœ¨ Service Worker æ³¨å†Œä¹‹åï¼Œæ˜¯ sw è§¦å‘çš„ç¬¬ä¸€ä¸ªäº‹ä»¶å¹¶ä¸”åªè§¦å‘ä¸€æ¬¡ã€‚è¡¨ç¤ºå¼€å§‹å®‰è£…ï¼Œè§¦å‘ install äº‹ä»¶å›è°ƒæŒ‡å®šä¸€äº›é™æ€èµ„æºè¿›è¡Œç¦»çº¿ç¼“å­˜ã€‚ä¿®æ”¹ä½ çš„ SW åï¼Œæµè§ˆå™¨ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ–°çš„ SWï¼Œä»è€Œä¼šå†è§¦å‘è¿™ä¸ªæ–° SW çš„installäº‹ä»¶ã€‚</p></li><li><p>e.waitUntil() ä¼ å…¥ä¸€ä¸ª Promise ä¸ºå‚æ•°ï¼Œç­‰åˆ°è¯¥ Promise ä¸º resolve çŠ¶æ€ä¸ºæ­¢ã€‚å¦‚æœ Promise è¢«æ‹’ç»ï¼Œåˆ™å®‰è£…å¤±è´¥ï¼ŒSWä¼šè¿›å…¥ Redundantï¼ˆ åºŸå¼ƒ ï¼‰çŠ¶æ€ã€‚ç¡®ä¿ Service Worker ä¸ä¼šåœ¨ waitUntil() é‡Œé¢çš„ä»£ç æ‰§è¡Œå®Œæ¯•ä¹‹å‰å®‰è£…å®Œæˆã€‚</p></li><li><p>sw åœ¨å®‰è£…æˆåŠŸå’Œæ¿€æ´»ä¹‹å‰ä¸ä¼šè§¦å‘ä»»ä½•çš„ fetch æˆ– push ç­‰äº‹ä»¶ã€‚</p></li><li><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œé¡µé¢çš„è¯·æ±‚ï¼ˆfetchï¼‰ä¸ä¼šé€šè¿‡ SWï¼Œé™¤éå®ƒæœ¬èº«æ˜¯é€šè¿‡ SW è·å–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å®‰è£… SW ä¹‹åï¼Œéœ€è¦åˆ·æ–°é¡µé¢æ‰èƒ½æœ‰æ•ˆæœã€‚</p></li><li><p>clients.claim()å¯ä»¥æ”¹å˜è¿™ç§é»˜è®¤è¡Œä¸ºã€‚</p></li></ol><p>localStorage çš„ç”¨æ³•å’Œ Service Worker cache çš„ç”¨æ³•å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯ç”±äº localStorage æ˜¯åŒæ­¥çš„ç”¨æ³•ï¼Œæ‰€ä»¥ä¸å…è®¸åœ¨ Service Worker ä¸­ä½¿ç”¨ã€‚ IndexedDB ä¹Ÿå¯ä»¥åœ¨ Service Worker å†…åšæ•°æ®å­˜å‚¨ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¦–å…ˆå®šä¹‰éœ€è¦ç¼“å­˜çš„è·¯å¾„, ä»¥åŠéœ€è¦ç¼“å­˜çš„é™æ€æ–‡ä»¶çš„åˆ—è¡¨ã€‚</span></span><br><span class="line"><span class="keyword">var</span> cacheName = <span class="string">'minimal-pwa-1'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> cacheList = [</span><br><span class="line">  <span class="string">'/'</span>,</span><br><span class="line">  <span class="string">"index.html"</span>,</span><br><span class="line">  <span class="string">"main.css"</span>,</span><br><span class="line">  <span class="string">"e.png"</span></span><br><span class="line">]</span><br><span class="line">self.addEventListener(<span class="string">'install'</span>, e =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å®‰è£…äº‹ä»¶ï¼Œæ³¨å†Œåè§¦å‘åªè§¦å‘ä¸€æ¬¡"</span>);</span><br><span class="line">    e.waitUntil(</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æŒ‡å®šçš„ç¼“å­˜åæ¥æ‰“å¼€ç¼“å­˜</span></span><br><span class="line">        caches.open(cacheName)</span><br><span class="line">            .then(<span class="function"><span class="params">cache</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"åŠ å…¥ç¼“å­˜"</span>, cacheList);</span><br><span class="line">                <span class="keyword">return</span> cache.addAll(cacheList);</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="comment">// å¯åŠ </span></span><br><span class="line">            .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'è·³è¿‡ç­‰å¾…'</span>)</span><br><span class="line">                <span class="keyword">return</span> self.skipWaiting()</span><br><span class="line">            &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// self.oninstall = e =&gt; &#123;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Service-Worker-æ¿€æ´»ï¼ˆæ›´æ–°ç¼“å­˜ï¼‰"><a href="#Service-Worker-æ¿€æ´»ï¼ˆæ›´æ–°ç¼“å­˜ï¼‰" class="headerlink" title="Service Worker æ¿€æ´»ï¼ˆæ›´æ–°ç¼“å­˜ï¼‰"></a>Service Worker æ¿€æ´»ï¼ˆæ›´æ–°ç¼“å­˜ï¼‰</h3><p>åœ¨è¿™ä¸ªçŠ¶æ€ä¸‹æ²¡æœ‰è¢«å…¶ä»–çš„ Service Worker æ§åˆ¶çš„å®¢æˆ·ç«¯ï¼Œå…è®¸å½“å‰çš„ worker å®Œæˆå®‰è£…ï¼Œå¹¶ä¸”æ¸…é™¤äº†å…¶ä»–çš„ worker ä»¥åŠå…³è”ç¼“å­˜çš„æ—§ç¼“å­˜èµ„æºï¼Œç­‰å¾…æ–°çš„ Service Worker çº¿ç¨‹è¢«æ¿€æ´»ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¿€æ´» ç¼“å­˜æ›´æ–°</span></span><br><span class="line">self.addEventListener(<span class="string">'activate'</span>, e =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'[ServiceWorker] Activate'</span>);</span><br><span class="line">    e.waitUntil(</span><br><span class="line">        caches.keys()</span><br><span class="line">            .then(<span class="function"><span class="params">keyList</span> =&gt;</span> <span class="built_in">Promise</span>.all(keyList.map(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (key !== cacheName) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'ç§»é™¤æ—§ç¼“å­˜'</span>, key);</span><br><span class="line">                    <span class="keyword">return</span> caches.delete(key);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)))</span><br><span class="line">            <span class="comment">// å¯åŠ </span></span><br><span class="line">            .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> self.clients.matchAll()</span><br><span class="line">                .then(<span class="function"><span class="params">clients</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (clients &amp;&amp; clients.length) &#123;</span><br><span class="line">                    clients.forEach(<span class="function">(<span class="params">v,i</span>) =&gt;</span> &#123;</span><br><span class="line">                        <span class="comment">// å‘é€å­—ç¬¦ä¸²'sw.update'</span></span><br><span class="line">                        v.postMessage(<span class="string">'sw '</span>+i+<span class="string">' update'</span>)</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">            <span class="comment">// return self.clients.claim();</span></span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// return self.clients.claim();</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="å·²æ¿€æ´»-ï¼ˆactivatedï¼‰"><a href="#å·²æ¿€æ´»-ï¼ˆactivatedï¼‰" class="headerlink" title="å·²æ¿€æ´» ï¼ˆactivatedï¼‰"></a>å·²æ¿€æ´» ï¼ˆactivatedï¼‰</h3><p>åœ¨è¿™ä¸ªçŠ¶æ€ä¼šå¤„ç† activate äº‹ä»¶å›è°ƒ (æä¾›äº†æ›´æ–°ç¼“å­˜ç­–ç•¥çš„æœºä¼š)ã€‚å¹¶å¯ä»¥å¤„ç†åŠŸèƒ½æ€§çš„äº‹ä»¶ fetch (è¯·æ±‚)ã€ sync (åå°åŒæ­¥)ã€ push (æ¨é€)ã€‚</p><h3 id="åºŸå¼ƒ-ï¼ˆredunantï¼‰"><a href="#åºŸå¼ƒ-ï¼ˆredunantï¼‰" class="headerlink" title="åºŸå¼ƒ ï¼ˆredunantï¼‰"></a>åºŸå¼ƒ ï¼ˆredunantï¼‰</h3><p>è¿™ä¸ªçŠ¶æ€è¡¨ç¤ºä¸€ä¸ª Service Worker çš„ç”Ÿå‘½å‘¨æœŸç»“æŸã€‚</p><p>è¿™é‡Œç‰¹åˆ«è¯´æ˜ä¸€ä¸‹ï¼Œè¿›å…¥åºŸå¼ƒ (redundant) çŠ¶æ€çš„åŸå› å¯èƒ½ä¸ºè¿™å‡ ç§ï¼š</p><ul><li><p>å®‰è£… (installing) å¤±è´¥</p></li><li><p>æ¿€æ´» (activating) å¤±è´¥</p></li><li><p>æ–°ç‰ˆæœ¬çš„ Service Worker æ›¿æ¢äº†å®ƒå¹¶æˆä¸ºæ¿€æ´»çŠ¶æ€</p></li></ul><h3 id="å¤„ç†åŠ¨æ€ç¼“å­˜"><a href="#å¤„ç†åŠ¨æ€ç¼“å­˜" class="headerlink" title="å¤„ç†åŠ¨æ€ç¼“å­˜"></a>å¤„ç†åŠ¨æ€ç¼“å­˜</h3><p>ç›‘å¬æ•è· fetch äº‹ä»¶ï¼Œåœ¨ caches ä¸­å» match äº‹ä»¶çš„ request ï¼Œå¦‚æœ response ä¸ä¸ºç©ºçš„è¯å°±è¿”å› response ï¼Œæœ€åè¿”å› fetch è¯·æ±‚ï¼Œåœ¨ fetch äº‹ä»¶ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç”Ÿæˆ response è¿”å›ç»™é¡µé¢ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•è·è¯·æ±‚</span></span><br><span class="line">self.addEventListener(<span class="string">'fetch'</span>, e =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'fetchäº‹ä»¶'</span>, e.request.url);</span><br><span class="line">    e.respondWith(</span><br><span class="line">        caches.match(e.request)</span><br><span class="line">            .then(<span class="function"><span class="params">response</span> =&gt;</span> response || fetch(e.request))</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// e.respondWith(</span></span><br><span class="line">    <span class="comment">//     caches.match(e.request)</span></span><br><span class="line">    <span class="comment">//         .then(response =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//             if(response) &#123;</span></span><br><span class="line">    <span class="comment">//                 return response; // || fetch(e.request)</span></span><br><span class="line">    <span class="comment">//             &#125;</span></span><br><span class="line">    <span class="comment">//             // æ–°çš„å†…å®¹æ·»åŠ åˆ°ç¼“å­˜ä¸­</span></span><br><span class="line">    <span class="comment">//             // å¤åˆ¶è¯·æ±‚ è¯·æ±‚æ˜¯ä¸€ä¸ªæµ åªèƒ½ä½¿ç”¨ä¸€æ¬¡</span></span><br><span class="line">    <span class="comment">//             var requestToCache = e.request.clone();</span></span><br><span class="line">    <span class="comment">//             return fetch(requestToCache).then(function(response)&#123;</span></span><br><span class="line">    <span class="comment">//                 if(!response || response.status !==200) &#123;</span></span><br><span class="line">    <span class="comment">//                     // é”™è¯¯ä¿¡æ¯ç«‹å³è¿”å›</span></span><br><span class="line">    <span class="comment">//                     return response;</span></span><br><span class="line">    <span class="comment">//                 &#125;</span></span><br><span class="line">    <span class="comment">//                 var responseToCache = response.clone();</span></span><br><span class="line">    <span class="comment">//                 // å°†å“åº”æ·»åŠ åˆ°ç¼“å­˜ä¸­</span></span><br><span class="line">    <span class="comment">//                 caches.open(cacheName).then(function (cache)&#123;</span></span><br><span class="line">    <span class="comment">//                     cache.put(requestToCache, responseToCache);</span></span><br><span class="line">    <span class="comment">//                 &#125;)</span></span><br><span class="line">    <span class="comment">//             &#125;)</span></span><br><span class="line">    <span class="comment">//         &#125;) </span></span><br><span class="line">    <span class="comment">// );</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// è‡ªå®šä¹‰å“åº”</span></span><br><span class="line">    <span class="comment">// e.respondWith(new Response('&lt;p&gt;it is a response&lt;/p&gt;', &#123;</span></span><br><span class="line">    <span class="comment">//     headers:&#123;</span></span><br><span class="line">    <span class="comment">//         'Content-Type': 'text/html'</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">// &#125;))</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡å­˜æ”¾åˆ° Cache Storage ä¸­ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è®¿é—®çš„æ—¶å€™å¦‚æœæ˜¯å¼±ç½‘æˆ–è€…æ–­ç½‘çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥ä¸èµ°ç½‘ç»œè¯·æ±‚ï¼Œè€Œç›´æ¥å°±èƒ½å°†æœ¬åœ°ç¼“å­˜çš„å†…å®¹å±•ç¤ºç»™ç”¨æˆ·ï¼Œä¼˜åŒ–ç”¨æˆ·çš„å¼±ç½‘åŠæ–­ç½‘ä½“éªŒã€‚</p><p>ä¸¤ç§æ–¹å¼çš„æ¯”è¾ƒ</p><ul><li><p>on install çš„ä¼˜ç‚¹æ˜¯ç¬¬äºŒæ¬¡è®¿é—®å³å¯ç¦»çº¿ï¼Œç¼ºç‚¹æ˜¯éœ€è¦å°†éœ€è¦ç¼“å­˜çš„ URL åœ¨ç¼–è¯‘æ—¶æ’å…¥åˆ°è„šæœ¬ä¸­ï¼Œå¢åŠ ä»£ç é‡å’Œé™ä½å¯ç»´æŠ¤æ€§ï¼›</p></li><li><p>on fetch çš„ä¼˜ç‚¹æ˜¯æ— éœ€æ›´æ”¹ç¼–è¯‘è¿‡ç¨‹ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿé¢å¤–çš„æµé‡ï¼Œç¼ºç‚¹æ˜¯éœ€è¦å¤šä¸€æ¬¡è®¿é—®æ‰èƒ½ç¦»çº¿å¯ç”¨ã€‚</p></li></ul><h3 id="Service-Worker-è°ƒè¯•"><a href="#Service-Worker-è°ƒè¯•" class="headerlink" title="Service Worker è°ƒè¯•"></a>Service Worker è°ƒè¯•</h3><ul><li><p>å€ŸåŠ© Chrome æµè§ˆå™¨ debugä½¿ç”¨ Chrome æµè§ˆå™¨ï¼Œå¯ä»¥é€šè¿‡è¿›å…¥æ§åˆ¶å° Application -&gt; Service Workers é¢æ¿æŸ¥çœ‹å’Œè°ƒè¯•ã€‚</p></li><li><p>æŸ¥çœ‹ç¼“å­˜Service Worker ä½¿ç”¨ Cache API ç¼“å­˜åªè¯»èµ„æºï¼Œå¯ä»¥åœ¨ Chrome DevTools ä¸ŠæŸ¥çœ‹ç¼“å­˜çš„èµ„æºåˆ—è¡¨ã€‚</p></li></ul><p>httpç¼“å­˜ï¼šç”±æœåŠ¡å™¨å‘ŠçŸ¥èµ„æºä½•æ—¶ç¼“å­˜å’Œä½•æ—¶è¿‡æœŸã€‚swç¼“å­˜æ˜¯å¯¹httpç¼“å­˜çš„å¢å¼º</p><h3 id="Service-Worker-ç½‘ç»œè·Ÿè¸ª"><a href="#Service-Worker-ç½‘ç»œè·Ÿè¸ª" class="headerlink" title="Service Worker ç½‘ç»œè·Ÿè¸ª"></a>Service Worker ç½‘ç»œè·Ÿè¸ª</h3><p>ç»è¿‡ Service Worker çš„ fetch è¯·æ±‚ Chrome éƒ½ä¼šåœ¨ Chrome DevTools Network æ ‡ç­¾é¡µé‡Œæ ‡æ³¨å‡ºæ¥ï¼Œå…¶ä¸­ï¼š</p><ul><li><p>æ¥è‡ª Service Worker çš„å†…å®¹ä¼šåœ¨ Size å­—æ®µä¸­æ ‡æ³¨ä¸º from ServiceWorker</p></li><li><p>Service Worker å‘å‡ºçš„è¯·æ±‚ä¼šåœ¨ Name å­—æ®µä¸­æ·»åŠ  â€˜é½¿è½®â€™ å›¾æ ‡ã€‚</p></li></ul><h3 id="Service-Worker-åŠŸèƒ½æ€§äº‹ä»¶"><a href="#Service-Worker-åŠŸèƒ½æ€§äº‹ä»¶" class="headerlink" title="Service Worker åŠŸèƒ½æ€§äº‹ä»¶"></a>Service Worker åŠŸèƒ½æ€§äº‹ä»¶</h3><ul><li><p>fetch (è¯·æ±‚)ï¼šå½“æµè§ˆå™¨åœ¨å½“å‰æŒ‡å®šçš„ scope ä¸‹å‘èµ·è¯·æ±‚æ—¶ï¼Œä¼šè§¦å‘ fetch äº‹ä»¶ï¼Œå¹¶å¾—åˆ°ä¼ æœ‰ response å‚æ•°çš„å›è°ƒå‡½æ•°ï¼Œå›è°ƒä¸­å°±å¯ä»¥åšå„ç§ä»£ç†ç¼“å­˜çš„äº‹æƒ…äº†ã€‚</p></li><li><p>push (æ¨é€)ï¼špush äº‹ä»¶æ˜¯ä¸ºæ¨é€å‡†å¤‡çš„ã€‚ä¸è¿‡é¦–å…ˆéœ€è¦äº†è§£ä¸€ä¸‹ Notification API å’Œ PUSH APIã€‚é€šè¿‡ PUSH APIï¼Œå½“è®¢é˜…äº†æ¨é€æœåŠ¡åï¼Œå¯ä»¥ä½¿ç”¨æ¨é€æ–¹å¼å”¤é†’ Service Worker ä»¥å“åº”æ¥è‡ªç³»ç»Ÿæ¶ˆæ¯ä¼ é€’æœåŠ¡çš„æ¶ˆæ¯ï¼Œå³ä½¿ç”¨æˆ·å·²ç»å…³é—­äº†é¡µé¢ã€‚</p></li><li><p>sync (åå°åŒæ­¥)ï¼šsync äº‹ä»¶ç”± background sync (åå°åŒæ­¥)å‘å‡ºã€‚background sync é…åˆ Service Worker æ¨å‡ºçš„ APIï¼Œç”¨äºä¸º Service Worker æä¾›ä¸€ä¸ªå¯ä»¥å®ç°æ³¨å†Œå’Œç›‘å¬åŒæ­¥å¤„ç†çš„æ–¹æ³•ã€‚ä½†å®ƒè¿˜ä¸åœ¨ W3C Web API æ ‡å‡†ä¸­ã€‚åœ¨ Chrome ä¸­è¿™ä¹Ÿåªæ˜¯ä¸€ä¸ªå®éªŒæ€§åŠŸèƒ½ï¼Œéœ€è¦è®¿é—® chrome://flags/#enable-experimental-web-platform-features ï¼Œå¼€å¯è¯¥åŠŸèƒ½ï¼Œç„¶åé‡å¯ç”Ÿæ•ˆã€‚</p></li></ul><h2 id="APP-Manifest-ä¸æ·»åŠ åˆ°ä¸»å±å¹•"><a href="#APP-Manifest-ä¸æ·»åŠ åˆ°ä¸»å±å¹•" class="headerlink" title="APP Manifest ä¸æ·»åŠ åˆ°ä¸»å±å¹•"></a>APP Manifest ä¸æ·»åŠ åˆ°ä¸»å±å¹•</h2><p>å…è®¸å°†ç«™ç‚¹æ·»åŠ è‡³ä¸»å±å¹•ï¼Œæ˜¯ PWA æä¾›çš„ä¸€é¡¹é‡è¦åŠŸèƒ½</p><ol><li><p>å®šä¹‰ manifest.json é…ç½®æ·»åŠ åˆ°ä¸»å±å¹•åŠŸèƒ½</p></li><li><p>åˆ›å»º manifest.json æ–‡ä»¶ï¼Œå¹¶å°†å®ƒæ”¾åˆ°ä½ çš„ç«™ç‚¹ç›®å½•ä¸­</p></li><li><p>åœ¨æ‰€æœ‰é¡µé¢å¼•å…¥è¯¥æ–‡ä»¶</p></li><li><p>å¯ä»¥åœ¨ Service Worker ä¸­ç›‘å¬ beforeinstallprompt äº‹ä»¶åšä¸€äº›åº”ç”¨å†…çš„è¡Œä¸ºå¤„ç†</p></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">    <span class="string">"name"</span> : <span class="string">"Minimal PWA"</span> , </span><br><span class="line">    <span class="string">"short_name"</span> : <span class="string">"PWA Demo"</span> , </span><br><span class="line">    <span class="string">"display"</span> : <span class="string">"standalone"</span> , </span><br><span class="line">    <span class="string">"start_url"</span> : <span class="string">"/"</span> , </span><br><span class="line">    <span class="string">"theme_color"</span> : <span class="string">"#313131"</span> , </span><br><span class="line">    <span class="string">"background_color"</span> : <span class="string">"#313131"</span> , </span><br><span class="line">    <span class="string">"icons"</span> : [ </span><br><span class="line">        &#123; </span><br><span class="line">        <span class="string">"src"</span> : <span class="string">"e.png"</span> , </span><br><span class="line">        <span class="string">"sizes"</span> : <span class="string">"256x256"</span> , </span><br><span class="line">        <span class="string">"type"</span> : <span class="string">"image/png"</span> </span><br><span class="line">        &#125; </span><br><span class="line">    ] </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>name ï¼šå®šä¹‰æ­¤PWAçš„åç§°ã€‚</p></li><li><p>icons ï¼šå®šä¹‰ä¸€ç³»åˆ—çš„å›¾æ ‡ä»¥é€‚åº”ä¸åŒå‹å·çš„è®¾å¤‡ã€‚</p></li><li><p>theme_color ï¼šä¸»é¢˜é¢œè‰²ï¼ˆå½±å“æ‰‹æœºçŠ¶æ€æ é¢œè‰²ï¼‰ã€‚</p></li><li><p>background_color ï¼šèƒŒæ™¯é¢œè‰²ã€‚</p></li><li><p>start_url ï¼šå¯åŠ¨åœ°å€ã€‚ç”±äºPWAå®é™…ä¸Šæ˜¯ä¸€ä¸ªwebé¡µé¢ï¼Œæ‰€ä»¥éœ€è¦å®šä¹‰PWA åœ¨å¯åŠ¨æ—¶åº”è¯¥è®¿é—®å“ªä¸ªåœ°å€ã€‚</p></li><li><p>display ï¼šâ€standaloneâ€è¡¨ç¤ºå…¶ä»¥ç±»ä¼¼åŸç”ŸAPPçš„å…¨å±æ–¹å¼å¯åŠ¨ã€‚</p></li></ul><h3 id="IOS-Safari-è®¾ç½®"><a href="#IOS-Safari-è®¾ç½®" class="headerlink" title="IOS Safari è®¾ç½®"></a>IOS Safari è®¾ç½®</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">åº”ç”¨å›¾æ ‡ï¼š </span><br><span class="line">&lt;link rel=<span class="string">"apple-touch-icon"</span> href=<span class="string">"apple-touch-icon.png"</span> &gt; </span><br><span class="line">å¯åŠ¨ç”»é¢ï¼š </span><br><span class="line">&lt;link rel=<span class="string">"apple-touch-startup-image"</span> href=<span class="string">"launch.png"</span> &gt; </span><br><span class="line">åº”ç”¨åç§°ï¼š </span><br><span class="line">&lt;meta name=<span class="string">"apple-mobile-web-app-title"</span> content=<span class="string">"Todo-PWA"</span> &gt; </span><br><span class="line">å…¨å±æ•ˆæœï¼š </span><br><span class="line">&lt;meta name=<span class="string">"apple-mobile-web-app-capable"</span> content=<span class="string">"yes"</span> &gt; </span><br><span class="line">è®¾ç½®çŠ¶æ€æ é¢œè‰²ï¼š </span><br><span class="line">&lt;meta name=<span class="string">"apple-mobile-web-app-status-bar-style"</span> content=<span class="string">"#fff"</span> &gt;</span><br></pre></td></tr></table></figure><h3 id="window10-è´´ç‰‡å›¾æ ‡"><a href="#window10-è´´ç‰‡å›¾æ ‡" class="headerlink" title="window10 è´´ç‰‡å›¾æ ‡"></a>window10 è´´ç‰‡å›¾æ ‡</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=<span class="string">"msapplication-TileImage"</span> content=<span class="string">"images/logo/144x144.png"</span> &gt; </span><br><span class="line">&lt;meta name=<span class="string">"msapplication-TileColor"</span> content=<span class="string">"#2F3BA2"</span> &gt;</span><br></pre></td></tr></table></figure><h3 id="åœ¨çº¿ç”Ÿæˆ-manifest-json-æ–‡ä»¶"><a href="#åœ¨çº¿ç”Ÿæˆ-manifest-json-æ–‡ä»¶" class="headerlink" title="åœ¨çº¿ç”Ÿæˆ manifest.json æ–‡ä»¶"></a>åœ¨çº¿ç”Ÿæˆ manifest.json æ–‡ä»¶</h3><ul><li><p><a href="https://app-manifest.firebaseapp.com/" target="_blank" rel="noopener">https://app-manifest.firebaseapp.com/</a></p></li><li><p><a href="https://tomitm.github.io/appmanifest/" target="_blank" rel="noopener">https://tomitm.github.io/appmanifest/</a></p></li><li><p><a href="https://brucelawson.github.io/manifest/" target="_blank" rel="noopener">https://brucelawson.github.io/manifest/</a></p></li></ul><h3 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ol><li><p><a href="https://developer.mozilla.org/en-US/docs/Web/Manifest" target="_blank" rel="noopener">Web App Manifest</a></p></li><li><p><a href="https://lavas.baidu.com/doc/engage-retain-users/add-to-home-screen/introduction" target="_blank" rel="noopener">manifest.json ç®€ä»‹</a></p></li></ol><h2 id="App-Shell"><a href="#App-Shell" class="headerlink" title="App Shell"></a>App Shell</h2><p>App Shellï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯<code>å£³</code>çš„æ„æ€ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸º<code>éª¨æ¶å±</code>ï¼Œè¯´ç™½äº†å°±æ˜¯åœ¨å†…å®¹å°šæœªåŠ è½½å®Œå…¨çš„æ—¶å€™ï¼Œä¼˜å…ˆå±•ç¤ºé¡µé¢çš„ç»“æ„ã€å ä½å›¾ã€ä¸»é¢˜å’ŒèƒŒæ™¯é¢œè‰²ç­‰ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸€äº›è¢«å¼ºç¼“å­˜çš„htmlï¼Œcsså’Œjavascriptã€‚</p><p>è¦ç”¨å¥½App Shellï¼Œå°±å¿…é¡»ä¿è¯è¿™éƒ¨åˆ†çš„èµ„æºè¢«Service Workerç¼“å­˜èµ·æ¥ã€‚æˆ‘ä»¬åœ¨ç»„ç»‡ä»£ç çš„æ—¶å€™ï¼Œå¯ä»¥ä¼˜å…ˆå®ŒæˆApp Shellçš„éƒ¨åˆ†ï¼Œç„¶åæŠŠè¿™éƒ¨åˆ†ä»£ç åˆ†åˆ«æ‰“åŒ…æ„å»ºå‡ºæ¥ã€‚</p><h3 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h3><ul><li><p>å§‹ç»ˆå¿«é€Ÿçš„å¯é æ€§èƒ½</p></li><li><p>å¦‚åŒæœ¬æœºä¸€æ ·çš„äº¤äº’</p></li><li><p>æ•°æ®çš„ç»æµä½¿ç”¨</p></li></ul><h3 id="å‚è€ƒèµ„æ–™-1"><a href="#å‚è€ƒèµ„æ–™-1" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ol><li><a href="https://developers.google.cn/web/fundamentals/architecture/app-shell" target="_blank" rel="noopener">App Shell æ¨¡å‹</a></li></ol><h2 id="ä½¿ç”¨Offine-PluginæŠŠç½‘ç«™å‡çº§æˆ-PWA"><a href="#ä½¿ç”¨Offine-PluginæŠŠç½‘ç«™å‡çº§æˆ-PWA" class="headerlink" title="ä½¿ç”¨Offine-PluginæŠŠç½‘ç«™å‡çº§æˆ PWA"></a>ä½¿ç”¨Offine-PluginæŠŠç½‘ç«™å‡çº§æˆ PWA</h2><h3 id="å‚è€ƒèµ„æ–™-2"><a href="#å‚è€ƒèµ„æ–™-2" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h3><ol><li><p><a href="https://github.com/NekR/offline-plugin" target="_blank" rel="noopener">offline-plugin</a></p></li><li><p><a href="https://offline-plugin.now.sh" target="_blank" rel="noopener">offline-plugin DEMO</a></p></li><li><p><a href="https://segmentfault.com/a/1190000010669126" target="_blank" rel="noopener">ä½¿ç”¨offline-pluginæ­é…webpackè½»æ¾å®ç°PWA</a></p></li></ol><h2 id="ä¸PWAç›¸å…³çš„å¼€æºæ¡†æ¶"><a href="#ä¸PWAç›¸å…³çš„å¼€æºæ¡†æ¶" class="headerlink" title="ä¸PWAç›¸å…³çš„å¼€æºæ¡†æ¶"></a>ä¸PWAç›¸å…³çš„å¼€æºæ¡†æ¶</h2><h3 id="Lavas"><a href="#Lavas" class="headerlink" title="Lavas"></a>Lavas</h3><p>åŸºäº Vue çš„ PWA è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ­å»º PWA åº”ç”¨ï¼Œè§£å†³æ¥å…¥ PWA çš„å„ç§é—®é¢˜</p><ol><li><p><a href="https://lavas.baidu.com/" target="_blank" rel="noopener">Lavas å®˜ ç½‘</a></p></li><li><p><a href="https://github.com/lavas-project/lavas" target="_blank" rel="noopener">Lavas GitHub</a></p></li></ol><h3 id="åŠ è½½åº“"><a href="#åŠ è½½åº“" class="headerlink" title="åŠ è½½åº“"></a>åŠ è½½åº“</h3><p>importScripts() // swé‡Œçš„å…¨å±€å‡½æ•°<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">importScripts(<span class="string">'workbox-sw.prod.v1.1.0.js'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> workboxSW = <span class="keyword">new</span> self.WorkboxSW();</span><br><span class="line"></span><br><span class="line">workbox.precaching([</span><br><span class="line">  <span class="comment">// æ³¨å†ŒæˆåŠŸåè¦ç«‹å³ç¼“å­˜çš„èµ„æºåˆ—è¡¨</span></span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// htmlçš„ç¼“å­˜ç­–ç•¥</span></span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">''</span>.*\.html<span class="string">'),</span></span><br><span class="line"><span class="string">  workbox.strategies.networkFirst()</span></span><br><span class="line"><span class="string">);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">workbox.routing.registerRoute(</span></span><br><span class="line"><span class="string">  new RegExp('</span>.*\.(?:js|css)<span class="string">'),</span></span><br><span class="line"><span class="string">  workbox.strategies.cacheFirst()</span></span><br><span class="line"><span class="string">);</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">workbox.routing.registerRoute(</span></span><br><span class="line"><span class="string">  new RegExp('</span>https:<span class="comment">//your\.cdn\.com/'),</span></span><br><span class="line">  workbox.strategies.staleWhileRevalidate()</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">workbox.routing.registerRoute(</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">'https://your\.img\.cdn\.com/'</span>),</span><br><span class="line">  workbox.strategies.cacheFirst(&#123;</span><br><span class="line">    cacheName: <span class="string">'example:img'</span></span><br><span class="line">  &#125;)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡ workbox.precaching ä¸­çš„æ˜¯ install ä»¥åè¦å¡è¿› caches ä¸­çš„å†…å®¹ï¼Œworkbox.routing.registerRoute ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ­£åˆ™ï¼ŒåŒ¹é…ç»è¿‡ fetch äº‹ä»¶çš„æ‰€æœ‰è¯·æ±‚ï¼Œå¦‚æœåŒ¹é…ä¸Šäº†ï¼Œå°±èµ°ç›¸åº”çš„ç¼“å­˜ç­–ç•¥ã€‚</p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ul><li>é¿å…æ”¹å˜ SW çš„ URLï¼ˆå¯¹index.htmlåšäº†ç¼“å­˜ï¼Œè¿™æ ·æ°¸è¿œæ‹¿ä¸åˆ°æ–°çš„swï¼‰</li></ul>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/PWA%E6%89%8B%E8%AE%B0.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>use strict</title>
      <link>http://mydearest.cn/2019/use%20strict.html</link>
      <guid>http://mydearest.cn/2019/use%20strict.html</guid>
      <pubDate>Tue, 07 May 2019 17:13:46 GMT</pubDate>
      <description>
      
        &lt;p&gt;ä¸¥æ ¼æ¨¡å¼æ˜¯ES5å¼•å…¥çš„ï¼Œæ›´å¥½çš„å°†é”™è¯¯æ£€æµ‹å¼•å…¥ä»£ç çš„æ–¹æ³•ã€‚é¡¾åæ€ä¹‰ï¼Œä½¿å¾—JSåœ¨æ›´ä¸¥æ ¼çš„æ¡ä»¶ä¸‹è¿è¡Œã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;å˜é‡å¿…é¡»å…ˆå£°æ˜ï¼Œå†ä½¿ç”¨&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;&quot;use strict&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;foo = &lt;span class=&quot;string&quot;&gt;&#39;bar&#39;&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;// Error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ä¸èƒ½å¯¹å˜é‡æ‰§è¡Œ&lt;span class=&quot;keyword&quot;&gt;delete&lt;/span&gt;æ“ä½œ&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; foo = &lt;span class=&quot;string&quot;&gt;&quot;test&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;test&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;delete&lt;/span&gt; foo; &lt;span class=&quot;comment&quot;&gt;// Error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;delete&lt;/span&gt; test; &lt;span class=&quot;comment&quot;&gt;// Error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;test2&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;arg&lt;/span&gt;) &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;delete&lt;/span&gt; arg; &lt;span class=&quot;comment&quot;&gt;// Error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å¯¹è±¡çš„å±æ€§åä¸èƒ½é‡å¤&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;span class=&quot;attr&quot;&gt;foo&lt;/span&gt;: &lt;span class=&quot;literal&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;attr&quot;&gt;foo&lt;/span&gt;: &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt; &amp;#125; &lt;span class=&quot;comment&quot;&gt;// Error&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ç¦ç”¨&lt;span class=&quot;built_in&quot;&gt;eval&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å‡½æ•°çš„&lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;å‚æ•°&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setTimeout(&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;later&lt;/span&gt;(&lt;span class=&quot;params&quot;&gt;&lt;/span&gt;)&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// do stuff...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;setTimeout( later, &lt;span class=&quot;number&quot;&gt;1000&lt;/span&gt; );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;, &lt;span class=&quot;number&quot;&gt;1000&lt;/span&gt; );&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ç¦ç”¨&lt;span class=&quot;keyword&quot;&gt;with&lt;/span&gt;()&amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ä¸èƒ½ä¿®æ”¹&lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ä¸èƒ½åœ¨å‡½æ•°å†…å®šä¹‰&lt;span class=&quot;built_in&quot;&gt;arguments&lt;/span&gt;å˜é‡&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ä¸èƒ½ä½¿ç”¨arugment.callerå’Œargument.calleeã€‚å› æ­¤å¦‚æœä½ è¦å¼•ç”¨åŒ¿åå‡½æ•°ï¼Œéœ€è¦å¯¹åŒ¿åå‡½æ•°å‘½åã€‚&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;ä¸¥æ ¼æ¨¡å¼&lt;/code&gt;çš„ä¼˜ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;æ¶ˆé™¤Javascriptè¯­æ³•çš„ä¸€äº›ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘ä¸€äº›æ€ªå¼‚è¡Œä¸º;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸€äº›ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æé«˜ç¼–è¯‘å™¨æ•ˆç‡ï¼Œå¢åŠ è¿è¡Œé€Ÿåº¦ï¼›&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„Javascriptåšå¥½é“ºå«ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
&lt;li&gt;æ³¨ï¼šç»è¿‡æµ‹è¯• IE6,7,8,9 å‡ä¸æ”¯æŒä¸¥æ ¼æ¨¡å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¼ºç‚¹ï¼š&lt;/p&gt;
&lt;p&gt;ç°åœ¨ç½‘ç«™çš„ JS éƒ½ä¼šè¿›è¡Œå‹ç¼©ï¼Œä¸€äº›æ–‡ä»¶ç”¨äº†ä¸¥æ ¼æ¨¡å¼ï¼Œè€Œå¦ä¸€äº›æ²¡æœ‰ã€‚è¿™æ—¶è¿™äº›æœ¬æ¥æ˜¯ä¸¥æ ¼æ¨¡å¼çš„æ–‡ä»¶ï¼Œè¢« merge åï¼Œè¿™ä¸ªä¸²å°±åˆ°äº†æ–‡ä»¶çš„ä¸­é—´ï¼Œä¸ä»…æ²¡æœ‰æŒ‡ç¤ºä¸¥æ ¼æ¨¡å¼ï¼Œåè€Œåœ¨å‹ç¼©åæµªè´¹äº†å­—èŠ‚ã€‚&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ä¸¥æ ¼æ¨¡å¼æ˜¯ES5å¼•å…¥çš„ï¼Œæ›´å¥½çš„å°†é”™è¯¯æ£€æµ‹å¼•å…¥ä»£ç çš„æ–¹æ³•ã€‚é¡¾åæ€ä¹‰ï¼Œä½¿å¾—JSåœ¨æ›´ä¸¥æ ¼çš„æ¡ä»¶ä¸‹è¿è¡Œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">å˜é‡å¿…é¡»å…ˆå£°æ˜ï¼Œå†ä½¿ç”¨</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line">foo = <span class="string">'bar'</span>; <span class="comment">// Error</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ä¸èƒ½å¯¹å˜é‡æ‰§è¡Œ<span class="keyword">delete</span>æ“ä½œ</span><br><span class="line"><span class="keyword">var</span> foo = <span class="string">"test"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">delete</span> foo; <span class="comment">// Error</span></span><br><span class="line"><span class="keyword">delete</span> test; <span class="comment">// Error</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line"><span class="keyword">delete</span> arg; <span class="comment">// Error</span></span><br><span class="line">&#125;</span><br><span class="line">å¯¹è±¡çš„å±æ€§åä¸èƒ½é‡å¤</span><br><span class="line">&#123; <span class="attr">foo</span>: <span class="literal">true</span>, <span class="attr">foo</span>: <span class="literal">false</span> &#125; <span class="comment">// Error</span></span><br><span class="line"></span><br><span class="line">ç¦ç”¨<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line">å‡½æ•°çš„<span class="built_in">arguments</span>å‚æ•°</span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> <span class="title">later</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="comment">// do stuff...</span></span><br><span class="line">setTimeout( later, <span class="number">1000</span> );</span><br><span class="line">&#125;, <span class="number">1000</span> );</span><br><span class="line"></span><br><span class="line">ç¦ç”¨<span class="keyword">with</span>()&#123;&#125;</span><br><span class="line"></span><br><span class="line">ä¸èƒ½ä¿®æ”¹<span class="built_in">arguments</span></span><br><span class="line">ä¸èƒ½åœ¨å‡½æ•°å†…å®šä¹‰<span class="built_in">arguments</span>å˜é‡</span><br><span class="line">ä¸èƒ½ä½¿ç”¨arugment.callerå’Œargument.calleeã€‚å› æ­¤å¦‚æœä½ è¦å¼•ç”¨åŒ¿åå‡½æ•°ï¼Œéœ€è¦å¯¹åŒ¿åå‡½æ•°å‘½åã€‚</span><br></pre></td></tr></table></figure><p><code>ä¸¥æ ¼æ¨¡å¼</code>çš„ä¼˜ç‚¹ï¼š</p><ol><li><p>æ¶ˆé™¤Javascriptè¯­æ³•çš„ä¸€äº›ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘ä¸€äº›æ€ªå¼‚è¡Œä¸º;</p></li><li><p>æ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸€äº›ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨ï¼›</p></li><li><p>æé«˜ç¼–è¯‘å™¨æ•ˆç‡ï¼Œå¢åŠ è¿è¡Œé€Ÿåº¦ï¼›</p></li><li><p>ä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„Javascriptåšå¥½é“ºå«ã€‚</p></li></ol><ul><li>æ³¨ï¼šç»è¿‡æµ‹è¯• IE6,7,8,9 å‡ä¸æ”¯æŒä¸¥æ ¼æ¨¡å¼ã€‚</li></ul><p>ç¼ºç‚¹ï¼š</p><p>ç°åœ¨ç½‘ç«™çš„ JS éƒ½ä¼šè¿›è¡Œå‹ç¼©ï¼Œä¸€äº›æ–‡ä»¶ç”¨äº†ä¸¥æ ¼æ¨¡å¼ï¼Œè€Œå¦ä¸€äº›æ²¡æœ‰ã€‚è¿™æ—¶è¿™äº›æœ¬æ¥æ˜¯ä¸¥æ ¼æ¨¡å¼çš„æ–‡ä»¶ï¼Œè¢« merge åï¼Œè¿™ä¸ªä¸²å°±åˆ°äº†æ–‡ä»¶çš„ä¸­é—´ï¼Œä¸ä»…æ²¡æœ‰æŒ‡ç¤ºä¸¥æ ¼æ¨¡å¼ï¼Œåè€Œåœ¨å‹ç¼©åæµªè´¹äº†å­—èŠ‚ã€‚</p><hr><a id="more"></a><h2 id="è¯¦ç»†è¯´æ˜"><a href="#è¯¦ç»†è¯´æ˜" class="headerlink" title="è¯¦ç»†è¯´æ˜"></a>è¯¦ç»†è¯´æ˜</h2><p>1.ä½¿è°ƒè¯•æ›´åŠ å®¹æ˜“ã€‚é‚£äº›è¢«å¿½ç•¥æˆ–é»˜é»˜å¤±è´¥äº†çš„ä»£ç é”™è¯¯ï¼Œä¼šäº§ç”Ÿé”™è¯¯æˆ–æŠ›å‡ºå¼‚å¸¸ï¼Œå› æ­¤å°½æ—©æé†’ä½ ä»£ç ä¸­çš„é—®é¢˜ï¼Œä½ æ‰èƒ½æ›´å¿«åœ°æŒ‡å¼•åˆ°å®ƒä»¬çš„æºä»£ç ã€‚</p><p>2.å˜é‡åœ¨èµ‹å€¼ä¹‹å‰å¿…é¡»å£°æ˜,é˜²æ­¢æ„å¤–çš„å…¨å±€å˜é‡ã€‚å¦‚æœæ²¡æœ‰ä¸¥æ ¼æ¨¡å¼ï¼Œå°†å€¼åˆ†é…ç»™ä¸€ä¸ªæœªå£°æ˜çš„å˜é‡ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥åç§°çš„å…¨å±€å˜é‡ã€‚è¿™æ˜¯JavaScriptä¸­æœ€å¸¸è§çš„é”™è¯¯ä¹‹ä¸€ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™æ ·åšçš„è¯ä¼šæŠ›å‡ºé”™è¯¯ã€‚</p><p>3.å–æ¶ˆthiså€¼çš„å¼ºåˆ¶è½¬æ¢ã€‚å¦‚æœæ²¡æœ‰ä¸¥æ ¼æ¨¡å¼ï¼Œå¼•ç”¨nullæˆ–æœªå®šä¹‰çš„å€¼åˆ° this å€¼ä¼šè‡ªåŠ¨å¼ºåˆ¶åˆ°å…¨å±€å˜é‡ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¼•ç”¨ nullæˆ–æœªå®šä¹‰çš„ this å€¼ä¼šæŠ›å‡ºé”™è¯¯ã€‚ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthisä¸ä¼šæŒ‡å‘window </p><p>4.ä¸å…è®¸é‡å¤çš„å±æ€§åç§°æˆ–å‚æ•°å€¼ã€‚å½“æ£€æµ‹åˆ°å¯¹è±¡ä¸­é‡å¤å‘½åçš„å±æ€§ï¼Œä¾‹å¦‚ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> object = &#123;<span class="attr">foo</span>: <span class="string">"bar"</span>, <span class="attr">foo</span>: <span class="string">"baz"</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ–æ£€æµ‹åˆ°å‡½æ•°ä¸­é‡å¤å‘½åçš„å‚æ•°æ—¶,ä¾‹å¦‚ï¼š</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">val1, val2, val1</span>)</span>&#123;&#125;ï¼‰</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸¥æ ¼æ¨¡å¼ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› æ­¤æ•æ‰å‡ ä¹å¯ä»¥è‚¯å®šæ˜¯ä»£ç ä¸­çš„bugå¯ä»¥é¿å…æµªè´¹å¤§é‡çš„è·Ÿè¸ªæ—¶é—´ã€‚</span></span><br></pre></td></tr></table></figure></p><p>5.ä½¿ eval() æ›´å®‰å…¨ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼å’Œéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ eval() çš„è¡Œä¸ºæ–¹å¼æœ‰æ‰€ä¸åŒã€‚æœ€æ˜¾è€Œæ˜“è§çš„æ˜¯ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå˜é‡å’Œå£°æ˜åœ¨ eval() è¯­å¥å†…éƒ¨çš„å‡½æ•°ä¸ä¼šåœ¨åŒ…å«èŒƒå›´å†…åˆ›å»ºï¼ˆå®ƒä»¬ä¼šåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹çš„åŒ…å«èŒƒå›´ä¸­è¢«åˆ›å»ºï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸è§çš„é—®é¢˜æºï¼‰ã€‚</p><p>eval()æ²¡æœ‰è¢«ç§»é™¤ï¼Œä½†å®ƒåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚æœ€å¤§çš„æ”¹å˜æ˜¯ï¼šåœ¨eval()è¯­å¥ä¸­å£°æ˜çš„å˜é‡ä»¥åŠå‡½æ•°ä¸ä¼šåœ¨åŒ…å«åŸŸä¸­åˆ›å»ºã€‚ä¾‹å¦‚ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">eval</span>(<span class="string">"var x = 10;"</span>);  </span><br><span class="line"> </span><br><span class="line"><span class="comment">// éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œxä¸º10  </span></span><br><span class="line"><span class="comment">// ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œxæ²¡æœ‰å£°æ˜ï¼ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯  </span></span><br><span class="line">alert(x);  </span><br><span class="line">&#125;)();Â </span><br><span class="line">ä»»æ„ç”±<span class="built_in">eval</span>()åˆ›å»ºçš„å˜é‡æˆ–å‡½æ•°ä»å‘†åœ¨<span class="built_in">eval</span>()é‡Œã€‚ç„¶è€Œï¼Œä½ å¯ä»¥é€šè¿‡ä»<span class="built_in">eval</span>()ä¸­è¿”å›ä¸€ä¸ªå€¼çš„æ–¹å¼å®ç°å€¼çš„ä¼ é€’ï¼š</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> result = <span class="built_in">eval</span>(<span class="string">"var x = 10, y = 20; x + y"</span>);  </span><br><span class="line"> </span><br><span class="line"><span class="comment">// ä¸¥æ ¼æ¨¡å¼ä¸éä¸¥æ ¼æ¨¡å¼ä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼ˆå¾—åˆ°30ï¼‰  </span></span><br><span class="line">alert(result);  </span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure></p><p>6.åœ¨ delete ä½¿ç”¨æ— æ•ˆæ—¶æŠ›å‡ºé”™è¯¯ã€‚ delete æ“ä½œç¬¦ï¼ˆç”¨äºä»å¯¹è±¡ä¸­åˆ é™¤å±æ€§ï¼‰ä¸èƒ½ç”¨åœ¨å¯¹è±¡ä¸å¯é…ç½®çš„å±æ€§ä¸Šã€‚å½“è¯•å›¾åˆ é™¤ä¸€ä¸ªä¸å¯é…ç½®çš„å±æ€§æ—¶ï¼Œéä¸¥æ ¼ä»£ç å°†é»˜é»˜åœ°å¤±è´¥ï¼Œè€Œä¸¥æ ¼æ¨¡å¼å°†åœ¨è¿™æ ·çš„æƒ…å†µä¸‹æŠ›å‡ºå¼‚å¸¸ã€‚</p><p>7.ä¸¥æ ¼æ¨¡å¼å»é™¤äº†withè¯­å¥</p><p>8.ä¸èƒ½ä¿®æ”¹arguments ï¼Œä¸èƒ½åœ¨å‡½æ•°å†…å®šä¹‰argumentså˜é‡  ï¼Œä¸èƒ½ä½¿ç”¨arugment.callerå’Œargument.calleeã€‚å› æ­¤å¦‚æœä½ è¦å¼•ç”¨åŒ¿åå‡½æ•°ï¼Œéœ€è¦å¯¹åŒ¿åå‡½æ•°å‘½åã€‚  </p><h2 id="ç®€æ´è¯´æ˜"><a href="#ç®€æ´è¯´æ˜" class="headerlink" title="ç®€æ´è¯´æ˜"></a>ç®€æ´è¯´æ˜</h2><ul><li>å˜é‡å¿…é¡»å£°æ˜åå†ä½¿ç”¨</li><li>å‡½æ•°çš„å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§ï¼Œå¦åˆ™æŠ¥é”™</li><li>ä¸èƒ½ä½¿ç”¨withè¯­å¥</li><li>ä¸èƒ½å¯¹åªè¯»å±æ€§èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™</li><li>ä¸èƒ½ä½¿ç”¨å‰ç¼€ 0 è¡¨ç¤ºå…«è¿›åˆ¶æ•°ï¼Œå¦åˆ™æŠ¥é”™</li><li>ä¸èƒ½åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™</li><li>evalä¸ä¼šåœ¨å®ƒçš„å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡</li><li>evalå’Œargumentsä¸èƒ½è¢«é‡æ–°èµ‹å€¼</li><li>argumentsä¸ä¼šè‡ªåŠ¨åæ˜ å‡½æ•°å‚æ•°çš„å˜åŒ–</li><li>ä¸èƒ½ä½¿ç”¨arguments.callee</li><li>ä¸èƒ½ä½¿ç”¨arguments.caller</li><li>ç¦æ­¢thisæŒ‡å‘å…¨å±€å¯¹è±¡</li><li>ä¸èƒ½ä½¿ç”¨fn.callerå’Œfn.argumentsè·å–å‡½æ•°è°ƒç”¨çš„å †æ ˆ</li><li>å¢åŠ äº†ä¿ç•™å­—ï¼ˆæ¯”å¦‚protectedã€staticå’Œinterfaceï¼‰</li></ul>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/use%20strict.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>ES6Reflectå¯¹è±¡</title>
      <link>http://mydearest.cn/2019/ES6Reflect%E5%AF%B9%E8%B1%A1.html</link>
      <guid>http://mydearest.cn/2019/ES6Reflect%E5%AF%B9%E8%B1%A1.html</guid>
      <pubDate>Wed, 01 May 2019 18:31:52 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä»‹ç»&quot;&gt;&lt;/a&gt;ä»‹ç»&lt;/h2&gt;&lt;p&gt;Reflect æ˜¯ä¸€ä¸ªå†…ç½®çš„å¯¹è±¡ï¼Œå®ƒæä¾›æ‹¦æˆª JavaScript æ“ä½œçš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ä¸å¤„ç†å™¨å¯¹è±¡çš„æ–¹æ³•ç›¸åŒã€‚Reflectä¸æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå› æ­¤å®ƒæ˜¯ä¸å¯æ„é€ çš„ã€‚&lt;/p&gt;
&lt;p&gt;Reflectè¿™ä¸ªå¯¹è±¡åœ¨æ–°ç‰ˆæœ¬çš„chromeæ˜¯æ”¯æŒçš„ï¼Œ ffæ¯”è¾ƒæ—©å°±æ”¯æŒProxyå’ŒReflectäº†ï¼Œè¦è®©nodeæ”¯æŒReflectå¯ä»¥å®‰è£…&lt;a href=&quot;https://github.com/tvcutsem/harmony-reflect/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;harmony-reflect&lt;/a&gt;;&lt;/p&gt;
&lt;p&gt;Reflectä¸æ˜¯æ„é€ å‡½æ•°ï¼Œ è¦ä½¿ç”¨çš„æ—¶å€™ç›´æ¥é€šè¿‡Reflect.method()è°ƒç”¨ï¼Œ Reflectæœ‰çš„æ–¹æ³•å’ŒProxyå·®ä¸å¤šï¼Œ è€Œä¸”å¤šæ•°Reflectæ–¹æ³•åŸç”Ÿçš„Objectå·²ç»é‡æ–°å®ç°äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸å¤§å¤šæ•°å…¨å±€å¯¹è±¡ä¸åŒï¼ŒReflectæ²¡æœ‰æ„é€ å‡½æ•°ã€‚ä½ ä¸èƒ½å°†å…¶ä¸ä¸€ä¸ªnewè¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œæˆ–è€…å°†Reflectå¯¹è±¡ä½œä¸ºä¸€ä¸ªå‡½æ•°æ¥è°ƒç”¨ã€‚Reflectçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼ˆå°±åƒMathå¯¹è±¡ï¼‰ã€‚&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h2><p>Reflect æ˜¯ä¸€ä¸ªå†…ç½®çš„å¯¹è±¡ï¼Œå®ƒæä¾›æ‹¦æˆª JavaScript æ“ä½œçš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ä¸å¤„ç†å™¨å¯¹è±¡çš„æ–¹æ³•ç›¸åŒã€‚Reflectä¸æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå› æ­¤å®ƒæ˜¯ä¸å¯æ„é€ çš„ã€‚</p><p>Reflectè¿™ä¸ªå¯¹è±¡åœ¨æ–°ç‰ˆæœ¬çš„chromeæ˜¯æ”¯æŒçš„ï¼Œ ffæ¯”è¾ƒæ—©å°±æ”¯æŒProxyå’ŒReflectäº†ï¼Œè¦è®©nodeæ”¯æŒReflectå¯ä»¥å®‰è£…<a href="https://github.com/tvcutsem/harmony-reflect/" target="_blank" rel="noopener">harmony-reflect</a>;</p><p>Reflectä¸æ˜¯æ„é€ å‡½æ•°ï¼Œ è¦ä½¿ç”¨çš„æ—¶å€™ç›´æ¥é€šè¿‡Reflect.method()è°ƒç”¨ï¼Œ Reflectæœ‰çš„æ–¹æ³•å’ŒProxyå·®ä¸å¤šï¼Œ è€Œä¸”å¤šæ•°Reflectæ–¹æ³•åŸç”Ÿçš„Objectå·²ç»é‡æ–°å®ç°äº†ã€‚</p><p>ä¸å¤§å¤šæ•°å…¨å±€å¯¹è±¡ä¸åŒï¼ŒReflectæ²¡æœ‰æ„é€ å‡½æ•°ã€‚ä½ ä¸èƒ½å°†å…¶ä¸ä¸€ä¸ªnewè¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œæˆ–è€…å°†Reflectå¯¹è±¡ä½œä¸ºä¸€ä¸ªå‡½æ•°æ¥è°ƒç”¨ã€‚Reflectçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼ˆå°±åƒMathå¯¹è±¡ï¼‰ã€‚</p><hr><a id="more"></a><h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨"><a href="#ä¸ºä»€ä¹ˆä½¿ç”¨" class="headerlink" title="ä¸ºä»€ä¹ˆä½¿ç”¨"></a>ä¸ºä»€ä¹ˆä½¿ç”¨</h2><ul><li>æ›´åŠ æœ‰ç”¨çš„è¿”å›å€¼</li></ul><p>Reflectæœ‰ä¸€äº›æ–¹æ³•å’ŒES5ä¸­Objectæ–¹æ³•ä¸€æ ·æ ·çš„ï¼Œ æ¯”å¦‚ï¼š Reflect.getOwnPropertyDescriptorå’ŒReflect.defineProperty,  ä¸è¿‡, Object.defineProperty(obj, name, desc)æ‰§è¡ŒæˆåŠŸä¼šè¿”å›objï¼Œ ä»¥åŠå…¶å®ƒåŸå› å¯¼è‡´çš„é”™è¯¯ï¼Œ Reflect.definePropertyåªä¼šè¿”å›falseæˆ–è€…trueæ¥è¡¨ç¤ºå¯¹è±¡çš„å±æ€§æ˜¯å¦è®¾ç½®ä¸Šäº†ï¼Œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="built_in">Object</span>.defineProperty(obj, name, desc);</span><br><span class="line">  <span class="comment">// property defined successfully</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">  <span class="comment">// possible failure (and might accidentally catch the wrong exception)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯ä»¥é‡æ„æˆ<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">Reflect</span>.defineProperty(obj, name, desc)) &#123;</span><br><span class="line">  <span class="comment">// success</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// failure</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li><p>å‡½æ•°æ“ä½œ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name <span class="keyword">in</span> obj <span class="comment">// Reflect.has(obj, name)</span></span><br><span class="line"><span class="keyword">delete</span> obj[name] <span class="comment">// Reflect.deleteProperty(obj, name)</span></span><br></pre></td></tr></table></figure></li><li><p>æ›´åŠ å¯é çš„å‡½æ•°å¼æ‰§è¡Œæ–¹å¼ï¼š åœ¨ESä¸­ï¼Œ è¦æ‰§è¡Œä¸€ä¸ªå‡½æ•°fï¼Œå¹¶ç»™å®ƒä¼ ä¸€ç»„å‚æ•°argsï¼Œ è¿˜è¦ç»‘å®šthisçš„è¯ï¼Œ è¦è¿™ä¹ˆå†™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f.apply(obj, args) <span class="comment">// applyæœ‰å¯èƒ½è¢«ç¯¡æ”¹</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.apply.call(f, obj, args) <span class="comment">// Reflect.apply(f, obj, args)</span></span><br></pre></td></tr></table></figure></li><li><p>å¯å˜å‚æ•°å½¢å¼çš„æ„é€ å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> F(...args)</span><br><span class="line"><span class="keyword">var</span> obj = <span class="built_in">Reflect</span>.construct(F, args)</span><br></pre></td></tr></table></figure></li><li><p>æ§åˆ¶è®¿é—®å™¨æˆ–è€…è¯»å–å™¨çš„this</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">obj.name</span><br><span class="line">obj[<span class="string">'name'</span>]</span><br><span class="line"><span class="built_in">Reflect</span>.get(obj, name, wrapper)</span><br><span class="line"><span class="built_in">Reflect</span>.set(obj, name, value, wrapper)</span><br></pre></td></tr></table></figure></li></ul><p>è®¿é—®å™¨ä¸­ä¸æƒ³ä½¿ç”¨è‡ªå·±çš„æ–¹æ³•ï¼Œè€Œæ˜¯æƒ³è¦é‡å®šå‘thisåˆ°wrapperï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span>  obj = &#123;</span><br><span class="line">    set foo(value)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.bar();</span><br><span class="line">    &#125;</span><br><span class="line">    bar()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> wrapper = &#123;</span><br><span class="line">    bar()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Reflect</span>.set(obj, <span class="string">"foo"</span>, <span class="string">"value"</span>, wrapper)</span><br></pre></td></tr></table></figure></p><ul><li>é¿å…ç›´æ¥è®¿é—®<strong>proto</strong></li></ul><h3 id="Reflect-apply"><a href="#Reflect-apply" class="headerlink" title="Reflect.apply"></a>Reflect.apply</h3><p>Reflect.applyå…¶å®å°±æ˜¯ES5ä¸­çš„ Function.prototype.apply() æ›¿èº«ï¼Œ æ‰§è¡ŒReflect.applyéœ€è¦ä¸‰ä¸ªå‚æ•°</p><p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š éœ€è¦æ‰§è¡Œçš„å‡½æ•°ï¼›ç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š éœ€è¦æ‰§è¡Œå‡½æ•°çš„ä¸Šä¸‹æ–‡thisï¼›ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºï¼š æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–è€…ä¼ªæ•°ç»„ï¼Œ ä¼šä½œä¸ºæ‰§è¡Œå‡½æ•°çš„å‚æ•°ï¼›</p><h3 id="Reflect-construct"><a href="#Reflect-construct" class="headerlink" title="Reflect.construct"></a>Reflect.construct</h3><p>Reflect.constructå…¶å®å°±æ˜¯å®ä¾‹åŒ–æ„é€ å‡½æ•°ï¼Œé€šè¿‡ä¼ å‚å½¢å¼çš„å®ç°ï¼Œ æ‰§è¡Œçš„æ–¹å¼ä¸åŒï¼Œ æ•ˆæœå…¶å®ä¸€æ ·ï¼Œ constructçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ„é€ å‡½æ•°ï¼Œ ç¬¬äºŒä¸ªå‚æ•°ç”±å‚æ•°ç»„æˆçš„æ•°ç»„æˆ–è€…ä¼ªæ•°ç»„ï¼Œ ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºä¸€ä¸ªè¶…ç±»ï¼Œ æ–°å…ƒç´ ä¼šç»§æ‰¿è¿™ä¸ªè¶…ç±»ï¼›<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Fn = <span class="function"><span class="keyword">function</span>(<span class="params">arg</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.args = [arg]</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.log( <span class="keyword">new</span> Fn(<span class="number">1</span>), <span class="built_in">Reflect</span>.construct(Fn,[<span class="number">1</span>]) ); <span class="comment">// è¾“å‡ºæ˜¯ä¸€æ ·çš„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d = <span class="built_in">Reflect</span>.construct(<span class="built_in">Date</span>, [<span class="number">2019</span>, <span class="number">5</span>, <span class="number">2</span>]);</span><br><span class="line">d <span class="keyword">instanceof</span> <span class="built_in">Date</span>; <span class="comment">// true</span></span><br><span class="line">d.getFullYear(); <span class="comment">// 2019</span></span><br></pre></td></tr></table></figure></p><h3 id="Reflect-defineProperty"><a href="#Reflect-defineProperty" class="headerlink" title="Reflect.defineProperty"></a>Reflect.defineProperty</h3><p>Reflect.definePropertyè¿”å›çš„æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œ é€šè¿‡ç›´æ¥èµ‹å€¼çš„æ–¹å¼æŠŠå±æ€§å’Œå±æ€§å€¼æ·»åŠ ç»™å¯¹è±¡è¿”å›çš„æ˜¯ä¸€æ•´ä¸ªå¯¹è±¡ï¼Œ å¦‚æœæ·»åŠ å¤±è´¥ä¼šæŠ›é”™ï¼›<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">if</span>( <span class="built_in">Reflect</span>.defineProperty(obj, <span class="string">"x"</span>, &#123;<span class="attr">value</span> : <span class="number">7</span> &#125;) ) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"added success"</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æ·»åŠ å¤±è´¥"</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h3 id="Reflect-deleteProperty"><a href="#Reflect-deleteProperty" class="headerlink" title="Reflect.deleteProperty"></a>Reflect.deleteProperty</h3><p>Reflect.deletePropertyå’ŒReflect.definePropertyçš„ä½¿ç”¨æ–¹æ³•å·®ä¸å¤šï¼Œ Reflect.deletePropertyå’Œ delete obj.xxçš„æ“ä½œç»“æœæ˜¯ä¸€æ ·ï¼Œ åŒºåˆ«æ˜¯ä½¿ç”¨å½¢å¼ä¸åŒï¼šä¸€ä¸ªæ˜¯æ“ä½œç¬¦ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°è°ƒç”¨ï¼›<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Reflect</span>.deleteProperty(<span class="built_in">Object</span>.freeze(&#123;<span class="attr">foo</span>: <span class="number">1</span>&#125;), <span class="string">"foo"</span>); <span class="comment">// false</span></span><br><span class="line"><span class="keyword">delete</span> <span class="built_in">Object</span>.freeze(&#123;<span class="attr">foo</span>: <span class="number">1</span>&#125;).foo; <span class="comment">//è¾“å‡ºï¼šfalseï¼›</span></span><br></pre></td></tr></table></figure></p><h3 id="Reflect-get"><a href="#Reflect-get" class="headerlink" title="Reflect.get"></a>Reflect.get</h3><p>è¿™ä¸ªæ–¹æ³•çš„æœ‰ä¸¤ä¸ªå¿…é¡»çš„å‚æ•°ï¼š ç¬¬ä¸€ä¸ªä¸ºobjç›®æ ‡å¯¹è±¡ï¼Œ ç¬¬äºŒä¸ªä¸ºå±æ€§åå¯¹è±¡ï¼Œ ç¬¬ä¸‰ä¸ªæ˜¯å¯é€‰çš„ï¼Œæ˜¯ä½œä¸ºè¯»å–å™¨çš„ä¸Šä¸‹æ–‡(this);<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">obj.foo = <span class="number">1</span>;</span><br><span class="line"><span class="built_in">console</span>.log( obj.foo ); <span class="comment">//è¾“å‡ºï¼š1;</span></span><br><span class="line"><span class="built_in">console</span>.log( <span class="built_in">Reflect</span>.get(obj, <span class="string">"foo"</span>) ) <span class="comment">//è¾“å‡ºï¼š1;</span></span><br></pre></td></tr></table></figure></p><h3 id="Reflect-getOwnPropertyDescritptor"><a href="#Reflect-getOwnPropertyDescritptor" class="headerlink" title="Reflect.getOwnPropertyDescritptor"></a>Reflect.getOwnPropertyDescritptor</h3><p>è·å–å±æ€§æè¿°<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Reflect</span>.getOwnPropertyDescriptor(&#123;<span class="attr">x</span>: <span class="string">"hello"</span>&#125;, <span class="string">"x"</span>);</span><br><span class="line"><span class="comment">//ä¹Ÿå¯ä»¥è¿™æ ·è·å–ï¼š</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(&#123;<span class="attr">x</span>:<span class="string">"1"</span>&#125;,<span class="string">"x"</span>);</span><br><span class="line"><span class="comment">//è¿™ä¸¤ä¸ªçš„åŒºåˆ«æ˜¯ä¸€ä¸ªä¼šåŒ…è£…å¯¹è±¡ï¼Œ ä¸€ä¸ªä¸ä¼šï¼š</span></span><br><span class="line"><span class="built_in">Reflect</span>.getOwnPropertyDescriptor(<span class="string">"hello"</span>,<span class="number">0</span>); <span class="comment">//æŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(<span class="string">"hello"</span>,<span class="number">0</span>); <span class="comment">//è¾“å‡ºï¼š &#123;value: "h", writable: false, enumerable: true, configurable: false&#125;</span></span><br></pre></td></tr></table></figure></p><h3 id="Reflect-getPrototypeOf"><a href="#Reflect-getPrototypeOf" class="headerlink" title="Reflect.getPrototypeOf"></a>Reflect.getPrototypeOf</h3><p>åŒObject.getPrototypeOf</p><h3 id="Reflect-has"><a href="#Reflect-has" class="headerlink" title="Reflect.has"></a>Reflect.has</h3><p>åŒ in<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Reflect</span>.has(&#123;<span class="attr">x</span>:<span class="number">0</span>&#125;, <span class="string">"x"</span>) <span class="comment">//è¾“å‡ºï¼š trueï¼›</span></span><br></pre></td></tr></table></figure></p><h3 id="Reflect-isExtensible"><a href="#Reflect-isExtensible" class="headerlink" title="Reflect.isExtensible"></a>Reflect.isExtensible</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç°åœ¨è¿™ä¸ªå…ƒç´ æ˜¯å¯ä»¥æ‰©å±•çš„ï¼›</span></span><br><span class="line"><span class="keyword">var</span> empty = &#123;&#125;;</span><br><span class="line"><span class="built_in">Reflect</span>.isExtensible(empty); <span class="comment">// === true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨preventExtensionsæ–¹æ³•ï¼Œ è®©è¿™ä¸ªå¯¹è±¡æ— æ³•æ‰©å±•æ–°å±æ€§ï¼›</span></span><br><span class="line"><span class="built_in">Reflect</span>.preventExtensions(empty);</span><br><span class="line"><span class="built_in">Reflect</span>.isExtensible(empty); <span class="comment">// === false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªå¯¹è±¡æ— æ³•æ‰©å±•æ–°å±æ€§ï¼Œ å¯å†™çš„å±æ€§ä¾ç„¶å¯ä»¥æ”¹åŠ¨</span></span><br><span class="line"><span class="keyword">var</span> sealed = <span class="built_in">Object</span>.seal(&#123;&#125;);</span><br><span class="line"><span class="built_in">Reflect</span>.isExtensible(sealed); <span class="comment">// === false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿™ä¸ªå¯¹è±¡å®Œå…¨è¢«å†»ç»“äº†</span></span><br><span class="line"><span class="keyword">var</span> frozen = <span class="built_in">Object</span>.freeze(&#123;&#125;);</span><br><span class="line"><span class="built_in">Reflect</span>.isExtensible(frozen); <span class="comment">// === false</span></span><br></pre></td></tr></table></figure><h3 id="Reflect-ownKeys"><a href="#Reflect-ownKeys" class="headerlink" title="Reflect.ownKeys"></a>Reflect.ownKeys</h3><p>è¿”å›å¯¹è±¡çš„keys<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.ownKeys(&#123;<span class="string">"a"</span>:<span class="number">0</span>,<span class="string">"b"</span>:<span class="number">1</span>,<span class="string">"c"</span>:<span class="number">2</span>,<span class="string">"d"</span>:<span class="number">3</span>&#125;)); <span class="comment">//è¾“å‡º ï¼š["a", "b", "c", "d"]</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.ownKeys([])); <span class="comment">// ["length"]</span></span><br></pre></td></tr></table></figure></p><p>reflect.ownKeysçš„æ’åºæ˜¯æ ¹æ®: å…ˆæ˜¾ç¤ºæ•°å­—ï¼Œ æ•°å­—æ ¹æ®å¤§å°æ’åºï¼Œç„¶åæ˜¯ å­—ç¬¦ä¸²æ ¹æ®æ’å…¥çš„é¡ºåºæ’åºï¼Œ æœ€åæ˜¯symbolç±»å‹çš„keyä¹Ÿæ ¹æ®æ’å…¥æ’å…¥é¡ºåºæ’åº;</p><h3 id="Reflect-set"><a href="#Reflect-set" class="headerlink" title="Reflect.set"></a>Reflect.set</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="built_in">Reflect</span>.set(obj, <span class="string">"prop"</span>, <span class="string">"value"</span>); <span class="comment">// è¾“å‡ºï¼štrue</span></span><br><span class="line"><span class="built_in">console</span>.log( obj.prop ); <span class="comment">// è¾“å‡ºï¼š"value"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="built_in">Reflect</span>.set(obj); <span class="comment">// è¾“å‡ºï¼štrue</span></span><br><span class="line"><span class="comment">// ç›¸å½“äº Reflect.set(obj, undefined, undefined);</span></span><br></pre></td></tr></table></figure><h3 id="Reflect-setPrototypeOf"><a href="#Reflect-setPrototypeOf" class="headerlink" title="Reflect.setPrototypeOf"></a>Reflect.setPrototypeOf</h3><p>ä¿®æ”¹å¯¹è±¡çš„__proto__å±æ€§<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Reflect</span>.setPrototypeOf(&#123;&#125;, <span class="built_in">Object</span>.prototype); <span class="comment">// è¾“å‡ºtrue</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»™è¯¥å¯¹è±¡æ•°ç»„[[Prototype]] ä¸ºnull.</span></span><br><span class="line"><span class="built_in">Reflect</span>.setPrototypeOf(&#123;&#125;, <span class="literal">null</span>); <span class="comment">// true</span></span><br><span class="line"><span class="comment">// æ­¤æ—¶çš„obj.__proto__ä¸ºundefine</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠŠå¯¹è±¡å†»ç»“ä»¥åé‡æ–°è®¾ç½®[[prototype]]</span></span><br><span class="line"><span class="built_in">Reflect</span>.setPrototypeOf(<span class="built_in">Object</span>.freeze(&#123;&#125;), <span class="literal">null</span>); <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœåŸå‹é“¾å¾ªç¯ä¾èµ–çš„è¯å°±ä¼šè¿”å›false.</span></span><br><span class="line"><span class="keyword">var</span> target = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> proto = <span class="built_in">Object</span>.create(target);</span><br><span class="line"><span class="built_in">Reflect</span>.setPrototypeOf(target, proto); <span class="comment">// false</span></span><br></pre></td></tr></table></figure></p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/ES6Reflect%E5%AF%B9%E8%B1%A1.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>æ·±å…¥äº†è§£HTTP</title>
      <link>http://mydearest.cn/2019/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3HTTP.html</link>
      <guid>http://mydearest.cn/2019/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3HTTP.html</guid>
      <pubDate>Mon, 29 Apr 2019 16:48:20 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;HTTP-ç‰¹æ€§&quot;&gt;&lt;a href=&quot;#HTTP-ç‰¹æ€§&quot; class=&quot;headerlink&quot; title=&quot;HTTP ç‰¹æ€§&quot;&gt;&lt;/a&gt;HTTP ç‰¹æ€§&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;åŸºäºTCP-IPåè®® åº”ç”¨å±‚åè®® é»˜è®¤ç«¯å£å·80&lt;/li&gt;
&lt;li&gt;æ— è¿æ¥æ— çŠ¶æ€&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;HTTP-æŠ¥æ–‡-worse-than-glory&quot;&gt;&lt;a href=&quot;#HTTP-æŠ¥æ–‡-worse-than-glory&quot; class=&quot;headerlink&quot; title=&quot;HTTP æŠ¥æ–‡ worse than glory&quot;&gt;&lt;/a&gt;HTTP æŠ¥æ–‡ worse than glory&lt;/h2&gt;&lt;h3 id=&quot;è¯·æ±‚æŠ¥æ–‡&quot;&gt;&lt;a href=&quot;#è¯·æ±‚æŠ¥æ–‡&quot; class=&quot;headerlink&quot; title=&quot;è¯·æ±‚æŠ¥æ–‡&quot;&gt;&lt;/a&gt;è¯·æ±‚æŠ¥æ–‡&lt;/h3&gt;&lt;p&gt;HTTP åè®®æ˜¯ä»¥ ASCII ï¼ˆa s kiï¼‰ç ä¼ è¾“ï¼Œå»ºç«‹åœ¨ TCP/IP åè®®ä¹‹ä¸Šçš„åº”ç”¨å±‚è§„èŒƒã€‚è§„èŒƒæŠŠ HTTP è¯·æ±‚åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šçŠ¶æ€è¡Œã€è¯·æ±‚å¤´ã€æ¶ˆæ¯ä¸»ä½“ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GET å¯æäº¤çš„æ•°æ®é‡å—åˆ°URLé•¿åº¦çš„é™åˆ¶ï¼ŒHTTP åè®®è§„èŒƒæ²¡æœ‰å¯¹ URL é•¿åº¦è¿›è¡Œé™åˆ¶ã€‚è¿™ä¸ªé™åˆ¶æ˜¯ç‰¹å®šçš„æµè§ˆå™¨åŠæœåŠ¡å™¨å¯¹å®ƒçš„é™åˆ¶&lt;/li&gt;
&lt;li&gt;ç†è®ºä¸Šè®²ï¼ŒPOST æ˜¯æ²¡æœ‰å¤§å°é™åˆ¶çš„ï¼ŒHTTP åè®®è§„èŒƒä¹Ÿæ²¡æœ‰è¿›è¡Œå¤§å°é™åˆ¶ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒæœåŠ¡å™¨è½¯ä»¶åœ¨å®ç°æ—¶ä¼šåšä¸€å®šé™åˆ¶&lt;/li&gt;
&lt;li&gt;å‚è€ƒä¸Šé¢çš„æŠ¥æ–‡ç¤ºä¾‹ï¼Œå¯ä»¥å‘ç° GET å’Œ POST æ•°æ®å†…å®¹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œåªæ˜¯ä½ç½®ä¸åŒï¼Œä¸€ä¸ªåœ¨ URL é‡Œï¼Œä¸€ä¸ªåœ¨ HTTP åŒ…çš„åŒ…ä½“é‡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="HTTP-ç‰¹æ€§"><a href="#HTTP-ç‰¹æ€§" class="headerlink" title="HTTP ç‰¹æ€§"></a>HTTP ç‰¹æ€§</h2><ul><li>åŸºäºTCP-IPåè®® åº”ç”¨å±‚åè®® é»˜è®¤ç«¯å£å·80</li><li>æ— è¿æ¥æ— çŠ¶æ€</li></ul><h2 id="HTTP-æŠ¥æ–‡-worse-than-glory"><a href="#HTTP-æŠ¥æ–‡-worse-than-glory" class="headerlink" title="HTTP æŠ¥æ–‡ worse than glory"></a>HTTP æŠ¥æ–‡ worse than glory</h2><h3 id="è¯·æ±‚æŠ¥æ–‡"><a href="#è¯·æ±‚æŠ¥æ–‡" class="headerlink" title="è¯·æ±‚æŠ¥æ–‡"></a>è¯·æ±‚æŠ¥æ–‡</h3><p>HTTP åè®®æ˜¯ä»¥ ASCII ï¼ˆa s kiï¼‰ç ä¼ è¾“ï¼Œå»ºç«‹åœ¨ TCP/IP åè®®ä¹‹ä¸Šçš„åº”ç”¨å±‚è§„èŒƒã€‚è§„èŒƒæŠŠ HTTP è¯·æ±‚åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šçŠ¶æ€è¡Œã€è¯·æ±‚å¤´ã€æ¶ˆæ¯ä¸»ä½“ã€‚</p><ul><li>GET å¯æäº¤çš„æ•°æ®é‡å—åˆ°URLé•¿åº¦çš„é™åˆ¶ï¼ŒHTTP åè®®è§„èŒƒæ²¡æœ‰å¯¹ URL é•¿åº¦è¿›è¡Œé™åˆ¶ã€‚è¿™ä¸ªé™åˆ¶æ˜¯ç‰¹å®šçš„æµè§ˆå™¨åŠæœåŠ¡å™¨å¯¹å®ƒçš„é™åˆ¶</li><li>ç†è®ºä¸Šè®²ï¼ŒPOST æ˜¯æ²¡æœ‰å¤§å°é™åˆ¶çš„ï¼ŒHTTP åè®®è§„èŒƒä¹Ÿæ²¡æœ‰è¿›è¡Œå¤§å°é™åˆ¶ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒæœåŠ¡å™¨è½¯ä»¶åœ¨å®ç°æ—¶ä¼šåšä¸€å®šé™åˆ¶</li><li>å‚è€ƒä¸Šé¢çš„æŠ¥æ–‡ç¤ºä¾‹ï¼Œå¯ä»¥å‘ç° GET å’Œ POST æ•°æ®å†…å®¹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œåªæ˜¯ä½ç½®ä¸åŒï¼Œä¸€ä¸ªåœ¨ URL é‡Œï¼Œä¸€ä¸ªåœ¨ HTTP åŒ…çš„åŒ…ä½“é‡Œ</li></ul><hr><a id="more"></a><h3 id="POSTæäº¤çš„æ–¹å¼"><a href="#POSTæäº¤çš„æ–¹å¼" class="headerlink" title="POSTæäº¤çš„æ–¹å¼"></a>POSTæäº¤çš„æ–¹å¼</h3><p>HTTP åè®®ä¸­è§„å®š POST æäº¤çš„æ•°æ®å¿…é¡»åœ¨ body éƒ¨åˆ†ä¸­ï¼Œä½†æ˜¯åè®®ä¸­æ²¡æœ‰è§„å®šæ•°æ®ä½¿ç”¨å“ªç§ç¼–ç æ–¹å¼æˆ–è€…æ•°æ®æ ¼å¼ã€‚å®é™…ä¸Šï¼Œå¼€å‘è€…å®Œå…¨å¯ä»¥è‡ªå·±å†³å®šæ¶ˆæ¯ä¸»ä½“çš„æ ¼å¼ï¼Œåªè¦æœ€åå‘é€çš„ HTTP è¯·æ±‚æ»¡è¶³ä¸Šé¢çš„æ ¼å¼å°±å¯ä»¥ã€‚</p><p>ä½†æ˜¯ï¼Œæ•°æ®å‘é€å‡ºå»ï¼Œè¿˜è¦æœåŠ¡ç«¯è§£ææˆåŠŸæ‰æœ‰æ„ä¹‰ã€‚ä¸€èˆ¬æœåŠ¡ç«¯è¯­è¨€å¦‚ PHPã€Python ç­‰ï¼Œä»¥åŠå®ƒä»¬çš„ frameworkï¼Œéƒ½å†…ç½®äº†è‡ªåŠ¨è§£æå¸¸è§æ•°æ®æ ¼å¼çš„åŠŸèƒ½ã€‚æœåŠ¡ç«¯é€šå¸¸æ˜¯æ ¹æ®è¯·æ±‚å¤´ï¼ˆheadersï¼‰ä¸­çš„ Content-Type å­—æ®µæ¥è·çŸ¥è¯·æ±‚ä¸­çš„æ¶ˆæ¯ä¸»ä½“æ˜¯ç”¨ä½•ç§æ–¹å¼ç¼–ç ï¼Œå†å¯¹ä¸»ä½“è¿›è¡Œè§£æã€‚æ‰€ä»¥è¯´åˆ° POST æäº¤æ•°æ®æ–¹æ¡ˆï¼ŒåŒ…å«äº† Content-Type å’Œæ¶ˆæ¯ä¸»ä½“ç¼–ç æ–¹å¼ä¸¤éƒ¨åˆ†ã€‚</p><ol><li><p>application/x-www-form-urlencodedè¿™æ˜¯æœ€å¸¸è§çš„ POST æ•°æ®æäº¤æ–¹å¼ã€‚æµè§ˆå™¨çš„åŸç”Ÿ <form> è¡¨å•ï¼Œå¦‚æœä¸è®¾ç½® enctype å±æ€§ï¼Œé‚£ä¹ˆæœ€ç»ˆå°±ä¼šä»¥ application/x-www-form-urlencoded æ–¹å¼æäº¤æ•°æ®ã€‚</form></p></li><li><p>multipart/form-dataä½¿ç”¨è¡¨å•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå¿…é¡»è®© <form> è¡¨å•çš„ enctype ç­‰äº multipart/form-dataã€‚</form></p></li></ol><p>ä¸Šé¢æåˆ°çš„è¿™ä¸¤ç§ POST æ•°æ®çš„æ–¹å¼ï¼Œéƒ½æ˜¯æµè§ˆå™¨åŸç”Ÿæ”¯æŒçš„ï¼Œè€Œä¸”ç°é˜¶æ®µæ ‡å‡†ä¸­åŸç”Ÿ <form> è¡¨å•ä¹Ÿåªæ”¯æŒè¿™ä¸¤ç§æ–¹å¼ï¼ˆé€šè¿‡ <form> å…ƒç´ çš„ enctype å±æ€§æŒ‡å®šï¼Œé»˜è®¤ä¸º application/x-www-form-urlencodedã€‚å…¶å® enctype è¿˜æ”¯æŒ text/plainï¼Œä¸è¿‡ç”¨å¾—éå¸¸å°‘ï¼‰ã€‚</form></form></p><p>éšç€è¶Šæ¥è¶Šå¤šçš„ Web ç«™ç‚¹ï¼Œå°¤å…¶æ˜¯ WebAppï¼Œå…¨éƒ¨ä½¿ç”¨ Ajax è¿›è¡Œæ•°æ®äº¤äº’ä¹‹åï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å®šä¹‰æ–°çš„æ•°æ®æäº¤æ–¹å¼ï¼Œä¾‹å¦‚ application/jsonï¼Œapplication/form-dataï¼Œtext/xmlï¼Œä¹ƒè‡³ application/x-protobuf è¿™ç§äºŒè¿›åˆ¶æ ¼å¼ï¼Œåªè¦æœåŠ¡å™¨å¯ä»¥æ ¹æ® Content-Type å’Œ Content-Encoding æ­£ç¡®åœ°è§£æå‡ºè¯·æ±‚ï¼Œéƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p><h3 id="å“åº”æŠ¥æ–‡"><a href="#å“åº”æŠ¥æ–‡" class="headerlink" title="å“åº”æŠ¥æ–‡"></a>å“åº”æŠ¥æ–‡</h3><ul><li>çŠ¶æ€è¡Œ</li><li>å“åº”å¤´(Response Header)</li><li>å“åº”æ­£æ–‡</li></ul><p>GET è¯·æ±‚ 304è·å–ç¼“å­˜ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ç«¯è¿”å›è¯·æ±‚æ•°æ®ï¼Œä¹‹åçš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ ¹æ®è¯·æ±‚ä¸­çš„ If-Modified-Since å­—æ®µåˆ¤æ–­å“åº”æ–‡ä»¶æ²¡æœ‰æ›´æ–°ï¼Œå¦‚æœæ²¡æœ‰æ›´æ–°ï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ª 304 Not Modifiedå“åº”ï¼Œå‘Šè¯‰æµè§ˆå™¨è¯·æ±‚çš„èµ„æºåœ¨æµè§ˆå™¨ä¸Šæ²¡æœ‰æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨å·²ç¼“å­˜çš„ä¸Šæ¬¡è·å–çš„æ–‡ä»¶ã€‚</p><p>/<em>    </em>é€šè¿‡RandomSource.getRandomValues() æ–¹æ³•è·å–ç¬¦åˆå¯†ç å­¦è¦æ±‚çš„å®‰å…¨çš„éšæœºå€¼    <em>/this.getRandomNumbers = function (min, max) {    var minValue = min || â€˜â€™;    var maxValue = max || â€˜â€™;    var cryptoObj = window.crypto || window.msCrypto;    /</em>eslint-disable<em>/    var array = new Uint32Array(1);    /</em>eslint-enable*/    cryptoObj &amp;&amp; cryptoObj.getRandomValues(array);    var result = 0;    if (minValue || maxValue) {        if (!maxValue) {            minValue = 0;            maxValue = min;        }        result = parseInt(minValue, 10) + (array[0] % (parseInt(maxValue, 10) - parseInt(minValue, 10)));    } else {        result = array[0];    }    return result;};</p><h3 id="æŒä¹…è¿æ¥"><a href="#æŒä¹…è¿æ¥" class="headerlink" title="æŒä¹…è¿æ¥"></a>æŒä¹…è¿æ¥</h3><p>åœ¨ HTTP 1.0 ç‰ˆæœ¬ä¸­ï¼Œå¹¶æ²¡æœ‰å®˜æ–¹çš„æ ‡å‡†æ¥è§„å®š Keep-Alive å¦‚ä½•å·¥ä½œï¼Œå› æ­¤å®é™…ä¸Šå®ƒæ˜¯è¢«é™„åŠ åˆ° HTTP 1.0åè®®ä¸Šï¼Œå¦‚æœå®¢æˆ·ç«¯æµè§ˆå™¨æ”¯æŒ Keep-Alive ï¼Œé‚£ä¹ˆå°±åœ¨HTTPè¯·æ±‚å¤´ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µ Connection: Keep-Aliveï¼Œå½“æœåŠ¡å™¨æ”¶åˆ°é™„å¸¦æœ‰ Connection: Keep-Alive çš„è¯·æ±‚æ—¶ï¼Œå®ƒä¹Ÿä¼šåœ¨å“åº”å¤´ä¸­æ·»åŠ ä¸€ä¸ªåŒæ ·çš„å­—æ®µæ¥ä½¿ç”¨ Keep-Alive ã€‚è¿™æ ·ä¸€æ¥ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„HTTPè¿æ¥å°±ä¼šè¢«ä¿æŒï¼Œä¸ä¼šæ–­å¼€ï¼ˆè¶…è¿‡ Keep-Alive è§„å®šçš„æ—¶é—´ï¼Œæ„å¤–æ–­ç”µç­‰æƒ…å†µé™¤å¤–ï¼‰ï¼Œå½“å®¢æˆ·ç«¯å‘é€å¦å¤–ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œå°±ä½¿ç”¨è¿™æ¡å·²ç»å»ºç«‹çš„è¿æ¥ã€‚</p><p>åœ¨ HTTP 1.1 ç‰ˆæœ¬ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰è¿æ¥éƒ½è¢«ä¿æŒï¼Œå¦‚æœåŠ å…¥ â€œConnection: closeâ€ æ‰å…³é—­ã€‚ç›®å‰å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½ä½¿ç”¨ HTTP 1.1 åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤éƒ½ä¼šå‘èµ· Keep-Alive çš„è¿æ¥è¯·æ±‚äº†ã€‚</p><ul><li><p>HTTP Keep-Alive ç®€å•è¯´å°±æ˜¯ä¿æŒå½“å‰çš„TCPè¿æ¥ï¼Œé¿å…äº†é‡æ–°å»ºç«‹è¿æ¥ã€‚</p></li><li><p>HTTP é•¿è¿æ¥ä¸å¯èƒ½ä¸€ç›´ä¿æŒï¼Œä¾‹å¦‚ Keep-Alive: timeout=5, max=100ï¼Œè¡¨ç¤ºè¿™ä¸ªTCPé€šé“å¯ä»¥ä¿æŒ5ç§’ï¼Œmax=100ï¼Œè¡¨ç¤ºè¿™ä¸ªé•¿è¿æ¥æœ€å¤šæ¥æ”¶100æ¬¡è¯·æ±‚å°±æ–­å¼€ã€‚</p></li></ul><h3 id="HTTP-Pipeliningï¼ˆHTTP-ç®¡çº¿åŒ–ï¼‰"><a href="#HTTP-Pipeliningï¼ˆHTTP-ç®¡çº¿åŒ–ï¼‰" class="headerlink" title="HTTP Pipeliningï¼ˆHTTP ç®¡çº¿åŒ–ï¼‰"></a>HTTP Pipeliningï¼ˆHTTP ç®¡çº¿åŒ–ï¼‰</h3><p>é»˜è®¤æƒ…å†µä¸‹ HTTP åè®®ä¸­æ¯ä¸ªä¼ è¾“å±‚è¿æ¥åªèƒ½æ‰¿è½½ä¸€ä¸ª HTTP è¯·æ±‚å’Œå“åº”ï¼Œæµè§ˆå™¨ä¼šåœ¨æ”¶åˆ°ä¸Šä¸€ä¸ªè¯·æ±‚çš„å“åº”ä¹‹åï¼Œå†å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚åœ¨ä½¿ç”¨æŒä¹…è¿æ¥çš„æƒ…å†µä¸‹ï¼ŒæŸä¸ªè¿æ¥ä¸Šæ¶ˆæ¯çš„ä¼ é€’ç±»ä¼¼äºè¯·æ±‚1 -&gt; å“åº”1 -&gt; è¯·æ±‚2 -&gt; å“åº”2 -&gt; è¯·æ±‚3 -&gt; å“åº”3ã€‚</p><p>HTTP Pipeliningï¼ˆç®¡çº¿åŒ–ï¼‰æ˜¯å°†å¤šä¸ª HTTP è¯·æ±‚æ•´æ‰¹æäº¤çš„æŠ€æœ¯ï¼Œåœ¨ä¼ é€è¿‡ç¨‹ä¸­ä¸éœ€ç­‰å¾…æœåŠ¡ç«¯çš„å›åº”ã€‚ä½¿ç”¨ HTTP Pipelining æŠ€æœ¯ä¹‹åï¼ŒæŸä¸ªè¿æ¥ä¸Šçš„æ¶ˆæ¯å˜æˆäº†ç±»ä¼¼è¿™æ ·è¯·æ±‚1 -&gt; è¯·æ±‚2 -&gt; è¯·æ±‚3 -&gt; å“åº”1 -&gt; å“åº”2 -&gt; å“åº”3</p><h3 id="ä¼šè¯è·Ÿè¸ª"><a href="#ä¼šè¯è·Ÿè¸ª" class="headerlink" title="ä¼šè¯è·Ÿè¸ª"></a>ä¼šè¯è·Ÿè¸ª</h3><ol><li>ä»€ä¹ˆæ˜¯ä¼šè¯ï¼Ÿ</li></ol><p>å®¢æˆ·ç«¯æ‰“å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥å‘å‡ºè¯·æ±‚åˆ°æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯è¯·æ±‚çš„å…¨è¿‡ç¨‹ç§°ä¹‹ä¸ºä¼šè¯ã€‚</p><ol><li>ä»€ä¹ˆæ˜¯ä¼šè¯è·Ÿè¸ªï¼Ÿ</li></ol><p>ä¼šè¯è·Ÿè¸ªæŒ‡çš„æ˜¯å¯¹åŒä¸€ä¸ªç”¨æˆ·å¯¹æœåŠ¡å™¨çš„è¿ç»­çš„è¯·æ±‚å’Œæ¥å—å“åº”çš„ç›‘è§†ã€‚</p><ol><li>ä¸ºä»€ä¹ˆéœ€è¦ä¼šè¯è·Ÿè¸ªï¼Ÿ</li></ol><p>æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡HTTPåè®®è¿›è¡Œé€šä¿¡çš„ï¼Œè€ŒHTTPåè®®æ˜¯â€æ— çŠ¶æ€â€çš„åè®®ï¼Œå®ƒä¸èƒ½ä¿å­˜å®¢æˆ·çš„ä¿¡æ¯ï¼Œå³ä¸€æ¬¡å“åº”å®Œæˆä¹‹åè¿æ¥å°±æ–­å¼€äº†ï¼Œä¸‹ä¸€æ¬¡çš„è¯·æ±‚éœ€è¦é‡æ–°è¿æ¥ï¼Œè¿™æ ·å°±éœ€è¦åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªç”¨æˆ·ï¼Œæ‰€ä»¥æ‰æœ‰ä¼šè¯è·Ÿè¸ªæŠ€æœ¯æ¥å®ç°è¿™ç§è¦æ±‚ã€‚</p><p>Cookie</p><p>Cookie æ˜¯Web æœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯çš„ä¸€å°æ®µä¿¡æ¯ï¼Œå®¢æˆ·ç«¯è¯·æ±‚æ—¶å¯ä»¥è¯»å–è¯¥ä¿¡æ¯å‘é€åˆ°æœåŠ¡å™¨ç«¯ï¼Œè¿›è€Œè¿›è¡Œç”¨æˆ·çš„è¯†åˆ«ã€‚å¯¹äºå®¢æˆ·ç«¯çš„æ¯æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡å™¨éƒ½ä¼šå°† Cookie å‘é€åˆ°å®¢æˆ·ç«¯,åœ¨å®¢æˆ·ç«¯å¯ä»¥è¿›è¡Œä¿å­˜,ä»¥ä¾¿ä¸‹æ¬¡ä½¿ç”¨ã€‚</p><p>å®¢æˆ·ç«¯å¯ä»¥é‡‡ç”¨ä¸¤ç§æ–¹å¼æ¥ä¿å­˜è¿™ä¸ª Cookie å¯¹è±¡ï¼Œä¸€ç§æ–¹å¼æ˜¯ä¿å­˜åœ¨å®¢æˆ·ç«¯å†…å­˜ä¸­ï¼Œç§°ä¸ºä¸´æ—¶ Cookieï¼Œæµè§ˆå™¨å…³é—­åè¿™ä¸ª Cookie å¯¹è±¡å°†æ¶ˆå¤±ã€‚å¦å¤–ä¸€ç§æ–¹å¼æ˜¯ä¿å­˜åœ¨å®¢æˆ·æœºçš„ç£ç›˜ä¸Šï¼Œç§°ä¸ºæ°¸ä¹… Cookieã€‚ä»¥åå®¢æˆ·ç«¯åªè¦è®¿é—®è¯¥ç½‘ç«™ï¼Œå°±ä¼šå°†è¿™ä¸ª Cookie å†æ¬¡å‘é€åˆ°æœåŠ¡å™¨ä¸Šï¼Œå‰ææ˜¯è¿™ä¸ª Cookie åœ¨æœ‰æ•ˆæœŸå†…ï¼Œè¿™æ ·å°±å®ç°äº†å¯¹å®¢æˆ·çš„è·Ÿè¸ªã€‚</p><p>Cookie æ˜¯å¯ä»¥è¢«å®¢æˆ·ç«¯ç¦ç”¨çš„ã€‚</p><p>Session:</p><p>æ¯ä¸€ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªä¸åŒçš„ sessionï¼Œå„ä¸ªç”¨æˆ·ä¹‹é—´æ˜¯ä¸èƒ½å…±äº«çš„ï¼Œæ˜¯æ¯ä¸ªç”¨æˆ·æ‰€ç‹¬äº«çš„ï¼Œåœ¨ session ä¸­å¯ä»¥å­˜æ”¾ä¿¡æ¯ã€‚</p><p>åœ¨æœåŠ¡å™¨ç«¯ä¼šåˆ›å»ºä¸€ä¸ª session å¯¹è±¡ï¼Œäº§ç”Ÿä¸€ä¸ª sessionID æ¥æ ‡è¯†è¿™ä¸ª session å¯¹è±¡ï¼Œç„¶åå°†è¿™ä¸ª sessionID æ”¾å…¥åˆ° Cookie ä¸­å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œä¸‹ä¸€æ¬¡è®¿é—®æ—¶ï¼ŒsessionID ä¼šå‘é€åˆ°æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œè¯†åˆ«ä¸åŒçš„ç”¨æˆ·ã€‚</p><p>Session çš„å®ç°ä¾èµ–äº Cookieï¼Œå¦‚æœ Cookie è¢«ç¦ç”¨ï¼Œé‚£ä¹ˆ session ä¹Ÿå°†å¤±æ•ˆã€‚</p><h3 id="è·¨ç«™æ”»å‡»"><a href="#è·¨ç«™æ”»å‡»" class="headerlink" title="è·¨ç«™æ”»å‡»"></a>è·¨ç«™æ”»å‡»</h3><h4 id="CSRFï¼ˆCross-site-request-forgeryï¼Œè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰"><a href="#CSRFï¼ˆCross-site-request-forgeryï¼Œè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰" class="headerlink" title="CSRFï¼ˆCross-site request forgeryï¼Œè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰"></a>CSRFï¼ˆCross-site request forgeryï¼Œè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰</h4><ul><li>å¦‚ä½•é˜²èŒƒ CSRF æ”»å‡»ï¼Ÿ</li></ul><ol><li>å…³é”®æ“ä½œåªæ¥å— POST è¯·æ±‚</li><li>éªŒè¯ç </li><li>æ£€æµ‹referer</li><li>token</li></ol><h4 id="XSSï¼ˆCross-Site-Scriptingï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰"><a href="#XSSï¼ˆCross-Site-Scriptingï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰" class="headerlink" title="XSSï¼ˆCross Site Scriptingï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰"></a>XSSï¼ˆCross Site Scriptingï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰</h4><p>XSS å…¨ç§°â€œè·¨ç«™è„šæœ¬â€ï¼Œæ˜¯æ³¨å…¥æ”»å‡»çš„ä¸€ç§ã€‚å…¶ç‰¹ç‚¹æ˜¯ä¸å¯¹æœåŠ¡å™¨ç«¯é€ æˆä»»ä½•ä¼¤å®³ï¼Œè€Œæ˜¯é€šè¿‡ä¸€äº›æ­£å¸¸çš„ç«™å†…äº¤äº’é€”å¾„ï¼Œä¾‹å¦‚å‘å¸ƒè¯„è®ºï¼Œæäº¤å«æœ‰ JavaScript çš„å†…å®¹æ–‡æœ¬ã€‚è¿™æ—¶æœåŠ¡å™¨ç«¯å¦‚æœæ²¡æœ‰è¿‡æ»¤æˆ–è½¬ä¹‰æ‰è¿™äº›è„šæœ¬ï¼Œä½œä¸ºå†…å®¹å‘å¸ƒåˆ°äº†é¡µé¢ä¸Šï¼Œå…¶ä»–ç”¨æˆ·è®¿é—®è¿™ä¸ªé¡µé¢çš„æ—¶å€™å°±ä¼šè¿è¡Œè¿™äº›è„šæœ¬ã€‚</p><p>XSS æ˜¯å®ç° CSRF çš„è¯¸å¤šé€”å¾„ä¸­çš„ä¸€æ¡ï¼Œä½†ç»å¯¹ä¸æ˜¯å”¯ä¸€çš„ä¸€æ¡ã€‚ä¸€èˆ¬ä¹ æƒ¯ä¸ŠæŠŠé€šè¿‡ XSS æ¥å®ç°çš„ CSRF ç§°ä¸º XSRFã€‚</p><h3 id="httpç¼“å­˜"><a href="#httpç¼“å­˜" class="headerlink" title="httpç¼“å­˜"></a>httpç¼“å­˜</h3><ul><li>å¼ºç¼“å­˜<ul><li>cache-control</li><li>Expires</li><li>Pragma</li></ul></li><li>åå•†ç¼“å­˜<ul><li>last-modified</li><li>Etag</li></ul></li></ul><h2 id="HTTPSåŸºæœ¬è¿‡ç¨‹"><a href="#HTTPSåŸºæœ¬è¿‡ç¨‹" class="headerlink" title="HTTPSåŸºæœ¬è¿‡ç¨‹"></a>HTTPSåŸºæœ¬è¿‡ç¨‹</h2><p>HTTPSå³ HTTP over TLSï¼Œæ˜¯ä¸€ç§åœ¨åŠ å¯†ä¿¡é“è¿›è¡ŒHTTPå†…å®¹ä¼ è¾“çš„åè®®</p><blockquote><p>TLS çš„æ—©æœŸç‰ˆæœ¬å«åš SSLã€‚SSL çš„ 1.0, 2.0, 3.0 ç‰ˆæœ¬å‡å·²ç»è¢«åºŸå¼ƒï¼Œå‡ºäºå®‰å…¨é—®é¢˜è€ƒè™‘å¹¿å¤§æµè§ˆå™¨ä¹Ÿä¸å†å¯¹è€æ—§çš„ SSL ç‰ˆæœ¬è¿›è¡Œæ”¯æŒäº†ï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬å°±ç»Ÿä¸€ä½¿ç”¨ TLS åç§°äº†ã€‚</p></blockquote>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3HTTP.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>ç»´ç”Ÿç´ </title>
      <link>http://mydearest.cn/2019/%E7%BB%B4%E7%94%9F%E7%B4%A0.html</link>
      <guid>http://mydearest.cn/2019/%E7%BB%B4%E7%94%9F%E7%B4%A0.html</guid>
      <pubDate>Wed, 24 Apr 2019 16:02:31 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;ç»´ç”Ÿç´ åˆ†ç±»&quot;&gt;&lt;a href=&quot;#ç»´ç”Ÿç´ åˆ†ç±»&quot; class=&quot;headerlink&quot; title=&quot;ç»´ç”Ÿç´ åˆ†ç±»&quot;&gt;&lt;/a&gt;ç»´ç”Ÿç´ åˆ†ç±»&lt;/h2&gt;&lt;h3 id=&quot;ç»´ç”Ÿç´ A&quot;&gt;&lt;a href=&quot;#ç»´ç”Ÿç´ A&quot; class=&quot;headerlink&quot; title=&quot;ç»´ç”Ÿç´ A&quot;&gt;&lt;/a&gt;ç»´ç”Ÿç´ A&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;é•¿æœŸç”¨çœ¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç»´ç”Ÿç´ Aç¼ºä¹ï¼Œä¼šå¸¦æ¥çœ¼ç›å¹²æ¶©ï¼Œå¤œé—´è§†åŠ›ä¸‹é™ç­‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://cdn.mydearest.cn/blog/images/VA.jpg&quot; alt=&quot;ç»´ç”Ÿç´ A&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="ç»´ç”Ÿç´ åˆ†ç±»"><a href="#ç»´ç”Ÿç´ åˆ†ç±»" class="headerlink" title="ç»´ç”Ÿç´ åˆ†ç±»"></a>ç»´ç”Ÿç´ åˆ†ç±»</h2><h3 id="ç»´ç”Ÿç´ A"><a href="#ç»´ç”Ÿç´ A" class="headerlink" title="ç»´ç”Ÿç´ A"></a>ç»´ç”Ÿç´ A</h3><blockquote><p>é•¿æœŸç”¨çœ¼ã€‚</p></blockquote><p>ç»´ç”Ÿç´ Aç¼ºä¹ï¼Œä¼šå¸¦æ¥çœ¼ç›å¹²æ¶©ï¼Œå¤œé—´è§†åŠ›ä¸‹é™ç­‰é—®é¢˜ã€‚</p><p><img src="http://cdn.mydearest.cn/blog/images/VA.jpg" alt="ç»´ç”Ÿç´ A"></p><hr><a id="more"></a><h3 id="ç»´ç”Ÿç´ C"><a href="#ç»´ç”Ÿç´ C" class="headerlink" title="ç»´ç”Ÿç´ C"></a>ç»´ç”Ÿç´ C</h3><blockquote><p>æœè”¬æ²¡åƒå¤Ÿçš„</p></blockquote><p><img src="http://cdn.mydearest.cn/blog/images/VC.jpg" alt="ç»´ç”Ÿç´ A"></p><h3 id="ç»´ç”Ÿç´ D"><a href="#ç»´ç”Ÿç´ D" class="headerlink" title="ç»´ç”Ÿç´ D"></a>ç»´ç”Ÿç´ D</h3><blockquote><p>å¤ªé˜³æ™’çš„å°‘ï¼Œå½±å“é’™å¸æ”¶</p></blockquote><h3 id="ç»´ç”Ÿç´ B"><a href="#ç»´ç”Ÿç´ B" class="headerlink" title="ç»´ç”Ÿç´ B"></a>ç»´ç”Ÿç´ B</h3><p>Bç±»çš„ç»´ç”Ÿç´ æœ‰å¾ˆå¤šç§ã€‚</p><h4 id="ç¡«èƒºç´ -ç»´ç”Ÿç´ B1"><a href="#ç¡«èƒºç´ -ç»´ç”Ÿç´ B1" class="headerlink" title="ç¡«èƒºç´ (ç»´ç”Ÿç´ B1)"></a>ç¡«èƒºç´ (ç»´ç”Ÿç´ B1)</h4><p>è¿åŠ¨è¶Šå¤šï¼Œæ¶ˆè€—èƒ½é‡ï¼ˆä¸»è¦æ˜¯ç¢³æ°´åŒ–åˆç‰©ï¼‰è¶Šå¤šï¼Œç¡«èƒºç´ éœ€è¦ä¹Ÿè¶Šå¤šã€‚éšç€è¿›é£Ÿé‡å¢åŠ ï¼Œç¡«èƒºç´ æ‘„å…¥å¯èƒ½ä¹Ÿä¼šå¢åŠ ï¼Œ<strong>æ‰€ä»¥ä¸€èˆ¬ä¸å¿…é¢å¤–è¡¥å……ã€‚</strong></p><h4 id="æ ¸é»„ç´ ï¼ˆç»´ç”Ÿç´ B2ï¼‰"><a href="#æ ¸é»„ç´ ï¼ˆç»´ç”Ÿç´ B2ï¼‰" class="headerlink" title="æ ¸é»„ç´ ï¼ˆç»´ç”Ÿç´ B2ï¼‰"></a>æ ¸é»„ç´ ï¼ˆç»´ç”Ÿç´ B2ï¼‰</h4><p>æ ¸é»„ç´ è·Ÿè›‹ç™½è´¨ã€è„‚è‚ªã€ç¢³æ°´åŒ–åˆç‰©çš„èƒ½é‡äº§ç”Ÿéƒ½æœ‰å…³ç³»ã€‚æˆ‘å›½ç›®å‰æ˜¯æˆå¹´ç”·æ€§1.4æ¯«å…‹/å¤©ï¼Œå¥³æ€§1.2æ¯«å…‹/å¤©ã€‚è¿åŠ¨äººç¾¤ï¼Œå¢åŠ åˆ°æ¨èé‡çš„1-2å€è¶³çŸ£ã€‚é£Ÿç‰©è¡¥å……çš„è¯ï¼Œå¹³æ—¶å¯ä»¥å¤šåƒè‚‰ã€è›‹å’Œå¥¶åˆ¶å“ã€‚èŠ±æ¤°èœã€èŠ¦ç¬‹ã€è èœè¿™ç±»ç»¿è‰²è”¬èœæ ¸é»„ç´ å«é‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚<strong>è¿™äº›ä¸œè¥¿åƒçš„å°‘çš„è¯ï¼Œå¯ä»¥è€ƒè™‘è¡¥å……å‰‚ã€‚</strong></p><h4 id="çƒŸé…¸ï¼ˆç»´ç”Ÿç´ B3ï¼‰"><a href="#çƒŸé…¸ï¼ˆç»´ç”Ÿç´ B3ï¼‰" class="headerlink" title="çƒŸé…¸ï¼ˆç»´ç”Ÿç´ B3ï¼‰"></a>çƒŸé…¸ï¼ˆç»´ç”Ÿç´ B3ï¼‰</h4><p>çƒŸé…¸è·Ÿè›‹ç™½è´¨ã€ç¢³æ°´åŒ–åˆç‰©ã€è„‚è‚ªçš„èƒ½é‡äº§ç”Ÿéƒ½æœ‰å…³ã€‚å«çƒŸé…¸æ¯”è¾ƒä¸°å¯Œçš„é£Ÿç‰©æœ‰è‚‰ç±»ã€è°·ç±»ã€è±†ç±»é£Ÿç‰©ã€‚å› ä¸ºè‰²æ°¨é…¸åœ¨ä½“å†…èƒ½è½¬åŒ–æˆçƒŸé…¸ï¼ŒåŠ¨ç‰©è›‹ç™½æ‘„å…¥æ¯”è¾ƒå¤šçš„äººï¼Œ<strong>çƒŸé…¸ä¸€èˆ¬éƒ½ä¸ä¼šç¼ºä¹</strong>ã€‚æ‰€ä»¥ï¼Œå¸¸åƒè¾ƒå¤šè‚‰çš„äººï¼Œå³ä¾¿æ˜¯è¿åŠ¨äººç¾¤ï¼Œä¹ŸåŸºæœ¬ä¸ç”¨é¢å¤–è¡¥å……çƒŸé…¸ã€‚</p><h4 id="ç»´ç”Ÿç´ B6"><a href="#ç»´ç”Ÿç´ B6" class="headerlink" title="ç»´ç”Ÿç´ B6"></a>ç»´ç”Ÿç´ B6</h4><p>è¿™ç§ç»´ç”Ÿç´ ä¸»è¦è·Ÿç³–åŸå’Œè›‹ç™½è´¨ä»£è°¢æœ‰å…³ã€‚ä½“å†…å‚¨å­˜çš„ç³–åŸæƒ³å˜æˆè‘¡è„ç³–ï¼Œæ°¨åŸºé…¸æƒ³è½¬æ¢åˆ©ç”¨ï¼Œéƒ½éœ€è¦ç»´ç”Ÿç´ B6ï¼Œæ‰€ä»¥è¿™ä¸œè¥¿è·Ÿè¿åŠ¨å…³ç³»å¯†åˆ‡ã€‚</p><p>ç»´ç”Ÿç´ B6è·Ÿåˆ«çš„Bæ—ç»´ç”Ÿç´ ä¸ä¸€æ ·ï¼Œè¿™ç©æ„æœ‰æ¯’æ€§ã€‚ä½†ä¸€èˆ¬éƒ½è¦è¾¾åˆ°è¯ç‰©å‰‚é‡æ‰ä¼šä¸­æ¯’ã€‚æ¯”å¦‚æ²»ç–—ç»æœŸæŒ‰ç»¼åˆç—‡ã€å“®å–˜æœ‰æ—¶ä¼šç”¨åˆ°B6ã€‚ç»´ç”Ÿç´ B6çš„æœ€é«˜è€å—ä¸Šé™æ˜¯100æ¯«å…‹/å¤©ã€‚ä½äºè¿™ä¸ªå‰‚é‡ä¸€èˆ¬æ²¡æœ‰å¤ªå¤§é—®é¢˜ã€‚</p><p>æ¯”è¾ƒå®‰å…¨çš„è¡¥å……æ–¹å¼è¿˜æ˜¯é£Ÿç‰©ï¼Œè‚‰ã€è”¬èœã€åšæœã€é¦™è•‰ã€å…¨è°·ç‰©é£Ÿå“é‡Œå«B6éƒ½å¾ˆä¸°å¯Œã€‚æ¯”å¦‚100å…‹é¸¡èƒ¸è‚‰é‡Œå°±æœ‰å¤§çº¦0.6æ¯«å…‹ç»´ç”Ÿç´ B6ã€‚æ‰€ä»¥ï¼Œè¿™äº›ä¸œè¥¿åƒçš„æ¯”è¾ƒå¤šçš„è¯ï¼Œä¸€èˆ¬ä¸ç”¨åƒè¡¥å……å‰‚é¢å¤–è¡¥å……ã€‚</p><h4 id="æ©™å­ã€æ©˜å­ã€æŸšå­ã€é’æŸ ã€è¥¿æŸšã€æŸ æª¬ã€èŠ¦æŸ‘çš„å…³ç³»ã€‚"><a href="#æ©™å­ã€æ©˜å­ã€æŸšå­ã€é’æŸ ã€è¥¿æŸšã€æŸ æª¬ã€èŠ¦æŸ‘çš„å…³ç³»ã€‚" class="headerlink" title="æ©™å­ã€æ©˜å­ã€æŸšå­ã€é’æŸ ã€è¥¿æŸšã€æŸ æª¬ã€èŠ¦æŸ‘çš„å…³ç³»ã€‚"></a>æ©™å­ã€æ©˜å­ã€æŸšå­ã€é’æŸ ã€è¥¿æŸšã€æŸ æª¬ã€èŠ¦æŸ‘çš„å…³ç³»ã€‚</h4><p>æ©™å­æ˜¯æ©˜å­å’ŒæŸšå­æ‚äº¤æ¥çš„ï¼Œæ©˜å­å’Œæ©™å­æ‚äº¤æˆäº†èŠ¦æŸ‘ï¼ŒæŸšå­å’Œæ©™å­åˆæ‚äº¤æˆäº†é’æŸ ï¼Œæ©™å­å’Œé’æŸ æ‚äº¤äº†æŸ æª¬ï¼Œæ©™å­å’ŒæŸšå­æ‚äº¤æˆäº†è¥¿æŸšã€‚</p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/%E7%BB%B4%E7%94%9F%E7%B4%A0.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>vuexå­¦ä¹ ç¬”è®°</title>
      <link>http://mydearest.cn/2019/vuex%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html</link>
      <guid>http://mydearest.cn/2019/vuex%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html</guid>
      <pubDate>Thu, 18 Apr 2019 16:25:20 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;vuex&quot;&gt;&lt;a href=&quot;#vuex&quot; class=&quot;headerlink&quot; title=&quot;vuex&quot;&gt;&lt;/a&gt;vuex&lt;/h2&gt;&lt;p&gt;æ•°æ®é©±åŠ¨æ¨¡æ¿ï¼ˆç®¡ç†å…±äº«çŠ¶æ€ï¼‰
æ ¸å¿ƒstoreä»“åº“ï¼ˆå“åº”å¼çš„çŠ¶æ€å­˜å‚¨ï¼‰
æäº¤mutationæ‰èƒ½ä¿®æ”¹å†…éƒ¨çŠ¶æ€ è®°å½•æ¯æ¬¡æ”¹å˜ä¿å­˜çŠ¶æ€å¿«ç…§&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; store = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; Vuex.Store(&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    state:&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        count:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    mutations: &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        increase(state)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            state.count++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// å¼€å¯ä¸¥æ ¼æ¨¡å¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    strict: process.env.NODE_ENV !== &lt;span class=&quot;string&quot;&gt;&#39;production&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ— è®ºä½•æ—¶å‘ç”Ÿäº†çŠ¶æ€å˜æ›´ä¸”ä¸æ˜¯ç”± mutation å‡½æ•°å¼•èµ·çš„ï¼Œå°†ä¼šæŠ›å‡ºé”™è¯¯ã€‚è¿™èƒ½ä¿è¯æ‰€æœ‰çš„çŠ¶æ€å˜æ›´éƒ½èƒ½è¢«è°ƒè¯•å·¥å…·è·Ÿè¸ªåˆ°ã€‚&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;store.commit(&lt;span class=&quot;string&quot;&gt;&#39;increase&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;store.state.count;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸è¦åœ¨å‘å¸ƒç¯å¢ƒä¸‹å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼ä¸¥æ ¼æ¨¡å¼ä¼šæ·±åº¦ç›‘æµ‹çŠ¶æ€æ ‘æ¥æ£€æµ‹ä¸åˆè§„çš„çŠ¶æ€å˜æ›´â€”â€”è¯·ç¡®ä¿åœ¨å‘å¸ƒç¯å¢ƒä¸‹å…³é—­ä¸¥æ ¼æ¨¡å¼ï¼Œä»¥é¿å…æ€§èƒ½æŸå¤±ã€‚&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="vuex"><a href="#vuex" class="headerlink" title="vuex"></a>vuex</h2><p>æ•°æ®é©±åŠ¨æ¨¡æ¿ï¼ˆç®¡ç†å…±äº«çŠ¶æ€ï¼‰æ ¸å¿ƒstoreä»“åº“ï¼ˆå“åº”å¼çš„çŠ¶æ€å­˜å‚¨ï¼‰æäº¤mutationæ‰èƒ½ä¿®æ”¹å†…éƒ¨çŠ¶æ€ è®°å½•æ¯æ¬¡æ”¹å˜ä¿å­˜çŠ¶æ€å¿«ç…§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state:&#123;</span><br><span class="line">        count:<span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    mutations: &#123;</span><br><span class="line">        increase(state)&#123;</span><br><span class="line">            state.count++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// å¼€å¯ä¸¥æ ¼æ¨¡å¼</span></span><br><span class="line">    strict: process.env.NODE_ENV !== <span class="string">'production'</span></span><br><span class="line">    <span class="comment">// åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ— è®ºä½•æ—¶å‘ç”Ÿäº†çŠ¶æ€å˜æ›´ä¸”ä¸æ˜¯ç”± mutation å‡½æ•°å¼•èµ·çš„ï¼Œå°†ä¼šæŠ›å‡ºé”™è¯¯ã€‚è¿™èƒ½ä¿è¯æ‰€æœ‰çš„çŠ¶æ€å˜æ›´éƒ½èƒ½è¢«è°ƒè¯•å·¥å…·è·Ÿè¸ªåˆ°ã€‚</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.commit(<span class="string">'increase'</span>);</span><br><span class="line">store.state.count;</span><br></pre></td></tr></table></figure><p>ä¸è¦åœ¨å‘å¸ƒç¯å¢ƒä¸‹å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼ä¸¥æ ¼æ¨¡å¼ä¼šæ·±åº¦ç›‘æµ‹çŠ¶æ€æ ‘æ¥æ£€æµ‹ä¸åˆè§„çš„çŠ¶æ€å˜æ›´â€”â€”è¯·ç¡®ä¿åœ¨å‘å¸ƒç¯å¢ƒä¸‹å…³é—­ä¸¥æ ¼æ¨¡å¼ï¼Œä»¥é¿å…æ€§èƒ½æŸå¤±ã€‚</p><hr><a id="more"></a><h3 id="stateï¼ˆå•ä¸€çŠ¶æ€æ ‘ï¼‰"><a href="#stateï¼ˆå•ä¸€çŠ¶æ€æ ‘ï¼‰" class="headerlink" title="stateï¼ˆå•ä¸€çŠ¶æ€æ ‘ï¼‰"></a>stateï¼ˆå•ä¸€çŠ¶æ€æ ‘ï¼‰</h3><p>ç”¨ä¸€ä¸ªå¯¹è±¡åŒ…å«æ‰€æœ‰çš„åº”ç”¨å±‚çº§çŠ¶æ€</p><ul><li><p>ä»storeå®ä¾‹ä¸­è¯»å–çŠ¶æ€</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¡ç®—å±æ€§</span></span><br><span class="line"><span class="keyword">const</span> Counter = &#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;&#123;&#123; count &#125;&#125;&lt;/div&gt;`</span>,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    count () &#123;</span><br><span class="line">      <span class="keyword">return</span> store.state.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ä»æ ¹ç»„ä»¶æ³¨å…¥å®ä¾‹</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  <span class="comment">// æŠŠ store å¯¹è±¡æä¾›ç»™ â€œstoreâ€ é€‰é¡¹ï¼Œè¿™å¯ä»¥æŠŠ store çš„å®ä¾‹æ³¨å…¥æ‰€æœ‰çš„å­ç»„ä»¶</span></span><br><span class="line">  store,</span><br><span class="line">  components: &#123; Counter &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div class="app"&gt;</span></span><br><span class="line"><span class="string">      &lt;counter&gt;&lt;/counter&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// è¯»å–</span></span><br><span class="line"><span class="keyword">this</span>.$store.state.count</span><br></pre></td></tr></table></figure></li><li><p>å¤šä¸ªå±æ€§ä½¿ç”¨mapState()è¾…åŠ©å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">computed: mapState(&#123;</span><br><span class="line">    count: <span class="function"><span class="params">state</span> =&gt;</span> state.count,</span><br><span class="line">    name: <span class="function"><span class="params">state</span>=&gt;</span> state.name</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// å¦‚æœå±æ€§ä¸stateå­èŠ‚ç‚¹åç§°ç›¸åŒ ä¼ å…¥å­—ç¬¦ä¸²æ•°ç»„</span></span><br><span class="line"><span class="comment">// æ˜ å°„ this.count ä¸º store.state.count</span></span><br><span class="line">mapState([<span class="string">'count'</span>])</span><br></pre></td></tr></table></figure></li></ul><h3 id="getterå¯¹stateæ•°æ®çš„æ´¾ç”Ÿæ“ä½œï¼ˆå…±äº«æ•°æ®çš„å…±äº«å‡½æ•°ï¼‰"><a href="#getterå¯¹stateæ•°æ®çš„æ´¾ç”Ÿæ“ä½œï¼ˆå…±äº«æ•°æ®çš„å…±äº«å‡½æ•°ï¼‰" class="headerlink" title="getterå¯¹stateæ•°æ®çš„æ´¾ç”Ÿæ“ä½œï¼ˆå…±äº«æ•°æ®çš„å…±äº«å‡½æ•°ï¼‰"></a>getterå¯¹stateæ•°æ®çš„æ´¾ç”Ÿæ“ä½œï¼ˆå…±äº«æ•°æ®çš„å…±äº«å‡½æ•°ï¼‰</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state:&#123;</span><br><span class="line">        todos: [</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    getters: &#123;</span><br><span class="line">        doneTodos: <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> state.todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.done)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ¥æ”¶getterå‚æ•°</span></span><br><span class="line">        doneTodosCount: <span class="function">(<span class="params">state, getters</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> getters.doneTodos.length</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ–¹æ³•</span></span><br><span class="line">        getTodoById: <span class="function">(<span class="params">state</span>) =&gt;</span> (id) =&gt; &#123;</span><br><span class="line">            <span class="keyword">return</span> state.todos.find(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id === id)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// è®¿é—®</span></span><br><span class="line">store.getters.doneTodos <span class="comment">// -&gt; [&#123; id: 1, text: '...', done: true &#125;]</span></span><br></pre></td></tr></table></figure><ul><li>mapGetters()è¾…åŠ©å‡½æ•°<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦å°† getter æ··å…¥ computed å¯¹è±¡ä¸­</span></span><br><span class="line">    ...mapGetters([</span><br><span class="line">        <span class="string">'doneTodosCount'</span>,</span><br><span class="line">        <span class="string">'anotherGetter'</span>,</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    ])</span><br><span class="line">&#125;</span><br><span class="line">mapGetters(&#123;</span><br><span class="line">    <span class="comment">// æŠŠ `this.doneCount` æ˜ å°„ä¸º `this.$store.getters.doneTodosCount`</span></span><br><span class="line">    doneCount: <span class="string">'doneTodosCount'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><h3 id="mutation"><a href="#mutation" class="headerlink" title="mutation"></a>mutation</h3><p>æäº¤mutation<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">store.commit(<span class="string">"increase"</span>)</span><br><span class="line"><span class="comment">// ä¼ å‚</span></span><br><span class="line">store.commit(<span class="string">'increase'</span>, <span class="number">10</span>)</span><br><span class="line"><span class="comment">// æœ€å¥½è¿˜æ˜¯è§„èŒƒä¼ payloadå¯¹è±¡</span></span><br><span class="line">store.commit(<span class="string">'increase'</span>, &#123;</span><br><span class="line">    amount:<span class="number">10</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// å¯¹è±¡é£æ ¼æäº¤</span></span><br><span class="line">store.commit(&#123;</span><br><span class="line">  type: <span class="string">'increase'</span>,</span><br><span class="line">  amount: <span class="number">10</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>1.æœ€å¥½æå‰åœ¨ä½ çš„ store ä¸­åˆå§‹åŒ–å¥½æ‰€æœ‰æ‰€éœ€å±æ€§ã€‚</p><p>2.å½“éœ€è¦åœ¨å¯¹è±¡ä¸Šæ·»åŠ æ–°å±æ€§æ—¶ï¼Œä½ åº”è¯¥</p><p>â€¢ä½¿ç”¨ Vue.set(obj, â€˜newPropâ€™, 123), æˆ–è€…</p><p>â€¢ä»¥æ–°å¯¹è±¡æ›¿æ¢è€å¯¹è±¡ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">state.obj = &#123; ...state.obj, <span class="attr">newProp</span>: <span class="number">123</span> &#125;</span><br></pre></td></tr></table></figure></p><ul><li>å¸¸é‡æ›¿ä»£äº‹ä»¶ç±»å‹<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mutation-types.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> SOME_MUTATION = <span class="string">'SOME_MUTATION'</span></span><br></pre></td></tr></table></figure></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store.js</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">import</span> &#123; SOME_MUTATION &#125; <span class="keyword">from</span> <span class="string">'./mutation-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    <span class="comment">// æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ES2015 é£æ ¼çš„è®¡ç®—å±æ€§å‘½ååŠŸèƒ½æ¥ä½¿ç”¨ä¸€ä¸ªå¸¸é‡ä½œä¸ºå‡½æ•°å</span></span><br><span class="line">    [SOME_MUTATION] (state) &#123;</span><br><span class="line">      <span class="comment">// mutate state</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>mutationå¿…é¡»æ˜¯åŒæ­¥å‡½æ•°</strong>ä¸€æ¡ mutation è¢«è®°å½•ï¼Œdevtools éƒ½éœ€è¦æ•æ‰åˆ°å‰ä¸€çŠ¶æ€å’Œåä¸€çŠ¶æ€çš„å¿«ç…§ã€‚devtools ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å›è°ƒå‡½æ•°å®é™…ä¸Šè¢«è°ƒç”¨â€”â€”å®è´¨ä¸Šä»»ä½•åœ¨å›è°ƒå‡½æ•°ä¸­è¿›è¡Œçš„çŠ¶æ€çš„æ”¹å˜éƒ½æ˜¯ä¸å¯è¿½è¸ªçš„ã€‚</p><h4 id="ç»„ä»¶ä¸­æäº¤mutation"><a href="#ç»„ä»¶ä¸­æäº¤mutation" class="headerlink" title="ç»„ä»¶ä¸­æäº¤mutation"></a>ç»„ä»¶ä¸­æäº¤mutation</h4><ol><li><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'xxx'</span>)</span><br></pre></td></tr></table></figure></li><li><p>mapMutations è¾…åŠ©å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">    ...mapMutations([</span><br><span class="line">      <span class="string">'increase'</span>, <span class="comment">// å°† `this.increase()` æ˜ å°„ä¸º `this.$store.commit('increase')`</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// `mapMutations` ä¹Ÿæ”¯æŒè½½è·ï¼š</span></span><br><span class="line">      <span class="string">'increaseBy'</span> <span class="comment">// å°† `this.increaseBy(amount)` æ˜ å°„ä¸º `this.$store.commit('increaseBy', amount)`</span></span><br><span class="line">    ]),</span><br><span class="line">    ...mapMutations(&#123;</span><br><span class="line">      add: <span class="string">'increase'</span> <span class="comment">// å°† `this.add()` æ˜ å°„ä¸º `this.$store.commit('increase')`</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="action"><a href="#action" class="headerlink" title="action"></a>action</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">store.commit(<span class="string">'increment'</span>)</span><br><span class="line"><span class="comment">// ä»»ä½•ç”± "increment" å¯¼è‡´çš„çŠ¶æ€å˜æ›´éƒ½åº”è¯¥åœ¨æ­¤åˆ»å®Œæˆã€‚</span></span><br></pre></td></tr></table></figure><p>Action ç±»ä¼¼äº mutationï¼Œä¸åŒåœ¨äºï¼šâ€¢Action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ã€‚â€¢Action å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    count: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    increase (state) &#123;</span><br><span class="line">      state.count++</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    increase (context) &#123;</span><br><span class="line">      context.commit(<span class="string">'increase'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    increaseOr(&#123;commit&#125;) &#123;</span><br><span class="line">      commit(<span class="string">'increase'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    increaseAsync (&#123; commit &#125;) &#123;</span><br><span class="line">        <span class="comment">// æ”¯æŒå¼‚æ­¥æ“ä½œ</span></span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        commit(<span class="string">'increment'</span>)</span><br><span class="line">        &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>Action å‡½æ•°æ¥å—ä¸€ä¸ªä¸ store å®ä¾‹å…·æœ‰ç›¸åŒæ–¹æ³•å’Œå±æ€§çš„ context å¯¹è±¡ï¼Œå› æ­¤ä½ å¯ä»¥è°ƒç”¨ context.commit æäº¤ä¸€ä¸ª mutationï¼Œæˆ–è€…é€šè¿‡ context.state å’Œ context.getters æ¥è·å– state å’Œ gettersã€‚</p><ul><li><p>è§¦å‘action</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.dispatch(<span class="string">'increase'</span>)</span><br></pre></td></tr></table></figure></li><li><p>æ”¯æŒåŒæ ·çš„è½½è·æ–¹å¼å’Œå¯¹è±¡æ–¹å¼åˆ†å‘</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥è½½è·å½¢å¼åˆ†å‘</span></span><br><span class="line">store.dispatch(<span class="string">'increaseAsync'</span>, &#123;</span><br><span class="line">  amount: <span class="number">10</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä»¥å¯¹è±¡å½¢å¼åˆ†å‘</span></span><br><span class="line">store.dispatch(&#123;</span><br><span class="line">  type: <span class="string">'increaseAsync'</span>,</span><br><span class="line">  amount: <span class="number">10</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è´­ç‰©è½¦æ“ä½œå®ä¾‹</span></span><br><span class="line">actions: &#123;</span><br><span class="line">  checkout (&#123; commit, state &#125;, products) &#123;</span><br><span class="line">    <span class="comment">// æŠŠå½“å‰è´­ç‰©è½¦çš„ç‰©å“å¤‡ä»½èµ·æ¥</span></span><br><span class="line">    <span class="keyword">const</span> savedCartItems = [...state.cart.added]</span><br><span class="line">    <span class="comment">// å‘å‡ºç»“è´¦è¯·æ±‚ï¼Œç„¶åä¹è§‚åœ°æ¸…ç©ºè´­ç‰©è½¦</span></span><br><span class="line">    commit(types.CHECKOUT_REQUEST)</span><br><span class="line">    <span class="comment">// è´­ç‰© API æ¥å—ä¸€ä¸ªæˆåŠŸå›è°ƒå’Œä¸€ä¸ªå¤±è´¥å›è°ƒ</span></span><br><span class="line">    shop.buyProducts(</span><br><span class="line">      products,</span><br><span class="line">      <span class="comment">// æˆåŠŸæ“ä½œ</span></span><br><span class="line">      () =&gt; commit(types.CHECKOUT_SUCCESS),</span><br><span class="line">      <span class="comment">// å¤±è´¥æ“ä½œ</span></span><br><span class="line">      () =&gt; commit(types.CHECKOUT_FAILURE, savedCartItems)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç»„ä»¶ä¸­åˆ†å‘action"><a href="#ç»„ä»¶ä¸­åˆ†å‘action" class="headerlink" title="ç»„ä»¶ä¸­åˆ†å‘action"></a>ç»„ä»¶ä¸­åˆ†å‘action</h4><p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ this.$store.dispatch(â€˜xxxâ€™) åˆ†å‘ actionï¼Œæˆ–è€…ä½¿ç”¨ mapActions è¾…åŠ©å‡½æ•°å°†ç»„ä»¶çš„ methods æ˜ å°„ä¸º store.dispatch è°ƒç”¨ï¼ˆéœ€è¦å…ˆåœ¨æ ¹èŠ‚ç‚¹æ³¨å…¥ storeï¼‰<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    ...mapActions([</span><br><span class="line">      <span class="string">'increase'</span>, <span class="comment">// å°† `this.increase()` æ˜ å°„ä¸º `this.$store.dispatch('increase')`</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// `mapActions` ä¹Ÿæ”¯æŒè½½è·ï¼š</span></span><br><span class="line">      <span class="string">'increaseBy'</span> <span class="comment">// å°† `this.increaseBy(amount)` æ˜ å°„ä¸º `this.$store.dispatch('increaseBy', amount)`</span></span><br><span class="line">    ]),</span><br><span class="line">    ...mapActions(&#123;</span><br><span class="line">      add: <span class="string">'increase'</span> <span class="comment">// å°† `this.add()` æ˜ å°„ä¸º `this.$store.dispatch('increase')`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="actionç»„åˆåµŒå¥—"><a href="#actionç»„åˆåµŒå¥—" class="headerlink" title="actionç»„åˆåµŒå¥—"></a>actionç»„åˆåµŒå¥—</h4><p>store.dispatch å¯ä»¥å¤„ç†è¢«è§¦å‘çš„ action çš„å¤„ç†å‡½æ•°è¿”å›çš„ Promiseï¼Œå¹¶ä¸” store.dispatch ä»æ—§è¿”å› Promise<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  actionA (&#123; commit &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        commit(<span class="string">'someMutation'</span>)</span><br><span class="line">        resolve()</span><br><span class="line">      &#125;, <span class="number">1000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">   actionB (&#123; dispatch, commit &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> dispatch(<span class="string">'actionA'</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      commit(<span class="string">'someOtherMutation'</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">store.dispatch(<span class="string">'actionA'</span>).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>é‡‡ç”¨async await</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// getData() å’Œ getOtherData() è¿”å›çš„æ˜¯ Promise</span></span><br><span class="line">actions: &#123;</span><br><span class="line">  <span class="keyword">async</span> actionA (&#123; commit &#125;) &#123;</span><br><span class="line">    commit(<span class="string">'gotData'</span>, <span class="keyword">await</span> getData())</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">async</span> actionB (&#123; dispatch, commit &#125;) &#123;</span><br><span class="line">    <span class="keyword">await</span> dispatch(<span class="string">'actionA'</span>) <span class="comment">// ç­‰å¾… actionA å®Œæˆ</span></span><br><span class="line">    commit(<span class="string">'gotOtherData'</span>, <span class="keyword">await</span> getOtherData())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="moduleåˆ‡åˆ†æ¨¡å—"><a href="#moduleåˆ‡åˆ†æ¨¡å—" class="headerlink" title="moduleåˆ‡åˆ†æ¨¡å—"></a>moduleåˆ‡åˆ†æ¨¡å—</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;,</span><br><span class="line">  getters: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    a: moduleA,</span><br><span class="line">    b: moduleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.state.a <span class="comment">// -&gt; moduleA çš„çŠ¶æ€</span></span><br><span class="line">store.state.b <span class="comment">// -&gt; moduleB çš„çŠ¶æ€</span></span><br></pre></td></tr></table></figure><ul><li><p>æ¨¡å—å†…éƒ¨çš„action</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  actions: &#123;</span><br><span class="line">    incrementIfOddOnRootSum (&#123; state, commit, rootState &#125;) &#123;</span><br><span class="line">      <span class="keyword">if</span> ((state.count + rootState.count) % <span class="number">2</span> === <span class="number">1</span>) &#123;</span><br><span class="line">        commit(<span class="string">'increment'</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">   getters: &#123;</span><br><span class="line">    sumWithRootCount (state, getters, rootState) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.count + rootState.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å‘½åç©ºé—´</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    account: &#123;</span><br><span class="line">      namespaced: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// æ¨¡å—å†…å®¹ï¼ˆmodule assetsï¼‰</span></span><br><span class="line">      state: &#123; ... &#125;, <span class="comment">// æ¨¡å—å†…çš„çŠ¶æ€å·²ç»æ˜¯åµŒå¥—çš„äº†ï¼Œä½¿ç”¨ `namespaced` å±æ€§ä¸ä¼šå¯¹å…¶äº§ç”Ÿå½±å“</span></span><br><span class="line">      getters: &#123;</span><br><span class="line">        isAdmin () &#123; ... &#125; <span class="comment">// -&gt; getters['account/isAdmin']</span></span><br><span class="line">      &#125;,</span><br><span class="line">      actions: &#123;</span><br><span class="line">        login () &#123; ... &#125; <span class="comment">// -&gt; dispatch('account/login')</span></span><br><span class="line">      &#125;,</span><br><span class="line">      mutations: &#123;</span><br><span class="line">        login () &#123; ... &#125; <span class="comment">// -&gt; commit('account/login')</span></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// åµŒå¥—æ¨¡å—</span></span><br><span class="line">      modules: &#123;</span><br><span class="line">        <span class="comment">// ç»§æ‰¿çˆ¶æ¨¡å—çš„å‘½åç©ºé—´</span></span><br><span class="line">        myPage: &#123;</span><br><span class="line">          state: &#123; ... &#125;,</span><br><span class="line">          getters: &#123;</span><br><span class="line">            profile () &#123; ... &#125; <span class="comment">// -&gt; getters['account/profile']</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¿›ä¸€æ­¥åµŒå¥—å‘½åç©ºé—´</span></span><br><span class="line">        posts: &#123;</span><br><span class="line">          namespaced: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">          state: &#123; ... &#125;,</span><br><span class="line">          getters: &#123;</span><br><span class="line">            popular () &#123; ... &#125; <span class="comment">// -&gt; getters['account/posts/popular']</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—å†…è®¿é—®å…¨å±€å†…å®¹ï¼ˆGlobal Assetsï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">modules: &#123;</span><br><span class="line">  foo: &#123;</span><br><span class="line">    namespaced: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">    getters: &#123;</span><br><span class="line">      <span class="comment">// åœ¨è¿™ä¸ªæ¨¡å—çš„ getter ä¸­ï¼Œ`getters` è¢«å±€éƒ¨åŒ–äº†</span></span><br><span class="line">      <span class="comment">// ä½ å¯ä»¥ä½¿ç”¨ getter çš„ç¬¬å››ä¸ªå‚æ•°æ¥è°ƒç”¨ `rootGetters`</span></span><br><span class="line">      someGetter (state, getters, rootState, rootGetters) &#123;</span><br><span class="line">        getters.someOtherGetter <span class="comment">// -&gt; 'foo/someOtherGetter'</span></span><br><span class="line">        rootGetters.someOtherGetter <span class="comment">// -&gt; 'someOtherGetter'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      someOtherGetter: <span class="function"><span class="params">state</span> =&gt;</span> &#123; ... &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    actions: &#123;</span><br><span class="line">      <span class="comment">// åœ¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œ dispatch å’Œ commit ä¹Ÿè¢«å±€éƒ¨åŒ–äº†</span></span><br><span class="line">      <span class="comment">// ä»–ä»¬å¯ä»¥æ¥å— `root` å±æ€§ä»¥è®¿é—®æ ¹ dispatch æˆ– commit</span></span><br><span class="line">      someAction (&#123; dispatch, commit, getters, rootGetters &#125;) &#123;</span><br><span class="line">        getters.someGetter <span class="comment">// -&gt; 'foo/someGetter'</span></span><br><span class="line">        rootGetters.someGetter <span class="comment">// -&gt; 'someGetter'</span></span><br><span class="line"></span><br><span class="line">        dispatch(<span class="string">'someOtherAction'</span>) <span class="comment">// -&gt; 'foo/someOtherAction'</span></span><br><span class="line">        dispatch(<span class="string">'someOtherAction'</span>, <span class="literal">null</span>, &#123; <span class="attr">root</span>: <span class="literal">true</span> &#125;) <span class="comment">// -&gt; 'someOtherAction'</span></span><br><span class="line"></span><br><span class="line">        commit(<span class="string">'someMutation'</span>) <span class="comment">// -&gt; 'foo/someMutation'</span></span><br><span class="line">        commit(<span class="string">'someMutation'</span>, <span class="literal">null</span>, &#123; <span class="attr">root</span>: <span class="literal">true</span> &#125;) <span class="comment">// -&gt; 'someMutation'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      someOtherAction (ctx, payload) &#123; ... &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—æ³¨å†Œå…¨å±€ actionè‹¥éœ€è¦åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—æ³¨å†Œå…¨å±€ actionï¼Œå¯æ·»åŠ  root: trueï¼Œå¹¶å°†è¿™ä¸ª action çš„å®šä¹‰æ”¾åœ¨å‡½æ•° handler ä¸­ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  actions: &#123;</span><br><span class="line">    someOtherAction (&#123;dispatch&#125;) &#123;</span><br><span class="line">      dispatch(<span class="string">'someAction'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  modules: &#123;</span><br><span class="line">    foo: &#123;</span><br><span class="line">      namespaced: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">      actions: &#123;</span><br><span class="line">        someAction: &#123;</span><br><span class="line">          root: <span class="literal">true</span>,</span><br><span class="line">          handler (namespacedContext, payload) &#123; ... &#125; <span class="comment">// -&gt; 'someAction'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å¸¦å‘½åç©ºé—´çš„ç»‘å®šå‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(&#123;</span><br><span class="line">    a: <span class="function"><span class="params">state</span> =&gt;</span> state.some.nested.module.a,</span><br><span class="line">    b: <span class="function"><span class="params">state</span> =&gt;</span> state.some.nested.module.b</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  ...mapActions([</span><br><span class="line">    <span class="string">'some/nested/module/foo'</span>, <span class="comment">// -&gt; this['some/nested/module/foo']()</span></span><br><span class="line">    <span class="string">'some/nested/module/bar'</span> <span class="comment">// -&gt; this['some/nested/module/bar']()</span></span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>ç®€åŒ–<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapState(<span class="string">'some/nested/module'</span>, &#123;</span><br><span class="line">    a: <span class="function"><span class="params">state</span> =&gt;</span> state.a,</span><br><span class="line">    b: <span class="function"><span class="params">state</span> =&gt;</span> state.b</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">  ...mapActions(<span class="string">'some/nested/module'</span>, [</span><br><span class="line">    <span class="string">'foo'</span>, <span class="comment">// -&gt; this.foo()</span></span><br><span class="line">    <span class="string">'bar'</span> <span class="comment">// -&gt; this.bar()</span></span><br><span class="line">  ])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨ createNamespacedHelpers åˆ›å»ºåŸºäºæŸä¸ªå‘½åç©ºé—´è¾…åŠ©å‡½æ•°ã€‚å®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œæœ‰æ–°çš„ç»‘å®šåœ¨ç»™å®šå‘½åç©ºé—´å€¼ä¸Šçš„ç»„ä»¶ç»‘å®šè¾…åŠ©å‡½æ•°<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createNamespacedHelpers &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; mapState, mapActions &#125; = createNamespacedHelpers(<span class="string">'some/nested/module'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    <span class="comment">// åœ¨ `some/nested/module` ä¸­æŸ¥æ‰¾</span></span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      a: <span class="function"><span class="params">state</span> =&gt;</span> state.a,</span><br><span class="line">      b: <span class="function"><span class="params">state</span> =&gt;</span> state.b</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="comment">// åœ¨ `some/nested/module` ä¸­æŸ¥æ‰¾</span></span><br><span class="line">    ...mapActions([</span><br><span class="line">      <span class="string">'foo'</span>,</span><br><span class="line">      <span class="string">'bar'</span></span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="å®šä¹‰æ’ä»¶"><a href="#å®šä¹‰æ’ä»¶" class="headerlink" title="å®šä¹‰æ’ä»¶"></a>å®šä¹‰æ’ä»¶</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myPlugin = <span class="function"><span class="params">store</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ä¼ å…¥storeåˆå§‹åŒ–æ—¶è°ƒç”¨</span></span><br><span class="line">    store.subscribe(<span class="function">(<span class="params">mutation, state</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">// æ¯æ¬¡mutationä¹‹åè°ƒç”¨</span></span><br><span class="line">        <span class="comment">// mutation çš„æ ¼å¼ä¸º &#123;type, payload&#125;</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è¡¨å•å¤„ç†"><a href="#è¡¨å•å¤„ç†" class="headerlink" title="è¡¨å•å¤„ç†"></a>è¡¨å•å¤„ç†</h2><p>å› ä¸ºæäº¤mutationæ‰èƒ½ä¿®æ”¹çŠ¶æ€ï¼Œæ‰€ä»¥v-modelä¸é€‚åˆç»‘å®švuexé‡Œçš„stateï¼Œä¸ç¬¦åˆvuexçš„æ€æƒ³ã€‚<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">"obj.message"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>å‡è®¾è¿™é‡Œçš„ obj æ˜¯åœ¨è®¡ç®—å±æ€§ä¸­è¿”å›çš„ä¸€ä¸ªå±äº Vuex store çš„å¯¹è±¡ï¼Œåœ¨ç”¨æˆ·è¾“å…¥æ—¶ï¼Œv-model ä¼šè¯•å›¾ç›´æ¥ä¿®æ”¹ obj.messageã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œç”±äºè¿™ä¸ªä¿®æ”¹ä¸æ˜¯åœ¨ mutation å‡½æ•°ä¸­æ‰§è¡Œçš„, è¿™é‡Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚</p><ol><li>ä¸é‡‡ç”¨v-modelæ‰€ä»¥éœ€è¦inputç»‘å®švalueï¼Œç„¶åè°ƒç”¨inputæˆ–è€…changeæäº¤mutationä¿®æ”¹çŠ¶æ€<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">:value</span>=<span class="string">"message"</span> @<span class="attr">input</span>=<span class="string">"updateMessage"</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">        message: <span class="function"><span class="params">state</span> =&gt;</span> state.obj.message</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;,</span><br><span class="line">method: &#123;</span><br><span class="line">    updateMessage(e)&#123;</span><br><span class="line">        <span class="keyword">this</span>.$store.commit(<span class="string">"updateMessage"</span>, e.target.value)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol><li>é‡‡ç”¨v-model<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">computed: &#123;</span><br><span class="line">  message: &#123;</span><br><span class="line">    get () &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.obj.message</span><br><span class="line">    &#125;,</span><br><span class="line">    set (value) &#123;</span><br><span class="line">      <span class="keyword">this</span>.$store.commit(<span class="string">'updateMessage'</span>, value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/vuex%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>macvscodeæ›´æ–°å¤±è´¥ï¼šPermissiondeniedè§£å†³åŠæ³•</title>
      <link>http://mydearest.cn/2019/macvscode%E6%9B%B4%E6%96%B0%E5%A4%B1%E8%B4%A5%EF%BC%9APermissiondenied%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95.html</link>
      <guid>http://mydearest.cn/2019/macvscode%E6%9B%B4%E6%96%B0%E5%A4%B1%E8%B4%A5%EF%BC%9APermissiondenied%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95.html</guid>
      <pubDate>Tue, 09 Apr 2019 15:15:24 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;åœºæ™¯-â€“-mac-vscodeä¸èƒ½å®‰è£…æ›´æ–°&quot;&gt;&lt;a href=&quot;#åœºæ™¯-â€“-mac-vscodeä¸èƒ½å®‰è£…æ›´æ–°&quot; class=&quot;headerlink&quot; title=&quot;åœºæ™¯ â€“ mac vscodeä¸èƒ½å®‰è£…æ›´æ–°&quot;&gt;&lt;/a&gt;åœºæ™¯ â€“ mac vscodeä¸èƒ½å®‰è£…æ›´æ–°&lt;/
        
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="åœºæ™¯-â€“-mac-vscodeä¸èƒ½å®‰è£…æ›´æ–°"><a href="#åœºæ™¯-â€“-mac-vscodeä¸èƒ½å®‰è£…æ›´æ–°" class="headerlink" title="åœºæ™¯ â€“ mac vscodeä¸èƒ½å®‰è£…æ›´æ–°"></a>åœºæ™¯ â€“ mac vscodeä¸èƒ½å®‰è£…æ›´æ–°</h2><blockquote><p>Could not create temporary directory: Permission denied</p></blockquote><h2 id="åŸå› åˆ†æ"><a href="#åŸå› åˆ†æ" class="headerlink" title="åŸå› åˆ†æ"></a>åŸå› åˆ†æ</h2><p>macä¸‹<code>/Users/username/Library/Caches/</code>ç”¨æˆ·æ–‡ä»¶ä¸ä¸€æ ·ï¼Œrootå’Œusername</p><p>å¯¼è‡´</p><blockquote><p>drwxr-xr-x   6 username  staff   204B Jan 17 20:33 com.microsoft.VSCodedrwxrâ€“râ€“   2 root    staff    68B Dec 17 13:51 com.microsoft.VSCode.ShipIt</p></blockquote><h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 1. å…³é—­vscode</span><br><span class="line"></span><br><span class="line">// 2. è¿™ä¸€æ­¥æ˜¯éœ€è¦è¾“å…¥å¯†ç çš„</span><br><span class="line">sudo chown $USER ~/Library/Caches/com.microsoft.VSCode.ShipIt/ </span><br><span class="line"></span><br><span class="line">// 3. è¿™ä¸€æ­¥æ˜¯ä¸éœ€è¦è¾“å…¥å¯†ç çš„, å¦‚æœä¸è¿›è¡Œç¬¬ä¸€æ­¥ï¼Œç¬¬äºŒæ­¥ä¼šæŠ¥é”™</span><br><span class="line">sudo chown $USER ~/Library/Caches/com.microsoft.VSCode.ShipIt/*</span><br><span class="line"></span><br><span class="line">// 4. æ›´æ–°xattr</span><br><span class="line">xattr -dr com.apple.quarantine /Applications/Visual\ Studio\ Code.app</span><br></pre></td></tr></table></figure><h2 id="é‡æ–°å®‰è£…æ›´æ–°-å®ŒæˆğŸ˜"><a href="#é‡æ–°å®‰è£…æ›´æ–°-å®ŒæˆğŸ˜" class="headerlink" title="é‡æ–°å®‰è£…æ›´æ–° å®ŒæˆğŸ˜"></a>é‡æ–°å®‰è£…æ›´æ–° å®ŒæˆğŸ˜</h2>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/macvscode%E6%9B%B4%E6%96%B0%E5%A4%B1%E8%B4%A5%EF%BC%9APermissiondenied%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>borderRadiusç™¾åˆ†æ¯”50å’Œ100ç©¶ç«Ÿæœ‰ä»€ä¹ˆåŒºåˆ«</title>
      <link>http://mydearest.cn/2019/borderRadius%E7%99%BE%E5%88%86%E6%AF%9450%E5%92%8C100%E7%A9%B6%E7%AB%9F%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB.html</link>
      <guid>http://mydearest.cn/2019/borderRadius%E7%99%BE%E5%88%86%E6%AF%9450%E5%92%8C100%E7%A9%B6%E7%AB%9F%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB.html</guid>
      <pubDate>Sun, 31 Mar 2019 16:39:52 GMT</pubDate>
      <description>
      
        &lt;p&gt;border-radiusçš„å€¼æ˜¯ç™¾åˆ†æ¯”çš„è¯ï¼Œå°±ç›¸å½“äºç›’å­çš„å®½åº¦å’Œé«˜åº¦çš„ç™¾åˆ†æ¯”ã€‚æˆ‘ä»¬çŸ¥é“åœ¨ä¸€ä¸ªæ­£æ–¹å½¢å†…åšä¸€ä¸ªé¢ç§¯æœ€å¤§çš„åœ†å½¢ï¼Œè¿™ä¸ªåœ†çš„åŠå¾„å°±ä¸ºæ­£æ–¹å½¢è¾¹é•¿çš„ä¸€åŠã€‚æ‰€&lt;/p&gt;
&lt;p&gt;ä»¥border-radiusä¸º50%æ—¶ï¼Œåˆ™ä¼šå½¢æˆåœ†ã€‚é‚£ä¹ˆå¯èƒ½æœ‰äººå°±ä¼šé—®ï¼Œborder-radiusä¸º100%æ—¶ï¼Œå¯¹åº”åœ†çš„åŠå¾„é•¿åº¦ä¸å°±æ˜¯æ­£æ–¹å½¢çš„å®½é«˜ä¹ˆï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯ä¼š&lt;/p&gt;
&lt;p&gt;å½¢æˆä¸€ä¸ªå’Œå€¼ä¸º50%ä¸€æ ·çš„åœ†å½¢å‘¢ï¼Ÿ&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>border-radiusçš„å€¼æ˜¯ç™¾åˆ†æ¯”çš„è¯ï¼Œå°±ç›¸å½“äºç›’å­çš„å®½åº¦å’Œé«˜åº¦çš„ç™¾åˆ†æ¯”ã€‚æˆ‘ä»¬çŸ¥é“åœ¨ä¸€ä¸ªæ­£æ–¹å½¢å†…åšä¸€ä¸ªé¢ç§¯æœ€å¤§çš„åœ†å½¢ï¼Œè¿™ä¸ªåœ†çš„åŠå¾„å°±ä¸ºæ­£æ–¹å½¢è¾¹é•¿çš„ä¸€åŠã€‚æ‰€</p><p>ä»¥border-radiusä¸º50%æ—¶ï¼Œåˆ™ä¼šå½¢æˆåœ†ã€‚é‚£ä¹ˆå¯èƒ½æœ‰äººå°±ä¼šé—®ï¼Œborder-radiusä¸º100%æ—¶ï¼Œå¯¹åº”åœ†çš„åŠå¾„é•¿åº¦ä¸å°±æ˜¯æ­£æ–¹å½¢çš„å®½é«˜ä¹ˆï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯ä¼š</p><p>å½¢æˆä¸€ä¸ªå’Œå€¼ä¸º50%ä¸€æ ·çš„åœ†å½¢å‘¢ï¼Ÿ</p><hr><a id="more"></a><p>ã€€ã€€å…¶å®è¿™æ˜¯W3Cå¯¹äº<a href="https://www.w3.org/TR/css-backgrounds-3/#corner-overlap" target="_blank" rel="noopener">é‡åˆæ›²çº¿</a>æœ‰è¿™æ ·çš„è§„èŒƒï¼šå¦‚æœä¸¤ä¸ªç›¸é‚»è§’çš„åŠå¾„å’Œè¶…è¿‡äº†å¯¹åº”çš„</p><p>ç›’å­çš„è¾¹çš„é•¿åº¦ï¼Œé‚£ä¹ˆæµè§ˆå™¨è¦é‡æ–°è®¡ç®—ä¿è¯å®ƒä»¬ä¸ä¼šé‡åˆã€‚ä¸‹é¢æˆ‘ä»¬å‡å®šä¸€ä¸ªå®½</p><p>é«˜ä¸º100pxçš„æ­£æ–¹å½¢Aã€‚æ­¤æ—¶è®¾ç½®border-top-left-radius=100%ï¼›åˆ™æ­£æ–¹å½¢Aä¼šå˜æˆä¸€ä¸ªåŠå¾„ä¸º100pxçš„å››åˆ†ä¹‹ä¸€åœ†å¼§ã€‚ </p><p><img src="http://cdn.mydearest.cn/blog/images/radius1.png" alt="radius1"></p><p>ã€€ã€€ç„¶åæˆ‘ä»¬å†ç»™border-top-right-radius=100%ã€‚æ­¤æ—¶ç›¸é‚»çš„è§’çš„åŠå¾„å·²ç»è¶…è¿‡äº†å¯¹åº”çš„ç›’å­çš„è¾¹çš„é•¿åº¦ã€‚æµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—ã€‚é‡æ–°è®¡ç®—çš„è§„åˆ™æ˜¯åŒæ—¶ç¼©æ”¾ä¸¤</p><p>ä¸ªåœ†è§’çš„åŠå¾„çŸ¥é“ä»–ä»¬åˆšå¥½ç¬¦åˆè¿™ä¸ªæ–¹å½¢ã€‚</p><p>ã€€ã€€å»ºè®®ä½¿ç”¨border-radius = 50% æ¥é¿å…æµè§ˆå™¨ä¸å¿…è¦çš„è®¡ç®—ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯åœ¨æ¶‰åŠåˆ°ä¸åœ†è§’ç›¸å…³åŠ¨ç”»çš„æƒ…å†µä¸‹ï¼Œå€¼ä¸º50%å’Œ100%ï¼Œåœ¨åŠ¨ç”»æ•ˆæœä¸Šä¼šæœ‰ä¸åŒã€‚</p><h2 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a>ç¤ºä¾‹ä»£ç </h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>åŠ¨ç”»æ•ˆæœå·®å¼‚<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">div&#123;</span></span><br><span class="line"><span class="undefined">  width: 100px;</span></span><br><span class="line"><span class="undefined">  height: 100px;</span></span><br><span class="line"><span class="undefined">  margin-bottom: 10px;</span></span><br><span class="line"><span class="undefined">  </span></span><br><span class="line"><span class="undefined">  transition: border-radius 3s;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.half</span>&#123;</span></span><br><span class="line"><span class="undefined">  border-radius: 50%;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background</span>: <span class="selector-id">#000</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.full</span>&#123;</span></span><br><span class="line"><span class="undefined">  border-radius: 100%;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">background</span>: <span class="selector-id">#f00</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box1</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">div</span>&#123;</span></span><br><span class="line"><span class="undefined">  border-radius: 0;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.wrap</span>&#123;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">width</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line"><span class="undefined">  height: 250px;</span></span><br><span class="line"><span class="undefined">  border: 1px solid red;</span></span><br><span class="line"><span class="undefined">  cursor: pointer;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box2</span> <span class="selector-class">.half</span>&#123;</span></span><br><span class="line"><span class="undefined">    border-radius: 0;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background</span>: <span class="selector-id">#000</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box2</span> <span class="selector-class">.full</span>&#123;</span></span><br><span class="line"><span class="undefined">    border-radius: 0;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background</span>: <span class="selector-id">#f00</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.box2</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.half</span>&#123;</span></span><br><span class="line"><span class="undefined">  border-radius: 50%;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.box2</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.full</span>&#123;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">border-radius</span><span class="selector-pseudo">:100</span>%</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'wrap box1'</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"half"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"full"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  </span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">'wrap box2'</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"half"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"full"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>å°†é¼ æ ‡ç§»åˆ°çº¢æ¡†å†…<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/borderRadius%E7%99%BE%E5%88%86%E6%AF%9450%E5%92%8C100%E7%A9%B6%E7%AB%9F%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>JSå‡½æ•°åŸºç¡€</title>
      <link>http://mydearest.cn/2019/JS%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80.html</link>
      <guid>http://mydearest.cn/2019/JS%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80.html</guid>
      <pubDate>Tue, 26 Mar 2019 16:27:46 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;å‡½æ•°çš„å®šä¹‰&quot;&gt;&lt;a href=&quot;#å‡½æ•°çš„å®šä¹‰&quot; class=&quot;headerlink&quot; title=&quot;å‡½æ•°çš„å®šä¹‰&quot;&gt;&lt;/a&gt;å‡½æ•°çš„å®šä¹‰&lt;/h2&gt;&lt;p&gt;å‡½æ•°å…¶å®å°±æ˜¯ä¸€ä¸ªå°è£…ä¸€æ®µä»£ç æ®µçš„&lt;strong&gt;å¯¹è±¡&lt;/strong&gt;ï¼Œé‚£å‡½æ•°åå…¶å®ä»…æ˜¯ç”¨æ¥å¼•ç”¨å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªæ™®é€šå˜é‡&lt;/p&gt;
&lt;p&gt;å†™ä»£ç çš„æ—¶å€™æˆ‘ä»¬é¿å…ä¸äº†è¦é‡å¤ç”¨ä¸€äº›ä»£ç ï¼Œä¸€ç›´é‡å¤å†™å¾ˆè€—æ—¶ï¼Œè€Œä¸”ä¸ç¾è§‚ä¹Ÿä¸åˆ©äºç»´æŠ¤ï¼Œå› æ­¤å‡½æ•°çš„å‡ºç°å°±æ˜¯æ¥è®©ä»£ç é‡ç”¨ï¼Œä¾¿äºç»´æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ®µä»£ç ï¼Œå¯èƒ½è¢«åå¤ä½¿ç”¨ï¼Œå¯ä»¥å®šä¹‰ä¸ºå‡½æ•°ï¼Œç„¶åè°ƒç”¨å‡½æ•°æ¥ä½¿ç”¨è¿™æ®µä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨JavaScriptä¸­å‡½æ•°å°±æ˜¯å¯¹è±¡ã€‚å‡½æ•°ä¸åŒäºå…¶ä»–å¯¹è±¡çš„å†³å®šæ€§ç‰¹ç‚¹æ˜¯ï¼Œå‡½æ•°å­˜åœ¨ä¸€ä¸ªè¢«ç§°ä¸º[[Call]]çš„å†…éƒ¨å±æ€§ã€‚å†…éƒ¨å±æ€§æ— æ³•é€šè¿‡ä»£ç è®¿é—®è€Œæ˜¯&lt;/p&gt;
&lt;p&gt;å®šä¹‰äº†ä»£ç æ‰§è¡Œæ—¶çš„è¡Œä¸ºã€‚ECMAScriptä¸ºJavaScriptçš„å¯¹è±¡å®šä¹‰äº†å¤šç§å†…éƒ¨å±æ€§ï¼Œè¿™äº›å†…éƒ¨å±æ€§éƒ½ç”¨åŒé‡ä¸­æ‹¬å·æ¥æ ‡æ³¨ã€‚&lt;/p&gt;
&lt;p&gt;[[Call]]å±æ€§æ˜¯å‡½æ•°ç‹¬æœ‰çš„ï¼Œè¡¨æ˜è¯¥å¯¹è±¡å¯ä»¥è¢«æ‰§è¡Œã€‚ç”±äºä»…å‡½æ•°æ‹¥æœ‰è¯¥å±æ€§ï¼ŒECMAScriptå®šä¹‰äº†typeofæ“ä½œç¬¦å¯¹ä»»ä½•å…·æœ‰[[Call]]å±æ€§çš„å¯¹&lt;/p&gt;
&lt;p&gt;è±¡è¿”å› &lt;code&gt;[object Function]&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="å‡½æ•°çš„å®šä¹‰"><a href="#å‡½æ•°çš„å®šä¹‰" class="headerlink" title="å‡½æ•°çš„å®šä¹‰"></a>å‡½æ•°çš„å®šä¹‰</h2><p>å‡½æ•°å…¶å®å°±æ˜¯ä¸€ä¸ªå°è£…ä¸€æ®µä»£ç æ®µçš„<strong>å¯¹è±¡</strong>ï¼Œé‚£å‡½æ•°åå…¶å®ä»…æ˜¯ç”¨æ¥å¼•ç”¨å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªæ™®é€šå˜é‡</p><p>å†™ä»£ç çš„æ—¶å€™æˆ‘ä»¬é¿å…ä¸äº†è¦é‡å¤ç”¨ä¸€äº›ä»£ç ï¼Œä¸€ç›´é‡å¤å†™å¾ˆè€—æ—¶ï¼Œè€Œä¸”ä¸ç¾è§‚ä¹Ÿä¸åˆ©äºç»´æŠ¤ï¼Œå› æ­¤å‡½æ•°çš„å‡ºç°å°±æ˜¯æ¥è®©ä»£ç é‡ç”¨ï¼Œä¾¿äºç»´æŠ¤ã€‚</p><p>ä¸€æ®µä»£ç ï¼Œå¯èƒ½è¢«åå¤ä½¿ç”¨ï¼Œå¯ä»¥å®šä¹‰ä¸ºå‡½æ•°ï¼Œç„¶åè°ƒç”¨å‡½æ•°æ¥ä½¿ç”¨è¿™æ®µä»£ç ã€‚</p><p>åœ¨JavaScriptä¸­å‡½æ•°å°±æ˜¯å¯¹è±¡ã€‚å‡½æ•°ä¸åŒäºå…¶ä»–å¯¹è±¡çš„å†³å®šæ€§ç‰¹ç‚¹æ˜¯ï¼Œå‡½æ•°å­˜åœ¨ä¸€ä¸ªè¢«ç§°ä¸º[[Call]]çš„å†…éƒ¨å±æ€§ã€‚å†…éƒ¨å±æ€§æ— æ³•é€šè¿‡ä»£ç è®¿é—®è€Œæ˜¯</p><p>å®šä¹‰äº†ä»£ç æ‰§è¡Œæ—¶çš„è¡Œä¸ºã€‚ECMAScriptä¸ºJavaScriptçš„å¯¹è±¡å®šä¹‰äº†å¤šç§å†…éƒ¨å±æ€§ï¼Œè¿™äº›å†…éƒ¨å±æ€§éƒ½ç”¨åŒé‡ä¸­æ‹¬å·æ¥æ ‡æ³¨ã€‚</p><p>[[Call]]å±æ€§æ˜¯å‡½æ•°ç‹¬æœ‰çš„ï¼Œè¡¨æ˜è¯¥å¯¹è±¡å¯ä»¥è¢«æ‰§è¡Œã€‚ç”±äºä»…å‡½æ•°æ‹¥æœ‰è¯¥å±æ€§ï¼ŒECMAScriptå®šä¹‰äº†typeofæ“ä½œç¬¦å¯¹ä»»ä½•å…·æœ‰[[Call]]å±æ€§çš„å¯¹</p><p>è±¡è¿”å› <code>[object Function]</code></p><hr><a id="more"></a><h2 id="å‡½æ•°çš„åˆ›å»º"><a href="#å‡½æ•°çš„åˆ›å»º" class="headerlink" title="å‡½æ•°çš„åˆ›å»º"></a>å‡½æ•°çš„åˆ›å»º</h2><p><strong>function å£°æ˜</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> å‡½æ•°å(<span class="params">å‚æ•°åˆ—è¡¨</span>) </span>&#123;</span><br><span class="line">  å‡½æ•°ä½“;</span><br><span class="line">  <span class="keyword">return</span> è¿”å›å€¼;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ç›´æ¥é‡å£°æ˜</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> å‡½æ•°å = <span class="function"><span class="keyword">function</span>(<span class="params">å‚æ•°åˆ—è¡¨</span>) </span>&#123;</span><br><span class="line">  å‡½æ•°ä½“;</span><br><span class="line">  <span class="keyword">return</span> è¿”å›å€¼;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>ç”¨ new åˆ›å»º</strong></p><p>å› ä¸º Function æ˜¯å†…ç½®ç±»å‹ï¼Œæœ¬èº«æœ‰ä¸€ä¸ª Function çš„æ„é€ å‡½æ•°ï¼Œæ˜¯å†…ç½®ç±»å‹ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥ <code>new</code> çš„</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> å‡½æ•°å = <span class="keyword">new</span> <span class="built_in">Function</span>(<span class="string">"å‚æ•°å1"</span>,<span class="string">"å‚æ•°å2"</span>,...,<span class="string">"å‡½æ•°ä½“; return è¿”å›å€¼"</span>)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæ³¨æ„ï¼Œå‚æ•°å’Œå‡½æ•°ä½“éƒ½è¦ç”¨å¼•å·å¼•èµ·æ¥ï¼Œä½†æ˜¯ä¸€èˆ¬å‡½æ•°çš„åˆ›å»ºéƒ½ä¸ä¼šè¿™æ ·åˆ›å»ºï¼Œä»¥å‰é¢çš„ä¸¤ç§ä¸ºä¸»ï¼Œé‚£å…¶å®å‰é¢ä¸¤ç§çš„åˆ›å»ºæ˜¯å­˜åœ¨ä¸€å®šçš„å·®åˆ«çš„ï¼Œä¸‹é¢ä¼šæåˆ°</p><h2 id="å‡½æ•°çš„å‚æ•°"><a href="#å‡½æ•°çš„å‚æ•°" class="headerlink" title="å‡½æ•°çš„å‚æ•°"></a>å‡½æ•°çš„å‚æ•°</h2><p>å‡½æ•°æ‰§è¡Œæ—¶å¿…é¡»çš„æ•°æ®å˜é‡ï¼Œå®ƒåˆ†ä¸ºæ˜¾ç¤ºå‚æ•°(Parameters)ä¸éšå¼å‚æ•°(Arguments)</p><h3 id="æ˜¾ç¤ºå‚æ•°"><a href="#æ˜¾ç¤ºå‚æ•°" class="headerlink" title="æ˜¾ç¤ºå‚æ•°"></a>æ˜¾ç¤ºå‚æ•°</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">name, id</span>) </span>&#123;</span><br><span class="line">  <span class="comment">//å‡½æ•°ä½“</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§ç›´æ¥ä¼ è¿›æ¥çš„ name å’Œ id å°±æ˜¯æ˜¾ç¤ºå‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä½ èƒ½çœ‹åˆ°çš„ã€‚å…¶å®å‡½æ•°ä¼ é€’çš„å‚æ•°å°±ç›¸å½“äºåœ¨å‡½æ•°ä½“å†…åˆå£°æ˜äº†ä¸€ä¸ªå±€éƒ¨å˜é‡</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">  i++;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line">fun(i);</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä»£ç ï¼Œå°±ç›¸å½“äºä¸‹é¢çš„ä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> i = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> i = <span class="number">10</span>; <span class="comment">//è¿™ä¸ªå€¼å°±æ˜¯ä¼ è¿›æ¥çš„å‚æ•°çš„å€¼</span></span><br><span class="line">  i++;</span><br><span class="line">  <span class="built_in">console</span>.log(i);</span><br><span class="line">&#125;</span><br><span class="line">fun(i); <span class="comment">//åœ¨æ­¤å¤„ä¼ å…¥i</span></span><br></pre></td></tr></table></figure><h3 id="éšå¼å‚æ•°"><a href="#éšå¼å‚æ•°" class="headerlink" title="éšå¼å‚æ•°"></a>éšå¼å‚æ•°</h3><p>æ¯ä¸ª JavaScript å‡½æ•°å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªå¯¹è±¡ <code>arguments</code> å¯¹è±¡,å…¶å®æ˜¯ä¸€ä¸ªç±»æ•°ç»„çš„å¯¹è±¡,å®ƒä¼šè‡ªåŠ¨æ¥å—æ‰€æœ‰ä¼ å…¥å‡½æ•°çš„å‚æ•°å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">          </span>) </span>&#123;</span><br><span class="line">  <span class="comment">//arguments[          ]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å€¼å¾—ä¸€è¯´çš„æ˜¯,<code>arguments</code> æœ‰ä¸‹æ ‡æœ‰é•¿åº¦ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è·å¾—ä¼ å…¥çš„å‚æ•°ï¼Œæ¯”å¦‚ <code>arguments[0]</code> å°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°, <code>length</code> å°±å¯ä»¥éå†è¿™ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œä½†æ˜¯ï¼Œæ¯•ç«Ÿå®ƒä¸æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥ä¸èƒ½è¿›è¡Œä¸€äº›æ•°ç»„ç‰¹æœ‰çš„æ“ä½œï¼Œæ¯”å¦‚ <code>sort</code></p><h3 id="å‡½æ•°é‡è½½"><a href="#å‡½æ•°é‡è½½" class="headerlink" title="å‡½æ•°é‡è½½"></a>å‡½æ•°é‡è½½</h3><p>å¼ºç±»å‹è¯­è¨€å¯¹é‡è½½çš„å®šä¹‰ï¼šå‡½æ•°åç›¸åŒï¼Œå‚æ•°ä¸åŒï¼Œæˆ–è€…æ˜¯å‚æ•°ç±»å‹ä¸åŒéƒ½å¯ä»¥å«åšå‡½æ•°çš„é‡è½½ã€‚</p><p>ä½†åœ¨jsä¸­å› ä¸º arguments çš„å­˜åœ¨ï¼ŒJavaScriptçš„å‡½æ•°æ ¹æœ¬å°±ä¸å­˜åœ¨æ‰€è°“çš„ç­¾åï¼Œæ‰€ä»¥é‡è½½åœ¨JavaScriptä¸­å®é™…æ˜¯ä¸å­˜åœ¨çš„ã€‚<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ¨¡æ‹Ÿå‡½æ•°é‡è½½</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">abc</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length ===<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="comment">//A</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">arguments</span>.length ===<span class="number">2</span>)&#123;</span><br><span class="line">        <span class="comment">//B</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">abc(<span class="number">11</span>);</span><br><span class="line">abc(<span class="number">11</span>,<span class="number">22</span>);</span><br></pre></td></tr></table></figure></p><h2 id="å£°æ˜æå‰"><a href="#å£°æ˜æå‰" class="headerlink" title="å£°æ˜æå‰"></a>å£°æ˜æå‰</h2><p>åœ¨å¼€å§‹æ‰§è¡Œç¨‹åºå‰,js å¼•æ“ä¼šé¦–å…ˆæŸ¥æ‰¾ <code>var</code> å£°æ˜çš„å˜é‡å’Œ <code>function</code> å£°æ˜çš„å‡½æ•°ï¼Œå°†å…¶æå‰åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨é›†ä¸­åˆ›å»ºï¼Œè€Œå°†èµ‹å€¼æ“ä½œä¿ç•™åœ¨åŸåœ°,è¿™é‡Œç‰¹åˆ«è¯´ä¸€ä¸‹,æœªç”¨ <code>var</code> å£°æ˜çš„å˜é‡ä¸ä¼šå£°æ˜æå‰.</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//a is not defined</span></span><br><span class="line">a = <span class="number">10</span>;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//undefined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//10</span></span><br></pre></td></tr></table></figure><p>ä½†æ˜¯åœ¨å®ƒä¸‹é¢å£°æ˜å¹¶èµ‹å€¼å˜é‡ <code>a</code>,å› ä¸ºå£°æ˜æå‰,å…¶å®ä»£ç ä¼šå˜æˆä¸‹é¢è¿™ä¸ªæ ·å­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br><span class="line">a = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure><p>è¿™æ ·çœ‹ï¼Œä¸€åˆ‡éƒ½å˜å¾—å¾ˆåˆç†ã€‚ã€‚</p><p>å‡½æ•°ä¹Ÿæ˜¯ä¸€æ ·</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line">fun(); <span class="comment">//2</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line">fun(); <span class="comment">//2</span></span><br></pre></td></tr></table></figure><p>æ§åˆ¶å°ä¼šè¾“å‡ºä¸¤ä¸ª 2,å› ä¸º function å£°æ˜çš„å‡½æ•°ä¹Ÿä¼šå£°æ˜æå‰,ä»£ç å…¶å®æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line">fun(); <span class="comment">//2</span></span><br><span class="line">fun(); <span class="comment">//2</span></span><br></pre></td></tr></table></figure><p>ç¬¬äºŒæ¬¡å£°æ˜å› ä¸ºæ–¹æ³•åå­—ä¸€æ ·ï¼Œåè€…è¦†ç›–äº†å‰è€…ï¼Œæ‰€ä»¥å†è°ƒç”¨çš„æ—¶å€™å°±ä¼šè°ƒç”¨æœ€åè¿™ä¸ª</p><p>ä½†æ˜¯å£°æ˜æå‰ä¼šå¢åŠ ç¨‹åºè§£è¯»çš„éš¾åº¦ï¼Œå› æ­¤æˆ‘ä»¬åœ¨å†™ç¨‹åºæ—¶ï¼Œå°½é‡é¿å…å£°æ˜æå‰æ‰€å¸¦æ¥çš„å±å®³</p><h3 id="å£°æ˜æå‰çš„è§£å†³æ–¹æ³•"><a href="#å£°æ˜æå‰çš„è§£å†³æ–¹æ³•" class="headerlink" title="å£°æ˜æå‰çš„è§£å†³æ–¹æ³•"></a>å£°æ˜æå‰çš„è§£å†³æ–¹æ³•</h3><p>é‚£æˆ‘ä»¬æ—¢ç„¶çŸ¥é“ä¼šæœ‰å£°æ˜æå‰è¿™ç§æ“ä½œï¼Œå°±åœ¨å˜é‡å’Œå‡½æ•°çš„å£°æ˜æ—¶éƒ½æ”¾åœ¨å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚</p><p>åœ¨ ES6 ä¸­ å¯ä»¥ç”¨ let ä»£æ›¿ var,ä¸è¿‡è¦æ±‚åœ¨å½“å‰ä½œç”¨åŸŸä¸­ let å˜é‡ä¹‹å‰ä¸å…è®¸å‡ºç°å£°æ˜çš„å˜é‡</p><p>ä¹Ÿå¯ä»¥ç”¨ç›´æ¥é‡å£°æ˜å˜é‡çš„æ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br><span class="line">fun(); <span class="comment">//1</span></span><br><span class="line"><span class="keyword">var</span> fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;;</span><br><span class="line">fun(); <span class="comment">//2</span></span><br></pre></td></tr></table></figure><p>è¿™ç§å½“ç„¶ä¹Ÿä¼šå£°æ˜æå‰ï¼Œé‚£æˆ‘ä»¬çœ‹ä¸€ä¸‹å£°æ˜æå‰åçš„ä»£ç </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fun;</span><br><span class="line"><span class="keyword">var</span> fun;</span><br><span class="line">fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br><span class="line">fun(); <span class="comment">//1</span></span><br><span class="line">fun = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;;</span><br><span class="line">fun(); <span class="comment">//2</span></span><br></pre></td></tr></table></figure><p>å£°æ˜æå‰ä½†æ˜¯èµ‹å€¼è¿˜æ˜¯ç•™åœ¨åŸåœ°ï¼Œæ‰€ä»¥è™½ç„¶æœ‰å£°æ˜æå‰ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæ”¹å˜æˆ‘ä»¬åŸæœ¬æƒ³è¦çš„ç»“æœã€‚ä¹Ÿå°±è§£å†³äº†å£°æ˜æå‰å¸¦æ¥çš„å±å®³ã€‚</p><h2 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h2><p>å‡½æ•°åˆ›å»ºæ—¶æ²¡æœ‰æŒ‡å®šå‡½æ•°å</p><p>åŒ¿åå‡½æ•°ä½¿ç”¨åè‡ªåŠ¨é‡Šæ”¾,ä¼šèŠ‚çº¦å†…å­˜,å®ƒä¼šåˆ’åˆ†ä¸´æ—¶ä½œç”¨åŸŸï¼Œé¿å…å…¨å±€å˜é‡æ±¡æŸ“å…¨å±€ã€‚</p><h3 id="ç”¨å¤„"><a href="#ç”¨å¤„" class="headerlink" title="ç”¨å¤„"></a>ç”¨å¤„</h3><p><strong>callback</strong></p><p>å°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°å†…ï¼Œè¢«å…¶å®ƒå‡½æ•°è°ƒç”¨</p><p>ä¸¾ä¸ªæ —å­ğŸŒ°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.replace(<span class="regexp">/reg/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">kw,$<span class="number">1</span>,$<span class="number">2</span>,...</span>)</span>&#123;<span class="keyword">return</span> æ›¿æ¢å€¼&#125;)</span><br></pre></td></tr></table></figure><h4 id="è‡ªè°ƒ"><a href="#è‡ªè°ƒ" class="headerlink" title="è‡ªè°ƒ"></a>è‡ªè°ƒ</h4><p>å®šä¹‰å‡½æ•°åè‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œè°ƒç”¨ç»“æŸåï¼Œç«‹åˆ»é‡Šæ”¾ï¼Œä¸å å†…å­˜</p><p>ä¸¾ä¸ªä¾‹å­ğŸŒ°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">å‚æ•°åˆ—è¡¨</span>) </span>&#123;</span><br><span class="line">  å‡½æ•°ä½“;</span><br><span class="line">  <span class="keyword">return</span> è¿”å›å€¼;</span><br><span class="line">&#125;)(å‚æ•°å€¼åˆ—è¡¨);</span><br></pre></td></tr></table></figure><p>ä¼šå®šä¹‰ä¸€ä¸ªä¸´æ—¶çš„ä½œç”¨åŸŸï¼Œå‡å°‘ä½¿ç”¨å…¨å±€å˜é‡ï¼Œé¿å…å…¨å±€æ±¡æŸ“ã€‚</p><h2 id="é‡è½½"><a href="#é‡è½½" class="headerlink" title="é‡è½½"></a>é‡è½½</h2><p>ç›¸åŒå‡½æ•°åï¼Œä¸åŒå‚æ•°åˆ—è¡¨çš„å¤šä¸ªå‡½æ•°ã€‚åœ¨è°ƒç”¨æ—¶ï¼Œæ ¹æ®ä¼ å…¥å‚æ•°çš„ä¸åŒï¼Œè‡ªåŠ¨é€‰æ‹©åŒ¹é…çš„å‡½æ•°æ‰§è¡Œã€‚</p><p>è¿™æ ·å¯ä»¥å‡å°‘ api çš„æ•°é‡ï¼Œå‡è½»è°ƒç”¨è€…çš„è´Ÿæ‹…ã€‚</p><p>å¬èµ·æ¥å¾ˆè¯±äººï¼Œä½†æ˜¯ js è¯­æ³•ä¸æ”¯æŒé‡è½½ï¼ŒåŸå› æ˜¯ js ä¸å…è®¸å¤šä¸ªåŒåå‡½æ•°åŒæ—¶å­˜åœ¨ï¼Œåå£°æ˜çš„å‡½æ•°ä¼šè¦†ç›–å‰é¢å£°æ˜çš„ã€‚(å“‡ã€‚js ä¸æ”¯æŒä½ åœ¨è¿™é‡Œè¯´ä»€ä¹ˆï¼Œç¥ç»ç—…å•Š).</p><p>æ—¢ç„¶è¯´é‡è½½ï¼Œé‚£è‚¯å®šæ˜¯å¯ä»¥é€šè¿‡æŸäº›æ–¹æ³•å®ç°çš„ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯åˆ©ç”¨ <code>arguments</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">arguments</span>.length == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">//ä¸ä¼ å€¼çš„æ“ä½œ</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">arguments</span>.length == <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">//ä¼ ä¸€ä¸ªå€¼è¿›è¡Œçš„æ“ä½œ</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//....ç­‰ç­‰</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…¶å®ä¹Ÿä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„é‡è½½ï¼Œå› ä¸ºå¹¶æ²¡æœ‰åˆ›å»ºåŒåçš„å¤šä¸ªå‡½æ•°ï¼Œä½†æ˜¯å®ç°çš„æ•ˆæœæ˜¯å’Œé‡è½½å·®ä¸å¤šçš„ã€‚</p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/JS%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>NodeJSHttpåŠ è½½é™æ€èµ„æº</title>
      <link>http://mydearest.cn/2019/NodeJSHttp%E5%8A%A0%E8%BD%BD%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90.html</link>
      <guid>http://mydearest.cn/2019/NodeJSHttp%E5%8A%A0%E8%BD%BD%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90.html</guid>
      <pubDate>Mon, 11 Mar 2019 16:36:52 GMT</pubDate>
      <description>
      
        &lt;p&gt;é—®é¢˜åœºæ™¯ï¼šæµè§ˆå™¨å‘åå°å‘é€è¯·æ±‚åï¼Œåå°è¿”å›ä¸€ä¸ªhtmlç•Œé¢ã€‚ä½†æ˜¯åœ¨æµè§ˆå™¨ä¸­æ²¡æœ‰åŠ è½½jsã€cssç­‰é™æ€èµ„æºï¼ŒæŸ¥æ‰¾åŸå› åå‘ç°æ˜¯Content-Typeçš„åŸå› ã€‚æµè§ˆå™¨ä¸çŸ¥é“cssã€jsç­‰æ–‡ä»¶çš„æ–‡ä»¶æ ¼å¼ï¼Œæ— æ³•æˆåŠŸåŠ è½½é™æ€æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œéœ€è¦è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æ ¼å¼ã€‚&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>é—®é¢˜åœºæ™¯ï¼šæµè§ˆå™¨å‘åå°å‘é€è¯·æ±‚åï¼Œåå°è¿”å›ä¸€ä¸ªhtmlç•Œé¢ã€‚ä½†æ˜¯åœ¨æµè§ˆå™¨ä¸­æ²¡æœ‰åŠ è½½jsã€cssç­‰é™æ€èµ„æºï¼ŒæŸ¥æ‰¾åŸå› åå‘ç°æ˜¯Content-Typeçš„åŸå› ã€‚æµè§ˆå™¨ä¸çŸ¥é“cssã€jsç­‰æ–‡ä»¶çš„æ–‡ä»¶æ ¼å¼ï¼Œæ— æ³•æˆåŠŸåŠ è½½é™æ€æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œéœ€è¦è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æ ¼å¼ã€‚</p><hr><a id="more"></a><h2 id="æ­å»ºç®€å•çš„æœ¬åœ°æœåŠ¡"><a href="#æ­å»ºç®€å•çš„æœ¬åœ°æœåŠ¡" class="headerlink" title="æ­å»ºç®€å•çš„æœ¬åœ°æœåŠ¡"></a>æ­å»ºç®€å•çš„æœ¬åœ°æœåŠ¡</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);<span class="comment">//å¼•å…¥httpæ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼€å¯æœåŠ¡ï¼Œç›‘å¬8888ç«¯å£</span></span><br><span class="line"><span class="comment">//ç«¯å£å·æœ€å¥½ä¸º6000ä»¥ä¸Š</span></span><br><span class="line"><span class="keyword">var</span> server = http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        reqç”¨æ¥æ¥å—å®¢æˆ·ç«¯æ•°æ®</span></span><br><span class="line"><span class="comment">        resç”¨æ¥å‘å®¢æˆ·ç«¯å‘é€æœåŠ¡å™¨æ•°æ®</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'æœ‰å®¢æˆ·ç«¯è¿æ¥'</span>);<span class="comment">//åˆ›å»ºè¿æ¥æˆåŠŸæ˜¾ç¤ºåœ¨åå°</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//ä¸€å‚æ˜¯httpè¯·æ±‚çŠ¶æ€ï¼Œ200è¿æ¥æˆåŠŸ</span></span><br><span class="line">    <span class="comment">//è¿æ¥æˆåŠŸåå‘å®¢æˆ·ç«¯å†™å…¥å¤´ä¿¡æ¯</span></span><br><span class="line">    res.writeHeader(<span class="number">200</span>,&#123;</span><br><span class="line">        <span class="string">'content-type'</span> : <span class="string">'text/html;charset="utf-8"'</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    res.write(<span class="string">'è¿™æ˜¯æ­£æ–‡éƒ¨åˆ†'</span>);<span class="comment">//æ˜¾ç¤ºç»™å®¢æˆ·ç«¯</span></span><br><span class="line">    res.end();</span><br><span class="line"></span><br><span class="line">&#125;).listen(<span class="number">8888</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'æœåŠ¡å™¨å¼€å¯æˆåŠŸ'</span>);</span><br></pre></td></tr></table></figure><h2 id="è®¿é—®æœ¬åœ°ç«™ç‚¹"><a href="#è®¿é—®æœ¬åœ°ç«™ç‚¹" class="headerlink" title="è®¿é—®æœ¬åœ°ç«™ç‚¹"></a>è®¿é—®æœ¬åœ°ç«™ç‚¹</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);<span class="comment">//å¼•å…¥æ–‡ä»¶è¯»å–æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> documentRoot = <span class="string">'E:/PhpProject/html5/websocket/www'</span>;</span><br><span class="line"><span class="comment">//éœ€è¦è®¿é—®çš„æ–‡ä»¶çš„å­˜æ”¾ç›®å½•</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server= http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> url = req.url; </span><br><span class="line">    <span class="comment">//å®¢æˆ·ç«¯è¾“å…¥çš„urlï¼Œä¾‹å¦‚å¦‚æœè¾“å…¥localhost:8888/index.html</span></span><br><span class="line">    <span class="comment">//é‚£ä¹ˆè¿™é‡Œçš„url == /index.html </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> file = documentRoot + url;</span><br><span class="line">    <span class="built_in">console</span>.log(url);</span><br><span class="line">    <span class="comment">//E:/PhpProject/html5/websocket/www/index.html </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    fs.readFile( file , <span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸€å‚ä¸ºæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="comment">        äºŒå‚ä¸ºå›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">            å›è°ƒå‡½æ•°çš„ä¸€å‚ä¸ºè¯»å–é”™è¯¯è¿”å›çš„ä¿¡æ¯ï¼Œè¿”å›ç©ºå°±æ²¡æœ‰é”™è¯¯</span></span><br><span class="line"><span class="comment">            äºŒå‚ä¸ºè¯»å–æˆåŠŸè¿”å›çš„æ–‡æœ¬å†…å®¹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            res.writeHeader(<span class="number">404</span>,&#123;</span><br><span class="line">                <span class="string">'content-type'</span> : <span class="string">'text/html;charset="utf-8"'</span></span><br><span class="line">            &#125;);</span><br><span class="line">            res.write(<span class="string">'&lt;h1&gt;404é”™è¯¯&lt;/h1&gt;&lt;p&gt;ä½ è¦æ‰¾çš„é¡µé¢ä¸å­˜åœ¨&lt;/p&gt;'</span>);</span><br><span class="line">            res.end();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            res.writeHeader(<span class="number">200</span>,&#123;</span><br><span class="line">                <span class="string">'content-type'</span> : <span class="string">'text/html;charset="utf-8"'</span></span><br><span class="line">            &#125;);</span><br><span class="line">            res.write(data);<span class="comment">//å°†index.htmlæ˜¾ç¤ºåœ¨å®¢æˆ·ç«¯</span></span><br><span class="line">            res.end();</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;).listen(<span class="number">8888</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'æœåŠ¡å™¨å¼€å¯æˆåŠŸ'</span>);</span><br></pre></td></tr></table></figure><h2 id="æ— æ³•åŠ è½½é™æ€æ–‡ä»¶"><a href="#æ— æ³•åŠ è½½é™æ€æ–‡ä»¶" class="headerlink" title="æ— æ³•åŠ è½½é™æ€æ–‡ä»¶"></a>æ— æ³•åŠ è½½é™æ€æ–‡ä»¶</h2><h3 id="è§£å†³æ–¹æ¡ˆä¸€"><a href="#è§£å†³æ–¹æ¡ˆä¸€" class="headerlink" title="è§£å†³æ–¹æ¡ˆä¸€"></a>è§£å†³æ–¹æ¡ˆä¸€</h3><ul><li>æ‰‹åŠ¨è®¾ç½®Content-Type<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);<span class="comment">//å¼•å…¥æ–‡ä»¶è¯»å–æ¨¡å—</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> documentRoot = <span class="string">'./dist'</span>;</span><br><span class="line"><span class="comment">//éœ€è¦è®¿é—®çš„æ–‡ä»¶çš„å­˜æ”¾ç›®å½•</span></span><br><span class="line"></span><br><span class="line">http.createServer(<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> url = req.url; </span><br><span class="line">    <span class="comment">//å®¢æˆ·ç«¯è¾“å…¥çš„urlï¼Œä¾‹å¦‚å¦‚æœè¾“å…¥localhost:8888/index.html</span></span><br><span class="line">    <span class="comment">//é‚£ä¹ˆè¿™é‡Œçš„url == /index.html </span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> file = documentRoot + url;</span><br><span class="line">    <span class="built_in">console</span>.log(file);</span><br><span class="line"></span><br><span class="line">    fs.readFile(file , <span class="function"><span class="keyword">function</span>(<span class="params">err,data</span>)</span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        ä¸€å‚ä¸ºæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="comment">        äºŒå‚ä¸ºå›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="comment">            å›è°ƒå‡½æ•°çš„ä¸€å‚ä¸ºè¯»å–é”™è¯¯è¿”å›çš„ä¿¡æ¯ï¼Œè¿”å›ç©ºå°±æ²¡æœ‰é”™è¯¯</span></span><br><span class="line"><span class="comment">            äºŒå‚ä¸ºè¯»å–æˆåŠŸè¿”å›çš„æ–‡æœ¬å†…å®¹</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            res.writeHeader(<span class="number">404</span>,&#123;</span><br><span class="line">                <span class="string">'content-type'</span> : <span class="string">'text/html;charset="utf-8"'</span></span><br><span class="line">            &#125;);</span><br><span class="line">            res.write(<span class="string">'&lt;h1&gt;404é”™è¯¯&lt;/h1&gt;&lt;p&gt;ä½ è¦æ‰¾çš„é¡µé¢ä¸å­˜åœ¨&lt;/p&gt;'</span>);</span><br><span class="line">            res.end();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> type = file.substr(file.lastIndexOf(<span class="string">"."</span>)+<span class="number">1</span>,file.length)</span><br><span class="line">            res.writeHeader(<span class="number">200</span>,&#123;<span class="string">'Content-type'</span>:<span class="string">"text/"</span>+type+<span class="string">';charset="utf-8"'</span>&#125;);<span class="comment">//åœ¨è¿™é‡Œè®¾ç½®æ–‡ä»¶ç±»å‹ï¼Œå‘Šè¯‰æµè§ˆå™¨è§£ææ–¹å¼</span></span><br><span class="line">            <span class="comment">// æ ¹æ®åç¼€ååˆ¤æ–­æ–‡ä»¶ç±»å‹ä¸å¤ªå‡†ç¡® å¯ä»¥ä½¿ç”¨mimeæ¨¡å— mime.getType(filePath)</span></span><br><span class="line">            res.write(data);<span class="comment">//å°†index.htmlæ˜¾ç¤ºåœ¨å®¢æˆ·ç«¯</span></span><br><span class="line">            res.end();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;).listen(<span class="number">8888</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'æœåŠ¡å™¨å¼€å¯æˆåŠŸ'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// // æ‰‹åŠ¨è®¾ç½®content-type</span></span><br><span class="line"><span class="comment">// http.createServer(function(req,res)&#123;</span></span><br><span class="line"><span class="comment">// var path = req.url;</span></span><br><span class="line"><span class="comment">// console.log("path: "+path)</span></span><br><span class="line"><span class="comment">// if(path == "/")&#123;</span></span><br><span class="line"><span class="comment">// path = "/index.html";</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// sendFile(res,path);</span></span><br><span class="line"><span class="comment">// &#125;).listen(8888)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// function sendFile(res,path)&#123;</span></span><br><span class="line"><span class="comment">//   var path = process.cwd()+'/dist'+path;</span></span><br><span class="line"><span class="comment">// fs.readFile(path,function(err,stdout,stderr)&#123;</span></span><br><span class="line"><span class="comment">// if(!err)&#123;</span></span><br><span class="line"><span class="comment">// var data = stdout;</span></span><br><span class="line"><span class="comment">// var type = path.substr(path.lastIndexOf(".")+1,path.length)</span></span><br><span class="line"><span class="comment">// res.writeHead(200,&#123;'Content-type':"text/"+type+';charset="utf-8"'&#125;);//åœ¨è¿™é‡Œè®¾ç½®æ–‡ä»¶ç±»å‹ï¼Œå‘Šè¯‰æµè§ˆå™¨è§£ææ–¹å¼</span></span><br><span class="line"><span class="comment">// res.write(data);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// res.end();</span></span><br><span class="line"><span class="comment">//   &#125;)</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="è§£å†³æ–¹æ¡ˆäºŒ"><a href="#è§£å†³æ–¹æ¡ˆäºŒ" class="headerlink" title="è§£å†³æ–¹æ¡ˆäºŒ"></a>è§£å†³æ–¹æ¡ˆäºŒ</h3><ul><li>ä½¿ç”¨mimeæ¨¡å—ï¼Œnpm install mime.</li><li>mime.getType(filePath)</li></ul>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/NodeJSHttp%E5%8A%A0%E8%BD%BD%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>switchçš„å—çº§ä½œç”¨åŸŸ</title>
      <link>http://mydearest.cn/2019/switch%E7%9A%84%E5%9D%97%E7%BA%A7%E4%BD%9C%E7%94%A8%E5%9F%9F.html</link>
      <guid>http://mydearest.cn/2019/switch%E7%9A%84%E5%9D%97%E7%BA%A7%E4%BD%9C%E7%94%A8%E5%9F%9F.html</guid>
      <pubDate>Sat, 09 Mar 2019 16:21:30 GMT</pubDate>
      <description>
      
        &lt;p&gt;ES6 æˆ– TS å¼•å…¥äº†å—çº§ä½œç”¨åŸŸ,é€šè¿‡letå’Œconstã€classç­‰å¯ä»¥å®šä¹‰å—çº§ä½œç”¨åŸŸé‡Œçš„å˜é‡ï¼Œå—çº§ä½œç”¨åŸŸå†…çš„å˜é‡ä¸å­˜åœ¨å˜é‡æå‡ï¼Œä¸”å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºã€‚å¸¸è§çš„ifè¯­å¥ï¼Œforå¾ªç¯çš„å¾ªç¯ä½“å†…éƒ½å¯ä»¥å®šä¹‰å—çº§å˜é‡ã€‚é‚£ä¹ˆswitchè¯­å¥ä¸­çš„å—çº§ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å…ˆç»™å‡ºç»“è®ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;switchè¯­å¥ä¸­çš„å—çº§ä½œç”¨åŸŸï¼Œåœ¨æ•´ä¸ªswitchè¯­å¥ä¸­ï¼Œè€Œä¸æ˜¯å¯¹äºæ¯ä¸€ä¸ªcaseç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„å—çº§ä½œç”¨åŸŸã€‚&lt;/code&gt;&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>ES6 æˆ– TS å¼•å…¥äº†å—çº§ä½œç”¨åŸŸ,é€šè¿‡letå’Œconstã€classç­‰å¯ä»¥å®šä¹‰å—çº§ä½œç”¨åŸŸé‡Œçš„å˜é‡ï¼Œå—çº§ä½œç”¨åŸŸå†…çš„å˜é‡ä¸å­˜åœ¨å˜é‡æå‡ï¼Œä¸”å­˜åœ¨æš‚æ—¶æ€§æ­»åŒºã€‚å¸¸è§çš„ifè¯­å¥ï¼Œforå¾ªç¯çš„å¾ªç¯ä½“å†…éƒ½å¯ä»¥å®šä¹‰å—çº§å˜é‡ã€‚é‚£ä¹ˆswitchè¯­å¥ä¸­çš„å—çº§ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å…ˆç»™å‡ºç»“è®ºï¼š</p><p><code>switchè¯­å¥ä¸­çš„å—çº§ä½œç”¨åŸŸï¼Œåœ¨æ•´ä¸ªswitchè¯­å¥ä¸­ï¼Œè€Œä¸æ˜¯å¯¹äºæ¯ä¸€ä¸ªcaseç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„å—çº§ä½œç”¨åŸŸã€‚</code></p><hr><a id="more"></a><p>ä¸¾ä¸ªæ —å­ğŸŒ°<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">switch</span>(number)&#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">'cosyer'</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    <span class="built_in">console</span>.log(name)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// cosyer</span></span><br></pre></td></tr></table></figure></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">switch</span>(number)&#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">'cosyer'</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">'yu'</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">   <span class="built_in">console</span>.log(name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Uncaught SyntaxError: Identifier 'name' has already been declared</span></span><br></pre></td></tr></table></figure><h2 id="å¯èƒ½å­˜åœ¨çš„é—®é¢˜"><a href="#å¯èƒ½å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="å¯èƒ½å­˜åœ¨çš„é—®é¢˜"></a>å¯èƒ½å­˜åœ¨çš„é—®é¢˜</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">switch</span>(number)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span> : name = <span class="string">'cosyer'</span>; <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// nameè™½ç„¶æ²¡æœ‰å£°æ˜ï¼Œä½†æ˜¯ç»™nameèµ‹å€¼ç›¸å½“äºç»™å…¨å±€çš„windowå¯¹è±¡å¤åˆ¶ï¼Œä¹Ÿå°±æ˜¯window.name = 'cosyer'ã€‚</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> number = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">switch</span>(number)&#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">    <span class="keyword">let</span> name = <span class="string">'cosyer'</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">    name = <span class="string">'yu'</span>;</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Uncaught ReferenceError: name is not defined</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œè™½ç„¶caseé‡Œé¢å®šä¹‰çš„å—çº§è™½ç„¶ä¸ä¼šå­˜åœ¨å˜é‡æå‡ï¼Œä½†æ˜¯ä¼šå­˜åœ¨æš‚æ—¶æ€§æ­»åŒº,ä¹Ÿå°±æ˜¯è¯´å¦‚æœlet name = â€˜cosyerâ€™ æ²¡æœ‰æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯nameå®šä¹‰çš„è¿‡ç¨‹æ²¡æœ‰æ‰§è¡Œï¼Œé‚£ä¹ˆnameåœ¨æ•´ä¸ªå—çº§ä½œç”¨åŸŸå†…éƒ½æ˜¯ä¸å¯ç”¨çš„ï¼Œéƒ½æ˜¯undefinedã€‚</p><p>æ‰€ä»¥å°½é‡ä¸è¦åœ¨caseé‡Œå®šä¹‰å—çº§å˜é‡ã€‚</p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/switch%E7%9A%84%E5%9D%97%E7%BA%A7%E4%BD%9C%E7%94%A8%E5%9F%9F.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>æ·±å…¥ç†è§£instanceof</title>
      <link>http://mydearest.cn/2019/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3instanceof.html</link>
      <guid>http://mydearest.cn/2019/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3instanceof.html</guid>
      <pubDate>Fri, 08 Mar 2019 13:55:30 GMT</pubDate>
      <description>
      
        &lt;p&gt;åœ¨JSä¸­ï¼Œå¤§å®¶é€šå¸¸ç”¨&lt;code&gt;typeof&lt;/code&gt;æ¥åˆ¤æ–­åŸºæœ¬ç±»å‹ï¼Œ&lt;code&gt;instanceof&lt;/code&gt;æ¥åˆ¤æ–­å¼•ç”¨ç±»å‹ã€‚&lt;/p&gt;
&lt;h2 id=&quot;typeof&quot;&gt;&lt;a href=&quot;#typeof&quot; class=&quot;headerlink&quot; title=&quot;typeof&quot;&gt;&lt;/a&gt;typeof&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;typeofä¸€èˆ¬åªèƒ½è¿”å›å¦‚ä¸‹å‡ ä¸ªç»“æœï¼šnumber,boolean,string,function,object,undefinedå­—ç¬¦ä¸²&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹äºArray,nullç­‰ç‰¹æ®Šå¯¹è±¡ä½¿ç”¨typeofä¸€å¾‹è¿”å›objectï¼Œè¿™æ­£æ˜¯typeofçš„å±€é™æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨åˆ¤æ–­é™¤Objectç±»å‹çš„å¯¹è±¡(åŸºæœ¬ç±»å‹)æ—¶æ¯”è¾ƒæ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;instanceof&quot;&gt;&lt;a href=&quot;#instanceof&quot; class=&quot;headerlink&quot; title=&quot;instanceof&quot;&gt;&lt;/a&gt;instanceof&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;object instanceof constructor&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;instanceof è¿ç®—ç¬¦ç”¨æ¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡åœ¨å…¶åŸå‹é“¾ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ„é€ å‡½æ•°çš„ prototype å±æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;æ¢ç§è¯´æ³•å°±æ˜¯å·¦ä¾§çš„å¯¹è±¡æ˜¯å¦æ˜¯å³ä¾§å¯¹è±¡çš„å®ä¾‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;ç›¸å…³ç»ƒä¹ &quot;&gt;&lt;a href=&quot;#ç›¸å…³ç»ƒä¹ &quot; class=&quot;headerlink&quot; title=&quot;ç›¸å…³ç»ƒä¹ &quot;&gt;&lt;/a&gt;ç›¸å…³ç»ƒä¹ &lt;/h2&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&#39;123&#39;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;// true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; str = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&#39;123&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;str &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;// true&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p>åœ¨JSä¸­ï¼Œå¤§å®¶é€šå¸¸ç”¨<code>typeof</code>æ¥åˆ¤æ–­åŸºæœ¬ç±»å‹ï¼Œ<code>instanceof</code>æ¥åˆ¤æ–­å¼•ç”¨ç±»å‹ã€‚</p><h2 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h2><blockquote><p>typeofä¸€èˆ¬åªèƒ½è¿”å›å¦‚ä¸‹å‡ ä¸ªç»“æœï¼šnumber,boolean,string,function,object,undefinedå­—ç¬¦ä¸²</p></blockquote><blockquote><p>å¯¹äºArray,nullç­‰ç‰¹æ®Šå¯¹è±¡ä½¿ç”¨typeofä¸€å¾‹è¿”å›objectï¼Œè¿™æ­£æ˜¯typeofçš„å±€é™æ€§ã€‚</p></blockquote><blockquote><p>åœ¨åˆ¤æ–­é™¤Objectç±»å‹çš„å¯¹è±¡(åŸºæœ¬ç±»å‹)æ—¶æ¯”è¾ƒæ–¹ä¾¿ã€‚</p></blockquote><h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h2><blockquote><p>object instanceof constructor</p></blockquote><blockquote><p>instanceof è¿ç®—ç¬¦ç”¨æ¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡åœ¨å…¶åŸå‹é“¾ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ„é€ å‡½æ•°çš„ prototype å±æ€§ã€‚</p></blockquote><blockquote><p>æ¢ç§è¯´æ³•å°±æ˜¯å·¦ä¾§çš„å¯¹è±¡æ˜¯å¦æ˜¯å³ä¾§å¯¹è±¡çš„å®ä¾‹ã€‚</p></blockquote><h2 id="ç›¸å…³ç»ƒä¹ "><a href="#ç›¸å…³ç»ƒä¹ " class="headerlink" title="ç›¸å…³ç»ƒä¹ "></a>ç›¸å…³ç»ƒä¹ </h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'123'</span> <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">// true</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">'123'</span>)</span><br><span class="line">str <span class="keyword">instanceof</span> <span class="built_in">String</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure><hr><a id="more"></a><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// éƒ½æ˜¯Objectçš„å®ä¾‹ true</span></span><br><span class="line"><span class="built_in">console</span>.log(&#123;&#125; <span class="keyword">instanceof</span> <span class="built_in">Object</span>)</span><br><span class="line"><span class="built_in">console</span>.log([] <span class="keyword">instanceof</span> <span class="built_in">Array</span>)</span><br><span class="line"><span class="built_in">console</span>.log([] <span class="keyword">instanceof</span> <span class="built_in">Object</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125; <span class="keyword">instanceof</span> <span class="built_in">Function</span>)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125; <span class="keyword">instanceof</span> <span class="built_in">Object</span>)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;&#125; </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BFoo</span>(<span class="params"></span>)</span>&#123;&#125; </span><br><span class="line">Foo.prototype = <span class="keyword">new</span> BFoo();</span><br><span class="line"><span class="keyword">let</span> foo = <span class="keyword">new</span> Foo();</span><br><span class="line"><span class="built_in">console</span>.log(foo <span class="keyword">instanceof</span> Foo); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(foo <span class="keyword">instanceof</span> BFoo); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span> <span class="keyword">instanceof</span> <span class="built_in">String</span>); <span class="comment">// flase</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">String</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>); </span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>); </span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>)</span>&#123;&#125; </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BFoo</span>(<span class="params"></span>)</span>&#123;&#125; </span><br><span class="line">Foo.prototype = <span class="keyword">new</span> BFoo();</span><br><span class="line"><span class="built_in">console</span>.log(Foo <span class="keyword">instanceof</span> <span class="built_in">Function</span>);</span><br><span class="line"><span class="built_in">console</span>.log(Foo <span class="keyword">instanceof</span> Foo);</span><br></pre></td></tr></table></figure><h2 id="instanceofå®ç°"><a href="#instanceofå®ç°" class="headerlink" title="instanceofå®ç°"></a>instanceofå®ç°</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">instance_of</span>(<span class="params">L, R</span>) </span>&#123;<span class="comment">//L è¡¨ç¤ºå·¦è¾¹çš„objectï¼ŒR è¡¨ç¤ºå³è¾¹çš„constructor</span></span><br><span class="line"> <span class="keyword">const</span> R_P = R.prototype;<span class="comment">// å– R çš„æ˜¾å¼åŸå‹</span></span><br><span class="line"> L = L.__proto__;<span class="comment">// å– L çš„éšå¼åŸå‹,å¹¶ä¸”å¯èƒ½ä¼šé¡ºç€åŸå‹é“¾é‡æ–°èµ‹å€¼</span></span><br><span class="line"> <span class="keyword">while</span> (<span class="literal">true</span>) &#123; </span><br><span class="line">   <span class="keyword">if</span> (L === <span class="literal">null</span>) </span><br><span class="line">     <span class="keyword">return</span> <span class="literal">false</span>; </span><br><span class="line">   <span class="keyword">if</span> (R_P === L)<span class="comment">// è¿™é‡Œé‡ç‚¹ï¼šä¸¥æ ¼æ¯”è¾ƒ true </span></span><br><span class="line">     <span class="keyword">return</span> <span class="literal">true</span>; </span><br><span class="line">   L = L.__proto__; </span><br><span class="line"> &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é‡ç‚¹è§£æ"><a href="#é‡ç‚¹è§£æ" class="headerlink" title="é‡ç‚¹è§£æ"></a>é‡ç‚¹è§£æ</h2><p><img src="https://user-images.githubusercontent.com/25027560/37870377-2bc8211a-3007-11e8-92a0-04fa96aabf13.png" alt="åŸå‹é“¾"></p><ul><li><p>__proto__ å±æ€§ï¼ŒæŒ‡å‘äº†åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹</p></li><li><p>æ‰€æœ‰JSå¯¹è±¡éƒ½æœ‰ __proto__ å±æ€§ï¼Œé™¤äº†Object.prototype.__proto__ === null</p></li><li><p>æ³¨æ„Object(),å®ƒæ˜¯ç”±functionç”Ÿæˆçš„ï¼Œæ‰€ä»¥å®ƒçš„<strong>proto</strong>å±æ€§æŒ‡å‘äº†functionçš„æ„é€ å™¨Functionçš„åŸå‹Function.prototype</p></li><li><p>æ³¨æ„æ„é€ å™¨Function,å®ƒæ˜¯å”¯ä¸€ä¸€ä¸ªprototypeå’Œ<strong>proto</strong>æŒ‡å‘ç›¸åŒçš„å¯¹è±¡</p></li><li><p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬æ—¥å¸¸è‡ªè¡Œåˆ›å»ºçš„æ„é€ å™¨Fooçš„<strong>proto</strong>å±æ€§æŒ‡å‘functionçš„æ„é€ å™¨Functionçš„åŸå‹Function.prototypeï¼Œä½†æ˜¯æ„é€ å™¨çš„åŸå‹å¯¹è±¡Foo.prototypeçš„<strong>proto</strong>å±æ€§æ˜¯ç›´æ¥æŒ‡å‘Object.prototypeå¯¹è±¡çš„</p></li></ul>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3instanceof.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>æ·±å…¥ç†è§£JSçš„ç»§æ‰¿</title>
      <link>http://mydearest.cn/2019/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JS%E7%9A%84%E7%BB%A7%E6%89%BF.html</link>
      <guid>http://mydearest.cn/2019/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JS%E7%9A%84%E7%BB%A7%E6%89%BF.html</guid>
      <pubDate>Thu, 07 Mar 2019 15:56:48 GMT</pubDate>
      <description>
      
        &lt;span itemprop=&quot;image&quot; itemscope=&quot;&quot; itemtype=&quot;http://schema.org/ImageObject&quot;&gt;&lt;img itemprop=&quot;url image&quot; src=&quot;https://user-images.githubusercontent.com/25027560/38763933-ac0fdb2a-3fd8-11e8-8510-5e8a2444f49a.png&quot; class=&quot;full-image&quot; alt=&quot;Summary&quot; title=&quot;Summary&quot;&gt;&lt;meta itemprop=&quot;width&quot; content=&quot;auto&quot;&gt;&lt;meta itemprop=&quot;height&quot; content=&quot;auto&quot;&gt;&lt;/span&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<span itemprop="image" itemscope="" itemtype="http://schema.org/ImageObject"><img itemprop="url image" src="https://user-images.githubusercontent.com/25027560/38763933-ac0fdb2a-3fd8-11e8-8510-5e8a2444f49a.png" class="full-image" alt="Summary" title="Summary"><meta itemprop="width" content="auto"><meta itemprop="height" content="auto"></span><hr><a id="more"></a><h2 id="æ€»è§ˆ"><a href="#æ€»è§ˆ" class="headerlink" title="æ€»è§ˆ"></a>æ€»è§ˆ</h2><p><img src="https://user-images.githubusercontent.com/25027560/38763933-ac0fdb2a-3fd8-11e8-8510-5e8a2444f49a.png" alt="c5925056-aa27-4b97-9f5d-2ec786ea5125"></p><h2 id="ä¸€ã€å€ŸåŠ©æ„é€ å‡½æ•°"><a href="#ä¸€ã€å€ŸåŠ©æ„é€ å‡½æ•°" class="headerlink" title="ä¸€ã€å€ŸåŠ©æ„é€ å‡½æ•°"></a>ä¸€ã€å€ŸåŠ©æ„é€ å‡½æ•°</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'parent1'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å°†çˆ¶ç±»çš„æ‰§è¡Œä¸Šä¸‹æ–‡æŒ‡å‘å­ç±»ï¼Œçˆ¶ç±»æ‰§è¡Œæ—¶çš„å®ä¾‹å±æ€§éƒ½ä¼šæŒ‡å‘å­ç±»</span></span><br><span class="line">  Parent1.call(<span class="keyword">this</span>);<span class="comment">// apply</span></span><br><span class="line">  <span class="keyword">this</span>.type = <span class="string">'child1'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç¼ºç‚¹"><a href="#ç¼ºç‚¹" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>å­ç±»æ²¡æœ‰ç»§æ‰¿çˆ¶ç±»çš„åŸå‹æ–¹æ³•åªç»§æ‰¿äº†çˆ¶ç±»æ„é€ å‡½æ•°ä¸­çš„å±æ€§å’Œæ–¹æ³•</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Parent1.prototype.method = (arg) =<span class="built_in">console</span>.log(arg);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Child1().method); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€å€ŸåŠ©åŸå‹é“¾"><a href="#äºŒã€å€ŸåŠ©åŸå‹é“¾" class="headerlink" title="äºŒã€å€ŸåŠ©åŸå‹é“¾"></a>äºŒã€å€ŸåŠ©åŸå‹é“¾</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'parent2'</span>;</span><br><span class="line">  <span class="keyword">this</span>.arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">  <span class="keyword">this</span>.method = (arg) =<span class="built_in">console</span>.log(arg)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.type = <span class="string">'child2'</span></span><br><span class="line">&#125;</span><br><span class="line">Child2.prototype = <span class="keyword">new</span> Parent2();</span><br></pre></td></tr></table></figure><p>åŸå‹å›¾å¦‚ä¸‹<img src="https://user-images.githubusercontent.com/25027560/38763935-b449916e-3fd8-11e8-8b76-e12f58c20d27.png" alt="f9311957-d401-4bc0-961b-65f3f49d65ea"></p><h4 id="ç¼ºç‚¹-1"><a href="#ç¼ºç‚¹-1" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>å¼•ç”¨ç±»å‹çš„å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œå®ä¾‹ä¹‹é—´ä¼šäº’ç›¸å½±å“</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> c21 = <span class="keyword">new</span> Child2();</span><br><span class="line"><span class="keyword">let</span> c22 = <span class="keyword">new</span> Child2();</span><br><span class="line"></span><br><span class="line">c21.arr.push(<span class="number">4</span>);</span><br><span class="line"><span class="built_in">console</span>.log(c21.arr, c22.arr);</span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œä¸‹é¢æ˜¯ç›´æ¥ç»™å®ä¾‹æ·»åŠ methodå±æ€§</span></span><br><span class="line"><span class="comment">// åªæ˜¯ä¿®æ”¹äº†methodæŒ‡é’ˆï¼Œæ²¡æœ‰ä¿®æ”¹åŸå‹é“¾ä¸Šçš„methodæ–¹æ³•</span></span><br><span class="line"><span class="comment">// åªæœ‰ä¿®æ”¹å¼•ç”¨å¯¹è±¡æ‰æ˜¯çœŸæ­£çš„ä¿®æ”¹</span></span><br><span class="line">c21.method = <span class="string">'c21'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(Parent2);</span><br><span class="line"><span class="built_in">console</span>.log(c21, c22);</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/25027560/38763937-bad54c58-3fd8-11e8-9248-1f6b2954daf9.png" alt="c79f3ffe-030d-4753-9f32-361a2dffb9d2"></p><h2 id="ä¸‰ã€ç»„åˆï¼ˆæ„é€ -åŸå‹é“¾ï¼‰"><a href="#ä¸‰ã€ç»„åˆï¼ˆæ„é€ -åŸå‹é“¾ï¼‰" class="headerlink" title="ä¸‰ã€ç»„åˆï¼ˆæ„é€ +åŸå‹é“¾ï¼‰"></a>ä¸‰ã€ç»„åˆï¼ˆæ„é€ +åŸå‹é“¾ï¼‰</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'parent3'</span>;</span><br><span class="line">  <span class="keyword">this</span>.arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  Parent3.call(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.type = <span class="string">'child3'</span></span><br><span class="line">&#125;</span><br><span class="line">Child3.prototype = <span class="keyword">new</span> Parent3();</span><br></pre></td></tr></table></figure><h4 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h4><p>æ¯ä¸ªå®ä¾‹ä¸ä¼šå†äº’ç›¸å½±å“</p><h4 id="ç¼ºç‚¹-2"><a href="#ç¼ºç‚¹-2" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>å®ä¾‹åŒ–æ—¶ï¼Œçˆ¶ç±»è¢«æ„é€ äº†ä¸¤æ¬¡ï¼Œè¿™æ²¡æœ‰å¿…è¦callä¸€æ¬¡ï¼Œnewä¸€æ¬¡</p><h2 id="å››ã€ç»„åˆä¼˜åŒ–ä¸€"><a href="#å››ã€ç»„åˆä¼˜åŒ–ä¸€" class="headerlink" title="å››ã€ç»„åˆä¼˜åŒ–ä¸€"></a>å››ã€ç»„åˆä¼˜åŒ–ä¸€</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent4</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'parent4'</span>;</span><br><span class="line">  <span class="keyword">this</span>.arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child4</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  Parent4.call(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.type = <span class="string">'child4'</span></span><br><span class="line">&#125;</span><br><span class="line">Child4.prototype = Parent4.prototype;</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/25027560/38763939-c318a5fe-3fd8-11e8-9581-9e04e57976a4.png" alt="3dcc9c3e-5e1d-45bc-bcb5-72aaea635cc2"></p><h4 id="ç¼ºç‚¹-3"><a href="#ç¼ºç‚¹-3" class="headerlink" title="ç¼ºç‚¹"></a>ç¼ºç‚¹</h4><p>æ— æ³•åˆ¤æ–­å®ä¾‹çš„æ„é€ å‡½æ•°æ˜¯çˆ¶ç±»è¿˜æ˜¯å­ç±»</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> c41 = <span class="keyword">new</span> Child4();</span><br><span class="line"><span class="keyword">let</span> c42 = <span class="keyword">new</span> Child4();</span><br><span class="line"><span class="built_in">console</span>.log(c41 <span class="keyword">instanceof</span> Child4, c41 <span class="keyword">instanceof</span> Parent4);</span><br><span class="line"><span class="comment">// true true</span></span><br></pre></td></tr></table></figure><p>ä½†å…¶å®ï¼Œæ„é€ å‡½æ•°å°±æ˜¯çˆ¶ç±»æœ¬èº«</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(c41.constructor); <span class="comment">// Parent4</span></span><br></pre></td></tr></table></figure><p>å¾ˆéš¾å¾—æ‰é€šè¿‡<code>Parent4.call(this)</code>æ”¹å˜äº†æ„é€ å‡½æ•°çš„æŒ‡å‘ï¼Œç°åœ¨åˆæ”¹å›å»äº†ï¼Ÿå¤©â€¦â€¦ä¸æƒ³çœ‹ä¸‹å»äº†è¡Œä¸è¡Œï¼Œå…„deiï¼ŒåšæŒä¸€ä¼šå°±æ˜¯èƒœåˆ©ï¼Œåˆ«æ‰“çŒç¡</p><p><code>Child4.prototype = Parent4.prototype</code>åªæ˜¯æŠŠ<code>Child4</code>çš„<code>prototype</code>å±æ€§æŒ‡é’ˆæŒ‡å‘äº†<code>Parent4.prototype</code>è¿™ä¸ªå¼•ç”¨å¯¹è±¡è€Œå·²ï¼Œå®é™…ä¸Š<code>Parent4.prototype.constructor = Parent4</code><img src="https://user-images.githubusercontent.com/25027560/38763942-cdc97b40-3fd8-11e8-8f45-c7bdb95f8f5f.png" alt="af779508-30f5-43ea-8af8-ff25a308ccf9"></p><h2 id="äº”ã€ç»„åˆä¼˜åŒ–äºŒ"><a href="#äº”ã€ç»„åˆä¼˜åŒ–äºŒ" class="headerlink" title="äº”ã€ç»„åˆä¼˜åŒ–äºŒ"></a>äº”ã€ç»„åˆä¼˜åŒ–äºŒ</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Parent5</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'parent5'</span>;</span><br><span class="line">  <span class="keyword">this</span>.arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Child5</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  Parent5.call(<span class="keyword">this</span>);</span><br><span class="line">  <span class="keyword">this</span>.type = <span class="string">'child5'</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»„æˆåŸå‹é“¾</span></span><br><span class="line">Child5.prototype = <span class="built_in">Object</span>.create(Parent5.prototype);</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ï¼Œè¿™æ—¶å€™ï¼Œå®ä¾‹å¯¹è±¡çš„<code>constructor</code>ä¾ç„¶æ˜¯<code>Parent5</code></p><p><img src="https://user-images.githubusercontent.com/25027560/38763943-d3d9703a-3fd8-11e8-92d4-d161a335c80c.png" alt="f611911f-9fc1-4ff8-8da6-eb7874eeb335"></p><p>æ‰€ä»¥éœ€è¦é‡æ–°æŒ‡å®šå®ä¾‹å¯¹è±¡çš„æ„é€ å™¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Child5.prototype.constructor = Child5;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> c51 = <span class="keyword">new</span> Child5();</span><br><span class="line"><span class="keyword">let</span> c52 = <span class="keyword">new</span> Parent5();</span><br><span class="line"><span class="built_in">console</span>.log(c51 <span class="keyword">instanceof</span> Child5, c51 <span class="keyword">instanceof</span> Parent5);</span><br><span class="line"><span class="built_in">console</span>.log(c52 <span class="keyword">instanceof</span> Child5, c52 <span class="keyword">instanceof</span> Parent5);</span><br><span class="line"><span class="built_in">console</span>.log(c51.constructor, c52.constructor);</span><br><span class="line"><span class="comment">// true true</span></span><br><span class="line"><span class="comment">// false true</span></span><br><span class="line"><span class="comment">// Child5 Parent5</span></span><br></pre></td></tr></table></figure><h2 id="ç›¸å…³é“¾æ¥"><a href="#ç›¸å…³é“¾æ¥" class="headerlink" title="ç›¸å…³é“¾æ¥"></a>ç›¸å…³é“¾æ¥</h2><p><a href="https://mydearest.cn/js%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E5%AE%9E%E7%8E%B0%E7%BB%A7%E6%89%BF.html">jsåˆ›å»ºå¯¹è±¡å®ç°ç»§æ‰¿</a></p>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JS%E7%9A%84%E7%BB%A7%E6%89%BF.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>æ·±å…¥ç†è§£JSçš„ç±»å‹ã€å€¼å’Œç±»å‹è½¬æ¢</title>
      <link>http://mydearest.cn/2019/ECMAScript%202016%E3%80%812017%E3%80%812018%20%E6%96%B0%E7%89%B9%E6%80%A7%20.html</link>
      <guid>http://mydearest.cn/2019/ECMAScript%202016%E3%80%812017%E3%80%812018%20%E6%96%B0%E7%89%B9%E6%80%A7%20.html</guid>
      <pubDate>Wed, 06 Mar 2019 16:23:52 GMT</pubDate>
      <description>
      
        &lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/25027560/38468332-c0336d1c-3b76-11e8-93b5-94f73acab1c6.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<p><img src="https://user-images.githubusercontent.com/25027560/38468332-c0336d1c-3b76-11e8-93b5-94f73acab1c6.png" alt="image"></p><hr><a id="more"></a><h2 id="ä¸€ã€ECMAScript-2016"><a href="#ä¸€ã€ECMAScript-2016" class="headerlink" title="ä¸€ã€ECMAScript 2016"></a>ä¸€ã€ECMAScript 2016</h2><h3 id="1ã€Array-prototype-includes"><a href="#1ã€Array-prototype-includes" class="headerlink" title="1ã€Array.prototype.includes"></a>1ã€Array.prototype.includes</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/includes" target="_blank" rel="noopener">Array.prototype.includes() - JavaScript | MDN</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="literal">NaN</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (arr.indexOf(<span class="number">3</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (arr.includes(<span class="number">3</span>)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="literal">true</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">arr.indexOf(<span class="literal">NaN</span>)</span><br><span class="line"><span class="comment">// -1  æ— æ³•è¯†åˆ«NaN</span></span><br><span class="line">arr.includes(<span class="literal">NaN</span>);</span><br><span class="line"><span class="comment">// true   å¯ä»¥è¯†åˆ«NaN</span></span><br></pre></td></tr></table></figure><h3 id="2ã€æŒ‡æ•°ï¼ˆå¹‚ï¼‰è¿ç®—ç¬¦"><a href="#2ã€æŒ‡æ•°ï¼ˆå¹‚ï¼‰è¿ç®—ç¬¦" class="headerlink" title="2ã€æŒ‡æ•°ï¼ˆå¹‚ï¼‰è¿ç®—ç¬¦ **"></a>2ã€æŒ‡æ•°ï¼ˆå¹‚ï¼‰è¿ç®—ç¬¦ **</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.pow(<span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">// 8</span></span><br><span class="line"></span><br><span class="line"><span class="number">2</span> ** <span class="number">3</span></span><br><span class="line"><span class="comment">// 8</span></span><br></pre></td></tr></table></figure><h2 id="äºŒã€ECMAScript-2017"><a href="#äºŒã€ECMAScript-2017" class="headerlink" title="äºŒã€ECMAScript 2017"></a>äºŒã€ECMAScript 2017</h2><h3 id="1ã€Object-values"><a href="#1ã€Object-values" class="headerlink" title="1ã€Object.values()"></a>1ã€Object.values()</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/values" target="_blank" rel="noopener">Object.values() - JavaScript | MDN</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">foo</span>: <span class="string">"bar"</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.values(obj)); <span class="comment">// ['bar', 42]</span></span><br></pre></td></tr></table></figure><h3 id="2ã€Object-entries"><a href="#2ã€Object-entries" class="headerlink" title="2ã€Object.entries()"></a>2ã€Object.entries()</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/entries" target="_blank" rel="noopener">Object.entries() - JavaScript | MDN</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">foo</span>: <span class="string">'bar'</span>, <span class="attr">baz</span>: <span class="number">42</span> &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(obj)); <span class="comment">// [ ['foo', 'bar'], ['baz', 42] ]</span></span><br></pre></td></tr></table></figure><h3 id="3ã€å­—ç¬¦ä¸²å¡«å……-String-padding"><a href="#3ã€å­—ç¬¦ä¸²å¡«å……-String-padding" class="headerlink" title="3ã€å­—ç¬¦ä¸²å¡«å…… String padding"></a>3ã€å­—ç¬¦ä¸²å¡«å…… String padding</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/padStart" target="_blank" rel="noopener">String.prototype.padStart() - JavaScript | MDN</a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd" target="_blank" rel="noopener">String.prototype.padEnd() - JavaScript | MDN</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'abc'</span>.padStart(<span class="number">10</span>);         <span class="comment">// "       abc"</span></span><br><span class="line"><span class="string">'abc'</span>.padStart(<span class="number">10</span>, <span class="string">"foo"</span>);  <span class="comment">// "foofoofabc"</span></span><br><span class="line"><span class="string">'abc'</span>.padStart(<span class="number">6</span>,<span class="string">"123465"</span>); <span class="comment">// "123abc"</span></span><br><span class="line"><span class="string">'abc'</span>.padStart(<span class="number">8</span>, <span class="string">"0"</span>);     <span class="comment">// "00000abc"</span></span><br><span class="line"><span class="string">'abc'</span>.padStart(<span class="number">1</span>);          <span class="comment">// "abc"</span></span><br><span class="line"></span><br><span class="line"><span class="string">'abc'</span>.padEnd(<span class="number">10</span>);          <span class="comment">// "abc       "</span></span><br><span class="line"><span class="string">'abc'</span>.padEnd(<span class="number">10</span>, <span class="string">"foo"</span>);   <span class="comment">// "abcfoofoof"</span></span><br><span class="line"><span class="string">'abc'</span>.padEnd(<span class="number">6</span>, <span class="string">"123456"</span>); <span class="comment">// "abc123"</span></span><br><span class="line"><span class="string">'abc'</span>.padEnd(<span class="number">1</span>);           <span class="comment">// "abc"</span></span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼ŒEmojiså’ŒåŒå­—èŠ‚å­—ç¬¦ä¼šå æ®ä¸¤ä½</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'heart'</span>.padStart(<span class="number">10</span>, <span class="string">"â¤ï¸"</span>); <span class="comment">// 'â¤ï¸â¤ï¸â¤heart'</span></span><br></pre></td></tr></table></figure><h3 id="4ã€Object-getOwnPropertyDescriptors"><a href="#4ã€Object-getOwnPropertyDescriptors" class="headerlink" title="4ã€Object.getOwnPropertyDescriptors"></a>4ã€Object.getOwnPropertyDescriptors</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor" target="_blank" rel="noopener">Object.getOwnPropertyDescriptor() - JavaScript | MDN</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj, prop)</span><br></pre></td></tr></table></figure><p><code>Object.getOwnPropertyDescriptor()</code>æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡ä¸Šä¸€ä¸ªè‡ªæœ‰å±æ€§å¯¹åº”çš„å±æ€§æè¿°ç¬¦ã€‚ï¼ˆè‡ªæœ‰å±æ€§æŒ‡çš„æ˜¯ç›´æ¥èµ‹äºˆè¯¥å¯¹è±¡çš„å±æ€§ï¼Œä¸éœ€è¦ä»åŸå‹é“¾ä¸Šè¿›è¡ŒæŸ¥æ‰¾çš„å±æ€§ï¼‰</p><h3 id="5ã€å‡½æ•°å‚æ•°ç»“å°¾é€—å·"><a href="#5ã€å‡½æ•°å‚æ•°ç»“å°¾é€—å·" class="headerlink" title="5ã€å‡½æ•°å‚æ•°ç»“å°¾é€—å·"></a>5ã€å‡½æ•°å‚æ•°ç»“å°¾é€—å·</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">a, b,</span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œå‚æ•°båé¢å¤šäº†ä¸ªé€—å·ï¼Œä¸ä¼šæŠ¥è¯­æ³•é”™è¯¯</span></span><br></pre></td></tr></table></figure><h3 id="6ã€Async-Await"><a href="#6ã€Async-Await" class="headerlink" title="6ã€Async/Await"></a>6ã€Async/Await</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function" target="_blank" rel="noopener">async function - JavaScript | MDN</a></p><h2 id="ä¸‰ã€ECMAScript-2018"><a href="#ä¸‰ã€ECMAScript-2018" class="headerlink" title="ä¸‰ã€ECMAScript 2018"></a>ä¸‰ã€ECMAScript 2018</h2><h3 id="1ã€å…±äº«å†…å­˜ä¸åŸå­æ“ä½œ"><a href="#1ã€å…±äº«å†…å­˜ä¸åŸå­æ“ä½œ" class="headerlink" title="1ã€å…±äº«å†…å­˜ä¸åŸå­æ“ä½œ"></a>1ã€å…±äº«å†…å­˜ä¸åŸå­æ“ä½œ</h3><p>å³ä½¿æœ‰event loopçš„â€ä¼ªå¤šçº¿ç¨‹â€œå’ŒService Workerçš„å¼ºåŠ›å¢æ´ï¼Œä½†ä¾ç„¶æ©ç›–ä¸äº†JSæ˜¯å•çº¿ç¨‹çš„äº‹å®ã€‚</p><p>å…±äº«å†…å­˜ä¸åŸå­æ“ä½œï¼Œç»™JSå¸¦æ¥äº†å¤šçº¿ç¨‹çš„åŠŸèƒ½ï¼Œå…è®¸å¼€å‘äººå‘˜è‡ªè¡Œç®¡ç†å†…å­˜æ¥å¼€å‘é«˜æ€§èƒ½é«˜å¹¶å‘çš„ç¨‹åºã€‚</p><p>ç›´åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡<code>postMessage</code>åœ¨JSä¸»çº¿ç¨‹å’Œweb workerä¹‹é—´é€šä¿¡ï¼Œä¼ è¾“æ•°æ®ã€‚</p><h3 id="2ã€éè½¬ä¹‰åºåˆ—çš„æ¨¡æ¿å­—ç¬¦ä¸²"><a href="#2ã€éè½¬ä¹‰åºåˆ—çš„æ¨¡æ¿å­—ç¬¦ä¸²" class="headerlink" title="2ã€éè½¬ä¹‰åºåˆ—çš„æ¨¡æ¿å­—ç¬¦ä¸²"></a>2ã€éè½¬ä¹‰åºåˆ—çš„æ¨¡æ¿å­—ç¬¦ä¸²</h3><p><a href="http://esnext.justjavac.com/proposal/template-literal-revision.html" target="_blank" rel="noopener">éè½¬ä¹‰åºåˆ—çš„æ¨¡æ¿å­—ç¬¦ä¸² | esnext | es6 es7 es2017 es2018 es2019</a></p><h3 id="3ã€å¯¹è±¡å±•å¼€è¿ç®—ç¬¦"><a href="#3ã€å¯¹è±¡å±•å¼€è¿ç®—ç¬¦" class="headerlink" title="3ã€å¯¹è±¡å±•å¼€è¿ç®—ç¬¦"></a>3ã€å¯¹è±¡å±•å¼€è¿ç®—ç¬¦</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; firstName, age, ...rest &#125; = &#123;</span><br><span class="line">  firstName: <span class="string">'a'</span>,</span><br><span class="line">  age: <span class="number">18</span>,</span><br><span class="line">  a: <span class="number">1</span>,</span><br><span class="line">  b: <span class="number">2</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">firstName; <span class="comment">// 'a',</span></span><br><span class="line">age; <span class="comment">// 18</span></span><br><span class="line">rest;</span><br><span class="line"><span class="comment">// é‡ç‚¹çœ‹è¿™é‡Œ &#123; a: 1, b: 2 &#125;</span></span><br></pre></td></tr></table></figure><h3 id="4ã€Promise-prototype-finally"><a href="#4ã€Promise-prototype-finally" class="headerlink" title="4ã€Promise.prototype.finally()"></a>4ã€Promise.prototype.finally()</h3><h3 id="5ã€å¼‚æ­¥è¿­ä»£å™¨"><a href="#5ã€å¼‚æ­¥è¿­ä»£å™¨" class="headerlink" title="5ã€å¼‚æ­¥è¿­ä»£å™¨"></a>5ã€å¼‚æ­¥è¿­ä»£å™¨</h3><p>æä¾›äº†<code>for-await-of</code>ï¼Œå¼‚æ­¥è¿­ä»£ï¼Œç­‰å¾…æ¯ä¸ªpromiseè¢«resolveå†æ‰§è¡Œä¸‹ä¸€ä¸ª</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promises = [</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(resolve =resolve(<span class="number">1</span>)),</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(resolve =resolve(<span class="number">2</span>)),</span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(resolve =resolve(<span class="number">3</span>))</span><br><span class="line">];</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// old</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> obj <span class="keyword">of</span> promises) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(obj);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">test1(); <span class="comment">// </span></span><br><span class="line"><span class="comment">// PromiseÂ &#123;&lt;resolved&gt;: 1&#125;</span></span><br><span class="line"><span class="comment">// PromiseÂ &#123;&lt;resolved&gt;: 2&#125;</span></span><br><span class="line"><span class="comment">// PromiseÂ &#123;&lt;resolved&gt;: 3&#125;</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> obj <span class="keyword">of</span> promises) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(obj);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">test2();</span><br><span class="line"><span class="comment">// 1, 2, 3</span></span><br></pre></td></tr></table></figure><h3 id="6ã€æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³"><a href="#6ã€æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³" class="headerlink" title="6ã€æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³"></a>6ã€æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³</h3><ul><li><code>dotAll</code> æ¨¡å¼ï¼Œä½¿ . å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦</li><li>å‘½åæ•è·ç»„ï¼Œå¯ä»¥ç†è§£ä¸ºå¢åŠ ä¸€ä¸ªå¼•ç”¨</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> regex = <span class="regexp">/(\d&#123;4&#125;)-(\d&#123;2&#125;)-(\d&#123;2&#125;)/</span>;</span><br><span class="line"><span class="keyword">const</span> matchers = regex.exec(<span class="string">'2015-01-02'</span>);</span><br><span class="line">matchers[<span class="number">0</span>];    <span class="comment">// 2015-01-02</span></span><br><span class="line">matchers[<span class="number">1</span>];    <span class="comment">// 2015</span></span><br><span class="line">matchers[<span class="number">2</span>];    <span class="comment">// 01</span></span><br><span class="line">matchers[<span class="number">3</span>];    <span class="comment">// 02</span></span><br></pre></td></tr></table></figure><ul><li>åå‘æ–­è¨€ Lookbehind Assertions</li><li>Unicodeè½¬ä¹‰ Unicode Property Escapes</li></ul>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/ECMAScript%202016%E3%80%812017%E3%80%812018%20%E6%96%B0%E7%89%B9%E6%80%A7%20.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>æ·±å…¥ç†è§£JSçš„ç±»å‹ã€å€¼å’Œç±»å‹è½¬æ¢</title>
      <link>http://mydearest.cn/2019/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JS%E7%9A%84%E7%B1%BB%E5%9E%8B%E3%80%81%E5%80%BC%E5%92%8C%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.html</link>
      <guid>http://mydearest.cn/2019/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JS%E7%9A%84%E7%B1%BB%E5%9E%8B%E3%80%81%E5%80%BC%E5%92%8C%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.html</guid>
      <pubDate>Tue, 05 Mar 2019 14:44:52 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;ä¸€ã€ä¸ƒç§å†…ç½®ç±»å‹å’Œå¸¸è§å¼•ç”¨ç±»å‹&quot;&gt;&lt;a href=&quot;#ä¸€ã€ä¸ƒç§å†…ç½®ç±»å‹å’Œå¸¸è§å¼•ç”¨ç±»å‹&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€ä¸ƒç§å†…ç½®ç±»å‹å’Œå¸¸è§å¼•ç”¨ç±»å‹&quot;&gt;&lt;/a&gt;ä¸€ã€ä¸ƒç§å†…ç½®ç±»å‹å’Œå¸¸è§å¼•ç”¨ç±»å‹&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/25027560/37508449-123fc606-292e-11e8-9cf8-9667338b9ac4.png&quot; alt=&quot;ç²¾ç®€&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/25027560/37508456-1c2c0648-292e-11e8-94d7-541f20942869.png&quot; alt=&quot;å¤æ‚&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="ä¸€ã€ä¸ƒç§å†…ç½®ç±»å‹å’Œå¸¸è§å¼•ç”¨ç±»å‹"><a href="#ä¸€ã€ä¸ƒç§å†…ç½®ç±»å‹å’Œå¸¸è§å¼•ç”¨ç±»å‹" class="headerlink" title="ä¸€ã€ä¸ƒç§å†…ç½®ç±»å‹å’Œå¸¸è§å¼•ç”¨ç±»å‹"></a>ä¸€ã€ä¸ƒç§å†…ç½®ç±»å‹å’Œå¸¸è§å¼•ç”¨ç±»å‹</h2><p><img src="https://user-images.githubusercontent.com/25027560/37508449-123fc606-292e-11e8-9cf8-9667338b9ac4.png" alt="ç²¾ç®€"></p><p><img src="https://user-images.githubusercontent.com/25027560/37508456-1c2c0648-292e-11e8-94d7-541f20942869.png" alt="å¤æ‚"></p><hr><a id="more"></a><h2 id="äºŒã€ç‰¹æ®Šçš„null"><a href="#äºŒã€ç‰¹æ®Šçš„null" class="headerlink" title="äºŒã€ç‰¹æ®Šçš„null"></a>äºŒã€ç‰¹æ®Šçš„<code>null</code></h2><p>ç”¨<code>typeof</code>æ¥æ£€æŸ¥ä¸Šè¿°ä¸ƒç§ç±»å‹æ—¶ï¼Œè¿”å›çš„æ˜¯å¯¹åº”çš„ç±»å‹å­—ç¬¦ä¸²å€¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span> === <span class="string">'ogject'</span> <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><code>null</code>æ˜¯å”¯ä¸€ä¸€ä¸ªç”¨<code>typeof</code>æ£€æµ‹ä¼šè¿”å›<code>object</code>çš„<strong>åŸºæœ¬ç±»å‹å€¼</strong>ï¼ˆæ³¨æ„â€˜åŸºæœ¬â€™ä¸¤å­—ï¼‰</p><p>ä¸åŒçš„å¯¹è±¡åœ¨åº•å±‚éƒ½è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶åœ¨JavaScriptä¸­äºŒè¿›åˆ¶å‰ä¸‰ä½ä¸º0çš„è¯éƒ½ä¼šè¢«åˆ¤æ–­ä¸ºobjectç±»å‹nullçš„äºŒè¿›åˆ¶è¡¨ç¤ºå…¨æ˜¯0ï¼Œè‡ªç„¶å‰ä¸‰ä½ä¹Ÿæ˜¯0æ‰€ä»¥ typeof null === â€œobjectâ€</p><h2 id="ä¸‰ã€å¼•ç”¨ç±»å‹çš„å­ç±»å‹ï¼štypeof-å¼•ç”¨ç±»å‹-what"><a href="#ä¸‰ã€å¼•ç”¨ç±»å‹çš„å­ç±»å‹ï¼štypeof-å¼•ç”¨ç±»å‹-what" class="headerlink" title="ä¸‰ã€å¼•ç”¨ç±»å‹çš„å­ç±»å‹ï¼štypeof [å¼•ç”¨ç±»å‹] === what ?"></a>ä¸‰ã€å¼•ç”¨ç±»å‹çš„å­ç±»å‹ï¼štypeof [å¼•ç”¨ç±»å‹] === what ?</h2><p>ä¸Šé¢çš„å›¾ä¸­è™½ç„¶åˆ—å‡ºäº†ä¸ƒç§å¼•ç”¨ç±»å‹ï¼Œä½†æ˜¯<code>typeof â€˜å¼•ç”¨ç±»å‹â€™ === â€˜objectâ€™</code>ä¸€å®šæˆç«‹å—ï¼Ÿ</p><p>ä¸ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µï¼š<code>typeof â€˜æŸäº›å¼•ç”¨ç±»å‹â€™ === â€˜functionâ€™</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="built_in">Function</span>; <span class="comment">// 'function'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Function</span>(); <span class="comment">// 'function'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;; <span class="comment">// 'function'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Array</span>; <span class="comment">// 'function'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Array</span>(); <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Array</span>(); <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> []; <span class="comment">// 'object'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Boolean</span>; <span class="comment">// "function"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Boolean</span>(); <span class="comment">// "boolean"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Boolean</span>(); <span class="comment">// "object"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Math</span>; <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Math</span>(); <span class="comment">// Math is not a function</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Math</span>(); <span class="comment">// Math is not a constructor</span></span><br></pre></td></tr></table></figure><h3 id="1ã€å¼•ç”¨ç±»å‹ä¸­çš„å‡½æ•°"><a href="#1ã€å¼•ç”¨ç±»å‹ä¸­çš„å‡½æ•°" class="headerlink" title="1ã€å¼•ç”¨ç±»å‹ä¸­çš„å‡½æ•°"></a>1ã€å¼•ç”¨ç±»å‹ä¸­çš„å‡½æ•°</h3><p>å…ˆçœ‹å‰ä¸‰å¥ï¼ŒåŸæ¥typeofé™¤äº†èƒ½åˆ¤æ–­<code>åŸºæœ¬ç±»å‹</code>å’Œ<code>object</code>ä¹‹å¤–ï¼Œè¿˜èƒ½åˆ¤æ–­<code>function</code>ç±»å‹ï¼Œå‡½æ•°ä¹Ÿå±äºå¯¹è±¡</p><h3 id="2ã€å¼•ç”¨ç±»å‹çš„å­ç±»å‹"><a href="#2ã€å¼•ç”¨ç±»å‹çš„å­ç±»å‹" class="headerlink" title="2ã€å¼•ç”¨ç±»å‹çš„å­ç±»å‹"></a>2ã€å¼•ç”¨ç±»å‹çš„å­ç±»å‹</h3><p>æ‹¿<code>Array</code>ä¸¾ä¾‹å­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="built_in">Array</span>; <span class="comment">// 'function'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Array</span>(); <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Array</span>(); <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> []; <span class="comment">// 'object'</span></span><br></pre></td></tr></table></figure><p><code>Array</code>æ˜¯ä¸ªæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ç›´æ¥æ‰“å°å‡ºfunctionä½†æ„é€ å‡ºæ¥çš„<code>Array()</code>å´åˆæ˜¯å¦ä¸€å›äº‹äº†ï¼Œæ„é€ å‡ºæ¥çš„ç»“æœæ˜¯ä¸ªæ•°ç»„ï¼Œè‡ªç„¶å±äºå¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥ä¹Ÿå°±æ‰“å°å‡ºäº†<code>â€˜objectâ€™</code></p><p>æ„é€ å‡½æ•° Array(..) ä¸è¦æ±‚å¿…é¡»å¸¦ new å…³é”®å­—ã€‚ä¸å¸¦æ—¶ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨è¡¥ä¸Šã€‚ å› æ­¤ Array(1,2,3) å’Œ new Array(1,2,3) çš„æ•ˆæœæ˜¯ä¸€æ ·çš„</p><h3 id="3ã€å¼•ç”¨ç±»å‹ä¸­çš„åŸºæœ¬åŒ…è£…ç±»å‹"><a href="#3ã€å¼•ç”¨ç±»å‹ä¸­çš„åŸºæœ¬åŒ…è£…ç±»å‹" class="headerlink" title="3ã€å¼•ç”¨ç±»å‹ä¸­çš„åŸºæœ¬åŒ…è£…ç±»å‹"></a>3ã€å¼•ç”¨ç±»å‹ä¸­çš„åŸºæœ¬åŒ…è£…ç±»å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="built_in">Boolean</span>; <span class="comment">// "function"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Boolean</span>(); <span class="comment">// "boolean"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Boolean</span>(); <span class="comment">// "object"</span></span><br></pre></td></tr></table></figure><p><code>Boolean</code>æ˜¯ä¸ªæ„é€ å‡½æ•°ï¼Œç¬¬ä¸€å¥æ²¡é—®é¢˜<code>Boolean()</code>ç›´æ¥æ‰§è¡Œï¼Œå¾—å‡ºäº†å¸ƒå°”å€¼ï¼Œæ‰€ä»¥å¾—åˆ°äº†<code>â€˜booleanâ€™</code></p><p>è€Œnewå‡ºæ¥çš„æ˜¯ä¸ªBooleanå¯¹è±¡ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ï¼š<code>é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºå‡ºæ¥çš„æ˜¯å°è£…äº†åŸºæœ¬ç±»å‹å€¼çš„å°è£…å¯¹è±¡</code></p><p>è¿™é‡Œç”¨<code>String</code>æ¥ä¸¾ä¸ªä¾‹å­å§ï¼Œçœ‹åˆ°äº†å—ï¼Œä¸€ä¸ªå°è£…å¯¹è±¡<img src="https://user-images.githubusercontent.com/25027560/37508489-350e6e80-292e-11e8-81f2-3124d28d219e.png" alt="å°è£…å¯¹è±¡"></p><p>ä½†æ˜¯ï¼Œä¸æ¨èä½¿ç”¨è¿™ç§å°è£…å¯¹è±¡ï¼Œä¸¾ä¸ªä¾‹å­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">if</span> (!a) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Oops'</span>); <span class="comment">// false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>aæ˜¯ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡æ°¸è¿œæ˜¯çœŸã€‚</p><h3 id="4ã€Mathåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#4ã€Mathåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="4ã€Mathåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ"></a>4ã€Mathåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h3><p>Mathå’ŒGlobalï¼ˆæµè§ˆå™¨ä¸­æ›¿ä»£ä¸ºwindowï¼‰éƒ½æ˜¯å†…ç½®çš„å¯¹è±¡ï¼Œå¹¶ä¸æ˜¯å¼•ç”¨ç±»å‹çš„ä¸€ç§</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="built_in">Math</span>; <span class="comment">// 'object'</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Math</span>(); <span class="comment">// Math is not a function</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Math</span>(); <span class="comment">// Math is not a constructor</span></span><br></pre></td></tr></table></figure><p>æ—¢ä¸æ˜¯å‡½æ•°ï¼Œä¹Ÿä¸æ˜¯æ„é€ å™¨ã€‚</p><h2 id="å››ã€typeofçš„å®‰å…¨é˜²èŒƒæœºåˆ¶"><a href="#å››ã€typeofçš„å®‰å…¨é˜²èŒƒæœºåˆ¶" class="headerlink" title="å››ã€typeofçš„å®‰å…¨é˜²èŒƒæœºåˆ¶"></a>å››ã€typeofçš„å®‰å…¨é˜²èŒƒæœºåˆ¶</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“<code>underfined</code>å’Œ<code>undeclared</code>çš„åŒºåˆ«æœªå®šä¹‰ä¸æœªå£°æ˜</p><p>ä½†æ˜¯ï¼Œå¯¹äºtypeofæ¥è¯´ï¼Œè¿™ä¸¤è€…éƒ½ä¸€æ ·ï¼Œè¿”å›çš„éƒ½æ˜¯underfined</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a;</span><br><span class="line"><span class="keyword">typeof</span> a; <span class="comment">// 'underfined'</span></span><br><span class="line"><span class="keyword">typeof</span> b; <span class="comment">// 'underfined'</span></span><br></pre></td></tr></table></figure><p>å¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬çŸ¥é“bå°±æ˜¯undeclaredï¼ˆæœªå£°æ˜çš„ï¼‰ï¼Œä½†åœ¨typeofçœ‹æ¥éƒ½æ˜¯ä¸€æ ·</p><p>è¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥æ‹¿æ¥åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨ç¨‹åºä¸­ä½¿ç”¨å…¨å±€å˜é‡ DEBUG ä½œä¸ºâ€œè°ƒè¯•æ¨¡å¼â€çš„å¼€å…³ã€‚åœ¨è¾“å‡ºè°ƒè¯•ä¿¡ æ¯åˆ°æ§åˆ¶å°ä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šæ£€æŸ¥ DEBUG å˜é‡æ˜¯å¦å·²è¢«å£°æ˜ã€‚é¡¶å±‚çš„å…¨å±€å˜é‡å£°æ˜ var DEBUG = true åªåœ¨ debug.js æ–‡ä»¶ä¸­æ‰æœ‰ï¼Œè€Œè¯¥æ–‡ä»¶åªåœ¨å¼€å‘å’Œæµ‹è¯•æ—¶æ‰è¢«åŠ è½½åˆ°æµè§ˆå™¨ï¼Œåœ¨ç”Ÿäº§ç¯ å¢ƒä¸­ä¸äºˆåŠ è½½ã€‚</p><p>é—®é¢˜æ˜¯å¦‚ä½•åœ¨ç¨‹åºä¸­æ£€æŸ¥å…¨å±€å˜é‡ DEBUG æ‰ä¸ä¼šå‡ºç° ReferenceError é”™è¯¯ã€‚è¿™æ—¶ typeof çš„ å®‰å…¨é˜²èŒƒæœºåˆ¶å°±æˆäº†æˆ‘ä»¬çš„å¥½å¸®æ‰‹:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿™æ ·ä¼šæŠ›å‡ºé”™è¯¯</span></span><br><span class="line"><span class="keyword">if</span> (DEBUG) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Debugging is starting'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿™æ ·æ˜¯å®‰å…¨çš„</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> DEBUG !== <span class="string">'undefined'</span>) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Debugging is starting'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ä»…å¯¹ç”¨æˆ·å®šä¹‰çš„å˜é‡(æ¯”å¦‚ DEBUG)æœ‰ç”¨ï¼Œå¯¹å†…å»ºçš„ API ä¹Ÿæœ‰å¸®åŠ©:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> atob === <span class="string">"undefined"</span>) &#123;</span><br><span class="line">         atob = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">/*..*/</span> &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="äº”ã€å€¼"><a href="#äº”ã€å€¼" class="headerlink" title="äº”ã€å€¼"></a>äº”ã€å€¼</h2><p>è¿™ä¸€partå¼•ç”¨è‡ª<a href="https://yangbo5207.github.io/wutongluo/ji-chu-jin-jie-xi-lie/yi-3001-nei-cun-kong-jian-xiang-jie.html" target="_blank" rel="noopener">ä¸€ã€å†…å­˜ç©ºé—´è¯¦è§£ Â· Sample GitBook</a></p><p>JSçš„æ‰§è¡Œä¸Šä¸‹æ–‡ç”Ÿæˆä¹‹åï¼Œä¼šåˆ›å»ºä¸€ä¸ªå«åšå˜é‡å¯¹è±¡çš„ç‰¹æ®Šå¯¹è±¡ï¼ŒJSçš„åŸºç¡€ç±»å‹éƒ½ä¿å­˜åœ¨å˜é‡å¯¹è±¡ä¸­</p><p>ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œå˜é‡å¯¹è±¡ä¹Ÿæ˜¯å­˜æ”¾äºå †å†…å­˜ä¸­ï¼Œä½†æ˜¯ç”±äºå˜é‡å¯¹è±¡çš„ç‰¹æ®ŠèŒèƒ½ï¼Œæˆ‘ä»¬åœ¨ç†è§£æ—¶ä»ç„¶éœ€è¦å°†å…¶äºå †å†…å­˜åŒºåˆ†å¼€æ¥ã€‚</p><p>ä½†å¼•ç”¨æ•°æ®ç±»å‹çš„å€¼æ˜¯ä¿å­˜åœ¨å †å†…å­˜ä¸­çš„å¯¹è±¡ã€‚JavaScriptä¸å…è®¸ç›´æ¥è®¿é—®å †å†…å­˜ä¸­çš„ä½ç½®ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½ç›´æ¥æ“ä½œå¯¹è±¡çš„å †å†…å­˜ç©ºé—´ã€‚</p><p>åœ¨æ“ä½œå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ“ä½œå¯¹è±¡çš„å¼•ç”¨è€Œä¸æ˜¯å®é™…çš„å¯¹è±¡ã€‚å› æ­¤ï¼Œå¼•ç”¨ç±»å‹çš„å€¼éƒ½æ˜¯æŒ‰å¼•ç”¨è®¿é—®çš„ã€‚</p><p>è¿™é‡Œçš„å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºä¿å­˜åœ¨å˜é‡å¯¹è±¡ä¸­çš„ä¸€ä¸ªåœ°å€ï¼Œè¯¥åœ°å€ä¸å †å†…å­˜çš„å®é™…å€¼ç›¸å…³è”ã€‚</p><p><img src="https://user-images.githubusercontent.com/25027560/37508497-409cd7fa-292e-11e8-8bc4-a62effd0f3c8.png" alt="3719a7f3-3915-4719-93d8-7629fa5b47bb"></p><p>è€Œä¸ºä»€ä¹ˆåŸºç¡€æ•°æ®ç±»å‹å­˜åœ¨æ ˆä¸­ï¼Œè€Œå¼•ç”¨æ•°æ®ç±»å‹å­˜åœ¨å †ä¸­å‘¢?</p><ul><li>å †æ¯”æ ˆå¤§ï¼Œæ ˆæ¯”å †é€Ÿåº¦å¿«ã€‚</li><li>åŸºç¡€æ•°æ®ç±»å‹æ¯”è¾ƒç¨³å®šï¼Œè€Œä¸”ç›¸å¯¹æ¥è¯´å ç”¨çš„å†…å­˜å°ã€‚</li><li>å¼•ç”¨æ•°æ®ç±»å‹å¤§å°æ˜¯åŠ¨æ€çš„ï¼Œè€Œä¸”æ˜¯æ— é™çš„ã€‚</li><li>å †å†…å­˜æ˜¯æ— åºå­˜å‚¨ï¼Œå¯ä»¥æ ¹æ®å¼•ç”¨ç›´æ¥è·å–ã€‚</li></ul><h2 id="å…­ã€å¼ºåˆ¶ç±»å‹è½¬æ¢"><a href="#å…­ã€å¼ºåˆ¶ç±»å‹è½¬æ¢" class="headerlink" title="å…­ã€å¼ºåˆ¶ç±»å‹è½¬æ¢"></a>å…­ã€å¼ºåˆ¶ç±»å‹è½¬æ¢</h2><p>ã€Šyou donâ€™t know JSã€‹ä¸­ ç¬¬ä¸€éƒ¨åˆ†ç¬¬4ç« </p><p>ç±»å‹è½¬æ¢å‘ç”Ÿåœ¨é™æ€ç±»å‹è¯­è¨€çš„ç¼–è¯‘é˜¶æ®µï¼Œè€Œå¼ºåˆ¶ç±»å‹è½¬æ¢åˆ™å‘ç”Ÿåœ¨åŠ¨æ€ç±»å‹è¯­è¨€çš„è¿è¡Œæ—¶(runtime)ã€‚</p><p>ç„¶è€Œåœ¨ JavaScript ä¸­é€šå¸¸å°†å®ƒä»¬ç»Ÿç§°ä¸ºå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæˆ‘ä¸ªäººåˆ™å€¾å‘äºç”¨â€œéšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢â€(implicit coercion)å’Œâ€œæ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬æ¢â€(explicit coercion)æ¥åŒºåˆ†ã€‚</p><h3 id="1ã€æŠ½è±¡å€¼æ“ä½œ"><a href="#1ã€æŠ½è±¡å€¼æ“ä½œ" class="headerlink" title="1ã€æŠ½è±¡å€¼æ“ä½œ"></a>1ã€æŠ½è±¡å€¼æ“ä½œ</h3><p>ä»‹ç»æ˜¾å¼å’Œéšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŒæ¡å­—ç¬¦ä¸²ã€æ•°å­—å’Œå¸ƒå°”å€¼ä¹‹é—´ç±»å‹è½¬æ¢çš„åŸºæœ¬è§„åˆ™</p><p>1ï¸âƒ£<strong>ToString</strong>toString() å¯ä»¥è¢«æ˜¾å¼è°ƒç”¨ï¼Œæˆ–è€…åœ¨éœ€è¦å­—ç¬¦ä¸²åŒ–æ—¶è‡ªåŠ¨è°ƒç”¨</p><p>null è½¬æ¢ä¸º â€œnullâ€ï¼Œundefined è½¬æ¢ä¸º â€œundefinedâ€ï¼Œtrue è½¬æ¢ä¸º â€œtrueâ€ã€‚æ•°å­—çš„å­—ç¬¦ä¸²åŒ–åˆ™éµå¾ªé€šç”¨è§„åˆ™æå°å’Œæå¤§çš„ æ•°å­—ä½¿ç”¨æŒ‡æ•°å½¢å¼:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.07 è¿ç»­ä¹˜ä»¥ä¸ƒä¸ª 1000</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1.07</span> * <span class="number">1000</span> * <span class="number">1000</span> * <span class="number">1000</span> * <span class="number">1000</span> * <span class="number">1000</span> * <span class="number">1000</span> * <span class="number">1000</span>;</span><br><span class="line"><span class="comment">// ä¸ƒä¸ª1000ä¸€å…±21ä½æ•°å­— </span></span><br><span class="line">a.toString(); <span class="comment">// "1.07e21"</span></span><br></pre></td></tr></table></figure><p>æ•°ç»„çš„é»˜è®¤ toString() æ–¹æ³•ç»è¿‡äº†é‡æ–°å®šä¹‰ï¼Œå°†æ‰€æœ‰å•å…ƒå­—ç¬¦ä¸²åŒ–ä»¥åå†ç”¨ â€œ,â€ è¿æ¥èµ· æ¥</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"> a.toString(); <span class="comment">// "1,2,3"</span></span><br></pre></td></tr></table></figure><p>2ï¸âƒ£ <strong>ToNumber</strong>å…¶ä¸­ true è½¬æ¢ä¸º 1ï¼Œfalse è½¬æ¢ä¸º 0ã€‚undefined è½¬æ¢ä¸º NaNï¼Œnull è½¬æ¢ä¸º 0ã€‚å¤„ç†å¤±è´¥ æ—¶è¿”å› NaN(å¤„ç†æ•°å­—å¸¸é‡å¤±è´¥æ—¶ä¼šäº§ç”Ÿè¯­æ³•é”™è¯¯)</p><p>3ï¸âƒ£ <strong>ToBoolean</strong>å…ˆçœ‹ä»€ä¹ˆæ˜¯å‡å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">â€¢ undefined</span><br><span class="line">â€¢ null</span><br><span class="line">â€¢ false</span><br><span class="line">â€¢ +0ã€-0 å’Œ NaN</span><br><span class="line">â€¢ &quot;&quot;</span><br></pre></td></tr></table></figure><p>å‡å€¼çš„å¸ƒå°”å¼ºåˆ¶ç±»å‹è½¬æ¢ç»“æœä¸º falseã€‚ä»é€»è¾‘ä¸Šè¯´ï¼Œå‡å€¼åˆ—è¡¨ä»¥å¤–çš„éƒ½åº”è¯¥æ˜¯çœŸå€¼(truth)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">new</span> <span class="built_in">Boolean</span>(<span class="literal">false</span>);</span><br><span class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> <span class="built_in">Number</span>(<span class="number">0</span>);</span><br><span class="line"><span class="keyword">var</span> c = <span class="keyword">new</span> <span class="built_in">String</span>(<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> d1 = <span class="built_in">Boolean</span>( a &amp;&amp; b &amp;&amp; c );</span><br><span class="line"><span class="keyword">var</span> d2 = a &amp;&amp; b &amp;&amp; c;</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/25027560/37508500-49f02fd2-292e-11e8-929b-168ea4309baf.png" alt="63754230-e3da-4363-a04d-cccca7030a15"></p><p>å¦‚æœå‡å€¼å¯¹è±¡å¹¶éå°è£…äº†å‡å€¼çš„å¯¹è±¡ï¼Œé‚£å®ƒç©¶ç«Ÿæ˜¯ä»€ä¹ˆ?å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ JavaScript ä»£ç ä¸­ä¼šå‡ºç°å‡å€¼å¯¹è±¡ï¼Œä½†å®ƒå®é™…ä¸Šå¹¶ä¸å±äº JavaScript è¯­è¨€çš„èŒƒç•´ã€‚æµè§ˆå™¨åœ¨æŸäº›ç‰¹å®šæƒ…å†µä¸‹ï¼Œåœ¨å¸¸è§„ JavaScript è¯­æ³•åŸºç¡€ä¸Šè‡ªå·±åˆ›å»ºäº†ä¸€äº›å¤–æ¥(exotic) å€¼ï¼Œè¿™äº›å°±æ˜¯â€œå‡å€¼å¯¹è±¡â€ã€‚å‡å€¼å¯¹è±¡çœ‹èµ·æ¥å’Œæ™®é€šå¯¹è±¡å¹¶æ— äºŒè‡´(éƒ½æœ‰å±æ€§ï¼Œç­‰ç­‰)ï¼Œä½†å°†å®ƒä»¬å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºå¸ƒå°” å€¼æ—¶ç»“æœä¸º falseã€‚</p><p><strong>çœŸå€¼å°±æ˜¯å‡å€¼åˆ—è¡¨ä¹‹å¤–çš„å€¼</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'false'</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">'0'</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="string">"''"</span>;</span><br><span class="line"><span class="keyword">var</span> d1 = <span class="built_in">Boolean</span>(a &amp;&amp; b &amp;&amp; c);</span><br><span class="line"><span class="keyword">var</span> d2 = a &amp;&amp; b &amp;&amp; c</span><br></pre></td></tr></table></figure><p><img src="https://user-images.githubusercontent.com/25027560/37508506-4e686bd8-292e-11e8-881b-81d56ac71281.png" alt="985c49a4-061f-42fe-978c-83f7724d8867"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">"0"</span>;</span><br><span class="line"><span class="keyword">var</span> b = [];</span><br><span class="line"><span class="keyword">var</span> c = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> d = <span class="string">""</span>;</span><br><span class="line"><span class="keyword">var</span> e = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">var</span> f = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">var</span> g;</span><br><span class="line"><span class="built_in">Boolean</span>( a ); <span class="comment">// true  ç‰¹åˆ«æ³¨æ„è¿™ä¸ªï¼Œå­—ç¬¦ä¸²0å’Œç©ºå­—ç¬¦ä¸²ä¸ä¸€æ ·</span></span><br><span class="line"><span class="built_in">Boolean</span>( b ); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Boolean</span>( c ); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Boolean</span>( d ); <span class="comment">// false  å’Œç¬¬ä¸€ä¸ªæ¯”ï¼Œç©ºå­—ç¬¦ä¸²æ˜¯false</span></span><br><span class="line"><span class="built_in">Boolean</span>( e ); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Boolean</span>( f ); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Boolean</span>( g ); <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="2ã€æ˜¾å¼ç±»å‹è½¬æ¢"><a href="#2ã€æ˜¾å¼ç±»å‹è½¬æ¢" class="headerlink" title="2ã€æ˜¾å¼ç±»å‹è½¬æ¢"></a>2ã€æ˜¾å¼ç±»å‹è½¬æ¢</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­—ç¬¦ä¸²è½¬æ¢</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">String</span>(a);</span><br><span class="line"><span class="comment">// æ•°å­—è½¬æ¢</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="string">'3.14'</span>;</span><br><span class="line"><span class="keyword">var</span> d = <span class="built_in">Number</span>(c);</span><br><span class="line"><span class="comment">// å¸ƒå°”å€¼è½¬æ¢</span></span><br><span class="line"><span class="keyword">var</span> e = [];</span><br><span class="line"><span class="keyword">var</span> f = <span class="built_in">Boolean</span>(e)</span><br></pre></td></tr></table></figure><h3 id="3ã€éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢"><a href="#3ã€éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢" class="headerlink" title="3ã€éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢"></a>3ã€éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢</h3><p>1ï¸âƒ£å­—ç¬¦ä¸²å’Œæ•°å­—ä¹‹é—´çš„éšå¼è½¬æ¢</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">'42'</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">'0'</span>;</span><br><span class="line"><span class="keyword">var</span> c = <span class="number">42</span>;</span><br><span class="line"><span class="keyword">var</span> d = <span class="number">0</span>;</span><br><span class="line">a + b; <span class="comment">// "420" è¿™ä¸ªåœ°æ–¹ï¼Œæ³¨æ„ä¸€ä¸‹</span></span><br><span class="line">c + d; <span class="comment">// 42</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log([] + &#123;&#125;); <span class="comment">// [object object]</span></span><br><span class="line"><span class="built_in">console</span>.log(&#123;&#125; + []); <span class="comment">// ?è¿™ä¼šæ˜¯å¤šå°‘å‘¢ï¼Ÿ</span></span><br></pre></td></tr></table></figure><p>ã€Šyou donâ€™t know JS ã€‹ä¸­5.1.3ç« èŠ‚æ˜¯è¿™æ ·è¯´çš„</p><p>è¿˜æœ‰ä¸€ä¸ªå‘å¸¸è¢«æåˆ°(æ¶‰åŠå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå‚è§ç¬¬ 4 ç« )[] + {}; // â€œ[object Object]â€{} + []; // 0è¡¨é¢ä¸Šçœ‹ + è¿ç®—ç¬¦æ ¹æ®ç¬¬ä¸€ä¸ªæ“ä½œæ•°([] æˆ– {})çš„ä¸åŒä¼šäº§ç”Ÿä¸åŒçš„ç»“æœï¼Œå®åˆ™ä¸ç„¶ã€‚ ç¬¬ä¸€è¡Œä»£ç ä¸­ï¼Œ{} å‡ºç°åœ¨ + è¿ç®—ç¬¦è¡¨è¾¾å¼ä¸­ï¼Œå› æ­¤å®ƒè¢«å½“ä½œä¸€ä¸ªå€¼(ç©ºå¯¹è±¡)æ¥å¤„ç†ã€‚ç¬¬4 ç« è®²è¿‡ [] ä¼šè¢«å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸º â€œâ€ï¼Œè€Œ {} ä¼šè¢«å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸º â€œ[object Object]â€ã€‚ä½†åœ¨ç¬¬äºŒè¡Œä»£ç ä¸­ï¼Œ{} è¢«å½“ä½œä¸€ä¸ªç‹¬ç«‹çš„ç©ºä»£ç å—(ä¸æ‰§è¡Œä»»ä½•æ“ä½œ)ã€‚ä»£ç å—ç»“å°¾ä¸éœ€ è¦åˆ†å·ï¼Œæ‰€ä»¥è¿™é‡Œä¸å­˜åœ¨è¯­æ³•ä¸Šçš„é—®é¢˜ã€‚æœ€å + [] å°† [] æ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬æ¢(å‚è§ç¬¬ 4 ç« ) ä¸º 0ã€‚</p><p>ä½†ç›®å‰çš„chromeæµè§ˆå™¨æ§åˆ¶å°æ˜¯è¿™æ ·çš„<img src="https://user-images.githubusercontent.com/25027560/37508514-5698c8fc-292e-11e8-9220-52136c53d5c4.png" alt="034d7fa4-b144-4028-a346-0a52a3ab7faa"></p><p>{} å…¶å®åº”è¯¥å½“æˆä¸€ä¸ªä»£ç å—ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Objectï¼Œå½“ä½ åœ¨console.logä½¿ç”¨çš„æ—¶å€™ï¼Œ{} è¢«å½“æˆäº†ä¸€ä¸ª Object<img src="https://user-images.githubusercontent.com/25027560/37509112-ef5b653e-2930-11e8-8456-824fd66271da.png" alt="8c597cc9-d2e2-4a51-ad8c-dd1a25ac27db"></p><p>2ï¸âƒ£ éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºå¸ƒå°”å€¼ä¸‹é¢çš„æƒ…å†µä¼šå‘ç”Ÿ å¸ƒå°”å€¼éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</p><ul><li>(1)if (..)è¯­å¥ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ã€‚</li><li>(2)for ( .. ; .. ; .. )è¯­å¥ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼(ç¬¬äºŒä¸ª)ã€‚</li><li>(3) while (..) å’Œ do..while(..) å¾ªç¯ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ã€‚</li><li>(4)? :ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ã€‚</li><li>(5) é€»è¾‘è¿ç®—ç¬¦ ||(é€»è¾‘æˆ–)å’Œ &amp;&amp;(é€»è¾‘ä¸)å·¦è¾¹çš„æ“ä½œæ•°(ä½œä¸ºæ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼)ã€‚</li></ul><p>3ï¸âƒ£ || ä¸ &amp;&amp;å°±ä¸€å¥è¯ï¼Œç†è§£äº†å°±ä¸‡å²ï¼Œç§°ä¹‹ä¸ºâ€œæ“ä½œæ•°é€‰æ‹©å™¨â€</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a || b;</span><br><span class="line"><span class="comment">// å¤§è‡´ç›¸å½“äº(roughly equivalent to): a ? a : b;</span></span><br><span class="line">a &amp;&amp; b;</span><br><span class="line"><span class="comment">// å¤§è‡´ç›¸å½“äº(roughly equivalent to): a ? b : a;</span></span><br></pre></td></tr></table></figure><h3 id="4ã€-ä¸"><a href="#4ã€-ä¸" class="headerlink" title="4ã€== ä¸ ==="></a>4ã€== ä¸ ===</h3><ul><li>å¸¸è§çš„è¯¯åŒºæ˜¯â€œ== æ£€æŸ¥å€¼æ˜¯å¦ç›¸ç­‰ï¼Œ=== æ£€æŸ¥å€¼å’Œç±»å‹æ˜¯å¦ç›¸ç­‰â€</li><li>æ­£ç¡®çš„è§£é‡Šæ˜¯:â€œ== å…è®¸åœ¨ç›¸ç­‰æ¯”è¾ƒä¸­è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œè€Œ === ä¸å…è®¸ã€‚</li></ul>]]></content:encoded>
      
      <comments>http://mydearest.cn/2019/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JS%E7%9A%84%E7%B1%BB%E5%9E%8B%E3%80%81%E5%80%BC%E5%92%8C%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>React Refsæ­å¯†</title>
      <link>http://mydearest.cn/React%20Refs%E5%92%8CDOM%E6%8F%AD%E5%AF%86.html</link>
      <guid>http://mydearest.cn/React%20Refs%E5%92%8CDOM%E6%8F%AD%E5%AF%86.html</guid>
      <pubDate>Sun, 17 Feb 2019 15:25:48 GMT</pubDate>
      <description>
      
        &lt;h2 id=&quot;ä»€ä¹ˆæ˜¯Ref&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯Ref&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯Ref&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯Ref&lt;/h2&gt;&lt;p&gt;Reactçš„å®˜æ–¹ä»‹ç»æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;
&lt;p&gt;In the typical React dataflow, props are the only way that parent components interact with their children. To modify a child, you re-render it with new props. However, there are a few cases where you need to imperatively modify a child outside of the typical dataflow. The child to be modified could be an instance of a React component, or it could be a DOM element. For both of these cases, React provides an escape hatch.&lt;/p&gt;
&lt;p&gt;å…¶ä¸­æåˆ°äº†è¿™å‡ ä¸ªæ¦‚å¿µï¼š&lt;/p&gt;
&lt;p&gt;åœ¨å…¸å‹çš„Reactæ•°æ®æµç†å¿µä¸­ï¼Œçˆ¶ç»„ä»¶è·Ÿå­ç»„ä»¶çš„äº¤äº’éƒ½æ˜¯é€šè¿‡ä¼ é€’å±æ€§(properties)å®ç°çš„ã€‚å¦‚æœçˆ¶ç»„ä»¶éœ€è¦ä¿®æ”¹å­ç»„ä»¶ï¼Œåªéœ€è¦å°†æ–°çš„å±æ€§ä¼ é€’ç»™å­ç»„ä»¶ï¼Œç”±å­ç»„ä»¶æ¥å®ç°å…·ä½“çš„ç»˜åˆ¶é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç‰¹æ®Šçš„æƒ…å†µä¸‹ï¼Œå¦‚æœä½ éœ€è¦å‘½ä»¤å¼(imperatively)çš„ä¿®æ”¹å­ç»„ä»¶ï¼ŒReactä¹Ÿæä¾›äº†åº”æ€¥çš„å¤„ç†åŠæ³•â€“Refã€‚&lt;/p&gt;
&lt;p&gt;Ref æ—¢æ”¯æŒä¿®æ”¹DOMå…ƒç´ ï¼Œä¹Ÿæ”¯æŒä¿®æ”¹è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚&lt;/p&gt;
&lt;hr&gt;
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯Ref"><a href="#ä»€ä¹ˆæ˜¯Ref" class="headerlink" title="ä»€ä¹ˆæ˜¯Ref"></a>ä»€ä¹ˆæ˜¯Ref</h2><p>Reactçš„å®˜æ–¹ä»‹ç»æ˜¯è¿™æ ·çš„ï¼š</p><p>In the typical React dataflow, props are the only way that parent components interact with their children. To modify a child, you re-render it with new props. However, there are a few cases where you need to imperatively modify a child outside of the typical dataflow. The child to be modified could be an instance of a React component, or it could be a DOM element. For both of these cases, React provides an escape hatch.</p><p>å…¶ä¸­æåˆ°äº†è¿™å‡ ä¸ªæ¦‚å¿µï¼š</p><p>åœ¨å…¸å‹çš„Reactæ•°æ®æµç†å¿µä¸­ï¼Œçˆ¶ç»„ä»¶è·Ÿå­ç»„ä»¶çš„äº¤äº’éƒ½æ˜¯é€šè¿‡ä¼ é€’å±æ€§(properties)å®ç°çš„ã€‚å¦‚æœçˆ¶ç»„ä»¶éœ€è¦ä¿®æ”¹å­ç»„ä»¶ï¼Œåªéœ€è¦å°†æ–°çš„å±æ€§ä¼ é€’ç»™å­ç»„ä»¶ï¼Œç”±å­ç»„ä»¶æ¥å®ç°å…·ä½“çš„ç»˜åˆ¶é€»è¾‘ã€‚</p><p>åœ¨ç‰¹æ®Šçš„æƒ…å†µä¸‹ï¼Œå¦‚æœä½ éœ€è¦å‘½ä»¤å¼(imperatively)çš„ä¿®æ”¹å­ç»„ä»¶ï¼ŒReactä¹Ÿæä¾›äº†åº”æ€¥çš„å¤„ç†åŠæ³•â€“Refã€‚</p><p>Ref æ—¢æ”¯æŒä¿®æ”¹DOMå…ƒç´ ï¼Œä¹Ÿæ”¯æŒä¿®æ”¹è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚</p><hr><a id="more"></a><h2 id="ä»€ä¹ˆæ˜¯å£°æ˜å¼ç¼–ç¨‹-Declarative-Programming"><a href="#ä»€ä¹ˆæ˜¯å£°æ˜å¼ç¼–ç¨‹-Declarative-Programming" class="headerlink" title="ä»€ä¹ˆæ˜¯å£°æ˜å¼ç¼–ç¨‹(Declarative Programming)"></a>ä»€ä¹ˆæ˜¯å£°æ˜å¼ç¼–ç¨‹(Declarative Programming)</h2><p>å€¼å¾—ä¸€æçš„æ˜¯å½“ä¸­å£°æ˜å¼ç¼–ç¨‹(Declarative Programming)å’Œå‘½ä»¤å¼ç¼–ç¨‹(Imperative Programming)çš„åŒºåˆ«ã€‚å£°æ˜å¼ç¼–ç¨‹çš„ç‰¹ç‚¹æ˜¯åªæè¿°è¦å®ç°çš„ç»“æœï¼Œè€Œä¸å…³å¿ƒå¦‚ä½•ä¸€æ­¥ä¸€æ­¥å®ç°çš„ï¼Œè€Œå‘½ä»¤å¼ç¼–ç¨‹åˆ™ç›¸åï¼Œå¿…é¡»æ¯ä¸ªæ­¥éª¤éƒ½å†™æ¸…æ¥šã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®è¯­ä¹‰ç›´è§‚çš„ç†è§£ä»£ç çš„åŠŸèƒ½æ˜¯ï¼šé’ˆå¯¹æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå°†å®ƒçš„å€¼æ‰“å°å‡ºæ¥ã€‚ä¸å¿…å…³å¿ƒå®ç°å…¶çš„ç»†èŠ‚ã€‚è€Œå‘½ä»¤å¼ç¼–ç¨‹å¿…é¡»å°†æ¯è¡Œä»£ç è¯»æ‡‚ï¼Œç„¶åå†æ•´åˆèµ·æ¥ç†è§£æ€»ä½“å®ç°çš„åŠŸèƒ½ã€‚</p><p>Reactæœ‰2ä¸ªåŸºçŸ³è®¾è®¡ç†å¿µï¼šä¸€ä¸ªæ˜¯å£°æ˜å¼ç¼–ç¨‹ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°å¼ç¼–ç¨‹ã€‚å‡½æ•°å¼ç¼–ç¨‹ä»¥åæœ‰æœºä¼šå†å±•å¼€è®²ã€‚å£°æ˜å¼ç¼–ç¨‹çš„ç‰¹ç‚¹ä½“ç°åœ¨2æ–¹é¢ï¼š</p><p>ç»„ä»¶å®šä¹‰çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å®ç°é€»è¾‘éƒ½å°è£…åœ¨ç»„ä»¶çš„å†…éƒ¨ï¼Œé€šè¿‡stateç®¡ç†ï¼Œå¯¹å¤–åªæš´éœ²å±æ€§ã€‚</p><p>ç»„ä»¶ä½¿ç”¨çš„æ—¶å€™ï¼Œç»„ä»¶è°ƒç”¨è€…é€šè¿‡ä¼ å…¥ä¸åŒå±æ€§çš„å€¼æ¥è¾¾åˆ°å±•ç°ä¸åŒå†…å®¹çš„æ•ˆæœã€‚ä¸€åˆ‡æ•ˆæœéƒ½æ˜¯äº‹å…ˆå®šä¹‰å¥½çš„ï¼Œè‡³äºæ•ˆæœæ˜¯æ€ä¹ˆå®ç°çš„ï¼Œç»„ä»¶è°ƒç”¨è€…ä¸éœ€è¦å…³å¿ƒã€‚</p><p>å› æ­¤ï¼Œåœ¨ä½¿ç”¨Reactçš„æ—¶å€™ï¼Œä¸€èˆ¬å¾ˆå°‘éœ€è¦ç”¨åˆ°Refã€‚é‚£ä¹ˆï¼ŒRefçš„ä½¿ç”¨åœºæ™¯åˆæ˜¯ä»€ä¹ˆï¼Ÿ</p><h2 id="Refä½¿ç”¨åœºæ™¯"><a href="#Refä½¿ç”¨åœºæ™¯" class="headerlink" title="Refä½¿ç”¨åœºæ™¯"></a>Refä½¿ç”¨åœºæ™¯</h2><p>Reactå®˜æ–¹æ–‡æ¡£æ˜¯è¿™ä¹ˆè¯´çš„ï¼š</p><p>There are a few good use cases for refs: Managing focus, text selection, or media playback.Triggering imperative animations.Integrating with third-party DOM libraries. Avoid using refs for anything that can be done declaratively.</p><p>ç®€å•ç†è§£å°±æ˜¯ï¼Œæ§åˆ¶ä¸€äº›DOMåŸç”Ÿçš„æ•ˆæœï¼Œå¦‚è¾“å…¥æ¡†çš„èšç„¦æ•ˆæœå’Œé€‰ä¸­æ•ˆæœç­‰ï¼›è§¦å‘ä¸€äº›å‘½ä»¤å¼çš„åŠ¨ç”»ï¼›é›†æˆç¬¬ä¸‰æ–¹çš„DOMåº“ã€‚æœ€åè¿˜è¡¥äº†ä¸€å¥ï¼šå¦‚æœè¦å®ç°çš„åŠŸèƒ½å¯ä»¥é€šè¿‡å£°æ˜å¼çš„æ–¹å¼å®ç°ï¼Œå°±ä¸è¦å€ŸåŠ©Refã€‚</p><p>é€šå¸¸æˆ‘ä»¬ä¼šåˆ©ç”¨ render æ–¹æ³•å¾—åˆ°ä¸€ä¸ª App ç»„ä»¶çš„å®ä¾‹ï¼Œç„¶åå°±å¯ä»¥å¯¹å®ƒåšä¸€äº›æ“ä½œã€‚ä½†åœ¨ç»„ä»¶å†…ï¼ŒJSX æ˜¯ä¸ä¼šè¿”å›ä¸€ä¸ªç»„ä»¶çš„å®ä¾‹çš„ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªReactElementï¼Œåªæ˜¯å‘Šè¯‰ä½ ï¼ŒReactè¢«æŒ‚è½½çš„ç»„ä»¶åº”è¯¥ä»€ä¹ˆæ ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myApp = &lt;App /&gt;</span><br></pre></td></tr></table></figure><p>refså°±æ˜¯ç”±æ­¤è€Œç”Ÿï¼Œå®ƒæ˜¯Reactç»„ä»¶ä¸­éå¸¸ç‰¹æ®Šçš„propsï¼Œ å¯ä»¥é™„åŠ åˆ°ä»»ä½•ä¸€ä¸ªç»„ä»¶ä¸Šï¼Œä»å­—é¢æ„æ€ä¸Šçœ‹ï¼Œrefså³referenceï¼Œç»„ä»¶è¢«è°ƒç”¨æ—¶ä¼šåˆ›å»ºä¸€ä¸ªè¯¥ç»„ä»¶çš„å®ä¾‹ï¼Œè€Œrefdå°±ä¼šæŒ‡å‘è¿™ä¸ªå®ä¾‹ã€‚</p><h2 id="Refç”¨æ³•"><a href="#Refç”¨æ³•" class="headerlink" title="Refç”¨æ³•"></a>Refç”¨æ³•</h2><p>å¦‚æœä½œç”¨åœ¨åŸç”Ÿçš„DOMå…ƒç´ ä¸Šï¼Œé€šè¿‡Refè·å–çš„æ˜¯DOMå…ƒç´ ï¼Œå¯ä»¥ç›´æ¥æ“ä½œDOMçš„APIï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomTextInput</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;    </span><br><span class="line">        <span class="keyword">super</span>(props);        </span><br><span class="line">         <span class="keyword">this</span>.focusTextInput = <span class="keyword">this</span>.focusTextInput.bind(<span class="keyword">this</span>);  </span><br><span class="line">    &#125; </span><br><span class="line">    focusTextInput() &#123;    </span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.myTextInput !== <span class="literal">null</span>) &#123;         </span><br><span class="line">             <span class="keyword">this</span>.textInput.current.focus();    </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">    render() &#123;    </span><br><span class="line">         <span class="keyword">return</span> (      </span><br><span class="line">             &lt;div&gt;        </span><br><span class="line">                 &lt;input type=<span class="string">"text"</span> ref=&#123;(ref) =&gt; <span class="keyword">this</span>.myTextInput = ref&#125; /&gt;        </span><br><span class="line">                 &lt;input type=<span class="string">"button"</span> value=<span class="string">"Focus the text input"</span> onClick=&#123;<span class="keyword">this</span>.focusTextInput&#125;/&gt;      </span><br><span class="line">             &lt;<span class="regexp">/div&gt;    </span></span><br><span class="line"><span class="regexp"> </span></span><br><span class="line"><span class="regexp">         );  </span></span><br><span class="line"><span class="regexp">     &#125; </span></span><br><span class="line"><span class="regexp"> &#125;</span></span><br></pre></td></tr></table></figure><p> å¦‚æœä½œç”¨åœ¨è‡ªå®šä¹‰ç»„ä»¶ï¼ŒRefè·å–çš„æ˜¯ç»„ä»¶çš„å®ä¾‹ï¼Œå¯ä»¥ç›´æ¥æ“ä½œç»„ä»¶å†…çš„ä»»æ„æ–¹æ³•ï¼š</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> <span class="class"><span class="keyword">class</span> <span class="title">AutoFocusTextInput</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;    </span><br><span class="line">        <span class="keyword">super</span>(props);    </span><br><span class="line">         <span class="keyword">this</span>.textInput = React.createRef();  </span><br><span class="line">    &#125;  </span><br><span class="line">    componentDidMount() &#123;    </span><br><span class="line">        <span class="keyword">this</span>.textInput.current.focusTextInput();  </span><br><span class="line">    &#125;  </span><br><span class="line">    render() &#123;    </span><br><span class="line">        <span class="keyword">return</span> (      </span><br><span class="line">            &lt;CustomTextInput ref=&#123;<span class="keyword">this</span>.textInput&#125; /&gt;    </span><br><span class="line">        );  </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Refæ€»ç»“"><a href="#Refæ€»ç»“" class="headerlink" title="Refæ€»ç»“"></a>Refæ€»ç»“</h2><p>ä¸ºäº†é˜²æ­¢å†…å­˜æ³„æ¼ï¼Œå½“å¸è½½ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œç»„ä»¶é‡Œæ‰€æœ‰çš„refså°±ä¼šå˜æˆnullã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>findDOMNode</code> å’Œ <code>refs</code> éƒ½æ— æ³•ç”¨äºæ— çŠ¶æ€ç»„ä»¶ä¸­ã€‚å› ä¸ºï¼Œæ— çŠ¶æ€ç»„ä»¶æŒ‚è½½æ—¶åªæ˜¯æ–¹æ³•è°ƒç”¨ï¼Œå¹¶æ²¡æœ‰åˆ›å»ºå®ä¾‹ã€‚</p><p>å¯¹äº React ç»„ä»¶æ¥è®²ï¼Œrefs ä¼šæŒ‡å‘ä¸€ä¸ªç»„ä»¶ç±»å®ä¾‹ï¼Œæ‰€ä»¥å¯ä»¥è°ƒç”¨è¯¥ç±»å®šä¹‰çš„ä»»ä½•æ–¹æ³•ã€‚å¦‚æœéœ€è¦è®¿é—®è¯¥ç»„ä»¶çš„çœŸå® DOM ï¼Œå¯ä»¥ç”¨ ReactDOM ã€‚ findDOMNodeæ¥æ‰¾åˆ° DOM èŠ‚ç‚¹ï¼Œä½†å¹¶ä¸æ¨èè¿™æ ·åšï¼Œå› ä¸ºè¿™å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ‰“ç ´äº†å°è£…æ€§ï¼Œè€Œä¸”é€šå¸¸éƒ½èƒ½ç”¨æ›´æ¸…æ™°çš„æ–¹æ³•åœ¨Reactä¸­æ„å»ºä»£ç ã€‚</p>]]></content:encoded>
      
      <comments>http://mydearest.cn/React%20Refs%E5%92%8CDOM%E6%8F%AD%E5%AF%86.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>flutterå…¥é—¨</title>
      <link>http://mydearest.cn/flutter%E5%85%A5%E9%97%A8.html</link>
      <guid>http://mydearest.cn/flutter%E5%85%A5%E9%97%A8.html</guid>
      <pubDate>Mon, 24 Dec 2018 17:22:30 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;ä»€ä¹ˆæ˜¯flutter&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯flutter&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯flutter&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯flutter&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;Flutter is Googleâ€™s mobil
        
      
      </description>
      
      <content:encoded><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯flutter"><a href="#ä»€ä¹ˆæ˜¯flutter" class="headerlink" title="ä»€ä¹ˆæ˜¯flutter"></a>ä»€ä¹ˆæ˜¯flutter</h2><blockquote><p>Flutter is Googleâ€™s mobile UI framework for crafting high-quality native interfaces on iOS and Android in record time. Flutter works with existing code, is used by developers and organizations around the world,and is free and open source.</p></blockquote><h2 id="ç¯å¢ƒå®‰è£…"><a href="#ç¯å¢ƒå®‰è£…" class="headerlink" title="ç¯å¢ƒå®‰è£…"></a>ç¯å¢ƒå®‰è£…</h2><h3 id="ä¸‹è½½SDK"><a href="#ä¸‹è½½SDK" class="headerlink" title="ä¸‹è½½SDK"></a>ä¸‹è½½SDK</h3><p><a href="https://flutter.io/docs/development/tools/sdk/archive?tab=macos#macos" target="_blank" rel="noopener">https://flutter.io/docs/development/tools/sdk/archive?tab=macos#macos</a>æˆ–è€…git clone -b beta <a href="https://github.com/flutter/flutter.git" target="_blank" rel="noopener">https://github.com/flutter/flutter.git</a></p><h3 id="é•œåƒ"><a href="#é•œåƒ" class="headerlink" title="é•œåƒ"></a>é•œåƒ</h3><p>æ·»åŠ ç¯å¢ƒå˜é‡ .bash_profile<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> ANDROID_HOME=~/Library/Android/sdk</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;ANDROID_HOME&#125;</span>/tools</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$&#123;ANDROID_HOME&#125;</span>/platform-tools</span><br><span class="line"><span class="built_in">export</span> PUB_HOSTED_URL=https://pub.flutter-io.cn</span><br><span class="line"><span class="built_in">export</span> FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn</span><br><span class="line"><span class="built_in">export</span> PATH=/Users/chenyu/treasure/flutter/flutter/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure></p><h3 id="è¿è¡Œflutter-doctoræŸ¥çœ‹æ˜¯å¦éœ€è¦å®‰è£…å…¶å®ƒä¾èµ–é¡¹æ¥å®Œæˆå®‰è£…ï¼š"><a href="#è¿è¡Œflutter-doctoræŸ¥çœ‹æ˜¯å¦éœ€è¦å®‰è£…å…¶å®ƒä¾èµ–é¡¹æ¥å®Œæˆå®‰è£…ï¼š" class="headerlink" title="è¿è¡Œflutter doctoræŸ¥çœ‹æ˜¯å¦éœ€è¦å®‰è£…å…¶å®ƒä¾èµ–é¡¹æ¥å®Œæˆå®‰è£…ï¼š"></a>è¿è¡Œ<code>flutter doctor</code>æŸ¥çœ‹æ˜¯å¦éœ€è¦å®‰è£…å…¶å®ƒä¾èµ–é¡¹æ¥å®Œæˆå®‰è£…ï¼š</h3><p>è¯¥å‘½ä»¤æ£€æŸ¥æ‚¨çš„ç¯å¢ƒå¹¶åœ¨ç»ˆç«¯çª—å£ä¸­æ˜¾ç¤ºæŠ¥å‘Šã€‚Dart SDKå·²ç»åœ¨æ†ç»‘åœ¨Flutteré‡Œäº†ï¼Œæ²¡æœ‰å¿…è¦å•ç‹¬å®‰è£…Dartã€‚ ä»”ç»†æ£€æŸ¥å‘½ä»¤è¡Œè¾“å‡ºä»¥è·å–å¯èƒ½éœ€è¦å®‰è£…çš„å…¶ä»–è½¯ä»¶æˆ–è¿›ä¸€æ­¥éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆä»¥ç²—ä½“æ˜¾ç¤ºï¼‰</p><h2 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h2><ol><li><p>åœ¨AndroidStudioå®‰è£…Dartæ’ä»¶ã€‚å¯åŠ¨studioï¼Œæœç´¢flutterï¼Œè‡ªåŠ¨å®‰è£…Dartæ’ä»¶ï¼Œå®Œæˆåé‡å¯studioã€‚ </p></li><li><p>Android Studio - File - New -New Flutter Project</p></li></ol><h3 id="æ–‡ä»¶å…¥å£"><a href="#æ–‡ä»¶å…¥å£" class="headerlink" title="æ–‡ä»¶å…¥å£"></a>æ–‡ä»¶å…¥å£</h3><p>é¡¹ç›®è·¯å¾„ä¸‹çš„libæ–‡ä»¶å¤¹ä¸‹çš„main.dartæ–‡ä»¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>; <span class="comment">//å¯¼åŒ…</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span> </span>=&gt; runApp(<span class="keyword">new</span> MyApp());</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="comment">// This widget is the root of your application.</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="function">Widget <span class="title">build</span><span class="params">(BuildContext context)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MaterialAp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content:encoded>
      
      <comments>http://mydearest.cn/flutter%E5%85%A5%E9%97%A8.html#disqus_thread</comments>
    </item>
    
  </channel>
</rss>
