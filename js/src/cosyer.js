$(function(){var e=["/live2dw/assets/hijiki.model.json","/live2dw/assets/tororo.model.json"][Math.round(Math.random())],t=0,n=0,a=0,o=0;$(window).width()<=1024?(t=1,n=1.6,a=6,o=-116):(n=1.8,t=.8,a=0,o=-126),L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",model:{jsonPath:e},display:{superSample:n,position:"left",width:90,height:220,hOffset:a,vOffset:o},mobile:{show:!0,scale:.8},react:{opacityDefault:t,opacityOnHover:.2}});const i=(e,t)=>{for(var n=e.toString();n.length<t;)n="0"+n;return n};var s=function(e){try{var t=e.getTime(),n=(new Date).getTime()-t,a=e.getMonth()+1,o=(new Date).getMonth()+1-a;e.setMonth(a),e.setDate(0);var s=e.getDate(),r=Math.floor(n/864e5);if(0===r){var l=n%864e5,d=Math.floor(l/36e5);if(0===d){var c=l%36e5,h=Math.floor(c/6e4);if(0===h){var u=c%6e4;return{counts:Math.round(u/1e3),text:"秒前"}}return{counts:h,text:"分钟前"}}return{counts:d,text:"小时前"}}return r<0?{counts:"😜",text:"刚刚"}:r<=s?{counts:r,text:"天前"}:o<3?{counts:o,text:"月前"}:(e=>{var t=i(e.getDate(),2),n=i(e.getMonth()+1,2);i(e.getFullYear(),2);return{counts:t,text:n+"月"}})(e)}catch(e){console.log(e)}};function r(e,t,n){var a,o=new Date;return function(){var i=arguments,s=new Date;clearTimeout(a),s-o>=n?(e.apply(this,i),o=s):a=setTimeout(e,t)}}function l(){var e=$(document).height(),t=$(window).scrollTop(),n=$(window).height(),a=t/((e-n)/100);window.requestAnimationFrame(function(){$("#load").css("width",a+"%"),a>=99.5?$("#load").hide():$("#load").show(),t>57?$("#header").addClass("light-header").removeClass("dark"):$("#header").removeClass("light-header").addClass("dark")})}$(".post-date").each(function(){$(this).find(".post-time-text").text(s(new Date($(this).data("datetime"))).text),$(this).find(".post-time-count").text(s(new Date($(this).data("datetime"))).counts)}),$(".archive .posts-collapse .post-title a>span.archive-title").each(function(){$(this).append('<span class="archive-updated"></span>').find(".archive-updated").html('更新于：<time class="updated">'+$(this).attr("updated")+"</time")}),$(".category-all .category-list-item").on("click",function(){return window.location.href=$(this).find("a").attr("href"),!1}),$(".github-corner svg").css({width:"60px",height:"60px"}),POWERMODE.colorful=!0,POWERMODE.shake=!1,document.body.addEventListener("input",POWERMODE),$("#header").addClass("dark").addClass("animated"),$(".sidebar-toggle").on("click",function(){$("#header").toggleClass("header-has-sidebar")}),$(".popup-trigger.faa-parent.animated-hover").on("click",function(){$("#main").hide(),$(".sidebar-toggle").hide(),$(".back-to-top.back-to-top-on").hide(),$("#sidebar").hide(),$("#header").removeClass("slideInDown"),$(".local-search-popup .local-search-header").addClass("search-middle")}),$(".popup-btn-close").on("click",function(){$("#main").show(),$(".sidebar-toggle").show(),$("#sidebar").show(),$(".back-to-top.back-to-top-on").show()}),$("#local-search-input").on("change keydown",function(){$(".local-search-popup .local-search-header").removeClass("search-middle")});var d=0,c=0;$(document).on("scroll",function(e){r(l,1e3/60,100)(),d=$(this).scrollTop(),c<=d?($(window).scrollTop()>10&&($("#header").hasClass("slideOutUp")||$("#header").addClass("slideOutUp").removeClass("slideInDown"),$("#load").hasClass("header")&&$("#load").removeClass("header")),$(window).scrollTop()==$(document).height()-$(window).height()&&"function"==typeof showMessage&&showMessage("喵~ 页面到底了，点击右下角箭头 ⬆️ ，可回到顶部",3e3)):($("#load").hasClass("header")||$("#load").addClass("header"),$("#header").hasClass("slideOutUp")&&$("#header").removeClass("slideOutUp").addClass("slideInDown")),setTimeout(function(){c=d},0)}),$(window).resize(function(){r(l,1e3/60,100)(),$(window).width()<=990?$("#header").removeClass("header-has-sidebar"):$("#sidebar").width()>0&&$("#header").addClass("header-has-sidebar")});var h=null;function u(){0==$(h).text().indexOf("Safari")?$(h).prepend('<img class="Safari" src="/images/ua/Safari.svg">'):0==$(h).text().indexOf("Mac OS")||0==$(h).text().indexOf("iOS")?$(h).prepend('<img class="Apple" src="/images/ua/Apple.svg">'):0==$(h).text().indexOf("Chrome")?$(h).prepend('<img class="Chrome" src="/images/ua/Chrome.svg">'):0==$(h).text().indexOf("Firefox")?$(h).prepend('<img class="Firefox" src="/images/ua/Firefox.svg">'):0==$(h).text().indexOf("Windows 10")?$(h).prepend('<img class="Windows10" src="/images/ua/windows10.svg">'):0==$(h).text().indexOf("Windows")||0==$(h).text().indexOf("Windows 7")||0==$(h).text().indexOf("Windows 8")||0==$(h).text().indexOf("Windows 9")?$(h).prepend('<img class="Windows7" src="/images/ua/windows7.svg">'):0==$(h).text().indexOf("Android")?$(h).prepend('<img class="Android" src="/images/ua/Android.svg">'):0==$(h).text().indexOf("Ubuntu")?$(h).prepend('<img class="Ubuntu" src="/images/ua/ubuntu.svg">'):0==$(h).text().indexOf("Linux")?$(h).prepend('<img class="Linux" src="/images/ua/Linux.svg">'):0==$(h).text().indexOf("Microsoft Edge")||0==$(h).text().indexOf("MSIE")?$(h).prepend('<img class="IE" src="/images/ua/IE.png">'):0==$(h).text().indexOf("Sogou")&&$(h).prepend('<img class="sogou" src="/images/ua/sogou.svg">')}var m=setInterval(function(){var t;if(0==$("#live2d-widget .per-tips").length){if($("#live2d-widget").prepend('<div class="per-tips"></div >'),t="/live2dw/assets/hijiki.model.json"==e?'喵~ 我是 <span style="color:#fdb9b9">hijiki&nbsp;🐱</span>...</br>':'喵~ 我是 <span style="color:#fdb9b9">tororo&nbsp;🐱</span>...</br>',""!==document.referrer&&"http://mydearest.cn/"!==document.referrer){var n=document.createElement("a");n.href=document.referrer;var a=n.hostname.split(".")[1];"mydearest.cn"==n.hostname?t+='欢迎来到&nbsp;<span style="color:rgba(239, 47, 17, 0.8);">『'+document.title.split(" | ")[0]+"』</span>,感谢您继续参观本站 🙂":t+="baidu"==a?'来自 百度搜索 的朋友<br>你是搜索 <span style="color:rgba(239, 47, 17, 0.8);">'+n.search.split("&wd=")[1].split("&")[0]+"</span> 找到的我吗？":"so"==a?'来自 360搜索 的朋友<br>你是搜索 <span style="color:rgba(239, 47, 17, 0.8);">'+n.search.split("&q=")[1].split("&")[0]+"</span> 找到的我吗？":"google"==a?'来自 谷歌搜索 的朋友<br>欢迎阅读<span style="color:rgba(239, 47, 17, 0.8);">『'+document.title.split(" - ")[0]+"』</span>":'来自<span style="color:rgba(239, 47, 17, 0.8);">&nbsp;'+n.hostname+'&nbsp;</span>的朋友,欢迎来到<span style="color:rgba(239, 47, 17, 0.8);">『'+document.title.split(" | ")[0]+"』</span>&nbsp;玩耍 🙂"}else if(null!==localStorage.getItem("ValineCache")&&"http://mydearest.cn/"==window.location.href)t+='<span style="color:rgba(239, 47, 17, 0.8);"><strong>&nbsp;'+JSON.parse(localStorage.getItem("ValineCache")).nick+"&nbsp;</strong></span>欢迎回来！要继续看 👀 些什么吗";else if("http://mydearest.cn/"==window.location.href){var o=(new Date).getHours();t+=o>23||o<=5?"你是夜猫子呀？这么晚还不睡觉，明天起的来嘛":o>5&&o<=7?"早上好！一日之计在于晨，美好的一天就要开始了":o>7&&o<=11?"上午好！工作顺利嘛，不要久坐，多起来走动走动哦！":o>11&&o<=14?"中午了，工作了一个上午，现在是午餐时间！":o>14&&o<=17?"午后很容易犯困呢，今天的运动目标完成了吗？":o>17&&o<=19?"傍晚了！窗外夕阳的景色很美丽呢，最美不过夕阳红~":o>19&&o<=21?"晚上好，今天过得怎么样？":o>21&&o<=23?"已经这么晚了呀，早点休息吧，晚安~":"快来逗我玩吧！"}else t='欢迎阅读<span style="color:rgba(239, 47, 17, 0.8);">『'+document.title.split(" | ")[0]+"』</span>";showMessage(t,6e3)}else clearInterval(m)},100),p=setInterval(function(){0==$(".vhead:first .vsys>img").length?$(".vhead .vsys").each(function(){h=this,u()}):clearInterval(p)},100),f=setInterval(function(){0==$('.vhead .vname[href="http://mydearest.cn/"]~.bozhu').length?$('.vhead .vname[href="http://mydearest.cn/"]').after('<span class = "bozhu">博主</span>'):clearInterval(f)},100);$(".vsubmit.vbtn").on("click",function(){var e=setInterval(function(){0==$(".vhead:first .vsys>img").length?$(".vhead:first .vsys").each(function(){h=this,u()}):clearInterval(e)},1e3),t=setInterval(function(){0==$(".vhead").eq(0).find('.vname[href="http://mydearest.cn/"]~.bozhu').length?$(".vhead").eq(0).find('.vname[href="http://mydearest.cn/"]').after('<span class = "bozhu">博主</span>'):clearInterval(t)},1e3)}),$(document).on("click",".vmore.vbtn",function(){var e=setInterval(function(){0==$(".vhead:last .vsys>img").length?$(".vhead .vsys").each(function(){-1==$(this).html().indexOf("img")&&(h=this,u())}):clearInterval(e)},1e3),t=setInterval(function(){0==$('.vhead:last .vname[href="http://mydearest.cn/"]~.bozhu').length?$('.vhead .vname[href="http://mydearest.cn/"]').each(function(){0==$(this).siblings(".bozhu").length&&$(this).after('<span class = "bozhu">博主</span>')}):clearInterval(t)},1e3)});!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?653a4be35cb6c7b26817038a17c3f0d6";var t=document.getElementsByTagName("script").length,n=document.getElementsByTagName("script")[t-1];n.parentNode.insertBefore(e,n)}(),"serviceWorker"in navigator?navigator.serviceWorker.register("/sw.js").then(function(){navigator.serviceWorker.controller?console.log("Assets cached by the controlling service worker."):console.log("Please reload this page to allow the service worker to handle network operations.")}).catch(function(e){console.log("ERROR: "+e)}):console.log("Service workers are not supported in the current browser.")}),function(){function e(e,t,n){return e.getAttribute(t)||n}function t(e){return document.getElementsByTagName(e)}function n(){o=d.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=d.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}function a(){u.clearRect(0,0,o,i);var e,t,n,s,r,l,d=[f].concat(g);g.forEach(function(a){for(a.x+=a.xa,a.y+=a.ya,a.xa*=a.x>o||a.x<0?-1:1,a.ya*=a.y>i||a.y<0?-1:1,u.fillRect(a.x-.5,a.y-.5,1,1),t=0;t<d.length;t++)a!==(e=d[t])&&null!==e.x&&null!==e.y&&(s=a.x-e.x,r=a.y-e.y,(l=s*s+r*r)<e.max&&(e===f&&l>=e.max/2&&(a.x-=.03*s,a.y-=.03*r),n=(e.max-l)/e.max,u.beginPath(),u.lineWidth=n/2,u.strokeStyle="rgba("+c.c+","+(n+.2)+")",u.moveTo(a.x,a.y),u.lineTo(e.x,e.y),u.stroke()));d.splice(d.indexOf(a),1)}),m(a)}var o,i,s,r,l,d=document.createElement("canvas"),c=(s=t("script"),r=s.length,l=s[r-1],{l:r,z:e(l,"zIndex",-1),o:e(l,"opacity",1),c:e(l,"color","255,255,255"),n:e(l,"count",99)}),h="c_n"+c.l,u=d.getContext("2d"),m=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/45)},p=Math.random,f={x:null,y:null,max:2e4};d.id=h,d.style.cssText="position:fixed;top:0;left:0;z-index:"+c.z+";opacity:"+c.o,t("body")[0].appendChild(d),n(),window.onresize=n,window.onmousemove=function(e){e=e||window.event,f.x=e.clientX,f.y=e.clientY},window.onmouseout=function(){f.x=null,f.y=null};for(var g=[],v=0;c.n>v;v++){var w=p()*o,$=p()*i,x=2*p()-1,b=2*p()-1;g.push({x:w,y:$,xa:x,ya:b,max:6e3})}setTimeout(function(){a()},100)}(),function(e){e.fn.snow=function(t){var n=e('<div id="flake" />').css({position:"absolute",top:"-50px"}).html("&#10052;"),a=e(document).height(),o=e(document).width();t=e.extend({},{minSize:10,maxSize:20,newOn:500,flakeColor:"#FFFFFF"},t),setInterval(function(){var i=Math.random()*o-100,s=.5+Math.random(),r=t.minSize+Math.random()*t.maxSize,l=a-40,d=i-100+200*Math.random(),c=10*a+5e3*Math.random();n.clone().appendTo("body").css({left:i,opacity:s,"font-size":r,color:t.flakeColor}).animate({top:l,left:d,opacity:.2},c,"linear",function(){e(this).remove()})},t.newOn)}}(jQuery),$.fn.snow({minSize:5,maxSize:50,newOn:1e3,flakeColor:"#00F"});var titleTime,OriginTitle=document.title;document.addEventListener("visibilitychange",function(){document.hidden?($('[rel="icon"]').attr("href","/img/TEP.ico"),document.title="╭(°A°`)╮ 页面崩溃啦 ~",clearTimeout(titleTime)):($('[rel="icon"]').attr("href","/favicon.ico"),document.title="(ฅ>ω<*ฅ) 噫又好了~"+OriginTitle,titleTime=setTimeout(function(){document.title=OriginTitle},2e3))});