[{"title":"HTMLä¸­pæ ‡ç­¾ä¸­æ’å…¥divæ ‡ç­¾ä¼šå‘ç”Ÿä»€ä¹ˆ","url":"%2F2020%2FHTML%E4%B8%ADp%E6%A0%87%E7%AD%BE%E4%B8%AD%E6%8F%92%E5%85%A5div%E6%A0%87%E7%AD%BE%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88.html","content":"\né¢è¯•é‡åˆ°äº†é—®é¢˜:`<p>ä¸­èƒ½ä¸èƒ½æ’å…¥<div>? æ’å…¥<div>ä¼šå¦‚ä½•?`\n\nå…ˆç›´æ¥å®è·µä¸‹ï¼š\n\n![div1](http://cdn.mydearest.cn/blog/images/div1.png)\n\n> æˆ‘ä»¬å¯ä»¥çœ‹åˆ°,<div>æŠŠ<p>åˆ†æˆäº†ä¸¤æ®µ, å¹¶ä¸”divå¤–å­—æ®µå¹¶ä¸åœ¨<p>å†…ã€‚æŠŠdivå˜æˆè¡Œå†…å—çº§å…ƒç´ ä¹Ÿä¸è¡Œã€‚\n\n![div2](http://cdn.mydearest.cn/blog/images/div2.png)\n\nè§£ç­”:\nå¯ä»¥åœ¨HTMLæ ‡å‡†(https://www.w3.org/TR/html401/struct/text.html#h-9.3.1)ä¸­çœ‹åˆ°,\n> <p>è™½ç„¶æ˜¯å—çº§å…ƒç´ , ä½†æ˜¯åªèƒ½åŒ…å«è¡Œå†…å…ƒç´ , ä¸èƒ½åŒ…å«å—çº§å…ƒç´ (åŒ…æ‹¬<p>è‡ªå·±)\n\n![div3](http://cdn.mydearest.cn/blog/images/div3.png)\n\nover!\n","tags":["å‰ç«¯"],"categories":["çŸ¥è¯†"]},{"title":"Docker","url":"%2F2020%2Freact-native%E5%B0%8F%E7%BB%93.html","content":"\n## å‰è¨€\nreact-nativeå¼€å‘ä½¿ç”¨çš„æ˜¯JS,ä½†æ˜¯å¹¶ä¸æ˜¯çº¯æ­£çš„JS,è€Œæ˜¯ä¸€ç§JSXè¯­è¨€ï¼Œå°±æ˜¯åœ¨JSä¸­åµŒå…¥XMLè¯­è¨€ï¼Œå› æ­¤ï¼Œåªè¦æœ‰ä¸€äº›JSçš„è¯­æ³•åŸºç¡€çš„åŸç”Ÿå¼€å‘è€…ï¼Œå°±å¯ä»¥è‚¯å®¹æ˜“ç†è§£JSXçš„è¯­æ³•äº†ï¼Œåœ¨RNä¸­ï¼Œæ¨èä½¿ç”¨ES6çš„è¯­æ³•ã€‚\n\n## æ€§èƒ½\nä½¿ç”¨react-nativeå¼€å‘çš„æœ€å¤§çš„æœ‰ç‚¹åœ¨äºå¼€å‘æ•ˆç‡ï¼ŒåŠ å…¥APPå¹¶ä¸å¤æ‚çš„è¯ï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥ä½¿ç”¨çº¯JSå¼€å‘ï¼Œä¹Ÿå°±æ˜¯Androidå’ŒiOSå…¬ç”¨ä¸€å¥—ç•Œé¢å’Œé€»è¾‘ã€‚æå¤§çš„æé«˜äº†å¼€å‘æ•ˆç‡ã€‚åœ¨æ€§èƒ½ä¸Šï¼ŒRNçš„è¡¨ç°æ¯”åŸç”Ÿå¼±ä¸€äº›ï¼Œä½†\næ˜¯è¿œå¥½äºH5ã€‚æ‰€ä»¥æ€»ä½“æ¥çœ‹ï¼Œå…¶å®RNçš„æœªæ¥è¿˜æ˜¯å¯ä»¥æœŸå¾…çš„ã€‚\n\n## è¿è¡Œæœºåˆ¶\nRNæ˜¯è¿è¡ŒJSçš„ï¼ŒAndroidæ˜¯è¿è¡ŒJavaå­—èŠ‚ç çš„ï¼Œæ‰€ä»¥ï¼Œå®é™…ä¸ŠJSä»£ç çš„æœ€ç»ˆè¿è¡Œæ˜¯é€šè¿‡ä¸€å±‚å°è£…ï¼ŒæŠŠJSçš„ä»£ç æ˜ å°„æˆåŸç”Ÿä»£ç ï¼Œè€Œç•Œé¢ä¸Šçš„å…ƒç´ æœ€ç»ˆä½¿ç”¨çš„ä¹Ÿæ˜¯åŸç”Ÿçš„ç»„ä»¶ï¼Œè€Œä¸æ˜¯è‡ªå·±æ¸²æŸ“ï¼ˆæ‰€ä»¥åœ¨æ€§èƒ½ä¸Šï¼ŒRNæ¯”H5è¦\nå¥½å¾ˆå¤šï¼‰ã€‚\n\n## Componentç®€ä»‹\nåœ¨Androidä¸­ï¼Œä¸»è¦äº¤äº’å®¹å™¨æ˜¯activityæˆ–Fragment,è€Œåœ¨RNä¸­ï¼Œç•Œé¢çš„äº¤äº’å®¹å™¨æ˜¯Componentï¼šç»„ä»¶ã€‚æˆ‘è§‰å¾—Componentå’ŒåŸç”Ÿçš„Fragmentå…¶å®å¾ˆåƒï¼Œéƒ½å­˜åœ¨äºactivityä¸­ï¼Œéƒ½å—åˆ¶äºactivityçš„ç”Ÿå‘½å‘¨æœŸï¼Œéƒ½å¯å¸\nè½½å’Œè£…è½½ã€‚\n\n---\n<!--more-->\n\n## åŸæœ‰æ¶æ„å’Œé—®é¢˜\n1. ç”¨æˆ·ç¼–å†™çš„Reactä»£ç \n2. Reactä»£ç è½¬æ¢ä¹‹åçš„js\n3. The Bridge\n4. Native side\n\n- ç»„ä»¶å’Œ API å¤ªè¿‡ä¾èµ– JSBridge çš„åˆå§‹åŒ–ï¼Œè€Œä¸”é€šè®¯èƒ½åŠ›ä¹Ÿå±€é™äºè¿™ä¸€æ¡é€šé“ã€‚\n- JSå’ŒNativeä¹‹é—´å¹¶ä¸çœŸæ­£ç›´æ¥é€šä¿¡ï¼Œå®ƒä»¬çš„é€šä¿¡ä¾èµ–äºè·¨Bridgeä¼ è¾“çš„å¼‚æ­¥JSONæ¶ˆæ¯ã€‚\n\n> UI çš„æ¸²æŸ“è¿‡ç¨‹åˆ†ä¸ºä¸‰å±‚ï¼šJS ä¸šåŠ¡å±‚ã€shadow treeã€åŸç”Ÿ UI å±‚ã€‚\n\nå…¶ä¸­ JS å’Œ shadow tree æ˜¯é€šè¿‡ JSBridge æ¥åŒæ­¥æ•°æ®çš„ï¼ŒJS å±‚ä¼šå°†æ‰€æœ‰ UI node ç”Ÿæˆä¸€ä¸² JSON æ•°æ®ï¼Œä¼ é€’åˆ°åŸç”Ÿ shadow å±‚ï¼ŒåŸç”Ÿ shadow å±‚é€šè¿‡ä¼ å…¥ node æ•°æ®ï¼Œæ–°å¢æ–° UI æˆ–è€…åˆ é™¤ä¸€äº›ä¸éœ€è¦çš„ \nUI ç»„ä»¶ã€‚\n\nä»æ¸²æŸ“çš„å±‚æ¬¡æ¥çœ‹ï¼ŒReact Native æ˜¯å¤šçº¿ç¨‹è¿è¡Œçš„ï¼Œæœ€å¸¸è§çš„æ˜¯ JS çº¿ç¨‹å’ŒåŸç”Ÿç«¯çš„çº¿ç¨‹ï¼Œä¸€æ—¦çº¿ç¨‹é—´å¼‚å¸¸ï¼ŒJSBridge æ•´ä½“å°†ä¼šé˜»å¡ï¼Œæˆ‘ä»¬ç»å¸¸ä¹Ÿèƒ½çœ‹åˆ° JS è¿è¡Œå¼‚å¸¸äº†ï¼Œå®é™… JS çº¿ç¨‹å·²ç»æ— å“åº”äº†ï¼Œä½†åŸç”Ÿç«¯\nè¿˜èƒ½å“åº”æ»šåŠ¨äº‹ä»¶ã€‚\n\n##  æ–°çš„æ¶æ„\n\n> RN åœ¨ 0.59 ç‰ˆæœ¬ä½¿ç”¨ JSI å–ä»£äº†å…ˆå‰çš„ JSBridgeã€‚\nåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š\n- Fabricï¼Œæ–°æ¶æ„çš„UI manager\n- TurboModulesï¼Œè¿™ä¸ªä¸nativeç«¯äº¤äº’çš„æ–°ä¸€ä»£å®ç°\n\nç°åœ¨ä¸éœ€è¦åºåˆ—åŒ–æˆJSONå¹¶åŒå‘ä¼ é€’ç­‰ä¸€ç³»åˆ—æ“ä½œï¼Œå®ç°äº†Nativeå’Œ JSé—´çš„ç›´æ¥åŒæ­¥é€šè®¯ã€‚\n","tags":["react"],"categories":["React"]},{"title":"Vueä¸­axiosçš„å°è£…","url":"%2F2020%2FVue%E4%B8%ADaxios%E7%9A%84%E5%B0%81%E8%A3%85.html","content":"\n## èŠèŠ Vue ä¸­ axios çš„å°è£…\naxios æ˜¯ Vue å®˜æ–¹æ¨èçš„ä¸€ä¸ª HTTP åº“ï¼Œç”¨ axios å®˜æ–¹ç®€ä»‹æ¥ä»‹ç»å®ƒï¼Œå°±æ˜¯ï¼š\n\n> Axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œå¯ä»¥ç”¨åœ¨æµè§ˆå™¨å’Œ node.js ä¸­ã€‚\n\nä½œä¸ºä¸€ä¸ªä¼˜ç§€çš„ HTTP åº“ï¼Œaxios æ‰“è´¥äº†æ›¾ç»ç”± Vue å®˜æ–¹å›¢é˜Ÿç»´æŠ¤çš„ vue-resourceï¼Œè·å¾—äº† Vue ä½œè€…å°¤å°å³çš„å¤§åŠ›æ¨èï¼Œæˆä¸ºäº† Vue é¡¹ç›®ä¸­ HTTP åº“çš„æœ€ä½³é€‰æ‹©ã€‚\n\nè™½ç„¶ï¼Œaxios æ˜¯ä¸ªä¼˜ç§€çš„ HTTP åº“ï¼Œä½†æ˜¯ï¼Œç›´æ¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨å¹¶ä¸æ˜¯é‚£ä¹ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œä¸€å®šç¨‹åº¦ä¸Šçš„é…ç½®å°è£…ï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œæ–¹ä¾¿è°ƒç”¨ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°±æ¥èŠèŠ Vue ä¸­ axios çš„å°è£…ã€‚\n\n---\n<!--more-->\n\n### å¼€å§‹\nå…¶å®ï¼Œç½‘ä¸Šå…³äº axios å°è£…çš„ä»£ç ä¸å°‘ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†éƒ½æ˜¯åœ¨å…¥å£æ–‡ä»¶ï¼ˆmain.jsï¼‰ä¸­è¿›è¡Œ axios å…¨å±€å¯¹è±¡å±æ€§å®šä¹‰çš„å½¢å¼è¿›è¡Œé…ç½®ï¼Œç±»ä¼¼äºå¦‚ä¸‹ä»£ç ï¼š\n\n```js\naxios.defaults.timeout = 10000\n```\n\nè¯¥æ–¹æ¡ˆæœ‰ä¸¤ä¸ªä¸è¶³ï¼Œé¦–å…ˆï¼Œaxios å°è£…ä»£ç è€¦åˆè¿›å…¥å…¥å£æ–‡ä»¶ï¼Œä¸æ–¹ä¾¿åæœŸç»´æŠ¤ï¼›å…¶æ¬¡ï¼Œä½¿ç”¨ axios å…¨å±€å¯¹è±¡å±æ€§å®šä¹‰çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œä»£ç è¿‡äºé›¶æ•£ã€‚\n\n1. é’ˆå¯¹é—®é¢˜ä¸€ï¼Œæˆ‘ä½¿ç”¨äº† Vue æºç ç»“æ„ä¸­çš„ä¸€å¤§æ ¸å¿ƒæ€æƒ³â€”â€”å°†åŠŸèƒ½æ‹†åˆ†ä¸ºæ–‡ä»¶ï¼Œæ–¹ä¾¿åæœŸçš„ç»´æŠ¤ã€‚å•ç‹¬åˆ›å»ºä¸€ä¸ª `http.js` æˆ–è€… `http.ts` æ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­å¼•å…¥ axios å¹¶å¯¹å…¶è¿›è¡Œå°è£…é…ç½®ï¼Œæœ€åå°†å…¶å¯¼å‡ºå¹¶æŒ‚è½½åˆ° Vue çš„åŸå‹ä¸Šå³å¯ã€‚æ­¤æ—¶ï¼Œæ¯æ¬¡ä¿®æ”¹ axios é…ç½®ï¼Œåªéœ€è¦ä¿®æ”¹å¯¹åº”çš„æ–‡ä»¶å³å¯ï¼Œä¸ä¼šå½±å“åˆ°ä¸ç›¸å…³çš„åŠŸèƒ½ã€‚\n\n2. é’ˆå¯¹é—®é¢˜äºŒï¼Œé‡‡ç”¨ axios å®˜æ–¹æ¨èçš„ï¼Œé€šè¿‡é…ç½®é¡¹åˆ›å»º axios å®ä¾‹çš„æ–¹å¼è¿›è¡Œé…ç½®å°è£…ã€‚\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```js\n// http.js\nimport axios from 'axios'\n// åˆ›å»º axios å®ä¾‹\nconst service = axios.create({\n  // é…ç½®é¡¹\n})\n```\n\n### æ ¹æ®ç¯å¢ƒè®¾ç½® baseURL\nbaseURL å±æ€§æ˜¯è¯·æ±‚åœ°å€å‰ç¼€ï¼Œå°†è‡ªåŠ¨åŠ åœ¨ url å‰é¢ï¼Œé™¤é url æ˜¯ä¸ªç»å¯¹åœ°å€ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹å’Œç”Ÿäº§æ¨¡å¼ä¸‹æœ‰ç€ä¸åŒçš„ baseURLï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒçš„ç¯å¢ƒåˆ‡æ¢ä¸åŒçš„ baseURLã€‚\n\nåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œç”±äºæœ‰ç€ devServer çš„å­˜åœ¨ï¼Œéœ€è¦æ ¹æ®å›ºå®šçš„ url å‰ç¼€è¿›è¡Œè¯·æ±‚åœ°å€é‡å†™ï¼Œæ‰€ä»¥ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œå°† baseURL è®¾ä¸ºæŸä¸ªå›ºå®šçš„å€¼ï¼Œæ¯”å¦‚ï¼š`/apis`ã€‚\n\nåœ¨ç”Ÿäº§æ¨¡å¼ä¸‹ï¼Œæ ¹æ® Java æ¨¡å—çš„è¯·æ±‚å‰ç¼€çš„ä¸åŒï¼Œå¯ä»¥è®¾ç½®ä¸åŒçš„ baseURLã€‚\n\nå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n\n```js\n// æ ¹æ® process.env.NODE_ENV åŒºåˆ†çŠ¶æ€ï¼Œåˆ‡æ¢ä¸åŒçš„ baseURL\nconst service = axios.create({\n\tbaseURL: process.env.NODE_ENV === 'production' ? `/java` : '/apis',\n})\n```\n\n### ç»Ÿä¸€è®¾ç½®è¯·æ±‚å¤´\nåœ¨è¿™é‡Œå’Œå¤§å®¶èŠä¸€ä¸ªé—®é¢˜ï¼Œä»€ä¹ˆæ˜¯å°è£…ï¼Ÿåœ¨æˆ‘çœ‹æ¥ï¼Œå°è£…æ˜¯é€šè¿‡æ›´å°‘çš„è°ƒç”¨ä»£ç è¦†ç›–æ›´å¤šçš„è°ƒç”¨åœºæ™¯ã€‚\n\nç”±äºï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¯·æ±‚å¤´éƒ½æ˜¯å›ºå®šçš„ï¼Œåªæœ‰å°‘éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä¼šéœ€è¦ä¸€äº›ç‰¹æ®Šçš„è¯·æ±‚å¤´ï¼Œæ‰€ä»¥ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯ï¼Œå°†æ™®é€‚æ€§çš„è¯·æ±‚å¤´ä½œä¸ºåŸºç¡€é…ç½®ã€‚å½“éœ€è¦ç‰¹æ®Šè¯·æ±‚å¤´æ—¶ï¼Œå°†ç‰¹æ®Šè¯·æ±‚å¤´ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œè¦†ç›–åŸºç¡€é…ç½®ã€‚\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```js\nconst service = axios.create({\n    ...\n\theaders: {\n        get: {\n          'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8'\n          // åœ¨å¼€å‘ä¸­ï¼Œä¸€èˆ¬è¿˜éœ€è¦å•ç‚¹ç™»å½•æˆ–è€…å…¶ä»–åŠŸèƒ½çš„é€šç”¨è¯·æ±‚å¤´ï¼Œå¯ä»¥ä¸€å¹¶é…ç½®è¿›æ¥\n        },\n        post: {\n          'Content-Type': 'application/json;charset=utf-8'\n          // åœ¨å¼€å‘ä¸­ï¼Œä¸€èˆ¬è¿˜éœ€è¦å•ç‚¹ç™»å½•æˆ–è€…å…¶ä»–åŠŸèƒ½çš„é€šç”¨è¯·æ±‚å¤´ï¼Œå¯ä»¥ä¸€å¹¶é…ç½®è¿›æ¥\n        }\n  },\n})\n```\n\n### è·¨åŸŸã€è¶…æ—¶ã€å“åº”ç å¤„ç†\naxios ä¸­ï¼Œæä¾›æ˜¯å¦å…è®¸è·¨åŸŸçš„å±æ€§â€”â€”withCredentialsï¼Œä»¥åŠé…ç½®è¶…æ—¶æ—¶é—´çš„å±æ€§â€”â€”timeoutï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå±æ€§ï¼Œå¯ä»¥è½»æ¾å¤„ç†è·¨åŸŸå’Œè¶…æ—¶çš„é—®é¢˜ã€‚\n\nä¸‹é¢ï¼Œæˆ‘ä»¬æ¥è¯´è¯´å“åº”ç å¤„ç†ï¼š\n\naxios æä¾›äº† validateStatus å±æ€§ï¼Œç”¨äºå®šä¹‰å¯¹äºç»™å®šçš„HTTP å“åº”çŠ¶æ€ç æ˜¯ resolve æˆ– reject promiseã€‚æ‰€ä»¥ï¼Œæ­£å¸¸è®¾ç½®çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šå°†çŠ¶æ€ç ä¸º 2 ç³»åˆ—æˆ–è€… 304 çš„è¯·æ±‚è®¾ä¸º resolve çŠ¶æ€ï¼Œå…¶ä½™ä¸º reject çŠ¶æ€ã€‚ç»“æœå°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸šåŠ¡ä»£ç é‡Œï¼Œä½¿ç”¨ catch ç»Ÿä¸€æ•è·å“åº”é”™è¯¯çš„è¯·æ±‚ï¼Œä»è€Œè¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚\n\nä½†æ˜¯ï¼Œç”±äºæˆ‘åœ¨ä»£ç é‡Œé¢ä½¿ç”¨äº† async-awaitï¼Œè€Œä¼—æ‰€å‘¨çŸ¥ï¼Œasync-await æ•è· catch çš„æ–¹å¼æä¸ºéº»çƒ¦ï¼Œæ‰€ä»¥ï¼Œåœ¨æ­¤å¤„ï¼Œæˆ‘é€‰æ‹©å°†æ‰€æœ‰å“åº”éƒ½è®¾ä¸º resolve çŠ¶æ€ï¼Œç»Ÿä¸€åœ¨ then å¤„ç†ã€‚\n\næ­¤éƒ¨åˆ†ä»£ç å¦‚ä¸‹ï¼š\n\n```js\nconst service = axios.create({\n\t// è·¨åŸŸè¯·æ±‚æ—¶æ˜¯å¦éœ€è¦ä½¿ç”¨å‡­è¯\n\twithCredentials: true,\n    // è¯·æ±‚ 30s è¶…æ—¶\n\ttimeout: 30000,\n\tvalidateStatus: function () {\n\t\t// ä½¿ç”¨async-awaitï¼Œå¤„ç†rejectæƒ…å†µè¾ƒä¸ºç¹çï¼Œæ‰€ä»¥å…¨éƒ¨è¿”å›resolveï¼Œåœ¨ä¸šåŠ¡ä»£ç ä¸­å¤„ç†å¼‚å¸¸\n\t\treturn true\n\t},\n})\n```\n\n### è¯·æ±‚ã€å“åº”å¤„ç†\nåœ¨ä¸ä½¿ç”¨ axios çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡è¯·æ±‚æˆ–è€…æ¥å—å“åº”ï¼Œéƒ½éœ€è¦å°†è¯·æ±‚æˆ–è€…å“åº”åºåˆ—åŒ–ã€‚\n\nè€Œåœ¨ axios ä¸­ï¼Œ `transformRequest` å…è®¸åœ¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚å‰ï¼Œä¿®æ”¹è¯·æ±‚æ•°æ®ï¼›`transformResponse` åœ¨ä¼ é€’ç»™ then/catch å‰ï¼Œå…è®¸ä¿®æ”¹å“åº”æ•°æ®ã€‚\n\né€šè¿‡è¿™ä¸¤ä¸ªé’©å­ï¼Œå¯ä»¥çœå»å¤§é‡é‡å¤çš„åºåˆ—åŒ–ä»£ç ã€‚\n\nä»£ç å¦‚ä¸‹ï¼š\n\n```js\nconst service = axios.create({\n    // åœ¨å‘æœåŠ¡å™¨å‘é€è¯·æ±‚å‰ï¼Œåºåˆ—åŒ–è¯·æ±‚æ•°æ®\n    transformRequest: [function (data) {\n        data = JSON.stringify(data)\n        return data\n    }],\n    // åœ¨ä¼ é€’ç»™ then/catch å‰ï¼Œä¿®æ”¹å“åº”æ•°æ®\n    transformResponse: [function (data) {\n        if (typeof data === 'string' && data.startsWith('{')) {\n            data = JSON.parse(data)\n        }\n        return data\n    }]\n})\n```\n\n### æ‹¦æˆªå™¨\næ‹¦æˆªå™¨ï¼Œåˆ†ä¸ºè¯·æ±‚æ‹¦æˆªå™¨ä»¥åŠå“åº”æ‹¦æˆªå™¨ï¼Œåˆ†åˆ«åœ¨è¯·æ±‚æˆ–å“åº”è¢« then æˆ– catch å¤„ç†å‰æ‹¦æˆªå®ƒä»¬ã€‚\n\nä¹‹å‰æåˆ°è¿‡ï¼Œç”±äº async-await ä¸­ catch éš¾ä»¥å¤„ç†çš„é—®é¢˜ï¼Œæ‰€ä»¥å°†å‡ºé”™çš„æƒ…å†µä¹Ÿä½œä¸º resolve çŠ¶æ€è¿›è¡Œå¤„ç†ã€‚ä½†è¿™å¸¦æ¥äº†ä¸€ä¸ªé—®é¢˜ï¼Œè¯·æ±‚æˆ–å“åº”å‡ºé”™çš„æƒ…å†µä¸‹ï¼Œç»“æœæ²¡æœ‰æ•°æ®åè®®ä¸­å®šä¹‰çš„ msg å­—æ®µï¼ˆæ¶ˆæ¯ï¼‰ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å‡ºé”™çš„æ—¶å€™ï¼Œæ‰‹åŠ¨ç”Ÿæˆä¸€ä¸ªç¬¦åˆè¿”å›æ ¼å¼çš„è¿”å›æ•°æ®ã€‚\n\nç”±äºï¼Œåœ¨ä¸šåŠ¡ä¸­ï¼Œæ²¡æœ‰éœ€è¦åœ¨è¯·æ±‚æ‹¦æˆªå™¨ä¸­åšé¢å¤–å¤„ç†çš„éœ€æ±‚ï¼Œæ‰€ä»¥ï¼Œè¯·æ±‚æ‹¦æˆªå™¨çš„ resolve çŠ¶æ€ï¼Œåªéœ€ç›´æ¥è¿”å›å°±å¯ä»¥äº†ã€‚\n\nè¯·æ±‚æ‹¦æˆªå™¨ä»£ç å¦‚ä¸‹ï¼š\n\n```js\n// è¯·æ±‚æ‹¦æˆªå™¨\nservice.interceptors.request.use((config) ={\n\treturn config\n}, (error) ={\n\t// é”™è¯¯æŠ›åˆ°ä¸šåŠ¡ä»£ç \n    error.data = {}\n    error.data.msg = 'æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼'\n    return Promise.resolve(error)\n})\n```\n\nå†æ¥èŠèŠå“åº”æ‹¦æˆªå™¨ï¼Œè¿˜æ˜¯ä¹‹å‰çš„é‚£ä¸ªé—®é¢˜ï¼Œé™¤äº†è¯·æ±‚æˆ–å“åº”é”™è¯¯ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µä¹Ÿä¼šå¯¼è‡´è¿”å›çš„æ¶ˆæ¯ä½“ä¸ç¬¦åˆåè®®è§„èŒƒï¼Œé‚£å°±æ˜¯çŠ¶æ€ç ä¸ä¸º 2 ç³»åˆ—æˆ– 304 æ—¶ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯éœ€è¦åšä¸€æ ·çš„å¤„ç†â€”â€”æ‰‹åŠ¨ç”Ÿæˆä¸€ä¸ªç¬¦åˆè¿”å›æ ¼å¼çš„è¿”å›æ•°æ®ã€‚ä½†æ˜¯ï¼Œæœ‰ä¸€ç‚¹ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ ¹æ®ä¸åŒçš„çŠ¶æ€ç ç”Ÿæˆä¸åŒçš„æç¤ºä¿¡æ¯ï¼Œä»¥æ–¹ä¾¿å¤„ç†ä¸Šçº¿åçš„é—®é¢˜ã€‚\n\nå“åº”æ‹¦æˆªå™¨ä»£ç å¦‚ä¸‹ï¼š\n\n```js\n// æ ¹æ®ä¸åŒçš„çŠ¶æ€ç ï¼Œç”Ÿæˆä¸åŒçš„æç¤ºä¿¡æ¯\nconst showStatus = (status) ={\n    let message = ''\n    // è¿™ä¸€å¨ä»£ç å¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼è¿›è¡Œä¼˜åŒ–\n    switch (status) {\n        case 400:\n            message = 'è¯·æ±‚é”™è¯¯(400)'\n            break\n        case 401:\n            message = 'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•(401)'\n            break\n        case 403:\n            message = 'æ‹’ç»è®¿é—®(403)'\n            break\n        case 404:\n            message = 'è¯·æ±‚å‡ºé”™(404)'\n            break\n        case 408:\n            message = 'è¯·æ±‚è¶…æ—¶(408)'\n            break\n        case 500:\n            message = 'æœåŠ¡å™¨é”™è¯¯(500)'\n            break\n        case 501:\n            message = 'æœåŠ¡æœªå®ç°(501)'\n            break\n        case 502:\n            message = 'ç½‘ç»œé”™è¯¯(502)'\n            break\n        case 503:\n            message = 'æœåŠ¡ä¸å¯ç”¨(503)'\n            break\n        case 504:\n            message = 'ç½‘ç»œè¶…æ—¶(504)'\n            break\n        case 505:\n            message = 'HTTPç‰ˆæœ¬ä¸å—æ”¯æŒ(505)'\n            break\n        default:\n            message = `è¿æ¥å‡ºé”™(${status})!`\n    }\n    return `${message}ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ï¼`\n}\n\n// å“åº”æ‹¦æˆªå™¨\nservice.interceptors.response.use((response) ={\n    const status = response.status\n    let msg = ''\n    if (status < 200 || status >= 300) {\n        // å¤„ç†httpé”™è¯¯ï¼ŒæŠ›åˆ°ä¸šåŠ¡ä»£ç \n        msg = showStatus(status)\n        if (typeof response.data === 'string') {\n            response.data = { msg }\n        } else {\n            response.data.msg = msg\n        }\n    }\n    return response\n}, (error) ={\n    // é”™è¯¯æŠ›åˆ°ä¸šåŠ¡ä»£ç \n    error.data = {}\n    error.data.msg = 'è¯·æ±‚è¶…æ—¶æˆ–æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ï¼'\n    return Promise.resolve(error)\n})\n```\n\n_tipsï¼šå‹æƒ…æç¤ºï¼Œä¸Šé¢é‚£ä¸€å¨ switch-case ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨ç­–ç•¥æ¨¡å¼è¿›è¡Œä¼˜åŒ–~_\n\n### æ”¯æŒ TypeScript\nç”±äºå‰æ®µæ—¶é—´ï¼Œæˆ‘åœ¨éƒ¨é—¨å†…æ¨äº† TypeScriptï¼Œä¸ºäº†æ»¡è¶³è‡ªå·±çš„å¼ºè¿«ç—‡ï¼Œå°†æ‰€æœ‰ js æ–‡ä»¶æ”¹å†™ä¸ºäº† ts æ–‡ä»¶ã€‚ç”±äº axios æœ¬èº«æœ‰ TypeScript ç›¸å…³çš„æ”¯æŒï¼Œæ‰€ä»¥åªéœ€è¦æŠŠå¯¹åº”çš„ç±»å‹å¯¼å…¥ï¼Œç„¶åèµ‹å€¼å³å¯ã€‚\n\n### å®Œæ•´ä»£ç \n```ts\n// http.ts\nimport axios, { AxiosRequestConfig, AxiosResponse } from 'axios'\n\nconst showStatus = (status: number) ={\n  let message = ''\n  switch (status) {\n    case 400:\n      message = 'è¯·æ±‚é”™è¯¯(400)'\n      break\n    case 401:\n      message = 'æœªæˆæƒï¼Œè¯·é‡æ–°ç™»å½•(401)'\n      break\n    case 403:\n      message = 'æ‹’ç»è®¿é—®(403)'\n      break\n    case 404:\n      message = 'è¯·æ±‚å‡ºé”™(404)'\n      break\n    case 408:\n      message = 'è¯·æ±‚è¶…æ—¶(408)'\n      break\n    case 500:\n      message = 'æœåŠ¡å™¨é”™è¯¯(500)'\n      break\n    case 501:\n      message = 'æœåŠ¡æœªå®ç°(501)'\n      break\n    case 502:\n      message = 'ç½‘ç»œé”™è¯¯(502)'\n      break\n    case 503:\n      message = 'æœåŠ¡ä¸å¯ç”¨(503)'\n      break\n    case 504:\n      message = 'ç½‘ç»œè¶…æ—¶(504)'\n      break\n    case 505:\n      message = 'HTTPç‰ˆæœ¬ä¸å—æ”¯æŒ(505)'\n      break\n    default:\n      message = `è¿æ¥å‡ºé”™(${status})!`\n  }\n  return `${message}ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ï¼`\n}\n\nconst service = axios.create({\n  // è”è°ƒ\n  baseURL: process.env.NODE_ENV === 'production' ? `/` : '/apis',\n  headers: {\n    get: {\n      'Content-Type': 'application/x-www-form-urlencoded;charset=utf-8'\n    },\n    post: {\n      'Content-Type': 'application/json;charset=utf-8'\n    }\n  },\n  // æ˜¯å¦è·¨ç«™ç‚¹è®¿é—®æ§åˆ¶è¯·æ±‚\n  withCredentials: true,\n  timeout: 30000,\n  transformRequest: [(data) ={\n    data = JSON.stringify(data)\n    return data\n  }],\n  validateStatus () {\n    // ä½¿ç”¨async-awaitï¼Œå¤„ç†rejectæƒ…å†µè¾ƒä¸ºç¹çï¼Œæ‰€ä»¥å…¨éƒ¨è¿”å›resolveï¼Œåœ¨ä¸šåŠ¡ä»£ç ä¸­å¤„ç†å¼‚å¸¸\n    return true\n  },\n  transformResponse: [(data) ={\n    if (typeof data === 'string' && data.startsWith('{')) {\n      data = JSON.parse(data)\n    }\n    return data\n  }]\n})\n\n// è¯·æ±‚æ‹¦æˆªå™¨\nservice.interceptors.request.use((config: AxiosRequestConfig) ={\n    return config\n}, (error) ={\n    // é”™è¯¯æŠ›åˆ°ä¸šåŠ¡ä»£ç \n    error.data = {}\n    error.data.msg = 'æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼'\n    return Promise.resolve(error)\n})\n\n// å“åº”æ‹¦æˆªå™¨\nservice.interceptors.response.use((response: AxiosResponse) ={\n    const status = response.status\n    let msg = ''\n    if (status < 200 || status >= 300) {\n        // å¤„ç†httpé”™è¯¯ï¼ŒæŠ›åˆ°ä¸šåŠ¡ä»£ç \n        msg = showStatus(status)\n        if (typeof response.data === 'string') {\n            response.data = {msg}\n        } else {\n            response.data.msg = msg\n        }\n    }\n    return response\n}, (error) ={\n    // é”™è¯¯æŠ›åˆ°ä¸šåŠ¡ä»£ç \n    error.data = {}\n    error.data.msg = 'è¯·æ±‚è¶…æ—¶æˆ–æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–è”ç³»ç®¡ç†å‘˜ï¼'\n    return Promise.resolve(error)\n})\n\nexport default service\n```\n","tags":["å·¥å…·"],"categories":["JS"]},{"title":"å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†ã€æ‘˜è¦ã€æ•°å­—ç­¾åã€æ•°å­—è¯ä¹¦","url":"%2F2020%2F%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E3%80%81%E9%9D%9E%E5%AF%B9%E7%A7%B0%E5%8A%A0%E5%AF%86%E3%80%81%E6%91%98%E8%A6%81%E3%80%81%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D%E3%80%81%E6%95%B0%E5%AD%97%E8%AF%81%E4%B9%A6.html","content":"\nä½œä¸ºä¸€ä¸ªå¼€å‘äººå‘˜ï¼Œæˆ–å¤šæˆ–å°‘éƒ½å¬è¯´è¿‡å¯¹ç§°åŠ å¯†ã€éå¯¹ç§°åŠ å¯†ã€æ‘˜è¦ã€æ•°å­—ç­¾åã€æ•°å­—è¯ä¹¦è¿™å‡ ä¸ªæ¦‚å¿µï¼Œå®ƒä»¬æ˜¯ç”¨æ¥ä¿è¯åœ¨äº’è”ç½‘é€šä¿¡è¿‡ç¨‹ä¸­æ•°æ®ä¼ è¾“å®‰å…¨çš„ã€‚æœ‰äººå¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼Œæˆ‘ç»™ä¼ è¾“æ•°\næ®åŠ ä¸ªå¯†ä¸å°±å®‰å…¨äº†ï¼Œä¸ºä»€ä¹ˆè¿˜è¦æè¿™ä¹ˆå¤šèŠ±æ ·å‡ºæ¥ï¼Ÿæœ¬æ–‡ä¸»è¦é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥è®²è§£è¿™å‡ ä¸ªæ¦‚å¿µçš„å®é™…ä½œç”¨ã€‚\n\nåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘å…ˆç®€å•ä»‹ç»ä¸€ä¸‹è¿™å‡ ä¸ªæ¦‚å¿µã€‚\n## å¯¹ç§°åŠ å¯†\nå¯¹ç§°åŠ å¯†æ˜¯æŒ‡ç”¨æ¥åŠ å¯†å’Œè§£å¯†çš„æ˜¯åŒä¸€ä¸ªç§˜é’¥ã€‚å…¶ç‰¹ç‚¹æ˜¯åŠ å¯†é€Ÿåº¦å¿«ï¼Œä½†æ˜¯ç§˜é’¥å®¹æ˜“è¢«é»‘å®¢æˆªè·ï¼Œæ‰€ä»¥å®‰å…¨æ€§ä¸é«˜ã€‚å¯†é’¥ä¸å¯èƒ½ä¸€å¼€å§‹åœ¨å‘é€æ–¹å’Œæ¥æ”¶æ–¹éƒ½å…¨éƒ¨ç”Ÿæˆå¥½äº† éœ€è¦åœ¨ä¸€æ–¹ç”Ÿæˆä¹‹åä¼ é€’ç»™å¦ä¸€æ–¹ å¦‚æœåœ¨ä¼ é€’è¿‡ç¨‹å¯†é’¥è¢«åŠ«æŒ æ•´ä¸ªåŠ å¯†å°±ä¸å®‰å…¨äº†ã€‚å¸¸è§çš„æœ‰AESã€DESç®—æ³•ã€‚\n\n## éå¯¹ç§°åŠ å¯†\néå¯¹ç§°åŠ å¯†æ˜¯æŒ‡ç”¨æ¥åŠ å¯†å’Œè§£å¯†çš„æ˜¯ä¸åŒçš„ç§˜é’¥ï¼Œå®ƒä»¬æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œç§°ä¸ºå…¬é’¥å’Œç§é’¥ï¼ŒçŸ¥é“å…¶ä¸­ä¸€ä¸ªç§˜é’¥æ˜¯æ— æ³•æ¨å¯¼å‡ºå¦å¤–ä¸€ä¸ªç§˜é’¥çš„ã€‚ç”¨å…¬é’¥åŠ å¯†çš„å†…å®¹éœ€è¦ç”¨ç§é’¥æ‰èƒ½è§£å¯†ï¼Œç”¨ç§é’¥åŠ å¯†\nçš„å†…å®¹éœ€è¦ç”¨å…¬é’¥æ‰èƒ½è§£å¯†ã€‚éå¯¹ç§°åŠ å¯†çš„ç‰¹ç‚¹æ˜¯å®‰å…¨æ€§é«˜ï¼Œç¼ºç‚¹æ˜¯åŠ å¯†é€Ÿåº¦æ…¢ã€‚å…¬é’¥å¯¹å¤–å…¬å¼€ å¦‚æœå¯†æ–‡æ˜¯ç§é’¥åŠ å¯† é‚£ä¹ˆä»»ä½•äººéƒ½èƒ½ç”¨å…¬é’¥è§£å¯†ã€‚å¸¸è§çš„æœ‰RSAã€ECCç®—æ³•ã€‚\n\n## æ··åˆåŠ å¯†\nåœ¨ä¼ é€’è¿‡ç¨‹æŠŠæˆ‘ä»¬çš„å¯¹ç§°åŠ å¯†ä¸­çš„å¯†é’¥ç”¨éå¯¹ç§°åŠ å¯†çš„æ–¹å¼å»ä¼ é€’å°±å¥½äº†ã€‚\n![mix](http://cdn.mydearest.cn/blog/images/mix.png)\n\n## æ‘˜è¦\næ‰€è°“çš„æ‘˜è¦å°±æ˜¯ä¸€æ®µä¿¡æ¯æˆ–è€…ä¸€ä¸ªæ–‡ä»¶é€šè¿‡æŸä¸ªå“ˆå¸Œç®—æ³•(ä¹Ÿå«æ‘˜è¦ç®—æ³•)è€Œå¾—åˆ°çš„ä¸€ä¸²å­—ç¬¦ã€‚æ‘˜è¦ç®—æ³•çš„ç‰¹ç‚¹å°±æ˜¯ä¸åŒçš„æ–‡ä»¶è®¡ç®—å‡ºçš„æ‘˜è¦æ˜¯ä¸åŒçš„(ä¹Ÿæœ‰å¯èƒ½ç›¸åŒï¼Œä½†æ˜¯å¯èƒ½æ€§éå¸¸éå¸¸ä½)ï¼Œ\næ¯”å¦‚ä¸€ä¸ª1Gçš„è§†é¢‘æ–‡ä»¶ï¼Œå“ªæ€•åªæ˜¯æ”¹åŠ¨å…¶ä¸­ä¸€ä¸ªå­—èŠ‚ï¼Œæœ€åè®¡ç®—å¾—åˆ°çš„æ‘˜è¦ä¹Ÿæ˜¯å®Œå…¨ä¸åŒçš„ï¼Œæ‰€ä»¥æ‘˜è¦ç®—æ³•é€šå¸¸æ˜¯ç”¨æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦è¢«ç¯¡æ”¹è¿‡ã€‚å…¶è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯é€šè¿‡æ‘˜è¦æ˜¯æ— æ³•æ¨å¯¼å‡ºæºæ–‡\nä»¶çš„ä¿¡æ¯çš„ã€‚å¸¸ç”¨çš„æ‘˜è¦(æ•£åˆ—)ç®—æ³•æœ‰MD5ã€SHAç­‰ã€‚\n\n## æ•°å­—ç­¾å\næ•°å­—ç­¾åå°±æ˜¯ä¸€ä¸ªæ–‡ä»¶çš„æ‘˜è¦åŠ å¯†åçš„ä¿¡æ¯ã€‚æ•°å­—ç­¾åæ˜¯å’Œæºæ–‡ä»¶ä¸€èµ·å‘é€ç»™æ¥æ”¶æ–¹çš„ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°åå¯¹æ–‡ä»¶ç”¨æ‘˜è¦ç®—æ³•ç®—å‡ºä¸€ä¸ªæ‘˜è¦ï¼Œç„¶åå’Œæ•°å­—ç­¾åä¸­çš„æ‘˜è¦è¿›è¡Œæ¯”å¯¹ï¼Œä¸¤è€…ä¸ä¸€è‡´çš„è¯è¯´\næ˜æ–‡ä»¶è¢«ç¯¡æ”¹äº†ã€‚\n\n## æ•°å­—è¯ä¹¦\næ•°å­—è¯ä¹¦æ˜¯ä¸€ä¸ªç»è¯ä¹¦æˆæƒä¸­å¿ƒç”Ÿæˆçš„æ–‡ä»¶ï¼Œæ•°å­—è¯ä¹¦é‡Œä¸€èˆ¬ä¼šåŒ…å«å…¬é’¥ã€å…¬é’¥æ‹¥æœ‰è€…åç§°ã€CAçš„æ•°å­—ç­¾åã€æœ‰æ•ˆæœŸã€æˆæƒä¸­å¿ƒåç§°ã€è¯ä¹¦åºåˆ—å·ç­‰ä¿¡æ¯ã€‚å…¶ä¸­CAçš„æ•°å­—ç­¾åæ˜¯éªŒè¯è¯ä¹¦æ˜¯å¦è¢«\nç¯¡æ”¹çš„å…³é”®ï¼Œå®ƒå…¶å®å°±æ˜¯å¯¹è¯ä¹¦é‡Œé¢é™¤äº†CAçš„æ•°å­—ç­¾åä»¥å¤–çš„å†…å®¹è¿›è¡Œæ‘˜è¦ç®—æ³•å¾—åˆ°ä¸€ä¸ªæ‘˜è¦ï¼Œç„¶åCAæœºæ„ç”¨ä»–è‡ªå·±çš„ç§é’¥å¯¹è¿™ä¸ªæ‘˜è¦è¿›è¡ŒåŠ å¯†å°±ç”Ÿæˆäº†CAçš„æ•°å­—ç­¾åï¼ŒCAæœºæ„ä¼šå…¬å¼€å®ƒçš„å…¬\né’¥ï¼ŒéªŒè¯è¯ä¹¦æ—¶å°±æ˜¯ç”¨è¿™ä¸ªå…¬é’¥è§£å¯†CAçš„æ•°å­—ç­¾åï¼Œç„¶åç”¨æ¥éªŒè¯è¯ä¹¦æ˜¯å¦è¢«ç¯¡æ”¹ã€‚\n\n---\n<!--more-->\n\n## æ¡ˆä¾‹è®²è§£\nåœºæ™¯ï¼š\nå¼ ä¸‰è¦æ‰¾äººè£…ä¿®ä¸€ä¸ªæˆ¿å­ï¼ŒåŸåˆ™æ˜¯è°çš„å‡ºä»·ä¾¿å®œå°±ç»™è°è£…ä¿®ï¼Œæ‰€ä»¥å¯¹äºæŠ¥ä»·æ–‡ä»¶å°±æ˜¯å±äºæœºå¯†æ–‡ä»¶ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸åŒçš„æ–¹å¼ä¼ è¾“æŠ¥ä»·æ–‡ä»¶éƒ½ä¼šæœ‰ä»€ä¹ˆé£é™©ã€‚\n\n### é€šè¿‡å¯¹ç§°åŠ å¯†æœ‰ä»€ä¹ˆé£é™©\nç°åœ¨æå››æƒ³æ¥è¿™ä¸ªè£…ä¿®çš„æ´»ï¼Œä»–åšäº†ä¸€ä»½æŠ¥ä»·æ–‡ä»¶(æ–‡ä»¶å:lisi.txtï¼Œæ–‡ä»¶å†…å®¹:æŠ¥ä»·50ä¸‡)ã€‚ç„¶åæå››ç”¨ä¸€ä¸ªå¯¹ç§°ç§˜é’¥123å¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡ŒåŠ å¯†ã€‚æœ€åæå››å°†è¿™ä¸ªç§˜é’¥å’ŒåŠ å¯†çš„æ–‡ä»¶å‘ç»™å¼ ä¸‰ï¼Œ\nå¼ ä¸‰æ”¶åˆ°åç”¨è¿™ä¸ªç§˜é’¥è§£å¯†ï¼ŒçŸ¥é“äº†æå››çš„æŠ¥ä»·æ˜¯50ä¸‡ã€‚åŒæ—¶ç‹äº”ä¹Ÿæƒ³æ¥è¿™ä¸ªè£…ä¿®çš„æ´»ï¼Œä»–æœ¬æ¥æ˜¯æƒ³æŠ¥ä»·55ä¸‡çš„ï¼Œä½†æ˜¯åˆæ‹…å¿ƒæŠ¥ä»·å¤ªé«˜è€Œä¸¢æ‰è¿™ä¸ªæ´»ã€‚æ°å·§ç‹äº”æ˜¯ä¸ªé»‘å®¢é«˜æ‰‹ï¼Œäºæ˜¯ä»–æˆªè·äº†æ\nå››å‘ç»™å¼ ä¸‰çš„ç§˜é’¥å’ŒåŠ å¯†æ–‡ä»¶ï¼ŒçŸ¥é“äº†æå››æŠ¥ä»·æ˜¯50ä¸‡ã€‚æœ€åç‹äº”å°†è‡ªå·±çš„æŠ¥ä»·æ”¹æˆäº†49ä¸‡å‘ç»™å¼ ä¸‰ï¼Œç»“æœç‹äº”æ¥ä¸‹äº†è¿™ä¸ªè£…ä¿®æ´»ã€‚\n\n> ç»“è®ºï¼šç”¨å¯¹ç§°åŠ å¯†çš„è¯ï¼Œä¸€æ—¦ç§˜é’¥è¢«é»‘å®¢æˆªè·ï¼ŒåŠ å¯†å°±å½¢åŒè™šè®¾ï¼Œæ‰€ä»¥å®‰å…¨æ€§æ¯”è¾ƒä½ã€‚\n\n### å¦‚æœç”¨éå¯¹ç§°åŠ å¯†ä¼šæ€ä¹ˆæ ·\né¦–å…ˆå¼ ä¸‰ä¼šç”Ÿæˆä¸€å¯¹ç§˜é’¥ï¼Œç§é’¥æ˜¯zhangsan1ï¼Œå…¬é’¥æ˜¯zhangsan2ï¼Œç§é’¥å¼ ä¸‰è‡ªå·±ä¿å­˜ï¼Œå°†å…¬é’¥å…¬å¸ƒå‡ºå»ã€‚\n\næå››å°†æŠ¥ä»·æ–‡ä»¶list.txtç”¨å¼ ä¸‰å…¬å¸ƒçš„å…¬é’¥zhangsan2è¿›è¡ŒåŠ å¯†åä¼ ç»™å¼ ä¸‰ï¼Œç„¶åå¼ ä¸‰ç”¨ç§é’¥zhangsan1è¿›è¡Œè§£å¯†å¾—åˆ°æå››çš„æŠ¥ä»·æ˜¯50ä¸‡ã€‚\n\nè¿™ä¸ªæ—¶å€™å³ä½¿ç‹äº”æˆªè·åˆ°äº†æå››å‘ç»™å¼ ä¸‰çš„æŠ¥ä»·æ–‡ä»¶ï¼Œç”±äºç‹äº”æ²¡æœ‰å¼ ä¸‰çš„ç§é’¥ï¼Œæ‰€ä»¥ä»–æ˜¯æ— æ³•è§£å¯†æ–‡ä»¶çš„ï¼Œä¹Ÿå°±æ— æ³•çŸ¥é“æå››çš„æŠ¥ä»·ã€‚æœ€åç‹äº”å› ä¸ºæŠ¥ä»·55ä¸‡è€Œä¸¢æ‰äº†è¿™ä¸ªè£…ä¿®çš„æœºä¼šã€‚\n\næ‰€ä»¥ç”¨éå¯¹ç§°åŠ å¯†æ˜¯å¯ä»¥ä¿è¯æ•°æ®ä¼ è¾“å®‰å…¨çš„ã€‚ä¸è¿‡è¿™é‡Œè¯´ä¸€å¥é¢˜å¤–è¯ï¼Œæ—¢ç„¶éå¯¹ç§°åŠ å¯†å®‰å…¨æ€§é«˜ï¼Œé‚£ä¸ºä»€ä¹ˆä¸æ·˜æ±°æ‰å¯¹ç§°åŠ å¯†å‘¢ï¼Ÿå…¶å®å…³é”®å°±åœ¨äºåŠ å¯†é€Ÿåº¦ï¼Œéå¯¹ç§°åŠ å¯†è®¡ç®—é‡å¾ˆå¤§ï¼Œæ‰€ä»¥åŠ \nå¯†é€Ÿåº¦æ˜¯å¾ˆæ…¢çš„ï¼Œå¦‚æœå‘é€æ¶ˆæ¯éå¸¸é¢‘ç¹ï¼Œä½¿ç”¨éå¯¹ç§°åŠ å¯†çš„è¯å°±ä¼šå¯¹æ€§èƒ½é€ æˆå¾ˆå¤§å½±å“ã€‚æ‰€ä»¥åœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­é€šå¸¸æ˜¯å¯¹ç§°åŠ å¯†å’Œéå¯¹ç§°åŠ å¯†ç»“åˆä½¿ç”¨çš„ã€‚ä¹Ÿå°±æ˜¯å¯¹ç§°åŠ å¯†çš„ç§˜é’¥æ˜¯ç”¨éå¯¹ç§°\nåŠ å¯†åå‘é€çš„ï¼Œè¿™æ ·èƒ½ä¿è¯å¯¹ç§°åŠ å¯†çš„ç§˜é’¥ä¸è¢«é»‘å®¢æˆªè·ï¼Œç„¶ååœ¨å‘é€ä¸šåŠ¡æ•°æ®æ—¶å°±ç”¨å¯¹ç§°åŠ å¯†ã€‚è¿™æ ·æ—¢ä¿è¯äº†å®‰å…¨æ€§ä¹Ÿä¿è¯äº†åŠ å¯†é€Ÿåº¦ã€‚\n\n> ç»“è®ºï¼šéå¯¹ç§°åŠ å¯†å¯ä»¥é˜²æ­¢é»‘å®¢æˆªè·åŠ å¯†åçš„å†…å®¹ï¼Œå®‰å…¨æ€§é«˜ã€‚\n\n### æ•°å­—ç­¾åæœ‰ä»€ä¹ˆç”¨\nå‰é¢éƒ½è¯´äº†éå¯¹ç§°åŠ å¯†æ˜¯å®‰å…¨çš„ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦æ•°å­—ç­¾åå‘¢ï¼Ÿ\n\nè®¾æƒ³ä¸€ä¸‹ï¼Œç‹äº”æˆªè·äº†æå››çš„æŠ¥ä»·æ–‡ä»¶ï¼Œç‹äº”è™½ç„¶æ— æ³•çŸ¥é“æå››çš„å®é™…æŠ¥ä»·ï¼Œä½†æ˜¯ä»–å®Œå…¨å¯ä»¥ä¼ªé€ ä¸€ä»½æå››çš„æŠ¥ä»·(æ–‡ä»¶å:lisi.txtï¼Œæ–‡ä»¶å†…å®¹:æŠ¥ä»·60ä¸‡)ï¼Œç„¶åå°†è¿™ä»½ä¼ªé€ æ–‡ä»¶ç”¨å¼ ä¸‰å…¬å¸ƒ\nçš„å…¬é’¥zhangsan2è¿›è¡ŒåŠ å¯†åæ›¿æ¢åŸæ¥çš„æŠ¥ä»·æ–‡ä»¶ã€‚å¼ ä¸‰æ”¶åˆ°åè§£å¯†å‘ç°æŠ¥ä»·æ˜¯60ä¸‡ï¼Œäºæ˜¯å¼ ä¸‰å°±ä»¥ä¸ºæå››æŠ¥çš„ä»·æ˜¯60ä¸‡ï¼Œæœ€åå†³å®šå°†è£…ä¿®çš„æ´»ç»™æŠ¥ä»·55ä¸‡çš„ç‹äº”æ¥åšã€‚\n\nå‘ç”Ÿè¿™ä¸ªé—®é¢˜çš„å…³é”®å°±åœ¨äºå¼ ä¸‰æ— æ³•çŸ¥é“æŠ¥ä»·æ–‡ä»¶æ˜¯å¦è¢«ç¯¡æ”¹è¿‡ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜å°±éœ€è¦ç”¨åˆ°æ•°å­—ç­¾åã€‚é¦–å…ˆæå››éœ€è¦è‡ªå·±ç”Ÿæˆä¸€å¯¹éå¯¹ç§°åŠ å¯†çš„ç§˜é’¥ï¼Œç§é’¥lisi1è‡ªå·±ä¿å­˜ï¼Œå…¬é’¥lisi2å‘ç»™å¼ \nä¸‰ã€‚ç„¶åæå››å¯¹è‡ªå·±çš„æŠ¥ä»·æ–‡ä»¶é€šè¿‡æ‘˜è¦ç®—æ³•å¾—åˆ°ä¸€ä¸ªæ‘˜è¦(å‡è®¾æ‘˜è¦æ˜¯aaa)ï¼Œå†ç”¨è‡ªå·±çš„ç§é’¥lisi1åŠ å¯†è¿™ä¸ªæ‘˜è¦å°±å¾—åˆ°äº†æŠ¥ä»·æ–‡ä»¶çš„æ•°å­—ç­¾åï¼Œæœ€åå°†åŠ å¯†çš„æŠ¥ä»·æ–‡ä»¶å’Œæ•°å­—ç­¾åä¸€èµ·å‘ç»™å¼ \nä¸‰ï¼Œå¼ ä¸‰æ”¶åˆ°åå…ˆç”¨æå››å‘è¿‡æ¥çš„å…¬é’¥lisi2è§£å¯†æ•°å­—ç­¾åå¾—åˆ°æ‘˜è¦aaaï¼Œç„¶åç”¨è‡ªå·±çš„ç§é’¥zhangsan1è§£å¯†åŠ å¯†çš„æ–‡ä»¶å¾—åˆ°æŠ¥ä»·æºæ–‡ä»¶ï¼Œç„¶åå¯¹æŠ¥ä»·æºæ–‡ä»¶è¿›è¡Œæ‘˜è¦ç®—æ³•ï¼Œçœ‹è®¡ç®—å¾—åˆ°çš„ç»“æœæ˜¯\nä¸æ˜¯aaaï¼Œå¦‚æœä¸æ˜¯aaaçš„è¯å°±è¯´æ˜æŠ¥ä»·æ–‡ä»¶è¢«ç¯¡æ”¹äº†ã€‚\n\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœç‹äº”æˆªè·äº†æå››å‘ç»™å¼ ä¸‰çš„æ–‡ä»¶ã€‚ç‹äº”æ˜¯æ— æ³•è§£å¯†æŠ¥ä»·æ–‡ä»¶çš„ã€‚å¦‚æœç‹äº”ä¼ªé€ ä¸€ä»½æŠ¥ä»·æ–‡ä»¶çš„è¯ï¼Œç­‰å¼ ä¸‰æ”¶åˆ°åå°±ä¼šå‘ç°æŠ¥ä»·æ–‡ä»¶å’Œæ•°å­—ç­¾åä¸åŒ¹é…ã€‚é‚£ç‹äº”èƒ½ä¸èƒ½ä¼ªé€ æŠ¥\nä»·æ–‡ä»¶çš„åŒæ—¶ä¹Ÿä¼ªé€ ç­¾åå‘¢ï¼Ÿå› ä¸ºç‹äº”æ²¡æœ‰æå››çš„ç§é’¥ï¼Œæ‰€ä»¥æ²¡æ³•å¯¹ä¼ªé€ çš„æŠ¥ä»·æ–‡ä»¶çš„æ‘˜è¦è¿›è¡ŒåŠ å¯†ï¼Œæ‰€ä»¥ä¹Ÿå°±æ²¡æ³•ä¼ªé€ ç­¾åã€‚\n\n> ç»“è®ºï¼šéå¯¹ç§°åŠ å¯†è™½ç„¶èƒ½ç¡®ä¿åŠ å¯†æ–‡ä»¶å†…å®¹ä¸è¢«çªƒå–ï¼Œä½†ä¸èƒ½ä¿è¯æ–‡ä»¶ä¸è¢«ç¯¡æ”¹ã€‚æ•°å­—ç­¾åå°±æ˜¯ç”¨æ¥éªŒè¯æ–‡ä»¶æ˜¯å¦è¢«ç¯¡æ”¹è¿‡ã€‚\n\n### æ•°å­—è¯ä¹¦æœ‰ä»€ä¹ˆç”¨\næ—¢ç„¶éå¯¹ç§°åŠ å¯†å¯ä»¥ä¿è¯æ–‡ä»¶å†…å®¹çš„å®‰å…¨æ€§ï¼Œæ•°å­—ç­¾ååˆå¯ä»¥ä¿è¯æ–‡ä»¶ä¸è¢«ç¯¡æ”¹ï¼Œé‚£è¿˜è¦æ•°å­—è¯ä¹¦æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ\n\næˆ‘ä»¬å†æ¥è®¾æƒ³ä¸€ä¸‹ï¼Œç‹äº”è‡ªå·±ä¹Ÿç”Ÿæˆäº†ä¸€å¯¹ç”¨äºéå¯¹ç§°åŠ å¯†çš„ç§˜é’¥ï¼Œç§é’¥æ˜¯wangwu1ï¼Œå…¬é’¥æ˜¯wangwu2ã€‚å‰é¢æå››å°†è‡ªå·±çš„å…¬é’¥lisi2å‘ç»™å¼ ä¸‰çš„è¿‡ç¨‹ä¸­è¢«ç‹äº”ç»™æˆªè·äº†ï¼Œç‹äº”ç”¨è‡ªå·±çš„å…¬é’¥\nwangwu2æ›¿æ¢äº†æå››çš„å…¬é’¥lisi2ï¼Œæ‰€ä»¥å¼ ä¸‰æœ€åæ”¶åˆ°çš„å…¬é’¥å®é™…ä¸Šæ˜¯ç‹äº”çš„ï¼Œä½†å¼ ä¸‰å¯¹è¿™å¹¶ä¸çŸ¥æƒ…ã€‚åé¢æå››å‘çš„æ•°å­—ç­¾åå’ŒåŠ å¯†çš„æŠ¥ä»·æ–‡ä»¶éƒ½è¢«ç‹äº”æˆªè·ï¼Œå¹¶ä¸”ç‹äº”ä¼ªé€ äº†ä¸€ä»½æŠ¥ä»·æ–‡ä»¶ï¼ŒåŒ\næ—¶ç”¨è‡ªå·±çš„ç§é’¥åŠ å¯†æŠ¥ä»·æ–‡ä»¶çš„æ‘˜è¦ç”Ÿæˆä¼ªé€ çš„ç­¾åå¹¶å‘ç»™å¼ ä¸‰ï¼Œå¼ ä¸‰æ”¶åˆ°åè¿›è¡ŒéªŒè¯å‘ç°æ•°å­—ç­¾åå’ŒæŠ¥ä»·æ–‡ä»¶æ˜¯åŒ¹é…çš„ï¼Œå°±ä»¥ä¸ºè¿™ä»½æŠ¥ä»·æ–‡ä»¶æ˜¯çœŸå®çš„ã€‚\n\nå‡ºç°è¿™ä¸ªé—®é¢˜çš„å…³é”®å°±åœ¨äºå¼ ä¸‰æ²¡æ³•ç¡®è®¤æ”¶åˆ°çš„å…¬é’¥åˆ°åº•æ˜¯ä¸æ˜¯æå››å‘çš„ï¼Œè¿™ä¸ªæ—¶å€™æ•°å­—è¯ä¹¦å°±èµ·åˆ°ä½œç”¨äº†ã€‚æå››åˆ°æƒå¨çš„æ•°å­—è¯ä¹¦æœºæ„ç”³è¯·æ•°å­—è¯ä¹¦ï¼Œè¯ä¹¦é‡Œé¢åŒ…å«äº†å…¬é’¥(lisi2)å’Œå…¬é’¥çš„\næ‹¥æœ‰è€…(æå››)ç­‰ç›¸å…³ä¿¡æ¯ï¼Œç„¶åæå››å°†è¯ä¹¦å‘ç»™å¼ ä¸‰ï¼Œå¼ ä¸‰é€šè¿‡è¯ä¹¦é‡Œé¢çš„ä¿¡æ¯å°±å¯ä»¥çŸ¥é“å…¬é’¥åˆ°åº•æ˜¯ä¸æ˜¯æå››çš„äº†ã€‚\n\né‚£è¯ä¹¦åœ¨å‘é€è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰å¯èƒ½è¢«ç‹äº”æˆªè·å¹¶ç¯¡æ”¹å‘¢ï¼Ÿè¦çŸ¥é“è¯ä¹¦é‡Œé¢è¿˜åŒ…å«CAçš„æ•°å­—ç­¾åï¼Œè¿™ä¸ªç­¾åæ˜¯è¯ä¹¦æœºæ„ç”¨ä»–ä»¬è‡ªå·±çš„ç§é’¥å¯¹è¯ä¹¦çš„æ‘˜è¦è¿›è¡ŒåŠ å¯†çš„ï¼Œè€Œå…¬é’¥æ˜¯å…¬å¼€çš„ã€‚æ‰€ä»¥å³ä¾¿ç‹äº”\næˆªè·å¹¶ç¯¡æ”¹äº†è¯ä¹¦å†…å®¹ï¼Œä»–ä¹Ÿæ— æ³•ä¼ªé€ è¯ä¹¦æœºæ„çš„ç­¾åï¼Œå¼ ä¸‰åœ¨æ”¶åˆ°è¯ä¹¦åé€šè¿‡éªŒè¯ç­¾åä¹Ÿä¼šå‘ç°è¯ä¹¦è¢«ç¯¡æ”¹äº†ã€‚\n","tags":["http"],"categories":["çŸ¥è¯†"]},{"title":"å…³äºnodeçš„é‚£äº›äº‹(è¿›é˜¶ç¯‡)","url":"%2F2020%2F%E5%85%B3%E4%BA%8Enode%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B(%E8%BF%9B%E9%98%B6%E7%AF%87).html","content":"\n## ğŸ‘¨æé—®ï¼šæ³¨å†Œè·¯ç”±æ—¶ app.getã€app.useã€app.all çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ\n\n### app.use(path,callback)\n\n> app.useæ˜¯expressç”¨æ¥è°ƒç”¨ä¸­é—´ä»¶çš„æ–¹æ³•ã€‚ä¸­é—´ä»¶é€šå¸¸ä¸å¤„ç†è¯·æ±‚å’Œå“åº”ï¼Œä¸€èˆ¬åªå¤„ç†è¾“å…¥æ•°æ®ï¼Œå¹¶å°†å…¶äº¤ç»™é˜Ÿåˆ—ä¸­çš„ä¸‹ä¸€ä¸ªå¤„ç†ç¨‹åºï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­app.use\n('/user')ï¼Œé‚£ä¹ˆåªè¦è·¯å¾„ä»¥ /user å¼€å§‹å³å¯åŒ¹é…ï¼Œå¦‚ /user/tree å°±å¯ä»¥åŒ¹é…ã€‚\n\n### app.all()\n\n> app.all æ˜¯è·¯ç”±ä¸­æŒ‡ä»£æ‰€æœ‰çš„è¯·æ±‚æ–¹å¼ï¼Œç”¨ä½œè·¯ç”±å¤„ç†ï¼ŒåŒ¹é…å®Œæ•´è·¯å¾„ï¼Œåœ¨app.useä¹‹åå¯ä»¥ç†è§£ä¸ºåŒ…å«äº†app.getã€app.postç­‰çš„å®šä¹‰ï¼Œæ¯”å¦‚app.all('/\nuser/tree'),èƒ½åŒæ—¶è¦†ç›–ï¼šget('/user/tree') ã€ post('/user/tree')ã€ put('/user/tree') ,ä¸è¿‡ç›¸å¯¹äºapp.use()çš„å‰ç¼€åŒ¹é…ï¼Œå®ƒåˆ™æ˜¯åŒ¹é…å…·ä½“çš„è·¯\nç”±ã€‚\n\n`allå®Œæ•´åŒ¹é…ï¼ŒuseåªåŒ¹é…å‰ç¼€`\n\n---\n<!--more-->\n\n## express responseæœ‰å“ªäº›å¸¸ç”¨æ–¹æ³•?\nexpress responseå¯¹è±¡æ˜¯å¯¹Node.jsåŸç”Ÿå¯¹è±¡ServerResponseçš„æ‰©å±•ï¼Œexpress responseå¸¸è§çš„æœ‰ï¼šres.end()ã€res.send()ã€res.render()ã€res.\nredirect()ï¼Œè€Œè¿™å‡ ä¸ªæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿæ›´å¤šè¯·çœ‹æ–‡æ¡£[express Response](https://www.expressjs.com.cn/4x/api.html#res)\n\n### res.end()\nç»“æŸresponse - å¦‚æœæœåŠ¡ç«¯æ²¡æœ‰æ•°æ®å›ä¼ ç»™å®¢æˆ·ç«¯åˆ™å¯ä»¥ç›´æ¥ç”¨res.endè¿”å›ï¼Œä»¥æ­¤æ¥ç»“æŸå“åº”è¿‡ç¨‹ã€‚\n\n### res.send(body)\nå¦‚æœæœåŠ¡ç«¯æœ‰æ•°æ®å¯ä»¥ä½¿ç”¨res.send,å¯ä»¥å¿½ç•¥res.endï¼Œbodyå‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªBufferå¯¹è±¡ï¼Œä¸€ä¸ªStringå¯¹è±¡æˆ–ä¸€ä¸ªArrayã€‚\n\n### res.render\nres.renderç”¨æ¥æ¸²æŸ“æ¨¡æ¿æ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥ç»“åˆæ¨¡ç‰ˆå¼•æ“æ¥ä½¿ç”¨ï¼Œä¸‹é¢çœ‹ä¸ªç®€å•çš„demo (express+ejsæ¨¡ç‰ˆå¼•æ“)\n\n[node-ejs](http://cdn.mydearest.cn/blog/images/node-ejs.png)\n\n- é…ç½®\n```js\napp.set('views', path.join(__dirname, 'views')); // viewsï¼šæ¨¡ç‰ˆæ–‡ä»¶å­˜æ”¾çš„ä½ç½®ï¼Œé»˜è®¤æ˜¯åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹\napp.set('view engine', 'ejs'); // view engineï¼šä½¿ç”¨ä»€ä¹ˆæ¨¡ç‰ˆå¼•æ“\n```\n\nå…¶æ¬¡æ˜¯æ ¹æ®ä½¿ç”¨çš„æ¨¡ç‰ˆå¼•æ“è¯­æ³•ç¼–å†™æ¨¡ç‰ˆï¼Œæœ€åé€šè¿‡res.render(view,locals, callback)å¯¼å‡ºï¼Œå…·ä½“ä½¿ç”¨å‚æ•°\n\n```\nviewï¼šæ¨¡æ¿çš„è·¯å¾„\nlocalsï¼šæ¸²æŸ“æ¨¡æ¿æ—¶ä¼ è¿›å»çš„æœ¬åœ°å˜é‡\ncallbackï¼šå¦‚æœå®šä¹‰äº†å›è°ƒå‡½æ•°ï¼Œåˆ™å½“æ¸²æŸ“å·¥ä½œå®Œæˆæ—¶æ‰è¢«è°ƒç”¨ï¼Œè¿”å›æ¸²æŸ“å¥½çš„å­—ç¬¦ä¸²ï¼ˆæ­£ç¡®ï¼‰æˆ–è€…é”™è¯¯ä¿¡æ¯ âŒ\n```\n\n### res.redirect\né‡å®šä¹‰åˆ°pathæ‰€æŒ‡å®šçš„URLï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é‡å®šå‘æ—¶å®šä¹‰å¥½HTTPçŠ¶æ€ç ï¼ˆé»˜è®¤ä¸º302ï¼‰\n```js\nres.redirect('http://baidu.com');\nres.redirect(301, 'http://baidu.com');\n```\n\n## nodeå¦‚ä½•åˆ©ç”¨å¤šæ ¸CPUä»¥åŠåˆ›å»ºé›†ç¾¤?\nä¼—æ‰€å‘¨çŸ¥ï¼Œnodejsæ˜¯åŸºäºchromeæµè§ˆå™¨çš„V8å¼•æ“æ„å»ºçš„ï¼Œä¸€ä¸ªnodejsè¿›ç¨‹åªèƒ½ä½¿ç”¨ä¸€ä¸ªCPU(ä¸€ä¸ªCPUè¿è¡Œä¸€ä¸ªnodeå®ä¾‹)ï¼Œä¸¾ä¸ªä¾‹å­ï¼šæˆ‘ä»¬ç°åœ¨æœ‰ä¸€å°8æ ¸çš„æœåŠ¡å™¨ï¼Œ\né‚£ä¹ˆå¦‚æœä¸åˆ©ç”¨å¤šæ ¸CPUï¼Œæ˜¯å¾ˆä¸€ç§æµªè´¹èµ„æºçš„è¡Œä¸ºï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥é€šè¿‡å¯åŠ¨å¤šä¸ªè¿›ç¨‹æ¥åˆ©ç”¨å¤šæ ¸CPUã€‚\n\nNode.jsç»™æˆ‘ä»¬æä¾›äº†clusteræ¨¡å—ï¼Œç”¨äºnodejså¤šæ ¸å¤„ç†ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡å®ƒæ¥æ­å»ºä¸€ä¸ªç”¨äºè´Ÿè½½å‡è¡¡çš„nodeæœåŠ¡é›†ç¾¤ã€‚åˆ›å»ºå¤šè¿›ç¨‹ã€‚\n\n> æœ¬è´¨è¿˜æ˜¯é€šè¿‡ child_process.fork() ä¸“é—¨ç”¨äºè¡ç”Ÿæ–°çš„ Node.js è¿›ç¨‹,è¡ç”Ÿçš„ Node.js å­è¿›ç¨‹ç‹¬ç«‹äºçˆ¶è¿›ç¨‹ï¼Œä½†ä¸¤è€…ä¹‹é—´å»ºç«‹çš„ IPC é€šä¿¡é€šé“é™¤å¤–ï¼Œ æ¯\nä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„å†…å­˜ï¼Œå¸¦æœ‰è‡ªå·±çš„ V8 å®ä¾‹\n\n```js\nconst cluster = require('cluster')\nconst os = require('os')\nconst express = require('express')\nconst path = require('path')\nconst ejs = require('ejs')\nconst app = express()\n\nconst numCPUs = os.cpus().length\n\nif (cluster.isMaster) {\n    for (let i =0 ;i<numCPUs.length;++i) {\n        cluster.fork()\n    }\n    cluster.on('exit', (worker, code, signal) => {\n        console.log(`worker ${worker.process.pid} died`)\n    })\n} else {\n    app.listen(3000, function(){\n        console.log(`worker ${worker.process.pid} started`)\n    })\n}\n// ä¸€ä¸ªç«¯å£è¢«å¤šä¸ªè¿›ç¨‹ç›‘å¬\n```\n\n```bash\nlsof -i -P -n | grep 3000\nps -ef | grep pid\n```\n\n## å¼€å¯å¤šä¸ªå­çº¿ç¨‹\n```js\nconst {\n    Worker, isMainThread, parentPort, workerData\n} = require('worker_threads');\nconst worker = new Worker(__filename, {\n    workerData: script\n});\n```\n\n- çº¿ç¨‹é—´å¦‚ä½•ä¼ è¾“æ•°æ®: parentPort postMessage on å‘é€ç›‘å¬æ¶ˆæ¯\n- å…±äº«å†…å­˜ï¼š SharedArrayBuffer é€šè¿‡è¿™ä¸ªå…±äº«å†…å­˜\n\n- åœ¨æœåŠ¡ä¸­è‹¥éœ€è¦æ‰§è¡Œ shell å‘½ä»¤ï¼Œé‚£ä¹ˆå°±éœ€è¦å¼€å¯ä¸€ä¸ªè¿›ç¨‹\n```js\nvar exec = require('child_process').exec;\nexec('ls', function(error, stdout, stderr){\n    if(error) {\n        console.error('error: ' + error);\n        return;\n    }\n    console.log('stdout: ' + stdout);\n});\n```\n\n## nodeæ˜¯æ€æ ·æ”¯æŒhttps?\nhttpså®ç°ï¼Œç¦»ä¸å¼€è¯ä¹¦ï¼Œé€šè¿‡opensslç”Ÿæˆå…¬é’¥ç§é’¥ï¼ˆä¸åšè¯¦ç»†ä»‹ç»ï¼‰ï¼Œç„¶ååŸºäº expressçš„ httpsæ¨¡å— å®ç°ï¼Œè®¾ç½®optionsé…ç½®, optionsæœ‰ä¸¤ä¸ªé€‰é¡¹ï¼Œä¸€ä¸ªæ˜¯\nè¯ä¹¦æœ¬ä½“ï¼Œä¸€ä¸ªæ˜¯å¯†ç ã€‚\n\n## nodeå’Œå®¢æˆ·ç«¯æ€ä¹ˆè§£å†³è·¨åŸŸçš„é—®é¢˜ï¼Ÿ\napp.all('*',(req,res,next)=>{}) æ•ˆæœç›¸å½“äºapp.use((req,res,next)=>{}), è¿™ä¹Ÿæ˜¯app.allçš„ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„åº”ç”¨ï¼Œå°±æ˜¯ç”¨æ¥å¤„ç†è·¨åŸŸè¯·æ±‚ã€‚\n```js\napp.all('*', function (req, res, next) {\n    res.header('Access-Control-Allow-Origin', '*');\n    res.header('Access-Control-Allow-Headers', 'X-Requested-With');\n    res.header('Access-Control-Allow-Methods', 'PUT, POST, GET, DELETE, OPTIONS');\n    res.header('Content-Type', 'application/json;charset=utf-8');\n    if (req.method == 'OPTIONS') {\n        res.send(200);\n    } else {\n        next();\n    }\n});\n```\n\n- corsæ¨¡å—\n\n## ä¸¤ä¸ªnodeç¨‹åºä¹‹é—´æ€æ ·äº¤äº’?\né€šè¿‡forkï¼ŒåŸç†æ˜¯å­ç¨‹åºç”¨process.onæ¥ç›‘å¬çˆ¶ç¨‹åºçš„æ¶ˆæ¯ï¼Œç”¨ process.sendç»™çˆ¶ç¨‹åºå‘æ¶ˆæ¯ï¼Œçˆ¶ç¨‹åºé‡Œç”¨child.on,child.sendè¿›è¡Œäº¤äº’ï¼Œæ¥å®ç°çˆ¶è¿›ç¨‹å’Œå­\nè¿›ç¨‹äº’ç›¸å‘é€æ¶ˆæ¯ã€‚\n\n> child-processå’Œprocessçš„stdin,stdout,stderroræ˜¯ä¸€æ ·çš„å—?æ¦‚å¿µéƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¾“å…¥ï¼Œè¾“å‡ºï¼Œé”™è¯¯ï¼Œéƒ½æ˜¯æµï¼åŒºåˆ«æ˜¯åœ¨çˆ¶ç¨‹åºçœ¼é‡Œï¼Œå­ç¨‹åºçš„stdoutæ˜¯è¾“å…¥æµï¼Œstdinæ˜¯è¾“å‡ºæµ\n\n## æ‰§è¡Œä¸­é—´ä»¶ï¼ˆæ´‹è‘±æ¨¡å‹ï¼‰\næˆ‘ä»¬é€šè¿‡ use æ³¨å†Œä¸­é—´ä»¶ï¼Œä¸­é—´ä»¶å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ç¬¬ä¸€ä¸ªæ˜¯ä¸Šä¸‹æ–‡ï¼Œç¬¬äºŒä¸ªæ˜¯ nextï¼Œåœ¨ä¸­é—´ä»¶å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè‹¥é‡åˆ° next() ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥åˆ°ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ä¸­æ‰§\nè¡Œï¼Œä¸‹ä¸€ä¸ªä¸­é—´æ‰§è¡Œå®Œæˆåï¼Œåœ¨è¿”å›ä¸Šä¸€ä¸ªä¸­é—´ä»¶æ‰§è¡Œ next() åé¢çš„æ–¹æ³•ï¼Œè¿™ä¾¿æ˜¯ä¸­é—´ä»¶çš„æ‰§è¡Œé€»è¾‘ã€‚\n\n## ä»‹ç»ä¸‹ stream\n\næµåœ¨ nodejs ç”¨çš„å¾ˆå¹¿æ³›ï¼Œä½†å¯¹äºå¤§éƒ¨åˆ†å¼€å‘è€…æ¥è¯´ï¼Œæ›´å¤šçš„æ˜¯ä½¿ç”¨æµï¼Œæ¯”å¦‚è¯´ HTTP ä¸­çš„ request respond ï¼Œæ ‡å‡†è¾“å…¥è¾“å‡ºï¼Œæ–‡ä»¶è¯»å–\nï¼ˆcreateReadStreamï¼‰ï¼Œ gulp æ„å»ºå·¥å…·ç­‰ç­‰ã€‚\næµï¼Œå¯ä»¥ç†è§£æˆæ˜¯ä¸€ä¸ªç®¡é“ï¼Œæ¯”å¦‚è¯»å–ä¸€ä¸ªæ–‡ä»¶ï¼Œå¸¸ç”¨çš„æ–¹æ³•æ˜¯ä»ç¡¬ç›˜è¯»å–åˆ°å†…å­˜ä¸­ï¼Œåœ¨ä»å†…å­˜ä¸­è¯»å–ï¼Œè¿™ç§æ–¹å¼å¯¹äºå°æ–‡ä»¶æ²¡é—®é¢˜ï¼Œä½†è‹¥æ˜¯å¤§æ–‡ä»¶ï¼Œæ•ˆç‡å°±éå¸¸ä½ï¼Œè¿˜æœ‰\nå¯èƒ½å†…å­˜ä¸è¶³ï¼Œé‡‡ç”¨æµçš„æ–¹å¼ï¼Œå°±å¥½åƒç»™å¤§æ–‡ä»¶æ’ä¸Šä¸€æ ¹å¸ç®¡ï¼ŒæŒç»­çš„ä¸€ç‚¹ç‚¹è¯»å–æ–‡ä»¶çš„å†…å®¹ï¼Œç®¡é“çš„å¦ä¸€ç«¯æ”¶åˆ°æ•°æ®ï¼Œå°±å¯ä»¥è¿›è¡Œå¤„ç†ï¼Œäº†è§£ Linux çš„æœ‹å‹åº”è¯¥éå¸¸ç†Ÿ\næ‚‰è¿™ä¸ªæ¦‚å¿µã€‚\n\n\n- Node.js ä¸­æœ‰å››ç§åŸºæœ¬çš„æµç±»å‹ï¼š\n\n1. Writable - å¯å†™å…¥æ•°æ®çš„æµï¼ˆä¾‹å¦‚ fs.createWriteStream()ï¼‰ã€‚\n2. Readable - å¯è¯»å–æ•°æ®çš„æµï¼ˆä¾‹å¦‚ fs.createReadStream()ï¼‰ã€‚\n3. Duplex - å¯è¯»åˆå¯å†™çš„æµï¼ˆä¾‹å¦‚ net.Socketï¼‰ã€‚\n4. Transform - åœ¨è¯»å†™è¿‡ç¨‹ä¸­å¯ä»¥ä¿®æ”¹æˆ–è½¬æ¢æ•°æ®çš„ Duplex æµï¼ˆä¾‹å¦‚ zlib.createDeflate()ï¼‰ã€‚æ¥è§¦æ¯”è¾ƒå¤šçš„è¿˜æ˜¯ç¬¬ä¸€äºŒç§pipe æ¥æ¶ˆè´¹å¯è¯»æµ\n\n```js\nconst fs = require('fs');\n// ç›´æ¥è¯»å–æ–‡ä»¶\nfs.open('./xxx.js', 'r', (err, data) => {\n    if (err) {\n        console.log(err)\n    }\n    console.log(data)\n})\n// æµçš„æ–¹å¼è¯»å–ã€å†™å…¥\nlet readStream = fs.createReadStream('./a.js');\nlet writeStream = fs.createWriteStream('./b.js')\nreadStream.pipe(writeStream).on('data', (chunk) => { // å¯è¯»æµè¢«å¯å†™æµæ¶ˆè´¹\n    console.log(chunk)\n    writeStream.write(chunk);\n}).on('finish', () => console.log('finish'))\n```\n\n","tags":["NodeJS"],"categories":["Node"]},{"title":"å®ç°å›¾ç‰‡æ‡’åŠ è½½","url":"%2F2020%2F%E5%AE%9E%E7%8E%B0%E5%9B%BE%E7%89%87%E6%87%92%E5%8A%A0%E8%BD%BD.html","content":"\n## å‰è¨€\nå›¾ç‰‡æ‡’åŠ è½½åœ¨ä¸€äº›å›¾ç‰‡å¯†é›†å‹çš„ç½‘ç«™ä¸­è¿ç”¨æ¯”è¾ƒå¤šï¼Œé€šè¿‡å›¾ç‰‡æ‡’åŠ è½½å¯ä»¥è®©ä¸€äº›ä¸å¯è§†çš„å›¾ç‰‡ä¸å»åŠ è½½ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½è¿‡å¤šçš„å›¾ç‰‡å¯¼è‡´è¯·æ±‚é˜»å¡ï¼ˆæµè§ˆå™¨ä¸€èˆ¬å¯¹åŒä¸€åŸŸå\nä¸‹çš„å¹¶å‘è¯·æ±‚çš„è¿æ¥æ•°æœ‰é™åˆ¶ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥æé«˜ç½‘ç«™çš„åŠ è½½é€Ÿåº¦ï¼Œæé«˜ç”¨æˆ·ä½“éªŒã€‚ \n\n[æ•ˆæœé¢„è§ˆ](http://cdn.mydearest.cn/blog/images/lazyload.png)\n\n---\n<!--more-->\n## å¦‚ä½•åš\n\n### æ­¥éª¤ä¸€\né¦–å…ˆæˆ‘ä»¬éœ€è¦è®©æˆ‘ä»¬htmlä¸­éœ€è¦æ‡’åŠ è½½çš„imgæ ‡ç­¾çš„srcè®¾ç½®ç¼©ç•¥å›¾æˆ–è€…ä¸è®¾ç½®srcï¼Œç„¶åè‡ªå®šä¹‰ä¸€ä¸ªå±æ€§ï¼Œå€¼ä¸ºçœŸæ­£çš„å›¾ç‰‡æˆ–è€…åŸå›¾çš„åœ°å€ï¼ˆæ¯”å¦‚ä¸‹é¢çš„data-srcï¼‰ï¼Œ\nå¹¶ä¸”å®šä¹‰ä¸€ä¸ªç±»åï¼Œè¡¨ç¤ºè¯¥å›¾ç‰‡æ˜¯éœ€è¦æ‡’åŠ è½½çš„ï¼ˆæ¯”å¦‚ä¸‹é¢ä¾‹å­çš„lazy-imageï¼‰ï¼Œè¿™æœ‰ä¸¤ä¸ªä½œç”¨ï¼š\n\n1. ä¸ºä»¥åè·å–éœ€è¦æ‡’åŠ è½½å›¾ç‰‡çš„imgå…ƒç´  \n2. å¯ä»¥ç»™è¿™ä¸ªç±»åè®¾ç½®èƒŒæ™¯å›¾ç‰‡ï¼Œä½œä¸ºå›¾ç‰‡æœªåŠ è½½å‰çš„è¿‡åº¦å›¾ç‰‡ï¼Œæ¯”å¦‚æ˜¾ç¤ºä¸ºloadingçš„å›¾ç‰‡ã€‚\n\n```js\n<img data-src=\"https://tb1.bdstatic.com/tb/cms/liveshow/ent_slid2.jpg\" class=\"lazy-image\"/> \n// csséƒ¨åˆ† \n.lazy-image { \n    background: url('../img/loading.gif') no-repeat center; \n}\n```\n\n### æ­¥éª¤äºŒ\né¡µé¢åŠ è½½å®Œåï¼Œæˆ‘ä»¬éœ€è¦è·å–æ‰€æœ‰éœ€è¦æ‡’åŠ è½½çš„å›¾ç‰‡çš„å…ƒç´ é›†åˆï¼Œåˆ¤æ–­æ˜¯å¦åœ¨å¯è§†åŒºåŸŸï¼Œå¦‚æœæ˜¯åœ¨å¯è§†åŒºåŸŸçš„è¯ï¼Œè®¾ç½®å…ƒç´ çš„srcå±æ€§å€¼ä¸ºçœŸæ­£å›¾ç‰‡çš„åœ°å€ã€‚\n\n```js\ninViewShow() {     \n    let imageElements = Array.prototype.slice.call(document.querySelectorAll('.lazy-image'))    \n    let len = imageElements.length     \n    for(let i = 0; i < len; i++) {         \n        let imageElement = imageElements[i]        \n        const rect = imageElement.getBoundingClientRect() // å‡ºç°åœ¨è§†é‡çš„æ—¶å€™åŠ è½½å›¾ç‰‡         \n        if(rect.top < document.documentElement.clientHeight) {             \n            imageElement.src = imageElement.dataset.src // ç§»é™¤æ‰å·²ç»æ˜¾ç¤ºçš„             \n            imageElements.splice(i, 1)             \n            len--             \n            i--         \n        }     \n    } \n}\n```\nè¿™é‡Œåˆ¤æ–­æ˜¯å¦å‡ºç°åœ¨å¯è§†åŒºåŸŸå†…ï¼Œæ˜¯é€šè¿‡è·å–å…ƒç´ çš„getBoundingClientRectå±æ€§çš„topå€¼å’Œé¡µé¢çš„clientHeightè¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœtopå€¼å°äºclientHeightï¼Œåˆ™è¯´\næ˜å…ƒç´ å‡ºç°åœ¨å¯è§†åŒºåŸŸäº†ã€‚BoundingClientRectæ˜¯è·å–æŸä¸ªå…ƒç´ ç›¸å¯¹äºè§†çª—çš„ä½ç½®é›†åˆï¼Œè§ä¸‹å›¾ï¼Œæ³¨æ„bottomå’Œrightå’Œæˆ‘ä»¬å¹³æ—¶çš„bottomå’Œrightä¸ä¸€æ ·ã€‚Â \n\n[lazyload2](http://cdn.mydearest.cn/blog/images/lazyload2.png)\n\n### æ­¥éª¤ä¸‰\nç”¨æˆ·æ»šåŠ¨çª—å£çš„æ—¶å€™ï¼Œéå†æ‰€æœ‰éœ€è¦æ‡’åŠ è½½çš„å…ƒç´ ï¼Œé€šè¿‡æ¯ä¸ªå…ƒç´ çš„BoundingClientRectå±æ€§æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å‡ºç°åœ¨å¯è§†åŒºåŸŸå†…ï¼Œåˆ¤æ–­æ–¹æ³•åŒç¬¬äºŒæ­¥ä¸€æ ·ã€‚ \n\n```js\ndocument.addEventListener('scroll', inViewShow)\n```\n\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥ä¼˜åŒ–ä¸‹ï¼Œå¯ä»¥é€šè¿‡å‡½æ•°èŠ‚æµä¼˜åŒ–æ»šåŠ¨äº‹ä»¶çš„å¤„ç†å‡½æ•°ã€‚\n\n\n### è¡¥å……-åˆ©ç”¨é«˜çº§ç‰¹æ€§Intersection Observeræ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§ã€‚\nä¸Šé¢æˆ‘ä»¬åˆ©ç”¨å…ƒç´ çš„BoundingClientRectçš„topå±æ€§å’Œbodyçš„clientHeightæ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§ï¼Œè¿™ç§ä¼ ç»Ÿæ–¹å¼è·å–å…ƒç´ æ˜¯å¦å¯è§çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯æˆ‘ä»¬è¿˜éœ€è¦ç»‘å®š\nscrolläº‹ä»¶ï¼Œscrolläº‹ä»¶æ˜¯ä¼´éšç€å¤§é‡è®¡ç®—çš„ï¼Œä¼šé€ æˆèµ„æºæµªè´¹ï¼Œè™½ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡èŠ‚æµå‡½æ•°æ¥æé«˜æ€§èƒ½ï¼Œä½†è¿˜æ˜¯ä¼šæœ‰æ€§èƒ½æµªè´¹çš„é—®é¢˜ï¼Œè€ŒIntersection Observer\nå¯ä»¥ä¸ç”¨ç›‘å¬scrolläº‹ä»¶ï¼Œåšåˆ°å…ƒç´ ä¸€å¯è§ä¾¿è°ƒç”¨å›è°ƒï¼Œåœ¨å›è°ƒé‡Œé¢æˆ‘ä»¬æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å¯è§ã€‚\n\n```js\nif (\"IntersectionObserver\" in window) {        \n    let lazyImageObserver = new IntersectionObserver((entries, observer) => {          \n        entries.forEach((entry, index) => {            \n            // å¦‚æœå…ƒç´ å¯è§            \n            if (entry.intersectionRatio > 0) {              \n                let lazyImage = entry.target              \n                lazyImage.src = lazyImage.dataset.src              \n                lazyImage.classList.remove(\"lazy-image\")              \n                lazyImageObserver.unobserve(lazyImage)              \n                // this.lazyImages.splice(index, 1)            \n            }          \n        })        \n    })        \n    this.lazyImages.forEach(function(lazyImage) {          \n        lazyImageObserver.observe(lazyImage);        \n    })      \n}\n```\n\n## ä»“åº“ä»£ç \n[lazyload](https://github.com/cosyer/jelly/tree/gh-pages/lazyload)\n\n[åœ¨çº¿é¢„è§ˆ](https://cosyer.github.io/jelly/lazyload/)\n","tags":["ä¼˜åŒ–"],"categories":["å·¥å…·"]},{"title":"è¶…è¯¦ç»†çš„TypeScriptæ•™ç¨‹","url":"%2F2020%2F%E8%B6%85%E8%AF%A6%E7%BB%86%E7%9A%84TypeScript%E6%95%99%E7%A8%8B.html","content":"\n# typescript\n[TypeScript](https://www.typescriptlang.org/) æ˜¯ä¸€ç§ç”±å¾®è½¯å¼€å‘çš„è‡ªç”±å’Œå¼€æºçš„ç¼–ç¨‹è¯­è¨€ã€‚å®ƒæ˜¯ JavaScript çš„ä¸€ä¸ªè¶…é›†ï¼Œè€Œä¸”æœ¬è´¨ä¸Šå‘è¿™ä¸ªè¯­è¨€æ·»åŠ äº†å¯é€‰çš„é™æ€ç±»å‹å’ŒåŸºäºç±»çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‚\n\n## åŒºåˆ«\n|TypeScript|JavaScript|\n|:---:|:---:|\n|JavaScript çš„è¶…é›†ç”¨äºè§£å†³å¤§å‹é¡¹ç›®çš„ä»£ç å¤æ‚æ€§|ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œç”¨äºåˆ›å»ºåŠ¨æ€ç½‘é¡µ|\n|å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´å‘ç°å¹¶çº æ­£é”™è¯¯|ä½œä¸ºä¸€ç§è§£é‡Šå‹è¯­è¨€ï¼Œåªèƒ½åœ¨è¿è¡Œæ—¶å‘ç°é”™è¯¯|\n|å¼ºç±»å‹ï¼Œæ”¯æŒé™æ€å’ŒåŠ¨æ€ç±»å‹|å¼±ç±»å‹ï¼Œæ²¡æœ‰é™æ€ç±»å‹é€‰é¡¹|\n|æœ€ç»ˆè¢«ç¼–è¯‘æˆ JavaScript ä»£ç ï¼Œä½¿æµè§ˆå™¨å¯ä»¥ç†è§£|å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨|\n|æ”¯æŒæ¨¡å—ã€æ³›å‹å’Œæ¥å£|ä¸æ”¯æŒæ¨¡å—ï¼Œæ³›å‹æˆ–æ¥å£|\n|æ”¯æŒ ES3ï¼ŒES4ï¼ŒES5 å’Œ ES6 ç­‰|ä¸æ”¯æŒç¼–è¯‘å…¶ä»– ES3ï¼ŒES4ï¼ŒES5 æˆ– ES6 åŠŸèƒ½|\n|ç¤¾åŒºçš„æ”¯æŒä»åœ¨å¢é•¿ï¼Œè€Œä¸”è¿˜ä¸æ˜¯å¾ˆå¤§|å¤§é‡çš„ç¤¾åŒºæ”¯æŒä»¥åŠå¤§é‡æ–‡æ¡£å’Œè§£å†³é—®é¢˜çš„æ”¯æŒ|\n\n### å®‰è£…\n```js\nnpm install -g typescript\n```\n\n### ç¼–è¯‘\n```js\ntsc helloworld.ts\n// helloworld.ts => helloworld.js\n```\n\n[åœ¨çº¿å­¦ä¹ è¯­æ³•å’Œç‰¹æ€§](https://www.typescriptlang.org/play)\n\n---\n<!--more-->\n\n## ç±»å‹ (11ç§)\n### Boolean\n```js\nlet isDone: boolean = false;\n// ES5ï¼švar isDone = false;\n```\n\n### Number\n```js\nlet count: number = 10;\n// ES5ï¼švar count = 10;\n```\n\n### String\n```js\nlet name: string = \"cosyer\";\n// ES5ï¼švar name = 'cosyer';\n```\n\n### Array\n```js\nlet list: number[] = [1, 2, 3];\n// ES5ï¼švar list = [1,2,3];\n\nlet list: Array<number> = [1, 2, 3]; // Array<number>æ³›å‹è¯­æ³•\n// ES5ï¼švar list = [1,2,3];\n```\n\n### Enum\nä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›å¸¦åå­—çš„å¸¸é‡ã€‚ä½¿ç”¨æšä¸¾å¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾æˆ–åˆ›å»ºä¸€ç»„æœ‰åŒºåˆ«çš„ç”¨ä¾‹ã€‚ TypeScript æ”¯æŒæ•°å­—çš„å’ŒåŸºäºå­—ç¬¦ä¸²çš„æšä¸¾ã€‚\n#### æ•°å­—æšä¸¾\n```js\nenum Direction {\n  NORTH,\n  SOUTH,\n  EAST,\n  WEST,\n}\n\nlet dir: Direction = Direction.NORTH;\n```\né»˜è®¤æƒ…å†µä¸‹ï¼ŒNORTH çš„åˆå§‹å€¼ä¸º 0ï¼Œå…¶ä½™çš„æˆå‘˜ä¼šä» 1 å¼€å§‹è‡ªåŠ¨å¢é•¿ã€‚æ¢å¥è¯è¯´ï¼ŒDirection.SOUTH çš„å€¼ä¸º 1ï¼ŒDirection.EAST çš„å€¼ä¸º 2ï¼ŒDirection.WEST çš„å€¼ä¸º 3ã€‚ä¸Šé¢çš„æšä¸¾ç¤ºä¾‹ä»£ç ç»è¿‡ç¼–è¯‘åä¼šç”Ÿæˆä»¥ä¸‹ä»£ç ï¼š\n```js\n\"use strict\";\nvar Direction;\n(function (Direction) {\n  Direction[(Direction[\"NORTH\"] = 0)] = \"NORTH\";\n  Direction[(Direction[\"SOUTH\"] = 1)] = \"SOUTH\";\n  Direction[(Direction[\"EAST\"] = 2)] = \"EAST\";\n  Direction[(Direction[\"WEST\"] = 3)] = \"WEST\";\n})(Direction || (Direction = {}));\nvar dir = Direction.NORTH;\n```\nä¹Ÿå¯ä»¥è®¾ç½® NORTH çš„åˆå§‹å€¼ï¼Œæ¯”å¦‚ï¼š\n```js\nenum Direction {\n  NORTH = 3,\n  SOUTH,\n  EAST,\n  WEST,\n}\n```\n\n#### å­—ç¬¦ä¸²æšä¸¾\n```js\nenum Direction {\n  NORTH = \"NORTH\",\n  SOUTH = \"SOUTH\",\n  EAST = \"EAST\",\n  WEST = \"WEST\",\n}\n```\nç¼–è¯‘ç”Ÿæˆï¼š\n```js\n\"use strict\";\nvar Direction;\n(function (Direction) {\n    Direction[\"NORTH\"] = \"NORTH\";\n    Direction[\"SOUTH\"] = \"SOUTH\";\n    Direction[\"EAST\"] = \"EAST\";\n    Direction[\"WEST\"] = \"WEST\";\n})(Direction || (Direction = {}));\n```\n\n#### å¼‚æ„æšä¸¾\nå¼‚æ„æšä¸¾çš„æˆå‘˜å€¼æ˜¯æ•°å­—å’Œå­—ç¬¦ä¸²çš„æ··åˆï¼š\n```js\nenum Enum {\n  A,\n  B,\n  C = \"C\",\n  D = \"D\",\n  E = 8,\n  F,\n}\n```\nç¼–è¯‘ç”Ÿæˆï¼š\n```js\n\"use strict\";\nvar Enum;\n(function (Enum) {\n    Enum[Enum[\"A\"] = 0] = \"A\";\n    Enum[Enum[\"B\"] = 1] = \"B\";\n    Enum[\"C\"] = \"C\";\n    Enum[\"D\"] = \"D\";\n    Enum[Enum[\"E\"] = 8] = \"E\";\n    Enum[Enum[\"F\"] = 9] = \"F\";\n})(Enum || (Enum = {}));\n```\næ•°å­—æšä¸¾ç›¸å¯¹å­—ç¬¦ä¸²æšä¸¾å¤šäº† â€œåå‘æ˜ å°„â€ï¼š\n```js\nconsole.log(Enum.A) //è¾“å‡ºï¼š0\nconsole.log(Enum[0]) // è¾“å‡ºï¼šA\n```\n\n### Any\nåœ¨ TypeScript ä¸­ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸º any ç±»å‹ã€‚è¿™è®© any ç±»å‹æˆä¸ºäº†ç±»å‹ç³»ç»Ÿçš„é¡¶çº§ç±»å‹ï¼ˆä¹Ÿè¢«ç§°ä½œå…¨å±€è¶…çº§ç±»å‹ï¼‰ã€‚\n```js\nlet notSure: any = 666;\nnotSure = \"cosyer\";\nnotSure = false;\n```\nany ç±»å‹æœ¬è´¨ä¸Šæ˜¯ç±»å‹ç³»ç»Ÿçš„ä¸€ä¸ªé€ƒé€¸èˆ±ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œè¿™ç»™äº†æˆ‘ä»¬å¾ˆå¤§çš„è‡ªç”±ï¼šTypeScript å…è®¸æˆ‘ä»¬å¯¹ any ç±»å‹çš„å€¼æ‰§è¡Œä»»ä½•æ“ä½œï¼Œè€Œæ— éœ€äº‹å…ˆæ‰§è¡Œä»»ä½•å½¢å¼çš„æ£€æŸ¥ã€‚\n```js\nlet value: any;\n\nvalue.foo.bar; // OK\nvalue.trim(); // OK\nvalue(); // OK\nnew value(); // OK\nvalue[0][1]; // OK\n```\nåœ¨è®¸å¤šåœºæ™¯ä¸‹ï¼Œè¿™å¤ªå®½æ¾äº†ã€‚ä½¿ç”¨ any ç±»å‹ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ç¼–å†™ç±»å‹æ­£ç¡®ä½†åœ¨è¿è¡Œæ—¶æœ‰é—®é¢˜çš„ä»£ç ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ any ç±»å‹ï¼Œå°±æ— æ³•ä½¿ç”¨ TypeScript æä¾›çš„å¤§é‡çš„ä¿æŠ¤æœºåˆ¶ã€‚ä¸ºäº†è§£å†³ any å¸¦æ¥çš„é—®é¢˜ï¼ŒTypeScript 3.0 å¼•å…¥äº† unknown ç±»å‹ã€‚AnyScript 2333.\n\n### Unknown\nå°±åƒæ‰€æœ‰ç±»å‹éƒ½å¯ä»¥èµ‹å€¼ç»™ anyï¼Œæ‰€æœ‰ç±»å‹ä¹Ÿéƒ½å¯ä»¥èµ‹å€¼ç»™ unknownã€‚è¿™ä½¿å¾— unknown æˆä¸º TypeScript ç±»å‹ç³»ç»Ÿçš„å¦ä¸€ç§é¡¶çº§ç±»å‹ï¼ˆå¦ä¸€ç§æ˜¯ anyï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ unknown ç±»å‹çš„ä½¿ç”¨ç¤ºä¾‹ï¼š\n```js\nlet value: unknown;\n\nvalue = true; // OK\nvalue = 42; // OK\nvalue = \"Hello World\"; // OK\nvalue = []; // OK\nvalue = {}; // OK\nvalue = Math.random; // OK\nvalue = null; // OK\nvalue = undefined; // OK\nvalue = new TypeError(); // OK\nvalue = Symbol(\"type\"); // OK\n```\n\nå¯¹ value å˜é‡çš„æ‰€æœ‰èµ‹å€¼éƒ½è¢«è®¤ä¸ºæ˜¯ç±»å‹æ­£ç¡®çš„ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬å°è¯•å°†ç±»å‹ä¸º unknown çš„å€¼èµ‹å€¼ç»™å…¶ä»–ç±»å‹çš„å˜é‡æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\n```js\nlet value: unknown;\n\nlet value1: unknown = value; // OK\nlet value2: any = value; // OK\nlet value3: boolean = value; // Error\nlet value4: number = value; // Error\nlet value5: string = value; // Error\nlet value6: object = value; // Error\nlet value7: any[] = value; // Error\nlet value8: Function = value; // Error\n```\nunknown ç±»å‹åªèƒ½è¢«èµ‹å€¼ç»™ any ç±»å‹å’Œ unknown ç±»å‹æœ¬èº«ã€‚ç›´è§‚åœ°è¯´ï¼Œè¿™æ˜¯æœ‰é“ç†çš„ï¼šåªæœ‰èƒ½å¤Ÿä¿å­˜ä»»æ„ç±»å‹å€¼çš„å®¹å™¨æ‰èƒ½ä¿å­˜ unknown ç±»å‹çš„å€¼ã€‚æ¯•ç«Ÿæˆ‘ä»¬ä¸çŸ¥é“å˜é‡ value ä¸­å­˜å‚¨äº†ä»€ä¹ˆç±»å‹çš„å€¼ã€‚\n\nå°† value å˜é‡ç±»å‹è®¾ç½®ä¸º unknown åï¼Œè¿™äº›æ“ä½œéƒ½ä¸å†è¢«è®¤ä¸ºæ˜¯ç±»å‹æ­£ç¡®çš„ã€‚é€šè¿‡å°† any ç±»å‹æ”¹å˜ä¸º unknown ç±»å‹ï¼Œæˆ‘ä»¬å·²å°†å…è®¸æ‰€æœ‰æ›´æ”¹çš„é»˜è®¤è®¾ç½®ï¼Œæ›´æ”¹ä¸ºç¦æ­¢ä»»ä½•æ›´æ”¹ã€‚\n\n### Tuple\nä¼—æ‰€å‘¨çŸ¥ï¼Œæ•°ç»„ä¸€èˆ¬ç”±åŒç§ç±»å‹çš„å€¼ç»„æˆï¼Œä½†æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨å•ä¸ªå˜é‡ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„å€¼ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å…ƒç»„ã€‚åœ¨ JavaScript ä¸­æ˜¯æ²¡æœ‰å…ƒç»„çš„ï¼Œå…ƒç»„æ˜¯ TypeScript ä¸­ç‰¹æœ‰çš„ç±»å‹ï¼Œå…¶å·¥ä½œæ–¹å¼ç±»ä¼¼äºæ•°ç»„ã€‚\n\nå…ƒç»„å¯ç”¨äºå®šä¹‰å…·æœ‰æœ‰é™æ•°é‡çš„æœªå‘½åå±æ€§çš„ç±»å‹ã€‚æ¯ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªå…³è”çš„ç±»å‹ã€‚ä½¿ç”¨å…ƒç»„æ—¶ï¼Œå¿…é¡»æä¾›æ¯ä¸ªå±æ€§çš„å€¼ã€‚ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£å…ƒç»„çš„æ¦‚å¿µï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼š\n```js\nlet tupleType: [string, boolean]; // å¼ºåˆ¶ç±»å‹åŒ¹é…\ntupleType = [\"cosyer\", true];\n```\n\n### Void\næŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œvoid ç±»å‹åƒæ˜¯ä¸ any ç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ voidï¼š\n```js\n// å£°æ˜å‡½æ•°è¿”å›å€¼ä¸ºvoid\nfunction warnUser(): void {\n  console.log(\"This is my warning message\");\n}\n```\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå£°æ˜ä¸€ä¸ª void ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆä½œç”¨ï¼Œå› ä¸ºå®ƒçš„å€¼åªèƒ½ä¸º undefined æˆ– nullï¼š\n```js\nlet unusable: void = undefined;\n```\n\n### Null/Undefined\nTypeScript é‡Œï¼Œundefined å’Œ null ä¸¤è€…æœ‰å„è‡ªçš„ç±»å‹åˆ†åˆ«ä¸º undefined å’Œ nullã€‚\n```js\nlet u: undefined = undefined;\nlet n: null = null;\n```\né»˜è®¤æƒ…å†µä¸‹ null å’Œ undefined æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ null å’Œ undefined èµ‹å€¼ç»™ number ç±»å‹çš„å˜é‡ã€‚ç„¶è€Œï¼Œå¦‚æœä½ æŒ‡å®šäº†--strictNullChecks æ ‡è®°ï¼Œnull å’Œ undefined åªèƒ½èµ‹å€¼ç»™ void å’Œå®ƒä»¬å„è‡ªçš„ç±»å‹ã€‚\n\n### Never\nnever ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œnever ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ã€‚\n\n```js\n// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹\nfunction error(message: string): never {\n  throw new Error(message);\n}\n\nfunction infiniteLoop(): never {\n  while (true) {}\n}\n```\n\nåœ¨ TypeScript ä¸­ï¼Œå¯ä»¥åˆ©ç”¨ never ç±»å‹çš„ç‰¹æ€§æ¥å®ç°å…¨é¢æ€§æ£€æŸ¥ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š\n```js\ntype Foo = string | number;\n\nfunction controlFlowAnalysisWithNever(foo: Foo) {\n  if (typeof foo === \"string\") {\n    // è¿™é‡Œ foo è¢«æ”¶çª„ä¸º string ç±»å‹\n  } else if (typeof foo === \"number\") {\n    // è¿™é‡Œ foo è¢«æ”¶çª„ä¸º number ç±»å‹\n  } else {\n    // foo åœ¨è¿™é‡Œæ˜¯ never\n    const check: never = foo;\n  }\n}\n```\n\næ³¨æ„åœ¨ else åˆ†æ”¯é‡Œé¢ï¼Œæˆ‘ä»¬æŠŠæ”¶çª„ä¸º never çš„ foo èµ‹å€¼ç»™ä¸€ä¸ªæ˜¾ç¤ºå£°æ˜çš„ never å˜é‡ã€‚å¦‚æœä¸€åˆ‡é€»è¾‘æ­£ç¡®ï¼Œé‚£ä¹ˆè¿™é‡Œåº”è¯¥èƒ½å¤Ÿç¼–è¯‘é€šè¿‡ã€‚ä½†æ˜¯å‡å¦‚åæ¥æœ‰ä¸€å¤©ä½ çš„åŒäº‹ä¿®æ”¹äº† Foo çš„ç±»å‹ï¼š\ntype Foo = string | number | boolean;\nå¤åˆ¶ä»£ç ç„¶è€Œä»–å¿˜è®°åŒæ—¶ä¿®æ”¹ controlFlowAnalysisWithNever æ–¹æ³•ä¸­çš„æ§åˆ¶æµç¨‹ï¼Œè¿™æ—¶å€™ else åˆ†æ”¯çš„ foo ç±»å‹ä¼šè¢«æ”¶çª„ä¸º boolean ç±»å‹ï¼Œå¯¼è‡´æ— æ³•èµ‹å€¼ç»™ never ç±»å‹ï¼Œè¿™æ—¶å°±ä¼šäº§ç”Ÿä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚é€šè¿‡è¿™ä¸ªæ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿\ncontrolFlowAnalysisWithNever æ–¹æ³•æ€»æ˜¯ç©·å°½äº† Foo çš„æ‰€æœ‰å¯èƒ½ç±»å‹ã€‚ é€šè¿‡è¿™ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š`ä½¿ç”¨ never é¿å…å‡ºç°æ–°å¢äº†è”åˆç±»å‹æ²¡æœ‰å¯¹åº”çš„å®ç°ï¼Œç›®çš„å°±æ˜¯å†™å‡ºç±»å‹ç»å¯¹å®‰å…¨çš„ä»£ç ã€‚`\n\n## ç±»å‹æ–­è¨€\n### å°–æ‹¬å·\n```js\nlet someValue: any = \"this is a string\";\nlet strLength: number = (<string>someValue).length;\n```\n\n### as\n```js\nlet someValue: any = \"this is a string\";\nlet strLength: number = (someValue as string).length;\n```\n\n## ç±»å‹å®ˆå«\nç±»å‹ä¿æŠ¤æ˜¯å¯æ‰§è¡Œè¿è¡Œæ—¶æ£€æŸ¥çš„ä¸€ç§è¡¨è¾¾å¼ï¼Œç”¨äºç¡®ä¿è¯¥ç±»å‹åœ¨ä¸€å®šçš„èŒƒå›´å†…ã€‚æ¢å¥è¯è¯´ï¼Œç±»å‹ä¿æŠ¤å¯ä»¥ä¿è¯ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°½ç®¡å®ƒçš„å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å€¼ã€‚ç±»å‹ä¿æŠ¤ä¸ç‰¹æ€§æ£€æµ‹å¹¶ä¸æ˜¯å®Œå…¨ä¸åŒï¼Œå…¶ä¸»è¦æ€æƒ³æ˜¯å°è¯•æ£€æµ‹å±æ€§ã€æ–¹æ³•æˆ–åŸå‹ï¼Œä»¥ç¡®å®šå¦‚ä½•å¤„ç†å€¼ã€‚ç›®å‰ä¸»è¦æœ‰å››ç§çš„æ–¹å¼æ¥å®ç°ç±»å‹ä¿æŠ¤ï¼š\n\n### in å…³é”®å­—\n```js\ninterface Admin {\n  name: string;\n  privileges: string[];\n}\n\ninterface Employee {\n  name: string;\n  startDate: Date;\n}\n\ntype UnknownEmployee = Employee | Admin;\n\nfunction printEmployeeInformation(emp: UnknownEmployee) {\n  console.log(\"Name: \" + emp.name);\n  if (\"privileges\" in emp) {\n    console.log(\"Privileges: \" + emp.privileges);\n  }\n  if (\"startDate\" in emp) {\n    console.log(\"Start Date: \" + emp.startDate);\n  }\n}\n```\n\n### typeof å…³é”®å­—\n```js\nfunction padLeft(value: string, padding: string | number) {\n  if (typeof padding === \"number\") {\n      return Array(padding + 1).join(\" \") + value;\n  }\n  if (typeof padding === \"string\") {\n      return padding + value;\n  }\n  throw new Error(`Expected string or number, got '${padding}'.`);\n}\n```\ntypeof ç±»å‹ä¿æŠ¤åªæ”¯æŒä¸¤ç§å½¢å¼ï¼štypeof v === \"typename\" å’Œ typeof v !== typenameï¼Œ\"typename\" å¿…é¡»æ˜¯ \"number\"ï¼Œ \"string\"ï¼Œ \"boolean\" æˆ– \"symbol\"ã€‚ ä½†æ˜¯ TypeScript å¹¶ä¸ä¼šé˜»æ­¢ä½ ä¸å…¶å®ƒå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œè¯­è¨€ä¸ä¼šæŠŠé‚£äº›è¡¨è¾¾å¼è¯†åˆ«ä¸ºç±»å‹ä¿æŠ¤ã€‚\n\n### instanceof å…³é”®å­—\n```js\ninterface Padder {\n  getPaddingString(): string;\n}\n\nclass SpaceRepeatingPadder implements Padder {\n  constructor(private numSpaces: number) {}\n  getPaddingString() {\n    return Array(this.numSpaces + 1).join(\" \");\n  }\n}\n\nclass StringPadder implements Padder {\n  constructor(private value: string) {}\n  getPaddingString() {\n    return this.value;\n  }\n}\n\nlet padder: Padder = new SpaceRepeatingPadder(6);\n\nif (padder instanceof SpaceRepeatingPadder) {\n  // padderçš„ç±»å‹æ”¶çª„ä¸º 'SpaceRepeatingPadder'\n}\n```\n\n### è‡ªå®šä¹‰ç±»å‹ä¿æŠ¤çš„ç±»å‹è°“è¯\n```js\nfunction isNumber(x: any): x is number {\n  return typeof x === \"number\";\n}\n\nfunction isString(x: any): x is string {\n  return typeof x === \"string\";\n}\n```\n\n## è”åˆç±»å‹å’Œç±»å‹åˆ«å\n### è”åˆç±»å‹\nè”åˆç±»å‹é€šå¸¸ä¸ null æˆ– undefined ä¸€èµ·ä½¿ç”¨ï¼š\n```js\nconst sayHello = (name: string | undefined) => {\n  /* ... */\n};\n```\nä¾‹å¦‚ï¼Œè¿™é‡Œ name çš„ç±»å‹æ˜¯ string | undefined æ„å‘³ç€å¯ä»¥å°† string æˆ– undefined çš„å€¼ä¼ é€’ç»™sayHello å‡½æ•°ã€‚\n```js\nsayHello(\"cosyer\");\nsayHello(undefined);\n```\n\n### å¯è¾¨è¯†è”åˆ\n\nTypeScript å¯è¾¨è¯†è”åˆï¼ˆDiscriminated Unionsï¼‰ç±»å‹ï¼Œä¹Ÿç§°ä¸ºä»£æ•°æ•°æ®ç±»å‹æˆ–æ ‡ç­¾è”åˆç±»å‹ã€‚å®ƒåŒ…å« 3 ä¸ªè¦ç‚¹ï¼š`å¯è¾¨è¯†ã€è”åˆç±»å‹å’Œç±»å‹å®ˆå«ã€‚`\n\nè¿™ç§ç±»å‹çš„æœ¬è´¨æ˜¯ç»“åˆè”åˆç±»å‹å’Œå­—é¢é‡ç±»å‹çš„ä¸€ç§ç±»å‹ä¿æŠ¤æ–¹æ³•ã€‚`å¦‚æœä¸€ä¸ªç±»å‹æ˜¯å¤šä¸ªç±»å‹çš„è”åˆç±»å‹ï¼Œä¸”å¤šä¸ªç±»å‹å«æœ‰ä¸€ä¸ªå…¬å…±å±æ€§ï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªå…¬å…±å±æ€§ï¼Œæ¥åˆ›å»ºä¸åŒçš„ç±»å‹ä¿æŠ¤åŒºå—ã€‚`\n\n#### å¯è¾¨è¯†\nå¯è¾¨è¯†è¦æ±‚è”åˆç±»å‹ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å«æœ‰ä¸€ä¸ªå•ä¾‹ç±»å‹å±æ€§(å…¬å…±å±æ€§)ï¼Œæ¯”å¦‚ï¼š\n```js\nenum CarTransmission {\n  Automatic = 200,\n  Manual = 300\n}\n\ninterface Motorcycle {\n  vType: \"motorcycle\"; // discriminant\n  make: number; // year\n}\n\ninterface Car {\n  vType: \"car\"; // discriminant\n  transmission: CarTransmission\n}\n\ninterface Truck {\n  vType: \"truck\"; // discriminant\n  capacity: number; // in tons\n}\n```\nåœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«å®šä¹‰äº† Motorcycleã€ Car å’Œ Truck ä¸‰ä¸ªæ¥å£ï¼Œåœ¨è¿™äº›æ¥å£ä¸­éƒ½åŒ…å«ä¸€ä¸ª vType å±æ€§ï¼Œè¯¥å±æ€§è¢«ç§°ä¸ºå¯è¾¨è¯†çš„å±æ€§ï¼Œè€Œå…¶å®ƒçš„å±æ€§åªè·Ÿç‰¹æ€§çš„æ¥å£ç›¸å…³ã€‚\n\n#### è”åˆç±»å‹\nåŸºäºå‰é¢å®šä¹‰äº†ä¸‰ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª Vehicle è”åˆç±»å‹ï¼š\n```js\ntype Vehicle = Motorcycle | Car | Truck;\n```\nç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ä½¿ç”¨ Vehicle è”åˆç±»å‹ï¼Œå¯¹äº Vehicle ç±»å‹çš„å˜é‡ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä¸åŒç±»å‹çš„è½¦è¾†ã€‚\n\n#### ç±»å‹å®ˆå«\nä¸‹é¢æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ª evaluatePrice æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºæ ¹æ®è½¦è¾†çš„ç±»å‹ã€å®¹é‡å’Œè¯„ä¼°å› å­æ¥è®¡ç®—ä»·æ ¼ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š\n```js\nconst EVALUATION_FACTOR = Math.PI; \nfunction evaluatePrice(vehicle: Vehicle) {\n  return vehicle.capacity * EVALUATION_FACTOR;\n}\n\nconst myTruck: Truck = { vType: \"truck\", capacity: 9.5 };\nevaluatePrice(myTruck);\n```\nå¯¹äºä»¥ä¸Šä»£ç ï¼ŒTypeScript ç¼–è¯‘å™¨å°†ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š\n```js\nProperty 'capacity' does not exist on type 'Vehicle'.\nProperty 'capacity' does not exist on type 'Motorcycle'.\n```\n\nåŸå› æ˜¯åœ¨ Motorcycle æ¥å£ä¸­ï¼Œå¹¶ä¸å­˜åœ¨ capacity å±æ€§ï¼Œè€Œå¯¹äº Car æ¥å£æ¥è¯´ï¼Œå®ƒä¹Ÿä¸å­˜åœ¨ capacity å±æ€§ã€‚é‚£ä¹ˆï¼Œç°åœ¨æˆ‘ä»¬åº”è¯¥å¦‚ä½•è§£å†³ä»¥ä¸Šé—®é¢˜å‘¢ï¼Ÿè¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹å®ˆå«ã€‚ä¸‹é¢æˆ‘ä»¬æ¥é‡æ„ä¸€ä¸‹å‰é¢å®šä¹‰çš„ evaluatePrice æ–¹æ³•ï¼Œé‡æ„åçš„ä»£ç å¦‚ä¸‹ï¼š\n```js\nfunction evaluatePrice(vehicle: Vehicle) {\n  switch(vehicle.vType) {\n    case \"car\":\n      return vehicle.transmission * EVALUATION_FACTOR;\n    case \"truck\":\n      return vehicle.capacity * EVALUATION_FACTOR;\n    case \"motorcycle\":\n      return vehicle.make * EVALUATION_FACTOR;\n  }\n}\n```\n\n### ç±»å‹åˆ«å\nç±»å‹åˆ«åç”¨æ¥ç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—(alias)ã€‚\n```js\ntype Message = string | string[];\n\nlet greet = (message: Message) => {\n  // ...\n};\n```\n\n## äº¤å‰ç±»å‹\nTypeScript äº¤å‰ç±»å‹æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚ è¿™è®©æˆ‘ä»¬å¯ä»¥æŠŠç°æœ‰çš„å¤šç§ç±»å‹å åŠ åˆ°ä¸€èµ·æˆä¸ºä¸€ç§ç±»å‹ï¼Œå®ƒåŒ…å«äº†æ‰€éœ€çš„æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§ã€‚\n\n```js\ninterface IPerson {\n  id: string;\n  age: number;\n}\n\ninterface IWorker {\n  companyId: string;\n}\n\ntype IStaff = IPerson & IWorker;\n\nconst staff: IStaff = {\n  id: 'E1006',\n  age: 33,\n  companyId: 'EFT'\n};\n\nconsole.dir(staff)\n```\nåœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä¸º IPerson å’Œ IWorker ç±»å‹å®šä¹‰äº†ä¸åŒçš„æˆå‘˜ï¼Œç„¶åé€šè¿‡ & è¿ç®—ç¬¦å®šä¹‰äº† IStaff äº¤å‰ç±»å‹ï¼Œæ‰€ä»¥è¯¥ç±»å‹åŒæ—¶æ‹¥æœ‰ IPerson å’Œ IWorker è¿™ä¸¤ç§ç±»å‹çš„æˆå‘˜ã€‚\n\n## å‡½æ•°\n### åŒºåˆ«\n|TypeScript|JavaScript|\n|:---:|:---:|\n|å«æœ‰ç±»å‹|æ— ç±»å‹|\n|ç®­å¤´å‡½æ•°|ç®­å¤´å‡½æ•°ï¼ˆES2015ï¼‰|\n|å‡½æ•°ç±»å‹|æ— å‡½æ•°ç±»å‹|\n|å¿…å¡«å’Œå¯é€‰å‚æ•°|æ‰€æœ‰å‚æ•°éƒ½æ˜¯å¯é€‰çš„|\n|é»˜è®¤å‚æ•°|é»˜è®¤å‚æ•°|\n|å‰©ä½™å‚æ•°|å‰©ä½™å‚æ•°|\n|å‡½æ•°é‡è½½|æ— å‡½æ•°é‡è½½|\n\n### ç®­å¤´å‡½æ•°\nç®€å•çœ‹ä¸‹ç¤ºä¾‹ï¼Œè¯¦ç»†å¯è§[JavaScript ä¸­ this çš„è¯¦è§£](https://mydearest.cn/jsthis.html)\n```js\nmyBooks.forEach(() => console.log('reading'));\n\nmyBooks.forEach(title => console.log(title));\n\nmyBooks.forEach((title, idx, arr) =>\n  console.log(idx + '-' + title);\n);\n\nmyBooks.forEach((title, idx, arr) => {\n  console.log(idx + '-' + title);\n});\n```\n\n### å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹\n```js\nfunction createUserId(name: string, id: number): string {\n  return name + id;\n}\n```\n\n### å‡½æ•°ç±»å‹\n```js\nlet IdGenerator: (chars: string, nums: number) => string;\n\nfunction createUserId(name: string, id: number): string {\n  return name + id;\n}\n\nIdGenerator = createUserId;\n```\n\n### å¯é€‰å‚æ•°å’Œé»˜è®¤å‚æ•°\n```js\n// å¯é€‰å‚æ•°\nfunction createUserId(name: string, id: number, age?: number): string {\n  return name + id;\n}\n\n// é»˜è®¤å‚æ•°\nfunction createUserId(\n  name: string = \"cosyer\",\n  id: number,\n  age?: number\n): string {\n  return name + id;\n}\n```\nåœ¨å£°æ˜å‡½æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡ ? å·æ¥å®šä¹‰å¯é€‰å‚æ•°ï¼Œæ¯”å¦‚ age?: number è¿™ç§å½¢å¼ã€‚åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¯é€‰å‚æ•°è¦æ”¾åœ¨æ™®é€šå‚æ•°çš„åé¢ï¼Œä¸ç„¶ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚\n\n### å‰©ä½™å‚æ•°\n```js\nfunction push(array, ...items) {\n  items.forEach(function (item) {\n    array.push(item);\n  });\n}\n\nlet a = [];\npush(a, 1, 2, 3);\n```\n\n### å‡½æ•°é‡è½½\nå‡½æ•°é‡è½½æˆ–æ–¹æ³•é‡è½½æ˜¯ä½¿ç”¨ç›¸åŒåç§°å’Œä¸åŒå‚æ•°æ•°é‡æˆ–ç±»å‹åˆ›å»ºå¤šä¸ªæ–¹æ³•çš„ä¸€ç§èƒ½åŠ›ã€‚è¦è§£å†³å‰é¢é‡åˆ°çš„é—®é¢˜ï¼Œæ–¹æ³•å°±æ˜¯ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰æ¥è¿›è¡Œå‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®è¿™ä¸ªåˆ—è¡¨å»å¤„ç†å‡½æ•°çš„è°ƒç”¨ã€‚\n```js\nfunction add(a: number, b: number): number;\nfunction add(a: string, b: string): string;\nfunction add(a: string, b: number): string;\nfunction add(a: number, b: string): string;\nfunction add(a: Combinable, b: Combinable) {\n  if (typeof a === \"string\" || typeof b === \"string\") {\n    return a.toString() + b.toString();\n  }\n  return a + b;\n}\n```\n\næ–¹æ³•é‡è½½æ˜¯æŒ‡åœ¨åŒä¸€ä¸ªç±»ä¸­æ–¹æ³•åŒåï¼Œå‚æ•°ä¸åŒï¼ˆå‚æ•°ç±»å‹ä¸åŒã€å‚æ•°ä¸ªæ•°ä¸åŒæˆ–å‚æ•°ä¸ªæ•°ç›¸åŒæ—¶å‚æ•°çš„å…ˆåé¡ºåºä¸åŒï¼‰ï¼Œè°ƒç”¨æ—¶æ ¹æ®å®å‚çš„å½¢å¼ï¼Œé€‰æ‹©ä¸å®ƒåŒ¹é…çš„æ–¹æ³•æ‰§è¡Œæ“ä½œçš„ä¸€ç§æŠ€æœ¯ã€‚æ‰€ä»¥ç±»ä¸­æˆå‘˜æ–¹æ³•æ»¡è¶³é‡è½½çš„æ¡ä»¶æ˜¯ï¼šåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œæ–¹æ³•åç›¸åŒä¸”å‚æ•°åˆ—è¡¨ä¸åŒã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªæˆå‘˜æ–¹æ³•é‡è½½çš„ä¾‹å­ï¼š\n```js\nclass Calculator {\n  add(a: number, b: number): number;\n  add(a: string, b: string): string;\n  add(a: string, b: number): string;\n  add(a: number, b: string): string;\n  add(a: Combinable, b: Combinable) {\n    if (typeof a === \"string\" || typeof b === \"string\") {\n      return a.toString() + b.toString();\n    }\n    return a + b;\n  }\n}\n\nconst calculator = new Calculator();\nconst result = calculator.add(\"cosyer\", \" chenyu\");\n```\nè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ TypeScript ç¼–è¯‘å™¨å¤„ç†å‡½æ•°é‡è½½æ—¶ï¼Œå®ƒä¼šæŸ¥æ‰¾é‡è½½åˆ—è¡¨ï¼Œå°è¯•ä½¿ç”¨ç¬¬ä¸€ä¸ªé‡è½½å®šä¹‰ã€‚ å¦‚æœåŒ¹é…çš„è¯å°±ä½¿ç”¨è¿™ä¸ªã€‚ å› æ­¤ï¼Œåœ¨å®šä¹‰é‡è½½çš„æ—¶å€™ï¼Œä¸€å®šè¦æŠŠæœ€ç²¾ç¡®çš„å®šä¹‰æ”¾åœ¨æœ€å‰é¢ã€‚å¦å¤–åœ¨ Calculator ç±»ä¸­ï¼Œadd(a: Combinable, b: Combinable){ } å¹¶ä¸æ˜¯é‡è½½åˆ—è¡¨çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å¯¹äº add æˆå‘˜æ–¹æ³•æ¥è¯´ï¼Œæˆ‘ä»¬åªå®šä¹‰äº†å››ä¸ªé‡è½½æ–¹æ³•ã€‚\n\n## æ•°ç»„\n### æ•°ç»„è§£æ„\n```js\nlet x: number; let y: number; let z: number;\nlet five_array = [0,1,2,3,4];\n[x,y,z] = five_array; // 0 1 2\n```\n\n### æ‰©å±•è¿ç®—ç¬¦\n```js\nlet two_array = [0, 1];\nlet five_array = [...two_array, 2, 3, 4];\n```\n\n### æ•°ç»„éå†\n```js\nlet colors: string[] = [\"red\", \"green\", \"blue\"];\nfor (let i of colors) {\n  console.log(i);\n}\n```\n\n## å¯¹è±¡\n### å¯¹è±¡è§£æ„\n```js\nlet person = {\n  name: \"cosyer\",\n  gender: \"Male\",\n};\n\nlet { name, gender } = person;\n```\n\n### å¯¹è±¡å±•å¼€æ‰©å±•\n```js\nlet person = {\n  name: \"cosyer\",\n  gender: \"Male\",\n  address: \"Nanjing\",\n};\n\n// ç»„è£…å¯¹è±¡\nlet personWithAge = { ...person, age: 33 };\n\n// è·å–é™¤äº†æŸäº›é¡¹å¤–çš„å…¶å®ƒé¡¹\nlet { name, ...rest } = person;\n```\n\n## æ¥å£\n\nåœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œæ¥å£æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å¯¹è¡Œä¸ºçš„æŠ½è±¡ï¼Œè€Œå…·ä½“å¦‚ä½•è¡ŒåŠ¨éœ€è¦ç”±ç±»å»å®ç°ã€‚\n\nTypeScript ä¸­çš„æ¥å£æ˜¯ä¸€ä¸ªéå¸¸çµæ´»çš„æ¦‚å¿µï¼Œé™¤äº†å¯ç”¨äºå¯¹ç±»çš„ä¸€éƒ¨åˆ†è¡Œä¸ºè¿›è¡ŒæŠ½è±¡ä»¥å¤–ï¼Œä¹Ÿå¸¸ç”¨äºå¯¹ã€Œå¯¹è±¡çš„å½¢çŠ¶ï¼ˆShapeï¼‰ã€è¿›è¡Œæè¿°\n\n### å¯¹è±¡çš„å½¢çŠ¶(æè¿°)\n```js\ninterface Person {\n  name: string;\n  age: number;\n}\n\nlet cosyer: Person = {\n  name: \"cosyer\",\n  age: 25,\n};\n```\n\n### å¯é€‰ã€åªè¯»å±æ€§\n```js\ninterface Person {\n  readonly name: string;\n  age?: number;\n}\n```\nåªè¯»å±æ€§ç”¨äºé™åˆ¶åªèƒ½åœ¨å¯¹è±¡åˆšåˆšåˆ›å»ºçš„æ—¶å€™ä¿®æ”¹å…¶å€¼ã€‚æ­¤å¤– TypeScript è¿˜æä¾›äº† ReadonlyArray<T> ç±»å‹ï¼Œå®ƒä¸ Array<T> ç›¸ä¼¼ï¼Œåªæ˜¯æŠŠæ‰€æœ‰å¯å˜æ–¹æ³•å»æ‰äº†ï¼Œå› æ­¤å¯ä»¥ç¡®ä¿æ•°ç»„åˆ›å»ºåå†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ã€‚\n\n```js\nlet a: number[] = [1, 2, 3, 4];\nlet ro: ReadonlyArray<number> = a;\nro[0] = 12; // error!\nro.push(5); // error!\nro.length = 100; // error!\na = ro; // error!\n```\n\n\n## æ³›å‹\nè½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„ APIï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘å¯é‡ç”¨æ€§ã€‚ ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ï¼Œè¿™åœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½ã€‚\n\n> åœ¨åƒ C# å’Œ Java è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ã€‚ è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚\n\nè®¾è®¡æ³›å‹çš„å…³é”®ç›®çš„æ˜¯åœ¨æˆå‘˜ä¹‹é—´æä¾›æœ‰æ„ä¹‰çš„çº¦æŸï¼Œè¿™äº›æˆå‘˜å¯ä»¥æ˜¯ï¼šç±»çš„å®ä¾‹æˆå‘˜ã€ç±»çš„æ–¹æ³•ã€å‡½æ•°å‚æ•°å’Œå‡½æ•°è¿”å›å€¼ã€‚\n\næ³›å‹ï¼ˆGenericsï¼‰æ˜¯å…è®¸åŒä¸€ä¸ªå‡½æ•°æ¥å—ä¸åŒç±»å‹å‚æ•°çš„ä¸€ç§æ¨¡æ¿ã€‚ç›¸æ¯”äºä½¿ç”¨ any ç±»å‹ï¼Œä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯å¤ç”¨çš„ç»„ä»¶è¦æ›´å¥½ï¼Œå› ä¸ºæ³›å‹ä¼šä¿ç•™å‚æ•°ç±»å‹ã€‚\n\n### æ³›å‹æ¥å£\n```js\ninterface GenericIdentityFn<T> {\n  (arg: T): T;\n}\n```\n\n### æ³›å‹ç±»\n```js\nclass GenericNumber<T> {\n  zeroValue: T;\n  add: (x: T, y: T) => T;\n}\n\nlet myGenericNumber = new GenericNumber<number>();\nmyGenericNumber.zeroValue = 0;\nmyGenericNumber.add = function (x, y) {\n  return x + y;\n};\n```\n\n### æ³›å‹å˜é‡\nå¯¹åˆšæ¥è§¦ TypeScript æ³›å‹çš„å°ä¼™ä¼´æ¥è¯´ï¼Œçœ‹åˆ° T å’Œ Eï¼Œè¿˜æœ‰ K å’Œ V è¿™äº›æ³›å‹å˜é‡æ—¶ï¼Œä¼°è®¡ä¼šä¸€è„¸æ‡µé€¼ã€‚å…¶å®è¿™äº›å¤§å†™å­—æ¯å¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨çš„åŒºåˆ«ï¼Œåªä¸è¿‡æ˜¯ä¸€ä¸ªçº¦å®šå¥½çš„è§„èŒƒè€Œå·²ã€‚ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨å¤§å†™å­—æ¯ A-Z å®šä¹‰çš„ç±»å‹å˜é‡éƒ½å±äºæ³›å‹ï¼ŒæŠŠ T æ¢æˆ Aï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ä¸€äº›å¸¸è§æ³›å‹å˜é‡ä»£è¡¨çš„æ„æ€ï¼š\n\n- Tï¼ˆTypeï¼‰ï¼šè¡¨ç¤ºä¸€ä¸ª TypeScript ç±»å‹\n- Kï¼ˆKeyï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„é”®ç±»å‹\n- Vï¼ˆValueï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„å€¼ç±»å‹\n- Eï¼ˆElementï¼‰ï¼šè¡¨ç¤ºå…ƒç´ ç±»å‹\n\n### æ³›å‹å·¥å…·ç±»å‹(6ç§)\nä¸ºäº†æ–¹ä¾¿å¼€å‘è€… TypeScript å†…ç½®äº†ä¸€äº›å¸¸ç”¨çš„å·¥å…·ç±»å‹ï¼Œæ¯”å¦‚ Partialã€Requiredã€Readonlyã€Record å’Œ ReturnType ç­‰ã€‚\n#### typeof\ntypeof æ“ä½œç¬¦å¯ä»¥ç”¨æ¥è·å–ä¸€ä¸ªå˜é‡å£°æ˜æˆ–å¯¹è±¡çš„ç±»å‹ã€‚\n```js\ninterface Person {\n  name: string;\n  age: number;\n}\n\nconst cosyer: Person = { name: 'cosyer', age: 25 };\ntype Cosyer= typeof cosyer; // -> Person\n\nfunction toArray(x: number): Array<number> {\n  return [x];\n}\n\ntype Func = typeof toArray; // -> (x: number) => number[]\n```\n\n#### keyof\nkeyof æ“ä½œç¬¦å¯ä»¥ç”¨æ¥ä¸€ä¸ªå¯¹è±¡ä¸­çš„æ‰€æœ‰ key å€¼ï¼š\n```js\ninterface Person {\n    name: string;\n    age: number;\n}\n\ntype K1 = keyof Person; // \"name\" | \"age\"\ntype K2 = keyof Person[]; // \"length\" | \"toString\" | \"pop\" | \"push\" | \"concat\" | \"join\" \ntype K3 = keyof { [x: string]: Person };  // string | number\n```\n\n#### in\nin ç”¨æ¥éå†æšä¸¾ç±»å‹ï¼š\n```js\ntype Keys = \"a\" | \"b\" | \"c\"\n\ntype Obj =  {\n  [p in Keys]: any\n} // -> { a: any, b: any, c: any }\n```\n\n#### infer\nåœ¨æ¡ä»¶ç±»å‹è¯­å¥ä¸­ï¼Œå¯ä»¥ç”¨ infer å£°æ˜ä¸€ä¸ªç±»å‹å˜é‡å¹¶ä¸”å¯¹å®ƒè¿›è¡Œä½¿ç”¨ã€‚\n```js\ntype ReturnType<T> = T extends (\n  ...args: any[]\n) => infer R ? R : any;\n```\nä»¥ä¸Šä»£ç ä¸­ infer R å°±æ˜¯å£°æ˜ä¸€ä¸ªå˜é‡æ¥æ‰¿è½½ä¼ å…¥å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ï¼Œç®€å•è¯´å°±æ˜¯ç”¨å®ƒå–åˆ°å‡½æ•°è¿”å›å€¼çš„ç±»å‹æ–¹ä¾¿ä¹‹åä½¿ç”¨ã€‚\n\n#### extends\næœ‰æ—¶å€™æˆ‘ä»¬å®šä¹‰çš„æ³›å‹ä¸æƒ³è¿‡äºçµæ´»æˆ–è€…è¯´æƒ³ç»§æ‰¿æŸäº›ç±»ç­‰ï¼Œå¯ä»¥é€šè¿‡ extends å…³é”®å­—æ·»åŠ æ³›å‹çº¦æŸã€‚\n```js\ninterface ILengthwise {\n  length: number;\n}\n\nfunction loggingIdentity<T extends ILengthwise>(arg: T): T {\n  console.log(arg.length);\n  return arg;\n}\n```\n```js\n// error, number doesn't have a .length property\nloggingIdentity(3)\n\nloggingIdentity({length: 10, value: 3});\n```\n\n#### Partial\nPartial<T> çš„ä½œç”¨å°±æ˜¯å°†æŸä¸ªç±»å‹é‡Œçš„å±æ€§å…¨éƒ¨å˜ä¸ºå¯é€‰é¡¹ ?ã€‚\n```js\n/**\n * node_modules/typescript/lib/lib.es5.d.ts\n * Make all properties in T optional\n */\ntype Partial<T> = {\n  [P in keyof T]?: T[P];\n};\n```\n\n```js\ninterface Todo {\n  title: string;\n  description: string;\n}\n\nfunction updateTodo(todo: Todo, fieldsToUpdate: Partial<Todo>) {\n  return { ...todo, ...fieldsToUpdate };\n}\n\nconst todo1 = {\n  title: \"organize desk\",\n  description: \"clear clutter\",\n};\n\nconst todo2 = updateTodo(todo1, {\n  description: \"throw out trash\",\n});\n```\n\n## è£…é¥°å™¨\n### è£…é¥°å™¨æ˜¯ä»€ä¹ˆ\n- å®ƒæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼\n- è¯¥è¡¨è¾¾å¼è¢«æ‰§è¡Œåï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°\n- å‡½æ•°çš„å…¥å‚åˆ†åˆ«ä¸º targetã€name å’Œ descriptor\n- æ‰§è¡Œè¯¥å‡½æ•°åï¼Œå¯èƒ½è¿”å› descriptor å¯¹è±¡ï¼Œç”¨äºé…ç½® target å¯¹è±¡\n\n### è£…é¥°å™¨çš„åˆ†ç±»\n- ç±»è£…é¥°å™¨ï¼ˆClass decoratorsï¼‰\n- å±æ€§è£…é¥°å™¨ï¼ˆProperty decoratorsï¼‰\n- æ–¹æ³•è£…é¥°å™¨ï¼ˆMethod decoratorsï¼‰\n- å‚æ•°è£…é¥°å™¨ï¼ˆParameter decoratorsï¼‰\n\n#### ç±»è£…é¥°å™¨\n```js\ndeclare type ClassDecorator = <TFunction extends Function>(\n  target: TFunction\n) => TFunction | void;\n```\nç±»è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯ç”¨æ¥è£…é¥°ç±»çš„ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼š\n- target: TFunction - è¢«è£…é¥°çš„ç±»\n```js\nfunction Greeter(target: Function): void {\n  target.prototype.greet = function (): void {\n    console.log(\"Hello cosyer!\");\n  };\n}\n\n@Greeter\nclass Greeting {\n  constructor() {\n    // å†…éƒ¨å®ç°\n  }\n}\n\nlet myGreeting = new Greeting();\nmyGreeting.greet(); // console output: 'Hello cosyer!';\n```\n\n`è‡ªå®šä¹‰å‚æ•°`\n```js\nfunction Greeter(greeting: string) {\n  return function (target: Function) {\n    target.prototype.greet = function (): void {\n      console.log(greeting);\n    };\n  };\n}\n\n@Greeter(\"Hello TS!\")\nclass Greeting {\n  constructor() {\n    // å†…éƒ¨å®ç°\n  }\n}\n\nlet myGreeting = new Greeting();\nmyGreeting.greet(); // console output: 'Hello TS!';\n```\n\n#### å±æ€§è£…é¥°å™¨\n```js\ndeclare type PropertyDecorator = (target:Object, \n  propertyKey: string | symbol ) => void;\n```\n\nå±æ€§è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œç”¨æ¥è£…é¥°ç±»çš„å±æ€§ã€‚å®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š\n- target: Object - è¢«è£…é¥°çš„ç±»\n- propertyKey: string | symbol - è¢«è£…é¥°ç±»çš„å±æ€§å\n\n```js\nfunction logProperty(target: any, key: string) {\n  delete target[key];\n\n  const backingField = \"_\" + key;\n\n  Object.defineProperty(target, backingField, {\n    writable: true,\n    enumerable: true,\n    configurable: true\n  });\n\n  // property getter\n  const getter = function (this: any) {\n    const currVal = this[backingField];\n    console.log(`Get: ${key} => ${currVal}`);\n    return currVal;\n  };\n\n  // property setter\n  const setter = function (this: any, newVal: any) {\n    console.log(`Set: ${key} => ${newVal}`);\n    this[backingField] = newVal;\n  };\n\n  // Create new property with getter and setter\n  Object.defineProperty(target, key, {\n    get: getter,\n    set: setter,\n    enumerable: true,\n    configurable: true\n  });\n}\n\nclass Person { \n  @logProperty\n  public name: string;\n\n  constructor(name : string) { \n    this.name = name;\n  }\n}\n\nconst p1 = new Person(\"cosyer\");\np1.name = \"chenyu\";\n// Set: name => cosyer\n// Set: name => chenyu\n```\n\n#### æ–¹æ³•è£…é¥°å™¨\n```js\ndeclare type MethodDecorator = <T>(target:Object, propertyKey: string | symbol, \t \t\n  descriptor: TypePropertyDescript<T>) => TypedPropertyDescriptor<T> | void;\n```\n\næ–¹æ³•è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œç”¨æ¥è£…é¥°ç±»çš„æ–¹æ³•ã€‚å®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š\n- target: Object - è¢«è£…é¥°çš„ç±»\n- propertyKey: string | symbol - æ–¹æ³•å\n- descriptor: TypePropertyDescript - å±æ€§æè¿°ç¬¦\n\n```js\nfunction LogOutput(tarage: Function, key: string, descriptor: any) {\n  let originalMethod = descriptor.value;\n  let newMethod = function(...args: any[]): any {\n    let result: any = originalMethod.apply(this, args);\n    if(!this.loggedOutput) {\n      this.loggedOutput = new Array<any>();\n    }\n    this.loggedOutput.push({\n      method: key,\n      parameters: args,\n      output: result,\n      timestamp: new Date()\n    });\n    return result;\n  };\n  descriptor.value = newMethod;\n}\n\nclass Calculator {\n  @LogOutput\n  double (num: number): number {\n    return num * 2;\n  }\n}\n\nlet calc = new Calculator();\ncalc.double(11);\n// console ouput: [{method: \"double\", output: 22, ...}]\nconsole.log(calc.loggedOutput); \n```\n\n#### å‚æ•°è£…é¥°å™¨\n```js\ndeclare type ParameterDecorator = (target: Object, propertyKey: string | symbol, \n  parameterIndex: number ) => void\n```\nå‚æ•°è£…é¥°å™¨é¡¾åæ€ä¹‰ï¼Œæ˜¯ç”¨æ¥è£…é¥°å‡½æ•°å‚æ•°ï¼Œå®ƒæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š\n- target: Object - è¢«è£…é¥°çš„ç±»\n- propertyKey: string | symbol - æ–¹æ³•å\n- parameterIndex: number - æ–¹æ³•ä¸­å‚æ•°çš„ç´¢å¼•å€¼\n\n```js\nfunction Log(target: Function, key: string, parameterIndex: number) {\n  let functionLogged = key || target.prototype.constructor.name;\n  console.log(`The parameter in position ${parameterIndex} at ${functionLogged} has\n\tbeen decorated`);\n}\n\nclass Greeter {\n  greeting: string;\n  constructor(@Log phrase: string) {\n\tthis.greeting = phrase; \n  }\n}\n\n// console output: The parameter in position 0 \n// at Greeter has been decorated\n```\n\n\n## ç±»\n### ç±»çš„å±æ€§å’Œæ–¹æ³•\nåœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œç±»æ˜¯ä¸€ç§é¢å‘å¯¹è±¡è®¡ç®—æœºç¼–ç¨‹è¯­è¨€çš„æ„é€ ï¼Œæ˜¯åˆ›å»ºå¯¹è±¡çš„è“å›¾ï¼Œæè¿°äº†æ‰€åˆ›å»ºçš„å¯¹è±¡å…±åŒçš„å±æ€§å’Œæ–¹æ³•ã€‚\n```js\nclass Greeter {\n  // é™æ€å±æ€§\n  static cname: string = \"Greeter\";\n  // æˆå‘˜å±æ€§\n  greeting: string;\n\n  // æ„é€ å‡½æ•° - æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ\n  constructor(message: string) {\n    this.greeting = message;\n  }\n\n  // é™æ€æ–¹æ³•\n  static getClassName() {\n    return \"Class name is Greeter\";\n  }\n\n  // æˆå‘˜æ–¹æ³•\n  greet() {\n    return \"Hello, \" + this.greeting;\n  }\n}\n\nlet greeter = new Greeter(\"world\");\n```\nç¼–è¯‘ç”Ÿæˆï¼š\n```js\n\"use strict\";\nvar Greeter = /** @class */ (function () {\n    // æ„é€ å‡½æ•° - æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ\n    function Greeter(message) {\n        this.greeting = message;\n    }\n    // é™æ€æ–¹æ³•\n    Greeter.getClassName = function () {\n        return \"Class name is Greeter\";\n    };\n    // æˆå‘˜æ–¹æ³•\n    Greeter.prototype.greet = function () {\n        return \"Hello, \" + this.greeting;\n    };\n    // é™æ€å±æ€§\n    Greeter.cname = \"Greeter\";\n    return Greeter;\n}());\nvar greeter = new Greeter(\"world\");\n```\n\n### è®¿é—®å™¨(getter/setter)\nåœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ getter å’Œ setter æ–¹æ³•æ¥å®ç°æ•°æ®çš„å°è£…å’Œæœ‰æ•ˆæ€§æ ¡éªŒï¼Œé˜²æ­¢å‡ºç°å¼‚å¸¸æ•°æ®ã€‚\n```js\nlet passcode = \"Hello TypeScript\";\n\nclass Employee {\n  private _fullName: string;\n\n  get fullName(): string {\n    return this._fullName;\n  }\n\n  set fullName(newName: string) {\n    if (passcode && passcode == \"Hello TypeScript\") {\n      this._fullName = newName;\n    } else {\n      console.log(\"Error: Unauthorized update of employee!\");\n    }\n  }\n}\n\nlet employee = new Employee();\nemployee.fullName = \"cosyer\";\nif (employee.fullName) {\n  console.log(employee.fullName);\n}\n```\n\n### ç»§æ‰¿\nç»§æ‰¿ (Inheritance) æ˜¯ä¸€ç§è”ç»“ç±»ä¸ç±»çš„å±‚æ¬¡æ¨¡å‹ã€‚æŒ‡çš„æ˜¯ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºå­ç±»ã€å­æ¥å£ï¼‰ç»§æ‰¿å¦å¤–çš„ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºçˆ¶ç±»ã€çˆ¶æ¥å£ï¼‰çš„åŠŸèƒ½ï¼Œå¹¶å¯ä»¥å¢åŠ è‡ªå·±æ–°åŠŸèƒ½çš„èƒ½åŠ›ï¼Œç»§æ‰¿æ˜¯ç±»ä¸ç±»æˆ–è€…æ¥å£ä¸æ¥å£ä¹‹é—´æœ€å¸¸è§çš„å…³ç³»ã€‚\n```js\nclass Animal {\n  name: string;\n  \n  constructor(theName: string) {\n    this.name = theName;\n  }\n  \n  move(distanceInMeters: number = 0) {\n    console.log(`${this.name} moved ${distanceInMeters}m.`);\n  }\n}\n\nclass Snake extends Animal {\n  constructor(name: string) {\n    super(name);\n  }\n  \n  move(distanceInMeters = 5) {\n    console.log(\"Slithering...\");\n    super.move(distanceInMeters);\n  }\n}\n\nlet sam = new Snake(\"Sammy the Python\");\nsam.move();\n```\n\n### ç§æœ‰å­—æ®µ\nåœ¨ TypeScript 3.8 ç‰ˆæœ¬å°±å¼€å§‹æ”¯æŒECMAScript ç§æœ‰å­—æ®µ\n```js\nclass Person {\n  #name: string;\n\n  constructor(name: string) {\n    this.#name = name;\n  }\n\n  greet() {\n    console.log(`Hello, my name is ${this.#name}!`);\n  }\n}\n\nlet cosyer = new Person(\"cosyer\");\n\ncosyer.#name;\n// Property '#name' is not accessible outside class 'Person'\n// because it has a private identifier.\n```\n\nä¸å¸¸è§„å±æ€§ï¼ˆç”šè‡³ä½¿ç”¨ private ä¿®é¥°ç¬¦å£°æ˜çš„å±æ€§ï¼‰ä¸åŒï¼Œç§æœ‰å­—æ®µè¦ç‰¢è®°ä»¥ä¸‹è§„åˆ™ï¼š\n\n- ç§æœ‰å­—æ®µä»¥ # å­—ç¬¦å¼€å¤´ï¼Œæœ‰æ—¶æˆ‘ä»¬ç§°ä¹‹ä¸ºç§æœ‰åç§°ï¼›\n- æ¯ä¸ªç§æœ‰å­—æ®µåç§°éƒ½å”¯ä¸€åœ°é™å®šäºå…¶åŒ…å«çš„ç±»ï¼›\n- ä¸èƒ½åœ¨ç§æœ‰å­—æ®µä¸Šä½¿ç”¨ TypeScript å¯è®¿é—®æ€§ä¿®é¥°ç¬¦ï¼ˆå¦‚ public æˆ– privateï¼‰ï¼›\n- ç§æœ‰å­—æ®µä¸èƒ½åœ¨åŒ…å«çš„ç±»ä¹‹å¤–è®¿é—®ï¼Œç”šè‡³ä¸èƒ½è¢«æ£€æµ‹åˆ°ã€‚\n\n## ç¼–è¯‘ä¸Šä¸‹æ–‡\n### tsconfig.json çš„ä½œç”¨\n- ç”¨äºæ ‡è¯† TypeScript é¡¹ç›®çš„æ ¹è·¯å¾„ï¼›\n- ç”¨äºé…ç½® TypeScript ç¼–è¯‘å™¨ï¼›\n- ç”¨äºæŒ‡å®šç¼–è¯‘çš„æ–‡ä»¶ã€‚\n\n### tsconfig.json é‡è¦å­—æ®µ\n- files - è®¾ç½®è¦ç¼–è¯‘çš„æ–‡ä»¶çš„åç§°ï¼›\n- include - è®¾ç½®éœ€è¦è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›\n- exclude - è®¾ç½®æ— éœ€è¿›è¡Œç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„æ¨¡å¼åŒ¹é…ï¼›\n- compilerOptions - è®¾ç½®ä¸ç¼–è¯‘æµç¨‹ç›¸å…³çš„é€‰é¡¹ã€‚\n\n### compilerOptions é€‰é¡¹\n```js\n{\n  \"compilerOptions\": {\n\n    /* åŸºæœ¬é€‰é¡¹ */\n    \"target\": \"es5\",                       // æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬: 'ES3' (default), 'ES5', 'ES6'/'ES2015', 'ES2016', 'ES2017', or 'ESNEXT'\n    \"module\": \"commonjs\",                  // æŒ‡å®šä½¿ç”¨æ¨¡å—: 'commonjs', 'amd', 'system', 'umd' or 'es2015'\n    \"lib\": [],                             // æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶\n    \"allowJs\": true,                       // å…è®¸ç¼–è¯‘ javascript æ–‡ä»¶\n    \"checkJs\": true,                       // æŠ¥å‘Š javascript æ–‡ä»¶ä¸­çš„é”™è¯¯\n    \"jsx\": \"preserve\",                     // æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: 'preserve', 'react-native', or 'react'\n    \"declaration\": true,                   // ç”Ÿæˆç›¸åº”çš„ '.d.ts' æ–‡ä»¶\n    \"sourceMap\": true,                     // ç”Ÿæˆç›¸åº”çš„ '.map' æ–‡ä»¶\n    \"outFile\": \"./\",                       // å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶\n    \"outDir\": \"./\",                        // æŒ‡å®šè¾“å‡ºç›®å½•\n    \"rootDir\": \"./\",                       // ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„ --outDir.\n    \"removeComments\": true,                // åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š\n    \"noEmit\": true,                        // ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶\n    \"importHelpers\": true,                 // ä» tslib å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°\n    \"isolatedModules\": true,               // å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å— ï¼ˆä¸ 'ts.transpileModule' ç±»ä¼¼ï¼‰.\n\n    /* ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹ */\n    \"strict\": true,                        // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹\n    \"noImplicitAny\": true,                 // åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ anyç±»å‹æ—¶æŠ¥é”™\n    \"strictNullChecks\": true,              // å¯ç”¨ä¸¥æ ¼çš„ null æ£€æŸ¥\n    \"noImplicitThis\": true,                // å½“ this è¡¨è¾¾å¼å€¼ä¸º any ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯\n    \"alwaysStrict\": true,                  // ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥ 'use strict'\n\n    /* é¢å¤–çš„æ£€æŸ¥ */\n    \"noUnusedLocals\": true,                // æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯\n    \"noUnusedParameters\": true,            // æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯\n    \"noImplicitReturns\": true,             // å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯\n    \"noFallthroughCasesInSwitch\": true,    // æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰\n\n    /* æ¨¡å—è§£æé€‰é¡¹ */\n    \"moduleResolution\": \"node\",            // é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š 'node' (Node.js) or 'classic' (TypeScript pre-1.6)\n    \"baseUrl\": \"./\",                       // ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•\n    \"paths\": {},                           // æ¨¡å—ååˆ°åŸºäº baseUrl çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨\n    \"rootDirs\": [],                        // æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹\n    \"typeRoots\": [],                       // åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨\n    \"types\": [],                           // éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨\n    \"allowSyntheticDefaultImports\": true,  // å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚\n\n    /* Source Map Options */\n    \"sourceRoot\": \"./\",                    // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ° TypeScript æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®\n    \"mapRoot\": \"./\",                       // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®\n    \"inlineSourceMap\": true,               // ç”Ÿæˆå•ä¸ª soucemaps æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°† sourcemaps ç”Ÿæˆä¸åŒçš„æ–‡ä»¶\n    \"inlineSources\": true,                 // å°†ä»£ç ä¸ sourcemaps ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº† --inlineSourceMap æˆ– --sourceMap å±æ€§\n\n    /* å…¶ä»–é€‰é¡¹ */\n    \"experimentalDecorators\": true,        // å¯ç”¨è£…é¥°å™¨\n    \"emitDecoratorMetadata\": true          // ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ\n  }\n}\n```\n\n## ä»“åº“ä»£ç \n[typescript-learn](https://github.com/cosyer/typescript-learn)\n\n## ç›¸å…³é—®é¢˜\n[TypeScript ä¸­ï¼Œinterface å’Œ type çš„åŒºåˆ«](https://mydearest.cn/2020/TypeScript%20%E4%B8%AD%EF%BC%8Cinterface%20%E5%92%8C%20type%20%E7%9A%84%E5%8C%BA%E5%88%AB.html)\n","tags":["typescript"],"categories":["JS"]},{"title":"XSSå­¦ä¹ &å®è·µ","url":"%2F2020%2FXSS%E5%AD%A6%E4%B9%A0%26%E5%AE%9E%E8%B7%B5.html","content":"\n`webå®‰å…¨`ä¸€ç›´æ˜¯å¼€å‘ä¸­ä¸å¯å¿½è§†çš„ä¸€éƒ¨åˆ†ã€‚è€Œxssä½œä¸ºwebå¼€å‘ä¸­æœ€å¸¸è§çš„æ”»å‡»æ‰‹æ®µï¼Œé˜²èŒƒæ˜¯å¿…ç„¶çš„ã€‚åŸºäºwebæµè§ˆå™¨tricksï¼ŒJavaScriptçš„å‘å±•ï¼Œnpmç­‰å¼€æºé¡¹ç›®æ¼\næ´ï¼Œwebæ³¨å…¥ç­‰ä¼šè®©å¼€å‘è€…è¶Šæ¥è¶Šé˜²ä¸èƒœé˜²ã€‚\n\n## æ’å…¥æ‰§è¡Œæ ‡ç­¾\n- script\n- img onerrorè§¦å‘\n- iframe srcdocè§¦å‘\n\n## æ ‡ç­¾ç­‰æå‰é—­åˆ(æˆªæ–­)\n- å¦‚åœ¨å¯Œæ–‡æœ¬, input, textarea, å¯ç¼–è¾‘divç­‰ï¼Œ[0x01](https://xss.haozi.me/#/0x01)ï¼Œ[0x02](https://xss.haozi.me/#/0x02)\n- styleæ ‡ç­¾\n```js\n<style>\n</style ><script>alert(1)</script>\n</style>\n```\n- æ³¨é‡Šæå‰é—­åˆ\n```js\n--!><script>alert(1)</script>\n```\n\n---\n<!--more-->\n\n- input typeé‡å†™\ninputçš„typeï¼Œåœ¨typeä¹‹å‰å¯ä»¥é‡å†™ä¸ºimageï¼Œé€šè¿‡onerroræ³¨å…¥\n\n## ES6 tagæ ‡ç­¾\n```js\n<script>alert`1`</script>\n```\n\n## è½¬ä¹‰å­—ç¬¦ä»å¯æ‰§è¡Œ\n- scriptæ ‡ç­¾å¯æ‰§è¡Œ base64çš„htmlä»£ç ç‰‡æ®µ\n- onerrorå¯æ‰§è¡Œ è½¬ä¹‰ä¸º html 10è¿›åˆ¶ï¼Œ 16è¿›åˆ¶çš„ä»£ç ç‰‡æ®µ\n- urlè½¬ä¹‰ä¸º html 10è¿›åˆ¶ï¼Œ 16è¿›åˆ¶ ä»å¯æ‰§è¡Œ, urlçš„å®šä¹‰å¯è·å–å…¶ä»–åŸŸä¸‹çš„èµ„æºæ–‡ä»¶\n```js\nscheme:[//[user:password@]host[:port]][/]path[?query][#fragment]\n```\n\n## svgä¸é—­åˆä¹Ÿæ‰§è¡Œ\n## æ­£åˆ™æ›¿æ¢ä¸é è°±\n- æ­£åˆ™æ›¿æ¢\n- æ­£åˆ™å‘½ä¸­\n- è¿½åŠ æ‰§è¡Œï¼Œæ­£åˆ™æ›¿æ¢å¤±æ•ˆ\n\n## é˜²æŠ¤\n- é…ç½®å®‰å…¨å¤´\n- xssç›‘æ§\n- æœåŠ¡ç«¯ç™½åå•è¿‡æ»¤\n","tags":["å‰ç«¯"],"categories":["å·¥å…·"]},{"title":"windowså®‰è£…mysql","url":"%2F2020%2Fwindows%E5%AE%89%E8%A3%85mysql.html","content":"\n## å®‰è£…åŒ…ä¸‹è½½\n\n- ä¸‹è½½åœ°å€ï¼šhttps://dev.mysql.com/downloads/mysql/\n\n- Mysqlå›½å†…é•œåƒï¼šhttp://mirrors.sohu.com/mysql/MySQL-8.0/\n\nä¸‹è½½å®Œæˆåï¼Œé€‰æ‹©ä¸€ä¸ªç£ç›˜å†…æ”¾ç½®å¹¶è§£å‹ã€‚\n\n## è®¾ç½®ç¯å¢ƒå˜é‡ \n1. å˜é‡åï¼šMYSQL_HOME\n2. å˜é‡å€¼ï¼šE:\\mysql5.7.23\n3. pathé‡Œæ·»åŠ ï¼š%MYSQL_HOME%\\bin\n\n## åˆå§‹åŒ–è®¾ç½®\n### åˆ›å»ºdata Uploadsæ–‡ä»¶å¤¹\n### my.initæ–‡ä»¶\n\n```js\n[mysqld]\nport=3306\ncharacter_set_server=utf8\nbasedir=E:\\mysql5.7.23\ndatadir=E:\\mysql5.7.23\\data\nserver-id=1\nsql_mode=NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION\nlower_case_table_names=1\ninnodb_file_per_table = 1\nlog_timestamps=SYSTEM\n\nlog-error   = error.log\nslow_query_log = 1\nslow_query_log_file = slow.log\nlong_query_time = 5\nlog-bin = binlog\nbinlog_format = row\nexpire_logs_days = 15\nlog_bin_trust_function_creators = 1\nsecure-file-priv=E:\\mysql5.7.23\\Uploads\n\n[client]   \ndefault-character-set=utf8\n```\n\n---\n<!--more-->\n\n### åˆå§‹åŒ–ç”Ÿæˆdataä¸‹æ–‡ä»¶(ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œcmd)\n```js\nmysqld --initialize-insecure\n```\n\n### å®‰è£…æœåŠ¡\n```js\nmysqld --install mysql8\n```\n\n### å¯åŠ¨å’Œåœæ­¢\n```js\nnet start mysql8 \nnet stop mysql8\n```\n\n## MySQLåˆå§‹åŒ–rootå¯†ç \n\n- mysqlé»˜è®¤rootç”¨æˆ·æ²¡æœ‰å¯†ç ï¼Œè¾“å…¥mysql â€“u root è¿›å…¥mysql\n\n1. è¿›å…¥mysqlæ•°æ®åº“\n```js\nuse mysql;\n```\n\n2. åˆå§‹åŒ–rootå¯†ç \n```js\nmysql>update user set password=PASSWORD('123456') where User='root';\n```\n\n`8.0+ç‰ˆæœ¬`\n```js\nALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456';\n```\n\n## rootå¯†ç å¿˜è®°è§£å†³æ–¹æ³•ï¼ˆWindowsç¯å¢ƒï¼‰\n\n1. ç¡®ä¿MySQLæœåŠ¡åœæ­¢\n\n2. æ‰“å¼€ç¬¬ä¸€ä¸ªcmdçª—å£ï¼Œè¿›å…¥MySQLå®‰è£…ç›®å½•ä¸‹çš„binç›®å½•\n\n3. è·³è¿‡æƒé™å®‰å…¨æ£€æŸ¥ï¼ŒMySQLæœåŠ¡è¿è¡Œèµ·æ¥åï¼Œä¸ç”¨è¾“å…¥å¯†ç å°±èƒ½è¿›å…¥æ•°æ®åº“\n\nä¾‹å¦‚ï¼ŒD:\\mysql-5.5.35-win32\\bin>mysqld â€“defaults-file=â€D:\\mysql-5.5.35-win32\\my.iniâ€ â€“console â€“skip-grant-tables\n\n4. æ‰“å¼€ç¬¬äºŒä¸ªcmdçª—å£ï¼Œè¿æ¥MySQL\n\n- è¾“å…¥å‘½ä»¤ï¼šmysql -uroot -p\n\n- å‡ºç° Enter password: ç›´æ¥å›è½¦\n\n5. ä½¿ç”¨å‘½ä»¤åˆ‡æ¢åˆ°mysqlæ•°æ®åº“ï¼š\n```js\nuse mysql;\n```\n\n6. ä½¿ç”¨å‘½ä»¤æ›´æ”¹rootå¯†ç ï¼š\n```js\nUPDATE user SET Password=PASSWORD('123456') where USER='root';\n```\n\n7. åˆ·æ–°æƒé™ï¼š\n```js\nFLUSH PRIVILEGES;\n```\n8. é€€å‡ºï¼š\n```js\nquit;\n```\n\n9. å…³é—­ä¸Šé¢æ‰“å¼€çš„ä¸¤ä¸ªcmdçª—å£ï¼Œé‡æ–°å¯åŠ¨MySQLæœåŠ¡ã€‚\n","tags":["mysql"],"categories":["å·¥å…·"]},{"title":"ã€Mac ç»ˆç«¯é…ç½®ã€‘iTerm2 + oh-my-zsh","url":"%2F2020%2FMac%20iTerm2%20%2B%20oh-my-zsh.html","content":"\n## å‰ç½®æ ¡éªŒ\n```bash\n# 1ã€é»˜è®¤å·²å®‰è£… Homebrewã€iTerm2\n# 2ã€æŸ¥çœ‹æ˜¯å¦å®‰è£…äº†zshï¼ŒæŸ¥çœ‹æ˜¯å¦è¿”å› /usr/bin/zsh\ncat /etc/shells\n# è‹¥æœªå®‰è£…\nbrew install zsh\n\n# iTerm2 å¯åŠ¨é¡¹é…ç½®\nchsh -s /bin/zsh      # è®¾ç½®ä¸ºzsh\nchsh -s /bin/bash     # è®¾ç½®ä¸ºbashï¼ˆMacè‡ªå¸¦é»˜è®¤ï¼‰\n```\n\n---\n<!--more-->\n\n## å®‰è£… ob-my-zsh\n```bash\n# æ–¹å¼ä¸€ï¼šwegtå®‰è£…\nwget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh\n\n# æ–¹å¼äºŒï¼šcurl å®‰è£…\nsh -c \"$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)\"\n\n# æ–¹å¼ä¸‰ï¼šæ‰‹åŠ¨å®‰è£…\ngit clone git://github.com/robbyrussell/oh-my-zsh.git ~/.oh-my-zsh\ncp ~/.oh-my-zsh/templates/zshrc.zsh-template ~/.zshrc\n\n# å¸è½½\nuninstall_oh_my_zsh zsh\n\n# zshé…ç½®ç¯å¢ƒå˜é‡\n~/.zshrc\n```\n\n## å®‰è£… Powerline\n```bash\n# 1ã€æ£€æµ‹æ˜¯å¦å·²ç»å®‰è£…ï¼Œè‹¥æœ‰ç‰ˆæœ¬ä¿¡æ¯åˆ™å·²å®‰è£…\npip show powerline-status\n\n# 2ã€å°† powerline-status å®‰è£…åœ¨/usr/æ ¹ç›®å½•ä¸­\npip install --user powerline-status\n\n# ä¸Šä¸€æ­¥è‹¥æ˜¾ç¤ºæ²¡æœ‰ pip,å…ˆå®‰è£…pip\nsudo easy_install pip\n```\n\n## è®¾ç½®å­—ä½“\n```bash\n# 1ã€æ–°å»ºæ–‡ä»¶å¤¹(å¦‚~/Desktop/OpenSource)ï¼Œæ–‡ä»¶å¤¹ä¸‹\ncd ~/Desktop/OpenSource\ngit clone https://github.com/powerline/fonts.git --depth=1\n# 2ã€è¿›å…¥è„šæœ¬ç›®å½•\ncd fonts\n# 3ã€æ‰§è¡Œè„šæœ¬\n./install.sh\n\n# è¿›å…¥ iTerm2 -> Preferences -> Profiles -> Text -> Font -> Change Font\n# é€‰æ‹©Meslo LG S for Powerfine, å¸¸è§„ï¼Œ 12\n```\n\n## è®¾ç½®é…è‰²æ–¹æ¡ˆ\n```bash\n# ç›´æ¥ä¸‹è½½tar.zipåŒ…(åŒ…å«å…¨éƒ¨é…è‰²)\n# è¿›å…¥ iTerm2 -> Preferences -> Profiles->Color \n# é€‰æ‹© Color Presets->import é€‰æ‹©è§£å‹å¥½çš„ç›®å½•ä¸‹schemesç›®å½•ä¸­ç›¸åº”é…è‰²æ–¹æ¡ˆå¯¼å…¥\n```\n\n## å®‰è£… oh-my-zsh ä¸»é¢˜\n```bash\n# ä¸‹è½½å®‰è£… agnoster ä¸»é¢˜ï¼Œå°†ä¸»é¢˜æ‹·è´åˆ°oh my zshçš„zshä¸­\ncd ~/Desktop/OpenSource\ngit clone https://github.com/fcamblor/oh-my-zsh-agnoster-fcamblor.git\ncd oh-my-zsh-agnoster-fcamblor/\n./install\n\n# å°† ZSH_THEME å€¼æ”¹ä¸º agnosterï¼Œecs é€€å‡ºï¼Œ:wq ä¿å­˜\nvi ~/.zshrc\n```\n\n## å®‰è£…æ’ä»¶\n```bash\n# ======================== é«˜äº®æ’ä»¶ ========================\n# åœ¨ ~ ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹ zsh-plugins(~/.zshrc é»˜è®¤ç›®å½•)\ncd zsh-plugins\ngit clone git://github.com/zsh-users/zsh-syntax-highlighting.git\nvim .zshrc\n# æ–‡æœ«æ·»åŠ ä»¥ä¸‹é…ç½®\nsource ~/zsh-pludins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh\ncd ~/.oh-my-zsh/custom/plugins\nvim .zshrc\n# æ–‡æœ«æ·»åŠ ä»¥ä¸‹é…ç½®\nplugins=(zsh-syntax-highlighting)\n\n# ======================== è‡ªåŠ¨è¡¥é½æ’ä»¶ ========================\ncd zsh-plugins\nhttp://mimosa-pudica.net/src/incr-0.2.zsh\n# å°†æ–‡ä»¶æ”¾åˆ° ~/zsh-pludins/inrcä¸‹\nvim .zshrc\nsource ~/.oh-my-zsh/plugins/incr/incr*.zsh\n```\n","tags":["å·¥å…·"],"categories":["å·¥å…·"]},{"title":"å…³äºnodeçš„é‚£äº›äº‹(åŸºç¡€ç¯‡)","url":"%2F2020%2F%E5%85%B3%E4%BA%8Enode%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B(%E5%9F%BA%E7%A1%80%E7%AF%87).html","content":"\n## ğŸ‘¨æé—®ï¼šæœ€è¿‘Denoå¾ˆç«ï¼Œä¼šä¸ä¼šæ›¿ä»£nodeçš„æ›¿ä»£å“ï¼Œå­¦nodeæ˜¯ä¸æ˜¯æ²¡æœ‰å‰é€”ï¼Ÿ\n> è«æ…Œï¼ŒNodeä¾æ—§æ˜¯ç¤¾åŒºçƒ­æ§çš„æœåŠ¡å™¨ç«¯ JavaScript è¿è¡Œç¯å¢ƒï¼ŒDenoçš„å‡ºç°å…¶å®æœ¬è´¨ä¸Šæ˜¯å®Œå–„ç°é˜¶æ®µçš„Nodeï¼ˆæ–°è½®å­ï¼‰ï¼ŒåŒ…æ‹¬åŸç”Ÿæ”¯æŒTSã€å®‰å…¨æ€§ã€æ”¯æŒES \nModuleæµè§ˆå™¨æ¨¡å—ã€ç­‰ç‰¹å¾ã€‚ä¸‡å˜ä¸ç¦»å…¶å®—ï¼Œè™½ç„¶æœ‰äº†Denoï¼Œå°†æ¥å¯èƒ½å°±ä¸éœ€è¦ Node.jsï¼Œä½†æ˜¯æ–°äº‹ç‰©æ€»æ˜¯éœ€è¦ä¸æ–­æ¨æ¼”å’Œè€ƒéªŒåï¼Œæ‰€ä»¥è¿™ä¸€ç‚¹è€Œè¨€ï¼ŒNodeçŸ­æ—¶é—´å†…å¾ˆ\néš¾è¢«æ›¿æ¢ï¼Œæ¯•ç«ŸèƒŒåä¾é™„ç€å¼ºå¤§ç¤¾åŒºçš„æ”¯æ’‘ã€‚\n\n## node å¦‚ä½•è·å–å‘½ä»¤è¡Œä¼ æ¥çš„å‚æ•°ï¼Ÿ\n> process.argvã€‚processæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå®ƒæä¾›å½“å‰ Node.js è¿›ç¨‹çš„æœ‰å…³ä¿¡æ¯ï¼Œè€Œprocess.argv å±æ€§åˆ™è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ä¿¡æ¯åŒ…æ‹¬å¯åŠ¨Node.jsè¿›ç¨‹æ—¶çš„å‘½ä»¤è¡Œå‚æ•°ã€‚\n\n- process.argv[0] : è¿”å›å¯åŠ¨Node.jsè¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨çš„ç»å¯¹è·¯å¾„\n- process.argv[1] : ä¸ºå½“å‰æ‰§è¡Œçš„JavaScriptæ–‡ä»¶è·¯å¾„\n- process.argv.splice(2) : ç§»é™¤å‰ä¸¤è€…åï¼Œå‰©ä½™çš„å…ƒç´ ä¸ºå…¶ä»–å‘½ä»¤è¡Œå‚æ•°(ä¹Ÿå°±æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰éƒ¨åˆ†)\n\n```js\n\"script\": {\n    \"serve\": \"node test.js arg1 arg2 arg3\"\n}\n\n// test.js\nconst arguments = process.argv.splice(2) // [arg1, arg2, arg3]\n\n// ç»“åˆcommander\ncommander.parse(process.argv)\n```\n\n---\n<!--more-->\n\n## ä¸ºä»€ä¹ˆè¦ç”¨nodeï¼ˆåŸºäºv8å¼•æ“è¿è¡Œåœ¨æœåŠ¡ç«¯çš„JSè¿è¡Œç¯å¢ƒï¼‰\n> æ€»ç»“èµ·æ¥nodeæœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹ç‚¹:ç®€å•å¼ºå¤§ï¼Œè½»é‡å¯æ‰©å±•ï¼ç®€å•ä½“ç°åœ¨nodeä½¿ç”¨çš„æ˜¯javascriptï¼Œjsonæ¥è¿›è¡Œç¼–ç ï¼Œäººäººéƒ½ä¼šï¼›å¼ºå¤§ä½“ç°åœ¨éé˜»å¡IO,å¯ä»¥é€‚åº”åˆ†å—ä¼ è¾“æ•°æ®ï¼Œè¾ƒæ…¢çš„ç½‘ç»œç¯å¢ƒï¼Œå°¤å…¶æ“…é•¿\né«˜å¹¶å‘è®¿é—®ï¼›è½»é‡ä½“ç°åœ¨nodeæœ¬èº«æ—¢æ˜¯ä»£ç ï¼Œåˆæ˜¯æœåŠ¡å™¨ï¼Œå‰åç«¯ä½¿ç”¨ç»Ÿä¸€è¯­è¨€;å¯æ‰©å±•ä½“ç°åœ¨å¯ä»¥è½»æ¾åº”å¯¹å¤šå®ä¾‹ï¼Œå¤šæœåŠ¡å™¨æ¶æ„ï¼ŒåŒæ—¶æœ‰æµ·é‡çš„ç¬¬ä¸‰æ–¹åº”ç”¨ç»„ä»¶ã€‚\n\n- å…¨å±€å¯¹è±¡\nprocessã€consoleã€Buffer\n\n**åŸºäºäº‹ä»¶é©±åŠ¨å’Œæ— é˜»å¡é€‚åˆé«˜å¹¶å‘çš„åœºæ™¯ï¼Œç»Ÿä¸€è¯­è¨€**\n\n## æ€ä¹ˆçœ‹ nodejs å¯æ”¯æŒé«˜å¹¶å‘\nnodejs å…¶å®å¹¶ä¸æ˜¯çœŸæ­£çš„å•çº¿ç¨‹æ¶æ„ï¼Œå› ä¸º nodejs è¿˜æœ‰I/Oçº¿ç¨‹å­˜åœ¨ï¼ˆç½‘ç»œI/Oã€ç£ç›˜I/Oï¼‰ï¼Œè¿™äº›I/Oçº¿ç¨‹æ˜¯ç”±æ›´åº•å±‚çš„ libuv å¤„ç†ï¼Œè¿™éƒ¨åˆ†çº¿ç¨‹å¯¹äºå¼€å‘è€…æ¥\nè¯´æ˜¯é€æ˜çš„ã€‚ JavaScript ä»£ç æ°¸è¿œè¿è¡Œåœ¨V8ä¸Šï¼Œæ˜¯å•çº¿ç¨‹çš„ã€‚å¼‚æ­¥é€šè¿‡ä¸€æ¬¡æ¬¡å¾ªç¯äº‹ä»¶é˜Ÿåˆ—æ¥å®ç°çš„ã€‚\n\n- å•çº¿ç¨‹æ¶æ„çš„ä¼˜åŠ¿å’ŒåŠ£åŠ¿ï¼š\n  - ä¼˜åŠ¿ï¼š\n1. å•çº¿ç¨‹å°±ä¸€ä¸ªçº¿ç¨‹åœ¨ç©ï¼Œçœå»äº†çº¿ç¨‹é—´åˆ‡æ¢çš„å¼€é”€\n2. è¿˜æœ‰çº¿ç¨‹åŒæ­¥çš„é—®é¢˜ï¼Œçº¿ç¨‹å†²çªçš„é—®é¢˜çš„ä¹Ÿä¸éœ€è¦æ‹…å¿ƒ\n\n  - åŠ£åŠ¿ï¼š\n\n1. åŠ£åŠ¿ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œç°åœ¨èµ·æ­¥éƒ½æ˜¯ 4 æ ¸ï¼Œå•çº¿ç¨‹æ²¡æ³•å……åˆ†åˆ©ç”¨ cpu çš„èµ„æº\n2. å•çº¿ç¨‹ï¼Œä¸€æ—¦å´©æºƒï¼Œåº”ç”¨å°±æŒ‚æ‰äº†ï¼Œå¤§å®¶è°ƒè¯•è„šæœ¬ä¹ŸçŸ¥é“ä¸€æ—¦æ‰§è¡Œè¿‡ç¨‹æŠ¥é”™äº†ï¼Œæœ¬æ¬¡è°ƒè¯•å°±ç›´æ¥ç»“æŸäº†\n3. å› ä¸ºåªèƒ½åˆ©ç”¨ä¸€ä¸ª cpu ï¼Œä¸€æ—¦ cpu è¢«æŸä¸ªè®¡ç®—ä¸€ç›´å ç”¨ï¼Œ cpu å¾—ä¸åˆ°é‡Šæ”¾ï¼Œåç»­çš„è¯·æ±‚å°±ä¼šä¸€ç›´è¢«æŒ‚èµ·ï¼Œç›´æ¥æ— å“åº”äº†\n\n## nodeæœ‰å“ªäº›ç›¸å…³çš„æ–‡ä»¶è·¯å¾„ï¼Ÿ\n> Node ä¸­çš„æ–‡ä»¶è·¯å¾„æœ‰ __dirname, __filename, process.cwd(), ./ æˆ–è€… ../\n\n- __dirname: æ€»æ˜¯è¿”å›è¢«æ‰§è¡Œçš„ js æ‰€åœ¨æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„\n- __filename: æ€»æ˜¯è¿”å›è¢«æ‰§è¡Œçš„ js çš„ç»å¯¹è·¯å¾„\n- process.cwd(): æ€»æ˜¯è¿”å›è¿è¡Œ node å‘½ä»¤æ—¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹çš„ç»å¯¹è·¯å¾„\n\n## nodeç›¸å…³path API æœ‰å“ªäº›ï¼Ÿ\n> path æ¨¡å—æä¾›äº†ä¸€äº›å®ç”¨å·¥å…·ï¼Œç”¨äºå¤„ç†æ–‡ä»¶å’Œç›®å½•çš„è·¯å¾„ï¼Œå¸¸ç”¨apiæœ‰ï¼špath.dirnameã€path.joinã€path.resolve å…¶ä»–çš„çœ‹æ–‡æ¡£ [Path API](http://nodejs.cn/api/path.html)\n\n- path.dirname()ï¼š è¿”å› path çš„ç›®å½•å\n- path.join()ï¼šæ‰€æœ‰ç»™å®šçš„ path ç‰‡æ®µè¿æ¥åˆ°ä¸€èµ·ï¼Œç„¶åè§„èŒƒåŒ–ç”Ÿæˆçš„è·¯å¾„\n- path.resolve()ï¼šæ–¹æ³•ä¼šå°†è·¯å¾„æˆ–è·¯å¾„ç‰‡æ®µçš„åºåˆ—è§£æä¸ºç»å¯¹è·¯å¾„ï¼Œè§£æä¸ºç›¸å¯¹äºå½“å‰ç›®å½•çš„ç»å¯¹è·¯å¾„ï¼Œç›¸å½“äºcdå‘½ä»¤\n\npath.join(__dirname, '../lib/common.js')å’Œ path.resolve(__dirname, '../lib/common.js')è¿”å›çš„ç»“æœç›¸åŒï¼Œéš¾é“å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Ÿ\n\n1. joinæ˜¯æŠŠå„ä¸ªpathç‰‡æ®µè¿æ¥åœ¨ä¸€èµ·ï¼Œ resolveæŠŠ/å½“æˆæ ¹ç›®å½•\n```js\npath.join('/a', '/b') // '/a/b'\npath.resolve('/a', '/b') //'/b'\n```\n\n2. joinæ˜¯ç›´æ¥æ‹¼æ¥å­—æ®µï¼Œresolveæ˜¯è§£æè·¯å¾„å¹¶è¿”å›\n```js\npath.join(\"a\",\"b\")  // \"a/b\"\npath.resolve(\"a\", \"b\") // \"/Users/tree/Documents/infrastructure/KSDK/src/a/b\"\n```\n\n## nodeçš„æ–‡ä»¶è¯»å–æ€ä¹ˆåšçš„ï¼Ÿ\n> é€šè¿‡fsæ–‡ä»¶ç³»ç»Ÿæ¨¡å—æä¾›çš„APIï¼Œä¹Ÿæ˜¯nodeä¸­é‡è¦çš„æ¨¡å—ä¹‹ä¸€ï¼Œfsæ¨¡å—ä¸»è¦ç”¨äºæ–‡ä»¶çš„è¯»å†™ã€ç§»åŠ¨ã€å¤åˆ¶ã€åˆ é™¤ã€é‡å‘½åç­‰æ“ä½œã€‚\n\n```js\nfs.rename('a', 'b', (err)=>{\n    if (err) {\n        exec('rm -rf a', function(err, out) {\n\n        })\n    } else {}\n})\n```\n\n> â°éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨require('fs')è½½å…¥fsæ¨¡å—ï¼Œfsæ¨¡å—ä¸­æ‰€æœ‰æ–¹æ³•éƒ½æœ‰åŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§å½¢å¼,åˆšåˆšæˆ‘ä»¬å±•ç¤ºçš„renameæ˜¯å¼‚æ­¥æ–¹æ³•çš„è°ƒç”¨ï¼Œå› ä¸ºåœ¨ç¹å¿™çš„è¿›ç¨‹ä¸­ï¼Œåº”ä½¿ç”¨å¼‚æ­¥æ–¹æ³•ï¼Œ åŒæ­¥çš„ç‰ˆæœ¬ä¼šé˜»å¡æ•´ä¸ªè¿›ç¨‹ï¼ˆåœæ­¢æ‰€æœ‰çš„è¿æ¥ï¼‰ï¼Œå½“ç„¶fs.renameå¯¹åº”çš„åŒæ­¥æ–¹æ³•å°±æ˜¯fs.renameSync\n\n```js\n// åŒæ­¥çš„ä¾‹å­\nlet isExists = fs.existsSync('dirname')\nif (isExists) {\n    process.exit(1);\n}\n// æ— è®ºåŒæ­¥å¼‚æ­¥å°½é‡å¯¹æŠ›å‡ºçš„å¼‚å¸¸åšç›¸åº”çš„å¤„ç†\n```\n\n## nodeçš„urlæ¨¡å—æ˜¯ç”¨æ¥å¹²å˜›çš„ï¼Ÿ\n> ç”¨æ¥å¯¹urlçš„å­—ç¬¦ä¸²è§£æã€urlç»„æˆç­‰åŠŸèƒ½ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªAPIã€‚url.parse()ã€url.format()\n\n- url.parseï¼šå¯ä»¥å°†ä¸€ä¸ªurlçš„å­—ç¬¦ä¸²è§£æå¹¶è¿”å›ä¸€ä¸ªurlçš„å¯¹è±¡\n- url.format:å°†ä¼ å…¥çš„urlå¯¹è±¡è§£ææˆä¸€ä¸ªurlå­—ç¬¦ä¸²å¹¶è¿”å›\n\n```js\nurl.parse(\"https://baidu.com:8080/test/h?query=js#node\")\n\nUrl {\n  protocol: 'http:',\n  slashes: true,\n  auth: null,\n  host: 'baidu.com:8080',\n  port: '8080',\n  hostname: 'baidu.com',\n  hash: '#node',\n  search: '?query=js',\n  query: 'query=js',\n  pathname: '/test/h',\n  path: '/test/h?query=js',\n  href: 'http://baidu.com:8080/test/h?query=js#node'\n}\n```\n\n## nodeçš„httpæ¨¡å—åˆ›å»ºæœåŠ¡ä¸Expressæˆ–Koaæ¡†æ¶æœ‰ä½•ä¸åŒ?\n> expressæ˜¯ä¸€ä¸ªæœåŠ¡ç«¯æ¡†æ¶ï¼Œæ¡†æ¶ç®€å•å°è£…äº†nodeçš„httpæ¨¡å—ï¼Œexpressæ”¯æŒnodeåŸç”Ÿçš„å†™æ³•ï¼Œexpressä¸ä»…å°è£…å¥½æœåŠ¡å™¨ï¼Œè¿˜å°è£…äº†ä¸­é—´ä»¶ã€è·¯ç”±ç­‰ç‰¹å¾ï¼Œæ–¹ä¾¿å¼€å‘webæœåŠ¡å™¨ï¼Œæ¢å¥è¯è¯´express = httpæ¨¡å— + ä¸­é—´ä»¶ + è·¯ç”±\n\n### http\n```js\nconst http = require('http')\nconst server = http.createServer(function (req, res) {\n    res.writeHead(200, {\n       'content-type': 'text/plain'\n    })\n    res.write('hello world')\n    res.end()\n})\nserver.listen(3000)\n```\n\n### express\n```js\nconst express = require('express')\nconst app = express()\napp.user(middleware)\n\napp.get('/', function(req, res){\n    res.send('hello world')\n})\n\napp.listen(3000, function() {\n\n})\n\nfunction middleware(req, res, next) {\n    next()\n}\n```\n\n### koa\n```js\nconst Koa = require('koa')\nconst app = new Koa()\napp.user(middleware)\n\napp.listen(3000)\n\nasync function middleware(ctx, next) {\n    await next()\n}\n```\n\n##  Expresså’ŒKoaæ¡†æ¶ä¸­é—´ä»¶æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ\n> ä¸­é—´ä»¶ï¼š app.useæ–¹æ³•å°±æ˜¯å¾€ä¸­é—´ä»¶é˜Ÿåˆ—ä¸­å¡å…¥æ–°çš„ä¸­é—´ä»¶ï¼Œexpressä¸­é—´ä»¶å¤„ç†æ–¹å¼æ˜¯çº¿æ€§çš„ï¼Œnextè¿‡åç»§ç»­å¯»æ‰¾ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ï¼Œå½“ç„¶å¦‚æœæ²¡æœ‰è°ƒç”¨next()çš„è¯ï¼Œå°±ä¸ä¼šè°ƒç”¨ä¸‹ä¸€ä¸ªå‡½æ•°äº†ï¼Œè°ƒç”¨å°±ä¼šè¢«ç»ˆæ­¢ã€‚\n\n- express ä¸­é—´ä»¶ï¼šæ˜¯é€šè¿‡ next çš„æœºåˆ¶ï¼Œå³ä¸Šä¸€ä¸ªä¸­é—´ä»¶ä¼šé€šè¿‡ next è§¦å‘ä¸‹ä¸€ä¸ªä¸­é—´ä»¶\n- koa2 ä¸­é—´ä»¶ï¼šæ˜¯é€šè¿‡ async await å®ç°çš„ï¼Œä¸­é—´ä»¶æ‰§è¡Œé¡ºåºæ˜¯â€œæ´‹è‘±åœˆâ€æ¨¡å‹ï¼ˆæ¨èï¼‰\n\n1. è¯­æ³•åŒºåˆ«\nexperss å¼‚æ­¥ä½¿ç”¨ å›è°ƒ\nkoa1 å¼‚æ­¥ä½¿ç”¨ generator + yield\nkoa2 å¼‚æ­¥ä½¿ç”¨ await/async\n\n2. ä¸­é—´ä»¶åŒºåˆ«\nkoaé‡‡ç”¨æ´‹è‘±æ¨¡å‹ï¼Œè¿›è¡Œé¡ºåºæ‰§è¡Œï¼Œå‡ºå»åå‘æ‰§è¡Œï¼Œæ”¯æŒcontextä¼ é€’æ•°æ®\nexpressæœ¬èº«æ— æ´‹è‘±æ¨¡å‹ï¼Œéœ€è¦å¼•å…¥æ’ä»¶ï¼Œä¸æ”¯æŒcontext\nexpressçš„ä¸­é—´ä»¶ä¸­æ‰§è¡Œå¼‚æ­¥å‡½æ•°ï¼Œæ‰§è¡Œé¡ºåºä¸ä¼šæŒ‰ç…§æ´‹è‘±æ¨¡å‹ï¼Œå¼‚æ­¥çš„æ‰§è¡Œç»“æœæœ‰å¯èƒ½è¢«æ”¾åˆ°æœ€åï¼Œresponseä¹‹å‰ã€‚\n\n3. é›†æˆåº¦åŒºåˆ«\nexpress å†…ç½®äº†å¾ˆå¤šä¸­é—´ä»¶ï¼Œé›†æˆåº¦é«˜ï¼Œä½¿ç”¨çœå¿ƒï¼Œ\nkoa è½»é‡ç®€æ´ï¼Œå®¹æ˜“å®šåˆ¶\n\n## koa2å’Œeggçš„åŒºåˆ«\n- eggæ˜¯åœ¨koa2ä¸Šçš„å°è£…\n- eggæœ‰controllerã€serviceã€router\n- eggçº¦å®šäº†æ–‡ä»¶ç›®å½•ç»“æ„\n\n## ä»€ä¹ˆæ˜¯æ¨¡ç‰ˆå¼•æ“ï¼Ÿ\n> æ¨¡æ¿å¼•æ“æ˜¯ä¸€ä¸ªé€šè¿‡ç»“åˆé¡µé¢æ¨¡æ¿ã€è¦å±•ç¤ºçš„æ•°æ®ç”ŸæˆHTMLé¡µé¢çš„å·¥å…·ï¼Œæœ¬è´¨ä¸Šæ˜¯åç«¯æ¸²æŸ“ï¼ˆSSRï¼‰çš„éœ€æ±‚ï¼ŒåŠ ä¸ŠNodeæ¸²æŸ“é¡µé¢æœ¬èº«æ˜¯çº¯é™æ€çš„ï¼Œå½“æˆ‘ä»¬éœ€è¦é¡µé¢å¤šæ ·åŒ–ã€æ›´çµæ´»ï¼Œæˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨æ¨¡æ¿å¼•æ“æ¥å¼ºåŒ–é¡µé¢ï¼Œæ›´å¥½çš„å‡¸æ˜¾æœåŠ¡ç«¯æ¸²æŸ“çš„ä¼˜åŠ¿ã€‚\n\nå¸¸è§ä¸»æµæ¨¡ç‰ˆå¼•æ“æœ‰ï¼š\n\n- art-template [å®˜æ–¹æ–‡æ¡£](http://aui.github.io/art-template/) ï¼šå·ç§°æ•ˆç‡æœ€é«˜çš„ï¼Œæ¨¡ç‰ˆå¼•æ“\n- ejs  [å®˜æ–¹æ–‡æ¡£](https://ejs.co/)ï¼šæ˜¯ä¸€ä¸ªJavaScriptæ¨¡æ¿åº“ï¼Œç”¨æ¥ä»JSONæ•°æ®ä¸­ç”ŸæˆHTMLå­—ç¬¦ä¸²ã€‚\n- pug [å®˜æ–¹æ–‡æ¡£](https://pugjs.org/api/getting-started.html)ï¼šæ˜¯ä¸€æ¬¾å¥å£®ã€çµæ´»ã€åŠŸèƒ½ä¸°å¯Œçš„æ¨¡æ¿å¼•æ“ï¼Œä¸“é—¨ä¸º Node.js å¹³å°å¼€å‘\n\n[Node.jså…¥é—¨æ•™ç¨‹](https://github.com/cosyer/node-learn)\n","tags":["NodeJS"],"categories":["Node"]},{"title":"react SSRæ•™ç¨‹","url":"%2F2020%2Freact%20SSR%E6%95%99%E7%A8%8B.html","content":"\n# å‰è¨€\n\næœ¬æ–‡æ˜¯åŸºäºreact ssrçš„å…¥é—¨æ•™ç¨‹ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨è¿˜éœ€è¦åšæ›´å¤šçš„é…ç½®å’Œä¼˜åŒ–ï¼Œæ¯”è¾ƒé€‚åˆç¬¬ä¸€æ¬¡å°è¯•react ssrçš„å°ä¼™ä¼´ä»¬ã€‚æŠ€æœ¯æ¶‰åŠåˆ° koa2 + reactï¼Œæ¡ˆä¾‹ä½¿ç”¨create-react-appåˆ›å»ºã€‚\n\n## å®¢æˆ·ç«¯æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“\n\n### å®¢æˆ·ç«¯æ¸²æŸ“\n+ å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œå®é™…ä¸Šå°±æ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯è¯·æ±‚é¡µé¢ï¼ŒæœåŠ¡ç«¯è¿”å›çš„æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ HTML é¡µé¢ï¼Œåœ¨è¿™ä¸ªé¡µé¢é‡Œï¼Œåªæœ‰å¾ˆå°‘çš„ä¸€äº› HTML æ ‡ç­¾\n+ å®¢æˆ·ç«¯æ¸²æŸ“æ—¶ï¼Œé¡µé¢ä¸­æœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„ç‚¹ï¼Œç¬¬ä¸€ä¸ªæ˜¯ script æ ‡ç­¾ï¼Œå¯èƒ½ä¼šæœ‰å¥½å‡ ä¸ª script æ ‡ç­¾ï¼Œè¿™ä¸ªæ ‡ç­¾æ˜¯æ‰“åŒ…åçš„ js ä»£ç ï¼Œç”¨æ¥ç”Ÿæˆ DOM å…ƒç´ ï¼Œå‘é€è¯·æ±‚ï¼Œäº‹ä»¶ç»‘å®šç­‰ã€‚ä½†æ˜¯ï¼Œç”Ÿæˆçš„ DOM å…ƒç´ éœ€è¦æœ‰ä¸€ä¸ªåœ¨é¡µé¢ä¸Šå±•ç¤ºçš„å®¹å™¨ï¼Œæ‰€ä»¥å¦å¤–ä¸€ä¸ªç‚¹å°±æ˜¯å®¹å™¨ï¼Œä¸€èˆ¬æ˜¯ä¸€ä¸ª id åä¸º root æˆ– app çš„ div æ ‡ç­¾ï¼Œç±»ä¼¼äºè¿™æ · `<div id=\"root\"></div>` æˆ–`<div id=\"app\"></div>`\n+ å®¢æˆ·ç«¯æ¸²æŸ“çš„ç‰¹ç‚¹\n  + å®¢æˆ·ç«¯åŠ è½½æ‰€æœ‰çš„ js èµ„æºï¼Œæ¸²æŸ“ DOM å…ƒç´ \n  + åœ¨æµè§ˆå™¨é¡µé¢ä¸Šçš„æ‰€æœ‰èµ„æºï¼Œéƒ½ç”±å®¢æˆ·ç«¯ä¸»åŠ¨å»è·å–ï¼ŒæœåŠ¡ç«¯åªè´Ÿè´£é™æ€èµ„æºçš„æä¾›å’Œ API æ¥å£ï¼Œä¸å†è´Ÿè´£é¡µé¢çš„æ¸²æŸ“ï¼Œå¦‚æœé‡‡ç”¨ CDN çš„è¯ï¼ŒæœåŠ¡ç«¯ä»…ä»…éœ€è¦æä¾› API æ¥å£\n  + ä¼˜ç‚¹: å‰åç«¯åˆ†ç¦»ï¼Œè´£ä»»åŒºåˆ†ï¼Œå‰ç«¯ä¸“æ³¨é¡µé¢çš„å¼€å‘ï¼Œåç«¯ä¸“æ³¨æ¥å£çš„å¼€å‘\n  + ç¼ºç‚¹: é¦–å±åŠ è½½èµ„æºå¤šï¼Œé¦–å±åŠ è½½æ—¶å“åº”æ…¢ã€‚é¡µé¢ä¸Šæ²¡æœ‰ DOM å…ƒç´ ï¼Œä¸åˆ©äº SEO ä¼˜åŒ–\n\n### æœåŠ¡ç«¯æ¸²æŸ“\n+ æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå°±æ˜¯å®¢æˆ·ç«¯é¡µé¢ä¸Šçš„ HTML å…ƒç´ ï¼Œéƒ½è¦ç”±æœåŠ¡ç«¯è´Ÿè´£æ¸²æŸ“ã€‚æœåŠ¡ç«¯åˆ©ç”¨æ¨¡æ¿å¼•æ“ï¼ŒæŠŠæ•°æ®å¡«å……åˆ°æ¨¡æ¿ä¸­ï¼Œç”Ÿæˆ HTML å­—ç¬¦ä¸²ï¼Œæœ€ç»ˆæŠŠ HTML å­—ç¬¦ä¸²è¿”å›åˆ°æµè§ˆå™¨ï¼Œæµè§ˆå™¨æ¥æ”¶åˆ° HTML å­—ç¬¦ä¸²ï¼Œé€šè¿‡ HTML å¼•æ“è§£æï¼Œæœ€ç»ˆç”Ÿæˆ DOM å…ƒç´ ï¼Œæ˜¾ç¤ºåœ¨é¡µé¢ä¸Š\n+ æ¯”å¦‚ Node.js å¯ä»¥æ¸²æŸ“çš„æ¨¡æ¿å¼•æ“æœ‰ ejsï¼Œnunjucksï¼Œpug ç­‰ã€‚Java æœ€å¸¸è§çš„æ˜¯ JSP æ¨¡æ¿å¼•æ“ã€‚Python æœ€å¸¸è§çš„æ˜¯ Jinja2 æ¨¡æ¿å¼•æ“ã€‚\n+ æœåŠ¡ç«¯æ¸²æŸ“çš„ç‰¹ç‚¹\n  + ä¼˜ç‚¹: é¡µé¢èµ„æºå¤§å¤šç”±æœåŠ¡ç«¯è´Ÿè´£å¤„ç†ï¼Œæ‰€ä»¥é¡µé¢åŠ è½½é€Ÿåº¦å¿«ï¼Œç¼©çŸ­é¦–å±åŠ è½½æ—¶é—´ã€‚æœ‰åˆ©äº SEO ä¼˜åŒ–ã€‚æ— éœ€å ç”¨å®¢æˆ·ç«¯èµ„æº\n  + ç¼ºç‚¹: ä¸åˆ©äºå‰åç«¯åˆ†ç¦»ï¼Œå¼€å‘æ•ˆç‡ä½ã€‚å ç”¨æœåŠ¡å™¨èµ„æº\n\n### åŒºåˆ†ä¸é€‰æ‹©\n+ å®¢æˆ·ç«¯æ¸²æŸ“å’ŒæœåŠ¡ç«¯æ¸²æŸ“æœ¬è´¨çš„åŒºåˆ«å°±æ˜¯ï¼Œæ˜¯è°è´Ÿè´£ HTML é¡µé¢çš„æ‹¼æ¥ï¼Œé‚£ä¹ˆå°±æ˜¯è°æ¸²æŸ“çš„é¡µé¢\n+ å¦‚æœå¯¹é¦–å±åŠ è½½æ—¶é—´æœ‰éå¸¸é«˜çš„éœ€æ±‚ï¼Œæˆ–è€…æ˜¯éœ€è¦ SEO ä¼˜åŒ–ï¼Œé‚£ä¹ˆå°±é€‰æ‹©æœåŠ¡ç«¯æ¸²æŸ“\n+ å¦‚æœå¯¹é¦–å±åŠ è½½æ—¶é—´æ²¡æœ‰è¦æ±‚ï¼Œä¹Ÿä¸éœ€è¦åš SEO ä¼˜åŒ–ï¼Œç±»ä¼¼äºåšåå°ç®¡ç†ç³»åˆ—çš„ä¸šåŠ¡ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€‰æ‹©å®¢æˆ·ç«¯æ¸²æŸ“\n+ å…·ä½“é€‰æ‹©å®¢æˆ·ç«¯æ¸²æŸ“è¿˜æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼Œæ²¡æœ‰å¼ºåˆ¶çš„è¦æ±‚ï¼Œå…·ä½“è¦æ ¹æ®é¡¹ç›®çš„éœ€æ±‚æ¥åŒºåˆ†é€‰æ‹©\n\n---\n<!--more-->\n\n## SSR ä»‹ç»\nServer Slide Renderingï¼Œç¼©å†™ä¸º **ssr** å³æœåŠ¡å™¨ç«¯æ¸²æŸ“ï¼Œè¿™ä¸ªè¦ä»SEOè¯´èµ·ï¼Œç›®å‰reactå•é¡µåº”ç”¨HTMLä»£ç æ˜¯ä¸‹é¢è¿™æ ·çš„\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <link rel=\"shortcut icon\" href=\"favicon.ico\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"/>\n    <meta name=\"theme-color\" content=\"#000000\" />\n    <title>React App</title>\n  </head>\n  <body>\n    <noscript>You need to enable JavaScript to run this app.</noscript>\n    <div id=\"root\"></div>\n    <script src=\"/js/main.js\"></script>\n  </body>\n</html>\n```\n1. å¦‚æœmain.js åŠ è½½æ¯”è¾ƒæ…¢ï¼Œä¼šå‡ºç°ç™½å±ä¸€é—ªçš„ç°è±¡ã€‚\n2. ä¼ ç»Ÿçš„æœç´¢å¼•æ“çˆ¬è™«å› ä¸ºä¸èƒ½æŠ“å–JSç”Ÿæˆåçš„å†…å®¹ï¼Œé‡åˆ°å•é¡µwebé¡¹ç›®ï¼ŒæŠ“å–åˆ°çš„å†…å®¹å•¥ä¹Ÿæ²¡æœ‰ã€‚åœ¨SEOä¸Šä¼šåƒå¾ˆå¤šäºï¼Œå¾ˆéš¾æ’æœç´¢å¼•æ“åˆ°å‰é¢å»ã€‚\nReact SSRï¼ˆreactæœåŠ¡å™¨æ¸²æŸ“ï¼‰æ­£å¥½è§£å†³äº†è¿™2ä¸ªé—®é¢˜ã€‚\n\n## React SSRä»‹ç»\n\nè¿™é‡Œé€šè¿‡ä¸€ä¸ªä¾‹å­æ¥å¸¦å¤§å®¶å…¥å‘ï¼å…ˆä½¿ç”¨create-react-appåˆ›å»ºä¸€ä¸ªreacté¡¹ç›®ã€‚å› ä¸ºè¦ä¿®æ”¹webpackï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨react-app-rewiredå¯åŠ¨é¡¹ç›®ã€‚æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªserverç›®å½•å­˜æ”¾æœåŠ¡ç«¯ä»£ç ï¼ŒæœåŠ¡ç«¯ä»£ç æˆ‘ä»¬è¿™é‡Œä½¿ç”¨koa2ã€‚\n\nè¿™é‡Œå…ˆæ¥çœ‹çœ‹react ssræ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚\n\n![å›¾ç‰‡æè¿°][1]\n\nè¿™ä¸ªä¸šåŠ¡æµç¨‹å›¾æ¯”è¾ƒæ¸…æ™°äº†ï¼ŒæœåŠ¡ç«¯åªç”ŸæˆHTMLä»£ç ï¼Œå®é™…ä¸Šå‰ç«¯ä¼šç”Ÿæˆä¸€ä»½main.jsæä¾›ç»™æœåŠ¡ç«¯çš„HTMLä½¿ç”¨ã€‚è¿™å°±æ˜¯react ssrçš„å·¥ä½œæµç¨‹ã€‚æœ‰äº†è¿™ä¸ªå›¾ä¼šæ›´å¥½çš„ç†è§£ï¼Œå¦‚æœè¿™ä¸ªä¸šåŠ¡æ²¡ç†è§£æ¸…æ¥šï¼Œåé¢çš„ä¼°è®¡å¾ˆéš¾ç†è§£ã€‚\n\n> reactæä¾›çš„SSRæ–¹æ³•æœ‰ä¸¤ä¸ªrenderToString å’Œ renderToStaticMarkupï¼ŒåŒºåˆ«å¦‚ä¸‹ï¼š\n\n- renderToString æ–¹æ³•æ¸²æŸ“çš„æ—¶å€™å¸¦æœ‰ data-reactid å±æ€§. åœ¨æµè§ˆå™¨è®¿é—®é¡µé¢çš„æ—¶å€™ï¼Œmain.jsèƒ½è¯†åˆ«åˆ°HTMLçš„å†…å®¹ï¼Œä¸ä¼šæ‰§è¡ŒReact.createElementäºŒæ¬¡åˆ›å»ºDOMã€‚\n- renderToStaticMarkup åˆ™æ²¡æœ‰ data-reactid å±æ€§ï¼Œé¡µé¢çœ‹ä¸Šå»å¹²å‡€ç‚¹ã€‚åœ¨æµè§ˆå™¨è®¿é—®é¡µé¢çš„æ—¶å€™ï¼Œmain.jsä¸èƒ½è¯†åˆ«åˆ°HTMLå†…å®¹ï¼Œä¼šæ‰§è¡Œmain.jsé‡Œé¢çš„React.createElementæ–¹æ³•é‡æ–°åˆ›å»ºDOMã€‚é€‚ç”¨äºçº¯é™æ€é¡µé¢ã€‚\n\n## å®ç°æµç¨‹\n\n```javascript\nimport \"./App.css\";\n\nimport React, { Component } from \"react\";\n\nimport logo from \"./logo.svg\";\n\nclass App extends Component {\n  componentDidMount() {\n    console.log('å“ˆå“ˆå“ˆ~ æœåŠ¡å™¨æ¸²æŸ“æˆåŠŸäº†ï¼');\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <header className=\"App-header\">\n          <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <p>\n            Edit <code>src/App.js</code> and save to reload.\n          </p>\n          <a\n            className=\"App-link\"\n            href=\"https://reactjs.org\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            Learn React\n          </a>\n        </header>\n      </div>\n    );\n  }\n}\n\nexport default App;\n```\n\nåœ¨é¡¹ç›®ä¸­æ–°å»ºserverç›®å½•ï¼Œç”¨äºå­˜æ”¾æœåŠ¡ç«¯ä»£ç ã€‚é¡¹ç›®ä¸­æˆ‘ä»¬ç”¨çš„ES6ï¼Œæ‰€ä»¥è¿˜è¦é…ç½®ä¸‹.babelrc\n\n> .babelrc é…ç½®ï¼Œå› ä¸ºè¦ä½¿ç”¨åˆ°ES6\n```json\n{\n    \"presets\": [\n        \"env\",\n        \"react\"\n    ],\n    \"plugins\": [\n        \"transform-decorators-legacy\",\n        \"transform-runtime\",\n        \"react-hot-loader/babel\",\n        \"add-module-exports\",\n        \"transform-object-rest-spread\",\n        \"transform-class-properties\",\n        [\n            \"import\",\n            {\n                \"libraryName\": \"antd\",\n                \"style\": true\n            }\n        ]\n    ]\n}\n```\n\n> index.js é¡¹ç›®å…¥å£åšä¸€äº›é¢„å¤„ç†ï¼Œä½¿ç”¨asset-require-hookè¿‡æ»¤æ‰ä¸€äº›ç±»ä¼¼ ```import logo from \"./logo.svg\";``` è¿™æ ·çš„èµ„æºä»£ç ã€‚å› ä¸ºæˆ‘ä»¬æœåŠ¡ç«¯åªéœ€è¦çº¯çš„HTMLä»£ç ï¼Œä¸è¿‡æ»¤æ‰ä¼šæŠ¥é”™ã€‚è¿™é‡Œçš„nameï¼Œæˆ‘ä»¬æ˜¯å»æ‰äº†hashå€¼çš„ã€‚\n\n```javascript\nrequire(\"asset-require-hook\")({\n  extensions: [\"svg\", \"css\", \"less\", \"jpg\", \"png\", \"gif\"],\n  name: '/static/media/[name].[ext]'\n});\nrequire(\"babel-core/register\")();\nrequire(\"babel-polyfill\");\nrequire(\"./app\");\n```\n\n> public/index.html htmlæ¨¡ç‰ˆä»£ç è¦åšä¸ªè°ƒæ•´ï¼Œ```{{root}}``` è¿™ä¸ªå¯ä»¥æ˜¯ä»»ä½•å¯ä»¥æ›¿æ¢çš„å­—ç¬¦ä¸²ï¼Œç­‰ä¸‹æœåŠ¡ç«¯ä¼šæ›¿æ¢è¿™æ®µå­—ç¬¦ä¸²ã€‚\n\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"utf-8\" />\n    <link rel=\"shortcut icon\" href=\"%PUBLIC_URL%/favicon.ico\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\"/>\n    <meta name=\"theme-color\" content=\"#000000\" />\n    <link rel=\"manifest\" href=\"%PUBLIC_URL%/manifest.json\" />\n    <title>React App</title>\n  </head>\n  <body>\n    <noscript>You need to enable JavaScript to run this app.</noscript>\n    <div id=\"root\">{{root}}</div>\n  </body>\n</html>\n\n```\n\n> app.js æœåŠ¡ç«¯æ¸²æŸ“çš„ä¸»è¦ä»£ç ï¼ŒåŠ è½½App.jsï¼Œä½¿ç”¨renderToString ç”Ÿæˆhtmlä»£ç ï¼Œå»æ›¿æ¢æ‰ index.html ä¸­çš„ ```{{root}}``` éƒ¨åˆ†\n\n```javascript\nimport App from '../src/App';\nimport Koa from 'koa';\nimport React from 'react';\nimport Router from 'koa-router';\nimport fs from 'fs';\nimport koaStatic from 'koa-static';\nimport path from 'path';\nimport { renderToString } from 'react-dom/server';\n\n// é…ç½®æ–‡ä»¶\nconst config = {\n  port: 3030\n};\n\n// å®ä¾‹åŒ– koa\nconst app = new Koa();\n\n// é™æ€èµ„æº\napp.use(\n  koaStatic(path.join(__dirname, '../build'), {\n    maxage: 365 * 24 * 60 * 1000,\n    index: 'root' \n    // è¿™é‡Œé…ç½®ä¸è¦å†™æˆ'index'å°±å¯ä»¥äº†ï¼Œå› ä¸ºåœ¨è®¿é—®localhost:3030æ—¶ï¼Œä¸èƒ½è®©æœåŠ¡é»˜è®¤å»åŠ è½½index.htmlæ–‡ä»¶ï¼Œè¿™é‡Œå¾ˆå®¹æ˜“æ‰è¿›å‘ã€‚\n  })\n);\n\n// è®¾ç½®è·¯ç”±\napp.use(\n  new Router()\n    .get('*', async (ctx, next) => {\n      ctx.response.type = 'html'; //æŒ‡å®šcontent type\n      let shtml = '';\n      await new Promise((resolve, reject) => {\n        fs.readFile(path.join(__dirname, '../build/index.html'), 'utfa8', function(err, data) {\n          if (err) {\n            reject();\n            return console.log(err);\n          }\n          shtml = data;\n          resolve();\n        });\n      });\n      // æ›¿æ¢æ‰ {{root}} ä¸ºæˆ‘ä»¬ç”Ÿæˆåçš„HTML\n      ctx.response.body = shtml.replace('{{root}}', renderToString(<App />));\n    })\n    .routes()\n);\n\napp.listen(config.port, function() {\n  console.log('æœåŠ¡å™¨å¯åŠ¨ï¼Œç›‘å¬ portï¼š ' + config.port + '  running~');\n});\n\n```\n\n> config-overrides.js å› ä¸ºæˆ‘ä»¬ç”¨çš„æ˜¯create-react-appï¼Œè¿™é‡Œä½¿ç”¨react-app-rewiredå»æ”¹ä¸‹webpackçš„é…ç½®ã€‚å› ä¸ºæ‰§è¡Œ**npm run build**çš„æ—¶å€™ä¼šè‡ªåŠ¨ç»™èµ„æºåŠ äº†hashå€¼ï¼Œè€Œè¿™ä¸ªhashå€¼ï¼Œæˆ‘ä»¬åœ¨asset-require-hookçš„æ—¶å€™å»æ‰äº†hashå€¼ï¼Œé…ç½®é‡Œé¢éœ€è¦æ”¹ä¸‹ï¼Œä¸ç„¶ä¼šå‡ºç°å›¾ç‰‡ä¸æ˜¾ç¤ºçš„é—®é¢˜ï¼Œè¿™é‡Œä¹Ÿæ˜¯ä¸€ä¸ªå‘ï¼Œè¦æ³¨æ„ä¸‹ã€‚\n\n```javascript\nmodule.exports = {\n  webpack: function(config, env) {\n    // ...add your webpack config\n    // console.log(JSON.stringify(config));\n    // å»æ‰hashå€¼ï¼Œè§£å†³asset-require-hookèµ„æºé—®é¢˜\n    config.module.rules.forEach(d => {\n      d.oneOf &&\n        d.oneOf.forEach(e => {\n          if (e && e.options && e.options.name) {\n            e.options.name = e.options.name.replace('[hash:8].', '');\n          }\n        });\n    });\n    return config;\n  }\n};\n\n```\n\nå¥½äº†ï¼Œæ‰€æœ‰çš„ä»£ç å°±è¿™äº›äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç®€å•äº†ï¼Ÿæˆ‘ä»¬koa2è¯»å–çš„é™æ€èµ„æºæ˜¯ buildç›®å½•ä¸‹é¢çš„ã€‚å…ˆæ‰§è¡Œ**npm run build**æ‰“åŒ…é¡¹ç›®ï¼Œå†æ‰§è¡Œ**node ./server** å¯åŠ¨æœåŠ¡ç«¯é¡¹ç›®ã€‚çœ‹ä¸‹\nhttp://localhost:3030 é¡µé¢çš„HTMLä»£ç æ£€æŸ¥ä¸‹ï¼š\n\n![å›¾ç‰‡æè¿°][2]\n\næ²¡æœ‰```{{root}}```äº†ï¼ŒæœåŠ¡å™¨æ¸²æŸ“æˆåŠŸï¼\n\n> æ³¨: è¿™ä¸ªé¡¹ç›®åªæ˜¯ç”¨æ¥å­¦ä¹  react çš„æœåŠ¡ç«¯æ¸²æŸ“ï¼Œè€Œéå®‰åˆ©å¤§å®¶ä¸€å®šè¦ä½¿ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå› ä¸º react å’Œ vue çš„æœåŠ¡ç«¯æ¸²æŸ“å’Œæ™®é€šçš„æœåŠ¡ç«¯æ¸²æŸ“æœ‰å¾ˆå¤šçš„ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å¯ä»¥å­¦ä¹ ä¸€ä¸‹ï¼Œæé«˜ä¸€ä¸‹è‡ªå·±çš„æ°´å¹³ã€‚\n\n## ä»£ç ä»“åº“åœ°å€\n[react-koa2-ssr](https://github.com/cosyer/react-koa2-ssr)\n\n[1]: http://cdn.mydearest.cn/blog/images/react-ssr.png\n[2]: http://cdn.mydearest.cn/blog/images/react-ssr-demo.png\n","tags":["è§£å†³æ–¹æ¡ˆ"],"categories":["React"]},{"title":"Docker","url":"%2F2020%2FDocker.html","content":"\nDockerï¼Œæ˜¯ä¸€æ¬¾ç°åœ¨æœ€æµè¡Œçš„ è½¯ä»¶å®¹å™¨å¹³å°ï¼Œæä¾›äº†è½¯ä»¶è¿è¡Œæ—¶æ‰€ä¾èµ–çš„ç¯å¢ƒã€‚\n\n## ç‰©ç†æœº\nç¡¬ä»¶ç¯å¢ƒï¼ŒçœŸå®çš„ è®¡ç®—æœºå®ä½“ï¼ŒåŒ…å«äº†ä¾‹å¦‚ç‰©ç†å†…å­˜ï¼Œç¡¬ç›˜ç­‰ç­‰ç¡¬ä»¶ï¼›\n\n## è™šæ‹Ÿæœº:\nåœ¨ç‰©ç†æœºä¸Š æ¨¡æ‹Ÿå‡ºä¸€å¥—ç¡¬ä»¶ç¯å¢ƒå’Œæ“ä½œç³»ç»Ÿï¼Œåº”ç”¨è½¯ä»¶å¯ä»¥è¿è¡Œäºå…¶ä¸­ï¼Œå¹¶ä¸”æ¯«æ— æ„ŸçŸ¥ï¼Œæ˜¯ä¸€å¥—éš”ç¦»çš„å®Œæ•´ç¯å¢ƒã€‚æœ¬è´¨ä¸Šï¼Œå®ƒåªæ˜¯ç‰©ç†æœºä¸Šçš„ä¸€ä»½è¿è¡Œæ–‡ä»¶ã€‚\n\n## ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿæœºï¼Ÿ\n\n### ç¯å¢ƒé…ç½®ä¸è¿ç§»\nåœ¨è½¯ä»¶å¼€å‘å’Œè¿è¡Œä¸­ï¼Œç¯å¢ƒä¾èµ–ä¸€ç›´æ˜¯ä¸€ä¸ªå¾ˆå¤´ç–¼çš„éš¾é¢˜ï¼Œæ¯”å¦‚ä½ æƒ³è¿è¡Œ node åº”ç”¨ï¼Œé‚£è‡³å°‘ç¯å¢ƒå¾—å®‰è£… node å§ï¼Œè€Œä¸”ä¸åŒç‰ˆæœ¬ï¼Œä¸åŒç³»ç»Ÿéƒ½ä¼šå½±å“è¿è¡Œã€‚è§£å†³çš„åŠæ³•å°±æ˜¯æˆ‘ä»¬çš„åŒ…è£…åŒ…ä¸­ç›´æ¥åŒ…å«è¿è¡Œç¯å¢ƒçš„å®‰è£…ï¼Œè®©åŒä¸€ä»½ç¯å¢ƒå¯ä»¥å¿«é€Ÿå¤åˆ¶åˆ°ä»»æ„ä¸€å°ç‰©ç†æœºä¸Šã€‚\n\n### èµ„æºåˆ©ç”¨ç‡ä¸éš”ç¦»\né€šè¿‡ç¡¬ä»¶æ¨¡æ‹Ÿï¼Œå¹¶åŒ…å«ä¸€å¥—å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œåº”ç”¨å¯ä»¥ç‹¬ç«‹è¿è¡Œåœ¨è™šæ‹Ÿæœºä¸­ï¼Œä¸å¤–ç•Œéš”ç¦»ã€‚å¹¶ä¸”å¯ä»¥åœ¨åŒä¸€å°ç‰©ç†æœºä¸Šï¼Œå¼€å¯å¤šä¸ªä¸åŒçš„è™šæ‹Ÿæœºå¯åŠ¨æœåŠ¡ï¼Œå³ä¸€å°æœåŠ¡å™¨ï¼Œæä¾›å¤šå¥—æœåŠ¡ï¼Œä¸”èµ„æºå®Œå…¨ç›¸äº’éš”ç¦»ï¼Œäº’ä¸å½±å“ã€‚ä¸ä»…èƒ½æ›´å¥½æé«˜èµ„æºåˆ©ç”¨ç‡ç‡ï¼Œé™ä½æˆæœ¬ï¼Œè€Œä¸”ä¹Ÿæœ‰åˆ©äºæœåŠ¡çš„ç¨³å®šæ€§ã€‚\n\n### ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç¼ºç‚¹\n\n#### èµ„æºå ç”¨å¤§\nç”±äºè™šæ‹Ÿæœºæ˜¯æ¨¡æ‹Ÿå‡ºä¸€å¥—å®Œæ•´ç³»ç»Ÿï¼ŒåŒ…å«ä¼—å¤šç³»ç»Ÿçº§åˆ«çš„æ–‡ä»¶å’Œåº“ï¼Œè¿è¡Œä¹Ÿéœ€è¦å ç”¨ä¸€éƒ¨åˆ†èµ„æºï¼Œå•å•å¯åŠ¨ä¸€ä¸ªç©ºçš„è™šæ‹Ÿæœºï¼Œå¯èƒ½å°±è¦å ç”¨ 100+MB çš„å†…å­˜äº†ã€‚\n \n#### å¯åŠ¨ç¼“æ…¢\nåŒæ ·æ˜¯ç”±äºå®Œæ•´ç³»ç»Ÿï¼Œåœ¨å¯åŠ¨è¿‡ç¨‹ä¸­å°±éœ€è¦è¿è¡Œå„ç§ç³»ç»Ÿåº”ç”¨å’Œæ­¥éª¤ï¼Œä¹Ÿå°±æ˜¯è·Ÿæˆ‘ä»¬å¹³æ—¶å¯åŠ¨ç”µè„‘ä¸€æ ·çš„è€—æ—¶ã€‚\n\n#### å†—ä½™æ­¥éª¤å¤š\nç³»ç»Ÿæœ‰è®¸å¤šå†…ç½®çš„ç³»ç»Ÿæ“ä½œï¼Œä¾‹å¦‚ç”¨æˆ·ç™»å½•ï¼Œç³»ç»Ÿæ£€æŸ¥ç­‰ç­‰ï¼Œæœ‰äº›åœºæ™¯å…¶å®æˆ‘ä»¬è¦çš„åªæ˜¯ä¸€ä¸ªéš”ç¦»çš„ç¯å¢ƒï¼Œå…¶å®ä¹Ÿå°±æ˜¯è¯´ï¼Œè™šæ‹Ÿæœºå¯¹éƒ¨åˆ†éœ€æ±‚ç—›ç‚¹æ¥è¯´ï¼Œå…¶å®æ˜¯æœ‰ç‚¹è¿‡é‡çš„ã€‚\n\n## Linux å®¹å™¨\nLinux ä¸­çš„ä¸€é¡¹è™šæ‹ŸåŒ–æŠ€æœ¯ï¼Œç§°ä¸º Linux å®¹å™¨æŠ€æœ¯(LXC)ã€‚å®ƒåœ¨è¿›ç¨‹å±‚é¢æ¨¡æ‹Ÿå‡ºä¸€å¥—éš”ç¦»çš„ç¯å¢ƒé…ç½®ï¼Œä½†å¹¶æ²¡æœ‰æ¨¡æ‹Ÿç¡¬ä»¶å’Œå®Œæ•´çš„æ“ä½œç³»ç»Ÿã€‚å› æ­¤å®ƒå®Œå…¨è§„é¿äº†ä¼ ç»Ÿè™šæ‹Ÿæœºçš„ç¼ºç‚¹ï¼Œåœ¨å¯åŠ¨é€Ÿåº¦ï¼Œèµ„æºåˆ©ç”¨ä¸Šè¿œè¿œä¼˜äºè™šæ‹Ÿæœºï¼›\n\n---\n<!--more-->\n\n## Docker\n\nDocker å°±æ˜¯åŸºäº Linux å®¹å™¨çš„ä¸€ç§ä¸Šå±‚å°è£…ï¼Œæä¾›äº†æ›´ä¸ºç®€å•æ˜“ç”¨çš„ API ç”¨äºæ“ä½œ Dockerï¼Œå±äºä¸€ç§`å®¹å™¨è§£å†³æ–¹æ¡ˆ`ã€‚\nåŸºæœ¬æ¦‚å¿µ: åœ¨ Docker ä¸­ï¼Œæœ‰ä¸‰ä¸ªæ ¸å¿ƒçš„æ¦‚å¿µ:\n\n### é•œåƒ (Image):\n\n1. ä»åŸç†ä¸Šè¯´ï¼Œé•œåƒå±äºä¸€ç§`root æ–‡ä»¶ç³»ç»Ÿ`ï¼ŒåŒ…å«äº†ä¸€äº›ç³»ç»Ÿæ–‡ä»¶å’Œç¯å¢ƒé…ç½®ç­‰ï¼Œå¯ä»¥å°†å…¶ç†è§£æˆä¸€å¥—`æœ€å°æ“ä½œç³»ç»Ÿ`ã€‚ä¸ºäº†è®©é•œåƒè½»é‡åŒ–å’Œå¯ç§»æ¤ï¼ŒDocker é‡‡ç”¨äº†`Union FS çš„åˆ†å±‚å­˜å‚¨æ¨¡å¼`ã€‚å°†æ–‡ä»¶ç³»ç»Ÿåˆ†æˆä¸€å±‚ä¸€å±‚çš„ç»“æ„ï¼Œé€æ­¥ä»åº•å±‚å¾€ä¸Šå±‚æ„å»ºï¼Œæ¯å±‚æ–‡ä»¶éƒ½å¯ä»¥è¿›è¡Œç»§æ‰¿å’Œå®šåˆ¶ã€‚è¿™é‡Œä»å‰ç«¯çš„è§’åº¦æ¥ç†è§£:`é•œåƒå°±ç±»ä¼¼äºä»£ç ä¸­çš„ classï¼Œå¯ä»¥é€šè¿‡ç»§æ‰¿ä¸ä¸Šå±‚å°è£…è¿›è¡Œå¤ç”¨`ã€‚\n2. ä»å¤–å±‚ç³»ç»Ÿçœ‹æ¥ï¼Œä¸€ä¸ªé•œåƒå°±æ˜¯ä¸€ä¸ª Image`äºŒè¿›åˆ¶æ–‡ä»¶`ï¼Œå¯ä»¥ä»»æ„è¿ç§»ï¼Œåˆ é™¤ï¼Œæ·»åŠ ï¼›\n\n### å®¹å™¨ (Container):\n\n1. é•œåƒæ˜¯ä¸€ä»½é™æ€æ–‡ä»¶ç³»ç»Ÿï¼Œæ— æ³•è¿›è¡Œè¿è¡Œæ—¶æ“ä½œï¼Œå°±å¦‚classï¼Œå¦‚æœæˆ‘ä»¬ä¸è¿›è¡Œå®ä¾‹åŒ–æ—¶ï¼Œä¾¿æ— æ³•è¿›è¡Œæ“ä½œå’Œä½¿ç”¨ã€‚å› æ­¤`å®¹å™¨å¯ä»¥ç†è§£æˆé•œåƒçš„å®ä¾‹`ï¼Œå³`new é•œåƒ()`ï¼Œè¿™æ ·æˆ‘ä»¬ä¾¿å¯ä»¥åˆ›å»ºã€ä¿®æ”¹ã€æ“ä½œå®¹å™¨ï¼›ä¸€æ—¦åˆ›å»ºåï¼Œå°±å¯ä»¥ç®€å•ç†è§£æˆä¸€ä¸ªè½»é‡çº§çš„æ“ä½œç³»ç»Ÿï¼Œå¯ä»¥åœ¨å†…éƒ¨è¿›è¡Œå„ç§æ“ä½œï¼Œä¾‹å¦‚è¿è¡Œ node åº”ç”¨ï¼Œæ‹‰å– git ç­‰ï¼›\n2. åŸºäºé•œåƒçš„åˆ†å±‚ç»“æ„ï¼Œå®¹å™¨æ˜¯`ä»¥é•œåƒä¸ºåŸºç¡€åº•å±‚`ï¼Œåœ¨ä¸Šé¢å°è£…äº†ä¸€å±‚`å®¹å™¨çš„å­˜å‚¨å±‚`ï¼›\n\n- å­˜å‚¨ç©ºé—´çš„ç”Ÿå‘½å‘¨æœŸä¸å®¹å™¨ä¸€è‡´ï¼›\n- è¯¥å±‚å­˜å‚¨å±‚ä¼šéšç€å®¹å™¨çš„é”€æ¯è€Œé”€æ¯ï¼›\n- å°½é‡é¿å…å¾€å®¹å™¨å±‚å†™å…¥æ•°æ®ï¼›\n\n3. å®¹å™¨ä¸­çš„æ•°æ®çš„æŒä¹…åŒ–ç®¡ç†ä¸»è¦ç”±ä¸¤ç§æ–¹å¼:\n\n- æ•°æ®å· (Volume): ä¸€ç§å¯ä»¥åœ¨å¤šä¸ªå®¹å™¨é—´å…±äº«çš„ç‰¹æ®Šç›®å½•ï¼Œå…¶å¤„äºå®¹å™¨å¤–å±‚ï¼Œå¹¶ä¸ä¼šéšç€å®¹å™¨é”€æ¯è€Œåˆ é™¤ï¼›\n- æŒ‚è½½ä¸»æœºç›®å½•: ç›´æ¥å°†ä¸€ä¸ªä¸»æœºç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­è¿›è¡Œå†™å…¥ï¼›\n\n### ä»“åº“ (Repository):\n\n1. ä¸ºäº†ä¾¿äºé•œåƒçš„ä½¿ç”¨ï¼ŒDocker æä¾›äº†ç±»ä¼¼äº git çš„ä»“åº“æœºåˆ¶ï¼Œåœ¨ä»“åº“ä¸­åŒ…å«ç€å„ç§å„æ ·ç‰ˆæœ¬çš„é•œåƒã€‚å®˜æ–¹æœåŠ¡æ˜¯ Docker Hubï¼›\n2. å¯ä»¥å¿«é€Ÿåœ°ä»ä»“åº“ä¸­æ‹‰å–å„ç§ç±»å‹çš„é•œåƒï¼Œä¹Ÿå¯ä»¥åŸºäºæŸäº›é•œåƒè¿›è¡Œè‡ªå®šä¹‰ï¼Œç”šè‡³å‘å¸ƒåˆ°ä»“åº“ä¾›ç¤¾åŒºä½¿ç”¨ï¼›\n\n### å®‰è£…\n- linux\n> curl -sSL https://get.docker.com/ | shæˆ–è€…wget -qO- https://get.docker.com/ | sh\n\n```bash\ncurl https://get.docker.com/ > install-docker.sh # ä¸‹è½½å®‰è£…è„šæœ¬\nsh install-docker.sh # æ‰§è¡Œå®‰è£…è„šæœ¬\n```\n\n- Mac\nhttps://download.docker.com/mac/stable/Docker.dmg\n\n- windows\nhttps://download.docker.com/win/stable/Docker%20for%20Windows%20Installer.exe\n\n### ç¬¬ä¸€ä¸ª docker é¡¹ç›®\næ¥ä¸‹æ¥æˆ‘ä»¬æ­å»ºä¸€ä¸ªèƒ½å¤Ÿæ‰˜ç®¡é™æ€æ–‡ä»¶çš„ Nginx æœåŠ¡å™¨ï¼Œå®¹å™¨è¿è¡Œç¨‹åºï¼Œè€Œå®¹å™¨å“ªæ¥çš„å‘¢ï¼Ÿå®¹å™¨æ˜¯é•œåƒåˆ›å»ºå‡ºæ¥çš„ã€‚é‚£é•œåƒåˆæ˜¯å“ªæ¥çš„å‘¢ï¼Ÿ\n\né•œåƒæ˜¯é€šè¿‡ä¸€ä¸ª Dockerfile æ‰“åŒ…æ¥çš„ï¼Œå®ƒéå¸¸åƒæˆ‘ä»¬å‰ç«¯çš„package.jsonæ–‡ä»¶ã€‚\n\n```\nDockerfile: ç±»ä¼¼äºâ€œpackage.jsonâ€\n |\n V\nImage: ç±»ä¼¼äºâ€œWin7çº¯å‡€ç‰ˆ.rarâ€\n |\n V\nContainer: ä¸€ä¸ªå®Œæ•´æ“ä½œç³»ç»Ÿ\n```\n\n#### åˆ›å»ºæ–‡ä»¶\n```\nhello-docker\n  |____index.html\n  |____Dockerfile\n```\n- index.html\n```html\n<h1>Hello docker</h1>\n```\n\n- Dockerfile\n```\nFROM nginx\n\nCOPY ./index.html /usr/share/nginx/html/index.html\n\nEXPOSE 80\n```\n\n#### æ‰“åŒ…é•œåƒ\n```bash\ncd hello-docker/ # è¿›å…¥åˆšåˆšçš„ç›®å½•\ndocker image build ./ -t hello-docker:1.0.0 # æ‰“åŒ…é•œåƒ\n```\næ­¤æ—¶é‡åˆ°é—®é¢˜`Docker å®‰è£…å æŠ¥ Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running? `\n\n```bash\nsystemctl daemon-reload\nsudo service docker restart\nsudo service docker status (should see active (running))\n```\nç„¶åé‡æ–°è¿è¡Œ `docker image build ./ -t hello-docker:1.0.0` å‘½ä»¤ã€‚è¿™æ¡å‘½ä»¤çš„æ„æ€æ˜¯åŸºäºè·¯å¾„./ï¼ˆå½“å‰è·¯å¾„ï¼‰æ‰“åŒ…ä¸€ä¸ªé•œåƒï¼Œé•œåƒçš„åå­—æ˜¯hello-dockerï¼Œç‰ˆæœ¬å·æ˜¯1.0.0ã€‚è¯¥å‘½ä»¤ä¼šè‡ªåŠ¨å¯»æ‰¾\nDockerfileæ¥æ‰“åŒ…å‡ºä¸€ä¸ªé•œåƒã€‚\n\nè§£è¯»ä¸‹Dockerfileçš„å†…å®¹ï¼š\n- FROM nginxï¼šåŸºäºå“ªä¸ªé•œåƒ\n- COPY ./index.html /usr/share/nginx/html/index.htmlï¼šå°†å®¿ä¸»æœºä¸­çš„./index.htmlæ–‡ä»¶å¤åˆ¶è¿›å®¹å™¨é‡Œçš„/usr/share/nginx/html/index.html\n- EXPOSE 80ï¼šå®¹å™¨å¯¹å¤–æš´éœ²80ç«¯å£\n\n> æ³¨æ„ï¼Docker ä¸­çš„é€‰é¡¹ï¼ˆOptionsï¼‰æ”¾çš„ä½ç½®éå¸¸æœ‰è®²ç©¶ï¼Œdocker --help imageå’Œdocker image --helpæ˜¯å®Œå…¨ä¸åŒçš„å‘½ä»¤\n\n#### é…ç½®å›½å†…é•œåƒæº\nåœ¨ Linux ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ /etc/docker/daemon.json ( å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œä½ å¯ä»¥ç›´æ¥åˆ›å»ºå®ƒ ) è¿™ä¸ª Docker æœåŠ¡çš„é…ç½®æ–‡ä»¶è¾¾åˆ°æ•ˆæœã€‚\n- Dockerä¸­å›½å®˜æ–¹é•œåƒåŠ é€Ÿ\n```\n{\n    \"registry-mirrors\": [\n        \"https://registry.docker-cn.com\"\n    ]\n}\n```\n- ç½‘æ˜“163é•œåƒåŠ é€Ÿ\n```\n{\n  \"registry-mirrors\": [\"http://hub-mirror.c.163.com\"]\n}\n```\n- ä¸­ç§‘å¤§é•œåƒåŠ é€Ÿ\n```\n{\n    \"registry-mirrors\": [\"https://docker.mirrors.ustc.edu.cn\"]     \n}\n```\n- ç›´æ¥ä¸‹è½½ç«™ç‚¹é•œåƒ\n> docker pull hub.c.163.com/library/tomcat:latest  //å¤åˆ¶ç«™ç‚¹é“¾æ¥ç”¨ pull ä¸‹æ¥\n\nç„¶åé‡å¯ docker è®©é…ç½®ç”Ÿæ•ˆ\n```bash\nsudo systemctl restart docker\n```\n\né€šè¿‡ docker info æ¥æŸ¥é˜…å½“å‰æ³¨å†Œçš„é•œåƒæºåˆ—è¡¨ï¼ŒéªŒè¯æˆ‘ä»¬é…ç½®çš„é•œåƒæºæ˜¯å¦ç”Ÿæ•ˆ\n```bash\nsudo docker info\n```\n\n#### è¿è¡Œå®¹å™¨\n```bash\ndocker container create -p 9000:80 hello-docker:1.0.0 # æ ¹æ®é•œåƒåˆ›å»ºå®¹å™¨\ndocker container start xxx # xxx ä¸ºä¸Šä¸€æ¡å‘½ä»¤è¿è¡Œå¾—åˆ°çš„ç»“æœ\n```\n\nç„¶ååœ¨æµè§ˆå™¨æ‰“å¼€ip:9000ï¼Œå°±èƒ½åˆšåˆšè‡ªå·±å†™çš„index.htmlå†…å®¹ã€‚\n\nåœ¨ä¸Šè¾¹ç¬¬ä¸€ä¸ªå‘½ä»¤ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨docker container createæ¥åˆ›å»ºåŸºäºhello-docker:1.0.0é•œåƒçš„ä¸€ä¸ªå®¹å™¨ï¼Œä½¿ç”¨-pæ¥æŒ‡å®šç«¯å£ç»‘å®šâ€”â€”å°†å®¹å™¨ä¸­çš„80ç«¯å£ç»‘å®šåœ¨å®¿ä¸»æœºçš„2333ç«¯å£ã€‚æ‰§è¡Œå®Œè¯¥å‘½ä»¤ï¼Œä¼šè¿”å›ä¸€ä¸ªå®¹ID\nè€Œç¬¬äºŒä¸ªå‘½ä»¤ï¼Œåˆ™æ˜¯å¯åŠ¨è¿™ä¸ªå®¹å™¨å¯åŠ¨åï¼Œå°±èƒ½é€šè¿‡è®¿é—®æœ¬æœºçš„9000ç«¯å£æ¥è¾¾åˆ°è®¿é—®å®¹å™¨å†…80ç«¯å£çš„æ•ˆæœäº†\n\n> Tips: ä½ å¯ä»¥ä½¿ç”¨docker container lsæ¥æŸ¥çœ‹å½“å‰è¿è¡Œçš„å®¹å™¨\nå½“å®¹å™¨è¿è¡Œåï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤è¿›å…¥å®¹å™¨å†…éƒ¨ï¼š\n```bash\ndocker container exec -it xxx /bin/bash # xxx ä¸ºå®¹å™¨ID\n```\n\nåŸç†å®é™…ä¸Šæ˜¯å¯åŠ¨äº†å®¹å™¨å†…çš„/bin/bashï¼Œæ­¤æ—¶ä½ å°±å¯ä»¥é€šè¿‡bash shellä¸å®¹å™¨å†…äº¤äº’äº†ã€‚å°±åƒè¿œç¨‹è¿æ¥äº†SSHä¸€æ ·\n\n#### é€€å‡ºå®¹å™¨\n```bash\nexit # ç›´æ¥é€€å‡º\n\nCtrl + p + q # é€€å‡ºä¸åœæ­¢\n```\n\n#### åˆ¶ä½œé•œåƒ\n```bash\ndocker commit -m='message' -a='cosyer' containerId hello-docker:1.0.1\n```\n\n#### DockerFile\n- FROMï¼šè¿™ä¸ªé•œåƒä¾èµ–è°ï¼ˆåŸºç¡€é•œåƒï¼‰\n- MAINTAINERï¼šè¿™ä¸ªé•œåƒæ˜¯è°å†™çš„ï¼ˆç»´æŠ¤è€…çš„ä¿¡æ¯ï¼‰\n- RUNï¼šæ„å»ºé•œåƒéœ€è¦è¿è¡Œçš„å‘½ä»¤\n- ADDï¼šæ­¥éª¤ï¼šcopu æ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨è§£å‹\n- WORKDIRï¼šè®¾ç½®å½“å‰å·¥ä½œç›®å½•\n- VOLUMEï¼šè®¾ç½®åˆ¸ï¼ŒæŒ‚è½½ä¸»æœºç›®å½•\n- EXPOSEï¼š æš´éœ²ç«¯å£\n- CMDï¼šæŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ åªæœ‰æœ€åä¸€ä¸ªä¼šç”Ÿæ•ˆï¼Œå¯è¢«æ›¿ä»£\n- ENTRYPOINTï¼šæŒ‡å®šè¿™ä¸ªå®¹å™¨å¯åŠ¨çš„æ—¶å€™è¦è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥è¿½åŠ å‘½ä»¤\n- ONBUILDï¼šå½“æ„å»ºä¸€ä¸ªè¢«ç»§æ‰¿ DockerFile è¿™ä¸ªæ—¶å€™å°±ä¼šè¿è¡Œ ONBUILD çš„å‘½ä»¤ï¼Œè§¦å‘æŒ‡ä»¤\n- COPYï¼šç±»ä¼¼ ADD å°†æˆ‘ä»¬çš„æ–‡ä»¶æ‹·è´åˆ°é•œåƒä¸­\n- ENVï¼šæ„å»ºé•œåƒçš„æ—¶å€™è®¾ç½®ç¯å¢ƒå˜é‡\n\n#### å‘å¸ƒé•œåƒ\n- docker login\n- docker tag imageId message\n- docker push imageId\n\n#### æ€»ç»“\n1. å†™ä¸€ä¸ª Dockerfile\n2. ä½¿ç”¨docker image buildæ¥å°†Dockerfileæ‰“åŒ…æˆé•œåƒ\n3. ä½¿ç”¨docker container createæ¥æ ¹æ®é•œåƒåˆ›å»ºä¸€ä¸ªå®¹å™¨\n4. ä½¿ç”¨docker container startæ¥å¯åŠ¨ä¸€ä¸ªåˆ›å»ºå¥½çš„å®¹å™¨\n\n```bash\n# images\ndocker pull image\ndocker images # æŸ¥çœ‹æ‰€æœ‰é•œåƒ\ndocker rmi imageId -f # å¼ºåˆ¶åˆ é™¤é•œåƒ\ndocker rmi -f \\$(docker images -aq) # å°æŠ€å·§åˆ é™¤æ‰€æœ‰é•œåƒ\n\n# container\ndocker ps # æŸ¥çœ‹è¿è¡Œå®¹å™¨\n-a åˆ—å‡ºå†å²\n-n åˆ—å‡ºæœ€è¿‘\n-q åªæ˜¾ç¤ºç¼–å·\ndocker rm containerId # åˆ é™¤å®¹å™¨\ndocker rmi -f \\$(docker ps -aq) # å°æŠ€å·§åˆ é™¤æ‰€æœ‰å®¹å™¨\ndocker start id # å¯åŠ¨å®¹å™¨\ndocker restart id #é‡å¯å®¹å™¨\ndocker stop id # åœæ­¢å½“å‰è¿è¡Œçš„å®¹å™¨\ndocker kill id # å¼ºåˆ¶åœæ­¢å½“å‰è¿è¡Œå®¹å™¨\ndocker inspect containerId # æŸ¥çœ‹å®¹å™¨åŸºæœ¬ä¿¡æ¯\ndocker logs containerId # æŸ¥çœ‹å®¹å™¨æ—¥å¿—\ndocker exec -it containerId /bin/bash # è¿›å…¥å®¹å™¨\ndocker attach # æœ¬æœºè¾“å…¥åˆ°å®¹å™¨ä¸­\ndocker cp æœ¬æœºè·¯å¾„ å®¹å™¨id:æ–‡ä»¶è·¯å¾„ # ä¸»æœºå†…å®¹æ‹·è´åˆ°å®¹å™¨\ndocker cp å®¹å™¨id:æ–‡ä»¶è·¯å¾„ æœ¬æœºè·¯å¾„ # å®¹å™¨æ‹·è´å†…å®¹åˆ°ä¸»æœº\n```\n\n![docker](http://cdn.mydearest.cn/blog/images/docker.png)\n\n```bash\niptables --list | grep DOCKER\n\niptables -t nat -nvL\n\nsysctl net.ipv4.ip_forward  \n\nfirewall-cmd --state\n\nvi /etc/sysctl.conf\n\ndocker rm -f `docker ps -a -q`\n\ndocker inspect my-nginx9|grep IPAddress\n\ndocker container run --name nginxserver -d -p 80:80 nginx\n\n172.17.0.2:80\n```\n\n- é‡åˆ°äº†centos7ç³»ç»Ÿdocker å®¿ä¸»æœºä¸èƒ½è®¿é—®å®¹å™¨é—®é¢˜ï¼Œunbantuç³»ç»Ÿæ²¡é—®é¢˜\n```bash\n#åœæ­¢docker\nsystemctl stop docker\n#å…³é—­docker0\nip link set dev docker0 down\n#åˆ é™¤docker0ç½‘æ¡¥\nbrctl delbr docker0\n#é˜²ç«å¢™è®¾ç½®,åæ¥å‘ç°è¿™ä¸€æ­¥ä¸ç”¨æ‰§è¡Œå¯ä»¥\niptables -t nat -F POSTROUTING\n#å¢åŠ docker0 ç½‘æ¡¥\nbrctl addbr docker0\n#å¢åŠ ç½‘å¡\nip addr add 172.16.10.1/24 dev docker0\n#å¯ç”¨ç½‘å¡\nip link set dev docker0 up\n#é‡å¯dockeræœåŠ¡\nsystemctl restart docker\n```\n\n#### ä¸‰ç§ç½‘ç»œæ¨¡å¼\n- bridge(æ¡¥æ¥)\n- host(ä¸»æœºæ¨¡å¼ä¸å®¿ä¸»æœºå…±äº«ç½‘ç»œ)\n- none(ä¸é…ç½®ç½‘ç»œ)\n```bash\n# è‡ªå®šä¹‰ç½‘ç»œ\ndocker network create --driver bridge --subnet 192.168.3.0/16 --gateway 192.168.3.1 mynet\n\n# æŸ¥çœ‹ç½‘ç»œåˆ—è¡¨\ndocker network ls\n# åˆ é™¤ç½‘ç»œ\ndocker neteork rm id\n```\n\n### SPAåº”ç”¨é™æ€ç«™ç‚¹è¿ç§»\nä¹‹å‰çš„æ­¥éª¤ï¼š\n1. æœ¬åœ°`npm run build`æ‰“åŒ…é™æ€æ–‡ä»¶\n2. æ‰‹åŠ¨FTPä¼ è¾“åˆ°æœåŠ¡å™¨\n3. git pushæ›´æ–°github\n\nè‡ªåŠ¨åŒ–CIï¼š\n1. æ‰§è¡Œgit push\n2. è‡ªåŠ¨æ£€æµ‹åˆ° github æœ‰ä»£ç æ›´æ–°ï¼Œè‡ªåŠ¨æ‰“åŒ…å‡ºä¸€ä¸ª Docker é•œåƒ\n3. CI ç¼–è¯‘å®Œæˆåï¼ŒSSH ç™»å½• VPSï¼Œåˆ æ‰ç°æœ‰å®¹å™¨ï¼Œç”¨æ–°é•œåƒåˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨\n\nå¥½å¤„ï¼š\n1. ä¸å¿…å†æ‰‹åŠ¨ FTP ä¸Šä¼ æ–‡ä»¶\n2. å½“è¿›è¡Œä¿®æ”¹é”™åˆ«å­—è¿™æ ·çš„ç®€å•æ“ä½œæ—¶ï¼Œå¯ä»¥å…æµ‹ã€‚æ”¹å®Œç›´æ¥git pushï¼Œè€Œä¸å¿…æœ¬åœ°npm run build\n\n#### travis\nå…è´¹çš„CIèµ„æº[travis](https://www.travis-ci.org/)ï¼Œéœ€è¦åœ¨[/hub.docker.com](https://hub.docker.com/)æ³¨å†Œè´¦å·ã€‚\nä½¿ç”¨ Github ç™»å½• Travis CI åï¼Œåœ¨å·¦è¾¹ç‚¹å‡»+åŠ å·æ·»åŠ è‡ªå·±çš„ Github ä»“åº“åï¼Œéœ€è¦ç§»æ­¥åˆ° Setting ä¸ºé¡¹ç›®æ·»åŠ DOCKER_USERNAMEå’ŒDOCKER_PASSWORDç¯å¢ƒå˜é‡ã€‚è¿™æ ·ä¿è¯æˆ‘ä»¬å¯ä»¥ç§˜å¯†çš„ç™»å½• Docker Hub è€Œ\nä¸è¢«å…¶ä»–äººçœ‹åˆ°è‡ªå·±çš„å¯†ç ã€‚\n\n```\nlanguage: node_js\nnode_js:\n  - \"12\"\nservices:\n  - docker\n\nbefore_install:\n  - npm install\n\nscript:\n  - npm run build\n  - echo \"$DOCKER_PASSWORD\" | docker login -u \"$DOCKER_USERNAME\" --password-stdin\n  - docker build -t cosyer/hello-docker:1.0.0 .\n  - docker push cosyer/hello-docker:1.0.0\n```\n\nç„¶åéœ€è¦æ·»åŠ  Dockerfile æ–‡ä»¶æ¥æè¿°å¦‚ä½•æ‰“åŒ… Docker é•œåƒã€‚\næŒ‰ç…§.travis.ymlçš„å‘½ä»¤æ¬¡åºï¼Œåœ¨æ‰“åŒ…é•œåƒæ—¶ï¼Œnpm run buildå·²ç»æ‰§è¡Œè¿‡äº†ï¼Œé¡¹ç›®äº§å‡ºå·²ç»æœ‰äº†ã€‚ä¸å¿…åœ¨ Docker å®¹å™¨ä¸­è¿è¡Œnpm installå’Œnpm run buildä¹‹ç±»çš„ï¼Œç›´æ¥å¤åˆ¶æ–‡ä»¶å³å¯ï¼š\n\n```\nFROM nginx\n\nCOPY ./dist/ /usr/share/nginx/html/\nCOPY ./vhost.nginx.conf /etc/nginx/conf.d/hello-docker.conf\n\nEXPOSE 80\n```\nå°†ä¸è®¿é—®æ–‡ä»¶çš„è¯·æ±‚å…¨éƒ¨é‡å®šå‘åˆ°/index.htmlï¼Œå¤„ç†historyè·¯ç”±`vhost.nginx.conf`\n```\nserver {\n    listen 80;\n    server_name localhost;\n    location / {\n        root /usr/share/nginx/html;\n        index index.html index.htm;\n        proxy_set_header Host $host;\n\n        if (!-f $request_filename) {\n          rewrite ^.*$ /index.html break;\n        }\n\n    }\n\n    error_page 500 502 503 504 /50x.html;\n    location = /50x.html {\n        root /usr/share/nginx/html;\n    }\n}\n```\n\n### nginxåå‘ä»£ç†\nå®¿ä¸»æœº`/etc/nginx/conf.d/vhost.conf`\n```\nserver {\n    listen 80;\n    server_name pea3nut.info;\n\n    location / {\n        proxy_pass http://127.0.0.1:8082;\n    }\n}\n```\né…ç½®çš„æ„æ€æ˜¯ï¼Œç›‘å¬æ¥è‡ª 80 ç«¯å£çš„æµé‡ï¼Œè‹¥è®¿é—®åŸŸåæ˜¯mydearest.cnï¼ˆæ›¿æ¢ä¸ºä½ è‡ªå·±çš„åŸŸåï¼‰ï¼Œåˆ™å…¨éƒ¨è½¬å‘åˆ°http://127.0.0.1:8082ä¸­\n\n### nodejsç«™ç‚¹è¿ç§»(express)\nä¹‹å‰çš„æ­¥éª¤ï¼š\n1. æœ¬åœ°ä¿®æ”¹å¥½ Ejs æˆ–è€…å…¶ä»–æ–‡ä»¶\n2. æ‰‹åŠ¨é€šè¿‡ FTP ä¸Šä¼ åˆ°æœåŠ¡å™¨\n3. åœ¨æœåŠ¡å™¨ç«¯é‡å¯ Nodejs è¿›ç¨‹ã€‚è‹¥æœ‰ npm åŒ…ä¾èµ–æ”¹åŠ¨ï¼Œéœ€è¦åœ¨VP SæœåŠ¡å™¨ä¸Šæ‰‹åŠ¨æ‰§è¡Œnpm install\n4. git pushæ›´æ–° Github æºç \n\n> Tips: ä½ å¯èƒ½å‘ç°äº† Dockerfile ä¸­çš„ENTRYPOINTå‘½ä»¤å¿…é¡»æŒ‡å®šä¸€ä¸ªå‰å°è¿›ç¨‹ã€‚è‹¥ä½ çš„ Nodejs åº”ç”¨æ˜¯ä½¿ç”¨ PM2 è¿›è¡Œä¿æŠ¤çš„ï¼Œä½ éœ€è¦æ›¿æ¢pm2 start app.jsä¸ºpm2-docker app.js\n\n### docker-compose  \ndocker-compose æ˜¯ Docker å®˜æ–¹æä¾›çš„ä¸€ä¸ª Docker ç®¡ç†å·¥å…·ã€‚\n\ndocker-compose å’Œ Docker å·®ä¸å¤šï¼Œä¹Ÿæ˜¯åªè¦ä¸€ä»½æ–‡ä»¶å°±èƒ½è·‘èµ·æ¥ã€‚docker-compose ä¸»è¦çš„ä½œç”¨å°±æ˜¯èƒ½å¤Ÿè®©ä½ ä¸å¿…æ‰‹æ•²é‚£ä¹ˆå¤š Docker å‘½ä»¤\n\n- å®‰è£…\n```bash\ncurl -L \"https://github.com/docker/compose/releases/download/1.23.2/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose\nchmod +x /usr/local/bin/docker-compose\n```\n\n- ç›®å½•\nå»ºç«‹ä¸€ä¸ªç›®å½•ï¼Œç„¶ååœ¨ç›®å½•ä¸­å»ºç«‹docker-compose.ymlï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n```bash\nversion: \"3.7\" # è¿™ä¸ªæ˜¯é…ç½®æ–‡ä»¶çš„ç‰ˆæœ¬ï¼Œä¸åŒçš„ç‰ˆæœ¬å·å£°æ˜æ–¹å¼ä¼šæœ‰ç»†å¾®çš„ä¸åŒ\nservices:\n    info:\n        container_name: hello-docker\n        image: cosyer/hello-docker:1.0.0\n        ports:\n            - \"8082:80\"\n        restart: on-failure\n```\n\n- å¯åŠ¨\n```bash\ndocker-compose up info\n```\ndocker-compose ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨å»æ‹‰é•œåƒï¼Œåˆ›å»ºå®¹å™¨ï¼Œå°†å®¹å™¨ä¸­çš„80ç«¯å£æ˜ å°„ä¸ºå®¿ä¸»æœºçš„8082ç«¯å£ã€‚restartå­—æ®µè¿˜è¦æ±‚ docker-compose å½“å‘ç°å®¹å™¨æ„å¤–æŒ‚æ‰æ—¶\né‡æ–°å¯åŠ¨å®¹å™¨ï¼Œç±»ä¼¼äº pm2ï¼Œæ‰€ä»¥ä½ ä¸å¿…å†åœ¨å®¹å™¨å†…ä½¿ç”¨ pm2\n\nå¦‚æœæƒ³è¦æ›´æ–°ä¸€ä¸ªé•œåƒåˆ›å»ºæ–°å®¹å™¨ï¼Œåªéœ€è¦ï¼š\n```bash\ndocker-compose pull info\ndocker-compose stop info\ndocker-compose rm info\ndocker-compose up -d info # -d ä»£è¡¨åå°è¿è¡Œ\n```\n","tags":["è§£å†³æ–¹æ¡ˆ"],"categories":["å·¥å…·"]},{"title":"Nginx","url":"%2F2020%2FNginx.html","content":"\nå®šä¹‰ï¼šè½»é‡çº§ã€é«˜æ€§èƒ½çš„ Web æœåŠ¡å™¨ï¼Œåœ¨ç°ä»Šçš„å¤§å‹åº”ç”¨ã€ç½‘ç«™åŸºæœ¬éƒ½ç¦»ä¸å¼€ Nginxï¼Œå·²ç»æˆä¸ºäº†ä¸€é¡¹å¿…é€‰çš„æŠ€æœ¯ï¼›å…¶å®å¯ä»¥æŠŠå®ƒç†è§£æˆ å…¥å£ç½‘å…³ã€‚\n\n> å½“ä½ å»é“¶è¡ŒåŠç†ä¸šåŠ¡æ—¶ï¼Œåˆšèµ°è¿›é“¶è¡Œï¼Œéœ€è¦åˆ°å…¥é—¨å¤„çš„æœºå™¨æ’é˜Ÿå–å·ï¼Œç„¶åæŒ‰æŒ‡ä»¤åˆ°å¯¹åº”çš„æŸœå°åŠç†ä¸šåŠ¡ï¼Œæˆ–è€…ä¹Ÿæœ‰å¯èƒ½å‘Šè¯‰ä½ ï¼Œä»Šå¤©ä¸èƒ½æ’å·äº†ï¼Œå›å®¶å§ï¼\n> è¿™æ ·ä¸€ä¸ªåœºæ™¯ä¸­ï¼Œå–å·æœºå™¨å°±æ˜¯ Nginx(å…¥å£ç½‘å…³)ã€‚ä¸€ä¸ªä¸ªæŸœå°å°±æ˜¯æˆ‘ä»¬çš„ä¸šåŠ¡æœåŠ¡å™¨(åŠç†ä¸šåŠ¡)ï¼›é“¶è¡Œä¸­çš„ä¿é™©ç®±å°±æ˜¯æˆ‘ä»¬çš„æ•°æ®åº“(å­˜å–æ•°æ®)ï¼›ğŸ¤£\n\n![nginx](http://cdn.mydearest.cn/blog/images/nginx.png)\n\n## ç‰¹ç‚¹\n1. è½»é‡çº§ï¼Œé…ç½®æ–¹ä¾¿çµæ´»ï¼Œæ— ä¾µå…¥æ€§ï¼›\n2. å ç”¨å†…å­˜å°‘ï¼Œå¯åŠ¨å¿«ï¼Œæ€§èƒ½å¥½ï¼›\n3. é«˜å¹¶å‘ï¼Œäº‹ä»¶é©±åŠ¨ï¼Œå¼‚æ­¥ï¼›\n4. çƒ­éƒ¨ç½²ï¼Œä¿®æ”¹é…ç½®çƒ­ç”Ÿæ•ˆï¼›\n\n---\n<!--more-->\n\n## æ¶æ„æ¨¡å‹\n- åŸºäº socket ä¸ Linux epoll (I/O äº‹ä»¶é€šçŸ¥æœºåˆ¶)ï¼Œå®ç°äº†é«˜å¹¶å‘ï¼›\n  - åŸºäº socket ä¸ Linux epoll (I/O äº‹ä»¶é€šçŸ¥æœºåˆ¶)ï¼Œå®ç°äº† é«˜å¹¶å‘ï¼›\n  - ç£ç›˜ä¸è¶³çš„æƒ…å†µï¼Œå¯èƒ½ä¼šå¯¼è‡´é˜»å¡ï¼›\n\n- Master-worker è¿›ç¨‹æ¨¡å¼\n  - Nginx å¯åŠ¨æ—¶ä¼šåœ¨å†…å­˜ä¸­å¸¸é©»ä¸€ä¸ª Master ä¸»è¿›ç¨‹\n    - è¯»å–é…ç½®æ–‡ä»¶\n    - åˆ›å»ºã€ç»‘å®šã€å…³é—­ socket\n    - å¯åŠ¨ã€ç»´æŠ¤ã€é…ç½® worker è¿›ç¨‹\n    - ç¼–è¯‘è„šæœ¬ã€æ‰“å¼€æ—¥å¿—\n  - master è¿›ç¨‹ä¼šå¼€å¯é…ç½®æ•°é‡çš„ worker è¿›ç¨‹ï¼Œæ¯”å¦‚æ ¹æ® CPU æ ¸æ•°ç­‰\n    - åˆ©ç”¨ socket ç›‘å¬è¿æ¥ï¼Œä¸ä¼šæ–°å¼€è¿›ç¨‹æˆ–çº¿ç¨‹ï¼ŒèŠ‚çº¦äº†åˆ›å»ºä¸é”€æ¯è¿›ç¨‹çš„æˆæœ¬\n    - æ£€æŸ¥ç½‘ç»œã€å­˜å‚¨ï¼ŒæŠŠæ–°è¿æ¥åŠ å…¥åˆ°è½®è¯¢é˜Ÿåˆ—ä¸­ï¼Œå¼‚æ­¥å¤„ç†\n    - èƒ½æœ‰æ•ˆåˆ©ç”¨ cpu å¤šæ ¸ï¼Œå¹¶é¿å…äº†çº¿ç¨‹åˆ‡æ¢å’Œé”ç­‰å¾…\n- çƒ­éƒ¨ç½²æ¨¡å¼\n  - å½“æˆ‘ä»¬ä¿®æ”¹é…ç½®çƒ­é‡å¯åï¼Œmaster è¿›ç¨‹ä¼šä»¥æ–°çš„é…ç½®æ–°åˆ›å»º worker è¿›ç¨‹ï¼Œæ–°è¿æ¥ä¼šå…¨éƒ¨äº¤ç»™æ–°è¿›ç¨‹å¤„ç†\n  - è€çš„ worker è¿›ç¨‹ä¼šåœ¨å¤„ç†å®Œä¹‹å‰çš„è¿æ¥åè¢« kill æ‰ï¼Œé€æ­¥å…¨æ›¿æ¢æˆæ–°é…ç½®çš„ worker è¿›ç¨‹\n\n## é…ç½®\n\n### å®˜ç½‘ä¸‹è½½\n\n### é…ç½®æ–‡ä»¶è·¯å¾„ï¼š /usr/local/etc/nginx/nginx.conf\n\n### å¯åŠ¨: ç»ˆç«¯è¾“å…¥ nginxï¼Œè®¿é—® localhost:8080 å°±èƒ½çœ‹åˆ° Welcome...\n\n### åœæ­¢ä¸å¯åŠ¨\n```bash\nnginx -s stop: # åœæ­¢æœåŠ¡\nnginx -s reload # çƒ­é‡å¯æœåŠ¡\n```\n\n### é…ç½®ä»£ç†\n```bash\nserver {\n    listen 80;\n    location / {\n        proxy_pass http://xxx.xxx.xx.xx:3000;\n    }\n}\n```\n\n## å¸¸ç”¨åœºæ™¯\n### ä»£ç†\nå…¶å® Nginx å¯ä»¥ç®—ä¸€å±‚ ä»£ç†æœåŠ¡å™¨ï¼Œå°†å®¢æˆ·ç«¯çš„è¯·æ±‚å¤„ç†ä¸€å±‚åï¼Œå†è½¬å‘åˆ°ä¸šåŠ¡æœåŠ¡å™¨ï¼Œè¿™é‡Œå¯ä»¥åˆ†æˆä¸¤ç§ç±»å‹ï¼Œå…¶å®å®è´¨å°±æ˜¯è¯·æ±‚çš„è½¬å‘ï¼Œä½¿ç”¨ Nginx éå¸¸åˆé€‚ã€é«˜æ•ˆï¼›\n\n### æ­£å‘ä»£ç†(VPN)\n\n- å³ç”¨æˆ·é€šè¿‡è®¿é—®è¿™å±‚æ­£å‘ä»£ç†æœåŠ¡å™¨ï¼Œå†ç”±ä»£ç†æœåŠ¡å™¨å»åˆ°åŸå§‹æœåŠ¡å™¨è¯·æ±‚å†…å®¹åï¼Œå†è¿”å›ç»™ç”¨æˆ·ï¼›\n- ä¾‹å¦‚æˆ‘ä»¬å¸¸ä½¿ç”¨çš„ VPN å°±æ˜¯ä¸€ç§å¸¸è§çš„æ­£å‘ä»£ç†æ¨¡å¼ã€‚é€šå¸¸æˆ‘ä»¬æ— æ³•ç›´æ¥è®¿é—®è°·æ­ŒæœåŠ¡å™¨ï¼Œä½†æ˜¯é€šè¿‡è®¿é—®ä¸€å°å›½å¤–çš„æœåŠ¡å™¨ï¼Œå†ç”±è¿™å°æœåŠ¡å™¨å»è¯·æ±‚è°·æ­Œè¿”å›ç»™ç”¨æˆ·ï¼Œç”¨æˆ·å³å¯è®¿é—®è°·æ­Œï¼›\n\n#### ç‰¹ç‚¹\n1. ä»£ç†æœåŠ¡å™¨å±äº`å®¢æˆ·ç«¯å±‚`ï¼Œç§°ä¹‹ä¸ºæ­£å‘ä»£ç†ï¼›\n2. ä»£ç†æœåŠ¡å™¨æ˜¯`ä¸ºç”¨æˆ·æœåŠ¡`ï¼Œå¯¹äºç”¨æˆ·æ˜¯é€æ˜çš„ï¼Œç”¨æˆ·çŸ¥é“è‡ªå·±è®¿é—®ä»£ç†æœåŠ¡å™¨ï¼›\n3. å¯¹å†…å®¹æœåŠ¡å™¨æ¥è¯´æ˜¯éšè—çš„ï¼Œå†…å®¹æœåŠ¡å™¨å¹¶æ— æ³•åˆ†æ¸…è®¿é—®æ˜¯æ¥è‡ªç”¨æˆ·æˆ–è€…ä»£ç†ï¼›\n\n![forward-agent](http://cdn.mydearest.cn/blog/images/forward-agent.png)\n\n### åå‘ä»£ç†(Nginx)\n\n- ç”¨æˆ·è®¿é—®å¤´æ¡çš„åå‘ä»£ç†ç½‘å…³ï¼Œé€šè¿‡ç½‘å…³çš„ä¸€å±‚å¤„ç†å’Œè°ƒåº¦åï¼Œå†ç”±ç½‘å…³å°†è®¿é—®è½¬å‘åˆ°å†…éƒ¨çš„æœåŠ¡å™¨ä¸Šï¼Œè¿”å›å†…å®¹ç»™ç”¨æˆ·ï¼›\n\n#### ç‰¹ç‚¹\n1. ä»£ç†æœåŠ¡å™¨å±äº`æœåŠ¡ç«¯å±‚`ï¼Œå› æ­¤ç§°ä¸ºåå‘ä»£ç†ã€‚é€šå¸¸ä»£ç†æœåŠ¡å™¨ä¸å†…éƒ¨å†…å®¹æœåŠ¡å™¨ä¼šéš¶å±äºåŒä¸€å†…ç½‘æˆ–è€…é›†ç¾¤ï¼›\n2. ä»£ç†æœåŠ¡å™¨æ˜¯`ä¸ºå†…å®¹æœåŠ¡å™¨`æœåŠ¡çš„ï¼Œå¯¹ç”¨æˆ·æ˜¯éšè—çš„ï¼Œç”¨æˆ·ä¸æ¸…æ¥šè‡ªå·±è®¿é—®çš„å…·ä½“æ˜¯å“ªå°å†…éƒ¨æœåŠ¡å™¨ï¼›\n\n![reverse-proxy](http://cdn.mydearest.cn/blog/images/reverse-proxy.png)\n\n#### åå‘ä»£ç†çš„å¥½å¤„:\n\n1. å®‰å…¨ä¸æƒé™:\nç”¨æˆ·è®¿é—®å¿…é¡»é€šè¿‡åå‘ä»£ç†æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯ä¾¿å¯ä»¥åœ¨åšè¿™å±‚åšç»Ÿä¸€çš„è¯·æ±‚æ ¡éªŒï¼Œè¿‡æ»¤æ‹¦æˆªä¸åˆæ³•ã€å±é™©çš„è¯·æ±‚ï¼Œä»è€Œå°±èƒ½æ›´å¥½çš„ä¿è¯æœåŠ¡å™¨çš„å®‰å…¨ä¸ç¨³å®šï¼›\n\n2. è´Ÿè½½å‡è¡¡: èƒ½æœ‰æ•ˆåˆ†é…æµé‡ï¼Œæœ€å¤§åŒ–é›†ç¾¤çš„ç¨³å®šæ€§ï¼Œä¿è¯ç”¨æˆ·çš„è®¿é—®è´¨é‡ï¼›\n\n##### è´Ÿè½½å‡è¡¡\n- è´Ÿè½½å‡è¡¡æ˜¯åŸºäºåå‘ä»£ç†ä¸‹å®ç°çš„ä¸€ç§ æµé‡åˆ†é… åŠŸèƒ½ï¼Œç›®çš„æ˜¯ä¸ºäº†è¾¾åˆ°æœåŠ¡å™¨èµ„æºçš„å……åˆ†åˆ©ç”¨ï¼Œä»¥åŠæ›´å¿«çš„è®¿é—®å“åº”ï¼›\n\n- å…¶å®å¾ˆå¥½ç†è§£ï¼Œè¿˜æ˜¯ä»¥ä¸Šé¢é“¶è¡Œçš„ä¾‹å­æ¥çœ‹: é€šè¿‡é—¨å£çš„å–å·å™¨ï¼Œç³»ç»Ÿå°±å¯ä»¥æ ¹æ®æ¯ä¸ªæŸœå°çš„ä¸šåŠ¡æ’é˜Ÿæƒ…å†µè¿›è¡Œç”¨æˆ·çš„åˆ†é…ï¼Œä½¿æ¯ä¸ªæŸœå°éƒ½ä¿æŒåœ¨ä¸€ä¸ªæ¯”è¾ƒé«˜æ•ˆçš„è¿ä½œçŠ¶æ€ï¼Œé¿å…å‡ºç°åˆ†é…ä¸å‡çš„æƒ…å†µï¼›\n\n- ç”±äºç”¨æˆ·å¹¶ä¸çŸ¥é“å†…éƒ¨æœåŠ¡å™¨ä¸­çš„é˜Ÿåˆ—æƒ…å†µï¼Œè€Œåå‘ä»£ç†æœåŠ¡å™¨æ˜¯æ¸…æ¥šçš„ï¼Œå› æ­¤é€šè¿‡Nginxï¼Œä¾¿èƒ½å¾ˆç®€å•åœ°å®ç°æµé‡çš„å‡è¡¡åˆ†é…ï¼›\n\n- Nginx å®ç°: Upstreamæ¨¡å—ï¼Œè¿™æ ·å½“ç”¨æˆ·è®¿é—® http://xxx æ—¶ï¼Œæµé‡ä¾¿ä¼šè¢«æŒ‰ç…§ä¸€å®šçš„è§„åˆ™åˆ†é…åˆ°upstreamä¸­çš„3å°æœåŠ¡å™¨ä¸Šï¼›\n\n```js\nhttp {\n    upstream xxx {\n        server 1.1.1.1:3001;\n        server 2.2.2.2:3001;\n        server 3.3.3.3:3001;\n    }\n    server {\n        listen 8080;\n        location / {\n            proxy_pass http://xxx;\n        }\n    }\n}\n```\n- åˆ†é…çš„ç­–ç•¥\n  - åˆ†é…çš„æƒé‡(weight)\n  ```js\n  upstream xxx {\n    server 1.1.1.1:3001 weight=1;\n    server 2.2.2.2:3001 weight=1;\n    server 3.3.3.3:3001 weight=8;\n  }\n  ```\n  - æ—¶é—´é¡ºåº(é»˜è®¤): æŒ‰ç”¨æˆ·çš„è®¿é—®çš„é¡ºåºé€ä¸€çš„åˆ†é…åˆ°æ­£å¸¸è¿è¡Œçš„æœåŠ¡å™¨ä¸Šï¼›\n  - è¿æ¥æ•°ä¼˜å…ˆ(least_conn): ä¼˜å…ˆå°†è®¿é—®åˆ†é…åˆ°åˆ—è¡¨ä¸­è¿æ¥æ•°é˜Ÿåˆ—æœ€çŸ­çš„æœåŠ¡å™¨ä¸Šï¼›\n  - å“åº”æ—¶é—´ä¼˜å…ˆ(fair): ä¼˜å…ˆå°†è®¿é—®åˆ†é…åˆ°åˆ—è¡¨ä¸­è®¿é—®å“åº”æ—¶é—´æœ€çŸ­çš„æœåŠ¡å™¨ä¸Šï¼›\n  - ip_hash: é€šè¿‡ ip_hash æŒ‡å®šï¼Œä½¿æ¯ä¸ª ip ç”¨æˆ·éƒ½è®¿é—®å›ºå®šçš„æœåŠ¡å™¨ä¸Šï¼Œæœ‰åˆ©äºç”¨æˆ·ç‰¹å¼‚æ€§æ•°æ®çš„ç¼“å­˜ï¼Œä¾‹å¦‚æœ¬åœ° session æœåŠ¡ç­‰\n  - url_hash: é€šè¿‡ url_hash æŒ‡å®šï¼Œä½¿æ¯ä¸ª url éƒ½åˆ†é…åˆ°å›ºå®šçš„æœåŠ¡å™¨ä¸Šï¼Œæœ‰åˆ©äºç¼“å­˜ï¼›\n\n## Nginx å¯¹äºå‰ç«¯çš„ä½œç”¨\n1. å¿«é€Ÿé…ç½®é™æ€æœåŠ¡å™¨(å½“è®¿é—® localhost:80 æ—¶ï¼Œå°±ä¼šé»˜è®¤è®¿é—®åˆ° /Users/files/index.html)\n```js\nserver {\n\tlisten 80;                                                         \n\tserver_name localhost;                                               \n\t\t\n\tlocation / {\n\t\troot   /Users/files;\n\t\tindex  index.html;\n\t}\n}\n```\n\n2. è®¿é—®é™åˆ¶(å¯ä»¥åˆ¶å®šä¸€ç³»åˆ—çš„è§„åˆ™è¿›è¡Œè®¿é—®çš„æ§åˆ¶ï¼Œä¾‹å¦‚ç›´æ¥é€šè¿‡ ip é™åˆ¶)\n```bash\n# å±è”½ 192.168.1.1 çš„è®¿é—®ï¼›\n# å…è®¸ 192.168.1.2 ~ 10 çš„è®¿é—®ï¼›\nlocation / {\n    deny  192.168.1.1;\n    allow 192.168.1.2/10;\n    deny  all;\n}\n```\n\n3. è§£å†³è·¨åŸŸ(å…¶å®è·¨åŸŸæ˜¯æµè§ˆå™¨çš„å®‰å…¨ç­–ç•¥ï¼Œè¿™æ„å‘³ç€åªè¦ä¸æ˜¯é€šè¿‡æµè§ˆå™¨ï¼Œå°±å¯ä»¥ç»•å¼€è·¨åŸŸçš„é—®é¢˜ã€‚æ‰€ä»¥åªè¦é€šè¿‡åœ¨åŒåŸŸä¸‹å¯åŠ¨ä¸€ä¸ª Nginx æœåŠ¡ï¼Œè½¬å‘è¯·æ±‚å³å¯)\n```bash\nlocation ^~/api/ {\n\t# é‡å†™è¯·æ±‚å¹¶ä»£ç†åˆ°å¯¹åº”åŸŸåä¸‹\n  rewrite ^/api/(.*)$ /$1 break;\n  proxy_pass https://www.cross-target.com/;\n}\n```\n\n4. å›¾ç‰‡å¤„ç†(é€šè¿‡ ngx_http_image_filter_module è¿™ä¸ªæ¨¡å—ï¼Œå¯ä»¥ä½œä¸ºä¸€å±‚å›¾ç‰‡æœåŠ¡å™¨çš„ä»£ç†ï¼Œåœ¨è®¿é—®çš„æ—¶å€™ å¯¹å›¾ç‰‡è¿›è¡Œç‰¹å®šçš„æ“ä½œï¼Œä¾‹å¦‚è£å‰ªï¼Œæ—‹è½¬ï¼Œå‹ç¼©ç­‰)\n\n5. æœ¬åœ°ä»£ç†ï¼Œç»•è¿‡ç™½åå•é™åˆ¶\n\n- ä¾‹å¦‚æˆ‘ä»¬åœ¨æ¥å…¥ä¸€äº›ç¬¬ä¸‰æ–¹æœåŠ¡æ—¶ç»å¸¸ä¼šæœ‰ä¸€äº›åŸŸåç™½åå•çš„é™åˆ¶ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æœ¬åœ°é€šè¿‡localhostè¿›è¡Œå¼€å‘ï¼Œä¾¿æ— æ³•å®ŒæˆåŠŸèƒ½ã€‚è¿™é‡Œæˆ‘ä»¬å¯ä»¥åšä¸€å±‚æœ¬åœ°ä»£ç†ï¼Œä¾¿å¯ä»¥ç›´æ¥é€šè¿‡æŒ‡å®šåŸŸåè®¿é—®æœ¬åœ°å¼€å‘ç¯å¢ƒï¼›\n\n```js\nserver {\nlisten 80;\nserver_name www.toutiao.com;\n\n// server_name xxxx.cn xxxx.xxxx.cn;\n// rewrite ^/(.*) https://xxx.xxxx.cn permanent; #è·³è½¬åˆ°Https\n\nlocation / {\n    proxy_pass http://localhost:3000;\n  }\n}\n```\n","tags":["è§£å†³æ–¹æ¡ˆ"],"categories":["å·¥å…·"]},{"title":"Hybridæ··åˆæ–¹æ¡ˆ","url":"%2F2020%2FHybrid.html","content":"\néšç€ WebæŠ€æœ¯ å’Œ ç§»åŠ¨è®¾å¤‡ çš„å¿«é€Ÿå‘å±•ï¼Œåœ¨å„å®¶å¤§å‚ä¸­ï¼ŒHybrid æŠ€æœ¯å·²ç»æˆä¸ºä¸€ç§æœ€ä¸»æµæœ€ä¸å¯å–ä»£çš„æ¶æ„æ–¹æ¡ˆä¹‹ä¸€ã€‚ä¸€å¥—å¥½çš„ Hybrid æ¶æ„æ–¹æ¡ˆèƒ½è®© App æ—¢èƒ½æ‹¥æœ‰æè‡´çš„ä½“éªŒå’Œæ€§èƒ½ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ‹¥æœ‰WebæŠ€æœ¯çµæ´»çš„å¼€å‘æ¨¡å¼ã€è·¨å¹³å°èƒ½åŠ›ä»¥åŠçƒ­æ›´æ–°æœºåˆ¶ã€‚å› æ­¤ï¼Œç›¸å…³çš„ Hybrid é¢†åŸŸäººæ‰ä¹Ÿæ˜¯ååˆ†çš„åƒé¦™ï¼Œç²¾é€šHybrid æŠ€æœ¯å’Œç›¸å…³çš„å®æˆ˜ç»éªŒï¼Œä¹Ÿæ˜¯é¢è¯•ä¸­ä¸€é¡¹å¤§å¤§çš„åŠ åˆ†é¡¹ã€‚\n\n## æ··åˆæ–¹æ¡ˆç®€æ\nHybrid Appï¼Œä¿—ç§° æ··åˆåº”ç”¨ï¼Œå³æ··åˆäº† NativeæŠ€æœ¯ ä¸ WebæŠ€æœ¯ è¿›è¡Œå¼€å‘çš„ç§»åŠ¨åº”ç”¨ã€‚ç°åœ¨æ¯”è¾ƒæµè¡Œçš„æ··åˆæ–¹æ¡ˆä¸»è¦æœ‰ä¸‰ç§ï¼Œä¸»è¦æ˜¯åœ¨UIæ¸²æŸ“æœºåˆ¶ä¸Šçš„ä¸åŒ:\n\n### Webview UI\n\n#### é€šè¿‡ JSBridge å®Œæˆ H5 ä¸ Native çš„åŒå‘é€šè®¯ï¼Œå¹¶ åŸºäº Webview è¿›è¡Œé¡µé¢çš„æ¸²æŸ“ï¼›\n##### ä¼˜åŠ¿: ç®€å•æ˜“ç”¨ï¼Œæ¶æ„é—¨æ§›/æˆæœ¬è¾ƒä½ï¼Œé€‚ç”¨æ€§ä¸çµæ´»æ€§æå¼ºï¼›\n##### Webview æ€§èƒ½å±€é™ï¼Œåœ¨å¤æ‚é¡µé¢ä¸­ï¼Œè¡¨ç°è¿œä¸å¦‚åŸç”Ÿé¡µé¢ï¼›\n\n### Native UI\n\n#### é€šè¿‡ JSBridge èµ‹äºˆ H5 åŸç”Ÿèƒ½åŠ›ï¼Œå¹¶è¿›ä¸€æ­¥å°† JS ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘(Virtual DOM)ä¼ é€’è‡³ Native å±‚ï¼Œå¹¶ä½¿ç”¨ åŸç”Ÿç³»ç»Ÿæ¸²æŸ“ã€‚\n##### ä¼˜åŠ¿: ç”¨æˆ·ä½“éªŒåŸºæœ¬æ¥è¿‘åŸç”Ÿï¼Œä¸”èƒ½å‘æŒ¥ WebæŠ€æœ¯ å¼€å‘çµæ´»ä¸æ˜“æ›´æ–°çš„ç‰¹æ€§ï¼›\n##### ä¸Šæ‰‹/æ”¹é€ é—¨æ§›è¾ƒé«˜ï¼Œæœ€å¥½éœ€è¦æŒæ¡ä¸€å®šç¨‹åº¦çš„å®¢æˆ·ç«¯æŠ€æœ¯ã€‚ç›¸æ¯”äºå¸¸è§„Webå¼€å‘ï¼Œéœ€è¦æ›´é«˜çš„å¼€å‘è°ƒè¯•ã€é—®é¢˜æ’æŸ¥æˆæœ¬ï¼›\n\n\n### å°ç¨‹åº\n\n#### é€šè¿‡æ›´åŠ å®šåˆ¶åŒ–çš„ JSBridgeï¼Œèµ‹äºˆäº† Web æ›´å¤§çš„æƒé™ï¼Œå¹¶ä½¿ç”¨åŒ WebView åŒçº¿ç¨‹çš„æ¨¡å¼éš”ç¦»äº† JSé€»è¾‘ ä¸ UIæ¸²æŸ“ï¼Œå½¢æˆäº†ç‰¹æ®Šçš„å¼€å‘æ¨¡å¼ï¼ŒåŠ å¼ºäº† H5 ä¸ Native æ··åˆç¨‹åº¦ï¼Œå±äºç¬¬ä¸€ç§æ–¹æ¡ˆçš„ä¼˜åŒ–ç‰ˆæœ¬ï¼›\n##### ä¼˜åŠ¿: ç”¨æˆ·ä½“éªŒå¥½äºå¸¸è§„ Webview æ–¹æ¡ˆï¼Œä¸”é€šå¸¸ä¾æ‰˜çš„å¹³å°ä¹Ÿèƒ½æä¾›æ›´ä¸ºå‹å¥½çš„å¼€å‘è°ƒè¯•ä½“éªŒä»¥åŠåŠŸèƒ½ï¼›\n##### åŠ£åŠ¿: éœ€è¦ä¾æ‰˜äºç‰¹å®šçš„å¹³å°çš„è§„èŒƒé™å®š\n\n---\n<!--more-->\n\n## Webview\nWebview æ˜¯ Native App ä¸­å†…ç½®çš„ä¸€æ¬¾åŸºäºWebkitå†…æ ¸çš„æµè§ˆå™¨ï¼Œä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆ:\n- WebCore æ’ç‰ˆå¼•æ“\n- JSCore è§£æå¼•æ“\n\nåœ¨åŸç”Ÿå¼€å‘ SDK ä¸­ Webview è¢«å°è£…æˆäº†ä¸€ä¸ªç»„ä»¶ï¼Œç”¨äºä½œä¸º Webé¡µé¢ çš„å®¹å™¨ã€‚å› æ­¤ä½œä¸ºå®¿ä¸»çš„å®¢æˆ·ç«¯ä¸­æ‹¥æœ‰æ›´é«˜çš„æƒé™ï¼Œå¯ä»¥å¯¹ Webview ä¸­çš„Webé¡µé¢è¿›è¡Œé…ç½®å’Œå¼€å‘ã€‚\nHybridæŠ€æœ¯ä¸­åŒç«¯çš„äº¤äº’åŸç†ï¼Œä¾¿æ˜¯åŸºäº Webview çš„ä¸€äº› API å’Œç‰¹æ€§ã€‚\n\n## äº¤äº’åŸç†\nHybridæŠ€æœ¯ä¸­æœ€æ ¸å¿ƒçš„ç‚¹å°±æ˜¯Nativeç«¯ä¸H5ç«¯ä¹‹é—´çš„åŒå‘é€šè®¯å±‚ï¼Œå…¶å®è¿™é‡Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬éœ€è¦ä¸€å¥—è·¨è¯­è¨€é€šè®¯æ–¹æ¡ˆï¼Œä¾¿æ˜¯æˆ‘ä»¬å¸¸å¬åˆ°çš„JSBridgeã€‚\n\n### JavaScript é€šçŸ¥ Native\n1. APIæ³¨å…¥ï¼ŒNative ç›´æ¥åœ¨ JS ä¸Šä¸‹æ–‡ä¸­æŒ‚è½½æ•°æ®æˆ–è€…æ–¹æ³•\n\nå»¶è¿Ÿè¾ƒä½ï¼Œåœ¨å®‰å“4.1ä»¥ä¸‹å…·æœ‰å®‰å…¨æ€§é—®é¢˜ï¼Œé£é™©è¾ƒé«˜\n\n2. WebView URL Scheme è·³è½¬æ‹¦æˆª\n\nå…¼å®¹æ€§å¥½ï¼Œä½†å»¶è¿Ÿè¾ƒé«˜ï¼Œä¸”æœ‰é•¿åº¦é™åˆ¶\n\n3. WebView ä¸­çš„ prompt/console/alertæ‹¦æˆª(é€šå¸¸ä½¿ç”¨ prompt)\n\n### Native é€šçŸ¥ Javascript\n1. IOS: stringByEvaluatingJavaScriptFromString\n```js\n// Swift\nwebview.stringByEvaluatingJavaScriptFromString(\"alert('NativeCall')\")\n```\n\n2. Android: loadUrl (4.4-)\n```js\n// è°ƒç”¨jsä¸­çš„JSBridge.triggeræ–¹æ³•\n// è¯¥æ–¹æ³•çš„å¼Šç«¯æ˜¯æ— æ³•è·å–å‡½æ•°è¿”å›å€¼ï¼›\nwebView.loadUrl(\"javascript:JSBridge.trigger('NativeCall')\")\n```\n\n3. Android: evaluateJavascript (4.4+)\n```js\n// 4.4+åä½¿ç”¨è¯¥æ–¹æ³•ä¾¿å¯è°ƒç”¨å¹¶è·å–å‡½æ•°è¿”å›å€¼ï¼›\nmWebView.evaluateJavascriptï¼ˆ\"javascript:JSBridge.trigger('NativeCall')\", new ValueCallback<String>() {\n    @Override\n    public void onReceiveValue(String value) {\n        //æ­¤å¤„ä¸º js è¿”å›çš„ç»“æœ\n    }\n});\n```\n\n## æ¥å…¥æ–¹æ¡ˆ\næ•´å¥—æ–¹æ¡ˆéœ€è¦ Web ä¸ Native ä¸¤éƒ¨åˆ†å…±åŒæ¥å®Œæˆ:\n\n- Native: è´Ÿè´£å®ç°URLæ‹¦æˆªä¸è§£æã€ç¯å¢ƒä¿¡æ¯çš„æ³¨å…¥ã€æ‹“å±•åŠŸèƒ½çš„æ˜ å°„ã€ç‰ˆæœ¬æ›´æ–°ç­‰åŠŸèƒ½ï¼›\n- JavaScirpt: è´Ÿè´£å®ç°åŠŸèƒ½åè®®çš„æ‹¼è£…ã€åè®®çš„å‘é€ã€å‚æ•°çš„ä¼ é€’ã€å›è°ƒç­‰ä¸€ç³»åˆ—åŸºç¡€åŠŸèƒ½ã€‚\n\næ¥å…¥æ–¹å¼:\n- åœ¨çº¿H5: ç›´æ¥å°†é¡¹ç›®éƒ¨ç½²äºçº¿ä¸ŠæœåŠ¡å™¨ï¼Œå¹¶ç”±å®¢æˆ·ç«¯åœ¨ HTML å¤´éƒ¨æ³¨å…¥å¯¹åº”çš„ Bridgeã€‚\n  - ä¼˜åŠ¿: æ¥å…¥/å¼€å‘æˆæœ¬ä½ï¼Œå¯¹ App çš„ä¾µå…¥å°ï¼›\n  - åŠ£åŠ¿: é‡åº¦ä¾èµ–ç½‘ç»œï¼Œæ— æ³•ç¦»çº¿ä½¿ç”¨ï¼Œé¦–å±åŠ è½½æ…¢ï¼›\n\n- å†…ç½®ç¦»çº¿åŒ…: å°†ä»£ç ç›´æ¥å†…ç½®äº App ä¸­ï¼Œå³æœ¬åœ°å­˜å‚¨ä¸­ï¼Œå¯ç”± H5 æˆ–è€… å®¢æˆ·ç«¯å¼•ç”¨ Bridgeã€‚\n  - ä¼˜åŠ¿: é¦–å±åŠ è½½å¿«ï¼Œå¯ç¦»çº¿åŒ–ä½¿ç”¨ï¼›\n  - åŠ£åŠ¿: å¼€å‘ã€è°ƒè¯•æˆæœ¬å˜é«˜ï¼Œéœ€è¦å¤šç«¯åˆä½œï¼Œä¸”ä¼šå¢åŠ  App åŒ…ä½“ç§¯\n\n## 5. ä¼˜åŒ–æ–¹æ¡ˆç®€è¿°\n- Webview é¢„åŠ è½½: Webview çš„åˆå§‹åŒ–å…¶å®æŒºè€—æ—¶çš„ã€‚æˆ‘ä»¬æµ‹è¯•è¿‡ï¼Œå¤§æ¦‚åœ¨100~200msä¹‹é—´ï¼Œå› æ­¤å¦‚æœèƒ½å‰ç½®åšå¥½åˆå§‹åŒ–äºå†…å­˜ä¸­ï¼Œä¼šå¤§å¤§åŠ å¿«æ¸²æŸ“é€Ÿåº¦ã€‚\n- æ›´æ–°æœºåˆ¶: ä½¿ç”¨ç¦»çº¿åŒ…çš„æ—¶å€™ï¼Œä¾¿ä¼šæ¶‰åŠåˆ°æœ¬åœ°ç¦»çº¿ä»£ç çš„æ›´æ–°é—®é¢˜ï¼Œå› æ­¤éœ€è¦å»ºç«‹ä¸€å¥—äº‘ç«¯ä¸‹å‘åŒ…çš„æœºåˆ¶ï¼Œç”±å®¢æˆ·ç«¯ä¸‹è½½äº‘ç«¯æœ€æ–°ä»£ç åŒ… (zipåŒ…)ï¼Œå¹¶è§£å‹æ›¿æ¢æœ¬åœ°ä»£ç ã€‚\n  - å¢é‡æ›´æ–°: ç”±äºä¸‹å‘åŒ…æ˜¯ä¸€ä¸ªä¸‹è½½çš„è¿‡ç¨‹ï¼Œå› æ­¤åŒ…çš„ä½“ç§¯è¶Šå°ï¼Œä¸‹è½½é€Ÿåº¦è¶Šå¿«ï¼Œæµé‡æŸè€—è¶Šä½ã€‚åªæ‰“åŒ…æ”¹å˜çš„æ–‡ä»¶ï¼Œå®¢æˆ·ç«¯ä¸‹è½½åè¦†ç›–å¼æ›¿æ¢ï¼Œèƒ½å¤§å¤§å‡å°æ¯æ¬¡æ›´æ–°åŒ…çš„ä½“ç§¯ã€‚   \n  - æ¡ä»¶åˆ†å‘: äº‘å¹³å°ä¸‹å‘æ›´æ–°åŒ…æ—¶ï¼Œå¯ä»¥é…åˆå®¢æˆ·ç«¯è®¾ç½®ä¸€ç³»åˆ—çš„æ¡ä»¶ä¸è§„åˆ™ï¼Œä»è€Œå®ç°ä»£ç çš„æ¡ä»¶æ›´æ–°:\n      - å• åœ°åŒº æ›´æ–°: ä¾‹å¦‚ä¸€ä¸ªåªæœ‰ä¸­å›½åœ°åŒºæ‰èƒ½æ›´æ–°çš„ç‰ˆæœ¬ï¼›\n      - æŒ‰ è¯­è¨€ æ›´æ–°: ä¾‹å¦‚åªæœ‰ä¸­æ–‡ç‰ˆæœ¬ä¼šæ›´æ–°ï¼›\n      - æŒ‰ App ç‰ˆæœ¬ æ›´æ–°: ä¾‹å¦‚åªæœ‰æœ€æ–°ç‰ˆæœ¬çš„ App æ‰ä¼šæ›´æ–°ï¼›\n      - ç°åº¦ æ›´æ–°: åªæœ‰å°æ¯”ä¾‹ç”¨æˆ·ä¼šæ›´æ–°ï¼›\n      - ABæµ‹è¯•: åªæœ‰å‘½ä¸­çš„ç”¨æˆ·ä¼šæ›´æ–°ï¼›\n- é™çº§æœºåˆ¶: å½“ç”¨æˆ·ä¸‹è½½æˆ–è§£å‹ä»£ç åŒ…å¤±è´¥æ—¶ï¼Œéœ€è¦æœ‰å¥—é™çº§æ–¹æ¡ˆï¼Œé€šå¸¸æœ‰ä¸¤ç§åšæ³•:\n\n  - æœ¬åœ°å†…ç½®: éšç€ App æ‰“åŒ…æ—¶å†…ç½®ä¸€ä»½çº¿ä¸Šæœ€æ–°å®Œæ•´ä»£ç åŒ…ï¼Œä¿è¯æœ¬åœ°ä»£ç æ–‡ä»¶çš„å­˜åœ¨ï¼Œèµ„æºåŠ è½½å‡ä½¿ç”¨æœ¬åœ°åŒ–è·¯å¾„ï¼›\n  - åŸŸåæ‹¦æˆª: èµ„æºåŠ è½½ä½¿ç”¨çº¿ä¸ŠåŸŸåï¼Œé€šè¿‡æ‹¦æˆªåŸŸåæ˜ å°„åˆ°æœ¬åœ°è·¯å¾„ã€‚å½“æœ¬åœ°ä¸å­˜åœ¨æ—¶ï¼Œåˆ™è¯·æ±‚çº¿ä¸Šæ–‡ä»¶ï¼Œå½“å­˜åœ¨æ—¶ï¼Œç›´æ¥åŠ è½½ï¼›\n\n- è·¨å¹³å°éƒ¨ç½²: Bridgeå±‚ å¯ä»¥åšä¸€å¥—æµè§ˆå™¨é€‚é…ï¼Œåœ¨ä¸€äº›æ— æ³•é€‚é…çš„åŠŸèƒ½ï¼Œåšå¥½é™çº§å¤„ç†ï¼Œä»è€Œä¿è¯ä»£ç åœ¨ä»»ä½•ç¯å¢ƒçš„å¯ç”¨æ€§ï¼Œä¸€å¥—ä»£ç å¯åŒæ—¶è¿è¡Œäº Appå†… ä¸ æ™®é€šæµè§ˆå™¨ï¼›\n-ç¯å¢ƒç³»ç»Ÿ: ä¸å®¢æˆ·ç«¯è¿›è¡Œç»Ÿä¸€é…åˆï¼Œæ­å»ºå‡º æ­£å¼ / é¢„ä¸Šçº¿ / æµ‹è¯• / å¼€å‘ç¯å¢ƒï¼Œèƒ½å¤§å¤§æé«˜é¡¹ç›®ç¨³å®šæ€§ä¸é—®é¢˜æ’æŸ¥ï¼›\n- å¼€å‘æ¨¡å¼:\n  - èƒ½è¿æ¥PC Chrome/safari è¿›è¡Œä»£ç è°ƒè¯•ï¼›\n  - å…·æœ‰å¼€å‘è°ƒè¯•å…¥å£ï¼Œå¯ä»¥ä½¿ç”¨åŒæ ·çš„ Webview åŠ è½½å¼€å‘æ—¶çš„æœ¬åœ°ä»£ç ï¼›\n  - å…·å¤‡æ—¥å¿—ç³»ç»Ÿï¼Œå¯ä»¥æŸ¥çœ‹ Log ä¿¡æ¯ï¼›\n","tags":["è§£å†³æ–¹æ¡ˆ"],"categories":["å·¥å…·"]},{"title":"å¦‚ä½•åœ¨ create-react-app ä¸­ä½¿ç”¨ CSS Modules","url":"%2F2020%2F%E5%A6%82%E4%BD%95%E5%9C%A8%20create-react-app%20%E4%B8%AD%E4%BD%BF%E7%94%A8%20CSS%20Modules.html","content":"\nå…ˆç®€å•äº†è§£ä¸‹ä»€ä¹ˆæ˜¯ [CSS Modules](https://github.com/css-modules/css-modules)\n\n> A CSS Module is a CSS file in which all class names and animation names are scoped locally by default\n\nç®€å•ç‚¹è¯´ CSS Module æ˜¯å…·æœ‰å±€éƒ¨ä½œç”¨åŸŸçš„ css æ–‡ä»¶ã€‚æ—¢ç„¶æåˆ°äº†å±€éƒ¨ä½œç”¨åŸŸï¼Œé‚£ä¹ˆè‚¯å®šæœ‰å…¨å±€ä½œç”¨åŸŸï¼Œåœ¨ create-react-app ä¸­ï¼Œæˆ‘ä»¬å¼•å…¥ css æ–‡ä»¶é€šå¸¸ä¸ºä»¥ä¸‹å½¢å¼ï¼š\n\n```css\n/* index.css */\n.color {\n  color: red;\n}\n```\n\n```js\n/* index.tsx */\nimport React, { Component } from 'react'\nimport './index.css'\n\nexport default class Index extends Component {\n  // ...\n}\n```\n\n---\n<!--more-->\n\n## å…¨å±€æ±¡æŸ“å’Œé”™è¯¯è¦†ç›–\n\nè¿™ç§å¼•å…¥æ–¹æ³•å°±ä¼šå‡ºç°å…¨å±€æ±¡æŸ“çš„é—®é¢˜ï¼ŒCSS ä½¿ç”¨å…¨å±€é€‰æ‹©å™¨æœºåˆ¶æ¥è®¾ç½®æ ·å¼ï¼Œä¼˜ç‚¹æ˜¯æ–¹ä¾¿é‡å†™æ ·å¼ï¼Œç¼ºç‚¹æ˜¯æ‰€æœ‰çš„æ ·å¼éƒ½æ˜¯å…¨å±€ç”Ÿæ•ˆï¼Œæ ·å¼å¯èƒ½è¢«é”™è¯¯è¦†ç›–ã€‚å‡å®šä¸€ä¸ªé¡µé¢æœ‰ä»¥ä¸‹ä¸¤ä¸ªç»„ä»¶ï¼š\n\n- <Header />ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n```js\nimport React, { Component } from 'react'\nimport './header.css'\n\nexport default class Index extends Component {\n  // ...\n  render() {\n    return <div className=\"color\">Header color</div>\n  }\n}\n```\n\n- header.css\n```css\n.color {\n  color: red;\n}\n```\n\n- <Content />, å†…å®¹å¦‚ä¸‹ï¼š\n```js\nimport React, { Component } from 'react'\nimport './content.css'\n\nexport default class Index extends Component {\n  // ...\n  render() {\n    return <div className=\"color\">Content color</div>\n  }\n}\n```\n\n- content.css\n```css\n.color {\n  color: green;\n}\n```\n\næˆ‘ä»¬æœŸå¾…åœ¨é¡µé¢ä¸Š Header color çš„å­—çš„é¢œè‰²ä¸º redï¼ŒContent color ä¸º greenï¼Œä½†å®é™…ä¸Šæ˜¯ä¸¤ä¸ªéƒ½ä¸º greenï¼Œè¿™å°±æ˜¯å› ä¸ºæˆ‘ä»¬ç›´æ¥å¼•å…¥ header.css å’Œ content.css åï¼Œæ ·å¼æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œè€Œç›¸åŒçš„æ ·å¼åˆå¯èƒ½å‡ºç°é”™è¯¯åœ°è¦†ç›–ï¼Œå› æ­¤å°±å‡ºç°äº†ä¸Šé¢çš„æƒ…å†µã€‚\n\né¿å…è¿™ç§æƒ…å†µåœ¨ create-react-app çš„æ–¹æ³•å°±æ˜¯ä½¿ç”¨ CSS Modulesï¼Œä½¿ç”¨æ–¹æ³•å°±æ˜¯å°†å¯¹åº”çš„ css æ–‡ä»¶åç§°å‘½åä¸º [name].module.css çš„å½¢å¼ï¼ˆä½¿ç”¨ less æˆ–è€… sass ç±»ä¼¼ï¼‰ï¼Œä»¥ Header ç»„ä»¶ä¸ºä¾‹ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š\n```css\n/* header.module.css */\n.color {\n  color: red;\n}\n```\n\n```js\nimport React, { Component } from 'react'\nimport headerStyle from './header.module.css'\n\nexport default class Index extends Component {\n  // ...\n  render() {\n    return <div className={headerStyle.color}>Header color</div>\n  }\n}\n```\n\nè¿™æ · Header color çš„é¢œè‰²å°±ä¼šä¸º redã€‚\n\nå®ƒçš„å®ç°è¿‡ç¨‹å°±æ˜¯åˆ©ç”¨ Webpack çš„ css-loader ç”Ÿæˆï¼ˆåŸºæœ¬ï¼‰å”¯ä¸€çš„ class åç§°ï¼Œåœ¨ create-react-app ä¸­ä¼šä»¥ [filename]_[classname]__[hash] çš„å‘½åè§„åˆ™æ¥ç”Ÿæˆ class åç§°ï¼Œä¾‹å¦‚ Header ç»„ä»¶ç”Ÿæˆåçš„ html å¦‚ä¸‹ï¼š\n```html\n<div class=\"header_color__2Oqjl\">Header color</div>\n```\n\nä½¿ç”¨äº† CSS Modules åï¼Œå°±ç›¸å½“äºç»™æ¯ä¸ª class åå¤–åŠ åŠ äº†ä¸€ä¸ª :localï¼Œä»¥æ­¤æ¥å®ç°æ ·å¼çš„å±€éƒ¨åŒ–ï¼Œå¦‚æœä½ æƒ³åˆ‡æ¢åˆ°å…¨å±€æ¨¡å¼ï¼Œä½¿ç”¨å¯¹åº”çš„ :globalã€‚:local ä¸ :global çš„åŒºåˆ«æ˜¯ CSS Modules åªä¼šå¯¹ :local å—çš„ class æ ·å¼åšè§„åˆ™å¤„ç†ï¼Œ:global çš„æ ·å¼ç¼–è¯‘åä¸å˜ã€‚\n\n```css\n.color {\n  color: red\n}\n\n/* ä»¥ä¸Šä¸ä¸‹é¢ç­‰ä»· */\n:local(.color) {\n  color: red; \n}\n\n/* å®šä¹‰å…¨å±€æ ·å¼ */\n:global(.global-bg) {\n  background-color: red;\n}\n```\n\n## composeså¤„ç†å¤ç”¨\nåœ¨å¼€å‘ä¸­ä¼šé‡åˆ°æ ·å¼çš„å¤ç”¨é—®é¢˜ï¼ŒCSS Modules åªæä¾›äº†å”¯ä¸€çš„æ–¹å¼æ¥å¤„ç†ï¼š`composes` ç»„åˆ:\n\n```css\n/* åŸºç¡€æ ·å¼ */\n.base {\n  font-size: 20px;\n  color: #82D7F7\n}\n\n.active {\n  composes: base;\n  /* ç»„åˆå¤–éƒ¨æ–‡ä»¶ */\n  composes: bold from './content.module.css';\n  /* active å…¶ä»–æ ·å¼ */\n  text-decoration: underline;\n}\n```\n\nåœ¨ active ä¸­ composes baseï¼Œç¼–è¯‘åä¼š active ä¼šå˜æˆä¸‰ä¸ª class\n```html\n<div class=\"composes-demo_active__27azZ composes-demo_base__MLJCB content_bold__vgYTg\">active</div>\n```\n\n## æ€»ç»“\nåœ¨ create-react-app ä¸­ä½¿ç”¨ CSS Modules ä¼šé¢‘ç¹çš„è¾“å…¥ styles.**ï¼Œå¯ä»¥ä½¿ç”¨ [react-css-modules](https://github.com/gajus/react-css-modules)æ¥é¿å…è¿™ç‚¹ï¼Œå®ƒé€šè¿‡é«˜é˜¶å‡½æ•°çš„å½¢å¼æ¥é¿å…é‡å¤è¾“å…¥ styles.**ã€‚\n\næ —å­â†“\n```js\nimport React from 'react';\nimport CSSModules from 'react-css-modules';\nimport styles from './table.css';\n\nclass Table extends React.Component {\n    render () {\n        return <div styleName='table'>\n            <div styleName='row'>\n                <div styleName='cell'>A0</div>\n                <div styleName='cell'>B0</div>\n            </div>\n        </div>;\n    }\n}\nexport default CSSModules(Table, styles);\n```\n\næœ‰å…´è¶£çš„åŒå­¦å¯ä»¥å‚è€ƒæ¨¡æ‹Ÿä¸‹`react-css-modules`çš„å®ç°ã€‚\n\næ€»çš„æ¥è¯´åœ¨ create-react-app ä¸­ä½¿ç”¨ CSS Modules è¿˜æ˜¯æ¯”è¾ƒå®¹æ˜“ï¼Œå¦‚æœè¿˜æ²¡æœ‰åœ¨é¡¹ç›®ä¸­å°è¯•çš„è¯éå¸¸å€¼å¾—å»ä½¿ç”¨ CSS ModulesğŸ‘ğŸ‘ğŸ‘ã€‚\n","tags":["æ€§èƒ½ä¼˜åŒ–"],"categories":["JS"]},{"title":"TypeScript ä¸­ï¼Œinterface å’Œ type çš„åŒºåˆ«","url":"%2F2020%2FTypeScript%20%E4%B8%AD%EF%BC%8Cinterface%20%E5%92%8C%20type%20%E7%9A%84%E5%8C%BA%E5%88%AB.html","content":"\nåœ¨ `TypeScript` ä¸­ï¼Œ`interface` å’Œ `type` ä¸»è¦ç”¨äºç±»å‹çš„å£°æ˜ï¼Œå®ƒä»¬çš„ç›¸åŒç‚¹ä»¥åŠåŒºåˆ«å¦‚ä¸‹ï¼š\n\n---\n<!--more-->\n\n## ç›¸åŒç‚¹\n\n### éƒ½å¯ä»¥æè¿°ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°\n```js\n/* interface */\ninterface User {\n  name: string\n  age: number\n}\n\ninterface SetUser {\n  (name: string, age: number): string\n}\n```\n\n```js\n/* type */\ntype User = {\n  name: string\n  age: number\n}\n\ntype SetUser = {\n  (name: string, age: number): string\n}\n```\n\n### éƒ½å¯ä»¥è¿›è¡Œæ‹“å±•\n```js\n/* interface */\ninterface User {\n  name: string\n  age: number\n}\n\ninterface ProUser extends User {\n  email: string\n}\n\ntype VipUserType = {\n  readonly vip: boolean\n}\n\n/* interface å’Œ type æ‹“å±•*/\ninterface VipUserInterfce extends VipUserType {\n  member: boolean\n}\n```\n\n```js\n/* type */\ntype User = {\n  name: string\n  age: number\n}\n\ntype ProUser = User & {\n  email: string\n}\n\ninterface VipUserInterface {\n  readonly vip: boolean\n}\n\n/* type ä¸ interface æ‹“å±• */\ntype VipUserType = VipUserInterface & {\n  member: boolean\n}\n```\n\n## åŒºåˆ«\n\n### type å¯ä»¥å£°æ˜åŸºæœ¬ç±»å‹åˆ«åï¼Œè”åˆç±»å‹ï¼Œå…ƒç»„ç±»å‹ï¼Œè€Œ interface ä¸å¯ä»¥\n```js\n/* åŸºæœ¬ç±»å‹ */\ntype Name = string\n\n/* è”åˆç±»å‹ */\ninterface Dog {}\ninterface Cat {}\n\ntype Pet = Dog | Cat\n\n/* å…ƒç»„ç±»å‹ */\ntype PetList = [Dog, Cat]\n```\n\n### interface å¯ä»¥è¿›è¡Œç±»å‹åˆå¹¶ï¼Œè€Œ type ä¸å¯ä»¥\n```js\ninterface Cloner {\n  clone(animal: Animal): Animal\n}\n\ninterface Cloner {\n  clone(animal: Sheep): Sheep\n}\n\ninterface Cloner {\n  clone(animal: Dog): Dog\n  clone(animal: Cat): Cat\n}\n\n// ä»¥ä¸Šä¸‰ä¸ª interface ä¼šè¢«åˆå¹¶æˆä¸€ä¸ªå£°æ˜\ninterface Cloner {\n  clone(animal: Dog): Dog\n  clone(animal: Cat): Cat\n  clone(animal: Sheep): Sheep\n  clone(animal: Animal): Animal\n}\n```\n\n[å…³äº declaration-merging](https://www.typescriptlang.org/docs/handbook/declaration-merging.html)\n","tags":["æ€§èƒ½ä¼˜åŒ–"],"categories":["JS"]},{"title":"å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ ä¼˜åŒ–","url":"%2F2020%2F%E5%A4%A7%E6%96%87%E4%BB%B6%E5%88%86%E7%89%87%E4%B8%8A%E4%BC%A0%E4%BC%98%E5%8C%96.html","content":"\n> åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°åœ¨ç½‘ç«™ä¸Šä¼  100 MB ä»¥ä¸Šçš„æ–‡ä»¶ç»å¸¸å¤±è´¥ï¼Œé‡è¯•ä¹Ÿè¦ç­‰è€åŠå¤©ã€‚é‚£ä¹ˆåº”è¯¥æ€ä¹ˆåšæ‰èƒ½å¿«é€Ÿä¸Šä¼ ï¼Œå°±ç®—å¤±è´¥äº†å†æ¬¡å‘é€ä¹Ÿèƒ½ä»ä¸Šæ¬¡ä¸­æ–­çš„åœ°æ–¹ç»§ç»­ä¸Šä¼ å‘¢ï¼Ÿ\n\n## æ•´ä½“æ€è·¯\nç¬¬ä¸€æ­¥æ˜¯ç»“åˆé¡¹ç›®èƒŒæ™¯ï¼Œè°ƒç ”æ¯”è¾ƒä¼˜åŒ–çš„è§£å†³æ–¹æ¡ˆã€‚\næ–‡ä»¶ä¸Šä¼ å¤±è´¥æ˜¯è€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ï¼Œå¸¸ç”¨æ–¹æ¡ˆæ˜¯å°†ä¸€ä¸ªå¤§æ–‡ä»¶åˆ‡ç‰‡æˆå¤šä¸ªå°æ–‡ä»¶ï¼Œå¹¶è¡Œè¯·æ±‚æ¥å£è¿›è¡Œä¸Šä¼ ï¼Œæ‰€æœ‰è¯·æ±‚å¾—åˆ°å“åº”åï¼Œåœ¨æœåŠ¡å™¨ç«¯åˆå¹¶æ‰€æœ‰çš„åˆ†ç‰‡æ–‡ä»¶ã€‚å½“åˆ†ç‰‡ä¸Šä¼ å¤±è´¥ï¼Œå¯ä»¥åœ¨é‡æ–°ä¸Šä¼ æ—¶è¿›è¡Œåˆ¤æ–­ï¼Œåªä¸Šä¼ ä¸Šæ¬¡å¤±è´¥çš„éƒ¨åˆ†ï¼Œå‡å°‘ç”¨æˆ·çš„ç­‰å¾…æ—¶é—´ï¼Œç¼“è§£æœåŠ¡å™¨å‹åŠ›ã€‚è¿™å°±æ˜¯åˆ†ç‰‡ä¸Šä¼ æ–‡ä»¶ã€‚\n\næµç¨‹å›¾å¦‚ä¸‹ï¼š\n![upload-flow](http://cdn.mydearest.cn/blog/images/upload-flow.png)\n\n---\n<!--more-->\n\n### æ–‡ä»¶ MD5 åŠ å¯†\n- MD5 æ˜¯æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ï¼Œå¯ä»¥åˆ©ç”¨æ–‡ä»¶çš„ MD5 æŸ¥è¯¢æ–‡ä»¶çš„ä¸Šä¼ çŠ¶æ€ã€‚\n\næ ¹æ®æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ã€æ–‡ä»¶åç§°ã€æœ€åä¿®æ”¹æ—¶é—´ç­‰ä¿¡æ¯ï¼Œé€šè¿‡ [spark-md5](https://www.npmjs.com/package/spark-md5) ç”Ÿæˆæ–‡ä»¶çš„ MD5ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¤§è§„æ ¼æ–‡ä»¶éœ€è¦åˆ†ç‰‡è¯»å–æ–‡ä»¶ï¼Œå°†è¯»å–çš„æ–‡ä»¶å†…å®¹æ·»åŠ åˆ° é€šè¿‡ [spark-md5](https://www.npmjs.com/package/spark-md5) çš„ hash è®¡ç®—ä¸­ï¼Œç›´åˆ°æ–‡ä»¶è¯»å–å®Œæ¯•ï¼Œæœ€åè¿”å›æœ€ç»ˆçš„ hash ç åˆ° callback å›è°ƒå‡½æ•°é‡Œé¢ã€‚è¿™é‡Œå¯ä»¥æ ¹æ®éœ€è¦æ·»åŠ æ–‡ä»¶è¯»å–çš„è¿›åº¦æ¡ã€‚\n\n```js\nfunction md5File(file) {\n    return new Promise((resolve, reject) => {\n        var blobSlice =\n            File.prototype.slice ||\n            File.prototype.mozSlice ||\n            File.prototype.webkitSlice,\n        chunkSize = file.size / 100, // åˆ†æˆ100ä»½\n        chunks = 100,\n        currentChunk = 0,\n        spark = new SparkMD5.ArrayBuffer(),\n        fileReader = new FileReader();\n\n        fileReader.onload = function (e) {\n        console.log(\"read chunk nr\", currentChunk + 1, \"of\", chunks);\n        spark.append(e.target.result); // Append array buffer\n        currentChunk++;\n\n        if (currentChunk < chunks) {\n            loadNext();\n        } else {\n            let cur = +new Date();\n            console.log(\"finished loading\");\n            // alert(spark.end() + '---' + (cur - pre)); // Compute hash\n            let result = spark.end();\n            resolve(result);\n        }\n        };\n\n        fileReader.onerror = function () {\n        console.warn(\"oops, something went wrong.\");\n        };\n\n        function loadNext() {\n        var start = currentChunk * chunkSize,\n            end =\n            start + chunkSize >= file.size ? file.size : start + chunkSize;\n\n        fileReader.readAsArrayBuffer(blobSlice.call(file, start, end));\n        $(\"#checkProcessStyle\").css({\n            width: currentChunk + 1 + \"%\",\n        });\n        $(\"#checkProcessValue\").html(currentChunk + 1 + \"%\");\n        }\n\n        loadNext();\n    });\n}\n```\n\n### æŸ¥è¯¢æ–‡ä»¶çŠ¶æ€\nå‰ç«¯å¾—åˆ°æ–‡ä»¶çš„ MD5 åï¼Œä»åå°æŸ¥è¯¢æ˜¯å¦å­˜åœ¨åç§°ä¸º MD5 çš„æ–‡ä»¶å¤¹ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ—å‡ºæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶ï¼Œå¾—åˆ°å·²ä¸Šä¼ çš„åˆ‡ç‰‡åˆ—è¡¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™å·²ä¸Šä¼ çš„åˆ‡ç‰‡åˆ—è¡¨ä¸ºç©ºã€‚\n\n```js\n// æ ¡éªŒæ–‡ä»¶çš„MD5\ncheckFileMD5 (file, fileName, fileMd5Value, onError) {\n  const fileSize = file.size\n  const { chunkSize, uploadProgress } = this\n  this.chunks = Math.ceil(fileSize / chunkSize)\n  return new Promise(async (resolve, reject) => {\n    const params = {\n      fileName: fileName,\n      fileMd5Value: fileMd5Value,\n    }\n    const { ok, data } = await services.checkFile(params)\n    if (ok) {\n      this.hasUploaded = data.chunkList.length\n      uploadProgress(file)\n      resolve(data)\n    } else {\n      reject(ok)\n      onError()\n    }\n  })\n}\n```\n\n### æ–‡ä»¶åˆ†ç‰‡\næ–‡ä»¶ä¸Šä¼ ä¼˜åŒ–çš„æ ¸å¿ƒå°±æ˜¯æ–‡ä»¶åˆ†ç‰‡ï¼ŒBlob å¯¹è±¡ä¸­çš„ slice æ–¹æ³•å¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œåˆ‡å‰²ï¼ŒFile å¯¹è±¡æ˜¯ç»§æ‰¿ Blob å¯¹è±¡çš„ï¼Œå› æ­¤ File å¯¹è±¡ä¹Ÿæœ‰ slice æ–¹æ³•ã€‚\nå®šä¹‰æ¯ä¸€ä¸ªåˆ†ç‰‡æ–‡ä»¶çš„å¤§å°å˜é‡ä¸º chunkSizeï¼Œé€šè¿‡æ–‡ä»¶å¤§å° FileSize å’Œåˆ†ç‰‡å¤§å° chunkSize å¾—åˆ°åˆ†ç‰‡æ•°é‡ chunksï¼Œä½¿ç”¨ for å¾ªç¯å’Œ file.slice() æ–¹æ³•å¯¹æ–‡ä»¶è¿›è¡Œåˆ†ç‰‡ï¼Œåºå·ä¸º 0 - nï¼Œå’Œå·²ä¸Šä¼ çš„åˆ‡ç‰‡åˆ—è¡¨åšæ¯”å¯¹ï¼Œå¾—åˆ°æ‰€æœ‰æœªä¸Šä¼ çš„åˆ†ç‰‡ï¼Œpush åˆ°è¯·æ±‚åˆ—è¡¨ requestListã€‚\n\n![chunk](http://cdn.mydearest.cn/blog/images/chunk.png)\n\n```js\nasync checkAndUploadChunk (file, fileMd5Value, chunkList) {\n  let { chunks, upload } = this\n  const requestList = []\n  for (let i = 0; i < chunks; i++) {\n    let exit = chunkList.indexOf(i + '') > -1\n    // å¦‚æœå·²ç»å­˜åœ¨, åˆ™ä¸ç”¨å†ä¸Šä¼ å½“å‰å—\n    if (!exit) {\n      requestList.push(upload(i, fileMd5Value, file))\n    }\n  }\n  console.log({ requestList })\n  const result =\n    requestList.length > 0\n      ? await Promise.all(requestList)\n        .then(result => {\n          console.log({ result })\n          return result.every(i => i.ok)\n        })\n        .catch(err => {\n          return err\n        })\n      : true\n  console.log({ result })\n  return result === true\n}\n```\n\n### ä¸Šä¼ åˆ†ç‰‡\nè°ƒç”¨ `Promise.all` å¹¶å‘ä¸Šä¼ æ‰€æœ‰çš„åˆ‡ç‰‡ï¼Œå°†åˆ‡ç‰‡åºå·ã€åˆ‡ç‰‡æ–‡ä»¶ã€æ–‡ä»¶ `MD5` ä¼ ç»™åå°ã€‚\nåå°æ¥æ”¶åˆ°ä¸Šä¼ è¯·æ±‚åï¼Œé¦–å…ˆæŸ¥çœ‹åç§°ä¸ºæ–‡ä»¶ MD5 çš„æ–‡ä»¶å¤¹æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œç„¶åé€šè¿‡ `fs-extra` çš„ rename æ–¹æ³•ï¼Œå°†åˆ‡ç‰‡ä»ä¸´æ—¶è·¯å¾„ç§»åŠ¨åˆ‡ç‰‡æ–‡ä»¶å¤¹ä¸­ï¼Œç»“æœå¦‚ä¸‹ï¼š\n\n![file-chunk](http://cdn.mydearest.cn/blog/images/file-chunk.png)\n\nå½“å…¨éƒ¨åˆ†ç‰‡ä¸Šä¼ æˆåŠŸï¼Œé€šçŸ¥æœåŠ¡ç«¯è¿›è¡Œåˆå¹¶ï¼Œå½“æœ‰ä¸€ä¸ªåˆ†ç‰‡ä¸Šä¼ å¤±è´¥æ—¶ï¼Œæç¤ºâ€œä¸Šä¼ å¤±è´¥â€ã€‚åœ¨é‡æ–°ä¸Šä¼ æ—¶ï¼Œé€šè¿‡æ–‡ä»¶ MD5 å¾—åˆ°æ–‡ä»¶çš„ä¸Šä¼ çŠ¶æ€ï¼Œå½“æœåŠ¡å™¨å·²ç»æœ‰è¯¥ MD5 å¯¹åº”çš„åˆ‡ç‰‡æ—¶ï¼Œä»£è¡¨è¯¥åˆ‡ç‰‡å·²ç»ä¸Šä¼ è¿‡ï¼Œæ— éœ€å†æ¬¡ä¸Šä¼ ï¼Œå½“æœåŠ¡å™¨æ‰¾ä¸åˆ°è¯¥ MD5 å¯¹åº”çš„åˆ‡ç‰‡æ—¶ï¼Œä»£è¡¨è¯¥åˆ‡ç‰‡éœ€è¦ä¸Šä¼ ï¼Œç”¨æˆ·åªéœ€ä¸Šä¼ è¿™éƒ¨åˆ†åˆ‡ç‰‡ï¼Œå°±å¯ä»¥å®Œæ•´ä¸Šä¼ æ•´ä¸ªæ–‡ä»¶ï¼Œè¿™å°±æ˜¯æ–‡ä»¶çš„æ–­ç‚¹ç»­ä¼ ã€‚\n\n```js\n// ä¸Šä¼ chunk\nupload (i, fileMd5Value, file) {\n  const { uploadProgress, chunks } = this\n  return new Promise((resolve, reject) => {\n    let { chunkSize } = this\n    // æ„é€ ä¸€ä¸ªè¡¨å•ï¼ŒFormDataæ˜¯HTML5æ–°å¢çš„\n    let end =\n      (i + 1) * chunkSize >= file.size ? file.size : (i + 1) * chunkSize\n    let form = new FormData()\n    form.append('data', file.slice(i * chunkSize, end)) // fileå¯¹è±¡çš„sliceæ–¹æ³•ç”¨äºåˆ‡å‡ºæ–‡ä»¶çš„ä¸€éƒ¨åˆ†\n    form.append('total', chunks) // æ€»ç‰‡æ•°\n    form.append('index', i) // å½“å‰æ˜¯ç¬¬å‡ ç‰‡\n    form.append('fileMd5Value', fileMd5Value)\n    services\n      .uploadLarge(form)\n      .then(data => {\n        if (data.ok) {\n          this.hasUploaded++\n          uploadProgress(file)\n        }\n        console.log({ data })\n        resolve(data)\n      })\n      .catch(err => {\n        reject(err)\n      })\n  })\n}\n```\n### ä¸Šä¼ è¿›åº¦\nè™½ç„¶åˆ†ç‰‡æ‰¹é‡ä¸Šä¼ æ¯”å¤§æ–‡ä»¶å•æ¬¡ä¸Šä¼ ä¼šå¿«å¾ˆå¤šï¼Œä¹Ÿè¿˜æ˜¯æœ‰ä¸€æ®µåŠ è½½æ—¶é—´ï¼Œè¿™æ—¶åº”è¯¥åŠ ä¸Šä¸Šä¼ è¿›åº¦çš„æç¤ºï¼Œå®æ—¶æ˜¾ç¤ºæ–‡ä»¶ä¸Šä¼ è¿›åº¦ã€‚\nåŸç”Ÿ Javascript çš„ XMLHttpRequest æœ‰æä¾› progress äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶ä¼šè¿”å›æ–‡ä»¶å·²ä¸Šä¼ çš„å¤§å°å’Œæ€»å¤§å°ã€‚é¡¹ç›®ä½¿ç”¨ [axios](https://www.kancloud.cn/yunye/axios/234845) å¯¹ ajax è¿›è¡Œå°è£…ï¼Œå¯ä»¥åœ¨ config ä¸­å¢åŠ  `onUploadProgress` æ–¹æ³•ï¼Œç›‘å¬æ–‡ä»¶ä¸Šä¼ è¿›åº¦ã€‚\n\n```js\nconst config = {\n  onUploadProgress: progressEvent => {\n    var complete = (progressEvent.loaded / progressEvent.total * 100 | 0) + '%'\n  }\n}\nservices.uploadChunk(form, config)\n```\n\n### åˆå¹¶åˆ†ç‰‡\nä¸Šä¼ å®Œæ‰€æœ‰æ–‡ä»¶åˆ†ç‰‡åï¼Œå‰ç«¯ä¸»åŠ¨é€šçŸ¥æœåŠ¡ç«¯è¿›è¡Œåˆå¹¶ï¼ŒæœåŠ¡ç«¯æ¥å—åˆ°è¿™ä¸ªè¯·æ±‚æ—¶ä¸»åŠ¨åˆå¹¶åˆ‡ç‰‡ï¼Œé€šè¿‡æ–‡ä»¶ MD5 åœ¨æœåŠ¡å™¨çš„æ–‡ä»¶ä¸Šä¼ è·¯å¾„ä¸­æ‰¾åˆ°åŒåæ–‡ä»¶å¤¹ã€‚ä»ä¸Šæ–‡å¯çŸ¥ï¼Œæ–‡ä»¶åˆ†ç‰‡æ˜¯æŒ‰ç…§åˆ†ç‰‡åºå·å‘½åçš„ï¼Œè€Œåˆ†ç‰‡ä¸Šä¼ æ¥å£æ˜¯å¼‚æ­¥çš„ï¼Œæ— æ³•ä¿è¯æœåŠ¡å™¨æ¥æ”¶åˆ°çš„åˆ‡ç‰‡æ˜¯æŒ‰ç…§è¯·æ±‚é¡ºåºæ‹¼æ¥ã€‚æ‰€ä»¥åº”è¯¥åœ¨åˆå¹¶æ–‡ä»¶å¤¹é‡Œçš„åˆ†ç‰‡æ–‡ä»¶å‰ï¼Œæ ¹æ®æ–‡ä»¶åè¿›è¡Œæ’åºï¼Œç„¶åå†é€šè¿‡ `concat-files` åˆå¹¶åˆ†ç‰‡æ–‡ä»¶ï¼Œå¾—åˆ°ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ã€‚è‡³æ­¤å¤§æ–‡ä»¶ä¸Šä¼ å°±å®Œæˆäº†ã€‚\n\n![file-merge](http://cdn.mydearest.cn/blog/images/file-merge.png)\n\n```js\n// node\n// åˆå¹¶æ–‡ä»¶\nexports.merge = {\n  validate: {\n    query: {\n      fileName: Joi.string()\n        .trim()\n        .required()\n        .description('æ–‡ä»¶åç§°'),\n      md5: Joi.string()\n        .trim()\n        .required()\n        .description('æ–‡ä»¶md5'),\n      size: Joi.string()\n        .trim()\n        .required()\n        .description('æ–‡ä»¶å¤§å°'),\n    },\n  },\n  permission: {\n    roles: ['user'],\n  },\n  async handler (ctx) {\n    const { fileName, md5, size } = ctx.request.query\n    let { name, base: filename, ext } = path.parse(fileName)\n    const newFileName = randomFilename(name, ext)\n    await mergeFiles(path.join(uploadDir, md5), uploadDir, newFileName, size)\n      .then(async () => {\n        const file = {\n          key: newFileName,\n          name: filename,\n          mime_type: mime.getType(`${uploadDir}/${newFileName}`),\n          ext,\n          path: `${uploadDir}/${newFileName}`,\n          provider: 'oss',\n          size,\n          owner: ctx.state.user.id,\n        }\n        const key = encodeURIComponent(file.key)\n          .replace(/%/g, '')\n          .slice(-100)\n        file.url = await uploadLocalFileToOss(file.path, key)\n        file.url = getFileUrl(file)\n        const f = await File.create(omit(file, 'path'))\n        const files = []\n        files.push(f)\n        ctx.body = invokeMap(files, 'toJSON')\n      })\n      .catch(() => {\n        throw Boom.badData('å¤§æ–‡ä»¶åˆ†ç‰‡åˆå¹¶å¤±è´¥ï¼Œè¯·ç¨å€™é‡è¯•~')\n      })\n  },\n}\n```\n\n\n## ä»“åº“ä»£ç \n[nodeFileUploadDemo](https://github.com/cosyer/nodeFileUploadDemo)\n\n## æ€»ç»“\næœ¬æ–‡è®²è¿°äº†å¤§è§„æ ¼æ–‡ä»¶ä¸Šä¼ ä¼˜åŒ–çš„ä¸€äº›åšæ³•ï¼Œæ€»ç»“ä¸ºä»¥ä¸‹ 4 ç‚¹ï¼š\n\n1. `Blob.slice` å°†æ–‡ä»¶åˆ‡ç‰‡ï¼Œå¹¶å‘ä¸Šä¼ å¤šä¸ªåˆ‡ç‰‡ï¼Œæ‰€æœ‰åˆ‡ç‰‡ä¸Šä¼ åå‘ŠçŸ¥æœåŠ¡å™¨åˆå¹¶ï¼Œå®ç°å¤§æ–‡ä»¶åˆ†ç‰‡ä¸Šä¼ ï¼›\n2. åŸç”Ÿ XMLHttpRequest çš„ `onprogress` å¯¹åˆ‡ç‰‡ä¸Šä¼ è¿›åº¦çš„ç›‘å¬ï¼Œå®æ—¶è·å–æ–‡ä»¶ä¸Šä¼ è¿›åº¦ï¼›\n3. `spark-md5 `æ ¹æ®æ–‡ä»¶å†…å®¹ç®—å‡ºæ–‡ä»¶ MD5ï¼Œå¾—åˆ°æ–‡ä»¶å”¯ä¸€æ ‡è¯†ï¼Œä¸æ–‡ä»¶ä¸Šä¼ çŠ¶æ€ç»‘å®šï¼›\n4. åˆ†ç‰‡ä¸Šä¼ å‰é€šè¿‡æ–‡ä»¶ MD5 æŸ¥è¯¢å·²ä¸Šä¼ åˆ‡ç‰‡åˆ—è¡¨ï¼Œä¸Šä¼ æ—¶åªä¸Šä¼ æœªä¸Šä¼ è¿‡çš„åˆ‡ç‰‡ï¼Œå®ç°æ–­ç‚¹ç»­ä¼ ã€‚\n","tags":["æ€§èƒ½ä¼˜åŒ–"],"categories":["Node"]},{"title":"30åˆ†é’Ÿç²¾é€šReact Hooks","url":"%2F2020%2F30%E5%88%86%E9%92%9F%E7%B2%BE%E9%80%9AReact%20Hooks.html","content":"\nå®ƒæ¥äº†ï¼Œå®ƒæ¥äº†ï¼Œ16.8ç‰ˆæœ¬`hooks`æˆåŠŸåŠ å…¥(*^â–½^*)\n\nä½ è¿˜åœ¨ä¸ºè¯¥ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶ï¼ˆFunctionï¼‰è¿˜æ˜¯æœ‰çŠ¶æ€ç»„ä»¶ï¼ˆClassï¼‰è€Œçƒ¦æ¼å—ï¼Ÿ\nâ€”â€” æ‹¥æœ‰äº†hooksï¼Œä½ å†ä¹Ÿä¸éœ€è¦å†™Classäº†ï¼Œä½ çš„æ‰€æœ‰ç»„ä»¶éƒ½å°†æ˜¯Functionã€‚\n\nä½ è¿˜åœ¨ä¸ºæä¸æ¸…ä½¿ç”¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°è€Œæ—¥å¤œéš¾çœ å—ï¼Ÿ\nâ€”â€” æ‹¥æœ‰äº†Hooksï¼Œç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°å¯ä»¥å…ˆä¸¢ä¸€è¾¹äº†ã€‚\n\nä½ åœ¨è¿˜åœ¨ä¸ºç»„ä»¶ä¸­çš„thisæŒ‡å‘è€Œæ™•å¤´è½¬å‘å—ï¼Ÿ\nâ€”â€” æ—¢ç„¶Classéƒ½ä¸¢æ‰äº†ï¼Œå“ªé‡Œè¿˜æœ‰thisï¼Ÿä½ çš„äººç”Ÿç¬¬ä¸€æ¬¡ä¸å†éœ€è¦é¢å¯¹thisã€‚\n\n---\n<!--more-->\n\n## Reactä¸ºä»€ä¹ˆè¦æä¸€ä¸ªHooksï¼Ÿ\n***æƒ³è¦å¤ç”¨ä¸€ä¸ªæœ‰çŠ¶æ€çš„ç»„ä»¶å¤ªéº»çƒ¦äº†ï¼***\næˆ‘ä»¬éƒ½çŸ¥é“reactçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼Œå°†ä¸€ä¸ªé¡µé¢æ‹†æˆä¸€å †ç‹¬ç«‹çš„ï¼Œå¯å¤ç”¨çš„ç»„ä»¶ï¼Œå¹¶ä¸”ç”¨è‡ªä¸Šè€Œä¸‹çš„å•å‘æ•°æ®æµçš„å½¢å¼å°†è¿™äº›ç»„ä»¶ä¸²è”èµ·æ¥ã€‚ä½†å‡å¦‚ä½ åœ¨å¤§å‹çš„å·¥ä½œé¡¹ç›®ä¸­ç”¨reactï¼Œä½ ä¼šå‘ç°ä½ çš„é¡¹ç›®ä¸­å®é™…ä¸Šå¾ˆå¤šreactç»„ä»¶å†—é•¿ä¸”éš¾ä»¥å¤ç”¨ã€‚å°¤å…¶æ˜¯é‚£äº›å†™æˆclassçš„ç»„ä»¶ï¼Œå®ƒä»¬æœ¬èº«åŒ…å«äº†çŠ¶æ€ï¼ˆstateï¼‰ï¼Œæ‰€ä»¥å¤ç”¨è¿™ç±»ç»„ä»¶å°±å˜å¾—å¾ˆéº»çƒ¦ã€‚\n\né‚£ä¹‹å‰ï¼Œå®˜æ–¹æ¨èæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼š[æ¸²æŸ“å±æ€§ï¼ˆRender Propsï¼‰](https://reactjs.org/docs/render-props.html)å’Œ[é«˜é˜¶ç»„ä»¶ï¼ˆHigher-Order Componentsï¼‰](https://reactjs.org/docs/higher-order-components.html)ã€‚\n\n### æ¸²æŸ“å±æ€§\næ¸²æŸ“å±æ€§æŒ‡çš„æ˜¯ä½¿ç”¨ä¸€ä¸ªå€¼ä¸ºå‡½æ•°çš„propæ¥ä¼ é€’éœ€è¦åŠ¨æ€æ¸²æŸ“çš„nodesæˆ–ç»„ä»¶ã€‚å¦‚ä¸‹é¢çš„ä»£ç å¯ä»¥çœ‹åˆ°DataProviderç»„ä»¶åŒ…å«äº†æ‰€æœ‰è·ŸçŠ¶æ€ç›¸å…³çš„ä»£ç ï¼Œè€ŒCatç»„ä»¶åˆ™å¯ä»¥æ˜¯ä¸€ä¸ªå•çº¯çš„å±•ç¤ºå‹ç»„ä»¶ï¼Œè¿™æ ·ä¸€æ¥DataProviderå°±å¯ä»¥å•ç‹¬å¤ç”¨äº†ã€‚\n\n```js\nimport Cat from 'components/cat'\nclass DataProvider extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { target: 'Zac' };\n  }\n\n  render() {\n    return (\n      <div>\n        {this.props.render(this.state)}\n      </div>\n    )\n  }\n}\n\n<DataProvider render={data => (\n  <Cat target={data.target} />\n)}/>\n```\nè™½ç„¶è¿™ä¸ªæ¨¡å¼å«Render Propsï¼Œä½†ä¸æ˜¯è¯´éç”¨ä¸€ä¸ªå«renderçš„propsä¸å¯ï¼Œä¹ æƒ¯ä¸Šå¤§å®¶æ›´å¸¸å†™æˆä¸‹é¢è¿™ç§ï¼š\n```js\n<DataProvider>\n  {data => (\n    <Cat target={data.target} />\n  )}\n</DataProvider>\n```\n\n#### å…¶ä»–ğŸŒ°\n```js\nclass GithubProfile extends React.PureComponent<IProps, IStates> {\n  state: IStates = {\n    profile: {}\n  }\n\n  componentDidMount() {\n    fetch('https://api.github.com/users/cosyer')\n      .then(response => {\n        return response.json()\n      })\n      .then(res => {\n        this.setState({\n          profile: res\n        })\n      })\n  }\n  \n  render() {\n    const { profile } = this.state\n    return (\n      <div className=\"profile\">\n        <img src={profile.avatar_url} alt=\"avatar\" width=\"200px\" />\n        <div>name: {profile.name}</div>\n        <div>company: {profile.company}</div>\n        <div>bio: {profile.bio}</div>\n      </div>\n    )\n  }\n}\n```\nå¦‚æœå…¶å®ƒé¡µé¢ä¹Ÿæœ‰ç›¸åŒçš„éœ€æ±‚ï¼Œæˆ–è€…æ•°æ®ä¸€æ ·ï¼Œä»…ä»… UI ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆå¤„ç†ï¼Ÿå…¶å®è¿™ä¸ªé—®é¢˜ç›®çš„å¾ˆç®€å•ï¼Œé‚£å°±æ˜¯ï¼šå¦‚ä½•å®ç°ä»£ç å¤ç”¨ã€‚\n```js\n// Render Props\nclass Profile extends React.Component<IProps, IStates> {\n  constructor(props:IProps) {\n    super(props)\n    this.state = {\n      profile: {}\n    }\n  }\n\n  componentDidMount() {\n    fetch('https://api.github.com/users/cosyer')\n      .then(response => {\n        return response.json()\n      })\n      .then(res => {\n        this.setState({\n          profile: res\n        })\n      })\n  }\n\n  render() {\n    const { profile } = this.state\n    return <React.Fragment>{this.props.children(profile)}</React.Fragment>\n  }\n}\n```\nå®šä¹‰ props æ¸²æŸ“å‡½æ•°ï¼š\n```js\nclass ProfileRenderProps extends React.PureComponent {\n  render() {\n    return (\n      <Profile>\n        {(profile:any) => (\n          <div className=\"profile\">\n            <img src={profile.avatar_url} alt=\"avatar\" width=\"200px\" />\n            <div>name: {profile.name}</div>\n            <div>company: {profile.company}</div>\n            <div>bio: {profile.bio}</div>\n          </div>\n        )}\n      </Profile>\n    )\n  }\n}\n```\n#### ç¼ºç‚¹\n- å›è°ƒåœ°ç‹±\n\n### é«˜é˜¶ç»„ä»¶\nè¯´ç™½äº†å°±æ˜¯ä¸€ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°ï¼Œç»è¿‡ä¸€ç³»åˆ—åŠ å·¥åï¼Œæœ€åè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ã€‚\n\nçœ‹ä¸ªæ —å­\n```js\nconst withUser = WrappedComponent => {\n  const user = sessionStorage.getItem(\"user\");\n  return props => <WrappedComponent user={user} {...props} />;\n};\n\nconst UserPage = props => (\n  <div class=\"user-container\">\n    <p>My name is {props.user}!</p>\n  </div>\n);\n\nexport default withUser(UserPage);\n```\n`withUser`å‡½æ•°å°±æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼Œå®ƒè¿”å›äº†ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶å…·æœ‰äº†å®ƒæä¾›çš„è·å–ç”¨æˆ·ä¿¡æ¯çš„åŠŸèƒ½ã€‚\nä½†æ˜¯è¿™ä¸¤ç§æ¨¡å¼ä¼šå¢åŠ ä»£ç çš„å±‚çº§å…³ç³»ï¼Œè€Œhooksç®€æ´å¤šäº†ï¼Œæ²¡æœ‰å¤šä½™çš„å±‚çº§åµŒå¥—ï¼ŒæŠŠå„ç§æƒ³è¦çš„åŠŸèƒ½å†™æˆä¸€ä¸ªä¸€ä¸ªå¯å¤ç”¨çš„è‡ªå®šä¹‰hookï¼Œå½“ä½ çš„ç»„ä»¶æƒ³ç”¨ä»€ä¹ˆåŠŸèƒ½æ—¶ï¼Œç›´æ¥åœ¨ç»„ä»¶é‡Œè°ƒç”¨è¿™ä¸ªhookå³å¯ã€‚\n\n```js\n// withGithubProfile\nconst withGithubProfile = (WrappedComponent:any) => {\n  return class extends React.Component<IProps, IStates> {\n    constructor(props:IProps) {\n      super(props)\n      this.state = {\n        profile: {}\n      }\n    }\n    \n    componentDidMount() {\n      fetch('https://api.github.com/users/cosyer')\n        .then(response => {\n          return response.json()\n        })\n        .then(res => {\n          this.setState({\n            profile: res\n          })\n        })\n    }\n    \n    render() {\n      const { profile } = this.state\n      return <WrappedComponent profile={profile} {...this.props} />\n    }\n  }\n}\n```\nå¼•å…¥é«˜é˜¶ç»„ä»¶ï¼Œä½¿ç”¨å…¶profile\n```js\nclass GithubProfileHoc extends React.Component<IProps, IStates> {\n  render() {\n    const { profile } = this.props\n    return (\n      <div className=\"profile\">\n        <img src={profile.avatar_url} alt=\"avatar\" width=\"200px\" />\n        <div>name: {profile.name}</div>\n        <div>followers: {profile.followers}</div>\n        <div>following: {profile.following}</div>\n      </div>\n    )\n  }\n}\n\nexport default WithGithubProfile(GithubProfileHoc)\n```\n#### ç¼ºç‚¹\n- ä½¿ç”¨å¤šä¸ªé«˜é˜¶ç»„ä»¶æ—¶ï¼Œæ— æ³•ç¡®å®š props æ¥æº\n- ç›¸åŒçš„ props ä¼šå­˜åœ¨è¦†ç›–çš„æƒ…å†µ\n- å¢åŠ è°ƒè¯•éš¾åº¦\n\n***ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°é‡Œçš„é€»è¾‘å¤ªä¹±äº†å§ï¼***\næˆ‘ä»¬é€šå¸¸å¸Œæœ›ä¸€ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹æƒ…ï¼Œä½†æˆ‘ä»¬çš„ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°é‡Œé€šå¸¸åŒæ—¶åšäº†å¾ˆå¤šäº‹æƒ…ã€‚æ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨componentDidMountä¸­å‘èµ·ajaxè¯·æ±‚è·å–æ•°æ®ï¼Œç»‘å®šä¸€äº›äº‹ä»¶ç›‘å¬ç­‰ç­‰ã€‚åŒæ—¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬è¿˜éœ€è¦åœ¨componentDidUpdateåšä¸€éåŒæ ·çš„äº‹æƒ…ã€‚å½“é¡¹ç›®å˜å¤æ‚åï¼Œè¿™ä¸€å—çš„ä»£ç ä¹Ÿå˜å¾—ä¸é‚£ä¹ˆç›´è§‚ã€‚\n\n***classçœŸçš„å¤ªè®©äººå›°æƒ‘äº†ï¼***\næˆ‘ä»¬ç”¨classæ¥åˆ›å»ºreactç»„ä»¶æ—¶ï¼Œè¿˜æœ‰ä¸€ä»¶å¾ˆéº»çƒ¦çš„äº‹æƒ…ï¼Œå°±æ˜¯thisçš„æŒ‡å‘é—®é¢˜ã€‚ä¸ºäº†ä¿è¯thisçš„æŒ‡å‘æ­£ç¡®ï¼Œæˆ‘ä»¬è¦ç»å¸¸å†™è¿™æ ·çš„ä»£ç ï¼š`this.handleClick = this.handleClick.bind(this)`ï¼Œæˆ–è€…æ˜¯è¿™æ ·çš„ä»£ç ï¼š`<button onClick={() => this.handleClick(e)}>`ã€‚ä¸€æ—¦æˆ‘ä»¬ä¸å°å¿ƒå¿˜äº†ç»‘å®šthisï¼Œå„ç§bugå°±éšä¹‹è€Œæ¥ï¼Œå¾ˆéº»çƒ¦ã€‚\n\nè¿˜æœ‰å°±æ˜¯æ— çŠ¶æ€ç»„ä»¶å› ä¸ºéœ€æ±‚çš„å˜åŠ¨éœ€è¦æœ‰è‡ªå·±çš„stateï¼Œåˆå¾—å¾ˆéº»çƒ¦çš„æ”¹æˆclassç»„ä»¶ã€‚\n\nåœ¨ React 16.8 ä¹‹å‰ function æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š\n\n- function ç»„ä»¶ä¸å¾—ä¸è¿”å›ä¸€äº› UI ä¿¡æ¯ï¼Œå³ JSX ä»£ç \n- function ç»„ä»¶å†…éƒ¨ä¸èƒ½æ‹¥æœ‰ state\n\n- Hooks è®©å‡½æ•°å¼ç»„ä»¶æ‹¥æœ‰ç±»ç»„ä»¶ä¸€æ ·çš„åŠŸèƒ½ï¼Œstate ï¼Œlifecycle ä»¥åŠ contextã€‚\n- Hooks ä¸æ˜¯ React çš„æ–°åŠŸèƒ½ï¼Œå¯ä»¥å°†å®ƒç†è§£ä¸ºä¸€ä¸ªâ€œé’©å­â€ï¼Œå¯ä»¥è®©ä½ åœ¨ä¸å†™ç±»ç»„ä»¶çš„æƒ…å†µä¸‹â€œå‹¾ä½â€React çš„æ‰€æœ‰åŠŸèƒ½ã€‚\n\n## State Hooks\n### çŠ¶æ€ç»„ä»¶\n```js\nclass Example extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: 0\n    };\n  }\n\n  render() {\n    return (\n      <div>\n        <p>You clicked {this.state.count} times</p>\n        <button onClick={() => this.setState({ count: this.state.count + 1 })}>\n          Click me\n        </button>\n      </div>\n    );\n  }\n}\n```\n\n### hooksæ”¹é€ \n```js\nimport { useState } from 'react';\n\nfunction Example() {\n  const [count, setCount] = useState(0);\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>\n        Click me\n      </button>\n    </div>\n  );\n}\n```\næ˜¯ä¸æ˜¯ç®€å•å¤šäº†ï¼å¯ä»¥çœ‹åˆ°ï¼ŒExampleå˜æˆäº†ä¸€ä¸ªå‡½æ•°ï¼Œä½†è¿™ä¸ªå‡½æ•°å´æœ‰è‡ªå·±çš„çŠ¶æ€ï¼ˆcountï¼‰ï¼ŒåŒæ—¶å®ƒè¿˜å¯ä»¥æ›´æ–°è‡ªå·±çš„çŠ¶æ€ï¼ˆsetCountï¼‰ã€‚\n\né™¤äº†`useState`è¿™ä¸ªhookå¤–ï¼Œè¿˜æœ‰å¾ˆå¤šåˆ«çš„hookï¼Œæ¯”å¦‚`useEffect`æä¾›äº†ç±»ä¼¼äº`componentDidMount`ç­‰ç”Ÿå‘½å‘¨æœŸé’©å­çš„åŠŸèƒ½ï¼Œ`useContext`æä¾›äº†ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰çš„åŠŸèƒ½ç­‰ç­‰ã€‚\n\n`useState`æ˜¯reactè‡ªå¸¦çš„ä¸€ä¸ªhookå‡½æ•°ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ç”¨æ¥å£°æ˜çŠ¶æ€å˜é‡ã€‚useStateè¿™ä¸ªå‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯æˆ‘ä»¬çš„çŠ¶æ€åˆå§‹å€¼ï¼ˆinitial stateï¼‰ï¼Œå®ƒè¿”å›äº†ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„çš„ç¬¬[0]é¡¹æ˜¯å½“å‰çš„çŠ¶æ€å€¼ï¼Œç¬¬[1]\né¡¹æ˜¯å¯ä»¥æ”¹å˜çŠ¶æ€å€¼çš„æ–¹æ³•å‡½æ•°ã€‚\n\nå½“ç”¨æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæˆ‘ä»¬è°ƒç”¨setCountå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶çš„å‚æ•°æ˜¯ä¿®æ”¹è¿‡çš„æ–°çŠ¶æ€å€¼ã€‚æ¥ä¸‹æ¥çš„äº‹æƒ…å°±äº¤ç»™reactäº†ï¼Œreactå°†ä¼šé‡æ–°æ¸²æŸ“æˆ‘ä»¬çš„Exampleç»„ä»¶ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯æ›´æ–°åçš„æ–°çš„çŠ¶æ€ï¼Œå³count=1ã€‚\nExampleæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°ï¼Œä¸ºä»€ä¹ˆå®ƒå¯ä»¥è®°ä½ä¹‹å‰çš„çŠ¶æ€ï¼ŸExampleå‡½æ•°æ¯æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œéƒ½æ˜¯æ‹¿çš„ä¸Šä¸€æ¬¡æ‰§è¡Œå®Œçš„çŠ¶æ€å€¼ä½œä¸ºåˆå§‹å€¼ï¼Ÿ\n\n### ç»„ä»¶æœ‰å¤šä¸ªçŠ¶æ€å€¼\n```js\nfunction ExampleWithManyStates() {\n  const [age, setAge] = useState(42);\n  const [fruit, setFruit] = useState('banana');\n  const [todos, setTodos] = useState([{ text: 'Learn Hooks' }]);\n}\n```\n`useState`æ¥æ”¶çš„åˆå§‹å€¼æ²¡æœ‰è§„å®šä¸€å®šè¦æ˜¯`string/number/boolean`è¿™ç§ç®€å•æ•°æ®ç±»å‹ï¼Œå®ƒå®Œå…¨å¯ä»¥æ¥æ”¶å¯¹è±¡æˆ–è€…æ•°ç»„ä½œä¸ºå‚æ•°ã€‚å”¯ä¸€éœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼Œä¹‹å‰æˆ‘ä»¬çš„`this.setState`åšçš„æ˜¯åˆå¹¶çŠ¶æ€åè¿”å›ä¸€ä¸ªæ–°\nçŠ¶æ€ï¼Œè€Œ`useState`æ˜¯ç›´æ¥æ›¿æ¢è€çŠ¶æ€åè¿”å›æ–°çŠ¶æ€ã€‚æœ€åï¼Œreactä¹Ÿç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª`useReducer`çš„hookï¼Œå¦‚æœä½ æ›´å–œæ¬¢reduxå¼çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆçš„è¯ã€‚\n\nä»`ExampleWithManyStates`å‡½æ•°æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ`useState`æ— è®ºè°ƒç”¨å¤šå°‘æ¬¡ï¼Œç›¸äº’ä¹‹é—´æ˜¯ç‹¬ç«‹çš„ã€‚å…¶å®æˆ‘ä»¬çœ‹hookçš„â€œå½¢æ€â€ï¼Œæœ‰ç‚¹ç±»ä¼¼ä¹‹å‰è¢«å®˜æ–¹å¦å®šæ‰çš„`Mixins`è¿™ç§æ–¹æ¡ˆï¼Œéƒ½æ˜¯æä¾›ä¸€ç§â€œæ’æ‹”å¼çš„åŠŸèƒ½æ³¨å…¥â€\nçš„èƒ½åŠ›ã€‚è€Œ`Mixins`ä¹‹æ‰€ä»¥è¢«å¦å®šï¼Œæ˜¯å› ä¸º`Mixins`æœºåˆ¶æ˜¯è®©å¤šä¸ªMixinså…±äº«ä¸€ä¸ªå¯¹è±¡çš„æ•°æ®ç©ºé—´ï¼Œè¿™æ ·å°±å¾ˆéš¾ç¡®ä¿ä¸åŒ`Mixins`ä¾èµ–çš„çŠ¶æ€ä¸å‘ç”Ÿå†²çªã€‚ä¸åŒç»„ä»¶è°ƒç”¨åŒä¸€ä¸ªhookä¹Ÿèƒ½ä¿è¯å„è‡ªçŠ¶æ€çš„ç‹¬ç«‹æ€§ï¼Œè¿™\nå°±æ˜¯ä¸¤è€…çš„æœ¬è´¨åŒºåˆ«ã€‚\n\n### reactæ˜¯æ€ä¹ˆä¿è¯å¤šä¸ªuseStateçš„ç›¸äº’ç‹¬ç«‹çš„ï¼Ÿ\nçœ‹ä¸Šé¢ç»™å‡ºçš„`ExampleWithManyStates`ä¾‹å­ï¼Œæˆ‘ä»¬è°ƒç”¨äº†ä¸‰æ¬¡`useState`ï¼Œæ¯æ¬¡æˆ‘ä»¬ä¼ çš„å‚æ•°åªæ˜¯ä¸€ä¸ªå€¼ï¼ˆå¦‚42ï¼Œâ€˜bananaâ€™ï¼‰ï¼Œæˆ‘ä»¬æ ¹æœ¬æ²¡æœ‰å‘Šè¯‰reactè¿™äº›å€¼å¯¹åº”çš„keyæ˜¯å“ªä¸ªï¼Œé‚£reactæ˜¯æ€ä¹ˆä¿è¯è¿™ä¸‰ä¸ªuseStateæ‰¾åˆ°å®ƒå¯¹åº”çš„stateå‘¢ï¼Ÿ\n\n```js\n//ç¬¬ä¸€æ¬¡æ¸²æŸ“\nuseState(42);  //å°†ageåˆå§‹åŒ–ä¸º42\nuseState('banana');  //å°†fruitåˆå§‹åŒ–ä¸ºbanana\nuseState([{ text: 'Learn Hooks' }]); //...\n\n//ç¬¬äºŒæ¬¡æ¸²æŸ“\nuseState(42);  //è¯»å–çŠ¶æ€å˜é‡ageçš„å€¼ï¼ˆè¿™æ—¶å€™ä¼ çš„å‚æ•°42ç›´æ¥è¢«å¿½ç•¥ï¼‰\nuseState('banana');  //è¯»å–çŠ¶æ€å˜é‡fruitçš„å€¼ï¼ˆè¿™æ—¶å€™ä¼ çš„å‚æ•°bananaç›´æ¥è¢«å¿½ç•¥ï¼‰\nuseState([{ text: 'Learn Hooks' }]); //...\n```\n\nç­”æ¡ˆæ˜¯ï¼Œreactæ˜¯æ ¹æ®`useState`å‡ºç°çš„é¡ºåºæ¥å®šçš„ã€‚æˆ‘ä»¬å…·ä½“æ¥çœ‹ä¸€ä¸‹ï¼š\n```js\nlet showFruit = true;\nfunction ExampleWithManyStates() {\n  const [age, setAge] = useState(42);\n  \n  if(showFruit) {\n    const [fruit, setFruit] = useState('banana');\n    showFruit = false;\n  }\n \n  const [todos, setTodos] = useState([{ text: 'Learn Hooks' }]);\n}\n```\n\n```js\n//ç¬¬ä¸€æ¬¡æ¸²æŸ“\nuseState(42);  //å°†ageåˆå§‹åŒ–ä¸º42\nuseState('banana');  //å°†fruitåˆå§‹åŒ–ä¸ºbanana\nuseState([{ text: 'Learn Hooks' }]); //...\n\n//ç¬¬äºŒæ¬¡æ¸²æŸ“\nuseState(42);  //è¯»å–çŠ¶æ€å˜é‡ageçš„å€¼ï¼ˆè¿™æ—¶å€™ä¼ çš„å‚æ•°42ç›´æ¥è¢«å¿½ç•¥ï¼‰\n// useState('banana');  \nuseState([{ text: 'Learn Hooks' }]); //è¯»å–åˆ°çš„å´æ˜¯çŠ¶æ€å˜é‡fruitçš„å€¼ï¼Œå¯¼è‡´æŠ¥é”™\n```\næ‰€ä»¥reactè§„å®šæˆ‘ä»¬å¿…é¡»æŠŠhookså†™åœ¨å‡½æ•°çš„æœ€å¤–å±‚ï¼Œä¸èƒ½å†™åœ¨ifelseç­‰æ¡ä»¶è¯­å¥å½“ä¸­ï¼Œæ¥ç¡®ä¿hooksçš„æ‰§è¡Œé¡ºåºä¸€è‡´ã€‚\n\n## Effect Hooks\nåŒæ ·æ˜¯ä¸Šä¸ªæ —å­ï¼Œä¿ºä»¬å¢åŠ ä¸€ä¸ªæ–°åŠŸèƒ½ï¼š\n```js\nimport { useState, useEffect } from 'react';\n\nfunction Example() {\n  const [count, setCount] = useState(0);\n\n  // ç±»ä¼¼äºcomponentDidMount å’Œ componentDidUpdate:\n  useEffect(() => {\n    // æ›´æ–°æ–‡æ¡£çš„æ ‡é¢˜\n    document.title = `You clicked ${count} times`;\n  });\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>\n        Click me\n      </button>\n    </div>\n  );\n}\n```\næˆ‘ä»¬å†™çš„æœ‰çŠ¶æ€ç»„ä»¶ï¼Œé€šå¸¸ä¼šäº§ç”Ÿå¾ˆå¤šçš„å‰¯ä½œç”¨ï¼ˆside effectï¼‰ï¼Œæ¯”å¦‚å‘èµ·ajaxè¯·æ±‚è·å–æ•°æ®ï¼Œæ·»åŠ ä¸€äº›ç›‘å¬çš„æ³¨å†Œå’Œå–æ¶ˆæ³¨å†Œï¼Œæ‰‹åŠ¨ä¿®æ”¹domç­‰ç­‰ã€‚æˆ‘ä»¬ä¹‹å‰éƒ½æŠŠè¿™äº›å‰¯ä½œç”¨çš„å‡½æ•°å†™åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°é’©å­é‡Œï¼Œæ¯”å¦‚\n`componentDidMount`ï¼Œ`componentDidUpdate`å’Œ`componentWillUnmount`ã€‚è€Œç°åœ¨çš„useEffectå°±ç›¸å½“ä¸è¿™äº›å£°æ˜å‘¨æœŸå‡½æ•°é’©å­çš„é›†åˆä½“ã€‚å®ƒä»¥ä¸€æŠµä¸‰ï¼Œå‰å®³äº†ï¼\n\nåŒæ—¶ï¼Œç”±äºå‰æ–‡æ‰€è¯´hookså¯ä»¥åå¤å¤šæ¬¡ä½¿ç”¨ï¼Œç›¸äº’ç‹¬ç«‹ã€‚æ‰€ä»¥æˆ‘ä»¬åˆç†çš„åšæ³•æ˜¯ï¼Œç»™æ¯ä¸€ä¸ªå‰¯ä½œç”¨ä¸€ä¸ªå•ç‹¬çš„useEffecté’©å­ã€‚è¿™æ ·ä¸€æ¥ï¼Œè¿™äº›å‰¯ä½œç”¨ä¸å†ä¸€è‚¡è„‘å †åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­é‡Œï¼Œä»£ç å˜å¾—æ›´åŠ æ¸…æ™°ã€‚\n\n### useEffectåšäº†ä»€ä¹ˆï¼Ÿ\né¦–å…ˆï¼Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ªçŠ¶æ€å˜é‡countï¼Œå°†å®ƒçš„åˆå§‹å€¼è®¾ä¸º0ã€‚ç„¶åæˆ‘ä»¬å‘Šè¯‰reactï¼Œæˆ‘ä»¬çš„è¿™ä¸ªç»„ä»¶æœ‰ä¸€ä¸ªå‰¯ä½œç”¨ã€‚æˆ‘ä»¬ç»™`useEffect hook`ä¼ äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°å°±æ˜¯æˆ‘ä»¬çš„å‰¯ä½œç”¨ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘\nä»¬çš„å‰¯ä½œç”¨æ˜¯è°ƒç”¨`browser API`æ¥ä¿®æ”¹æ–‡æ¡£æ ‡é¢˜ã€‚å½“reactè¦æ¸²æŸ“æˆ‘ä»¬çš„ç»„ä»¶æ—¶ï¼Œå®ƒä¼šå…ˆè®°ä½æˆ‘ä»¬ç”¨åˆ°çš„å‰¯ä½œç”¨ã€‚ç­‰reactæ›´æ–°äº†DOMä¹‹åï¼Œå®ƒå†ä¾æ¬¡æ‰§è¡Œæˆ‘ä»¬å®šä¹‰çš„å‰¯ä½œç”¨å‡½æ•°ã€‚\n\nè¿™é‡Œè¦æ³¨æ„ï¼š\n1. reacté¦–æ¬¡æ¸²æŸ“å’Œä¹‹åçš„æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè°ƒç”¨ä¸€éä¼ ç»™useEffectçš„å‡½æ•°ã€‚è€Œä¹‹å‰æˆ‘ä»¬è¦ç”¨ä¸¤ä¸ªå£°æ˜å‘¨æœŸå‡½æ•°æ¥åˆ†åˆ«è¡¨ç¤ºé¦–æ¬¡æ¸²æŸ“`componentDidMount`ï¼Œå’Œä¹‹åçš„æ›´æ–°å¯¼è‡´çš„é‡æ–°æ¸²æŸ“`componentDidUpdate`ã€‚\n\n2. `useEffect`ä¸­å®šä¹‰çš„å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œä¸ä¼šé˜»ç¢æµè§ˆå™¨æ›´æ–°è§†å›¾ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›å‡½æ•°æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œè€Œä¹‹å‰çš„`componentDidMount`æˆ–`componentDidUpdate`ä¸­çš„ä»£ç åˆ™æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚è¿™ç§å®‰æ’å¯¹å¤§å¤šæ•°å‰¯ä½œ\nç”¨è¯´éƒ½æ˜¯åˆç†çš„ï¼Œä½†æœ‰çš„æƒ…å†µé™¤å¤–ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰æ—¶å€™éœ€è¦å…ˆæ ¹æ®DOMè®¡ç®—å‡ºæŸä¸ªå…ƒç´ çš„å°ºå¯¸å†é‡æ–°æ¸²æŸ“ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¸Œæœ›è¿™æ¬¡é‡æ–°æ¸²æŸ“æ˜¯åŒæ­¥å‘ç”Ÿçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¼šåœ¨æµè§ˆå™¨çœŸçš„å»ç»˜åˆ¶è¿™ä¸ªé¡µé¢å‰å‘ç”Ÿã€‚\n\n### useEffectæ€ä¹ˆè§£ç»‘ä¸€äº›å‰¯ä½œç”¨ï¼Ÿ\nè¿™ç§åœºæ™¯å¾ˆå¸¸è§ï¼Œå½“æˆ‘ä»¬åœ¨`componentDidMount`é‡Œæ·»åŠ äº†ä¸€ä¸ªæ³¨å†Œï¼Œæˆ‘ä»¬å¾—åœ¨`componentWillUnmount`ä¸­ï¼Œä¹Ÿå°±æ˜¯ç»„ä»¶è¢«æ³¨é”€ä¹‹å‰æ¸…é™¤æ‰æˆ‘ä»¬æ·»åŠ çš„æ³¨å†Œï¼Œå¦åˆ™å†…å­˜æ³„æ¼çš„é—®é¢˜å°±å‡ºç°äº†ã€‚\n\næ€ä¹ˆæ¸…é™¤å‘¢ï¼Ÿè®©æˆ‘ä»¬ä¼ ç»™`useEffect`çš„å‰¯ä½œç”¨å‡½æ•°è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°å³å¯ã€‚è¿™ä¸ªæ–°çš„å‡½æ•°å°†ä¼šåœ¨ç»„ä»¶ä¸‹ä¸€æ¬¡é‡æ–°æ¸²æŸ“ä¹‹åæ‰§è¡Œã€‚è¿™ç§æ¨¡å¼åœ¨ä¸€äº›pubsubæ¨¡å¼çš„å®ç°ä¸­å¾ˆå¸¸è§ã€‚\n```js\nimport { useState, useEffect } from 'react';\n\nfunction FriendStatus(props) {\n  const [isOnline, setIsOnline] = useState(null);\n\n  function handleStatusChange(status) {\n    setIsOnline(status.isOnline);\n  }\n\n  useEffect(() => {\n    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);\n    // ä¸€å®šæ³¨æ„ä¸‹è¿™ä¸ªé¡ºåºï¼šå‘Šè¯‰reactåœ¨ä¸‹æ¬¡é‡æ–°æ¸²æŸ“ç»„ä»¶ä¹‹åï¼ŒåŒæ—¶æ˜¯ä¸‹æ¬¡è°ƒç”¨ChatAPI.subscribeToFriendStatusä¹‹å‰æ‰§è¡Œcleanup\n    return function cleanup() {\n      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);\n    };\n  });\n\n  if (isOnline === null) {\n    return 'Loading...';\n  }\n  return isOnline ? 'Online' : 'Offline';\n}\n```\nè¿™é‡Œæœ‰ä¸€ä¸ªç‚¹éœ€è¦é‡è§†ï¼è¿™ç§è§£ç»‘çš„æ¨¡å¼è·Ÿ`componentWillUnmount`ä¸ä¸€æ ·ã€‚`componentWillUnmount`åªä¼šåœ¨ç»„ä»¶è¢«é”€æ¯å‰æ‰§è¡Œä¸€æ¬¡è€Œå·²ï¼Œè€ŒuseEffecté‡Œçš„\nå‡½æ•°ï¼Œæ¯æ¬¡ç»„ä»¶æ¸²æŸ“åéƒ½ä¼šæ‰§è¡Œä¸€éï¼ŒåŒ…æ‹¬å‰¯ä½œç”¨å‡½æ•°è¿”å›çš„è¿™ä¸ªæ¸…ç†å‡½æ•°ä¹Ÿä¼šé‡æ–°æ‰§è¡Œä¸€éã€‚æ¯æ¬¡è§†å›¾æ›´æ–°ä¹‹åï¼Œå¹¶ä¸æ˜¯åªæœ‰ç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹é¢è¿™ä¸ªé—®é¢˜ï¼š\n\n### ä¸ºä»€ä¹ˆè¦è®©å‰¯ä½œç”¨å‡½æ•°æ¯æ¬¡ç»„ä»¶æ›´æ–°éƒ½æ‰§è¡Œä¸€éï¼Ÿ\næˆ‘ä»¬å…ˆçœ‹ä»¥å‰çš„æ¨¡å¼ï¼š\n```js\ncomponentDidMount() {\n  ChatAPI.subscribeToFriendStatus(\n    this.props.friend.id,\n    this.handleStatusChange\n  );\n}\n\ncomponentWillUnmount() {\n  ChatAPI.unsubscribeFromFriendStatus(\n    this.props.friend.id,\n    this.handleStatusChange\n  );\n}\n```\næˆ‘ä»¬åœ¨`componentDidMount`æ³¨å†Œï¼Œå†åœ¨`componentWillUnmount`æ¸…é™¤æ³¨å†Œã€‚ä½†å‡å¦‚è¿™æ—¶å€™props.friend.idå˜äº†æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬ä¸å¾—ä¸å†æ·»åŠ ä¸€ä¸ªcomponentDidUpdateæ¥å¤„ç†è¿™ç§æƒ…å†µï¼š\n```js\ncomponentDidUpdate(prevProps) {\n  // å…ˆæŠŠä¸Šä¸€ä¸ªfriend.idè§£ç»‘\n  ChatAPI.unsubscribeFromFriendStatus(\n    prevProps.friend.id,\n    this.handleStatusChange\n  );\n  // å†é‡æ–°æ³¨å†Œæ–°ä½†friend.id\n  ChatAPI.subscribeToFriendStatus(\n    this.props.friend.id,\n    this.handleStatusChange\n  );\n}\n```\nå¾ˆç¹çï¼Œè€Œæˆ‘ä»¬ä½†`useEffect`åˆ™æ²¡è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºå®ƒåœ¨æ¯æ¬¡ç»„ä»¶æ›´æ–°åéƒ½ä¼šé‡æ–°æ‰§è¡Œä¸€éã€‚æ‰€ä»¥ä»£ç çš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ï¼š\n```\n1.é¡µé¢é¦–æ¬¡æ¸²æŸ“\n2.æ›¿friend.id=1çš„æœ‹å‹æ³¨å†Œ\n\n3.çªç„¶friend.idå˜æˆäº†2\n4.é¡µé¢é‡æ–°æ¸²æŸ“\n5.æ¸…é™¤friend.id=1çš„ç»‘å®š\n6.æ›¿friend.id=2çš„æœ‹å‹æ³¨å†Œ\n```\n\n### æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°ï¼Ÿ\næŒ‰ç…§ä¸Šä¸€èŠ‚çš„æ€è·¯ï¼Œæ¯æ¬¡é‡æ–°æ¸²æŸ“éƒ½è¦æ‰§è¡Œä¸€éè¿™äº›å‰¯ä½œç”¨å‡½æ•°ï¼Œæ˜¾ç„¶æ˜¯ä¸ç»æµçš„ã€‚æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„è®¡ç®—å‘¢ï¼Ÿæˆ‘ä»¬åªéœ€è¦ç»™useEffectä¼ ç¬¬äºŒä¸ªå‚æ•°å³å¯ã€‚ç”¨ç¬¬äºŒä¸ªå‚æ•°æ¥å‘Šè¯‰reactåªæœ‰å½“è¿™ä¸ªå‚æ•°çš„å€¼å‘ç”Ÿæ”¹\nå˜æ—¶ï¼Œæ‰æ‰§è¡Œæˆ‘ä»¬ä¼ çš„å‰¯ä½œç”¨å‡½æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰ã€‚\n\n```js\nuseEffect(() => {\n  document.title = `You clicked ${count} times`;\n}, [count]); // åªæœ‰å½“countçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°æ‰§è¡Œ`document.title`è¿™ä¸€å¥\n```\nå½“æˆ‘ä»¬ç¬¬äºŒä¸ªå‚æ•°ä¼ ä¸€ä¸ªç©ºæ•°ç»„[]æ—¶ï¼Œå…¶å®å°±ç›¸å½“äºåªåœ¨é¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™æ‰§è¡Œã€‚ä¹Ÿå°±æ˜¯`componentDidMount`åŠ `componentWillUnmount`çš„æ¨¡å¼ã€‚ä¸è¿‡è¿™ç§ç”¨æ³•å¯èƒ½å¸¦æ¥bugï¼Œå°‘ç”¨ã€‚\n\n## æ€ä¹ˆå†™è‡ªå®šä¹‰çš„Effect Hooks?\nä¸ºä»€ä¹ˆè¦è‡ªå·±å»å†™ä¸€ä¸ªEffect Hooks? è¿™æ ·æˆ‘ä»¬æ‰èƒ½æŠŠå¯ä»¥å¤ç”¨çš„é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œå˜æˆä¸€ä¸ªä¸ªå¯ä»¥éšæ„æ’æ‹”çš„â€œæ’é”€â€ï¼Œå“ªä¸ªç»„ä»¶è¦ç”¨æ¥ï¼Œæˆ‘å°±æ’è¿›å“ªä¸ªç»„ä»¶é‡Œï¼Œso easyï¼çœ‹ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­ï¼Œä½ å°±æ˜ç™½äº†ã€‚\n\næ¯”å¦‚æˆ‘ä»¬å¯ä»¥æŠŠä¸Šé¢å†™çš„FriendStatusç»„ä»¶ä¸­åˆ¤æ–­æœ‹å‹æ˜¯å¦åœ¨çº¿çš„åŠŸèƒ½æŠ½å‡ºæ¥ï¼Œæ–°å»ºä¸€ä¸ªuseFriendStatusçš„hookä¸“é—¨ç”¨æ¥åˆ¤æ–­æŸä¸ªidæ˜¯å¦åœ¨çº¿ã€‚\n```js\nimport { useState, useEffect } from 'react';\n\nfunction useFriendStatus(friendID) {\n  const [isOnline, setIsOnline] = useState(null);\n\n  function handleStatusChange(status) {\n    setIsOnline(status.isOnline);\n  }\n\n  useEffect(() => {\n    ChatAPI.subscribeToFriendStatus(friendID, handleStatusChange);\n    return () => {\n      ChatAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange);\n    };\n  });\n\n  return isOnline;\n}\n```\nè¿™æ—¶å€™FriendStatusç»„ä»¶å°±å¯ä»¥ç®€å†™ä¸ºï¼š\n```js\nfunction FriendStatus(props) {\n  const isOnline = useFriendStatus(props.friend.id);\n\n  if (isOnline === null) {\n    return 'Loading...';\n  }\n  return isOnline ? 'Online' : 'Offline';\n}\n```\nå‡å¦‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬åˆæœ‰ä¸€ä¸ªæœ‹å‹åˆ—è¡¨ä¹Ÿéœ€è¦æ˜¾ç¤ºæ˜¯å¦åœ¨çº¿çš„ä¿¡æ¯ä¹Ÿå¯ä»¥å¤ç”¨ï¼š\n```js\nfunction FriendListItem(props) {\n  const isOnline = useFriendStatus(props.friend.id);\n\n  return (\n    <li style={{ color: isOnline ? 'green' : 'black' }}>\n      {props.friend.name}\n    </li>\n  );\n}\n```\nfunky!!!\n\næ¯”å¦‚è¿˜æœ‰\n\n### useProfile ä½¿ç”¨ Hooks å®ç° API è¯·æ±‚\n```js\n// useProfile\nconst useProfile = () => {\n  const [profile, setProfile] = useState({} as TProfile)\n  const [loading, setLoading] = useState(false)\n  const [isError, setIsError] = useState(false)\n\n  useEffect(() => {\n    setLoading(true)\n    fetch('https://api.github.com/users/gaearon')\n      .then(response => {\n        return response.json()\n      })\n      .then(res => {\n        setProfile(res as TProfile)\n        setIsError(false)\n        setLoading(false)\n      }).catch(()=> {\n        setIsError(true)\n        setLoading(false)\n      })\n  }, [])\n\n  return { profile, loading, isError }\n}\n```\nä½¿ç”¨ `useProfile` Hooksï¼š\n```js\nconst UseProfilePage = () => {\n  const { profile, loading, isError } = useProfile()\n  return (\n    <React.Fragment>\n      {isError ? (\n        <div>Network Error...</div>\n      ) : (\n        <div className=\"profile\">\n          {loading ? (\n            <div>loading profile...</div>\n          ) : (\n            <React.Fragment>\n              <img src={profile.avatar_url} alt=\"avatar\" width=\"200px\" />\n              <div>name: {profile.name}</div>\n              <div>company: {profile.company}</div>\n              <div>bio: {profile.bio}</div>\n            </React.Fragment>\n          )}\n        </div>\n      )}\n    </React.Fragment>\n  )\n}\n```\n### useInput ä½¿ç”¨ Hooks å®ç° input è¾“å…¥é€»è¾‘\n```js\nconst useInput = (initialValue:string) => {\n  const [value, setValue] = useState(initialValue)\n\n  const handleChange = (e:any) => {\n    setValue(e.target.value)\n  }\n\n  return {\n    value,\n    onChange: handleChange\n  }\n}\n```\n```js\nconst useInputDemo = () => {\n  const value = useInput('cosyer')\n\n  return (\n    <div className=\"use-input\">\n      <p>current name: {value.value}</p>\n      <input {...value} />\n    </div>\n  )\n}\n```\n\n## useContext\n`useContext` æ˜¯ä¸ºäº†åœ¨ function ç»„ä»¶ä¸­ä½¿ç”¨ç±»ç»„ä»¶çš„ [context](https://reactjs.org/docs/context.html) APIï¼Œä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ª contextï¼š\n```js\nconst local = 'ğŸ‡¨ğŸ‡³'\nconst ThemeContext = React.createContext(local)\n```\nç„¶ååœ¨ `useContext hook` ä½¿ç”¨ contextï¼š\n```js\nfunction UseContextDemo() {\n  const local = useContext(ThemeContext)\n  return (\n    <div>\n      <p>local: {local}</p>\n    </div>\n  )\n}\n// render: ğŸ‡¨ğŸ‡³\n```\nåœ¨ class ç»„ä»¶ä¸­ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹ context çš„å€¼ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ Provider æä¾› value å€¼ï¼ŒåŒæ ·ï¼Œåœ¨ function ç»„ä»¶ä¸­ä¹Ÿå¯ä»¥ï¼š\n```js\nconst ThemeContext = React.createContext('ğŸ‡¨ğŸ‡³')\n\nfunction Context() {\n  const local = useContext(ThemeContext)\n  return <p>local: {local}</p>\n}\n\nfunction App() {\n  return (\n    <ThemeContext.Provider value={'ğŸ‡ºğŸ‡¸'}>\n      <Context />\n    </ThemeContext.Provider>\n  )\n}\n// render: ğŸ‡ºğŸ‡¸\n```\n\n## useReducer\n`useReducer` æ˜¯ `useState` çš„ä¸€ç§ä»£æ›¿æ–¹æ¡ˆï¼Œç”¨äº state ä¹‹é—´æœ‰ä¾èµ–å…³ç³»æˆ–è€…æ¯”è¾ƒå¤æ‚çš„åœºæ™¯ã€‚`useReducer` æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š\n\n- reducerï¼š(state, action) => newState\n- initialArgï¼š åˆå§‹åŒ–å‚æ•°\n- Initï¼š æƒ°æ€§åˆå§‹åŒ–,è¿”å›åˆå§‹åŒ–æ•°æ®\n\nè¿”å›å½“å‰ state ä»¥åŠé…å¥—çš„ dispatch æ–¹æ³•ã€‚é¦–å…ˆçœ‹ä¸‹ `useReducer` å¤„ç†ç®€å•çš„ stateï¼š\n```js\nfunction UseReducerDemo() {\n  const [count, dispatch] = useReducer(state => {\n    return state + 1\n  }, 0)\n\n  return (\n    <div>\n      <p>count: {count}</p>\n      <button\n        onClick={() => {\n          dispatch()\n        }}\n      >\n        add\n      </button>\n    </div>\n  )\n}\n```\nè¿™ä¸ªä¾‹å­å’Œä½¿ç”¨ `useState` ä¸€æ ·ï¼Œéƒ½è¾¾åˆ°äº†è®¡æ•°çš„æ•ˆæœã€‚ è¯¥ä¾‹å­ä¸­ï¼Œ`useReducer` åˆå§‹åŒ–äº† count å€¼ä¸º 0ï¼Œä¼ å…¥çš„ reducer å¾ˆç®€å•ï¼Œå½“æ¥æ”¶åˆ°ä¸€ä¸ª dispatch æ—¶ï¼Œå°† count çš„å€¼å¢åŠ  1ã€‚\n\n### å¤„ç† state æœ‰ç›¸äº’ä¾èµ–çš„åœºæ™¯\n```js\nconst CountApp = () => {\n  const [count, setCount] = useState(0)\n  const [frozen, setFrozen] = useState(false)\n\n  const increase = () => {\n    setCount(prevCount => {\n      if (frozen) {\n        return prevCount\n      }\n      return prevCount + 1\n    })\n  }\n\n  useEffect(() => {\n    increase()\n    setFrozen(true)\n    increase()\n  }, [])\n\n  return <p>count {count}</p>\n}\n// render 2\n```\nåŸå› åœ¨äº function ç»„ä»¶çš„æ›´æ–°æœºåˆ¶ï¼Œå½“å¼•å…¥ hooks ä»¥åï¼Œfunction ç»„ä»¶ä¹Ÿæ‹¥æœ‰äº† state çš„åŠŸèƒ½ï¼Œå½“æˆ‘ä»¬ setState æ—¶ï¼ŒUI ä¼šé‡æ–°æ¸²æŸ“ï¼Œä½†åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­**function ç»„ä»¶ä¸­ï¼Œstate ä»¥åŠ props éƒ½æ˜¯é™æ€å€¼ï¼Œä¸å­˜åœ¨å¼•ç”¨ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥ç†è§£ä¸º state å’Œ props æ˜¯ä¸€ä¸ª capture valueï¼Œæ¯æ¬¡æ¸²æŸ“çš„ state å’Œ props éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚**\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”±äº useEffect ä¼ å…¥çš„ä¾èµ–ä¸º []ï¼Œå³è¯¥å‰¯ä½œç”¨åªä¼šåœ¨ UI ç¬¬ä¸€æ¬¡æ¸²æŸ“ç»“æŸåæ‰§è¡Œä¸€æ¬¡ã€‚è€Œåœ¨è¿™æ¬¡ render ä¸­ï¼Œcount çš„å€¼ä¸º 0ï¼Œ frozen å€¼ä¸º falseï¼Œæ‰€ä»¥ç¬¬äºŒæ¬¡æ‰§è¡Œ increase æ—¶ï¼Œfrozen å€¼ä¾ç„¶ä¸º falseï¼Œ setCount è¿”å›çš„ prevCount ä¸º 1 ï¼Œç„¶åå¢åŠ  1ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæœ€å render çš„ç»“æœä¸º 2ï¼Œè€Œä¸æ˜¯ 1ã€‚\n\nå¯¹äº state æœ‰ç›¸äº’ä¾èµ–çš„æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ `useReducer` æ¥å¤„ç†ï¼š\n```js\nconst INCREASE = 'INCREASE'\nconst SET_FROZEN = 'SET_FROZEN'\n\nconst initialState = {\n  count: 0,\n  frozen: false\n}\n\nconst CountApp = () => {\n  const reducer = (state: any, action: any) => {\n    switch (action.type) {\n      case INCREASE:\n        if (state.frozen) {\n          return state\n        }\n        return {\n          ...state,\n          count: state.count + 1\n        }\n\n      case SET_FROZEN:\n        return {\n          ...state,\n          frozen: action.frozen\n        }\n      default:\n        return state\n    }\n  }\n  const [state, dispath] = useReducer(reducer, initialState)\n\n  useEffect(() => {\n    dispath({ type: INCREASE })\n    dispath({ type: SET_FROZEN, frozen: true })\n    dispath({ type: INCREASE })\n  }, [])\n\n  return <p>current count: {state.count}</p>\n}\n```\n\n### å¦‚ä½•ç”¨useStateå®ç°useReducer\n```js\nconst CountApp = () => {\n  const [state, setState] = useState({\n    count: 0,\n    frozen: false,\n  });\n\n  const increase = () => {\n    setState(prevState => {\n      if (prevState.frozen) {\n        return prevState;\n      }\n      return {\n        ...prevState,\n        count: state.count + 1,\n      };\n    });\n  };\n\n  const setFrozen = () => {\n    setState(prevState => {\n      return {\n        ...prevState,\n        frozen: true,\n      };\n    });\n  };\n\n  useEffect(() => {\n    increase();\n    setFrozen();\n    increase();\n  }, []);\n\n  return <p>current count: {state.count}</p>;\n  // renderï¼š1\n};\n```\n`useReducer` å’Œ `useState` ç›¸æ¯”ï¼Œä¼˜åŠ¿åœ¨äºå¯ä»¥å°†ä½¿ç”¨ reducer å°†ä¸€äº›é€»è¾‘è¿›è¡ŒæŠ½ç¦»ï¼Œè¿›è¡Œé›†ä¸­åŒ–ç®¡ç†ã€‚\n\n## useCallback\n\n`useCallback` å¯ä»¥ç†è§£ä¸ºå°†å‡½æ•°è¿›è¡Œäº†ç¼“å­˜ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°å’Œä¸€ä¸ªä¾èµ–æ•°ç»„ï¼Œåªæœ‰å½“ä¾èµ–æ•°ç»„ä¸­çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œè¯¥å›è°ƒå‡½æ•°æ‰ä¼šæ›´æ–°ã€‚\n```js\nfunction UseCallbackDemo() {\n  const [count, setCount] = useState(0)\n\n  const handleResize = useCallback(() => {\n    console.log(`the current count is: ${count}`)\n  }, [count])\n\n  useEffect(() => {\n    window.addEventListener('resize', handleResize)\n    return () => window.removeEventListener('resize', handleResize)\n  }, [handleResize])\n\n  return (\n    <div>\n      <button\n        onClick={() => {\n          setCount(count + 1)\n        }}\n      >\n        click\n      </button>\n      <p>current count: {count}</p>\n    </div>\n  )\n}\n```\nè¯¥ä¾‹å­ä¸­ï¼Œå½“æ”¹å˜ count åï¼Œç„¶åæ”¹å˜æµè§ˆå™¨çª—å£å¤§å°ï¼Œå¯ä»¥è·å–åˆ°æœ€æ–°çš„ count ã€‚å¦‚æœä¼ å…¥çš„ä¾èµ–ä¸º []ï¼ŒhandleResize ä¸ä¼šæ›´æ–°ï¼Œåˆ™æ”¹å˜æµè§ˆå™¨çª—å£æ—¶ï¼Œ count çš„å€¼å§‹ç»ˆä¸º 0 ã€‚\n\n## useMemo\n`useMemo` å¯¹å€¼è¿›è¡Œäº†ç¼“å­˜ï¼Œä¸ `useCallback` ç±»ä¼¼ï¼Œæ¥æ”¶ä¸€ä¸ªåˆ›å»ºå€¼çš„å‡½æ•°å’Œä¸€ä¸ªä¾èµ–æ•°ç»„ï¼Œå®ƒä»…ä¼šåœ¨æŸä¸ªä¾èµ–é¡¹æ”¹å˜æ—¶æ‰é‡æ–°è®¡ç®— memoized å€¼ï¼Œè¿™ç§ä¼˜åŒ–æœ‰åŠ©äºé¿å…åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½è¿›è¡Œé«˜å¼€é”€çš„è®¡ç®—ã€‚\n\n```js\nfunction UseMemoDemo() {\n  const [count, setCount] = useState(0)\n  const [value, setValue] = useState('')\n\n  const useMemoChild = useMemo(() => <Child count={count} />, [count])\n  return (\n    <div>\n      <p>{count}</p>\n      <button\n        onClick={() => {\n          setCount(count + 1)\n        }}\n      >\n        click\n      </button>\n      <br />\n      <input value={value} onChange={e => setValue(e.target.value)} />\n      {useMemoChild}\n    </div>\n  )\n}\n\nfunction Child({ count }: { count: number }) {\n  console.log('child render')\n  return (\n    <Fragment>\n      <p>useMemo hooks</p>\n      <p>child count: {count}</p>\n    </Fragment>\n  )\n}\n```\nè¯¥ä¾‹å­ä¸­ï¼ŒUseMemoDemo ç»„ä»¶å¼•ç”¨äº† Child ç»„ä»¶ï¼Œåœ¨ UseMemoDemo ç»„ä»¶ä¸­ï¼Œå®šä¹‰äº† count å’Œ value ä¸¤ä¸ª stateï¼Œå¦‚æœä¸ä½¿ç”¨ `useMemo`ï¼Œé‚£ä¹ˆæ¯å½“ UseMemoDemo ä¸­ input å‘ç”Ÿæ”¹å˜æ—¶ï¼ŒChild ç»„ä»¶å°±ä¼šé‡\næ–°æ¸²æŸ“ã€‚ä½† Child ç»„ä»¶ UI åªå’Œ count æœ‰å…³ï¼Œé‚£ä¹ˆè¿™æ ·å°±ä¼šé€ æˆ Child ç»„ä»¶æ— æ•ˆæ›´æ–°ï¼Œå› æ­¤å°±å¼•å…¥äº† `useMemo`ï¼Œå°† count ä½œä¸ºä¾èµ–ä¼ å…¥ï¼Œè¿™æ ·åªæœ‰å½“ count å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œ Child ç»„ä»¶æ‰ä¼šé‡æ–°æ¸²æŸ“ã€‚\n\n## useRef\n`useRef` è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ .current å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•° ï¼ˆinitialValueï¼‰ã€‚è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚åœ¨ function ç»„ä»¶ä¸­ï¼Œ ä½¿ç”¨ `useRef` ä¸»è¦å¯ä»¥å®Œæˆä»¥\nä¸‹ä¸¤ä»¶äº‹ï¼š\n\n1. è·å– dom ç»“æ„\n2. ä¿å­˜å˜é‡\n\nå…ˆçœ‹ä¸€ä¸ªè·å– dom èŠ‚ç‚¹, ç‚¹å‡» button æ—¶ï¼Œinput èšç„¦ã€‚\n```js\nfunction UseRefDemo() {\n  const inputRef = useRef(null as any)\n\n  const handleFocusInput = () => {\n    inputRef.current.focus()\n  }\n\n  return (\n    <div>\n      <input ref={inputRef} />\n      <button onClick={handleFocusInput}>click focus</button>\n    </div>\n  )\n}\n```\nå®˜æ–¹demo\n```js\nfunction Counter() {\n  const [count, setCount] = useState(0)\n\n  useEffect(() => {\n    setTimeout(() => {\n      console.log(`You clicked ${count} times`)\n    }, 3000)\n  })\n\n  return (\n    <div>\n      <p>You clicked {count} times</p>\n      <button onClick={() => setCount(count + 1)}>Click me</button>\n    </div>\n  )\n}\n```\nå¦‚æœæˆ‘ä»¬ 3s ç‚¹å¤šæ¬¡ç‚¹å‡» buttonï¼Œé‚£ä¹ˆæ§åˆ¶å°è¾“å‡ºçš„ç»“æœä¼šæ˜¯ 0,1,2,3â€¦ï¼Œ è¿™æ˜¯ç”±äºæ¯æ¬¡æ¸²æŸ“æ—¶ count çš„å€¼éƒ½æ˜¯å›ºå®šçš„ã€‚ä½†ç±»ä¼¼çš„é€»è¾‘åœ¨ class ç»„ä»¶ä¸­è¡¨ç°ä¸ä¸€æ ·ï¼š\n```js\ncomponentDidUpdate() {\n  setTimeout(() => {\n    console.log(`You clicked ${this.state.count} times`);\n  }, 3000);\n}\n```\nåœ¨ class ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬åœ¨ 3s å†…å¤šæ¬¡ç‚¹å‡» buttonï¼Œæœ€ååœ¨æ§åˆ¶å°è¾“å‡ºçš„ç»“æœæ˜¯æœ€åä¸€æ¬¡ count æ›´æ–°çš„å€¼ã€‚\nè§£é‡Šè¯´æ˜ä¸‹ï¼š\n> state æ˜¯ Immutable çš„ï¼ŒsetState åä¸€å®šä¼šç”Ÿæˆä¸€ä¸ªå…¨æ–°çš„ state å¼•ç”¨ã€‚ä½† Class Component é€šè¿‡ this.state æ–¹å¼è¯»å– stateï¼Œè¿™å¯¼è‡´äº†æ¯æ¬¡ä»£ç æ‰§è¡Œéƒ½ä¼šæ‹¿åˆ°æœ€æ–°çš„ state å¼•ç”¨ï¼Œæ‰€ä»¥å¿«é€Ÿç‚¹å‡»4æ¬¡çš„ç»“æœæ˜¯ 4 4 4 4ã€‚\n\n\nè€Œåœ¨ function ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `useRef` å®ç°è¿™ä¸ªæ•ˆæœ \n```js\nfunction useRefDemo() {\n  const [count, setCount] = useState(0)\n  const countRef = useRef(count)\n\n  useEffect(() => {\n    countRef.current = count\n    setTimeout(() => {\n      console.log(`You clicked ${countRef.current} times`)\n    }, 2000)\n  }, [count])\n\n  return (\n    <div>\n      <p>count: {count}</p>\n      <button\n        onClick={() => {\n          setCount(count + 1)\n        }}\n      >\n        click\n      </button>\n    </div>\n  )\n}\n```\nuseRef è¿”å›çš„å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ï¼Œæ¯æ¬¡æ¸²æŸ“æ—¶è¿”å›çš„æ˜¯åŒä¸€ä¸ªrefå¯¹è±¡ï¼Œå› æ­¤ countRef.current å§‹ç»ˆæ˜¯æœ€æ–°çš„ count å€¼ã€‚\n\n> é—­åŒ…å¸¦æ¥çš„å‘:\nå› ä¸ºæ¯æ¬¡ render éƒ½æœ‰ä¸€ä»½æ–°çš„çŠ¶æ€ï¼Œå› æ­¤ä¸Šè¿°ä»£ç ä¸­çš„ setTimeout ä½¿ç”¨äº§ç”Ÿäº†ä¸€ä¸ªé—­åŒ…ï¼Œæ•è·äº†æ¯æ¬¡ render åçš„ countï¼Œä¹Ÿå°±å¯¼è‡´äº†è¾“å‡ºäº† 0ã€1ã€2ã€‚å¦‚æœä½ å¸Œæœ›è¾“å‡ºçš„å†…å®¹æ˜¯æœ€æ–°çš„ state çš„è¯ï¼Œå¯ä»¥é€šè¿‡ useRef æ¥ä¿å­˜ stateã€‚å‰æ–‡è®²è¿‡ ref åœ¨ç»„ä»¶ä¸­åªå­˜åœ¨ä¸€ä»½ï¼Œæ— è®ºä½•æ—¶ä½¿ç”¨å®ƒçš„å¼•ç”¨éƒ½ä¸ä¼šäº§ç”Ÿå˜åŒ–ï¼Œå› æ­¤å¯ä»¥æ¥è§£å†³é—­åŒ…å¼•å‘çš„é—®é¢˜ã€‚\n\n**ä½†ç”±äºå¯¹ state çš„è¯»å–æ²¡æœ‰é€šè¿‡ this. çš„æ–¹å¼ï¼Œä½¿å¾—æ¯æ¬¡ setTimeout éƒ½è¯»å–äº†å½“æ—¶æ¸²æŸ“é—­åŒ…ç¯å¢ƒçš„æ•°æ®ï¼Œè™½ç„¶æœ€æ–°çš„å€¼è·Ÿç€æœ€æ–°çš„æ¸²æŸ“å˜äº†ï¼Œä½†æ—§çš„æ¸²æŸ“é‡Œï¼ŒçŠ¶æ€ä¾ç„¶æ˜¯æ—§å€¼ã€‚**\n\n## useImperativeHandle\n`useImperativeHandle` å¯ä»¥è®©ä½ åœ¨ä½¿ç”¨ ref æ—¶ï¼Œè‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”å½“é¿å…ä½¿ç”¨ ref è¿™æ ·çš„å‘½ä»¤å¼ä»£ç ã€‚`useImperativeHandle` åº”å½“ä¸ `forwardRef` ä¸€èµ·ä½¿ç”¨ï¼š\n```js\nfunction FancyInput(props, ref) {\n  const inputRef = useRef(null as any)\n  useImperativeHandle(ref, () => ({\n    focus: () => {\n      inputRef.current.focus()\n    }\n  }))\n  return <input ref={inputRef} />\n}\n\nconst FancyInputRef = forwardRef(FancyInput)\n\nconst useImperativeHandleDemo = () => {\n  const inputRef = useRef(null as any)\n\n  useEffect(() => {\n    inputRef.current.focus()\n  })\n\n  return <FancyInputRef ref={inputRef} />\n}\n```\n\n## useLayoutEffect\nå…¶å‡½æ•°ç­¾å ä¸ `useEffect` ç›¸åŒï¼Œä½†å®ƒä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ effectã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– DOM å¸ƒå±€å¹¶åŒæ­¥è§¦å‘é‡æ¸²æŸ“ã€‚åœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ä¹‹å‰å®Œæˆã€‚\n```js\nconst BlinkyRender = () => {\n  const [value, setValue] = useState(0);\n\n  useEffect(() => {\n    if (value === 0) {\n      setValue(10 + Math.random() * 200);\n    }\n  }, [value]);\n\n  return (\n    <div onClick={() => setValue(0)}>value: {value}</div>\n  );\n};\n```\nå½“æˆ‘ä»¬å¿«é€Ÿç‚¹å‡»æ—¶ï¼Œvalue ä¼šå‘ç”Ÿéšæœºå˜åŒ–ï¼Œä½† `useEffect` æ˜¯ UI å·²ç»æ¸²æŸ“åˆ°å±å¹•ä¸Šä»¥åæ‰ä¼šæ‰§è¡Œï¼Œvalue ä¼šå…ˆæ¸²æŸ“ä¸º 0ï¼Œç„¶ååœ¨æ¸²æŸ“æˆéšæœºæ•°ï¼Œå› æ­¤å±å¹•ä¼šå‡ºç°é—ªçƒã€‚\n```js\nuseLayoutEffect(() => {\n  if (value === 0) {\n    setValue(10 + Math.random() * 200);\n  }\n}, [value]);\n```\nç›¸æ¯”ä½¿ç”¨ `useEffect`ï¼Œå½“ç‚¹å‡» divï¼Œvalue æ›´æ–°ä¸º 0ï¼Œæ­¤æ—¶é¡µé¢å¹¶ä¸ä¼šæ¸²æŸ“ï¼Œè€Œæ˜¯ç­‰å¾… useLayoutEffect å†…éƒ¨çŠ¶æ€ä¿®æ”¹åï¼Œæ‰ä¼šå»æ›´æ–°é¡µé¢ï¼Œæ‰€ä»¥é¡µé¢ä¸ä¼šé—ªçƒã€‚\n\n## useDebugValue\n`useDebugValue` å¯ç”¨äºåœ¨ React å¼€å‘è€…å·¥å…·ä¸­æ˜¾ç¤ºè‡ªå®šä¹‰ hook çš„æ ‡ç­¾ã€‚\n```js\nfunction useFriendStatus() {\n  const [isOnline] = useState(null)\n  useDebugValue(isOnline ? 'Online' : 'Offline')\n\n  return isOnline\n}\n\nconst App = () => {\n  const isOnline = useFriendStatus()\n\n  return <div>{isOnline}</div>\n}\n```\nåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ ¼å¼åŒ–å€¼çš„æ˜¾ç¤ºå¯èƒ½æ˜¯ä¸€é¡¹å¼€é”€å¾ˆå¤§çš„æ“ä½œï¼Œå› æ­¤ï¼Œ`useDebugValue` æ¥å—ä¸€ä¸ªæ ¼å¼åŒ–å‡½æ•°ä½œä¸ºå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ã€‚è¯¥å‡½æ•°åªæœ‰åœ¨ Hook è¢«æ£€æŸ¥ï¼ˆæ‰“å¼€ React å¼€å‘è€…å·¥å…·ï¼‰æ—¶æ‰ä¼šè¢«è°ƒç”¨ã€‚å®ƒæ¥å— debug å€¼ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”ä¼šè¿”å›ä¸€ä¸ªæ ¼å¼åŒ–çš„æ˜¾ç¤ºå€¼ã€‚\nä¾‹å¦‚ï¼Œ ä¸€ä¸ªè¿”å› Date å€¼çš„è‡ªå®šä¹‰ Hook å¯ä»¥é€šè¿‡æ ¼å¼åŒ–å‡½æ•°æ¥é¿å…ä¸å¿…è¦çš„ toDateString å‡½æ•°è°ƒç”¨:\n```js\nuseDebugValue(date, date => date.toDateString());\n```\n\n## hooksä¸­çš„å‘\n1. ä¸è¦åœ¨å¾ªç¯ï¼Œæ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨Hookï¼Œå¿…é¡»å§‹ç»ˆåœ¨Reactå‡½æ•°çš„é¡¶å±‚ä½¿ç”¨Hookã€‚è¿™æ˜¯å› ä¸ºReactéœ€è¦åˆ©ç”¨è°ƒç”¨é¡ºåºæ¥æ­£ç¡®æ›´æ–°ç›¸åº”çš„çŠ¶æ€ï¼Œä»¥åŠè°ƒç”¨ç›¸åº”çš„é’©å­\nå‡½æ•°ã€‚ä¸€æ—¦åœ¨å¾ªç¯æˆ–æ¡ä»¶åˆ†æ”¯è¯­å¥ä¸­è°ƒç”¨Hookï¼Œå°±å®¹æ˜“å¯¼è‡´è°ƒç”¨é¡ºåºçš„ä¸ä¸€è‡´æ€§ï¼Œä»è€Œäº§ç”Ÿéš¾ä»¥é¢„æ–™åˆ°çš„åæœã€‚\n\n2. ä½¿ç”¨useStateæ—¶å€™ï¼Œä½¿ç”¨pushï¼Œpopï¼Œspliceç­‰ç›´æ¥æ›´æ”¹æ•°ç»„å¯¹è±¡çš„å‘ï¼Œä½¿ç”¨pushç›´æ¥æ›´æ”¹æ•°ç»„æ— æ³•è·å–åˆ°æ–°å€¼ï¼Œåº”è¯¥é‡‡ç”¨ææ„æ–¹å¼ï¼Œä½†æ˜¯åœ¨classé‡Œé¢\nä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ã€‚\n```js\nlet [num,setNums] = useState([0,1,2,3])\nconst test = () => {\n    // è¿™é‡Œå‘æ˜¯ç›´æ¥é‡‡ç”¨pushå»æ›´æ–°numï¼ŒsetNums(num)æ˜¯æ— æ³•æ›´æ–°numçš„ï¼Œå¿…é¡»ä½¿ç”¨num = [...num ,1]\n    num.push(1)\n    // num = [...num ,1]\n    setNums(num)\n}\n\n// classé‡‡ç”¨åŒæ ·çš„æ–¹å¼æ˜¯æ²¡æœ‰é—®é¢˜çš„\nthis.state.nums.push(1)\nthis.setState({\n    nums: this.state.nums\n})\n```\n\næ¯”å¯¹`eagerState`å’Œ`currentState`ï¼Œå¼•ç”¨ç±»å‹å½“ç„¶æ˜¯åŒä¸€ä¸ªå¼•ç”¨æ‰€ä»¥å½“ç„¶ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼Œå’Œ`pureComponent`åªè¿›è¡Œæµ…æ¯”è¾ƒçš„é€»è¾‘å·®ä¸å¤šã€‚(setNum,ä¾èµ–æ•°ç»„)\nå› ä¸ºæœ¬èº«æˆ‘ä»¬å°±æ˜¯ä¿®æ”¹çš„ state çš„ obj.nameï¼Œå› æ­¤åœ¨è¿™æ¬¡é—­åŒ…ä¸­ï¼Œè®¤ä¸ºä¼ è¿‡æ¥çš„æ–°çš„ state å…¶å®å’Œä¹‹å‰å¯¹æ¯”æ˜¯ç›¸åŒçš„ï¼ˆä¹‹å‰çš„ state æ˜¯æˆ‘ä»¬äººå·¥ä¿®æ”¹çš„å€¼ï¼‰ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œ\nå°±ä¸ä¼šå‡ºå‘æ¸²æŸ“ã€‚\n\n3. useStateè®¾ç½®çŠ¶æ€çš„æ—¶å€™ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡ç”Ÿæ•ˆï¼ŒåæœŸéœ€è¦æ›´æ–°çŠ¶æ€ï¼Œå¿…é¡»é€šè¿‡useEffectã€‚useEffectä½¿ç”¨setä¸€å®šè¦åŠ æ¡ä»¶åˆ¤æ–­å¦åˆ™ä¼šå‡ºç°æ­»å¾ªç¯ã€‚\n\n4. useEffectæ˜¯renderç»“æŸåï¼Œcallbackå‡½æ•°æ‰§è¡Œï¼Œä½†æ˜¯ä¸ä¼šé˜»æ–­æµè§ˆå™¨çš„æ¸²æŸ“ï¼Œç®—æ˜¯æŸç§å¼‚æ­¥çš„æ–¹å¼å§ã€‚ä½†æ˜¯classçš„componentDidMount å’ŒcomponentDidUpdateæ˜¯åŒæ­¥çš„,åœ¨renderç»“æŸåå°±è¿è¡Œ,useEffectåœ¨å¤§éƒ¨åˆ†åœºæ™¯ä¸‹éƒ½æ¯”classçš„æ–¹å¼æ€§èƒ½æ›´å¥½.\n\nuseLayoutEffecté‡Œé¢çš„callbackå‡½æ•°ä¼šåœ¨DOMæ›´æ–°å®Œæˆåç«‹å³æ‰§è¡Œï¼Œä½†æ˜¯ä¼šåœ¨æµè§ˆå™¨è¿›è¡Œä»»ä½•ç»˜åˆ¶ä¹‹å‰è¿è¡Œå®Œæˆï¼Œé˜»å¡äº†æµè§ˆå™¨çš„ç»˜åˆ¶.\n\n## useEffectä¾èµ–æ•°ç»„æ·±å…¥\n```js\n// <React.Fragment></React.Fragment>\n// <></>\n```\nç©ºæ•°ç»„å‰¯ä½œç”¨å›è°ƒå‡½æ•°åªè¿è¡Œä¸€æ¬¡ï¼Œå¹¶ä¸ä»£è¡¨ useEffect åªè¿è¡Œä¸€æ¬¡ã€‚åœ¨æ¯æ¬¡æ›´æ–°ä¸­ï¼ŒuseEffect ä¾ç„¶ä¼šæ¯æ¬¡éƒ½æ‰§è¡Œï¼Œåªä¸è¿‡å› ä¸ºä¼ é€’ç»™å®ƒçš„æ•°ç»„ä¾èµ–é¡¹æ˜¯ç©ºçš„ï¼Œå¯¼è‡´ React \næ¯æ¬¡æ£€æŸ¥çš„æ—¶å€™ï¼Œéƒ½æ²¡æœ‰å‘ç°ä¾èµ–çš„å˜åŒ–ï¼Œæ‰€ä»¥ä¸ä¼šé‡æ–°æ‰§è¡Œå›è°ƒã€‚\n\n> æ£€æŸ¥ä¾èµ–ï¼Œåªæ˜¯ç®€å•çš„æ¯”è¾ƒäº†ä¸€ä¸‹å€¼æˆ–è€…å¼•ç”¨æ˜¯å¦ç›¸ç­‰ã€‚\n\n1. ä»€ä¹ˆéƒ½ä¸ä¼ ï¼Œç»„ä»¶æ¯æ¬¡ render ä¹‹å useEffect éƒ½ä¼šè°ƒç”¨ï¼Œç›¸å½“äº componentDidMount å’Œ componentDidUpdateã€‚\n2. ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ [], åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œç›¸å½“äº componentDidMount å’Œ componentWillUnmountã€‚\n3. ä¼ å…¥ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…æ‹¬å˜é‡ï¼Œåªæœ‰è¿™äº›å˜é‡å˜åŠ¨æ—¶ï¼ŒuseEffect æ‰ä¼šæ‰§è¡Œã€‚\n\nReactä¸­åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰§è¡ŒuseEffectå†…ä»£ç æ˜¯é€šè¿‡Object.isè¿›è¡Œåˆ¤æ–­çš„ï¼Œè€Œè¿™ä¸ªåˆ¤æ–­æ–¹æ³•å¯¹äºå¯¹è±¡å’Œæ•°ç»„ä¹‹é—´çš„åˆ¤æ–­æ°¸è¿œè¿”å›falseã€‚\n\n## hookså®ç°è®¡æ—¶å™¨\næ³¨æ„ç¬¬ä¸€ä¸ªè®¡æ—¶å™¨é”™è¯¯çš„å†™æ³•ï¼Œåœ¨useEffecté‡Œé¢é‡å¤å®šä¹‰setIntervalï¼Œæ­£ç¡®å†™æ³•æ˜¯setIntervalåªå®šä¹‰ä¸€æ¬¡ï¼Œå®ƒçš„å›è°ƒå‡½æ•°ä¿å­˜çŠ¶æ€çš„æ›´æ–°ï¼Œé‡ç‚¹æ˜¯æŠŠcountæ›´æ–°å’Œ\nsetIntervalå®šä¹‰åˆ†å¼€ã€‚\n```js\nimport React from 'react'\nimport { useState,useRef,useEffect } from 'react'\n\n// é”™è¯¯çš„å†™æ³•\n// const CountTimer = () => {\n//     let [count, setCount] = useState(0)\n//     let CountTimer\n//     useEffect(() => {\n//         setInterval(() => {\n//             setCount(count+1)   \n//         })\n//         return () => window.clearInterval(CountTimer)\n//     }, [count])\n//     return (\n//         <React.Fragment>\n//             <div> {count} </div>\n//         </React.Fragment>\n//     )\n// }\n\n//æ­£ç¡®çš„å†™æ³•\nconst CountTimer = () => {\n    let [count, setCount] = useState(0)\n    let intervalCb = useRef(null)\n    let CountTimer\n    useEffect(() => {\n        intervalCb.current = () => {\n            setCount(count+1)   \n        }\n    }, [count])\n\n    useEffect(() => {\n        function itvFn() {\n            intervalCb.current()\n        }\n        CountTimer = window.setInterval(itvFn, 1000)\n        return () => window.clearInterval(CountTimer)\n    }, [])\n\n    const handleStop = () => {\n        window.clearInterval(CountTimer)\n    }\n    return (\n        <React.Fragment>\n            <div >{count}</div>\n            <div onClick={() => {handleStop()}}>åœæ­¢è®¡æ—¶</div>\n        </React.Fragment>\n    )\n}\n\nexport default CountTimer\n```\n\n## useMemoã€useCallbackã€useEffectçš„åŒºåˆ«\nuseMemoå’ŒuseEffectçš„æ‰§è¡Œæ—¶æœºæ˜¯ä¸ä¸€è‡´çš„ï¼šuseEffectæ‰§è¡Œçš„æ˜¯å‰¯ä½œç”¨ï¼Œæ‰€ä»¥ä¸€å®šæ˜¯åœ¨æ¸²æŸ“ä¹‹åæ‰§è¡Œçš„ï¼ŒuseMemoæ˜¯éœ€è¦æœ‰è¿”å›å€¼çš„ï¼Œè€Œè¿”å›å€¼å¯ä»¥ç›´æ¥å‚ä¸æ¸²æŸ“çš„ï¼Œæ‰€ä»¥\nuseMemoæ˜¯åœ¨æ¸²æŸ“æœŸé—´å®Œæˆçš„ï¼Œæœ‰è¿™æ ·ä¸€ä¸ªä¸€å‰ä¸€åçš„åŒºåˆ«ã€‚\n\nuseMemoè¿”å›çš„æ˜¯è®¡ç®—çš„ç»“æœå€¼ï¼Œç”¨äºç¼“å­˜è®¡ç®—åçš„çŠ¶æ€\nuseCallbackè¿”å›çš„æ˜¯å‡½æ•°ï¼Œä¸»è¦ç”¨æ¥ç¼“å­˜å‡½æ•°ï¼Œå› ä¸ºå‡½æ•°å¼ç»„ä»¶ä¸­çš„stateçš„å˜åŒ–éƒ½ä¼šå¯¼è‡´æ•´ä¸ªç»„ä»¶è¢«é‡æ–°åˆ·æ–°ï¼ˆå³ä½¿ä¸€äº›å‡½æ•°æ²¡æœ‰å¿…è¦è¢«åˆ·æ–°ï¼‰ï¼Œæ­¤æ—¶ç”¨useCallbackå°±ä¼šå°†\nå‡½æ•°è¿›è¡Œç¼“å­˜ï¼Œå‡å°‘æ¸²æŸ“æ—¶çš„æ€§èƒ½æŸè€—â€‹ï¼›\n\n## ä»“åº“ä»£ç \n\n[react-hooks-demo](https://github.com/cosyer/react-hooks-demo)\n\n## æ€»ç»“\n\nè¿™ç¯‡æ–‡ç« å°† React Hooks è¯­æ³•è¿›è¡Œäº†ç®€å•ä»‹ç»ï¼ŒHooks åŠŸèƒ½ååˆ†å¼ºå¤§ï¼Œå¦‚æœçœ‹å®Œæ–‡ç« è¿˜ä¸æ˜¯å¾ˆç†è§£çš„è¯ï¼Œå»ºè®®æŠŠè¿™äº› demo è‡ªå·±å†æ‰‹åŠ¨å®ç°ä¸€éï¼Œè¿™æ ·æ”¶è·ä¼šæ›´å¤šã€‚\nå¦‚æœæ–‡ç« å†…å®¹æœ‰å“ªäº›æè¿°é”™è¯¯æˆ–è€…ä¸æ¸…çš„åœ°æ–¹ï¼Œæ¬¢è¿å„ä½çº æ­£å¹¶ä¸€èµ·äº¤æµã€‚ğŸ‘ğŸ‘ğŸ‘\n","tags":["react"],"categories":["JS"]},{"title":"é¢è¯•é—®é¢˜é›†é”¦","url":"%2F2020%2F%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6.html","content":"\n## è¯·åšä¸€ä¸‹è‡ªæˆ‘ä»‹ç»\n**å›ç­”æç¤ºï¼š** ä¸€èˆ¬äººå›ç­”è¿™ä¸ªé—®é¢˜è¿‡äºå¹³å¸¸ï¼Œåªè¯´å§“åã€å¹´é¾„ã€å·¥ä½œç»éªŒï¼Œè¿™äº›åœ¨ç®€å†ä¸Šéƒ½æœ‰ã€‚å…¶å®ï¼Œä¼ä¸šæœ€å¸Œæœ›çŸ¥é“çš„æ˜¯æ±‚èŒè€…èƒ½å¦èƒœä»»å·¥ä½œï¼ŒåŒ…æ‹¬ï¼šæœ€å¼ºçš„æŠ€èƒ½ã€æœ€æ·±å…¥ç ”ç©¶çš„çŸ¥è¯†é¢†åŸŸã€ä¸ªæ€§ä¸­æœ€ç§¯æçš„éƒ¨åˆ†ã€åšè¿‡çš„æœ€æˆåŠŸçš„äº‹ï¼Œä¸»è¦çš„æˆå°±ç­‰ï¼Œè¦çªå‡ºç§¯æçš„ä¸ªæ€§å’Œåšäº‹çš„èƒ½åŠ›ï¼Œè¯´çš„åˆæƒ…åˆç†ä¼ä¸šæ‰ä¼šç›¸ä¿¡ã€‚\n\n## ä½ æœ€å¤§çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ\n**å›ç­”æç¤ºï¼š** æ²‰ç€å†·é™ã€æ¡ç†æ¸…æ¥šã€ç«‹åœºåšå®šã€ä¹äºåŠ©äººç­‰ï¼ŒåŠ ä¸Šä¾‹å­å¦‚ï¼šæˆ‘åœ¨XXç»è¿‡ä¸€åˆ°ä¸¤å¹´çš„åŸ¹è®­åŠé¡¹ç›®å®æˆ˜ï¼ŒåŠ ä¸Šå®ä¹ å·¥ä½œï¼Œæˆ‘æƒ³æˆ‘é€‚åˆè¿™ä»½å·¥ä½œã€‚\n\n## è¯´è¯´ä½ æœ€å¤§çš„ç¼ºç‚¹ï¼Ÿ\n**å›ç­”æç¤ºï¼š** è¿™ä¸ªé—®é¢˜ä¼ä¸šé—®çš„æ¦‚ç‡å¾ˆå¤§ï¼Œé€šå¸¸ä¸å¸Œæœ›å¬åˆ°ç›´æ¥å›ç­”çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆç­‰ï¼Œå¦‚æœæ±‚èŒè€…è¯´è‡ªå·±å°å¿ƒçœ¼ã€éå¸¸æ‡’ã€å·¥ä½œæ•ˆç‡ä½ï¼Œä¼ä¸šè‚¯å®šä¸ä¼šå½•ç”¨ä½ ã€‚è¦ä»è‡ªå·±çš„ä¼˜ç‚¹è¯´èµ·ï¼Œä¸­é—´åŠ ä¸€äº›å°ç¼ºç‚¹ï¼Œæœ€åå†æŠŠé—®ç­”è½¬å›åˆ°ä¼˜ç‚¹ä¸Šï¼Œçªå‡ºä¼˜ç‚¹çš„éƒ¨åˆ†ã€‚\n\n---\n<!--more-->\n\n## è¯´è¯´ä½ å¯¹åŠ ç­çš„çœ‹æ³•ï¼Ÿ\n**å›ç­”æç¤ºï¼š** å®é™…ä¸Šå¥½å¤šå…¬å¸é—®è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸è¯æ˜ä¸€å®šè¦åŠ ç­ï¼Œåªæ˜¯æƒ³æµ‹è¯•ä½ æ˜¯å¦æ„¿æ„ä¸ºå…¬å¸å¥‰çŒ®ã€‚\n\n**å›ç­”æ ·æœ¬ï¼š** å¦‚æœæ˜¯å·¥ä½œéœ€è¦æˆ‘ä¼šä¹‰ä¸å®¹è¾åŠ ç­ï¼Œæˆ‘ç°åœ¨å•èº«ï¼Œæ²¡æœ‰ä»»ä½•å®¶åº­è´Ÿæ‹…ï¼Œå¯ä»¥å…¨èº«å¿ƒçš„æŠ•å…¥å·¥ä½œã€‚ä½†åŒæ—¶ï¼Œæˆ‘ä¹Ÿä¼šæé«˜å·¥ä½œæ•ˆç‡ï¼Œå‡å°‘ä¸å¿…è¦çš„åŠ ç­ã€‚\n\n## è¯´è¯´ä½ å¯¹è–ªèµ„çš„è¦æ±‚ï¼Ÿ\n**å›ç­”æç¤ºï¼š** å¦‚æœä½ å¯¹è–ªèµ„çš„è¦æ±‚å¤ªä½ï¼Œé‚£æ˜¾ç„¶è´¬ä½è‡ªå·±çš„èƒ½åŠ›ï¼›å¦‚æœä½ å¯¹è–ªèµ„çš„è¦æ±‚å¤ªé«˜ï¼Œé‚£åˆä¼šæ˜¾å¾—ä½ åˆ†é‡è¿‡é‡ï¼Œå…¬å¸å—ç”¨ä¸èµ·ã€‚ä¸€äº›é›‡ä¸»é€šå¸¸éƒ½äº‹å…ˆå¯¹æ±‚è˜çš„èŒä½å®šä¸‹å¼€æ”¯é¢„ç®—ï¼Œå› è€Œä»–ä»¬ç¬¬ä¸€æ¬¡æå‡ºçš„ä»·é’±å¾€å¾€æ˜¯ä»–ä»¬æ‰€èƒ½ç»™äºˆçš„æœ€é«˜ä»·é’±ï¼Œä»–ä»¬é—®ä½ åªä¸è¿‡æƒ³è¯å®ä¸€ä¸‹è¿™ç¬”é’±æ˜¯å¦è¶³ä»¥å¼•èµ·ä½ å¯¹è¯¥å·¥ä½œçš„å…´è¶£ã€‚\n\n**å›ç­”æ ·æœ¬ï¼š**\n\nâ‘ æˆ‘å¯¹å·¥èµ„æ²¡æœ‰ç¡¬æ€§è¦æ±‚ï¼Œæˆ‘ç›¸ä¿¡è´µå…¬å¸ä¼šå‹å–„åˆç†ã€‚æˆ‘æ³¨é‡çš„æ˜¯æ‰¾åˆ°å·¥ä½œæœºä¼šï¼Œæ‰€ä»¥åªè¦æ¡ä»¶å…¬å¹³ï¼Œæˆ‘åˆ™ä¸ä¼šè®¡è¾ƒå¤ªå¤šã€‚\n\nâ‘¡æˆ‘å—è¿‡ç³»ç»Ÿçš„è½¯ä»¶ç¼–ç¨‹çš„è®­ç»ƒï¼Œä¸éœ€è¦è¿›è¡Œå¤§é‡çš„åŸ¹è®­ï¼Œè€Œä¸”æˆ‘æœ¬äººä¹Ÿå¯¹ç¼–ç¨‹ç‰¹åˆ«æ„Ÿå…´è¶£ã€‚å› æ­¤ï¼Œæˆ‘å¸Œæœ›å…¬å¸èƒ½æ ¹æ®æˆ‘çš„æƒ…å†µå’Œå¸‚åœºæ ‡å‡†çš„æ°´å¹³ï¼Œç»™æˆ‘åˆç†çš„è–ªæ°´ã€‚\n\nâ‘¢å¦‚æœä½ å¿…é¡»è‡ªå·±è¯´å‡ºå…·ä½“æ•°ç›®ï¼Œè¯·ä¸è¦è¯´ä¸€ä¸ªå®½æ³›çš„èŒƒå›´ï¼Œé‚£æ ·ä½ å°†åªèƒ½å¾—åˆ°æœ€ä½é™åº¦çš„æ•°å­—ã€‚æœ€å¥½ç»™å‡ºä¸€ä¸ªå…·ä½“çš„æ•°å­—ï¼Œè¿™æ ·è¡¨æ˜ä½ å·²ç»å¯¹å½“ä»Šçš„äººæ‰å¸‚åœºåšäº†è°ƒæŸ¥ï¼ŒçŸ¥é“åƒè‡ªå·±è¿™æ ·å­¦å†çš„é›‡å‘˜æœ‰ä»€ä¹ˆæ ·çš„ä»·å€¼ã€‚\n\n## åœ¨äº”å¹´å†…ï¼Œä½ çš„èŒä¸šè§„åˆ’ï¼Ÿ\n**å›ç­”æç¤ºï¼š** è¿™æ˜¯æ¯ä¸€ä¸ªåº”è˜è€…éƒ½ä¸å¸Œæœ›è¢«é—®åˆ°çš„é—®é¢˜ï¼Œä½†æ˜¯å‡ ä¹æ¯ä¸ªäººéƒ½ä¼šè¢«é—®åˆ°ï¼Œæ¯”è¾ƒå¤šçš„ç­”æ¡ˆæ˜¯â€œç®¡ç†è€…â€ã€‚å½“ç„¶ï¼Œè¯´å‡ºå…¶ä»–ä¸€äº›ä½ æ„Ÿå…´è¶£çš„èŒä½ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚è¦çŸ¥é“ï¼Œè€ƒå®˜æ€»æ˜¯å–œæ¬¢æœ‰è¿›å–å¿ƒçš„åº”è˜è€…ï¼Œæ­¤æ—¶å¦‚æœè¯´â€œä¸çŸ¥é“â€ï¼Œæˆ–è®¸å°±ä¼šä½¿ä½ ä¸§å¤±ä¸€ä¸ªå¥½æœºä¼šã€‚æœ€æ™®é€šçš„å›ç­”åº”è¯¥æ˜¯â€œæˆ‘å‡†å¤‡åœ¨æŠ€æœ¯é¢†åŸŸæœ‰æ‰€ä½œä¸ºâ€æˆ–â€œæˆ‘å¸Œæœ›èƒ½æŒ‰ç…§å…¬å¸çš„ç®¡ç†æ€è·¯å‘å±•â€ã€‚\n\n## ä½ æœ‹å‹å¯¹ä½ çš„è¯„ä»·?\n**å›ç­”æç¤ºï¼š** æƒ³ä»ä¾§é¢äº†è§£ä¸€ä¸‹ä½ çš„æ€§æ ¼åŠä¸äººç›¸å¤„çš„é—®é¢˜ã€‚\n\n**å›ç­”æ ·æœ¬ï¼š**\n\nâ‘ æˆ‘æœ‹å‹éƒ½è¯´æˆ‘æ˜¯ä¸€ä¸ªå¯ä»¥ä¿¡èµ–çš„äººã€‚å› ä¸ºï¼Œæˆ‘ä¸€æ—¦ç­”åº”åˆ«äººçš„äº‹æƒ…ï¼Œå°±ä¸€å®šä¼šåšåˆ°ã€‚å¦‚æœæˆ‘åšä¸åˆ°ï¼Œæˆ‘å°±ä¸ä¼šè½»æ˜“è®¸è¯ºã€‚\n\nâ‘¡æˆ‘è§‰çš„æˆ‘æ˜¯ä¸€ä¸ªæ¯”è¾ƒéšå’Œçš„äººï¼Œä¸ä¸åŒçš„äººéƒ½å¯ä»¥å‹å¥½ç›¸å¤„ã€‚åœ¨æˆ‘ä¸äººç›¸å¤„æ—¶ï¼Œæˆ‘æ€»æ˜¯èƒ½ç«™åœ¨åˆ«äººçš„è§’åº¦è€ƒè™‘é—®é¢˜ã€‚\n\n## ä½ è¿˜æœ‰ä»€ä¹ˆé—®é¢˜è¦é—®å—?\n**å›ç­”æç¤ºï¼š** ä¼ä¸šçš„è¿™ä¸ªé—®é¢˜çœ‹ä¸Šå»å¯æœ‰å¯æ— ï¼Œå…¶å®å¾ˆå…³é”®ï¼Œä¼ä¸šä¸å–œæ¬¢è¯´â€œæ²¡é—®é¢˜â€çš„äººï¼Œå› ä¸ºå…¶å¾ˆæ³¨é‡å‘˜å·¥çš„ä¸ªæ€§å’Œåˆ›æ–°èƒ½åŠ›ã€‚ä¼ä¸šä¸å–œæ¬¢æ±‚èŒè€…é—®ä¸ªäººç¦åˆ©ä¹‹ç±»çš„é—®é¢˜ï¼Œå¦‚æœæœ‰äººè¿™æ ·é—®ï¼šè´µå…¬å¸å¯¹æ–°å…¥å…¬å¸çš„å‘˜å·¥æœ‰æ²¡æœ‰ä»€ä¹ˆåŸ¹è®­é¡¹ç›®ï¼Œæˆ‘å¯ä»¥å‚åŠ å—ï¼Ÿæˆ–è€…è¯´è´µå…¬å¸çš„æ™‹å‡æœºåˆ¶æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿä¼ä¸šå°†å¾ˆæ¬¢è¿ï¼Œå› ä¸ºä½“ç°å‡ºä½ å¯¹å­¦ä¹ çš„çƒ­æƒ…å’Œå¯¹å…¬å¸çš„å¿ è¯šåº¦ä»¥åŠä½ çš„ä¸Šè¿›å¿ƒã€‚\n\n## å½•ç”¨åå‘ç°ä¸é€‚åˆè¿™ä¸ªèŒä½ï¼Œæ€ä¹ˆåŠ?\n**å›ç­”æç¤ºï¼š** å·¥ä½œä¸€æ®µæ—¶é—´å‘ç°å·¥ä½œä¸é€‚åˆï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š\n\nâ‘ å¦‚æœä½ ç¡®å®çƒ­çˆ±è¿™ä¸ªèŒä¸šï¼Œé‚£å°±è¦ä¸æ–­å­¦ä¹ ï¼Œè™šå¿ƒå‘é¢†å¯¼å’ŒåŒäº‹å­¦ä¹ ä¸šåŠ¡çŸ¥è¯†å’Œå¤„äº‹ç»éªŒï¼Œäº†è§£è¿™ä¸ªèŒä¸šçš„ç²¾ç¥å†…æ¶µå’ŒèŒä¸šè¦æ±‚ï¼ŒåŠ›äº‰å‡å°‘å·®è·ï¼›\n\nâ‘¡ä½ è§‰å¾—è¿™ä¸ªèŒä¸šå¯æœ‰å¯æ— ï¼Œé‚£è¿˜æ˜¯è¶æ—©æ¢ä¸ªèŒä¸šï¼Œå»å‘ç°é€‚åˆä½ çš„ï¼Œä½ çƒ­çˆ±çš„èŒä¸šï¼Œé‚£æ ·ä½ çš„å‘å±•å‰é€”ä¹Ÿä¼šå¤§ç‚¹ï¼Œå¯¹å•ä½å’Œä¸ªäººéƒ½æœ‰å¥½å¤„ã€‚\n\n## å·¥ä½œæ—¶è·Ÿé¢†å¯¼æ„è§ä¸åŒæ€ä¹ˆåŠ?\n**å›ç­”æ ·æœ¬ï¼š** \n\nâ‘ åŸåˆ™ä¸Šæˆ‘ä¼šå°Šé‡å’Œæœä»é¢†å¯¼çš„å·¥ä½œå®‰æ’ï¼ŒåŒæ—¶ç§åº•ä¸‹æ‰¾æœºä¼šä»¥è¯·æ•™çš„å£å»ï¼Œå©‰è½¬åœ°è¡¨è¾¾è‡ªå·±çš„æƒ³æ³•ï¼Œçœ‹çœ‹é¢†å¯¼æ˜¯å¦èƒ½æ”¹å˜æƒ³æ³•ã€‚\n\nâ‘¡å¦‚æœé¢†å¯¼æ²¡æœ‰é‡‡çº³æˆ‘çš„å»ºè®®ï¼Œæˆ‘ä¹ŸåŒæ ·ä¼šæŒ‰é¢†å¯¼çš„è¦æ±‚è®¤çœŸåœ°å»å®Œæˆè¿™é¡¹å·¥ä½œã€‚\n\nâ‘¢è¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå‡å¦‚é¢†å¯¼è¦æ±‚çš„æ–¹å¼è¿èƒŒåŸåˆ™ï¼Œæˆ‘ä¼šåšå†³æå‡ºåå¯¹æ„è§ï¼Œå¦‚é¢†å¯¼ä»å›ºæ‰§å·±è§ï¼Œæˆ‘ä¼šæ¯«ä¸çŠ¹è±«åœ°å†å‘ä¸Šçº§é¢†å¯¼åæ˜ ã€‚\n\n## å·¥ä½œå‡ºç°å¤±è¯¯å¹¶é€ æˆæŸå¤±ï¼Œä½ ä¼šæ€ä¹ˆåš?\n**å›ç­”æ ·æœ¬ï¼š** \n\nâ‘ æˆ‘æœ¬æ„æ˜¯ä¸ºå…¬å¸åŠªåŠ›å·¥ä½œï¼Œå¦‚æœé€ æˆç»æµæŸå¤±ï¼Œæˆ‘è®¤ä¸ºé¦–è¦çš„é—®é¢˜æ˜¯æƒ³æ–¹è®¾æ³•å»å¼¥è¡¥æˆ–æŒ½å›ç»æµæŸå¤±ã€‚å¦‚æœæˆ‘æ— èƒ½åŠ›è´Ÿè´£ï¼Œå¸Œæœ›å•ä½å¸®åŠ©è§£å†³ã€‚\n\nâ‘¡åˆ†æ¸…è´£ä»»ï¼Œå„è´Ÿå…¶è´£ï¼Œå¦‚æœæ˜¯æˆ‘çš„è´£ä»»ï¼Œæˆ‘ç”˜æ„¿å—ç½šï¼›å¦‚æœæ˜¯ä¸€ä¸ªæˆ‘è´Ÿè´£çš„å›¢é˜Ÿä¸­åˆ«äººçš„å¤±è¯¯ï¼Œä¹Ÿä¸èƒ½å¹¸ç¾ä¹ç¥¸ï¼Œä½œä¸ºä¸€ä¸ªå›¢é˜Ÿï¼Œéœ€è¦äº’ç›¸ææºå…±åŒæˆå·¥ä½œï¼Œå®‰æ…°åŒäº‹å¹¶ä¸”å¸®åŠ©åŒäº‹æŸ¥æ‰¾åŸå› æ€»ç»“ç»éªŒã€‚\n\nâ‘¢ä¸ªäººçš„ä¸€ç”Ÿä¸å¯èƒ½ä¸çŠ¯é”™è¯¯ï¼Œé‡è¦çš„æ˜¯èƒ½ä»è‡ªå·±çš„æˆ–è€…æ˜¯åˆ«äººçš„é”™è¯¯ä¸­å¸å–ç»éªŒæ•™è®­ï¼Œè¦æ£€è®¨è‡ªå·±çš„å·¥ä½œæ–¹æ³•ã€åˆ†æé—®é¢˜çš„æ·±åº¦å’ŒåŠ›åº¦ã€‚\n\n## è°ˆè°ˆä½ å¯¹è·³æ§½çš„çœ‹æ³•?\n**å›ç­”æ ·æœ¬ï¼š** \n\nâ‘ æ­£å¸¸çš„â€œè·³æ§½â€èƒ½å¤Ÿä¿ƒè¿›äººæ‰åˆç†æµåŠ¨ï¼Œåº”è¯¥æ”¯æŒã€‚\n\nâ‘¡é¢‘ç¹çš„è·³æ§½å¯¹å•ä½å’Œä¸ªäººåŒæ–¹éƒ½ä¸åˆ©ï¼Œåº”è¯¥åå¯¹ã€‚\n\n##å’ŒåŒäº‹ã€ä¸Šå¸éš¾ä»¥ç›¸å¤„ï¼Œä½ æ€ä¹ˆåŠ?\n**å›ç­”æ ·æœ¬ï¼š** \n\nâ‘ æˆ‘ä¼šæœä»é¢†å¯¼çš„æŒ‡æŒ¥ï¼Œé…åˆåŒäº‹çš„å·¥ä½œã€‚\n\nâ‘¡æˆ‘ä¼šä»è‡ªèº«æ‰¾åŸå› ï¼Œä»”ç»†åˆ†ææ˜¯ä¸æ˜¯è‡ªå·±å·¥ä½œåšå¾—ä¸å¥½ã€‚è¿˜è¦çœ‹çœ‹æ˜¯ä¸æ˜¯ä¸ºäººå¤„ä¸–æ–¹é¢åšå¾—ä¸å¥½ï¼Œå¦‚æœæ˜¯è¿™æ ·çš„è¯æˆ‘ä¼šåŠªåŠ›æ”¹æ­£ã€‚\n\nâ‘¢å¦‚æœæˆ‘æ‰¾ä¸åˆ°åŸå› ï¼Œæˆ‘ä¼šæ‰¾æœºä¼šè·Ÿä»–ä»¬æ²Ÿé€šï¼Œè¯·ä»–ä»¬æŒ‡å‡ºæˆ‘çš„ä¸è¶³ï¼ŒåŠæ—¶æ”¹æ­£ã€‚\n\nâ‘£ä½œä¸ºä¼˜ç§€çš„å‘˜å·¥ï¼Œåº”è¯¥æ—¶åˆ»ä»¥å¤§å±€ä¸ºé‡ï¼Œå³ä½¿åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œé¢†å¯¼å’ŒåŒäº‹å¯¹æˆ‘ä¸ç†è§£ï¼Œæˆ‘ä¹Ÿä¼šåšå¥½æœ¬èŒå·¥ä½œï¼Œè™šå¿ƒå‘ä»–ä»¬å­¦ä¹ ï¼Œæˆ‘ç›¸ä¿¡ï¼Œä»–ä»¬ä¼šçœ‹è§æˆ‘çš„åŠªåŠ›ã€‚\n\n##ä¸Šçº§é¢†å¯¼æŠ¢äº†ä½ çš„åŠŸåŠ³æ€ä¹ˆåŠ?\n**å›ç­”æ ·æœ¬ï¼š** é¦–å…ˆæˆ‘ä¸ä¼šæ‰¾é‚£ä½ä¸Šçº§é¢†å¯¼è¯´æ˜è¿™äº‹ï¼Œæˆ‘ä¼šä¸»åŠ¨æ‰¾æˆ‘çš„ä¸»ç®¡é¢†å¯¼æ¥æ²Ÿé€šï¼Œå› ä¸ºæ²Ÿé€šæ˜¯è§£å†³äººé™…å…³ç³»çš„æœ€å¥½åŠæ³•ï¼Œä½†ç»“æœä¼šæœ‰ä¸¤ç§ï¼š\n\nâ‘ æˆ‘çš„ä¸»ç®¡é¢†å¯¼è®¤è¯†åˆ°è‡ªå·±çš„é”™è¯¯ï¼Œæˆ‘æƒ³æˆ‘ä¼šè§†å…·ä½“æƒ…å†µå†³å®šæ˜¯å¦åŸè°…ä»–ã€‚\n\nâ‘¡ä»–æ›´åŠ å˜æœ¬åŠ å‰çš„æ¥å¨èƒæˆ‘ï¼Œé‚£æˆ‘ä¼šæ¯«ä¸çŠ¹è±«åœ°æ‰¾æˆ‘çš„ä¸Šçº§é¢†å¯¼åæ˜ æ­¤äº‹ï¼Œå› ä¸ºä»–è¿™æ ·åšä¼šé€ æˆè´Ÿé¢å½±å“ï¼Œå¯¹ä»Šåçš„å·¥ä½œä¸åˆ©ã€‚\n\n## åŒäº‹å­¤ç«‹ä½ ï¼Œä½ æ€ä¹ˆåŠ?\n**å›ç­”æ ·æœ¬ï¼š** \n\nâ‘ æ£€è®¨ä¸€ä¸‹è‡ªå·±æ˜¯ä¸æ˜¯å¯¹å·¥ä½œçš„çƒ­å¿ƒåº¦è¶…è¿‡åŒäº‹é—´äº¤å¾€çš„çƒ­å¿ƒäº†ï¼ŒåŠ å¼ºåŒäº‹é—´çš„äº¤å¾€åŠå…±åŒçš„å…´è¶£çˆ±å¥½ã€‚\n\nâ‘¡å·¥ä½œä¸­ï¼Œåˆ‡å‹¿ä¼¤å®³åˆ«äººçš„è‡ªå°Šå¿ƒã€‚\n\nâ‘¢ä¸åœ¨é¢†å¯¼å‰æ‹¨å¼„æ˜¯éã€‚\n\n## ä½ æœ€è¿‘æ˜¯å¦å‚åŠ äº†åŸ¹è®­è¯¾ç¨‹?\n**å›ç­”æç¤ºï¼š** è‡ªè´¹å‚åŠ ï¼Œå°±æ˜¯XXçš„åŸ¹è®­è¯¾ç¨‹ï¼ˆå¯ä»¥å¤šè°ˆè°ˆè‡ªå·±å­¦çš„æŠ€æœ¯ï¼‰ã€‚\n\n## ä½ å¯¹äºæˆ‘ä»¬å…¬å¸äº†è§£å¤šå°‘?\n**å›ç­”æç¤ºï¼š** åœ¨å»å…¬å¸é¢è¯•å‰ä¸Šç½‘æŸ¥ä¸€ä¸‹è¯¥å…¬å¸ä¸»è¥ä¸šåŠ¡ã€‚å¯ç±»ä¼¼å›ç­”ï¼šè´µå…¬å¸æœ‰æ„æ”¹å˜ç­–ç•¥ï¼ŒåŠ å¼ºä¸å›½å¤–å¤§å‚çš„OEMåˆä½œï¼Œè‡ªæœ‰å“ç‰Œçš„éƒ¨åˆ†åˆ™é€è¿‡æµ·å¤–ç»é”€å•†ã€‚\n\n## ä½ æœ€æ“…é•¿çš„æŠ€æœ¯æ–¹å‘æ˜¯ä»€ä¹ˆ?\n**å›ç­”æç¤ºï¼š** è¯´å’Œä½ è¦åº”è˜çš„èŒä½ç›¸å…³çš„æŠ€æœ¯ï¼Œè¡¨ç°ä¸€ä¸‹è‡ªå·±çš„çƒ­è¯šæ²¡æœ‰ä»€ä¹ˆåå¤„ã€‚\n\n## è¯·è¯´å‡ºä½ é€‰æ‹©è¿™ä»½å·¥ä½œçš„åŠ¨æœº?\n**å›ç­”æç¤ºï¼š** è¿™æ˜¯æƒ³çŸ¥é“é¢è¯•è€…å¯¹è¿™ä»½å·¥ä½œçš„çƒ­å¿±åŠç†è§£åº¦ï¼Œå¹¶ç­›é€‰å› ä¸€æ—¶å…´èµ·è€Œæ¥åº”è¯•çš„äººï¼Œå¦‚æœæ˜¯æ— ç»éªŒè€…ï¼Œå¯ä»¥å¼ºè°ƒâ€œå°±ç®—èŒç§ä¸åŒï¼Œä¹Ÿå¸Œæœ›æœ‰æœºä¼šå‘æŒ¥ä¹‹å‰çš„ç»éªŒâ€ã€‚\n\n**å›ç­”æ ·æœ¬ï¼š** å› ä¸ºæˆ‘å¾ˆçƒ­çˆ±è¿™ä¸ªå·¥ä½œï¼Œå¾ˆæƒ³ä»äº‹è¿™æ–¹é¢çš„å·¥ä½œã€‚\n\n## ä½ èƒ½ä¸ºæˆ‘ä»¬å…¬å¸å¸¦æ¥ä»€ä¹ˆå‘¢?\n**å›ç­”æç¤ºï¼š** \n\nâ‘ å‡å¦‚ä½ å¯ä»¥çš„è¯ï¼Œè¯•ç€å‘Šè¯‰ä»–ä»¬ä½ å¯ä»¥å‡ä½ä»–ä»¬çš„è´¹ç”¨â€œæˆ‘å·²ç»æ¥å—è¿‡XXè¿‘ä¸¤å¹´ä¸“ä¸šçš„åŸ¹è®­ï¼Œç«‹åˆ»å°±å¯ä»¥ä¸Šå²—å·¥ä½œâ€ã€‚\n\nâ‘¡ä¼ä¸šå¾ˆæƒ³çŸ¥é“æœªæ¥çš„å‘˜å·¥èƒ½ä¸ºä¼ä¸šåšä»€ä¹ˆï¼Œæ±‚èŒè€…åº”å†æ¬¡é‡å¤è‡ªå·±çš„ä¼˜åŠ¿ï¼Œç„¶åè¡¨ç¤ºï¼šâ€œå°±æˆ‘çš„èƒ½åŠ›ï¼Œæˆ‘å¯ä»¥åšä¸€ä¸ªä¼˜ç§€çš„å‘˜å·¥åœ¨ç»„ç»‡ä¸­å‘æŒ¥èƒ½åŠ›ï¼Œç»™ç»„ç»‡å¸¦æ¥é«˜æ•ˆç‡å’Œæ›´å¤šçš„æ”¶ç›Šâ€ã€‚ä¼ä¸šå–œæ¬¢æ±‚èŒè€…å°±ç”³è¯·çš„èŒä½è¡¨æ˜è‡ªå·±çš„èƒ½åŠ›ï¼Œæ¯”å¦‚ç”³è¯·è¥é”€ä¹‹ç±»çš„èŒä½ï¼Œå¯ä»¥è¯´ï¼šâ€œæˆ‘å¯ä»¥å¼€å‘å¤§é‡çš„æ–°å®¢æˆ·ï¼ŒåŒæ—¶ï¼Œå¯¹è€å®¢æˆ·åšæ›´å…¨é¢å‘¨åˆ°çš„æœåŠ¡ï¼Œå¼€å‘è€å®¢æˆ·çš„æ–°éœ€æ±‚å’Œæ¶ˆè´¹ã€‚â€ ç­‰ç­‰ã€‚\n\n## æœ€èƒ½æ¦‚æ‹¬ä½ è‡ªå·±çš„ä¸‰ä¸ªè¯?\n**å›ç­”æ ·æœ¬ï¼š** æˆ‘ç»å¸¸ç”¨çš„ä¸‰ä¸ªè¯æ˜¯ï¼šé€‚åº”èƒ½åŠ›å¼ºï¼Œæœ‰è´£ä»»å¿ƒå’Œåšäº‹æœ‰å§‹ç»ˆï¼Œå¹¶ç»“åˆå…·ä½“ä¾‹å­å‘ä¸»è€ƒå®˜è§£é‡Šã€‚\n\n## ä½œä¸ºè¢«é¢è¯•è€…ç»™æˆ‘æ‰“ä¸€ä¸‹åˆ†?\n**å›ç­”æç¤ºï¼š** è¯•ç€åˆ—å‡ºå››ä¸ªä¼˜ç‚¹å’Œä¸€ä¸ªéå¸¸éå¸¸éå¸¸å°çš„ç¼ºç‚¹ï¼ˆå¯ä»¥æŠ±æ€¨ä¸€ä¸‹è®¾æ–½ï¼Œæ²¡æœ‰æ˜ç¡®è´£ä»»äººçš„ç¼ºç‚¹æ˜¯ä¸ä¼šæœ‰äººä»‹æ„çš„ï¼‰ã€‚\n\n## ä½ æ€ä¹ˆç†è§£ä½ åº”è˜çš„èŒä½?\n**å›ç­”æç¤ºï¼š** å¯ä»¥æŠŠå²—ä½èŒè´£å’Œä»»åŠ¡åŠå·¥ä½œæ€åº¦é˜è¿°ä¸‹ã€‚\n\n## å–œæ¬¢è¿™ä»½å·¥ä½œçš„å“ªä¸€ç‚¹?\n**å›ç­”æç¤ºï¼š** åœ¨å›ç­”é¢è¯•å®˜è¿™ä¸ªé—®é¢˜æ—¶ä¸èƒ½å¤ªç›´æ¥å°±æŠŠè‡ªå·±å¿ƒç†çš„è¯è¯´å‡ºæ¥ï¼Œå°¤å…¶æ˜¯è–ªèµ„æ–¹é¢çš„é—®é¢˜ï¼Œä¸è¿‡ä¸€äº›æ— ä¼¤å¤§é›…çš„å›ç­”æ˜¯ä¸é”™çš„è€ƒè™‘ï¼Œå¦‚äº¤é€šæ–¹ä¾¿ï¼Œå·¥ä½œæ€§è´¨åŠå†…å®¹é¢‡èƒ½ç¬¦åˆè‡ªå·±çš„å…´è¶£ç­‰ç­‰éƒ½æ˜¯ä¸é”™çš„ç­”æ¡ˆï¼Œä¸è¿‡å¦‚æœè¿™æ—¶è‡ªå·±èƒ½ä»”ç»†æ€è€ƒå‡ºè¿™ä»½å·¥ä½œçš„ä¸ä¼—ä¸åŒä¹‹å¤„ï¼Œç›¸ä¿¡åœ¨é¢è¯•ä¸Šä¼šå¤§å¤§åŠ åˆ†ã€‚\n\n## ä¸ºä»€ä¹ˆè¦ç¦»èŒ?\n**å›ç­”æç¤ºï¼š** \n\nâ‘ å›ç­”è¿™ä¸ªé—®é¢˜æ—¶ä¸€å®šè¦å°å¿ƒï¼Œå°±ç®—åœ¨å‰ä¸€ä¸ªå·¥ä½œå—åˆ°å†å¤§çš„å§”å±ˆï¼Œå¯¹å…¬å¸æœ‰å¤šå°‘çš„æ€¨è¨€éƒ½åƒä¸‡ä¸è¦è¡¨ç°å‡ºæ¥ï¼Œå°¤å…¶è¦é¿å…å¯¹å…¬å¸æœ¬èº«ä¸»ç®¡çš„æ‰¹è¯„ï¼Œé¿å…é¢è¯•å®˜çš„è´Ÿé¢æƒ…ç»ªåŠå°è±¡ã€‚å»ºè®®æ­¤æ—¶æœ€å¥½çš„å›ç­”æ–¹å¼æ˜¯å°†é—®é¢˜å½’å’åœ¨è‡ªå·±èº«ä¸Šï¼Œä¾‹å¦‚è§‰å¾—å·¥ä½œæ²¡æœ‰å­¦ä¹ å‘å±•çš„ç©ºé—´ï¼Œè‡ªå·±æƒ³åœ¨é¢è¯•å·¥ä½œçš„ç›¸å…³äº§ä¸šä¸­å¤šåŠ å­¦ä¹ ï¼Œæˆ–æ˜¯å‰ä¸€ä»½å·¥ä½œä¸è‡ªå·±çš„ç”Ÿæ¶¯è§„åˆ’ä¸åˆç­‰ç­‰ï¼Œå›ç­”çš„ç­”æ¡ˆæœ€å¥½æ˜¯ç§¯ææ­£é¢çš„ã€‚\n\nâ‘¡æˆ‘å¸Œæœ›èƒ½è·å¾—ä¸€ä»½æ›´å¥½çš„å·¥ä½œï¼Œå¦‚æœæœºä¼šæ¥ä¸´ï¼Œæˆ‘ä¼šæŠ“ä½ã€‚æˆ‘è§‰å¾—ç›®å‰çš„å·¥ä½œï¼Œå·²ç»è¾¾åˆ°é¡¶å³°ï¼Œå³æ²¡æœ‰å‡è¿æœºä¼šã€‚\n\n## è¯´è¯´ä½ å¯¹è¡Œä¸šã€æŠ€æœ¯å‘å±•è¶‹åŠ¿çš„çœ‹æ³•?\n**å›ç­”æç¤ºï¼š** ä¼ä¸šå¯¹è¿™ä¸ªé—®é¢˜å¾ˆæ„Ÿå…´è¶£ï¼Œåªæœ‰æœ‰å¤‡è€Œæ¥çš„æ±‚èŒè€…èƒ½å¤Ÿè¿‡å…³ã€‚æ±‚èŒè€…å¯ä»¥ç›´æ¥åœ¨ç½‘ä¸ŠæŸ¥æ‰¾å¯¹ä½ æ‰€ç”³è¯·çš„è¡Œä¸šéƒ¨é—¨çš„ä¿¡æ¯ï¼Œåªæœ‰æ·±å…¥äº†è§£æ‰èƒ½äº§ç”Ÿç‹¬ç‰¹çš„è§è§£ã€‚ä¼ä¸šè®¤ä¸ºæœ€èªæ˜çš„æ±‚èŒè€…æ˜¯å¯¹æ‰€é¢è¯•çš„å…¬å¸é¢„å…ˆäº†è§£å¾ˆå¤šï¼ŒåŒ…æ‹¬å…¬å¸å„ä¸ªéƒ¨é—¨ï¼Œå‘å±•æƒ…å†µï¼Œåœ¨é¢è¯•å›ç­”é—®é¢˜çš„æ—¶å€™å¯ä»¥æåˆ°æ‰€äº†è§£çš„æƒ…å†µï¼Œä¼ä¸šæ¬¢è¿è¿›å…¥ä¼ä¸šçš„äººæ˜¯â€œçŸ¥å·±â€ï¼Œè€Œä¸æ˜¯â€œç›²äººâ€ã€‚\n\n## å¯¹å·¥ä½œçš„æœŸæœ›ä¸ç›®æ ‡ä½•åœ¨?\n**å›ç­”æç¤ºï¼š** è¿™æ˜¯é¢è¯•è€…ç”¨æ¥è¯„æ–­æ±‚èŒè€…æ˜¯å¦å¯¹è‡ªå·±æœ‰ä¸€å®šç¨‹åº¦çš„æœŸæœ›ã€å¯¹è¿™ä»½å·¥ä½œæ˜¯å¦äº†è§£çš„é—®é¢˜ã€‚ å¯¹äºå·¥ä½œæœ‰ç¡®å®å­¦ä¹ ç›®æ ‡çš„äººé€šå¸¸å­¦ä¹ è¾ƒå¿«ï¼Œå¯¹äºæ–°å·¥ä½œè‡ªç„¶è¾ƒå®¹æ˜“è¿›å…¥çŠ¶å†µï¼Œè¿™æ—¶å»ºè®®ä½ ï¼Œæœ€å¥½é’ˆå¯¹å·¥ä½œçš„æ€§è´¨æ‰¾å‡ºä¸€ä¸ªç¡®å®çš„ç­”æ¡ˆï¼Œå¦‚ä¸šåŠ¡å‘˜çš„å·¥ä½œå¯ä»¥è¿™æ ·å›ç­”ï¼šâ€œæˆ‘çš„ç›®æ ‡æ˜¯èƒ½æˆä¸ºä¸€ä¸ªè¶…çº§ä¸šåŠ¡å‘˜ï¼Œå°†å…¬å¸çš„äº§å“å¹¿æ³›çš„æ¨é”€å‡ºå»ï¼Œè¾¾åˆ°æœ€å¥½çš„ä¸šç»©æˆæ•ˆï¼›ä¸ºè¾¾åˆ°è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä¸€å®šä¼šåŠªåŠ›å­¦ä¹ ï¼Œè€Œæˆ‘ç›¸ä¿¡ä»¥æˆ‘è®¤çœŸè´Ÿè´£çš„æ€åº¦ï¼Œä¸€å®šå¯ä»¥è¾¾åˆ°è¿™ä¸ªç›®æ ‡ã€‚â€ å…¶ä»–ç±»çš„å·¥ä½œä¹Ÿå¯ä»¥æ¯”ç…§è¿™ä¸ªæ–¹å¼å›ç­”ï¼Œåªè¦åœ¨ç›®æ ‡æ–¹é¢ç¨å¾®ä¿®æ”¹ä¸€ä¸‹å°±å¯ä»¥äº†ã€‚\n\n## è°ˆè°ˆä½ çš„å®¶åº­?\n**å›ç­”æç¤ºï¼š** ä¼ä¸šé¢è¯•æ—¶è¯¢é—®å®¶åº­é—®é¢˜ä¸æ˜¯éè¦çŸ¥é“æ±‚èŒè€…å®¶åº­çš„æƒ…å†µï¼Œè€Œæ˜¯è¦äº†è§£å®¶åº­èƒŒæ™¯å¯¹æ±‚èŒè€…çš„å¡‘é€ å’Œå½±å“ã€‚ä¼ä¸šå¸Œæœ›å¬åˆ°çš„é‡ç‚¹ä¹Ÿåœ¨äºå®¶åº­å¯¹æ±‚èŒè€…çš„ç§¯æå½±å“ã€‚\n\n**å›ç­”æ ·æœ¬ï¼š** æˆ‘å¾ˆçˆ±æˆ‘çš„å®¶åº­ï¼Œæˆ‘ä»¬å®¶ä¸€å‘å¾ˆå’Œç¦ï¼Œè™½ç„¶æˆ‘çš„çˆ¶äº²å’Œæ¯äº²éƒ½æ˜¯æ™®é€šäººï¼Œä½†æ˜¯ä»å°ï¼Œæˆ‘å°±çœ‹åˆ°æˆ‘çˆ¶äº²èµ·æ—©è´ªé»‘ï¼Œæ¯å¤©å·¥ä½œç‰¹åˆ«å‹¤åŠ³ï¼Œä»–çš„è¡ŒåŠ¨æ— å½¢ä¸­åŸ¹å…»äº†æˆ‘è®¤çœŸè´Ÿè´£çš„æ€åº¦å’Œå‹¤åŠ³çš„ç²¾ç¥ã€‚æˆ‘æ¯äº²ä¸ºäººå–„è‰¯ï¼Œå¯¹äººçƒ­æƒ…ï¼Œç‰¹åˆ«ä¹äºåŠ©äººï¼Œæ‰€ä»¥åœ¨å•ä½äººç¼˜å¾ˆå¥½ï¼Œå¥¹çš„ä¸€è¨€ä¸€è¡Œä¹Ÿä¸€ç›´åœ¨æ•™å¯¼æˆ‘åšäººçš„é“ç†ã€‚\n\n## ä½ è®¤ä¸ºè‡ªå·±ç”³è¯·è¿™ä¸ªèŒä½è¿˜æ¬ ç¼ºä»€ä¹ˆ?\n**å›ç­”æç¤ºï¼š** ä¼ä¸šå–œæ¬¢é—®æ±‚èŒè€…å¼±ç‚¹ï¼Œä½†ç²¾æ˜çš„æ±‚èŒè€…ä¸€èˆ¬ä¸ç›´æ¥å›ç­”ã€‚\n\n**å›ç­”æ ·æœ¬ï¼š** ç»§ç»­é‡å¤è‡ªå·±çš„ä¼˜åŠ¿ï¼Œç„¶åè¯´ï¼šâ€œå¯¹äºè¿™ä¸ªèŒä½å’Œæˆ‘çš„èƒ½åŠ›æ¥è¯´ï¼Œæˆ‘ç›¸ä¿¡è‡ªå·±æ˜¯å¯ä»¥èƒœä»»çš„ï¼Œåªæ˜¯ç¼ºä¹ç»éªŒï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥è¿›å…¥å…¬å¸ä»¥åä»¥æœ€çŸ­çš„æ—¶é—´æ¥è§£å†³ï¼Œæˆ‘çš„å­¦ä¹ èƒ½åŠ›å¾ˆå¼ºï¼Œæˆ‘ç›¸ä¿¡å¯ä»¥å¾ˆå¿«èå…¥å…¬å¸çš„ä¼ä¸šæ–‡åŒ–ï¼Œè¿›å…¥å·¥ä½œçŠ¶æ€ã€‚\n\n## ä½ æ¬£èµå“ªç§æ€§æ ¼çš„äºº?\n**å›ç­”æç¤ºï¼š** è¯šå®ã€ä¸æ­»æ¿è€Œä¸”å®¹æ˜“ç›¸å¤„çš„äººã€æœ‰å®é™…è¡ŒåŠ¨çš„äººï¼ŒåŠ ä¸Šå…·ä½“ä¾‹å­ã€‚\n\n## ä½ é€šå¸¸å¦‚ä½•å¤„ç†åˆ«äººçš„æ‰¹è¯„?\n**å›ç­”æç¤ºï¼š** \n\nâ‘ æ²‰é»˜æ˜¯é‡‘ï¼Œä¸å¿…è¯´ä»€ä¹ˆï¼Œå¦åˆ™æƒ…å†µæ›´ç³Ÿï¼Œä¸è¿‡æˆ‘ä¼šæ¥å—å»ºè®¾æ€§çš„æ‰¹è¯„ã€‚\n\nâ‘¡æˆ‘ä¼šç­‰å¤§å®¶å†·é™ä¸‹æ¥å†è®¨è®ºã€‚\n\n## æ€æ ·å¯¹å¾…è‡ªå·±çš„å¤±è´¥?\n**å›ç­”æç¤ºï¼š** å¤§æ„ï¼šæˆ‘ä»¬ç”Ÿæ¥éƒ½ä¸æ˜¯åå…¨åç¾çš„ï¼Œæˆ‘ç›¸ä¿¡æˆ‘æœ‰ç¬¬äºŒä¸ªæœºä¼šæ”¹æ­£æˆ‘çš„é”™è¯¯ã€‚\n\n## ä»€ä¹ˆä¼šè®©ä½ æœ‰æˆå°±æ„Ÿ?\n**å›ç­”æç¤ºï¼š** ä¸ºè´µå…¬å¸ç«­åŠ›æ•ˆåŠ³ï¼Œå°½æˆ‘æ‰€èƒ½ï¼Œå®Œæˆä¸€ä¸ªé¡¹ç›®ã€‚\n\n## çœ¼ä¸‹ä½ ç”Ÿæ´»ä¸­æœ€é‡è¦çš„æ˜¯ä»€ä¹ˆ?\n**å›ç­”æç¤ºï¼š** å¯¹æˆ‘æ¥è¯´ï¼Œèƒ½åœ¨è¿™ä¸ªé¢†åŸŸæ‰¾åˆ°å·¥ä½œæ˜¯æœ€é‡è¦çš„ï¼Œèƒ½åœ¨è´µå…¬å¸ä»»èŒå¯¹æˆ‘è¯´æœ€é‡è¦ã€‚\n\n## ä½ ä¸ºä»€ä¹ˆæ„¿æ„åˆ°æˆ‘ä»¬å…¬å¸æ¥å·¥ä½œ?\n**å›ç­”æç¤ºï¼š** å¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œä½ è¦æ ¼å¤–å°å¿ƒï¼Œå¦‚æœä½ å·²ç»å¯¹è¯¥å•ä½ä½œäº†ç ”ç©¶ï¼Œä½ å¯ä»¥å›ç­”ä¸€äº›è¯¦ç»†çš„åŸå› ã€‚\n\n**å›ç­”æ ·æœ¬ï¼š** \n\nâ‘ å…¬å¸æœ¬èº«é«˜æŠ€æœ¯å¼€å‘ç¯å¢ƒå¾ˆå¸å¼•æˆ‘æˆ‘åŒå…¬å¸å‡ºç”Ÿåœ¨åŒæ ·çš„æ—¶ä»£ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿè¿›å…¥ä¸€å®¶ä¸æˆ‘å…±åŒæˆé•¿çš„å…¬å¸ã€‚\n\nâ‘¡ä½ ä»¬å…¬å¸ä¸€ç›´éƒ½ç¨³å®šå‘å±•ï¼Œåœ¨è¿‘å‡ å¹´æ¥åœ¨å¸‚åœºä¸Šæœ‰ç«äº‰åŠ›ã€‚æˆ‘è®¤ä¸ºè´µå…¬å¸èƒ½å¤Ÿç»™æˆ‘æä¾›ä¸€ä¸ªä¸ä¼—ä¸åŒçš„å‘å±•é“è·¯ã€‚\n\n## ä½ å’Œåˆ«äººå‘ç”Ÿè¿‡äº‰æ‰§å—?\n**å›ç­”æç¤ºï¼š** è¿™æ˜¯é¢è¯•ä¸­æœ€é™©æ¶çš„é—®é¢˜ï¼Œå…¶å®æ˜¯è€ƒå®˜å¸ƒä¸‹çš„ä¸€ä¸ªé™·é˜±ï¼ŒæˆåŠŸè§£å†³çŸ›ç›¾æ˜¯ä¸€ä¸ªåä½œå›¢ä½“ä¸­æˆå‘˜æ‰€å¿…å¤‡çš„èƒ½åŠ›ã€‚å‡å¦‚ä½ å·¥ä½œåœ¨ä¸€ä¸ªæœåŠ¡è¡Œä¸šï¼Œè¿™ä¸ªé—®é¢˜ç®€ç›´æˆäº†æœ€é‡è¦çš„ä¸ªç¯èŠ‚ã€‚ä½ æ˜¯å¦èƒ½è·å¾—è¿™ä»½å·¥ä½œï¼Œå°†å–å†³äºè¿™ä¸ªé—®é¢˜çš„å›ç­”ã€‚è€ƒå®˜å¸Œæœ›çœ‹åˆ°ä½ æ˜¯æˆç†Ÿä¸”ä¹äºå¥‰çŒ®çš„ã€‚ä»–ä»¬é€šè¿‡è¿™ä¸ªé—®é¢˜äº†è§£ä½ çš„æˆç†Ÿåº¦å’Œå¤„ä¸–èƒ½åŠ›ã€‚åœ¨æ²¡æœ‰å¤–ç•Œå¹²æ¶‰çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡å¦¥åçš„æ–¹å¼æ¥è§£å†³æ‰æ˜¯æ­£ç¡®ç­”æ¡ˆã€‚\n\n## ä½ åšè¿‡çš„å“ªä»¶äº‹æœ€ä»¤è‡ªå·±æ„Ÿåˆ°éª„å‚²?\n**å›ç­”æç¤ºï¼š** è¿™æ˜¯è€ƒå®˜ç»™ä½ çš„ä¸€ä¸ªæœºä¼šï¼Œè®©ä½ å±•ç¤ºè‡ªå·±æŠŠæ¡å‘½è¿çš„èƒ½åŠ›ã€‚è¿™ä¼šä½“ç°ä½ æ½œåœ¨çš„é¢†å¯¼èƒ½åŠ›ä»¥åŠä½ è¢«æå‡çš„å¯èƒ½æ€§ã€‚å‡å¦‚ä½ åº”è˜äºä¸€ä¸ªæœåŠ¡æ€§è´¨çš„å•ä½ï¼Œä½ å¾ˆå¯èƒ½ä¼šè¢«é‚€è¯·èšé¤ã€‚è®°ä½ï¼šä½ çš„å‰é€”å–å†³äºä½ çš„çŸ¥è¯†ã€ä½ çš„ç¤¾äº¤èƒ½åŠ›å’Œç»¼åˆè¡¨ç°ã€‚\n\n## å¯¹è¿™é¡¹å·¥ä½œï¼Œä½ æœ‰å“ªäº›å¯é¢„è§çš„å›°éš¾?\n**å›ç­”æç¤ºï¼š** \n\nâ‘ ä¸å®œç›´æ¥è¯´å‡ºå…·ä½“çš„å›°éš¾ï¼Œå¦åˆ™å¯èƒ½ä»¤å¯¹æ–¹æ€€ç–‘åº”è˜è€…ä¸è¡Œã€‚\n\nâ‘¡å¯ä»¥å°è¯•è¿‚å›æˆ˜æœ¯ï¼Œè¯´å‡ºåº”è˜è€…å¯¹å›°éš¾æ‰€æŒæœ‰çš„æ€åº¦å·¥ä½œä¸­å‡ºç°ä¸€äº›å›°éš¾æ˜¯æ­£å¸¸çš„ï¼Œä¹Ÿæ˜¯éš¾å…çš„ï¼Œä½†æ˜¯åªè¦æœ‰åšå¿ä¸æ‹”çš„æ¯…åŠ›ã€è‰¯å¥½çš„åˆä½œç²¾ç¥ä»¥åŠäº‹å‰å‘¨å¯†è€Œå……åˆ†çš„å‡†å¤‡ï¼Œä»»ä½•å›°éš¾éƒ½æ˜¯å¯ä»¥å…‹æœã€‚\n\n## å½•ç”¨åä½ å°†æ€æ ·å¼€å±•å·¥ä½œ?\n**å›ç­”æç¤ºï¼š** \n\nâ‘ å¦‚æœåº”è˜è€…å¯¹äºåº”è˜çš„èŒä½ç¼ºä¹è¶³å¤Ÿçš„äº†è§£ï¼Œæœ€å¥½ä¸è¦ç›´æ¥è¯´å‡ºè‡ªå·±å¼€å±•å·¥ä½œçš„å…·ä½“åŠæ³•ã€‚\n\nâ‘¡å¯ä»¥å°è¯•é‡‡ç”¨è¿‚å›æˆ˜æœ¯æ¥å›ç­”ï¼Œå¦‚â€œé¦–å…ˆå¬å–é¢†å¯¼çš„æŒ‡ç¤ºå’Œè¦æ±‚ï¼Œç„¶åå°±æœ‰å…³æƒ…å†µè¿›è¡Œäº†è§£å’Œç†Ÿæ‚‰ï¼Œæ¥ä¸‹æ¥åˆ¶å®šä¸€ä»½è¿‘æœŸçš„å·¥ä½œè®¡åˆ’å¹¶æŠ¥é¢†å¯¼æ‰¹å‡†ï¼Œæœ€åæ ¹æ®è®¡åˆ’å¼€å±•å·¥ä½œã€‚â€ã€‚\n\n## ä½ å¸Œæœ›ä¸ä»€ä¹ˆæ ·çš„ä¸Šçº§å…±äº‹?\n**å›ç­”æç¤ºï¼š** \n\nâ‘ é€šè¿‡åº”è˜è€…å¯¹ä¸Šçº§çš„â€œå¸Œæœ›â€å¯ä»¥åˆ¤æ–­å‡ºåº”è˜è€…å¯¹è‡ªæˆ‘è¦æ±‚çš„æ„è¯†ï¼Œè¿™æ—¢ä¸Šä¸€ä¸ªé™·é˜±ï¼Œåˆæ˜¯ä¸€æ¬¡æœºä¼šã€‚\n\nâ‘¡æœ€å¥½å›é¿å¯¹ä¸Šçº§å…·ä½“çš„å¸Œæœ›ï¼Œå¤šè°ˆå¯¹è‡ªå·±çš„è¦æ±‚ã€‚å¦‚â€œåšä¸ºåˆšæ­¥å…¥ç¤¾ä¼šçš„æ–°äººï¼Œæˆ‘åº”è¯¥å¤šè¦æ±‚è‡ªå·±å°½å¿«ç†Ÿæ‚‰ç¯å¢ƒã€é€‚åº”ç¯å¢ƒï¼Œè€Œä¸åº”è¯¥å¯¹ç¯å¢ƒæå‡ºä»€ä¹ˆè¦æ±‚ï¼Œåªè¦èƒ½å‘æŒ¥æˆ‘çš„ä¸“é•¿å°±å¯ä»¥äº†ã€‚\n\n## ä½ å·¥ä½œç»éªŒæ¬ ç¼ºï¼Œå¦‚ä½•èƒ½èƒœä»»è¿™é¡¹å·¥ä½œ?\n**å›ç­”æç¤ºï¼š** \n\nâ‘ å¦‚æœæ‹›è˜å•ä½å¯¹åº”å±Šæ¯•ä¸šç”Ÿçš„åº”è˜è€…æå‡ºè¿™ä¸ªé—®é¢˜ï¼Œè¯´æ˜æ‹›è˜å…¬å¸å¹¶ä¸çœŸæ­£åœ¨ä¹ç»éªŒï¼Œå…³é”®çœ‹åº”è˜è€…æ€æ ·å›ç­”ã€‚\n\nâ‘¡å¯¹è¿™ä¸ªé—®é¢˜çš„å›ç­”æœ€å¥½è¦ä½“ç°å‡ºåº”è˜è€…çš„è¯šæ³ã€æœºæ™ºã€æœæ•¢åŠæ•¬ä¸šã€‚\n\n**å›ç­”æ ·æœ¬ï¼š** ä½œä¸ºåº”å±Šæ¯•ä¸šç”Ÿï¼Œåœ¨å·¥ä½œç»éªŒæ–¹é¢çš„ç¡®ä¼šæœ‰æ‰€æ¬ ç¼ºï¼Œå› æ­¤åœ¨è¯»ä¹¦æœŸé—´æˆ‘ä¸€ç›´åˆ©ç”¨å„ç§æœºä¼šåœ¨è¿™ä¸ªè¡Œä¸šé‡Œåšå…¼èŒã€‚æˆ‘ä¹Ÿå‘ç°ï¼Œå®é™…å·¥ä½œè¿œæ¯”ä¹¦æœ¬çŸ¥è¯†ä¸°å¯Œã€å¤æ‚ã€‚ä½†æˆ‘æœ‰è¾ƒå¼ºçš„è´£ä»»å¿ƒã€é€‚åº”èƒ½åŠ›å’Œå­¦ä¹ èƒ½åŠ›ï¼Œè€Œä¸”æ¯”è¾ƒå‹¤å¥‹ï¼Œæ‰€ä»¥åœ¨å…¼èŒä¸­å‡èƒ½åœ†æ»¡å®Œæˆå„é¡¹å·¥ä½œï¼Œä»ä¸­è·å–çš„ç»éªŒä¹Ÿä»¤æˆ‘å—ç›Šéæµ…ã€‚è¯·è´µå…¬å¸æ”¾å¿ƒï¼Œå­¦æ ¡æ‰€å­¦åŠå…¼èŒçš„å·¥ä½œç»éªŒä½¿æˆ‘ä¸€å®šèƒ½èƒœä»»è¿™ä¸ªèŒä½ã€‚\n\n## ä½ ä¼šæ€æ ·è·å¾—åŒäº‹çš„å¸®åŠ©?\n**å›ç­”æç¤ºï¼š** æ¯ä¸ªå…¬å¸éƒ½åœ¨ä¸æ–­å˜åŒ–å‘å±•çš„è¿‡ç¨‹ä¸­ï¼Œä½ å½“ç„¶å¸Œæœ›ä½ çš„å‘˜å·¥ä¹Ÿæ˜¯è¿™æ ·ã€‚ä½ å¸Œæœ›å¾—åˆ°é‚£äº›å¸Œæœ›å¹¶æ¬¢è¿å˜åŒ–çš„äººï¼Œå› ä¸ºè¿™äº›æ˜ç™½ï¼Œä¸ºäº†å…¬å¸çš„å‘å±•ï¼Œå˜åŒ–æ˜¯å…¬å¸æ—¥å¸¸ç”Ÿæ´»ä¸­é‡è¦ç»„æˆéƒ¨åˆ†ã€‚è¿™æ ·çš„å‘˜å·¥å¾€å¾€å¾ˆå®¹æ˜“é€‚åº”å…¬å¸çš„å˜åŒ–ï¼Œå¹¶ä¼šå¯¹å˜åŒ–åšå‡ºç§¯æçš„å“åº”ã€‚\n\n## å¦‚æœä½ æ²¡è¢«å½•ç”¨ï¼Œä½ æ€ä¹ˆæ‰“ç®—?\n**å›ç­”æ ·æœ¬ï¼š** ç°åœ¨çš„ç¤¾ä¼šæ˜¯ä¸€ä¸ªç«äº‰çš„ç¤¾ä¼šï¼Œä»è¿™æ¬¡é¢è¯•ä¸­ä¹Ÿå¯çœ‹å‡ºè¿™ä¸€ç‚¹ï¼Œæœ‰ç«äº‰å°±å¿…ç„¶æœ‰ä¼˜åŠ£ï¼Œæœ‰æˆåŠŸå¿…å®šå°±ä¼šæœ‰å¤±è´¥ã€‚å¾€å¾€æˆåŠŸçš„èƒŒåæœ‰è®¸å¤šçš„å›°éš¾å’ŒæŒ«æŠ˜ï¼Œå¦‚æœè¿™æ¬¡å¤±è´¥äº†ä¹Ÿä»…ä»…æ˜¯ä¸€æ¬¡è€Œå·²ï¼Œåªæœ‰ç»è¿‡ç»éªŒç»å†çš„ç§¯ç´¯æ‰èƒ½å¡‘é€ å‡ºä¸€ä¸ªå®Œå…¨çš„æˆåŠŸè€…ã€‚æˆ‘ä¼šä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ¥æ­£ç¡®çœ‹å¾…è¿™æ¬¡å¤±è´¥ï¼šâ‘ è¦æ•¢äºé¢å¯¹ï¼Œé¢å¯¹è¿™æ¬¡å¤±è´¥ä¸æ°”é¦ï¼Œæ¥å—å·²ç»å¤±å»äº†è¿™æ¬¡æœºä¼šå°±ä¸ä¼šå›å¤´è¿™ä¸ªç°å®ï¼Œä»å¿ƒç†æ„å¿—å’Œç°å‡ºå¯¹è¿™æ¬¡å¤±è´¥çš„æŠµæŠ—åŠ›ã€‚è¦æœ‰è‡ªä¿¡ï¼Œç›¸ä¿¡è‡ªå·±ç»å†äº†è¿™æ¬¡ä¹‹åç»è¿‡åŠªåŠ›ä¸€å®šèƒ½è¡Œï¼Œèƒ½å¤Ÿè¶…è¶Šè‡ªæˆ‘ã€‚â‘¡å–„äºåæ€ï¼Œå¯¹äºè¿™æ¬¡é¢è¯•ç»éªŒè¦è®¤çœŸæ€»ç»“ï¼Œæ€è€ƒå‰–æï¼Œèƒ½å¤Ÿä»è‡ªèº«çš„è§’åº¦æ‰¾å·®è·æ­£ç¡®å¯¹è‡ªå·±ï¼Œå®äº‹æ±‚æ˜¯åœ°è¯„ä»·è‡ªå·±ï¼Œè¾©è¯çš„çœ‹å¾…è‡ªå·±çš„é•¿çŸ­å¾—å¤±ï¼Œåšä¸€ä¸ªæ˜ç™½äººã€‚â‘¢èµ°å‡ºé˜´å½±ï¼Œå…‹æœè¿™ä¸€æ¬¡å¤±è´¥å¸¦ç»™è‡ªå·±çš„å¿ƒç†å‹åŠ›ï¼Œæ—¶åˆ»ç‰¢è®°è‡ªå·±å¼±ç‚¹ï¼Œé˜²æ‚£äºæœªç„¶ï¼ŒåŠ å¼ºå­¦ä¹ ï¼Œæé«˜è‡ªèº«ç´ è´¨ã€‚â‘£è®¤çœŸå·¥ä½œï¼Œå›åˆ°åŸå•ä½å²—ä½ä¸Šåï¼Œè¦å®å®åœ¨åœ¨ã€è¸è¸å®å®åœ°å·¥ä½œï¼Œä¸‰åå…­è¡Œè¡Œè¡Œå‡ºçŠ¶å…ƒï¼Œäº‰å–åœ¨æœ¬å²—ä½ä¸Šåšå‡ºä¸€å®šçš„æˆç»©ã€‚â‘¤å†æ¥å†å‰ï¼Œä»¥åå¦‚æœæœ‰æœºä¼šæˆ‘ä»ç„¶åå†æ¬¡å‚åŠ ç«äº‰ã€‚\n\n## æœ€ä»¤ä½ æ²®ä¸§çš„äº‹æƒ…?\n**å›ç­”æ ·æœ¬ï¼š** æ›¾ç»æ¥è§¦è¿‡ä¸€ä¸ªå®¢æˆ·ï¼ŒåŸæœ¬å°±æœ‰è€³é—»ä»–ä»¥æŒ‘å‰”å‡ºåï¼Œæ‰€ä»¥äº‹å‰çš„å‡†å¤‡åŠŸå¤«åšå¾—ååˆ†å……åˆ†ï¼Œä¹ŸæŠ•å…¥äº†ç›¸å½“å¤šçš„æ—¶é—´ä¸ç²¾åŠ›ï¼Œæœ€åå®¢æˆ·è™½ç„¶å¹¶æ²¡æœ‰ç…§å•å…¨æ”¶ï¼Œä½†æ˜¯æ¥å—çš„ç¨‹åº¦å·²ç»å‡ºä¹æˆ‘ä»¬æ„æ–™ä¹‹å¤–äº†ã€‚åŸä»¥ä¸ºä»æ­¤å¯ä»¥åˆä½œæ„‰å¿«ï¼Œå´å¾—çŸ¥å®¢æˆ·æœ€åå› ä¸ºé¢„ç®—å…³ç³»é€‰æ‹©äº†å¦ä¸€å®¶ä»£ç†å•†ï¼Œä¹‹å‰çš„åŠªåŠ›å› è€Œä»˜è¯¸æµæ°´ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘è¿˜æ˜¯ä»è¿™æ¬¡çš„ç»éªŒå­¦åˆ°å¾ˆå¤šï¼Œå¦‚å¯¹è¯¥äº§ä¸šçš„äº†è§£ï¼Œæ•´ä¸ªteamçš„é»˜å¥‘ä¹Ÿæ›´å¥½äº†ã€‚\n\n## æƒ³è¿‡åˆ›ä¸šå—?\n**å›ç­”æç¤ºï¼š** è¿™ä¸ªé—®é¢˜å¯ä»¥æ˜¾ç¤ºä½ çš„å†²åŠ²ï¼Œä½†å¦‚æœä½ çš„å›ç­”æ˜¯â€œæœ‰â€çš„è¯ï¼Œåƒä¸‡å°å¿ƒï¼Œä¸‹ä¸€ä¸ªé—®é¢˜å¯èƒ½å°±æ˜¯ï¼šé‚£ä¹ˆä¸ºä»€ä¹ˆä½ ä¸è¿™æ ·åšå‘¢?\n\n## ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åœ¨ä¼—å¤šçš„é¢è¯•è€…ä¸­é€‰æ‹©ä½ ?\n**å›ç­”æç¤ºï¼š** åˆ«è¿‡åº¦å¹å˜˜è‡ªå·±çš„èƒ½åŠ›ï¼Œæˆ–ä¿¡å£å¼€æ²³åœ°ä¹±å¼€æ”¯ç¥¨ï¼Œä¾‹å¦‚ä¸€å®šä¼šä¸ºè¯¥å…¬å¸å¸¦æ¥å¤šå°‘é’±çš„ä¸šåŠ¡ç­‰ï¼Œè¿™æ ·å¾ˆå®¹æ˜“ç»™äººä¸€ç§çˆ±è¯´å¤§è¯ã€ä¸åˆ‡å®é™…çš„æ„Ÿè§‰ã€‚\n\n**å›ç­”æ ·æœ¬ï¼š** æ ¹æ®æˆ‘å¯¹è´µå…¬å¸çš„äº†è§£ï¼Œä»¥åŠæˆ‘åœ¨è¿™ä»½å·¥ä½œä¸Šæ‰€ç´¯ç§¯çš„ä¸“ä¸šã€ç»éªŒåŠäººè„‰ï¼Œç›¸ä¿¡æ­£æ˜¯è´µå…¬å¸æ‰€æ‰¾å¯»çš„äººæ‰ã€‚è€Œæˆ‘åœ¨å·¥ä½œæ€åº¦ã€EQä¸Šï¼Œä¹Ÿæœ‰åœ†èã€æˆç†Ÿçš„ä¸€é¢ï¼Œå’Œä¸»ç®¡ã€åŒäº‹éƒ½èƒ½åˆä½œæ„‰å¿«ã€‚\n\n## é™¤äº†æœ¬å…¬å¸å¤–ï¼Œè¿˜åº”è˜äº†å“ªäº›å…¬å¸?\n**å›ç­”æç¤ºï¼š** è¿™æ˜¯ç›¸å½“å¤šå…¬å¸ä¼šé—®çš„é—®é¢˜ï¼Œå…¶ç”¨æ„æ˜¯è¦æ¦‚ç•¥çŸ¥é“åº”å¾è€…çš„æ±‚èŒå¿—å‘ï¼Œæ‰€ä»¥è¿™å¹¶éç»å¯¹æ˜¯è´Ÿé¢ç­”æ¡ˆï¼Œå°±ç®—ä¸ä¾¿è¯´å‡ºå…¬å¸åç§°ï¼Œä¹Ÿåº”å›ç­”â€œé”€å”®åŒç§äº§å“çš„å…¬å¸â€ï¼Œå¦‚æœåº”è˜çš„å…¶ä»–å…¬å¸æ˜¯ä¸åŒä¸šç•Œï¼Œå®¹æ˜“è®©äººäº§ç”Ÿæ— æ³•ä¿¡ä»»çš„æ„Ÿè§‰ã€‚\n\n## ä½ å¹¶éæ¯•ä¸šäºåç‰Œé™¢æ ¡?\n**å›ç­”æ ·æœ¬ï¼š** æ˜¯å¦æ¯•ä¸šäºåç‰Œé™¢æ ¡ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æœ‰èƒ½åŠ›å®Œæˆæ‚¨äº¤ç»™æˆ‘çš„å·¥ä½œï¼Œæˆ‘æ¥å—äº†XXçš„èŒä¸šåŸ¹è®­ï¼ŒæŒæ¡çš„æŠ€èƒ½å®Œå…¨å¯ä»¥èƒœä»»è´µå…¬å¸ç°åœ¨å·¥ä½œï¼Œè€Œä¸”æˆ‘æ¯”ä¸€äº›åç‰Œé™¢æ ¡çš„åº”å±Šæ¯•ä¸šç”Ÿçš„åŠ¨æ‰‹èƒ½åŠ›è¿˜è¦å¼ºï¼Œæˆ‘æƒ³æˆ‘æ›´é€‚åˆè´µå…¬å¸è¿™ä¸ªèŒä½ã€‚\n\n## æ€æ ·çœ‹å¾…å­¦å†å’Œèƒ½åŠ›?\n**å›ç­”æ ·æœ¬ï¼š** å­¦å†æˆ‘æƒ³åªè¦æ˜¯å¤§å­¦ä¸“ç§‘çš„å­¦å†ï¼Œå°±è¡¨æ˜è§‰å¾—æˆ‘å…·å¤‡äº†æ ¹æœ¬çš„å­¦ä¹ èƒ½åŠ›ã€‚å‰©ä¸‹çš„ï¼Œä½ æ˜¯å­¦å£«ä¹Ÿå¥½ï¼Œè¿˜æ˜¯åšå£«ä¹Ÿå¥½ï¼Œå¯¹äºè¿™ä¸€ç‚¹çš„è®¨è®ºï¼Œä¸æ˜¯çœ‹ä½ å­¦äº†å¤šå°‘çŸ¥è¯†ï¼Œè€Œæ˜¯çœ‹ä½ åœ¨è¿™ä¸ªé¢†åŸŸä¸Šå‘æŒ¥äº†ä»€ä¹ˆï¼Œä¹Ÿå°±æ˜¯æ‰€è¯´çš„èƒ½åŠ›é—®é¢˜ã€‚ä¸€ä¸ªäººå·¥ä½œèƒ½åŠ›çš„é«˜ä½ç›´æ¥å†³å®šå…¶èŒåœºå‘½è¿ï¼Œè€Œå­¦å†çš„é«˜ä½åªæ˜¯è¿›å…¥ä¸€ä¸ªä¼ä¸šçš„æ•²é—¨ç –ï¼Œå¦‚æœå…¬å¸æŠŠå­¦å†å¡åœ¨åšå£«ä¸Šæˆ‘å°±æ— æ³•è¿›å…¥è´µå…¬å¸ï¼Œå½“ç„¶è¿™ä¸ä¸€å®šåªæ˜¯æˆ‘ä¸ªäººçš„æŸå¤±ï¼Œå¦‚æœä¸€ä¸ªä¸“ç§‘ç”Ÿéƒ½èƒ½å®Œæˆçš„å·¥ä½œï¼Œæ‚¨åˆä½•å¿…éè¦æ‹›è˜ä¸€ä½åšå£«ç”Ÿå‘¢?\n\n## è°ˆè°ˆå¦‚ä½•é€‚åº”åŠå…¬å®¤å·¥ä½œçš„æ–°ç¯å¢ƒ?\n**å›ç­”æ ·æœ¬ï¼š** \n\nâ‘ åŠå…¬å®¤é‡Œæ¯ä¸ªäººéƒ½æœ‰å„è‡ªçš„å²—ä½ä¸èŒè´£ï¼Œä¸å¾—æ“…ç¦»å²—ä½ã€‚\n\nâ‘¡æ ¹æ®é¢†å¯¼æŒ‡ç¤ºå’Œå·¥ä½œå®‰æ’ï¼Œåˆ¶å®šå·¥ä½œè®¡åˆ’ï¼Œæå‰é¢„å¤‡ï¼Œå¹¶æŒ‰è®¡åˆ’å®Œæˆã€‚\n\nâ‘¢å¤šè¯·ç¤ºå¹¶åŠæ—¶æ±‡æŠ¥ï¼Œé‡åˆ°ä¸æ˜ç™½çš„è¦è™šå¿ƒè¯·æ•™ã€‚â‘£æŠ“é—´éš™æ—¶é—´ï¼Œå¤šå­¦ä¹ ï¼ŒåŠªåŠ›æé«˜è‡ªå·±çš„æ”¿æ²»ç´ è´¨å’Œä¸šåŠ¡æ°´å¹³ã€‚\n\n## è°ˆè°ˆå¯¹è¿™ä¸ªèŒåŠ¡çš„æœŸè®¸?\n**å›ç­”æç¤ºï¼š** å›ç­”å‰ä¸å¦¨å…ˆè¯¢é—®å…¬å¸å¯¹è¿™é¡¹èŒåŠ¡çš„è´£ä»»è®¤å®šåŠå½’å±ï¼Œå› ä¸ºæ¯ä¸€å®¶å…¬å¸çš„çŠ¶å†µä¸å°½ç›¸åŒï¼Œä»¥å…è¯´äº†ä¸€å †ç†æƒ³æŠ±è´Ÿå´å‘ç°ç‰›å¤´ä¸å¯¹é©¬å˜´ã€‚\n\n**å›ç­”æ ·æœ¬ï¼š** å¸Œæœ›èƒ½å€Ÿæ­¤å‘æŒ¥æˆ‘çš„æ‰€å­¦åŠä¸“é•¿ï¼ŒåŒæ—¶ä¹Ÿå¸æ”¶è´µå…¬å¸åœ¨è¿™æ–¹é¢çš„ç»éªŒï¼Œå°±å…¬å¸ã€æˆ‘ä¸ªäººè€Œè¨€ï¼Œç¼”é€ åŒèµ¢çš„å±€é¢ã€‚\n\n## ä½•æ—¶å¯ä»¥åˆ°èŒ?\n**å›ç­”æç¤ºï¼š** å¤§å¤šæ•°ä¼ä¸šä¼šå…³å¿ƒå°±èŒæ—¶é—´ï¼Œæœ€å¥½æ˜¯å›ç­”ï¼šâ€œå¦‚æœè¢«å½•ç”¨çš„è¯ï¼Œåˆ°èŒæ—¥å¯ä»¥æŒ‰å…¬å¸è§„å®šä¸Šç­â€ï¼Œä½†æ˜¯å¦‚æœè¿˜æœªè¾å»ä¸Šä¸€ä¸ªå·¥ä½œã€ä¸Šç­æ—¶é—´åˆå¤ªè¿‘ï¼Œä¼¼ä¹æœ‰äº›å¼ºäººæ‰€éš¾ï¼Œå› ä¸ºäº¤æ¥è‡³å°‘è¦ä¸€ä¸ªæœˆçš„æ—¶é—´ï¼Œåº”è¿›ä¸€æ­¥è¯´æ˜åŸå› ï¼Œå½•å–å…¬å¸åº”è¯¥ä¼šé€šèçš„ã€‚\n","tags":["é¢è¯•"],"categories":["çŸ¥è¯†"]},{"title":"ä¸‰æ å¸ƒå±€æ€»ç»“ï¼ˆå·¦å³å›ºå®šå®½åº¦ ä¸­é—´è‡ªé€‚åº”ï¼‰","url":"%2F2020%2F%E4%B8%89%E6%A0%8F%E5%B8%83%E5%B1%80%E6%80%BB%E7%BB%93.html","content":"\nåœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€(å…¶å®æ˜¯ä¸€å›äº‹)éƒ½æ˜¯å®ç°çš„ä¸‰æ å¸ƒå±€ã€‚\n\n## æµ®åŠ¨å¸ƒå±€(float + margin)\n```css\n<div class=\"container\">\n    <div class=\"left\">Left</div>\n     <!-- å³æ éƒ¨åˆ†è¦å†™åœ¨ä¸­é—´å†…å®¹ä¹‹å‰ -->\n    <div class=\"right\">Right</div>\n    <div class=\"main\">Main</div>\n</div>\n\nbody,html,.container{\n    height: 100%;\n    padding:0;\n    margin: 0;\n}\n/*å·¦è¾¹æ å·¦æµ®åŠ¨*/\n.left{\n    float:left;\n    height:100%;\n    width:200px;\n    background:#333;\n}\n/*ä¸­é—´æ è‡ªé€‚åº”*/\n.main{\n    height:100%;\n    margin:0 200px;\n    background: red;\n}\n/*å³è¾¹æ å³æµ®åŠ¨*/\n.right{\n    float:right;\n    height:100%;\n    width:200px;\n    background:#333;\n}\n```\n- ä¼˜ç‚¹ï¼šå¿«æ· ç®€å• å…¼å®¹æ€§è¾ƒå¥½\n- ç¼ºç‚¹: æœ‰å±€é™æ€§ è„±ç¦»æ–‡æ¡£æµ éœ€è¦æ¸…é™¤æµ®åŠ¨ç­‰\n\n---\n<!--more-->\n\n## ç»å¯¹å¸ƒå±€(position)\n```css\n<div class=\"container\">\n    <div class=\"left\">Left</div>\n    <div class=\"main\">Main</div>\n    <div class=\"right\">Right</div>\n</div>\n\nbody,html,.container{\n    height: 100%;\n    padding: 0;\n    margin: 0;\n    overflow: hidden;\n}\n/*å·¦å³è¿›è¡Œç»å¯¹å®šä½*/\n.left,.right{\n    position: absolute;\n    height:100%;\n    top: 0;\n    background: #333;\n}\n.left{\n    left: 0;\n    width: 200px;\n}\n.right{\n    right: 0;\n    width: 200px;\n}\n/*ä¸­é—´ç”¨marginç©ºå‡ºå·¦å³å…ƒç´ æ‰€å çš„ç©ºé—´*/\n.main{\n    height:100%;\n    margin: 0 200px;\n    background: red;\n}\n/*æˆ–è€…ä¸­é—´ä¹Ÿè¿›è¡Œç»å¯¹å®šä½*/\n.main{\n    position: absolute;\n    height:100%;\n    left: 200px;\n    right:200px;\n    background: red;\n}\n```\n- ä¼˜ç‚¹ï¼šç®€å•ç²—æš´\n- ç¼ºç‚¹: è„±ç¦»æ–‡æ¡£æµ é«˜åº¦æœªçŸ¥ä¼šå‡ºç°é—®é¢˜ å¯ç”¨æ€§å·®\n\n## å¼¹æ€§ç›’å­å¸ƒå±€(flex)\n```css\n<div class=\"container\">\n    <div class=\"left\">Left</div>\n    <div class=\"main\">Main</div>\n    <div class=\"right\">Right</div>\n</div>\n\nbody,html{\n    height: 100%;\n    padding: 0;\n    margin: 0;\n    overflow: hidden;\n}\n.container{\n    display: flex;\n}\n.left{\n    width:200px;\n    background: red;\n}\n.main{\n    flex: 1;\n    background: blue;\n}\n.right{\n    width:200px;\n    background: red;\n}\n```\n- ä¼˜ç‚¹ï¼šæ¯”è¾ƒå®Œç¾ ç§»åŠ¨ç«¯é¦–é€‰\n- ç¼ºç‚¹: ä¸å…¼å®¹ ie9 åŠä»¥ä¸‹\n\n## è¡¨æ ¼å¸ƒå±€(table)\n```css\n<div class=\"container\">\n    <div class=\"left\">Left</div>\n    <div class=\"main\">Main</div>\n    <div class=\"right\">Right</div>\n</div>\n\nbody,html{\n    height: 100%;\n    padding: 0;\n    margin: 0;\n    overflow: hidden;\n}\n.container{\n    display: table;\n    width:100%;\n}\n.container>div{\n    display: table-cell;\n}\n.left{\n    width: 200px;\n    background: red;\n}\n.main{\n    background: blue;\n}\n.right{\n    width: 200px;\n    background: red;\n}\n```\n- ä¼˜ç‚¹ï¼šå…¼å®¹æ€§å¾ˆå¥½ï¼ˆie8 åŠä»¥ä¸Šï¼‰ çˆ¶å…ƒç´ é«˜åº¦ä¼šè¢«å­å…ƒç´ æ’‘å¼€ï¼ˆä¸æ‹…å¿ƒé«˜åº¦å¡Œé™·ï¼‰\n- ç¼ºç‚¹: seo ä¸å‹å¥½ å½“å…¶ä¸­ä¸€ä¸ªå•å…ƒæ ¼é«˜åº¦è¶…å‡ºçš„æ—¶å€™ï¼Œå…¶ä»–çš„å•å…ƒæ ¼ä¹Ÿæ˜¯ä¼šè·Ÿç€ä¸€èµ·å˜é«˜çš„\n\n## ç½‘æ ¼å¸ƒå±€(Grid)\n```css\n<div class=\"container\">\n    <div class=\"left\">Left</div>\n    <div class=\"main\">Main</div>\n    <div class=\"right\">Right</div>\n</div>\n\nbody,html{\n    height: 100%;\n    padding: 0;\n    margin: 0;\n    overflow: hidden;\n}\n.container{\n    display: grid;\n    width: 100%;\n    grid-template-rows: 100px;  /*è®¾ç½®è¡Œé«˜*/\n    grid-template-columns: 200px auto 200px;  /*è®¾ç½®åˆ—æ•°å±æ€§*/\n}\n.left{\n    background: red;\n}\n.main{\n    background: blue;\n}\n.right{\n    background:red;\n}\n```\n- ä¼˜ç‚¹ï¼šç®€å•å¼ºå¤§ è§£å†³äºŒç»´å¸ƒå±€é—®é¢˜\n- ç¼ºç‚¹: ä¸å…¼å®¹ ie9 åŠä»¥ä¸‹\n\n## æ€»ç»“\n|å¸ƒå±€æ–¹æ¡ˆ|å®ç°|ä¼˜ç‚¹|ç¼ºç‚¹|\n|:--|:--|:--|:--|\n|Floatå¸ƒå±€|å·¦å³ä¸­ä¸‰åˆ—ï¼Œå·¦åˆ—å·¦æµ®åŠ¨ï¼Œå³åˆ—å³æµ®åŠ¨ï¼Œä¸­é—´åˆ—è®¾ç½®å·¦å³margin|æ¯”è¾ƒç®€å•ï¼Œå…¼å®¹æ€§ä¹Ÿæ¯”è¾ƒå¥½|æµ®åŠ¨å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œä½¿ç”¨çš„æ—¶å€™åªéœ€è¦æ³¨æ„ä¸€å®šè¦æ¸…é™¤æµ®\nåŠ¨ã€‚|\n|Positionå¸ƒå±€|å·¦ä¸­å³ä¸‰åˆ—ï¼ˆæ— é¡ºåºï¼‰ï¼Œæ ¹æ®å®šä½å±æ€§å»ç›´æ¥è®¾ç½®å„ä¸ªå­å…ƒç´ ä½ç½®|å¿«æ·ï¼Œè®¾ç½®å¾ˆæ–¹ä¾¿|å…ƒç´ è„±ç¦»äº†æ–‡æ¡£æµï¼Œåä»£å…ƒç´ ä¹Ÿè„±ç¦»äº†æ–‡æ¡£æµï¼Œé«˜åº¦æœªçŸ¥çš„æ—¶å€™ï¼Œ\nä¼šæœ‰é—®é¢˜ï¼Œæœ‰æ•ˆæ€§å’Œå¯ä½¿ç”¨æ€§æ¯”è¾ƒå·®|\n|Tableå¸ƒå±€|å·¦ä¸­å³ä¸‰åˆ—ï¼Œçˆ¶å…ƒç´ display: table;å­å…ƒç´ display: table-cell;å±…ä¸­å­å…ƒç´ ä¸è®¾å®½åº¦|ä½¿ç”¨èµ·æ¥æ–¹ä¾¿,å…¼å®¹æ€§ä¹Ÿä¸å­˜åœ¨é—®é¢˜|â‘ æ— æ³•è®¾ç½®æ è¾¹è·ï¼›â‘¡\nå¯¹seoä¸å‹å¥½ï¼›â‘¢å½“å…¶ä¸­ä¸€ä¸ªå•å…ƒæ ¼é«˜åº¦è¶…å‡ºçš„æ—¶å€™ï¼Œä¸¤ä¾§çš„å•å…ƒæ ¼ä¹Ÿæ˜¯ä¼šè·Ÿç€ä¸€èµ·å˜é«˜çš„|\n|Flexå¸ƒå±€|å·¦ä¸­å³ä¸‰åˆ—ï¼Œçˆ¶å…ƒç´ display: flex;ä¸¤ä¾§å…ƒç´ è®¾å®½ï¼›å±…ä¸­å­å…ƒç´ flex: 1;|æ¯”è¾ƒå®Œç¾|å­˜åœ¨IEä¸Šå…¼å®¹æ€§é—®é¢˜ï¼Œåªèƒ½æ”¯æŒåˆ°IE9ä»¥ä¸Š|\n|Gridå¸ƒå±€|å·¦ä¸­å³ä¸‰åˆ—ï¼Œçˆ¶å…ƒç´ display: grid;åˆ©ç”¨ç½‘æ ¼å®ç°|æœ€å¼ºå¤§å’Œæœ€ç®€å•|å…¼å®¹æ€§ä¸å¥½ï¼ŒIE10+ä¸Šæ”¯æŒï¼Œè€Œä¸”ä¹Ÿä»…æ”¯æŒéƒ¨åˆ†å±æ€§|\n","tags":["å¸ƒå±€"],"categories":["CSS"]},{"title":"jsäºŒè¿›åˆ¶å’Œä½è¿ç®—","url":"%2F2020%2Fjs%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%92%8C%E4%BD%8D%E8%BF%90%E7%AE%97.html","content":"\n# js äºŒè¿›åˆ¶ä¸ä½è¿ç®—\nç”Ÿæ´»ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ç”¨åˆ°çš„æ˜¯ä»¥åè¿›åˆ¶ä¸ºå•ä½ï¼Œè¿›ä½æ˜¯æ»¡ 10 è¿› 1ï¼Œè€Œè®¡ç®—æœºæ˜¯ç”¨äºŒè¿›åˆ¶ï¼Œé‚£ä¹ˆå°±æ˜¯æ»¡ 2 è¿› 1 å–½ï¼Œä¸ºä»€ä¹ˆé‡‡ç”¨äºŒè¿›åˆ¶å‘¢ï¼Ÿç®€å•è¯´ä¸‹ï¼ŒTaçš„ç”±æ¥å…¶å®æ˜¯æ ¹æ®ç”µè·¯çš„å¼€å…³é—­åˆï¼Œç”µè·¯åªæœ‰ 0 å’Œ 1ï¼Œå…·ä½“çš„è¯¦æƒ…è¿™é‡Œä¸å¤šåšè§£é‡Šäº†ï¼Œå¯ä»¥è‡ªè¡Œç™¾ç§‘^_^ã€‚javascript é‡‡ç”¨æœ‰ç¬¦å· 32 ä½çš„ 2 è¿›åˆ¶ï¼Œå¯è¡¨ç¤º 4294967295 ä¸ªæ•´æ•°(å«æ­£è´Ÿ)ï¼ŒèŒƒå›´æ˜¯ -2147483648(2 çš„ 32 æ¬¡æ–¹) ~ 2147483647ã€‚\n\n## å¸¦ç¬¦å·äºŒè¿›åˆ¶åŸºæœ¬è§„åˆ™ä¸å‡ ä¸ªæ¦‚å¿µ\nåœ¨è®¡ç®—æœºä¸­è§„å®šæœ€é«˜ä½æ˜¯ç¬¦å·ä½ï¼Œ0 ä¸ºæ­£ï¼Œ1 ä¸ºè´Ÿã€‚æ­£æ•°è¡¨ç¤ºæ˜¯åŸç ï¼Œè´Ÿæ•°æ˜¯åŸç çš„è¡¥ç ã€‚\n\n### åŸç \né™¤å»ç¬¦å·ä½ï¼Œå…¶ä»– 32 ä½éƒ½ä¸ºæ­£ã€‚\n\nä¾‹ï¼š00000000000000000000000000001010 åŸç  00000000000000000000000000001010ã€‚\n\n### åç \næ‰€è°“åç ï¼Œé™¤ç¬¦å·ä½å¤–ï¼Œå…¶ä»–ä½ 0 å˜ 1ï¼Œ1 å˜ 0ã€‚\nä¾‹ï¼š1010 åç  1101\n\n### è¡¥ç \næ‰€è°“è¡¥ç ï¼Œå°±åƒæ˜¯å°å­¦å­¦è¿‡çš„ 10 è¿›åˆ¶è¡¥æ•°ï¼Œä¸¾ä¸ªä¾‹å­å°±å¾ˆå¥½ç†è§£ï¼Œ3 çš„è¡¥æ•°æ˜¯å¤šå°‘ï¼Ÿæ˜¯ 7ã€‚4 çš„è¡¥æ•°æ˜¯ 6ï¼Œè¡¥æ•°å°±æ˜¯ 10 å‡å»è¿™ä¸ªæ•°ã€‚åœ¨äºŒè¿›åˆ¶çš„è¡¥ç å°±æ˜¯ç›¸åŠ ç­‰äº 0ï¼Œäº’ä¸ºç›¸åæ•°ã€‚\n\n* 0 çš„è¡¥ç \n  0 çš„åŸç ã€åç ã€è¡¥ç å‡ä¸º 0\n* æ­£æ•°çš„è¡¥ç \n  åŸç \n* è´Ÿæ•°çš„è¡¥ç \n  åŸç é™¤ç¬¦å·ä½å¤–çš„æ‰€æœ‰ä½å–å+1ã€‚å¦‚ä½•æ¨å‡ºæ¥çš„ï¼Œçœ‹äº†ä¸€ç¯‡æ–‡ç« ï¼ŒæŒºæœ‰æ„æ€ã€‚[ç‚¹å‡»æŸ¥çœ‹](https://blog.csdn.net/wenxinwukui234/article/details/42119265)\n\n---\n<!--more-->\n\n## ä½è¿ç®—\n### æŒ‰ä½ä¸ï¼ˆANDï¼‰ &\næè¿°ï¼ša & b å¯¹äºæ¯ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œåªæœ‰ä¸¤ä¸ªæ“ä½œæ•°ç›¸åº”çš„æ¯”ç‰¹ä½éƒ½æ˜¯ 1 æ—¶ï¼Œç»“æœæ‰ä¸º 1ï¼Œå¦åˆ™ä¸º 0ã€‚(æ‘˜è‡ª MDN)\n\nä¸¾ä¾‹ï¼š2 & 3 = 2\nÂ Â Â  0000 0010\n& 0000 0011\nâ€”â€”â€”â€”â€”â€”â€”\nÂ Â Â Â 0000 0010\n\n#### åº”ç”¨åœºæ™¯:\nåˆ¤æ–­å¥‡å¶\n\n```js\nconsole.log(num & 1) // 1 æ˜¯å¥‡æ•°  0æ˜¯å¶æ•°\n```\n\n__æƒé™è®¾ç½®ï¼šè§£æƒé™__\n\nå› ä¸ºå¥‡æ•°çš„æœ€åä¸€ä½æ°¸è¿œæ˜¯ 1ã€‚\nä¸¾ä¾‹ï¼šnum æ˜¯ 3\n0000 0011\n0000 0001\nâ€”â€”â€”â€”â€”\n0000 0001\n\n### æŒ‰ä½æˆ–ï¼ˆORï¼‰|\næè¿°ï¼šå¯¹äºæ¯ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œå½“ä¸¤ä¸ªæ“ä½œæ•°ç›¸åº”çš„æ¯”ç‰¹ä½è‡³å°‘æœ‰ä¸€ä¸ª 1 æ—¶ï¼Œç»“æœä¸º 1ï¼Œå¦åˆ™ä¸º 0ã€‚(æ‘˜è‡ª MDN)\n\nä¸¾ä¾‹ï¼š2 | 3 = 3\nÂ Â Â 0000 0010\nÂ | 0000 0011\nâ€”â€”â€”â€”â€”â€”â€”\nÂ Â Â Â 0000 0011\n\n#### åº”ç”¨åœºæ™¯ï¼š\n**å°æ•°å–æ•´**\n\n```js\nfunction fn(n) {\n  return n | 0\n}\nfn(3.2) // 3\n```\n\n**æƒé™**\n\nå‡è®¾æˆ‘ä»¬è¯»çš„æƒé™æ˜¯ 1 å†™çš„æƒé™æ˜¯ 2ï¼Œå¦‚æœä¸€ä¸ªç”¨æˆ·åŒæ—¶æ‹¥æœ‰è¯»å’Œå†™ä¸¤ç§æƒé™ï¼Œæ­£å¸¸æ¥åˆ†é…å°±æ˜¯ç”¨ä¸€ä¸ªæ•°ç»„[1,2]ï¼Œé‚£ä¹ˆç”¨æˆ–è¿ç®—ç¬¦å¦‚ä½•åˆ†é…å‘¢ï¼Ÿ\n\n```js\nclass Permission {\n  constructor() {\n    this.instance = null\n    this.permissions = {\n      r: 1, // è¯»\n      w: 2, // å†™\n      e: 4 // æ‰§è¡Œ\n    }\n  }\n  getR() { return this.permissions.r }\n  getW() { return this.permissions.w }\n  getE() { return this.permissions.e }\n  \n  getRW() { return this.permissions.r | this.permissions.w }\n  getRE() { return this.permissions.r | this.permissions.e }\n  getWE() { return this.permissions.w | this.permissions.e }\n  \n  getRWE() { return this.permissions.r | this.permissions.w | this.permissions.e }\n  getAll() { return Object.values(this.permissions).reduce((p1, p2, i) =p1 | p2) }\n  \n  isR(per) { return Boolean(per & this.permissions.r) }\n  isW(per) { return Boolean(per & this.permissions.w) }\n  isE(per) { return Boolean(per & this.permissions.e) }\n  \n  static getInstance() {\n    !this.instance && (this.instance = new Permission())\n    return this.instance\n  }\n}\nconst per = Permission.getInstance()\nper.getRW() // è¯»å†™æƒé™ï¼š3\nper.getAll() // æ‰€æœ‰æƒé™ï¼š7\nper.isR(3) // true æ˜¯å¦æœ‰è¯»çš„æƒé™\nper.isW(5) // false æ˜¯å¦æœ‰å†™çš„æƒé™\nper.isE(5) // true æ˜¯å¦æœ‰æ‰§è¡Œçš„æƒé™\n```\n\næ³¨ï¼šåŸºæœ¬è¿ç®—è¿‡ç¨‹\n1 | 2 =>\nÂ Â 0000 0001\n| 0000 0010\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n0000 0011\n=3\n\n### æŒ‰ä½å¼‚æˆ–ï¼ˆXORï¼‰^\næè¿°ï¼šå¯¹äºæ¯ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œå½“ä¸¤ä¸ªæ“ä½œæ•°ç›¸åº”çš„æ¯”ç‰¹ä½æœ‰ä¸”åªæœ‰ä¸€ä¸ª 1 æ—¶ï¼Œç»“æœä¸º 1ï¼Œå¦åˆ™ä¸º 0ã€‚(æ‘˜è‡ª MDN)\n\nä¸¾ä¾‹ï¼š2 ^ 3\nÂ Â  0000 0010\n^ 0000 0011\nâ€”â€”â€”â€”â€”â€”\nÂ Â Â Â 0000 0001\n\n#### åº”ç”¨åœºæ™¯\nå˜é‡äº¤æ¢\næˆ‘ä»¬ä¼šç”¨åˆ°ä¸¤ä¸ªå˜é‡çš„å€¼è¿›è¡Œäº¤æ¢ï¼Œæ¯”å¦‚å†’æ³¡æ’åºçš„ä¸¤ä¸¤å¯¹æ¯”ï¼Œè‹¥å‰è€…æ¯”åè€…å¤§å°±äº¤æ¢ä½ç½®ï¼š\n\n```js\nvar a = 1,\n  b = 2\nvar temp = a\nvar a = b\nvar b = temp\n```\n\nè¿™é‡Œæ˜¯å£°æ˜ç¬¬ä¸‰ä¸ªå˜é‡æ¥å®ç°äº¤æ¢ã€‚é‚£ä¹ˆï¼Œç”¨æŒ‰ä½å¼‚æˆ–å¯ä»¥è¿™ä¹ˆåšï¼š\n\n```js\nvar a = 1,\n  b = 2\na ^= b\nb ^= a\na ^= b\n```\n\nåˆ†è§£ä¸€ä¸‹ä¸Šé¢çš„ï¼š\na += 1 å’Œ a ^= b è¡¨è¾¾å¼è§„åˆ™æ˜¯ä¸€æ ·çš„\næ‰€ä»¥ a ^= b =a = a ^ bï¼Œ çœ‹ä¸‹é¢è¿ç®—è¿‡ç¨‹ï¼š\nÂ Â Â Â 0000 0001\nÂ ^ 0000 0010\nâ€”â€”â€”â€”â€”â€”\nÂ Â Â Â 0000 0011\næ­¤æ—¶ï¼Œa å°±å˜æˆäº† 3ã€‚\nb ^= a =b = b ^ a\nÂ Â Â Â 0000 0010\nÂ ^ 0000 0011\nâ€”â€”â€”â€”â€”â€”\nÂ Â Â Â 0000 0001\næ­¤æ—¶ï¼Œb å˜æˆäº† 1ã€‚\né‡å¤ç¬¬ä¸€æ­¥ï¼š\nÂ Â Â Â 0000 0011\nÂ ^ 0000 0001\nâ€”â€”â€”â€”â€”â€”\nÂ Â Â Â 0000 0010\næ­¤æ—¶ï¼Œa å˜æˆäº† 2ã€‚æœ€ç»ˆ a=2,b=1 å®ç°äº†å˜é‡çš„äº¤æ¢ã€‚å¥½å¤„æ˜¯å°‘å£°æ˜äº†ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œæ•ˆç‡ä¸Šï¼Œäº²æµ‹ç»“æœ å¼‚æˆ–è¿ç®—äº¤æ¢å¹¶ä¸æ¯”ç¬¬ä¸‰å˜é‡çš„æ•ˆç‡é«˜(æµ‹è¯•äº¤æ¢ 100 æ¬¡)ã€‚\n\n## æŒ‰ä½éï¼ˆNOTï¼‰~\næè¿°ï¼šåè½¬æ“ä½œæ•°çš„æ¯”ç‰¹ä½ï¼Œå³ 0 å˜æˆ 1ï¼Œ1 å˜æˆ 0ã€‚\nçœ‹åˆ°è¿™ä¸ªå¯èƒ½ä¼šæƒ³åˆ°ä¸Šé¢æ‰€è¯´çš„åç ï¼Œè¿™ä¸¤è€…æ˜¯æœ‰åŒºåˆ«çš„ï¼Œåç æ˜¯**æŒ‰ç…§æœ‰ç¬¦å·å’Œæ— ç¬¦å·ç®—çš„**,å–åæ˜¯ä¸ç®¡æœ‰æ²¡æœ‰ç¬¦å·å…¨éƒ¨ 0 å˜ 1,1 å˜ 0 çš„\n\n### åº”ç”¨åœºæ™¯\n**å°æ•°å–æ•´**\nè¿˜æœ‰ä¸€ä¸ªç‰¹å¾æ˜¯å–åæ˜¯ä¸èƒ½ç”¨äºæµ®ç‚¹å‹ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ¥å‘ä¸‹å–æ•´ï¼Œæ•ˆæœå’Œ Math.floor()ä¸€æ ·ï¼Œ~~æ•ˆç‡è¦é«˜ã€‚\n\n```js\nfunction fn(n) {\n  return ~~n\n}\nfn(3.2) // 3\n```\n\n## å·¦ç§»ï¼ˆLeft shiftï¼‰<<\næè¿°ï¼ša << b ,å°† a çš„äºŒè¿›åˆ¶å½¢å¼å‘å·¦ç§» b (< 32) æ¯”ç‰¹ä½ï¼Œå³è¾¹ç”¨ 0 å¡«å……ã€‚(æ‘˜è‡ª MDN)\nä¸¾ä¾‹ï¼š3 << 4\n0000 0011 å‘å·¦ç§»åŠ¨ 4 ä½ =0011 0000\nå¯çŸ¥ï¼Œå·¦ç§»æ•°æ˜¯è¶Šæ¥è¶Šå¤§çš„ã€‚**ç§»åŠ¨è¿ç®—ç¬¦è¿ç®—æ•ˆç‡è¾ƒé«˜**\n\n### åº”ç”¨åœºæ™¯\nx ä¹˜ä»¥ y çš„ n æ¬¡æ–¹ï¼š**x << y**\n\n```js\n1 << 3 =0000 1000 åŒ–æˆ10è¿›åˆ¶ =1 * 2çš„3æ¬¡æ–¹ =8\n```\n\n2 è¿›åˆ¶åŒ–æˆ 10 è¿›åˆ¶ å°±æ˜¯ 2 çš„ n æ¬¡æ–¹ ä¹˜ä»¥ å½“å‰ä½ã€‚\n\n## æœ‰ç¬¦å·å³ç§» a >b\næè¿°ï¼šå°† a çš„äºŒè¿›åˆ¶è¡¨ç¤ºå‘å³ç§» b (< 32) ä½ï¼Œä¸¢å¼ƒè¢«ç§»å‡ºçš„ä½ã€‚\nè¯¥æ“ä½œç¬¦ä¼šå°†ç¬¬ä¸€ä¸ªæ“ä½œæ•°å‘å³ç§»åŠ¨æŒ‡å®šçš„ä½æ•°ã€‚å‘å³è¢«ç§»å‡ºçš„ä½è¢«ä¸¢å¼ƒï¼Œæ‹·è´æœ€å·¦ä¾§çš„ä½ä»¥å¡«å……å·¦ä¾§ã€‚ç”±äºæ–°çš„æœ€å·¦ä¾§çš„ä½æ€»æ˜¯å’Œä»¥å‰ç›¸åŒï¼Œç¬¦å·ä½æ²¡æœ‰è¢«æ”¹å˜ã€‚æ‰€ä»¥è¢«ç§°ä½œâ€œç¬¦å·ä¼ æ’­â€ã€‚\nä¸¾ä¾‹ï¼š\næ­£æ•°å³ç§»ï¼š4 >2\n\n```js\n   0000 0000 0000 0000 0000 0000 0000 0100\n>                                      2\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n   0000 0000 0000 0000 0000 0000 0000 0001\n```\n\næ­£æ•°å³ç§»ï¼Œä¸å¤Ÿçš„ä½æ•°ç”¨ç¬¦å·ä½ 0 è¡¥å…¨ï¼Œå¯ä»¥å‘ç°è§„å¾‹ï¼Œç»“æœæ˜¯ 4 / (2 çš„ 2 æ¬¡æ–¹) =å½“å‰ä½/(2 çš„ç§»ä½çš„ä½æ•°çš„æ¬¡æ–¹)\n\nè´Ÿæ•°å³ç§»ï¼š-3 >4\n\n```js\n   1000 0000 0000 0000 0000 0000 0000 0011 çš„è¡¥ç æ˜¯=>\n   1111 1111 1111 1111 1111 1111 1111 1101 å‘å³ç§»åŠ¨4ä½ï¼Œå³è¾¹èˆå»ï¼Œå·¦ä¾§ç”¨ç¬¦å·ä½è¡¥é½\n>                                      4\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n   1111 1111 1111 1111 1111 1111 1111 1111 è¡¥ç æ˜¯=>\n   1000 0000 0000 0000 0000 0000 0000 0001 æ‰€ä»¥,æœ€ç»ˆæ˜¯-1\n```\n\n## æ— ç¬¦å·å³ç§» a >>b\næè¿°ï¼šå°† a çš„äºŒè¿›åˆ¶è¡¨ç¤ºå‘å³ç§» b (< 32) ä½ï¼Œä¸¢å¼ƒè¢«ç§»å‡ºçš„ä½ï¼Œå¹¶ä½¿ç”¨ 0 åœ¨å·¦ä¾§å¡«å……ã€‚\næ­£æ•°å³ç§»ï¼š4 >>2\n\n```js\n    0000 0000 0000 0000 0000 0000 0000 0100\n>>                                      2\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n    0000 0000 0000 0000 0000 0000 0000 0001\n```\n\nå¯ä»¥å‘ç° 4 >>2 å’Œ 4 >2 ç»“æœéƒ½æ˜¯ 1ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºéè´Ÿæ•°æ¥è¯´ï¼Œæœ‰æ— ç¬¦å·å³ç§»ç»“æœéƒ½æ˜¯ç›¸åŒã€‚\nè´Ÿæ•°å³ç§»ï¼š-4 >>2\n\n```js\n    1000 0000 0000 0000 0000 0000 0000 0100 è¡¥ç =>\n    1111 1111 1111 1111 1111 1111 1111 1100\n>>                                      2\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n    0011 1111 1111 1111 1111 1111 1111 1111\n    åŒ–æˆ10è¿›åˆ¶=2^29...2^1+1 = 1073741823\n```\n\n## æ€»ç»“ï¼š\n**ä½è¿ç®— ä¼˜åŠ¿ï¼šä¹˜é™¤ï¼Œå–æ¨¡ï¼Œè¿ç®—æ•ˆç‡é«˜ åŠ£åŠ¿ï¼šå¯è¯»æ€§è¾ƒä½ï¼Œå¯¹åˆå­¦è€…æœ‰éš¾åº¦ï¼Œå·¥ä½œä¸­åº”å½“æŒ‰éœ€æ‰€å–ï¼Œä¸åº”ä¸ºç‚«æŠ€æ»¥ç”¨ã€‚** å¥½å¤šæºç éƒ½æœ‰ç”¨åˆ°ä½è¿ç®—ï¼ˆexpressã€koaã€koa-bodyï¼‰ï¼Œç°åœ¨å­¦ä¹ äº†ä½è¿ç®—ï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸æ‹…å¿ƒè¯»ä¸æ‡‚æºç äº†ï¼\n","tags":["å·¥å…·"],"categories":["JS"]},{"title":"HTML5ä¸­çš„Web Notificationæ¡Œé¢é€šçŸ¥","url":"%2F2020%2FHTML5%E4%B8%AD%E7%9A%84Web%20Notification%E6%A1%8C%E9%9D%A2%E9%80%9A%E7%9F%A5.html","content":"\nWeb Notifications æŠ€æœ¯ä½¿é¡µé¢å¯ä»¥å‘å‡ºé€šçŸ¥ï¼Œé€šçŸ¥å°†è¢«æ˜¾ç¤ºåœ¨é¡µé¢ä¹‹å¤–çš„ç³»ç»Ÿå±‚é¢ä¸Šã€‚èƒ½å¤Ÿä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„ä½“éªŒï¼Œå³ä½¿ç”¨æˆ·å¿™äºå…¶ä»–å·¥ä½œæ—¶ä¹Ÿå¯ä»¥æ”¶åˆ°æ¥è‡ªé¡µé¢çš„æ¶ˆæ¯é€šçŸ¥ï¼Œä¾‹å¦‚ä¸€ä¸ªæ–°é‚®ä»¶çš„æé†’ï¼Œæˆ–è€…ä¸€ä¸ªåœ¨çº¿èŠå¤©å®¤æ”¶åˆ°çš„æ¶ˆæ¯æé†’ç­‰ç­‰ã€‚\n\n> PSï¼šé™¤äº†IEå¤–ï¼Œå„å¤§ç°ä»£æµè§ˆå™¨éƒ½å¯¹è¿™ä¸ªæ¡Œé¢æ¨é€æœ‰äº†åŸºæœ¬çš„æ”¯æŒã€‚\n\n---\n<!--more-->\n\n## å¼€å§‹\nè¦åˆ›å»ºä¸€ä¸ªæ¶ˆæ¯é€šçŸ¥ï¼Œéå¸¸ç®€å•ï¼Œç›´æ¥ä½¿ç”¨ window å¯¹è±¡ä¸‹é¢çš„Notificationç±»å³å¯ï¼Œä»£ç å¦‚ä¸‹ï¼š\n```js\nvar n = new Notification(\"æ¡Œé¢æ¨é€\", {\n\ticon: 'img/icon.png',\n\tbody: 'è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€æ¡æ¡Œé¢é€šçŸ¥ã€‚',\n    image:'img/1.jpg'\n});\n```\n\n> PSï¼šæ¶ˆæ¯é€šçŸ¥åªæœ‰é€šè¿‡WebæœåŠ¡è®¿é—®è¯¥é¡µé¢æ—¶æ‰ä¼šç”Ÿæ•ˆï¼Œå¦‚æœç›´æ¥åŒå‡»æ‰“å¼€æœ¬åœ°æ–‡ä»¶ï¼Œæ˜¯æ²¡æœ‰ä»»ä½•æ•ˆæœçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ çš„æ–‡ä»¶éœ€è¦ä½¿ç”¨æœåŠ¡å™¨çš„å½¢å¼æ‰“å¼€ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€æœ¬åœ°æ–‡ä»¶ã€‚\n\n## è¯­æ³•\n```js\nlet myNotification = new Notification(title, options);\n```\n- titleï¼šå®šä¹‰ä¸€ä¸ªé€šçŸ¥çš„æ ‡é¢˜ï¼Œå½“å®ƒè¢«è§¦å‘æ—¶ï¼Œå®ƒå°†æ˜¾ç¤ºåœ¨é€šçŸ¥çª—å£çš„é¡¶éƒ¨ã€‚\n\n- optionsï¼ˆå¯é€‰ï¼‰å¯¹è±¡åŒ…å«åº”ç”¨äºé€šçŸ¥çš„ä»»ä½•è‡ªå®šä¹‰è®¾ç½®é€‰é¡¹ã€‚\n\nå¸¸ç”¨çš„é€‰é¡¹æœ‰ï¼š\n\n- body: é€šçŸ¥çš„æ­£æ–‡ï¼Œå°†æ˜¾ç¤ºåœ¨æ ‡é¢˜ä¸‹æ–¹ã€‚\n\n- tag: ç±»ä¼¼æ¯ä¸ªé€šçŸ¥çš„IDï¼Œä»¥ä¾¿åœ¨å¿…è¦çš„æ—¶å€™å¯¹é€šçŸ¥è¿›è¡Œåˆ·æ–°ã€æ›¿æ¢æˆ–ç§»é™¤ã€‚\n\n- icon: æ˜¾ç¤ºé€šçŸ¥çš„å›¾æ ‡\n\n- image: åœ¨é€šçŸ¥æ­£æ–‡ä¸­æ˜¾ç¤ºçš„å›¾åƒçš„URLã€‚\n\n- data: æ‚¨æƒ³è¦ä¸é€šçŸ¥ç›¸å…³è”çš„ä»»æ„æ•°æ®ã€‚è¿™å¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»å‹ã€‚\n\n- renotify: ä¸€ä¸ª Boolean æŒ‡å®šåœ¨æ–°é€šçŸ¥æ›¿æ¢æ—§é€šçŸ¥åæ˜¯å¦åº”é€šçŸ¥ç”¨æˆ·ã€‚é»˜è®¤å€¼ä¸ºfalseï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¸ä¼šè¢«é€šçŸ¥ã€‚\n\n- requireInteraction: è¡¨ç¤ºé€šçŸ¥åº”ä¿æŒæœ‰æ•ˆï¼Œç›´åˆ°ç”¨æˆ·ç‚¹å‡»æˆ–å…³é—­å®ƒï¼Œè€Œä¸æ˜¯è‡ªåŠ¨å…³é—­ã€‚é»˜è®¤å€¼ä¸ºfalseã€‚\n\nå½“è¿™æ®µä»£ç æ‰§è¡Œæ—¶ï¼Œæµè§ˆå™¨ä¼šè¯¢é—®ç”¨æˆ·ï¼Œæ˜¯å¦å…è®¸è¯¥ç«™ç‚¹æ˜¾ç¤ºæ¶ˆæ¯é€šçŸ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n![notification](http://cdn.mydearest.cn/blog/images/notification.png)\n\nåªæœ‰ç”¨æˆ·ç‚¹å‡»äº†å…è®¸ï¼Œæˆæƒäº†é€šçŸ¥ï¼Œé€šçŸ¥æ‰ä¼šè¢«æ˜¾ç¤ºå‡ºæ¥ã€‚\n\n## æˆæƒ\n\n**å¦‚ä½•è·å–åˆ°ç”¨æˆ·ç‚¹å‡»çš„æ˜¯â€œå…è®¸â€è¿˜æ˜¯â€œé˜»æ­¢â€å‘¢ï¼Ÿ**\n\nwindowçš„ Notificationå®ä¾‹æœ‰ä¸€ä¸ª requestPermission å‡½æ•°ç”¨æ¥è·å–ç”¨æˆ·çš„æˆæƒçŠ¶æ€ï¼š\n```js\n// é¦–å…ˆï¼Œæˆ‘ä»¬æ£€æŸ¥æ˜¯å¦å…·æœ‰æƒé™æ˜¾ç¤ºé€šçŸ¥\n// å¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬å°±ç”³è¯·æƒé™\nif (window.Notification && Notification.permission !== \"granted\") {\n    Notification.requestPermission(function (status) {\n    // statusæ˜¯æˆæƒçŠ¶æ€ã€‚\n    // å¦‚æœç”¨æˆ·ç‚¹å‡»çš„å…è®¸ï¼Œåˆ™statusä¸º'granted'\n    // å¦‚æœç”¨æˆ·ç‚¹å‡»çš„ç¦æ­¢ï¼Œåˆ™statusä¸º'denied'\n    \n    // è¿™å°†ä½¿æˆ‘ä»¬èƒ½åœ¨ Chrome/Safari ä¸­ä½¿ç”¨ Notification.permission\n    if (Notification.permission !== status) {\n            Notification.permission = status;\n        }\n    });\n}\n```\n> æ³¨æ„ï¼šå¦‚æœç”¨æˆ·ç‚¹å‡»äº†æˆæƒå³ä¸Šè§’çš„å…³é—­æŒ‰é’®ï¼Œåˆ™statusçš„å€¼ä¸ºdefaultã€‚\n\nä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦åˆ¤æ–­ status çš„å€¼æ˜¯å¦ä¸ºgrantedï¼Œæ¥å†³å®šæ˜¯å¦æ˜¾ç¤ºé€šçŸ¥ã€‚\n\n## é€šçŸ¥äº‹ä»¶\nä½†æ˜¯å•çº¯çš„æ˜¾ç¤ºä¸€ä¸ªæ¶ˆæ¯æ¡†æ˜¯æ²¡æœ‰ä»»ä½•å¸å¼•åŠ›çš„ï¼Œæ‰€ä»¥æ¶ˆæ¯é€šçŸ¥åº”è¯¥å…·æœ‰ä¸€å®šçš„äº¤äº’æ€§ï¼Œåœ¨æ˜¾ç¤ºæ¶ˆæ¯çš„å‰å‰ååéƒ½åº”è¯¥æœ‰äº‹ä»¶çš„å‚ä¸ã€‚\n\nNotificationä¸€å¼€å§‹å°±åˆ¶å®šå¥½äº†ä¸€ç³»åˆ—äº‹ä»¶å‡½æ•°ï¼Œå¼€å‘è€…å¯ä»¥å¾ˆæ–¹é¢çš„ä½¿ç”¨è¿™äº›å‡½æ•°å¤„ç†ç”¨æˆ·äº¤äº’ï¼š\n\næœ‰ï¼šonshow,onclick,onerror,oncloseã€‚\n```js\nvar n = new Notification(\"æ¡Œé¢æ¨é€\", {\n\ticon: 'img/icon.png',\n\tbody: 'è¿™æ˜¯æˆ‘çš„ç¬¬ä¸€æ¡æ¡Œé¢é€šçŸ¥ã€‚'\n});\n \n//onshowå‡½æ•°åœ¨æ¶ˆæ¯æ¡†æ˜¾ç¤ºæ—¶è§¦å‘\n//å¯ä»¥åšä¸€äº›æ•°æ®è®°å½•åŠå®šæ—¶å…³é—­æ¶ˆæ¯æ¡†ç­‰\nn.onshow = function() {\n\tconsole.log('æ˜¾ç¤ºæ¶ˆæ¯æ¡†');\n\t//5ç§’åå…³é—­æ¶ˆæ¯æ¡†\n\tsetTimeout(function() {\n\t\tn.close();\n\t}, 3000);\n};\n \n//æ¶ˆæ¯æ¡†è¢«ç‚¹å‡»æ—¶è¢«è°ƒç”¨\n//å¯ä»¥æ‰“å¼€ç›¸å…³çš„è§†å›¾ï¼ŒåŒæ—¶å…³é—­è¯¥æ¶ˆæ¯æ¡†ç­‰æ“ä½œ\nn.onclick = function() {\n\tconsole.log('ç‚¹å‡»æ¶ˆæ¯æ¡†');\n\t// æ‰“å¼€ç›¸å…³çš„è§†å›¾\n\tn.close();\n};\n \n//å½“æœ‰é”™è¯¯å‘ç”Ÿæ—¶ä¼šonerrorå‡½æ•°ä¼šè¢«è°ƒç”¨\n//å¦‚æœæ²¡æœ‰grantedæˆæƒï¼Œåˆ›å»ºNotificationå¯¹è±¡å®ä¾‹æ—¶ï¼Œä¹Ÿä¼šæ‰§è¡Œonerrorå‡½æ•°\nn.onerror = function() {\n\tconsole.log('æ¶ˆæ¯æ¡†é”™è¯¯');\n\t// åšäº›å…¶ä»–çš„äº‹\n};\n \n//ä¸€ä¸ªæ¶ˆæ¯æ¡†å…³é—­æ—¶oncloseå‡½æ•°ä¼šè¢«è°ƒç”¨\nn.onclose = function() {\n\tconsole.log('å…³é—­æ¶ˆæ¯æ¡†');\n\t//åšäº›å…¶ä»–çš„äº‹\n};\n```\n\n## é¡¹ç›®å®ä¾‹\n[pwaç‰ˆæ—…æ¸¸ç«™ç‚¹H5](https://github.com/cosyer/pwa-tour)\n","tags":["å·¥å…·"],"categories":["å·¥å…·"]},{"title":"å‰ç«¯åŠ¨ç”»çš„å®ç°æ–¹å¼æ€»ç»“","url":"%2F2020%2F%E5%89%8D%E7%AB%AF%E5%8A%A8%E7%94%BB%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F%E6%80%BB%E7%BB%93.html","content":"\né€šå¸¸åœ¨å‰ç«¯ä¸­ï¼Œå®ç°åŠ¨ç”»çš„æ–¹æ¡ˆä¸»è¦æœ‰6ç§ï¼š\n\n- js ç›´æ¥å®ç°\n\n- SVGï¼ˆå¯ä¼¸ç¼©çŸ¢é‡å›¾å½¢\n\n- CSS3 transition\n\n- CSS3 animation\n\n- CanvasåŠ¨ç”»\n\n- requestAnimationFrame\n\n---\n<!--more-->\n\n## js ç›´æ¥å®ç°åŠ¨ç”»\n> å…¶ä¸»è¦æ€æƒ³æ˜¯é€šè¿‡setIntervalæˆ–setTimeoutæ–¹æ³•çš„å›è°ƒå‡½æ•°æ¥æŒç»­è°ƒç”¨æ”¹å˜æŸä¸ªå…ƒç´ çš„CSSæ ·å¼ä»¥è¾¾åˆ°å…ƒç´ æ ·å¼å˜åŒ–çš„æ•ˆæœã€‚\n\nğŸŒ°\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <style type=\"text/css\">\n        #rect {\n            width: 200px;\n            height: 200px;\n            background: #ccc;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"rect\"></div>\n    <script>\n        let elem = document.getElementById('rect');\n        let left = 0;\n        let timer = setInterval(function(){\n            if(left<window.innerWidth-200){\n                elem.style.marginLeft = left+'px';\n                left ++;\n            }else {\n                clearInterval(timer);\n            }\n        },16);\n    </script>\n</body>\n</html>\n```\n\n- ç¼ºç‚¹ï¼šjs å®ç°åŠ¨ç”»é€šå¸¸ä¼šå¯¼è‡´é¡µé¢é¢‘ç¹æ€§é‡æ’é‡ç»˜ï¼Œæ¶ˆè€—æ€§èƒ½ï¼Œä¸€èˆ¬åº”è¯¥åœ¨æ¡Œé¢ç«¯æµè§ˆå™¨ã€‚åœ¨ç§»åŠ¨ç«¯ä¸Šä½¿ç”¨ä¼šæœ‰æ˜æ˜¾çš„å¡é¡¿ã€‚\n\n### Tipï¼šä¸ºä»€ä¹ˆæ˜¯16ms\nä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®çš„setIntervalæ—¶é—´é—´éš”æ˜¯16msã€‚ä¸€èˆ¬è®¤ä¸ºäººçœ¼èƒ½è¾¨è¯†çš„æµç•…åŠ¨ç”»ä¸ºæ¯ç§’60å¸§ï¼Œè¿™é‡Œ16msæ¯”(1000ms/60)å¸§ç•¥å°ä¸€äº›ï¼Œä½†æ˜¯ä¸€èˆ¬å¯ä»ä¸ºè¯¥åŠ¨ç”»æ˜¯æµç•…çš„ã€‚ \n\nåœ¨å¾ˆå¤šç§»åŠ¨ç«¯åŠ¨ç”»æ€§èƒ½ä¼˜åŒ–æ—¶ï¼Œä¸€èˆ¬ä½¿ç”¨16msæ¥è¿›è¡ŒèŠ‚æµå¤„ç†è¿ç»­è§¦å‘çš„æµè§ˆå™¨äº‹ä»¶ã€‚ä¾‹å¦‚å¯¹touchmoveã€scrolläº‹ä»¶è¿›è¡ŒèŠ‚æµç­‰ã€‚é€šè¿‡è¿™ç§æ–¹å¼å‡å°‘æŒç»­äº‹ä»¶çš„è§¦å‘é¢‘ç‡ï¼Œå¯ä»¥å¤§å¤§æå‡åŠ¨ç”»çš„æµç•…æ€§ã€‚\n\n## SVG\nğŸŒ°\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Document</title>\n    <style>\n    *{\n        margin:0;\n        padding:0;\n    }\n    </style>\n</head>\n<body>\n    <svg id=\"box\" width=\"800\" height=\"400\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">\n        <rect x=\"\" y=\"\" width=\"100\" height=\"100\" fill=\"rgb(255,0,0);\" stroke=\"\" stroke-width=\"\">\n            <set attributeName=\"x\" attributeType=\"XML\" to=\"100\" begin=\"4s\"/>\n            <animate attributeName=\"x\" attributeType=\"XML\" begin=\"0s\" dur=\"4s\" from=\"0\" to=\"300\"/>\n            <animate attributeName=\"y\" attributeType=\"XML\" begin=\"0s\" dur=\"4s\" from=\"0\" to=\"0\"/>\n            <animateTransform attributeName=\"transform\" begin=\"0s\" dur=\"4s\" type=\"scale\" from=\"1\" to=\"2\" repeatCount=\"1\" />\n            <animateMotion path=\"M10,80 q100,120 120,20 q140,-50 160,0\" begin=\"0s\" dur=\"4s\" repeatCount=\"1\" />\n        </rect>     \n    </svg>  \n</body>\n</html>\n```\n\n- ä¼˜ç¼ºç‚¹\n\nSVGçš„ä¸€å¤§ä¼˜åŠ¿æ˜¯å«æœ‰è¾ƒä¸ºä¸°å¯Œçš„åŠ¨ç”»åŠŸèƒ½ï¼ŒåŸç”Ÿç»˜åˆ¶å„ç§å›¾å½¢ã€æ»¤é•œå’ŒåŠ¨ç”»ï¼Œå¹¶ä¸”èƒ½è¢«jsè°ƒç”¨ã€‚htmlæ˜¯å¯¹domçš„æ¸²æŸ“ï¼Œé‚£ä¹ˆsvgå°±æ˜¯å¯¹å›¾å½¢çš„æ¸²æŸ“ã€‚ \nä½†æ˜¯ï¼Œå¦ä¸€æ–¹é¢å…ƒç´ è¾ƒå¤šä¸”å¤æ‚çš„åŠ¨ç”»ä½¿ç”¨svgæ¸²æŸ“ä¼šæ¯”è¾ƒæ…¢ï¼Œè€Œä¸”SVGæ ¼å¼çš„åŠ¨ç”»ç»˜åˆ¶æ–¹å¼å¿…é¡»è®©å†…å®¹åµŒå…¥åˆ°HTMLä¸­ä½¿ç”¨ã€‚CSS3çš„å‡ºç°è®©svgçš„åº”ç”¨å˜å¾—ç›¸å¯¹å°‘äº†ã€‚\n\n## CSS3 transition\ntransitionæ˜¯è¿‡æ¸¡åŠ¨ç”»ã€‚ä½†æ˜¯transitionå¹¶ä¸èƒ½å®ç°ç‹¬ç«‹çš„åŠ¨ç”»ï¼Œåªèƒ½åœ¨æŸä¸ªæ ‡ç­¾å…ƒç´ æ ·å¼æˆ–çŠ¶æ€æ”¹å˜æ—¶è¿›è¡Œå¹³æ»‘çš„åŠ¨ç”»æ•ˆæœè¿‡æ¸¡ï¼Œè€Œä¸æ˜¯é©¬ä¸Šæ”¹å˜ã€‚\n\n### Tips\n\nåœ¨ç§»åŠ¨ç«¯å¼€å‘ä¸­ï¼Œç›´æ¥ä½¿ç”¨transitionåŠ¨ç”»ä¼šè®©é¡µé¢å˜æ…¢ç”šè‡³å¡é¡¿ã€‚æ‰€ä»¥æˆ‘ä»¬é€šå¸¸æ·»åŠ transform:translate3D(0,0,0)æˆ–transform:translateZ(0)æ¥å¼€å¯ç§»åŠ¨ç«¯åŠ¨ç”»çš„GPUåŠ é€Ÿï¼Œè®©åŠ¨ç”»è¿‡ç¨‹æ›´åŠ æµç•…ã€‚\n\n## CSS3 animation\nanimation ç®—æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„CSS3åŠ¨ç”»ã€‚é€šè¿‡å¯¹å…³é”®å¸§å’Œå¾ªç¯æ¬¡æ•°çš„æ§åˆ¶ï¼Œé¡µé¢æ ‡ç­¾å…ƒç´ ä¼šæ ¹æ®è®¾å®šå¥½çš„æ ·å¼æ”¹å˜è¿›è¡Œå¹³æ»‘è¿‡æ¸¡ã€‚è€Œä¸”å…³é”®å¸§çŠ¶æ€çš„æ§åˆ¶æ˜¯é€šè¿‡ç™¾åˆ†æ¯”æ¥æ§åˆ¶çš„ã€‚\n\n- ä¼˜ç‚¹\nCSS3æœ€å¤§çš„ä¼˜åŠ¿æ˜¯æ‘†è„±äº†jsçš„æ§åˆ¶ï¼Œå¹¶ä¸”èƒ½åˆ©ç”¨ç¡¬ä»¶åŠ é€Ÿä»¥åŠå®ç°å¤æ‚åŠ¨ç”»æ•ˆæœã€‚\n\n## CanvasåŠ¨ç”»\n> canvasä½œä¸ºH5æ–°å¢å…ƒç´ ï¼Œæ˜¯å€ŸåŠ©Web APIæ¥å®ç°åŠ¨ç”»çš„ã€‚\n\nğŸŒ°\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Document</title>\n    <style>\n    *{\n        margin:0;\n        padding:0;\n    }\n    </style>\n</head>\n<body>\n    <canvas id=\"canvas\" width=\"700\" height=\"550\"></canvas>\n    <script type=\"text/javascript\">\n        // é€šè¿‡getContext()è·å–å…ƒç´ çš„ç»˜åˆ¶å¯¹è±¡ï¼Œé€šè¿‡clearRectä¸æ–­æ¸…ç©ºç”»å¸ƒå¹¶åœ¨æ–°çš„ä½ç½®ä¸Šä½¿ç”¨fillStyleç»˜åˆ¶æ–°çŸ©å½¢å†…å®¹å®ç°é¡µé¢åŠ¨ç”»æ•ˆæœ\n        let canvas = document.getElementById(\"canvas\");\n        let ctx = canvas.getContext(\"2d\");\n        let left = 0;\n        let timer = setInterval(function(){\n            ctx.clearRect(0,0,700,550);\n            ctx.beginPath();\n            ctx.fillStyle = \"#ccc\";\n            ctx.fillRect(left,0,100,100);\n            ctx.stroke();\n            if(left>700){\n                clearInterval(timer);\n            }\n            left += 1;\n        },16);\n    </script>\n</body>\n</html>\n```\n\n- ä¼˜ç‚¹\nCanvasä¸»è¦ä¼˜åŠ¿æ˜¯å¯ä»¥åº”å¯¹é¡µé¢ä¸­å¤šä¸ªåŠ¨ç”»å…ƒç´ æ¸²æŸ“è¾ƒæ…¢çš„æƒ…å†µï¼Œå®Œå…¨é€šè¿‡javascriptæ¥æ¸²æŸ“æ§åˆ¶åŠ¨ç”»çš„æ‰§è¡Œã€‚å¯ç”¨äºå®ç°è¾ƒå¤æ‚åŠ¨ç”»ã€‚\n\n## requestAnimationFrame\nrequestAnimationFrameæ˜¯å¦ä¸€ç§Web APIï¼ŒåŸç†ä¸setTimeoutå’ŒsetIntervalç±»ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡javascriptæŒç»­å¾ªç¯çš„æ–¹æ³•è°ƒç”¨æ¥è§¦å‘åŠ¨ç”»åŠ¨ä½œã€‚ä½†æ˜¯requestAnimationFrameæ˜¯æµè§ˆå™¨é’ˆå¯¹åŠ¨ç”»ä¸“é—¨ä¼˜åŒ–å½¢æˆçš„APiï¼Œåœ¨æ€§èƒ½ä¸Šæ¯”å¦ä¸¤è€…è¦å¥½ã€‚\n\næ —å­ğŸŒ°\n```html\n<!DOCTYPE html>\n<html>\n<head>\n    <title></title>\n    <style type=\"text/css\">\n        * {\n            margin:0;\n            padding:0;\n        }\n        div {\n            width: 200px;\n            height: 200px;\n            background-color: #ccc;\n        }\n    </style>\n</head>\n<body>\n    <div id=\"rect\"></div>\n    <script type=\"text/javascript\">\n    window.requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame ||\n    window.msRequestAnimationFrame;\n\n    let elem = document.getElementById(\"rect\");\n    let left = 0;\n    //è‡ªåŠ¨æ‰§è¡ŒæŒç»­æ€§å›è°ƒ\n    requestAnimationFrame(step);\n    //æŒç»­è¯¥æ”¹å˜å…ƒç´ ä½ç½®\n    function step() {\n        if(left<window.innerWidth-200){\n            left+=1;\n            elem.style.marginLeft = left+\"px\";\n            requestAnimationFrame(step);\n        }\n    }\n    </script>\n</body>\n</html>\n```\n\n## æ€»ç»“\nå¤æ‚çš„åŠ¨ç”»æ˜¯é€šè¿‡ä¸€ä¸ªä¸ªç®€å•çš„åŠ¨ç”»ç»„åˆå®ç°çš„ã€‚åŸºäºå…¼å®¹æ€§é—®é¢˜ï¼Œé€šå¸¸åœ¨é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬åœ¨\n\n- æ¡Œé¢ç«¯æµè§ˆå™¨æ¨èä½¿ç”¨javascriptç›´æ¥å®ç°åŠ¨ç”»æˆ–SVGæ–¹å¼ï¼›\n- ç§»åŠ¨ç«¯å¯ä»¥è€ƒè™‘ä½¿ç”¨CSS3 transitionã€CSS3 animationã€Canvasæˆ–requestAnimationFrameæ–¹å¼**ã€‚\n","tags":["å¸ƒå±€"],"categories":["CSS"]},{"title":"TARå‘½ä»¤è¯¦è§£","url":"%2F2020%2FTAR%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3.html","content":"åœ¨Linuxä¸­ï¼Œå‹ç¼©ä¸è§£å‹ç”¨å¾—æœ€å¤šçš„æ˜¯ `tar` å‘½ä»¤ã€‚\n\n-c: å»ºç«‹å‹ç¼©æ¡£æ¡ˆ\n-xï¼šè§£å‹\n-tï¼šæŸ¥çœ‹å†…å®¹\n-rï¼šå‘å‹ç¼©å½’æ¡£æ–‡ä»¶æœ«å°¾è¿½åŠ æ–‡ä»¶\n-uï¼šæ›´æ–°åŸå‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶\n\nä»¥ä¸Šäº”ä¸ªæ˜¯ç‹¬ç«‹çš„å‘½ä»¤å‚æ•°ï¼Œå‹ç¼©è§£å‹éƒ½è¦ç”¨åˆ°å…¶ä¸­ä¸€ä¸ªï¼Œå¯ä»¥å’Œåˆ«çš„å‘½ä»¤è¿ç”¨ä½†åªèƒ½ç”¨å…¶ä¸­ä¸€ä¸ªã€‚ä¸‹é¢çš„å‚æ•°æ˜¯æ ¹æ®éœ€è¦åœ¨å‹ç¼©æˆ–è§£å‹æ¡£æ¡ˆæ—¶å¯é€‰çš„ã€‚\n\n-zï¼šæœ‰gzipå±æ€§çš„  gz\n-jï¼šæœ‰bz2å±æ€§çš„   bz2\n\n-J ï¼šæœ‰xzå±æ€§çš„   xz\n-Zï¼šæœ‰compresså±æ€§çš„\n-vï¼šæ˜¾ç¤ºæ‰€æœ‰è¿‡ç¨‹\n-Oï¼šå°†æ–‡ä»¶è§£å¼€åˆ°æ ‡å‡†è¾“å‡º\n\nä¸‹é¢çš„å‚æ•°-fæ˜¯å¿…é¡»çš„\n\n-f: ä½¿ç”¨æ¡£æ¡ˆåå­—ï¼Œåˆ‡è®°ï¼Œè¿™ä¸ªå‚æ•°æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼Œåé¢åªèƒ½æ¥æ¡£æ¡ˆåã€‚\n\n---\n<!--more-->\n\n## æ —å­ğŸŒ°\n### tar -cf all.tar *.jpg\nè¿™æ¡å‘½ä»¤æ˜¯å°†æ‰€æœ‰.jpgçš„æ–‡ä»¶æ‰“æˆä¸€ä¸ªåä¸ºall.tarçš„åŒ…ã€‚-cæ˜¯è¡¨ç¤ºäº§ç”Ÿæ–°çš„åŒ…ï¼Œ-fæŒ‡å®šåŒ…çš„æ–‡ä»¶åã€‚\n\n### tar -rf all.tar *.gif\nè¿™æ¡å‘½ä»¤æ˜¯å°†æ‰€æœ‰.gifçš„æ–‡ä»¶å¢åŠ åˆ°all.tarçš„åŒ…é‡Œé¢å»ã€‚-ræ˜¯è¡¨ç¤ºå¢åŠ æ–‡ä»¶çš„æ„æ€ã€‚\n\n### tar -uf all.tar logo.gif\nè¿™æ¡å‘½ä»¤æ˜¯æ›´æ–°åŸæ¥taråŒ…all.tarä¸­logo.gifæ–‡ä»¶ï¼Œ-uæ˜¯è¡¨ç¤ºæ›´æ–°æ–‡ä»¶çš„æ„æ€ã€‚\n\n### tar -tf all.tar\nè¿™æ¡å‘½ä»¤æ˜¯åˆ—å‡ºall.taråŒ…ä¸­æ‰€æœ‰æ–‡ä»¶ï¼Œ-tæ˜¯åˆ—å‡ºæ–‡ä»¶çš„æ„æ€\n\n### tar -xf all.tar\nè¿™æ¡å‘½ä»¤æ˜¯è§£å‡ºall.taråŒ…ä¸­æ‰€æœ‰æ–‡ä»¶ï¼Œ-tæ˜¯è§£å¼€çš„æ„æ€\n\n## å‹ç¼©\n```js\n// å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆtar.jpg\ntar -cvf jpg.tar *.jpg \n\n// å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆjpg.taråï¼Œå¹¶ä¸”å°†å…¶ç”¨gzipå‹ç¼©ï¼Œç”Ÿæˆä¸€ä¸ªgzipå‹ç¼©è¿‡çš„åŒ…ï¼Œå‘½åä¸ºjpg.tar.gz\ntar -czf jpg.tar.gz *.jpg\n\n// å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆjpg.taråï¼Œå¹¶ä¸”å°†å…¶ç”¨bzip2å‹ç¼©ï¼Œç”Ÿæˆä¸€ä¸ªbzip2å‹ç¼©è¿‡çš„åŒ…ï¼Œå‘½åä¸ºjpg.tar.bz2\ntar -cjf jpg.tar.bz2 *.jpg\n\n// å°†ç›®å½•é‡Œæ‰€æœ‰jpgæ–‡ä»¶æ‰“åŒ…æˆjpg.taråï¼Œå¹¶ä¸”å°†å…¶ç”¨compresså‹ç¼©ï¼Œç”Ÿæˆä¸€ä¸ªumcompresså‹ç¼©è¿‡çš„åŒ…ï¼Œå‘½åä¸ºjpg.tar.Z\ntar -cZf jpg.tar.Z *.jpg\n\n// raræ ¼å¼çš„å‹ç¼©ï¼Œéœ€è¦å…ˆä¸‹è½½rar for linux\nrar a jpg.rar *.jpg\n\n// zipæ ¼å¼çš„å‹ç¼©ï¼Œéœ€è¦å…ˆä¸‹è½½zip for linux\nzip jpg.zip *.jpg \n```\n\n## è§£å‹\n```js\n// è§£å‹ taråŒ…\ntar -xvf file.tar \n\n// è§£å‹tar.gz\ntar -xzvf file.tar.gz\n\n// è§£å‹ tar.bz2\ntar -xjvf file.tar.bz2\n\n// è§£å‹tar.Z\ntar -xZvf file.tar.Z\n\n// è§£å‹tar.xz\ntar -Jxvf fle.tar.xz\n\n// è§£å‹rar\nunrar e file.rar \n\n// è§£å‹zip\nunzip file.zip\n```\n\n## æ€»ç»“\n```js\n1ã€*.tar ç”¨ tar -xvf è§£å‹\n\n2ã€*.gz ç”¨ gzip -dæˆ–è€…gunzip è§£å‹\n\n3ã€*.tar.gzå’Œ*.tgz ç”¨ tar -xzf è§£å‹   tar.xz  ç”¨ tar -Jxvf è§£å‹\n\n4ã€*.bz2 ç”¨ bzip2 -dæˆ–è€…ç”¨bunzip2 è§£å‹\n\n5ã€*.tar.bz2ç”¨tar -xjf è§£å‹\n\n6ã€*.Z ç”¨ uncompress è§£å‹\n\n7ã€*.tar.Z ç”¨tar -xZf è§£å‹\n\n8ã€*.rar ç”¨ unrar eè§£å‹\n\n9ã€*.zip ç”¨ unzip è§£å‹\n\ntar -zcvf 1.tar.gz xxx\ntar -zxvf 1.tar.gz\n```\n","tags":["shell"],"categories":["å·¥å…·"]},{"title":"ç®—æ³•é¢˜ç»ƒä¹ ","url":"%2F2020%2F%E7%AE%97%E6%B3%95%E9%A2%98%E7%BB%83%E4%B9%A0.html","content":"\n# äº”å¤§ç®—æ³•\n- è´ªå¿ƒç®—æ³•ï¼šå±€éƒ¨æœ€ä¼˜è§£æ³•\n- åˆ†æ²»ç®—æ³•ï¼šåˆ†æˆå¤šä¸ªå°æ¨¡å—ï¼Œä¸åŸé—®é¢˜æ€§è´¨ç›¸åŒ\n- åŠ¨æ€è§„åˆ’ï¼šæ¯ä¸ªçŠ¶æ€éƒ½æ˜¯è¿‡å»å†å²çš„ä¸€ä¸ªæ€»ç»“\n- å›æº¯æ³•ï¼šå‘ç°åŸå…ˆé€‰æ‹©ä¸ä¼˜æ—¶ï¼Œé€€å›é‡æ–°é€‰æ‹©\n- åˆ†æ”¯é™ç•Œæ³•ï¼šæŒ‰å¹¿åº¦ä¼˜å…ˆç­–ç•¥æœç´¢é—®é¢˜çš„è§£ç©ºé—´æ ‘ï¼Œé€‚åˆæ±‚è§£æœ€ä¼˜åŒ–é—®é¢˜\n\n## æ•°æ®æ ‘\n- äºŒå‰æ ‘: æœ€å¤šåªæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹\n  - å®Œå…¨äºŒå‰æ ‘\n    - è‹¥è®¾äºŒå‰æ ‘çš„æ·±åº¦ä¸ºkï¼Œé™¤ç¬¬ k å±‚å¤–ï¼Œå…¶å®ƒå„å±‚ (1ï½k-1) çš„ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ä¸ªæ•°ï¼Œç¬¬k å±‚æ‰€æœ‰çš„ç»“ç‚¹éƒ½è¿ç»­é›†ä¸­åœ¨æœ€å·¦è¾¹\n  - æ»¡äºŒå‰æ ‘\n    - æ·±åº¦ä¸º h, æœ‰ n ä¸ªèŠ‚ç‚¹ï¼Œä¸”æ»¡è¶³ n = 2^h - 1\n  - å¹³è¡¡äºŒå‰æ ‘\n    - å®ƒæˆ–è€…æ˜¯ä¸€é¢—ç©ºæ ‘ï¼Œæˆ–å®ƒçš„å·¦å­æ ‘å’Œå³å­æ ‘çš„æ·±åº¦ä¹‹å·®(å¹³è¡¡å› å­)çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ï¼Œä¸”å®ƒçš„å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯ä¸€é¢—å¹³è¡¡äºŒå‰æ ‘\n  - æœ€ä¼˜äºŒå‰æ ‘(å“ˆå¤«æ›¼æ ‘)\n    - æ ‘çš„å¸¦æƒè·¯å¾„é•¿åº¦è¾¾åˆ°æœ€å°ï¼Œç§°è¿™æ ·çš„äºŒå‰æ ‘ä¸ºæœ€ä¼˜äºŒå‰æ ‘ï¼Œä¹Ÿç§°ä¸ºå“ˆå¤«æ›¼æ ‘(Huffman Tree)ã€‚å“ˆå¤«æ›¼æ ‘æ˜¯å¸¦æƒè·¯å¾„é•¿åº¦æœ€çŸ­çš„æ ‘ï¼Œæƒå€¼è¾ƒå¤§çš„ç»“ç‚¹ç¦»æ ¹è¾ƒè¿‘ã€‚\n\n- äºŒå‰æŸ¥æ‰¾æ ‘: æ˜¯ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æ ‘ï¼Œèƒ½æœ‰æ•ˆåœ°æé«˜æŸ¥æ‰¾æ•ˆç‡\n  - å°å€¼åœ¨å·¦ï¼Œå¤§å€¼åœ¨å³\n  - èŠ‚ç‚¹ n çš„æ‰€æœ‰å·¦å­æ ‘å€¼å°äº nï¼Œæ‰€æœ‰å³å­æ ‘å€¼å¤§äº n\n\n![binary-search-tree](http://cdn.mydearest.cn/blog/images/binary-search-tree.png)\n\n- éå†èŠ‚ç‚¹\n  - å‰åºéå†\n    - æ ¹èŠ‚ç‚¹\n    - è®¿é—®å·¦å­èŠ‚ç‚¹ï¼Œå›åˆ° 1\n    - è®¿é—®å³å­èŠ‚ç‚¹ï¼Œå›åˆ° 1\n  - ä¸­åºéå†\n    - å…ˆè®¿é—®åˆ°æœ€å·¦çš„å­èŠ‚ç‚¹\n    - è®¿é—®è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹\n    - è®¿é—®è¯¥çˆ¶èŠ‚ç‚¹çš„å³å­èŠ‚ç‚¹ï¼Œ å›åˆ° 1\n  - ååºéå†\n    - å…ˆè®¿é—®åˆ°æœ€å·¦çš„å­èŠ‚ç‚¹\n    - è®¿é—®ç›¸é‚»çš„å³èŠ‚ç‚¹\n    - è®¿é—®çˆ¶èŠ‚ç‚¹ï¼Œ å›åˆ° 1\n\nDLR--å‰åºéå†ï¼ˆæ ¹åœ¨å‰ï¼Œä»å·¦å¾€å³ï¼Œä¸€æ£µæ ‘çš„æ ¹æ°¸è¿œåœ¨å·¦å­æ ‘å‰é¢ï¼Œå·¦å­æ ‘åˆæ°¸è¿œåœ¨å³å­æ ‘å‰é¢ ï¼‰\n\n![dlr](http://cdn.mydearest.cn/blog/images/dlr.png)\n\nLDR--ä¸­åºéå†ï¼ˆæ ¹åœ¨ä¸­ï¼Œä»å·¦å¾€å³ï¼Œä¸€æ£µæ ‘çš„å·¦å­æ ‘æ°¸è¿œåœ¨æ ¹å‰é¢ï¼Œæ ¹æ°¸è¿œåœ¨å³å­æ ‘å‰é¢ï¼‰\n\n![ldr](http://cdn.mydearest.cn/blog/images/ldr.png)\n\nLRD--ååºéå†ï¼ˆæ ¹åœ¨åï¼Œä»å·¦å¾€å³ï¼Œä¸€æ£µæ ‘çš„å·¦å­æ ‘æ°¸è¿œåœ¨å³å­æ ‘å‰é¢ï¼Œå³å­æ ‘æ°¸è¿œåœ¨æ ¹å‰é¢ï¼‰\n\n![lrd](http://cdn.mydearest.cn/blog/images/lrd.png)\n\n- æ’å…¥ä¸åˆ é™¤èŠ‚ç‚¹\n\n---\n<!--more-->\n\n## å†™å‡ºä¸€ä¸ªæ–¹æ³•è¾“å‡º1-100å†…çš„æ‰€æœ‰ç´ æ•°\nè§£æï¼š\nç”±ç´ æ•°ï¼ˆè´¨æ•°ï¼‰å®šä¹‰å¯çŸ¥ï¼š\n\n- â‘  0ã€1éƒ½ä¸æ˜¯è´¨æ•°ï¼Œé‚£ä¹ˆæœ€å°çš„è´¨æ•°å°±æ˜¯2ã€‚\n- â‘¡ é™¤äº†1å’Œå®ƒè‡ªèº«ï¼Œä¸èƒ½è¢«å…¶ä»–æ•°æ•´é™¤ï¼Œé‚£ä¹ˆä»£ç è¡¨è¾¾å¼è¡¨ç¤ºä¸ºï¼š\n\n```js\ni % j === 0\n```\n- ä»£ç å®ç°\n\n```js\nfunction fn() {\n  const arr = []\n  for (let i = 2; i <= 100; i++) {\n    let bl = false\n    for (let j = 2; j <= i; j++) {\n      if (i === j) continue\n      i % j === 0 && (bl = true)\n    }\n    !bl && arr.push(i)\n  }\n  return arr\n}\nconsole.log(fn()) \n```\n\n## (æ•°ç»„ä¸­ç¬¬Kå¤§å…ƒç´ )ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œå®ç°å¿«é€Ÿæ’åºç®—æ³•è¿›è¡Œå‡åºæ’åˆ—ã€‚å¦‚[2, 5, 8, 9, 3] =>[2, 3, 5, 8, 9]\nè§£æï¼šï¼ˆåˆ†æ²»æ³•ï¼‰\nå°†ä¸€ä¸ªåˆ—è¡¨åˆ†å‰²ä¸ºå·¦å³ä¸¤å—ï¼Œç„¶åå†å°†å­—åˆ—è¡¨å†è¿›è¡Œåˆ†å‰²ä¸ºå·¦å³ä¸¤å—ï¼Œå¦‚ä½•åå¤ï¼ŒçŸ¥é“å­å…ƒç´ é•¿åº¦ä¸º1æ—¶ï¼Œç»“æŸï¼\n- ä»£ç å®ç°\n```js\nfunction qSort(arr) {\n  if (arr.length <= 1) return arr\n  const index = Math.floor(arr.length / 2)\n  const midVal = arr.splice(index, 1)[0]\n  const left = [],\n    right = []\n  arr.forEach(item => {\n    if (item < midVal) left.push(item)\n    else right.push(item)\n  })\n  return [...qSort(left), midVal, ...qSort(right)]\n}\nqSort([2, 5, 8, 9, 3])\n```\n\n## æ±‚ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­æœ€é•¿çš„éé‡å¤è¿ç»­å­ä¸²\n```js\nfunction find(s) {\n    var str = '';//å­˜æ”¾å½“å‰æœ€å¤§æ— é‡å¤é¡¹å­—ç¬¦ä¸²\n    var len = 0;//å­˜æ”¾å½“å‰æœ€å¤§æ— é‡å¤é¡¹å­—ç¬¦ä¸²é•¿åº¦\n    for(var i=0;i<s.length;i++){\n        var char = s.charAt(i);\n        var index = str.indexOf(char);\n        if(index === -1){  //éå†så°†å…ƒç´ æŒ¨ä¸ªæ”¾å…¥åˆ°strä¸­ï¼Œæ¯æ”¾å…¥ä¸€æ¬¡åˆ¤æ–­strä¸­æ˜¯å¦æœ‰é‡å¤é¡¹\n            str += char;\n            len = len<str.length?str.length:len;//è®°å½•æœ€å¤§é•¿åº¦é¡¹,æ¯æ¬¡é‡æ–°è®°å½•strè¿›è¡Œåˆ¤æ–­ï¼Œæ˜¯å¦å¤§äºä¸Šæ¬¡ä¸€æ¬¡æœ€å¤§é¡¹\n        }\n        else{\n            str = str.substr(index + 1) + char; //ä»å½“å‰é‡å¤é¡¹å¼€å§‹é‡æ–°è®°å½•str\n        }\n    }\n    return len;\n}\n// 'adasdddddddfghti' 6\n```\n\n## æ±‚å­—ç¬¦ä¸²æ•°ç»„çš„æœ€é•¿å…¬å…±å‰ç¼€\n> æ¯”å¦‚è¾“å…¥: [\"flower\",\"flow\",\"flight\"]ï¼Œè¾“å‡º: \"fl\"\n\n```js\nvar longestCommonPrefix = function(strs) {\n    if (strs === null || strs.length === 0) return \"\";\n    if(strs.length === 1) return strs[0]\n    let min = 0, max = 0\n    for(let i = 1; i < strs.length; i++) {\n        if(strs[min] > strs[i]) min = i\n        if(strs[max] < strs[i]) max = i\n    }\n    for(let j = 0; j < strs[min].length; j++) {\n        if(strs[min].charAt(j) !== strs[max].charAt(j)) {\n            return strs[min].substring(0, j)\n        }\n    }\n    return strs[min]\n};\n```\n\n## å®ç°äºŒå‰æ ‘(æ„å»ºã€éå†)\n```js\nfunction TreeCode() {\n    let BiTree = function (ele) {\n        this.data = ele;\n        this.lChild = null;\n        this.rChild = null;\n    }\n\n    this.createTree = function () {\n        let biTree = new BiTree('A');\n        biTree.lChild = new BiTree('B');\n        biTree.rChild = new BiTree('C');\n        biTree.lChild.lChild = new BiTree('D');\n        biTree.lChild.lChild.lChild = new BiTree('G');\n        biTree.lChild.lChild.rChild = new BiTree('H');\n        biTree.rChild.lChild = new BiTree('E');\n        biTree.rChild.rChild = new BiTree('F');\n        biTree.rChild.lChild.rChild = new BiTree('I');\n        return biTree;\n    }\n}\n\n//å‰åºéå†\nfunction ProOrderTraverse(biTree) {\n    if (biTree == null) return;\n    console.log(biTree.data);\n    ProOrderTraverse(biTree.lChild);\n    ProOrderTraverse(biTree.rChild);\n}\n\n//ä¸­åºéå†\nfunction InOrderTraverse(biTree) {\n    if (biTree == null) return;\n    InOrderTraverse(biTree.lChild);\n    console.log(biTree.data);\n    InOrderTraverse(biTree.rChild);\n}\n\n//åç»­éå†\nfunction PostOrderTraverse(biTree) {\n    if (biTree == null) return;\n    PostOrderTraverse(biTree.lChild);\n    PostOrderTraverse(biTree.rChild);\n    console.log(biTree.data);\n}\n\nlet myTree = new TreeCode();\nconsole.log(myTree.createTree());\nconsole.log('å‰åºéå†')\nProOrderTraverse(myTree.createTree());\nconsole.log('ä¸­åºéå†')\nInOrderTraverse(myTree.createTree());\nconsole.log('åç»­éå†')\nPostOrderTraverse(myTree.createTree());\n```\n\n## äºŒå‰æ ‘çš„éé€’å½’éå†\n### æ·±åº¦ä¼˜å…ˆéé€’å½’(æ ˆçš„å…ˆè¿›åå‡º)DFS\n```js\nfunction DepthFirstSearch(biTree) {\n    let stack = [];\n    stack.push(biTree);\n\n    while (stack.length != 0) {\n        let node = stack.pop();\n        console.log(node.data);\n        if (node.rChild) {\n            stack.push(node.rChild);\n        }\n        if (node.lChild) {\n            stack.push(node.lChild);\n        }\n\n    }\n\n}\n```\n\n### å¹¿åº¦ä¼˜å…ˆéé€’å½’(é˜Ÿåˆ—çš„å…ˆè¿›å…ˆå‡º)BFS\n```bash\nfunction BreadthFirstSearch(biTree) {\n    let queue = [];\n    queue.push(biTree);\n    while (queue.length != 0) {\n        let node = queue.shift();\n        console.log(node.data);\n        if (node.lChild) {\n            queue.push(node.lChild);\n        }\n        if (node.rChild) {\n            queue.push(node.rChild);\n        }\n    }\n\n}\n```\n\n## ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢æ˜¯æ’å¥½åºçš„æ•°å­—ï¼Œè¾“å…¥ä¸€ä¸ªæ•°å­—æ€ä¹ˆèƒ½æ‰¾åˆ°å®ƒçš„index\n\n### æŠŠè¿™äº›æ•°å­—æ”¾åˆ°å¯¹è±¡çš„keyé‡Œï¼Œindexå˜æˆvalueï¼Œç„¶åç›´æ¥å– æ—¶é—´å¤æ‚åº¦O(n) => O(1)\n\n### äºŒåˆ†æ³•æŸ¥æ‰¾\n```js\nlet arr = [0, 1, 2, 4, 5, 6, 7, 8];\nlet arr2 = [88, 77, 66, 55, 44, 33, 22, 11];\n\nBinarySearch(arr2, 77);\nBinarySearch(arr, 2);\n\nfunction BinarySearch(arr, target) {\n    let s = 0;\n    let e = arr.length - 1;\n    let m = Math.floor((s + e) / 2);\n    let sortTag = arr[s] <= arr[e];//ç¡®å®šæ’åºé¡ºåº\n\n    while (s < e && arr[m] !== target) {\n        if (arr[m] > target) {\n            sortTag && (e = m - 1);\n            !sortTag && (s = m + 1);\n        } else {\n            !sortTag && (e = m - 1);\n            sortTag && (s = m + 1);\n        }\n        m = Math.floor((s + e) / 2);\n    }\n\n    if (arr[m] == target) {\n        console.log('æ‰¾åˆ°äº†,ä½ç½®%s', m);\n        return m;\n    } else {\n        console.log('æ²¡æ‰¾åˆ°');\n        return -1;\n    }\n\n}\n```\n\n## æ´—ç‰Œ(ä¹±åº)ç®—æ³•\n### æ—¶é—´å¤æ‚åº¦:O(nÂ²)\n```js\nfunction shuffle(arr) {\n  return arr.sort(function() {\n      return Math.random() - 0.5;\n  });\n}\n```\n\n### æ—¶é—´å¤æ‚åº¦:O(n)ç©ºé—´å¤æ‚åº¦O(1)\n```js\nfunction shuffle(arr) {\n  var newArr = [];\n  for(var i = 0, len = arr.length; i < len; i++) {\n    var j = Math.floor(Math.random() * (len - i));\n    newArr[i] = arr[j];\n    arr.splice(j, 1)\n  }\n  return newArr;\n}\n```\n\n## ä¸¤æ•°ä¹‹å’Œ\n[2,7,11,88,34],9 => [0,1]\n\n### åŒå¾ªç¯\n```js\nfunction twoSum(arr, target) {\n  var result = []\n  for (let m=0;m<arr.length -1;m++) {\n    for (let n= m+1;n<arr.length;n++) {\n      if(arr[m]+arr[n]===target){\n        result.push(m,n)\n        return result\n      }\n    }\n  }\n}\n```\n\n### Map\n```js\nfunction(arr, target) {\n let result = new Map()\n    for(let i=0;i<arr.length;i++){\n      if(result.has(target-arr[i])){\n        return [result.get(target-nums[i]),i] \n      }\n      result.set(nums[i],i)\n    }\n};\n```\n\n## å‡è®¾æœ‰130ä¸ªè‹¹æœï¼Œä½ æˆ‘è½®æµæ‹¿ï¼Œæ¯æ¬¡å¯æ‹¿1-5ä¸ªï¼Œå¦‚ä½•ä¿è¯ä½ æ‹¿åˆ°æœ€åä¸€ä¸ªè‹¹æœ\nå·´ä»€åšå¥•å˜›ä¿è¯å‰©æœ€å6ä¸ªç»™å¯¹é¢å–ï¼Œå…ˆå–è€…å¯å¿…èƒœï¼Œç¬¬ä¸€æ¬¡å–4ä¸ªï¼Œå‰©126ä¸ªï¼Œå¯¹é¢éšä¾¿å–ï¼Œå–çš„æ—¶å€™ä¿è¯ä¸€ç›´å‰©ä½™6çš„å€æ•°ï¼Œæœ€åä¸€å®šå‡ºç°å‰©6ä¸ªè‹¹æœçš„æƒ…å†µã€‚\n\n## æ‰‹åŠ¨æ§åˆ¶å¹¶å‘è¯·æ±‚fetchWithLimit\n```js\nfunction fetchWithLimit(urls, max, callback) {\n  const urlCount = urls.length;\n  const requestsQueue = [];\n  const results = [];\n  let i = 0;\n  const handleRequest = (url) => {\n    const req = fetch(url).then(res => {\n      const len = results.push(res);\n      if (len < urlCount && i + 1 < urlCount) {\n        requestsQueue.shift();\n        handleRequest(urls[++i])\n      } else if (len === urlCount) {\n        'function' === typeof callback && callback(results)\n      }\n    }).catch(e => {\n      results.push(e)\n    });\n    if (requestsQueue.push(req) < max) {\n      handleRequest(urls[++i])\n    }\n  };\n  handleRequest(urls[i])\n}\n```\n","tags":["ç®—æ³•"],"categories":["JS"]},{"title":"vueé¢è¯•é¢˜è®°å½•","url":"%2F2020%2FvueInterview.html","content":"\n### vue åŒå‘ç»‘å®šçš„åŸç†\né‡‡ç”¨æ•°æ®åŠ«æŒç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼çš„æ–¹å¼ï¼Œé€šè¿‡Object.defineProperty()æ¥åŠ«æŒå„ä¸ªå±æ€§çš„setterï¼Œgetterï¼Œåœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œè§¦å‘ç›¸åº”çš„ç›‘å¬å›è°ƒï¼Œå®ç°è§†å›¾åˆ·æ–°ã€‚\n\nå…·ä½“æµç¨‹ï¼š\nVueä¸­å…ˆéå†dataé€‰é¡¹ä¸­æ‰€æœ‰çš„å±æ€§ï¼ˆå‘å¸ƒè€…ï¼‰ç”¨Object.definePropertyåŠ«æŒè¿™äº›å±æ€§å°†å…¶è½¬ä¸ºgetter/setterã€‚è¯»å–æ•°æ®æ—¶å€™ä¼šè§¦å‘getterã€‚ä¿®æ”¹æ•°æ®æ—¶ä¼šè§¦å‘setterã€‚\n\nç„¶åç»™æ¯ä¸ªå±æ€§å¯¹åº”new Dep()ï¼ŒDepæ˜¯ä¸“é—¨æ”¶é›†ä¾èµ–ã€åˆ é™¤ä¾èµ–ã€å‘ä¾èµ–å‘é€æ¶ˆæ¯çš„ã€‚å…ˆè®©æ¯ä¸ªä¾èµ–è®¾ç½®åœ¨Dep.targetä¸Šï¼Œåœ¨Depä¸­åˆ›å»ºä¸€ä¸ªä¾èµ–æ•°ç»„ï¼Œå…ˆåˆ¤æ–­Dep.targetæ˜¯å¦å·²ç»åœ¨ä¾èµ–ä¸­å­˜åœ¨ï¼Œä¸å­˜åœ¨çš„è¯æ·»åŠ åˆ°ä¾èµ–æ•°ç»„ä¸­å®Œæˆä¾èµ–æ”¶é›†ï¼Œéšåå°†Dep.targetç½®ä¸ºä¸Šä¸€ä¸ªä¾èµ–ã€‚\n\nç»„ä»¶åœ¨æŒ‚è½½è¿‡ç¨‹ä¸­éƒ½ä¼šnewä¸€ä¸ªWatcherå®ä¾‹ã€‚è¿™ä¸ªå®ä¾‹å°±æ˜¯ä¾èµ–ï¼ˆè®¢é˜…è€…ï¼‰ã€‚Watcherç¬¬äºŒå‚æ•°æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæ­¤å‡½æ•°ä½œç”¨æ˜¯æ›´æ–°ä¸”æ¸²æŸ“èŠ‚ç‚¹ã€‚åœ¨é¦–æ¬¡æ¸²æŸ“è¿‡ç¨‹ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨Depæ–¹æ³•æ¥æ”¶é›†ä¾èµ–ï¼Œæ”¶é›†å®Œæˆåç»„ä»¶ä¸­æ¯ä¸ªæ•°æ®éƒ½ç»‘å®šä¸Šè¯¥ä¾èµ–ã€‚å½“æ•°æ®å˜åŒ–æ—¶å°±ä¼šåœ¨setterä¸­é€šçŸ¥å¯¹åº”çš„ä¾èµ–è¿›è¡Œæ›´æ–°ã€‚åœ¨æ›´æ–°è¿‡ç¨‹ä¸­è¦å…ˆè¯»å–æ•°æ®ï¼Œå°±ä¼šè§¦å‘Wactherçš„ç¬¬äºŒä¸ªå‡½æ•°å‚æ•°ã€‚ä¸€è§¦å‘å°±å†æ¬¡è‡ªåŠ¨è°ƒç”¨Depæ–¹æ³•æ”¶é›†ä¾èµ–ï¼ŒåŒæ—¶åœ¨æ­¤å‡½æ•°ä¸­è¿è¡Œpatchï¼ˆdiffè¿ç®—)æ¥æ›´æ–°å¯¹åº”çš„DOMèŠ‚ç‚¹ï¼Œå®Œæˆäº†åŒå‘ç»‘å®šã€‚\n\n- æ¯ä¸€ä¸ªç»„ä»¶é»˜è®¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ª Watcherï¼Œè‡ªå®šä¹‰çš„ watch å’Œ computed æ–¹æ³•ä¹Ÿä¼šåˆ›å»º Watcher \n\n### Object.defineProperty()å®ç°åŒå‘ç»‘å®šçš„ç¼ºç‚¹\n1. åªèƒ½ç›‘å¬æŸä¸ªå±æ€§ï¼Œä¸èƒ½ç›‘å¬æ•´ä¸ªå¯¹è±¡\n2. éœ€è¦ä½¿ç”¨for inéå†å¯¹è±¡å±æ€§ç»‘å®šç›‘å¬\n3. ä¸èƒ½ç›‘å¬æ•°ç»„ï¼Œéœ€è¦é‡å†™æ•°ç»„æ–¹æ³•è¿›è¡Œç‰¹å¼‚æ€§æ“ä½œ\n4. ä¼šæ±¡æŸ“åŸå¯¹è±¡\n\n---\n<!--more-->\n\n### v-showå’Œv-ifæœ‰ä»€ä¹ˆåŒºåˆ«\n\n- v-ifï¼ˆåˆå§‹åŒ–ä¸ä¼šæ¸²æŸ“ï¼‰\nv-if æ˜¯çœŸæ­£çš„æ¡ä»¶æ¸²æŸ“ï¼Œå› ä¸ºå®ƒä¼šç¡®ä¿åœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­æ¡ä»¶å—å†…çš„äº‹ä»¶ç›‘å¬å’Œå­ç»„ä»¶é€‚å½“åœ°è¢«é”€æ¯å’Œé‡å»ºï¼Œä¹Ÿæ˜¯æƒ°æ€§çš„ï¼Œå¦‚æœåœ¨åˆå§‹æ¸²æŸ“æ¡ä»¶ä¸ºå‡æ—¶ï¼Œåˆ™ä»€ä¹ˆä¹Ÿä¸åšâ€”â€”ç›´åˆ°æ¡ä»¶ç¬¬ä¸€æ¬¡å˜ä¸ºçœŸæ—¶æ‰å¼€å§‹æ¸²æŸ“æ¡ä»¶å—ï¼Œèƒ½ç”¨åœ¨<template>ä¸Šã€‚\n\n- v-showï¼ˆåˆå§‹åŒ–ä¼šæ¸²æŸ“ï¼‰\nv-showå°±ç®€å•å¾—å¤šï¼Œä¸ç®¡åˆå§‹æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Œå…ƒç´ æ€»æ˜¯ä¼šè¢«æ¸²æŸ“ï¼Œå¹¶ä¸”åªæ˜¯ç®€å•åœ°åŸºäºcssçš„displayè¿›è¡Œåˆ‡æ¢ã€‚\n\næ‰€ä»¥ï¼Œv-ifé€‚ç”¨äºåˆ‡æ¢ä¸é¢‘ç¹çš„åœºæ™¯ï¼Œv-showé€‚ç”¨äºåˆ‡æ¢é¢‘ç¹çš„åœºæ™¯ï¼Œä¸èƒ½ç”¨åœ¨<template>ä¸Šã€‚\n\n### classå’Œstyleå¦‚ä½•åŠ¨æ€ç»‘å®š\n\nclasså¯ä»¥é€šè¿‡å¯¹è±¡è¯­æ³•å’Œæ•°ç»„è¯­æ³•è¿›è¡ŒåŠ¨æ€ç»‘å®šï¼š\n- å¯¹è±¡è¯­æ³•\n```js\n<div v-bind:class=\"{active: isActive, 'text-danger': hasError }\"></div>\ndata: {\n    isActive: true,\n    hasError: false\n}\n```\n\n- æ•°ç»„è¯­æ³•\n```js\n<div v-bind:class=\"[isActive ? activeClass : '', errorClass]\"></div>\ndata: {\n    activeClass: 'active',\n    errorClass: 'text-danger'\n}\n```\nstyleä¹Ÿå¯ä»¥é€šè¿‡å¯¹è±¡è¯­æ³•å’Œæ•°ç»„è¯­æ³•è¿›è¡ŒåŠ¨æ€ç»‘å®š\n\n### ç†è§£vueé‡Œçš„å•å‘æ•°æ®æµ\næ‰€æœ‰çš„propéƒ½ä½¿å¾—å…¶çˆ¶å­propä¹‹é—´å½¢æˆä¸€ä¸ªå•å‘ä¸‹è¡Œç»‘å®šï¼šçˆ¶çº§propçš„æ›´æ–°ä¼šå‘ä¸‹æµåŠ¨åˆ°å­ç»„ä»¶ä¸­ï¼Œä½†æ˜¯åè¿‡æ¥ä¸è¡Œï¼Œè¿™æ ·ä¼šé˜²æ­¢ä»å­ç»„ä»¶æ„å¤–æ”¹å˜çˆ¶çº§ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œå¯¼è‡´ä½ çš„åº”ç”¨çš„æ•°æ®æµéš¾ä»¥è§£é‡Š.\n\né¢å¤–åœ°ï¼Œæ¯æ¬¡çˆ¶çº§ç»„ä»¶å‘ç”Ÿæ›´æ–°æ—¶ï¼Œå­ç»„ä»¶ä¸­çš„æ‰€æœ‰propéƒ½ä¼šåˆ·æ–°ä¸ºæœ€æ–°çš„å€¼ï¼Œè¿™æ„å‘³ç€ä½ ä¸åº”è¯¥åœ¨ä¸€ä¸ªå­ç»„ä»¶å†…éƒ¨æ”¹å˜propï¼Œå¦‚æœä½ è¿™æ ·åšäº†ï¼Œvueä¼šåœ¨æµè§ˆå™¨çš„æ§åˆ¶å°å‘å‡ºè­¦å‘Šï¼Œå­ç»„ä»¶æƒ³ä¿®æ”¹æ—¶ï¼Œåªèƒ½é€šè¿‡$emitæ´¾å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶æ¥æ”¶åˆ°åï¼Œç”±çˆ¶ç»„ä»¶ä¿®æ”¹.\n\n> åŒå‘æ•°æ®æµæ˜¯æŒ‡æ•°æ®ä»çˆ¶çº§å‘å­çº§ä¼ é€’æ•°æ®ï¼Œå­çº§å¯ä»¥é€šè¿‡ä¸€äº›æ‰‹æ®µæ”¹å˜çˆ¶çº§å‘å­çº§ä¼ é€’çš„æ•°æ®ã€‚\n\n### computedå’Œwatchçš„åŒºåˆ«å’Œè¿ç”¨åœºæ™¯\n- computedï¼šæ˜¯è®¡ç®—å±æ€§ï¼Œä¾èµ–å…¶ä»–å±æ€§å€¼ï¼Œå¹¶ä¸”computedçš„å€¼æœ‰ç¼“å­˜ï¼Œåªæœ‰å®ƒä¾èµ–çš„å±æ€§å€¼å‘ç”Ÿæ”¹å˜æ—¶ä¸‹ä¸€æ¬¡è·å–computedçš„å€¼æ—¶å€™æ‰ä¼šé‡æ–°è®¡ç®—computedçš„å€¼ã€‚é¿å…åœ¨æ¨¡æ¿ä¸­æ”¾å…¥å¤ªå¤šçš„é€»è¾‘ï¼Œå¯¼è‡´æ¨¡æ¿è¿‡é‡ä¸”éš¾ä»¥ç»´æŠ¤ã€‚å½“æœªå‘ç”Ÿæ”¹å˜æ—¶ï¼Œåˆ™ä¼šè¿”å›ä¸Šä¸€æ¬¡çš„æ•°æ®ã€‚\n\n- watchï¼šæ›´å¤šçš„æ˜¯è§‚å¯Ÿä½œç”¨ï¼Œç±»ä¼¼äºæŸäº›æ•°æ®çš„ç›‘å¬å›è°ƒï¼Œæ¯å½“ç›‘å¬çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶éƒ½ä¼šæ‰§è¡Œå›è°ƒè¿›è¡Œåç»­æ“ä½œã€‚\n\n- methods: æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½éœ€è¦é‡æ–°æ‰§è¡Œã€‚\n\nè¿ç”¨åœºæ™¯ï¼š\n\n- å½“æˆ‘ä»¬éœ€è¦è¿›è¡Œæ•°å€¼è®¡ç®—ï¼Œå¹¶ä¾èµ–äºå…¶ä»–æ•°æ®æ—¶ï¼Œåº”è¯¥ä½¿ç”¨computedï¼Œå› ä¸ºå¯ä»¥åˆ©ç”¨computedçš„ç¼“å­˜ç‰¹æ€§ï¼Œé¿å…æ¯æ¬¡è·å–å€¼æ—¶éƒ½è¦é‡æ–°è®¡ç®—ã€‚\n\n- ä½†æˆ‘ä»¬éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶åº”è¯¥ä½¿ç”¨watchï¼Œä½¿ç”¨watché€‰é¡¹å…è®¸æˆ‘ä»¬æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œé™åˆ¶æˆ‘ä»¬æ‰§è¡Œè¯¥æ“ä½œçš„é¢‘ç‡ï¼Œå¹¶åœ¨æˆ‘ä»¬å¾—åˆ°æœ€ç»ˆç»“æœå‰ï¼Œè®¾ç½®ä¸­é—´çŠ¶æ€ï¼Œè¿™äº›éƒ½æ˜¯è®¡ç®—å±æ€§æ— æ³•åšåˆ°çš„ã€‚\n\n### ç›´æ¥ç»™ä¸€ä¸ªæ•°ç»„é¡¹èµ‹å€¼ï¼Œvueèƒ½æ£€æµ‹åˆ°å—\n- ç”±äºjsçš„é™åˆ¶(å¼•ç”¨ç±»å‹)ï¼Œvueä¸èƒ½æ£€æµ‹åˆ°ä»¥ä¸‹æ•°ç»„çš„å˜åŠ¨(å¯¹è±¡å±æ€§çš„æ·»åŠ å’Œåˆ é™¤)ï¼š\n\n- å½“ä½ åˆ©ç”¨ç´¢å¼•ç›´æ¥è®¾ç½®ä¸€ä¸ªæ•°ç»„é¡¹æ—¶ï¼Œä¾‹å¦‚vm.item[indexOfItem] = newValue\n- å½“ä½ ä¿®æ”¹æ•°ç»„çš„é•¿åº¦æ—¶ï¼Œä¾‹å¦‚vm.items.length = newLength\n\nä¸ºäº†è§£å†³ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œvueæä¾›äº†ä»¥ä¸‹æ“ä½œæ–¹æ³•ï¼š\n```js\nVue.set(vm.items, indexOfItem, newValue)\n\nVue.$set(vm.items, indexOfItem, newValue)\n\nVue.$set(this.data,â€keyâ€,value) // åŠ¨æ€æ·»åŠ å•ä¸ªå±æ€§\n\n// åŠ¨æ€æ·»åŠ å¤šä¸ªå±æ€§ \nthis.obj = Object.assign({}, this.obj, {\n  age: 18,\n  name: 'Chocolate',\n})\n\nVue.items.splice(indexOfItem, 1, newValue)\n```\n\nä¸ºäº†è§£å†³ç¬¬äºŒä¸ªé—®é¢˜ï¼Œvueæä¾›äº†ä»¥ä¸‹æ“ä½œæ–¹æ³•ï¼š\n```js\nvm.items.splice(newLength)\n```\n\n- Vue æ˜¯ä¸èƒ½æ£€æµ‹å¯¹è±¡å±æ€§çš„æ·»åŠ æˆ–åˆ é™¤\n```js\ndata() {\n    return {\n        obj:{\n            name:'Vue'\n        }\n    };\n},\nmounted() {\n    this.name = 'zs' // ä¸æ˜¯å“åº”å¼çš„\n    this.$set(this.obj,'name','lisi') //å“åº”å¼ è§£å†³æ·»åŠ \n    // ç”¨Object.assignæ¥è§£å†³ç¬¬äºŒç§æƒ…å†µã€‚è§£å†³å¯¹è±¡çš„åˆ é™¤\n    // Vue.delete\n},\n```\n### deleteå’ŒVue.deleteçš„åŒºåˆ«\ndelete åªæ˜¯è¢«åˆ é™¤çš„å…ƒç´ å˜æˆäº†empty/undefinedï¼Œå…¶ä»–å…ƒç´ çš„é”®å€¼è¿˜æ˜¯ä¸å˜çš„ã€‚è€ŒVue.deleteç›´æ¥åˆ é™¤äº†æ•°ç»„ï¼Œæ”¹å˜äº†æ•°ç»„çš„é”®å€¼ã€‚\n\n### vueç”Ÿå‘½å‘¨æœŸçš„ç†è§£ï¼ˆ10ä¸ªï¼‰\n- ç”Ÿå‘½å‘¨æœŸæ˜¯ä»€ä¹ˆ(åˆ›å»ºåˆ°é”€æ¯çš„è¿‡ç¨‹)\nvueå®ä¾‹æœ‰ä¸€ä¸ªå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œä¹Ÿå°±æ˜¯ä»å¼€å§‹åˆ›å»ºï¼Œåˆå§‹åŒ–æ•°æ®ï¼Œç¼–è¯‘æ¨¡æ¿ï¼ŒæŒ‚è½½dom->æ¸²æŸ“æ›´æ–°->æ¸²æŸ“å¸è½½ç­‰ä¸€äº›è¿‡ç¨‹ï¼Œæˆ‘ä»¬ç§°è¿™æ˜¯vueçš„ç”Ÿå‘½å‘¨æœŸ\n\n- å„ä¸ªç”Ÿå‘½å‘¨æœŸçš„ä½œç”¨\n  - beforeCreateï¼šç»„ä»¶è¢«åˆ›å»ºä¹‹åˆï¼Œç»„ä»¶çš„å±æ€§ç”Ÿæ•ˆä¹‹å‰\n  - createdï¼šç»„ä»¶å®ä¾‹å·²ç»å®Œå…¨åˆ›å»ºï¼Œå±æ€§ä¹Ÿç»‘å®šï¼Œä½†æ˜¯çœŸå®çš„domè¿˜æ²¡æœ‰ç”Ÿæˆï¼Œ$elè¿˜ä¸èƒ½ç”¨(vueå®ä¾‹çš„æ•°æ®å¯¹è±¡dataæœ‰äº†ï¼Œelå’Œæ•°æ®å¯¹è±¡dataéƒ½ä¸ºundefinedï¼Œè¿˜\n  æœªåˆå§‹åŒ–ã€‚)\n  - beforeMountï¼šåœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼Œç›¸å…³çš„renderå‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨\n  - mountedï¼šelè¢«æ–°åˆ›å»ºçš„vm.$elæ›¿æ¢ï¼Œå¹¶æŒ‚è½½åˆ°å®ä¾‹ä¸Šå»åè°ƒç”¨è¯¥é’©å­\n  - beforeUpdateï¼šç»„ä»¶æ•°æ®æ›´æ–°ä¹‹å‰è°ƒç”¨ï¼Œå‘ç”Ÿåœ¨è™šæ‹Ÿdomæ‰“è¡¥ä¸ä¹‹å‰ \n  - updatedï¼šç»„ä»¶æ•°æ®æ›´æ–°ä¹‹å\n  - activatedï¼škeep-aliveä¸“å±ï¼Œç»„ä»¶è¢«æ¿€æ´»æ—¶è°ƒç”¨\n  - deactivatedï¼škeep-aliveä¸“å±ï¼Œç»„ä»¶è¢«é”€æ¯æ—¶è°ƒç”¨\n  - beforeDestroyï¼šç»„ä»¶è¢«é”€æ¯å‰\n  - destroyedï¼šç»„ä»¶è¢«é”€æ¯åè°ƒç”¨\n\n- _init_\n  - initLifecycle/Eventï¼Œå¾€vmä¸ŠæŒ‚è½½å„ç§å±æ€§\n  - callHook: beforeCreate: å®ä¾‹åˆšåˆ›å»º\n  - initInjection/initState: åˆå§‹åŒ–æ³¨å…¥å’Œ data å“åº”æ€§\n  - created: åˆ›å»ºå®Œæˆï¼Œå±æ€§å·²ç»ç»‘å®šï¼Œ ä½†è¿˜æœªç”ŸæˆçœŸå®dom\n  - è¿›è¡Œå…ƒç´ çš„æŒ‚è½½ï¼š $el / vm.$mount()\n  - æ˜¯å¦æœ‰template: è§£ææˆrender function\n    - *.vueæ–‡ä»¶: vue-loaderä¼šå°†<template>ç¼–è¯‘æˆrender function\n  - beforeMount: æ¨¡æ¿ç¼–è¯‘/æŒ‚è½½ä¹‹å‰\n  - æ‰§è¡Œrender functionï¼Œç”ŸæˆçœŸå®çš„domï¼Œå¹¶æ›¿æ¢åˆ°dom treeä¸­\n  - mounted: ç»„ä»¶å·²æŒ‚è½½\n\n- update:\n  - æ‰§è¡Œdiffç®—æ³•ï¼Œæ¯”å¯¹æ”¹å˜æ˜¯å¦éœ€è¦è§¦å‘UIæ›´æ–°\n  - flushScheduleQueue\n    - watcher.before: è§¦å‘beforeUpdateé’©å­\t\t\n    - watcher.run(): æ‰§è¡Œwatcherä¸­çš„ notifyï¼Œé€šçŸ¥æ‰€æœ‰ä¾èµ–é¡¹æ›´æ–°UI\n  - è§¦å‘updatedé’©å­: ç»„ä»¶å·²æ›´æ–°\n\n- actived / deactivated(keep-alive): ä¸é”€æ¯ï¼Œç¼“å­˜ï¼Œç»„ä»¶æ¿€æ´»ä¸å¤±æ´»\n- destroy:\n  - beforeDestroy: é”€æ¯å¼€å§‹\n  - é”€æ¯è‡ªèº«ä¸”é€’å½’é”€æ¯å­ç»„ä»¶ä»¥åŠäº‹ä»¶ç›‘å¬\n    - remove(): åˆ é™¤èŠ‚ç‚¹\n    - watcher.teardown(): æ¸…ç©ºä¾èµ–\n    - vm.$off(): è§£ç»‘ç›‘å¬\n  - destroyed: å®Œæˆåè§¦å‘é’©å­\n\n```js\nnew Vue({})\n\n// åˆå§‹åŒ–Vueå®ä¾‹\nfunction _init() {\n\t // æŒ‚è½½å±æ€§\n    initLifeCycle(vm) \n    // åˆå§‹åŒ–äº‹ä»¶ç³»ç»Ÿï¼Œé’©å­å‡½æ•°ç­‰\n    initEvent(vm) \n    // ç¼–è¯‘slotã€vnode\n    initRender(vm) \n    // è§¦å‘é’©å­\n    callHook(vm, 'beforeCreate')\n    // æ·»åŠ injectåŠŸèƒ½\n    initInjection(vm)\n    // å®Œæˆæ•°æ®å“åº”æ€§ props/data/watch/computed/methods\n    initState(vm)\n    // æ·»åŠ  provide åŠŸèƒ½\n    initProvide(vm)\n    // è§¦å‘é’©å­\n    callHook(vm, 'created')\n\t\t\n\t // æŒ‚è½½èŠ‚ç‚¹\n    if (vm.$options.el) {\n        vm.$mount(vm.$options.el)\n    }\n}\n\n// æŒ‚è½½èŠ‚ç‚¹å®ç°\nfunction mountComponent(vm) {\n\t // è·å– render function\n    if (!this.options.render) {\n        // template to render\n        // Vue.compile = compileToFunctions\n        let { render } = compileToFunctions() \n        this.options.render = render\n    }\n    // è§¦å‘é’©å­\n    callHook('beforeMount')\n    // åˆå§‹åŒ–è§‚å¯Ÿè€…\n    // render æ¸²æŸ“ vdomï¼Œ \n    vdom = vm.render()\n    // update: æ ¹æ® diff å‡ºçš„ patchs æŒ‚è½½æˆçœŸå®çš„ dom \n    vm._update(vdom)\n    // è§¦å‘é’©å­  \n    callHook(vm, 'mounted')\n}\n\n// æ›´æ–°èŠ‚ç‚¹å®ç°\nfuntion queueWatcher(watcher) {\n\tnextTick(flushScheduleQueue)\n}\n\n// æ¸…ç©ºé˜Ÿåˆ—\nfunction flushScheduleQueue() {\n\t // éå†é˜Ÿåˆ—ä¸­æ‰€æœ‰ä¿®æ”¹\n    for(){\n\t    // beforeUpdate\n        watcher.before()\n         \n        // ä¾èµ–å±€éƒ¨æ›´æ–°èŠ‚ç‚¹\n        watcher.update() \n        callHook('updated')\n    }\n}\n\n// é”€æ¯å®ä¾‹å®ç°\nVue.prototype.$destory = function() {\n\t // è§¦å‘é’©å­\n    callHook(vm, 'beforeDestory')\n    // è‡ªèº«åŠå­èŠ‚ç‚¹\n    remove() \n    // åˆ é™¤ä¾èµ–\n    watcher.teardown() \n    // åˆ é™¤ç›‘å¬\n    vm.$off() \n    // è§¦å‘é’©å­\n    callHook(vm, 'destoryed')\n}\n```\n\n### vueçˆ¶å­ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°çš„æ‰§è¡Œé¡ºåº\n- åŠ è½½æ¸²æŸ“è¿‡ç¨‹\nçˆ¶beforeCreate->çˆ¶created->çˆ¶beforeMount->å­beforeCreate->å­created->å­beforeMount->å­mounted->çˆ¶mounted\n\n- å­ç»„ä»¶æ›´æ–°è¿‡ç¨‹\nçˆ¶beforeUpdate->å­beforeUpdate->å­updated->çˆ¶updated\n\n- çˆ¶ç»„ä»¶æ›´æ–°è¿‡ç¨‹\nçˆ¶beforeUpdate->çˆ¶updated\n\n- é”€æ¯è¿‡ç¨‹\nçˆ¶beforeDestroy->å­beforeDestroy->å­destroyed->çˆ¶destroy\n\n### åœ¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸå†…è°ƒç”¨å¼‚æ­¥è¯·æ±‚\nå¯ä»¥åœ¨å‡½æ•°createdï¼ŒbeforeMountï¼Œmountedä¸­è¿›è¡Œè°ƒç”¨ï¼Œå› ä¸ºåœ¨è¿™ä¸‰ä¸ªé’©å­å‡½æ•°ä¸­dataå·²ç»å¯ä»¥åˆ›å»ºï¼Œå¯ä»¥å°†æœåŠ¡ç«¯è¿”å›çš„æ•°æ®è¿›è¡Œèµ‹å€¼ï¼Œä½†æ˜¯æ¯”è¾ƒæ¨èåœ¨createdé’©å­å‡½æ•°ä¸­è°ƒç”¨å¼‚æ­¥è¯·æ±‚ï¼Œå› ä¸ºï¼š\n\n- èƒ½æ›´å¿«çš„è·å–åˆ°æœåŠ¡ç«¯æ•°æ®ï¼Œå‡å°‘é¡µé¢loadingæ—¶é—´\n- ssrä¸æ”¯æŒbeforeMountï¼Œmountedé’©å­å‡½æ•°ï¼Œæ‰€ä»¥æ”¾åœ¨createdä¸­æœ‰åŠ©äºä¸€è‡´æ€§\n\n- mountedé‡Œèƒ½å¤Ÿæ“ä½œdom\n\n### åœ¨ä»€ä¹ˆé˜¶æ®µæ‰èƒ½è®¿é—®æ“ä½œDOM\nåœ¨é’©å­å‡½æ•°mountedè¢«è°ƒç”¨ä¹‹å‰ï¼Œvueå·²ç»æŠŠç¼–è¯‘å¥½çš„æ¨¡æ¿æŒ‚è½½åˆ°é¡µé¢ä¸Šï¼Œæ‰€ä»¥åœ¨mountedä¸­å¯ä»¥è®¿é—®æ“ä½œdomï¼Œvueå…·ä½“çš„ç”Ÿå‘½å‘¨æœŸã€‚\n\n### çˆ¶ç»„ä»¶å¯ä»¥ç›‘å¬åˆ°å­ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå—\n- æ‰‹åŠ¨è®¾ç½®$emitæ¥å‘å¸ƒç›‘å¬\n```js\n// parent\n<Child @mounted=\"fn\" />\n// child\nmounted() {\n    this.$emit(\"mounted\");\n}\n```\n\n- @hook\n```js\n// parent\n<Child @hook:mounted=\"fn\" />\nfn() {\n    console.log('get')\n}\n// child\nmounted() {\n    console.log('emit');\n```\n\n### è°ˆè°ˆä½ å¯¹keep-aliveçš„äº†è§£\nkeep-aliveæ˜¯vueå†…ç½®çš„ä¸€ä¸ªç»„ä»¶ï¼Œå¯ä»¥ä½¿è¢«åŒ…å«çš„ç»„ä»¶ä¿ç•™çŠ¶æ€ï¼Œé¿å…é‡å¤æ¸²æŸ“ï¼Œå…¶æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š\n\n- ä¸€èˆ¬ç»“åˆè·¯ç”±å’ŒåŠ¨æ€ç»„ä»¶ä½¿ç”¨ï¼Œç”¨äºç¼“å­˜ç»„ä»¶\n- æä¾›includeå’Œexcludeå±æ€§ï¼Œä¸¤è€…éƒ½æ”¯æŒå­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼Œincludeè¡¨ç¤ºåªæœ‰åå­—åŒ¹é…çš„ç»„ä»¶ä¼šè¢«ç¼“å­˜ï¼Œexcludeè¡¨ç¤ºä»»ä½•åç§°åŒ¹é…çš„ç»„ä»¶éƒ½ä¸ä¼šè¢«ç¼“å­˜ï¼Œå…¶ä¸­excludeçš„ä¼˜å…ˆçº§æ¯”includeé«˜\n- å¯¹åº”ä¸¤ä¸ªé’©å­å‡½æ•°activedå’Œdeactivated\n\n### ç»„ä»¶ä¸­çš„dataä¸ºä»€ä¹ˆæ˜¯ä¸ªå‡½æ•°\nå› ä¸ºç»„ä»¶æ˜¯æ‹¿æ¥å¤ç”¨çš„ï¼Œä¸”jsé‡Œçš„å¯¹è±¡æ˜¯å¼•ç”¨å…³ç³»ï¼Œå¦‚æœç»„ä»¶ä¸­çš„dataæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™æ ·ä½œç”¨åŸŸæ²¡æœ‰éš”ç¦»ï¼Œå­ç»„ä»¶ä¸­çš„dataå±æ€§å€¼ä¼šç›¸äº’å½±å“ï¼Œå¦‚æœç»„ä»¶ä¸­çš„dataæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆæ¯ä¸ªå®ä¾‹å¯ä»¥ç»´æŠ¤ä¸€ä»½è¢«è¿”å›å¯¹è±¡çš„ç‹¬ç«‹çš„æ‹·è´ï¼Œç»„ä»¶å®ä¾‹ä¹‹é—´çš„dataå±æ€§å€¼ä¸ä¼šäº’ç›¸å½±å“ï¼Œè€Œnew Vueçš„å®ä¾‹æ˜¯ä¸ä¼šè¢«å¤ç”¨çš„ï¼Œå› æ­¤ä¸å­˜åœ¨å¼•ç”¨å¯¹è±¡çš„é—®é¢˜ã€‚\n\n### v-modelçš„åŸç†\næˆ‘ä»¬åœ¨vueé¡¹ç›®ä¸­ä¸»è¦ä½¿ç”¨v-modelæŒ‡ä»¤åœ¨è¡¨å•inputï¼Œtextareaï¼Œselectç­‰å…ƒç´ ä¸Šåˆ›å»ºåŒå‘ç»‘å®šï¼Œæˆ‘ä»¬çŸ¥é“v-modelæœ¬è´¨ä¸Šä¸è¿‡æ˜¯è¯­æ³•ç³–ï¼Œv-modelåœ¨å†…éƒ¨ä¸ºä¸åŒçš„è¾“å…¥å…ƒç´ ä½¿ç”¨ä¸åŒçš„å±æ€§å¹¶æŠ›å‡ºä¸åŒçš„äº‹ä»¶ï¼š\n\n- textå’Œtextareaå…ƒç´ ä½¿ç”¨valueå±æ€§å’Œinputäº‹ä»¶\n- checkboxå’Œradioä½¿ç”¨checkedå’Œchange\n- selectå­—æ®µå°†valueä½œä¸ºpropå¹¶å°†changeä½œä¸ºäº‹ä»¶\n\n### vueç»„ä»¶é—´é€šä¿¡æœ‰å“ªå‡ ç§æ–¹å¼ï¼ˆ6ç§ï¼‰\n- propså’Œ$emit\né€‚ç”¨çˆ¶å­ç»„ä»¶é€šä¿¡\n\n- refå’Œ$parent $children\nrefï¼šå¦‚æœåœ¨æ™®é€šdomä¸Šä½¿ç”¨ï¼Œå¼•ç”¨æŒ‡å‘çš„å°±æ˜¯domå…ƒç´ ï¼Œå¦‚æœç”¨åœ¨å­ç»„ä»¶ä¸Šï¼Œå¼•ç”¨å°±æŒ‡å‘ç»„ä»¶å®ä¾‹ $parent/$childrenï¼šè®¿é—®çˆ¶å­å®ä¾‹\n\n- EventBusï¼ˆ$emit/$onï¼‰\nè¿™ç§æ–¹æ³•é€šè¿‡ä¸€ä¸ªç©ºçš„vueå®ä¾‹ä½œä¸ºä¸­å¤®äº‹ä»¶æ€»çº¿ï¼ˆäº‹ä»¶ä¸­å¿ƒï¼‰ï¼Œç”¨å®ƒæ¥è§¦å‘äº‹ä»¶å’Œç›‘å¬äº‹ä»¶ï¼Œä»è€Œå®ç°ä»»ä½•ç»„ä»¶é—´çš„é€šä¿¡ï¼ŒåŒ…æ‹¬çˆ¶å­ï¼Œéš”ä»£ï¼Œå…„å¼Ÿç»„ä»¶\n\n- $attrs/$listeners\n$attrsï¼šåŒ…å«äº†çˆ¶ä½œç”¨åŸŸé‡Œä¸è¢«propæ‰€è¯†åˆ«ï¼ˆä¸”è·å–ï¼‰çš„ç‰¹æ€§ç»‘å®šï¼ˆclasså’Œstyleé™¤å¤–ï¼‰ã€‚å½“ä¸€ä¸ªç»„ä»¶æ²¡æœ‰å£°æ˜ä»»ä½•propæ—¶ï¼Œè¿™é‡Œä¼šåŒ…å«æ‰€æœ‰çˆ¶ä½œç”¨åŸŸçš„ç»‘å®šï¼ˆclasså’Œstyleé™¤å¤–ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡v-bind=\"$attrs\"ä¼ å…¥å†…éƒ¨ç»„ä»¶ã€‚é€šå¸¸é…åˆinheritAttrsé€‰é¡¹ä¸€èµ·ä½¿ç”¨\n\n$listenersï¼šåŒ…å«äº†çˆ¶ä½œç”¨åŸŸä¸­çš„v-onäº‹ä»¶ç›‘å¬å™¨ï¼Œå®ƒå¯ä»¥é€šè¿‡v-on=\"$listeners\"ä¼ å…¥å†…éƒ¨ç»„ä»¶\n\n- provideã€inject\nç¥–å…ˆç»„ä»¶é€šè¿‡provideæ¥æä¾›å˜é‡ï¼Œç„¶ååœ¨å­å­™ç»„ä»¶ä¸­é€šè¿‡injectæ¥æ³¨å…¥å˜é‡ï¼Œprovide / inject APIä¸»è¦è§£å†³äº†è·¨çº§ç»„ä»¶é—´çš„é€šä¿¡é—®é¢˜ï¼Œä¸è¿‡ä»–çš„ä½¿ç”¨åœºæ™¯ï¼Œä¸»è¦æ˜¯å­ç»„ä»¶è·å–ä¸Šçº§ç»„ä»¶çš„çŠ¶æ€ï¼Œè·¨çº§ç»„ä»¶é—´å»ºç«‹ä¸€ç§ä¸»åŠ¨æä¾›å’Œä¾èµ–æ³¨å…¥çš„å…³ç³»\n\n- vuex\nvuexæ˜¯ä¸€ä¸ªä¸“ä¸ºvueåº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼Œæ¯ä¸€ä¸ªvuexåº”ç”¨çš„æ ¸å¿ƒå°±æ˜¯storeï¼ŒstoreåŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä»“åº“ï¼Œå®ƒåŒ…å«ç€ä½ çš„åº”ç”¨ä¸­å¤§éƒ¨åˆ†çš„çŠ¶æ€\n\nvuexçš„çŠ¶æ€å­˜å‚¨æ˜¯å“åº”å¼çš„ï¼Œå½“vueä»storeä¸­è¯»å–çŠ¶æ€æ—¶å€™ï¼Œè‹¥storeä¸­çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆç›¸åº”çš„ç»„ä»¶ä¹Ÿä¼šç›¸åº”çš„å¾—åˆ°é«˜æ•ˆæ›´æ–°\n\næ”¹å˜storeä¸­çš„çŠ¶æ€çš„å”¯ä¸€çš„é€”å¾„å°±æ˜¯æ˜¾å¼åœ°æäº¤mutationï¼Œè¿™æ ·ä½¿æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿åœ°è·Ÿè¸ªæ¯ä¸€ä¸ªçŠ¶æ€çš„å˜åŒ–\n\n### ä½ ä½¿ç”¨è¿‡vuexå—\nvuexæ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºvueåº”ç”¨ç¨‹åºå¼€å‘çš„çŠ¶æ€ç®¡ç†æ¨¡å¼ï¼Œæ¯ä¸€ä¸ªvuexåº”ç”¨çš„æ ¸å¿ƒæ˜¯storeï¼ŒstoreåŸºæœ¬ä¸Šå°±æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå®ƒåŒ…å«ç€ä½ çš„åº”ç”¨ä¸­å¤§éƒ¨åˆ†çš„çŠ¶æ€ï¼ˆstateï¼‰\n\nä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ¨¡å—ï¼š\n\n- stateï¼šå®šä¹‰äº†åº”ç”¨çŠ¶æ€çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥åœ¨è¿™é‡Œè®¾ç½®é»˜è®¤çš„åˆå§‹çŠ¶æ€\n- Gettersï¼šå…è®¸ç»„ä»¶ä»Stateä¸­è·å–æ•°æ®ï¼ŒmapGettersè¾…åŠ©å‡½æ•°ä»…ä»…æ˜¯å°†storeä¸­çš„getteræ˜ å°„åˆ°å±€éƒ¨è®¡ç®—å±æ€§\n- Mutationsï¼šæ˜¯å”¯ä¸€æ›´æ”¹storeä¸­çŠ¶æ€çš„æ–¹æ³•ï¼Œä¸”å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°\n- Actionsï¼šç”¨äºæäº¤mutationï¼Œè€Œä¸æ˜¯ç›´æ¥æ›´æ”¹çŠ¶æ€ï¼Œå¯ä»¥åŒ…å«ä»»æ„çš„å¼‚æ­¥æ“ä½œ\n- Modulesï¼šå…è®¸å°†å•ä¸€çš„Storeæ‹†åˆ†æˆå¤šä¸ªstoreä¸”åŒæ—¶ä¿å­˜åœ¨å•ä¸€çš„çŠ¶æ€æ ‘é‡Œ\n\n### vuexè§£å†³äº†ä»€ä¹ˆé—®é¢˜\n1. å¤šä¸ªç»„ä»¶ä¾èµ–åŒä¸€çŠ¶æ€ï¼Œå¤šå±‚åµŒå¥—ç¹çï¼Œå…„å¼Ÿç»„ä»¶æ²¡åŠæ³•ä¼ å€¼é€šä¿¡ã€‚\n\n2. ä¸åŒç»„ä»¶çš„è¡Œä¸ºéœ€è¦ä¿®æ”¹åŒä¸€çŠ¶æ€\n\n### Vuexä¸­çŠ¶æ€æ˜¯å¯¹è±¡æ—¶ï¼Œä½¿ç”¨æ—¶è¦æ³¨æ„ä»€ä¹ˆï¼Ÿ\nå› ä¸ºå¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¤åˆ¶åæ”¹å˜å±æ€§è¿˜æ˜¯ä¼šå½±å“åŸå§‹æ•°æ®ï¼Œè¿™æ ·ä¼šæ”¹å˜stateé‡Œé¢çš„çŠ¶æ€ï¼Œæ˜¯ä¸å…è®¸ï¼Œæ‰€ä»¥å…ˆç”¨æ·±åº¦å…‹éš†å¤åˆ¶å¯¹è±¡ï¼Œå†ä¿®æ”¹ã€‚\n\n### ç»„ä»¶ä¸­æ‰¹é‡ä½¿ç”¨Vuexçš„stateçŠ¶æ€\n```js\nimport {mapState} from 'vuex'\nexport default{\n    computed:{\n        ...mapState(['price','number'])\n    }\n}\n```\n\n### Vuexä¸­è¦ä»stateæ´¾ç”Ÿä¸€äº›çŠ¶æ€å‡ºæ¥ï¼Œä¸”å¤šä¸ªç»„ä»¶ä½¿ç”¨å®ƒ\nä½¿ç”¨getterå±æ€§ï¼Œç›¸å½“Vueä¸­çš„è®¡ç®—å±æ€§computedï¼Œåªæœ‰åŸçŠ¶æ€æ”¹å˜æ´¾ç”ŸçŠ¶æ€æ‰ä¼šæ”¹å˜ã€‚\n```js\nconst store = new Vuex.Store({\n    state: {\n        price: 10,\n        number: 10,\n        discount: 0.7,\n    },\n    getters: {\n        total: state => {\n            return state.price * state.number\n        },\n        discountTotal: (state, getters) => {\n            return state.discount * getters.total\n        },\n        getTodoById: (state) => (id) =>{\n            return state.todos.find(todo => todo.id === id)\n        }\n    },\n});\n```\n```js\ncomputed: {\n    total() {\n        return this.$store.getters.total\n    },\n    discountTotal() {\n        return this.$store.getters.discountTotal\n    },\n    getTodoById() {\n        return this.$store.getters.getTodoById\n    },\n    ...mapGetters(['total','discountTotal']), // æ‰¹é‡ä½¿ç”¨getterå±æ€§\n    ...mapGetters({\n        myTotal:'total',\n        myDiscountTotal:'discountTotal',\n    }) // å–åˆ«å\n},\nmounted(){\n    console.log(this.getTodoById(2).done)//false\n}\n```\n- åœ¨getterä¸­å¯ä»¥é€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°rootStateè®¿é—®åˆ°å…¨å±€çš„state,å¯ä»¥é€šè¿‡ç¬¬å››ä¸ªå‚æ•°rootGettersè®¿é—®åˆ°å…¨å±€çš„getterã€‚\n- åœ¨mutationä¸­ä¸å¯ä»¥è®¿é—®å…¨å±€çš„stateå’Œgetterï¼Œåªèƒ½è®¿é—®åˆ°å±€éƒ¨çš„stateã€‚\n- åœ¨actionä¸­ç¬¬ä¸€ä¸ªå‚æ•°contextä¸­çš„context.rootStateè®¿é—®åˆ°å…¨å±€çš„stateï¼Œcontext.rootGettersè®¿é—®åˆ°å…¨å±€çš„getterã€‚\n\n### åœ¨ç»„ä»¶ä¸­å¤šæ¬¡æäº¤åŒä¸€ä¸ªmutation,action\n```js\nmethods:{\n    ...mapMutations({\n        setNumber:'SET_NUMBER',\n    }),\n    ...mapActions({\n        setNumber:'SET_NUMBER',\n    })\n}\n```\nthis.setNumber(10)ç›¸å½“è°ƒç”¨this.$store.commit('SET_NUMBER',10)\n\n### Vuexä¸­actionå’Œmutationæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n1. action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ã€‚mutationå¯ä»¥ç›´æ¥å˜æ›´çŠ¶æ€ã€‚\n2. action å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚mutationåªèƒ½æ˜¯åŒæ­¥æ“ä½œã€‚\n3. æäº¤æ–¹å¼ä¸åŒï¼Œaction æ˜¯ç”¨this.$store.dispatch('ACTION_NAME',data)æ¥æäº¤ã€‚mutationæ˜¯ç”¨this.$store.commit('SET_NUMBER',10)æ¥æäº¤ã€‚\n4. æ¥æ”¶å‚æ•°ä¸åŒï¼š\n```js\n{\n    state,      // ç­‰åŒäº `store.state`ï¼Œè‹¥åœ¨æ¨¡å—ä¸­åˆ™ä¸ºå±€éƒ¨çŠ¶æ€\n    rootState,  // ç­‰åŒäº `store.state`ï¼Œåªå­˜åœ¨äºæ¨¡å—ä¸­\n    commit,     // ç­‰åŒäº `store.commit`\n    dispatch,   // ç­‰åŒäº `store.dispatch`\n    getters,    // ç­‰åŒäº `store.getters`\n    rootGetters // ç­‰åŒäº `store.getters`ï¼Œåªå­˜åœ¨äºæ¨¡å—ä¸­\n}\n```\nå¤šä¸ªactionsï¼ŒAç»“æŸåå†æ‰§è¡Œå…¶ä»–æ“ä½œ\n```js\nactions:{\n    async actionA({commit}){\n        //...\n    },\n    async actionB({dispatch}){\n        await dispatch ('actionA')//ç­‰å¾…actionAå®Œæˆ\n        // ... \n    }\n}\n```\n\n### å‘½åç©ºé—´\n```js\nexport default{\n    namespaced: true,\n    state,\n    getters,\n    mutations,\n    actions\n}\n```\n- æ€ä¹ˆåœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—å†…æäº¤å…¨å±€çš„mutationå’Œactionï¼Ÿ\n```js\nthis.$store.dispatch('actionA', null, { root: true })\nthis.$store.commit('mutationA', null, { root: true })\n```\n\n### åœ¨Vuexæ’ä»¶ä¸­æ€ä¹ˆç›‘å¬ç»„ä»¶ä¸­æäº¤mutationå’Œactionï¼Ÿ\n```js\nexport default function createPlugin(param) {\n    return store => {\n        store.subscribe((mutation, state) => {\n            console.log(mutation.type)//æ˜¯é‚£ä¸ªmutation\n            console.log(mutation.payload)\n            console.log(state)\n        })\n        // store.subscribeAction((action, state) => {\n        //     console.log(action.type)//æ˜¯é‚£ä¸ªaction\n        //     console.log(action.payload)//æäº¤actionçš„å‚æ•°\n        // })\n        store.subscribeAction({\n            before: (action, state) => {//æäº¤actionä¹‹å‰\n                console.log(`before action ${action.type}`)\n            },\n            after: (action, state) => {//æäº¤actionä¹‹å\n                console.log(`after action ${action.type}`)\n            }\n        })\n    }\n}\n```\n\n### åœ¨v-modelä¸Šæ€ä¹ˆç”¨Vuexä¸­stateçš„å€¼ï¼Ÿ\n```js\n<input v-model=\"message\">\n// ...\ncomputed: {\n    message: {\n        get () {\n            return this.$store.state.message\n        },\n        set (value) {\n            this.$store.commit('updateMessage', value)\n        }\n    }\n}\n```\n\n### vue routerå…¨å±€å¯¼èˆªå®ˆå«\nä¸‰ä¸ªå‚æ•°\n- toï¼šå³å°†è¦è¿›å…¥çš„ç›®æ ‡ è·¯ç”±å¯¹è±¡ã€‚\n- fromï¼šå½“å‰å¯¼èˆªæ­£è¦ç¦»å¼€çš„è·¯ç”±å¯¹è±¡ã€‚\n- nextï¼šå‡½æ•°ï¼Œå¿…é¡»è°ƒç”¨ï¼Œä¸ç„¶è·¯ç”±è·³è½¬ä¸è¿‡å»ã€‚\n\nnext()ï¼šè¿›å…¥ä¸‹ä¸€ä¸ªè·¯ç”±ã€‚\nnext(false)ï¼šä¸­æ–­å½“å‰çš„å¯¼èˆªã€‚\nnext('/')æˆ–next({ path: '/' }) : è·³è½¬åˆ°å…¶ä»–è·¯ç”±ï¼Œå½“å‰å¯¼èˆªè¢«ä¸­æ–­ï¼Œè¿›è¡Œæ–°çš„ä¸€ä¸ªå¯¼èˆªã€‚\n\n- router.beforeEachï¼šå…¨å±€å‰ç½®å®ˆå«ã€‚\n- router.beforeResolveï¼šå…¨å±€è§£æå®ˆå«ã€‚\n- router.afterEachï¼šå…¨å±€åç½®é’©å­ã€‚\n\n### è·¯ç”±ç‹¬äº«å®ˆå«\n```js\nconst router = new VueRouter({\n    routes: [\n        {\n            path: '/foo',\n            component: Foo,\n            beforeEnter: (to, from, next) => {\n            // ...\n            }\n        }\n    ]\n})\n```\n\n### ç»„ä»¶å†…å¯¼èˆªå®ˆå«\n- beforeRouteLeaveï¼šåœ¨å¤±æ´»çš„ç»„ä»¶é‡Œè°ƒç”¨ç¦»å¼€å®ˆå«ã€‚\n- beforeRouteUpdateï¼šåœ¨é‡ç”¨çš„ç»„ä»¶é‡Œè°ƒç”¨,æ¯”å¦‚åŒ…å«<router-view />çš„ç»„ä»¶ã€‚\n- beforeRouteEnterï¼šåœ¨è¿›å…¥å¯¹åº”è·¯ç”±çš„ç»„ä»¶åˆ›å»ºå‰è°ƒç”¨ã€‚\n\n### router-link\n<router-link>æ˜¯Vue-Routerçš„å†…ç½®ç»„ä»¶ï¼Œåœ¨å…·æœ‰è·¯ç”±åŠŸèƒ½çš„åº”ç”¨ä¸­ä½œä¸ºå£°æ˜å¼çš„å¯¼èˆªä½¿ç”¨ã€‚ç±»ä¼¼reactçš„Linkæ ‡ç­¾\n```html\n<router-link to=\"home\">Home</router-link>\n<router-link :to=\"'home'\">Home</router-link>\n<router-link :to=\"{ path: 'home' }\">Home</router-link>\n<router-link :to=\"{ name: 'user', params: { userId: 123 }}\">User</router-link>\n<router-link :to=\"{ path: 'user', query: { userId: 123 }}\">User</router-link>\n```\næ³¨å†Œåœ¨router-linkä¸Šäº‹ä»¶æ— æ•ˆè§£å†³æ–¹æ³•:\nä½¿ç”¨@click.nativeã€‚åŸå› ï¼šrouter-linkä¼šé˜»æ­¢clickäº‹ä»¶ï¼Œ.nativeæŒ‡ç›´æ¥ç›‘å¬ä¸€ä¸ªåŸç”Ÿäº‹ä»¶\n\nåœ¨ieå’Œfirefoxæ— æ•ˆï¼š\n1. ä½¿ç”¨aæ ‡ç­¾ä¸ç”¨Button\n2. ä½¿ç”¨Buttonå’ŒRouter.navigateæ–¹æ³•\n\n### paramså’Œqueryçš„åŒºåˆ«\nqueryéœ€è¦pathå¼•å…¥ï¼Œparamséœ€è¦nameå¼•å…¥\nthis.$route.query.nameã€this.$route.params.query\næ³¨æ„ç‚¹ï¼šqueryåˆ·æ–°ä¸ä¼šä¸¢å¤±queryæ•°æ®ï¼Œparamsåˆ·æ–°ä¼šä¸¢å¤±æ•°æ®\n\n### ç»„ä»¶å†…ç›‘å¬è·¯ç”±çš„å˜åŒ–\nåªèƒ½ç”¨åœ¨åŒ…å«<router-view />çš„ç»„ä»¶å†…\n1. \n```js\nwatch: {\n    '$route'(to, from) {\n        //è¿™é‡Œç›‘å¬\n    },\n}\n```\n\n2. \n```js\nbeforeRouteUpdate (to, from, next) {\n    //è¿™é‡Œç›‘å¬\n},\n```\n\n### åˆ‡æ¢æ–°è·¯ç”±çš„æ»šåŠ¨æ¡å¤„ç†\n```js\nconst router = new Router({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes,\n    scrollBehavior(to, from, savedPosition) {\n        if (savedPosition) {\n            return savedPosition;\n        } else {\n            return { x: 0, y: 0 };\n        }\n    }\n});\n```\n\n### è·¯ç”±ä¼ å‚è·å–æ–¹å¼\n1. metaï¼šè·¯ç”±å…ƒä¿¡æ¯ï¼Œå†™åœ¨routesé…ç½®æ–‡ä»¶ä¸­ã€‚\n```js\n{\n    path: '/home',\n    name: 'home',\n    component: load('home'),\n    meta: {\n        title: 'é¦–é¡µ'\n    },\n},\n```\n> this.$route.meta.title\n\n2. query\n```js\nthis.$router.push({\n    path:'/home',\n    query: {\n        userId:123\n    }\n})\n```\n> this.$route.query.userId\n\n3. params\n```js\n{\n    path: '/home/:userId',\n    name: 'home',\n    component: load('home'),\n},\n// æ³¨æ„ç”¨paramsä¼ å‚ï¼Œåªèƒ½ç”¨å‘½åçš„è·¯ç”±ï¼ˆç”¨nameè®¿é—®ï¼‰\nconst userId = '123'\nthis.$router.push({ name: 'home', params: { userId } })\n// this.$route.params\n```\n\n### å®ç°åŠ¨æ€åŠ è½½è·¯ç”±\n- ä½¿ç”¨Routerçš„å®ä¾‹æ–¹æ³•addRoutesæ¥å®ç°åŠ¨æ€åŠ è½½è·¯ç”±ï¼Œä¸€èˆ¬ç”¨æ¥å®ç°èœå•æƒé™ã€‚\n\n- ä½¿ç”¨æ—¶è¦æ³¨æ„ï¼Œé™æ€è·¯ç”±æ–‡ä»¶ä¸­ä¸èƒ½æœ‰404è·¯ç”±ï¼Œè€Œè¦é€šè¿‡addRoutesä¸€èµ·åŠ¨æ€æ·»åŠ è¿›å»ã€‚\n\n```js\nwebpack< 2.4 æ—¶\n{ \n    path:'/', \n    name:'home',\n    components:resolve=>require(['@/components/home'],resolve)\n} \nwebpack> 2.4 æ—¶\n{ \n    path:'/', \n    name:'home', \n    components:()=>import('@/components/home')\n}\n```\n\n### è·¯ç”±ä¹‹é—´è·³è½¬\n1. å£°æ˜å¼\né€šè¿‡ä½¿ç”¨å†…ç½®ç»„ä»¶<router-link :to=\"/home\">æ¥è·³è½¬ or router-link :to=\"{name:'index'}\">\n\n2. ç¼–ç¨‹å¼\n```js\nthis.$router.push({ path:'home' })\nthis.$router.replace({ path: '/home' })\nthis.$router.push({name:'ç»„ä»¶å')};\n```\n$routerå’Œ$routeçš„åŒºåˆ«\n> $routeä¸ºå½“å‰routerè·³è½¬å¯¹è±¡ï¼Œé‡Œé¢å¯ä»¥è·å–nameã€pathã€queryã€paramsç­‰\n> $routerä¸ºVueRouterå®ä¾‹ï¼Œæƒ³è¦å¯¼èˆªåˆ°ä¸åŒURLï¼Œåˆ™ä½¿ç”¨router.pushæ–¹æ³•ï¼Œè¿”å›ä¸Šä¸€ä¸ªå†å²$router.to(-1)\n\n### æ‰“å¼€æ–°çª—å£\n```js\nconst obj = {\n    path: xxx,//è·¯ç”±åœ°å€\n    query: {\n       mid: data.id//å¯ä»¥å¸¦å‚æ•°\n    }\n};\nconst {href} = this.$router.resolve(obj);\nwindow.open(href, '_blank');\n```\n\n### åŠ¨æ€ç»‘å®šClasså’ŒStyle\n```html\n<!--ç¬¬ä¸€ç§å¯¹è±¡è¯­æ³• -->\n<div class=\"test\" :class=\"{active:actived,'active-click': clicked&&actived}\"></div>\n<!-- ç¬¬äºŒç§æ•°ç»„è¯­æ³• -->\n<div class=\"test\" :class=\"[actived?activeClass : '', clicked&&actived?activeClickClass : '']\"></div>\n<!-- ç¬¬ä¸‰ç§å¯¹è±¡å’Œæ•°ç»„æ··åˆ -->\n<div :class=\"[testClass,{active:actived},{'active-click':clicked&&actived}]\"></div>\n<!-- ç¬¬å››ç§å¯¹è±¡å’Œè®¡ç®—å±æ€§(æ¨è) -->\n<div :class=\"classObject\"></div>\n```\n\n### è¿‡æ»¤å™¨(filter)\n```js\n<div><span>{{money | moneyFilter(0.15)}}</span>ç¾å…ƒ</div>\n<div><span>{{money | moneyFilter(0.12)}}</span>è‹±é•‘</div>\nfilters: {\n    moneyFilter: function(val, ratio) {\n        return Number(val * ratio).toFixed(2);\n    }\n}\n```\né™¤äº†ç”¨åœ¨æ’å€¼ä¸Šè¿˜å¯ä»¥ç”¨åœ¨v-bindè¡¨è¾¾å¼ä¸Šã€‚\n\n### computedä¸­çš„å±æ€§åå’Œdataä¸­çš„å±æ€§åå¯ä»¥ç›¸åŒå—ï¼Ÿä¹Ÿä¸èƒ½å’Œmethodä¸­å±æ€§åŒå\nä¸èƒ½åŒåï¼Œå› ä¸ºä¸ç®¡æ˜¯computedå±æ€§åè¿˜æ˜¯dataæ•°æ®åè¿˜æ˜¯propsæ•°æ®åéƒ½ä¼šè¢«æŒ‚è½½åœ¨vmå®ä¾‹ä¸Šï¼Œå› æ­¤è¿™ä¸‰ä¸ªéƒ½ä¸èƒ½åŒåã€‚\n\n### watchçš„å±æ€§ä½¿ç”¨ç®­å¤´å‡½æ•°å®šä¹‰å¯ä»¥å—ï¼Ÿ\nä¸å¯ä»¥ã€‚thisä¼šæ˜¯undefind,å› ä¸ºç®­å¤´å‡½æ•°ä¸­çš„thisæŒ‡å‘çš„æ˜¯å®šä¹‰æ—¶çš„thisï¼Œè€Œä¸æ˜¯æ‰§è¡Œæ—¶çš„thisï¼Œæ‰€ä»¥ä¸ä¼šæŒ‡å‘Vueå®ä¾‹çš„ä¸Šä¸‹æ–‡ã€‚\n\n### watchæ€ä¹ˆæ·±åº¦ç›‘å¬å¯¹è±¡å˜åŒ–\nç›‘å¬çš„å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æœ€æ–°çš„å€¼ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¾“å…¥ä¹‹å‰çš„å€¼ï¼›\n```js\nwatch:{\n   a:{\n       handler:function(val,oldval){\n           \n       },\n       deep:true, // ä¸€å±‚å±‚éå†ç»™å±æ€§éƒ½åŠ ä¸Šç›‘å¬å™¨\n       immediate: true // ç»„ä»¶åŠ è½½ç«‹å³è§¦å‘å›è°ƒå‡½æ•°æ‰§è¡Œ\n   },\n   'obj.a': {\n\n   }\n}\n```\n\n### å¼ºåˆ¶åˆ·æ–°ç»„ä»¶\n- this.$forceUpdate()ã€‚\n- ç»„ä»¶ä¸ŠåŠ ä¸Škeyï¼Œç„¶åå˜åŒ–keyçš„å€¼ã€‚\n\n### è®¿é—®å­ç»„ä»¶å®ä¾‹æˆ–è€…å­å…ƒç´ \n1. ref\nå…ˆç”¨refç‰¹æ€§ä¸ºå­ç»„ä»¶èµ‹äºˆä¸€ä¸ªIDå¼•ç”¨<base-input ref=\"myInput\"></<base-input>\n\næ¯”å¦‚å­ç»„ä»¶æœ‰ä¸ªfocusçš„æ–¹æ³•ï¼Œå¯ä»¥è¿™æ ·è°ƒç”¨this.$refs.myInput.focus()ï¼›\næ¯”å¦‚å­ç»„ä»¶æœ‰ä¸ªvalueçš„æ•°æ®ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨this.$refs.myInput.valueã€‚\n\n2. å­ç»„ä»¶è®¿é—®çˆ¶ç»„ä»¶\nthis.$parent\n\n### ç»„ä»¶ä»€ä¹ˆæ—¶å€™ä¸‹è¢«é”€æ¯\n- æ²¡æœ‰ä½¿ç”¨keep-aliveåˆ‡æ¢\n- v-if=\"false\"\n- æ‰§è¡Œvm.$destroy()\n\n### $event.targetå’Œ$event.currentTargetæœ‰ä»€ä¹ˆåŒºåˆ«\n$event.currentTargetå§‹ç»ˆæŒ‡å‘äº‹ä»¶æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œè€Œ$event.targetæŒ‡å‘äº‹ä»¶å‘ç”Ÿæ—¶çš„å…ƒç´ ã€‚\n\n### äº‹ä»¶ä¿®é¥°ç¬¦å’Œè¡¨å•ä¿®é¥°ç¬¦\n\n- äº‹ä»¶ä¿®é¥°ç¬¦\n\n.stopï¼šé˜»æ­¢äº‹ä»¶ä¼ é€’ï¼›\n.preventï¼š é˜»æ­¢é»˜è®¤äº‹ä»¶ï¼›\n.capture ï¼šåœ¨æ•è·çš„è¿‡ç¨‹ç›‘å¬ï¼Œæ²¡æœ‰captureä¿®é¥°ç¬¦æ—¶éƒ½æ˜¯é»˜è®¤å†’æ³¡è¿‡ç¨‹ç›‘å¬ï¼›\n.selfï¼šå½“å‰ç»‘å®šäº‹ä»¶çš„å…ƒç´ æ‰èƒ½è§¦å‘ï¼›\n.onceï¼šäº‹ä»¶åªä¼šè§¦å‘ä¸€æ¬¡ï¼›\n.passiveï¼šé»˜è®¤äº‹ä»¶ä¼šç«‹å³è§¦å‘ï¼Œä¸è¦æŠŠ.passiveå’Œ.preventä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸º.preventå°†ä¸èµ·ä½œç”¨ã€‚\n\n- è¡¨å•ä¿®é¥°ç¬¦.number .lazy .trim\n\n```\n<comp :foo.sync=\"bar\"></comp>\n```\nç›¸å½“äº\n```\n<comp :foo=\"bar\" @update:foo=\"val => bar = val\"></comp>\n\n// this.$emit('update:foo', newValue)\n```\n\nè¦æ³¨æ„é¡ºåºå¾ˆé‡è¦ï¼Œç”¨@click.prevent.selfä¼šé˜»æ­¢æ‰€æœ‰çš„ç‚¹å‡»ï¼Œè€Œ@click.self.preventåªä¼šé˜»æ­¢å¯¹å…ƒç´ è‡ªèº«çš„ç‚¹å‡»ã€‚\n\n### è¯´è¯´ä½ å¯¹Vueçš„è¡¨å•ä¿®é¥°ç¬¦.lazyçš„ç†è§£ã€‚\ninputæ ‡ç­¾v-modelç”¨lazyä¿®é¥°ä¹‹åï¼Œå¹¶ä¸ä¼šç«‹å³ç›‘å¬inputçš„valueçš„æ”¹å˜ï¼Œä¼šåœ¨inputå¤±å»ç„¦ç‚¹ä¹‹åï¼Œæ‰ä¼šç›‘å¬inputçš„valueçš„æ”¹å˜ã€‚\n\n### ç›‘å¬é”®ç›˜äº‹ä»¶\nä½¿ç”¨æŒ‰é”®ä¿®é¥°ç¬¦ <input @keyup.enter=\"submit\">æŒ‰ä¸‹å›è½¦é”®æ—¶å€™è§¦å‘submitäº‹ä»¶ã€‚\n- .enter\n- .tab\n- .delete (æ•è·â€œåˆ é™¤â€å’Œâ€œé€€æ ¼â€é”®)\n- .esc\n- .space\n- .up\n- .down\n- .left\n- .right\n\n### v-onç»‘å®šå¤šä¸ªæ–¹æ³•\n```html\n<template>\n    <div v-on:{click:a,dblclick:b}></div>\n</template>\n<script>\n    methods:{\n        a(){\n            alert(1)\n        },\n        b(){\n            alert(2)\n        }\n    }\n</script>\n```\n\n### cssæ ·å¼å½“å‰ç»„ä»¶æœ‰æ•ˆ\n```html\n<style lang=\"less\" scoped></style>\n```\nåŸç†ï¼švueé€šè¿‡åœ¨DOMç»“æ„ä»¥åŠcssæ ·å¼ä¸ŠåŠ ä¸Šå”¯ä¸€çš„æ ‡è®°`data-v-xxxxxx`ï¼Œä¿è¯åŠ¨æ€å±æ€§å”¯ä¸€ï¼Œè¾¾åˆ°æ ·å¼ç§æœ‰åŒ–ï¼Œä¸æ±¡æŸ“å…¨å±€çš„ä½œç”¨ã€‚\n\nç¼–è¯‘åï¼š\n```html\n<template>    \n    <span data-v-3e5b2a80 class=\"textScoped\">scopedæµ‹è¯•</span>\n</template>\n<script>\n\n</script>\n<style scoped>    \n    .textScoped[data-v-3e5b2a80]{        \n        color: red;    \n    }\n</style>\n```\n\n### æ¸²æŸ“æ¨¡æ¿ä¿ç•™æ³¨é‡Š\n- åœ¨ç»„ä»¶ä¸­å°†commentsé€‰é¡¹è®¾ç½®ä¸ºtrue\n- <template comments> ... <template>\n\n### åœ¨createdå’Œmountedè¿™ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸä¸­è¯·æ±‚æ•°æ®æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ\nåœ¨createdä¸­ï¼Œé¡µé¢è§†å›¾æœªå‡ºç°ï¼Œå¦‚æœè¯·æ±‚ä¿¡æ¯è¿‡å¤šï¼Œé¡µé¢ä¼šé•¿æ—¶é—´å¤„äºç™½å±çŠ¶æ€ï¼ŒDOMèŠ‚ç‚¹æ²¡å‡ºæ¥ï¼Œæ— æ³•æ“ä½œDOMèŠ‚ç‚¹ã€‚åœ¨mountedä¸ä¼šè¿™æ ·ï¼Œæ¯”è¾ƒå¥½ã€‚\n\n### Vueç»„ä»¶é‡Œçš„å®šæ—¶å™¨è¦æ€ä¹ˆé”€æ¯ï¼Ÿ\n- å¦‚æœé¡µé¢ä¸Šæœ‰å¾ˆå¤šå®šæ—¶å™¨ï¼Œå¯ä»¥åœ¨dataé€‰é¡¹ä¸­åˆ›å»ºä¸€ä¸ªå¯¹è±¡timerï¼Œç»™æ¯ä¸ªå®šæ—¶å™¨å–ä¸ªåå­—ä¸€ä¸€æ˜ å°„åœ¨å¯¹è±¡timerä¸­ï¼Œ\nåœ¨beforeDestroyæ„é€ å‡½æ•°ä¸­for(let k in this.timer){clearInterval(k)}ï¼›\n\n- å¦‚æœé¡µé¢åªæœ‰å•ä¸ªå®šæ—¶å™¨ï¼Œå¯ä»¥è¿™ä¹ˆåšã€‚\n```js\nconst timer = setInterval(() =>{}, 500);\nthis.$once('hook:beforeDestroy', () => {\n   clearInterval(timer);\n})\n```\n\n### Vueä¸­èƒ½ç›‘å¬åˆ°æ•°ç»„å˜åŒ–çš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿä¸ºä»€ä¹ˆè¿™äº›æ–¹æ³•èƒ½ç›‘å¬åˆ°å‘¢ï¼Ÿ\n- push()ã€pop()ã€shift()ã€unshift()ã€splice()ã€sort()ã€reverse()ï¼Œè¿™äº›æ–¹æ³•åœ¨Vueä¸­è¢«é‡æ–°å®šä¹‰äº†ï¼Œæ•…å¯ä»¥ç›‘å¬åˆ°æ•°ç»„å˜åŒ–ï¼›\n- filter()ã€concat()ã€slice()ï¼Œè¿™äº›æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¹Ÿå¯ä»¥ç›‘å¬åˆ°æ•°ç»„çš„å˜åŒ–ã€‚\n\n### å®šä¹‰å…¨å±€æ–¹æ³•\n1. æŒ‚è½½åœ¨Vueçš„prototypeä¸Š\n2. åˆ©ç”¨å…¨å±€æ··å…¥mixin\n3. \n```js\nthis.$root.$on('demo',function(){\n    console.log('test');\n})\nthis.$root.$emit('demo')ï¼›\nthis.$root.$off('demo')ï¼›\n// Mustacheçš„webæ¨¡æ¿å¼•æ“\n```\n\n### æ•è·ç»„ä»¶çš„é”™è¯¯ä¿¡æ¯\n- errorCapturedæ˜¯ç»„ä»¶å†…éƒ¨é’©å­ï¼Œå½“æ•è·ä¸€ä¸ªæ¥è‡ªå­å­™ç»„ä»¶çš„é”™è¯¯æ—¶è¢«è°ƒç”¨ï¼Œæ¥æ”¶errorã€vmã€infoä¸‰ä¸ªå‚æ•°ï¼Œreturn falseåå¯ä»¥é˜»æ­¢é”™è¯¯ç»§ç»­å‘ä¸ŠæŠ›å‡ºã€‚\n\n- errorHandlerä¸ºå…¨å±€é’©å­ï¼Œä½¿ç”¨Vue.config.errorHandleré…ç½®ï¼Œæ¥æ”¶å‚æ•°ä¸errorCapturedä¸€è‡´ï¼Œ2.6åå¯æ•æ‰v-onä¸promiseé“¾çš„é”™è¯¯ï¼Œå¯ç”¨äºç»Ÿä¸€é”™è¯¯\nå¤„ç†ä¸é”™è¯¯å…œåº•ã€‚\n\n### vue SSR\nvueæ˜¯æ„å»ºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„æ¡†æ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å‡ºvueç»„ä»¶ï¼Œè¿›è¡Œç”Ÿæˆdomå’Œæ“ä½œdomï¼Œç„¶è€Œï¼Œä¹Ÿå¯ä»¥å°†åŒä¸€ä¸ªç»„ä»¶æ¸²æŸ“ä¸ºæœåŠ¡ç«¯çš„htmlå­—ç¬¦ä¸²ï¼Œå°†ä»–ä»¬ç›´æ¥å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œç„¶åå°†è¿™äº›é™æ€æ ‡è®°æ¿€æ´»ä¸ºå®¢æˆ·ç«¯ä¸Šå¯ä»¥äº¤äº’çš„åº”ç”¨ç¨‹åºã€‚\n\nå³ssrçš„æ„æ€å°±æ˜¯vueåœ¨æœåŠ¡ç«¯å®Œæˆå°†æ ‡ç­¾æ¸²æŸ“æˆæ•´ä¸ªhtmlç‰‡æ®µçš„å·¥ä½œï¼Œç„¶åå°†ç‰‡æ®µç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯ä½¿ç”¨\n\n- ssrä¼˜ç‚¹ï¼š\n\n  - æ›´å¥½çš„seoï¼šå› ä¸ºspaé¡µé¢çš„å†…å®¹æ˜¯é€šè¿‡ajaxè·å–ï¼Œè€Œæœç´¢å¼•æ“çˆ¬å–å·¥å…·å¹¶ä¸ä¼šç­‰å¾…ajaxä¸€æ­¥å®Œæˆåå†æŠ“å–é¡µé¢å†…å®¹ï¼Œæ‰€ä»¥åœ¨spaä¸­æ˜¯æŠ“å–ä¸åˆ°é¡µé¢é€šè¿‡ajaxè·å–åˆ°çš„å†…å®¹ï¼›è€Œssræ˜¯ç›´æ¥ç”±æœåŠ¡å™¨è¿”å›å·²ç»æ¸²æŸ“å¥½çš„é¡µé¢ï¼ˆæ•°æ®å·²ç»åŒ…å«åœ¨é¡µé¢ä¸­ï¼‰ï¼Œæ‰€ä»¥æœç´¢å¼•æ“çˆ¬å–å·¥å…·å¯ä»¥æŠ“å–åˆ°æ¸²æŸ“å¥½çš„é¡µé¢\n\n  - æ›´å¿«çš„å†…å®¹åˆ°è¾¾æ—¶é—´ï¼ˆé¦–å±åŠ è½½å¿«ï¼‰ï¼šspaä¼šç­‰å¾…æ‰€æœ‰vueç¼–è¯‘åçš„jsæ–‡ä»¶éƒ½ä¸‹è½½å®Œæˆåï¼Œæ‰å¼€å§‹è¿›è¡Œä¹Ÿå…å¾—æ¸²æŸ“ï¼Œæ–‡ä»¶ä¸‹è½½éœ€è¦ä¸€å®šçš„æ—¶é—´ç­‰ï¼Œæ‰€ä»¥é¦–å±åŠ è½½éœ€è¦æ—¶é—´ï¼Œè€Œssrç›´æ¥ç”±æœåŠ¡å™¨æ¸²æŸ“å¥½é¡µé¢è¿”å›æ˜¾ç¤ºï¼Œæ— éœ€ç­‰å¾…jsæ–‡ä»¶å†å»æ¸²æŸ“ï¼Œæ‰€ä»¥ssræœ‰æ›´å¿«çš„å†…å®¹åˆ°è¾¾æ—¶é—´\n\n- ssrç¼ºç‚¹ï¼š\n\n  - æ›´å¤šçš„å¼€å‘æ¡ä»¶é™åˆ¶ï¼šä¾‹å¦‚æœåŠ¡ç«¯æ¸²æŸ“åªæ”¯æŒbeforeCreateå’Œcreatedä¸¤ä¸ªé’©å­å‡½æ•°ï¼Œè¿™ä¼šå¯¼è‡´ä¸€äº›å¤–éƒ¨æ‰©å±•åº“éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œæ‰èƒ½åœ¨æœåŠ¡ç«¯æ¸²æŸ“ç¨‹åºä¸­è¿è¡Œï¼›å¹¶ä¸”ä¸å¯ä»¥éƒ¨ç½²åœ¨ä»»ä½•é™æ€æ–‡ä»¶æœåŠ¡å™¨ä¸Šçš„å®Œå…¨é™æ€å•é¡µé¢åº”ç”¨ç¨‹åºspaä¸åŒï¼ŒæœåŠ¡ç«¯æ¸²æŸ“åº”ç”¨ç¨‹åºï¼Œéœ€è¦å¤„äºnodejs serverä¸­æ‰èƒ½è¿è¡Œ\n\n  - æ›´å¤šçš„æœåŠ¡å™¨è´Ÿè½½\n\n### nextTick\nåœ¨ä¸‹æ¬¡domæ›´æ–°å¾ªç¯ç»“æŸä¹‹åæ‰§è¡Œå»¶è¿Ÿå›è°ƒï¼Œå¯ç”¨äºè·å–æ›´æ–°åçš„domçŠ¶æ€ã€‚\n\n- æ–°ç‰ˆæœ¬ä¸­é»˜è®¤æ˜¯microtasks, v-onä¸­ä¼šä½¿ç”¨macrotasks\n```js\n// ä¿®æ”¹æ•°æ®\nvm.msg = 'Hello'\n// DOM è¿˜æ²¡æœ‰æ›´æ–°\nVue.nextTick(function () {\n  // DOM æ›´æ–°äº†\n  ...   //DOMæ“ä½œ\n})\n\n// ä½œä¸ºä¸€ä¸ª Promise ä½¿ç”¨\nVue.nextTick()\n    .then(function () {\n    // DOM æ›´æ–°äº†\n    })\n```\n\n```\nVue åœ¨æ›´æ–° DOM æ—¶æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚åªè¦ä¾¦å¬åˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚å¦‚æœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯â€œtickâ€ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… (å·²å»é‡çš„) å·¥ä½œã€‚Vue åœ¨å†…éƒ¨å¯¹å¼‚æ­¥é˜Ÿåˆ—å°è¯•ä½¿ç”¨åŸç”Ÿçš„ Promise.thenã€MutationObserver å’Œ setImmediateï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œåˆ™ä¼šé‡‡ç”¨ setTimeout(fn, 0) ä»£æ›¿ã€‚\nä¾‹å¦‚ï¼Œå½“ä½ è®¾ç½® vm.someData = 'new value'ï¼Œè¯¥ç»„ä»¶ä¸ä¼šç«‹å³é‡æ–°æ¸²æŸ“ã€‚å½“åˆ·æ–°é˜Ÿåˆ—æ—¶ï¼Œç»„ä»¶ä¼šåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯â€œtickâ€ä¸­æ›´æ–°ã€‚å¤šæ•°æƒ…å†µæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒè¿™ä¸ªè¿‡ç¨‹ï¼Œä½†æ˜¯å¦‚æœä½ æƒ³åŸºäºæ›´æ–°åçš„ DOM çŠ¶æ€æ¥åšç‚¹ä»€ä¹ˆï¼Œè¿™å°±å¯èƒ½ä¼šæœ‰äº›æ£˜æ‰‹ã€‚è™½ç„¶ Vue.js é€šå¸¸é¼“åŠ±å¼€å‘äººå‘˜ä½¿ç”¨â€œæ•°æ®é©±åŠ¨â€çš„æ–¹å¼æ€è€ƒï¼Œé¿å…ç›´æ¥æ¥è§¦ DOMï¼Œä½†æ˜¯æœ‰æ—¶æˆ‘ä»¬å¿…é¡»è¦è¿™ä¹ˆåšã€‚ä¸ºäº†åœ¨æ•°æ®å˜åŒ–ä¹‹åç­‰å¾… Vue å®Œæˆæ›´æ–° DOMï¼Œå¯ä»¥åœ¨æ•°æ®å˜åŒ–ä¹‹åç«‹å³ä½¿ç”¨ Vue.nextTick(callback)ã€‚è¿™æ ·å›è°ƒå‡½æ•°å°†åœ¨ DOM æ›´æ–°å®Œæˆåè¢«è°ƒç”¨ã€‚\n```\n> domæ›´æ–°ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œå› ä¸ºå®ƒæå‡äº†æ¸²æŸ“æ•ˆç‡ã€‚\n\n### æ•°æ®å“åº”(æ•°æ®åŠ«æŒ)\næ•°æ®å“åº”çš„å®ç°ç”±ä¸¤éƒ¨åˆ†æ„æˆ: è§‚å¯Ÿè€…( watcher ) å’Œ ä¾èµ–æ”¶é›†å™¨( Dep )ï¼Œå…¶æ ¸å¿ƒæ˜¯ defineProperty è¿™ä¸ªæ–¹æ³•ï¼Œå®ƒå¯ä»¥é‡å†™å±æ€§çš„ get ä¸ set æ–¹æ³•ï¼Œä»è€Œå®Œæˆç›‘å¬æ•°æ®çš„æ”¹å˜ã€‚\n\n> 1. å¯¹éœ€è¦observeçš„æ•°æ®å¯¹è±¡è¿›è¡Œé€’å½’éå†ï¼ŒåŒ…æ‹¬å­å±æ€§å¯¹è±¡çš„å±æ€§ï¼Œéƒ½åŠ ä¸Šsetterå’Œgetterè¿™æ ·çš„è¯ï¼Œç»™è¿™ä¸ªå¯¹è±¡çš„æŸä¸ªå€¼èµ‹å€¼ï¼Œå°±ä¼šè§¦å‘setterï¼Œé‚£ä¹ˆå°±èƒ½ç›‘å¬åˆ°äº†æ•°æ®å˜åŒ–\n\n> 2. compileè§£ææ¨¡æ¿æŒ‡ä»¤ï¼Œå°†æ¨¡æ¿ä¸­çš„å˜é‡æ›¿æ¢æˆæ•°æ®ï¼Œç„¶ååˆå§‹åŒ–æ¸²æŸ“é¡µé¢è§†å›¾ï¼Œå¹¶å°†æ¯ä¸ªæŒ‡ä»¤å¯¹åº”çš„èŠ‚ç‚¹ç»‘å®šæ›´æ–°å‡½æ•°ï¼Œæ·»åŠ ç›‘å¬æ•°æ®çš„è®¢é˜…è€…ï¼Œä¸€æ—¦æ•°æ®æœ‰å˜åŠ¨ï¼Œæ”¶åˆ°é€šçŸ¥ï¼Œæ›´æ–°è§†å›¾\n\n> 3. Watcherè®¢é˜…è€…æ˜¯Observerå’ŒCompileä¹‹é—´é€šä¿¡çš„æ¡¥æ¢ï¼Œä¸»è¦åšçš„äº‹æƒ…æ˜¯:\nâ‘ åœ¨è‡ªèº«å®ä¾‹åŒ–æ—¶å¾€å±æ€§è®¢é˜…å™¨(dep)é‡Œé¢æ·»åŠ è‡ªå·±\nâ‘¡è‡ªèº«å¿…é¡»æœ‰ä¸€ä¸ªupdate()æ–¹æ³•\nâ‘¢å¾…å±æ€§å˜åŠ¨dep.notice()é€šçŸ¥æ—¶ï¼Œèƒ½è°ƒç”¨è‡ªèº«çš„update()æ–¹æ³•ï¼Œå¹¶è§¦å‘Compileä¸­ç»‘å®šçš„å›è°ƒ\n\n> 4ã€MVVMä½œä¸ºæ•°æ®ç»‘å®šçš„å…¥å£ï¼Œæ•´åˆObserverã€Compileå’ŒWatcherä¸‰è€…ï¼Œé€šè¿‡Observeræ¥ç›‘å¬è‡ªå·±çš„modelæ•°æ®å˜åŒ–ï¼Œé€šè¿‡Compileæ¥è§£æç¼–è¯‘æ¨¡æ¿æŒ‡ä»¤ï¼Œæœ€ç»ˆåˆ©ç”¨Watcheræ­èµ·Observerå’ŒCompileä¹‹é—´çš„é€šä¿¡æ¡¥æ¢ï¼Œè¾¾åˆ°æ•°æ®å˜åŒ– -> è§†å›¾æ›´æ–°ï¼›è§†å›¾äº¤äº’å˜åŒ–(input) -> æ•°æ®modelå˜æ›´çš„åŒå‘ç»‘å®šæ•ˆæœã€‚\n\n```js\nlet data = {a: 1}\n// æ•°æ®å“åº”æ€§\nobserve(data)\n\n// åˆå§‹åŒ–è§‚å¯Ÿè€…\nnew Watcher(data, 'name', updateComponent)\ndata.a = 2\n\n// ç®€å•è¡¨ç¤ºç”¨äºæ•°æ®æ›´æ–°åçš„æ“ä½œ\nfunction updateComponent() {\n    vm._update() // patchs\n}\n\n// ç›‘è§†å¯¹è±¡\nfunction observe(obj) {\n\t// éå†å¯¹è±¡ï¼Œä½¿ç”¨ get/set é‡æ–°å®šä¹‰å¯¹è±¡çš„æ¯ä¸ªå±æ€§å€¼\n  Object.keys(obj).map(key => {\n      defineReactive(obj, key, obj[key])\n  })\n}\n\nfunction defineReactive(obj, k, v) {\n    // é€’å½’å­å±æ€§\n    if (type(v) == 'object') observe(v)\n    \n    // æ–°å»ºä¾èµ–æ”¶é›†å™¨\n    let dep = new Dep()\n    // å®šä¹‰get/set\n    Object.defineProperty(obj, k, {\n        enumerable: true,\n        configurable: true,\n        get: function reactiveGetter() {\n        \t  // å½“æœ‰è·å–è¯¥å±æ€§æ—¶ï¼Œè¯æ˜ä¾èµ–äºè¯¥å¯¹è±¡ï¼Œå› æ­¤è¢«æ·»åŠ è¿›æ”¶é›†å™¨ä¸­\n            if (Dep.target) {\n                dep.addSub(Dep.target)\n            }\n            return v\n        },\n        // é‡æ–°è®¾ç½®å€¼æ—¶ï¼Œè§¦å‘æ”¶é›†å™¨çš„é€šçŸ¥æœºåˆ¶\n        set: function reactiveSetter(nV) {\n            v = nV\n            dep.nofify()\n        },\n    })\n}\n\n// ä¾èµ–æ”¶é›†å™¨\nclass Dep {\n    constructor() {\n        this.subs = []\n    }\n    addSub(sub) {\n        this.subs.push(sub)\n    }\n    notify() {\n        this.subs.map(sub => {\n            sub.update()\n        })\n    }\n}\n\nDep.target = null\n\n// è§‚å¯Ÿè€…\nclass Watcher {\n    constructor(obj, key, cb) {\n        Dep.target = this\n        this.cb = cb\n        this.obj = obj\n        this.key = key\n        this.value = obj[key]\n        Dep.target = null\n    }\n    addDep(Dep) {\n        Dep.addSub(this)\n    }\n    update() {\n        this.value = this.obj[this.key]\n        this.cb(this.value)\n    }\n    before() {\n        callHook('beforeUpdate')\n    }\n}\n```\n\n### è™šæ‹ŸdomåŸç†å®ç°\n- åˆ›å»º dom æ ‘\n\n- æ ‘çš„diffï¼ŒåŒå±‚å¯¹æ¯”ï¼Œè¾“å‡ºpatchs(listDiff/diffChildren/diffProps)\n  - æ²¡æœ‰æ–°çš„èŠ‚ç‚¹ï¼Œè¿”å›\n  - æ–°çš„èŠ‚ç‚¹tagNameä¸keyä¸å˜ï¼Œ å¯¹æ¯”propsï¼Œç»§ç»­é€’å½’éå†å­æ ‘\n    - å¯¹æ¯”å±æ€§(å¯¹æ¯”æ–°æ—§å±æ€§åˆ—è¡¨):\n      - æ—§å±æ€§æ˜¯å¦å­˜åœ¨ä¸æ–°å±æ€§åˆ—è¡¨ä¸­\n      - éƒ½å­˜åœ¨çš„æ˜¯å¦æœ‰å˜åŒ–\n      - æ˜¯å¦å‡ºç°æ—§åˆ—è¡¨ä¸­æ²¡æœ‰çš„æ–°å±æ€§\n\n  - tagNameå’Œkeyå€¼å˜åŒ–äº†ï¼Œåˆ™ç›´æ¥æ›¿æ¢æˆæ–°èŠ‚ç‚¹\n\n- æ¸²æŸ“å·®å¼‚\n  - éå†patchsï¼Œ æŠŠéœ€è¦æ›´æ”¹çš„èŠ‚ç‚¹å–å‡ºæ¥\n  - å±€éƒ¨æ›´æ–°dom\n\n\n- patchå‡½æ•° oldvnode vnode\n  - å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹ä¸ä¸€æ ·ï¼Œç›´æ¥ç”¨æ–°èŠ‚ç‚¹æ›¿æ¢è€èŠ‚ç‚¹ï¼›\n  - å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹ä¸€æ ·ï¼Œ\nâ€‹\t  - æ–°è€èŠ‚ç‚¹ä¸€æ ·ï¼Œç›´æ¥è¿”å›ï¼›\nâ€‹     - è€èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹æ²¡æœ‰ï¼šåˆ é™¤è€èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼›\n    â€‹ - è€èŠ‚ç‚¹æ²¡æœ‰å­èŠ‚ç‚¹ï¼Œæ–°èŠ‚ç‚¹æœ‰å­èŠ‚ç‚¹ï¼šæ–°èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ç›´æ¥appendåˆ°è€èŠ‚ç‚¹ï¼›\n    â€‹ -\téƒ½åªæœ‰æ–‡æœ¬èŠ‚ç‚¹ï¼šç›´æ¥ç”¨æ–°èŠ‚ç‚¹çš„æ–‡æœ¬èŠ‚ç‚¹æ›¿æ¢è€çš„æ–‡æœ¬èŠ‚ç‚¹ï¼›\n    â€‹ -\téƒ½æœ‰å­èŠ‚ç‚¹ï¼šupdateChildren\n\n```js\n// diffç®—æ³•çš„å®ç°\nfunction diff(oldTree, newTree) {\n\t // å·®å¼‚æ”¶é›†\n    let pathchs = {}\n    dfs(oldTree, newTree, 0, pathchs)\n    return pathchs\n}\n\nfunction dfs(oldNode, newNode, index, pathchs) {\n    let curPathchs = []\n    if (newNode) {\n        // å½“æ–°æ—§èŠ‚ç‚¹çš„ tagName å’Œ key å€¼å®Œå…¨ä¸€è‡´æ—¶\n        if (oldNode.tagName === newNode.tagName && oldNode.key === newNode.key) {\n        \t  // ç»§ç»­æ¯”å¯¹å±æ€§å·®å¼‚\n            let props = diffProps(oldNode.props, newNode.props)\n            curPathchs.push({ type: 'changeProps', props })\n            // é€’å½’è¿›å…¥ä¸‹ä¸€å±‚çº§çš„æ¯”è¾ƒ\n            diffChildrens(oldNode.children, newNode.children, index, pathchs)\n        } else {\n        \t  // å½“ tagName æˆ–è€… key ä¿®æ”¹äº†åï¼Œè¡¨ç¤ºå·²ç»æ˜¯å…¨æ–°èŠ‚ç‚¹ï¼Œæ— éœ€å†æ¯”\n            curPathchs.push({ type: 'replaceNode', node: newNode })\n        }\n    }\n\n\t // æ„å»ºå‡ºæ•´é¢—å·®å¼‚æ ‘\n    if (curPathchs.length) {\n    \t\tif(pathchs[index]){\n    \t\t\tpathchs[index] = pathchs[index].concat(curPathchs)\n    \t\t} else {\n    \t\t\tpathchs[index] = curPathchs\n    \t\t}\n    }\n}\n\n// å±æ€§å¯¹æ¯”å®ç°\nfunction diffProps(oldProps, newProps) {\n    let propsPathchs = []\n    // éå†æ–°æ—§å±æ€§åˆ—è¡¨\n    // æŸ¥æ‰¾åˆ é™¤é¡¹\n    // æŸ¥æ‰¾ä¿®æ”¹é¡¹\n    // æŸ¥æ‰¾æ–°å¢é¡¹\n    forin(olaProps, (k, v) => {\n        if (!newProps.hasOwnProperty(k)) {\n            propsPathchs.push({ type: 'remove', prop: k })\n        } else {\n            if (v !== newProps[k]) {\n                propsPathchs.push({ type: 'change', prop: k , value: newProps[k] })\n            }\n        }\n    })\n    forin(newProps, (k, v) => {\n        if (!oldProps.hasOwnProperty(k)) {\n            propsPathchs.push({ type: 'add', prop: k, value: v })\n        }\n    })\n    return propsPathchs\n}\n\n// å¯¹æ¯”å­çº§å·®å¼‚\nfunction diffChildrens(oldChild, newChild, index, pathchs) {\n\t\t// æ ‡è®°å­çº§çš„åˆ é™¤/æ–°å¢/ç§»åŠ¨\n    let { change, list } = diffList(oldChild, newChild, index, pathchs)\n    if (change.length) {\n        if (pathchs[index]) {\n            pathchs[index] = pathchs[index].concat(change)\n        } else {\n            pathchs[index] = change\n        }\n    }\n\n\t // æ ¹æ® key è·å–åŸæœ¬åŒ¹é…çš„èŠ‚ç‚¹ï¼Œè¿›ä¸€æ­¥é€’å½’ä»å¤´å¼€å§‹å¯¹æ¯”\n    oldChild.map((item, i) => {\n        let keyIndex = list.indexOf(item.key)\n        if (keyIndex) {\n            let node = newChild[keyIndex]\n            // è¿›ä¸€æ­¥é€’å½’å¯¹æ¯”\n            dfs(item, node, index, pathchs)\n        }\n    })\n}\n\n// åˆ—è¡¨å¯¹æ¯”ï¼Œä¸»è¦ä¹Ÿæ˜¯æ ¹æ® key å€¼æŸ¥æ‰¾åŒ¹é…é¡¹\n// å¯¹æ¯”å‡ºæ–°æ—§åˆ—è¡¨çš„æ–°å¢/åˆ é™¤/ç§»åŠ¨\nfunction diffList(oldList, newList, index, pathchs) {\n    let change = []\n    let list = []\n    const newKeys = getKey(newList)\n    oldList.map(v => {\n        if (newKeys.indexOf(v.key) > -1) {\n            list.push(v.key)\n        } else {\n            list.push(null)\n        }\n    })\n\n    // æ ‡è®°åˆ é™¤\n    for (let i = list.length - 1; i>= 0; i--) {\n        if (!list[i]) {\n            list.splice(i, 1)\n            change.push({ type: 'remove', index: i })\n        }\n    }\n\n    // æ ‡è®°æ–°å¢å’Œç§»åŠ¨\n    newList.map((item, i) => {\n        const key = item.key\n        const index = list.indexOf(key)\n        if (index === -1 || key == null) {\n            // æ–°å¢\n            change.push({ type: 'add', node: item, index: i })\n            list.splice(i, 0, key)\n        } else {\n            // ç§»åŠ¨\n            if (index !== i) {\n                change.push({\n                    type: 'move',\n                    form: index,\n                    to: i,\n                })\n                move(list, index, i)\n            }\n        }\n    })\n\n    return { change, list }\n}\n```\n\n### Proxy ç›¸æ¯”äº defineProperty çš„ä¼˜åŠ¿\n- æ•°ç»„å˜åŒ–ä¹Ÿèƒ½ç›‘å¬åˆ°\n- ä¸éœ€è¦æ·±åº¦éå†ç›‘å¬(éå†æ¯ä¸€ä¸ªå±æ€§)\n\n```js\nlet data = { a: 1 }\nlet reactiveData = new Proxy(data, {\n\tget: function(target, name){\n\t\t// ...\n\t},\n\t// ...\n})\n```\n\n### vue-router\n- mode\n  - hash\n  - history\n- è·³è½¬\n  - this.$router.push()\n  - <router-link to=\"\"></router-link>\n- å ä½\n  - <router-view></router-view>\n\n### ä¸ºä»€ä¹ˆåœ¨v-forä¸­ä½¿ç”¨keyï¼Ÿ\nä¸ºäº†æ ‡è¯†æ¯ä¸ªå”¯ä¸€çš„èŠ‚ç‚¹ï¼Œæ–¹ä¾¿æ¯”è¾ƒï¼Œv-forä¸­åŠ keyå¯ä»¥å‡å°‘æ¸²æŸ“æ¬¡æ•°ï¼Œæå‡æ¸²æŸ“æ€§èƒ½ã€‚\n\n### Vuexé¡µé¢åˆ·æ–°æ•°æ®ä¸¢å¤±æ€ä¹ˆè§£å†³ï¼Ÿ\nä½¿ç”¨ vuex-persist æ’ä»¶ï¼Œå®ƒå°±æ˜¯ä¸º Vuex æŒä¹…åŒ–å­˜å‚¨è€Œç”Ÿçš„ä¸€ä¸ªæ’ä»¶ã€‚ä¸éœ€è¦ä½ æ‰‹åŠ¨å­˜å– storage ï¼Œè€Œæ˜¯ç›´æ¥å°†çŠ¶æ€ä¿å­˜è‡³ cookie æˆ–è€… localStorage ä¸­\n\n### vueé¡¹ç›®çš„ä¼˜åŒ–\n1. v-ifå’Œv-showåŒºåˆ†åœºæ™¯ä½¿ç”¨\n\n2. computed å’Œ watch åŒºåˆ†åœºæ™¯ä½¿ç”¨\n\n3. v-for éå†å¿…é¡»åŠ keyï¼Œkeyæœ€å¥½æ˜¯idå€¼ï¼Œå¦‚æœé‡‡ç”¨indexå½“æ’å…¥æ•°æ®æ—¶ç´¢å¼•ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¸”é¿å…åŒæ—¶ä½¿ç”¨v-if(ç”¨è®¡ç®—å±æ€§è¿‡æ»¤æ•°æ®)\n\n4. å›¾ç‰‡æ‡’åŠ è½½\n\n5. è·¯ç”±æ‡’åŠ è½½\n\n6. ç¬¬ä¸‰æ–¹æ’ä»¶æŒ‰éœ€å¼•å…¥\n\n7. é•¿åˆ—è¡¨(è™šæ‹Ÿåˆ—è¡¨)\n> æ— é™åˆ—è¡¨åŠ è½½åˆ°åº•éƒ¨è¯·æ±‚apiï¼Œç”¨v-forå¾ªç¯æ•°æ®è¿™æ ·æ˜¯æ¬ å¦¥å½“çš„ã€‚éšç€æ•°æ®çš„åŠ è½½ï¼Œdomä¼šè¶Šæ¥è¶Šå¤šï¼Œé€ æˆæ€§èƒ½çš„å¼€é”€å¤§ï¼Œå¯¹å®¢æˆ·ç«¯é€ æˆå‹åŠ›ã€‚è™šæ‹Ÿåˆ—è¡¨ä¿è¯domæ•°é‡ä¸€å®šï¼Œæ¸²æŸ“å¯è§†åŒºçš„domï¼Œé€šè¿‡æ›¿æ¢æ•°æ®æ¥å®ç°é•¿åˆ—è¡¨çš„æ˜¾ç¤ºã€‚\n\n8. é‡Šæ”¾ç»„ä»¶èµ„æº(beforeDestroyç§»é™¤ç›‘å¬)\n\n9. é¦–å±ä¼˜åŒ– mixinsæŠ½ç¦»å…¬å…±ä»£ç \n\n### vueçˆ¶å­ç»„ä»¶å®ç°åŒå‘ç»‘å®šå®ä¾‹\n```\n<Child :name=\"name\" :change=\"changeName\"/>\n\nprops:{\n    name:{\n        type:String,\n        required: false\n    }\n},\ndata() {\n    newName:''\n},\nwatch:{\n    name(val){\n        this.newName = val\n    },\n    newName(val){\n        this.$emit('change', val)\n    }\n}\n```\n\n### è‡ªå®šä¹‰v-model\nè‡ªå®šä¹‰ v-modelï¼Œè®¾ç½®å­ç»„ä»¶ model å±æ€§ï¼Œè®¾ç½® v-model ä¾¦å¬çš„å±æ€§å€¼ï¼ŒåŒæ—¶ç»‘å®šå±æ€§å˜åŒ–æ—¶æ‰§è¡Œçš„äº‹ä»¶ï¼Œå®ç°è‡ªå®šä¹‰ v-modelï¼Œå³åŒå‘ç»‘å®šã€‚\n```\n// v-modelåªæ˜¯ä¸€ä¸ªè¯­æ³•ç³–\n<input type=\"text\" v-model=\"price\"/>\n\n<input type=\"text\" :value=\"price\" @input=\"price=$event.target.value\" />\n```\n- Vue.extendæ–¹æ³•åˆ›å»ºä¸€ä¸ªç»„ä»¶\n```js\n// æ³¨å†Œç»„ä»¶\nVue.component(\"base-checkbox\", {\n    model:{\n        prop:'checked', // ç»‘å®šå±æ€§\n        event:'change', // æŠ›å‡ºäº‹ä»¶\n    },\n    props:{\n        checked: boolean\n    },\n    templete:`<input type=\"checkbox\" v-bind:checked=\"checked\" v-on:change=\"$emit('change',$event.target.value)\"/>`\n})\n\n<base-checkbox v-model=\"value\"></base-checkbox>\n```\n\n### provide/injectæœ‰ä»€ä¹ˆç”¨ï¼Ÿ\n> å¸¸ç”¨çš„çˆ¶å­ç»„ä»¶é€šä¿¡æ–¹å¼éƒ½æ˜¯çˆ¶ç»„ä»¶ç»‘å®šè¦ä¼ é€’ç»™å­ç»„ä»¶çš„æ•°æ®ï¼Œå­ç»„ä»¶é€šè¿‡`props`å±æ€§æ¥æ”¶ï¼Œä¸€æ—¦ç»„ä»¶å±‚çº§å˜å¤šæ—¶ï¼Œé‡‡ç”¨è¿™ç§æ–¹å¼ä¸€çº§ä¸€çº§ä¼ é€’å€¼éå¸¸éº»çƒ¦ï¼Œè€Œä¸”ä»£ç å¯è¯»æ€§ä¸é«˜ï¼Œä¸ä¾¿åæœŸç»´æŠ¤ã€‚\n\n> vueæä¾›äº†`provide`å’Œ`inject`å¸®åŠ©æˆ‘ä»¬è§£å†³å¤šå±‚æ¬¡åµŒå¥—åµŒå¥—é€šä¿¡é—®é¢˜ã€‚åœ¨`provide`ä¸­æŒ‡å®šè¦ä¼ é€’ç»™å­å­™ç»„ä»¶çš„æ•°æ®ï¼Œå­å­™ç»„ä»¶é€šè¿‡`inject`æ³¨å…¥ç¥–çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ•°æ®ã€‚\n\n> `provide`å’Œ`inject`ä¸»è¦ä¸ºé«˜é˜¶æ’ä»¶/ç»„ä»¶åº“æä¾›ç”¨ä¾‹ã€‚å¹¶ä¸æ¨èç›´æ¥ç”¨äºåº”ç”¨ç¨‹åºä»£ç ä¸­ã€‚\n```js\nprovide() {\n    return {\n        elForm: this\n    }\n}\n\ninject: ['elForm']\n\n\nprovide:{\n    name: 'cosyer'\n}\n\ninject:{\n    newName: {\n        from: 'name',\n        default: ''\n    }\n}\n```\n\n### assetså’Œstaticçš„åŒºåˆ«\n- assetsä¸­çš„æ–‡ä»¶åœ¨è¿è¡Œnpm run buildçš„æ—¶å€™ä¼šæ‰“åŒ…ï¼Œç®€å•æ¥è¯´å°±æ˜¯ä¼šè¢«å‹ç¼©ä½“ç§¯ï¼Œä»£ç æ ¼å¼åŒ–ä¹‹ç±»çš„ã€‚æ‰“åŒ…ä¹‹åä¹Ÿä¼šæ”¾åˆ°staticä¸­ã€‚\n\n- staticä¸­çš„æ–‡ä»¶åˆ™ä¸ä¼šè¢«æ‰“åŒ…ã€‚\n\n> å»ºè®®ï¼šå°†å›¾ç‰‡ç­‰æœªå¤„ç†çš„æ–‡ä»¶æ”¾åœ¨assetsä¸­ï¼Œæ‰“åŒ…å‡å°‘ä½“ç§¯ã€‚è€Œå¯¹äºç¬¬ä¸‰æ–¹å¼•å…¥çš„ä¸€äº›èµ„æºæ–‡ä»¶å¦‚iconfont.cssç­‰å¯ä»¥æ”¾åœ¨staticä¸­ï¼Œå› ä¸ºè¿™äº›æ–‡ä»¶å·²ç»ç»è¿‡å¤„ç†äº†ã€‚\n\n### slotæ’æ§½åˆ†å‘\nå¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬å°è£…äº†ä¸€ä¸ªå­ç»„ä»¶ä¹‹åï¼Œåœ¨çˆ¶ç»„ä»¶ä½¿ç”¨çš„æ—¶å€™ï¼Œæƒ³æ·»åŠ ä¸€äº›domå…ƒç´ ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥ä½¿ç”¨slotæ’æ§½äº†ï¼Œä½†æ˜¯è¿™äº›domæ˜¯å¦æ˜¾ç¤ºä»¥åŠåœ¨å“ªé‡Œæ˜¾ç¤ºï¼Œåˆ™æ˜¯çœ‹å­ç»„ä»¶\nä¸­slotç»„ä»¶çš„ä½ç½®äº†ã€‚\n\n### v-clockæŒ‡ä»¤çš„ä½œç”¨\n- è§£å†³é¡µé¢é—ªçƒé—®é¢˜(ä¼šæ˜¾ç¤ºæ’å€¼è¡¨è¾¾å¼{{message}})\nå¦‚æœç½‘é€Ÿæ…¢ï¼Œè€Œè¯¥æ ‡ç­¾å†…å®¹æ˜¯å˜é‡æ²¡æœ‰è¯·æ±‚å“åº”å›æ¥çš„æ—¶å€™ï¼Œé¡µé¢ä¸Šå…ˆä¸æ˜¾ç¤ºè¯¥æ ‡ç­¾ï¼ˆvueç»™è¯¥æ ‡\nç­¾åŠ äº†cssæ ·å¼ï¼‰ï¼Œå½“å“åº”å›æ¥çš„æ—¶å€™æ”¹æ ‡ç­¾é»˜è®¤å°†cssæ ·å¼å»é™¤ã€‚\n\n`æ­¤æŒ‡ä»¤å¯ä»¥è§£å†³ä½¿ç”¨æ’å€¼è¡¨è¾¾å¼é¡µé¢é—ªçƒé—®é¢˜`å°†è¯¥æŒ‡ä»¤åŠ åœ¨htmlæ ‡ç­¾ä¸­æ—¶ï¼Œå¯ä»¥åœ¨è¯¥æ–‡ä»¶ä¸­åŠ \nstyleå±æ€§ä¸ºdisplayï¼šnone\n```js\n<div class=\"#app\" v-cloak>\n    <p>{{name}}</p>\n</div>\n\n[v-cloak]{\n    display: none;\n}\n```\n\n### å°è£…vueç»„ä»¶çš„è¿‡ç¨‹\n1. å»ºç«‹ç»„ä»¶æ¨¡æ¿ã€æ¶å­å†™å†™æ ·å¼ï¼Œè€ƒè™‘å¥½ç»„ä»¶çš„åŸºæœ¬é€»è¾‘\n2. å‡†å¤‡å¥½ç»„ä»¶çš„æ•°æ®è¾“å…¥ï¼Œå®šå¥½propsé‡Œé¢çš„æ•°æ®ã€ç±»å‹\n3. å‡†å¤‡å¥½ç»„ä»·çš„æ•°æ®è¾“å‡ºï¼Œå®šå¥½æš´éœ²å‡ºæ¥çš„æ–¹æ³•\n\n### å¸¸ç”¨UIåº“\n#### ç§»åŠ¨ç«¯\n- [mint-ui](http://mint-ui.github.io/#!/zh-cn)\n\n- [Vant](https://youzan.github.io/vant/#/zh-CN/home)\n\n- [VUX](https://vux.li/)\n\n- [cube-ui](https://didi.github.io/cube-ui/)\n\n#### pcç«¯\n- [element-ui](https://element.eleme.cn/2.13/#/zh-CN/component/\ninstallationï¼‰\n\n- [Ant Design of Vue](https://www.antdv.com/docs/vue/introduce-cn/)\n\n- [iview/viewui/view-design](https://iviewui.com/)\n\n- [Avue](https://avuejs.com/)\n\n- [vuetify](https://vuetifyjs.com/)\n\n### å¸¸ç”¨é…ç½®\n#### publicPath\n1. cli2 config/index.js\n```js\nbuild: {\n    assetsPublicPath: './'\n}\n```\n2. cli3 vue.config.js\n```js\nmodule.exports = {\n    publicPath: './'\n}\n```\néƒ¨ç½²åº”ç”¨åŒ…æ—¶çš„åŸºæœ¬ URLã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒVue CLIä¼šå‡è®¾ä½ çš„åº”ç”¨æ˜¯è¢«éƒ¨ç½²åœ¨ä¸€ä¸ªåŸŸåçš„æ ¹è·¯å¾„\nä¸Šï¼Œä¾‹å¦‚https://www.my-app.com/ã€‚å¦‚æœåº”ç”¨è¢«éƒ¨ç½²åœ¨ä¸€ä¸ªå­è·¯å¾„ä¸Šï¼Œ\nä½ å°±éœ€è¦ç”¨è¿™ä¸ªé€‰é¡¹æŒ‡å®šè¿™ä¸ªå­è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ çš„åº”ç”¨è¢«éƒ¨ç½²åœ¨https://www.my-app.\ncom/my-app/ï¼Œåˆ™è®¾ç½®publicPathä¸º/my-app/\n\n```js\nproxy: { \n    \"/api\": { //å¦‚æœajaxè¯·æ±‚çš„åœ°å€æ˜¯http://192.168.0.118:9999/api1é‚£ä¹ˆä½ å°±å¯ä»¥åœ¨ajaxä¸­ä½¿ç”¨/api/api1è·¯å¾„,å…¶è¯·æ±‚è·¯å¾„ä¼šè§£æ\n    // http://192.168.0.118:9999/api1ï¼Œå½“ç„¶ä½ åœ¨æµè§ˆå™¨ä¸Šçœ‹åˆ°çš„è¿˜æ˜¯http://localhost:8080/api/api1;\n    target: \"http://192.168.0.118:9999\",\n    //æ˜¯å¦å…è®¸è·¨åŸŸï¼Œè¿™é‡Œæ˜¯åœ¨å¼€å‘ç¯å¢ƒä¼šèµ·ä½œç”¨ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œè¿˜æ˜¯ç”±åå°å»å¤„ç†ï¼Œæ‰€ä»¥ä¸å¿…å¤ªåœ¨æ„\n    changeOrigin: true,\n    pathRewrite: {\n        //æŠŠå¤šä½™çš„è·¯å¾„ç½®ä¸º''\n        \"api\": \"\"\n    }\n}\n```\n\n### vue3\n1. createApp\n- vue2.x\n```js\nimport Vue from \"vue\";\nimport App from './App.vue'\n\nnew Vue({\n  render: (h) => h(App)\n}).$mount(\"#app\");\n```\n\n- vue3æ–°ç‰¹æ€§\n> createApp ä¼šäº§ç”Ÿä¸€ä¸ª app å®ä¾‹ï¼Œè¯¥å®ä¾‹æ‹¥æœ‰å…¨å±€çš„å¯é…ç½®ä¸Šä¸‹æ–‡\n```js\nimport { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n```\n\n2. globalProperties\n```js\napp.config.globalProperties.foo = 'bar'\n\napp.component('child-component', {\n  mounted() {\n    console.log(this.foo) // 'bar'\n  }\n})\n```\n> æ·»åŠ å¯åœ¨ç¨‹åºå†…çš„ä»»ä½•ç»„ä»¶å®ä¾‹ä¸­è®¿é—®çš„å…¨å±€å±æ€§ã€‚å½“å­˜åœ¨é”®å†²çªæ—¶ï¼Œç»„ä»¶å±æ€§å°†ä¼˜å…ˆæ›¿ä»£æ‰Vue2.xçš„ Vue.prototypeå±æ€§æ”¾åˆ°åŸå‹ä¸Šçš„å†™æ³•\n\n```js\n// Vue2.x\nVue.prototype.$http = () => {}\n\n// Vue3\nconst app = Vue.createApp({})\napp.config.globalProperties.$http = () => {}\n```\n\n3. æ›´å¿«\n\n- é‡å†™è™šæ‹ŸDOM (Virtual DOM Rewrite)\n\néšç€è™šæ‹Ÿ DOM é‡å†™ï¼Œæˆ‘ä»¬å¯ä»¥æœŸå¾…æ›´å¤šçš„ ç¼–è¯‘æ—¶ï¼ˆcompile-timeï¼‰æç¤ºæ¥å‡å°‘ è¿è¡Œæ—¶ï¼ˆruntimeï¼‰å¼€é”€ã€‚é‡å†™å°†åŒ…æ‹¬æ›´æœ‰æ•ˆçš„ä»£ç æ¥åˆ›å»ºè™šæ‹ŸèŠ‚ç‚¹ã€‚\n\n- ä¼˜åŒ–æ’æ§½ç”Ÿæˆ(Optimized Slots Generation)\n\nåœ¨å½“å‰çš„ Vue ç‰ˆæœ¬ä¸­ï¼Œå½“çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œå…¶å­ç»„ä»¶ä¹Ÿå¿…é¡»é‡æ–°æ¸²æŸ“ã€‚ ä½¿ç”¨ Vue 3 ï¼Œå¯ä»¥å•ç‹¬é‡æ–°æ¸²æŸ“çˆ¶ç»„ä»¶å’Œå­ç»„ä»¶ã€‚\n\n- é™æ€æ ‘æå‡(Static Tree Hoisting)\n\nä½¿ç”¨é™æ€æ ‘æå‡ï¼Œè¿™æ„å‘³ç€ Vue 3 çš„ç¼–è¯‘å™¨å°†èƒ½å¤Ÿæ£€æµ‹åˆ°ä»€ä¹ˆæ˜¯é™æ€ç»„ä»¶ï¼Œç„¶åå°†å…¶æå‡ï¼Œä»è€Œé™ä½äº†æ¸²æŸ“æˆæœ¬ã€‚å®ƒå°†èƒ½å¤Ÿè·³è¿‡æœªæ•´ä¸ªæ ‘ç»“æ„æ‰“è¡¥ä¸çš„è¿‡ç¨‹ã€‚\n\n- é™æ€å±æ€§æå‡ï¼ˆStatic Props Hoistingï¼‰\n\næ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥æœŸå¾…é™æ€å±æ€§æå‡ï¼Œå…¶ä¸­ Vue 3 å°†è·³è¿‡ä¸ä¼šæ”¹å˜èŠ‚ç‚¹çš„æ‰“è¡¥ä¸è¿‡ç¨‹ã€‚\n\n- åŸºäº Proxy çš„è§‚å¯Ÿè€…æœºåˆ¶\n\n- æ›´å°\nVueå·²ç»éå¸¸å°äº†ï¼Œåœ¨è¿è¡Œæ—¶ï¼ˆruntimeï¼‰å‹ç¼©åå¤§çº¦ 20kb ã€‚ ä½†æˆ‘ä»¬å¯ä»¥æœŸå¾…å®ƒä¼šå˜å¾—æ›´åŠ å°ï¼Œæ–°çš„æ ¸å¿ƒè¿è¡Œæ—¶å‹ç¼©åå¤§æ¦‚ 10kb ã€‚\n- ä½¿å…¶æ›´å…·å¯ç»´æŠ¤æ€§\nä¸ä»…ä¼šä½¿ç”¨ TypeScriptï¼ˆå…è®¸åœ¨ç¼–è¾‘å™¨ä¸­è¿›è¡Œé«˜çº§çš„ç±»å‹æ£€æŸ¥å’Œæœ‰ç”¨çš„é”™è¯¯å’Œè­¦å‘Šï¼‰ ï¼Œè€Œä¸”è®¸å¤šè½¯ä»¶åŒ…å°†è¢«è§£è€¦ï¼Œä½¿æ‰€æœ‰å†…å®¹æ›´åŠ æ¨¡å—åŒ–ã€‚\n- æ›´å¤šçš„åŸç”Ÿæ”¯æŒ\nè¿è¡Œæ—¶å†…æ ¸ä¹Ÿå°†ä¸å¹³å°æ— å…³ï¼Œä½¿å¾— Vue å¯ä»¥æ›´å®¹æ˜“åœ°ä¸ä»»ä½•å¹³å°ï¼ˆä¾‹å¦‚Webï¼ŒiOSæˆ–Androidï¼‰ä¸€èµ·ä½¿ç”¨ã€‚\n- æ›´æ˜“äºå¼€å‘ä½¿ç”¨\nå½“æˆ‘ä»¬éœ€è¦åœ¨ Vue ä¸­å…±äº«ä¸¤ä¸ªç»„ä»¶ä¹‹é—´çš„è¡Œä¸ºæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ Mixins ã€‚ç„¶è€Œï¼ŒEvan æ­£åœ¨å°è¯•ä½¿ç”¨ Hooks API æ¥é¿å…æ¥è‡ª Mixins çš„ä¸€äº›é—®é¢˜ï¼Œå¹¶ä¸”æ›´é€‚åˆ\n- ä½¿ç”¨æƒ¯ç”¨çš„ Vue ä»£ç ã€‚\nä½¿ç”¨ Time Slicingï¼Œå°† JS çš„æ‰§è¡Œåˆ†è§£ä¸ºå‡ ä¸ªéƒ¨åˆ†ï¼Œå¦‚æœæœ‰ç”¨æˆ·äº¤äº’éœ€è¦å¤„ç†ï¼Œè¿™äº›éƒ¨åˆ†å°†æä¾›ç»™æµè§ˆå™¨ã€‚\n","tags":["vue"],"categories":["Vue"]},{"title":"Immerä¸­æ–‡æ–‡æ¡£","url":"%2F2020%2FImmer%E4%B8%AD%E6%96%87%E6%96%87%E6%A1%A3.html","content":"\n# Immer ä¸­æ–‡æ–‡æ¡£\n\n## å‰è¨€\n\n[Immer](https://github.com/mweststrate/immer) æ˜¯ mobx çš„ä½œè€…å†™çš„ä¸€ä¸ª immutable åº“ï¼Œæ ¸å¿ƒå®ç°æ˜¯åˆ©ç”¨ ES6 çš„ proxyï¼Œå‡ ä¹ä»¥æœ€å°çš„æˆæœ¬å®ç°äº† js çš„ä¸å¯å˜æ•°æ®ç»“æ„ï¼Œç®€å•æ˜“ç”¨ã€ä½“é‡å°å·§ã€è®¾è®¡å·§å¦™ï¼Œæ»¡è¶³äº†æˆ‘ä»¬å¯¹JSä¸å¯å˜æ•°æ®ç»“æ„çš„éœ€æ±‚ã€‚  \næ— å¥ˆç½‘ç»œä¸Šå®Œå–„çš„æ–‡æ¡£å®åœ¨å¤ªå°‘ï¼Œæ‰€ä»¥è‡ªå·±å†™äº†ä¸€ä»½ï¼Œæœ¬ç¯‡æ–‡ç« ä»¥è´´è¿‘å®æˆ˜çš„æ€è·¯å’Œæµç¨‹ï¼Œå¯¹ Immer è¿›è¡Œäº†å…¨é¢çš„è®²è§£ã€‚\n\n## ç›®å½•\n\n-   [æ•°æ®å¤„ç†å­˜åœ¨çš„é—®é¢˜](#æ•°æ®å¤„ç†å­˜åœ¨çš„é—®é¢˜)\n-   [è§£å†³å¼•ç”¨ç±»å‹å¯¹è±¡è¢«ä¿®æ”¹çš„åŠæ³•](#è§£å†³å¼•ç”¨ç±»å‹å¯¹è±¡è¢«ä¿®æ”¹çš„åŠæ³•)\n-   [immeråŠŸèƒ½ä»‹ç»](#immeråŠŸèƒ½ä»‹ç»)\n    - [å®‰è£…immer](#å®‰è£…immer)\n    - [immerå¦‚ä½•fixæ‰é‚£äº›ä¸çˆ½çš„é—®é¢˜](#immerå¦‚ä½•fixæ‰é‚£äº›ä¸çˆ½çš„é—®é¢˜)\n    - [æ¦‚å¿µè¯´æ˜](#æ¦‚å¿µè¯´æ˜)\n    - [å¸¸ç”¨apiä»‹ç»](#å¸¸ç”¨apiä»‹ç»)\n-   [ç”¨immerä¼˜åŒ–reacté¡¹ç›®çš„æ¢ç´¢](#ç”¨immerä¼˜åŒ–reacté¡¹ç›®çš„æ¢ç´¢)\n    - [æŠ›å‡ºéœ€æ±‚](#æŠ›å‡ºéœ€æ±‚)\n    - [ä¼˜åŒ–setStateæ–¹æ³•](#ä¼˜åŒ–setStateæ–¹æ³•)\n    - [ä¼˜åŒ–reducer](#ä¼˜åŒ–reducer)\n-   [å‚è€ƒæ–‡æ¡£](#å‚è€ƒæ–‡æ¡£)\n\n---\n<!--more-->\n\n## æ•°æ®å¤„ç†å­˜åœ¨çš„é—®é¢˜\n\nå…ˆå®šä¹‰ä¸€ä¸ªåˆå§‹å¯¹è±¡ï¼Œä¾›åé¢ä¾‹å­ä½¿ç”¨ï¼š\né¦–å…ˆå®šä¹‰ä¸€ä¸ª`currentState`å¯¹è±¡ï¼Œåé¢çš„ä¾‹å­ä½¿ç”¨åˆ°å˜é‡`currentState`æ—¶ï¼Œå¦‚æ— ç‰¹æ®Šå£°æ˜ï¼Œéƒ½æ˜¯æŒ‡è¿™ä¸ª`currentState`å¯¹è±¡\n```javascript\nlet currentState = {\n  p: {\n    x: [2],\n  },\n}\n```\n\nå“ªäº›æƒ…å†µä¼šä¸€ä¸å°å¿ƒä¿®æ”¹åŸå§‹å¯¹è±¡ï¼Ÿ\n\n```javascript\n// Q1\nlet o1 = currentState;\no1.p = 1; // currentState è¢«ä¿®æ”¹äº†\no1.p.x = 1; // currentState è¢«ä¿®æ”¹äº†\n\n// Q2\nfn(currentState); // currentState è¢«ä¿®æ”¹äº†\nfunction fn(o) {\n  o.p1 = 1;\n  return o;\n};\n\n// Q3\nlet o3 = {\n  ...currentState\n};\no3.p.x = 1; // currentState è¢«ä¿®æ”¹äº†\n\n// Q4\nlet o4 = currentState;\no4.p.x.push(1); // currentState è¢«ä¿®æ”¹äº†\n```\n\n## è§£å†³å¼•ç”¨ç±»å‹å¯¹è±¡è¢«ä¿®æ”¹çš„åŠæ³•\n\n1. æ·±åº¦æ‹·è´ï¼Œä½†æ˜¯æ·±æ‹·è´çš„æˆæœ¬è¾ƒé«˜ï¼Œä¼šå½±å“æ€§èƒ½ï¼›\n2. [ImmutableJS](https://github.com/facebook/immutable-js)ï¼Œéå¸¸æ£’çš„ä¸€ä¸ªä¸å¯å˜æ•°æ®ç»“æ„çš„åº“ï¼Œå¯ä»¥è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼ŒButï¼Œè·Ÿ Immer æ¯”èµ·æ¥ï¼ŒImmutableJS æœ‰ä¸¤ä¸ªè¾ƒå¤§çš„ä¸è¶³ï¼š  \n  - éœ€è¦ä½¿ç”¨è€…å­¦ä¹ å®ƒçš„æ•°æ®ç»“æ„æ“ä½œæ–¹å¼ï¼Œæ²¡æœ‰ Immer æä¾›çš„ä½¿ç”¨åŸç”Ÿå¯¹è±¡çš„æ“ä½œæ–¹å¼ç®€å•ã€æ˜“ç”¨ï¼›\n  - å®ƒçš„æ“ä½œç»“æœéœ€è¦é€šè¿‡`toJS`æ–¹æ³•æ‰èƒ½å¾—åˆ°åŸç”Ÿå¯¹è±¡ï¼Œè¿™ä½¿å¾—åœ¨æ“ä½œä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œæ—¶åˆ»è¦ä¸»è¦æ“ä½œçš„æ˜¯åŸç”Ÿå¯¹è±¡è¿˜æ˜¯ ImmutableJS çš„è¿”å›ç»“æœï¼Œç¨ä¸æ³¨æ„ï¼Œå°±ä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„ bugã€‚\n\nçœ‹æ¥ç›®å‰å·²çŸ¥çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬éƒ½ä¸ç”šæ»¡æ„ï¼Œé‚£ä¹ˆ Immer åˆæœ‰ä»€ä¹ˆé«˜æ˜ä¹‹å¤„å‘¢ï¼Ÿ\n\n## immeråŠŸèƒ½ä»‹ç»\n\n### å®‰è£…immer\n\næ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œå®‰è£… Immer æ˜¯å½“å‰ç¬¬ä¸€è¦åŠ¡\n\n```shell\nnpm i --save immer\n```\n\n### immerå¦‚ä½•fixæ‰é‚£äº›ä¸çˆ½çš„é—®é¢˜\n\nFix Q1ã€Q3\n```js\nimport produce from 'immer';\nlet o1 = produce(currentState, draft => {\n  draft.p.x = 1;\n})\n```\n\nFix Q2\n```js\nimport produce from 'immer';\nfn(currentState); // currentState è¢«ä¿®æ”¹äº†\nfunction fn(o) {\n  return produce(o, draft => {\n    draft.p1 = 1;\n  })\n};\n```\n\nFix Q4\n```js\nimport produce from 'immer';\nlet o4 = produce(currentState, draft => {\n  draft.p.x.push(1);\n})\n```\n\næ˜¯ä¸æ˜¯ä½¿ç”¨éå¸¸ç®€å•ï¼Œé€šè¿‡å°è¯•ç‰›åˆ€ï¼Œæˆ‘ä»¬ç®€å•çš„äº†è§£äº† Immer ï¼Œä¸‹é¢å°†å¯¹ Immer çš„å¸¸ç”¨ api åˆ†åˆ«è¿›è¡Œä»‹ç»ã€‚\n\n\n### æ¦‚å¿µè¯´æ˜\n\nImmer æ¶‰åŠæ¦‚å¿µä¸å¤šï¼Œåœ¨æ­¤å°†æ¶‰åŠåˆ°çš„æ¦‚å¿µå…ˆè¡Œç½—åˆ—å‡ºæ¥ï¼Œé˜…è¯»æœ¬æ–‡ç« è¿‡ç¨‹ä¸­é‡åˆ°ä¸æ˜ç™½çš„æ¦‚å¿µï¼Œå¯ä»¥éšæ—¶æ¥æ­¤å¤„æŸ¥é˜…ã€‚\n\n- currentState  \n  è¢«æ“ä½œå¯¹è±¡çš„æœ€åˆçŠ¶æ€\n\n- draftState  \n  æ ¹æ® currentState ç”Ÿæˆçš„è‰ç¨¿çŠ¶æ€ï¼Œå®ƒæ˜¯ currentState çš„ä»£ç†ï¼Œå¯¹ draftState æ‰€åšçš„ä»»ä½•ä¿®æ”¹éƒ½å°†è¢«è®°å½•å¹¶ç”¨äºç”Ÿæˆ nextState ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼ŒcurrentState å°†ä¸å—å½±å“\n\n- nextState  \n  æ ¹æ® draftState ç”Ÿæˆçš„æœ€ç»ˆçŠ¶æ€\n\n- produce ç”Ÿäº§  \n  ç”¨æ¥ç”Ÿæˆ nextState æˆ– producer çš„å‡½æ•°\n\n- producer ç”Ÿäº§è€…  \n  é€šè¿‡ produce ç”Ÿæˆï¼Œç”¨æ¥ç”Ÿäº§ nextState ï¼Œæ¯æ¬¡æ‰§è¡Œç›¸åŒçš„æ“ä½œ\n\n- recipe ç”Ÿäº§æœºå™¨  \n  ç”¨æ¥æ“ä½œ draftState çš„å‡½æ•°\n\n\n### å¸¸ç”¨apiä»‹ç»\n\nä½¿ç”¨ Immer å‰ï¼Œè¯·ç¡®è®¤å°†`immer`åŒ…å¼•å…¥åˆ°æ¨¡å—ä¸­\n\n```js\nimport produce from 'immer'\n```\nor  \n```js\nimport { produce } from 'immer'\n```\n\nè¿™ä¸¤ç§å¼•ç”¨æ–¹å¼ï¼Œproduce æ˜¯å®Œå…¨ç›¸åŒçš„\n\n#### produce\n\n*å¤‡æ³¨ï¼šå‡ºç°`PatchListener`å…ˆè¡Œè·³è¿‡ï¼Œåé¢ç« èŠ‚ä¼šåšä»‹ç»*\n\n##### ç¬¬1ç§ä½¿ç”¨æ–¹å¼ï¼š\n\nè¯­æ³•ï¼š  \n`produce(currentState, recipe: (draftState) => void | draftState, ?PatchListener): nextState`\n\nä¾‹å­1ï¼š\n```js\nlet nextState = produce(currentState, (draft) => {\n\n})\n\ncurrentState === nextState; // true\n```\n\nä¾‹å­2ï¼š\n```js\nlet currentState = {\n  a: [],\n  p: {\n    x: 1\n  }\n}\n\nlet nextState = produce(currentState, (draft) => {\n  draft.a.push(2);\n})\n\ncurrentState.a === nextState.a; // false\ncurrentState.p === nextState.p; // true\n```\n\nç”±æ­¤å¯è§ï¼Œå¯¹ draftState çš„ä¿®æ”¹éƒ½ä¼šååº”åˆ° nextState ä¸Šï¼Œè€Œ Immer ä½¿ç”¨çš„ç»“æ„æ˜¯å…±äº«çš„ï¼ŒnextState åœ¨ç»“æ„ä¸Šåˆä¸ currentState å…±äº«æœªä¿®æ”¹çš„éƒ¨åˆ†ï¼Œå…±äº«æ•ˆæœå¦‚å›¾ï¼š\n\n![change-tree](http://cdn.mydearest.cn/blog/images/change-tree.gif)\n\n##### è‡ªåŠ¨å†»ç»“åŠŸèƒ½\n\nImmer è¿˜åœ¨å†…éƒ¨åšäº†ä¸€ä»¶å¾ˆå·§å¦™çš„äº‹æƒ…ï¼Œé‚£å°±æ˜¯é€šè¿‡ produce ç”Ÿæˆçš„ nextState æ˜¯è¢«å†»ç»“ï¼ˆfreezeï¼‰çš„ï¼Œï¼ˆImmer å†…éƒ¨ä½¿ç”¨`Object.freeze`æ–¹æ³•ï¼Œåªå†»ç»“ nextState è·Ÿ currentState ç›¸æ¯”ä¿®æ”¹çš„éƒ¨åˆ†ï¼‰ï¼Œè¿™æ ·ï¼Œå½“ç›´æ¥ä¿®æ”¹ nextState æ—¶ï¼Œå°†ä¼šæŠ¥é”™ã€‚\nè¿™ä½¿å¾— nextState æˆä¸ºäº†çœŸæ­£çš„ä¸å¯å˜æ•°æ®ã€‚\n\nä¾‹å­ï¼š\n```js\nlet nextState = produce(currentState, (draft) => {\n  draft.p.x.push(2);\n})\n\ncurrentState === nextState; // true\n```\n\n##### ç¬¬2ç§ä½¿ç”¨æ–¹å¼\n\nåˆ©ç”¨é«˜é˜¶å‡½æ•°çš„ç‰¹ç‚¹ï¼Œæå‰ç”Ÿæˆä¸€ä¸ªç”Ÿäº§è€… producer\n\nè¯­æ³•ï¼š  \n`produce(recipe: (draftState) => void | draftState, ?PatchListener)(currentState): nextState`\n\nä¾‹å­ï¼š\n```js\nlet producer = produce((draft) => {\n  draft.x = 2\n});\nlet nextState = producer(currentState);\n```\n\n\n##### recipeçš„è¿”å›å€¼\n\nrecipe æ˜¯å¦æœ‰è¿”å›å€¼ï¼ŒnextState çš„ç”Ÿæˆè¿‡ç¨‹æ˜¯ä¸åŒçš„ï¼š  \nrecipe æ²¡æœ‰è¿”å›å€¼æ—¶ï¼šnextState æ˜¯æ ¹æ® recipe å‡½æ•°å†…çš„ draftState ç”Ÿæˆçš„ï¼›  \nrecipe æœ‰è¿”å›å€¼æ—¶ï¼šnextState æ˜¯æ ¹æ® recipe å‡½æ•°çš„è¿”å›å€¼ç”Ÿæˆçš„ï¼›  \n\n```js\nlet nextState = produce(\n  currentState, \n  (draftState) => {\n    return {\n      x: 2\n    }\n  }\n)\n```\n\næ­¤æ—¶ï¼ŒnextState ä¸å†æ˜¯é€šè¿‡ draftState ç”Ÿæˆçš„äº†ï¼Œè€Œæ˜¯é€šè¿‡ recipe çš„è¿”å›å€¼ç”Ÿæˆçš„ã€‚\n\n##### recipeä¸­çš„this\n\n recipe å‡½æ•°å†…éƒ¨çš„`this`æŒ‡å‘ draftState ï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹`this`ä¸ä¿®æ”¹ recipe çš„å‚æ•° draftState ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚  \n**æ³¨æ„ï¼šæ­¤å¤„çš„ recipe å‡½æ•°ä¸èƒ½æ˜¯ç®­å¤´å‡½æ•°ï¼Œå¦‚æœæ˜¯ç®­å¤´å‡½æ•°ï¼Œ`this`å°±æ— æ³•æŒ‡å‘ draftState äº†**\n\n```js\nproduce(currentState, function(draft){\n  // æ­¤å¤„ï¼Œthis æŒ‡å‘ draftState\n  draft === this; // true\n})\n```\n\n#### patchè¡¥ä¸åŠŸèƒ½\n\né€šè¿‡æ­¤åŠŸèƒ½ï¼Œå¯ä»¥æ–¹ä¾¿è¿›è¡Œè¯¦ç»†çš„ä»£ç è°ƒè¯•å’Œè·Ÿè¸ªï¼Œå¯ä»¥çŸ¥é“ recipe å†…çš„åšçš„æ¯æ¬¡ä¿®æ”¹ï¼Œè¿˜å¯ä»¥å®ç°æ—¶é—´æ—…è¡Œã€‚\n\nImmer ä¸­ï¼Œä¸€ä¸ª patch å¯¹è±¡æ˜¯è¿™æ ·çš„:\n```typescript\ninterface Patch {\n  op: \"replace\" | \"remove\" | \"add\" // ä¸€æ¬¡æ›´æ”¹çš„åŠ¨ä½œç±»å‹\n  path: (string | number)[] // æ­¤å±æ€§æŒ‡ä»æ ‘æ ¹åˆ°è¢«æ›´æ”¹æ ‘æˆçš„è·¯å¾„\n  value?: any // opä¸º replaceã€add æ—¶ï¼Œæ‰æœ‰æ­¤å±æ€§ï¼Œè¡¨ç¤ºæ–°çš„èµ‹å€¼\n}\n```\n\nè¯­æ³•ï¼š\n```typescript\nproduce(\n  currentState, \n  recipe,\n  // é€šè¿‡ patchListener å‡½æ•°ï¼Œæš´éœ²æ­£å‘å’Œåå‘çš„è¡¥ä¸æ•°ç»„\n  patchListener: (patches: Patch[], inversePatches: Patch[]) => void\n)\n\napplyPatches(currentState, changes: (patches | inversePatches)[]): nextState\n```\n\nä¾‹å­ï¼š\n\n```js\nimport produce, { applyPatches } from \"immer\"\n\nlet state = {\n  x: 1\n}\n\nlet replaces = [];\nlet inverseReplaces = [];\n\nstate = produce(\n  state,\n  draft => {\n    draft.x = 2;\n    draft.y = 2;\n  },\n  (patches, inversePatches) => {\n    replaces = patches.filter(patch => patch.op === 'replace');\n    inverseReplaces = inversePatches.filter(patch => patch.op === 'replace');\n  }\n)\n\nstate = produce(state, draft => {\n  draft.x = 3;\n})\nconsole.log('state1', state); // { x: 3, y: 2 }\n\nstate = applyPatches(state, replaces);\nconsole.log('state2', state); // { x: 2, y: 2 }\n\nstate = produce(state, draft => {\n  draft.x = 4;\n})\nconsole.log('state3', state); // { x: 4, y: 2 }\n\nstate = applyPatches(state, inverseReplaces);\nconsole.log('state4', state); // { x: 1, y: 2 }\n```\n\n`state.x`çš„å€¼4æ¬¡æ‰“å°ç»“æœåˆ†åˆ«æ˜¯ï¼š`3ã€2ã€4ã€1`ï¼Œå®ç°äº†æ—¶é—´æ—…è¡Œï¼Œ\nå¯ä»¥åˆ†åˆ«æ‰“å°`patches`å’Œ`inversePatches`çœ‹ä¸‹ï¼Œ\n\n`patches`æ•°æ®å¦‚ä¸‹ï¼š\n```js\n[\n  {\n    op: \"replace\",\n    path: [\"x\"],\n    value: 2\n  },\n  {\n    op: \"add\",\n    path: [\"y\"],\n    value: 2\n  },\n]\n```\n\n`inversePatches`æ•°æ®å¦‚ä¸‹ï¼š\n```js\n[\n  {\n    op: \"replace\",\n    path: [\"x\"],\n    value: 1\n  },\n  {\n    op: \"remove\",\n    path: [\"y\"],\n  },\n]\n```\n\nå¯è§ï¼Œ`patchListener`å†…éƒ¨å¯¹æ•°æ®æ“ä½œåšäº†è®°å½•ï¼Œå¹¶åˆ†åˆ«å­˜å‚¨ä¸ºæ­£å‘æ“ä½œè®°å½•å’Œåå‘æ“ä½œè®°å½•ï¼Œä¾›æˆ‘ä»¬ä½¿ç”¨ã€‚\n\nè‡³æ­¤ï¼ŒImmer çš„å¸¸ç”¨åŠŸèƒ½å’Œ api æˆ‘ä»¬å°±ä»‹ç»å®Œäº†ã€‚\n\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹å¦‚ä½•ç”¨ Immer ï¼Œæé«˜ React ã€Redux é¡¹ç›®çš„å¼€å‘æ•ˆç‡ã€‚\n\n\n## ç”¨immerä¼˜åŒ–reacté¡¹ç›®çš„æ¢ç´¢\n\né¦–å…ˆå®šä¹‰ä¸€ä¸ª`state`å¯¹è±¡ï¼Œåé¢çš„ä¾‹å­ä½¿ç”¨åˆ°å˜é‡`state`æˆ–è®¿é—®`this.state`æ—¶ï¼Œå¦‚æ— ç‰¹æ®Šå£°æ˜ï¼Œéƒ½æ˜¯æŒ‡è¿™ä¸ª`state`å¯¹è±¡\n```js\nstate = {\n  members: [\n    {\n      name: 'ronffy',\n      age: 30\n    }\n  ]\n}\n```\n\n### æŠ›å‡ºéœ€æ±‚\n\nå°±ä¸Šé¢å®šä¹‰çš„`state`ï¼Œæˆ‘ä»¬å…ˆæŠ›ä¸€ä¸ªéœ€æ±‚å‡ºæ¥ï¼Œå¥½è®©åé¢çš„è®²è§£æœ‰çš„æ”¾çŸ¢ï¼š  \n**members æˆå‘˜ä¸­çš„ç¬¬1ä¸ªæˆå‘˜ï¼Œå¹´é¾„å¢åŠ 1å²**\n\n### ä¼˜åŒ–setStateæ–¹æ³•\n\n#### é”™è¯¯ç¤ºä¾‹\n\n```js\nthis.state.members[0].age++;\n```\nåªæ‰€ä»¥æœ‰çš„æ–°æ‰‹åŒå­¦ä¼šçŠ¯è¿™æ ·çš„é”™è¯¯ï¼Œå¾ˆå¤§åŸå› æ˜¯è¿™æ ·æ“ä½œå®åœ¨æ˜¯å¤ªæ–¹ä¾¿äº†ï¼Œä»¥è‡³äºå¿˜è®°äº†æ“ä½œ State çš„è§„åˆ™ã€‚\n\nä¸‹é¢çœ‹ä¸‹æ­£ç¡®çš„å®ç°æ–¹æ³•\n\n#### setStateçš„ç¬¬1ç§å®ç°æ–¹æ³•\n\n```js\nconst { members } = this.state;\nthis.setState({\n  members: [\n    {\n      ...members[0],\n      age: members[0].age + 1,\n    },\n    ...members.slice(1),\n  ]\n})\n```\n\n#### setStateçš„ç¬¬2ç§å®ç°æ–¹æ³•\n\n```js\nthis.setState(state => {\n  const { members } = state;\n  return {\n    members: [\n      {\n        ...members[0],\n        age: members[0].age + 1,\n      },\n      ...members.slice(1)\n    ]\n  }\n})\n```\n\nä»¥ä¸Š2ç§å®ç°æ–¹å¼ï¼Œå°±æ˜¯`setState`çš„ä¸¤ç§ä½¿ç”¨æ–¹æ³•ï¼Œç›¸æ¯”å¤§å®¶éƒ½ä¸é™Œç”Ÿäº†ï¼Œæ‰€ä»¥å°±ä¸è¿‡å¤šè¯´æ˜äº†ï¼Œæ¥ä¸‹æ¥çœ‹ä¸‹ï¼Œå¦‚æœç”¨ Immer è§£å†³ï¼Œä¼šæœ‰æ€æ ·çš„çƒŸç«ï¼Ÿ\n\n#### ç”¨immeræ›´æ–°state\n\n```js\nthis.setState(produce(draft => {\n  draft.members[0].age++;\n}))\n```\n\næ˜¯ä¸æ˜¯ç¬é—´ä»£ç é‡å°±å°‘äº†å¾ˆå¤šï¼Œé˜…è¯»èµ·æ¥èˆ’æœäº†å¾ˆå¤šï¼Œè€Œä¸”æ›´æ˜“äºé˜…è¯»äº†ã€‚\n\n### ä¼˜åŒ–reducer\n\n#### immerçš„produceçš„æ‹“å±•ç”¨æ³•\n\nåœ¨å¼€å§‹æ­£å¼æ¢ç´¢ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ produce [ç¬¬2ç§ä½¿ç”¨æ–¹å¼](#ç¬¬2ç§ä½¿ç”¨æ–¹å¼)çš„æ‹“å±•ç”¨æ³•:\n\nä¾‹å­ï¼š\n```js\nlet obj = {};\n\nlet producer = produce((draft, arg) => {\n  obj === arg; // true\n});\nlet nextState = producer(currentState, obj);\n```\n\nç›¸æ¯” produce ç¬¬2ç§ä½¿ç”¨æ–¹å¼çš„ä¾‹å­ï¼Œå¤šå®šä¹‰äº†ä¸€ä¸ª`obj`å¯¹è±¡ï¼Œå¹¶å°†å…¶ä½œä¸º producer æ–¹æ³•çš„ç¬¬2ä¸ªå‚æ•°ä¼ äº†è¿›å»ï¼›å¯ä»¥çœ‹åˆ°ï¼Œ produce å†…çš„ recipe å›è°ƒå‡½æ•°çš„ç¬¬2ä¸ªå‚æ•°ä¸`obj`å¯¹è±¡æ˜¯æŒ‡å‘åŒä¸€å—å†…å­˜ã€‚  \nokï¼Œæˆ‘ä»¬åœ¨çŸ¥é“äº† produce çš„è¿™ç§æ‹“å±•ç”¨æ³•åï¼Œçœ‹çœ‹èƒ½å¤Ÿåœ¨ Redux ä¸­å‘æŒ¥ä»€ä¹ˆåŠŸæ•ˆ?\n\n#### æ™®é€šreduceræ€æ ·è§£å†³ä¸Šé¢æŠ›å‡ºçš„éœ€æ±‚\n\n```js\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'ADD_AGE':\n      const { members } = state;\n      return {\n        ...state,\n        members: [\n          {\n            ...members[0],\n            age: members[0].age + 1,\n          },\n          ...members.slice(1),\n        ]\n      }\n    default:\n      return state\n  }\n}\n```\n\n#### é›†åˆimmer,reducerå¯ä»¥æ€æ ·å†™\n\n```js\nconst reducer = (state, action) => produce(state, draft => {\n  switch (action.type) {\n    case 'ADD_AGE':\n      draft.members[0].age++;\n  }\n})\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ produce ï¼Œæˆ‘ä»¬çš„ä»£ç é‡å·²ç»ç²¾ç®€äº†å¾ˆå¤šï¼›  \nä¸è¿‡ä»”ç»†è§‚å¯Ÿä¸éš¾å‘ç°ï¼Œåˆ©ç”¨ produce èƒ½å¤Ÿå…ˆåˆ¶é€ å‡º producer çš„ç‰¹ç‚¹ï¼Œä»£ç è¿˜èƒ½æ›´ä¼˜é›…ï¼š\n\n```js\nconst reducer = produce((draft, action) => {\n  switch (action.type) {\n    case 'ADD_AGE':\n      draft.members[0].age++;\n  }\n})\n```\n\nå¥½äº†ï¼Œè‡³æ­¤ï¼ŒImmer ä¼˜åŒ– reducer çš„æ–¹æ³•ä¹Ÿè®²è§£å®Œæ¯•ã€‚\n\nImmer çš„ä½¿ç”¨éå¸¸çµæ´»ï¼Œå¤šå¤šæ€è€ƒï¼Œç›¸ä¿¡ä½ è¿˜å¯ä»¥å‘ç° Immer æ›´å¤šå…¶ä»–çš„å¦™ç”¨ï¼\n\n\n## å‚è€ƒæ–‡æ¡£\n\n- [å®˜æ–¹æ–‡æ¡£](https://github.com/mweststrate/immer)\n- [Introducing Immer: Immutability the easy way](https://hackernoon.com/introducing-immer-immutability-the-easy-way-9d73d8f71cb3)\n","tags":["è§£å†³æ–¹æ¡ˆ"],"categories":["å·¥å…·"]},{"title":"é¼ æ ‡ç‚¹å‡»çˆ±å¿ƒå’Œå¯Œå¼ºç‰¹æ•ˆ","url":"%2F2020%2F%E9%BC%A0%E6%A0%87%E7%82%B9%E5%87%BB%E7%88%B1%E5%BF%83%E5%92%8C%E5%AF%8C%E5%BC%BA%E7%89%B9%E6%95%88.html","content":"\n## çˆ±å¿ƒ\n```js\n!function(e, t, a) {\n    function r() {\n        for (var e = 0; e < s.length; e++) s[e].alpha <= 0 ? (t.body.removeChild(s[e].el), s.splice(e, 1)) : (s[e].y--, s[e].scale += .004, s[e].alpha -= .013, s[e].el.style.cssText = \"left:\" + s[e].x + \"px;top:\" + s[e].y + \"px;opacity:\" + s[e].alpha + \";transform:scale(\" + s[e].scale + \",\" + s[e].scale + \") rotate(45deg);background:\" + s[e].color + \";z-index:99999\");\n        requestAnimationFrame(r)\n    }\n    function n() {\n        var t = \"function\" == typeof e.onclick && e.onclick;\n        e.onclick = function(e) {\n            t && t(),\n            o(e)\n        }\n    }\n    function o(e) {\n        var a = t.createElement(\"div\");\n        a.className = \"heart\",\n        s.push({\n            el: a,\n            x: e.clientX - 5,\n            y: e.clientY - 5,\n            scale: 1,\n            alpha: 1,\n            color: c()\n        }),\n        t.body.appendChild(a)\n    }\n    function i(e) {\n        var a = t.createElement(\"style\");\n        a.type = \"text/css\";\n        try {\n            a.appendChild(t.createTextNode(e))\n        } catch(t) {\n            a.styleSheet.cssText = e\n        }\n        t.getElementsByTagName(\"head\")[0].appendChild(a)\n    }\n    function c() {\n        return \"rgb(\" + ~~ (255 * Math.random()) + \",\" + ~~ (255 * Math.random()) + \",\" + ~~ (255 * Math.random()) + \")\"\n    }\n    var s = [];\n    e.requestAnimationFrame = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame ||\n    function(e) {\n        setTimeout(e, 1e3 / 60)\n    },\n    i(\".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}\"),\n    n(),\n    r()\n} (window, document);\n```\n---\n<!--more-->\n\n## å¯Œå¼º\n```js\n//å®šä¹‰è·å–è¯è¯­ä¸‹æ ‡\nvar a_idx = 0;\njQuery(document).ready(function($) {\n    //ç‚¹å‡»bodyæ—¶è§¦å‘äº‹ä»¶\n    $(\"body\").click(function(e) {\n    //éœ€è¦æ˜¾ç¤ºçš„è¯è¯­\n    var a = new Array(\"å¯Œå¼º\",\"æ°‘ä¸»\", \"æ–‡æ˜\", \"å’Œè°\",\"è‡ªç”±\", \"å¹³ç­‰\", \"å…¬æ­£\",\"æ³•æ²»\", \"çˆ±å›½\", \"æ•¬ä¸š\",\"è¯šä¿¡\", \"å‹å–„\");\n    //è®¾ç½®è¯è¯­ç»™spanæ ‡ç­¾\n    var $i = $(\"<span/>\").text(a[a_idx]);\n    //ä¸‹æ ‡ç­‰äºåŸæ¥ä¸‹æ ‡+1  ä½™ è¯è¯­æ€»æ•°\n    a_idx = (a_idx + 1)% a.length;\n    //è·å–é¼ æ ‡æŒ‡é’ˆçš„ä½ç½®ï¼Œåˆ†åˆ«ç›¸å¯¹äºæ–‡æ¡£çš„å·¦å’Œå³è¾¹ç¼˜ã€‚\n    //è·å–xå’Œyçš„æŒ‡é’ˆåæ ‡\n    var x = e.pageX, y = e.pageY;\n    //åœ¨é¼ æ ‡çš„æŒ‡é’ˆçš„ä½ç½®ç»™$iå®šä¹‰çš„spanæ ‡ç­¾æ·»åŠ cssæ ·å¼\n    $i.css({\"z-index\" : 999999999999999999999999999999999999999999999999999999999999999999999,\n        \"top\" : y - 20,\n        \"left\" : x,\n        \"position\" : \"absolute\",\n        \"font-weight\" : \"bold\",\n        \"color\" : \"#ff6651\"\n        });\n    //åœ¨bodyæ·»åŠ è¿™ä¸ªæ ‡ç­¾\n    $(\"body\").append($i);\n        //animate() æ–¹æ³•æ‰§è¡Œ CSS å±æ€§é›†çš„è‡ªå®šä¹‰åŠ¨ç”»ã€‚\n        //è¯¥æ–¹æ³•é€šè¿‡CSSæ ·å¼å°†å…ƒç´ ä»ä¸€ä¸ªçŠ¶æ€æ”¹å˜ä¸ºå¦ä¸€ä¸ªçŠ¶æ€ã€‚CSSå±æ€§å€¼æ˜¯é€æ¸æ”¹å˜çš„ï¼Œè¿™æ ·å°±å¯ä»¥åˆ›å»ºåŠ¨ç”»æ•ˆæœã€‚\n        //è¯¦æƒ…è¯·çœ‹http://www.w3school.com.cn/jquery/effect_animate.asp\n        $i.animate({\n        //å°†åŸæ¥çš„ä½ç½®å‘ä¸Šç§»åŠ¨180\n            \"top\" : y - 180,\n                \"opacity\" : 0\n         //1500åŠ¨ç”»çš„é€Ÿåº¦\n        }, 1500, function() {\n        //æ—¶é—´åˆ°äº†è‡ªåŠ¨åˆ é™¤\n            $i.remove();\n        });\n    });\n});\n```\n\n## åŠ å…¥æ”¶è—\n```js\n// <a href=\"javascript:void(0)\" onclick=\"shoucang(document.title,window.location)\">åŠ å…¥æ”¶è—</a>\n\nfunction shoucang(sTitle, sURL) {\n    try {\n        window.external.addFavorite(sURL, sTitle);\n    }\n    catch (e) {\n        try {\n            window.sidebar.addPanel(sTitle, sURL, \"\");\n        }\n        catch (e) {\n            alert(\"åŠ å…¥æ”¶è—å¤±è´¥ï¼Œè¯·ä½¿ç”¨Ctrl+Dè¿›è¡Œæ·»åŠ \");\n        }\n    }\n}\n```\n\n## è®¾ä¸ºé¦–é¡µ\n```js\n// <a href=\"javascript:void(0)\" onclick=\"SetHome(this,window.location)\">è®¾ä¸ºé¦–é¡µ</a>\n\nfunction SetHome(obj, vrl) {\n    try {\n        obj.style.behavior = 'url(#default#homepage)'; obj.setHomePage(vrl);\n    }\n    catch (e) {\n        if (window.netscape) {\n            try {\n                netscape.security.PrivilegeManager.enablePrivilege(\"UniversalXPConnect\");\n            }\n            catch (e) {\n                alert(\"æ­¤æ“ä½œè¢«æµè§ˆå™¨æ‹’ç»ï¼\\nè¯·åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥â€œabout:configâ€å¹¶å›è½¦\\nç„¶åå°† [signed.applets.codebase_principal_support]çš„å€¼è®¾ç½®ä¸º'true',åŒå‡»å³å¯ã€‚\");\n            }\n            var prefs = Components.classes['@mozilla.org/preferences-service;1'].getService(Components.interfaces.nsIPrefBranch);\n            prefs.setCharPref('browser.startup.homepage', vrl);\n        } else {\n            alert(\"æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒï¼Œè¯·æŒ‰ç…§ä¸‹é¢æ­¥éª¤æ“ä½œï¼š1.æ‰“å¼€æµè§ˆå™¨è®¾ç½®ã€‚2.ç‚¹å‡»è®¾ç½®ç½‘é¡µã€‚3.è¾“å…¥ï¼š\" + vrl + \"ç‚¹å‡»ç¡®å®šã€‚\");\n        }\n    }\n}\n```\n\n## å›¾ç‰‡ä¸å­˜åœ¨æ˜¾ç¤ºé»˜è®¤å›¾ç‰‡\n- åˆ†æï¼šç‰¹åˆ«æ³¨æ„ onerrorï¼Œå½“å›¾ç‰‡ä¸å­˜åœ¨æ—¶ï¼Œå°†è§¦å‘ onerrorï¼Œè€Œ onerror ä¸­ä¸º img æŒ‡å®šä¸€ä¸ªé»˜è®¤å›¾ç‰‡ã€‚ä¹Ÿå°±æ˜¯è¯´å›¾ç‰‡å­˜åœ¨åˆ™æ˜¾ç¤º pic.gifï¼Œå›¾ç‰‡ä¸å­˜åœ¨å°†æ˜¾ç¤ºé»˜è®¤å›¾ç‰‡ã€‚\n\n- å­˜åœ¨çš„é—®é¢˜ï¼šå¦‚æœé»˜è®¤å›¾ç‰‡ä¹Ÿä¸å­˜åœ¨ï¼Œåˆ™ç»§ç»­è§¦å‘ onerrorï¼Œå¯¼è‡´å¾ªç¯ï¼Œæ•…å‡ºç°é”™è¯¯ã€‚å¦‚æœå›¾ç‰‡å­˜åœ¨ï¼Œä½†ç½‘ç»œå¾ˆä¸é€šç•…ï¼Œä¹Ÿå¯èƒ½è§¦å‘ onerrorã€‚\n```js\n<img src=\"abc.jpg\" Î¿nerrÎ¿r=\"nofind()\" />\n<script type=\"text/javascript\">\nfunction nofind(){\n  var img=event.srcElement;\n  img.src=\"def\"; //æ›¿æ¢çš„å›¾ç‰‡\n  img.Î¿nerrÎ¿r=null; //æ§åˆ¶ä¸è¦ä¸€ç›´è§¦å‘é”™è¯¯\n}\n</script>\n```\n","tags":["æºç "],"categories":["JS"]},{"title":"å®ç°compose","url":"%2F2020%2F%E5%AE%9E%E7%8E%B0compose.html","content":"\nå®ç°composeå‡½æ•°çš„äº”ç§æ€è·¯\n\n- é¢å‘è¿‡ç¨‹\n- å‡½æ•°ç»„åˆï¼ˆreduceï¼‰\n- å‡½æ•°äº¤ç»‡ï¼ˆAOPç¼–ç¨‹ï¼‰\n- Promiseï¼ˆsequenceï¼‰\n- Generatorï¼ˆyieldï¼‰\n\n---\n<!--more-->\n\n## ä»€ä¹ˆæ˜¯compose\n\ncomposeå°±æ˜¯æ‰§è¡Œä¸€ç³»åˆ—çš„ä»»åŠ¡ï¼ˆå‡½æ•°ï¼‰ï¼Œæ¯”å¦‚æœ‰ä»¥ä¸‹ä»»åŠ¡é˜Ÿåˆ—ï¼š\n```js\nlet tasks = [step1, step2, step3, step4]\n```\n\næ¯ä¸€ä¸ªstepéƒ½æ˜¯ä¸€ä¸ªæ­¥éª¤ï¼ŒæŒ‰ç…§æ­¥éª¤ä¸€æ­¥ä¸€æ­¥çš„æ‰§è¡Œåˆ°ç»“å°¾ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªcomposeã€‚\n\n- ç¬¬ä¸€ä¸ªå‡½æ•°æ˜¯å¤šå…ƒçš„ï¼ˆæ¥å—å¤šä¸ªå‚æ•°ï¼‰ï¼Œåé¢çš„å‡½æ•°éƒ½æ˜¯å•å…ƒçš„ï¼ˆæ¥å—ä¸€ä¸ªå‚æ•°ï¼‰\n- æ‰§è¡Œé¡ºåºçš„è‡ªå³å‘å·¦çš„\n- æ‰€æœ‰å‡½æ•°çš„æ‰§è¡Œéƒ½æ˜¯åŒæ­¥çš„ï¼ˆå¼‚æ­¥çš„åé¢æ–‡ç« ä¼šè®²åˆ°ï¼‰\n\nä¸¾ä¸ªä¾‹å­:\n```js\nlet init = (...args) => args.reduce((ele1, ele2) => ele1 + ele2, 0)\nlet step2 = (val) => val + 2\nlet step3 = (val) => val + 3\nlet step4 = (val) => val + 4\n\n// ç»„æˆä»»åŠ¡é˜Ÿåˆ—\nsteps = [step4, step3, step2, init]\n// ä½¿ç”¨composeç»„åˆè¿™ä¸ªé˜Ÿåˆ—å¹¶æ‰§è¡Œ\nlet composeFunc = compose(...steps)\nconsole.log(composeFunc(1, 2, 3))\n```\n\næ‰§è¡Œè¿‡ç¨‹\n> 6 -> 6 + 2 = 8 -> 8 + 3 = 11 -> 11 + 4 = 15\n\næ‰€ä»¥æµç¨‹å°±æ˜¯ä»initè‡ªå³åˆ°å·¦ä¾æ¬¡æ‰§è¡Œï¼Œä¸‹ä¸€ä¸ªä»»åŠ¡çš„å‚æ•°æ˜¯ä¸Šä¸€ä¸ªä»»åŠ¡çš„è¿”å›ç»“æœï¼Œå¹¶ä¸”ä»»åŠ¡éƒ½æ˜¯åŒæ­¥çš„ï¼Œè¿™æ ·å°±èƒ½ä¿è¯ä»»åŠ¡å¯ä»¥æŒ‰ç…§æœ‰åºçš„æ–¹å‘å’Œæœ‰åºçš„æ—¶é—´æ‰§è¡Œã€‚\n\n## å®ç°composeçš„äº”ç§æ€è·¯\n\n### é¢å‘è¿‡ç¨‹\n\nè¿™ä¸ªæ€è·¯å°±æ˜¯ä½¿ç”¨é€’å½’çš„è¿‡ç¨‹æ€æƒ³ï¼Œä¸æ–­çš„æ£€æµ‹é˜Ÿåˆ—ä¸­æ˜¯å¦è¿˜æœ‰ä»»åŠ¡ï¼Œå¦‚æœæœ‰ä»»åŠ¡å°±æ‰§è¡Œï¼Œå¹¶æŠŠæ‰§è¡Œç»“æœå¾€åä¼ é€’ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªå±€éƒ¨çš„æ€ç»´ï¼Œæ— æ³•é¢„çŸ¥ä»»åŠ¡ä½•æ—¶ç»“æŸã€‚ç›´è§‚ä¸Šæœ€å®¹æ˜“ç»“æŸå’Œç†è§£ã€‚\n\n```js\nconst compose = function(...args) {\n  let length = args.length\n  let count = length - 1\n  let result\n  return function f1 (...arg1) {\n    result = args[count].apply(this, arg1)\n    if (count <= 0) {\n      count = length - 1\n      return result\n    }\n    count--\n    return f1.call(null, result)\n  }\n}\n```\n\n### å‡½æ•°ç»„åˆ\nè¿™ä¸ªæ€è·¯æ˜¯ä¸€ç§å‡½æ•°ç»„åˆçš„æ€æƒ³ï¼Œå°†å‡½æ•°ä¸¤ä¸¤ç»„åˆï¼Œä¸æ–­çš„ç”Ÿæˆæ–°çš„å‡½æ•°ï¼Œç”Ÿæˆçš„æ–°å‡½æ•°æŒŸè£¹äº†å‡½æ•°æ‰§è¡Œçš„é€»è¾‘ä¿¡æ¯ï¼Œç„¶åå†ä¸¤ä¸¤ç»„åˆï¼Œä¸æ–­çš„ä¼ é€’ä¸‹å»ï¼Œè¿™ç§æ€è·¯å¯ä»¥æå‰éå†æ‰€æœ‰ä»»åŠ¡ï¼Œå°†ä»»åŠ¡ç»„åˆæˆä¸€ä¸ªå¯ä»¥å±•å¼€çš„ç»„åˆç»“æ„ï¼Œæœ€åæ‰§è¡Œçš„æ—¶å€™å°±åƒæ¨å¯¼å¤šç±³è¯ºéª¨ç‰Œä¸€æ ·ã€‚\n```js\n// ç»„åˆè¿‡ç¨‹\nf1 = (...arg) => step2.call(null, init.apply(null, arg))\nf2 = (...arg) => step3.call(null, f1.apply(null, arg))\nf3 = (...arg) => step4.call(null, f2.apply(null, arg))\n\n// å®ç°\nconst _pipe = (f, g) => (...arg) => g.call(null, f.apply(null, arg))\nconst compose = (...args) => args.reverse().reduce(_pipe, args.shift())\n```\n\n### å‡½æ•°äº¤ç»‡ï¼ˆAOPï¼‰\nè¿™ä¸ªå®ç°çš„çµæ„Ÿæ¥è‡ªjavascriptè®¾è®¡æ¨¡å¼ä¸­çš„é«˜é˜¶å‡½æ•°ï¼Œå› ä¸ºcomposeçš„ä»»åŠ¡åœ¨æœ¬è´¨ä¸Šå°±æ˜¯å‡½æ•°æ‰§è¡Œï¼Œå†åŠ ä¸Šé¡ºåºï¼Œæ‰€ä»¥å¯ä»¥æŠŠå®ç°é¡ºåºæ‰§è¡Œæ”¾åˆ°å‡½æ•°æœ¬èº«ï¼Œå¯¹å‡½æ•°çš„åŸå‹è¿›è¡Œæ–¹æ³•çš„ç»‘å®šã€‚æ–¹æ³•çš„ä½œç”¨å¯¹è±¡æ˜¯å‡½æ•°ï¼Œé¢å‘å¯¹è±¡å°è£…çš„æ•°æ®ï¼Œé¢å‘å‡½æ•°å°è£…çš„æ˜¯å‡½æ•°çš„è¡Œä¸ºã€‚\n\néœ€è¦å¯¹å‡½æ•°ç»‘å®šä¸¤ä¸ªè¡Œä¸º before å’Œ afterï¼Œbeforeæ‰§è¡Œå‡½æ•°å¤šå…ƒéƒ¨åˆ†ï¼ˆå¯åŠ¨ï¼‰ï¼Œafteræ‰§è¡Œå‡½æ•°å•å…ƒéƒ¨åˆ†ã€‚\n```js\nFunction.prototype.before = function(fn) {\n  const self = this\n  return function(...args) {\n    let result = fn.apply(null, args)\n    return self.call(null, result)\n  }\n}\n \nFunction.prototype.after = function(fn) {\n  const self = this\n  return function(...args) {\n    let result = self.apply(null, args)\n    return fn.call(null, result)\n  }\n}\n```\nè¿™é‡Œå¯¹å‡½æ•°è¿›è¡Œæ–¹æ³•çš„ç»‘å®šï¼Œè¿”å›çš„æ˜¯å¸¦ç€å‡½æ•°æ‰§è¡Œçš„è§„åˆ™çš„å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿™é‡Œæ˜¯æ¬¡åºçš„æ’åˆ—è§„åˆ™ï¼Œå¯¹è¿”å›çš„å‡½æ•°ä¾ç„¶å¯ä»¥è¿›è¡Œé“¾å¼è°ƒç”¨ã€‚\n```js\n// composeå®ç°\nconst compose = function(...args) {\n  let before = args.pop()\n  let start = args.pop()\n  if (args.length) {\n    return args.reduce(function(f1, f2) {\n      return f1.after(f2)\n    }, start.before(before))\n  }\n  return start.before(before)\n}\n\n// æ‰§è¡Œè¿‡ç¨‹\nconst compose = function(...args) {\n  let before = args.pop()\n  let start = args.pop()\n  if (args.length) {\n    return args.reduce(function(f1, f2) {\n      return f1.after(f2)\n    }, start.before(before))\n  }\n  return start.before(before)\n}\n```\n\n### Promise\nES6å¼•å…¥äº†Promiseï¼ŒPromiseå¯ä»¥æŒ‡å®šä¸€ä¸ªsequenceï¼Œæ¥è§„å®šä¸€ä¸ªæ‰§è¡Œthençš„è¿‡ç¨‹ï¼Œthenå‡½æ•°ä¼šç­‰åˆ°æ‰§è¡Œå®Œæˆåï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªthençš„å¤„ç†ã€‚å¯åŠ¨sequenceå¯ä»¥ä½¿ç”¨Promise.resolve()è¿™ä¸ªå‡½æ•°ã€‚æ„å»ºsequenceå¯ä»¥ä½¿ç”¨reduceã€‚\n```js\nconst compose = function(...args) {\n  let init = args.pop()\n  return function(...arg) {\n    return args.reverse().reduce(function(sequence, func) {\n      return sequence.then(function(result) {\n        return func.call(null, result)\n      })\n    }, Promise.resolve(init.apply(null, arg)))\n  }\n}\n```\n\n### Generator\nGeneratorä¸»è¦ä½¿ç”¨yieldæ¥æ„å»ºåç¨‹ï¼Œé‡‡ç”¨ä¸­æ–­ï¼Œå¤„ç†ï¼Œå†ä¸­æ–­çš„æµç¨‹ã€‚å¯ä»¥äº‹å…ˆè§„å®šå¥½åç¨‹çš„æ‰§è¡Œé¡ºåºï¼Œç„¶åå†ä¸‹æ¬¡å¤„ç†çš„æ—¶å€™è¿›è¡Œå‚æ•°ï¼ˆç»“æœï¼‰äº¤æ¥ï¼Œæœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºæ‰§è¡Œçš„ç¬¬ä¸€ä¸ªnextæ˜¯ä¸èƒ½ä¼ é€’å‚æ•°çš„ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨ï¼Œå†ç©ºè€—ä¸€ä¸ªnextï¼Œåé¢çš„å°±å¯ä»¥åŒæ­¥æ‰§è¡Œäº†ã€‚\n```js\n// æ„å»ºgenerator\nfunction* iterateSteps(steps) {\n  let n\n  for (let i = 0; i < steps.length; i++) {\n    if (n) {\n      n = yield steps[i].call(null, n)\n    } else {\n      n = yield\n    }\n  }\n}\n\n// å®ç°compose\nconst compose = function(...steps) {\n  let g = iterateSteps(steps)\n  return function(...args) {\n    let val = steps.pop().apply(null, args)\n    // è¿™é‡Œæ˜¯ç¬¬ä¸€ä¸ªå€¼\n    console.log(val)\n    // å› ä¸ºæ— æ³•ä¼ å‚æ•° æ‰€ä»¥æ— æ‰€è°“æ‰§è¡Œ å°±æ˜¯ç©ºè€—ä¸€ä¸ªyield\n    g.next()\n    return steps.reverse.reduce((val, val1) => g.next(val).value, val)\n  }\n}\n```\n","tags":["è®¾è®¡æ¨¡å¼"],"categories":["JS"]},{"title":"é¢è¯•ç»éªŒåˆ†äº«","url":"%2F2020%2F%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB.html","content":"\n## é¢è¯•æµç¨‹\n\nå¤§å…¬å¸é¢è¯•æ— è®ºæ˜¯å®ä¹ è¿˜æ˜¯æ ¡æ‹›ï¼Œæ™®éå­˜åœ¨é¢è¯•è½®æ¬¡å¤šï¼Œé¢è¯•å‘¨æœŸé•¿çš„ç‰¹ç‚¹ï¼Œå°±æ‹¿è…¾è®¯æ¥è¯´ï¼Œå¦‚æœä½ æƒ³æˆä¸ºæš‘æœŸå®ä¹ ç”Ÿï¼Œå¤§æ¦‚éœ€è¦å››åˆ°äº”è½®é¢è¯•ï¼Œ3-4 è½®æŠ€æœ¯é¢+ä¸€è½® HR é¢è¯•ï¼Œæ¯æ¬¡é¢è¯•æ—¶é—´å¤§æ¦‚åœ¨ 0.5-1 å°æ—¶ä¹‹é—´ï¼Œæ¨èå¯¹è‡ªå·±èƒ½åŠ›æ²¡æœ‰æŠŠæ¡æˆ–è€…ç¼ºå°‘å·¥ä½œç»éªŒçš„åŒå­¦å°½å¯èƒ½åœ¨å¤§ä¸‰ä¸‹å­¦æœŸæ‰¾æ‰¾å®ä¹ ï¼Œå»è‡ªå·±æƒ³å»çš„å…¬å¸å®ä¹ ï¼Œå› ä¸ºå¤§ä¸‰çš„æš‘æœŸå®ä¹ æ—¢å¯ä»¥ä¸°å¯Œä½ çš„å±¥å†ï¼Œå¹¶ä¸”å®ä¹ æœŸé—´å¥½å¥½è¡¨ç°éƒ½æ˜¯å¯ä»¥ç›¸å¯¹å®¹æ˜“åœ°é€šè¿‡è½¬æ­£ï¼Œæ‹¿åˆ°æ ¡æ‹› offerã€‚\n\nåœ¨ç”³è¯·å®ä¹ æˆ–è€…æ ¡æ‹› offer çš„æ—¶å€™ï¼Œå°½å¯èƒ½å¤šæ‰¾äººå¸®å¿™å†…æ¨ï¼Œå› ä¸ºå¤§å…¬å¸éƒ¨é—¨æ¯”è¾ƒå¤šï¼Œä½ å¦‚æœç›´æ¥ä»å®˜ç½‘ä¸Šç½‘ç”³çš„è¯ï¼Œç®€å†ä¸å®¹æ˜“è¢«äººæŸ¥çœ‹ï¼Œæ‰¾è®¤è¯†çš„å¸ˆå…„å¸ˆå§å¸®å¿™å†…æ¨çš„ä¼˜åŠ¿åœ¨äºï¼š\n\n1. èƒ½å¤Ÿæ›´æœ‰æ•ˆå¢åŠ ä½ çš„ç®€å†çš„æ›å…‰ï¼Œè®©éƒ¨é—¨ä¸»ç®¡èƒ½å¤Ÿç›´æ¥æŸ¥é˜…åˆ°ä½ çš„ç®€å†\n2. åŠ å¿«é¢è¯•è¿›åº¦ï¼Œè”ç³»å¸ˆå…„å¸ˆå§æå‰çŸ¥é“é¢è¯•ç»“æœ\n3. å†…æ¨æˆ–è€…ç½‘ç”³(å¯èƒ½æœ‰ç¬”è¯•)å®Œä¹‹åï¼Œå°±ç­‰å¾…é¢è¯•å®˜æ‰“ç”µè¯ç»™ä½ ï¼Œä¸€èˆ¬ä»–ä»¬ä¼šè·Ÿä½ é€šè¿‡ç”µè¯æˆ–è€…çŸ­ä¿¡ç¡®è®¤ç°åœ¨æ˜¯å¦æ–¹ä¾¿æˆ–è€…çº¦ä¸ªæ—¶é—´è¿›è¡Œé¢è¯•ï¼Œé¢è¯•çš„æ–¹å¼ä¹Ÿåˆ†ä¸ºç”µè¯é¢è¯•ï¼Œè§†é¢‘é¢è¯•ï¼Œç°åœºé¢è¯•ç­‰ç­‰ã€‚\n\n---\n<!--more-->\n\næ— è®ºæ˜¯å“ªç§ç±»å‹çš„é¢è¯•ï¼Œå†…å®¹å¤§è‡´ä¸Šéƒ½æ˜¯ä¸€è‡´çš„(é™¤äº†ç°åœºé¢è¯•å¯èƒ½è¦æ±‚ä½ æ‰‹å†™ä»£ç å¤–)ï¼Œæˆ‘å°†ä¸“ä¸šæŠ€èƒ½é¢è¯•åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š\n\n1. è‡ªæˆ‘ä»‹ç»\n2. è®¡ç®—æœºåŸºç¡€çŸ¥è¯†\n3. å‰ç«¯çŸ¥è¯†\n4. é¢è¯•è€…æé—®ç¯èŠ‚\n\n### è‡ªæˆ‘ä»‹ç»\né¦–å…ˆæ˜¯è‡ªæˆ‘ä»‹ç»ï¼Œé¢è¯•å‰æœ€å¥½èƒ½å¤Ÿå‡†å¤‡ä¸€æ®µä¸å°‘äº 30 ç§’çš„è‡ªæˆ‘ä»‹ç»å¹¶å¯¹ç€é•œå­åå¤ç»ƒä¹ ï¼Œå¯ä»¥ä»‹ç»ä»‹ç»ä½ çš„åå­—ï¼Œå­¦æ ¡ï¼Œä¸“ä¸šï¼Œå¯¹ä½ æŠ•é€’å²—ä½çš„ç†è§£ç­‰ç­‰ï¼Œåœ¨é¢è¯•è¿‡ç¨‹ä¸­å°½å¯èƒ½æµåˆ©åœ°å™è¿°ï¼Œè€Œä¸æ˜¯ä»‹ç»æ—¶ç£•ç£•ç¢°ç¢°ï¼Œç»™é¢è¯•å®˜ç•™ä¸‹ä¸å¥½çš„å°è±¡ã€‚\n\n### è®¡ç®—æœºåŸºç¡€çŸ¥è¯†\nç¬¬äºŒéƒ¨åˆ†æ˜¯è®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œå¯¹äºåº”å±Šç”Ÿæ¥è¯´ï¼Œé¢è¯•å®˜æ— éå–œæ¬¢è€ƒå¯Ÿè®¡ç®—æœºç½‘ç»œï¼Œæ“ä½œç³»ç»Ÿï¼Œæ•°æ®ç»“æ„ä¸ç®—æ³•è¿™ä¸‰å¤§ç±»ã€‚å½“ç„¶æ ¹æ®ä½ åº”è˜çš„å²—ä½æœ‰æ‰€ä¸åŒï¼Œå¦‚æœä½ æ˜¯åº”è˜ä¸€åå‰ç«¯å·¥ç¨‹å¸ˆï¼Œè€ƒå¯Ÿç½‘ç»œçš„çŸ¥è¯†ç›¸å¯¹è¾ƒå¤šï¼Œå¯¹äºæ“ä½œç³»ç»Ÿã€æ•°æ®ç»“æ„å’Œç®—æ³•çš„è€ƒå¯Ÿä¼šç›¸å¯¹è¾ƒå°‘ï¼Œå¦‚æœä½ æ˜¯åº”è˜ä¸€ä¸ªåç«¯å·¥ç¨‹å¸ˆçš„è¯ï¼Œé‚£ä¹ˆæ¶‰åŠåˆ°æ“ä½œç³»ç»Ÿçš„çŸ¥è¯†è‚¯å®šä¼šç›¸å¯¹æ›´å¤šã€‚åŒç†ç®—æ³•å·¥ç¨‹å¸ˆå°±ä¼šæ¶‰åŠåˆ°æ›´å¤šæ•°æ®ç»“æ„å’Œç®—æ³•çš„çŸ¥è¯†ã€‚\n\né¢è¯•ç½‘ç»œçŸ¥è¯†çš„è¯ï¼Œå¯ä»¥å¤šå‡†å¤‡ HTTP/TCP ç›¸å…³çš„çŸ¥è¯†ï¼Œæ¯”å¦‚æˆ‘å°±å¸¸è¢«é—®åˆ°ï¼š\n\n> HTTP çŠ¶æ€ç ï¼Œä»æµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªç½‘å€èƒŒåéƒ½ç»å†äº†ä»€ä¹ˆ\n> TCP ä¸ UDP çš„åŒºåˆ«ï¼Œä¸ºä»€ä¹ˆ TCP éœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹ç­‰ç­‰\n\n### å‰ç«¯çŸ¥è¯†\n\nç¬¬ä¸‰å¤§å—ä¹Ÿå°±æ˜¯ä½ åº”è˜çš„å²—ä½ç›¸å…³çš„çŸ¥è¯†å†…å®¹äº†ï¼Œæ¯”å¦‚æ‹¿å‰ç«¯æ¥è¯´ï¼Œä¸€èˆ¬å‰ç«¯çŸ¥è¯†å¯ä»¥åˆ†ä¸ºä¸‰å¤§å—ï¼šè¯­è¨€åŸºç¡€ï¼Œæ¡†æ¶ä»¥åŠå®è·µã€‚\n\nè¯­è¨€åŸºç¡€ä¸€èˆ¬ä¼šè€ƒå¯Ÿä½ å¯¹ JS è¯­è¨€æœ¬èº«çš„ç†è§£ï¼Œæ¯”å¦‚è¯´ï¼šé—­åŒ…ï¼Œç»§æ‰¿ï¼Œä½œç”¨åŸŸï¼Œthis ç”¨æ³•ï¼ŒES6 è¯­æ³•ç­‰ç­‰ï¼Œä¹Ÿä¼šé—®ä½ å…³äº HTML/CSS çš„åŸºç¡€çŸ¥è¯†ã€‚\n\næ¡†æ¶çš„è¯ä¸ä»…ä»…æ˜¯å±€é™äºè€ƒå¯Ÿå¯¹æ¡†æ¶çš„ç”¨æ³•ï¼Œä¸€èˆ¬æ˜¯ç»“åˆä½ çš„ç®€å†å†…å®¹æ¥è¿›è¡Œæé—®ï¼Œæ¯”å¦‚ä½ åœ¨ç®€å†ä¸Šå†™ä½ ç†Ÿæ‚‰ Reactï¼Œé¢è¯•å®˜å¯èƒ½å°±ä¼šé—®ä½  virtual-dom æ˜¯æ€ä¹ˆå®ç°çš„ï¼ŒRedux è®¾è®¡æ€æƒ³ç­‰ç­‰ï¼Œå¦‚æœä½ ç®€å†ä¸Šå†™ç†Ÿæ‚‰ Vueï¼Œé‚£å¯èƒ½å°±ä¼šé—®ä½ æ•°æ®åŒå‘ç»‘å®šæ˜¯æ€ä¹ˆå®ç°çš„ç­‰ç­‰ã€‚\n\nè¿˜æœ‰å°±æ˜¯ä½ çš„å®è·µéƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†é¢è¯•å®˜ä¼šç»“åˆä½ çš„ç®€å†æåˆ°çš„ä¸€äº›ç»å†ï¼Œæ¯”å¦‚ä½ æœ‰ä»€ä¹ˆå®ä¹ ç»å†é˜¿ï¼Œæˆ–è€…åœ¨å­¦æ ¡åšè¿‡ä»€ä¹ˆé¡¹ç›®æ¥è¿›è¡Œæé—®ã€‚å¯èƒ½ä¼šåƒè¿™æ ·é—®ä½ ï¼š\n\n> ä½ åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼ˆæˆ–è€…å®ä¹ ç»å†ï¼‰é‡åˆ°æœ€å¤§çš„æŒ‘æˆ˜(éš¾é¢˜)æ˜¯ä»€ä¹ˆï¼Œä½ æ€ä¹ˆè§£å†³çš„\n> ä½ åœ¨é¡¹ç›®å¼€å‘çš„è¿‡ç¨‹ä¸­è¿ç”¨äº†ä»€ä¹ˆæŠ€æœ¯ï¼Œä¸ºä»€ä¹ˆä¼šä½¿ç”¨åˆ°è¿™äº›æŠ€æœ¯ç­‰ç­‰\n\n### é¢è¯•è€…æé—®ç¯èŠ‚\nä¸€èˆ¬é¢è¯•ç»“æŸåé¢è¯•å®˜éƒ½ä¼šé—®ä½ ï¼Œè¿˜æœ‰ä»€ä¹ˆé—®é¢˜æƒ³é—®æˆ‘ï¼Œè¿™æ—¶å€™ä½ å¯ä»¥å°±ä½ æ„Ÿå…´è¶£çš„å†…å®¹è¿›è¡Œæé—®ï¼Œæ¯”å¦‚æˆ‘ä¸€èˆ¬å°±ä¼šé—®ä¸‹é¢ç±»å‹çš„é—®é¢˜ï¼š\n\n1. å¦‚æœæˆ‘æœ‰å¹¸è¢«å½•ç”¨äº†ï¼Œæˆ‘ä¼šä»äº‹ä»€ä¹ˆæ ·çš„å·¥ä½œå†…å®¹\n2. å›¢é˜Ÿç»„ç»‡ç»“æ„æ˜¯æ€ä¹ˆæ ·çš„ï¼Œä¸»è¦è´Ÿè´£ä»€ä¹ˆæ ·çš„äº§å“\n3. å·¥ä½œå¹³æ—¶åŠ ç­å¤šå—ï¼Œä¸€èˆ¬å‡ ç‚¹ä¸‹ç­\n4. å°±åˆšæ‰çš„é¢è¯•æ¥çœ‹ï¼Œä½ è§‰å¾—æˆ‘æœ‰ä»€ä¹ˆä¸è¶³ä¹‹å¤„\nè¿™å°±æ˜¯æ ‡å‡†çš„é¢è¯•è¿‡ç¨‹ï¼Œé¢è¯•ç»“æŸåå¦‚æœä½ é€šè¿‡é¢è¯•çš„è¯ï¼Œä¸€èˆ¬ä¸€å‘¨å†…ä¼šç»™ç­”å¤æˆ–è€…è¿›è¡Œä¸‹ä¸€è½®é¢è¯•ã€‚\n\næœ€åéœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œå…¬å¸é¢è¯•å‘¨æœŸä¸€èˆ¬éƒ½ä¼šæ¯”è¾ƒé•¿ï¼Œå¯èƒ½ä½ ä»äºŒæœˆåº•å¼€å§‹é¢è¯•ï¼Œåˆ°äº†å››æœˆä»½ä½ æ‰ä¼šæ”¶åˆ° offerï¼Œæ‰€ä»¥ä½ åº”è¯¥å¤šæŠ•æŠ•å‡ å®¶å…¬å¸ï¼Œä¸è¦åœ¨ä¸€æ£µæ ‘ä¸ŠåŠæ­»ï¼Œä¸è¦æŠ±ç€é xxx å…¬å¸ä¸å»çš„å¿ƒæ€ï¼Œå› ä¸ºé¢è¯•è¿™ç§ä¸œè¥¿å…¶å®æ˜¯å¾ˆç„å­¦çš„ï¼Œä¸ƒåˆ†å®åŠ›ï¼Œä¸‰åˆ†è¿æ°”ï¼Œå¯èƒ½ä½ è§‰å¾—è‰¯å¥½ï¼Œä½†æ˜¯é¢è¯•å®˜å´æŠŠä½  pass æ‰äº†ï¼Œæ‰€ä»¥æ”¾å¹³å¸¸å¿ƒï¼Œå¤šè¯•è¯•å‡ å®¶å…¬å¸ï¼Œè¯´ä¸å®šä¼šæœ‰æ„å¤–çš„æ”¶è·ã€‚\n\n\n## é¢è¯•å‡†å¤‡\nå‰é¢ä»‹ç»äº†é¢è¯•æµç¨‹ä¸­çš„ä¸€äº›æ³¨æ„äº‹é¡¹ï¼Œä¸‹é¢å°±æ¥è¯´è¯´å¦‚ä½•å»åšé¢è¯•å‰çš„å‡†å¤‡ã€‚æˆ‘å°†é¢è¯•å‡†å¤‡åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š\n1. å‡†å¤‡ç®€å†\n2. ä¸“ä¸šçŸ¥è¯†æ¢³ç†\n3. é¢è¯•ç»“æŸå\n\n### å‡†å¤‡ç®€å†\næˆ‘çœ‹å¾ˆå¤šäººå†™çš„ç®€å†ï¼Œå‘ç°ä»–ä»¬å†™çš„éƒ½å¾ˆå•°å—¦ï¼Œè®©äººä¸€çœ¼çœ‹è¿‡å»æŠ“ä¸ä½é‡ç‚¹ï¼Œæˆ‘å»ºè®®æœ€å¥½æŠŠç®€å†ç²¾ç®€ä¸€ä¸‹ï¼Œæ§åˆ¶åœ¨ 1-2 é¡µï¼Œå†™çš„ç»å†å’Œé¡¹ç›®è·Ÿä½ åº”è˜çš„å²—ä½æœ‰å¼ºç›¸å…³ï¼Œæ— å…³çš„ç»å†å°±ä¸è¦å†™äº†ï¼Œå†™äº†åè€Œæ˜¾å¾—å•°å—¦ã€‚\n\nå¦å¤–è¿˜æœ‰ä¸‰ç‚¹éœ€è¦æ³¨æ„ï¼š\n\n1. æè¿°ç»å†æˆ–è€…é¡¹ç›®çš„æ—¶å€™å°½å¯èƒ½æè¿°è·Ÿè‡ªå·±è´Ÿè´£çš„æ¨¡å—ï¼Œæ— å…³çš„å†…å®¹å°±ä¸è¦å†™äº†ï¼Œä¸ç„¶è¢«é—®åˆ°äº†å¯èƒ½ä¼šé—®æƒ¨ä½ \n2. å†™å®Œç®€å†çš„æ—¶å€™æœ€å¥½ä»¥ pdf çš„æ ¼å¼è¿›è¡Œå­˜å‚¨ï¼Œè¿™æ ·ä¿è¯é¢è¯•å®˜æ‰“å¼€çš„æ—¶å€™æ’ç‰ˆä¸ä¼šä¹±æ‰\n3. ç®€å†åç§°æœ€å¥½å†™æˆåƒ å§“å-åº”è˜å²—ä½-xxå¤§å­¦-xxä¸“ä¸š-æ‰‹æœºå·ï¼Œè¿™æ ·æ–¹ä¾¿ HR ä¿ç•™å­˜å‚¨ä½ çš„ç®€å†ï¼Œä¸è¦ç›´æ¥å–åä¸ºç®€å†å°±ç›´æ¥å‘ç»™ HR\n\nç®€å†æ˜¯ä½ è·å¾—é¢è¯•çš„ç¬¬ä¸€æ­¥ï¼Œç®€å†çš„å¥½åéœ€è¦è‡ªå·±ç”¨å¿ƒå‡†å¤‡ï¼Œå¸Œæœ›åŒå­¦ä»¬æå‰è®¤çœŸåœ°å‡†å¤‡å¥½ä¸€ä»½è§‰å¾—è®©è‡ªå·±æ»¡æ„çš„ç®€å†ï¼Œä»¥å…åˆ°æ—¶å€™å¤ªä»“ä¿ƒã€‚\n\n### ä¸“ä¸šçŸ¥è¯†æ¢³ç†\nè¿™éƒ¨åˆ†å†…å®¹è‚¯å®šæ˜¯éœ€è¦é€šè¿‡è‡ªå·±çš„ä¸æ–­ç§¯ç´¯çš„ï¼Œä¸å¯èƒ½è¯´ä½ çœ‹äº†ä¸¤å¤© JS è¯­æ³•å°±è·‘æ¥é¢è¯•ï¼Œå­¦äº†ä¸¤å¤© Java å°±æ¥é¢è¯•åç«¯å·¥ç¨‹å¸ˆã€‚\n\næˆ‘ä»¬ç»å¸¸ä¼šé€šè¿‡ç½‘ä¸Šæ–‡ç« å­¦ä¹ å†…å®¹ï¼Œæˆ‘çš„å»ºè®®ï¼šå–„äºä½¿ç”¨æµè§ˆå™¨çš„ä¹¦ç­¾å¸®åŠ©ä½ è‡ªå·±æ•´ä½“çŸ¥è¯†ã€‚\n\n1. æ¯”å¦‚è¯´ä½ ä»Šå¤©çœ‹åˆ°ä¸€ç¯‡æ–‡ç« ï¼Œä½†æ˜¯æ²¡æ—¶é—´çœ‹å®Œæ¶ˆåŒ–ï¼Œä½ å¯ä»¥æŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªä¹¦ç­¾(do it later)ä»¥å…ä¹‹åæ‰¾ä¸åˆ°ï¼Œç­‰è‡ªå·±æœ‰æ—¶é—´äº†å†å›è¿‡å¤´æ¥ç»§ç»­çœ‹\n2. å°†è‡ªå·±çœ‹è¿‡çš„ï¼Œè§‰å¾—ä¸é”™çš„æ–‡ç« è¿›è¡Œåˆ†ç±»æ•´ç†æ”¾åœ¨ä¹¦ç­¾ä¸­ï¼Œæ–¹ä¾¿ä»¥åé¢è¯•å‰å¯ä»¥å¤ä¹ \n\nç½‘è·¯ä¸Šå­¦ä¹ æŠ€æœ¯çš„é€”å¾„ä¹Ÿå¾ˆå¤šï¼š\n\n1. å¦‚æœæƒ³çœ‹åˆ«äººå†™çš„æ–‡ç« ï¼Œå¯ä»¥å¤šé€›é€›æ˜é‡‘ã€çŸ¥ä¹ä¸“æ ç­‰ç­‰\n2. å¦‚æœåƒé€šè¿‡çœ‹è§†é¢‘æ¥å­¦ä¹ çš„è¯ï¼Œå¯ä»¥é€šè¿‡æ…•è¯¾ç½‘å¹³å°ï¼Œä¸Šé¢æœ‰ä¸å°‘é«˜è´¨é‡è§†é¢‘å¯ä»¥å­¦ä¹ \n3. é‡åˆ°é—®é¢˜å–„ç”¨æœç´¢å¼•æ“ï¼ŒåŸºæœ¬ä¸Šä½ é‡åˆ°çš„é—®é¢˜éƒ½å¯ä»¥é€šè¿‡è°·æ­Œ/Stackoverflow ä¸Šå¾—åˆ°ç­”æ¡ˆ\n\næ¯ä¸ªå²—ä½éƒ½æœ‰è‡ªå·±ä¸åŒçš„çŸ¥è¯†ä½“ç³»ï¼Œåœ¨å…¶å®ƒé¢†åŸŸæˆ‘ä¹Ÿä¸æ˜¯ä¸“ä¸šçš„ï¼Œå°±ä¸ç­é—¨å¼„æ–§äº†ï¼Œæˆ‘å°±æ‹¿å‰ç«¯å·¥ç¨‹å¸ˆè§’åº¦æ¥çœ‹ï¼Œä½œä¸ºä¸€åå‰ç«¯å·¥ç¨‹å¸ˆï¼Œè‡³å°‘è¦å¯¹æ•´ä½“çŸ¥è¯†ä½“ç³»æœ‰è‡ªå·±çš„ç†è§£.\n\n### é¢è¯•ç»“æŸå\né¢è¯•å…¶å®å¾ˆå¤šæƒ…å†µä¸‹éƒ½æ˜¯å¾ˆç±»ä¼¼çš„ï¼Œæœ‰çš„æ—¶å€™ä¸€é¢å’ŒäºŒé¢çš„é¢è¯•å®˜éƒ½ä¼šé—®åˆ°ç›¸åŒçš„é—®é¢˜ï¼Œæ‰€ä»¥åœ¨é¢è¯•ç»“æŸå¯ä»¥æ€»ç»“æ€»ç»“åˆšæ‰é¢è¯•ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆç­”ä¸ä¸Šæ¥ï¼Œå¦‚æœæ˜¯ä¹‹å‰æ²¡å‡†å¤‡çš„çŸ¥è¯†ï¼Œå¯ä»¥å»å¤ä¹ å¤ä¹ ï¼Œè¿™æ ·ä¸‹æ¬¡å†ç¢°åˆ°ç±»ä¼¼çš„é¢˜ç›®ï¼Œä½ å°±å¯ä»¥å¯¹ç­”å¦‚æµäº†ã€‚\n\n## æœ€å\nç¥å„ä½åŒå­¦èƒ½å¤Ÿæ‰¾åˆ°è‡ªå·±æ»¡æ„çš„offerï¼\n","tags":["é¢è¯•"],"categories":["çŸ¥è¯†"]},{"title":"è§‚å¯Ÿè€…æ¨¡å¼VSå‘å¸ƒè®¢é˜…æ¨¡å¼","url":"%2F2020%2F%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8FVS%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F.html","content":"\n![subscribe](http://cdn.mydearest.cn/subscribe.png)\n\nä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼š\n\n- è§‚å¯Ÿè€…ä¸ç›®æ ‡ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰æ˜¯ç›´æ¥è¿›è¡Œäº¤äº’çš„ï¼ŒåŒ…æ‹¬è®¢é˜…å’Œè§¦å‘ã€‚\n- å‘å¸ƒè®¢é˜…æ¨¡å¼æ˜¯é€è¿‡ä¸€ä¸ªä¸­é—´è€…å½“è°ƒåº¦ä¸­å¿ƒï¼Œç›¸å…³çš„è®¢é˜…ä¸å‘å¸ƒéƒ½ç”±è°ƒåº¦ä¸­å¿ƒæ¥è¿›è¡Œåè°ƒã€‚ï¼ˆé€‚åˆæ›´å¤æ‚çš„åœºæ™¯ï¼‰\n\nä¸¤è€…çš„ä¼˜ç¼ºç‚¹ï¼š\n\n- è§‚å¯Ÿè€…æ¨¡å¼ï¼šä¼˜ç‚¹å°±æ˜¯ä¸€ä¸€å¯¹åº”ï¼Œæ¯”è¾ƒç›´è§‚æ˜äº†ï¼Œå ç”¨å†…å­˜èµ„æºå®¹æ˜“è¿›è¡Œå›æ”¶ã€‚ç¼ºç‚¹å°±æ˜¯ä¸¤è€…è€¦åˆã€‚\n- å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼šä¼˜ç‚¹å°±æ˜¯ä¸€æ–¹é¢å®ç°äº†å‘å¸ƒè€…ä¸è®¢é˜…è€…ä¹‹é—´çš„è§£è€¦ï¼Œä¸­é—´è€…å¯åœ¨ä¸¤è€…æ“ä½œä¹‹é—´è¿›è¡Œæ›´ç»†ç²’åº¦çš„æ§åˆ¶ã€‚å¦‚ï¼šæ¡ä»¶è¿‡æ»¤å‘å¸ƒï¼Œæƒé™æ§åˆ¶ç­‰ç­‰ã€‚ç¼ºç‚¹å°±æ˜¯æ•´ä¸€ä¸ªä¸­é—´è°ƒåº¦ä¼šè¶Šæ¥è¶Šåºå¤§ï¼Œéœ€è¦æ‰‹åŠ¨æ¸…é™¤é‡Œé¢çš„å‘å¸ƒå›è°ƒã€‚\n\nä¸¾ä¸ªæ —å­ï¼š\n\n- è§‚å¯Ÿè€…æ¨¡å¼ï¼šå½©ç¥¨ä¸­å¿ƒé‡Œï¼Œç®¡ç†å‘˜å……å½“ç›®æ ‡å¯¹è±¡ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰ï¼Œå½©æ°‘å……å½“è§‚å¯Ÿè€…ï¼Œå½“ç®¡ç†å‘˜è¯´å…¬å¸ƒä¸€ç­‰å¥–å·ç æ—¶ï¼Œå³ç»™å„ä¸ªè§‚å¯Ÿè€…å‘å¸ƒäº†æ¶ˆæ¯ï¼Œç„¶åå½©æ°‘ï¼ˆè§‚å¯Ÿè€…ï¼‰å°±æ”¶åˆ°å‘å¸ƒæ¶ˆæ¯ï¼Œè¿›è¡Œè‡ªå·±çš„åç»­æ“ä½œï¼ˆå…‘å¥–ï¼‰ã€‚\n\n- å‘å¸ƒè®¢é˜…æ¨¡å¼ï¼šæ¯å®¶æ¯æˆ·å‘ç‰›å¥¶è®¢è´­ä¸­å¿ƒè®¢è´­äº†ç‰›å¥¶ï¼Œä½†æ˜¯å„å®¶çš„ç‰›å¥¶å“ç‰Œä¸ä¸€æ ·ï¼Œæœ‰ç‡•å¡˜ã€è’™ç‰›ç­‰ç­‰ã€‚å½“ç‡•å¡˜ç‰›å¥¶æ¥è´§äº†ï¼Œè®¢é˜…ä¸­å¿ƒå°±ç»™è®¢è´­ç‡•å¡˜çš„å„å®¶å„æˆ·æ´¾å‘ç‡•å¡˜ç‰›å¥¶ã€‚åŒç†ï¼Œå½“è’™ç‰›åˆ°è´§æ—¶ï¼Œè®¢é˜…ä¸­å¿ƒå‘å¸ƒè’™ç‰›çš„ç‰›å¥¶ã€‚\n\n---\n<!--more-->\n\n## è§‚å¯Ÿè€…æ¨¡å¼å®ç°\n![observer](http://cdn.mydearest.cn/blog/images/observer.jpeg)\n\né¦–å…ˆç›®æ ‡å¯¹è±¡ï¼ˆè¢«è§‚å¯Ÿè€…ï¼‰ç§°ä¸º`Subject`ï¼Œæœ‰è‹¥å¹²ä¸ªè§‚å¯Ÿè€…`Observer`è¿›è¡Œè§‚å¯Ÿã€‚å½“`Subject`è¢«æŸäº›å¯¹åº”äº‹ä»¶é©±åŠ¨äº†ï¼Œåˆ™é€šçŸ¥ç›¸å¯¹åº”çš„è§‚å¯Ÿè€…ï¼Œè°ƒç”¨å…¶å›è°ƒæ“ä½œã€‚\n\nä»£ç å®ç°å¦‚ä¸‹ï¼š\n```js\n// è¢«è§‚å¯Ÿè€…\nclass Subject {\n    constructor () {\n        this.obs = [];\n    }\n    // æ·»åŠ è§‚å¯Ÿè€…\n    addObserver (ob) {\n        this.obs.push(ob);\n    }\n    // é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…\n    notify () {\n        this.obs.forEach(ob => {\n            ob.update();\n        });\n    }\n}\n\n// è§‚å¯Ÿè€…\nclass Observer{\n  update(){\n    console.log('update');\n  }\n}\n\n// æµ‹è¯•\nlet subject = new Subject();\nlet ob = new Observer();\n// ç›®æ ‡æ·»åŠ è§‚å¯Ÿè€…äº†\nsubject.addObserver(ob);\n// ç›®æ ‡å‘å¸ƒæ¶ˆæ¯è°ƒç”¨è§‚å¯Ÿè€…çš„æ›´æ–°æ–¹æ³•äº†\nsubject.notify();   //update\n```\n\n## å‘å¸ƒè®¢é˜…æ¨¡å¼å®ç°\né¦–å…ˆè¦æ„é€ ä¸€ä¸ªæ€»çº¿æ§åˆ¶ä¸­å¿ƒï¼Œè´Ÿè´£ä¸­é—´æ“ä½œï¼Œå®ç°ä»¥ä¸‹ä¸‰ä¸ªåŠŸèƒ½ï¼š\n\n- è®¢é˜…xxxæ¶ˆæ¯\n- å‘å¸ƒxxxæ¶ˆæ¯\n- å–æ¶ˆè®¢é˜…xxxæ¶ˆæ¯\n\nä»£ç å®ç°å¦‚ä¸‹ï¼š\n```js\nconst eventProxy = {\n  onList: {},\n\n  // è®¢é˜…\n  on: function (key, fn) {\n    if (!this.onList[key]) {\n      this.onList[key] = []\n    }\n    this.onList[key].push(fn)\n  },\n\n  // å–æ¶ˆè®¢é˜…\n  off: function(key, fn) {\n    if (!this.onList[key]) return false\n\n    let fnIndex = this.onList[key].indexOf(fn)\n    if (fnIndex === -1) return false\n    this.onList[key].splice(fnIndex, 1)\n    return true\n  },\n  \n  // å‘å¸ƒ\n  emit: function(...args) {\n    if (!args.length) return\n\t\n    // å¦‚æœæ²¡æœ‰ä»»ä½•è®¢é˜…åˆ™è¿”å›  \n    const key = args[0]\n    if (!this.onList[key] || !this.onList[key].length) return\n\t\n    // å‘å¸ƒå¯¹åº”çš„è®¢é˜…äº‹ä»¶\n    const subscriber = this.onList[key]\n    const newArgs = args.slice(1)\n    subscriber.forEach(cb => {\n      cb.apply(null, newArgs)\n    })\n  }\n}\n```\n","tags":["è®¾è®¡æ¨¡å¼"],"categories":["JS"]},{"title":"Shellå…¥é—¨æ•™ç¨‹","url":"%2F2020%2FShell%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B.html","content":"\n## è„šæœ¬è¿è¡Œ\nå»ºç«‹ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶demoï¼Œä»¥.shç»“å°¾çš„æˆ–è€…ä¸éœ€è¦åç¼€éƒ½å¯ä»¥ã€‚\n```shell\n#!/bin/bash\nNUM=10\nprintf \"è¾“å‡ºæ•°å­—$NUM\\n\"\necho $NUM\n```\n\né€šè¿‡shæˆ–è€…bashå‘½ä»¤è¿è¡Œè„šæœ¬ï¼Œsh scriptname è¿è¡Œä¸€ä¸ªBashè„šæœ¬å°†ä¼šç¦æ­¢æ‰€æœ‰Bashçš„æ‰©å±•ç‰¹æ€§ã€‚\n```shell\n# ä½ èƒ½å¤Ÿè¿è¡Œå®ƒç”¨å‘½ä»¤\nsh demo\n\n# å¦å¤–ä¹Ÿä¹Ÿå¯ä»¥ç”¨bashæ¥æ‰§è¡Œ\nbash demo\n```\n\nè„šæœ¬ä»¥\"#!\"è¡Œå¼€å¤´ï¼Œè¡Œå°†ä¼šå‘½ä»¤è§£é‡Šå™¨(shæˆ–æ˜¯bash)ã€‚`#!/bin/rm` å½“ä½ è¿è¡Œè¿™ä¸ªè„šæœ¬æ—¶ï¼Œé™¤äº†è¿™ä¸ªè„šæœ¬æ¶ˆå¤±äº†ä¹‹å¤–ï¼Œä½ ä¸ä¼šå‘ç°æ›´å¤šå…¶ä»–çš„ä¸œè¥¿ã€‚\n\n## æ³¨é‡Š\nä»¥#å¼€å¤´çš„è¡Œå°±æ˜¯æ³¨é‡Šï¼Œä¼šè¢«è§£é‡Šå™¨å¿½ç•¥ã€‚æ³¨é‡Šè¡Œå‰é¢ä¹Ÿå¯ä»¥æœ‰ç©ºç™½å­—ç¬¦ã€‚\n```shell\n# è¿™æ˜¯ä¸€ä¸ªæ³¨é‡Š\n```\n\n## å‘½ä»¤åˆ†éš”ç¬¦\nåˆ†å·;å‘½ä»¤åˆ†å‰²ç¬¦ï¼Œåˆ†å‰²ç¬¦å…è®¸åœ¨åŒä¸€è¡Œé‡Œæœ‰ä¸¤ä¸ªæˆ–æ›´å¤šçš„å‘½ä»¤ã€‚\n```shell\necho hello; echo there         # è¾“å‡º hello å’Œ there\nfilename='cosyer'               # å˜é‡æ–‡ä»¶å\nif [ -x \"$filename\" ]; then    # æ³¨æ„ï¼š\"if\" and \"then\"éœ€è¦åˆ†éš”ç¬¦\n  echo \"File $filename exists.\"; cp $filename $filename.bak\nelse\n  echo \"File $filename not found.\"; touch $filename\nfi; echo \"File test complete.\n```\n\n## ç»“æŸç¬¦\nåŒåˆ†å·;;ï¼Œcaseè¯­å¥åˆ†æ”¯çš„ç»“æŸç¬¦ã€‚\n```shell\nread Keypress\ncase \"$Keypress\" in\n  [[:lower:]]   ) echo \"Lowercase letter\";;\n  [[:upper:]]   ) echo \"Uppercase letter\";;\n  [0-9]         ) echo \"Digit\";;\n  *             ) echo \"Punctuation, whitespace, or other\";;\nesac      #  å…è®¸å­—ç¬¦ä¸²çš„èŒƒå›´å‡ºç°åœ¨[]ä¸­,\n          #+ æˆ–è€…POSIXé£æ ¼çš„[[ä¸­.\nexit 0\n```\n\n---\n<!--more-->\n\n## å¥å·/åœ†ç‚¹\nä½œä¸ºä¸€ä¸ªæ–‡ä»¶åçš„ç»„æˆéƒ¨åˆ†.ï¼Œå½“ç‚¹.ä»¥ä¸€ä¸ªæ–‡ä»¶åä¸ºå‰ç¼€æ—¶ï¼Œèµ·ä½œç”¨ä½¿è¯¥æ–‡ä»¶å˜æˆäº†éšè—æ–‡ä»¶ã€‚è¿™ç§éšè—æ–‡ä»¶lsä¸€èˆ¬æ˜¯ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥çš„ã€‚\n\nä½œä¸ºç›®å½•åæ—¶ï¼Œå•ä¸ªç‚¹ï¼ˆ.ï¼‰è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œä¸¤ä¸ªç‚¹(..)è¡¨ç¤ºä¸Šä¸€çº§ç›®å½•ï¼ˆæˆ–ç§°ä¸ºçˆ¶ç›®å½•ï¼‰ã€‚\n\nç‚¹(.)å­—ç¬¦åŒ¹é…ã€‚ä½œä¸ºæ­£åˆ™è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†,åŒ¹é…å­—ç¬¦æ—¶ï¼Œå•ç‚¹ï¼ˆ.ï¼‰è¡¨ç¤ºåŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚\n\n## å¼•å·\nå¼•å·ä¸€ä¸ªå¾ˆé‡è¦çš„ä½œç”¨æ˜¯ä¿æŠ¤å‘½ä»¤è¡Œä¸Šçš„ä¸€ä¸ªå‚æ•°ä¸è¢«shellè§£é‡Šï¼Œè€ŒæŠŠæ­¤å‚æ•°ä¼ é€’ç»™è¦æ‰§è¡Œçš„ç¨‹åºæ¥å¤„ç†å®ƒã€‚\n```shell\necho \"$(ls -al)\"\n```\n\n### å•å¼•å·\n```shell\nstr='this is a string'\n```\nå•å¼•å·é‡Œçš„ä»»ä½•å­—ç¬¦éƒ½ä¼šåŸæ ·è¾“å‡ºï¼Œå•å¼•å·å­—ç¬¦ä¸²ä¸­çš„å˜é‡æ˜¯æ— æ•ˆçš„ã€‚å•å¼•å·å­—ä¸²ä¸­ä¸èƒ½å‡ºç°å•å¼•å·ï¼ˆå¯¹å•å¼•å·ä½¿ç”¨è½¬ä¹‰ç¬¦åä¹Ÿä¸è¡Œï¼‰ã€‚\n\n### åŒå¼•å·\n```shell\nyour_name='cosyer'\nstr=\"Hello, I know your are \\\"$your_name\\\"! \\n\"\n```\nåŒå¼•å·é‡Œå¯ä»¥æœ‰å˜é‡ï¼ŒåŒå¼•å·é‡Œå¯ä»¥å‡ºç°è½¬ä¹‰å­—ç¬¦ã€‚\n\n## å‘½ä»¤æ›¿æ¢\nå‘½ä»¤æ›¿æ¢\"`\"ï¼Œå°†ä¼šé‡æ–°åˆ†é…ä¸€ä¸ªå‘½ä»¤ç”šè‡³æ˜¯å¤šä¸ªå‘½ä»¤çš„è¾“å‡ºï¼›å®ƒä¼šå°†å‘½ä»¤çš„è¾“å‡ºå¦‚å®åœ°æ·»åŠ åˆ°å¦ä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­ã€‚\n```shell\nscript_name=`basename $0`\necho \"The name of this script is $script_name.\"\n\ntextfile_listing=`ls *`\n# å˜é‡ä¸­åŒ…å«äº†å½“å‰å·¥ä½œç›®å½•ä¸‹æ‰€æœ‰çš„*æ–‡ä»¶\necho $textfile_listing\n```\n\n## æ“ä½œç¬¦\n\n### èµ‹å€¼\nå˜é‡èµ‹å€¼ï¼Œåˆå§‹åŒ–æˆ–æ”¹å˜ä¸€ä¸ªå˜é‡çš„å€¼ï¼Œé€šç”¨çš„å˜é‡èµ‹å€¼æ“ä½œç¬¦ï¼Œå¯ä»¥ç”¨äºæ•°å€¼å’Œå­—ç¬¦ä¸²çš„èµ‹å€¼\n```shell\nvar=27\ncategory=minerals  # \"=\"å­—ç¬¦åé¢ä¸èƒ½åŠ ç©ºç™½å­—ç¬¦.\n\n# = ç”¨äºæµ‹è¯•æ“ä½œç¬¦\nif [ \"$string1\" = \"$string2\" ]\n# if [ \"X$string1\" = \"X$string2\" ] ä¼šæ›´å®‰å…¨,\n# å®ƒä¸ºäº†é˜²æ­¢å…¶ä¸­æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²ä¸ºç©ºæ—¶äº§ç”Ÿé”™è¯¯ä¿¡æ¯.\n# (å¢åŠ çš„\"X\"å­—ç¬¦å¯ä»¥äº’ç›¸æŠµæ¶ˆ.) \nthen\n   command\nfi\n```\n\n### è®¡ç®—æ“ä½œç¬¦\n| æ“ä½œç¬¦ | æè¿° | æ“ä½œç¬¦ | æè¿° | æ“ä½œç¬¦ | æè¿° |\n| ---- | ---- | ---- | ---- |---- | ---- |\n| `+` | åŠ  | `/` | é™¤ | `**` | æ±‚å¹‚ |\n| `-` | å‡ | `*` | ä¹˜ | `%` | æ±‚æ¨¡ |\n\n```shell\n# Bashåœ¨ç‰ˆæœ¬2.02å¼•å…¥äº†\"**\"æ±‚å¹‚æ“ä½œç¬¦.\nlet \"z=5**3\"\necho \"z = $z\"   # z = 125\n\n# æ±‚æ¨¡ï¼ˆå®ƒè¿”å›æ•´æ•°æ•´é™¤ä¸€ä¸ªæ•°åçš„ä½™æ•°ï¼‰\nlet \"y=5 % 3\"\necho \"y = $y\"   # y = 2\n```\n\n| æ“ä½œç¬¦ | æè¿° | \n| ---- | ---- | \n| `+=` | åŠ ç­‰(plus-equal) æŠŠåŸå˜é‡å€¼å¢åŠ ä¸€ä¸ªå¸¸é‡å¹¶é‡æ–°èµ‹å€¼ç»™å˜é‡ |\n| `-=` | å‡ç­‰(minus-equal) æŠŠåŸå˜é‡å€¼å‡å°‘ä¸€ä¸ªå¸¸é‡å¹¶é‡æ–°èµ‹å€¼ç»™å˜é‡ |\n| `*=` | ä¹˜ç­‰(times-equal) æŠŠåŸå˜é‡å€¼ä¹˜ä¸Šä¸€ä¸ªå¸¸é‡å¹¶é‡æ–°èµ‹å€¼ç»™å˜é‡ |\n| `/=` | é™¤ç­‰(slash-equal) æŠŠåŸå˜é‡å€¼é™¤ä»¥ä¸€ä¸ªå¸¸é‡å¹¶é‡æ–°èµ‹å€¼ç»™å˜é‡ |\n| `%=` | æ¨¡ç­‰(mod-equal) æŠŠåŸå˜é‡å€¼é™¤ä»¥ä¸€ä¸ªå¸¸é‡æ•´é™¤ï¼ˆå³å–æ¨¡ï¼‰å¹¶é‡æ–°èµ‹ä½™æ•°çš„å€¼ç»™å˜é‡ |\n\n```shell\nlet \"var += 5\" # ä¼šä½¿å˜é‡varå€¼åŠ äº†5å¹¶æŠŠå€¼èµ‹ç»™var.\nlet \"var *= 4\" # ä½¿å˜é‡varçš„å€¼ä¹˜ä¸Š4å¹¶æŠŠå€¼èµ‹ç»™var.\n```\n\n### ä½æ“ä½œç¬¦\nä½æ“ä½œç¬¦å¾ˆå°‘åœ¨è„šæœ¬ä¸­ä½¿ç”¨ã€‚ä»–ä»¬ä¸»è¦ç”¨äºæ“ä½œå’Œæµ‹è¯•ä»ç«¯å£æˆ–socketsä¸­è¯»åˆ°çš„æ•°æ®ã€‚â€œä½è¿ç®—â€æ›´å¤šåœ°ç”¨äºç¼–è¯‘å‹çš„è¯­è¨€ï¼Œæ¯”å¦‚è¯´Cå’ŒC++ï¼Œå®ƒä»¬è¿è¡Œèµ·æ¥å¿«åœ°åƒé£ã€‚\n\n| æ“ä½œç¬¦ | æè¿° | æ“ä½œç¬¦ | æè¿° |\n| ---- | ---- | ---- | ---- |\n| `<<` | ä½å·¦ç§»ï¼ˆæ¯ç§»ä¸€ä½ç›¸å½“ä¹˜ä»¥2ï¼‰ | `|` | ä½æˆ– |\n| `<<=` | ä½å·¦ç§»èµ‹å€¼ | `|=` | ä½æˆ–èµ‹å€¼ |\n| `>>` | ä½å³ç§»ï¼ˆæ¯ç§»ä¸€ä½ç›¸å½“é™¤ä»¥2ï¼‰ | `~` | ä½å |\n| `>>=` | \"ä½å³ç§»èµ‹å€¼\"ï¼ˆå’Œ<<=ç›¸åï¼‰ | `!` | ä½é |\n| `&` | ä½ä¸ | `^` | ä½æˆ– |\n| `&=` | ä½äºèµ‹å€¼ | `^=` | ä½æˆ–èµ‹å€¼ |\n\n\n```shell\n# <<=\n# \"ä½å·¦ç§»èµ‹å€¼\"\nlet \"var <<= 2\" ç»“æœä½¿varçš„äºŒè¿›åˆ¶å€¼å·¦ç§»äº†äºŒä½ï¼ˆç›¸å½“äºä¹˜ä»¥4ï¼‰\n```\n\n### é€»è¾‘æ“ä½œç¬¦\n\né€»è¾‘ä¸`&&`\n\n```shell\nif [ $condition1 ] && [ $condition2 ]\n# ç­‰åŒäº:  if [ $condition1 -a $condition2 ]\n# å¦‚æœcondition1å’Œcondition2éƒ½ä¸ºçœŸåˆ™è¿”å›çœŸ...\nfi;\n\nif [[ $condition1 && $condition2 ]]    # Also works.\n# æ³¨æ„&&æ“ä½œä¸èƒ½åœ¨[ ... ]ç»“æ„ä¸­ä½¿ç”¨.\nfi;\n```\n\né€»è¾‘æˆ–`||`\n\n```shell\nif [ $condition1 ] || [ $condition2 ]\n# ç­‰åŒäº:  if [ $condition1 -o $condition2 ]\n# å¦‚æœcondition1å’Œcondition2æœ‰ä¸€ä¸ªä¸ºçœŸåˆ™è¿”å›çœŸ...\nfi;\nif [[ $condition1 || $condition2 ]]    # Also works.\n# æ³¨æ„||æ“ä½œä¸èƒ½åœ¨[ ... ]ç»“æ„ä¸­ä½¿ç”¨.\nfi;\n```\n\nä½¿ç”¨&&å’Œ||è¿›è¡Œæ··åˆæ¡ä»¶æµ‹è¯•ã€‚åœ¨ç®—æœ¯è®¡ç®—çš„ç¯å¢ƒä¸­ï¼Œ&&å’Œ||æ“ä½œç¬¦ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚\n\n```shell\necho $(( 1 && 2 )) $((3 && 0)) $((4 || 0)) $((0 || 0))\n# 1 0 1 0\n```\n\n### é€—å·æ“ä½œç¬¦\n\né€—å·`,`æ“ä½œç¬¦è¿æ¥ä¸¤ä¸ªæˆ–æ›´å¤šçš„ç®—æœ¯æ“ä½œã€‚æ‰€æœ‰çš„æ“ä½œéƒ½è¢«æ±‚å€¼(å¯èƒ½ä¼šæœ‰å‰¯ä½œç”¨)ï¼Œä½†åªè¿”å›æœ€åä¸€ä¸ªæ“ä½œçš„ç»“æ„ã€‚\n\n```shell\nlet \"t1 = ((5 + 3, 7 - 1, 15 - 4))\"\necho \"t1 = $t1\"               # t1 = 11\n\nlet \"t2 = ((a = 9, 15 / 3))\"  # åˆå§‹åŒ–\"a\"å¹¶æ±‚\"t2\"çš„å€¼.\necho \"t2 = $t2    a = $a\"     # t2 = 5    a = 9\n```\n\n## å˜é‡\n\nå˜é‡ï¼Œæ˜¯è„šæœ¬ç¼–ç¨‹ä¸­çš„å¦‚ä½•è¿›è¡Œæ•°æ®è¡¨ç°çš„åŠæ³•ã€‚å®ƒä»¬å¯ä»¥åœ¨ç®—æœ¯è®¡ç®—ä¸­ä½œä¸ºæ“ä½œæ•°ï¼Œåœ¨ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨è¾¾å¼ä¸­ä½œä¸ºç¬¦å·è¡¨è¾¾æŠ½è±¡çš„æ„ä¹‰æˆ–æ˜¯å…¶ä»–çš„å…¶å®ƒæ„ä¹‰ã€‚å˜é‡æ˜¯è¡¨ç¤ºè®¡ç®—æœºå†…å­˜ä¸­ä¿å­˜ä¸€ç§æ•°æ®éœ€è¦å çš„ä¸€ä¸ªä½ç½®æˆ–ä¸€ç»„çš„ä½ç½®çš„æ ‡è¯†ã€‚\n\n### å˜é‡å€¼\n\nå¦‚æœvariable1æ˜¯ä¸€ä¸ªå˜é‡çš„åå­—ï¼Œé‚£ä¹ˆ$variable1å°±æ˜¯å¼•ç”¨è¿™ä¸ªå˜é‡çš„å€¼â€•â€•å³è¿™ä¸ªå˜é‡å®ƒåŒ…å«çš„æ•°æ®ã€‚\n\n```shell\nt1=12\necho $t1\n```\n\nä¸€ä¸ªæœªåˆå§‹åŒ–çš„å˜é‡æœ‰ä¸€ä¸ªâ€nullâ€å€¼â€•â€•è¡¨ç¤ºä»æ²¡æœ‰è¢«èµ‹å€¼è¿‡ï¼ˆæ³¨æ„nullå€¼ä¸ç­‰äºé›¶ï¼‰ã€‚åœ¨ä¸€ä¸ªå˜é‡ä»æœªèµ‹å€¼ä¹‹å‰å°±ä½¿ç”¨å®ƒé€šå¸¸ä¼šå¼•èµ·é—®é¢˜ã€‚ç„¶è€Œï¼Œä»ç„¶æœ‰å¯èƒ½åœ¨æ‰§è¡Œç®—æœ¯è®¡ç®—æ—¶ä½¿ç”¨ä¸€ä¸ªæœªåˆå§‹åŒ–çš„å˜é‡ã€‚\n\n```shell\necho \"$uninitialized\"      # (blank line)\nlet \"uninitialized += 5\"   # Add 5 to it.\necho \"$uninitialized\"      # 5\n\n#  ç»“è®º:\n#  ä¸€ä¸ªæœªåˆå§‹åŒ–çš„å˜é‡æ²¡æœ‰å€¼ï¼Œ\n#  ä½†æ˜¯ä¼¼ä¹å®ƒåœ¨ç®—æœ¯è®¡ç®—ä¸­çš„å€¼æ˜¯é›¶ã€‚\n#  è¿™ä¸ªæ— æ³•è¯å®ï¼ˆä¹Ÿå¯èƒ½æ˜¯ä¸å¯ç§»æ¤ï¼‰çš„è¡Œä¸ºã€‚\n```\n\n### å®šä¹‰å˜é‡\n\n```shell\n# å˜é‡åä¸åŠ ç¾å…ƒç¬¦å·\nyour_var=\"elaine\"\n# é‡æ–°å®šä¹‰\nyour_var=\"newname\"\n```\n\n**æ³¨æ„âš ï¸**\n\n1. é¦–ä¸ªå­—ç¬¦å¿…é¡»ä¸ºå­—æ¯ï¼ˆa-zï¼ŒA-Zï¼‰ã€‚\n1. ä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ï¼Œç­‰å·å·¦å³ä¹Ÿä¸èƒ½æœ‰ç©ºæ ¼ã€‚\n1. ä¸èƒ½ä½¿ç”¨æ ‡ç‚¹ç¬¦å·ã€‚\n1. ä¸èƒ½ä½¿ç”¨bashé‡Œçš„å…³é”®å­—ï¼ˆå¯ç”¨helpå‘½ä»¤æŸ¥çœ‹ä¿ç•™å…³é”®å­—ï¼‰ã€‚\n\n### åªè¯»å˜é‡\n\n```shell\n#!/bin/bash\ngithub=\"https://jaywcjlove.github.io\"\nreadonly github\ngithub=\"https://www.github.com\"\n\n# è¿è¡Œè„šæœ¬ï¼Œç»“æœå¦‚ä¸‹ï¼š\n/bin/sh: NAME: This variable is read only.\n```\n\n### ä½¿ç”¨å˜é‡\n\n```shell\nyour_var=\"github\"\necho $your_var\necho ${your_var}\necho \"your name is ${your_var}-l\"\n```\n\n### åˆ é™¤å˜é‡unset\n\nå˜é‡è¢«åˆ é™¤åä¸èƒ½å†æ¬¡ä½¿ç”¨ã€‚unset å‘½ä»¤ä¸èƒ½åˆ é™¤åªè¯»å˜é‡ã€‚\n\n```shell\nmyUrl=\"https://jaywcjlove.github.io\"\nunset myUrl\necho $myUrl\n```\n\n### å˜é‡ç±»å‹\n\nä¸åŒä¸è®¸å¤šå…¶ä»–çš„ç¼–ç¨‹è¯­è¨€ï¼ŒBashä¸ä»¥\"ç±»å‹\"æ¥åŒºåˆ†å˜é‡ã€‚æœ¬è´¨ä¸Šæ¥è¯´ï¼ŒBashå˜é‡æ˜¯å­—ç¬¦ä¸²ï¼Œä½†æ˜¯æ ¹æ®ç¯å¢ƒçš„ä¸åŒï¼ŒBashå…è®¸å˜é‡æœ‰æ•´æ•°è®¡ç®—å’Œæ¯”è¾ƒã€‚å…¶ä¸­çš„å†³å®šå› ç´ æ˜¯å˜é‡çš„å€¼æ˜¯ä¸æ˜¯åªå«æœ‰æ•°å­—ã€‚\n\n1. **å±€éƒ¨å˜é‡** å±€éƒ¨å˜é‡åœ¨è„šæœ¬æˆ–å‘½ä»¤ä¸­å®šä¹‰ï¼Œä»…åœ¨å½“å‰shellå®ä¾‹ä¸­æœ‰æ•ˆï¼Œå…¶ä»–shellå¯åŠ¨çš„ç¨‹åºä¸èƒ½è®¿é—®å±€éƒ¨å˜é‡ã€‚\n2. **ç¯å¢ƒå˜é‡** æ‰€æœ‰çš„ç¨‹åºï¼ŒåŒ…æ‹¬shellå¯åŠ¨çš„ç¨‹åºï¼Œéƒ½èƒ½è®¿é—®ç¯å¢ƒå˜é‡ï¼Œæœ‰äº›ç¨‹åºéœ€è¦ç¯å¢ƒå˜é‡æ¥ä¿è¯å…¶æ­£å¸¸è¿è¡Œã€‚å¿…è¦çš„æ—¶å€™shellè„šæœ¬ä¹Ÿå¯ä»¥å®šä¹‰ç¯å¢ƒå˜é‡ã€‚\n3. **shellå˜é‡** shellå˜é‡æ˜¯ç”±shellç¨‹åºè®¾ç½®çš„ç‰¹æ®Šå˜é‡ã€‚shellå˜é‡ä¸­æœ‰ä¸€éƒ¨åˆ†æ˜¯ç¯å¢ƒå˜é‡ï¼Œæœ‰ä¸€éƒ¨åˆ†æ˜¯å±€éƒ¨å˜é‡ï¼Œè¿™äº›å˜é‡ä¿è¯äº†shellçš„æ­£å¸¸è¿è¡Œ\n\n### å†…éƒ¨å˜é‡\n\n| å†…éƒ¨å˜é‡ | è¯´æ˜ |\n| ---- | ---- |\n| $BASH | BashäºŒè¿›åˆ¶ç¨‹åºæ–‡ä»¶çš„è·¯å¾„ |\n| $BASH_ENV | è¯¥ç¯å¢ƒå˜é‡ä¿å­˜ä¸€ä¸ªBashå¯åŠ¨æ–‡ä»¶è·¯å¾„ï¼Œå½“å¯åŠ¨ä¸€ä¸ªè„šæœ¬ç¨‹åºæ—¶ä¼šå»è¯»è¯¥ç¯å¢ƒå˜é‡æŒ‡å®šçš„æ–‡ä»¶ã€‚ |\n| $BASH_SUBSHELL | ä¸€ä¸ªæŒ‡ç¤ºå­shell(subshell)ç­‰çº§çš„å˜é‡ã€‚å®ƒæ˜¯Bashç‰ˆæœ¬3æ–°åŠ å…¥çš„ã€‚ |\n| $BASH_VERSINFO[n] | è¿™ä¸ªæ•°ç»„å«æœ‰6ä¸ªå…ƒç´ ï¼ŒæŒ‡ç¤ºäº†å®‰è£…çš„Bashç‰ˆæœ¬çš„ä¿¡æ¯ã€‚å®ƒå’Œ$BASH_VERSIONç›¸ä¼¼ï¼Œä½†å®ƒä»¬è¿˜æ˜¯æœ‰ä¸€äº›å°å°çš„ä¸åŒã€‚|\n| $BASH_VERSION | å®‰è£…åœ¨ç³»ç»Ÿé‡Œçš„Bashç‰ˆæœ¬ã€‚|\n| $DIRSTACK | åœ¨ç›®å½•å †æ ˆé‡Œé¢æœ€é¡¶ç«¯çš„å€¼(å®ƒå—pushdå’Œpopdçš„æ§åˆ¶) |\n| $EDITOR | ç”±è„šæœ¬è°ƒç”¨çš„é»˜è®¤çš„ç¼–è¾‘å™¨ï¼Œä¸€èˆ¬æ˜¯viæˆ–æ˜¯emacsã€‚ |\n| $EUID | æœ‰æ•ˆç”¨æˆ·ID | \n| $FUNCNAME | å½“å‰å‡½æ•°çš„åå­— |\n| $GLOBIGNORE | ç”±é€šé…ç¬¦(globbing)æ‰©å±•çš„ä¸€åˆ—æ–‡ä»¶åæ¨¡å¼ã€‚|\n| $GROUPS | ç›®å‰ç”¨æˆ·æ‰€å±çš„ç»„|\n| $HOME | ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œé€šå¸¸æ˜¯/home/username |\n| $HOSTNAME | åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶ç”±ä¸€ä¸ªåˆå§‹åŒ–è„šæœ¬ä¸­ç”¨hostnameå‘½ä»¤ç»™ç³»ç»ŸæŒ‡æ´¾ä¸€ä¸ªåå­—ã€‚ç„¶è€Œï¼Œgethostname()å‡½æ•°èƒ½è®¾ç½®Bashå†…éƒ¨å˜é‡E$HOSTNAMEã€‚|\n| $HOSTTYPE | æœºå™¨ç±»å‹ï¼Œåƒ$MACHTYPEä¸€æ ·æ ‡è¯†ç³»ç»Ÿç¡¬ä»¶ã€‚|\n| $IFS | å†…éƒ¨å­—æ®µåˆ†éš”ç¬¦ |\n| $IGNOREEOF | å¿½ç•¥EOFï¼šåœ¨é€€å‡ºæ§åˆ¶å°å‰æœ‰å¤šå°‘æ–‡ä»¶ç»“å°¾æ ‡è¯†ï¼ˆend-of-files,control-Dï¼‰ä¼šè¢«shellå¿½ç•¥ã€‚|\n| $LC_COLLATE | å®ƒå¸¸å¸¸åœ¨.bashrcæˆ–/etc/profileæ–‡ä»¶é‡Œè¢«è®¾ç½®ï¼Œå®ƒæ§åˆ¶æ–‡ä»¶åæ‰©å±•å’Œæ¨¡å¼åŒ¹é…çš„å±•å¼€é¡ºåºã€‚|\n| $LINENO | è¿™ä¸ªå˜é‡è¡¨ç¤ºåœ¨æœ¬shellè„šæœ¬ä¸­è¯¥å˜é‡å‡ºç°æ—¶æ‰€åœ¨çš„è¡Œæ•°ã€‚å®ƒåªåœ¨è„šæœ¬ä¸­å®ƒå‡ºç°æ—¶æœ‰æ„ä¹‰ï¼Œå®ƒä¸€èˆ¬å¯ç”¨äºè°ƒè¯•ã€‚|\n| $MACHTYPE | æœºå™¨ç±»å‹ï¼Œè¯†åˆ«ç³»ç»Ÿçš„ç¡¬ä»¶ç±»å‹ã€‚|\n| $OLDPWD | ä¸Šä¸€æ¬¡å·¥ä½œçš„ç›®å½•(\"OLD-print-working-directory\",ä½ ä¸Šä¸€æ¬¡è¿›å…¥å·¥ä½œçš„ç›®å½•)|\n| $TZ | æ—¶åŒº |\n| $MAILCHECK | æ¯éš”å¤šå°‘ç§’æ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„ä¿¡ä»¶ |\n| $OSTYPE | æ“ä½œç³»ç»Ÿç±»å‹ |\n| $MANPATH man | æŒ‡ä»¤çš„æœå¯»è·¯å¾„ |\n| $PATH | å¯æ‰§è¡Œç¨‹åºæ–‡ä»¶çš„æœç´¢è·¯å¾„ã€‚ä¸€èˆ¬æœ‰/usr/bin/, /usr/X11R6/bin/, /usr/local/bin,ç­‰ç­‰ã€‚|\n| $PIPESTATUS | æ­¤æ•°ç»„å˜é‡ä¿å­˜äº†æœ€åæ‰§è¡Œçš„å‰å°ç®¡é“çš„é€€å‡ºçŠ¶æ€ã€‚ç›¸å½“æœ‰è¶£çš„æ˜¯ï¼Œå®ƒä¸ä¸€å®šå’Œæœ€åæ‰§è¡Œçš„å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ä¸€æ ·ã€‚|\n| $PPID | ä¸€ä¸ªè¿›ç¨‹çš„$PPIDå˜é‡ä¿å­˜å®ƒçš„çˆ¶è¿›ç¨‹çš„è¿›ç¨‹ID(pid)ã€‚ç”¨è¿™ä¸ªå˜é‡å’Œpidofå‘½ä»¤æ¯”è¾ƒã€‚|\n| $PROMPT_COMMAND | è¿™ä¸ªå˜é‡åœ¨ä¸»æç¤ºç¬¦å‰($PS1æ˜¾ç¤ºä¹‹å‰)æ‰§è¡Œå®ƒçš„å€¼é‡Œä¿å­˜çš„å‘½ä»¤ã€‚|\n| $PS1 | è¿™æ˜¯ä¸»æç¤ºç¬¦ï¼ˆç¬¬ä¸€æç¤ºç¬¦ï¼‰ï¼Œå®ƒèƒ½åœ¨å‘½ä»¤è¡Œä¸Šçœ‹è§ã€‚|\n| $PS2 | å‰¯æç¤ºç¬¦ï¼ˆç¬¬äºŒæç¤ºç¬¦ï¼‰ï¼Œå®ƒåœ¨æœŸæœ›æœ‰é™„åŠ çš„è¾“å…¥æ—¶èƒ½çœ‹è§ã€‚å®ƒæ˜¾ç¤ºåƒ\">\"çš„æç¤ºã€‚|\n| $PS3 | ç¬¬ä¸‰æç¤ºç¬¦ã€‚å®ƒåœ¨ä¸€ä¸ªselectå¾ªç¯é‡Œæ˜¾ç¤º (å‚è€ƒä¾‹å­ 10-29)ã€‚|\n| $PS4 | ç¬¬å››æç¤ºç¬¦ï¼Œå®ƒåœ¨ç”¨-xé€‰é¡¹è°ƒç”¨ä¸€ä¸ªè„šæœ¬æ—¶çš„è¾“å‡ºçš„æ¯ä¸€è¡Œå¼€å¤´æ˜¾ç¤ºã€‚å®ƒé€šå¸¸æ˜¾ç¤ºåƒ\"+\"çš„æç¤ºã€‚|\n| $PWD | å·¥ä½œç›®å½•(å³ä½ ç°åœ¨æ‰€å¤„çš„ç›®å½•) ï¼Œå®ƒç±»ä¼¼äºå†…å»ºå‘½ä»¤pwdã€‚|\n| $REPLY | æ²¡æœ‰å˜é‡æä¾›ç»™readå‘½ä»¤æ—¶çš„é»˜è®¤å˜é‡ï¼è¿™ä¹Ÿé€‚ç”¨äºselectå‘½ä»¤çš„ç›®å½•ï¼Œä½†åªæ˜¯æä¾›è¢«é€‰æ‹©çš„å˜é‡é¡¹ç›®ç¼–å·è€Œä¸æ˜¯å˜é‡æœ¬èº«çš„å€¼ã€‚ |\n| $SECONDS | è„šæœ¬å·²è¿è¡Œçš„ç§’æ•°ã€‚|\n| $SHELLOPTS | å·²ç»æ¿€æ´»çš„shellé€‰é¡¹åˆ—è¡¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªåªè¯»å˜é‡ã€‚|\n| $SHLVL | SHELLçš„åµŒå¥—çº§åˆ«ï¼æŒ‡ç¤ºäº†Bashè¢«åµŒå¥—äº†å¤šæ·±ï¼åœ¨å‘½ä»¤è¡Œé‡Œï¼Œ$SHLVLæ˜¯1ï¼Œå› æ­¤åœ¨ä¸€ä¸ªè„šæœ¬é‡Œï¼Œå®ƒæ˜¯2 |\n| $TMOUT | å¦‚æœ$TMOUTç¯å¢ƒå˜é‡è¢«è®¾ä¸ºéé›¶å€¼æ—¶é—´å€¼timeï¼Œé‚£ä¹ˆç»è¿‡timeè¿™ä¹ˆé•¿çš„æ—¶é—´åï¼Œshellæç¤ºç¬¦ä¼šè¶…æ—¶ï¼è¿™å°†ä½¿æ­¤shellé€€å‡ºç™»å½• |\n| $UID | ç”¨æˆ·IDå·ï¼Œè¿™æ˜¯å½“å‰ç”¨æˆ·çš„ç”¨æˆ·æ ‡è¯†å·ï¼Œå®ƒåœ¨/etc/passwdæ–‡ä»¶ä¸­è®°å½•ã€‚|\n\n### ä½ç½®å‚æ•°\n\n| å‚æ•°å¤„ç† | è¯´æ˜ |\n| ---- | ---- |\n| `$#` | ä¼ é€’åˆ°è„šæœ¬çš„å‚æ•°ä¸ªæ•° |\n| `$*` | ä»¥ä¸€ä¸ªå•å­—ç¬¦ä¸²æ˜¾ç¤ºæ‰€æœ‰å‘è„šæœ¬ä¼ é€’çš„å‚æ•°ã€‚å¦‚\"âˆ—\"ç”¨ã€Œ\"ã€æ‹¬èµ·æ¥çš„æƒ…å†µã€ä»¥\"1 2â€¦n\"çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°ã€‚ |\n| `$$` | è„šæœ¬è¿è¡Œçš„å½“å‰è¿›ç¨‹IDå· |\n| `$!` | åå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹çš„IDå· |\n| `$@` | ä¸âˆ—ç›¸åŒï¼Œä½†æ˜¯ä½¿ç”¨æ—¶åŠ å¼•å·ï¼Œå¹¶åœ¨å¼•å·ä¸­è¿”å›æ¯ä¸ªå‚æ•°ã€‚å¦‚\"@\"ç”¨ã€Œ\"ã€æ‹¬èµ·æ¥çš„æƒ…å†µã€ä»¥\"1\"\"2\" â€¦ \"$n\" çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°ã€‚ |\n| `$-` | æ˜¾ç¤ºShellä½¿ç”¨çš„å½“å‰é€‰é¡¹ï¼Œä¸setå‘½ä»¤åŠŸèƒ½ç›¸åŒã€‚ |\n| `$?` | æ˜¾ç¤ºæœ€åå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ã€‚0è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œå…¶ä»–ä»»ä½•å€¼è¡¨æ˜æœ‰é”™è¯¯ã€‚ |\n\n### å­—ä¸²ç§»åŠ¨\n\n`${string#substring}`ä»$stringå·¦è¾¹å¼€å§‹ï¼Œå‰¥å»æœ€çŸ­åŒ¹é…$substringå­ä¸²ã€‚  \n`${string##substring}`ä»$stringå·¦è¾¹å¼€å§‹ï¼Œå‰¥å»æœ€é•¿åŒ¹é…$substringå­ä¸²ã€‚  \n`${string%substring}` ä»$stringç»“å°¾å¼€å§‹ï¼Œå‰¥å»æœ€çŸ­åŒ¹é…$substringå­ä¸²ã€‚  \n`${string%%substring}`ä»$stringç»“å°¾å¼€å§‹ï¼Œå‰¥å»æœ€é•¿åŒ¹é…$substringå­ä¸²ã€‚  \n\n```shell\nString=abcABC123ABCabc\n#       â”œ----â”˜     â”†\n#       â””----------â”˜\n\necho ${String#a*C}      # 123ABCabc\n# å‰¥å»åŒ¹é…'a'åˆ°'C'ä¹‹é—´æœ€çŸ­çš„å­—ç¬¦ä¸².\n\necho ${String##a*C}     # abc\n# å‰¥å»åŒ¹é…'a'åˆ°'C'ä¹‹é—´æœ€é•¿çš„å­—ç¬¦ä¸².\n\n\nString=abcABC123ABCabc\n#       â”†           ||\n#       â””------------â”˜\n\necho ${String%b*c}      # abcABC123ABCa\n# ä»$Stringåé¢å°¾éƒ¨å¼€å§‹ï¼Œå‰¥å»åŒ¹é…'a'åˆ°'C'ä¹‹é—´æœ€çŸ­çš„å­—ç¬¦ä¸².\n\necho ${String%%b*c}     # a\n# ä»$Stringåé¢å°¾éƒ¨å¼€å§‹ï¼Œå‰¥å»åŒ¹é…'a'åˆ°'C'ä¹‹é—´æœ€é•¿çš„å­—ç¬¦ä¸².\n```\n\n### ç”¨awkå¤„ç†å­—ç¬¦ä¸²\n\nBashè„šæœ¬å¯ä»¥è°ƒç”¨awkçš„å­—ç¬¦ä¸²æ“ä½œåŠŸèƒ½æ¥ä»£æ›¿å®ƒè‡ªå·±å†…å»ºçš„å­—ç¬¦ä¸²æ“ä½œç¬¦\n\n```shell\nString=23skidoo1\n#      012345678    Bash\n#      123456789    awk\n# æ³¨æ„ä¸Šé¢ä¸¤ä¸ªç¨‹åºå¯¹ç´¢å¼•çš„ä¸åŒå¤„ç†:\n# BashæŠŠå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„æ ‡å·ç§°ä¸º'0'ã€‚\n# AwkæŠŠå­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„æ ‡å·ç§°ä¸º'1'ã€‚\n\necho ${String:2:4} # position 3 (0-1-2), 4 characters long\n                                         # skid\n\n# åœ¨awkä¸­ä¸Bashçš„${string:pos:length}ç­‰åŒçš„æ˜¯substr(string,pos,length)ã€‚\necho | awk '{ \n  print substr(\"'\"${String}\"'\",3,4)      # skid\n}'\n#  ç”¨ä¸€ä¸ªç©ºçš„\"echo\"ç”±ç®¡é“ä¼ ä¸€ä¸ªç©ºçš„è¾“å…¥ç»™awk,\n#+ è¿™æ ·å°±ä¸å¿…æä¾›ä¸€ä¸ªæ–‡ä»¶åç»™awkã€‚\nexit 0\n```\n\n## for/while\n\né‡å¤ä¸€äº›å‘½ä»¤çš„ä»£ç å—,å¦‚æœæ¡ä»¶ä¸æ»¡è¶³å°±é€€å‡ºå¾ªç¯ã€‚\n\n### for\n\nåœ¨å¾ªç¯çš„æ¯æ¬¡æ‰§è¡Œä¸­ï¼Œargå°†é¡ºåºçš„å­˜å–listä¸­åˆ—å‡ºçš„å˜é‡ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªåŸºæœ¬çš„å¾ªç¯ç»“æ„ã€‚\n\n> for arg in [list]  \n> do   \n>    command(s)...   \n> done  \n\næ¯ä¸ª`[list]`ä¸­çš„å…ƒç´ éƒ½å¯èƒ½åŒ…å«å¤šä¸ªå‚æ•°ï¼Œåœ¨å¤„ç†å‚æ•°ç»„æ—¶ï¼Œè¿™æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œä½¿ç”¨setå‘½ä»¤æ¥å¼ºåˆ¶è§£ææ¯ä¸ª`[list]`ä¸­çš„å…ƒç´ ã€‚å¹¶ä¸”åˆ†é…æ¯ä¸ªè§£æå‡ºæ¥çš„éƒ¨åˆ†åˆ°ä¸€ä¸ªä½ç½®å‚æ•°ä¸­ã€‚\n\nå¾ªç¯çš„ä¸€ä¸ªç®€å•ä¾‹å­\n\n```shell\nfor planet in Mercury Venus Earth Mars Jupiter Saturn Uranus Neptune Pluto\ndo\n  echo $planet  # æ¯ä¸ªè¡Œæ˜Ÿè¢«å•ç‹¬æ‰“å°åœ¨ä¸€è¡Œä¸Š.\ndone\n```\n\n### while\n\nä¸€ä¸ªwhileå¾ªç¯å¯ä»¥æœ‰å¤šä¸ªåˆ¤æ–­æ¡ä»¶ï¼Œä½†æ˜¯åªæœ‰æœ€åä¸€ä¸ªæ‰èƒ½å†³å®šæ˜¯å¦é€€å‡ºå¾ªç¯ã€‚ç„¶è€Œè¿™éœ€è¦ä¸€ç§æœ‰ç‚¹ä¸åŒçš„å¾ªç¯è¯­æ³•ã€‚\n\n> while [condition]  \n> do   \n>   command...   \n> done  \n\n```shell\n# --------------------------\n# ç®€å•çš„whileå¾ªç¯\n# --------------------------\nvar0=0\nLIMIT=10\n\nwhile [ \"$var0\" -lt \"$LIMIT\" ]\ndo\n  echo -n \"$var0 \"        # -n å°†ä¼šé˜»æ­¢äº§ç”Ÿæ–°è¡Œã€‚\n  #             ^           ç©ºæ ¼,æ•°å­—ä¹‹é—´çš„åˆ†éš”ã€‚\n  var0=`expr $var0 + 1`   # var0=$(($var0+1))  ä¹Ÿå¯ä»¥ã€‚\n                          # var0=$((var0 + 1)) ä¹Ÿå¯ä»¥ã€‚\n                          # let \"var0 += 1\"    ä¹Ÿå¯ä»¥ã€‚\ndone                      # ä½¿ç”¨å…¶ä»–çš„æ–¹æ³•ä¹Ÿè¡Œã€‚\n# --------------------------\n# å¤šæ¡ä»¶çš„whileå¾ªç¯\n# --------------------------\nvar1=unset\nprevious=$var1\n\nwhile echo \"previous-variable = $previous\"\n      echo\n      previous=$var1\n      [ \"$var1\" != end ] # è®°å½•ä¹‹å‰çš„$var1.\n      # è¿™ä¸ª\"while\"å¾ªç¯ä¸­æœ‰4ä¸ªæ¡ä»¶, ä½†æ˜¯åªæœ‰æœ€åä¸€ä¸ªèƒ½æ§åˆ¶å¾ªç¯.\n      # é€€å‡ºçŠ¶æ€ç”±ç¬¬4ä¸ªæ¡ä»¶å†³å®š.\ndo\necho \"Input variable #1 (end to exit) \"\n  read var1\n  echo \"variable #1 = $var1\"\ndone \nexit 0\n```\n\n### until\n\nè¿™ä¸ªç»“æ„åœ¨å¾ªç¯çš„é¡¶éƒ¨åˆ¤æ–­æ¡ä»¶ï¼Œå¹¶ä¸”å¦‚æœæ¡ä»¶ä¸€ç›´ä¸ºfalseé‚£å°±ä¸€ç›´å¾ªç¯ä¸‹å»ã€‚(ä¸whileç›¸å)ã€‚\n\n> until [condition-is-true]  \n> do   \n>   command...   \n> done  \n\n**æ³¨æ„âš ï¸**\n\n1. untilå¾ªç¯çš„åˆ¤æ–­åœ¨å¾ªç¯çš„é¡¶éƒ¨ï¼Œè¿™ä¸æŸäº›ç¼–ç¨‹è¯­è¨€æ˜¯ä¸åŒçš„ã€‚\n2. ä¸forå¾ªç¯ä¸€æ ·ï¼Œå¦‚æœæƒ³æŠŠdoå’Œæ¡ä»¶æ”¾åœ¨ä¸€è¡Œé‡Œï¼Œå°±ä½¿ç”¨\";\"ã€‚\n\n> until [condition-is-true] ; do\n\n```shell\nEND_CONDITION=end\nuntil [ \"$var1\" = \"$END_CONDITION\" ]\n# åœ¨å¾ªç¯çš„é¡¶éƒ¨åˆ¤æ–­æ¡ä»¶.\ndo\n  echo \"Input variable #1 \"\n  echo \"($END_CONDITION to exit)\"\n  read var1\n  echo \"variable #1 = $var1\"\ndone\nexit 0\n```\n\n### åµŒå¥—å¾ªç¯\n\nåµŒå¥—å¾ªç¯å°±æ˜¯åœ¨ä¸€ä¸ªå¾ªç¯ä¸­è¿˜æœ‰ä¸€ä¸ªå¾ªç¯ï¼Œå†…éƒ¨å¾ªç¯åœ¨å¤–éƒ¨å¾ªç¯ä½“ä¸­ã€‚\n\n```shell\nouter=1             # è®¾ç½®å¤–éƒ¨å¾ªç¯è®¡æ•°.\n# å¼€å§‹å¤–éƒ¨å¾ªç¯.\nfor a in 1 2 3 4 5\ndo\n  echo \"Pass $outer in outer loop.\"\n  echo \"---------------------\"\n  inner=1           # é‡è®¾å†…éƒ¨å¾ªç¯çš„è®¡æ•°.\n\n  # ===============================================\n  # å¼€å§‹å†…éƒ¨å¾ªç¯.\n  for b in 1 2 3 4 5\n  do\n    echo \"Pass $inner in inner loop.\"\n    let \"inner+=1\"  # å¢åŠ å†…éƒ¨å¾ªç¯è®¡æ•°.\n  done\n  # å†…éƒ¨å¾ªç¯ç»“æŸ.\n  # ===============================================\n\n  let \"outer+=1\"    # å¢åŠ å¤–éƒ¨å¾ªç¯çš„è®¡æ•°.\n  echo              # æ¯æ¬¡å¤–éƒ¨å¾ªç¯ä¹‹é—´çš„é—´éš”.\ndone               \n# å¤–éƒ¨å¾ªç¯ç»“æŸ.\n\nexit 0\n```\n\n### å¾ªç¯æ§åˆ¶\n\nå½±å“å¾ªç¯è¡Œä¸ºçš„å‘½ä»¤ `break`ï¼Œ `continue`ï¼Œ breakå‘½ä»¤å°†ä¼šè·³å‡ºå¾ªç¯ï¼Œcontinueå‘½ä»¤å°†ä¼šè·³è¿‡æœ¬æ¬¡å¾ªç¯ä¸‹è¾¹çš„è¯­å¥ï¼Œç›´æ¥è¿›å…¥ä¸‹æ¬¡å¾ªç¯ã€‚\n\n**continueï¼š** continueå‘½ä»¤ä¸breakå‘½ä»¤ç±»ä¼¼ï¼Œåªæœ‰ä¸€ç‚¹å·®åˆ«ï¼Œå®ƒä¸ä¼šè·³å‡ºæ‰€æœ‰å¾ªç¯ï¼Œä»…ä»…è·³å‡ºå½“å‰å¾ªç¯ã€‚\n\n```shell\nLIMIT=19  # ä¸Šé™\n\necho \"Printing Numbers 1 through 20 (but not 3 and 11).\"\n\na=0\n\nwhile [ $a -le \"$LIMIT\" ]\ndo\n  a=$(($a+1))\n  if [ \"$a\" -eq 3 ] || [ \"$a\" -eq 11 ]  # Excludes 3 and 11.\n  then\n    continue      # è·³è¿‡æœ¬æ¬¡å¾ªç¯å‰©ä¸‹çš„è¯­å¥.\n  fi\n  echo -n \"$a \"   # åœ¨$aç­‰äº3å’Œ11çš„æ—¶å€™,è¿™å¥å°†ä¸ä¼šæ‰§è¡Œ.\ndone \n```\n\n**breakï¼š** breakå‘½ä»¤å…è®¸è·³å‡ºæ‰€æœ‰å¾ªç¯ï¼ˆç»ˆæ­¢æ‰§è¡Œåé¢çš„æ‰€æœ‰å¾ªç¯ï¼‰ã€‚\n\nä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œè„šæœ¬è¿›å…¥æ­»å¾ªç¯ç›´è‡³ç”¨æˆ·è¾“å…¥æ•°å­—å¤§äº5ã€‚è¦è·³å‡ºè¿™ä¸ªå¾ªç¯ï¼Œè¿”å›åˆ°shellæç¤ºç¬¦ä¸‹ï¼Œå°±è¦ä½¿ç”¨breakå‘½ä»¤ã€‚\n\n```shell\nwhile :\ndo\n    echo -n \"Input a number between 1 to 5: \"\n    read aNum\n    case $aNum in\n        1|2|3|4|5) echo \"Your number is $aNum!\"\n        ;;\n        *) echo \"You do not select a number between 1 to 5, game is over!\"\n            break\n        ;;\n    esac\ndone\n```\n\nâš ï¸ åœ¨åµŒå¥—å¾ªç¯ä¸­ï¼Œbreak å‘½ä»¤åé¢è¿˜å¯ä»¥è·Ÿä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè·³å‡ºç¬¬å‡ å±‚å¾ªç¯ã€‚ä¾‹å¦‚ï¼š\n\n```shell\nbreak n #è¡¨ç¤ºè·³å‡ºç¬¬ n å±‚å¾ªç¯ã€‚\n```\n\n## case/select\n\ncase/selectä¾é åœ¨ä»£ç å—çš„é¡¶éƒ¨æˆ–åº•éƒ¨çš„æ¡ä»¶åˆ¤æ–­æ¥å†³å®šç¨‹åºçš„åˆ†æ”¯ã€‚\n\n### case\n\ncaseå®ƒå…è®¸é€šè¿‡åˆ¤æ–­æ¥é€‰æ‹©ä»£ç å—ä¸­å¤šæ¡è·¯å¾„ä¸­çš„ä¸€æ¡ã€‚å®ƒçš„ä½œç”¨å’Œå¤šä¸ªif/then/elseè¯­å¥ç›¸åŒï¼Œæ˜¯å®ƒä»¬çš„ç®€åŒ–ç»“æ„ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ›å»ºç›®å½•ã€‚\n\n> case \"$variable\" in   \n>   ?\"$condition1\" )   \n>   ?command...   \n>   ?;;   \n>   ?\"$condition2\" )   \n>   ?command...   \n>   ?;;   \n> esac  \n\n- å¯¹å˜é‡ä½¿ç”¨`\"\"`å¹¶ä¸æ˜¯å¼ºåˆ¶çš„ï¼Œå› ä¸ºä¸ä¼šå‘ç”Ÿå•è¯åˆ†ç¦»ã€‚\n- æ¯å¥æµ‹è¯•è¡Œï¼Œéƒ½ä»¥å³å°æ‹¬å·`)`ç»“å°¾ã€‚\n- æ¯ä¸ªæ¡ä»¶å—éƒ½ä»¥ä¸¤ä¸ªåˆ†å·ç»“å°¾`;;`ã€‚\n- caseå—çš„ç»“æŸä»¥esac(caseçš„åå‘æ‹¼å†™)ç»“å°¾ã€‚\n\n```shell\nclear # æ¸…å±.\n\necho \"          æˆ‘çš„ç®€å†\"\necho \"          ------- \"\necho \"ä¸‹é¢é€šè¿‡shellè„šæœ¬è¾“å‡ºæˆ‘çš„ç®€å†\" \necho\necho \"[B]asicinfo, åŸºæœ¬ä¿¡æ¯\"\necho \"[E]ducation, æ•™è‚²ç»å†\"\necho \"[I]tskill, IT æŠ€èƒ½\"\necho\nread person\ncase \"$person\" in\n# æ³¨æ„,å˜é‡æ˜¯è¢«å¼•ç”¨çš„.\n  \"B\" | \"b\" )\n  # æ¥å—å¤§å†™æˆ–å°å†™è¾“å…¥.\n  echo\n  echo \"å°å¼Ÿè°ƒè°ƒ\"\n  echo \"æ‰‹  æœº : 136*****13\"\n  echo \"E-mail :wowohoo@qq.com\"\n  echo \"é¦–  é¡µ : http://JSLite.io\"\n  ;;\n  # æ³¨æ„,åœ¨æ¯ä¸ªé€‰é¡¹åè¾¹éƒ½éœ€è¦ä»¥;;ç»“å°¾.\n\n  \"E\" | \"e\" )\n  # æ¥å—å¤§å†™æˆ–å°å†™è¾“å…¥.\n  echo \"â–  2003å¹´9æœˆ åˆ° 2006å¹´8æœˆ\"\n  echo \"----------------------------\"\n  echo \"â€º å­¦æ ¡ : é‡é¸Ÿé«˜ä¸­\"\n  echo \"â€º ä¸“ä¸š : è‰ºæœ¯ç±»\"\n  echo \"â€º å­¦å† : é«˜ä¸­\"\n  ;;\n  # åè¾¹çš„[I]tskillçš„ä¿¡æ¯åœ¨è¿™é‡Œå°±çœç•¥äº†.\n          * )\n   # é»˜è®¤é€‰é¡¹.\n   # ç©ºè¾“å…¥(æ•²RETURN).\n   echo\n   echo \"æ²¡æœ‰æ•°æ®ï¼\"\n  ;;\nesac\nexit 0\n```\n\n\n### select\n\nselectç»“æ„æ˜¯å»ºç«‹èœå•çš„å¦ä¸€ç§å·¥å…·ï¼Œè¿™ç§ç»“æ„æ˜¯ä»kshä¸­å¼•å…¥çš„ã€‚\n\n> select variable [in list]  \n> do   \n>   ?command...   \n>   ?break   \n> done  \n\nç”¨selectæ¥åˆ›å»ºèœå•\n\n```shell\nPS3='é€‰æ‹©ä½ å–œæ¬¢çš„è”¬èœ: ' # è®¾ç½®æç¤ºç¬¦å­—ä¸².\n\necho\nselect vegetable in \"è±†\" \"èƒ¡èåœ\" \"åœŸè±†\" \"æ´‹è‘±\" \"èŠœèç”˜è“\"\ndo\n  echo\n  echo \"ä½ æœ€å–œæ¬¢çš„è”¬èœæ˜¯ $vegetable ã€‚\"\n  echo \"è®¨åŒ!\"\n  echo\n  break  # å¦‚æœè¿™é‡Œæ²¡æœ‰'break'ä¼šå‘ç”Ÿä»€ä¹ˆ?\ndone\nexit 0\n```\n\nå¦‚æœå¿½ç•¥äº†in liståˆ—è¡¨,é‚£ä¹ˆselectå‘½ä»¤å°†ä½¿ç”¨ä¼ é€’åˆ°è„šæœ¬çš„å‘½ä»¤è¡Œå‚æ•°($@),æˆ–è€…æ˜¯å‡½æ•°å‚æ•°(å½“selectæ˜¯åœ¨å‡½æ•°ä¸­æ—¶ï¼‰ä¸å¿½ç•¥in listæ—¶çš„forè¯­å¥ç›¸æ¯”è¾ƒï¼š**for variable [in list]**\n\n```shell\nPS3='é€‰æ‹©ä½ å–œæ¬¢çš„è”¬èœ:  '\necho\nchoice_of(){\n  select vegetable\n  # [in list] è¢«å¿½ç•¥, æ‰€ä»¥'select'ç”¨ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°.\n  do\n    echo\n    echo \"ä½ æœ€å–œæ¬¢çš„è”¬èœæ˜¯  $vegetableã€‚\"\n    echo \"è®¨åŒ!\"\n    echo\n    break\n  done\n}\n\nchoice_of \"è±†\" \"ç±³é¥­\" \"èƒ¡èåœ\" \"åœŸè±†\" \"æ´‹è‘±\" \"èŠœèç”˜è“\"\n#         $1   $2     $3      $4    $5     $6\n#         ä¼ é€’ç»™choice_of() å‡½æ•°çš„å‚æ•°\n\nexit 0\n```\n\n## å‡½æ•°\n\nå’Œ\"çœŸæ­£çš„\"ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼ŒBashä¹Ÿæœ‰å‡½æ•°ï¼Œè™½ç„¶åœ¨æŸäº›å®ç°æ–¹é¢ç¨æœ‰äº›é™åˆ¶ã€‚ ä¸€ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªå­ç¨‹åºï¼Œç”¨äºå®ç°ä¸€ä¸²æ“ä½œçš„ä»£ç å—(code block)ï¼Œå®ƒæ˜¯å®Œæˆç‰¹å®šä»»åŠ¡çš„\"é»‘ç›’å­\"ã€‚ å½“æœ‰é‡å¤ä»£ç ï¼Œå½“ä¸€ä¸ªä»»åŠ¡åªéœ€è¦å¾ˆå°‘çš„ä¿®æ”¹å°±è¢«é‡å¤å‡ æ¬¡æ‰§è¡Œæ—¶, è¿™æ—¶ä½ åº”è€ƒè™‘ä½¿ç”¨å‡½æ•°ã€‚\n\n```shell\nfunction function_name { \n  command... \n} \n# æˆ–\nfunction_name () { \n  command... \n} \n```\n\nåœ¨ä¸€ä¸ªå‡½æ•°å†…åµŒå¥—å¦ä¸€ä¸ªå‡½æ•°ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä¸å¸¸ç”¨ã€‚\n\n```shell\nf1 (){\n  f2 (){ # nested\n    echo \"Function \\\"f2\\\", inside \\\"f1\\\".\"\n  }\n}  \nf2  #  å¼•èµ·é”™è¯¯.\n    #  å°±æ˜¯ä½ å…ˆ\"declare -f f2\"äº†ä¹Ÿæ²¡ç”¨.\n\nf1  #  ä»€ä¹ˆä¹Ÿä¸åš,å› ä¸ºè°ƒç”¨\"f1\"ä¸ä¼šè‡ªåŠ¨è°ƒç”¨\"f2\".\nf2  #  ç°åœ¨,å¯ä»¥æ­£ç¡®çš„è°ƒç”¨\"f2\"äº†,\n    #+ å› ä¸ºä¹‹å‰è°ƒç”¨\"f1\"ä½¿\"f2\"åœ¨è„šæœ¬ä¸­å˜å¾—å¯è§äº†.\n```\n\n### å±€éƒ¨å˜é‡\n\nå¦‚æœå˜é‡ç”¨localæ¥å£°æ˜ï¼Œé‚£ä¹ˆå®ƒåªèƒ½åœ¨è¯¥å˜é‡å£°æ˜çš„ä»£ç å—(block of code)ä¸­å¯è§ï¼Œè¿™ä¸ªä»£ç å—å°±æ˜¯å±€éƒ¨\"èŒƒå›´\"ã€‚\n\n```shell\n# åœ¨å‡½æ•°å†…éƒ¨çš„å…¨å±€å’Œå±€éƒ¨å˜é‡.\nfunc ()\n{\n  local loc_var=23       # å£°æ˜ä¸ºå±€éƒ¨å˜é‡.\n  echo                   # ä½¿ç”¨å†…å»ºçš„'local'å…³é”®å­—.\n  echo \"\\\"loc_var\\\" in function = $loc_var\"\n  global_var=999         # æ²¡æœ‰å£°æ˜ä¸ºå±€éƒ¨å˜é‡.\n                         # é»˜è®¤ä¸ºå…¨å±€å˜é‡. \n  echo \"\\\"global_var\\\" in function = $global_var\"\n}  \n\nfunc\n# ç°åœ¨ï¼Œæ¥çœ‹çœ‹æ˜¯å¦å±€éƒ¨å˜é‡\"loc_var\"èƒ½å¦åœ¨å‡½æ•°å¤–é¢å¯è§.\necho \"\\\"loc_var\\\" outside function = $loc_var\"\n                                   # $loc_var outside function = \n                                   # ä¸, $loc_varä¸æ˜¯å…¨å±€å¯è®¿é—®çš„.\necho \"\\\"global_var\\\" outside function = $global_var\"\n                                      # $global_var outside function = 999\n                                      # $global_var æ˜¯å…¨å±€å¯è®¿é—®çš„.\nexit 0\n#  ä¸In contrast to Cç›¸æ¯”, åœ¨å‡½æ•°å†…å£°æ˜çš„Bashå˜é‡åªæœ‰åœ¨\n#+ å®ƒè¢«æ˜ç¡®å£°æ˜æˆå±€éƒ¨çš„å˜é‡æ—¶æ‰æ˜¯å±€éƒ¨çš„\n```\n\nâš ï¸ ï¼šåœ¨å‡½æ•°è°ƒç”¨ä¹‹å‰ï¼Œæ‰€æœ‰åœ¨å‡½æ•°å†…å£°æ˜ä¸”æ²¡æœ‰æ˜ç¡®å£°æ˜ä¸ºlocalçš„å˜é‡éƒ½å¯åœ¨å‡½æ•°ä½“å¤–å¯è§\n\n```shell\nfunc (){\n  global_var=37    #  åœ¨å‡½æ•°è¿˜æ²¡æœ‰è¢«è°ƒç”¨å‰\n                   #+ å˜é‡åªåœ¨å‡½æ•°å†…å¯è§. \n}                  #  å‡½æ•°ç»“æŸ\necho \"global_var = $global_var\"  # global_var =\n                                 #  å‡½æ•°\"func\"è¿˜æ²¡æœ‰è¢«è°ƒç”¨,\n                                 #+ æ‰€ä»¥å˜é‡$global_varè¿˜ä¸èƒ½è¢«è®¿é—®.\nfunc\necho \"global_var = $global_var\"  # global_var = 37\n                                 # å·²ç»åœ¨å‡½æ•°è°ƒç”¨æ—¶è®¾ç½®äº†å€¼.\n```\n\n### å‡½æ•°å‚æ•°\n\nåœ¨Shellä¸­ï¼Œè°ƒç”¨å‡½æ•°æ—¶å¯ä»¥å‘å…¶ä¼ é€’å‚æ•°ã€‚åœ¨å‡½æ•°ä½“å†…éƒ¨ï¼Œé€šè¿‡ `$n` çš„å½¢å¼æ¥è·å–å‚æ•°çš„å€¼ï¼Œä¾‹å¦‚ï¼Œ$1è¡¨ç¤ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ$2è¡¨ç¤ºç¬¬äºŒä¸ªå‚æ•°\n\n```shell\nfunWithParam(){\n    echo \"ç¬¬ä¸€ä¸ªå‚æ•°ä¸º $1 !\"\n    echo \"ç¬¬äºŒä¸ªå‚æ•°ä¸º $2 !\"\n    echo \"ç¬¬åä¸ªå‚æ•°ä¸º $10 !\"\n    echo \"ç¬¬åä¸ªå‚æ•°ä¸º ${10} !\"\n    echo \"ç¬¬åä¸€ä¸ªå‚æ•°ä¸º ${11} !\"\n    echo \"å‚æ•°æ€»æ•°æœ‰ $# ä¸ª!\"\n    echo \"ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²è¾“å‡ºæ‰€æœ‰å‚æ•° $* !\"\n}\nfunWithParam 1 2 3 4 5 6 7 8 9 34 73\n```\n\n### å‡½æ•°è¿”å›å€¼\n\nå®šä¹‰ä¸€ä¸ªå¸¦æœ‰returnè¯­å¥çš„å‡½æ•°ã€‚å‡½æ•°è¿”å›å€¼åœ¨è°ƒç”¨è¯¥å‡½æ•°åé€šè¿‡ `$?` æ¥è·å¾—ã€‚\n\n```shell\nfunWithReturn(){\n    echo \"è¿™ä¸ªå‡½æ•°ä¼šå¯¹è¾“å…¥çš„ä¸¤ä¸ªæ•°å­—è¿›è¡Œç›¸åŠ è¿ç®—...\"\n    echo \"è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—: \"\n    read aNum\n    echo \"è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—: \"\n    read anotherNum\n    echo \"ä¸¤ä¸ªæ•°å­—åˆ†åˆ«ä¸º $aNum å’Œ $anotherNum !\"\n    return $(($aNum+$anotherNum))\n}\nfunWithReturn\necho \"è¾“å…¥çš„ä¸¤ä¸ªæ•°å­—ä¹‹å’Œä¸º $? !\"\n\n# è¿™ä¸ªå‡½æ•°ä¼šå¯¹è¾“å…¥çš„ä¸¤ä¸ªæ•°å­—è¿›è¡Œç›¸åŠ è¿ç®—...\n# è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—: \n# 1\n# è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—: \n# 2\n# ä¸¤ä¸ªæ•°å­—åˆ†åˆ«ä¸º 1 å’Œ 2 !\n# è¾“å…¥çš„ä¸¤ä¸ªæ•°å­—ä¹‹å’Œä¸º 3 !\n```\n\nâš ï¸ `$10` ä¸èƒ½è·å–ç¬¬åä¸ªå‚æ•°ï¼Œè·å–ç¬¬åä¸ªå‚æ•°éœ€è¦${10}ã€‚å½“n>=10æ—¶ï¼Œéœ€è¦ä½¿ç”¨${n}æ¥è·å–å‚æ•°ã€‚\n\n**ç‰¹æ®Šå­—ç¬¦ç”¨æ¥å¤„ç†å‚æ•°ï¼š**\n\n| å‚æ•°å¤„ç† | è¯´æ˜ |\n| ---- | ----  |\n| $# | ä¼ é€’åˆ°è„šæœ¬çš„å‚æ•°ä¸ªæ•°  |\n| $* | ä»¥ä¸€ä¸ªå•å­—ç¬¦ä¸²æ˜¾ç¤ºæ‰€æœ‰å‘è„šæœ¬ä¼ é€’çš„å‚æ•°  |\n| $$ | è„šæœ¬è¿è¡Œçš„å½“å‰è¿›ç¨‹IDå·  |\n| $! | åå°è¿è¡Œçš„æœ€åä¸€ä¸ªè¿›ç¨‹çš„IDå·  |\n| $@ | ä¸$*ç›¸åŒï¼Œä½†æ˜¯ä½¿ç”¨æ—¶åŠ å¼•å·ï¼Œå¹¶åœ¨å¼•å·ä¸­è¿”å›æ¯ä¸ªå‚æ•°ã€‚  |\n| $- | æ˜¾ç¤ºShellä½¿ç”¨çš„å½“å‰é€‰é¡¹ï¼Œä¸setå‘½ä»¤åŠŸèƒ½ç›¸åŒã€‚  |\n| $? | æ˜¾ç¤ºæœ€åå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ã€‚0è¡¨ç¤ºæ²¡æœ‰é”™è¯¯ï¼Œå…¶ä»–ä»»ä½•å€¼è¡¨æ˜æœ‰é”™è¯¯ã€‚  |\n\n## æµ‹è¯•\n\n### æµ‹è¯•ç»“æ„\n\nä¸€ä¸ªif/thenç»“æ„èƒ½åŒ…å«åµŒå¥—çš„æ¯”è¾ƒå’Œæµ‹è¯•ã€‚\n\n```shell\necho \"Testing \\\"false\\\"\"\nif [ \"false\" ]              #  \"false\"æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸².\nthen\n  echo \"\\\"false\\\" is true.\" #+ å®ƒè¢«æµ‹è¯•ä¸ºçœŸ.\nelse\n  echo \"\\\"false\\\" is false.\"\nfi            # \"false\"ä¸ºçœŸ.\n```\n\nElse if å’Œ elif\n\nelifæ˜¯else ifçš„ç¼©å†™ã€‚ä½œç”¨æ˜¯åœ¨ä¸€ä¸ªif/thené‡ŒåµŒå…¥ä¸€ä¸ªå†…éƒ¨çš„if/thenç»“æ„ã€‚\n\n`[[]]`ç»“æ„æ¯”Bashç‰ˆæœ¬çš„`[]`æ›´é€šç”¨ã€‚ç”¨`[[ ... ]]`æµ‹è¯•ç»“æ„æ¯”ç”¨`[ ... ]`æ›´èƒ½é˜²æ­¢è„šæœ¬é‡Œçš„è®¸å¤šé€»è¾‘é”™è¯¯ã€‚æ¯”å¦‚è¯´ï¼Œ`&&`,`||`,`<`å’Œ`>`æ“ä½œç¬¦èƒ½åœ¨ä¸€ä¸ª`[[]]`æµ‹è¯•é‡Œé€šè¿‡ï¼Œä½†åœ¨`[]`ç»“æ„ä¼šå‘ç”Ÿé”™è¯¯ã€‚\n\n`(( ))`ç»“æ„æ‰©å±•å¹¶è®¡ç®—ä¸€ä¸ªç®—æœ¯è¡¨è¾¾å¼çš„å€¼ã€‚å¦‚æœè¡¨è¾¾å¼å€¼ä¸º0ï¼Œä¼šè¿”å›1æˆ–å‡ä½œä¸ºé€€å‡ºçŠ¶æ€ç ã€‚ä¸€ä¸ªéé›¶å€¼çš„è¡¨è¾¾å¼è¿”å›ä¸€ä¸ª0æˆ–çœŸä½œä¸ºé€€å‡ºçŠ¶æ€ç ã€‚è¿™ä¸ªç»“æ„å’Œå…ˆå‰testå‘½ä»¤åŠ`[]`ç»“æ„çš„è®¨è®ºåˆšå¥½ç›¸åã€‚\n\n### æ–‡ä»¶æµ‹è¯•æ“ä½œç¬¦\n\nå¦‚æœä¸‹é¢çš„æ¡ä»¶æˆç«‹è¿”å›çœŸã€‚\n\n| æ“ä½œç¬¦ | æè¿° |\n| ---- | ---- |\n| -e | æ–‡ä»¶å­˜åœ¨ |\n| -a | æ–‡ä»¶å­˜åœ¨ï¼Œè¿™ä¸ªå’Œ-eçš„ä½œç”¨ä¸€æ ·. å®ƒæ˜¯ä¸èµæˆä½¿ç”¨çš„ï¼Œæ‰€ä»¥å®ƒçš„ç”¨å¤„ä¸å¤§ã€‚ |\n| -f | æ–‡ä»¶æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶(ä¸æ˜¯ä¸€ä¸ªç›®å½•æˆ–æ˜¯ä¸€ä¸ªè®¾å¤‡æ–‡ä»¶) |\n| -s | æ–‡ä»¶å¤§å°ä¸ä¸ºé›¶ |\n| -d | æ–‡ä»¶æ˜¯ä¸€ä¸ªç›®å½• |\n| -b | æ–‡ä»¶æ˜¯ä¸€ä¸ªå—è®¾å¤‡(è½¯ç›˜ï¼Œå…‰é©±ï¼Œç­‰ç­‰ã€‚) |\n| -c | æ–‡ä»¶æ˜¯ä¸€ä¸ªå­—ç¬¦è®¾å¤‡(é”®ç›˜ï¼Œè°ƒåˆ¶è§£è°ƒå™¨ï¼Œå£°å¡ï¼Œç­‰ç­‰ã€‚) |\n| -p | æ–‡ä»¶æ˜¯ä¸€ä¸ªç®¡é“ |\n| -h | æ–‡ä»¶æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥ |\n| -L | æ–‡ä»¶æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥ |\n| -S | æ–‡ä»¶æ˜¯ä¸€ä¸ªsocket |\n| -t | æ–‡ä»¶(æè¿°ç¬¦)ä¸ä¸€ä¸ªç»ˆç«¯è®¾å¤‡ç›¸å…³ã€‚|\n| -r | æ–‡ä»¶æ˜¯å¦å¯è¯» (æŒ‡è¿è¡Œè¿™ä¸ªæµ‹è¯•å‘½ä»¤çš„ç”¨æˆ·çš„è¯»æƒé™) |\n| -w | æ–‡ä»¶æ˜¯å¦å¯å†™ (æŒ‡è¿è¡Œè¿™ä¸ªæµ‹è¯•å‘½ä»¤çš„ç”¨æˆ·çš„è¯»æƒé™) |\n| -x | æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œ (æŒ‡è¿è¡Œè¿™ä¸ªæµ‹è¯•å‘½ä»¤çš„ç”¨æˆ·çš„è¯»æƒé™) |\n| -g | æ–‡ä»¶æˆ–ç›®å½•çš„è®¾ç½®-ç»„-ID(sgid)æ ‡è®°è¢«è®¾ç½®ã€‚ |\n| -u | æ–‡ä»¶çš„è®¾ç½®-ç”¨æˆ·-ID(suid)æ ‡å¿—è¢«è®¾ç½® |\n| -k | ç²˜ä½ä½è®¾ç½® |\n| -N | æ–‡ä»¶æœ€åä¸€æ¬¡è¯»åè¢«ä¿®æ”¹ |\n| f1 -nt f2 | æ–‡ä»¶f1æ¯”f2æ–° |\n| f1 -ot f2 | æ–‡ä»¶f1æ¯”f2æ—§ |\n| f1 -ef f2 | æ–‡ä»¶f1å’Œf2 æ˜¯ç›¸åŒæ–‡ä»¶çš„ç¡¬é“¾æ¥ |\n| ! | \"é\" -- åè½¬ä¸Šé¢æ‰€æœ‰æµ‹è¯•çš„ç»“æœ(å¦‚æœæ²¡æœ‰ç»™å‡ºæ¡ä»¶åˆ™è¿”å›çœŸ)ã€‚|\n\n**æ³¨æ„âš ï¸**\n\n1. `-t` è¿™ä¸ªæµ‹è¯•é€‰é¡¹å¯ä»¥ç”¨äºæ£€æŸ¥è„šæœ¬ä¸­æ˜¯å¦æ ‡å‡†è¾“å…¥ ([ -t 0 ])æˆ–æ ‡å‡†è¾“å‡º([ -t 1 ])æ˜¯ä¸€ä¸ªç»ˆç«¯ã€‚\n1. `-g` å¦‚æœä¸€ä¸ªç›®å½•çš„sgidæ ‡å¿—è¢«è®¾ç½®ï¼Œåœ¨è¿™ä¸ªç›®å½•ä¸‹åˆ›å»ºçš„æ–‡ä»¶éƒ½å±äºæ‹¥æœ‰æ­¤ç›®å½•çš„ç”¨æˆ·ç»„ï¼Œè€Œä¸å¿…æ˜¯åˆ›å»ºæ–‡ä»¶çš„ç”¨æˆ·æ‰€å±çš„ç»„ã€‚è¿™ä¸ªç‰¹æ€§å¯¹åœ¨ä¸€ä¸ªå·¥ä½œç»„é‡Œçš„åŒäº«ç›®å½•å¾ˆæœ‰ç”¨å¤„ã€‚\n\n### æ¯”è¾ƒæ“ä½œç¬¦\n\näºŒå…ƒæ¯”è¾ƒæ“ä½œç¬¦æ¯”è¾ƒä¸¤ä¸ªå˜é‡æˆ–æ˜¯æ•°å€¼ã€‚æ³¨æ„æ•´æ•°å’Œå­—ç¬¦ä¸²æ¯”è¾ƒçš„åˆ†åˆ«ã€‚\n\n**æ•´æ•°æ¯”è¾ƒ**\n\n| æ¯”è¾ƒæ“ä½œç¬¦ | æè¿° | ä¾‹å­ |\n| ---- | ---- | ---- |\n| `-eq` | ç­‰äº | `if [ \"$a\" -eq \"$b\" ]` |\n| `-ne` | ä¸ç­‰äº | `if [ \"$a\" -ne \"$b\" ]` | \n| `-gt` | å¤§äº | `if [ \"$a\" -gt \"$b\" ]` |\n| `-ge` | å¤§äºç­‰äº | `if [ \"$a\" -ge \"$b\" ]` |\n| `-lt` | å°äº | `if [ \"$a\" -lt \"$b\" ]` |\n| `-le` | å°äºç­‰äº | `if [ \"$a\" -le \"$b\" ]` |\n| `<` | å°äº(åœ¨åŒæ‹¬å·é‡Œä½¿ç”¨) | `((\"$a\" < \"$b\"))` |\n| `<=` | å°äºç­‰äº (åœ¨åŒæ‹¬å·é‡Œä½¿ç”¨) | `((\"$a\" <= \"$b\"))` |\n| `>` | å¤§äº (åœ¨åŒæ‹¬å·é‡Œä½¿ç”¨) | `((\"$a\" > \"$b\"))` |\n| `>=` | å¤§äºç­‰äº(åœ¨åŒæ‹¬å·é‡Œä½¿ç”¨) | `((\"$a\" >= \"$b\"))` |\n\n**å­—ç¬¦ä¸²æ¯”è¾ƒ**\n\n| æ¯”è¾ƒæ“ä½œç¬¦ | æè¿° | ä¾‹å­ |\n| ---- | ---- | ---- |\n| = | ç­‰äº | `if [ \"$a\" = \"$b\" ]` |\n| == | ç­‰äºï¼Œå®ƒå’Œ=æ˜¯åŒä¹‰è¯ã€‚ | `if [ \"$a\" == \"$b\" ]` |\n| != | ä¸ç›¸ç­‰ï¼Œæ“ä½œç¬¦åœ¨[[ ... ]]ç»“æ„é‡Œä½¿ç”¨æ¨¡å¼åŒ¹é…. | `if [ \"$a\" != \"$b\" ]` |\n| < | å°äºï¼Œä¾ç…§ASCIIå­—ç¬¦æ’åˆ—é¡ºåºï¼Œæ³¨æ„\"<\"å­—ç¬¦åœ¨[ ] ç»“æ„é‡Œéœ€è¦è½¬ä¹‰ | `if [[ \"$a\" < \"$b\" ]]` `if [ \"$a\" \\< \"$b\" ]` |\n| > | å¤§äºï¼Œä¾ç…§ASCIIå­—ç¬¦æ’åˆ—é¡ºåºï¼Œæ³¨æ„\">\"å­—ç¬¦åœ¨[ ] ç»“æ„é‡Œéœ€è¦è½¬ä¹‰. | `if [[ \"$a\" > \"$b\" ]]` `if [ \"$a\" \\> \"$b\" ]`| \n| -z | å­—ç¬¦ä¸²ä¸º\"null\"ï¼Œå³æ˜¯æŒ‡å­—ç¬¦ä¸²é•¿åº¦ä¸ºé›¶ã€‚ | - |\n| -n | å­—ç¬¦ä¸²ä¸ä¸º\"null\"ï¼Œå³é•¿åº¦ä¸ä¸ºé›¶ã€‚ | - |\n\n**æ··åˆæ¯”è¾ƒ**\n\n| æ¯”è¾ƒæ“ä½œç¬¦ | æè¿° | ä¾‹å­ |\n| ---- | ---- | ---- |\n| -a | é€»è¾‘ä¸ï¼Œå¦‚æœexp1å’Œexp2éƒ½ä¸ºçœŸï¼Œåˆ™exp1 -a exp2è¿”å›çœŸã€‚ | `if [ \"$exp1\" -a \"$exp2\" ]` |\n| -o | é€»è¾‘æˆ–ï¼Œåªè¦exp1å’Œexp2ä»»ä½•ä¸€ä¸ªä¸ºçœŸï¼Œåˆ™exp1 -o exp2 è¿”å›çœŸã€‚ | `if [ \"$exp1\" -o \"$exp2\" ]` |\n\nåœ¨ä¸€ä¸ªæ··åˆæµ‹è¯•ä¸­ï¼ŒæŠŠä¸€ä¸ªå­—ç¬¦ä¸²å˜é‡å¼•å·å¼•èµ·æ¥å¯èƒ½è¿˜ä¸å¤Ÿã€‚å¦‚æœ$stringå˜é‡æ˜¯ç©ºçš„è¯ï¼Œè¡¨è¾¾å¼`[ -n \"$string\" -o \"$a\" = \"$b\" ]`åœ¨ä¸€äº›Bashç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå¼•èµ·é”™è¯¯ã€‚å®‰å…¨çš„åŠæ³•æ˜¯é™„åŠ ä¸€ä¸ªå¤–éƒ¨çš„å­—ç¬¦ä¸²ç»™å¯èƒ½æœ‰ç©ºå­—ç¬¦ä¸²å˜é‡æ¯”è¾ƒçš„æ‰€æœ‰å˜é‡ï¼Œ`[ \"x$string\" != x -o \"x$a\" = \"x$b\" ]` (xå­—ç¬¦å¯ä»¥äº’ç›¸æŠµæ¶ˆ)\n\n## æ“ä½œå­—ç¬¦ä¸²\n\nBashå·²ç»æ”¯æŒäº†ä»¤äººæƒŠè®¶çš„å­—ç¬¦ä¸²æ“ä½œçš„æ•°é‡ã€‚ä¸ä¸€è‡´çš„å‘½ä»¤è¯­æ³•å’Œå†—ä½™çš„åŠŸèƒ½ï¼Œå¯¼è‡´çœŸçš„å­¦èµ·æ¥æœ‰å›°éš¾ã€‚\n\n### å­—ç¬¦ä¸²é•¿åº¦\n\n```shell\nString=abcABC123ABCabc\n\necho ${#String}                 # 15\necho `expr length $String`      # 15\necho `expr \"$String\" : '.*'`    # 15\n```\n\nåŒ¹é…å­—ç¬¦ä¸²å¼€å¤´çš„å­—ä¸²çš„é•¿åº¦ï¼Œä¸‹é¢ä¸¤ç§æ–¹æ³•çš„ $substring æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚\n\n`expr match \"$string\" '$substring'`   \n`expr \"$string\" : '$substring'`   \n\n```shell\nString=abcABC123ABCabc\n#       â””------â”˜\n#       \necho `expr match \"$String\" 'abc[A-Z]*.2'`   # 8\necho `expr \"$String\" : 'abc[A-Z]*.2'`       # 8\n```\n\n### ç´¢å¼•\n\n`expr index $string $substring` åœ¨å­—ç¬¦ä¸²$stringä¸­$substringç¬¬ä¸€æ¬¡å‡ºç°çš„æ•°å­—ä½ç½®\n\n```shell\nString=abcABC123ABCabc\necho `expr index \"$String\" C12`             # 6\n                                             # C å­—ç¬¦çš„ä½ç½®.\n\necho `expr index \"$String\" 1c`              # 3\n# 'c' (in #3 position) matches before '1'.\n```\n\n### å­—ä¸²æå–\n\n`${string:position}` æŠŠ$stringä¸­ä»ç¬¬$postionä¸ªå­—ç¬¦å¼€å§‹å­—ç¬¦ä¸²æå–å‡ºæ¥ã€‚å¦‚æœ$stringæ˜¯\"*\"æˆ–\"@\"ï¼Œåˆ™è¡¨ç¤ºä»ä½ç½®å‚æ•°ä¸­æå–ç¬¬$postionåé¢çš„å­—ç¬¦ä¸²ã€‚  \n`${string:position:length}` æŠŠ$stringä¸­$postionä¸ªå­—ç¬¦åé¢çš„é•¿åº¦ä¸º$lengthçš„å­—ç¬¦ä¸²æå–å‡ºæ¥ã€‚\n\n```shell\n# å­—ä¸²æå–\nString=abcABC123ABCabc\n#       0123456789.....\n#       ä»¥0å¼€å§‹è®¡ç®—.\n\necho ${String:0}                            # abcABC123ABCabc\necho ${String:1}                            # bcABC123ABCabc\necho ${String:7}                            # 23ABCabc\necho ${String:7:3}                          # 23A\n                                            # æå–çš„å­—ä¸²é•¿ä¸º3\n\n# æœ‰æ²¡æœ‰å¯èƒ½ä»å­—ç¬¦ä¸²çš„å³è¾¹ç»“å°¾å¤„æå–?\n    \necho ${String:-4}                           # abcABC123ABCabc\n# é»˜è®¤æ˜¯æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œå°±ç›¸å½“äº${parameter:-default}.\n# ç„¶è€Œ. . .\n\necho ${String:(-4)}                         # Cabc \necho ${String: -4}                          # Cabc\n# è¿™æ ·,å®ƒå¯ä»¥å·¥ä½œäº†.\n# åœ†æ‹¬å·æˆ–é™„åŠ çš„ç©ºç™½å­—ç¬¦å¯ä»¥è½¬ä¹‰$positionå‚æ•°.\n```\n\n## è½¬ä¹‰å­—ç¬¦\n\nåœ¨å•ä¸ªå­—ç¬¦å‰é¢çš„è½¬ä¹‰ç¬¦`\\`å‘Šè¯‰shellä¸å¿…ç‰¹æ®Šè§£é‡Šè¿™ä¸ªå­—ç¬¦ï¼ŒåªæŠŠå®ƒå½“æˆå­—é¢ä¸Šçš„æ„æ€ã€‚ä½†åœ¨ä¸€äº›å‘½ä»¤å’Œè½¯ä»¶åŒ…é‡Œï¼Œæ¯”å¦‚è¯´echoå’Œsed,è½¬ä¹‰ä¸€ä¸ªå­—ç¬¦å¯èƒ½ä¼šå¼•èµ·ä¸€ä¸ªç›¸åçš„æ•ˆæœï¼ï¼å› ä¸ºå®ƒä»¬å¯èƒ½è§¦å‘é‚£ä¸ªå­—ç¬¦çš„ç‰¹æ®Šæ„æ€ã€‚\n\n`\\r` å›è½¦  \n`\\n` æ¢è¡Œ  \n`\\c` ä¸æ¢è¡Œ  \n`\\t` æ°´å¹³åˆ¶è¡¨ç¬¦  \n`\\v` å‚ç›´åˆ¶è¡¨ç¬¦  \n`\\a` è¡¨ç¤ºâ€œè­¦å‘Šâ€ï¼ˆèœ‚é¸£æˆ–æ˜¯é—ªåŠ¨ï¼‰  \n`\\\\` åæ–œæ å­—ç¬¦  \n`\\0ddd` å°†è‡ªè´Ÿè¡¨ç¤ºæˆ1åˆ°3çš„å…«è¿›åˆ¶æ•°å€¼  \n\n\n## é€€å‡º/é€€å‡ºçŠ¶æ€\n\n`$?` å˜é‡ç”¨äºæµ‹è¯•è„šæœ¬ä¸­çš„å‘½ä»¤æ‰§è¡Œç»“æœéå¸¸çš„æœ‰ç”¨ã€‚\n\n```shell\necho hello\necho $?    # å› ä¸ºä¸Šä¸€æ¡å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼Œæ‰“å°0ã€‚\n\nlskdf      # æ— æ•ˆå‘½ä»¤ã€‚\necho $?    # å› ä¸ºä¸Šé¢çš„æ— æ•ˆå‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼Œæ‰“å°ä¸€ä¸ªéé›¶çš„å€¼ã€‚\n\nexit 113   # è¿”å›113çŠ¶æ€ç ç»™shellã€‚\n           # å¯ä»¥è¿è¡Œè„šæœ¬ç»“æŸåç«‹å³æ‰§è¡Œå‘½ä»¤\"echo $?\" æ£€éªŒã€‚\n\n#  ä¾ç…§æƒ¯ä¾‹,å‘½ä»¤'exit 0'è¡¨ç¤ºæ‰§è¡ŒæˆåŠŸ,\n#  å½“äº§ç”Ÿä¸€ä¸ªéé›¶é€€å‡ºå€¼æ—¶è¡¨ç¤ºä¸€ä¸ªé”™è¯¯æˆ–æ˜¯åå¸¸çš„æ¡ä»¶ã€‚\n```\n\n### å˜é‡é—´æ¥å¼•ç”¨\n\nå‡è®¾ä¸€ä¸ªå˜é‡çš„å€¼æ˜¯ç¬¬äºŒä¸ªå˜é‡çš„åå­—ã€‚è¿™æ ·è¦å¦‚ä½•æ‰èƒ½ä»ç¬¬ä¸€ä¸ªå˜é‡å¤„é‡æ–°è·å¾—ç¬¬äºŒä¸ªå˜é‡çš„å€¼ï¼Ÿä¾‹å¦‚ï¼Œ`a=letter_of_alphabet`å’Œ`letter_of_alphabet=z`ï¼Œæ˜¯å¦èƒ½ç”±aå¼•ç”¨å¾—åˆ°z ? è¿™ç¡®å®å¯ä»¥åŠåˆ°ï¼Œè¿™ç§æŠ€æœ¯è¢«ç§°ä¸ºé—´æ¥å¼•ç”¨ã€‚\n\n```shell\na=letter_of_alphabet   # å˜é‡\"a\"ä¿å­˜ç€å¦å¤–ä¸€ä¸ªå˜é‡çš„åå­—.\nletter_of_alphabet=z\n# ç›´æ¥å¼•ç”¨.\necho \"a = $a\"          # a = letter_of_alphabet\n\n# é—´æ¥å¼•ç”¨.\neval a=\\$$a\necho \"Now a = $a\"      # ç°åœ¨ a = z\nexit 0\n```\n\n### åŒæ‹¬å·ç»“æ„\n\nç”¨`((...))`ç»“æ„æ¥ä½¿ç”¨Cé£æ ¼æ“ä½œç¬¦æ¥å¤„ç†å˜é‡ã€‚[demo26](./example/demo26)\n\n```shell\n(( a = 23 ))  # ä»¥Cé£æ ¼æ¥è®¾ç½®ä¸€ä¸ªå€¼ï¼Œåœ¨\"=\"ä¸¤è¾¹å¯ä»¥æœ‰ç©ºæ ¼.\necho \"a (initial value) = $a\"\n\n(( a++ ))     # Cé£æ ¼çš„è®¡ç®—åè‡ªå¢.\necho \"a (after a++) = $a\"\n\n(( a-- ))     # Cé£æ ¼çš„è®¡ç®—åè‡ªå‡.\necho \"a (after a--) = $a\"\n\n\n(( ++a ))     # Cé£æ ¼çš„è®¡ç®—å‰è‡ªå¢.\necho \"a (after ++a) = $a\"\n\n(( --a ))     # Cé£æ ¼çš„è®¡ç®—å‰è‡ªå‡.\necho ","tags":["shell"],"categories":["å·¥å…·"]},{"title":"Angularç»„ä»¶é€šè®¯","url":"%2F2020%2FAngular%E7%BB%84%E4%BB%B6%E9%80%9A%E8%AE%AF.html","content":"\nç»„ä»¶é€šè®¯ï¼Œæ„åœ¨ä¸åŒçš„æŒ‡ä»¤å’Œç»„ä»¶ä¹‹é—´å…±äº«ä¿¡æ¯ã€‚\n\n## çˆ¶->å­ input\n```\n// parent.html\n<child [content]=\"i\"></child>\n\n// child.ts\n@Input() content:string;\n```\n\n## å­->çˆ¶ output\n```\n// parent.html\n<child (changeNumber)=\"changeNumber($event)\"></child>\n\n// child.ts\n@Output() changeNumber: EventEmitter<number> = new EventEmitter();\n\nthis.changeNumber(1);\n```\n\n---\n<!-- more -->\n\n## å­è·å–çˆ¶å®ä¾‹\n```\n// child.ts\nimport { Component, Input, EventEmitter, Output,Host,Inject,forwardRef } from '@angular/core';\n\nconstructor( @Host() @Inject(forwardRef(() => ParentPage)) app: ParentPage) {\n    app.content // è·å–çˆ¶å®ä¾‹çš„å‚æ•°\n}\n```\n\n## çˆ¶è·å–å­å®ä¾‹\n```\n@ViewChild(ChildPage) child:ChildPage;\n\nthis.child.content //è·å–å­å®ä¾‹çš„å‚æ•°\n```\n\n## service å…¬å…±çš„\n```\n// parent.ts\nimport{myService}from '../child/myService'\n\nå®ä¾‹åŒ– service.i++;\n\n// child.ts\nservice.i\n```\nè®°å¾—åœ¨app.module.ts åŠ ä¸Šproviders\n\n## EventEmitter(eventbus)\n```\n// eventbus.service.ts\nimport {Component,Injectable,EventEmitter} from '@angular/core';\n@Injectable()\nexport class myService {\n    change: EventEmitter<number>;\n\n    constructor(){\n        this.change = new EventEmitter();\n    }\n}\n\n// parent.ts\nservice.change.emit('123');\n\n// child.ts\nservice.change.subscribe((value:string)=>{})\n```\n\n## è®¢é˜…\n```\n// service\nimport { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs/Subject';\n\n@Injectable()\nexport class myService {\n\n    private Source = new Subject<any>();\n    Status$ = this.Source.asObservable();\n    StatusMission(message: any) {\n        this.Source.next(message);\n    }\n}\n// parent.ts\nthis.service.StatusMission('123');\n\n// child.ts\nthis.subscription = service.Status$.subscribe(message => {});\n\nngOnDestroy() {\n    this.subscription.unsubscribe();\n}\n```\n\nä»¥ä¸Šä¸ƒç§ç»„ä»¶ä¸ç»„ä»¶çš„é€šè®¯æ–¹å¼ï¼Œå¯ä»¥é€‰æ‹©åº”ç”¨äºé€‚åˆçš„åœºæ™¯ã€‚\n\né¡ºå¸¦ä»‹ç»ä¸‹é‡è½½å½“å‰è·¯ç”±ï¼Œåœ¨Angularä¸­ï¼Œå½“ç‚¹å‡»å½“å‰è·¯ç”±çš„é“¾æ¥æ—¶ï¼Œé»˜è®¤æ˜¯å¿½ç•¥çš„ã€‚\n\n## ç³Ÿç³•çš„è§£å†³æ–¹æ¡ˆ\n1. è·³å‡ºå»ï¼Œå†è·³å›æ¥ã€‚\n2. è®©æµè§ˆå™¨åˆ·æ–°æ•´ä¸ªé¡µé¢ã€‚\nç„¶è€Œç›®å‰æˆ‘ä»¬å¯ä»¥é€šè¿‡ `onSameUrlNavigation` æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n`onSameUrlNavigation` æœ‰ä¸¤ä¸ªå€¼'reload'å’Œ'ignore'ã€‚é»˜è®¤ä¸º'ignore'ã€‚\n- å®šä¹‰å½“è·¯ç”±å™¨æ”¶åˆ°ä¸€ä¸ªå¯¼èˆªåˆ°å½“å‰ URL çš„è¯·æ±‚æ—¶åº”è¯¥æ€ä¹ˆåšã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œè·¯ç”±å™¨å°†ä¼šå¿½ç•¥è¿™æ¬¡å¯¼èˆªã€‚ä½†è¿™æ ·ä¼šé˜»æ­¢ç±»ä¼¼äº \"åˆ·æ–°\" æŒ‰é’®çš„ç‰¹æ€§ã€‚ ä½¿ç”¨è¯¥é€‰é¡¹å¯ä»¥é…ç½®å¯¼èˆªåˆ°å½“å‰ URL æ—¶çš„è¡Œä¸ºã€‚\n\n- è·¯ç”±å¯åŠ¨é…ç½®\n```js\n// app.routing.module.ts\nimports: [RouterModule.forRoot(routes, {onSameUrlNavigation: 'reload'})]\n```\n`reload`å¹¶ä¸ä¼šçœŸæ­£çš„æ‰§è¡ŒåŠ è½½å·¥ä½œï¼Œå®ƒåªæ˜¯é‡æ–°è§¦å‘äº†è·¯ç”±ä¸Šçš„eventsäº‹ä»¶å¾ªç¯ã€‚ä¹Ÿå¯ä»¥åŠ¨æ€é…ç½®reload\n```js\nthis.router.onSameUrlNavigation = 'reload';\nthis.router.navigateByUrl(this.router.url).then(() => {\n    this.router.onSameUrlNavigation = 'ignore';\n});\n```\n\n- Routeé…ç½®\nä¸€ç³»åˆ—çš„è·¯ç”±äº‹ä»¶åœ¨ä½•ç§æƒ…å†µä¸‹åº”è¯¥è¢«è§¦å‘ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦é…ç½® runGuardsAndResolvers é€‰é¡¹ï¼Œå®ƒæœ‰3ä¸ªå¯é€‰å€¼ã€‚\n1. paramsChange åªæœ‰å½“å‚æ•°å˜åŒ–æ—¶æ‰é‡æ–°å¯åŠ¨ï¼Œä¾‹å¦‚ 'article/:id'ï¼Œå‚æ•°æŒ‡çš„å°±æ˜¯è¿™é‡Œçš„idã€‚\n\n2. paramsOrQueryParamsChange å½“å‚æ•°æˆ–æŸ¥è¯¢å‚æ•°å˜åŒ–æ—¶é‡æ–°å¯åŠ¨ã€‚ä¾‹å¦‚ï¼š'article/:category?limit=10ï¼Œå‚æ•°æŒ‡ 'category'ï¼ŒæŸ¥è¯¢å‚æ•°æŒ‡'limit'ï¼›\n\n3. always æ— è®ºä½•ç§æƒ…å†µéƒ½é‡æ–°å¯åŠ¨\n\n```js\nexport const routes: Routes = [\n   {\n       path: 'article/:id',\n       component: ArticleComponent,\n       runGuardsAndResolvers: 'paramsChange',\n   }\n]\n```\n\n- ç»„ä»¶ä¸­å¤„ç†è·¯ç”±äº‹ä»¶\n```js\nexport class ArticleComponent implement OnInit, OnDestroy {\n   subscription: Subscription;\n   constructor(private router: Router) { }\n   ngOnInit() {\n       this.subscription = this.router.events.pipe(\n           filter(event => event instanceOf NavigationEnd)\n       ).subscribe(_ => {...}) // æ‰§è¡Œä¸šåŠ¡æ“ä½œ\n   }\n   ngOnDestroy() {\n       this.subscription.unsubscribe(); // ä¸è¦å¿˜è®°å¤„ç†æ‰‹åŠ¨è®¢é˜…\n   }\n}\n```","tags":["angular"],"categories":["Ng"]},{"title":"javascriptè®¾è®¡æ¨¡å¼","url":"%2F2019%2Fjavascript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F.html","content":"\n## æ¦‚å¿µ\nè®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨çš„ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚ æ¯«æ— ç–‘é—®ï¼Œè®¾è®¡æ¨¡å¼äºå·±äºä»–äººäºç³»ç»Ÿéƒ½æ˜¯å¤šèµ¢\nçš„ï¼Œè®¾è®¡æ¨¡å¼ä½¿ä»£ç ç¼–åˆ¶çœŸæ­£å·¥ç¨‹åŒ–ï¼Œè®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹çš„åŸºçŸ³ï¼Œå¦‚åŒå¤§å¦çš„ä¸€å—å—ç –çŸ³ä¸€æ ·ã€‚\n\n## è®¾è®¡åŸåˆ™ï¼ˆ5ä¸ªï¼‰\n\n### S â€“ Single Responsibility Principle å•ä¸€èŒè´£åŸåˆ™\n- ä¸€ä¸ªç¨‹åºåªåšå¥½ä¸€ä»¶äº‹\n- å¦‚æœåŠŸèƒ½è¿‡äºå¤æ‚å°±æ‹†åˆ†å¼€ï¼Œæ¯ä¸ªéƒ¨åˆ†ä¿æŒç‹¬ç«‹\n\n### O â€“ OpenClosed Principle å¼€æ”¾/å°é—­åŸåˆ™\n- å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­\n- å¢åŠ éœ€æ±‚æ—¶ï¼Œæ‰©å±•æ–°ä»£ç ï¼Œè€Œéä¿®æ”¹å·²æœ‰ä»£ç \n\n### L â€“ Liskov Substitution Principle é‡Œæ°æ›¿æ¢åŸåˆ™\n- å­ç±»èƒ½è¦†ç›–çˆ¶ç±»\n- çˆ¶ç±»èƒ½å‡ºç°çš„åœ°æ–¹å­ç±»å°±èƒ½å‡ºç°\n\n### I â€“ Interface Segregation Principle æ¥å£éš”ç¦»åŸåˆ™\n- ä¿æŒæ¥å£çš„å•ä¸€ç‹¬ç«‹\n- ç±»ä¼¼å•ä¸€èŒè´£åŸåˆ™ï¼Œè¿™é‡Œæ›´å…³æ³¨æ¥å£\n\n### D â€“ Dependency Inversion Principle ä¾èµ–å€’è½¬åŸåˆ™\n- é¢å‘æ¥å£ç¼–ç¨‹ï¼Œä¾èµ–äºæŠ½è±¡è€Œä¸ä¾èµ–äºå…·\n- ä½¿ç”¨æ–¹åªå…³æ³¨æ¥å£è€Œä¸å…³æ³¨å…·ä½“ç±»çš„å®ç°\n\n## è®¾è®¡æ¨¡å¼çš„ç±»å‹\nå¦‚æœä»ä½œç”¨ä¸Šæ¥åˆ’åˆ†ï¼ŒJavaScriptè®¾è®¡æ¨¡å¼å¤§æ¦‚åˆ†ä¸ºäº”ç§è®¾è®¡ç±»å‹ï¼š\n\n| åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ | ç»“æ„å‹è®¾è®¡æ¨¡å¼|è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼|æŠ€å·§å‹è®¾è®¡æ¨¡å¼|æ¶æ„å‹è®¾è®¡æ¨¡å¼|\n|:--------|:---------|:---------|:---------|:---------|\n| ç®€å•å·¥å‚æ¨¡å¼ | å¤–è§‚æ¨¡å¼ |æ¨¡æ¿æ–¹æ³•æ¨¡å¼|é“¾æ¨¡å¼|åŒæ­¥æ¨¡å—|\n| å·¥å‚æ–¹æ³•æ¨¡å¼ |é€‚é…å™¨æ¨¡å¼|è§‚å¯Ÿè€…æ¨¡å¼|å§”æ‰˜æ¨¡å¼|å¼‚æ­¥æ¨¡å—æ¨¡å¼|\n| æŠ½è±¡å·¥å‚æ¨¡å¼ |ä»£ç†æ¨¡å¼|çŠ¶æ€æ¨¡å¼|æ•°æ®è®¿é—®å¯¹è±¡æ¨¡å¼|Widgetæ¨¡å¼|\n| å»ºé€ è€…æ¨¡å¼ |è£…é¥°è€…æ¨¡å¼|ç­–ç•¥æ¨¡å¼|èŠ‚æµæ¨¡å¼|MVCæ¨¡å¼|\n| åŸå‹æ¨¡å¼ |æ¡¥æ¥æ¨¡å¼|èŒè´£é“¾æ¨¡å¼|ç®€å•æ¨¡æ¿æ¨¡å¼|MVPæ¨¡å¼|\n| å•ä¾‹æ¨¡å¼ |ç»„åˆæ¨¡å¼|å‘½ä»¤æ¨¡å¼|æƒ°æ€§æ¨¡å¼|MVVMæ¨¡å¼|\n|         |äº«å…ƒæ¨¡å¼|è®¿é—®è€…æ¨¡å¼|å‚ä¸è€…æ¨¡å¼||\n|         |       |ä¸­ä»‹è€…æ¨¡å¼|ç­‰å¾…è€…æ¨¡å¼||\n|         |       |å¤‡å¿˜å½•æ¨¡å¼|||\n|         |       |è¿­ä»£å™¨æ¨¡å¼|||\n|         |       |è§£é‡Šå™¨æ¨¡å¼|||\n\n---\n<!--more-->\n\n## ç¬¬ 33 ç«  å¼‚å›½æˆ˜åœº-å‚ä¸è€…æ¨¡å¼\n\n- å‚ä¸è€…æ¨¡å¼ï¼šåœ¨ç‰¹å®šçš„ä½œç”¨åŸŸä¸­æ‰§è¡Œç»™å®šçš„å‡½æ•°,å¹¶å°†å‚æ•°åŸå°ä¸åŠ¨åœ°ä¼ é€’ã€‚\n\n### äº‹ä»¶ç»‘å®šæ–¹æ³•\n```js\nlet A = {\n    event: {}\n};\n// äº‹ä»¶æ¨¡å—ï¼ˆäº‹ä»¶ç»‘å®šæ–¹æ³•ï¼‰\nA.event.on = function (dom, type, fn) {\n    // ç»‘å®š w3c æ ‡å‡†äº‹ä»¶\n    if (dom.addEventListener) {\n        dom.addEventListener(type, fn, false);\n    // ç»‘å®š ie æ ‡å‡†äº‹ä»¶\n    } else if (dom.attachEvent) {\n        dom.attachEvent('on' + type, fn);\n    // ç»‘å®š dom äº‹ä»¶\n    } else {\n        dom['on' + type] = fn;\n    }\n};\n```\n\n```js\n/*ä¸Šé¢å­˜åœ¨çš„é—®é¢˜ï¼Œ addEventListener æ²¡æœ‰åŠæ³•åœ¨å›è°ƒå‡½æ•°ä¸­ä¼ é€’å‚æ•°ï¼Œ åšå¦‚ä¸‹çš„ä¿®æ”¹*/\nA.event.on2 = function (dom, tyoe, fn, data) {\n    if (dom.addEventListener) {\n        dom.addEventListener(type, function (e) {\n            // åœ¨domç¯å¢ƒä¸­è°ƒç”¨fn,å¹¶ä¼ é€’äº‹ä»¶å¯¹è±¡ä»¥åŠå‚æ•°\n            fn.call(dom, e, data)\n        }, false);\n    }\n    // .............\n};\n```\né€šè¿‡ call å’Œ apply æ–¹æ³•ä½¿æˆ‘ä»¬åœ¨ç‰¹å®šä½œç”¨åŸŸä¸­æ‰§è¡ŒæŸä¸ªå‡½æ•°å¹¶ä¼ å…¥å‚æ•°ã€‚\n\n### å®ç° bind æ–¹æ³•\n```js\n/*\n* ä¸Šé¢çš„æ–¹æ³•ç¡®å®æ˜¯è§£å†³äº†å‚æ•°ä¼ é€’çš„é—®é¢˜ï¼Œ ä½†æ˜¯å¼•å‘äº†ä¸€ä¸ªæ–°çš„é—®é¢˜\n* æ–°çš„é—®é¢˜å°±æ˜¯æ·»åŠ çš„æ˜¯åŒ¿åå‡½æ•°å¯¼è‡´äº‹ä»¶å›è°ƒå‡½æ•°ä¸èƒ½ç§»é™¤äº†\n* ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ å°±å¼•å…¥äº†bind é—­åŒ…\n* */\nlet bind = function (fn, context) {\n    // é—­åŒ…è¿”å›æ–°å‡½æ•°\n    return function () {\n        // å¯¹ fn è£…é¥°å¹¶è¿”å›\n        return fn.apply(context, arguments)\n    }\n};\n\n// å¯¹äºbind æ–¹æ³•çš„æµ‹è¯•\nlet demoObj = {\n    title: 'è¿™æ˜¯ä¸€ä¸ªä¾‹å­'\n};\nlet demoFn = function () {\n    console.log(this.title)\n};\nlet bindFn = bind(demoFn, demoObj);\ndemoFn();               // undefined\nbindFn();               // 'è¿™æ˜¯ä¸€ä¸ªä¾‹å­'\n```\nbindFnè¿”å›äº†ç»“æœï¼Œå› ä¸º bindFn åœ¨æ‰§è¡Œæ—¶ demoObj å‚ä¸äº†è¿›æ¥å¹¶æä¾›äº†ä½œç”¨åŸŸã€‚\n\n```js\n/*\n* å®é™…åº”ç”¨\n* */\nlet button = document.getElementsByTagName('button')[0];\nlet p = document.getElementsByTagName('p')[0];\n// è¾“å‡ºå‚æ•°å’Œ this å¯¹è±¡\nlet demoFn = function () {\n    console.log(arguments, this);\n};\n\n// å½“æ²¡æœ‰ä¼ å…¥å‚ä¸å¯¹è±¡å¼ æµè§ˆå™¨ä¸‹ this æŒ‡å‘ Window\nlet bindFn = bind(demoFn);\nbutton.addEventListener('click', bindFn); // [MouseEvent]  Window\n\n// ä¼ å…¥button this æŒ‡å‘äº†button\nbindFn = bind(demoFn, button); // [MouseEvent] <button>æŒ‰é’®</button>\n\n// ä¼ å…¥P this æŒ‡å‘äº†P\nbindFn = bind(demoFn, p); // [MouseEvent] <p>p</p>\n\nbutton.removeEventListener('click', bindFn)\n```\nä¸ä½¿ç”¨å®ç°çš„ bind æ–¹æ³•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨åŸç”Ÿçš„ bind\n\n```js\nlet bindFN = demoFn.bind()\n```\n\n### å‡½æ•°æŸ¯é‡ŒåŒ–\n```js\n/*\n* ç¬¬ä¸€ä¸ªéœ€æ±‚æ˜¯æ·»åŠ äº‹ä»¶å’Œç§»é™¤äº‹ä»¶å·²ç»æˆåŠŸäº†\n* ç¬¬äºŒä¸ªéœ€æ±‚å°±æ˜¯å‡½æ•°æ·»åŠ é¢å¤–çš„è‡ªå®šä¹‰å‚æ•°\n* è¿™ä¸ªæ—¶å€™å°±éœ€è¦å€ŸåŠ©äºå‡½æ•°æŸ¯é‡ŒåŒ–äº†\n* å‡½æ•°æŸ¯é‡ŒåŒ–ï¼š æ ¹æ®ä¼ é€’çš„å‚æ•°ä¸åŒï¼Œ è®©ä¸€ä¸ªå‡½æ•°å­˜åœ¨å¤šç§çŠ¶æ€ï¼Œ å¤„ç†çš„æ˜¯å‡½æ•°ã€‚\n* */\n```\n\nå‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆfunction curryingï¼‰åˆç§°éƒ¨åˆ†æ±‚å€¼ã€‚ä¸€ä¸ªå‡½æ•°é¦–å…ˆä¼šæ¥å—ä¸€äº›å‚æ•°ï¼Œæ¥å—äº†è¿™äº›å‚æ•°åï¼Œ\n\nè¯¥å‡½æ•°å¹¶ä¸ä¼šç«‹å³æ±‚å€¼ï¼Œè€Œæ˜¯ç»§ç»­è¿”å›å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œåˆšæ‰ä¼ å…¥çš„å‚æ•°åœ¨å‡½æ•°å½¢æˆçš„é—­åŒ…é‡Œè¢«ä¿å­˜èµ·æ¥ã€‚å¾…åˆ°å‡½æ•°çœŸæ­£éœ€è¦æ±‚å€¼çš„æ—¶å€™ï¼Œä¹‹å‰ä¼ å…¥çš„å‚æ•°éƒ½ä¼šè¢«ä¸€æ¬¡æ€§ç”¨äºæ±‚å€¼ã€‚\n\næŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°ã€‚\n\n```js\nlet curry = function (fn) {\n    // ç¼“å­˜æ•°ç»„çš„ slice æ–¹æ³•\n    let Slice = [].slice;\n    // ä»ç¬¬äºŒä¸ªå‚æ•°å¼€å§‹æˆªå–\n    let args = Slice.call(arguments, 1);\n    // é—­åŒ…è¿”å›æ–°å‡½æ•°\n    return function () {\n        // arguments ç±»æ•°ç»„ è½¬åŒ–ä¸ºæ•°ç»„\n        let addArgs = Slice.call(arguments),\n            // æ‹¼æ¥å‚æ•°\n            allArgs = args.concat(addArgs);\n            // è¿”å›æ–°å‡½æ•°\n        return fn.apply(null, allArgs);\n    }\n};\n// æŸ¯é‡ŒåŒ–çš„æµ‹è¯•\nlet add = function (num1, num2) {\n    return num1 + num2;\n};\nlet add5 = function (num) {\n    return add(5, num)\n};\nconsole.log(add(1, 2));          // 3\nconsole.log(add5(6));           // 11\n\nadd5 = curry(add, 5);\nconsole.log(add5(6));           // 11\nlet add7and8 = curry(add, 7, 8);\nconsole.log(add7and8());        // 15\n```\nå¯¹ add æ–¹æ³•çš„å¤šæ€æ‰©å±•ä¸éœ€è¦å†å£°æ˜å‡½æ•°äº†ã€‚\n\n\n### é€šè¿‡æŸ¯é‡ŒåŒ–é‡å†™ bind\n```js\n/*\n* é€šè¿‡æŸ¯é‡ŒåŒ–é‡å†™bind\n* */\nlet bind = function (fn, context) {\n    let Slice = Array.prototype.slice,\n        args = Slice.call(arguments, 2);\n    return function () {\n        let addArgs = Slice.call(arguments),\n            allArgs = addArgs.concat(args);\n        return fn.apply(context, allArgs);\n    }\n};\n// æµ‹è¯•\nlet demoData1 = {\n    text: 'è¿™æ˜¯ç¬¬ä¸€ç»„æ•°æ®'\n};\nlet demoData2 = {\n    text: 'è¿™æ˜¯ç¬¬äºŒç»„æ•°æ®'\n};\nbindFn = bind(demoFn, button, demoData1); // [MouseEvent, Object] <button>æŒ‰é’®</button>\nbindFn = bind(demoFn, button, demoData1, demoData2); // [MouseEvent, Object, Object] <button>æŒ‰é’®</button>\n\n```\nä»¥ä¹‹å‰çš„ button ä¸ºä¾‹ï¼Œæˆ‘ä»¬ç°åœ¨èƒ½åœ¨å›è°ƒå‡½æ•°ä¸­è·å–ä¼ é€’çš„è‡ªå®šä¹‰çš„æ•°æ®äº†ã€‚\n\n```js\nlet bindFn = demoFn.bind(button, demoData1); // [Object, MouseEvent] <button>æŒ‰é’®</button> äº‹ä»¶å¯¹è±¡æ”¾åé¢çš„\n```\n\n```js\n/*\n* ä¸ºäº†æµè§ˆå™¨å…¼å®¹æ€§çš„å®ç°ï¼Œ æˆ‘ä»¬éœ€è¦ç»™æœªæä¾›bindæ–¹æ³•çš„æµè§ˆå™¨æ·»åŠ bindæ–¹æ³•\n* */\nif(Function.prototype.bind === undefined) {\n    Function.prototype.bind = function (context) {\n        let Slice = Array.prototype.slice,\n            args = Slice.call(arguments, 1);\n        return () => {\n            let addArgs = Slice.call(arguments),\n                allArgs = args.concat(addArgs);\n            return this.apply(context, allArgs);\n        }\n    }\n}\n```\n\n### æ€»ç»“\nå¯¹äºå‡½æ•°ç»‘å®šï¼Œå°†å‡½æ•°ä»¥å‡½æ•°æŒ‡é’ˆï¼ˆå‡½æ•°åçš„æ–¹å¼ä¼ é€’ï¼‰ï¼Œä½¿å‡½æ•°åœ¨è¢«ç»‘å®šå¯¹è±¡ä¸Šçš„ä½œç”¨åŸŸä¸­æ‰§è¡Œï¼Œå¯ä»¥é¡ºåˆ©è®¿é—®åˆ°å¯¹è±¡å†…éƒ¨çš„æ•°æ®ã€‚ç¼ºç‚¹ä¼šæ¶ˆè€—æ›´å¤šçš„å†…å­˜æ‰§è¡Œé€Ÿåº¦ä¼šç¨æ…¢ã€‚æ¯”è¾ƒå¸¸ç”¨äºäº‹ä»¶ï¼ŒsetTimeoutç­‰å¼‚æ­¥é€»è¾‘çš„å›è°ƒå‡½æ•°ã€‚\n\nå¯¹äºå‡½æ•°æŸ¯é‡ŒåŒ–åˆ™æ˜¯å°†æ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°è½¬åŒ–æˆæ¥å—ä¸€éƒ¨åˆ†å‚æ•°çš„æ–°å‡½æ•°ï¼Œä½™ä¸‹çš„å‚æ•°ä¿å­˜ä¸‹æ¥ã€‚å½“è°ƒç”¨å¼ä¼ å…¥çš„å‚æ•°å’Œä¿å­˜çš„å‚æ•°ä¸€èµ·æ‰§è¡Œã€‚å› ä¸ºè¦ä¿å­˜å‚æ•°åˆ°é—­åŒ…å†…ï¼Œæ‰€ä»¥åŒæ ·ä¹Ÿä¼šå¤šæ¶ˆè€—äº›èµ„æºã€‚\n\n## ç¬¬ 34 ç«   å…¥åœºæ¨¡å¼-ç­‰å¾…è€…æ¨¡å¼\n\n- ç­‰å¾…è€…æ¨¡å¼: é€šè¿‡å¯¹å¤šä¸ªå¼‚æ­¥è¿›ç¨‹è¿›è¡Œç›‘å¬ï¼Œæ¥è§¦å‘æœªæ¥çš„åŠ¨ä½œã€‚(æ„å»ºç®€æ˜“Promiseå¯¹è±¡ï¼Œå®ç°çŠ¶æ€æœº)\n\n- åœºæ™¯: ä¸èƒ½ç¡®å®šå…ˆåçš„å¼‚æ­¥é€»è¾‘ï¼Œä½†éœ€è¦ç­‰å¾…æ‰€æœ‰å¼‚æ­¥é€»è¾‘çš„å®Œæˆã€‚æ‰€æœ‰æˆåŠŸåæ‰§è¡ŒæˆåŠŸå›è°ƒï¼Œæœ‰ä¸€ä¸ªå¤±è´¥å°±æ‰§è¡Œå¤±è´¥çš„å›è°ƒå‡½æ•°ã€‚\n\nä¸éœ€è¦å®æ—¶ç›‘å¬æ‰€æœ‰å¼‚æ­¥é€»è¾‘æ˜¯å¦å®Œæˆï¼Œåªéœ€è¦ç›‘å¬æ³¨å†Œçš„å¼‚æ­¥é€»è¾‘çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¯¹æ‰€æœ‰çš„å¼‚æ­¥é€»è¾‘çš„çŠ¶æ€è¿›è¡Œä¸€æ¬¡ç¡®è®¤è¿­ä»£ã€‚\n\n### æ¥å£æ‹†åˆ†\nä¸€ä¸ªç­‰å¾…è€…å¯¹è±¡å†…éƒ¨å®šä¹‰äº†3ä¸ªæ•°ç»„ï¼Œåˆ†åˆ«å­˜å‚¨ç›‘å¬å¯¹è±¡ï¼ŒæˆåŠŸå›è°ƒå’Œå¤±è´¥å›è°ƒï¼›1ä¸ªç›‘æ§å¯¹è±¡çš„ç±»ï¼Œæœ‰2ä¸ªå±æ€§ï¼ˆæˆåŠŸçŠ¶æ€å’Œå¤±è´¥çŠ¶æ€ï¼‰ï¼Œ2ä¸ªæ–¹æ³•ï¼ˆæˆåŠŸå’Œå¤±è´¥æ–¹æ³•ï¼‰ï¼›ç§æœ‰æ–¹æ³•_execæ¥å¤„ç†æˆåŠŸæˆ–å¤±è´¥çš„å›è°ƒï¼›3ä¸ªå…±æœ‰æ–¹æ³•æ¥å£ï¼šwhenï¼ˆç›‘å¬å¼‚æ­¥é€»è¾‘ï¼‰ã€doneï¼ˆæ·»åŠ æˆåŠŸå›è°ƒï¼‰ã€failï¼ˆæ·»åŠ å¤±è´¥å›è°ƒï¼‰\n\n```js\n// ç­‰å¾…è€…å¯¹è±¡\nvar Waiter = function() {\n    // æ³¨å†Œäº†ç­‰å¾…å¯¹è±¡å®¹å™¨\n    var dfd = [] ;\n    // æˆåŠŸå›è°ƒæ–¹æ³•å®¹å™¨\n    var doneArr = [] ;\n    // å¤±è´¥å›è°ƒæ–¹æ³•å®¹å™¨\n    var failArr = [] ;\n    // ç¼“å­˜Arrayæ–¹æ³•slice\n    var _slice = Array.prototype.slice;\n    // ä¿å­˜å½“å‰ç­‰å¾…è€…å¯¹è±¡\n    var that = this ;\n\n    // ç›‘æ§å¯¹è±¡ç±»\n    var Primise = function() {\n        // ç›‘æ§å¯¹è±¡æ˜¯å¦è§£å†³æˆåŠŸçŠ¶æ€\n        this.resolved = false;\n        // ç›‘æ§å¯¹è±¡æ˜¯å¦è§£å†³å¤±è´¥çŠ¶æ€\n        this.rejected = false;\n    }\n    // ç›‘æ§å¯¹è±¡ç±»åŸå‹æ–¹æ³•\n    Primise.prototype = {\n        // è§£å†³æˆåŠŸ\n        resolve : function() {},\n        // è§£å†³å¤±è´¥\n        reject : function() {}\n    }\n\n    // åˆ›å»ºç›‘æ§å¯¹è±¡\n    that.Deferred = function() {\n        return new Primise() ;\n    }\n\n    // å›è°ƒæ‰§è¡Œæ–¹æ³•\n    function _exec(arr) {}\n\n    // ç›‘æ§å¼‚æ­¥æ–¹æ³• å‚æ•°ï¼šç›‘æ§å¯¹è±¡\n    that.when = function() {}\n\n    // è§£å†³æˆåŠŸå›è°ƒå‡½æ•°æ·»åŠ æ–¹æ³•\n    that.done = function() {}\n\n    // è§£å†³å¤±è´¥å›è°ƒå‡½æ•°æ·»åŠ æ–¹æ³•\n    that.fail = function() {}\n}\n```\n\n### ç›‘æ§å¯¹è±¡ç±»åŸå‹æ–¹æ³•\n```js\nPrimise.prototype = {\n    // è§£å†³æˆåŠŸ\n    resolve : function() {\n        // è®¾ç½®å½“å‰ç›‘æ§å¯¹è±¡è§£å†³æˆåŠŸ\n        this.resolved = true ;\n        // å¦‚æœæ²¡æœ‰ç›‘æ§å¯¹è±¡åˆ™å–æ¶ˆæ‰§è¡Œ\n        if(!dfd.length) {\n            return;\n        }\n        // éå†æ‰€æœ‰æ³¨å†Œäº†çš„ç›‘æ§å¯¹è±¡\n        for(var i = dfd.length - 1; i >= 0; i--) {\n            // å¦‚æœæœ‰ä»»æ„ä¸€ä¸ªç›‘æ§å¯¹è±¡æ²¡æœ‰è¢«è§£å†³æˆ–è€…è§£å†³å¤±è´¥åˆ™è¿”å›\n            if(dfd[i] && !dfd[i].resolved || dfd[i].rejected) {\n                return;\n            }\n            // æ¸…é™¤ç›‘æ§å¯¹è±¡ æˆåŠŸäº†å°±ä¸éœ€è¦å†ç›‘æ§\n            dfd.splice(i, 1);\n        }\n        // æ‰§è¡Œè§£å†³æˆåŠŸå›è°ƒæ–¹æ³•\n        _exec(doneArr);\n    },\n    // è§£å†³å¤±è´¥\n    reject : function() {\n        // è®¾ç½®å½“å‰ç›‘æ§å¯¹è±¡è§£å†³å¤±è´¥\n        this.rejected = true;\n        // å¦‚æœæ²¡æœ‰ç›‘æ§å¯¹è±¡åˆ™å–æ¶ˆæ‰§è¡Œ\n        if(!dfd.length) {\n            return;\n        }\n        // æ¸…é™¤æ‰€æœ‰ç›‘æ§å¯¹è±¡\n        dfd.splice(0);\n        // æ‰§è¡Œè§£å†³æˆåŠŸå›è°ƒæ–¹æ³•\n        _exec(failArr);\n    }\n}\n```\n\n### å›è°ƒæ‰§è¡Œæ–¹æ³•\n```js\nfunction _exec(arr){\n    var i = 0;\n    var len = arr.length;\n    // éå†å›è°ƒæ•°ç»„æ‰§è¡Œå›è°ƒ\n    for(; i < len; i++) {\n        try {\n            // æ‰§è¡Œå›è°ƒå‡½æ•°\n            arr[i] && arr[i]();\n        }catch(e) {\n\n        }\n    }\n}\n```\n\n### ç›‘æ§å¼‚æ­¥æ–¹æ³• å‚æ•°ï¼šç›‘æ§å¯¹è±¡\n```js\nthat.when = function() {\n    // è®¾ç½®ç›‘æ§å¯¹è±¡\n    dfd = _slice.call(arguments);\n    // è·å–ç›‘æ§å¯¹è±¡æ•°ç»„é•¿åº¦\n    var i = dfd.length;\n    // å‘å‰éå†ç›‘æ§å¯¹è±¡ï¼Œæœ€åä¸€ä¸ªç›‘æ§å¯¹è±¡çš„ç´¢å¼•å€¼ä¸ºlength-1\n    for(--i; i >= 0; i--) {\n        // å¦‚æœä¸å­˜åœ¨ç›‘æ§å¯¹è±¡ï¼Œæˆ–è€…ç›‘æ§å¯¹è±¡å·²ç»è§£å†³ï¼Œæˆ–è€…ä¸æ˜¯ç›‘æ§å¯¹è±¡\n        if(!dfd[i] || dfd[i].resolved || dfd[i].rejected || !dfd[i] instanceof Primise) {\n            // æ¸…ç†å†…å­˜ï¼Œæ¸…é™¤å½“å‰ç›‘æ§å¯¹è±¡\n            dfd.splice(i, 1);\n        }\n    }\n    // è¿”å›ç­‰å¾…è€…å¯¹è±¡\n    return that;\n}\n```\n\n### è§£å†³æˆåŠŸå›è°ƒå‡½æ•°æ·»åŠ æ–¹æ³•\n```js\nthat.done = function() {\n    // å‘æˆåŠŸå›è°ƒå‡½æ•°å®¹å™¨ä¸­æ·»åŠ å›è°ƒæ–¹æ³•\n    doneArr = doneArr.concat(_slice.call(arguments));\n    // è¿”å›ç­‰å¾…è€…å¯¹è±¡\n    return that;\n}\n```\n\n### è§£å†³å¤±è´¥å›è°ƒå‡½æ•°æ·»åŠ æ–¹æ³•\n```js\nthat.fail = function() {\n    // å‘å¤±è´¥å›è°ƒå‡½æ•°å®¹å™¨ä¸­æ·»åŠ å›è°ƒæ–¹æ³•\n    failArr = failArr.concat(_slice.call(arguments));\n    // è¿”å›ç­‰å¾…è€…å¯¹è±¡\n    return that;\n}\n```\n\n### æµ‹è¯•\n```js\n// åˆ›å»ºä¸€ä¸ªç­‰å¾…è€…å¯¹è±¡\nvar waiter = new Waiter();\n\n// ç¬¬ä¸€ä¸ªå½©è›‹ï¼Œ3ç§’åœæ­¢\nvar first = (function() {\n    // åˆ›å»ºç›‘å¬å¯¹è±¡\n    var dtd = waiter.Deferred();\n    setTimeout(function() {\n        console.log('first finish');\n        // å‘å¸ƒè§£å†³æˆåŠŸé—®é¢˜\n        dtd.resolve();\n        // å‘å¸ƒè§£å†³å¤±è´¥é—®é¢˜\n        // dtd.reject();\n    }, 3000) ;\n    // è¿”å›ç›‘å¬å¯¹è±¡\n    return dtd;\n})();\n\n// ç¬¬äºŒä¸ªå½©è›‹ï¼Œ6ç§’ååœæ­¢\nvar second = (function() {\n    // åˆ›å»ºç®€ä½“ä½ å¯¹è±¡\n    var dtd = waiter.Deferred();\n    setTimeout(function() {\n        console.log('second finish');\n        // å‘å¸ƒè§£å†³æˆåŠŸæ¶ˆæ¯\n        dtd.resolve();\n        // å‘å¸ƒè§£å†³å¤±è´¥é—®é¢˜\n        // dtd.reject();\n    }, 6000);\n    // è¿”å›ç›‘æ§å¯¹è±¡\n    return dtd;\n})();\n\n// ç›‘å¬ä¸¤ä¸ªå½©è›‹çš„å·¥ä½œçŠ¶æ€ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„æˆåŠŸå›è°ƒå‡½æ•°ä¸å¤±è´¥å›è°ƒå‡½æ•°\nwaiter\n    // ç›‘å¬ä¸¤ä¸ªå½©è›‹\n    .when(first, second)\n    // æ·»åŠ æˆåŠŸå›è°ƒå‡½æ•°\n    .done(function() {\n        console.log('success');\n    }, function() {\n        console.log('success again');\n    })\n    // æ·»åŠ å¤±è´¥å›è°ƒå‡½æ•°\n    .fail(function() {\n        console.log('fail');\n    });\n```\n\n### åº”ç”¨åœºæ™¯\n```js \n// å°è£…getè¯·æ±‚\nvar ajaxGet = function(url, success, fail) {\n    var xhr = new XMLHttpRequest();\n    // åˆ›å»ºç›‘æµ‹å¯¹è±¡\n    var dtd = waiter.Deferred();\n    xhr.onload = function(event) {\n        // è¯·æ±‚æˆåŠŸ\n        if(xhr.status >= 200 && xhr.status < 300 || xhr.status == 304) {\n            success && success() ;\n        // è¯·æ±‚å¤±è´¥ \n        }else {\n            dtd.reject() ;\n            fail && fail() ;\n        }\n    } ;\n    xhr.open('get', url, true);\n    xhr.send(null);\n}\n  \n// é•¿è½®è¯¢\n(function getAjaxData() {\n    // ä¿å­˜å½“å‰å‡½æ•°\n    var fn = arguments.callee;\n    setTimeout(function() {\n        $.get('./test.php', function() {\n            console.log('è½®è¯¢ä¸€æ¬¡');\n            // å†ä¸€æ¬¡æ‰§è¡Œè½®è¯¢\n            fn();\n        });\n    }, 5000);\n})();\n```\n\n### æ€»ç»“\nç­‰å¾…è€…æ¨¡å¼é€‚åˆç”¨äºå¤„ç†æ¯”è¾ƒè€—æ—¶çš„æ“ä½œæ¯”å¦‚å®šæ—¶å™¨æ“ä½œã€å¼‚æ­¥è¯·æ±‚ç­‰ã€‚ç­‰å¾…è€…æ¨¡å¼æä¾›äº†æŠ½è±¡éé˜»å¡çš„è§£å†³æ–¹æ¡ˆã€‚é€šè¿‡åˆ›å»º Promise å¯¹è±¡ï¼Œå¯¹åº”çŠ¶æ€å˜åŒ–è¿”å›å“åº”ï¼ŒåŒæ—¶ç›‘å¬è¿™äº›å“åº”ä¿¡æ¯ï¼Œå¹¶ä¸ºä¹‹æä¾›ç›¸åº”çš„å›è°ƒï¼Œæ ¹æ®çŠ¶æ€æ‰§è¡Œç›¸åº”çš„å›è°ƒæ–¹æ³•ã€‚\n","tags":["çŸ¥è¯†"],"categories":["JS"]},{"title":"äº‹ä»¶æœºåˆ¶","url":"%2F2019%2F%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E6%A8%A1%E5%BC%8F.html","content":"\näº‹ä»¶æœºåˆ¶çš„æ ¸å¿ƒå°±æ˜¯å‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€‚ç»´æŠ¤ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„ key å­˜çš„æ˜¯äº‹ä»¶ typeï¼Œå¯¹åº”çš„ value ä¸ºè§¦å‘ç›¸åº” type çš„å›è°ƒå‡½æ•°ï¼Œå³ listenersï¼Œç„¶å trigger æ—¶éå†é€šçŸ¥ï¼Œå³ forEach è¿›è¡Œå›è°ƒæ‰§è¡Œã€‚\n\n```js\nclass EventTarget {\n    constructor() {\n        this.listener = [];\n    }\n\n    // ç›‘å¬äº‹ä»¶\n    on(type, callback) {\n        // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ç›‘å¬è¯¥äº‹ä»¶ï¼Œåˆ™åˆå§‹åŒ–æ•°ç»„\n        if (!this.listeners[type]) this.listeners[type] = [];\n        this.listeners[type].push(callback);\n    }\n\n    // åªç›‘å¬ä¸€æ¬¡\n    once(type, callback) {\n        if (!this.listeners[type]) this.listeners[type] = [];\n        // once åªè§¦å‘ä¸€æ¬¡ï¼Œè§¦å‘å off å³å¯ å›è°ƒå‡½æ•°åŠ ä¸Šæ ‡è¯†\n        callback._once = true;\n        this.listeners[type].push(callback); \n    }\n\n    // å–æ¶ˆç›‘å¬\n    off(type, callback) {\n        const listeners = this.listeners[type];\n        if (Array.isArray(listeners)) {\n            // filter è¿”å›æ–°çš„æ•°ç»„ï¼Œä¼šæ¯æ¬¡å¯¹ this.listeners[type] åˆ†é…æ–°çš„ç©ºé—´\n            // this.listeners[type] = listeners.filter(l => l !== callback);\n            // æ ¹æ® type å–æ¶ˆå¯¹åº”çš„å›è°ƒ\n            const index = listeners.indexOf(callback);\n            // ç”¨ splice è¦å¥½äº›ï¼Œç›´æ¥æ“ä½œåŸæ•°ç»„\n            this.listeners[type].splice(index, 1);\n            // å¦‚æœå›è°ƒä¸ºç©ºï¼Œåˆ é™¤å¯¹è¯¥äº‹ä»¶çš„ç›‘å¬\n            if (this.listeners[type].length === 0) delete this.listeners[type];\n        }\n    }\n\n    // æ‰§è¡Œ æ‰³æœºç¤¾\n    trigger(event) {\n        // type ä¸ºå¿…ä¼ å±æ€§\n        const { type } = event;\n        if (!type) throw new Error('æ²¡æœ‰è¦è§¦å‘çš„äº‹ä»¶ï¼');\n        // åˆ¤æ–­æ˜¯å¦ä¹‹å‰å¯¹è¯¥äº‹ä»¶è¿›è¡Œç›‘å¬äº†\n        const listeners = this.listeners[type];\n        if (!listeners) throw new Error(`æ²¡æœ‰å¯¹è±¡ç›‘å¬ ${type} äº‹ä»¶ï¼`);\n        if (!event.target) event.target = this;\n        listeners.forEach(l => {\n            l(event);\n            // å¦‚æœé€šè¿‡ once ç›‘å¬ï¼Œæ‰§è¡Œä¸€æ¬¡åå–æ¶ˆ\n            if (l._once) this.off(type, l);\n        });\n    }\n}\n```\n\n```js\n// æµ‹è¯•\nfunction handleMessage(event) { console.log(`message received: ${ event.message }`); }\n\nfunction handleMessage2(event) { console.log(`message2 received: ${ event.message }`); }\n\nconst target = new EventTarget();\n\ntarget.on('message', handleMessage);\ntarget.on('message', handleMessage2);\ntarget.trigger({ type: 'message', message: 'hello custom event' }); // æ‰“å° messageï¼Œmessage2\n\ntarget.off('message', handleMessage);\ntarget.trigger({ type: 'message', message: 'off the event' }); // åªæ‰“å° message2\n\ntarget.once('words', handleMessage);\ntarget.trigger({ type: 'words', message: 'hello2 once event' }); // æ‰“å° words\ntarget.trigger({ type: 'words', message: 'hello2 once event' }); // æŠ¥é”™ï¼šæ²¡æœ‰å¯¹è±¡ç›‘å¬ words äº‹ä»¶ï¼\n```\n","tags":["æ·±å…¥ç†è§£"],"categories":["JS"]},{"title":"å…³äºrequestAnimationFrame","url":"%2F2019%2F%E5%85%B3%E4%BA%8ErequestAnimationFrame.html","content":"\nåœ¨JSä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `setTimeout` å’Œ `setIntarval` å®ç°åŠ¨ç”»ï¼Œä½†æ˜¯ H5 çš„å‡ºç°ï¼Œè®©æˆ‘ä»¬åˆå¤šäº†ä¸¤ç§å®ç°åŠ¨ç”»çš„æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ CSS åŠ¨ç”»ï¼ˆ`transition`ã€`animation`ï¼‰å’Œ H5çš„`canvas` å®ç°ã€‚é™¤æ­¤ä»¥å¤–ï¼ŒH5è¿˜æä¾›äº†ä¸€ä¸ªä¸“é—¨ç”¨äºè¯·æ±‚åŠ¨ç”»çš„APIï¼Œè®© DOM åŠ¨ç”»ã€canvasåŠ¨ç”»ã€svgåŠ¨ç”»ã€webGLåŠ¨ç”»ç­‰æœ‰ä¸€ä¸ªä¸“é—¨çš„åˆ·æ–°æœºåˆ¶ã€‚\n\n> ä¼ ç»Ÿçš„javascript åŠ¨ç”»æ˜¯é€šè¿‡å®šæ—¶å™¨ setTimeout æˆ–è€… setInterval å®ç°çš„ã€‚ä½†æ˜¯å®šæ—¶å™¨åŠ¨ç”»ä¸€ç›´å­˜åœ¨ä¸¤ä¸ªé—®é¢˜\n- åŠ¨ç”»çš„å¾ªæ—¶é—´ç¯é—´éš”ä¸å¥½ç¡®å®š(æ¨èçš„æœ€ä½³å¾ªç¯é—´éš”æ˜¯17msï¼ˆå¤§å¤šæ•°ç”µè„‘çš„æ˜¾ç¤ºå™¨åˆ·æ–°é¢‘ç‡æ˜¯60Hzï¼Œ1000ms/60ï¼‰)\n- å®šæ—¶å™¨ç¬¬äºŒä¸ªæ—¶é—´å‚æ•°åªæ˜¯æŒ‡å®šäº†å¤šä¹…åå°†åŠ¨ç”»ä»»åŠ¡æ·»åŠ åˆ°æµè§ˆå™¨çš„UIçº¿ç¨‹é˜Ÿåˆ—ä¸­ï¼Œå¦‚æœUIçº¿ç¨‹å¤„äºå¿™ç¢ŒçŠ¶æ€ï¼Œé‚£ä¹ˆåŠ¨ç”»ä¸ä¼šç«‹åˆ»æ‰§è¡Œ\n\n### 1. å®šä¹‰\n`requestAnimationFrame` æ–¹æ³•ä¼šå‘Šè¯‰æµè§ˆå™¨å¸Œæœ›æ‰§è¡ŒåŠ¨ç”»å¹¶è¯·æ±‚æµè§ˆå™¨åœ¨ä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰è°ƒç”¨å›è°ƒå‡½æ•°æ¥æ›´æ–°åŠ¨ç”»ã€‚\n\n```js\nwindow.requestAnimationFrame(callback)\n```\n\n* callbackï¼šä¸‹ä¸€æ¬¡é‡ç»˜ä¹‹å‰æ›´æ–°åŠ¨ç”»å¸§æ‰€è°ƒç”¨çš„å‡½æ•°ï¼Œ**callbackä»…æœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¸ºDOMHighResTimeStampå‚æ•°ï¼Œè¡¨ç¤ºrequestAnimationFrame()å¼€å§‹æ‰§è¡Œå›è°ƒå‡½æ•°çš„æ—¶åˆ»ã€‚**\n* è¿”å›å€¼ï¼šä¸€ä¸ª long ç±»å‹æ•´æ•°ï¼Œå”¯ä¸€æ ‡å¿—å…ƒç»„åœ¨åˆ—è¡¨ä¸­çš„ä½ç½®ï¼Œä½ å¯ä»¥ä¼ è¿™ä¸ªå€¼ç»™`cancelAnimationFrame()` ä»¥å–æ¶ˆåŠ¨ç”»ã€‚\n\nåœ¨ä½¿ç”¨å’Œå®ç°ä¸Šï¼Œ `requestAnimationFrame` ä¸ `setTimeout` ç±»ä¼¼ã€‚ä¸¾ä¸ªä¾‹å­ï¼š\n\n```js\nlet count = 0;\nlet rafId = null;\n/**\n * å›è°ƒå‡½æ•°\n * @param time requestAnimationFrame è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œè‡ªåŠ¨ä¼ å…¥çš„ä¸€ä¸ªæ—¶é—´\n */\nfunction requestAnimation(time) {\n  console.log(time); // æ‰“å°æ‰§è¡ŒrequestAnimationå‡½æ•°çš„æ—¶åˆ»\n  // åŠ¨ç”»æ²¡æœ‰æ‰§è¡Œå®Œï¼Œåˆ™é€’å½’æ¸²æŸ“\n  if (count < 5) {\n    count++;\n    // æ¸²æŸ“ä¸‹ä¸€å¸§\n    rafId = window.requestAnimationFrame(requestAnimation);\n  }\n}\n// æ¸²æŸ“ç¬¬ä¸€å¸§\nwindow.requestAnimationFrame(requestAnimation);\n```\n\n### 2.æ€æ ·æ‰§è¡Œ\n* é¦–å…ˆåˆ¤æ–­ `document.hidden` å±æ€§æ˜¯å¦å¯è§ï¼ˆtrueï¼‰ï¼Œå¯è§çŠ¶æ€ä¸‹æ‰èƒ½ç»§ç»­æ‰§è¡Œä»¥ä¸‹æ­¥éª¤\n* æµè§ˆå™¨æ¸…ç©ºä¸Šä¸€è½®çš„åŠ¨ç”»å‡½æ•°\n* `requestAnimationFrame` å°†å›è°ƒå‡½æ•°è¿½åŠ åˆ°åŠ¨ç”»å¸§è¯·æ±‚å›è°ƒå‡½æ•°åˆ—è¡¨çš„æœ«å°¾\n  **æ³¨æ„ï¼šå½“æ‰§è¡Œ requestAnimationFrame(callback)çš„æ—¶å€™ï¼Œä¸ä¼šç«‹å³è°ƒç”¨ callback å›è°ƒå‡½æ•°ï¼Œåªæ˜¯å°†å…¶æ”¾å…¥å›è°ƒå‡½æ•°é˜Ÿåˆ—è€Œå·²ï¼ŒåŒæ—¶æ³¨æ„ï¼Œæ¯ä¸ª callbackå›è°ƒå‡½æ•°éƒ½æœ‰ä¸€ä¸ª cancelled æ ‡å¿—ç¬¦ï¼Œåˆå§‹å€¼ä¸º falseï¼Œå¹¶å¯¹å¤–ä¸å¯è§ã€‚**\n* å½“é¡µé¢å¯è§å¹¶ä¸”åŠ¨ç”»å¸§è¯·æ±‚callback**å›è°ƒå‡½æ•°åˆ—è¡¨**ä¸ä¸ºç©ºæ—¶ï¼Œæµè§ˆå™¨ä¼š**å®šæœŸ**å°†è¿™äº›å›è°ƒå‡½æ•°åŠ å…¥åˆ°æµè§ˆå™¨ UI çº¿ç¨‹çš„é˜Ÿåˆ—ä¸­ï¼ˆ**ç”±ç³»ç»Ÿæ¥å†³å®šå›è°ƒå‡½æ•°çš„æ‰§è¡Œæ—¶æœº**ï¼‰ã€‚å½“æµè§ˆå™¨æ‰§è¡Œè¿™äº› callback å›è°ƒå‡½æ•°çš„æ—¶å€™ï¼Œä¼šåˆ¤æ–­æ¯ä¸ªå…ƒç»„çš„ callback çš„cancelledæ ‡å¿—ç¬¦ï¼Œåªæœ‰ **cancelled ä¸º false** æ—¶ï¼Œæ‰æ‰§è¡Œcallbackå›è°ƒå‡½æ•°ã€‚\n\n### 3. ä¼˜ç‚¹\n1. `requestAnimationFrame` è‡ªå¸¦**å‡½æ•°èŠ‚æµ**åŠŸèƒ½ï¼Œé‡‡ç”¨**ç³»ç»Ÿæ—¶é—´é—´éš”**ï¼Œä¿æŒæœ€ä½³ç»˜åˆ¶æ•ˆç‡ï¼Œä¸ä¼šå› ä¸ºé—´éš”æ—¶é—´çš„è¿‡çŸ­ï¼Œé€ æˆè¿‡åº¦ç»˜åˆ¶ï¼Œå¢åŠ é¡µé¢å¼€é”€ï¼Œä¹Ÿä¸ä¼šå› ä¸ºé—´éš”æ—¶é—´è¿‡é•¿ï¼Œé€ æˆåŠ¨ç”»å¡é¡¿ï¼Œä¸æµç¨‹ï¼Œå½±å“é¡µé¢ç¾è§‚ã€‚\n   æµè§ˆå™¨çš„é‡ç»˜é¢‘ç‡ä¸€èˆ¬ä¼šå’Œæ˜¾ç¤ºå™¨çš„åˆ·æ–°ç‡ä¿æŒåŒæ­¥ã€‚å¤§å¤šæ•°é‡‡ç”¨ W3Cè§„èŒƒï¼Œæµè§ˆå™¨çš„æ¸²æŸ“é¡µé¢çš„æ ‡å‡†é¢‘ç‡ä¹Ÿä¸º 60 FPSï¼ˆframes/per secondï¼‰å³æ¯ç§’é‡ç»˜60æ¬¡ï¼Œ**requestAnimationFrameçš„åŸºæœ¬æ€æƒ³æ˜¯ è®©é¡µé¢é‡ç»˜çš„é¢‘ç‡å’Œåˆ·æ–°é¢‘ç‡ä¿æŒåŒæ­¥**ï¼Œå³æ¯ 1000ms / 60 = **16.7ms**æ‰§è¡Œä¸€æ¬¡ã€‚\n   é€šè¿‡ `requestAnimationFrame` è°ƒç”¨å›è°ƒå‡½æ•°å¼•èµ·çš„é¡µé¢é‡ç»˜æˆ–å›æµçš„æ—¶é—´é—´éš”å’Œæ˜¾ç¤ºå™¨çš„åˆ·æ–°æ—¶é—´é—´éš”ç›¸åŒã€‚æ‰€ä»¥  `requestAnimationFrame`  ä¸éœ€è¦åƒ `setTimeout` é‚£æ ·ä¼ é€’æ—¶é—´é—´éš”ï¼Œè€Œæ˜¯æµè§ˆå™¨é€šè¿‡ç³»ç»Ÿè·å–å¹¶ä½¿ç”¨æ˜¾ç¤ºå™¨åˆ·æ–°é¢‘ç‡ã€‚ä¾‹å¦‚åœ¨æŸäº›é«˜é¢‘äº‹ä»¶ï¼ˆresizeï¼Œscroll ç­‰ï¼‰ä¸­ï¼Œä½¿ç”¨ `requestAnimationFrame` å¯ä»¥é˜²æ­¢åœ¨ä¸€ä¸ªåˆ·æ–°é—´éš”å†…å‘ç”Ÿå¤šæ¬¡å‡½æ•°æ‰§è¡Œï¼Œè¿™æ ·ä¿è¯äº†æµç¨‹åº¦ï¼Œä¹ŸèŠ‚çœäº†å¼€é”€\n2. å¦å¤–ï¼Œè¯¥å‡½æ•°çš„**å»¶æ—¶æ•ˆæœæ˜¯ç²¾ç¡®çš„**ï¼Œæ²¡æœ‰`setTimeout`æˆ–`setInterval`ä¸å‡†çš„æƒ…å†µï¼ˆJSæ˜¯å•çº¿ç¨‹çš„ï¼Œ`setTimeout` ä»»åŠ¡è¢«æ”¾è¿›å¼‚æ­¥é˜Ÿåˆ—ä¸­ï¼Œåªæœ‰å½“ä¸»çº¿ç¨‹ä¸Šçš„ä»»åŠ¡æ‰§è¡Œå®Œä»¥åï¼Œæ‰ä¼šå»æ£€æŸ¥è¯¥é˜Ÿåˆ—çš„ä»»åŠ¡æ˜¯å¦éœ€è¦å¼€å§‹æ‰§è¡Œï¼Œé€ æˆæ—¶é—´å»¶æ—¶ï¼‰ã€‚\n   `setTimeout`**çš„æ‰§è¡Œåªæ˜¯åœ¨å†…å­˜ä¸­å¯¹å›¾åƒå±æ€§è¿›è¡Œæ”¹å˜ï¼Œè¿™ä¸ªæ”¹å˜å¿…é¡»è¦ç­‰åˆ°ä¸‹æ¬¡æµè§ˆå™¨é‡ç»˜æ—¶æ‰ä¼šè¢«æ›´æ–°åˆ°å±å¹•ä¸Š**ã€‚å¦‚æœå’Œå±å¹•åˆ·æ–°æ­¥è°ƒä¸ä¸€è‡´ï¼Œå°±å¯èƒ½å¯¼è‡´ä¸­é—´æŸäº›å¸§çš„æ“ä½œè¢«è·¨è¶Šè¿‡å»ï¼Œç›´æ¥æ›´æ–°ä¸‹ä¸‹ä¸€å¸§çš„å›¾åƒã€‚å³ **æ‰å¸§**\n   ä½¿ç”¨  `requestAnimationFrame` æ‰§è¡ŒåŠ¨ç”»ï¼Œæœ€å¤§ä¼˜åŠ¿æ˜¯**èƒ½ä¿è¯å›è°ƒå‡½æ•°åœ¨å±å¹•æ¯ä¸€æ¬¡åˆ·æ–°é—´éš”ä¸­åªè¢«æ‰§è¡Œä¸€æ¬¡**ï¼Œè¿™æ ·å°±ä¸ä¼šå¼•èµ·ä¸¢å¸§ï¼ŒåŠ¨ç”»ä¹Ÿå°±ä¸ä¼šå¡é¡¿\n3. èŠ‚çœèµ„æºï¼ŒèŠ‚çœå¼€é”€\n   åœ¨ä¹‹å‰ä»‹ç»`requestAnimationFrame`æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ‘ä»¬çŸ¥é“åªæœ‰å½“é¡µé¢æ¿€æ´»çš„çŠ¶æ€ä¸‹ï¼Œé¡µé¢åˆ·æ–°ä»»åŠ¡æ‰ä¼šå¼€å§‹ï¼Œæ‰æ‰§è¡Œ `requestAnimationFrame`ï¼Œå½“é¡µé¢éšè—æˆ–æœ€å°åŒ–æ—¶ï¼Œä¼šè¢«æš‚åœï¼Œé¡µé¢æ˜¾ç¤ºï¼Œä¼šç»§ç»­æ‰§è¡Œã€‚**èŠ‚çœäº† CPU å¼€é”€**ã€‚\n   **æ³¨æ„ï¼šå½“é¡µé¢è¢«éšè—æˆ–æœ€å°åŒ–æ—¶ï¼Œå®šæ—¶å™¨`setTimeout`ä»åœ¨åå°æ‰§è¡ŒåŠ¨ç”»ä»»åŠ¡ï¼Œæ­¤æ—¶åˆ·æ–°åŠ¨ç”»æ˜¯å®Œå…¨æ²¡æœ‰æ„ä¹‰çš„ï¼ˆå®é™…ä¸Š FireFox/Chrome æµè§ˆå™¨å¯¹å®šæ—¶å™¨åšäº†ä¼˜åŒ–ï¼šé¡µé¢é—²ç½®æ—¶ï¼Œå¦‚æœæ—¶é—´é—´éš”å°äº 1000msï¼Œåˆ™åœæ­¢å®šæ—¶å™¨ï¼Œä¸`requestAnimationFrame`è¡Œä¸ºç±»ä¼¼ã€‚å¦‚æœæ—¶é—´é—´éš”>=1000msï¼Œå®šæ—¶å™¨ä¾ç„¶åœ¨åå°æ‰§è¡Œï¼‰**\n   ```js\n   // åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„Consoleé¡µæ‰§è¡Œä¸‹é¢ä»£ç ã€‚\n   // å½“å¼€å§‹è¾“å‡ºcountåï¼Œåˆ‡æ¢æµè§ˆå™¨tabé¡µï¼Œå†åˆ‡æ¢å›æ¥ï¼Œå¯ä»¥å‘ç°æ‰“å°çš„å€¼ä»ç¦»å¼€å‰çš„å€¼ç»§ç»­è¾“å‡º\n   let count = 0;\n       function requestAnimation() {\n           if (count < 100) {\n               count++;\n               console.log(count);\n               requestAnimationFrame(requestAnimation);\n           }\n       }\n   requestAnimationFrame(requestAnimation);\n   ```\n4. èƒ½å¤Ÿåœ¨åŠ¨ç”»æµåˆ·æ–°ä¹‹åæ‰§è¡Œï¼Œå³**ä¸Šä¸€ä¸ªåŠ¨ç”»æµä¼šå®Œæ•´æ‰§è¡Œ**\n\n### 4. å®ç°\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `requestAnimationFrame` å®ç°`setInterval`åŠ `setTimeout`\n\n```js\n// setIntervalå®ç°\nfunction setInterval(callback, interval) {\n    let timer\n    const now = Date.now\n    let startTime = now()\n    let endTime = startTime\n    const loop = () ={\n        timer = window.requestAnimationFrame(loop)\n        endTime = now()\n        if (endTime - startTime >= interval) {\n            startTime = endTime = now()\n            callback(timer)\n        }\n    }\n    timer = window.requestAnimationFrame(loop)\n    return timer\n}\n\nlet a = 0\nsetInterval(timer ={\n    console.log(a)\n    a++\n    if (a === 3) window.cancelAnimationFrame(timer)\n}, 1000)\n// 0\n// 1\n// 2\n```\n\n```js\n// setTimeout å®ç°\nfunction setTimeout(callback, interval) {\n    let timer\n    const now = Date.now\n    let startTime = now()\n    let endTime = startTime\n    const loop = () ={\n        timer = window.requestAnimationFrame(loop)\n        endTime = now()\n        if (endTime - startTime >= interval) {\n            callback(timer)\n            window.cancelAnimationFrame(timer)\n        }\n    }\n    timer = window.requestAnimationFrame(loop)\n    return timer\n}\n\nlet a = 0\nsetTimeout(timer ={\n    console.log(a)\n    a++\n}, 1000)\n// 0\n```\n\n### 5. å‚è€ƒ\n[MDN](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame)\n","tags":["æ·±å…¥ç†è§£"],"categories":["JS"]},{"title":"gitç›¸å…³é—®é¢˜åœºæ™¯å’Œå‘½ä»¤","url":"%2F2019%2Fgit%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98%E5%9C%BA%E6%99%AF%E5%92%8C%E5%91%BD%E4%BB%A4.html","content":"\n### ä¸€ã€å¿…å¤‡çŸ¥è¯†ç‚¹\n![git](http://cdn.mydearest.cn/blog/images/git.png)\n\n---\n<!--more-->\n\n#### ä»“åº“\n1. **Remote:** è¿œç¨‹ä¸»ä»“åº“ï¼›\n2. **Repositoryï¼š** æœ¬åœ°ä»“åº“ï¼›\n3. **Indexï¼š** Gitè¿½è¸ªæ ‘,æš‚å­˜åŒºï¼›\n4. **workspaceï¼š** æœ¬åœ°å·¥ä½œåŒºï¼ˆå³ä½ ç¼–è¾‘å™¨çš„ä»£ç ï¼‰\n\n### äºŒã€git add æäº¤åˆ°æš‚å­˜åŒºï¼Œå‡ºé”™æ€ä¹ˆåŠ\nä¸€èˆ¬ä»£ç æäº¤æµç¨‹ä¸ºï¼š**å·¥ä½œåŒº** -`git status` æŸ¥çœ‹çŠ¶æ€ -`git add .` å°†æ‰€æœ‰ä¿®æ”¹åŠ å…¥**æš‚å­˜åŒº**-`git commit -m \"æäº¤æè¿°\"` å°†ä»£ç æäº¤åˆ° **æœ¬åœ°ä»“åº“** -`git push` å°†æœ¬åœ°ä»“åº“ä»£ç æ›´æ–°åˆ° **è¿œç¨‹ä»“åº“**\n\n#### åœºæ™¯1ï¼šå·¥ä½œåŒº\nå½“ä½ æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œæƒ³ç›´æ¥ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹æ—¶ï¼Œç”¨å‘½ä»¤` git checkout -- file`ã€‚\n\n```js\n// ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹\ngit checkout -- <æ–‡ä»¶å>\n```\n\n#### åœºæ™¯2ï¼šæš‚å­˜åŒº\nå½“ä½ ä¸ä½†æ”¹ä¹±äº†å·¥ä½œåŒºæŸä¸ªæ–‡ä»¶çš„å†…å®¹ï¼Œè¿˜ `git add` æ·»åŠ åˆ°äº†æš‚å­˜åŒºæ—¶ï¼Œæƒ³ä¸¢å¼ƒä¿®æ”¹ï¼Œåˆ†ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥ç”¨å‘½ä»¤ `git reset HEAD file`ï¼Œå°±å›åˆ°äº†åœºæ™¯1ï¼Œç¬¬äºŒæ­¥æŒ‰åœºæ™¯1æ“ä½œã€‚\n\n```js\ngit reset HEAD <æ–‡ä»¶å// æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ’¤é”€æ‰ï¼ˆunstageï¼‰ï¼Œé‡æ–°æ”¾å›å·¥ä½œåŒºã€‚\n```\n\n### ä¸‰ã€git commit æäº¤åˆ°æœ¬åœ°ä»“åº“ï¼Œå‡ºé”™æ€ä¹ˆåŠï¼Ÿ\n#### 1. æäº¤ä¿¡æ¯å‡ºé”™\næ›´æ”¹ commit ä¿¡æ¯\n\n```js\ngit commit --amend -mâ€œæ–°æäº¤æ¶ˆæ¯â€\n```\n\n#### 2. æ¼æäº¤\ncommit æ—¶ï¼Œé—æ¼æäº¤éƒ¨åˆ†æ›´æ–°ï¼Œæœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š\n\n* æ–¹æ¡ˆä¸€ï¼šå†æ¬¡ commit\n  ```js\n  git commit -m æäº¤æ¶ˆæ¯\n  ```\n  \n  \n  æ­¤æ—¶ï¼Œgit ä¸Šä¼šå‡ºç°ä¸¤æ¬¡ commit\n* æ–¹æ¡ˆäºŒï¼šé—æ¼æ–‡ä»¶æäº¤åˆ°ä¹‹å‰ commit ä¸Š\n  ```js\n  git add missed-file // missed-file ä¸ºé—æ¼æäº¤æ–‡ä»¶\n  git commit --amend --no-edit\n  ```\n  \n  \n  `--no-edit`Â è¡¨ç¤ºæäº¤æ¶ˆæ¯ä¸ä¼šæ›´æ”¹ï¼Œåœ¨ git ä¸Šä»…ä¸ºä¸€æ¬¡æäº¤\n\n#### 3. æäº¤é”™è¯¯æ–‡ä»¶ï¼Œå›é€€åˆ°ä¸Šä¸€ä¸ª commit ç‰ˆæœ¬ï¼Œå† commit\n##### git reset\nåˆ é™¤æŒ‡å®šçš„ commit\n\n```js\n// ä¿®æ”¹ç‰ˆæœ¬åº“ï¼Œä¿ç•™æš‚å­˜åŒºï¼Œä¿ç•™å·¥ä½œåŒº\n// å°†ç‰ˆæœ¬åº“è½¯å›é€€1ä¸ªç‰ˆæœ¬ï¼Œè½¯å›é€€è¡¨ç¤ºå°†æœ¬åœ°ç‰ˆæœ¬åº“çš„å¤´æŒ‡é’ˆå…¨éƒ¨é‡ç½®åˆ°æŒ‡å®šç‰ˆæœ¬ï¼Œä¸”å°†è¿™æ¬¡æäº¤ä¹‹åçš„æ‰€æœ‰å˜æ›´éƒ½ç§»åŠ¨åˆ°æš‚å­˜åŒºã€‚\ngit reset --soft HEAD~1\n\n// ä¿®æ”¹ç‰ˆæœ¬åº“ï¼Œä¿®æ”¹æš‚å­˜åŒºï¼Œä¿®æ”¹å·¥ä½œåŒº\n// å°†ç‰ˆæœ¬åº“å›é€€1ä¸ªç‰ˆæœ¬ï¼Œä¸ä»…ä»…æ˜¯å°†æœ¬åœ°ç‰ˆæœ¬åº“çš„å¤´æŒ‡é’ˆå…¨éƒ¨é‡ç½®åˆ°æŒ‡å®šç‰ˆæœ¬ï¼Œä¹Ÿä¼šé‡ç½®æš‚å­˜åŒºï¼Œå¹¶ä¸”ä¼šå°†å·¥ä½œåŒºä»£ç ä¹Ÿå›é€€åˆ°è¿™ä¸ªç‰ˆæœ¬\ngit reset --hard HEAD~1\n// gitç‰ˆæœ¬å›é€€ï¼Œå›é€€åˆ°ç‰¹å®šçš„commit_idç‰ˆæœ¬ï¼Œå¯ä»¥é€šè¿‡git logæŸ¥çœ‹æäº¤å†å²ï¼Œä»¥ä¾¿ç¡®å®šè¦å›é€€åˆ°å“ªä¸ªç‰ˆæœ¬(commit ä¹‹åçš„å³ä¸ºID);\ngit reset --hard commit_id \n```\n\n##### git revert\næ’¤é”€ æŸæ¬¡æ“ä½œï¼Œæ­¤æ¬¡æ“ä½œä¹‹å‰å’Œä¹‹åçš„commitå’Œhistoryéƒ½ä¼šä¿ç•™ï¼Œå¹¶ä¸”æŠŠè¿™æ¬¡æ’¤é”€\n\nä½œä¸ºä¸€æ¬¡æœ€æ–°çš„æäº¤\n\n```js\n// æ’¤é”€å‰ä¸€æ¬¡ commit\ngit revert HEAD\n// æ’¤é”€å‰å‰ä¸€æ¬¡ commit\ngit revert HEAD^\n// (æ¯”å¦‚ï¼šfa042ce57ebbe5bb9c8db709f719cec2c58ee7ffï¼‰æ’¤é”€æŒ‡å®šçš„ç‰ˆæœ¬ï¼Œæ’¤é”€ä¹Ÿä¼šä½œä¸ºä¸€æ¬¡æäº¤è¿›è¡Œä¿å­˜ã€‚\ngit revert commit\n```\n\n`git revert`æ˜¯æäº¤ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œå°†éœ€è¦`revert`çš„ç‰ˆæœ¬çš„å†…å®¹å†åå‘ä¿®æ”¹å›å»ï¼Œ\nç‰ˆæœ¬ä¼šé€’å¢ï¼Œä¸å½±å“ä¹‹å‰æäº¤çš„å†…å®¹\n\n##### `git revert` å’Œ `git reset` çš„åŒºåˆ«\n* `git revert`æ˜¯ç”¨ä¸€æ¬¡æ–°çš„commitæ¥å›æ»šä¹‹å‰çš„commitï¼Œ`git reset`æ˜¯ç›´æ¥åˆ é™¤æŒ‡å®šçš„commitã€‚\n* åœ¨å›æ»šè¿™ä¸€æ“ä½œä¸Šçœ‹ï¼Œæ•ˆæœå·®ä¸å¤šã€‚ä½†æ˜¯åœ¨æ—¥åç»§ç»­mergeä»¥å‰çš„è€ç‰ˆæœ¬æ—¶æœ‰åŒºåˆ«ã€‚å› ä¸º`git revert`æ˜¯ç”¨ä¸€æ¬¡é€†å‘çš„commitâ€œä¸­å’Œâ€ä¹‹å‰çš„æäº¤ï¼Œå› æ­¤æ—¥ååˆå¹¶è€çš„branchæ—¶ï¼Œå¯¼è‡´è¿™éƒ¨åˆ†æ”¹å˜ä¸ä¼šå†æ¬¡å‡ºç°ï¼Œä½†æ˜¯`git reset`æ˜¯ä¹‹é—´æŠŠæŸäº›commitåœ¨æŸä¸ªbranchä¸Šåˆ é™¤ï¼Œå› è€Œå’Œè€çš„branchå†æ¬¡mergeæ—¶ï¼Œè¿™äº›è¢«å›æ»šçš„commitåº”è¯¥è¿˜ä¼šè¢«å¼•å…¥ã€‚\n* `git reset` æ˜¯æŠŠHEADå‘åç§»åŠ¨äº†ä¸€ä¸‹ï¼Œè€Œ`git revert`æ˜¯HEADç»§ç»­å‰è¿›ï¼Œåªæ˜¯æ–°çš„commitçš„å†…å®¹å’Œè¦revertçš„å†…å®¹æ­£å¥½ç›¸åï¼Œèƒ½å¤ŸæŠµæ¶ˆè¦è¢«revertçš„å†…å®¹ã€‚\n\n### å››ã€å¸¸ç”¨å‘½ä»¤\n#### 1. åˆå§‹å¼€å‘ git æ“ä½œæµç¨‹\n* å…‹éš†æœ€æ–°ä¸»åˆ†æ”¯é¡¹ç›®ä»£ç  `git clone åœ°å€`\n* åˆ›å»ºæœ¬åœ°åˆ†æ”¯ `git branch åˆ†æ”¯å`\n* æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ `git branch`\n* æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ `git branch -a`\n* åˆ‡æ¢åˆ†æ”¯  `git checkout åˆ†æ”¯å ` (ä¸€èˆ¬ä¿®æ”¹æœªæäº¤åˆ™æ— æ³•åˆ‡æ¢ï¼Œå¤§å°å†™é—®é¢˜ç»å¸¸ä¼šæœ‰ï¼Œå¯å¼ºåˆ¶åˆ‡æ¢  `git checkout åˆ†æ”¯å -f`  éå¿…é¡»æ…ç”¨)\n* å°†æœ¬åœ°åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯ `git push <è¿œç¨‹ä»“åº“<æœ¬åœ°åˆ†æ”¯>:<è¿œç¨‹åˆ†æ”¯>`\n\n#### 2. git fetch\nå°†æŸä¸ªè¿œç¨‹ä¸»æœºçš„æ›´æ–°ï¼Œå…¨éƒ¨/åˆ†æ”¯ å–å›æœ¬åœ°ï¼ˆæ­¤æ—¶ä¹‹æ›´æ–°äº†Repositoryï¼‰å®ƒå–å›çš„ä»£ç å¯¹ä½ æœ¬åœ°çš„å¼€å‘ä»£ç æ²¡æœ‰å½±å“ï¼Œå¦‚éœ€å½»åº•æ›´æ–°éœ€åˆå¹¶æˆ–ä½¿ç”¨`git pull`\n\n#### 3. git pull\næ‹‰å–è¿œç¨‹ä¸»æœºæŸåˆ†æ”¯çš„æ›´æ–°ï¼Œå†ä¸æœ¬åœ°çš„æŒ‡å®šåˆ†æ”¯åˆå¹¶ï¼ˆç›¸å½“ä¸fetchåŠ ä¸Šäº†åˆå¹¶åˆ†æ”¯åŠŸèƒ½çš„æ“ä½œï¼‰\n\n#### 4. git push\nå°†æœ¬åœ°åˆ†æ”¯çš„æ›´æ–°ï¼Œæ¨é€åˆ°è¿œç¨‹ä¸»æœºï¼Œå…¶å‘½ä»¤æ ¼å¼ä¸`git pull`ç›¸ä¼¼\n\n#### 5. åˆ†æ”¯æ“ä½œ\n* ä½¿ç”¨ Git ä¸‹è½½æŒ‡å®šåˆ†æ”¯å‘½ä»¤ä¸ºï¼š`git clone -b åˆ†æ”¯åä»“åº“åœ°å€`\n* æ‹‰å–è¿œç¨‹æ–°åˆ†æ”¯ `git checkout -b serverfix origin/serverfix`\n* åˆå¹¶æœ¬åœ°åˆ†æ”¯ `git merge hotfix`ï¼š(å°† hotfix åˆ†æ”¯åˆå¹¶åˆ°å½“å‰åˆ†æ”¯)\n* åˆå¹¶è¿œç¨‹åˆ†æ”¯ `git merge origin/serverfix`\n* åˆ é™¤æœ¬åœ°åˆ†æ”¯ `git branch -d hotfix`ï¼š(åˆ é™¤æœ¬åœ° hotfix åˆ†æ”¯)\n* åˆ é™¤è¿œç¨‹åˆ†æ”¯ `git push origin --delete serverfix` \nor\n```js\ngit branch -D master; //åˆ é™¤æœ¬åœ°masteråˆ†æ”¯\ngit push origin :master; //åˆ é™¤è¿œç¨‹masteråˆ†æ”¯\n\ngit pull origin master:master // è¿œç¨‹:æœ¬åœ°\ngit push origin master:master // æœ¬åœ°:è¿œç¨‹\ngit push --set-upstream origin master // å°†æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åŒååˆ†æ”¯ç›¸å…³è”\n```\n* ä¸Šä¼ æ–°å‘½åçš„æœ¬åœ°åˆ†æ”¯ï¼š`git push origin newName`;\n* åˆ›å»ºæ–°åˆ†æ”¯ï¼š`git branch branchName`ï¼š(åˆ›å»ºåä¸º branchName çš„æœ¬åœ°åˆ†æ”¯)\n* åˆ‡æ¢åˆ°æ–°åˆ†æ”¯ï¼š`git checkout branchName`ï¼š(åˆ‡æ¢åˆ° branchName åˆ†æ”¯)\n* åˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯ï¼š`git checkout -b branchName`ï¼š(ç›¸å½“äºä»¥ä¸Šä¸¤æ¡å‘½ä»¤çš„åˆå¹¶)\n* æŸ¥çœ‹æœ¬åœ°åˆ†æ”¯ï¼š`git branch`\n* æŸ¥çœ‹è¿œç¨‹ä»“åº“æ‰€æœ‰åˆ†æ”¯ï¼š`git branch -a`\n* æœ¬åœ°åˆ†æ”¯é‡å‘½åï¼š `git branch -m oldName newName`\n* é‡å‘½åè¿œç¨‹åˆ†æ”¯å¯¹åº”çš„æœ¬åœ°åˆ†æ”¯ï¼š`git branch -m oldName newName`\n* æŠŠä¿®æ”¹åçš„æœ¬åœ°åˆ†æ”¯ä¸è¿œç¨‹åˆ†æ”¯å…³è”ï¼š`git branch --set-upstream-to origin/newName`\n\n### äº”ã€ä¼˜åŒ–æ“ä½œ\n#### 1. æ‹‰å–ä»£ç  pull --rebase\nåœ¨å›¢é˜Ÿåä½œè¿‡ç¨‹ä¸­ï¼Œå‡è®¾ä½ å’Œä½ çš„åŒä¼´åœ¨æœ¬åœ°ä¸­åˆ†åˆ«æœ‰å„è‡ªçš„æ–°æäº¤ï¼Œè€Œä½ çš„åŒä¼´å…ˆäºä½  `push` äº†ä»£ç åˆ°è¿œç¨‹åˆ†æ”¯ä¸Šï¼Œæ‰€ä»¥ä½ å¿…é¡»å…ˆæ‰§è¡Œ `git pull` æ¥è·å–åŒä¼´çš„æäº¤ï¼Œç„¶åæ‰èƒ½` push` è‡ªå·±çš„æäº¤åˆ°è¿œç¨‹åˆ†æ”¯ã€‚\n\nè€ŒæŒ‰ç…§ Git çš„é»˜è®¤ç­–ç•¥ï¼Œå¦‚æœè¿œç¨‹åˆ†æ”¯å’Œæœ¬åœ°åˆ†æ”¯ä¹‹é—´çš„æäº¤çº¿å›¾æœ‰åˆ†å‰çš„è¯ï¼ˆå³ä¸æ˜¯ fast-forwardedï¼‰ï¼ŒGit ä¼šæ‰§è¡Œä¸€æ¬¡ `merge` æ“ä½œï¼Œå› æ­¤äº§ç”Ÿä¸€æ¬¡æ²¡æ„ä¹‰çš„æäº¤è®°å½•ï¼Œä»è€Œé€ æˆäº†åƒä¸Šå›¾é‚£æ ·çš„æ··ä¹±ã€‚\n\nå…¶å®åœ¨ pull æ“ä½œçš„æ—¶å€™ï¼Œï¼Œä½¿ç”¨ `git pull --rebase `é€‰é¡¹å³å¯å¾ˆå¥½åœ°è§£å†³ä¸Šè¿°é—®é¢˜ã€‚ åŠ ä¸Š `--rebase` å‚æ•°çš„ä½œç”¨æ˜¯ï¼Œæäº¤çº¿å›¾æœ‰åˆ†å‰çš„è¯ï¼ŒGit ä¼š rebase ç­–ç•¥æ¥ä»£æ›¿é»˜è®¤çš„ merge ç­–ç•¥ã€‚\n\nå‡è®¾æäº¤çº¿å›¾åœ¨æ‰§è¡Œ pull å‰æ˜¯è¿™æ ·çš„ï¼š\n\n```\n                 A---B---C  remotes/origin/master\n                /\n           D---E---F---G  master\n```\n\nå¦‚æœæ˜¯æ‰§è¡Œ `git pull` åï¼Œæäº¤çº¿å›¾ä¼šå˜æˆè¿™æ ·ï¼š\n\n```\n                 A---B---C remotes/origin/master\n                /         \\\n           D---E---F---G---H master\n```\n\nç»“æœå¤šå‡ºäº† `H` è¿™ä¸ªæ²¡å¿…è¦çš„æäº¤è®°å½•ã€‚å¦‚æœæ˜¯æ‰§è¡Œ `git pull --rebase` çš„è¯ï¼Œæäº¤çº¿å›¾å°±ä¼šå˜æˆè¿™æ ·ï¼š\n\n```\n                       remotes/origin/master\n                           |\n           D---E---A---B---C---F'---G'  master\n```\n\n`F` `G` ä¸¤ä¸ªæäº¤é€šè¿‡ `rebase` æ–¹å¼é‡æ–°æ‹¼æ¥åœ¨ `C` ä¹‹åï¼Œå¤šä½™çš„åˆ†å‰å»æ‰äº†ï¼Œç›®çš„è¾¾åˆ°ã€‚\n\n##### å°ç»“\nå¤§å¤šæ•°æ—¶å€™ï¼Œä½¿ç”¨ `git pull --rebase `æ˜¯ä¸ºäº†ä½¿æäº¤çº¿å›¾æ›´å¥½çœ‹ï¼Œä»è€Œæ–¹ä¾¿ code reviewã€‚\n\nä¸è¿‡ï¼Œå¦‚æœä½ å¯¹ä½¿ç”¨ git è¿˜ä¸æ˜¯ååˆ†ç†Ÿç»ƒçš„è¯ï¼Œæˆ‘çš„å»ºè®®æ˜¯ `git pull --rebase `å¤šç»ƒä¹ å‡ æ¬¡ä¹‹åå†ä½¿ç”¨ï¼Œå› ä¸º **rebase åœ¨ git ä¸­ï¼Œç®—å¾—ä¸Šæ˜¯ã€å±é™©è¡Œä¸ºã€**ã€‚\n\nå¦å¤–ï¼Œè¿˜éœ€æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ `git pull --rebase `æ¯”ç›´æ¥ pull å®¹æ˜“å¯¼è‡´å†²çªçš„äº§ç”Ÿï¼Œå¦‚æœé¢„æœŸå†²çªæ¯”è¾ƒå¤šçš„è¯ï¼Œå»ºè®®è¿˜æ˜¯ç›´æ¥ pullã€‚\n\næ³¨æ„ï¼š\ngit pull = git fetch + git merge\ngit pull --rebase = git fetch + git rebase\n\n#### 2. åˆä»£ç  merge --no-ff\nä¸Šè¿°çš„ `git pull --rebase` ç­–ç•¥ç›®çš„æ˜¯ä¿®æ•´æäº¤çº¿å›¾ï¼Œä½¿å…¶å½¢æˆä¸€æ¡ç›´çº¿ï¼Œè€Œå³å°†è¦ç”¨åˆ°çš„ `git merge --no-ff <branch-name>` ç­–ç•¥ååæ˜¯åè¡Œå…¶é“ï¼Œåˆ»æ„åœ°å¼„å‡ºæäº¤çº¿å›¾åˆ†å‰å‡ºæ¥ã€‚\n\nå‡è®¾ä½ åœ¨æœ¬åœ°å‡†å¤‡åˆå¹¶ä¸¤ä¸ªåˆ†æ”¯ï¼Œè€Œåˆšå¥½è¿™ä¸¤ä¸ªåˆ†æ”¯æ˜¯ fast-forwarded çš„ï¼Œé‚£ä¹ˆç›´æ¥åˆå¹¶åä½ å¾—åˆ°ä¸€ä¸ªç›´çº¿çš„æäº¤çº¿å›¾ï¼Œå½“ç„¶è¿™æ ·æ²¡ä»€ä¹ˆåå¤„ï¼Œä½†å¦‚æœä½ æƒ³æ›´æ¸…æ™°åœ°å‘Šè¯‰ä½ åŒä¼´ï¼š**è¿™ä¸€ç³»åˆ—çš„æäº¤éƒ½æ˜¯ä¸ºäº†å®ç°åŒä¸€ä¸ªç›®çš„**ï¼Œé‚£ä¹ˆä½ å¯ä»¥åˆ»æ„åœ°å°†è¿™æ¬¡æäº¤å†…å®¹å¼„æˆä¸€æ¬¡æäº¤çº¿å›¾åˆ†å‰ã€‚\n\næ‰§è¡Œ `git merge --no-ff <branch-name>` çš„ç»“æœå¤§æ¦‚ä¼šæ˜¯è¿™æ ·çš„ï¼š\n\n![git merge --no-ff](http://cdn.mydearest.cn/blog/images/git-chain1.png)\n\nä¸­é—´çš„åˆ†å‰çº¿è·¯å›¾å¾ˆæ¸…æ™°çš„æ˜¾ç¤ºè¿™äº›æäº¤éƒ½æ˜¯ä¸ºäº†å®ç° **complete adjusting user domains and tags**\n\n##### æ›´è¿›ä¸€æ­¥\nå¾€å¾€æˆ‘çš„ä¹ æƒ¯æ˜¯ï¼Œåœ¨åˆå¹¶åˆ†æ”¯ä¹‹å‰ï¼ˆå‡è®¾è¦åœ¨æœ¬åœ°å°† feature åˆ†æ”¯åˆå¹¶åˆ° dev åˆ†æ”¯ï¼‰ï¼Œä¼šå…ˆæ£€æŸ¥ feature åˆ†æ”¯æ˜¯å¦ã€éƒ¨åˆ†è½åã€äº**è¿œç¨‹ dev åˆ†æ”¯**ï¼š\n\n```\ngit checkout dev\ngit pull # æ›´æ–° dev åˆ†æ”¯\ngit log feature..dev\n```\n\nå¦‚æœæ²¡æœ‰è¾“å‡ºä»»ä½•æäº¤ä¿¡æ¯çš„è¯ï¼Œå³è¡¨ç¤º feature å¯¹äº dev åˆ†æ”¯æ˜¯ up-to-date çš„ã€‚å¦‚æœæœ‰è¾“å‡ºçš„è¯è€Œé©¬ä¸Šæ‰§è¡Œäº† `git merge --no-ff` çš„è¯ï¼Œæäº¤çº¿å›¾ä¼šå˜æˆè¿™æ ·ï¼š\n\n![git-merge](http://cdn.mydearest.cn/blog/images/git-chain2.png)\n\næ‰€ä»¥è¿™æ—¶åœ¨åˆå¹¶å‰ï¼Œé€šå¸¸æˆ‘ä¼šå…ˆæ‰§è¡Œï¼š\n\n```\ngit checkout feature\ngit rebase dev\n```\n\nè¿™æ ·å°±å¯ä»¥å°† feature é‡æ–°æ‹¼æ¥åˆ°æ›´æ–°äº†çš„ dev ä¹‹åï¼Œç„¶åå°±å¯ä»¥åˆå¹¶äº†ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå¹²å‡€èˆ’æœçš„æäº¤çº¿å›¾ã€‚\n\n**å†æ¬¡æé†’ï¼šåƒä¹‹å‰æåˆ°çš„ï¼Œrebase æ˜¯ã€å±é™©è¡Œä¸ºã€ï¼Œå»ºè®®ä½ è¶³å¤Ÿç†Ÿæ‚‰ git æ—¶æ‰è¿™ä¹ˆåšï¼Œå¦åˆ™çš„è¯æ˜¯å¾—ä¸å¿å¤±çš„ã€‚**\n\n##### æ€»ç»“\nä½¿ç”¨ `git pull --rebase` å’Œ `git merge --no-ff` å…¶å®å’Œç›´æ¥ä½¿ç”¨ `git pull` `git merge` å¾—åˆ°çš„ä»£ç åº”è¯¥æ˜¯ä¸€æ ·ã€‚\n\nä½¿ç”¨ `git pull --rebase` ä¸»è¦æ˜¯ä¸ºæ˜¯å°†æäº¤çš„çº¿å›¾å¹³å¦åŒ–ï¼Œè€Œ `git merge --no-ff` åˆ™æ˜¯åˆ»æ„åˆ¶é€ åˆ†å‰ã€‚\n\ngit rebase å’Œ git merge ä¸»è¦çš„åŒºåˆ«åœ¨äºæ˜¯å¦ä¿ç•™åˆ†æ”¯çš„ commit æäº¤èŠ‚ç‚¹ï¼Œrebase ä¼šç»™ä½ ä¸€ä¸ªç®€æ´çš„çº¿æ€§å†å²æ ‘ã€‚rebase é€‚åˆå°åˆ†æ”¯ï¼Œå¤§åˆ†æ”¯è¿˜æ˜¯ä½¿ç”¨ merge --squashã€‚\n\n### å…­ã€SSH\n#### 1. æŸ¥çœ‹æ˜¯å¦ç”Ÿæˆäº† SSH å…¬é’¥\n```\n$ cd ~/.ssh\n$ ls\nid_rsa      id_rsa.pub      known_hosts\n```\n\nå…¶ä¸­ id_rsa æ˜¯ç§é’¥ï¼Œid_rsa.pub æ˜¯å…¬é’¥ã€‚\n\n#### 2. å¦‚æœæ²¡æœ‰é‚£å°±å¼€å§‹ç”Ÿæˆï¼Œè®¾ç½®å…¨å±€çš„user.nameä¸user.email\n```js\ngit config --list // æŸ¥çœ‹æ˜¯å¦è®¾ç½®äº†user.nameä¸user.emailï¼Œæ²¡æœ‰çš„è¯ï¼Œå»è®¾ç½®\n// è®¾ç½®å…¨å±€çš„user.nameä¸user.email\ngit config --global user.name \"XX\"\ngit config --global user.email \"XX\"\n```\n\n#### 3. è¾“å…¥ ssh-keygen å³å¯ï¼ˆæˆ–`ssh-keygen -t rsa -C \"email\"`ï¼‰\n```\n$ ssh-keygen\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/Users/schacon/.ssh/id_rsa):\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /Users/schacon/.ssh/id_rsa.\nYour public key has been saved in /Users/schacon/.ssh/id_rsa.pub.\nThe key fingerprint is:\n```\n\n#### 4. ç”Ÿæˆä¹‹åè·å–å…¬é’¥å†…å®¹ï¼Œè¾“å…¥ cat ~/.ssh/id_rsa.pub å³å¯ï¼Œ å¤åˆ¶ ssh-rsa ä¸€ç›´åˆ° .localè¿™ä¸€æ•´æ®µå†…å®¹\n```\n$ cat ~/.ssh/id_rsa.pub\nssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAklOUpkDHrfHY17SbrmTIpNLTGK9Tjom/BWDSU\nGPl+nafzlHDTYW7hdI4yZ5ew18JH4JW9jbhUFrviQzM7xlELEVf4h9lFX5QVkbPppSwg0cda3\nPbv7kOdJ/MTyBlWXFCR+HAo3FXRitBqxiX1nKhXpHAZsMciLq8V6RjsNAQwdsdMFvSlVK/7XA\nt3FaoJoAsncM1Q9x5+3V0Ww68/eIFmb1zuUFljQJKprrX88XypNDvjYNby6vw/Pb0rwert/En\nmZ+AW4OZPnTPI89ZPmVMLuayrD2cE86Z/il8b+gw3r3+1nKatmIkjn2so1d01QraTlMqVSsbx\nNrRFi9wrf+M7Q== schacon@agadorlaptop.local\n```\n\n#### 5. æ‰“å¼€ GitLab æˆ–è€… GitHubï¼Œç‚¹å‡»å¤´åƒï¼Œæ‰¾åˆ°è®¾ç½®é¡µ\n#### 6. å·¦ä¾§æ‰¾åˆ° SSH keys æŒ‰é’®å¹¶ç‚¹å‡»ï¼Œè¾“å…¥åˆšåˆšå¤åˆ¶çš„å…¬é’¥å³å¯\n### ä¸ƒã€æš‚å­˜\n`git stash` å¯ç”¨æ¥æš‚å­˜å½“å‰æ­£åœ¨è¿›è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚æƒ³ pull æœ€æ–°ä»£ç åˆä¸æƒ³ commit ï¼Œ æˆ–è€…å¦ä¸ºäº†ä¿®æ”¹ä¸€ä¸ªç´§æ€¥çš„ bug ï¼Œå…ˆ stashï¼Œä½¿è¿”å›åˆ°è‡ªå·±ä¸Šä¸€ä¸ª commit,ï¼Œæ”¹å®Œ bug ä¹‹åå† stash pop , ç»§ç»­åŸæ¥çš„å·¥ä½œï¼›\n\n* æ·»åŠ ç¼“å­˜æ ˆï¼š `git stash` ;\n* æŸ¥çœ‹ç¼“å­˜æ ˆï¼š `git stash list` ;\n* æ¨å‡ºç¼“å­˜æ ˆï¼š `git stash pop` ;\n* å–å‡ºç‰¹å®šç¼“å­˜å†…å®¹ï¼š `git stash apply stash@{1}` ;\n\n### å…«ã€æ–‡ä»¶åè¿‡é•¿é”™è¯¯\nFilename too long warning: Clone succeeded, but checkout failed.\n\n```\ngit config --system core.longpaths true\n```\n\n### ä¹ã€é‚®ç®±å’Œç”¨æˆ·å\n#### æŸ¥çœ‹\n```\ngit config user.name\n\ngit config user.email\n```\n\n#### ä¿®æ”¹\n```\ngit config --global user.name \"username\"\n\ngit config --global user.email \"email\"\n```\n\n### åã€.gitignore æ›´æ–°åç”Ÿæ•ˆï¼š\n```\ngit rm -r --cached .\ngit add .\ngit commit -m .gitignore is now working\n```\n\n### åä¸€ã€åŒæ­¥Github fork å‡ºæ¥çš„åˆ†æ”¯\n1ã€é…ç½®remoteï¼ŒæŒ‡å‘åŸå§‹ä»“åº“\n\n```\ngit remote add upstream https://github.com/cosyer/jelly.git\n```\n\n2ã€ä¸Šæ¸¸ä»“åº“è·å–åˆ°åˆ†æ”¯ï¼ŒåŠç›¸å…³çš„æäº¤ä¿¡æ¯ï¼Œå®ƒä»¬å°†è¢«ä¿å­˜åœ¨æœ¬åœ°çš„ upstream/master åˆ†æ”¯\n\n```\ngit fetch upstream\n# remote: Counting objects: 75, done.\n# remote: Compressing objects: 100% (53/53), done.\n# remote: Total 62 (delta 27), reused 44 (delta 9)\n# Unpacking objects: 100% (62/62), done.\n# From https://github.com/ORIGINAL_OWNER/ORIGINAL_REPOSITORY\n# * [new branch] master -upstream/master\n```\n\n3ã€åˆ‡æ¢åˆ°æœ¬åœ°çš„ master åˆ†æ”¯\n\n```\ngit checkout master\n# Switched to branch 'master'\n```\n\n4ã€æŠŠ upstream/master åˆ†æ”¯åˆå¹¶åˆ°æœ¬åœ°çš„ master åˆ†æ”¯ï¼Œæœ¬åœ°çš„ master åˆ†æ”¯ä¾¿è·Ÿä¸Šæ¸¸ä»“åº“ä¿æŒåŒæ­¥äº†ï¼Œå¹¶ä¸”æ²¡æœ‰ä¸¢å¤±æœ¬åœ°çš„ä¿®æ”¹ã€‚\n\n```\ngit merge upstream/master\n# Updating a422352..5fdff0f\n# Fast-forward\n# README | 9 -------\n# README.md | 7 ++++++\n# 2 files changed, 7 insertions(+), 9 deletions(-)\n# delete mode 100644 README\n# create mode 100644 README.md\n```\n\n5ã€ä¸Šä¼ åˆ°è‡ªå·±çš„è¿œç¨‹ä»“åº“ä¸­\n\n```\ngit push \n```\n\n### gitåˆå¹¶å¤šä¸ªcommit\nè¿‡å»æ€»æ˜¯ä½¿ç”¨`git reset --soft`å›é€€åˆ°ä¹‹å‰çš„çŠ¶æ€ï¼Œå† commit å push orgin master -f å¼ºæ¨åˆ°è¿œç¨‹åº“ï¼Œèƒ½å¤Ÿè¦†ç›–æ‰ä¹‹å‰çš„ commit ã€‚\n\nä½†åœ¨å›¢é˜Ÿåä½œæ—¶ï¼Œæ¯æ¬¡ commit å‰è¿˜éœ€è¦ rebase upstreamï¼Œè¿™ä¼šè‡ªåŠ¨å°†ä¸€äº›å…¶ä»–äººåšçš„ä¿®æ”¹ä¹Ÿè‡ªåŠ¨mergeåˆ°æœ¬åœ°çš„æºç ä¸­ã€‚å¦‚æœæ­¤æ—¶å¸Œæœ›è¦†ç›–å‰ä¸€æ¬¡ commit ï¼Œreset åˆ°ä¹‹å‰çš„çŠ¶æ€åï¼Œå†æ¬¡ commit çš„å†…å®¹å°±åŒ…å«äº†å…¶ä»–äººçš„ä¿®æ”¹ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ git rebase -i ã€‚\n\n#### åŸºæœ¬æ­¥éª¤\n- 1. git logæŸ¥çœ‹æ‰€æœ‰commitçš„æƒ…å†µï¼Œæ‰¾åˆ°è‡ªå·±æƒ³è¦åˆå¹¶çš„commitä¹‹å‰çš„é‚£ä¸ªcommitçš„sshç (å‰7ä½)ï¼›\n- 2. git rebase -i 43jk2l3ba343ï¼Œè¿™æ ·ä¼šå¼¹å‡ºä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ï¼›git reset --soft  HEAD^ ä¸Šä¸ªcommit ^^ä¸Šä¸Šä¸ªcommit HEAD~6ï¼›\n- 3. ä¿®æ”¹pickä¸ºsquashä¼šå°†è¿™ä¸ªcommitåˆå¹¶åˆ°å‰ä¸€ä¸ªcommitä¸­ï¼Œä¿å­˜é€€å‡ºï¼›\n- 4. æç¤ºå†™ä¸‹æ–°çš„commit messageï¼Œä¹‹å‰çš„messageå¯ä»¥ç”¨#æ³¨é‡Šæ‰ï¼Œä¿å­˜é€€å‡ºï¼›\n- 5. æ­¤æ—¶å†git logå°±ä¼šå‘ç°ï¼Œä¸¤ä¸ªcommitè¢«åˆå¹¶åˆ°ä¸€ä¸ªcommitä¸­ã€‚\n\n### ä¿®æ”¹pushåˆ°è¿œç¨‹çš„commit\n- git log\n- git rebase -i \n- pickä¿®æ”¹ä¸ºedit\n- git commit --amend ä¿®æ”¹æ–°çš„commit messageä¿å­˜\n- git rebase --continue\n- git push -f\n\n### Commit message å‰ç¼€è§„èŒƒæè¦\n| code      | info          \n|---------- |-------------- |\n| **feat**:msg | æ–°åŠŸèƒ½ feature | \n| **fix**:msg | ä¿®å¤bug| \n| **merge**:msg | merge ä¿¡æ¯| \n| **docs**:msg | æ–‡æ¡£ä¿®æ”¹ | \n| **style**:msg | æ ¼å¼ï¼Œä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ | \n| **refactor**: msg | é‡æ„å³ä¸æ˜¯æ–°å¢åŠŸèƒ½ï¼Œä¹Ÿä¸æ˜¯ä¿®æ”¹bugçš„ä»£ç å˜åŠ¨ | \n| **test**:msg | å¢åŠ æµ‹è¯•| \n| **chore**:msg | æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨| \n| **rm**:msg | åˆ é™¤æ–‡ä»¶æˆ–ä»£ç  | \n\n### æ¢å¤è¯¯åˆ é™¤çš„stash\n```bash\n# æ˜¾ç¤ºæ‰€æœ‰ä¸å¯è®¿é—®å¯¹è±¡\ngit fask --unreachable\n\ngit show 302063e31742cbce7c5fdb917edf520183154cc1 > D:\\recovery\\backup.txt\n```\n\n> åœ¨ä½¿ç”¨ git fsck â€“unreachable å‘½ä»¤è¾“å‡ºçš„å¾ˆå¤šæ–‡ä»¶é‡Œé¢ï¼Œæœ‰å¾ˆå¤šæ˜¯å¸¦æœ‰ commit å’Œ tree çš„æ ‡è¯†çš„ï¼Œè¿™äº›å¯ä»¥ä½¿ç”¨ git stash apply åŠ æ ‡è®°å·è¿›è¡Œæ‰¾å›ã€‚è€Œ blob çš„æ–‡ä»¶æ˜¯åªèƒ½æ‰‹åŠ¨æ‹·è´çš„ï¼Œæˆ–è€…åƒä¸Šé¢ä¸€æ ·ä½¿ç”¨> è¾“å‡ºåˆ°æŒ‡å®šçš„è·¯å¾„å»\n\n### git push æŠ¥ HTTP Basic: Access denied é”™è¯¯\n- æ°¸ä¹…è®°ä½å¯†ç \n`git config --global credential.helper store`\n\nå¦‚æœæ²¡`--global`ï¼Œåˆ™åœ¨å½“å‰é¡¹ç›®ä¸‹çš„.git/configæ–‡ä»¶ä¸­æ·»åŠ ã€‚\n\n- é»˜è®¤è®°ä½15åˆ†é’Ÿ\n> git config --global credential.helper cache\n\n- è‡ªå®šä¹‰é…ç½®è®°ä½1å°æ—¶ï¼š\n> git config --global credential.helper 'cache â€“timeout=3600'\n\nè§£å†³æ–¹æ¡ˆï¼š \n1. å¦‚æœè´¦å·å¯†ç æœ‰å˜åŠ¨ ç”¨è¿™ä¸ªå‘½ä»¤ `git config --system --unset credential.helper` (æ¸…é™¤ç”¨æˆ·åå¯†ç )é‡æ–°è¾“å…¥è´¦å·å¯†ç åº”è¯¥å°±èƒ½è§£å†³äº† \n2. å¦‚æœç”¨äº†ç¬¬ä¸€ä¸ªå‘½ä»¤ è¿˜ä¸èƒ½è§£å†³é—®é¢˜é‚£ä¹ˆ ç”¨è¿™ä¸ªå‘½ä»¤ï¼š \n`git config â€“global http.emptyAuth true`\n\n### æŸ¥çœ‹gitä¸Šä¸ªäººä»£ç é‡\n```bash\ngit log --author=\"username\" --pretty=tformat: --numstat | awk '{ add += $1; subs += $2; loc += $1 - $2 } END { printf \"added lines: %s, removed lines: %s, total lines: %s\\n\", add, subs, loc }' -\n```\n\n### ç»Ÿè®¡æ¯ä¸ªäººçš„å¢åˆ è¡Œæ•°\n```bash\ngit log --format='%aN' | sort -u | while read name; do echo -en \"$name\\t\"; git log --author=\"$name\" --pretty=tformat: --numstat | awk '{ add += $1; subs += $2; loc += $1 - $2 } END { printf \"added lines: %s, removed lines: %s, total lines: %s\\n\", add, subs, loc }' -; done\n```\n\n### æŸ¥çœ‹ä»“åº“æäº¤è€…æ’åå‰ 5\n```bash\ngit log --pretty='%aN' | sort | uniq -c | sort -k1 -n -r | head -n 5\n```\n\n### è´¡çŒ®è€…ç»Ÿè®¡\n```bash\ngit log --pretty='%aN' | sort -u | wc -l\n```\n\n### æäº¤æ•°ç»Ÿè®¡\n```bash\ngit log --oneline | wc -l\n```\n\n### å‚è€ƒ\næœ¬æ–‡å‚è€ƒäº† [æ´ç™–è€…ç”¨ Gitï¼špull --rebase å’Œ merge --no-ff](http://hungyuhei.github.io/2012/08/07/better-git-commit-graph-using-pull---rebase-and-merge---no-ff.html)\n\n[Gitå¸¸ç”¨å‘½ä»¤å‚è€ƒæ‰‹å†Œ](https://github.com/xjh22222228/git-manual)\n\n[é«˜è´¨é‡çš„Gitä¸­æ–‡æ•™ç¨‹](https://github.com/geeeeeeeeek/git-recipes)\n\n[Git Cheat Sheet](https://shfshanyue.github.io/cheat-sheets/git)\n","tags":["git"],"categories":["å·¥å…·"]},{"title":"npmæ€»ç»“","url":"%2F2019%2Fnpm%E6%80%BB%E7%BB%93.html","content":"\n### ä¸€. package.json è§£è¯»\n```js\n{\n\t\"name\": \"hello world\", // é¡¹ç›®åç§°\n\t\"version\": \"0.0.1\", // ç‰ˆæœ¬å·ï¼šå¤§ç‰ˆæœ¬.æ¬¡è¦ç‰ˆæœ¬.å°ç‰ˆæœ¬\n\t\"author\": \"å¼ ä¸‰\",\n\t\"description\": \"ç¬¬ä¸€ä¸ªnode.jsç¨‹åº\",\n\t\"keywords\":[\"node.js\",\"javascript\"], // å…³é”®è¯ï¼Œæœ‰åŠ©äº npm search å‘ç°\n\t\"repository\": { // å­˜å‚¨åº“ï¼ŒæŒ‡å®šä»£ç æ‰€åœ¨ä½ç½®ï¼ˆå¦‚æœgit repoåœ¨GitHubä¸Šï¼Œé‚£ä¹ˆè¯¥npm docs å‘½ä»¤å°†èƒ½å¤Ÿæ‰¾åˆ°æ–‡ä»¶ä½ç½®ã€‚ï¼‰\n\t\t\"type\": \"git\",\n\t\t\"url\": \"https://path/to/url\"\n\t},\n\t\"license\":\"MIT\", // æŒ‡å®šåŒ…è®¸å¯è¯ï¼Œè¯¦ç»†å¯è§[SPDXè®¸å¯è¯IDçš„å®Œæ•´åˆ—è¡¨](https://spdx.org/licenses/)\n\t\"engines\": {\"node\": \"0.10.x\"}, // æŒ‡å®šè¯¥æ¨¡å—è¿è¡Œçš„å¹³å°ï¼Œå¯ä»¥æŒ‡å®š node ç‰ˆæœ¬ã€npm ç‰ˆæœ¬ç­‰\n\t\"bugs\":{\"url\":\"http://path/to/bug\",\"email\":\"bug@example.com\"}, // é¡¹ç›®é—®é¢˜è·Ÿè¸ªå™¨çš„URLå’Œåº”æŠ¥å‘Šé—®é¢˜çš„ç”µå­é‚®ä»¶åœ°å€ã€‚\n\t\"contributors\":[{\"name\":\"æå››\",\"email\":\"lisi@example.com\"}],\n    \"bin\": { // æŒ‡å®šå†…éƒ¨å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®ï¼Œåœ¨ scripts ä¸­å°±å¯ä»¥ç®€å†™\n    \t\"webpack\": \"./bin/webpack.js\"\n  \t},\n    \"main\": \"lib/webpack.js\", // æŒ‡å®šåŠ è½½çš„æ¨¡å—å…¥å£æ–‡ä»¶ï¼Œrequire('moduleName')å°±ä¼šåŠ è½½è¿™ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªå­—æ®µçš„é»˜è®¤å€¼æ˜¯æ¨¡å—æ ¹ç›®å½•ä¸‹é¢çš„index.jsã€‚\n    \"config\" : { \"port\" : \"8080\" }, // ç”¨äºæ·»åŠ å‘½ä»¤è¡Œçš„ç¯å¢ƒå˜é‡ï¼ˆç”¨æˆ·åœ¨è¿è¡Œ scripts å‘½ä»¤æ—¶ï¼Œå°±é»˜è®¤åœ¨è„šæœ¬æ–‡ä»¶ä¸­æ·»åŠ  process.env.npm_package_config_portï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ npm config set foo:port 80 å‘½ä»¤æ›´æ”¹è¿™ä¸ªå€¼ï¼‰\n\t\"scripts\": { // æŒ‡å®šè¿è¡Œè„šæœ¬çš„ npm å‘½ä»¤è¡Œç¼©å†™\n\t\t\"start\": \"node index.js\"\n\t},\n    \"peerDependencies\": { // æŒ‡å®šé¡¹ç›®å®‰è£…å¿…é¡»ä¸€èµ·å®‰è£…çš„æ¨¡å—åŠå…¶ç‰ˆæœ¬å·ï¼Œï¼ˆæ³¨æ„ï¼šä» npm 3.0 å¼€å§‹ï¼ŒpeerDependenciesä¸ä¼šå†é»˜è®¤å®‰è£…ï¼‰\n    \t\"chai\": \"1.x\"\n  \t},\n\t\"dependencies\": { // æŒ‡å®šé¡¹ç›®è¿è¡Œæ‰€ä¾èµ–çš„æ¨¡å—\n\t\t\"express\": \"latest\",\n\t\t\"mongoose\": \"~3.8.3\",\n\t\t\"handlebars-runtime\": \"~1.0.12\",\n\t\t\"express3-handlebars\": \"~0.5.0\",\n\t\t\"MD5\": \"~1.2.0\"\n\t},\n\t\"devDependencies\": { // æŒ‡å®šé¡¹ç›®å¼€å‘æ‰€éœ€è¦çš„æ¨¡å—\n\t\t\"bower\": \"~1.2.8\",\n\t\t\"grunt\": \"~0.4.1\",\n\t\t\"grunt-contrib-concat\": \"~0.3.0\",\n\t\t\"grunt-contrib-jshint\": \"~0.7.2\",\n\t\t\"grunt-contrib-uglify\": \"~0.2.7\",\n\t\t\"grunt-contrib-clean\": \"~0.5.0\",\n\t\t\"browserify\": \"2.36.1\",\n\t\t\"grunt-browserify\": \"~1.3.0\",\n\t},\n    \"browser\": { // æŒ‡å®šè¯¥æ¨¡æ¿ä¾›æµè§ˆå™¨ä½¿ç”¨çš„ç‰ˆæœ¬\n  \t\t\"tipso\": \"./node_modules/tipso/src/tipso.js\"\n\t},\n    \"preferGlobal\": true, // è¡¨ç¤ºå½“ç”¨æˆ·ä¸å°†è¯¥æ¨¡å—å®‰è£…ä¸ºå…¨å±€æ¨¡å—æ—¶ï¼ˆå³ä¸ç”¨â€“globalå‚æ•°ï¼‰ï¼Œè¦ä¸è¦æ˜¾ç¤ºè­¦å‘Šï¼Œè¡¨ç¤ºè¯¥æ¨¡å—çš„æœ¬æ„å°±æ˜¯å®‰è£…ä¸ºå…¨å±€æ¨¡å—ã€‚\n}\n```\n\n`package.json` åœ¨ node å’Œ npm ç¯èŠ‚éƒ½è¦ä½¿ç”¨ï¼Œnode åœ¨è°ƒç”¨ `require` çš„æ—¶å€™å»æŸ¥æ‰¾æ¨¡å—ï¼Œä¼šæŒ‰ç…§ä¸€ä¸ªæ¬¡åºå»æŸ¥æ‰¾ï¼Œ`package.json` ä¼šæ˜¯æŸ¥æ‰¾ä¸­çš„ä¸€ä¸ªç¯èŠ‚ã€‚npm ç”¨çš„å°±æ¯”è¾ƒå¤šï¼Œå…¶ä¸­çš„ `dependencies` å­—æ®µå°±æ˜¯æœ¬æ¨¡å—çš„ä¾èµ–çš„æ¨¡å—æ¸…å•ã€‚æ¯æ¬¡`npm update`çš„æ—¶å€™ï¼Œnpmä¼šè‡ªåŠ¨çš„æŠŠä¾èµ–åˆ°çš„æ¨¡å—ä¹Ÿä¸‹è½½ä¸‹æ¥ã€‚å½“`npm install` æœ¬æ¨¡å—çš„æ—¶å€™ï¼Œä¼šæŠŠè¿™é‡Œæåˆ°çš„æ¨¡å—éƒ½ä¸€èµ·ä¸‹è½½ä¸‹æ¥ã€‚é€šè¿‡package.json,å°±å¯ä»¥ç®¡ç†å¥½æ¨¡å—çš„ä¾èµ–å…³ç³»ã€‚\n\nå…³äºæ›´å¤šè§„èŒƒï¼Œè¯·çœ‹å®˜æ–¹[npm-package.json](https://docs.npmjs.com/files/package.json.html)\n\n---\n<!--more-->\n\n### äºŒ. ç‰ˆæœ¬å·è§„èŒƒ\n* **æŒ‡å®šç‰ˆæœ¬**ï¼šæ¯”å¦‚`1.2.2`ï¼Œéµå¾ªâ€œå¤§ç‰ˆæœ¬.æ¬¡è¦ç‰ˆæœ¬.å°ç‰ˆæœ¬â€çš„æ ¼å¼è§„å®šï¼Œå®‰è£…æ—¶åªå®‰è£…æŒ‡å®šç‰ˆæœ¬ã€‚\n* **æ³¢æµªå·ï¼ˆtildeï¼‰+æŒ‡å®šç‰ˆæœ¬**ï¼šæ¯”å¦‚`~1.2.2`ï¼Œè¡¨ç¤ºå®‰è£…1.2.xçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½äº1.2.2ï¼‰ï¼Œä½†æ˜¯ä¸å®‰è£…1.3.xï¼Œä¹Ÿå°±æ˜¯è¯´å®‰è£…æ—¶ä¸æ”¹å˜å¤§ç‰ˆæœ¬å·å’Œæ¬¡è¦ç‰ˆæœ¬å·ã€‚\n* **æ’å…¥å·ï¼ˆcaretï¼‰+æŒ‡å®šç‰ˆæœ¬**ï¼šæ¯”å¦‚Ë†1.2.2ï¼Œè¡¨ç¤ºå®‰è£…1.x.xçš„æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸ä½äº1.2.2ï¼‰ï¼Œä½†æ˜¯ä¸å®‰è£…2.x.xï¼Œä¹Ÿå°±æ˜¯è¯´å®‰è£…æ—¶ä¸æ”¹å˜å¤§ç‰ˆæœ¬å·ã€‚**éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœå¤§ç‰ˆæœ¬å·ä¸º0ï¼Œåˆ™æ’å…¥å·çš„è¡Œä¸ºä¸æ³¢æµªå·ç›¸åŒï¼Œè¿™æ˜¯å› ä¸ºæ­¤æ—¶å¤„äºå¼€å‘é˜¶æ®µï¼Œå³ä½¿æ˜¯æ¬¡è¦ç‰ˆæœ¬å·å˜åŠ¨ï¼Œä¹Ÿå¯èƒ½å¸¦æ¥ç¨‹åºçš„ä¸å…¼å®¹ã€‚**\n* **latest**ï¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬ã€‚\n\n### ä¸‰. npm install ä¸ **npm update**\n* å¦‚æœæœ¬åœ° `node_modules` å·²å®‰è£…ï¼Œå†æ¬¡æ‰§è¡Œ `install` ä¸ä¼šæ›´æ–°åŒ…ç‰ˆæœ¬, æ‰§è¡Œ `update` æ‰ä¼šæ›´æ–°; è€Œå¦‚æœæœ¬åœ° `node_modules` ä¸ºç©ºæ—¶ï¼Œæ‰§è¡Œ `install/update` éƒ½ä¼šç›´æ¥å®‰è£…æ›´æ–°åŒ…;\n* `npm update` æ€»æ˜¯ä¼šæŠŠåŒ…æ›´æ–°åˆ°ç¬¦åˆ `package.json` ä¸­æŒ‡å®šçš„ semver(è¯­ä¹‰åŒ–ç‰ˆæœ¬) çš„**æœ€æ–°**ç‰ˆæœ¬å·â€”â€”æœ¬ä¾‹ä¸­ç¬¦åˆ `^1.8.0` çš„æœ€æ–°ç‰ˆæœ¬ä¸º `1.15.0`\n* ä¸€æ—¦ç»™å®š `package.json`, æ— è®ºåé¢æ‰§è¡Œ `npm install` è¿˜æ˜¯ `update`, `package.json` ä¸­çš„ webpack ç‰ˆæœ¬ä¸€ç›´é¡½å›ºåœ°ä¿æŒ ä¸€å¼€å§‹çš„ `^1.8.0` å²¿ç„¶ä¸åŠ¨\n\n### å››. npm i ä¸ **npm install**\nå®é™…ä½¿ç”¨çš„åŒºåˆ«ç‚¹ä¸»è¦å¦‚ä¸‹ï¼š\n\n* ç”¨`npm i`å®‰è£…çš„æ¨¡å—æ— æ³•ç”¨`npm uninstall`åˆ é™¤ï¼Œç”¨`npm un`æ‰å¸è½½æ‰\n* `npm i`ä¼šå¸®åŠ©æ£€æµ‹ä¸å½“å‰ node ç‰ˆæœ¬æœ€åŒ¹é…çš„ npm åŒ…ç‰ˆæœ¬å·ï¼Œå¹¶åŒ¹é…å‡ºæ¥ç›¸äº’ä¾èµ–çš„ npm åŒ…åº”è¯¥æå‡çš„ç‰ˆæœ¬å·\n* éƒ¨åˆ† npm åŒ…åœ¨å½“å‰ node ç‰ˆæœ¬ä¸‹æ— æ³•ä½¿ç”¨ï¼Œå¿…é¡»ä½¿ç”¨å»ºè®®ç‰ˆæœ¬\n* å®‰è£…æŠ¥é”™æ—¶ install è‚¯å®šä¼šå‡ºç° `npm-debug.log`  æ–‡ä»¶ï¼Œ`npm i`ä¸ä¸€å®š\n\nnpm install æ­¥éª¤\n1. æŸ¥è¯¢node_modulesç›®å½•ä¹‹ä¸­æ˜¯å¦å·²ç»å­˜åœ¨æŒ‡å®šæ¨¡å—\n2. è‹¥å­˜åœ¨ï¼Œä¸å†é‡æ–°å®‰è£…\n3. è‹¥ä¸å­˜åœ¨npm å‘ registry æŸ¥è¯¢æ¨¡å—å‹ç¼©åŒ…çš„ç½‘å€ã€ä¸‹è½½å‹ç¼©åŒ…ï¼Œå­˜æ”¾åœ¨æ ¹ç›®å½•ä¸‹çš„.npmç›®å½•é‡Œã€è§£å‹å‹ç¼©åŒ…åˆ°å½“å‰é¡¹ç›®çš„node_modulesç›®å½•\n\n### äº”. npm devDependencies ä¸ dependencies\n`--save-dev`\n\næˆ–\n\n`â€”save`\n\né¦–å…ˆéœ€è¦è¯´æ˜çš„æ˜¯ Dependenciesä¸€è¯çš„ä¸­æ–‡æ„æ€æ˜¯ä¾èµ–å’Œé™„å±çš„æ„æ€ï¼Œè€Œdevåˆ™æ˜¯ developï¼ˆå¼€å‘ï¼‰çš„ç®€å†™ã€‚\n\næ‰€ä»¥å®ƒä»¬çš„åŒºåˆ«åœ¨ package.json æ–‡ä»¶é‡Œé¢ä½“ç°å‡ºæ¥çš„å°±æ˜¯ï¼Œä½¿ç”¨ `--save-dev` å®‰è£…çš„ æ’ä»¶ï¼Œè¢«å†™å…¥åˆ° devDependencies åŸŸé‡Œé¢å»ï¼Œè€Œä½¿ç”¨ `â€”save` å®‰è£…çš„æ’ä»¶ï¼Œåˆ™æ˜¯è¢«å†™å…¥åˆ° dependencies åŒºå—é‡Œé¢å»ã€‚\n\né‚£ package.json æ–‡ä»¶é‡Œé¢çš„Â devDependencies Â å’ŒÂ dependencies å¯¹è±¡æœ‰ä»€ä¹ˆ**åŒºåˆ«**å‘¢ï¼Ÿ\n\n**devDependencies Â é‡Œé¢çš„æ’ä»¶åªç”¨äºå¼€å‘ç¯å¢ƒï¼Œä¸ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œè€ŒÂ dependencies Â æ˜¯éœ€è¦å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒçš„**ã€‚\n\næ¯”å¦‚æˆ‘ä»¬å†™ä¸€ä¸ªé¡¹ç›®è¦ä¾èµ–äºjQueryï¼Œæ²¡æœ‰è¿™ä¸ªåŒ…çš„ä¾èµ–è¿è¡Œå°±ä¼šæŠ¥é”™ï¼Œè¿™æ—¶å€™å°±æŠŠè¿™ä¸ªä¾èµ–å†™å…¥dependencies\n\n### å…­. å…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£…\né€šè¿‡ `-g` æ¥å®‰è£…çš„åŒ…ï¼Œå°†åŒ…å®‰è£…æˆå…¨å±€å¯ç”¨çš„å¯æ‰§è¡Œå‘½ä»¤ã€‚\n\n#### 1. å…¨å±€å®‰è£…ï¼Œ å°†åŒ…å®‰è£…æˆå…¨å±€å¯ç”¨çš„å¯æ‰§è¡Œå‘½ä»¤\n```js\n// å…¨å±€å®‰è£… babel-cli\nbabel app.js\n```\n\n#### 2. æœ¬åœ°å®‰è£…\n```js\n// æœ¬åœ°å®‰è£… babel-cli\nnode_modules/.bin/babel app.js\n```\n\n#### 3. ä¿®æ”¹å…¨å±€å®‰è£…é»˜è®¤è·¯å¾„\n* è®¾ç½®è‡ªå®šä¹‰çš„å…¨å±€å®‰è£…è·¯å¾„\n  ```js\n  npm config set prefix \"/usr/local/npm\" // è‡ªå®šä¹‰çš„å…¨å±€å®‰è£…è·¯å¾„\n  npm config set cache \"/usr/local/npm\" // è‡ªå®šä¹‰çš„å…¨å±€å®‰è£…è·¯å¾„\n  ```\n* è®¾ç½®ç¯å¢ƒå˜é‡\n  åˆ‡åˆ°  ~/.bash_profile æ–‡ä»¶ä¸­é…ç½®è·¯å¾„ï¼š\n  ```js\n  GNPM_PATH=/usr/local/npm\n  export GNPM_PATH\n  export PATH=$PATH:$GNPM_PATH/bin  // å°† /usr/local/npm/bin è¿½åŠ åˆ° PATH å˜é‡ä¸­\n  export NODE_PATH=$PATH:$GNPM_PATH/lib/node_modules // æŒ‡å®š NODE_PATH å˜é‡\n  ```\n  \n  \n  æ“ä½œç³»ç»Ÿä¸­éƒ½ä¼šæœ‰ä¸€ä¸ª`PATH`ç¯å¢ƒå˜é‡ï¼Œæƒ³å¿…å¤§å®¶éƒ½çŸ¥é“ï¼Œå½“ç³»ç»Ÿè°ƒç”¨ä¸€ä¸ªå‘½ä»¤çš„æ—¶å€™ï¼Œå°±ä¼šåœ¨PATHå˜é‡ä¸­æ³¨å†Œçš„è·¯å¾„ä¸­å¯»æ‰¾ï¼Œå¦‚æœæ³¨å†Œçš„è·¯å¾„ä¸­æœ‰å°±è°ƒç”¨ï¼Œå¦åˆ™å°±æç¤ºå‘½ä»¤æ²¡æ‰¾åˆ°ã€‚\n  è€ŒÂ `NODE_PATH`Â å°±æ˜¯`NODE`ä¸­ç”¨æ¥ **å¯»æ‰¾æ¨¡å—æ‰€æä¾›çš„è·¯å¾„æ³¨å†Œç¯å¢ƒå˜é‡** ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æŒ‡å®š`NODE_PATH` ç¯å¢ƒå˜é‡ã€‚\n  ä½¿ç”¨ `npm config list` æŸ¥çœ‹é…ç½®\n\n### ä¸ƒ. npm åŒ…å‘½ä»¤\n```js\nnpm list -g --depth 0 // æŸ¥çœ‹å…¨å±€å®‰è£…è¿‡çš„åŒ… -g:å…¨å±€çš„å®‰è£…åŒ… listï¼šå·²å®‰è£…çš„nodeåŒ… â€“depth 0ï¼šæ·±åº¦0\nnpm view <packageName// æŸ¥çœ‹npmæœåŠ¡å™¨ä¸­åŒ…ç‰ˆæœ¬å· \nnpm info <packageName// npmæœåŠ¡å™¨æ›´å¤šä¿¡æ¯ï¼Œæ›´å¤šç‰ˆæœ¬å·\nnpm ls <packageName// æœ¬åœ°åŒ…\nnpm ls <packageName-g // å…¨å±€å®‰è£…åŒ…\nnpm docs // æ‰“å¼€åŒ…gitç›®å½•\n\n// æ³¨æ„ï¼šnpm build ä¸ npm start æ˜¯é¡¹ç›®ä¸­å¸¸ç”¨çš„å‘½ä»¤ï¼Œæ³¨æ„å®ƒä»¬æœ‰ä»€ä¹ˆä¸åŒ\nnpm start [--<args>] // åœ¨ package.json æ–‡ä»¶ä¸­å®šä¹‰çš„ \"scripts\" å¯¹è±¡ä¸­æŸ¥æ‰¾ \"start\" å±æ€§ï¼Œæ‰§è¡Œè¯¥å±æ€§å®šä¹‰çš„å‘½ä»¤ï¼Œå¦‚æœæ²¡æœ‰å®šä¹‰ï¼Œé»˜è®¤æ‰§è¡Œ node server.js å‘½ä»¤\nnpm build [<package-folder>] // å…¶ä¸­ï¼Œ<package-folderä¸ºå…¶æ ¹ç›®å½•ä¸­åŒ…å«ä¸€ä¸ª package.json æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œè¿™æ˜¯ç”± npm link å‘½ä»¤å’Œ npm install å‘½ä»¤ç»„æˆçš„ç®¡é“å‘½ä»¤ï¼Œé€šå¸¸åœ¨å®‰è£…è¿‡ç¨‹ä¸­è¢«è°ƒç”¨ã€‚å¦‚æœæƒ³è¦ç›´æ¥è¿è¡Œå®ƒï¼Œåˆ™è¿è¡Œ npm run build\n```\n\nè¿˜æœ‰å…¶ä»–çš„ é’©å­å‘½ä»¤ï¼Œå…·ä½“é¡¹ç›®ä¸­æˆ‘è¿˜æ²¡ç”¨åˆ°ï¼Œä½ å¯ä»¥è‡ªè¡Œäº†è§£ã€‚\n\npackage.json ä¸­ scripts å¸¸ç”¨å‘½ä»¤ï¼š\n\n```js\n// åˆ é™¤ç›®å½•\n\"clean\": \"rimraf dist/*\",\n\n// æœ¬åœ°æ­å»ºä¸€ä¸ª HTTP æœåŠ¡\n\"serve\": \"http-server -p 9090 dist/\",\n\n// æ‰“å¼€æµè§ˆå™¨\n\"open:dev\": \"opener http://localhost:9090\",\n\n// å®æ—¶åˆ·æ–°\n \"livereload\": \"live-reload --port 9091 dist/\",\n\n// æ„å»º HTML æ–‡ä»¶\n\"build:html\": \"jade index.jade dist/index.html\",\n\n// åªè¦ CSS æ–‡ä»¶æœ‰å˜åŠ¨ï¼Œå°±é‡æ–°æ‰§è¡Œæ„å»º\n\"watch:css\": \"watch 'npm run build:css' assets/styles/\",\n\n// åªè¦ HTML æ–‡ä»¶æœ‰å˜åŠ¨ï¼Œå°±é‡æ–°æ‰§è¡Œæ„å»º\n\"watch:html\": \"watch 'npm run build:html' assets/html\",\n\n// éƒ¨ç½²åˆ° Amazon S3\n\"deploy:prod\": \"s3-cli sync ./dist/ s3://example-com/prod-site/\",\n\n// æ„å»º favicon\n\"build:favicon\": \"node scripts/favicon.js\",\n```\n\n### å…«. ç®€å†™å½¢å¼\n```js\nnpm start   // æ˜¯ npm run start çš„ç®€å†™\nnpm stop    // æ˜¯ npm run stop çš„ç®€å†™\nnpm test    // æ˜¯ npm run test çš„ç®€å†™\nnpm restart // æ˜¯ npm run stop && npm run restart && npm run start çš„ç®€å†™\n```\n\n### ä¹. process\næˆ‘ä»¬å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡`process.env`å¯¹è±¡ï¼Œæ‹¿åˆ° npm æ‰€æœ‰çš„é…ç½®å˜é‡ã€‚å…¶ä¸­ npm è„šæœ¬å¯ä»¥é€šè¿‡`npm_config_`å‰ç¼€ï¼Œæ‹¿åˆ° npm çš„é…ç½®å˜é‡ã€‚é€šè¿‡`npm_package_`å‰ç¼€ï¼Œæ‹¿åˆ°`package.json`é‡Œé¢çš„å­—æ®µã€‚\n\n```js\nconsole.log(process.env.npm_package_name); // chejianer\nconsole.log(process.env.npm_package_version); // 1.0.0\nconsole.log(process.env); // ... \n```\n\nå¯¹äº **å…¨å±€æ¨¡å¼å®‰è£…çš„åŒ…ï¼ˆé€šè¿‡ -g æ¥å®‰è£…çš„åŒ…ï¼Œå°†åŒ…å®‰è£…æˆå…¨å±€å¯ç”¨çš„å¯æ‰§è¡Œå‘½ä»¤ï¼Œå¹¶ä¸æ„å‘³ç€ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥é€šè¿‡ require() æ¥å¼•ç”¨å®ƒï¼‰**ï¼šå®ƒä¼šé€šè¿‡ bin å­—æ®µé…ç½®ï¼Œå°†å®é™…è„šæœ¬é“¾æ¥åˆ° Node å¯æ‰§è¡Œç›®å½•ä¸‹ï¼Œä¾‹å¦‚\n\n```js\n\"bin\": {\n  \"webpack\": \"./bin/webpack.js\"\n},\n```\n\né€šè¿‡å…¨å±€å®‰è£…çš„åŒ…éƒ½å®‰è£…åˆ°ä¸€ä¸ªç»Ÿä¸€çš„ç›®å½•ä¸‹ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å¾—:\n\n```js\npath.resolve(process.execPath, \"..\", \"..\", \"lib\", \"node_modules\") \n// ä¾‹å¦‚ï¼š/usr/local/lib/node_modules\n```\n\n### å. npm å‘å¸ƒåŒ…\n* **åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶**ï¼š\n\n```js\n// lib/index.js\nexports.sayHello = function () {\n    return \"Hello An!\";\n};\n```\n\n* **è¿è¡Œï¼š`npm init`**\n\n```js\npackage name: (module) hello-an\nversion: (1.0.0) 0.1.0\ndescription: a hello-an package\nentry point: (hello.js) \ntest command: \ngit repository: \nkeywords: hello an\nauthor: sisterAn\nlicense: (ISC) MIT\nAbout to write to /Users/lianran777/Study/node/chejianer_node/module/package.json:\n\n{\n  \"name\": \"hello-an\",\n  \"version\": \"1.0.0\",\n  \"description\": \"a hello-an package\",\n  \"main\": \"hello.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"keywords\": [\n    \"hello\",\n    \"an\"\n  ],\n  \"author\": \"sisterAn\",\n  \"license\": \"MIT\"\n}\n\n\nIs this OK? (yes) \n```\n\n* **æ³¨å†Œ npm åŒ…ä»“åº“è´¦å·**\n\n```js\nnpm adduser\n```\n\n* **ä¸Šä¼ åŒ…**\n\n```js\nnpm publish . // package.json æ‰€åœ¨ç›®å½•\n\nnpm publish --tag beta // ä¸Šä¼ betaç‰ˆæœ¬\n```\n\nåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œnpm ä¼šå°†ç›®å½•æ‰“åŒ…æˆä¸€ä¸ªå­˜æ¡£æ–‡ä»¶ï¼Œç„¶åä¸Šä¼ åˆ°å®˜æ–¹æºä»“åº“ä¸­\n\n* **ç®¡ç†åŒ…æƒé™**\n\n```js\nnpm owner add <user[<@scope>/]<pkg>\nnpm owner rm <user[<@scope>/]<pkg>\nnpm owner ls [<@scope>/]<pkg>\n```\n\nåœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å®‰è£…åŒ… `npm install`ï¼Œé€šè¿‡ `npm ls` åˆ†ææ¨¡å—è·¯å¾„æ‰¾åˆ°çš„æ‰€æœ‰åŒ…ï¼Œå¹¶ç”Ÿæˆä¾èµ–æ ‘ã€‚\n\n### å¸¸è§é”™è¯¯\n1. Unable to look up github.com (port 9418)\n\n```js\ngit config --global url.\"https://\".insteadOf git://\n```\nå†é‡æ–°`npm install`ï¼Œé—®é¢˜è§£å†³ã€‚\n\n2. æ¸…é™¤åŒ…ç¼“å­˜\n```js\nnpm cache clean --force\n```\n\n3. æ·˜å®é•œåƒ\n```js\nnpm config set registry https://registry.npm.taobao.org\n\n// cnpm\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n\n// è¿˜åŸ\nnpm config set registry https://registry.npmjs.org\n```\n","tags":["å·¥å…·"],"categories":["çŸ¥è¯†"]},{"title":"æµè§ˆå™¨å…¼å®¹é—®é¢˜æ€»ç»“","url":"%2F2019%2F%E6%B5%8F%E8%A7%88%E5%99%A8%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93.html","content":"\n1. png24ä½çš„å›¾ç‰‡åœ¨iE6æµè§ˆå™¨ä¸Šå‡ºç°èƒŒæ™¯ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åšæˆPNG8.\n\n2. æµè§ˆå™¨é»˜è®¤çš„marginå’Œpaddingä¸åŒã€‚è§£å†³æ–¹æ¡ˆæ˜¯åŠ ä¸€ä¸ªå…¨å±€çš„*{margin:0;padding:0;}æ¥ç»Ÿä¸€\n\n3. IE6åŒè¾¹è·bug:å—å±æ€§æ ‡ç­¾floatåï¼Œåˆæœ‰æ¨ªè¡Œçš„marginæƒ…å†µä¸‹ï¼Œåœ¨ie6æ˜¾ç¤ºmarginæ¯”è®¾ç½®çš„å¤§ã€‚\n\næµ®åŠ¨ieäº§ç”Ÿçš„åŒå€è·ç¦» #box{ float:left; width:10px; margin:0 0 0 10px;}\n\nè¿™ç§æƒ…å†µä¹‹ä¸‹IEä¼šäº§ç”Ÿ20pxçš„è·ç¦»ï¼Œè§£å†³æ–¹æ¡ˆæ˜¯åœ¨floatçš„æ ‡ç­¾æ ·å¼æ§åˆ¶ä¸­åŠ å…¥ _display:inline;å°†å…¶è½¬åŒ–ä¸ºè¡Œå†…å±æ€§ã€‚(_è¿™ä¸ªç¬¦å·åªæœ‰ie6ä¼šè¯†åˆ«)\n\n```css\n.bb{\n    background-color:red;/*æ‰€æœ‰è¯†åˆ«*/\n    background-color:#00deff\\9; /*IE6ã€7ã€8è¯†åˆ«*/\n    +background-color:#a200ff;/*IE6ã€7è¯†åˆ«*/\n    _background-color:#1e0bd1;/*IE6è¯†åˆ«*/\n}\n```\n---\n<!--more-->\n\n4. IEä¸‹,å¯ä»¥ä½¿ç”¨è·å–å¸¸è§„å±æ€§çš„æ–¹æ³•æ¥è·å–è‡ªå®šä¹‰å±æ€§,ä¹Ÿå¯ä»¥ä½¿ç”¨getAttribute()è·å–è‡ªå®šä¹‰å±æ€§;Firefoxä¸‹,åªèƒ½ä½¿ç”¨getAttribute()\nè·å–è‡ªå®šä¹‰å±æ€§ã€‚è§£å†³æ–¹æ³•:ç»Ÿä¸€é€šè¿‡getAttribute()è·å–è‡ªå®šä¹‰å±æ€§ã€‚\n\n5. IEä¸‹,evenå¯¹è±¡æœ‰x,yå±æ€§,ä½†æ˜¯æ²¡æœ‰pageX,pageYå±æ€§;Firefoxä¸‹,eventå¯¹è±¡æœ‰pageX,pageYå±æ€§,ä½†æ˜¯æ²¡æœ‰x,yå±æ€§ã€‚\n\n6. Chrome ä¸­æ–‡ç•Œé¢ä¸‹é»˜è®¤ä¼šå°†å°äº 12px çš„æ–‡æœ¬å¼ºåˆ¶æŒ‰ç…§ 12px æ˜¾ç¤º,å¯é€šè¿‡åŠ å…¥ CSS å±æ€§ -webkit-text-size-adjust: none; \n\n7. è¶…é“¾æ¥è®¿é—®è¿‡åhoveræ ·å¼å°±ä¸å‡ºç°äº† è¢«ç‚¹å‡»è®¿é—®è¿‡çš„è¶…é“¾æ¥æ ·å¼ä¸åœ¨å…·æœ‰hoverå’Œactiveäº†è§£å†³æ–¹æ³•æ˜¯æ”¹å˜CSSå±æ€§çš„æ’åˆ—é¡ºåº:\n\n`LoVe HAte` åŸåˆ™\nL-V-H-A :  a:link {} a:visited {} a:hover {} a:active {}\n\n8. æ ·å¼åˆå§‹åŒ–\n- å› ä¸ºæµè§ˆå™¨çš„å…¼å®¹é—®é¢˜ï¼Œä¸åŒæµè§ˆå™¨å¯¹æœ‰äº›æ ‡ç­¾çš„é»˜è®¤å€¼æ˜¯ä¸åŒçš„ï¼Œå¦‚æœæ²¡å¯¹CSSåˆå§‹åŒ–å¾€å¾€ä¼šå‡ºç°æµè§ˆå™¨ä¹‹é—´çš„é¡µé¢æ˜¾ç¤ºå·®å¼‚ã€‚\n\n- åˆå§‹åŒ–æ ·å¼ä¼šå¯¹SEOæœ‰ä¸€å®šçš„å½±å“ï¼Œä½†é±¼å’Œç†ŠæŒä¸å¯å…¼å¾—ï¼Œä½†åŠ›æ±‚å½±å“æœ€å°çš„æƒ…å†µä¸‹åˆå§‹åŒ–ã€‚\n\næœ€ç®€å•çš„åˆå§‹åŒ–æ–¹æ³•ï¼š * {padding: 0; margin: 0;} ï¼ˆå¼ºçƒˆä¸å»ºè®®ï¼‰\n```css\nbody, h1, h2, h3, h4, h5, h6, hr, p, blockquote, dl, dt, dd, ul, ol, li, pre, form, fieldset, legend, button, input, textarea, th, td { margin:0; padding:0; }\nbody, button, input, select, textarea { font:12px/1.5tahoma, arial, \\5b8b\\4f53; }\nh1, h2, h3, h4, h5, h6{ font-size:100%; }\naddress, cite, dfn, em, var { font-style:normal; }\ncode, kbd, pre, samp { font-family:couriernew, courier, monospace; }\nsmall{ font-size:12px; }\nul, ol { list-style:none; }\na { text-decoration:none; }\na:hover { text-decoration:underline; }\nsup { vertical-align:text-top; }\nsub{ vertical-align:text-bottom; }\nlegend { color:#000; }\nfieldset, img { border:0; }\nbutton, input, select, textarea { font-size:100%; }\ntable { border-collapse:collapse; border-spacing:0; }\n```\n\n9. CSSé‡Œçš„visibilityå±æ€§æœ‰ä¸ªcollapseå±æ€§å€¼æ˜¯å¹²å˜›ç”¨çš„ï¼Ÿåœ¨ä¸åŒæµè§ˆå™¨ä¸‹ä»¥åä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n\nå¯¹äºæ™®é€šå…ƒç´ visibility:collapse;ä¼šå°†å…ƒç´ å®Œå…¨éšè—,ä¸å æ®é¡µé¢å¸ƒå±€ç©ºé—´,ä¸display:none;è¡¨ç°ç›¸åŒ.\nå¦‚æœç›®æ ‡å…ƒç´ ä¸ºtable,visibility:collapse;å°†tableéšè—,ä½†æ˜¯ä¼šå æ®é¡µé¢å¸ƒå±€ç©ºé—´.\nä»…åœ¨Firefoxä¸‹èµ·ä½œç”¨,IEä¼šæ˜¾ç¤ºå…ƒç´ ,Chromeä¼šå°†å…ƒç´ éšè—,ä½†æ˜¯å æ®ç©ºé—´.\n\n10. è®©é¡µé¢é‡Œçš„å­—ä½“å˜æ¸…æ™°ï¼Œå˜ç»†ç”¨CSSæ€ä¹ˆåšï¼Ÿ\n-webkit-font-smoothing: antialiased;\n\n11. display:inline-block ä»€ä¹ˆæ—¶å€™ä¼šæ˜¾ç¤ºé—´éš™ï¼Ÿ\nç§»é™¤ç©ºæ ¼ã€ä½¿ç”¨marginè´Ÿå€¼ã€ä½¿ç”¨font-size:0ã€letter-spacingã€word-spacing\n\n12. ulæ ‡ç­¾å†…å¤–è¾¹è·é—®é¢˜ulæ ‡ç­¾åœ¨IE6\\IE7ä¸­ï¼Œæœ‰ä¸ªé»˜è®¤çš„å¤–è¾¹è·ï¼Œä½†æ˜¯åœ¨IE8ä»¥ä¸ŠåŠå…¶ä»–æµè§ˆå™¨ä¸­æœ‰ä¸ªé»˜è®¤çš„å†…è¾¹è·ã€‚\nè§£å†³æ–¹æ³•ï¼šç»Ÿä¸€è®¾ç½®ulçš„å†…å¤–è¾¹è·ä¸º0\n\n13. IE6ä¸‹å›¾ç‰‡çš„ä¸‹æ–¹æœ‰ç©ºéš™\nè§£å†³æ–¹æ³•ï¼šç»™imgè®¾ç½®display:block;\n\n14. IE6ä¸‹ä¸¤ä¸ªfloatä¹‹é—´ä¼šæœ‰ä¸ª3pxçš„bug\nè§£å†³åŠæ³•ï¼šç»™å³è¾¹çš„å…ƒç´ ä¹Ÿè®¾ç½®float:left;  \n\n15. IE6ä¸‹æ²¡æœ‰min-widthçš„æ¦‚å¿µï¼Œå…¶é»˜è®¤çš„widthå°±æ˜¯min-width  \n\n16. IE6ä¸‹åœ¨ä½¿ç”¨margin:0 auto;æ— æ³•ä½¿å…¶å±…ä¸­\nè§£å†³åŠæ³•ï¼šä¸ºå…¶çˆ¶å®¹å™¨è®¾ç½®text-align:center;\n\n17. è¢«ç‚¹å‡»è¿‡åçš„è¶…é“¾æ¥ä¸å†å…·æœ‰hoverå’Œactiveå±æ€§\nè§£å†³åŠæ³•:æŒ‰lvhaçš„é¡ºåºä¹¦å†™cssæ ·å¼ï¼Œ\n- \":link\": aæ ‡ç­¾è¿˜æœªè¢«è®¿é—®çš„çŠ¶æ€ï¼›\n- \":visited\": aæ ‡ç­¾å·²è¢«è®¿é—®è¿‡çš„çŠ¶æ€ï¼›\n- \":hover\": é¼ æ ‡æ‚¬åœåœ¨aæ ‡ç­¾ä¸Šçš„çŠ¶æ€ï¼›\n- \":active\": aæ ‡ç­¾è¢«é¼ æ ‡æŒ‰ç€æ—¶çš„çŠ¶æ€ï¼›\n\n18. æ ‡å‡†äº‹ä»¶ç»‘å®š\naddEventListener/attachEventã€event.target/event.srcElementã€XMLHttpRequest/ActiveXObject('Microsoft.XMLHTTP')\n\n- è·å–domçš„çˆ¶å­èŠ‚ç‚¹\nparentNode/parentElement\n","tags":["å…¼å®¹æ€§"],"categories":["çŸ¥è¯†"]},{"title":"ç§Ÿæˆ¿é¡»çŸ¥","url":"%2F2019%2F%E7%A7%9F%E6%88%BF%E9%A1%BB%E7%9F%A5.html","content":"## æ–‡æ¡£ç›®çš„\n\nå¸Œæœ›è¿™ç¯‡æ–‡æ¡£èƒ½å¤Ÿå¸®åŠ©åˆ°åŒ—ä¸Šå¹¿æ·±æ­ç­‰ç§Ÿæˆ¿æ¼‚æ³Šçš„åŒå­¦åœ¨æ‰¾æˆ¿çš„æ—¶å€™è§„é¿ä¸€äº›æ˜æ˜¾çš„é—®é¢˜ã€‚\n\nè¿™é‡Œæšä¸¾äº†ä¸€äº›å¸¸è§é—®é¢˜ï¼Œé€‚å½“å‚è€ƒæ–‡æ¡£ä½œå‡ºä¸€ä¸ªåˆ¤æ–­ï¼Œæˆ–è®¸å¯ä»¥å‡å°‘ç§Ÿå®¢å’Œæˆ¿ä¸œéƒ½ä¸å¼€å¿ƒçš„æƒ…å†µçš„å‡ºç°ï¼Œå¹¶èŠ‚çº¦æ—¶é—´ã€‚\n\nä½œä¸ºç§Ÿå®¢ï¼Œå³ä½¿åœ¨é¢„ç®—å¹¶ä¸å……è£•ï¼Œæˆ–è€…ç¨ä½äºç›®æ ‡åŒºåŸŸå¹³å‡ä»·æ ¼çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥æ‰¾åˆ°é è°±çš„æˆ¿å­ï¼Œåªè¦ç­–ç•¥å¾—å½“ã€‚\n\nå¸Œæœ›çœ‹è¿‡æ–‡æ¡£çš„åŒå­¦å¯ä»¥å°‘é‡åˆ°å±…ä½ä¸èˆ’æœçš„æˆ¿å­ï¼Œè‡³å°‘ï¼Œä¸è¦é‡åˆ°å±…ä½é‚£ä¹ˆä¸èˆ’æœçš„æˆ¿å­ :D\n\n---\n<!--more-->\n\n## ç§Ÿæˆ¿è¦ç‚¹\n\n**ä¸€èˆ¬åŸåˆ™ï¼š**\n\n* å°½é‡æå‰è¿›è¡Œæˆ¿æºçš„å¯»æ‰¾ï¼Œä¸è¦ç­‰åˆ°æˆ¿å­åˆ°æœŸã€æˆ–è€…æ—ºå­£ï¼ˆè´¢å¹´ç»“æŸè·³æ§½å­£ã€æ¯•ä¸šå­£ã€å®ä¹ å­£ï¼‰çš„æ—¶å€™è¿›è¡Œã€‚\n* å°½é‡å¯»æ‰¾ç›´ç§Ÿæˆ¿å±‹ï¼Œä¸æ¨èç»è¿‡â€œè½¬äº¤â€çš„æˆ¿æºï¼Œé™¤éä½ å¯¹è½¬æ‰‹æˆ¿æºçš„äººä¿¡å¾—è¿‡ã€‚\n* å¯»æ‰¾æˆ¿æºå‰ï¼Œè¯·ç¡®å®šæ¸…æ¥šé¢„ç®—å’ŒæœŸæœ›å±…ä½çš„åŒºåŸŸï¼Œæé«˜æ‰¾æˆ¿æ•ˆç‡ï¼Œé¿å…æ— æ„ä¹‰æ—¶é—´æµªè´¹ã€‚\n\n**ç‰¹æ®Šæƒ…å†µä¸‹çš„ä¸€èˆ¬æ¨èç­–ç•¥ï¼š** \n\n### å¦‚æœç§Ÿæˆ¿è€…æ—¶é—´ç´§è¿«\n\n- ä¸å¤ªä»‹æ„æš‚æ—¶æ²¡æœ‰ç‹¬ç«‹çš„ç©ºé—´ï¼Œè¯·ä¼˜å…ˆåœ¨å…¬å¸ç¾¤ã€å…¬å¸æˆ–é«˜æ ¡BBSã€åŒå­¦ç¾¤ä¸­è¿›è¡Œè¯¢é—®ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰äººæ„¿æ„åŒä½ åˆ†äº«æˆ¿å­æˆ–è€…ä¿¡æ¯ï¼Œç›¸å¯¹çŸ¥æ ¹çŸ¥åº•çš„åŒäº‹ã€åŒå­¦æ¯”é™Œç”Ÿäººé è°±çš„æ¦‚ç‡å¤§çš„å¤šã€‚\n- è¯·åœ¨æœ¬åœ°å¯»æ‰¾å½“åœ°ç›¸å¯¹æœ€å¤§æœ€æ­£è§„çš„ä¸­ä»‹è¿é”ã€‚\n- å¦‚æœè¡Œæä¸å¤šï¼Œéƒ¨åˆ†é’æ—…å¯ä»¥æ‰›å‡ å¤©ã€‚ï¼ˆ12å¹´æœ‰åŒäº‹è¿™ä¹ˆç»å†è¿‡ï¼‰\n\n### å¦‚æœä¸€å®šè¦å’Œä¸­ä»‹æ‰“äº¤é“\n\nå¦‚æœæœ‰å¯èƒ½ï¼Œå°½å¯èƒ½ä¸è¦ç§Ÿä¸­ä»‹çš„æˆ¿å­ï¼Œå°¤å…¶æ˜¯å¸‚åœºå æœ‰ç‡ä½çš„å°ä¸­ä»‹ï¼Œå¯èƒ½å‘ç”Ÿä»¥ä¸‹é—®é¢˜ï¼š\n\n1. ä»£ç†äººä¸­é€”è·‘è·¯æˆ–ä»¥å„ç§å„æ ·çš„æ–¹å¼è¿›è¡Œè¯ˆéª—ã€‚\n2. åˆçº¦åˆ°æœŸåï¼Œä»¥å„ç§æ‰‹æ®µä¾µå æŠ¼é‡‘ã€‚\n3. å±‹å†…è´¢åŠ¡ä¸ç¿¼è€Œé£ã€‚\n\n**é»‘åå•ï¼š**\n\nå¼€æ¥è¥ï¼Œæ´»è·ƒäºå›é¾™è§‚ï¼Œéœè¥ï¼Œé¾™æ³½åœ°åŒºï¼Œä»2011å¹´å¼€å§‹è¡Œéª—è‡³ä»Šï¼Œæ®ä¸å®Œå…¨ç»Ÿè®¡å·²æœ‰æ•°ç™¾äººä¸Šå½“å—éª—ï¼Œå…¶æœ¬äººä¾é éª—æ¥çš„é’±è´¢ï¼Œè´­ç½®äº†ä¸€å¤„æˆ¿äº§ï¼Œä¹°äº†ä¸€è¾†50å¤šwçš„è±ªè½¦ï¼Œé›‡ä½£äº†ä¿é•–ä»¥åŠæ‰“æ‰‹æ•°äººã€‚è¢«éª—äººå‘˜å¤šæ¬¡æŠ¥è­¦ï¼Œèµ·è¯‰ï¼Œå‡æ— æœï¼Œä»»ç”±å¼€æ¥è¥ç»§ç»­é€é¥æ³•å¤–ã€‚\n\n### æœ‰å¹¸é‡åˆ°æˆ¿ä¸œç›´ç§Ÿ\n\nâ€œå¥½â€æˆ¿ä¸œå¾ˆé‡è¦ï¼Œå¦‚æœæ„Ÿè§‰æ°”åœºä¸å’Œï¼Œè¯·ä¸è¦å°†å°±ï¼Œå¯¹åŒæ–¹éƒ½ä¸å¥½ã€‚\n\n- å› ä¸ºä¾›æš–æ’æ°´é—¨é”è¯ä»¶ç­‰å¶å‘çš„çäº‹äº§ç”Ÿæ²Ÿé€šçš„æ—¶å€™ï¼Œæˆ¿ä¸œä¸ä½ äºä¹‹å‰çš„ç§Ÿå®¢è¿›è¡Œå¯¹æ¯”â€œä¹‹å‰ç§Ÿå®¢éƒ½æ²¡é—®é¢˜â€ï¼Œè¯·å°å¿ƒï¼Œæ¨èå’Œçˆ½å¿«çš„äººæ²Ÿé€šï¼Œå¯ä»¥é¿å…ä¸‹é¢çš„è®¸å¤šé—®é¢˜ï¼ˆæˆ¿å­è´¨é‡å¥½åŒæ ·å¯ä»¥å¤§æ¦‚ç‡é¿å…é—®é¢˜ï¼‰ã€‚\n- **ä¸è¦æ€¥äºäº¤å®šé‡‘/æŠ¼é‡‘ï¼Œå¤šæ•°æ˜¯å¥—è·¯**ï¼ˆæˆ¿æºç¡®å®æŠ¢æ‰‹çš„æ—¶æœŸï¼Œæˆ¿ä¸œé è°±ï¼Œäº¤å…¨æ¬¾ä¹Ÿæ²¡äº‹ï¼‰\n- å»ç°åœºçœ‹æˆ¿å­çš„æ—¶å€™ï¼Œå¦‚æœæˆ¿å­å¾ˆç ´ï¼Œå±‹å†…ä¸œè¥¿ä¹±ä¸¢ï¼Œ99%æ˜¯äºŒæˆ¿ä¸œæˆ–è€…åˆšä¹°æ¥ä¸“é—¨ç”¨æ¥å‡ºç§Ÿçš„å±‹å­ï¼Œè¯·å¤šç•™æ„å±‹å­ä¸­çš„æ’æ°´å’Œä¿æš–é—®é¢˜ã€‚\n- é è°±æˆ¿ä¸œï¼Œåœ¨ä½ çœ‹æˆ¿å­çš„æ—¶å€™ï¼Œå¤šæ•°ä¼šä¸»åŠ¨è·Ÿä½ æ²Ÿé€šå’Œå¦¥åï¼šâ€œè¿™ä¸ªç¯ä¸å¥½ï¼Œæˆ‘ä¸‹åˆç»™ä½ æ¢äº†â€å¯¹æ¯”â€œè¿™ä¸ªå°†å°±ä¸€ä¸‹ä¹Ÿèƒ½ç”¨â€å¥½åç«‹è¾¨ï¼Œä½†ä¹Ÿè¯·åˆ¤åˆ«æ˜¯å¦æ˜¯ä¸“ä¸šä¸­ä»‹ï¼Œåªè¯´ä¸åšçš„é‚£ç§...\n\n### æœŸæœ›åˆç§Ÿçš„æˆ¿å®¢\n\nä¸è®ºæ˜¯ä¸ºäº†èŠ‚çº¦ç§Ÿæˆ¿æˆæœ¬ï¼Œæ§åˆ¶æˆ¿ç§Ÿåœ¨ä¸ªäººç»æµæ”¯å‡ºæ¯”é‡ï¼Œè¿˜æ˜¯è€ƒè™‘æœ‰ä¸ªäº’ç›¸ç…§åº”ã€ç»“è¯†æ–°æœ‹å‹ï¼Œæ¥åˆ°å¤§åŸå¸‚çš„å‰æœŸï¼Œåˆç§Ÿæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚\n\n- ä½ å•æªåŒ¹é©¬ï¼Œå±‹å­å·²ç»æœ‰å…¶ä»–æˆ¿å®¢å…¥ä½\n\t- å°½å¯èƒ½äº†è§£åˆ°å¯¹æ–¹æ˜¯ä»äº‹ä»€ä¹ˆèŒä¸šï¼Œä»¥åŠæ˜¯å¦ä¸ºå¸¸ä½äººå‘˜ã€‚é¿å…å’Œç»å¸¸æµåŠ¨çš„äººå‘˜åŒä½ï¼Œå‘ç”Ÿæ½œåœ¨çš„å®‰å…¨éšæ‚£ä»¥åŠè´¢ç‰©æŸå¤±ã€‚\n\t- å°½å¯èƒ½äº†è§£æˆ¿å±‹åŸºç¡€å®‰å…¨è®¾æ–½æ˜¯å¦åˆ°ä½\n\t\t- æ˜¯å¦å­˜åœ¨è€åŒ–çš„ç…¤æ°”ç®¡é“ã€å¼€å…³ï¼Œæˆ¿ä¸œæ˜¯å¦æ„¿æ„ä¿®ç†æˆ–è€…æ›´æ¢ï¼Œæˆ–è€…å…è®¸ç§Ÿå®¢ä¿®ç†æ›¿æ¢ã€‚\n\t\t- æ˜¯å¦å­˜åœ¨éšå¤„å¯è§çš„çƒŸå¤´ã€‚\n\t\t- æ˜¯å¦å­˜åœ¨åŒä½æˆ¿å®¢éšæ„å¸¦é™Œç”Ÿäººç•™å®¿çš„ç°è±¡\n- ä½ å’Œå°ä¼™ä¼´ç»„é˜Ÿç§Ÿæˆ¿\n\t- å¤§å®¶è§‰å¾—éƒ½OKæœ€é‡è¦\n\t- å…¶ä»–å‚è€ƒä¸Šé¢çš„äº‹é¡¹\n\n### ç›¸å¯¹é è°±çš„æˆ¿å­æ¥æº\n\nä»»ä½•ä¸€ä¸ªå¹³å°ã€æ¸ é“ä¿¡æ¯é‡å¤§ä¹‹åï¼Œéš¾å…å‡ºç°â€œæœ‰æ•ˆä¿¡æ¯è´¨é‡ä¸‹é™â€ï¼Œè¯¸å¦‚èµ¶æŸç½‘ã€5æŸç½‘ã€æœæŸç½‘ã€è±†æŸå°ç»„ç­‰ç½‘ç«™ï¼Œä¸Šé¢çš„ä¸­ä»‹&ä¼ªè£…æˆä¸­ä»‹çš„éª—å­å±…å¤šï¼Œå¦‚ä½¿ç”¨è¯¥æ¸ é“ï¼Œè¯·ä»”ç»†è¾¨åˆ«ï¼š\n\n- è¯·ä¼˜å…ˆä½¿ç”¨æ ¡å›­è®ºå›ã€æœ‹å‹ä»‹ç»ã€å…¬å¸BBSã€ç†ŸäººIMç¤¾ç¾¤ç­‰ä¿¡æ¯ï¼Œä½†æ˜¯åŒæ ·éœ€è¦ä»”ç»†è¾¨åˆ«ä¿¡æ¯çœŸå®ç¨‹åº¦ã€‚\n- é™¤äº†ä¸»åŠ¨æˆ–è€…è¢«åŠ¨ï¼ˆè¢«ç›¸å…³ä¿¡æ¯ç½‘ç«™æ ‡è®°ï¼‰æ˜¾ç¤ºæ˜¯ä¸­ä»‹çš„ï¼ŒåŒ…å«ä»¥ä¸‹ä¿¡æ¯å¤§æ¦‚ç‡ä¸ºäºŒæˆ¿ä¸œï¼š\n\t- å¯¹æ ‡é¢˜åšè¿‡ç‰¹åˆ«ä¼˜åŒ–ç­‰å†…å®¹ã€å‘å¸ƒå†…å®¹æ ¼å¼ç‰¹åˆ«â€œè§„èŒƒåŒ–â€ï¼Œä¾‹å¦‚ï¼šäº”é“å£åœ°é“é™„è¿‘ä¸‰å®¤ä¸€å…æœå—æˆ¿ä¸»ç›´æ€¥ç§Ÿæœˆä»˜å­£ä»˜å½“é¢å¯è°ˆï¼ˆå·´ä¸å¾—å†…å®¹å…¨éƒ¨åœ¨æ ‡é¢˜ä¸­ä½“ç°ï¼‰ã€‚\n\t- æˆ¿å­ç…§ç‰‡å¯ä»¥åœ¨å…¶ä»–éç§Ÿæˆ¿ä¿¡æ¯å‘å¸ƒçš„åœ°æ–¹è¢«æœåˆ°ï¼Œå¤šæ•°ä¸ºæ•ˆæœå›¾ã€è®¾è®¡å›¾ç­‰ã€‚æ¨èä½¿ç”¨æœç´¢å¼•æ“ä»¥å›¾æœå›¾æ¥åˆ¤åˆ«ã€‚\n\t\t- åŒä¸€æ‰‹æœºå·ç å‘å¸ƒå¤šæ¡ä¸åœ¨åŒä¸€åœ°ç‚¹çš„æˆ¿æºï¼ŒåŸºæœ¬æ˜¯éª—å­ç±»å‹çš„ä¸­ä»‹ã€‚\n\t\t- å¼ è´´æ»¡å¤§è¡—çš„å¹¿å‘Šå¹¶éä¸€èˆ¬æˆ¿ä¸œæ‰€ä¸ºï¼Œä¸€èˆ¬ä¸ºäºŒæˆ¿ä¸œæˆ–è€…å°ä¸­ä»‹ã€‚\n\t- é»‘ä¸­ä»‹çš„ç‰¹ç‚¹æ— éæ˜¯ï¼š\n\t\t- **å¹¿æ³›æŠ•æ”¾æ€§ä»·æ¯”é«˜å‡ºå¸‚åœºå¯¹ä¿¡æ¯**ï¼šåœ¨å„ç§åˆ†ç±»ä¿¡æ¯ç½‘ç«™æˆ–è€…è®ºå›æŠ•æ”¾å¤§é‡æè¿°çº¢çº¢ç»¿ç»¿ã€ä»·æ ¼è¿œä½äºå¸‚åœºä»·ã€æè¿°çœ‹èµ·æ¥å¾ˆå¥½ã€æ•ˆæœå›¾æƒŠè‰³çš„æˆ¿å­ã€‚\n\t\t- **é¿å…ç›´æ¥ä¸å®¢æˆ·è¿›è¡Œæ²Ÿé€šéœ²é¦…**ï¼šæ‰“ç”µè¯è”ç³»ä»–ä»¬ï¼Œä¼šè¢«å¯¹æ–¹è‰è‰æŒ‚æ‰ï¼Œç„¶åçŸ­ä¿¡å›å¤ä½ ï¼Œå‘ŠçŸ¥ä½ ä¸€ä¸ªå…¬å¸çš„æ‰€åœ¨åœ°ï¼Œè®©ä½ æ¥å…¬å¸åŠç†å…¥ä½ä¸šåŠ¡ã€‚\n\t\t- **åœ¨çœ‹æˆ¿ä¹‹å‰æ€¥äºä¿ƒæˆç§Ÿæˆ¿åˆåŒ**ï¼šå»å…¬å¸ä¹‹åï¼Œä¸€ä¸ªåŠ²ä¿è¯ä½ æƒ³è¦ä½çš„åœ°æ–¹ç»å¯¹æœ‰æˆ¿å­ï¼Œå…ˆç­¾åˆåŒä¼šæœ‰ä¸“äººå¸¦ä½ çœ‹æˆ¿ã€‚äº¤å®Œä½£é‡‘ä¹‹åï¼Œå¯èƒ½ä¼šç»™ä½ ä¸€å¥—ç ´çƒ‚åˆ°ä¸è¡Œçš„æˆ¿å­ã€‚\n\t\t- **ç”µè¯é‡Œæ²Ÿé€šè¿‡çš„æˆ¿å­åœ¨å¸¦çœ‹çš„æ—¶å€™è¿›è¡Œæ›´æ¢**ï¼šç”µè¯é‡Œæ²Ÿé€šå¥½çš„æˆ¿å­ï¼Œè§é¢åå‘ŠçŸ¥åˆšè¢«å‡ºç§Ÿå‡ºå»ï¼Œæ°å¥½æœ‰å¦å¤–ä¸€ä¸ªæƒŠå–œçš„æˆ¿å­åœ¨ç­‰å¾…ä½ ï¼›åœ¨ä½ ä¸æ»¡æ„æ—¶ï¼Œå°±å¸¦ä½ å»ä¸€ä¸ªåˆ«çš„å°åŒºï¼ˆä¸æ˜¯ä½ åŸè®¡åˆ’å±…ä½çš„å°åŒºï¼‰ï¼Œå¸¦ä½ å»çš„å°åŒºå¾€å¾€æ˜¯å±…ä½æ¡ä»¶ä¸å¥½ï¼Œæˆ¿å­å¤šæ²¡äººä½çš„å°åŒºã€‚åŒæ—¶ï¼Œæˆ¿ä¸œä¼šå› ä¸ºæ‰¾ä¸­ä»‹ç»™ä½£é‡‘è€Œæé«˜æˆ¿ä»·ã€‚\n\t\t- è¿™æ ·ä½ ç”¨é«˜ä»·ä½äº†ç ´æˆ¿å­è¿˜ç”©ç»™äº†é»‘ä¸­ä»‹ä¸€ç¬”ä½£é‡‘ã€‚\n\n### å¯èƒ½è¢«å¤¸å¤§æè¿°çš„ä¿¡æ¯\n\nåœ¨ç­¾åˆåŒå…¥ä½ä¹‹å‰ï¼Œè¯·å®¢è§‚å¯¹æˆ¿å­è¿›è¡Œè¯„ä»·ï¼Œå¯¹æˆ¿å±‹ä¿¡æ¯åšåˆ°çœ¼è§ä¸ºå®ï¼Œè€Œä¸æ˜¯è½»ä¿¡æè¿°ä¿¡æ¯ã€‚\n\n- å¤§\n- å®‰é™\n- æœå‘å—\n- æœ‰æŸè®¾æ–½\n- ä½æ—¶é—´æˆæœ¬\n- è¶…é«˜çš„æ€§ä»·æ¯”\n\nå±•å¼€æè¿°ä¸€ä¸‹ï¼š\n\n- æˆ¿å­çš„å¹³ç±³æ•°æ®å¾ˆæ¼‚äº®ï¼Œä½†æ˜¯æœ‰çš„äºŒæˆ¿ä¸œå¯ä»¥æŠŠä¸€ä¸ª70å¹³ç±³çš„æˆ¿å­æ‹†æˆ4ä¸ª25å¹³ç±³çš„æˆ¿å­ç§Ÿå‡ºå»ã€‚\n- å»ºè®®åœ¨æˆ¿å­å†…å¤šå¾…ä¸€é˜µï¼Œè®¡åˆ’é•¿ç§Ÿå¯ä»¥ç™½å¤©æ™šä¸Šéƒ½å»æˆ¿å­é‡Œçœ‹çœ‹ï¼Œè¡—é“ã€é‚»å±…æ˜¯å¦è¿‡åˆ†å–§å“—ã€‚\n- æœå‘è¿™ä¸ªæ˜¯ç„å­¦ã€è¥¿å—å‘çš„æˆ¿å­ä¸å¤ªå¥½ä½ã€‚\n- å¸¦é˜³å°ã€å¸¦çª—æˆ·ã€‚æ³¨æ„ï¼Œâ€œå¸¦â€å’Œâ€œå¸¦æœ‰ç”¨çš„â€æ˜¯ä¸¤å›äº‹ã€‚\n- ç¦»åœ°é“ 5ï½10 åˆ†é’Ÿï¼Œå¯èƒ½éœ€è¦ç‰¹åˆ«çš„å¤§é•¿è…¿ï¼Œæˆ–è€…æ­¥å¹…ç‰¹åˆ«å¿«ã€‚\n\næ€»ä¹‹ï¼ŒåŸºæœ¬ä¸Šé™¤äº†åœ°æ–¹å¯ä»¥å‹‰å¼ºä¿¡ä¸€ä¸‹ï¼Œå…¶ä»–ä¿¡æ¯åœ¨çœ¼è§ä¸ºå®ä¹‹å‰åŸºæœ¬ä¸è¦è½»ä¿¡ã€‚\n\n- å¦‚æœæ˜¯ä¸­ä»‹ï¼Œä¸è¦ç›¸ä¿¡ä¸è¦ä¸­ä»‹è´¹ï¼Œç¾Šæ¯›å‡ºåœ¨ç¾Šèº«ä¸Šã€‚\n- å¦‚æœæ‰¾ä¸­ä»‹ï¼Œè¯·æ‰¾é è°±ä¸­ä»‹ã€‚æ‰€è°“é è°±ï¼Œå°±æ˜¯å¿…é¡»è‡³å°‘åå‡ å®¶ä»¥ä¸Šè¿é”ï¼Œåº—é¢åå­—ä½ å¬è¯´è¿‡ã€‚ä¸ç„¶è²Œä¼¼çœä¸‹æ¥çš„ä¸­ä»‹è´¹ï¼Œæœ€ç»ˆå¾ˆæœ‰å¯èƒ½ä¼šä»è¯¸å¦‚è¯´ä½ ç ´åä¸œè¥¿æ‰£é™¤æˆ–è€…èµ–ç€ä¸ç»™ä½ çš„æŠ¼é‡‘ã€ç­¾åˆåŒæ—¶çªç„¶å¢åŠ çš„å«ç”Ÿè´¹ï¼ˆä¸«æ‰ä¸ç»™ä½ æ‰“æ‰«ï¼‰ç­‰ç­‰æ–¹å¼æ‰¾å›æ¥ã€‚ä¸ºäº†çœå¿ƒï¼Œè¯·é€‰é è°±ä¸­ä»‹ã€‚\n- å¦‚æœä¸ç¡®å®šä¸­ä»‹æ˜¯å¦é è°±ï¼Œå¯ä»¥æœä¸­ä»‹åç§°+éª—å­ï¼Œç„¶åè‡ªè¡Œé‰´å®šã€‚\n- æå‰è‡³å°‘ä¸¤å‘¨å¼€å§‹æ‰¾æˆ¿å­ï¼Œå¤šæ‰“ç”µè¯ï¼Œä¸­ä»‹ä¸€å¾‹å±è”½ï¼ˆä¸ç„¶çƒ¦æ­»ä½ ï¼‰ã€‚å¤šçœ‹æˆ¿ï¼Œæ‰¾åˆ°æˆ¿ä¸œä¹‹åçœ‹æˆ¿æœ¬ã€‚åˆåŒä¸€å®šè¦ç­¾ï¼Œä¸è¦çŠ¯å‚»ã€‚\n- å¦‚æœå’Œä¸­ä»‹ç­¾åˆåŒï¼Œå°¤å…¶ä¸æ˜¯é è°±ä¸­ä»‹ï¼ŒåˆåŒçš„æ¯ä¸€ä¸ªå­—éƒ½è¦çœ‹ï¼Œä¸è¦ç›¸ä¿¡ä»–æ‰€è¯´çš„è¯ï¼ŒåˆåŒä»–éƒ½æœ‰ä¸æ‰¿è®¤çš„æ—¶å€™ã€‚\n- æ°¸è¿œä¸è¦ä¿¡ï¼Œæˆ‘æ˜¯æˆ¿ä¸œï¼Œæˆ‘å‡ºå·®åœ¨å¤–é¢ï¼Œè¯·è½¬è´¦ç»™æˆ‘è€å©†ã€‚\n- **ç­¾åˆåŒçš„å°æŠ€å·§**åˆåŒä¸­çº¦å®šï¼ˆä¾‹å¦‚å¿…éœ€æ°´ç”µçš„æ•…éšœéœ€è¦3æ—¥å†…ä¿®å¥½ï¼Œæˆ–è€…è¯´å¥½ç»™ä½ ä¸ªè¡£æŸœä¹‹ç±»ï¼‰çš„å†…å®¹æˆ¿ä¸œæœ‰æ—¶ä¼šæ‹’ç»æ‰§è¡Œï¼Œåœ¨ç­¾ç½²åˆåŒçš„æ—¶å€™ï¼Œé¦–å…ˆä¸€åˆ‡ä»¥åˆåŒä¸ºå‡†ï¼Œå…¶æ¬¡åœ¨çº¦å®šä¸­è¡¥å……*å¦‚æœä¸èƒ½æ»¡è¶³å…è®¸æˆ¿å®¢éšæ—¶é€€æˆ¿ï¼ŒæŠ¼é‡‘ä¸å¾—ä»¥ä»»ä½•ç†ç”±æ‰£ç•™ï¼Œå·²ç»äº¤çš„ç§Ÿé‡‘æŒ‰æ—¥è®¡ç®—è¿”è¿˜*ï¼Œä¸€èˆ¬ä¼šæ¯”è¾ƒæœ‰æ•ˆã€‚\n\n### ç­¾è®¢åˆåŒå‰å»ºè®®è·å–çš„ä¿¡æ¯\n\n- å…ˆäº†è§£å’Œä½ æ²Ÿé€šçš„å‡ºç§Ÿäºº**æ˜¯å¦æœ‰æƒåˆ©å‡ºç§Ÿè¯¥æˆ¿å±‹**ã€‚\n\t- å¿…é¡»éªŒæ˜æˆ¿ä¸œäº§æƒè¯ï¼ŒéªŒçœ‹å‡ºç§Ÿäººçš„èº«ä»½è¯æ˜¯å¦ä¸äº§æƒè¯ä¸€è‡´ã€‚\n\t- ä»£æ›¿å®¶äººï¼ˆå…¬å…¬ï¼å©†å©†ï¼è¡¨äº²ï¼‰è¿›è¡Œæˆ¿å±‹å‡ºç§Ÿçš„â€œæˆ¿ä¸œâ€ï¼Œæ˜¯å¦ä¸ºæˆç²¾ç§Ÿå®¢æ‰®æ¼”çš„äºŒæˆ¿ä¸œï¼Œå¦‚æœæ˜¯çœŸçš„äº²æˆšä»£ç†æˆ¿ä¸œè¿›è¡Œå‡ºç§Ÿï¼Œå¦‚æœå‡ºäº†é—®é¢˜ï¼Œå¥¹èƒ½ä»£ç†å’Œè§£å†³ä¹ˆã€‚\n\t- å°½é‡ä¸è¦å’Œæˆ¿ä¸œæœ‹å‹ï¼ˆåŸºå‹ï¼é—ºèœœï¼‰ä»£ç†æˆ¿ä¸œå‡ºç§Ÿæˆ¿å±‹äº§ç”Ÿåˆä½œï¼Œå‡å°‘ä¸å¿…è¦éº»çƒ¦ã€‚\n- ç§Ÿå®¢æ˜¯å¦æœ‰æƒå†æ¬¡å‡ºç§Ÿã€è½¬ç§Ÿæˆ¿å±‹ï¼Œå¦‚æœæ˜¯æˆ¿ä¸œä¸€èˆ¬ä¸å…è®¸å‡ºç§Ÿï¼Œè½¬ç§Ÿä¹Ÿæ˜¯æ¯”è¾ƒæŠµè§¦çš„ã€‚\n- æˆ¿ä¸œæ˜¯å¦èƒ½æä¾›æˆ–è€…åŠç†ã€Šæˆ¿å±‹ç§Ÿèµè®¸å¯è¯ã€‹ï¼Œä¸€èˆ¬å»ºè®®åˆ°å½“åœ°è¡—é“æ´¾å‡ºæ‰€è¿›è¡ŒåŠç†ï¼Œå¯¹æˆ¿ä¸œä¹Ÿæ˜¯ä¸€ç§ä¿æŠ¤ï¼Œä¸è¿‡è¿™ä¸ªä¼šç‰µæ‰¯åˆ°ä¸€äº›é¢å¤–çš„è´¹ç”¨ï¼Œè®¸å¤šæˆ¿ä¸œä¼šå›é¿æ‰ã€‚\n\t- è¯¥è®¸å¯è¯ä¹Ÿå¯èƒ½ä¼šå› ä¸ºç‰¹æ®ŠåŸå› æ²¡æœ‰ï¼Œå¦‚å›è¿æˆ¿ã€‚\n- æŸ¥çœ‹æˆ¿å±‹çš„å®é™…ä½¿ç”¨æ¡ä»¶ä¸çŠ¶å†µ\n\t- æˆ¿å­çš„å®é™…ä½¿ç”¨é¢ç§¯æ˜¯å¦èƒ½å¤Ÿæ¥å—\n\t- æˆ¿å­çš„éš”éŸ³æ•ˆæœæ˜¯å¦èƒ½æ¥å—ï¼ˆé‚»å±…ã€è¡—é“ï¼‰\n\t- æˆ¿å­çš„å®¶å…·æ˜¯å¦æœ‰ä¸¥é‡çš„æ°”å‘³ï¼ˆè£…ä¿®ã€å®¶å…·ã€ç¯å¢ƒç­‰å› ç´ ï¼‰\n\t- çª—æˆ·æ˜¯å¦ä¸¥å¯†ï¼Œå¼€å…³æ˜¯å¦æ­£å¸¸ï¼ˆæ¼é£ï¼‰\n\t- å¦‚æœé˜³å°æ²¡æœ‰åŒ…è£¹ï¼Œå»ºè®®ä¸è¦ç§Ÿï¼Œä¼šæœ‰èšŠè™«ã€ç°å°˜ï¼Œä»¥åŠä¿æš–éšæ‚£ã€‚\n\t- å¦‚æœå‘¨å›´æœ‰å·¥åœ°å’Œé©¬è·¯ï¼Œä¸è¦ç§Ÿï¼Œä¼šå¾ˆå–§å“—ï¼Œç‰¹æ®Šæƒ…å†µï¼Œä¼šå–§å“—åˆ°å¾ˆæ™šã€‚\n\t- å¦‚æœæ˜¯è€æˆ¿å­ï¼Œæˆ¿å±‹ä¸‹æ°´ï¼ˆæ´—æ‰‹æ± /é©¬æ¡¶/åœ°æ¼ï¼‰æœ‰é—®é¢˜ï¼Œä¸è¦ç§Ÿï¼Œè½»åˆ™å½±å“è‡ªå·±ï¼Œé‡åˆ™æ·¹äº†æ¥¼ä¸‹ã€‚\n\t- å¦‚æœæ˜¯è€æˆ¿å­ï¼Œé—¨é”æœ‰é—®é¢˜ï¼Œæˆ¿ä¸œå«ç³Šæ¢é”æˆ–è€…ä¸å¯ä»¥æ¢é”çš„è¯ï¼Œä¸è¦ç§Ÿã€‚\n\t- é™„åŠ ï¼šç”µæ¢¯çš„ä½¿ç”¨ï¼ˆæ¬å®¶/è´­ç½®ä¸œè¥¿ï¼‰\n\t- å¦‚æœç¼ºå°‘çš„ä¸œè¥¿ï¼Œæˆ¿ä¸œæ˜¯å¦èƒ½è¡¥é½\n\t- æœ‰æ¡ä»¶çš„è¯ï¼Œæœ€å¥½å¯ä»¥è¯•ä½ä¸€åˆ°ä¸¤å¤©ã€‚æ£€æŸ¥çš„æ—¶å€™çœ‹ä¸å‡ºé—®é¢˜ï¼Œä½è¿›å»æ½œåœ¨é—®é¢˜å°±ä¼šå‡ºæ¥ã€‚\n- ç®€å•äº†è§£æ²»å®‰çŠ¶å†µ\n\t- å°åŒºã€å•å…ƒæ˜¯å¦æœ‰é—¨ç¦ç³»ç»Ÿã€æˆ–è€…ç‰©ä¸šä¿å®‰å€¼å®ˆã€‚\n\t- ä¸€èˆ¬è·ç¦»åœ°é“è¶Šè¿‘çš„å°åŒºï¼ŒæµåŠ¨æ€§è¶Šå¤§ï¼Œè·ç¦»åœ°é“æœ‰åå‡ åˆ†é’Ÿçš„èµ°è·¯æ—¶é—´çš„å°åŒºå¯èƒ½æ˜¯ä¸é”™çš„é€‰æ‹©ï¼ˆå…±äº«å•è½¦ã€é¡ºé£è½¦ï¼‰ã€‚\n- æˆ¿å­å‘¨å›´è®¾æ–½æ˜¯å¦ç›¸å¯¹æ–¹ä¾¿\n\t- äº¤é€šæªæ–½æ˜¯å¦è¿‡åº¦å•ä¸€æˆ–è€…åŒ®ä¹\n\t- æ˜¯å¦æœ‰ç¤¾åŒºåŒ»ç–—åº”æ€¥ï¼ˆé™„è¿‘æœ‰å¤§åŒ»é™¢å¯å¿½ç•¥ï¼‰\n\t- é™„è¿‘åƒå–çš„åœ°æ–¹å¤šå—ï¼ˆä¾èµ–å¤–å–ã€è‡ªå·±åšé¥­å¯å¿½ç•¥ï¼‰\n\t- ä¾¿åˆ©åº—ã€è¶…å¸‚ã€è´­ç‰©ä¸­å¿ƒæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœè´­ç½®ä¸œè¥¿å¹¶éå…¨éƒ¨ä¾èµ–åœ¨çº¿ï¼Œéœ€è¦è€ƒè™‘çº¿ä¸‹è´­ç‰©çš„ä¾¿åˆ©æ€§ã€‚\n\t- å¦‚æœåªæ˜¯ä¸ºäº†è·ç¦»ä¸Šç­åœ°ç‚¹è¿‘ï¼Œå¯ä»¥èˆå¼ƒä¸€äº›æˆ–è€…å…¨éƒ¨\n- **é’ˆå¯¹åœ¨ä¸Šæµ·çš„åŒå­¦ä»¬ï¼š** éœ€è¦æå‰å’Œä¸ä½ ç­¾åè®®çš„äººæ²Ÿé€šï¼Œæ˜¯å¦èƒ½åŠç†å±…ä½è¯ï¼ŒåŠç†å±…ä½è¯å¯¹äºå¸Œæœ›å¸¸é©»ä¸Šæµ·çš„åŒå­¦æ¥è¯´å¾ˆé‡è¦ï¼Œå› ä¸ºæœ‰äº›ä¸œè¥¿ï¼ˆä¹°è½¦ä¹°æˆ¿å°å­©ä¸Šå­¦ä¹‹ç±»ï¼‰æ˜¯è¦çœ‹å±…ä½è¯çš„å¹´é™çš„ã€‚å»ºè®®å°†*å¿…é¡»è¦åŠç†å±…ä½è¯ï¼Œå¦åˆ™éšæ—¶å¯é€€æˆ¿*ä½œä¸ºè¡¥å……æ¡æ¬¾å†™å…¥ã€‚\n- **é’ˆå¯¹æœ‰å°å­©çš„åŒå­¦ä»¬** æå‰å’Œæˆ¿ä¸œæ²Ÿé€šå¯å¦åŠç†ç§Ÿä½æ‰‹ç»­ï¼ˆå®˜æ–¹ï¼‰ï¼Œç°åœ¨ç§Ÿä½åŒæƒï¼Œå¦‚æœç§Ÿä½çš„æ˜¯å­¦åŒºæˆ¿å°å­©å¯ä»¥åœ¨è¯¥å­¦åŒºä¸Šå­¦ï¼Œä½†æ˜¯æœ‰çš„æ—¶å€™ä¸€äº›è‡ªå·±æœ‰å°å­©çš„æˆ¿ä¸œå¯èƒ½ä¼šæ‹’ç»ã€‚\n- æ˜ç¡®å…¬ç”¨çš„åŸºç¡€è®¾æ–½çš„ä½¿ç”¨å’Œç»´ä¿®ï¼šå¯¹äºç¾¤ç§Ÿçš„åŒå­¦æ¥è¯´ï¼Œ**å«ç”Ÿé—´ï¼ˆçƒ­æ°´å™¨ï¼Œæ´—è¡£æœºï¼‰ï¼Œå¨æˆ¿ï¼ˆç…¤æ°”ç¶ã€å†°ç®±ã€å¾®æ³¢ç‚‰ï¼‰**å¾ˆå¯èƒ½æ˜¯å…¬ç”¨çš„ï¼Œå½“å…¬ç”¨çš„è®¾æ–½æŸåä»¥åï¼Œç»´ä¿®çš„è´£ä»»éœ€è¦åœ¨åˆåŒä¸­å˜æ¸…ï¼Œå¹¶ä¸”è§„å®šç»´ä¿®æ—¶é—´ï¼Œä»¥é˜²æ­¢æˆ¿ä¸œæˆ–è€…äºŒæˆ¿ä¸œæ¨è„±è´£ä»»ï¼Œæˆ–è€…æ‹–å»¶ä¸äºˆç»´ä¿®ã€‚\n\n### æ˜ç¡®è´¹ç”¨\n\næ˜ç¡®ä»¥ä¸‹è´¹ç”¨ç”±è°æ‰¿æ‹…ï¼Œå¯ä»¥æ³¨æ˜æ•°å­—æ—¶é—´çš„è´¹ç”¨å»ºè®®è¿›è¡Œå¤‡æ³¨è¯´æ˜ã€‚\n\n- æ°´è´¹\n\t- æ˜¯å¦åˆ†å†·æ°´/çƒ­æ°´/æ¸…æ´ç”¨æ°´ï¼Œå¦‚æœåŒºåˆ†å•ç‹¬ç¡®å®šè´¹ç”¨ã€‚\n\t- æ¯”å¦‚åŒ—äº¬çƒ­æ°´æ¶¨ä»·æ±¹æ¶Œï¼Œé—®æ¸…æ¥šä»·æ ¼ï¼Œå’Œå……å€¼æ–¹å¼ï¼ˆç‰¹åˆ«è¿œçš„è¯ï¼Œä½¿ç”¨çš„è¯ï¼Œå¤šå……å€¼ä¸€ç‚¹ï¼‰ã€‚\n\t- çƒ­æ°´å¯èƒ½ä»¥éå¸¸é•¿çš„æ—¶é—´ä¸ºç¼´çº³å‘¨æœŸï¼Œå…¥ä½æ—¶ï¼Œç¡®ä¿çƒ­æ°´è´¹ç”¨ä¹‹å‰æˆ¿ä¸œå’Œä¸­ä»‹æ˜¯æ­£å¸¸ç¼´çº³çš„ã€‚ï¼ˆé‡åˆ°è¿‡å‡ å¹´æ²¡ç¼´çº³è¿‡çƒ­æ°´è´¹çš„è‡ªå¦‚æˆ¿å­ï¼‰\n- ç”µè´¹\n\t- ç¼´è´¹æ–¹å¼ï¼Œè‡ªå·±äº¤ç”µå¡ï¼Œæœ‰æ— ç”µå¡ï¼Œè¿˜æ˜¯ä»£ç¼´ï¼Œä»·æ ¼ã€‚\n\t- æ˜¯å¦ä¸ºå•†ç”¨ç”µï¼ˆéƒ¨åˆ†ä½å®…æ˜¯å•†ç”¨ç”µï¼‰\n- ç…¤æ°”è´¹\n\t- é…’åº—å…¬å¯“å¯èƒ½æ²¡æœ‰ç…¤æ°”ï¼Œä¸å­˜åœ¨ç…¤æ°”è´¹ä¸€è¯´ã€‚\n\t- å¦‚æœä¾èµ–æ­¤é¡¹ç›®ï¼Œä¼˜å…ˆæŸ¥çœ‹ã€‚\n\t- ç…¤æ°”è´¹å¯èƒ½ä»¥éå¸¸é•¿çš„æ—¶é—´ä¸ºç¼´çº³å‘¨æœŸï¼Œå…¥ä½æ—¶ï¼Œç¡®ä¿ç…¤æ°”è´¹ç”¨ä¹‹å‰æˆ¿ä¸œå’Œä¸­ä»‹æ˜¯æ­£å¸¸ç¼´çº³çš„ã€‚ï¼ˆé‡åˆ°è¿‡å‡ å¹´æ²¡ç¼´çº³è¿‡ç…¤æ°”è´¹çš„è‡ªå¦‚æˆ¿å­ï¼‰\n- ç”µè¯è´¹\n\t- æœ‰çš„æˆ¿å­ä¸å­˜åœ¨æ­¤é¡¹ï¼Œä½†æ˜¯æœ‰çš„æˆ¿å­ä¼šæ˜¯å’Œæˆ¿ä¸œæ‰‹æœºç»‘å®šä¸€èµ·çš„ã€‚\n\t- å¦‚æœæ˜¯åˆç§Ÿçš„äººç»‘å®šæ‰‹æœºï¼Œé‚£ä¹ˆè¦æŸ¥çœ‹å•å­ç¼´è´¹æ˜¯æœˆåº¦/å­£åº¦/å¹´åº¦ã€‚\n-  ç”µè§†è´¹ç”¨\n\t- å³ä½¿ä½ ä¸ä½¿ç”¨è¿™ä¸ªè®¾å¤‡ï¼Œè¿™ä¸ªè´¹ç”¨ä¹Ÿè¦è¯¢é—®çš„ï¼Œä»¥å…è´¦å•çªç„¶å¤šå‡ºä¸€å¹´è´¹ç”¨ã€‚\n- å«ç”Ÿè´¹\n- ç‰©ä¸šè´¹\n- ç½‘è´¹\n- ä¾›æš–è´¹\n\t- ä»…é™åŒ—æ–¹ï¼Œæ˜ç¡®æš–æ°”è´¹è°æ¥æ‰¿æ‹…ï¼Œåˆ°äº†å†¬å¤©æ‰å‘ç°åˆåŒä¸Šæœªè§è¯´æ˜ã€‚ç§Ÿé‡‘æ˜¯æ‰¿æ‹…äº†æš–æ°”è´¹çš„æ ‡å‡†çš„ä»·æ ¼ï¼Œä½†æ˜¯å´è¦è‡ªå·±äº¤ã€‚ä»¥åŠæš–æ°”ç‰‡å­˜åœ¨ä½ç½®ä¼šä¸ä¼šå’Œåˆç§Ÿäººå‘˜äº§ç”Ÿç¼´è´¹åˆ†æ­§ã€‚\n- ç»´ä¿®è´¹å’Œé™„å¸¦å½±å“\n\t- æˆ¿ä¸œä»“ä¿ƒåšé˜²æ°´ï¼Œé˜²æ°´åæ‰äº†ï¼Œæ¥¼ä¸‹æ°´æ¼«é‡‘å±±ï¼Œè¦ç»´ä¿®ï¼Œä½ å¯èƒ½è¦ä¸€åŠä¸ªæœˆä¸èƒ½ç”¨å«ç”Ÿé—´ã€‚\n\t- å¹´ä»£ä¹…è¿œçš„ç©ºè°ƒå› æ¼æ°”/åä»¶ï¼Œè¿˜è¦ç§Ÿå®¢ä½ æ‰¿æ‹…è´¹ç”¨çš„æƒ…å†µï¼Œå¦å¤–å¦‚æœæ˜¯å‘ç”Ÿåœ¨å—æ–¹å†¬å¤©...\n\t- ç¯æ³¡è¿™ç±»æ˜“è€—å“æœ€å¥½ä¹Ÿé—®ä¸‹ï¼Œä¸€å¹´ä¸åˆ°ï¼Œä¸çŸ¥é“æ˜¯è´¨é‡é—®é¢˜è¿˜æ˜¯ç”µå‹ï¼Œæ¢äº†4/5ä¸ªï¼Œç›´åˆ°æ¢äº†LEDç¯\n- æŸåèµ”å¿\n\t- å¦‚æœå­˜åœ¨æŸäº›æƒ…å†µï¼Œè¿™ä¸ªæ—¶å€™èµ”å¿æ˜¯è¡¥æ–°ï¼Œè¿˜æ˜¯å‡ å€ä»·æ ¼ï¼Œè¿˜æ˜¯å¦‚ä½•ï¼Œç¡®è®¤æ¸…æ¥š\n- å¦å¤–éœ€è¦æŸ¥çœ‹æ˜¯å¦æœ‰æ¬ è´¹\n\t- æ›¾ç»é‡åˆ°æ¬ è´¹600å¤šçš„ç…¤æ°”è´¹çš„ä¸šä¸»å‡ºå›½ï¼Œå±…å§”ä¼šä¸‰å¤©ä¸¤å¤´ä¸Šé—¨æ‰¾\n- ç§ŸèµæœŸé—´å¯¹æˆ¿å±‹ä¿®ç¼®\n\t- æˆ¿å±‹ä»¥åŠé™„å±è®¾å¤‡å‡ºç°é—®é¢˜æˆ–è€…æ•…éšœï¼Œç”±è°ç»´æŠ¤ï¼Œè´¹ç”¨ç”±è°æ‰¿æ‹…\n\n### ç§Ÿé‡‘æ”¯ä»˜\n\n- ç§Ÿé‡‘ç”±å‡ºç§Ÿäººæ”¶å–ï¼Œæ˜¯æ‰¿ç§Ÿäººä½¿ç”¨æˆ¿å±‹çš„å¯¹ä»·;\n- ç‰©ä¸šç®¡ç†è´¹åˆ™ç”±ç‰©ä¸šç®¡ç†å…¬å¸æ”¶å–ï¼Œæ˜¯ç‰©ä¸šå…¬å¸ä»¥è‡ªå·±çš„ç»è¥æ´»åŠ¨ä¸ºæ‰€æœ‰ä¸šä¸»ã€ç§Ÿæˆ·æä¾›æœåŠ¡æ‰€æ”¶å–çš„è´¹ç”¨ï¼ŒäºŒè€…ä¸æ˜¯ä¸€ä¸ªæ³•å¾‹å…³ç³»ï¼Œä¸èƒ½æ··ä¸ºä¸€è°ˆã€‚\n- ä½†å¦‚åŒæ–¹åœ¨åˆåŒä¸­å¯¹äºæ­¤é¡¹æ— å…·ä½“çº¦å®šï¼Œåˆ™å‡ºç§Ÿäººæ— æƒè¦æ±‚æ‰¿ç§Ÿäººæ”¯ä»˜ç‰©ä¸šç®¡ç†è´¹ã€‚\n- ç­¾è®¢ç§ŸèµåˆåŒæ—¶è¦ä»”ç»†é˜…è¯»åˆåŒæ¡æ¬¾ï¼Œå¯¹äºæ¨¡ç³Šå†…å®¹è¦è¯¦åŠ è¯¢é—®ï¼Œå¹¶è½å®äºå­—é¢ã€‚\n\t- åœ¨åŒæ–¹ç­¾è®¢ã€Šæˆ¿å±‹ç§ŸèµåˆåŒã€‹æ—¶æœ€å¥½å°†å±‹å†…æ‰€æœ‰ç‰©å“è¯¦åˆ—ä¸€ä»½æ¸…å•ï¼Œä½œä¸ºå…¶åˆåŒé™„ä»¶æ”¶å¥½ã€‚\n\t- å¦‚æœå¯èƒ½å¤šå¤å°ä¸€ä»½ï¼Œæˆ‘å’Œèˆå‹ç§Ÿæˆ¿å­ï¼Œç»“æœéƒ½æ‰¾ä¸åˆ°åˆåŒäº†ã€‚\n\t- åˆåŒæ˜ç¡®ç§ŸæœŸå†…ï¼Œæˆ¿ä¸œæ˜¯å¦å¯ä»¥æ¶¨ä»·\n\t- åˆåŒæ˜ç¡®æŠ¼é‡‘ä»¥åŠæŠ¼é‡‘é€€æ¢æ–¹å¼ï¼ˆ**è¿™é‡Œæ˜¯æ·±æ°´åŒº**ï¼‰\n\t- ç•™æ„é€€æˆ¿æ—¶å«ç”Ÿçš„å­—çœ¼ï¼Œæ¯”å¦‚â€œé€€æˆ¿æ—¶æˆ¿å±‹æ²¡æœ‰æ‰“æ‰«å¹²å‡€ï¼Œè¦æ‰£200æŠ¼é‡‘â€ã€‚é€€æˆ¿æ—¶çš„å«ç”Ÿè¦åšåˆ°ä»€ä¹ˆç¨‹åº¦ï¼Œè¦å’Œæˆ¿ä¸œæå‰æ˜ç¡®ï¼Œæœ€å¥½ç•™å½•éŸ³å’Œç§Ÿæˆ¿å‰çš„æˆ¿å±‹ç…§ç‰‡ã€‚é¿å…é€€æˆ¿æ—¶è¢«æ¶å¿ƒæˆ¿ä¸œåˆéš¾ã€‚\n- å¦‚æœä¸‡ä¸€ä¸å¯é¿å…åœ°ä¸å¥‡è‘©æˆ¿ä¸œå‘ç”Ÿå†²çªï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹ç»´æƒæ¡ˆä¾‹\n\t- [DIY æ‰“å®˜å¸](https://g.leaskh.com/2014/11/13/DIY-æ‰“å®˜å¸-ç›®å½•/)\n\n### é€€æˆ¿é€€ç§Ÿ\n\n- ä¸ç®¡å‡ºäºä»€ä¹ˆåŸå› ï¼Œè¯·å°½æ—©è‡³å°‘åŠä¸ªæœˆï¼Œæ¨èä¸€ä¸ªæœˆï¼Œå’Œæˆ¿ä¸œè¯´æ˜ï¼Œä»¥å…è€½è¯¯æˆ¿ä¸œå†æ¬¡è½¬ç§Ÿï¼Œå½±å“è‡ªå·±çš„æŠ¼é‡‘å’Œäººå“ã€‚\n- åœ¨é€€æˆ¿å‰ï¼Œå¦‚æœé’¥åŒ™ä¸¢å¤±ï¼Œä¸èƒ½å¦‚æ•°é€€è¿˜ç»™æˆ¿ä¸œã€‚å»ºè®®å°½å¯èƒ½é…ä¸€æŠŠé’¥åŒ™ã€‚ä»¥å…æˆ¿ä¸œä»¥å½±å“å®‰å…¨çš„åä¹‰è¦ä½ æ¢é”ã€‚å…¶å®å°±æ˜¯å˜ç›¸è¦æ‰£æŠ¼é‡‘ï¼Œä¸è¦ç»™ä»–å¼€å£çš„æœºä¼šã€‚\n","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"title":"webpack","url":"%2F2019%2Fwebpack.html","content":"\n## è°ˆè°ˆä½ å¯¹webpackçš„çœ‹æ³•\nwebpackæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨å®ƒç®¡ç†é¡¹ç›®ä¸­çš„æ¨¡å—ä¾èµ–ï¼Œå¹¶ç¼–è¯‘è¾“å‡ºæ¨¡å—æ‰€éœ€çš„é™æ€æ–‡ä»¶ã€‚å®ƒå¯ä»¥å¾ˆå¥½åœ°ç®¡ç†ã€æ‰“åŒ…å¼€å‘ä¸­æ‰€ç”¨åˆ°çš„HTML,CSS,JavaScriptå’Œé™æ€æ–‡ä»¶ï¼ˆå›¾ç‰‡ï¼Œå­—ä½“ï¼‰ç­‰ï¼Œè®©å¼€å‘æ›´é«˜æ•ˆã€‚å¯¹äºä¸åŒç±»å‹çš„ä¾èµ–ï¼Œwebpackæœ‰å¯¹åº”çš„æ¨¡å—åŠ è½½å™¨ï¼Œè€Œä¸”ä¼šåˆ†ææ¨¡å—é—´çš„ä¾èµ–å…³ç³»ï¼Œæœ€ååˆå¹¶ç”Ÿæˆä¼˜åŒ–çš„é™æ€èµ„æºã€‚\n\n> webpack æœ€å‡ºè‰²çš„åŠŸèƒ½ä¹‹ä¸€å°±æ˜¯ï¼Œé™¤äº† JavaScriptï¼Œè¿˜å¯ä»¥é€šè¿‡ loader å¼•å…¥ä»»ä½•å…¶ä»–ç±»å‹çš„æ–‡ä»¶ã€‚\n\n## webpackçš„åŸºæœ¬åŠŸèƒ½å’Œå·¥ä½œåŸç†ï¼Ÿ\n- ä»£ç è½¬æ¢ï¼šTypeScript ç¼–è¯‘æˆ JavaScriptã€SCSS ç¼–è¯‘æˆ CSS ç­‰ç­‰\n- æ–‡ä»¶ä¼˜åŒ–ï¼šå‹ç¼© JavaScriptã€CSSã€HTML ä»£ç ï¼Œå‹ç¼©åˆå¹¶å›¾ç‰‡ç­‰\n- ä»£ç åˆ†å‰²ï¼šæå–å¤šä¸ªé¡µé¢çš„å…¬å…±ä»£ç ã€æå–é¦–å±ä¸éœ€è¦æ‰§è¡Œéƒ¨åˆ†çš„ä»£ç è®©å…¶å¼‚æ­¥åŠ è½½\n- æ¨¡å—åˆå¹¶ï¼šåœ¨é‡‡ç”¨æ¨¡å—åŒ–çš„é¡¹ç›®æœ‰å¾ˆå¤šæ¨¡å—å’Œæ–‡ä»¶ï¼Œéœ€è¦æ„å»ºåŠŸèƒ½æŠŠæ¨¡å—åˆ†ç±»åˆå¹¶æˆä¸€ä¸ªæ–‡ä»¶\n- è‡ªåŠ¨åˆ·æ–°ï¼šç›‘å¬æœ¬åœ°æºä»£ç çš„å˜åŒ–ï¼Œè‡ªåŠ¨æ„å»ºï¼Œåˆ·æ–°æµè§ˆå™¨\n- ä»£ç æ ¡éªŒï¼šåœ¨ä»£ç è¢«æäº¤åˆ°ä»“åº“å‰éœ€è¦æ£€æµ‹ä»£ç æ˜¯å¦ç¬¦åˆè§„èŒƒï¼Œä»¥åŠå•å…ƒæµ‹è¯•æ˜¯å¦é€šè¿‡\n- è‡ªåŠ¨å‘å¸ƒï¼šæ›´æ–°å®Œä»£ç åï¼Œè‡ªåŠ¨æ„å»ºå‡ºçº¿ä¸Šå‘å¸ƒä»£ç å¹¶ä¼ è¾“ç»™å‘å¸ƒç³»ç»Ÿã€‚\n\n- Entryï¼ˆå…¥å£ï¼‰ï¼šWebpack æ‰§è¡Œæ„å»ºçš„ç¬¬ä¸€æ­¥å°†ä» Entry å¼€å§‹ï¼Œå¯æŠ½è±¡æˆè¾“å…¥ã€‚\n- Outputï¼ˆå‡ºå£ï¼‰ï¼šæŒ‡ç¤º webpack å¦‚ä½•å»è¾“å‡ºã€ä»¥åŠåœ¨å“ªé‡Œè¾“å‡º\n- Moduleï¼ˆæ¨¡å—ï¼‰ï¼šåœ¨ Webpack é‡Œä¸€åˆ‡çš†æ¨¡å—ï¼Œä¸€ä¸ªæ¨¡å—å¯¹åº”ç€ä¸€ä¸ªæ–‡ä»¶ã€‚Webpack ä¼šä»é…ç½®çš„ Entry å¼€å§‹é€’å½’æ‰¾å‡ºæ‰€æœ‰ä¾èµ–çš„æ¨¡å—ã€‚\n- Chunkï¼ˆä»£ç å—ï¼‰ï¼šä¸€ä¸ª Chunk ç”±å¤šä¸ªæ¨¡å—ç»„åˆè€Œæˆï¼Œç”¨äºä»£ç åˆå¹¶ä¸åˆ†å‰²ã€‚\n- Loaderï¼ˆæ¨¡å—è½¬æ¢å™¨ï¼‰ï¼šç”¨äºæŠŠæ¨¡å—åŸå†…å®¹æŒ‰ç…§éœ€æ±‚è½¬æ¢æˆæ–°å†…å®¹ã€‚\n- Pluginï¼ˆæ‰©å±•æ’ä»¶ï¼‰ï¼šåœ¨ Webpack æ„å»ºæµç¨‹ä¸­çš„ç‰¹å®šæ—¶æœºä¼šå¹¿æ’­å‡ºå¯¹åº”çš„äº‹ä»¶ï¼Œæ’ä»¶å¯ä»¥ç›‘å¬è¿™äº›äº‹ä»¶ï¼Œå¹¶æ”¹å˜è¾“å‡ºç»“æœ\n\n## webpackæ„å»ºè¿‡ç¨‹\n- ä»entryé‡Œé…ç½®çš„moduleå¼€å§‹é€’å½’è§£æentryä¾èµ–çš„æ‰€æœ‰module\n- æ¯æ‰¾åˆ°ä¸€ä¸ªmoduleï¼Œå°±ä¼šæ ¹æ®é…ç½®çš„loaderå»æ‰¾å¯¹åº”çš„è½¬æ¢è§„åˆ™\n- å¯¹moduleè¿›è¡Œè½¬æ¢åï¼Œå†è§£æå‡ºå½“å‰moduleä¾èµ–çš„module\n- è¿™äº›æ¨¡å—ä¼šä»¥entryä¸ºå•ä½åˆ†ç»„ï¼Œä¸€ä¸ªentryå’Œå…¶æ‰€æœ‰ä¾èµ–çš„moduleè¢«åˆ†åˆ°ä¸€ä¸ªç»„Chunk\n- æœ€åwebpackä¼šæŠŠæ‰€æœ‰Chunkè½¬æ¢æˆæ–‡ä»¶è¾“å‡º\n- åœ¨æ•´ä¸ªæµç¨‹ä¸­webpackä¼šåœ¨æ°å½“çš„æ—¶æœºæ‰§è¡Œpluginé‡Œå®šä¹‰çš„é€»è¾‘\n\n1. åˆå§‹åŒ–ï¼šè§£æwebpacké…ç½®å‚æ•°ï¼Œç”Ÿæˆ Compiler å®ä¾‹\n2. æ³¨å†Œæ’ä»¶ï¼šè°ƒç”¨æ’ä»¶çš„applyæ–¹æ³•ï¼Œç»™æ’ä»¶ä¼ å…¥compilerå®ä¾‹çš„å¼•ç”¨ï¼Œæ’ä»¶é€šè¿‡compilerè°ƒç”¨Webpackæä¾›çš„APIï¼Œè®©æ’ä»¶å¯ä»¥ç›‘å¬åç»­çš„æ‰€æœ‰äº‹ä»¶èŠ‚ç‚¹ã€‚\n3. å…¥å£ï¼šè¯»å–å…¥å£æ–‡ä»¶\n4. è§£ææ–‡ä»¶ï¼šä½¿ç”¨loaderå°†æ–‡ä»¶è§£ææˆæŠ½è±¡è¯­æ³•æ ‘ AST\n5. ç”Ÿæˆä¾èµ–å›¾è°±ï¼šæ‰¾å‡ºæ¯ä¸ªæ–‡ä»¶çš„ä¾èµ–é¡¹ï¼ˆéå†ï¼‰\n6. è¾“å‡ºï¼šæ ¹æ®è½¬æ¢å¥½çš„ä»£ç ï¼Œç”Ÿæˆ chunk\n7. ç”Ÿæˆæœ€åæ‰“åŒ…çš„æ–‡ä»¶\n\n## webpackæ‰“åŒ…åŸç†\nå°†æ‰€æœ‰ä¾èµ–æ‰“åŒ…æˆä¸€ä¸ªbundle.jsï¼Œé€šè¿‡ä»£ç åˆ†å‰²æˆå•å…ƒç‰‡æ®µæŒ‰éœ€åŠ è½½\n---\n<!--more-->\n\n## ä»€ä¹ˆæ˜¯webpackï¼Œä¸gulp,gruntæœ‰ä»€ä¹ˆåŒºåˆ«\n- webpackæ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥é€’å½’åœ°æ‰“åŒ…é¡¹ç›®ä¸­çš„æ‰€æœ‰æ¨¡å—ï¼Œæœ€ç»ˆç”Ÿæˆå‡ ä¸ªæ‰“åŒ…åçš„æ–‡ä»¶ã€‚\n- åŒºåˆ«ï¼šwebpackæ”¯æŒä»£ç åˆ†å‰²ï¼Œæ¨¡å—åŒ–ï¼ˆAMD,CommonJ,ES2015ï¼‰ï¼Œå…¨å±€åˆ†æã€‚gulp æ˜¯ä»»åŠ¡æ‰§è¡Œå™¨(task runner)ï¼šå°±æ˜¯ç”¨æ¥è‡ªåŠ¨åŒ–å¤„ç†å¸¸è§çš„å¼€å‘ä»»åŠ¡ï¼Œä¾‹å¦‚é¡¹ç›®çš„æ£€æŸ¥(lint)ã€æ„å»º(build)ã€æµ‹è¯•(test)\n\n## ä»€ä¹ˆæ˜¯entry,output?\n- entry å…¥å£ï¼Œå‘Šè¯‰webpackè¦ä½¿ç”¨å“ªä¸ªæ¨¡å—ä½œä¸ºæ„å»ºé¡¹ç›®çš„èµ·ç‚¹ï¼Œé»˜è®¤ä¸º./src/index.js\n- output å‡ºå£ï¼Œå‘Šè¯‰webpackåœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰“åŒ…å¥½çš„ä»£ç ä»¥åŠå¦‚ä½•å‘½åï¼Œé»˜è®¤ä¸º./dist\n\n## ä»€ä¹ˆæ˜¯loaderï¼Œplugins?\n- loaderæ˜¯ç”¨æ¥å‘Šè¯‰webpackå¦‚ä½•è½¬æ¢æŸä¸€ç±»å‹çš„æ–‡ä»¶ï¼Œå¹¶ä¸”å¼•å…¥åˆ°æ‰“åŒ…å‡ºçš„æ–‡ä»¶ä¸­\n- plugins(æ’ä»¶)ä½œç”¨æ›´å¤§ï¼Œå¯ä»¥æ‰“åŒ…ä¼˜åŒ–ï¼Œèµ„æºç®¡ç†å’Œæ³¨å…¥ç¯å¢ƒå˜é‡(pluginæ˜¯ä¸€ä¸ªå«æœ‰ apply æ–¹æ³•çš„ç±»)\n\napply æ–¹æ³•ä¸­æ¥æ”¶ä¸€ä¸ª compiler å‚æ•°ï¼Œä¹Ÿå°±æ˜¯ webpackå®ä¾‹ã€‚ç”±äºè¯¥å‚æ•°çš„å­˜åœ¨ plugin å¯ä»¥å¾ˆå¥½çš„è¿ç”¨ webpack çš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œåœ¨ä¸åŒçš„æ—¶é—´èŠ‚ç‚¹åšä¸€äº›æ“ä½œã€‚\n\n### æ‰‹å†™ä¸€ä¸ªloader\nloaderå°±æ˜¯ä¸€ä¸ªnodeæ¨¡å—(å¯¼å‡ºä¸ºå‡½æ•°çš„JSæ¨¡å—)ï¼Œå®ƒè¾“å‡ºäº†ä¸€ä¸ªå‡½æ•°ã€‚å½“æŸç§èµ„æºéœ€è¦ç”¨è¿™ä¸ªloaderè½¬æ¢æ—¶ï¼Œè¿™ä¸ªå‡½æ•°ä¼šè¢«è°ƒç”¨ã€‚å¹¶ä¸”ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥é€šè¿‡æä¾›ç»™å®ƒçš„thisä¸Šä¸‹æ–‡è®¿é—®Loader APIã€‚ä¼ å…¥ä¸Šä¸€ä¸ªloaderçš„ç»“æœæˆ–è€…èµ„æºæ–‡ä»¶ã€‚\n```js\n// å®šä¹‰ reverse-txt-loader.js\nmodule.exports = function(src) {\n  //srcæ˜¯åŸæ–‡ä»¶å†…å®¹ï¼ˆabcdeï¼‰ï¼Œä¸‹é¢å¯¹å†…å®¹è¿›è¡Œå¤„ç†ï¼Œè¿™é‡Œæ˜¯åè½¬\n  var result = src.split('').reverse().join(''); \n  //è¿”å›JavaScriptæºç ï¼Œå¿…é¡»æ˜¯Stringæˆ–è€…Buffer\n  return `module.exports = '${result}'`;\n}\n// ä½¿ç”¨\n{\n\ttest: /\\.txt$/,\n\tuse: [\n\t\t{\n\t\t\t'./path/reverse-txt-loader'\n\t\t}\n\t]\n    // use: {\n    //     loader: './path/reverse-txt-loader',\n    //     include: path.resolve(__dirname, 'src'),// æŒ‡å®šéœ€è¦è½¬è¯‘çš„æ–‡ä»¶å¤¹\n    //     exclude: path.resolve(__dirname, 'node_modules'),// æŒ‡å®šè½¬è¯‘æ—¶å¿½ç•¥çš„æ–‡ä»¶å¤¹  \n    // }\n},\n```\næ³¨æ„ç‚¹ï¼š\n- ç¼–å†™ Loader æ—¶è¦éµå¾ªå•ä¸€èŒè´£ï¼Œæ¯ä¸ª Loader åªåšä¸€ç§\"è½¬ä¹‰\"å·¥ä½œã€‚æ¯ä¸ª Loader çš„æ‹¿åˆ°çš„æ˜¯æºæ–‡ä»¶å†…å®¹ï¼ˆsourceï¼‰ï¼Œå¯ä»¥é€šè¿‡è¿”å›å€¼çš„æ–¹å¼å°†å¤„ç†åçš„å†…å®¹è¾“å‡ºï¼Œä¹Ÿå¯ä»¥è°ƒç”¨ this.callback()æ–¹æ³•ï¼Œå°†å†…å®¹è¿”å›ç»™ webpackã€‚ è¿˜å¯ä»¥é€šè¿‡ this.async()ç”Ÿæˆä¸€ä¸ª callback å‡½æ•°ï¼Œå†ç”¨è¿™ä¸ª callback å°†å¤„ç†åçš„å†…å®¹è¾“å‡ºå‡ºå»ã€‚\n- Loader è¿è¡Œåœ¨ Node.js ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨ä»»æ„ Node.js è‡ªå¸¦çš„ API æˆ–è€…å®‰è£…ç¬¬ä¸‰æ–¹æ¨¡å—è¿›è¡Œè°ƒç”¨\n- Webpack ä¼ ç»™ Loader çš„æºå†…å®¹é»˜è®¤éƒ½æ˜¯ UTF-8 æ ¼å¼ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œå½“æŸäº›åœºæ™¯ä¸‹ Loader å¤„ç†äºŒè¿›åˆ¶æ–‡ä»¶æ—¶ï¼Œéœ€è¦é€šè¿‡ exports.raw = true å‘Šè¯‰ Webpack è¯¥ Loader æ˜¯å¦éœ€è¦äºŒè¿›åˆ¶æ•°æ®\n- å°½å¯èƒ½çš„å¼‚æ­¥åŒ– Loaderï¼Œå¦‚æœè®¡ç®—é‡å¾ˆå°ï¼ŒåŒæ­¥ä¹Ÿå¯ä»¥\n- Loader æ˜¯æ— çŠ¶æ€çš„ï¼Œæˆ‘ä»¬ä¸åº”è¯¥åœ¨ Loader ä¸­ä¿ç•™çŠ¶æ€\n- ä½¿ç”¨ loader-utils å’Œ schema-utils ä¸ºæˆ‘ä»¬æä¾›çš„å®ç”¨å·¥å…·\n\n### æ‰‹å†™ä¸€ä¸ªplugin\n```js\nclass DemoWebpackPlugin {\n    constructor () {\n        console.log('åˆå§‹åŒ– æ’ä»¶')\n    }\n    apply (compiler) {\n    }\n}\n\nmodule.exports = DemoWebpackPlugin\n```\n\n## ä»€ä¹ˆæ˜¯bundle,chunk,module?\nbundleæ˜¯webpackæ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶ï¼Œchunkæ˜¯webpackåœ¨è¿›è¡Œæ¨¡å—çš„ä¾èµ–åˆ†æçš„æ—¶å€™ï¼Œä»£ç åˆ†å‰²å‡ºæ¥çš„ä»£ç å—ï¼Œmoduleæ˜¯å¼€å‘ä¸­çš„å•ä¸ªæ¨¡å—ã€‚\n\n## å¦‚ä½•è‡ªåŠ¨ç”Ÿæˆwebpacké…ç½®ï¼Ÿ\nå¯ä»¥ç”¨ä¸€äº›å®˜æ–¹è„šæ‰‹æ¶\n\n- webpack-cli\n- vue-cli\n\n```js\n// é¦–å…ˆå®‰è£…\nnpm install -g @vue/cli\n// æ–°å»ºé¡¹ç›®hello\nvue create hello\n```\n\nnuxt-cli\n```js\n// ç¡®ä¿å®‰è£…äº†npx,npxåœ¨npm5.2.0é»˜è®¤å®‰è£…äº†\n// æ–°å»ºé¡¹ç›®hello\nnpx create-nuxt-app hello\n```\n\n## webpackå¦‚ä½•é…ç½®å•é¡µé¢å’Œå¤šé¡µé¢çš„åº”ç”¨ç¨‹åºï¼Ÿ\n```js\n// å•ä¸ªé¡µé¢\nmodule.exports = {\n    entry: './path/to/my/entry/file.js'\n}\n\n// å¤šé¡µé¢åº”ç”¨ç¨‹åº\nmodule.entrys = {\n    entry: {\n        pageOne: './src/pageOne/index.js',\n        pageTwo: ['./src/pageTwo/index.js', \"./src/pageTwo/main.js\"],\n    }\n}\n```\nå¤šå…¥å£å¯ä»¥é€šè¿‡ HtmlWebpackPlugin åˆ†å¼€æ³¨å…¥\n```js\nplugins: [\n  new HtmlWebpackPlugin({\n    chunks: ['pageOne'],\n    filename: 'test.html',\n    template: 'src/assets/test.html'\n  })\n]\n```\n\n## å‡ ä¸ªå¸¸è§çš„loader\n- file-loaderï¼šæŠŠæ–‡ä»¶è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨ä»£ç ä¸­é€šè¿‡ç›¸å¯¹ URL å»å¼•ç”¨è¾“å‡ºçš„æ–‡ä»¶\n- url-loaderï¼šå’Œ file-loader ç±»ä¼¼ï¼Œä½†æ˜¯èƒ½åœ¨æ–‡ä»¶å¾ˆå°çš„æƒ…å†µä¸‹ä»¥ base64 çš„æ–¹å¼æŠŠæ–‡ä»¶å†…å®¹æ³¨å…¥åˆ°ä»£ç ä¸­å»\n- source-map-loaderï¼šåŠ è½½é¢å¤–çš„ Source Map æ–‡ä»¶ï¼Œä»¥æ–¹ä¾¿æ–­ç‚¹è°ƒè¯•\n- image-loaderï¼šåŠ è½½å¹¶ä¸”å‹ç¼©å›¾ç‰‡æ–‡ä»¶\n- babel-loaderï¼šæŠŠ ES6 è½¬æ¢æˆ ES5\n- css-loaderï¼šåŠ è½½ CSSï¼Œæ”¯æŒæ¨¡å—åŒ–ã€å‹ç¼©ã€æ–‡ä»¶å¯¼å…¥ç­‰ç‰¹æ€§\n- style-loaderï¼šæŠŠ CSS ä»£ç æ³¨å…¥åˆ° JavaScript ä¸­ï¼Œé€šè¿‡ DOM æ“ä½œå»åŠ è½½ CSSã€‚\n- eslint-loaderï¼šé€šè¿‡ ESLint æ£€æŸ¥ JavaScript ä»£ç \n\n## å‡ ä¸ªå¸¸è§çš„plugin\n- define-pluginï¼šå®šä¹‰ç¯å¢ƒå˜é‡\n- terser-webpack-pluginï¼šé€šè¿‡TerserPluginå‹ç¼©ES6ä»£ç \n- html-webpack-plugin ä¸ºhtmlæ–‡ä»¶ä¸­å¼•å…¥çš„å¤–éƒ¨èµ„æºï¼Œå¯ä»¥ç”Ÿæˆåˆ›å»ºhtmlå…¥å£æ–‡ä»¶\n- mini-css-extract-pluginï¼šåˆ†ç¦»cssæ–‡ä»¶\n- clean-webpack-pluginï¼šåˆ é™¤æ‰“åŒ…æ–‡ä»¶\n- happypackï¼šå®ç°å¤šçº¿ç¨‹åŠ é€Ÿç¼–è¯‘\n\n```js\nvar UglifyJSPlugin = require('uglifyjs-webpack-plugin');\nvar webpack = require('webpack');\nvar ExtractTextPlugin = require(\"extract-text-webpack-plugin\");\nvar providePlugin = new webpack.ProvidePlugin({$: 'jquery', jQuery: 'jquery', 'window.jQuery': 'jquery'});\nmodule.exports = {\n    entry: {\n        index: './src/js/index.js',\n        goodsInfo: './src/js/goodsInfo.js'\n    },\n    output: {\n        filename: '[name].js',\n        path: __dirname + '/out',\n        publicPath: 'http://localhost:8080/out'\n    },\n    module: {\n        rules: [\n            {test: /.js$/, use: ['babel-loader']},\n            // // {test: /.css$/, use: ['style-loader','css-loader']},\n            // {\n            //     test: /.css$/,\n            //     use: ExtractTextPlugin.extract({\n            //       fallback: \"style-loader\",\n            //       use: \"css-loader\"\n            //     })\n            // },\n            {test: /.jpg|png|gif|svg$/, use: ['url-loader?limit=8192&name=./[name].[ext]']}, \n            {test: /.less$/, use: ['style-loader', 'css-loader', 'less-loader']}\n        ]\n    },\n    plugins: [\n        new UglifyJSPlugin(),\n        new webpack.optimize.CommonsChunkPlugin({\n            name: \"commons\",\n            filename: \"commons.js\",\n            minChunks:2}),  \n        new ExtractTextPlugin(\"[name].css\"), \n        providePlugin     \n    ],\n    externals: {\n    // ä»è¾“å‡ºçš„ bundle ä¸­æ’é™¤ echarts ä¾èµ–\n    echarts: 'echarts',\n  }\n}\n```\n\n## webpack-dev-server\n1. ç”¨expresså¯ä¸€ä¸ªæœåŠ¡\n2. sockjsä¸é¡µé¢äº’åŠ¨ã€‚\n\nåº•å±‚ä¸€æ–¹é¢ä½¿ç”¨webpackåœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œæ„å»ºæ‰“åŒ…ï¼Œä¸€æ–¹é¢åœ¨å®¢æˆ·ç«¯æ³¨å…¥runtimeä»¥ä¾¿å’ŒæœåŠ¡å™¨ç«¯å»ºç«‹è”ç³»ã€‚è¿˜æä¾›äº†ä»£ç†åŠŸèƒ½ï¼Œä»£ç†æœ‰å¾ˆå¤šåº”ç”¨åœºæ™¯ï¼Œä¸¾å‡ ä¸ªç®€å•çš„ä¾‹å­ï¼šæœ¬åœ°æ•°æ®æ¥å£æ¨¡æ‹Ÿã€è¿œç«¯æ¥å£è°ƒè¯•ã€åˆ†æ‹†æ¥\nå£åˆ°ä¸åŒçš„è¿œç«¯æœåŠ¡å™¨ç­‰ã€‚\n\n### è‡ªåŠ¨åˆ·æ–°\n- iframeæ¨¡å¼ http://[host]:[port]/webpack-dev-server/[path]\nâœ¦ æ— éœ€é¢å¤–çš„é…ç½®\nâœ¦ é¡¶éƒ¨æ¡å¯ä»¥æ˜¾ç¤ºç¼–è¯‘ä¿¡æ¯\nâœ¦ æµè§ˆå™¨çš„åœ°å€ä¸ä¼šè·Ÿç€é¡µé¢URLå˜åŠ¨\n\n- inlineæ¨¡å¼ http://[host]:[port]/[path]\nâœ¦ éœ€è¦é¢å¤–çš„é…ç½®\nâœ¦ ç¼–è¯‘ä¿¡æ¯åªèƒ½åœ¨å‘½ä»¤è¡Œå’Œæµè§ˆå™¨consoleä¸­æŸ¥çœ‹\nâœ¦ æµè§ˆå™¨çš„åœ°å€å’Œé¡µé¢URLåŒæ­¥\n\n### çƒ­æ›¿æ¢HMR åªæ”¯æŒinlineæ¨¡å¼\n> webpack-dev-server --inline --hot\n\n### å“ˆå¸Œå€¼è®¡ç®—æ–¹å¼\nwebpackç»™æˆ‘ä»¬æä¾›äº†ä¸‰ç§å“ˆå¸Œå€¼è®¡ç®—æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯ hash ã€chunkhash å’Œ contenthashã€‚\n- hashï¼šè·Ÿæ•´ä¸ªé¡¹ç›®çš„æ„å»ºç›¸å…³ï¼Œæ„å»ºç”Ÿæˆçš„æ–‡ä»¶hashå€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªè¦é¡¹ç›®é‡Œæœ‰æ–‡ä»¶æ›´æ”¹ï¼Œæ•´ä¸ªé¡¹ç›®æ„å»ºçš„hashå€¼éƒ½ä¼šæ›´æ”¹ã€‚\n- chunkhashï¼šæ ¹æ®ä¸åŒçš„å…¥å£æ–‡ä»¶(Entry)è¿›è¡Œä¾èµ–æ–‡ä»¶è§£æã€æ„å»ºå¯¹åº”çš„chunkï¼Œç”Ÿæˆå¯¹åº”çš„hashå€¼ã€‚\n- contenthashï¼šç”±æ–‡ä»¶å†…å®¹äº§ç”Ÿçš„hashå€¼ï¼Œå†…å®¹ä¸åŒäº§ç”Ÿçš„contenthashå€¼ä¹Ÿä¸ä¸€æ ·ã€‚\n\n### devServeré…ç½®\n- devServer.compressï¼Œ å¯ç”¨gzipå‹ç¼©ã€‚\n- devServer.contentBaseï¼Œå‘Šè¯‰æœåŠ¡å™¨ä»å“ªé‡Œæä¾›å†…å®¹ã€‚ åªæœ‰åœ¨ä½ æƒ³è¦æä¾›é™æ€æ–‡ä»¶æ—¶æ‰éœ€è¦ã€‚\n- devServer.hostï¼Œ æŒ‡å®šhostã€‚ ä½¿ç”¨0 .0 .0 .0 å¯ä»¥è®©å±€åŸŸç½‘å†…å¯è®¿é—®ã€‚\n- devServer.hotï¼Œ å¯ç”¨ webpack çš„æ¨¡å—çƒ­æ›¿æ¢ç‰¹æ€§ï¼ˆ Hot Module Replacementï¼‰ã€‚\n- devServer.inlineï¼Œ æ¨¡å¼åˆ‡æ¢ã€‚ é»˜è®¤ä¸ºå†…è”æ¨¡å¼ï¼Œ ä½¿ç”¨falseåˆ‡æ¢åˆ°iframeæ¨¡å¼ã€‚\n- devServer.openï¼Œ å¯åŠ¨webpack - dev - serveråæ˜¯å¦ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€é¦–é¡µã€‚\n- devServer.portï¼Œ ç›‘å¬ç«¯å£å·ã€‚ é»˜è®¤8080ã€‚\n- devServer.proxyï¼Œ ä»£ç†ï¼Œ å¯¹äºå¦å¤–æœ‰å•ç‹¬çš„åç«¯å¼€å‘æœåŠ¡å™¨APIæ¥è¯´æ¯”è¾ƒé€‚åˆã€‚\n- devServer.publicPathï¼Œ è®¾ç½®å†…å­˜ä¸­çš„æ‰“åŒ…æ–‡ä»¶çš„è¾“å‡ºç›®å½•ã€‚ åŒºåˆ«äºoutput.publicPathã€‚\n- devServer.historyApiFallbackï¼Œå›é€€:æ”¯æŒå†å²APIã€‚\n- devServer.progressï¼Œè®©ç¼–è¯‘çš„è¾“å‡ºå†…å®¹å¸¦æœ‰è¿›åº¦å’Œé¢œè‰²ã€‚\n\n![webpack-hmr](http://cdn.mydearest.cn/blog/images/webpack-hmr.png)\n\næ³¨é‡Šï¼šç»¿è‰²æ˜¯webpackæ§åˆ¶åŒºåŸŸï¼Œè“è‰²æ˜¯webpack-dev-serveræ§åˆ¶åŒºåŸŸï¼Œçº¢è‰²æ˜¯æ–‡ä»¶ç³»ç»Ÿï¼Œé’è‰²æ˜¯é¡¹ç›®æœ¬èº«ã€‚\n\nç¬¬ä¸€æ­¥ï¼šwebpackç›‘å¬æ–‡ä»¶å˜åŒ–å¹¶æ‰“åŒ…ï¼ˆ1ï¼Œ2ï¼‰\nwebpack-dev-middleware è°ƒç”¨ webpack çš„ api å¯¹æ–‡ä»¶ç³»ç»Ÿ watchï¼Œå½“æ–‡ä»¶å‘ç”Ÿæ”¹å˜åï¼Œwebpack é‡æ–°å¯¹æ–‡ä»¶è¿›è¡Œç¼–è¯‘æ‰“åŒ…ï¼Œç„¶åä¿å­˜åˆ°å†…å­˜ä¸­ã€‚ æ‰“åŒ…åˆ°äº†å†…å­˜ä¸­ï¼Œä¸ç”Ÿæˆæ–‡ä»¶çš„åŸå› å°±åœ¨äºè®¿é—®å†…å­˜ä¸­çš„ä»£ç æ¯”è®¿é—®æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡ä»¶æ›´å¿«ï¼Œè€Œä¸”ä¹Ÿå‡å°‘äº†ä»£ç å†™å…¥æ–‡ä»¶çš„å¼€é”€\n\nç¬¬äºŒæ­¥ï¼š webpack-dev-middlewareå¯¹é™æ€æ–‡ä»¶çš„ç›‘å¬ï¼ˆ3ï¼‰\nwebpack-dev-server å¯¹æ–‡ä»¶å˜åŒ–çš„ä¸€ä¸ªç›‘æ§ï¼Œè¿™ä¸€æ­¥ä¸åŒäºç¬¬ä¸€æ­¥ï¼Œå¹¶ä¸æ˜¯ç›‘æ§ä»£ç å˜åŒ–é‡æ–°æ‰“åŒ…ã€‚å½“æˆ‘ä»¬åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®äº†devServer.watchContentBase ä¸º true çš„æ—¶å€™ï¼ŒServer ä¼šç›‘å¬è¿™äº›é…ç½®æ–‡ä»¶å¤¹ä¸­é™æ€æ–‡ä»¶çš„å˜åŒ–ï¼Œå˜åŒ–åä¼šé€šçŸ¥æµè§ˆå™¨ç«¯å¯¹åº”ç”¨è¿›è¡Œ live reloadã€‚æ³¨æ„ï¼Œè¿™å„¿æ˜¯æµè§ˆå™¨åˆ·æ–°ï¼Œå’Œ HMR æ˜¯ä¸¤ä¸ªæ¦‚å¿µ\n\nç¬¬ä¸‰æ­¥ï¼šdevServer é€šçŸ¥æµè§ˆå™¨ç«¯æ–‡ä»¶å‘ç”Ÿæ”¹å˜ï¼ˆ4ï¼‰\nsockjs åœ¨æœåŠ¡ç«¯å’Œæµè§ˆå™¨ç«¯å»ºç«‹äº†ä¸€ä¸ª webSocket é•¿è¿æ¥ï¼Œä»¥ä¾¿å°† webpack ç¼–è¯‘å’Œæ‰“åŒ…çš„å„ä¸ªé˜¶æ®µçŠ¶æ€å‘ŠçŸ¥æµè§ˆå™¨ï¼Œæœ€å…³é”®çš„æ­¥éª¤è¿˜æ˜¯ webpack-dev-server è°ƒç”¨ webpack api ç›‘å¬ compileçš„ done äº‹ä»¶ï¼Œå½“compile å®Œæˆåï¼Œwebpack-dev-serveré€šè¿‡ _sendStatus æ–¹æ³•å°†ç¼–è¯‘æ‰“åŒ…åçš„æ–°æ¨¡å— hash å€¼å‘é€åˆ°æµè§ˆå™¨ç«¯ã€‚\n\nç¬¬å››æ­¥ï¼šwebpack æ¥æ”¶åˆ°æœ€æ–° hash å€¼éªŒè¯å¹¶è¯·æ±‚æ¨¡å—ä»£ç ï¼ˆ5ï¼Œ6ï¼‰\nwebpack-dev-server/client ç«¯å¹¶ä¸èƒ½å¤Ÿè¯·æ±‚æ›´æ–°çš„ä»£ç ï¼Œä¹Ÿä¸ä¼šæ‰§è¡Œçƒ­æ›´æ¨¡å—æ“ä½œï¼Œè€ŒæŠŠè¿™äº›å·¥ä½œåˆäº¤å›ç»™äº† webpackï¼Œwebpack/hot/dev-server çš„å·¥ä½œå°±æ˜¯æ ¹æ® webpack-dev-server/client ä¼ ç»™å®ƒçš„ä¿¡æ¯ä»¥åŠ dev-server çš„é…ç½®å†³å®šæ˜¯åˆ·æ–°æµè§ˆå™¨å‘¢è¿˜æ˜¯è¿›è¡Œæ¨¡å—çƒ­æ›´æ–°ã€‚å½“ç„¶å¦‚æœä»…ä»…æ˜¯åˆ·æ–°æµè§ˆå™¨ï¼ˆæ‰§è¡Œæ­¥éª¤11ï¼‰ï¼Œä¹Ÿå°±æ²¡æœ‰åé¢é‚£äº›æ­¥éª¤äº†ã€‚\n\nç¬¬äº”æ­¥ï¼šHotModuleReplacement.runtime å¯¹æ¨¡å—è¿›è¡Œçƒ­æ›´æ–°ï¼ˆ7,8,9ï¼‰\næ˜¯å®¢æˆ·ç«¯ HMR çš„ä¸­æ¢ï¼Œå®ƒæ¥æ”¶åˆ°ä¸Šä¸€æ­¥ä¼ é€’ç»™ä»–çš„æ–°æ¨¡å—çš„ hash å€¼ï¼Œå®ƒé€šè¿‡ JsonpMainTemplate.runtime å‘ server ç«¯å‘é€ Ajax è¯·æ±‚ï¼ŒæœåŠ¡ç«¯è¿”å›ä¸€ä¸ª jsonï¼Œè¯¥ json åŒ…å«äº†æ‰€æœ‰è¦æ›´æ–°çš„æ¨¡å—çš„ hash å€¼ï¼Œè·å–åˆ°æ›´æ–°åˆ—è¡¨åï¼Œè¯¥æ¨¡å—å†æ¬¡é€šè¿‡ jsonp è¯·æ±‚ï¼Œè·å–åˆ°æœ€æ–°çš„æ¨¡å—ä»£ç ã€‚\n\nç¬¬å…­æ­¥ï¼šHotModulePlugin å°†ä¼šå¯¹æ–°æ—§æ¨¡å—è¿›è¡Œå¯¹æ¯”ï¼ˆ10ï¼‰\nHotModulePlugin å°†ä¼šå¯¹æ–°æ—§æ¨¡å—è¿›è¡Œå¯¹æ¯”ï¼Œå†³å®šæ˜¯å¦æ›´æ–°æ¨¡å—ï¼Œåœ¨å†³å®šæ›´æ–°æ¨¡å—åï¼Œæ£€æŸ¥æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ›´æ–°æ¨¡å—çš„åŒæ—¶æ›´æ–°æ¨¡å—é—´çš„ä¾èµ–å¼•ç”¨ ï¼Œç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯æ‰¾å‡º outdatedModules å’Œ outdatedDependenciesã€‚ç¬¬äºŒä¸ªé˜¶æ®µä»ç¼“å­˜ä¸­åˆ é™¤è¿‡æœŸçš„æ¨¡å—å’Œä¾èµ–ã€‚ç¬¬ä¸‰ä¸ªé˜¶æ®µæ˜¯å°†æ–°çš„æ¨¡å—æ·»åŠ åˆ° modules ä¸­ï¼Œå½“ä¸‹æ¬¡è°ƒç”¨ __webpack_require__ (webpack é‡å†™çš„ require æ–¹æ³•)æ–¹æ³•çš„æ—¶å€™ï¼Œå°±æ˜¯è·å–åˆ°äº†æ–°çš„æ¨¡å—ä»£ç äº†ã€‚\n\n### ä½¿ç”¨åœºæ™¯\n\nå·¥å…·çš„ä½¿ç”¨æ˜¯åˆ†åœºæ™¯çš„ï¼ŒRollupçš„ä½¿ç”¨åœºæ™¯æ˜¯ï¼Œä½ çš„ä»£ç åŸºäº ES6 æ¨¡å—ç¼–å†™ï¼Œå¹¶ä¸”ä½ åšçš„ä¸œè¥¿æ˜¯å‡†å¤‡ç»™ä»–äººä½¿ç”¨çš„ã€‚\n\næœ‰ä¸€å¥ç»éªŒä¹‹è°ˆï¼šåœ¨å¼€å‘åº”ç”¨æ—¶ä½¿ç”¨ Webpackï¼Œå¼€å‘åº“æ—¶ä½¿ç”¨ Rollupã€‚\n","tags":["æ‰“åŒ…"],"categories":["å·¥å…·"]},{"title":"æˆä¸ºä¼˜ç§€ç¨‹åºå‘˜çš„å»ºè®®","url":"%2F2019%2F%E6%88%90%E4%B8%BA%E4%BC%98%E7%A7%80%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E5%BB%BA%E8%AE%AE.html","content":"\n### 1. å–„ç”¨googleâ­   \nä½œä¸ºä¸€åç¨‹åºå‘˜ï¼Œä½ è¦çŸ¥é“å¦‚ä½•æœç´¢é—®é¢˜çš„ç­”æ¡ˆã€‚å­¦ä¼šæœ‰æ•ˆçš„ä½¿ç”¨googleï¼Œä½ å°†èŠ‚çœå¤§é‡å¼€å‘æ—¶é—´ã€‚  \n\n### 2. è°¨æ…æ‰¿è¯ºè¶…é¢äº¤ä»˜â­\nè®©ä½ çš„å›¢é˜ŸçŸ¥é“ä¸€é¡¹ä»»åŠ¡éœ€è¦ä¸‰å‘¨çš„æ—¶é—´ï¼Œå¹¶åœ¨ä¸¤å‘¨å†…å®Œæˆï¼Œè¿™æ¯”è®©ä»–ä»¬çŸ¥é“ç›¸åçš„æƒ…å†µè¦å¥½ã€‚é€šè¿‡è°¨æ…æ‰¿è¯ºå’Œè¶…é¢äº¤ä»˜ï¼Œä½ ä¼šå»ºç«‹ä¿¡ä»»ã€‚\n   \n### 3. å–„å¾…äº§å“è®¾è®¡äººå‘˜ï¼Œä»–ä»¬æ˜¯ä½ çš„æœ‹å‹   \näº§å“è®¾è®¡äººå‘˜ä¸ºç”¨æˆ·çš„ç—›ç‚¹æä¾›è§£å†³æ–¹æ¡ˆã€‚å‘ä»–ä»¬å­¦ä¹ ï¼Œå›¢ç»“ä¸€è‡´åœ°æ„å»ºæœ‰æ•ˆçš„äº§å“ã€‚\n\n### 4. æ‰¾åˆ°ä¸€åå¯¼å¸ˆ  \næ‰¾åˆ°ä¸€ä¸ªå¯ä»¥å­¦ä¹ å’Œå€Ÿé‰´çš„äººã€‚å¦‚æœä½ éœ€è¦æŠ€æœ¯æŒ‡å¯¼ï¼Œ[Coding Coach](https://codingcoach.io/)ä¼šæ˜¯ä¸€ä¸ªä¸é”™çš„åœ°æ–¹ã€‚\n\n### 5. æˆä¸ºä¸€åå¯¼å¸ˆ   \nåšä¸€ä¸ªåˆ«äººå¯ä»¥å­¦ä¹ å’Œå€Ÿé‰´çš„äººã€‚ä½ å¯ä»¥å°è¯•åœ¨[Coding Coach](https://codingcoach.io/)æˆä¸ºåˆ«äººçš„å¯¼å¸ˆã€‚\n\n### 6. å†™äº›æœ‰ç”¨çš„è¯„è®º\nå†™ä¸‹æœ‰ç”¨çš„å›ç­”è€Œä¸æ˜¯é—®ä¸ºä»€ä¹ˆï¼Œmarkå’ŒçŒæ°´ä¹Ÿæ²¡ä»€ä¹ˆæ„æ€ã€‚\n\n---\n<!--more-->\n\n### 7. åˆç†çš„å‘½åå˜é‡å’Œå‡½æ•°å  \nå‡½æ•°å’Œå˜é‡åº”è¯¥å‡†ç¡®åœ°è¡¨ç¤ºå®ƒä»¬çš„ç”¨é€”ï¼Œå› æ­¤myCoolFunctionä¸æ˜¯ä¸€ä¸ªå¥½åå­—ã€‚\n\n### 8. ç»™è‡ªå·±æ”¾ä¸ªå‡   \næˆ‘ä»¬éƒ½éœ€è¦æ—¶é—´æ¥ç¼“è§£å‹åŠ›ã€‚å»ä¸€ä¸ªä½ ä¸€ç›´æƒ³å»çš„åœ°æ–¹æ”¾ä¸ªå‡ã€‚ä½ çš„å¤§è„‘å’ŒåŒäº‹éƒ½ä¼šæ„Ÿè°¢ä½ çš„ã€‚\n\n### 9. åˆ é™¤æ— ç”¨ä»£ç â­   \næ²¡æœ‰ç†ç”±ç§¯ç´¯æ›´å¤šæŠ€æœ¯å€ºåŠ¡ã€‚\n\n### 10. å­¦ä¼šé˜…è¯»ä»£ç â­ \né˜…è¯»ä»£ç æ˜¯ä¸€é¡¹éå¸¸å®è´µçš„è¢«ä½ä¼°çš„æŠ€èƒ½ã€‚\n\n### 11. æ‰¾åˆ°å¥åº·å·¥ä½œå’Œç”Ÿæ´»å¹³è¡¡ç‚¹   \nç»“æŸä¸€å‘¨çš„å·¥ä½œä¹‹åï¼Œå‘¨æœ«æ”¾æ¾ä¸€ä¸‹ã€‚å…³é—­å·¥ä½œé€šçŸ¥ï¼Œåˆ é™¤æ‰‹æœºä¸Šçš„åº”ç”¨ç¨‹åºã€‚\n\n### 12. åªå®‰æ’å¿…è¦çš„ä¼šè®® \nèƒ½ç”¨é‚®ä»¶è§£å†³çš„å°±æ²¡å¿…è¦å¼€ä¼šï¼Œå¦‚æœéè¦å¼€ï¼Œä¹Ÿåº”è¯¥è®©ä¼šè®®ç®€çŸ­é«˜æ•ˆã€‚\n\n### 13. ç»“å¯¹ç¼–ç¨‹   \nç»“å¯¹ç¼–ç¨‹å¯ä»¥è®©ä½ åŒæ—¶æ‰®æ¼”è€å¸ˆå’Œå­¦ç”Ÿçš„è§’è‰²ã€‚\n\n### 14. å†™å¥½é‚®ä»¶\né‚®ä»¶çš„å†…å®¹åº”è¯¥ç®€æ´è€Œæ¸…æ™°ï¼ŒæŠ“ä½é‡ç‚¹ã€‚æ²¡äººä¼šæƒ³çœ‹ä½ çš„å››é¡µé‚®ä»¶ï¼Œå…„å¼Ÿã€‚\n\n### 15. åŠ å…¥ç¤¾åŒºâ­\nå’Œå¿—åŒé“åˆçš„äººåœ¨ä¸€èµ·ä¼šæ¿€åŠ±ä½ èµ°å‡ºä½è°·ã€‚\n\n### 16. æ¸…ç†ä½ çš„åˆ†æ”¯â­\næ¸…ç†ä½ çš„ç‰ˆæœ¬æ§åˆ¶åˆ†æ”¯ï¼Œå°±åƒåœ¨ä½ çš„å²³çˆ¶æ¯æ¥è®¿ä¹‹å‰æ¸…ç†ä½ çš„æˆ¿å­ä¸€æ ·ã€‚å¦‚æœä½ ä¸å†éœ€è¦ï¼Œè¯·åˆ æ‰å®ƒï¼Œä¸åˆ ç•™ç€è¿‡å¹´å•Šã€‚\n\n### 17. æ¥çº³èŒæ–°\nåŒ…å®¹ç‚¹ï¼Œä¸è¦å‘Šè¯‰åˆ«äººä¸å¤Ÿå¥½ï¼Œä¸èƒ½è¿›å…¥è¿™ä¸ªè¡Œä¸šï¼Œæ¯ä¸ªäººéƒ½æ˜¯æœ‰ä»·å€¼ã€‚\n\n### 18. æ´»åˆ°è€å­¦åˆ°è€   \nä½ é€‰æ‹©äº†ä¸€ä¸ªéœ€è¦ä¸æ–­å­¦ä¹ çš„èŒä¸šï¼Œå­¦ä¼šçˆ±ä¸Šå®ƒã€‚\n\n### 19. æ°¸ä¸è¨€å¼ƒ   \nè¿™å¹¶ä¸å®¹æ˜“ï¼Œä½†æ˜¯æˆ‘ä»¬éƒ½æ˜¯ä»åŒä¸€ä¸ªåœ°æ–¹å¼€å§‹ï¼Œä½ ä¹Ÿèƒ½åšåˆ°ã€‚  \n\n### 20. æ•¢äºæ¥å—æœ‰æŒ‘æˆ˜æ€§çš„ä»»åŠ¡â­ \nå¦‚æœä»»åŠ¡æ²¡æœ‰æŒ‘æˆ˜ï¼Œå®ƒå°±ä¸ä¼šå¸®åŠ©ä½ æˆé•¿ã€‚\n\n### 21. é¡¹ç›®å¼€å§‹å‰æ˜ç¡®éœ€æ±‚â­\nåœ¨å¼€æ’¸ä¹‹å‰ï¼Œä½ åº”è¯¥äº†è§£éªŒæ”¶æ ‡å‡†ï¼Œè¿™å°†ä¸ºä½ èŠ‚çœæ—¶é—´å’Œç—›è‹¦ã€‚\n\n### 22. å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨â­   \næ‹¥æœ‰ä¸€å¥—ä½ ç†Ÿæ‚‰çš„å·¥å…·ï¼Œäº†è§£å“ªäº›å·¥å…·æœåŠ¡äºå“ªäº›ç›®çš„ï¼Œä»¥åŠé¡¹ç›®ä½•æ—¶å¯ä»¥ä»ä½¿ç”¨è¿™äº›å·¥å…·ä¸­è·ç›Šã€‚\n\n### 23. æˆ‘ä»¬éœ€è¦å»ºè®¾æ€§çš„æ‰¹è¯„   \nå‘ä¿¡ä»»çš„åŒäº‹å’Œæœ‹å‹å¯»æ±‚å»ºè®¾æ€§çš„æ‰¹è¯„ï¼Œå®ƒå°†å¸®åŠ©ä½ æ›´ä¼˜ç§€ã€‚ \n\n### 24. ä¿æŒå¼€æ”¾æ€ç»´â­\næŠ€æœ¯åœ¨å˜åŒ–ï¼Œè€Œä¸”å˜åŒ–å¾—å¾ˆå¿«ã€‚ä¸è¦åå¯¹æ–°æŠ€æœ¯ï¼Œå­¦ä¹ å®ƒï¼Œç„¶åå½¢æˆè‡ªå·±çš„è§‚ç‚¹ã€‚ \n\n### 25. ä¿æŒåœ¨æŠ€æœ¯å‰æ²¿ï¼Œä¸è¦æ‰é˜Ÿâ­\né€šè¿‡å…³æ³¨å‡ºç‰ˆç‰©ï¼Œåšå®¢ï¼Œæ’­å®¢å’Œç§‘æŠ€æ–°é—»ï¼ŒåŠæ—¶äº†è§£æœ€æ–°çš„ç§‘æŠ€æ–°é—»ã€‚\n\n### 26. ä¸“æ³¨äºè§£å†³é—®é¢˜â­ \né”»ç‚¼è‡ªå·±è§£å†³é—®é¢˜çš„èƒ½åŠ›ï¼Œå¼ºå¤§çš„è§£å†³é—®é¢˜çš„èƒ½åŠ›èƒ½å¤Ÿå¸®åŠ©ä½ åº”ä»˜ä¸€åˆ‡ï¼Œä¸“æ³¨äºè§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚\n\n### 27. ä¿æŒè°¦è™šâ­\nä¸‰äººè¡Œå¿…æœ‰æˆ‘å¸ˆï¼Œæ— è®ºä½ ä»€ä¹ˆå¤´è¡”ï¼Œä»€ä¹ˆå…¬å¸ï¼Œéƒ½è¦ä¿æŒè°¦é€Šã€‚\n\n### 28. ä¸å…‰è¦ä»£ç å†™çš„å¥½ï¼ŒPPTä¹Ÿè¦è®²å¾—å¥½  \nå­¦ä¹ å¦‚ä½•å¸å¼•ä½ çš„å¬ä¼—ï¼Œå¹¶ç»™å‡ºæœ‰æ•ˆçš„æ¼”ç¤ºã€‚\n\n### 29.  é€‰å‹å¦‚ä¹°èœï¼Œä¹Ÿè¦è´§æ¯”ä¸‰å®¶â­     \nç»™è‡ªå·±æ›´å¤šé€‰æ‹©ï¼Œåœ¨å¼€å±•å·¥ä½œå‰ï¼Œè°ƒç ”å°½å¯èƒ½å¤šçš„è§£å†³æ–¹æ¡ˆã€‚\n\n### 30. æ‰¾åˆ°è‡ªå·±çš„å®šä½â­   \nç§‘æŠ€äº§ä¸šä¹Ÿæœ‰å¾ˆå¤šåˆ†ç±»ï¼Œæ‰¾åˆ°ä½ æœ€æ„Ÿå…´è¶£çš„é¢†åŸŸï¼Œå¹¶æˆä¸ºä¸€åä¸“å®¶ã€‚\n\n### 31. å…»æˆå¥½ä¹ æƒ¯â­   \nè¯•ç€å»ºç«‹ä¸€è‡´çš„ã€å¥åº·çš„ä¹ æƒ¯ï¼Œæ¯”å¦‚ä¿æŒä¸“æ³¨ï¼Œåˆç†å®‰æ’æ—¶é—´ï¼Œå‡ºå¸­ä¼šè®®ï¼Œä»æœ€é‡è¦çš„ä»»åŠ¡å¼€å§‹ã€‚è¿™å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´æ¥é€‚åº”ï¼Œä½†ä»é•¿è¿œæ¥çœ‹æ˜¯å€¼å¾—çš„ã€‚\n\n### 32. å­¦ä¼šdebugâ­ \næ¢ç´¢æµè§ˆå™¨è°ƒè¯•å™¨å·¥å…·ã€‚å­¦ä¹ ä½¿ç”¨IDEè°ƒè¯•çš„ç»†èŠ‚ã€‚é€šè¿‡å­¦ä¹ æœ€æœ‰æ•ˆçš„è°ƒè¯•é—®é¢˜å’Œè·Ÿè¸ªé”™è¯¯çš„æ–¹æ³•ï¼Œå†å›°éš¾çš„bugä¹Ÿèƒ½æå®šã€‚\n\n### 33. é”»ç‚¼ä½ ç°æœ‰çš„æŠ€èƒ½â­     \nå¹¶ä¸æ˜¯è¯´ä½ å·²ç»æŒæ¡äº†ä¸€é¡¹æŠ€èƒ½å°±ä¸éœ€è¦å†é”»ç‚¼å®ƒã€‚ä¸šç²¾äºå‹¤è’äºå¬‰ï¼Œé™¤éæœ‰æ„è¯†åœ°æé«˜æŠ€èƒ½ï¼Œå¦åˆ™æŠ€èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œæ¶ˆå¤±ã€‚è€Œè¿™ä¸ªè¡Œä¸šåˆå‘å±•å¾—å¦‚æ­¤ä¹‹å¿«ï¼ŒåšæŒç»ƒä¹ æ˜¯å¾ˆé‡è¦çš„ã€‚ä»â€œæˆ‘ä¸€ç›´éƒ½æ˜¯è¿™æ ·åšçš„â€çš„å¿ƒæ€ä¸­èµ°å‡ºæ¥ï¼Œè¿›å…¥â€œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•æ¥åšè¿™ä»¶äº‹â€çš„å¿ƒæ€ã€‚  \n\nä»…ä»…æ˜¯å› ä¸ºä½ ç°åœ¨æ‹¥æœ‰å…­å—è…¹è‚Œï¼Œä¸æ„å‘³ç€ä½ å°±å¯ä»¥æ¯å¤©åƒä¸€ä¸ªğŸ©ã€‚\n\n### 34. äº†è§£åŸå› â­   \næœ‰æ—¶ä½ å¿…é¡»è¡¨è¾¾è‡ªå·±çš„æ„è§ï¼Œå› æ­¤äº†è§£å…¶èƒŒåçš„åŸå› éå¸¸é‡è¦ã€‚ä¸ºä»€ä¹ˆè§£å†³æ–¹æ¡ˆAæ¯”è§£å†³æ–¹æ¡ˆBæ›´å¥½ï¼Ÿæä¾›æœ‰æ•ˆçš„è®ºæ®ï¼Œä½ çš„æ„è§å°†æ›´åŠ å¯é ã€‚\n\n### 35. äº†è§£è‡ªå·±çš„ä»·å€¼   \næŠ€æœ¯ä¹Ÿæ˜¯å•†å“ï¼Œåº”è¯¥å¾—åˆ°é€‚å½“çš„æŠ¥é…¬ã€‚äº†è§£ä½ æ‰€åœ¨åœ°åŒºçš„è¡Œä¸šå¹³å‡æ°´å¹³ã€‚å¦‚æœä½ èµšçš„é’±å°‘äº†ï¼Œæ˜¯æ—¶å€™å’Œä½ çš„è€æ¿è°ˆè°ˆï¼Œè¿½æ±‚ä½ åº”å¾—çš„ã€‚\n\n### 36. ä¸è¦å®³æ€•å¯»æ±‚å¸®åŠ©â­   \nå¦‚æœä½ è¢«å›°åœ¨ä¸€ä¸ªé—®é¢˜ä¸Šï¼ŒèŠ±äº†å¤ªå¤šæ—¶é—´å¯»æ‰¾è§£å†³æ–¹æ¡ˆï¼Œæ˜¯æ—¶å€™å¯»æ±‚å¸®åŠ©äº†ã€‚æˆ‘ä»¬éƒ½æ˜¯äººï¼Œæˆ‘ä»¬éƒ½éœ€è¦å¸®åŠ©ï¼Œå¯»æ±‚åŒäº‹çš„æ´åŠ©å¹¶ä¸å¯è€»ã€‚\n\n### 37. å­¦ä¼šå­¦ä¹ â­ \näººä»¬å­¦ä¹ çš„æ–¹å¼ä¸åŒï¼Œæœ‰äº›äººé€šè¿‡è§†é¢‘æ•™ç¨‹å­¦å¾—æœ€å¥½ï¼Œæœ‰äº›äººé€šè¿‡é˜…è¯»ä¹¦ç±å­¦å¾—æœ€å¥½ã€‚å¼„æ¸…æ¥šä½ çš„å­¦ä¹ é£æ ¼ï¼Œç„¶ååŠªåŠ›å®è·µã€‚\n\n### 38. ä¸äººä¸ºå–„   \næœ‰æ—¶ä½ ä¼šè¢«è¦æ±‚å‘åŒäº‹æä¾›åé¦ˆï¼Œå‹å–„ä¸€ç‚¹ï¼Œä½ å¯ä»¥å¯¹æŸä½åŒäº‹ä¸å¤Ÿç§¯æè¡¨è¾¾çœ‹æ³•ï¼Œè€Œä¸æ˜¯å‡ºè¨€ä¸é€Šã€‚\n\n### 39. ä¼‘æ¯ä¸€ä¸‹ \nè¿ç»­æ•²8ä¸ªå°æ—¶ä»£ç å‡ ä¹æ˜¯ä¸å¯èƒ½ï¼Œä½ å¾ˆå¿«å°±ä¼šç­‹ç–²åŠ›å°½ï¼ŒçŠ¯å¾ˆå¤šé”™è¯¯ã€‚æ‰€ä»¥è®¾ä¸ªé—¹é’Ÿæ¥æé†’è‡ªå·±åœä¸‹æ¥ä¼‘æ¯ä¸€ä¸‹ã€‚å»æ•£æ•£æ­¥ï¼Œå’ŒåŒäº‹ä¸€èµ·å–æ¯å’–å•¡ï¼Œè¿œç¦»å±å¹•ä¼šå¯¹ä½ çš„å·¥ä½œæ•ˆç‡å’Œè´¨é‡äº§ç”Ÿç§¯æçš„å½±å“ã€‚\n\n### 40. è·Ÿè¸ªä½ çš„å­¦ä¹ è¿›åº¦\nå­¦ä¹ ç¼–ç¨‹éœ€è¦æ—¶é—´ï¼Œå½“ä½ çœ‹ä¸åˆ°è¿›å±•æ—¶ï¼Œä½ ä¼šæ„Ÿåˆ°éå¸¸æ²®ä¸§ã€‚æ‰€ä»¥è·Ÿè¸ªä½ çš„æˆå°±å’Œå®ç°ç›®æ ‡çš„è¿›å±•éå¸¸é‡è¦ã€‚åœ¨ä½ çš„ç”µè„‘æ—è¾¹æ”¾ä¸€ä¸ªå°æ¸…å•ï¼Œæ¯æ¬¡ä½ å®Œæˆä¸€ä»¶äº‹ï¼ŒæŠŠå®ƒå†™ä¸‹æ¥ï¼Œä¸ç®¡å®ƒæœ‰å¤šå°ï¼Œæœ€ç»ˆå°†ä¼šä»é‡å˜åˆ°è´¨å˜ã€‚\n\n### 41. ä¸è¦ä¾èµ–åº“å’Œæ¡†æ¶â­\næŒæ¡ä¸€ä¸ªæ¡†æ¶å’Œåº“ä¸å¦‚æ·±å…¥å­¦ä¹ è¿™é—¨è¯­è¨€ï¼Œæ²¡æœ‰å¿…è¦ä¸€ä¸ªæ¥ä¸€ä¸ªçš„å­¦ä¹ è¿™äº›åº“å’Œæ¡†æ¶ï¼Œä½†æ˜¯ç†è§£æ¡†æ¶å’Œåº“å¦‚ä½•å®ç°å¯ä»¥å¸®åŠ©ä½ å†™å‡ºæ›´ç®€æ´å¼ºå£®çš„ä»£ç ã€‚\n\n### 42. å­¦ä¼šçˆ±ä¸Šä»£ç å®¡æŸ¥\nè®©åˆ«äººé˜…è¯»å’Œåˆ†æä½ çš„ä»£ç å¯èƒ½ä¼šè®©ä½ ä¸å®‰ï¼Œä½†æ˜¯å¯ä»¥æä¾›å®è´µçš„åé¦ˆï¼Œè¿™ä¼šè®©ä½ æˆä¸ºä¸€ä¸ªæ›´å¥½çš„ç¨‹åºå‘˜ã€‚è€Œä¸”ä½ ä¹Ÿåº”è¯¥æé«˜è¿›è¡Œè‰¯å¥½ä»£ç è¯„å®¡çš„èƒ½åŠ›ã€‚\n\n### 43. å¤šæ–¹ä½å…¨é¢å­¦ä¹ \nå­¦ä¹ å…¶ä»–é¢†åŸŸçš„åŸºç¡€çŸ¥è¯†, å¦‚è®¾è®¡ã€è¥é”€ã€å‰ç«¯å¼€å‘æˆ–åç«¯å¼€å‘ã€‚å®ƒå°†å¸®åŠ©ä½ æˆä¸ºä¸€ä¸ªæ›´å…¨é¢çš„ç¨‹åºå‘˜ã€‚\n\n### 44. ä¸è¦é€‰æ‹©ç†Ÿæ‚‰çš„æŠ€æœ¯ï¼Œè€Œåº”è¯¥æ˜¯æ­£ç¡®çš„â­   \næ¯ä¸ªé¡¹ç›®éƒ½æœ‰ä¸åŒçš„éœ€æ±‚ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»ä¸ºè¿™é¡¹å·¥ä½œé€‰æ‹©åˆé€‚çš„å·¥å…·ã€‚å°½ç®¡é€‰æ‹©ä»¥å‰ä½¿ç”¨è¿‡çš„æŠ€æœ¯å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯å¦‚æœå®ƒä»¬ä¸é€‚åˆé¡¹ç›®çš„éœ€è¦ï¼Œåº”è¯¥æ¢ç´¢å…¶ä»–æ›¿ä»£æ–¹æ¡ˆã€‚\n\n### 45. å‹‡äºæ‰¿æ‹…è´£ä»»â­   \næ‰€æœ‰äººéƒ½ä¼šçŠ¯é”™ï¼Œåœ¨ä½ çš„èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œä½ ä¼šçŠ¯å¾ˆå¤šå¾ˆå¤šçš„é”™è¯¯ã€‚å› æ­¤ï¼Œå½“ä½ çŠ¯äº†é”™è¯¯æ—¶ï¼Œç«™å‡ºæ¥æ‰¿æ‹…è´£ä»»æ˜¯å¾ˆé‡è¦çš„ï¼Œå®ƒå°†ä¸ä½ çš„å›¢é˜Ÿæˆå‘˜å’Œç®¡ç†å±‚å»ºç«‹ä¿¡ä»»ã€‚\n\n### 46. æ£€æŸ¥è‡ªå·±çš„ä»£ç â­   \nåœ¨å‘èµ·PRè¯·æ±‚ä¹‹å‰ï¼Œæ£€æŸ¥è‡ªå·±çš„ä»£ç ï¼Œå¦‚æœè¿™æ˜¯åŒäº‹çš„å·¥ä½œï¼Œä½ ä¼šå‘è¡¨ä»€ä¹ˆè¯„è®ºï¼Ÿåœ¨è¯·æ±‚ä»£ç å®¡æŸ¥ä¹‹å‰é¦–å…ˆå°è¯•è‡ªå·±è¯Šæ–­é—®é¢˜æˆ–é”™è¯¯éå¸¸é‡è¦ï¼Œå°±åƒè€ƒè¯•äº¤å·å‰åº”è¯¥è‡ªå·±æ£€æŸ¥ä¸€éã€‚\n\n### 47. ä»å¤±è´¥ä¸­å¸å–æ•™è®­â­   \nå¤±è´¥åªæ˜¯æ²¡æœ‰è¾¾åˆ°é¢„æœŸçš„ç»“æœï¼Œå¹¶ä¸ä¸€å®šæ˜¯ä»¶åäº‹ã€‚åœ¨æˆ‘ä»¬çš„èŒä¸šç”Ÿæ¶¯ä¸­ï¼Œæˆ‘ä»¬ä¼šé¢ä¸´å¾ˆå¤šå¤±è´¥ï¼Œä»å¤±è´¥ä¸­å­¦ä¹ ä¸‹æ¬¡ä½ èƒ½åšäº›ä»€ä¹ˆã€‚   \n\n### 48. æ­£è§†è‡ªå·±çš„ç¼ºç‚¹   \näº†è§£ä½ è‡ªå·±ï¼Œä½ çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆ?ä¹Ÿè®¸ä½ æ€»æ˜¯åœ¨æ¨é€ä¹‹å‰å¿˜è®°æ›´æ–°æµ‹è¯•ï¼Œæˆ–è€…ä½ çœŸçš„ä¸æ“…é•¿å›å¤ç”µå­é‚®ä»¶ã€‚äº†è§£ä½ çš„å¼±ç‚¹ï¼Œè¿™æ ·ä½ å°±èƒ½ç§¯æåœ°æ”¹å–„å®ƒä»¬ã€‚\n\n### 49. ä¿æŒå¥½å¥‡å¿ƒâ­   \nè¿™ä¸ªè¡Œä¸šåœ¨ä¸æ–­å‘å±•ï¼Œæ‰€ä»¥å¥½å¥‡å¿ƒå¾ˆé‡è¦ã€‚å¦‚æœä½ ä¸æ˜ç™½ä»€ä¹ˆï¼Œä¸ç®¡æ˜¯é¡¹ç›®éœ€æ±‚è¿˜æ˜¯ä¸€è¡Œä»£ç ï¼Œå¤§å£°è¯´å‡ºæ¥ã€‚æ²¡æœ‰äººä¼šå› ä¸ºä½ è¦æ±‚è¯´æ˜è€Œæ‰¹è¯„ä½ ï¼Œä½ ä¼šå› æ­¤åˆ›é€ å‡ºæ›´å¥½çš„ä»£ç ã€‚   \n\n### 50. ä¸è¦è¯•å›¾å­¦ä¹ ä¸€åˆ‡â­\nä¸–ç•Œä¸Šæœ‰æ— ç©·æ— å°½çš„çŸ¥è¯†å®åº“ï¼Œä½ ä¸å¯èƒ½å¾æœå®ƒã€‚é€‰æ‹©å‡ ä¸ªè¦æŒæ¡çš„ä¸»é¢˜ï¼Œå…¶ä½™çš„å°±ä¸è¦ç®¡äº†ã€‚ä½ å¯ä»¥è·å¾—å…¶ä»–é¢†åŸŸçš„ç›¸å…³çŸ¥è¯†ï¼Œä½†ä½ ä¸å¯èƒ½æŒæ¡æ‰€æœ‰å†…å®¹ã€‚\n\n### 51.  è¯¥èˆå¼ƒå°±èˆå¼ƒ\nä»…ä»…å› ä¸ºä½ å†™äº†ä¸€äº›ä»£ç å¹¶ä¸æ„å‘³ç€ä½ éœ€è¦å¯¹å®ƒäº§ç”Ÿæ„Ÿæƒ…ã€‚æ²¡æœ‰äººå–œæ¬¢ä»–ä»¬æ‰€åšçš„å·¥ä½œè¢«ä¸¢å¼ƒï¼Œä½†æ˜¯ä»£ç æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦ä¸€ç›´ä¿ç•™ç€å®ƒã€‚\n\n### 52.  å›¢é˜Ÿæ”¯æŒ\nä¼˜ç§€çš„å›¢é˜Ÿç›¸äº’æ”¯æŒï¼Œè¿™ä¸ºå°è¯•æ–°äº‹ç‰©åˆ›é€ äº†ä¸€ä¸ªå®‰å…¨çš„ç©ºé—´ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå—åˆ°æƒ©ç½šã€‚\n\n### 53. åœ¨ç¤¾åŒºä¸­å¯»æ‰¾é¼“èˆ\nåœ¨è¡Œä¸šé‡Œæ‰¾å‡ ä¸ªä½ é’¦ä½©çš„äººã€‚å®ƒä¼šæ¿€åŠ±ä½ ç»§ç»­ä½ çš„é¡¹ç›®æˆ–å°è¯•æ–°äº‹ç‰©\n\n### 54. é‡è§†å¹¶ä¸”çæƒœä½ çš„å·¥ä½œ\nä¸ç®¡ä½ æœ‰å¤šå°‘ç»éªŒæˆ–è€…ä½ çš„èŒä½æ˜¯ä»€ä¹ˆï¼Œä½ çš„å·¥ä½œéƒ½æ˜¯æœ‰ä»·å€¼çš„ï¼Œç»™äºˆå®ƒåº”æœ‰çš„ä»·å€¼ã€‚\n\n### 55. æ’é™¤å¹²æ‰°\nå…³æ‰é—²ç½®çš„é€šçŸ¥ã€çŸ­ä¿¡ã€ç”µå­é‚®ä»¶å’Œç¤¾äº¤åª’ä½“ä¼šå¸®åŠ©ä½ é›†ä¸­ç²¾åŠ›ï¼Œæœ€å¤§åŒ–ä½ çš„å·¥ä½œæ—¥ã€‚æ™š30åˆ†é’Ÿå›å¤ä½ æœ‹å‹çš„ä¿¡æ¯ï¼Œä»–æ­»ä¸äº†ï¼ŒçœŸæœ‰äº‹å°±æ‰“ç”µè¯äº†ã€‚\n\n### 56. ä¹äºåŠ©äºº\nè¯•ç€æ”¯æŒä½ çš„å›¢é˜Ÿæˆå‘˜ï¼Œæ— è®ºæ˜¯å‚åŠ ä¸€ä¸ªé‡è¦çš„æ¼”è®²ï¼Œè¿˜æ˜¯åœ¨ä»–ä»¬é‡åˆ°å›°éš¾æ—¶å¸®åŠ©ä»–ä»¬ã€‚\n\n### 57. ä¸è¦åå•¬ä½ çš„èµç¾â­\nå¦‚æœæœ‰äººåšå¾—å¾ˆå¥½ï¼Œå‘Šè¯‰ä»–ä»¬ã€‚æ­£é¢åé¦ˆæ˜¯ä¸å›¢é˜Ÿæˆå‘˜å»ºç«‹ä¿¡ä»»å’Œå¸®åŠ©ä»–ä»¬äº‹ä¸šå‘å±•çš„å¥½æ–¹æ³•ã€‚ä»–ä»¬ä¹Ÿæ›´æœ‰å¯èƒ½å¸®åŠ©ä½ \n\n### 58. æµ‹è¯•ä½ çš„ä»£ç â­\næµ‹è¯•æ˜¯å¾ˆé‡è¦çš„ã€‚å•å…ƒæµ‹è¯•ã€å›å½’æµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•ã€‚æµ‹è¯•ä½ çš„ä»£ç ï¼Œä½ çš„äº§å“å°†ä¼šæ›´åŠ ç¨³å®šã€‚\n\n### 59. åˆ¶å®šåº”å¯¹è®¡åˆ’\nå½“ä½ æ”¶åˆ°ä¸€ä¸ªæ–°åŠŸèƒ½éœ€æ±‚æˆ–bugä¿®æ”¹æ—¶ï¼Œå…ˆåˆ¶å®šåº”å¯¹è®¡åˆ’ï¼Œä½ éœ€è¦ä»€ä¹ˆæ¥è§£å†³è¿™ä¸ªé—®é¢˜æˆ–å¼€å‘è¿™ä¸ªç‰¹æ€§ï¼ŸèŠ±å‡ åˆ†é’Ÿæ¥åšè¿™ä»¶äº‹ï¼Œä¹Ÿè®¸åé¢å¯ä»¥ä¸ºä½ èŠ‚çœæ•°å°æ—¶çš„æ²®ä¸§ã€‚\n\n### 60. æŒæ¡ä¼ªä»£ç \nä¼ªä»£ç æ˜¯ä¸€é¡¹å¾ˆå¥½çš„æŠ€èƒ½ï¼Œå› ä¸ºå®ƒå…è®¸ä½ åœ¨ä¸æµªè´¹æ—¶é—´ç¼–å†™ä»£ç çš„æƒ…å†µä¸‹è€ƒè™‘å¤æ‚çš„é—®é¢˜ã€‚å°†ä¸€ç§æ–¹æ³•å†™åœ¨çº¸ä¸Šï¼Œè¿è¡Œä¸åŒçš„æµ‹è¯•ç”¨ä¾‹ï¼Œçœ‹çœ‹ç¼ºé™·åœ¨å“ªé‡Œã€‚\n\n### 61. è®°å½•ä½ çš„æˆå°±\nå¦‚æœä½ åœ¨å·¥ä½œä¸­è·å¾—äº†å˜‰å¥–ï¼ŒæŠŠå®ƒå†™ä¸‹æ¥ã€‚å¦‚æœä½ å¼€å‘äº†ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½ï¼ŒæŠŠå®ƒå†™ä¸‹æ¥ã€‚ä½ ä¼šæ‹¥æœ‰ä¸€äº›ç§¯ç´¯ã€æ²‰æ·€ï¼Œå®ƒå°†æœ‰åŠ©äºä½ èŒä¸šæ™‹å‡äº¦æˆ–åœ¨æŸä¸€è‰°éš¾çš„æ—¥å­é¼“èˆä½ çš„å£«æ°”ã€‚\n\n### 62. å­¦ä¹ ç¼–ç¨‹åŸºç¡€â­ \nå­¦ä¹ ä¸€äº›åŸºæœ¬çš„æ’åºå’Œæœç´¢ç®—æ³•ä»¥åŠæ•°æ®ç»“æ„ã€‚å®ƒä»¬ä¸è¯­è¨€æ— å…³ï¼Œå¯ä»¥å¸®åŠ©ä½ è·¨è¯­è¨€è§£å†³é—®é¢˜ã€‚\n\n### 63. é€‰æ‹©é•¿æœŸç»´æŠ¤çš„æŠ€æœ¯\nå°½ç®¡æµ‹è¯•æœ€æ–°çš„æŠ€æœ¯å¾ˆæœ‰è¶£ï¼Œä½†æ˜¯é€‰æ‹©é‚£äº›åœ¨ä¼ä¸šåº”ç”¨ç¨‹åºä¸­æ˜“äºç»´æŠ¤çš„æŠ€æœ¯ã€‚ä½ ä»¬çš„å›¢é˜Ÿå°†åœ¨æœªæ¥çš„å²æœˆé‡Œæ„Ÿè°¢ä½ ä»¬ã€‚\n\n### 64. å­¦ä¹ è®¾è®¡æ¨¡å¼â­\nè®¾è®¡æ¨¡å¼æ˜¯æ„å»ºä»£ç çš„æœ‰æ•ˆå·¥å…·ã€‚ä½ å¯èƒ½ä¸æ˜¯æ¯ä¸ªé¡¹ç›®éƒ½éœ€è¦å®ƒä»¬ï¼Œä½†æ˜¯å¯¹å®ƒä»¬æœ‰ä¸€ä¸ªåŸºæœ¬çš„äº†è§£å°†æœ‰åŠ©äºæ„å»ºæ›´å¤§çš„åº”ç”¨ç¨‹åºã€‚\n\n### 65. åŒ–ç¹ä¸ºç®€â­\nä¸è¦ç¼–å†™å¤æ‚çš„ä»£ç æ¥å±•ç¤ºä½ é«˜è¶…çš„ç¼–ç¨‹æŠ€èƒ½ï¼Œè€Œè¦ç€çœ¼äºå¯è¯»æ€§å’Œç®€å•æ€§ã€‚è¿™å°†ä½¿ä½ çš„å›¢é˜Ÿæˆå‘˜æ›´å®¹æ˜“åšå‡ºè´¡çŒ®ã€‚\n\n### 66. è¿˜æ¸…æŠ€æœ¯å€ºåŠ¡\næŠ€æœ¯å€ºåŠ¡å¯èƒ½ä¼šå¯¹æ€§èƒ½äº§ç”Ÿå·¨å¤§å½±å“ï¼Œæ‰€ä»¥å¦‚æœèƒ½å¤Ÿé‡æ„ï¼Œå°±åº”è¯¥é‡æ„ã€‚ï¼ˆè¿™ä¸ªå»ºè®®ç»å¯¹æ˜¯å¥½çš„ï¼Œä½†æ˜¯ç°å®ä¸­è¦é¢ä¸´è¯¸å¤šé—®é¢˜ï¼‰\n\n### 67. ä¼˜å…ˆå°ç‰ˆæœ¬è¿­ä»£\nä¸å…¶æ¯ä¸ªæœˆå‘å¸ƒä¸€æ¬¡å¤§è§„æ¨¡çš„å‡çº§ï¼Œä¸å¦‚æ›´é¢‘ç¹åœ°å‘å¸ƒè¾ƒå°çš„å˜æ›´ã€‚è¿™æ ·ä½ ä¸å¤ªå¯èƒ½ä¼šå¼•å…¥bugå’Œç ´åæ›´æ”¹ã€‚\n\n### 68. å°½æ—©å¹¶ç»å¸¸æäº¤â­\nå°½æ—©æäº¤å’Œç»å¸¸æäº¤æ˜¯ç¡®ä¿ä½ çš„å·¥ä½œä¿æŒå¹²å‡€çš„æœ€å¥½æ–¹æ³•ï¼Œå¹¶ä¸”è¿˜å¯ä»¥å‡å°‘æ„å¤–åœ°æ¢å¤é‡è¦æ›´æ”¹çš„å‹åŠ›ã€‚\n\n### 69. äº†è§£ä½•æ—¶å¯»æ±‚å¸®åŠ©\nä½ ä¸ä»…ä¸åº”è¯¥å®³æ€•å¯»æ±‚å¸®åŠ©ï¼Œè€Œä¸”ä½ åº”è¯¥å­¦ä¼šä»€ä¹ˆæ—¶å€™å¯»æ±‚å¸®åŠ©ã€‚åœ¨å¯»æ±‚å¸®åŠ©ä¹‹å‰ï¼Œä½ åº”è¯¥è¯•ç€è§£å†³é—®é¢˜ï¼Œå¹¶è®°å½•ä¸‹ä½ å°è¯•çš„äº‹æƒ…ã€‚ä½†æ˜¯å½“ä½ è¢«ä¸€ä¸ªç®€å•çš„é—®é¢˜éš¾ä½ä¸€ä¸ªå¤šå°æ—¶çš„æ—¶å€™ï¼Œä»£ä»·å¤§äºæ”¶ç›Šï¼Œä½ åº”è¯¥å‘åŒäº‹æ±‚åŠ©ã€‚\n\n### 70. é—®ä¸€äº›æœ‰æ•ˆçš„é—®é¢˜â­\nå½“ä½ é—®é—®é¢˜çš„æ—¶å€™ï¼Œè¦å°½å¯èƒ½çš„å…·ä½“ï¼Œï¼ˆå¯ä»¥å‚è€ƒgithubæissueçš„è¦æ±‚ï¼‰ã€‚\n\n### 71. å·¥ä½œä¸­åŠæ—¶å¯»æ±‚åé¦ˆ\nä½ çš„å·¥ä½œä¸éœ€è¦å®Œæˆå°±èƒ½å¾—åˆ°åé¦ˆã€‚å¦‚æœä½ ä¸ç¡®å®šæ–¹å‘ï¼Œè¯·ä¸€ä½å€¼å¾—ä¿¡èµ–çš„åŒäº‹æ¥æ£€æŸ¥ä½ çš„è§£å†³æ–¹æ¡ˆçš„æœ‰æ•ˆæ€§ã€‚\n\n### 72. é˜…è¯»æ–‡æ¡£â­\næ–‡æ¡£æ˜¯å…³äºæŠ€æœ¯çš„æœ€çº¯ç²¹çš„äº‹å®æ¥æºï¼Œå› æ­¤å­¦ä¹ é˜…è¯»æ–‡æ¡£å¯ä»¥å¿«é€Ÿå¸®åŠ©ä½ æˆä¸ºä¸“å®¶ã€‚\n\n###ã€€73. å°½å¯èƒ½åšå‡ºå„ç§å°è¯•â­\næ²¡æœ‰ä»€ä¹ˆèƒ½é˜»æ­¢ä½ å°è¯•è§£å†³é—®é¢˜çš„æ–¹æ³•ï¼Œä½ æœ‰ä»€ä¹ˆæŸå¤±å‘¢ï¼Ÿ\n\n### 74. åœ¨ä¼šè®®ä¸Šç§¯æå‘è¨€\nä½ çš„æƒ³æ³•å’Œæ„è§æ˜¯æœ‰ä»·å€¼çš„ï¼Œæ‰€ä»¥å‚åŠ ä¼šè®®å°†æœ‰åŠ©äºä½ ä¸ä½ çš„å›¢é˜Ÿå’Œç®¡ç†å±‚å»ºç«‹èæ´½çš„å…³ç³»ã€‚\n\n### 75. è·¨å›¢é˜Ÿåä½œ\nå¦‚æœä½ æœ‰æœºä¼šå’Œå…¬å¸é‡Œçš„å…¶ä»–å›¢é˜Ÿä¸€èµ·å·¥ä½œï¼Œé‚£å°±å»äº‰å–å§ã€‚\n\n### 76. ä¿æŒé¡¹ç›®çƒ­æƒ…\nå½“ä½ æ¯å‘¨å·¥ä½œ40ä¸ªå°æ—¶æ—¶ï¼ŒèŠ±æ—¶é—´åšä½ æ„Ÿå…´è¶£çš„é¡¹ç›®æ˜¯å¾ˆé‡è¦çš„ï¼ˆ72å°æ—¶çš„è¯æ›´è¦å¦‚æ­¤ï¼‰ã€‚å®ƒä»¬å¯ä»¥å¸®åŠ©ä½ é‡æ–°æ‰¾å›å¯¹ç¼–ç¨‹çš„çƒ­çˆ±ï¼Œå¹¶å°è¯•ä½ åœ¨å·¥ä½œä¸­å¯èƒ½æ— æ³•æ¥è§¦åˆ°çš„æ–°æŠ€æœ¯ã€‚\n\n### 77. ç¡®å®šä½ çš„èŒä¸šç›®æ ‡â­\nå¯¹ä½ çš„èŒä¸šç”Ÿæ¶¯æœ‰ä¸€ä¸ªç†æƒ³çš„è½¨è¿¹æ˜¯å¾ˆé‡è¦çš„ã€‚å¦‚æœä½ ä¸è¿™æ ·åšï¼Œä½ å°±æ˜¯åœ¨æ²¡æœ‰ç›®æ ‡çš„æƒ…å†µä¸‹å°„ç®­ã€‚\n\n### 78. åŠ å…¥åˆ°è®¨è®ºä¸­æ¥â­\nåœ¨åšå®¢ä¸Šå‘è¡¨è¯„è®ºï¼Œå‚ä¸Twitterä¸»é¢˜ï¼Œå‚ä¸ç¤¾åŒºæ´»åŠ¨ï¼Œåšä¸€ä¸ªç§¯æçš„æ—è§‚è€…ä¼šæ¯”å•çº¯çš„æ—è§‚å­¦åˆ°æ›´å¤šä¸œè¥¿ã€‚\n\n### 79. ç¡®å®šä»»åŠ¡ä¼˜å…ˆçº§\nå­¦ä¼šç¡®å®šä»»åŠ¡çš„ä¼˜å…ˆé¡ºåºå°†æœ‰åŠ©äºæé«˜æ‚¨çš„å·¥ä½œæ•ˆç‡ï¼Œå»ºç«‹ä¸€ä¸ªæ—¥å¸¸ä»»åŠ¡å’Œé•¿æœŸä»»åŠ¡å¾…åŠäº‹é¡¹åˆ—è¡¨ï¼Œå¹¶æŒ‰æœ€é‡è¦çš„é¡ºåºæ’åºã€‚\n\n### 80. ä¸è¦å¿½ç•¥ç»†èŠ‚\nç»†èŠ‚å¯ä»¥åœ¨é¡¹ç›®ä¸­äº§ç”Ÿå¾ˆå¤§çš„å½±å“ã€‚\n\n### 81. ä¿¡ä»»ä½ çš„åŒäº‹\nä½ çš„åŒäº‹å› ä¸ºä»–ä»¬çš„æŠ€èƒ½è€Œè¢«é›‡ä½£ï¼Œäº¤ç»™ä»–ä»¬å·¥ä½œï¼Œå¹¶ç›¸ä¿¡ä»–ä»¬èƒ½å®Œæˆã€‚\n\n### 82. å­¦ä¼šå§”æ‰˜\nå¦‚æœä½ å¤„äºé¢†å¯¼åœ°ä½ï¼Œå­¦ä¹ å¦‚ä½•æœ‰æ•ˆåœ°å§”æ´¾ä»»åŠ¡ã€‚å®ƒä¼šèŠ‚çœä½ çš„æ—¶é—´ï¼Œä½ ä¸èƒ½åšæ‰€æœ‰çš„äº‹ã€‚\n\n### 83. ä¸è¦æ‹¿è‡ªå·±å’Œåˆ«äººæ¯”è¾ƒ\nä½ å”¯ä¸€åº”è¯¥æ¯”è¾ƒçš„æ˜¯æ˜¨å¤©çš„è‡ªå·±ã€‚\n\n### 84. æ‰¾åˆ°ä½ çš„ç›Ÿå‹\nå­¦ä¹ ç¼–ç¨‹å°†æ˜¯ä¸€ä¸ªæ¼«é•¿è€Œä¸æ€ä¹ˆå®¹æ˜“çš„è¿‡ç¨‹ï¼Œå’Œé‚£äº›å¸®åŠ©ä½ æˆé•¿å¹¶é¼“åŠ±ä½ åšæŒä¸‹å»çš„äººåœ¨ä¸€èµ·ã€‚\n\n### 85. ä¸è¦æƒ³ä¸€æ­¥ç™»å¤©â­\nä¸€å¼€å§‹è€ƒè™‘å¤ªå¤šåšä¸€ä¸ªå¤§è€Œå…¨çš„é¡¹ç›®ä¼šè®©ä½ ä¸å ªé‡è´Ÿã€‚æ„å»ºæ—¶è¦è€ƒè™‘å¯ä¼¸ç¼©æ€§ï¼Œä½†åœ¨éœ€è¦æ—¶æ‰å¼€å§‹æ‰©å±•ã€‚è¿™æ ·ä½ å°±ä¸ä¼šç”¨ä¸å¿…è¦çš„è†¨èƒ€æ¥å‹å€’ä½ çš„å›¢é˜Ÿï¼Œè€Œæ˜¯ä¿æŒäº†æˆé•¿çš„èƒ½åŠ›ã€‚\n\n### 86. è¡¡é‡æ€§èƒ½å½±å“â­\nå¦‚æœä½ æƒ³ä½¿ç”¨ä¸€ç§å¾ˆé…·çš„æ–°æŠ€æœ¯ï¼Œä½ åº”è¯¥æƒè¡¡è¿™æ ·åšçš„æ€§èƒ½å½±å“ã€‚ä½ èƒ½åœ¨ä¸å½±å“æ€§èƒ½çš„æƒ…å†µä¸‹å®ç°ç±»ä¼¼çš„åŠŸèƒ½å—ï¼Ÿå¦‚æœå¯ä»¥ï¼Œä½ å¯èƒ½éœ€è¦é‡æ–°è€ƒè™‘ä½ çš„æ–¹æ³•äº†ã€‚\n\n### 87. æŠ€æœ¯æ­§è§†ä¸å¯å–â­\nä¸è¦æ­§è§†æ–°æŠ€æœ¯æˆ–æ–°æƒ³æ³•ï¼Œå¯¹å­¦ä¹ æ–°æŠ€èƒ½çš„å¯èƒ½æ€§ä¿æŒå¼€æ”¾çš„å¿ƒæ€ï¼Œä¹Ÿä¸è¦æ­§è§†ä»–äººï¼Œæˆ‘ä»¬éƒ½å€¼å¾—å°Šé‡ã€‚ï¼ˆä¹Ÿä¸è¦æ­§è§†æ—§æŠ€æœ¯ï¼Œå³ä½¿ç°åœ¨å‰ç«¯æ¡†æ¶ç››è¡Œï¼Œä½†ä½ ä¹Ÿä¸èƒ½è¯´Jqueryå°±æ²¡æœ‰ä»»ä½•å¯å–ä¹‹å¤„ã€‚ï¼‰\n\n### 88. ç”³è¯·ä½ ä¸èƒ½èƒœä»»çš„å·¥ä½œ\nä½ æ°¸è¿œä¸å¯èƒ½æ»¡è¶³å·¥ä½œçš„æ‰€æœ‰è¦æ±‚ï¼Œæ‰€ä»¥æŠ“ä½æœºä¼šç”³è¯·å§ï¼Œä½ æœ‰ä»€ä¹ˆæŸå¤±å‘¢ï¼Ÿ\n\n### 89. æ¨¡å—åŒ–ä½ çš„ä»£ç \nä½ å¯ä»¥åœ¨ä¸€ä¸ªé•¿æ–‡ä»¶ä¸­ç¼–å†™æ‰€æœ‰ä»£ç ï¼Œä½†è¿™æ˜¯ä¸å¯ç»´æŠ¤çš„ã€‚é€šè¿‡æ¨¡å—åŒ–ï¼Œæˆ‘ä»¬ç¡®ä¿ä»£ç æ˜“äºç†è§£å’Œæµ‹è¯•ã€‚\n\n### 90. ä¸è¦åªæ˜¯åšä»£ç çš„æ¬è¿å·¥â­\nå¦‚æœä½ è¦å¤åˆ¶å¹¶ç²˜è´´[Stack Overflow](https://stackoverflow.com/)ä¸­çš„è§£å†³æ–¹æ¡ˆï¼Œä½ åº”è¯¥ç¡®åˆ‡åœ°ç†è§£å®ƒçš„ä½œç”¨ï¼Œæœ‰æ„è¯†åœ°é€‰æ‹©è¦å¼•å…¥çš„ä»£ç ã€‚\n\n### 91. åˆ›é€ ä¸€ä¸ªèˆ’é€‚çš„å·¥ä½œç¯å¢ƒâ­\nå¦‚æœä½ å–œæ¬¢ä½ çš„å·¥ä½œç¯å¢ƒå’ŒæŠ€æœ¯è®¾ç½®ï¼Œä½ ä¼šæ›´æœ‰åŠ¨åŠ›å»å·¥ä½œï¼Œæ‰€ä»¥è¿˜åœ¨ç­‰ä»€ä¹ˆï¼Ÿ\n\n### 92. è®°ä½ä½ æ¥è‡ªå“ªé‡Œ\næˆ‘ä»¬éƒ½æ˜¯ä»åŒä¸€ä¸ªåœ°æ–¹å¼€å§‹çš„ï¼Œéšç€ä½ çš„æŠ€èƒ½å’ŒèŒä½çš„å‘å±•ï¼Œä¸è¦å¿˜è®°ä½ æ¥è‡ªå“ªé‡Œï¼Œä¸è¦è†¨èƒ€ã€‚\n\n### 93. è¯•ç€ä¿æŒä¹è§‚\nå¦‚æœå‡ºäº†ä»€ä¹ˆé—®é¢˜ï¼Œè¯•ç€ä¹è§‚ä¸€ç‚¹ã€‚æ˜å¤©æ˜¯æ–°çš„ä¸€å¤©ã€‚ä¹è§‚ä¼šå¸®åŠ©ä½ çš„å›¢é˜Ÿå……æ»¡æ´»åŠ›å’Œç²¾ç¥å¥åº·ã€‚\n\n### 94. ä¸æ–­é‡æ–°è¯„ä¼°ä½ çš„å·¥ä½œæµç¨‹â­\nä»…ä»…å› ä¸ºæŸæ ·ä¸œè¥¿ç°åœ¨æœ‰æ•ˆï¼Œå¹¶ä¸æ„å‘³ç€å®ƒæ°¸è¿œæœ‰æ•ˆã€‚é‡æ–°è¯„ä¼°ä½ çš„å·¥ä½œæµç¨‹ï¼Œå¹¶åœ¨å¿…è¦æ—¶åšå‡ºè°ƒæ•´ã€‚\n\n### 95. å­¦ä¼šåœ¨å®¶åŠå…¬\nå¦‚æœä½ æœ‰èƒ½åŠ›åœ¨å®¶å·¥ä½œï¼Œé‚£å°±å­¦ä¼šæœ‰æ•ˆåœ°åœ¨å®¶å·¥ä½œã€‚æ‰¾ä¸€ä¸ªç‹¬ç«‹çš„åŠå…¬ç©ºé—´ï¼Œè¿œç¦»å¹²æ‰°ã€‚[Boneskull](https://dev.to/boneskull/pro-tips-for-devs-working-at-home-3b63)å†™äº†ä¸€ç¯‡å¾ˆæ£’çš„å…³äºåœ¨å®¶å·¥ä½œçš„æ–‡ç« ï¼Œä½ åº”è¯¥çœ‹çœ‹ã€‚\n\n### 96. æ— éšœç¢ä»£ç \næ— éšœç¢ä¸æ˜¯äº‹åæ‰æƒ³åˆ°çš„ï¼Œä¹Ÿä¸ä¸€å®šå¾ˆéš¾ï¼Œæ¯ä¸ªäººéƒ½åº”è¯¥èƒ½å¤Ÿä½¿ç”¨ä½ çš„äº§å“ã€‚\n\n### 97. éµå®ˆä½ çš„æ‰¿è¯ºâ­\nå¦‚æœä½ å‘Šè¯‰åˆ«äººä½ ä¼šåœ¨æŸä¸€å¤©å®ŒæˆæŸä»¶äº‹ï¼Œè¦ä¿¡å®ˆæ‰¿è¯ºã€‚å¦‚æœä½ ä¸èƒ½åœ¨æˆªæ­¢æ—¥æœŸå‰å®Œæˆä»»åŠ¡ï¼Œé‚£å°±æ—©ç‚¹è¯´å‡ºæ¥ã€‚\n\n### 98. ç§¯æä¸»åŠ¨\nå¦‚æœä½ æœ‰é¢å¤–çš„ç²¾åŠ›ï¼Œæ‰¾ä¸€ä¸ªä»»åŠ¡æ¥å¸®åŠ©ä½ çš„å›¢é˜Ÿï¼Œä»–ä»¬ä¼šå¾ˆæ„Ÿæ¿€ä½ æ˜¯ä¸»åŠ¨çš„ã€‚\n\n### 99. åˆ›å»ºä¸€ä¸ªä»¤äººæƒŠå¹çš„ä½œå“é›†\nä¸€ä¸ªä¼˜ç§€çš„ä½œå“é›†è®©ä½ ä¸ä¼—ä¸åŒï¼Œä½¿ç”¨å®ƒä½œä¸ºå±•ç¤ºä½ çš„ç¼–ç¨‹å’Œè®¾è®¡æŠ€å·§çš„æœºä¼šï¼\n\n### 100. è®°ä½ä½ å–œæ¬¢ç¼–ç¨‹çš„åŸå› â­\nä½ è¿›å…¥è¿™ä¸ªè¡Œä¸šæ˜¯å› ä¸ºå®ƒæ¿€å‘äº†ä½ çš„å…´è¶£ï¼Œå¦‚æœä½ æ„Ÿåˆ°æ²®ä¸§å’Œæ€¨æ¨ï¼Œä¼‘æ¯ä¸€ä¸‹ï¼Œç»™è‡ªå·±ç©ºé—´é‡æ–°ç‚¹ç‡ƒä½ å¯¹ç¼–ç¨‹çš„æ¿€æƒ…ã€‚\n\n### 101. åˆ†äº«ä½ çš„çŸ¥è¯†â­\nå¦‚æœä½ å­¦åˆ°äº†ä¸€äº›å¾ˆé…·çš„ä¸œè¥¿ï¼Œä¸è¦åæƒœåˆ†äº«å®ƒï¼Œå‚åŠ å½“åœ°çš„æŠ€æœ¯äº¤æµä¼šï¼Œåœ¨åˆé¤æ—¶é—´æ•™ä½ çš„åŒäº‹æˆ–å­¦å‘˜ï¼Œåˆ†äº«ä½ çš„çŸ¥è¯†å¯ä»¥è®©æ›´å¤šäººå—ç›ŠåŒæ—¶è‡ªå·±ä¹Ÿèƒ½å·©å›ºæé«˜ã€‚\n\nå®Œç»“æ’’èŠ± ğŸ‰ğŸ‰ğŸ‰\n\nè¿™å°±æ˜¯æˆ‘å…³äºæˆä¸ºä¸€ä¸ªä¼˜ç§€ç¨‹åºå‘˜çš„å…¨éƒ¨å»ºè®®ï¼Œå¸Œæœ›ä½ ä»¬å–œæ¬¢ã€‚\n","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"title":"Commit Messageè§„èŒƒ","url":"%2F2019%2FCommit%20Message%E8%A7%84%E8%8C%83.html","content":"\nåœ¨å›¢é˜Ÿå¼€å‘ä¸­ï¼Œcommit messageï¼ˆæäº¤è¯´æ˜ï¼‰å°±å¦‚åŒä»£ç æ³¨é‡Šä¸€æ ·é‡è¦ã€‚è‰¯å¥½çš„commit messageèƒ½è®©å›¢é˜Ÿä¸­çš„å…¶ä»–æˆå‘˜å¯¹ä½ çš„æ¯æ¬¡æäº¤çš„ç›®çš„ã€\n\næ¶‰åŠçš„ä»£ç èŒƒå›´åŠä½œç”¨ä¸€ç›®äº†ç„¶ï¼Œæ–¹ä¾¿æ—¥å¸¸çš„æŸ¥è¯¢å’Œå¸®åŠ©å…¶ä»–æˆå‘˜æ›´å¥½çš„å¸®ä½ Code Reviewï¼Œå¿…è¦æ—¶è¿˜èƒ½æ–¹ä¾¿çš„ç”ŸæˆChange logã€‚\n\n---\n<!--more-->\n\n## Commit messageæ ¼å¼\n\n```js\n// æ ¼å¼ï¼š<type>(<scope>): <subject>\n```\n\n1. typeï¼š\n`å¿…å¡«` ç”¨äºè¯´æ˜commitçš„ç±»å‹ã€‚æ€»å…±7ä¸ªæ ‡è¯†ï¼š\n\n- featï¼š æ–°å¢feature\n- fix: ä¿®å¤bug\n- docs: ä»…ä»…ä¿®æ”¹äº†æ–‡æ¡£ï¼Œæ¯”å¦‚README, CHANGELOG, CONTRIBUTEç­‰ç­‰\n- style: ä»…ä»…ä¿®æ”¹äº†ç©ºæ ¼ã€æ ¼å¼ç¼©è¿›ã€å˜é‡åç­‰ç­‰ï¼Œä¸æ”¹å˜ä»£ç é€»è¾‘\n- refactor: ä»£ç é‡æ„ï¼Œæ²¡æœ‰åŠ æ–°åŠŸèƒ½æˆ–è€…ä¿®å¤bug\n- perf: ä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ\n- test: æµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰\n- chore: æ”¹å˜æ„å»ºæµç¨‹ã€æˆ–è€…å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰\n- revert: å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬\n\n2. scopeï¼š\n`å¯é€‰` scopeç”¨äºè¯´æ˜ commit å½±å“çš„èŒƒå›´ï¼Œæ¯”å¦‚æ•°æ®å±‚ã€æ§åˆ¶å±‚ã€è§†å›¾å±‚æˆ–è€…ç›®å½•ç”šè‡³æ–‡ä»¶ç­‰ç­‰ï¼Œè§†é¡¹ç›®ä¸åŒè€Œä¸åŒã€‚\n\n3. subjectï¼š\n`å¿…å¡«` subjectæ˜¯ commit ç›®çš„çš„ç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡50ä¸ªå­—ç¬¦ã€‚\n\n- çº¦å®šå¥½commit messageçš„è¯­è¨€ï¼Œå¯¹æˆ‘ä»¬æ¥è¯´æœ€å¥½ä½¿ç”¨ä¸­æ–‡\n- æœ€å¥½ä»¥åŠ¨è¯å¼€å¤´ï¼ˆå¦‚ä½¿ç”¨è‹±æ–‡è¯·ä½¿ç”¨ç¬¬ä¸€äººç§°ç°åœ¨æ—¶ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªå­—æ¯å°å†™ï¼‰\n- `<scope>`ä¹‹åçš„å†’å·åé¢ç•™ä¸€ä¸ªè‹±æ–‡è¾“å…¥æ³•çš„ç©ºæ ¼\n- ç»“å°¾ä¸åŠ å¥å·æˆ–å…¶ä»–æ ‡ç‚¹ç¬¦å·\n- è‹¥æ­¤æ¬¡commitæ˜¯è§£å†³æŸä¸ªissueåº”è¯¥åœ¨è¡Œæœ«å°¾æ³¨æ˜å¹¶åŠ é“¾æ¥ï¼Œå¦‚ï¼š...(#101)\n\n## git commitä¸­ä½¿ç”¨emoji\n```js\ngit commit -m \":tada: Initialize Repo\"\n```\n\n|emoji\t|emojiä»£ç |\tCommitè¯´æ˜|\n|:---|:---|:---|\n|ğŸ¨ (è°ƒè‰²æ¿) |:art: |æ”¹è¿›ä»£ç ç»“æ„/ä»£ç æ ¼å¼|\n|âš¡ï¸ (é—ªç”µ) |:zap: |æå‡æ€§èƒ½|\n|ğŸ (èµ›é©¬)\t|:racehorse:\t|æå‡æ€§èƒ½|\n|ğŸ”¥ (ç«ç„°)\t|:fire:\t|ç§»é™¤ä»£ç æˆ–æ–‡ä»¶|\n|ğŸ› (bug)\t|:bug: |ä¿®å¤ bug|\n|ğŸš‘ (æ€¥æ•‘è½¦)\t|:ambulance: |é‡è¦è¡¥ä¸|\n|âœ¨ (ç«èŠ±)\t|:sparkles:\t|å¼•å…¥æ–°åŠŸèƒ½|\n|ğŸ“ (é“…ç¬”)\t|:pencil:\t|æ’°å†™æ–‡æ¡£|\n|ğŸš€ (ç«ç®­)\t|:rocket:\t|éƒ¨ç½²åŠŸèƒ½|\n|ğŸ’„ (å£çº¢)\t|:lipstick:\t|æ›´æ–° UI å’Œæ ·å¼æ–‡ä»¶|\n|ğŸ‰ (åº†ç¥)\t|:tada:\t|åˆæ¬¡æäº¤|\n|âœ… (ç™½è‰²å¤é€‰æ¡†)\t|:white_check_mark:\t|å¢åŠ æµ‹è¯•|\n|ğŸ”’ (é”)\t|:lock:\t|ä¿®å¤å®‰å…¨é—®é¢˜|\n|ğŸ (è‹¹æœ)\t|:apple:\t|ä¿®å¤ macOS ä¸‹çš„é—®é¢˜|\n|ğŸ§ (ä¼é¹…)\t|:penguin:\t|ä¿®å¤ Linux ä¸‹çš„é—®é¢˜|\n|ğŸ (æ——å¸œ)\t|:checked_flag:\t|ä¿®å¤ Windows ä¸‹çš„é—®é¢˜|\n|ğŸ”– (ä¹¦ç­¾)\t|:bookmark:\t|å‘è¡Œ/ç‰ˆæœ¬æ ‡ç­¾|\n|ğŸš¨ (è­¦è½¦ç¯)\t|:rotating_light:\t|ç§»é™¤ linterè­¦å‘Š|\n|ğŸš§ (æ–½å·¥)\t|:construction:\t|å·¥ä½œè¿›è¡Œä¸­|\n|ğŸ’š (ç»¿å¿ƒ)\t|:green_heart:\t|ä¿®å¤ CI æ„å»ºé—®é¢˜|\n|â¬‡ï¸ (ä¸‹é™ç®­å¤´)\t|:arrow_down:\t|é™çº§ä¾èµ–|\n|â¬†ï¸ (ä¸Šå‡ç®­å¤´)\t|:arrow_up:\t|å‡çº§ä¾èµ–|\n|ğŸ‘· (å·¥äºº)\t|:construction_worker: |æ·»åŠ  CI æ„å»ºç³»ç»Ÿ|\n|ğŸ“ˆ (ä¸Šå‡è¶‹åŠ¿å›¾)\t|:chart_with_upwards_trend:\t|æ·»åŠ åˆ†ææˆ–è·Ÿè¸ªä»£ç |\n|ğŸ”¨ (é”¤å­)\t|:hammer:\t|é‡å¤§é‡æ„|\n|â– (å‡å·)\t|:heavy_minus_sign:\t|å‡å°‘ä¸€ä¸ªä¾èµ–|\n|ğŸ³ (é²¸é±¼)\t|:whale:\t|Docker ç›¸å…³å·¥ä½œ|\n|â• (åŠ å·)\t|:heavy_plus_sign:\t|å¢åŠ ä¸€ä¸ªä¾èµ–|\n|ğŸ”§ (æ‰³æ‰‹)\t|:wrench:\t|ä¿®æ”¹é…ç½®æ–‡ä»¶|\n|ğŸŒ (åœ°çƒ)\t|:globe_with_meridians:\t|å›½é™…åŒ–ä¸æœ¬åœ°åŒ–|\n|âœï¸ (é“…ç¬”)\t|:pencil2:| typo|\n\n\n## Commit messageæ£€æŸ¥å·¥å…·\n\n1. [commitizen](https://github.com/commitizen/cz-cli): ä¸€ä¸ªæ’°å†™åˆæ ¼ Commit message çš„å·¥å…·ï¼›\n\n2. [validate-commit-msg](https://github.com/kentcdodds/validate-commit-msg): ç”¨äºæ£€æŸ¥ Node é¡¹ç›®çš„ Commit \n\nmessage æ˜¯å¦ç¬¦åˆæ ¼å¼ã€‚\n","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"title":"æé—®çš„æ™ºæ…§","url":"%2F2019%2F%E6%8F%90%E9%97%AE%E7%9A%84%E6%99%BA%E6%85%A7.html","content":"\n## æé—®ä¹‹å‰\n\nåœ¨å‘åˆ«äººæå‡ºä¸€ä¸ªæŠ€æœ¯é—®é¢˜ä¹‹å‰ï¼Œè¯·å°è¯•ä»ä»¥ä¸‹å‡ ä¸ªé€”å¾„å»å¯»æ‰¾ç­”æ¡ˆï¼š\n\n1. Google\n\n2. Stackoverflow\n\n3. ç›¸åº”çš„ç¤¾åŒº\n\n4. å®˜æ–¹æ–‡æ¡£\n\n5. é¡¹ç›®çš„Issue\n\n6. é¡¹ç›®æºç ï¼ˆçœ‹ä¸ªäººèƒ½åŠ›ï¼‰\n\n## æé—®ä¹‹æ—¶\n\nä»¥ä¸Šå°è¯•æ— æœçš„æƒ…å†µä¸‹å‘åˆ«äººæå‡ºé—®é¢˜æ—¶ï¼š\n\n1. è®¤çœŸåšè¶³ç›¸å…³åŠŸè¯¾ï¼Œå¹¶æ•´ç†å¥½æé—®æ€è·¯\n\n2. ç¤¼å¤šäººä¸æ€ªï¼Œä¸€å®šè¦è°¦è™šç¤¼è²Œ\n\n3. æ¸…æ¥šæè¿°ä½¿ç”¨çš„ç¯å¢ƒã€éœ€æ±‚åŠé—®é¢˜çš„ç—‡çŠ¶ï¼Œè¯­è¨€è¦ç²¾ç®€\n\n4. èƒ½å¤Ÿæä¾›ä¸€äº›é—®é¢˜çš„å¿…è¦çš„æˆªå›¾ã€ä¾‹å­æˆ–è€…é”™è¯¯ä¿¡æ¯\n\n## æé—®ç»“æŸ\n\n1. ä¸€å®šè¦è¡¨ç¤ºæ„Ÿè°¢ï¼Œä¸ç®¡é—®é¢˜æœ‰æ²¡æœ‰å¾—åˆ°è§£å†³\n\n2. å¦‚æœé—®é¢˜è§£å†³ï¼Œåœ¨è®ºå›æˆ–è€…ç¤¾åŒºä¸€å®šè¦ ç•™ä¸‹ä½ çš„è§£å†³æ–¹æ¡ˆå¹¶åŠ ä»¥å¿…è¦çš„è¯´æ˜ï¼Œæ–¹ä¾¿åäºº(æˆ‘æ·±å—å…¶å®³)ï¼›å“ªæ€•æ˜¯é—®çš„èº«è¾¹çš„äººï¼Œæœ‰ä»·å€¼çš„é—®é¢˜ä¹Ÿè¦åœ¨åšå®¢ä¸Šåšè®°å½•\n\n3. å¦‚æœä»¥ä¸Šæ–¹æ³•éƒ½å°è¯•äº†è¿˜æ˜¯è§£å†³ä¸äº†é‚£å°±å…ˆæ”¾ä¸€æ”¾ï¼Œè¯´ä¸å®šè¿‡ä¸¤å¤©å°±æœ‰æ€è·¯äº†\n\n4. å†ä¸è¡Œï¼Œé‚£å°±æ¢ä¸ªæ€è·¯æˆ–è€…æ–¹æ¡ˆæ¥è§£å†³ä½ çš„éœ€æ±‚å§\n\nå‚è€ƒèµ„æ–™ï¼š\n\nhttps://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/master/README-zh_CN.md\n","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"title":"æ•ˆç‡å·¥ä½œ","url":"%2F2019%2F%E6%95%88%E7%8E%87%E5%B7%A5%E4%BD%9C.html","content":"\n1. æ—¶é—´å¸¸æœ‰ï¼Œæ—¶é—´åœ¨äºä¼˜å…ˆã€‚\n\n2. æ—¶é—´æ€»ä¼šæœ‰çš„ï¼šæ¯å¤©åªè®¡åˆ’ 4ï½5 å°æ—¶çœŸæ­£çš„å·¥ä½œã€‚\n\n3. å½“ä½ åœ¨çŠ¶æ€æ—¶ï¼Œå°±å¤šå¹²ç‚¹ï¼›ä¸ç„¶å°±å¥½å¥½ä¼‘æ¯ï¼šæœ‰æ—¶å€™ä¼šè¿ç€å‡ å¤©ä¸æ˜¯å·¥ä½œçŠ¶æ€ï¼Œæœ‰æ—¶åœ¨å·¥ä½œçŠ¶æ€æ—¶å´åˆèƒ½å¤©å¤©å¿™æ´» 12 å°æ—¶ï¼Œè¿™éƒ½å¾ˆæ­£å¸¸çš„ã€‚\n\n4. é‡è§†ä½ çš„æ—¶é—´ï¼Œå¹¶ä½¿å…¶å€¼å¾—é‡è§†ï¼šä½ çš„æ—¶é—´å€¼ 1000 ç¾å…ƒ/å°æ—¶ï¼Œä½ å¾—åŠ¨èµ·æ¥ã€‚\n\n5. ä¸è¦å¤šä»»åŠ¡ï¼Œè¿™åªä¼šæ¶ˆè€—æ³¨æ„åŠ›ï¼›ä¿æŒä¸“æ³¨ï¼Œä¸€å¿ƒä¸€ç”¨ã€‚\n\n6. å…»æˆå·¥ä½œä¹ æƒ¯ï¼Œå¹¶æŒä¹‹ä»¥æ’ï¼Œä½ çš„èº«ä½“ä¼šé€‚åº”çš„ã€‚\n\n7. åœ¨æœ‰é™çš„æ—¶é—´å†…ï¼Œæˆ‘ä»¬æ€»æ˜¯éå¸¸ä¸“æ³¨å¹¶ä¸”æœ‰æ•ˆç‡ã€‚\n\n8. è¿›å…¥å·¥ä½œçŠ¶æ€çš„æœ€ä½³æ–¹å¼å°±æ˜¯å·¥ä½œï¼Œä»å°ä»»åŠ¡å¼€å§‹åšèµ·ï¼Œè®©å·¥ä½œè¿è½¬èµ·æ¥ã€‚\n\n9. è¿­ä»£å·¥ä½œï¼ŒæœŸå¾…å®Œç¾æ”¶å·¥ä¼šä»¤äººçª’æ¯ï¼šâ€œåšå®Œäº‹æƒ…ï¼Œè¦èƒœäºå®Œç¾æ”¶å·¥â€ ã€‚åŠ¨æ‰‹åšï¼Œèƒœè¿‡ä»»ä½•å®Œç¾çš„æƒ³è±¡ã€‚\n\n10. å·¥ä½œæ—¶é—´è¶Šé•¿ï¼Œå¹¶ä¸ç­‰äºæ•ˆç‡è¶Šé«˜ã€‚\n\n11. æŒ‰é‡è¦æ€§å·¥ä½œï¼Œæé«˜æ•ˆç‡ã€‚\n\n12. æœ‰ä¼šè®®å°±å°½æ—©å®‰æ’ï¼Œç”¨äºå‡†å¤‡ä¼šè®®çš„æ—¶é—´å¾€å¾€éƒ½æµªè´¹æ‰äº†ã€‚\n\n13. æŠŠä¼šè®®å’Œæ²Ÿé€š (é‚®ä»¶æˆ–ç”µè¯) ç»“åˆï¼Œåˆ›é€ ä¸é—´æ–­å·¥ä½œæ—¶é—´ï¼šä¸€ä¸ªå°ä¼šï¼Œä¹Ÿä¼šæ¯äº†ä¸€ä¸ªä¸‹åˆï¼Œå› ä¸ºå®ƒä¼šæŠŠä¸‹åˆæ’•æˆä¸¤ä¸ªè¾ƒå°çš„æ—¶é—´æ®µï¼Œä»¥è‡³äºå•¥ä¹Ÿå¹²ä¸æˆã€‚PSï¼šå½“çœ‹åˆ°ä¸€ä¸ªç¨‹åºå‘˜å†¥æ€è‹¦æƒ³æ—¶ï¼Œä¸è¦è¿‡å»æ‰“æ‰°ï¼Œç”šè‡³ä¸€å¥é—®å€™éƒ½æ˜¯å¤šä½™çš„ã€‚\n\n14. ä¸€æ•´å¤©ä¿æŒç›¸åŒçš„å·¥ä½œç¯å¢ƒã€‚åœ¨é¡¹ç›®/å®¢æˆ·ä¹‹é—´åˆ‡æ¢ï¼Œä¼šæ•ˆç‡ä½ã€‚\n\n15. å·¥ä½œâ€”æ”¾æ¾â€”å·¥ä½œ=é«˜æ•ˆ(ç•ªèŒ„å·¥ä½œæ³•)ã€‚\n\n> ç•ªèŒ„å·¥ä½œæ³•æ˜¯å¼—æœ—è¥¿æ–¯ç§‘Â·è¥¿é‡Œæ´›äº1992å¹´åˆ›ç«‹çš„ä¸€ç§ç›¸å¯¹äºGTDæ›´å¾®è§‚çš„æ—¶é—´ç®¡ç†æ–¹æ³•ã€‚ä½¿ç”¨ç•ªèŒ„å·¥ä½œæ³•ï¼Œé€‰æ‹©ä¸€ä¸ªå¾…å®Œæˆçš„ä»»åŠ¡ï¼Œå°†ç•ªèŒ„æ—¶é—´è®¾ä¸º25åˆ†é’Ÿï¼Œä¸“æ³¨å·¥ä½œï¼Œä¸­é€”ä¸å…è®¸åšä»»ä½•ä¸è¯¥ä»»åŠ¡æ— å…³çš„äº‹ï¼Œç›´åˆ°ç•ªèŒ„æ—¶é’Ÿå“èµ·ï¼Œç„¶ååœ¨çº¸ä¸Šç”»ä¸€ä¸ªXçŸ­æš‚ä¼‘æ¯ä¸€ä¸‹ï¼ˆ5åˆ†é’Ÿå°±è¡Œï¼‰ï¼Œæ¯4ä¸ªç•ªèŒ„æ—¶æ®µå¤šä¼‘æ¯ä¸€ä¼šå„¿ã€‚\n\n16. æŠŠä¸åˆ‡å®é™…çš„ä»»åŠ¡åˆ†å‰²æˆåˆç†çš„å°ä»»åŠ¡ï¼Œåªè¦æ¯å¤©éƒ½å®Œæˆå°ä»»åŠ¡ï¼Œä½ å°±ä¼šè¶Šæ¥è¶Šæ¥è¿‘é‚£ä¸ªå¤§ç›®æ ‡äº†ã€‚\n\n17. ä»æ¥æ²¡æœ‰ä¸¤ä¸ªä»»åŠ¡ä¼šæœ‰ç›¸åŒçš„ä¼˜å…ˆçº§ï¼Œæ€»ä¼šæœ‰ä¸ªæ›´é‡è¦ï¼Œä»”ç»†è€ƒè™‘å¾…åŠäº‹æƒ…åˆ—è¡¨ã€‚\n\n18. å¿…é¡»æ¸…æ¥šç™½å¤©å¿…é¡»å®Œæˆçš„é‚£ä»¶äº‹ï¼Œæ˜¯ä»€ä¹ˆã€‚ åªå»åšé‚£ä»¶æœ‰ç€æœ€å¤§å½±å“çš„äº‹æƒ…ã€‚\n\n19. æŠŠä»»åŠ¡æŒ‰æ—¶é—´åˆ†æ®µï¼Œå°±èƒ½æ„Ÿè§‰å®ƒå¿«è¢«æå®šäº†ã€‚\n\n20. æˆæƒå¹¶æ“…ç”¨ä»–äººçš„åŠ›é‡ã€‚â€”å›å­å–„å‡äºç‰©(äºº)ä¹Ÿï¼Œå¦‚æœæŸä»¶äº‹å…¶ä»–äººä¹Ÿå¯ä»¥åšåˆ°å…«æˆï¼Œé‚£å°±ç»™ä»–åšï¼\n\n21. æŠŠæ˜¨å¤©ç¿»è¿‡å»ï¼Œåªè€ƒè™‘ä»Šå¤©å’Œæ˜å¤©ã€‚æ˜¨å¤©çš„å…¨å’æ‰“èµ¢ä¸äº†ä»Šå¤©çš„æ¯”èµ›ã€‚â€”å¥½æ±‰ä¸æå½“å¹´å‹‡ã€‚\n\n22. ç»™æ‰€æœ‰äº‹æƒ…éƒ½è®¾å®šä¸€ä¸ªæœŸé™ã€‚ä¸è¦è®©å·¥ä½œæ— æœŸé™åœ°è¿›è¡Œä¸‹å»ã€‚\n\n23. é’ˆå¯¹æ—¶é—´ç´§æˆ–æœ‰å‹åŠ›çš„ä»»åŠ¡ï¼Œè®¾ç½®ç»“æŸæ—¶é—´ï¼Œä¸‡äº‹çš†å¯ç»ˆç»“ã€‚\n\n24. å¤šè®°ï¼Œå¤šåšç¬”è®°ã€‚\n\n25. è¿›å…¥é«˜æ•ˆçŠ¶æ€åï¼Œè®°ä¸‹ä»»ä½•åˆ†æ•£ä½ æ³¨æ„åŠ›çš„ä¸œè¥¿æ¯”å¦‚Googleæœç´¢è¯ã€çµå…‰ä¹ç°çš„æƒ³æ³•ã€æ–°ç‚¹å­ç­‰ç­‰ã€‚å¦‚æœä½ æŠŠå®ƒä»¬è®°ä¸‹æ¥ï¼Œå®ƒå°±ä¸ä¼šå†è¹¦æ¥è¹¦å»äº†ã€‚\n\n26. ä¼‘æ¯ï¼Œä¼‘æ¯ä¸€ä¸‹ï½ã€‚","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"title":"ES6Proxy","url":"%2F2019%2FES6Proxy.html","content":"\nProxyï¼Œä»£ç†ï¼Œæ˜¯ES6æ–°å¢çš„åŠŸèƒ½ï¼Œå¯ä»¥ç†è§£ä¸ºä»£ç†å™¨ï¼ˆå³ç”±å®ƒä»£ç†æŸäº›æ“ä½œï¼‰ã€‚\n\nProxy å¯¹è±¡ç”¨äºå®šä¹‰æˆ–ä¿®æ”¹æŸäº›æ“ä½œçš„è‡ªå®šä¹‰è¡Œä¸ºï¼Œå¯ä»¥åœ¨å¤–ç•Œå¯¹ç›®æ ‡å¯¹è±¡è¿›è¡Œè®¿é—®å‰ï¼Œå¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œæ”¹å†™ã€‚\n\nProxy ç”¨äºä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œç­‰åŒäºåœ¨è¯­è¨€å±‚é¢åšå‡ºä¿®æ”¹ï¼Œæ‰€ä»¥å±äºä¸€ç§â€œå…ƒç¼–ç¨‹â€ï¼Œå³å¯¹ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç¨‹ã€‚\n\n---\n<!--more-->\n\n### 1. Proxy å®šä¹‰\n```js\nvar proxy = new Proxy(target, handler)\n```\n\n`new Proxy()`è¡¨ç¤ºç”Ÿæˆä¸€ä¸ª Proxy å®ä¾‹\n\n* targetï¼šç›®æ ‡å¯¹è±¡\n* handlerï¼šä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§æ˜¯å½“æ‰§è¡Œä¸€ä¸ªæ“ä½œæ—¶å®šä¹‰ä»£ç†çš„è¡Œä¸ºçš„å‡½æ•°ã€‚\n\n**æ³¨æ„ï¼šè¦å®ç°æ‹¦æˆªæ“ä½œï¼Œå¿…é¡»æ˜¯å¯¹ Proxy å®ä¾‹è¿›è¡Œæ“ä½œï¼Œè€Œä¸æ˜¯é’ˆå¯¹ç›®æ ‡å¯¹è±¡ target è¿›è¡Œæ“ä½œã€‚**\n\né¦–å…ˆï¼Œçœ‹ä¸ªä¾‹å­ï¼š\n\n```js\nlet handler = {\n    get: function(target, key, receiver) {\n        console.log(`getter ${key}!`)\n        return Reflect.get(target, key, receiver)\n    },\n    set: function(target, key, value, receiver) {\n    \tconsole.log(`setter ${key}=${value}`)\n\t\treturn Reflect.set(target, key, value, receiver)\n\t}\n}\nvar obj = new Proxy({}, handler)\nobj.a = 1 // setter a=1\nobj.b = undefined // setter b=undefined\n\nconsole.log(obj.a, obj.b) \n// getter a!\n// getter b!\n// 1 undefined\n\nconsole.log('c' in obj, obj.c)\t\n// getter c!\n// false undefined\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œproxy æ‹¦æˆªäº†getå’Œsetæ“ä½œã€‚\n\nå†çœ‹ä¸€ä¸ªä¾‹å­ï¼š\n\n```js\nlet handler = {\n    get: function(target, key, receiver) {\n        return 1\n    },\n  \tset: function (target, key, value, receiver) {\n    \tconsole.log(`setting ${key}!`);\n    \treturn Reflect.set(target, key, value, receiver);\n  \t}\n}\nvar obj = new Proxy({}, handler)\nobj.a = 5 // setting a!\nconsole.log(obj.a) // 1\n```\n\nåˆ™ç”±ä¸Šé¢ä»£ç çœ‹å‡ºï¼š**Proxy ä¸ä»…æ˜¯æ‹¦æˆªäº†è¡Œä¸ºï¼Œæ›´æ˜¯ç”¨è‡ªå·±å®šä¹‰çš„è¡Œä¸ºè¦†ç›–äº†ç»„ä»¶çš„åŸå§‹è¡Œä¸º**ã€‚\n\n**è‹¥`handler = {}`ï¼Œåˆ™ä»£è¡¨ Proxy æ²¡æœ‰åšä»»ä½•æ‹¦æˆªï¼Œè®¿é—® Proxy å®ä¾‹å°±ç›¸å½“äºè®¿é—® target ç›®æ ‡å¯¹è±¡ã€‚**è¿™é‡Œä¸å†æ¼”ç¤ºï¼Œæœ‰å…´è¶£çš„å¯ä»¥è‡ªå·±ä¸¾ä¾‹å°è¯•ã€‚\n\n### 2. Proxy handleræ–¹æ³•ï¼ˆæ‹¦æˆªæ–¹æ³•ï¼‰\n* `get(target, key, receiver)`ï¼šæ‹¦æˆª target å±æ€§çš„è¯»å–\n* `set(target, key, value, receiver)`ï¼šæ‹¦æˆª target å±æ€§çš„è®¾ç½®\n* `has(target, key)`ï¼šæ‹¦æˆª `key in proxy` çš„æ“ä½œï¼Œå¹¶è¿”å›æ˜¯å¦å­˜åœ¨ï¼ˆbooleanå€¼ï¼‰\n* `deleteProperty(target, key)`ï¼šæ‹¦æˆª `delete proxy[key]`çš„æ“ä½œï¼Œå¹¶è¿”å›ç»“æœï¼ˆbooleanå€¼ï¼‰\n* `ownKeys(target)`ï¼šæ‹¦æˆª`Object.getOwnPropertyName(proxy)`ã€`Object.getOwnPropertySymbols(proxy)`ã€`Object.keys(proxy)`ã€`for ... in`å¾ªç¯ã€‚å¹¶è¿”å›ç›®æ ‡å¯¹è±¡æ‰€æœ‰è‡ªèº«å±æ€§çš„å±æ€§åæ•°ç»„ã€‚æ³¨æ„ï¼š**`Object.keys()`çš„è¿”å›ç»“æœæ•°ç»„ä¸­åªåŒ…å«ç›®æ ‡å¯¹è±¡è‡ªèº«çš„å¯éå†å±æ€§**\n* `getOwnPropertyDescriptor(target, key)`ï¼šæ‹¦æˆª `Object.getOwnPropertyDescriptor(proxy, key)`ï¼Œè¿”å›å±æ€§çš„æè¿°å¯¹è±¡\n* `defineProperty(target, key, desc)`ï¼šæ‹¦æˆª`Object.defineProperty(proxy, key, desc)`ã€`Object.defineProperties(proxy, descs)`ï¼Œè¿”å›ä¸€ä¸ª boolean å€¼\n* `preventExtensions(target)`ï¼šæ‹¦æˆª`Object.preventExtensions(proxy)`ï¼Œè¿”å›ä¸€ä¸ª boolean å€¼\n* `getPrototypeOf(target)`ï¼šæ‹¦æˆª`Object.getPrototypeOf(proxy)`ï¼Œè¿”å›ä¸€ä¸ªå¯¹è±¡\n* `isExtensible(target)`ï¼šæ‹¦æˆª`Object.isExtensible(proxy)`ï¼Œè¿”å›ä¸€ä¸ª boolean å€¼\n* `setPrototypeOf(target, key)`ï¼šæ‹¦æˆª`Object.setPrototypeOf(proxy, key)`ï¼Œè¿”å›ä¸€ä¸ª boolean å€¼ã€‚å¦‚æœç›®æ ‡å¯¹è±¡æ˜¯å‡½æ•°ï¼Œåˆ™è¿˜æœ‰ä¸¤ç§é¢å¤–æ“ä½œå¯ä»¥è¢«æ‹¦æˆª\n* `apply(target, object, args)`ï¼šæ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºå‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚`proxy(...args)`ã€`proxy.call(object, ...args)`ã€`proxy.apply(...)`\n* `construct(target, args)`ï¼šæ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚`new proxy(...args)`\n\næ€»å…± 13 ä¸ªæ‹¦æˆªæ–¹æ³•ï¼Œä¸‹é¢è¿›è¡Œç®€è¦ä¸¾ä¾‹è¯´æ˜ï¼Œæ›´å¤šå¯è§é˜®ä¸€å³°è€å¸ˆçš„ [ã€ŠECMAScript 6 å…¥é—¨ã€‹](https://link.juejin.im/?target=http%3A%2F%2Fes6.ruanyifeng.com%2F%23docs%2Fproxy)\n\n#### 1. getï¼Œset\n`get`æ–¹æ³•ç”¨äºæ‹¦æˆªæŸä¸ªå±æ€§çš„è¯»å–æ“ä½œï¼Œå¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºç›®æ ‡å¯¹è±¡ã€å±æ€§åå’Œ proxy å®ä¾‹æœ¬èº«ï¼ˆä¸¥æ ¼åœ°è¯´ï¼Œæ˜¯æ“ä½œè¡Œä¸ºæ‰€é’ˆå¯¹çš„å¯¹è±¡ï¼‰ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªå‚æ•°å¯é€‰ã€‚\n\n`set`æ‹¦æˆª target å±æ€§çš„è®¾ç½®ï¼Œå¯ä»¥æ¥å—å››ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºç›®æ ‡å¯¹è±¡ã€å±æ€§åã€valueå’Œ proxy å®ä¾‹æœ¬èº«ï¼ˆä¸¥æ ¼åœ°è¯´ï¼Œæ˜¯æ“ä½œè¡Œä¸ºæ‰€é’ˆå¯¹çš„å¯¹è±¡ï¼‰ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªå‚æ•°å¯é€‰ã€‚\n\n```js\nlet target = {foo: 1}\nlet proxy = new Proxy(target, {\n    get(target, key, receiver) {\n        console.log(`getter ${key}!`)\n        return target[key]\n    },\n    set: function(target, key, value, receiver) {\n        console.log(`setter ${key}!`)\n        target[key] = value;\n    }\n})\n\nlet obj = Object.create(proxy)\nconsole.log(obj.foo) \n// getter foo!\n// 1\n```\n\n#### 2. has\næ‹¦æˆª propKey in proxy çš„æ“ä½œï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚\n\n```js\n// ä½¿ç”¨ has æ–¹æ³•éšè—æŸäº›å±æ€§ï¼Œä¸è¢« in è¿ç®—ç¬¦å‘ç°\nvar handler = {\n    has (target, key) {\n        if (key.startsWith('_')) {\n            return false;\n        }\n        return key in target;\n    }\n};\nvar foo = { _name: 'foo', name: 'foo' };\nvar proxy = new Proxy(foo, handler);\nconsole.log('_name' in proxy); // false\nconsole.log('name' in proxy); // true\n```\n\n#### 3. ownKeys\næ‹¦æˆªè‡ªèº«å±æ€§çš„è¯»å–æ“ä½œã€‚å¹¶è¿”å›ç›®æ ‡å¯¹è±¡æ‰€æœ‰è‡ªèº«å±æ€§çš„å±æ€§åæ•°ç»„ã€‚å…·ä½“è¿”å›ç»“æœå¯ç»“åˆ MDN [å±æ€§çš„å¯æšä¸¾æ€§å’Œæ‰€æœ‰æƒ](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Enumerability_and_ownership_of_properties)\n\n* `Object.getOwnPropertyName(proxy)`\n* `Object.getOwnPropertySymbols(proxy)`\n* `Object.keys(proxy)`\n* `for ... in`å¾ªç¯\n\n```js\nlet target = {\n  _foo: 'foo',\n  _bar: 'bar',\n  name: 'An'\n};\n\nlet handler = {\n  ownKeys (target) {\n    return Reflect.ownKeys(target).filter(key =key.startsWith('_'));\n  }\n};\n\nlet proxy = new Proxy(target, handler);\nfor (let key of Object.keys(proxy)) {\n  console.log(target[key]);\n}\n// \"An\"\n```\n\n#### 4. apply\napply æ‹¦æˆª Proxy å®ä¾‹ä½œä¸ºå‡½æ•°è°ƒç”¨çš„æ“ä½œï¼Œæ¯”å¦‚å‡½æ•°çš„è°ƒç”¨ï¼ˆ`proxy(...args)`ï¼‰ã€callï¼ˆ`proxy.call(object, ...args)`ï¼‰ã€applyï¼ˆ`proxy.apply(...)`ï¼‰ç­‰ã€‚\n\n```js\nvar target = function () { return 'I am the target'; };\nvar handler = {\n  apply: function () {\n    return 'I am the proxy';\n  }\n};\n\nvar proxy = new Proxy(target, handler);\n\nproxy();\n// \"I am the proxy\"\n```\n\nProxy æ–¹æ³•å¤ªå¤šï¼Œè¿™é‡Œåªæ˜¯å°†å¸¸ç”¨çš„ç®€è¦ä»‹ç»ï¼Œæ›´å¤šè¯·çœ‹é˜®ä¸€å³°è€å¸ˆçš„ [ã€ŠECMAScript 6 å…¥é—¨ã€‹](https://link.juejin.im/?target=http%3A%2F%2Fes6.ruanyifeng.com%2F%23docs%2Fproxy)\n\n### å’ŒObject.defineProperty()çš„å¯¹æ¯”\ndefinePropertyå­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š\n1. ä¸èƒ½ç›‘å¬æ•°ç»„çš„å˜åŒ–\n2. å¿…é¡»éå†å¯¹è±¡çš„æ¯ä¸ªå±æ€§\n3. å¿…é¡»æ·±å±‚éå†åµŒå¥—çš„å¯¹è±¡(vue walkæ–¹æ³•)\n\nä¹Ÿéœ€è¦åµŒå¥—\n```js\nlet obj = {\n  info: {\n    name: 'eason',\n    blogs: ['webpack', 'babel', 'cache']\n  }\n}\nlet handler = {\n  get (target, key, receiver) {\n    console.log('get', key)\n    // é€’å½’åˆ›å»ºå¹¶è¿”å›\n    if (typeof target[key] === 'object' && target[key] !== null) {\n      return new Proxy(target[key], handler)\n    }\n    return Reflect.get(target, key, receiver)\n  },\n  set (target, key, value, receiver) {\n    console.log('set', key, value)\n    return Reflect.set(target, key, value, receiver)\n  }\n}\nlet proxy = new Proxy(obj, handler)\n// ä»¥ä¸‹ä¸¤å¥éƒ½èƒ½å¤Ÿè¿›å…¥ set\nproxy.info.name = 'Zoe'\nproxy.info.blogs.push('proxy')\n```\n","tags":["æ·±å…¥ç†è§£"],"categories":["JS"]},{"title":"linuxå®‰è£…mongodbåŠå¸¸è§å‘½ä»¤","url":"%2F2019%2Flinux%E5%AE%89%E8%A3%85mongodb%E5%8F%8A%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4.html","content":"\n{% fi http://cdn.mydearest.cn/blog/images/mongodb.jpg, MongoDB, MongoDB %}\n\nMongoDB æ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ã€‚ç”± C++ è¯­è¨€ç¼–å†™ã€‚æ—¨åœ¨ä¸º WEB åº”ç”¨æä¾›å¯æ‰©å±•çš„é«˜æ€§èƒ½æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚\n---\n<!--more-->\n\n## å®‰è£…ã€é…ç½®\n```shell\n## ä¸‹è½½\ncurl -O https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.6.5.tgz\n\n## è§£å‹\ntar -zxvf mongodb-linux-x86_64-3.6.5.tgz \n\n## ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•\nmv  mongodb-linux-x86_64-3.6.5/ /usr/local/mongodb\n\n## MongoDB çš„å¯æ‰§è¡Œæ–‡ä»¶ä½äº bin ç›®å½•ä¸‹ï¼Œæ‰€ä»¥å¯ä»¥å°†å…¶æ·»åŠ åˆ° PATH è·¯å¾„ä¸­ï¼šå½“å‰ç»ˆç«¯æœ‰æ•ˆ(å¯è·³è¿‡)\nexport PATH=/usr/local/mongodb/bin:$PATH\n\n## åˆ°æ ¹ç›®å½•åˆ›å»ºæ–‡ä»¶å¤¹ æˆ–è€…mongodbä¸‹\nmkdir data/db\nmkdir data/log\n\n## vim /etc/profile æ·»åŠ åˆ°å…¨å±€å‘½ä»¤\nexport PATH=/usr/local/mongodb/bin:$PATH \n\n## å¦‚æœæœ‰å¤šä¸ª\nexport PATH=$JAVA_HOME/bin:$JRE_HOME/bin:/usr/local/mongodb/bin:$PATH\n\n## ä¿å­˜ï¼Œé€€å‡ºï¼Œç„¶åè¿è¡Œ\nsource /etc/profile\n```\n\n```shell\n## mongodb.conf\ndbpath=/usr/local/mongodb/db\nlogpath=/usr/local/mongodb/log/mongodb.log\nbind_ip=0.0.0.0\nfork=true\n```\n\n```shell\n## å…³é—­\nps -ef|grep mongod\nkill -9\n\n## åå°å¯åŠ¨ å¼€å¯ç”¨æˆ·è®¤è¯\nnohup mongod --auth -f /usr/local/mongodb/mongodb.conf > myLog.log 2>&1 &\n\nnohup mongod -f /usr/local/mongodb/mongodb.conf > myLog.log 2>&1 &\n```\n\n## å¸¸è§å‘½ä»¤\n\n### è®¾ç½®ç”¨æˆ·å’Œå‘½ä»¤\n```shell\n## åˆ›å»ºç®¡ç†å‘˜\nmongo\n\nuse admin\n\ndb.createUser(\n  {\n    user: \"testuser\",\n    pwd: \"testpassword\",\n    roles: [ { role: \"readWriteAnyDatabase\", db: \"admin\" } ]\n  }\n)\n\n## è®¤è¯ç™»å½•\ndb.auth(\"admin\", \"password\")\n\n## æ˜¾ç¤ºå½“å‰ç³»ç»Ÿç”¨æˆ·\ndb.system.users.find()\n\n## åˆ é™¤ç”¨æˆ·(åˆ é™¤ç”¨æˆ·çš„æ—¶å€™éœ€è¦åˆ‡æ¢åˆ°ç”¨æˆ·ç®¡ç†çš„æ•°æ®åº“æ‰å¯ä»¥åˆ é™¤)\ndb.dropUser(\"testuser\")\n\n## ä¿®æ”¹å¯†ç \ndb.addUser('testUser','111')\n\ndb.changeUserPassword('tank2','test')\n\n## ä¿®æ”¹ç”¨æˆ·æƒé™\ndb.updateUser(\"cosyer\",{roles:[ {role:\"root\",db:\"admin\"} ]})\n```\n\n### mongooseè´¦å·å¯†ç è¿æ¥\n```js\n// mongodb://admin:123456@localhost:27017 //æœ‰ç”¨æˆ·åå¯†ç çš„æƒ…å†µ\nmongoose.connect(\"mongodb://user:pwd@111.231.121.29/ticket\", {\n  authSource: \"admin\",\n  useMongoClient: true\n});\n```\n\n## å¯¼å…¥å¯¼å‡ºè¡¨å­—æ®µ\n```js\nmongoexport -d book -c books -o books.json --type json\n\nmongoimport -d book -c books --file /home/mongodump/articles.json --type json\n```\n\n## å¤‡ä»½æ¢å¤æ•°æ®åº“\n```js\nmongodump -h 127.0.0.1 -d book -o D:\\iview-book-admin\\static\\js\n\nmongorestore -h dbhost -d book --dir D:\\iview-book-admin\\static\\js\\book\n```\n","tags":["æ•°æ®åº“"],"categories":["å·¥å…·"]},{"title":"bluräº‹ä»¶ä¸clickäº‹ä»¶å†²çªçš„è§£å†³åŠæ³•","url":"%2F2019%2Fblur%E4%BA%8B%E4%BB%B6%E4%B8%8Eclick%E4%BA%8B%E4%BB%B6%E5%86%B2%E7%AA%81%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95.html","content":"\nåœ¨å¤„ç†è¡¨å•ç™»å½•çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘ä»¬åœ¨è¾“å…¥æ¡†è¾“å…¥å†…å®¹è¾“å…¥æ¡†è·å–åˆ°ç„¦ç‚¹æ—¶ï¼Œè¾“å…¥æ¡†åé¢ä¼šå‡ºç°ä¸€ä¸ªå›¾æ ‡åˆ é™¤å·²è¾“å…¥çš„å†…å®¹ï¼Œå› æ­¤åˆ é™¤å›¾æ ‡ä¼šç»‘å®šä¸€ä¸ªclickäº‹ä»¶ï¼Œä½†æ˜¯å½“æˆ‘ä»¬ç‚¹å‡»å›¾æ ‡çš„æ—¶å€™ï¼Œä¹Ÿè§¦å‘äº†inputçš„bluräº‹ä»¶ï¼Œbluräº‹ä»¶ä¼šè®©inputå¤±å»ç„¦ç‚¹æ—¶éšè—åˆ é™¤çš„å›¾æ ‡ï¼Œå¹¶ä¸”bluräº‹ä»¶å…ˆäºå›¾æ ‡çš„clickäº‹ä»¶æ‰§è¡Œï¼Œå› æ­¤è¿™æ—¶å€™ç‚¹å‡»å›¾æ ‡å¹¶ä¸ä¼šåˆ é™¤è¾“å…¥æ¡†å·²è¾“å…¥çš„å†…å®¹ï¼Œè€Œæ˜¯å›¾æ ‡æ¶ˆå¤±äº†ã€‚è¿˜æœ‰å¼¹çª—è¾“å…¥æ¡†bluråŒæ—¶ç‚¹å‡»å–æ¶ˆæŒ‰é’®å…³é—­ï¼Œä¹Ÿä¼šå‡ºç°éœ€è¦ç‚¹å‡»2æ¬¡çš„æƒ…å†µã€‚\n\n<p align=\"center\"><img src=\"http://cdn.mydearest.cn/blog/images/blur.png\" alt=\"blur img\"></p>\n\n---\n<!--more-->\n\n- bluräº‹ä»¶ï¼šå½“å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶è§¦å‘bluräº‹ä»¶ï¼›blur äº‹ä»¶ä»…å‘ç”Ÿäºè¡¨å•å…ƒç´ ä¸Šã€‚åœ¨æ–°æµè§ˆå™¨ä¸­ï¼Œè¯¥äº‹ä»¶å¯ç”¨äºä»»ä½•å…ƒç´ ï¼Œblurå’Œfocusäº‹ä»¶ä¸ä¼šå†’æ³¡ï¼Œå…¶ä»–è¡¨å•äº‹ä»¶éƒ½å¯ä»¥ã€‚\n\n- clickäº‹ä»¶ï¼šå½“ç‚¹å‡»å…ƒç´ æ—¶è§¦å‘clickäº‹ä»¶ï¼›æ‰€æœ‰å…ƒç´ éƒ½æœ‰æ­¤äº‹ä»¶ï¼Œä¼šäº§ç”Ÿå†’æ³¡ã€‚\n\n### åŸå› åˆ†æ\n> bluräº‹ä»¶æ¯”clickäº‹ä»¶å…ˆè§¦å‘ï¼Œè€Œjavascriptä¸ºå•çº¿ç¨‹ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æ‰§è¡Œå¤„ç†ä¸€ä¸ªäº‹ä»¶ï¼Œæ‰€ä»¥å½“bluræ‰§è¡Œæ—¶ï¼Œå¯¼è‡´å…¶åç»­clickäº‹ä»¶å¹¶ä¸ä¼šæ‰§è¡Œã€‚\n\n### æ–¹æ¡ˆä¸€ åŠ å®šæ—¶å™¨å»¶æ—¶è§¦å‘bluräº‹ä»¶\n\nç¼ºç‚¹ï¼šè®¾ç½®å¤šä¹…çš„å»¶æ—¶æ˜¯ä¸€ä¸ªéš¾ä»¥ä¸¤å…¨çš„é—®é¢˜ï¼Œæ—¶é—´å¤ªçŸ­ä¸èƒ½ä¿è¯clickäº‹ä»¶çš„100%è§¦å‘ï¼Œæ—¶é—´å¤ªé•¿åˆ™ä¼šé€ æˆå¡é¡¿çš„æ„Ÿè§‰ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚\n\n### æ–¹æ¡ˆäºŒ å°†clickäº‹ä»¶æ”¹ä¸ºmousedownäº‹ä»¶ï¼Œmousedownäº‹ä»¶æ˜¯ä¼˜å…ˆäºbluräº‹ä»¶æ‰§è¡Œ\n\nç¼ºç‚¹ï¼šé¼ æ ‡æŒ‰ä¸‹ä¾¿è§¦å‘äº†äº‹ä»¶ï¼Œä¸æ”¶èµ·ã€é•¿æŒ‰ä¹Ÿä¼šè§¦å‘ï¼Œå¯èƒ½é€ æˆç”¨æˆ·ä½“éªŒä¸å¥½ã€‚è¿˜éœ€è¦åˆ¤æ–­æ˜¯å¦æ˜¯é¼ æ ‡å·¦é”®ç‚¹å‡»(event.button===0)ã€‚\n\n### æ–¹æ¡ˆä¸‰ ç»™clickæ‰€åœ¨å…ƒç´ å†æ·»åŠ ä¸€ä¸ªmousedownäº‹ä»¶ï¼Œåœ¨å…¶ä¸­æ‰§è¡Œevent.preventDefault()é˜»æ­¢æµè§ˆå™¨é»˜è®¤äº‹ä»¶ï¼Œè¿™æ ·ç‚¹å‡»æŒ‰é’®æ—¶è¾“å…¥æ¡†å°±ä¸ä¼šå¤±å»ç„¦ç‚¹äº†\n\nç¼ºç‚¹ï¼šå¦‚æœæ˜¯å¼¹çª—ä¸‹æ¬¡æ‰“å¼€æ—¶ï¼Œç„¦ç‚¹ä»ç„¶å­˜åœ¨ã€‚\n\n### æ–¹æ¡ˆå›› åŠ¨æ€ç»‘å®šç§»é™¤bluräº‹ä»¶\n\n**æ¨èæ–¹æ¡ˆä¸‰å’Œå››**\n","tags":["è§£å†³æ–¹æ¡ˆ"],"categories":["çŸ¥è¯†"]},{"title":"å‰ç«¯æ¨¡å—åŒ–å‘å±•æ‰©å±•","url":"%2F2019%2F%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%91%E5%B1%95%E6%89%A9%E5%B1%95.html","content":"\nJavaScript ä¸€å¼€å§‹å¹¶æ²¡æœ‰å†…å»ºæ¨¡å—åŒ–æ”¯æŒï¼Œä¹Ÿå‡ ä¹æ²¡æœ‰æ¨¡å—åŒ–è¿™ç§æ¦‚å¿µã€‚å½“æ—¶æ²¡é‚£ä¹ˆå¤§çš„éœ€æ±‚ï¼Œæä¸ªæ¨¡å—åŒ–æ˜¾å¾—å¤§æå°ç”¨å•Šã€‚éšç€äº’è”ç½‘çš„å‘å±•ï¼Œå°¤å…¶æ˜¯ 2006 å¹´ ajax æŠ€æœ¯çš„å‡ºç°å’Œä¹‹å Web 2.0 çš„å…´èµ·ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¸šåŠ¡é€»è¾‘å‘å‰ç«¯è½¬ç§»ï¼Œå‰ç«¯å¼€å‘çš„å¤æ‚ç¨‹åº¦å’Œä»£ç é‡é€æ¸æå‡ã€‚è¿™æ—¶ï¼Œç”±äºç¼ºä¹æ¨¡å—åŒ–æ¦‚å¿µï¼ŒJavaScript çš„ä¸€äº›é—®é¢˜ä¾¿å‡¸æ˜¾å‡ºæ¥ï¼šä»£ç éš¾ä»¥å¤ç”¨ã€å®¹æ˜“å‡ºç°å…¨å±€å˜é‡æ±¡æŸ“å’Œå‘½åå†²çªã€ä¾èµ–ç®¡ç†éš¾ä»¥ç»´æŠ¤ç­‰ç­‰ã€‚ä¸€å¼€å§‹ï¼Œå¼€å‘è€…ä»¬ä½¿ç”¨è¯¸å¦‚æš´éœ²å…¨å±€å¯¹è±¡ã€è‡ªæ‰§è¡Œå‡½æ•°ç­‰æ–¹æ³•æ¥è§„é¿è¿™äº›é—®é¢˜ï¼Œä½†ä»æ— æ³•ä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ã€‚\n\n<!-- more -->\n\n## CommonJS\n\n2009 å¹´ï¼ŒåŸºäºå°† JavaScript åº”ç”¨äºæœåŠ¡ç«¯çš„å°è¯•ï¼ŒServerJS è¯ç”Ÿäº†ã€‚ä¹‹å ServerJS æ›´åä¸º CommonJSï¼Œå¹¶é€æ­¥å‘å±•ä¸ºä¸€ä¸ªå®Œæ•´çš„æ¨¡å—è§„èŒƒã€‚ç®€ç§° CMD(Common Module Definition)\n\n[CommonJSå®˜ç½‘](http://www.commonjs.org/)\n[CommonJSé˜®ä¸€å³°](http://javascript.ruanyifeng.com/nodejs/module.html)\n\nCommonJS ä¸ºæ¨¡å—çš„ä½¿ç”¨å®šä¹‰äº†ä¸€å¥— APIã€‚æ¯”å¦‚ï¼Œå®ƒå®šä¹‰äº†å…¨å±€å‡½æ•° requireï¼Œé€šè¿‡ä¼ å…¥æ¨¡å—æ ‡è¯†æ¥å¼•å…¥å…¶ä»–æ¨¡å—ï¼Œå¦‚æœè¢«å¼•å…¥çš„æ¨¡å—åˆä¾èµ–äº†å…¶ä»–æ¨¡å—ï¼Œé‚£ä¹ˆä¼šä¾æ¬¡åŠ è½½è¿™äº›æ¨¡å—ï¼›é€šè¿‡ module.exports å‘å¤–éƒ¨æš´éœ² APIï¼Œä»¥ä¾¿å…¶ä»–çš„æ¨¡å—å¼•å…¥ã€‚\n\nç”±äº CommonJS æ˜¯ä½¿ç”¨`åŒæ­¥æ–¹å¼`åŠ è½½æ¨¡å—çš„ï¼Œå³åªæœ‰åŠ è½½å®Œæˆæ‰èƒ½è¿›è¡Œæ¥ä¸‹æ¥çš„æ“ä½œï¼Œå› æ­¤å½“åº”ç”¨äºæµè§ˆå™¨ç«¯æ—¶ä¼šå—åˆ°ç½‘é€Ÿçš„é™åˆ¶ã€‚\n\nCommonJSå¯¹æ¨¡å—çš„å®šä¹‰ä¸»è¦åˆ†ä¸ºæ¨¡å—å¼•ç”¨ã€æ¨¡å—å®šä¹‰å’Œæ¨¡å—æ ‡è¯†3ä¸ªéƒ¨åˆ†ã€‚\n\n```js\nconst $ = require('jquery')\n\n// å®šä¹‰ç§æœ‰æ–¹æ³•\nfunction log (...arg) {\n  console.log(...arg)\n}\n// å®šä¹‰å…¬æœ‰æ–¹æ³•\nfunction sayHello () {\n  const el = $('body')\n  log('zhouyu, hello', el)\n}\n// æš´éœ²å…¬æœ‰æ–¹æ³•\nmodule.exports = {\n  sayHello\n}\n```\n\n## AMD\n\nä¹‹åï¼Œåœ¨ CommonJS ç»„ç»‡çš„è®¨è®ºä¸­ï¼ŒAMD(Asynchronous Module Definition)åº”è¿è€Œç”Ÿã€‚å’Œ CommonJS ä¸åŒçš„æ˜¯ï¼Œå®ƒä½¿ç”¨`å¼‚æ­¥æ–¹å¼`åŠ è½½æ¨¡å—ï¼Œå› æ­¤æ›´é€‚åˆè¢«æµè§ˆå™¨ç«¯é‡‡ç”¨ã€‚AMD ç”¨å…¨å±€å‡½æ•° define æ¥å®šä¹‰æ¨¡å—ï¼Œå®ƒéœ€è¦ä¸‰ä¸ªå‚æ•°ï¼šæ¨¡å—åç§°ã€æ¨¡å—çš„ä¾èµ–æ•°ç»„ã€æ‰€æœ‰ä¾èµ–éƒ½å¯ç”¨ä¹‹åæ‰§è¡Œçš„å›è°ƒå‡½æ•°(è¯¥å‡½æ•°æŒ‰ç…§ä¾èµ–å£°æ˜çš„é¡ºåºï¼Œæ¥æ”¶ä¾èµ–ä½œä¸ºå‚æ•°)ã€‚\n\n[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD)\n[AMDä¸­æ–‡](https://github.com/amdjs/amdjs-api/wiki/AMD-(%E4%B8%AD%E6%96%87%E7%89%88)\n\n``` JS\ndefine(['jquery'], function ($) {\n  // å®šä¹‰ç§æœ‰æ–¹æ³•\n  function log (...arg) {\n    console.log(...arg)\n  }\n  // å®šä¹‰å…¬æœ‰æ–¹æ³•\n  function sayHello () {\n    const el = $('body')\n    log('zhouyu, hello', el)\n  }\n  // æš´éœ²å…¬æœ‰æ–¹æ³•\n  return sayHello\n})\n```\n\n## UMD\n\nå¦‚æœéœ€è¦åŒæ—¶æ”¯æŒ CommonJS å’Œ AMD ä¸¤ç§æ ¼å¼ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ UMD(Universal Module Definition)ã€‚äº‹å®ä¸Šï¼ŒUMD é€šè¿‡ä¸€ç³»åˆ— if/else åˆ¤æ–­æ¥ç¡®å®šå½“å‰ç¯å¢ƒæ”¯æŒçš„æ¨¡å—ä½“ç³»ï¼Œå› æ­¤å¤šæ•°æƒ…å†µä¸‹ UMD æ ¼å¼çš„æ¨¡å—ä¼šå ç”¨æ›´å¤§çš„ä½“ç§¯ã€‚\n\n``` js\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD\n    define(['jquery'], factory)\n  } else if (typeof exports === 'object') {\n    // Nodejs æˆ– CommonJS\n    module.exports = factory(require('jquery'))\n  } else {\n    // æµè§ˆå™¨å…¨å±€å˜é‡(root å³ window)\n    root.returnExports = factory(root.jQuery)\n  }\n}(this, function ($) {\n  // å®šä¹‰ç§æœ‰æ–¹æ³•\n  function log (...arg) {\n    console.log(...arg)\n  }\n  // å®šä¹‰å…¬æœ‰æ–¹æ³•\n  function sayHello () {\n    const el = $('body')\n    log('zhouyu, hello', el)\n  }\n  // æš´éœ²å…¬æœ‰æ–¹æ³•\n  return sayHello\n}));\n```\n\n## ES6 Modules\n\næ— è®ºæ˜¯ CommonJSï¼ŒAMD è¿˜æ˜¯ UMDï¼Œå®ƒä»¬éƒ½ä¸æ˜¯æ ‡å‡†çš„ JavaScript æ¨¡å—è§£å†³æ–¹æ¡ˆã€‚æ¢å¥è¯è¯´ï¼Œå®ƒä»¬éƒ½æ²¡æœ‰è¢«å†™è¿› ECMA çš„è§„èŒƒä¸­ã€‚ç›´åˆ° 2015 å¹´ 6 æœˆï¼ŒTC39 å§”å‘˜ä¼šç»ˆäºå°† Modules å†™è¿› ECMAScript 2015 ä¸­ï¼Œæ ‡å¿—ç€åŸç”Ÿæ¨¡å—æ–°æ—¶ä»£çš„åˆ°æ¥ã€‚è‡³æ­¤ï¼ŒJavaScript æ–‡ä»¶æœ‰äº†ä¸¤ç§å½¢å¼ï¼šè„šæœ¬(è‡ª JavaScript è¯ç”Ÿèµ·æˆ‘ä»¬å°±åœ¨ä½¿ç”¨çš„)å’Œæ¨¡å—(å³ ECMAScript 2015 Modules)ã€‚ä¸‹é¢å°±è®©æˆ‘ä»¬æ¥ä¸€èµ·æ¢ç´¢ ECMAScript 2015 Modules(ä»¥ä¸‹ç®€ç§° ES6 Modules)\n\n[ES6 Modules](http://www.ecma-international.org/ecma-262/6.0/#sec-modules)\n[ES6é˜®ä¸€å³°](http://es6.ruanyifeng.com/#docs/module)\n\n``` js\nimport $ from('jquery')\n\n// å®šä¹‰ç§æœ‰æ–¹æ³•\nfunction log (...arg) {\n  console.log(...arg)\n}\n// å®šä¹‰å…¬æœ‰æ–¹æ³•\nfunction sayHello () {\n  const el = $('body')\n  log('zhouyu, hello', el)\n}\n\nexport default sayHello\n```\n\n## ES6 Modules ç°çŠ¶\n\næ—¶è‡³ä»Šæ—¥ï¼Œå‡ å¤§ä¸»æµæµè§ˆå™¨éƒ½åœ¨ç§¯ææ¨è¿›æ”¯æŒåŸç”Ÿ ES6 Modules çš„å·¥ä½œï¼Œéƒ¨åˆ†æµè§ˆå™¨çš„æŠ€æœ¯é¢„è§ˆç‰ˆä¹Ÿå·²ç»åˆæ­¥å®Œæˆäº†è¿™ä¸€ä½¿å‘½ã€‚å¯ä»¥é€šè¿‡ [caniuse](https://caniuse.com/#search=module) æŸ¥çœ‹ç›®å‰æµè§ˆå™¨çš„æ”¯æŒæƒ…å†µã€‚\n\n## ä½¿ç”¨ Babel å’Œ webpack\n\nç”±äºç»å¤§å¤šæ•°æµè§ˆå™¨éƒ½ä¸æ”¯æŒ ES6 Modulesï¼Œæ‰€ä»¥ç›®å‰å¦‚æœæƒ³ä½¿ç”¨å®ƒçš„è¯­æ³•ï¼Œéœ€è¦å€ŸåŠ© Babel å’Œ webpackï¼Œå³é€šè¿‡ Babel å°†ä»£ç ç¼–è¯‘ä¸º ES5 çš„è¯­æ³•ï¼Œç„¶åä½¿ç”¨ webpack æ‰“åŒ…æˆç›®æ ‡æ ¼å¼ã€‚\n\n## ç›´æ¥ä½¿ç”¨ ES6 Modules\n\næœ‰äº›æ¸¸è§ˆå™¨å·²ç»æ”¯æŒ ES6 Modulesï¼Œæˆ‘ä»¬åˆ©ç”¨ `<script type=\"module\">`(é»˜è®¤æ˜¯ defer)æ¥ä½¿ç”¨ã€‚\n\n## å…¶ä»–æ¢ç´¢\n\n* åŠ¨æ€åŠ è½½æ–¹æ¡ˆ `import()`\n\n``` js\nconst load = async (url) => {\n  const module = await import(url)\n  console.log(module, window[tempGlobal])\n}\n```\n\n``` js\nfunction load (url) {\n  return new Promise((resolve, reject) => {\n    const script = document.createElement('script')\n    const tempGlobal = '__tempModuleLoadingVariable' + Math.random().toString(32).substring(2)\n    script.type = 'module'\n    script.textContent = `import * as m from \"${url}\"; window.${tempGlobal} = m;`\n\n    script.onload = () => {\n      resolve(window[tempGlobal])\n      delete window[tempGlobal]\n      script.remove()\n    }\n\n    script.onerror = () => {\n      reject(new Error('Failed to load module script with URL ' + url))\n      delete window[tempGlobal]\n      script.remove()\n    }\n\n    document.documentElement.appendChild(script)\n  })\n}\n```\n\n* åŸºäº ES6 Modules çš„ `module-pusher` å°è¯•\n","tags":["æ¨¡å—åŒ–"],"categories":["çŸ¥è¯†"]},{"title":"å¥åº·æŒ‡æ ‡","url":"%2F2019%2F%E5%81%A5%E5%BA%B7%E6%8C%87%E6%A0%87.html","content":"\næ¥ä¸Šæ¬¡çš„[ç»´ç”Ÿç´ ](https://mydearest.cn/2019/%E7%BB%B4%E7%94%9F%E7%B4%A0.html)ğŸ˜Šï¼Œç½—åˆ—ä¸€äº›ç”Ÿæ´»ä¸­éœ€è¦çŸ¥é“å¥åº·æŒ‡æ ‡ã€‚\n\n<!-- more -->\n\n# è¡€ç³–\n\nè¡€ä¸­çš„è‘¡è„ç³–ç§°ä¸ºè¡€ç³–ã€‚\n\nè¡€ç³–çš„æ¥æºåŒ…æ‹¬ï¼šâ‘ é£Ÿç‰©æ¶ˆåŒ–ã€å¸æ”¶ï¼›â‘¡è‚å†…å‚¨å­˜çš„ç³–åŸåˆ†è§£ï¼›â‘¢è„‚è‚ªå’Œè›‹ç™½è´¨çš„è½¬åŒ–ã€‚\n\nè¡€ç³–çš„å»è·¯åŒ…æ‹¬ï¼šâ‘ æ°§åŒ–è½¬å˜ä¸ºèƒ½é‡ï¼›â‘¡è½¬åŒ–ä¸ºç³–åŸå‚¨å­˜äºè‚è„ã€è‚¾è„å’Œè‚Œè‚‰ä¸­ï¼›â‘¢è½¬å˜ä¸ºè„‚è‚ªå’Œè›‹ç™½è´¨ç­‰å…¶ä»–è¥å…»æˆåˆ†åŠ ä»¥å‚¨å­˜ã€‚\n\nèƒ°å²›æ˜¯ä½“å†…è°ƒèŠ‚è¡€ç³–çš„è¡€ç³–æµ“åº¦çš„ä¸»è¦å™¨å®˜ï¼Œè‚è„å‚¨å­˜è‚ç³–å…ƒã€‚æ­¤å¤–ï¼Œè¡€ç³–æµ“åº¦è¿˜å—ç¥ç»ã€å†…åˆ†æ³Œæ¿€ç´ çš„è°ƒèŠ‚ã€‚\n\n## è¡€ç³–å€¼\n\n### ç©ºè…¹è¡€ç³–\n\nå…¨è¡€è¡€ç³–(æ‰‹æŒ‡)ã€‚è¡€æµ†è¡€ç³–(é™è„‰)ã€‚\n\nç©ºè…¹è¡€ç³–æ­£å¸¸å€¼ï¼Œå…¨è¡€è¡€ç³–ï¼š3.89ï½6.11 mmol/Lï¼Œè¡€æµ†è¡€ç³–ï¼š3.90ï½6.90 mmol/L\n\nç©ºè…¹å…¨è¡€è¡€ç³– â‰¥ 6.70 mmol/Lï¼Œè¡€æµ†è¡€ç³– â‰¥ 7.80 mmol/Lï¼Œ2 æ¬¡é‡å¤æµ‹å®šå¯è¯Šæ–­ä¸ºç³–å°¿ç—…ã€‚\n\n### é¤åè¡€ç³–\n\né¤å 1 å°æ—¶ï¼šè¡€ç³– 6.7-9.4 mmol/Lã€‚æœ€å¤šä¹Ÿä¸è¶…è¿‡ 11.1 mmol/Lã€‚\n\né¤å 2 å°æ—¶ï¼šè¡€ç³– â‰¤ 7.8 mmol/Lã€‚\n\né¤å 3 å°æ—¶ï¼šç¬¬ä¸‰å°æ—¶åæ¢å¤æ­£å¸¸ï¼Œå„æ¬¡å°¿ç³–å‡ä¸ºé˜´æ€§ã€‚\n\n### å­•å¦‡è¡€ç³–\n\nç©ºè…¹ä¸è¶…è¿‡ 5.1 mmol/Lã€‚\n\né¤å 1 å°æ—¶ä¸å¾—è¶…è¿‡ 10.0 mmol/L æ‰æ˜¯è¡€ç³–çš„æ­£å¸¸æ°´å¹³ã€‚\n\n## ç³–å°¿ç—…\n\nç³–å°¿ç—…æ‚£è€…çš„ç©ºè…¹è¡€ç³–å‚è€ƒå€¼ï¼š\n\nè½»åº¦ç³–å°¿ç—…ï¼š7.0~8.4 mmol/Lï¼Œä¸­åº¦ç³–å°¿ç—…ï¼š8.4~11.1 mmol/Lï¼Œé‡åº¦ç³–å°¿ç—…ï¼šå¤§äº 11.1 mmol/Lã€‚\n\n## è¯ç‰©\n\näºŒç”²åŒèƒã€‚\n\n1. äºŒç”²åŒèƒç‰‡é¦–é€‰ç”¨å•çº¯é¥®é£Ÿæ§åˆ¶åŠä½“è‚²é”»ç‚¼æ²»ç–—æ— æ•ˆçš„2å‹ç³–å°¿ç—…ï¼Œç‰¹åˆ«æ˜¯è‚¥èƒ–çš„2å‹ç³–å°¿ç—…ã€‚\n2. æœ¬å“ä¸èƒ°å²›ç´ åˆç”¨ï¼Œå¯å‡å°‘èƒ°å²›ç´ ç”¨é‡ï¼Œé˜²æ­¢ä½è¡€ç³–å‘ç”Ÿã€‚\n3. å¯ä¸ç£ºé…°è„²ç±»é™è¡€ç³–è¯åˆç”¨ï¼Œå…·ååŒä½œç”¨ã€‚\n\næœç”¨æœ¬å“æ—¶åº”å°½é‡é¿å…é¥®é…’ã€‚\n\n## å“ªäº›é£Ÿç‰©é™è¡€ç³–\n\n1.é¥®é£Ÿå®œæ¸…æ·¡ï¼Œå¿Œè¾›è¾£ï¼Œä½ç³–ã€ä½æ²¹ã€ä½ç›ï¼ŒæŒ‰æ—¶é¥®é£Ÿ\n\n2.å¯ä»¥åƒï¼šè‹¦ç“œã€æ´‹è‘±ã€å±±è¯ã€æµ·å¸¦ã€é­”èŠ‹å¤šåƒï¼Œå†¬ç“œã€èŠ¹èœã€è èœã€è—•ç­‰å°‘åƒ\n\n3.å¯ä»¥åƒï¼šæŸšå­ã€è‹¹æœã€æ©˜å­ã€æ¨±æ¡ƒã€è‰è“ã€æ¢¨ã€æ¡ƒç­‰å‡ç³–æŒ‡æ•°æ¯”è¾ƒä½ï¼Œè¥¿ç“œåƒé è¿‘ç“œçš®çš„ï¼Œä¸åƒç“œå¿ƒ\n\n4.ä¸èƒ½åƒï¼šé¦™è•‰ã€å±±æ¥‚ã€æŸ¿å­ã€æ£å­\n\n5.å¤šå–å‡‰ç™½å¼€ï¼Œä¸è¦æ†‹å°¿\n\n6.æ£€æµ‹è¶³éƒ¨ï¼Œä¿æŠ¤è¶³éƒ¨\n\n7.å¤šåšè¶³éƒ¨è¿åŠ¨ï¼Œè¸®è„šã€è„šè¶¾æŠ“åœ°ã€æ³¡å®Œè„šåç”¨æŒå¿ƒæ“è„šå¿ƒ\n\n8.ä¸å«ç³–çš„ç”œå‘³å‰‚ï¼Œæ¯”å¦‚æœ¨ç³–é†‡ã€ä¸‰æ°¯è”—ç³–ã€é˜¿æ–¯å·´ç”œã€ç”œèŠç³–è‹·è¿™ç±»ç”œå‘³å‰‚ï¼›å¦‚æœå«æœ‰è¿™äº›çš„é£Ÿå“ï¼Œå¯ä»¥å°‘é‡é£Ÿç”¨ã€‚ç‡•éº¦ç‰‡\n\nå¤šåƒï¼šå†¬ç“œã€è‹¦ç“œã€æ´‹è‘±ã€å±±è¯ã€æµ·å¸¦ã€é­”èŠ‹ã€èŠ¹èœã€è èœã€æœ¨è€³ã€è—•\n\n### ç‡•éº¦ç‰‡\n\nç‡•éº¦ç‰‡æ˜¯ç‡•éº¦ç²’è½§åˆ¶è€Œæˆï¼Œå‘ˆæ‰å¹³çŠ¶ï¼Œç›´å¾„çº¦ç›¸å½“äºé»„è±†ç²’ï¼Œå½¢çŠ¶å®Œæ•´çš„ä¸€ç§é£Ÿå“ã€‚ç‡•éº¦ç…®å‡ºæ¥é«˜åº¦ç²˜ç¨ ï¼Œå…¶ä¸­ beta è‘¡èšç³–å¥åº·æˆåˆ†æ‰€å¸¦æ¥çš„ï¼Œå…·æœ‰é™è¡€è„‚ã€é™è¡€ç³–ã€é«˜é¥±è…¹çš„æ•ˆæœï¼Œé•¿æœŸé£Ÿç”¨å…·æœ‰å‡è‚¥åŠŸæ•ˆã€‚æ­¤å¤–ï¼Œç‡•éº¦ä¸­å«æœ‰ä¸°å¯Œçš„ç»´ç”Ÿç´  B1ã€B2ã€Eã€å¶é…¸ç­‰ï¼Œå¯ä»¥æ”¹å–„è¡€æ¶²å¾ªç¯ã€ç¼“è§£ç”Ÿæ´»å·¥ä½œå¸¦æ¥çš„å‹åŠ›ï¼›å«æœ‰çš„é’™ã€ç£·ã€é“ã€é”Œã€é”°ç­‰çŸ¿ç‰©è´¨ä¹Ÿæœ‰é¢„é˜²éª¨è´¨ç–æ¾ã€ä¿ƒè¿›ä¼¤å£æ„ˆåˆã€é˜²æ­¢è´«è¡€çš„åŠŸæ•ˆã€‚\n\n### é­”èŠ‹\n\né™è¡€ç³–ã€é™è¡€è„‚ã€é™è¡€å‹ã€æ•£æ¯’ã€å…»é¢œã€é€šè„‰ã€å‡è‚¥ã€é€šä¾¿ã€å¼€èƒƒã€‚\n\nç”Ÿé­”èŠ‹æœ‰æ¯’ï¼Œå¿…é¡»ç…ç…® 3 å°æ—¶ä»¥ä¸Šæ‰å¯é£Ÿç”¨ã€‚\n\næ¶ˆåŒ–ä¸è‰¯çš„äººï¼Œæ¯æ¬¡é£Ÿé‡ä¸å®œè¿‡å¤šã€‚\n\næœ‰çš®è‚¤ç—…çš„äººå°‘é£Ÿã€‚\n\né­”èŠ‹æ€§å¯’ï¼Œæœ‰ä¼¤å¯’æ„Ÿå†’ç—‡çŠ¶çš„åº”å°‘é£Ÿç”¨ã€‚\n\n### æµ·å¸¦\n\næµ·å¸¦æ˜¯ä¸€ç§è¥å…»ä»·å€¼å¾ˆé«˜çš„è”¬èœï¼ŒåŒæ—¶å…·æœ‰ä¸€å®šçš„è¯ç”¨ä»·å€¼ã€‚å«æœ‰ä¸°å¯Œçš„ç¢˜ç­‰çŸ¿ç‰©è´¨å…ƒç´ ã€‚æµ·å¸¦å«çƒ­é‡ä½ã€è›‹ç™½è´¨å«é‡ä¸­ç­‰ã€çŸ¿ç‰©è´¨ä¸°å¯Œã€‚ç ”ç©¶å‘ç°ï¼Œæµ·å¸¦å…·æœ‰é™è¡€è„‚ã€é™è¡€ç³–ã€è°ƒèŠ‚å…ç–«ã€æŠ—å‡è¡€ã€æŠ—è‚¿ç˜¤ã€æ’é“…è§£æ¯’å’ŒæŠ—æ°§åŒ–ç­‰å¤šç§ç”Ÿç‰©åŠŸèƒ½ã€‚\n\nåƒæµ·å¸¦åä¸è¦é©¬ä¸Šå–èŒ¶(èŒ¶å«é£é…¸)ï¼Œä¹Ÿä¸è¦ç«‹åˆ»åƒé…¸æ¶©çš„æ°´æœ(é…¸æ¶©æ°´æœå«æ¤ç‰©é…¸)ã€‚\n\nåƒå¤šä¹Ÿä¸å¥½ï¼Œä¼šå¾—ç”²äº¢ã€‚\n\n### å±±è¯\n\nå…·æœ‰æ»‹å…»å¼ºå£®ï¼ŒåŠ©æ¶ˆåŒ–ï¼Œæ•›è™šæ±—ï¼Œæ­¢æ³»ä¹‹åŠŸæ•ˆï¼Œä¸»æ²»è„¾è™šè…¹æ³»ã€è‚ºè™šå’³å—½ã€ç³–å°¿ç—…æ¶ˆæ¸´ã€å°ä¾¿çŸ­é¢‘ã€é—ç²¾ã€å¦‡å¥³å¸¦ä¸‹åŠæ¶ˆåŒ–ä¸è‰¯çš„æ…¢æ€§è‚ ç‚ã€‚\n\n# è¡€å‹\n\næ˜¯æŒ‡è¡€æ¶²åœ¨è¡€ç®¡å†…æµåŠ¨æ—¶ä½œç”¨äºå•ä½é¢ç§¯è¡€ç®¡å£çš„ä¾§å‹åŠ›ï¼Œå®ƒæ˜¯æ¨åŠ¨è¡€æ¶²åœ¨è¡€ç®¡å†…æµåŠ¨çš„åŠ¨åŠ›ã€‚åœ¨ä¸åŒè¡€ç®¡å†…è¢«åˆ†åˆ«ç§°ä¸ºåŠ¨è„‰è¡€å‹ã€æ¯›ç»†è¡€ç®¡å‹å’Œé™è„‰è¡€å‹ï¼Œé€šå¸¸æ‰€è¯´çš„è¡€å‹æ˜¯æŒ‡ä½“å¾ªç¯çš„åŠ¨è„‰è¡€å‹ã€‚\n\nå½±å“åŠ¨è„‰è¡€å‹çš„å› ç´ ä¸»è¦æœ‰äº”ä¸ªæ–¹é¢ï¼šâ‘ æ¯æè¾“å‡ºé‡ï¼›â‘¡å¤–å‘¨é˜»åŠ›ï¼›â‘¢å¿ƒç‡ï¼›â‘£ä¸»åŠ¨è„‰å’Œå¤§åŠ¨è„‰ç®¡å£çš„å¼¹æ€§ï¼›â‘¤å¾ªç¯è¡€é‡ä¸è¡€ç®¡å®¹é‡ã€‚\n\n## è¡€å‹å€¼\n\næ”¶ç¼©å‹ï¼šé«˜å‹ã€‚èˆ’å¼ å‹ï¼šä½å‹ã€‚\n\næ­£å¸¸æˆäººå®‰é™çŠ¶æ€ä¸‹çš„è¡€å‹èŒƒå›´è¾ƒç¨³å®šï¼Œæ­£å¸¸èŒƒå›´æ”¶ç¼©å‹ 90ï½139 mmHgï¼Œèˆ’å¼ å‹ 60ï½89 mmHgï¼Œè„‰å‹ 30ï½40 mmHgã€‚\n\né«˜è¡€å‹ï¼šæœªä½¿ç”¨æŠ—é«˜è¡€å‹è¯çš„å‰æä¸‹ï¼Œ18 å²ä»¥ä¸Šæˆäººæ”¶ç¼©å‹ â‰¥ 140 mmHg å’Œ(æˆ–)èˆ’å¼ å‹ â‰¥ 90mmHgã€‚\n\nä½è¡€å‹ï¼šæœªä½¿ç”¨æŠ—é«˜è¡€å‹è¯çš„å‰æä¸‹ï¼Œ18 å²ä»¥ä¸Šæˆäººæ”¶ç¼©å‹ < 90 mmHg å’Œ(æˆ–)èˆ’å¼ å‹ < 60mmHgã€‚\n\n## å“ªäº›é£Ÿç‰©é™è¡€å‹\n\n### èŒ„å­\n\né™ä½èƒ†å›ºé†‡ï¼Œé™è¡€è„‚ã€é™è¡€å‹ï¼Œé˜²æ²»èƒƒç™Œï¼Œæ²»ç–—æ…¢æ€§èƒƒç‚ã€è‚¾ç‚æ°´è‚¿ï¼Œé˜²æ²»åè¡€ç—…åŠä¿ƒè¿›ä¼¤å£æ„ˆåˆï¼Œæ¸…çƒ­è§£æ¯’ã€‚\n\næ¶ˆåŒ–ä¸è‰¯ã€å®¹æ˜“è…¹æ³»ã€è„¾èƒƒè™šå¯’ã€ä¾¿æºç—‡çŠ¶çš„äººä¸å®œå¤šåƒã€‚\n\nç§‹åçš„èŒ„å­æœ‰ä¸€å®šçš„æ¯’ç´ ï¼Œä¸è¦åƒã€‚\n\n### ç™½èåœ\n\næ¸…è‚ æ’æ¯’ï¼Œä¿ƒè¿›æ¶ˆåŒ–ï¼Œå¢å¼ºé£Ÿæ¬²ï¼Œé˜²ç™ŒæŠ—ç™Œï¼Œé™è¡€å‹\n\n### èŠ¹èœ\n\né™ä½èƒ†å›ºé†‡ï¼Œé™è¡€å‹\n\nã€èŠ¹èœ+é¸¡è‚‰ã€‘å®¹æ˜“ä¼¤å…ƒæ°”ã€‚\n\nã€èŠ¹èœ+å…”è‚‰ã€‘å®¹æ˜“å¼•èµ·è„±çš®ã€‚\n\n# BMI æŒ‡æ•°\n\nèº«ä½“è´¨é‡æŒ‡æ•°ï¼Œç®€ç§°ä½“è´¨æŒ‡æ•°ï¼Œåˆç§°ä½“é‡.\n\nä½“è´¨æŒ‡æ•°(BMI)= ä½“é‡(kg)Ã· èº«é«˜(m)^ 2\n\næˆäººçš„BMIæ•°å€¼ï¼š\n  - è¿‡è½»ï¼šä½äº 18.5\n  - æ­£å¸¸ï¼š18.5-23.9\n  - è¿‡é‡ï¼š24-27\n  - è‚¥èƒ–ï¼š28-32\n  - éå¸¸è‚¥èƒ–ï¼šé«˜äº 32\n\n60 / (1.68 * 1.68) = 21.26\n\n65 / (1.68 * 1.68) = 23.04\n\n67 / (1.68 * 1.68) = 23.74\n\n60 / (1.70 * 1.70) = 20.77\n\n65 / (1.70 * 1.70) = 22.50\n\n69 / (1.70 * 1.70) = 23.88\n\n60 / (1.72 * 1.72) = 20.29\n\n65 / (1.72 * 1.72) = 21.98\n\n70 / (1.72 * 1.72) = 23.67\n\n# å…¶ä»–\n\n## éŸ­èœ\n\nè¡¥è‚¾ï¼Œå¥èƒƒï¼Œæç¥ï¼Œé™ä½èƒ†å›ºé†‡ã€‚\n\næ˜¥é£Ÿåˆ™é¦™ï¼Œå¤é£Ÿåˆ™è‡­ã€‚\n\nã€éŸ­èœ+è èœã€‘åŒé£Ÿä¼šæœ‰æ»‘è‚ ä½œç”¨ï¼Œå®¹æ˜“å¼•èµ·è…¹æ³»ã€‚\n\nã€éŸ­èœ+ç‰›è‚‰ã€‘å‘ çƒ­åŠ¨ç«ï¼Œå¼•èµ·ç‰™é½¿è‚¿ç—›ï¼Œå£ç–®ã€‚\n\nã€éŸ­èœ+ç™½é…’ã€‘å¼•èµ·èƒƒç‚ï¼Œèƒƒæºƒè‚ ç—…å¤å‘ã€‚\n\nã€éŸ­èœ+èœ‚èœœã€‘åŒé£Ÿå®¹æ˜“å¼•èµ·è…¹æ³»ã€‚","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"title":"EventLoop","url":"%2F2019%2FEventLoop.html","content":"\n## æè¿°äº‹ä»¶é˜Ÿåˆ—çš„è¿‡ç¨‹ï¼Ÿ\n\n- jsæ˜¯å•çº¿ç¨‹çš„ï¼Œä¼šå‡ºç°é˜»å¡é—®é¢˜ï¼Œå› æ­¤æœ‰äº†ä»»åŠ¡é˜Ÿåˆ—çš„å‡ºç°\n- ä¸»çº¿ç¨‹åŒæ­¥æ‰§è¡Œä»»åŠ¡ï¼Œå¼‚æ­¥çš„å·¥ä½œä¸€èˆ¬ä¼šäº¤ç»™å…¶ä»–çº¿ç¨‹å®Œæˆï¼Œç„¶åå›è°ƒå‡½æ•°ä¼šæ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­\n- ç­‰å€™ä¸»çº¿ç¨‹æ‰§è¡Œå®Œæ¯•åå†æ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ“ä½œ\n\n![event-queue](http://cdn.mydearest.cn/blog/images/event-queue.png)\n\n> åŒæ­¥ä»»åŠ¡æŒ‡çš„æ˜¯ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸Šæ’é˜Ÿæ‰§è¡Œçš„ä»»åŠ¡ï¼Œåªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ‰èƒ½æ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ï¼›\n\n> å¼‚æ­¥ä»»åŠ¡æŒ‡çš„æ˜¯ï¼Œä¸è¿›å…¥ä¸»çº¿ç¨‹ã€è€Œè¿›å…¥\"ä»»åŠ¡é˜Ÿåˆ—\"ï¼ˆtask queueï¼‰çš„ä»»åŠ¡ï¼Œåªæœ‰\"ä»»åŠ¡é˜Ÿåˆ—\"é€šçŸ¥ä¸»çº¿ç¨‹ï¼ŒæŸä¸ªå¼‚æ­¥ä»»åŠ¡å¯ä»¥æ‰§è¡Œäº†ï¼Œè¯¥ä»»åŠ¡æ‰ä¼šè¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨\"ä»»åŠ¡é˜Ÿåˆ—\"ä¹‹\nä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚\n\n![task-queue](http://cdn.mydearest.cn/blog/images/task-queue.png)\nä»»åŠ¡é˜Ÿåˆ—ä¸­å­˜ç€çš„æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼Œè¿™äº›å¼‚æ­¥ä»»åŠ¡ä¸€å®šè¦ç­‰åˆ°æ‰§è¡Œæ ˆæ¸…ç©ºåæ‰ä¼šæ‰§è¡Œã€‚\n\nåŒæ­¥å°±æ˜¯å‘å‡ºä¸€ä¸ªè¯·æ±‚åä»€ä¹ˆäº‹éƒ½ä¸åšï¼Œä¸€ç›´ç­‰å¾…è¯·æ±‚è¿”å›åæ‰ä¼šç»§ç»­åšäº‹ï¼›å¼‚æ­¥å°±æ˜¯å‘å‡ºè¯·æ±‚åç»§ç»­å»åšå…¶ä»–äº‹ï¼Œè¿™ä¸ªè¯·æ±‚å¤„ç†å®Œæˆåä¼šé€šçŸ¥ä½ ï¼Œè¿™æ—¶å€™å°±å¯ä»¥å¤„ç†è¿™ä¸ªå›åº”äº†ã€‚\n\n---\n<!--more-->\n\n## ä»€ä¹ˆæ˜¯å®ä»»åŠ¡ä»€ä¹ˆæ˜¯å¾®ä»»åŠ¡ï¼Ÿ\nscript(å®ä»»åŠ¡) - æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ— - æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ - æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ— - æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œ å¦‚æ­¤å¾€å¤ã€‚\n1.å…ˆæ‰§è¡Œscripté‡Œçš„åŒæ­¥ä»£ç ï¼ˆæ­¤æ—¶æ˜¯å®ä»»åŠ¡ï¼‰ã€‚ç¢°åˆ°å¼‚æ­¥ä»»åŠ¡ï¼Œæ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ã€‚\n2.æŸ¥æ‰¾ä»»åŠ¡é˜Ÿåˆ—æœ‰æ²¡æœ‰å¾®ä»»åŠ¡ï¼Œæœ‰å°±æŠŠæ­¤æ—¶çš„å¾®ä»»åŠ¡å…¨éƒ¨æŒ‰é¡ºåºæ‰§è¡Œ ï¼ˆè¿™å°±æ˜¯ä¸ºä»€ä¹ˆpromiseä¼šæ¯”setTimeoutå…ˆæ‰§è¡Œï¼Œå› ä¸ºå…ˆæ‰§è¡Œçš„å®ä»»åŠ¡æ˜¯åŒæ­¥ä»£ç ï¼ŒsetTimeoutè¢«æ”¾è¿›ä»»åŠ¡é˜Ÿåˆ—äº†ï¼ŒsetTimeoutåˆæ˜¯å®ä»»åŠ¡ï¼Œåœ¨å®ƒä¹‹å‰å…ˆå¾—æ‰§è¡Œå¾®ä»»åŠ¡(å°±æ¯”å¦‚promise)ï¼‰ã€‚\n3.æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼ˆå…ˆè¿›åˆ°é˜Ÿåˆ—ä¸­çš„é‚£ä¸ªå®ä»»åŠ¡ï¼‰ï¼Œå†æŠŠè¿™æ¬¡çš„å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡æ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—ã€‚\n4.ä¸€ç›´é‡å¤2ã€3æ­¥éª¤\n\nå½“æ»¡è¶³æ‰§è¡Œæ¡ä»¶æ—¶ï¼Œå®ä»»åŠ¡(macroTask) å’Œ å¾®ä»»åŠ¡(microTask) ä¼šå„è‡ªè¢«æ”¾å…¥å¯¹åº”çš„é˜Ÿåˆ—ï¼šå®é˜Ÿåˆ—(Macrotask Queue) å’Œ å¾®é˜Ÿåˆ—(Microtask Queue) ä¸­ç­‰å¾…æ‰§è¡Œã€‚\nå…ˆæ‰§è¡ŒåŒæ­¥ä»»åŠ¡ï¼Œç„¶åæ‰€æœ‰å¾®ä»»åŠ¡ï¼Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ‰€æœ‰å¾®ä»»åŠ¡ï¼Œä¸€ä¸ªå®ä»»åŠ¡...\n\n![macro-micro](http://cdn.mydearest.cn/blog/images/macro-micro.png)\n\n## å“ªäº›æ˜¯å®ä»»åŠ¡å“ªäº›æ˜¯å¾®ä»»åŠ¡ï¼Ÿ\n\n### å®ä»»åŠ¡(ä¼˜å…ˆçº§ç”±é«˜åˆ°ä½)\n- ä¸»çº¿ç¨‹åŒæ­¥ä»£ç \n- setTimeout\n- setImmediate nodeæ— \n- setInterval\n- requestAnimationFrame nodeæ— \n- I/O\n- UI rendering\n\n### å¾®ä»»åŠ¡(ä¼˜å…ˆçº§ç”±é«˜åˆ°ä½)\n- process.nextTick æµè§ˆå™¨æ— \n- Promise.then\n- Object.observe(è¯¥æ–¹æ³•å·²åºŸå¼ƒ)\n- MutationObserver nodeæ— \n\n### å¾®ä»»åŠ¡çš„æ„ä¹‰\nå‡å°‘æ›´æ–°æ—¶çš„æ¸²æŸ“æ¬¡æ•°\nå› ä¸ºæ ¹æ®HTMLæ ‡å‡†ï¼Œä¼šåœ¨å®ä»»åŠ¡æ‰§è¡Œç»“æŸä¹‹åï¼Œåœ¨ä¸‹ä¸€ä¸ªå®ä»»åŠ¡å¼€å§‹æ‰§è¡Œä¹‹å‰ï¼ŒUIéƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚å¦‚æœåœ¨microtaskä¸­å°±å®Œæˆæ•°æ®æ›´æ–°ï¼Œå½“ macro-taskç»“æŸå°±å¯ä»¥å¾—åˆ°æœ€æ–°çš„UIäº†ã€‚å¦‚æœæ–°å»ºä¸€ä¸ª macro-taskæ¥åšæ•°æ®æ›´æ–°çš„è¯ï¼Œé‚£ä¹ˆæ¸²æŸ“ä¼šæ‰§è¡Œä¸¤æ¬¡ã€‚\n\n### äº‹ä»¶å¾ªç¯\n![eventloop](http://cdn.mydearest.cn/blog/images/eventloop.png)\n\njså¼•æ“å­˜åœ¨monitoring processè¿›ç¨‹ï¼Œä¼šæŒç»­ä¸æ–­çš„æ£€æŸ¥ä¸»çº¿ç¨‹æ‰§è¡Œæ ˆæ˜¯å¦ä¸ºç©ºï¼Œä¸€æ—¦ä¸ºç©ºå°±ä¼šå»Event Queueé‚£é‡Œæ£€æŸ¥æ˜¯å¦æœ‰ç­‰å¾…è¢«è°ƒç”¨çš„å‡½æ•°ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯ä¸æ–­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªçš„è¿™ç§è¿è¡Œæœºåˆ¶åˆç§°ä¸ºEvent \nLoopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰\n\n1. æ•´ä½“çš„script(ä½œä¸ºç¬¬ä¸€ä¸ªå®ä»»åŠ¡)å¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šæŠŠæ‰€æœ‰ä»£ç åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šâ€œåŒæ­¥ä»»åŠ¡â€ã€â€œå¼‚æ­¥ä»»åŠ¡â€ï¼›\n2. åŒæ­¥ä»»åŠ¡ä¼šç›´æ¥è¿›å…¥ä¸»çº¿ç¨‹ä¾æ¬¡æ‰§è¡Œï¼›\n4. å¼‚æ­¥ä»»åŠ¡ä¼šå†åˆ†ä¸ºå®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ï¼›\n5. å®ä»»åŠ¡è¿›å…¥åˆ°Event Tableä¸­ï¼Œå¹¶åœ¨é‡Œé¢æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œæ¯å½“æŒ‡å®šçš„äº‹ä»¶å®Œæˆæ—¶ï¼ŒEvent Tableä¼šå°†è¿™ä¸ªå‡½æ•°ç§»åˆ°Event Queueä¸­ï¼›\n6. å¾®ä»»åŠ¡ä¹Ÿä¼šè¿›å…¥åˆ°å¦ä¸€ä¸ªEvent Tableä¸­ï¼Œå¹¶åœ¨é‡Œé¢æ³¨å†Œå›è°ƒå‡½æ•°ï¼Œæ¯å½“æŒ‡å®šçš„äº‹ä»¶å®Œæˆæ—¶ï¼ŒEvent Tableä¼šå°†è¿™ä¸ªå‡½æ•°ç§»åˆ°Event Queueä¸­ï¼›\n7. å½“ä¸»çº¿ç¨‹å†…çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œä¸»çº¿ç¨‹ä¸ºç©ºæ—¶ï¼Œä¼šæ£€æŸ¥å¾®ä»»åŠ¡çš„Event Queueï¼Œå¦‚æœæœ‰ä»»åŠ¡ï¼Œå°±å…¨éƒ¨æ‰§è¡Œï¼Œå¦‚æœæ²¡æœ‰å°±æ‰§è¡Œä¸‹ä¸€ä¸ªå®ä»»åŠ¡ï¼›\nä¸Šè¿°è¿‡ç¨‹ä¼šä¸æ–­é‡å¤ï¼Œè¿™å°±æ˜¯Event Loopäº‹ä»¶å¾ªç¯ï¼›\n\n![summary-loop](http://cdn.mydearest.cn/blog/images/summary-loop.png)\n\n**ç²¾ç‚¼**äº‹ä»¶å¾ªç¯æ˜¯æŒ‡: æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œç„¶åæ‰§è¡Œæ¸…ç©ºå¾®ä»»åŠ¡åˆ—è¡¨ï¼Œå¾ªç¯å†æ‰§è¡Œå®ä»»åŠ¡ï¼Œå†æ¸…å¾®ä»»åŠ¡åˆ—è¡¨ã€‚\n\n### Node çš„ Event Loop: 6ä¸ªé˜¶æ®µ\n- Timers: å®šæ—¶å™¨ Interval Timoout å›è°ƒäº‹ä»¶ï¼Œå°†ä¾æ¬¡æ‰§è¡Œå®šæ—¶å™¨å›è°ƒå‡½æ•°\n- Pending: ä¸€äº›ç³»ç»Ÿçº§å›è°ƒå°†ä¼šåœ¨æ­¤é˜¶æ®µæ‰§è¡Œ\n- Idle,prepare: æ­¤é˜¶æ®µ\"ä»…ä¾›å†…éƒ¨ä½¿ç”¨\"\n- Poll: IOå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªé˜¶æ®µè¾ƒä¸ºé‡è¦ä¹Ÿå¤æ‚äº›ï¼Œ\n- Check: æ‰§è¡Œ setImmediate() çš„å›è°ƒ\n- Close: æ‰§è¡Œ socket çš„ close äº‹ä»¶å›è°ƒ\n\n### åŒºåˆ«æ€»ç»“\n![eventloop-diff](http://cdn.mydearest.cn/blog/images/eventloop-diff.png)\n```js\nsetTimeout(()=>{\n    console.log('timer1')\n    Promise.resolve().then(function() {\n        console.log('promise1')\n    })\n}, 0)\nsetTimeout(()=>{\n    console.log('timer2')\n    Promise.resolve().then(function() {\n        console.log('promise2')\n    })\n}, 0)\n```\n> æµè§ˆå™¨ç«¯è¿è¡Œç»“æœï¼štimer1=>promise1=>timer2=>promise2\n![navigator-eventloop](http://cdn.mydearest.cn/blog/images/navigator-eventloop.png)\n\nNodeç«¯è¿è¡Œç»“æœåˆ†ä¸¤ç§æƒ…å†µï¼š\n\nå¦‚æœæ˜¯node11ç‰ˆæœ¬ä¸€æ—¦æ‰§è¡Œä¸€ä¸ªé˜¶æ®µé‡Œçš„ä¸€ä¸ªå®ä»»åŠ¡(setTimeout,setIntervalå’ŒsetImmediate)å°±ç«‹åˆ»æ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œè¿™å°±è·Ÿæµè§ˆå™¨ç«¯è¿è¡Œä¸€è‡´ï¼Œæœ€åçš„ç»“æœ\nä¸ºtimer1=>promise1=>timer2=>promise2\n\nå¦‚æœæ˜¯node10åŠå…¶ä¹‹å‰ç‰ˆæœ¬ï¼šè¦çœ‹ç¬¬ä¸€ä¸ªå®šæ—¶å™¨æ‰§è¡Œå®Œï¼Œç¬¬äºŒä¸ªå®šæ—¶å™¨æ˜¯å¦åœ¨å®Œæˆé˜Ÿåˆ—ä¸­ã€‚\n\nå¦‚æœæ˜¯ç¬¬äºŒä¸ªå®šæ—¶å™¨è¿˜æœªåœ¨å®Œæˆé˜Ÿåˆ—ä¸­ï¼Œæœ€åçš„ç»“æœä¸ºtimer1=>promise1=>timer2=>promise2\nå¦‚æœæ˜¯ç¬¬äºŒä¸ªå®šæ—¶å™¨å·²ç»åœ¨å®Œæˆé˜Ÿåˆ—ä¸­ï¼Œåˆ™æœ€åçš„ç»“æœä¸ºtimer1=>timer2=>promise1=>promise2(ä¸‹æ–‡è¿‡ç¨‹è§£é‡ŠåŸºäºè¿™ç§æƒ…å†µä¸‹)\n\n1. å…¨å±€è„šæœ¬ï¼ˆmain()ï¼‰æ‰§è¡Œï¼Œå°†2ä¸ªtimerä¾æ¬¡æ”¾å…¥timeré˜Ÿåˆ—ï¼Œmain()æ‰§è¡Œå®Œæ¯•ï¼Œè°ƒç”¨æ ˆç©ºé—²ï¼Œä»»åŠ¡é˜Ÿåˆ—å¼€å§‹æ‰§è¡Œï¼›\n2. é¦–å…ˆè¿›å…¥timersé˜¶æ®µï¼Œæ‰§è¡Œtimer1çš„å›è°ƒå‡½æ•°ï¼Œæ‰“å°timer1ï¼Œå¹¶å°†promise1.thenå›è°ƒæ”¾å…¥microtaské˜Ÿåˆ—ï¼ŒåŒæ ·çš„æ­¥éª¤æ‰§è¡Œtimer2ï¼Œæ‰“å°timer2ï¼›\n3. è‡³æ­¤ï¼Œtimeré˜¶æ®µæ‰§è¡Œç»“æŸï¼Œevent loopè¿›å…¥ä¸‹ä¸€ä¸ªé˜¶æ®µä¹‹å‰ï¼Œæ‰§è¡Œmicrotaské˜Ÿåˆ—çš„æ‰€æœ‰ä»»åŠ¡ï¼Œä¾æ¬¡æ‰“å°promise1ã€promise2\n\n![node-eventloop](http://cdn.mydearest.cn/blog/images/node-eventloop.png)\n\n### ç»“è®º\n- Nodeç«¯ï¼Œmicrotask åœ¨äº‹ä»¶å¾ªç¯çš„å„ä¸ªé˜¶æ®µä¹‹é—´æ‰§è¡Œ\n```js\nloop.forEach((é˜¶æ®µ) => {\n    é˜¶æ®µå…¨éƒ¨ä»»åŠ¡();\n    nextTickå…¨éƒ¨ä»»åŠ¡();\n    microTaskå…¨éƒ¨ä»»åŠ¡();\n});\nloop = loop.next;\n}\n```\n\n\n- æµè§ˆå™¨ç«¯ï¼Œmicrotask åœ¨äº‹ä»¶å¾ªç¯çš„ macrotask æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œ\n```js\nwhile (true) {\n    å®ä»»åŠ¡é˜Ÿåˆ—.shift();\n    å¾®ä»»åŠ¡é˜Ÿåˆ—å…¨éƒ¨ä»»åŠ¡();\n}\n```\n\n### ç»ƒä¹ é¢˜\n```js\nconsole.log(1)\nsetTimeout(()=>{\n    console.log(2)\n}, 0)\nvar promise = new Promise(function(resolve, reject) {\n    console.log(3)\n    resolve();\n})\npromise.then(function(){\n    console.log(4)\n})\nconsole.log(5)\n// 13542\n\nconsole.log(1)\nsetTimeout(()=>{\n    console.log(2)\n},0)\n\nvar intervalId = setInterval(function(){\n    console.log(3)\n}, 0)\nsetTimeout(function(){\n    console.log(10)\n    new Promise(function(resolve){\n        console.log(11)\n        resolve()\n    }).then(()=>{\n        console.log(12)\n    }).then(()=>{\n        console.log(13)\n        clearInterval(intervalId)\n    })\n}, 0)\nPromise.resolve().then(()=>{\n    console.log(7)\n}).then(()=>{\n    console.log(8)\n})\nconsole.log(9)\n// 1 9 7 8 2 3 10 11 12 13\n\nsetTimeout(()=>{\n    console.log(1)\n}, 0);\n\nnew Promise((resolve, reject)=>{\n    console.log(2);\n    resolve();\n}).then(()=>{\n    console.log(3);\n}).then(()=>{\n    console.log(4);\n});\n\nprocess.nextTick(()=>{\n    console.log(5);\n});\n\nconsole.log(6);\n// 2 6 5 3 4 1\n```\n\n```js\nconsole.log(1);\n\nsetTimeout(()=>{\n    console.log(2);   \n    new Promise((resolve,reject)=>{\n    console.log(3);\n    resolve()\n}).then(res=>{\n    console.log(4); \n})\n})\n\nnew Promise((resolve,reject)=>{\n    resolve()\n}).then(res=>{\n    console.log(5); \n}).then(res=>{\n    console.log(6);\n    \n})\n\nnew Promise((resolve,reject)=>{\n    console.log(7);\n    resolve()\n}).then(res=>{\n    console.log(8); \n}).then(res=>{\n    console.log(9);\n    \n})\n\nsetTimeout(()=>{\n    console.log(10);   \n    new Promise((resolve,reject)=>{\n    console.log(11);\n    resolve()\n}).then(res=>{\n    console.log(12); \n})\n})\n\nconsole.log(13);\n// 1 7 13 5 8 6 9 2 3 4 10 11 12\n```\n\n```js\n\nasync function async1() {\n    console.log('async1 start');\n    await async2();\n    console.log('async1 end');\n}\n\nasync function async2() {\n    console.log('async2');\n}\n\nconsole.log('script start');\n\nsetTimeout(function() {\n    console.log('setTimeout');\n}, 0)\n\nasync1();\n\nnew Promise(function(resolve) {\n    console.log('promise1');\n    resolve();\n}).then(function() {\n    console.log('promise2');\n});\n\nconsole.log('script end');\n\n// script start\n\n// async1 start\n\n// async2\n\n// promise1\n\n// script end\n\n// async1 end\n\n// promise2\n\n// setTimeout\n```\n\n## å‚è€ƒ\n[æµè§ˆå™¨ä¸Nodeçš„äº‹ä»¶å¾ªç¯(Event Loop)æœ‰ä½•åŒºåˆ«?](https://juejin.im/post/5c337ae06fb9a049bc4cd218)\n","tags":["æ·±å…¥ç†è§£"],"categories":["JS"]},{"title":"å‰ç«¯æ¨¡å—åŒ–å‘å±•","url":"%2F2019%2F%E5%89%8D%E7%AB%AF%E6%A8%A1%E5%9D%97%E5%8C%96%E5%8F%91%E5%B1%95.html","content":"\n{% note info %}\n\næ¨¡å—åŒ–å°±æ˜¯å°†ä¸€ä¸ªå¤æ‚çš„ç³»ç»Ÿåˆ†è§£æˆå¤šä¸ªç‹¬ç«‹çš„æ¨¡å—çš„ä»£ç ç»„ç»‡æ–¹å¼ã€‚\n\n{% endnote %}\n\nå‰ç«¯æ¨¡å—åŒ–å‘å±•ä¹‹è·¯ï¼š IIFEï¼ˆè‡ªæ‰§è¡Œå‡½æ•°ï¼‰>>AMD(RequireJSå®ç°)>>CMD(SeaJSå®ç°)>>CommonJS(NodeJs)>>ES6 Modules(æ¨¡å—åŒ–ç›´æ¥æˆä¸ºäº†Javascriptè¯­è¨€è§„èŒƒä¸­çš„ä¸€éƒ¨åˆ†)ã€‚\n\n# ä¸€ã€å‰ç«¯æ¨¡å—åŒ–å‘å±•ç®€ä»‹\n\n## 1.CommonJS(require / module.exports / exports)\n\n2009å¹´ï¼Œç¾å›½ç¨‹åºå‘˜Ryan Dahlåˆ›é€ äº†[node.js](http://nodejs.org/)é¡¹ç›®ï¼Œå°†javascriptè¯­è¨€ç”¨äºæœåŠ¡å™¨ç«¯ç¼–ç¨‹ã€‚è¿™æ ‡å¿—\"Javascriptæ¨¡å—åŒ–ç¼–ç¨‹\"æ­£å¼è¯ç”Ÿã€‚nodeJsä¸­çš„æ¨¡å—ï¼Œä¸€å¾‹ä¸º[CommonJS](https://\nen.wikipedia.org/wiki/CommonJS) æ ¼å¼ã€‚\n\n### 1.1 è¯­æ³•é£æ ¼\n\n```javascript\n//Math.js\nmodule.exports = {\n\t'add': function(a, b) {\n\t\treturn a + b;\n\t}\n}\n```\n\n```javascript\n//main.js\nconst Math = require('./Math');\nconsole.log(Math.add(2, 3));\nconsole.log('done');\n```\n\n![front-module](http://cdn.mydearest.cn/blog/images/front-module.png)\n\n---\n<!--more-->\n\n### 1.2 åŒæ­¥åŠ è½½\n\n### 1.3 åŠ¨æ€åŠ è½½\n\n```javascript\n//main.js\nconst Math = require('./Ma' + 'th');//åŠ¨æ€æ‹¼æ¥\nconsole.log(Math.add(2, 3));\nconsole.log('done');\n```\n\n### 1.4 æµè§ˆå™¨ä¸æ”¯æŒCommonJSè§„èŒƒã€‚\n\næµè§ˆå™¨ä¸å…¼å®¹CommonJSçš„æ ¹æœ¬åŸå› ï¼Œåœ¨äºç¼ºå°‘å››ä¸ªNode.jsç¯å¢ƒçš„å˜é‡ã€‚\n\n- module\n- exports\n- require\n- global\n\nå¯ä»¥ä½¿ç”¨å·¥å…·è¿›è¡Œè½¬æ¢ï¼Œä¾‹å¦‚ï¼š[Browserify](http://browserify.org/)\n\n------\n\n## 2.AMD(require/define)\n\nCommonJSæ˜¯ä¸»è¦ä¸ºäº†JSåœ¨åç«¯çš„è¡¨ç°åˆ¶å®šçš„ï¼Œå®ƒæ˜¯ä¸é€‚åˆå‰ç«¯çš„ã€‚\n\n[AMD](http://github.com/amdjs/amdjs-api/wiki/AMD)æ˜¯\"Asynchronous Module Definition\"çš„ç¼©å†™ï¼Œæ„æ€å°±æ˜¯\"å¼‚æ­¥æ¨¡å—å®šä¹‰\"ã€‚\n\n**RequireJS**å®ç°äº†AMDè§„èŒƒã€‚ä¸‹é¢ä»¥RequireJSä¸ºä¾‹ï¼Œäº†è§£ä¸€ä¸‹AMDè§„èŒƒã€‚\n\n### requireJSåŸç†\n\nrequire.js çš„æ ¸å¿ƒåŸç†æ˜¯é€šè¿‡åŠ¨æ€åˆ›å»º script è„šæœ¬æ¥å¼‚æ­¥å¼•å…¥æ¨¡å—ï¼Œç„¶åå¯¹æ¯ä¸ªè„šæœ¬çš„ load äº‹ä»¶è¿›è¡Œç›‘å¬ï¼Œå¦‚æœæ¯ä¸ªè„šæœ¬éƒ½åŠ è½½å®Œæˆäº†ï¼Œå†è°ƒç”¨å›è°ƒå‡½æ•°ã€‚\n\n### 2.1 è¯­æ³•é£æ ¼\n\n```javascript\n//Math.js\ndefine([], function(){\n    return {\n        'add': function(a, b) {\n\t\t\treturn a + b;\n\t\t}\n    }\n})\n```\n\n```javascript\n//main.js\nrequire.config({\n    paths : {\n        \"math\" : \"Math\"\n    }\n});\nrequire(['math'], function (math) {\n\tconsole.log(math.add(2, 3));\n});\nconsole.log('done');\n//done\n//5\n```\n\n### 2.2 å¼‚æ­¥åŠ è½½\n\n### 2.3 åŠ¨æ€åŠ è½½\n\n### 2.4 ä¾èµ–å‰ç½®ï¼Œæå‰æ‰§è¡Œ\n\n------\n\n## 3.CMD\n\nCMDæ˜¯SeaJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡ºã€‚\n\n### 3.1 è¯­æ³•é£æ ¼\n\n```js\n// CMD\ndefine(function(require, exports, module) {\n    var a = require('./a');\n    a.doSomething();\n    //...\n    var b = require('./b');   // ä¾èµ–å¯ä»¥å°±è¿‘ä¹¦å†™\n    b.doSomething();\n    // ... \n    require.async('./c',function(c){ //æ”¯æŒå¼‚æ­¥åŠ è½½\n        c.doSomething();\n    });\n})\n\n// AMD é»˜è®¤æ¨èçš„æ˜¯\ndefine(['./a', './b'], function(a, b) { // ä¾èµ–å¿…é¡»ä¸€å¼€å§‹å°±å†™å¥½\n    a.doSomething();\n    //...\n    b.doSomething();\n    //...\n}) \n```\n\n### 3.2 AMDå’ŒCMDçš„åŒºåˆ«\n\n1) **å¯¹äºä¾èµ–çš„æ¨¡å—ï¼ŒAMD æ˜¯æå‰æ‰§è¡Œï¼ŒCMD æ˜¯å»¶è¿Ÿæ‰§è¡Œã€‚**ä¸è¿‡ RequireJS ä» 2.0 å¼€å§‹ï¼Œä¹Ÿæ”¹æˆå¯ä»¥å»¶è¿Ÿæ‰§è¡Œï¼ˆæ ¹æ®å†™æ³•ä¸åŒï¼Œå¤„ç†æ–¹å¼ä¸åŒï¼‰ã€‚CMD æ¨å´‡ as lazy as possibleï¼ˆå°½å¯èƒ½çš„æ‡’åŠ è½½ï¼Œä¹Ÿç§°ä¸ºå»¶è¿ŸåŠ è½½ï¼Œå³åœ¨éœ€è¦çš„æ—¶å€™æ‰åŠ è½½ï¼‰ã€‚\n\n2) **CMD æ¨å´‡ä¾èµ–å°±è¿‘ï¼ŒAMD æ¨å´‡ä¾èµ–å‰ç½®ã€‚**è™½ç„¶ AMD ä¹Ÿæ”¯æŒ CMD çš„å†™æ³•ï¼ŒåŒæ—¶è¿˜æ”¯æŒå°† require ä½œä¸ºä¾èµ–é¡¹ä¼ é€’ï¼Œä½† RequireJS çš„ä½œè€…é»˜è®¤æ˜¯æœ€å–œæ¬¢ä¸Šé¢çš„å†™æ³•ï¼Œä¹Ÿæ˜¯å®˜æ–¹æ–‡æ¡£é‡Œé»˜è®¤çš„æ¨¡å—å®šä¹‰å†™æ³•ã€‚\n\n### 3.3 æ¨èé“¾æ¥\n\n[ä¸ RequireJS çš„å¼‚åŒ](<https://github.com/seajs/seajs/issues/277>)\n\n[SeaJSå®˜æ–¹æ–‡æ¡£](https://seajs.github.io/seajs/docs/)\n\n## es6(import/export)\n\n### requireä¸importçš„åŒºåˆ«\n- requireæ”¯æŒ åŠ¨æ€å¯¼å…¥ï¼Œimportä¸æ”¯æŒï¼Œæ­£åœ¨ææ¡ˆ (babel ä¸‹å¯æ”¯æŒ)\n- requireæ˜¯ åŒæ­¥ å¯¼å…¥ï¼Œimportå±äº å¼‚æ­¥ å¯¼å…¥\n- requireæ˜¯ å€¼æ‹·è´ï¼Œå¯¼å‡ºå€¼å˜åŒ–ä¸ä¼šå½±å“å¯¼å…¥å€¼ï¼›importæŒ‡å‘**å†…å­˜åœ°å€**ï¼Œå¯¼å…¥å€¼ä¼šéšå¯¼å‡ºå€¼è€Œå˜åŒ–\n\n# äºŒã€Module\n\nES6ä¸­Moduleçš„ç‰¹ç‚¹\n\n- æµè§ˆå™¨ï¼ŒæœåŠ¡å™¨é€šç”¨\n- é™æ€åŠ è½½\n\n## 1. åŸºæœ¬è¯­æ³•\n\n### 1.1 export\n\nä¸€ä¸ªæ¨¡å—å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ–‡ä»¶ã€‚`export`å…³é”®å­—ç”¨æ¥è¾“å‡ºè¯¥å˜é‡ã€‚å¯ä»¥è¾“å‡ºå˜é‡ï¼Œå‡½æ•°æˆ–ç±»ã€‚\n\n```javascript\n// test.js\nexport var firstName = 'cheng';\nexport var lastName = 'zhang';\nexport var age = 18;\n```\n\n```javascript\n// test.js\nvar firstName = 'cheng';\nvar lastName = 'zhang';\nvar age = 18;\n\nexport { firstName, lastName, age };\n```\n\nå¯ä»¥ä½¿ç”¨`as`ä¸ºè¾“å‡ºå˜é‡é‡å‘½åã€‚\n\n```javascript\nvar firstName = 'cheng';\nvar lastName = 'zhang';\nvar age = 18;\n\nexport {\n\tfirstName as name, \n    lastName as lastname, \n    age\n};\n```\n\néœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œ`export`**å‘½ä»¤è§„å®šçš„æ˜¯å¯¹å¤–çš„æ¥å£**ï¼Œå¿…é¡»ä¸æ¨¡å—å†…éƒ¨çš„å˜é‡å»ºç«‹ä¸€ä¸€å¯¹åº”å…³ç³»ã€‚\n\n```javascript\n// æŠ¥é”™\nexport 1;\n\n// æŠ¥é”™\nvar m = 1;\nexport m;\n```\n\n`export`è¯­å¥è¾“å‡ºçš„æ¥å£ï¼Œä¸å…¶å¯¹åº”çš„å€¼æ˜¯**åŠ¨æ€ç»‘å®šå…³ç³»**ï¼Œå³é€šè¿‡è¯¥æ¥å£ï¼Œå¯ä»¥å–åˆ°æ¨¡å—å†…éƒ¨å®æ—¶çš„å€¼ã€‚\n\n```javascript\nexport var foo = 'bar';\nsetTimeout(() => foo = 'baz', 1000);\n```\n\n`export`å‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äº**æ¨¡å—é¡¶å±‚**å°±å¯ä»¥ã€‚\n\n### 1.2 import\n\nå…¶ä»– JS æ–‡ä»¶é€šè¿‡`import`å‘½ä»¤åŠ è½½æ¨¡å—ã€‚å¤§æ‹¬å·é‡Œé¢çš„å˜é‡åï¼Œå¿…é¡»ä¸è¢«å¯¼å…¥æ¨¡å—ï¼ˆ`test.js`ï¼‰å¯¹å¤–æ¥å£çš„åç§°ç›¸åŒã€‚\n\n```javascript\n// main.js\nimport { firstName, lastName, age } from './test.js';\n\nfunction showName() {\n  console.log(firstName + ' ' + lastName);\n}\n//cheng zhang\n```\n\n`import`å‘½ä»¤è¾“å…¥çš„å˜é‡éƒ½æ˜¯**åªè¯»**çš„ï¼Œå› ä¸ºå®ƒçš„æœ¬è´¨æ˜¯è¾“å…¥æ¥å£ã€‚\n\n```javascript\nimport {a} from './xxx.js'\n\na = {}; // Assignment to constant variable.\n```\n\nå¦‚æœ`a`æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ”¹å†™`a`çš„å±æ€§æ˜¯å…è®¸çš„ã€‚å’Œconstä¸€æ ·ã€‚\n\n```javascript\nimport {a} from './xxx.js'\n\na.foo = 'hello'; // åˆæ³•æ“ä½œ\n```\n\nå¯ä»¥ç”¨æ˜Ÿå·ï¼ˆ`*`ï¼‰æŒ‡å®šä¸€ä¸ªå¯¹è±¡ï¼Œè¿›è¡Œæ•´ä½“åŠ è½½ã€‚\n\n```javascript\n// main.js\nimport * as test from './test.js';\n\nfunction showName() {\n  console.log(test.firstName + ' ' + test.lastName);\n}\n//cheng zhang\n\ntest.lastName = 'yun';\n//Cannot assign to read only property 'lastName' of object '[object Module]'\n//å¦‚æœæ˜¯å¯¹è±¡ï¼Œå¯ä»¥ä¿®æ”¹å¯¹è±¡çš„å±æ€§ã€‚\n```\n\n`import`å‘½ä»¤**å…·æœ‰æå‡æ•ˆæœ**ï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œã€‚\n\n```javascript\nfoo();\n\nimport { foo } from 'my_module';\n```\n\nç”±äº`import`æ˜¯é™æ€æ‰§è¡Œï¼Œæ‰€ä»¥**ä¸èƒ½ä½¿ç”¨è¡¨è¾¾å¼å’Œå˜é‡**ã€‚\n\n```javascript\n// æŠ¥é”™\nimport { 'f' + 'oo' } from 'my_module';\n```\n\n`import`è¯­å¥**ä¼šæ‰§è¡Œæ‰€åŠ è½½çš„æ¨¡å—**ï¼Œå› æ­¤å¯ä»¥æœ‰ä¸‹é¢çš„å†™æ³•ã€‚ä»…ä»…æ‰§è¡Œ`lodash`æ¨¡å—ï¼Œä½†æ˜¯ä¸è¾“å…¥ä»»ä½•å€¼ã€‚\n\n```javascript\nimport 'lodash';\n```\n\nå³ä½¿åŠ è½½å¤šæ¬¡ï¼Œä¹Ÿåªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ`import`è¯­å¥æ˜¯ **Singleton æ¨¡å¼**ã€‚\n\n### 1.3 å•ä¾‹æ¨¡å¼è§£è¯»\n\n```javascript\n//counter.js\nexport let counter = 1;\nexport function addCounter(){\n    counter++;\n}\naddCounter();\n```\n\n```javascript\n//main.js\nimport {counter, addCounter} from './counter';\nconsole.log('main:' + counter);\naddCounter();\nconsole.log('main:' + counter);\n\n//main:2\n//main:3\n```\n```html\n<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<title>module test</title>\n\t\t<script type=\"module\" src='main.js'></script>\n\t\t<script type=\"module\" src='main2.js'></script>\n\t</head>\n</html>\n```\n\n```javascript\n//main2.js\nimport {counter, addCounter} from './counter';\nconsole.log('main2:' + counter);\naddCounter();\nconsole.log('main2:' + counter);\n\n//main2:3\n//main2:4\n```\n\n### 1.4 export default\n\nä½¿ç”¨`export default`å¯ä»¥ä¸ç”¨å…³æ³¨è¾“å‡ºæ¨¡å—ä¸­çš„å˜é‡åã€‚\n\n```javascript\n// export-default.js\nexport default function () {\n  console.log('foo');\n}\n```\n\n```javascript\n// import-default.js\nimport customName from './export-default';\ncustomName(); // 'foo'\n```\n\n`import`å‘½ä»¤å¯ä»¥ä¸ºè¯¥åŒ¿åå‡½æ•°æŒ‡å®šä»»æ„åå­—ã€‚`import`å‘½ä»¤åé¢ï¼Œä¸ä½¿ç”¨å¤§æ‹¬å·ã€‚\n\n```javascript\n// export-default.js\nfunction foo() {\n  console.log('foo');\n}\n\nexport default foo;\n```\n\n`export default`çš„æœ¬è´¨ï¼Œå°±æ˜¯è¾“å‡ºä¸€ä¸ªå«åš`default`çš„å˜é‡æˆ–æ–¹æ³•ã€‚\n\n`imort something from ..`.çš„æœ¬è´¨ï¼Œå°±æ˜¯`import {default as something} from ...`\n\n```javascript\n// æ­£ç¡®\nexport var a = 1;\n\n// æ­£ç¡®\nvar a = 1;\nexport default a;\n\n// é”™è¯¯\nexport default var a = 1;\n```\n\n```javascript\n// æ­£ç¡®\nexport default 42;\n\n// æŠ¥é”™\nexport 42;\n```\n\næ‰€ä»¥`export default`æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„æ–¹æ³•ï¼š\n\n```javascript\n// MyClass.js\nexport default class { ... }\n\n// main.js\nimport MyClass from 'MyClass';\nlet o = new MyClass();\n```\n\n### 1.5 import&exportæ··åˆä½¿ç”¨\n\n```javascript\nexport { foo, bar } from 'my_module';\n\n// å¯ä»¥ç®€å•ç†è§£ä¸º\nimport { foo, bar } from 'my_module';\nexport { foo, bar };\n```\n\nä¸Šé¢ä»£ç ä¸­ï¼Œ`export`å’Œ`import`è¯­å¥å¯ä»¥ç»“åˆåœ¨ä¸€èµ·ï¼Œå†™æˆä¸€è¡Œã€‚ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå†™æˆä¸€è¡Œä»¥åï¼Œ`foo`å’Œ`bar`**å®é™…ä¸Šå¹¶æ²¡æœ‰è¢«å¯¼å…¥å½“å‰æ¨¡å—**ï¼Œåªæ˜¯ç›¸å½“äºå¯¹å¤–è½¬å‘äº†è¿™ä¸¤ä¸ªæ¥å£ï¼Œå¯¼è‡´**å½“å‰æ¨¡å—ä¸èƒ½ç›´æ¥ä½¿ç”¨**`foo`å’Œ`bar`ã€‚\n\n```javascript\n// æ¥å£æ”¹å\nexport { fooName as newName } from 'my_module';\n\n//å…·åæ¥å£æ”¹ä¸ºé»˜è®¤æ¥å£\nexport { foo as default } from './someModule';\n\n//æ¥å£ä¹Ÿå¯ä»¥æ”¹åä¸ºå…·åæ¥å£\nexport { default as es6 } from './someModule';\n```\n\n### 1.6 æ¨¡å—çš„ç»§æ‰¿\n\n```javascript\n//calculator.js\nexport function add(a, b) {\n  return a + b;\n}\n```\n\n```javascript\n//calculatorPlus.js\nexport * from './calculator.js';\nexport function multiply(a, b) {\n  return a * b;\n}\n```\n\n```javascript\n//main.js\nimport * as cal from './calculatorPlus.js';\n\ncal.add(2, 3);//5\ncal.multiply(2, 3);//6\n```\n\n### 1.7 import()\n\n`import()`ææ¡ˆæ˜¯ä¸ºäº†è§£å†³`import`**åŠ¨æ€åŠ è½½**ï¼Œå’Œ**ä¸èƒ½å†™åœ¨ä»£ç å—ä¸­**çš„é—®é¢˜ã€‚\n\n```javascript\nimport(a + '.js')\n.then(...);\n      \nimport(f())\n.then(...);\n```\n\n```javascript\nif (condition) {\n  import('moduleA').then(...);\n} else {\n  import('moduleB').then(...);\n}\n```\n\n## 2. Moduleè¡¥å……\n\n### 2.1 æµè§ˆå™¨åŠ è½½\n\nhtmlä¸­åŠ è½½ ES6 æ¨¡å—ï¼Œä¹Ÿä½¿ç”¨`<script>`æ ‡ç­¾ï¼Œä½†æ˜¯è¦åŠ å…¥`type=\"module\"`å±æ€§ã€‚\n\n```html\n<script type=\"module\" src=\"./myModule.js\"></script>\n<!--ç­‰åŒäº-->\n<script type=\"module\" src=\"./myModule.js\" defer></script>\n\n<script type=\"module\" src=\"./myModule.js\" async></script>\n```\n\n- `defer`:è¦ç­‰åˆ°æ•´ä¸ªé¡µé¢åœ¨å†…å­˜ä¸­æ­£å¸¸æ¸²æŸ“ç»“æŸï¼ˆDOM ç»“æ„å®Œå…¨ç”Ÿæˆï¼Œä»¥åŠå…¶ä»–è„šæœ¬æ‰§è¡Œå®Œæˆï¼‰ï¼Œæ‰ä¼šæ‰§è¡Œã€‚ä¿è¯æ‰§è¡Œé¡ºåºã€‚\n\n- `async`:ä¸€æ—¦ä¸‹è½½å®Œï¼Œæ¸²æŸ“å¼•æ“å°±ä¼šä¸­æ–­æ¸²æŸ“ï¼Œæ‰§è¡Œè¿™ä¸ªè„šæœ¬ä»¥åï¼Œå†ç»§ç»­æ¸²æŸ“ã€‚ä¸èƒ½ä¿è¯æ‰§è¡Œé¡ºåºã€‚\n\nå¯¹äºå¤–éƒ¨çš„æ¨¡å—è„šæœ¬ï¼Œè¦æ³¨æ„ï¼š\n\n- ä»£ç æ˜¯åœ¨æ¨¡å—ä½œç”¨åŸŸä¹‹ä¸­è¿è¡Œï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸè¿è¡Œã€‚æ¨¡å—å†…éƒ¨çš„é¡¶å±‚å˜é‡ï¼Œå¤–éƒ¨ä¸å¯è§ã€‚\n- æ¨¡å—è„šæœ¬è‡ªåŠ¨é‡‡ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä¸ç®¡æœ‰æ²¡æœ‰å£°æ˜`use strict`ã€‚\n- æ¨¡å—ä¹‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨`import`å‘½ä»¤åŠ è½½å…¶ä»–æ¨¡å—ï¼ˆ`.js`åç¼€ä¸å¯çœç•¥ï¼Œéœ€è¦æä¾›ç»å¯¹ URL æˆ–ç›¸å¯¹ URLï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨`export`å‘½ä»¤è¾“å‡ºå¯¹å¤–æ¥å£ã€‚\n- **æ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„`this`å…³é”®å­—è¿”å›`undefined`ï¼Œè€Œä¸æ˜¯æŒ‡å‘`window`ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ¨¡å—é¡¶å±‚ä½¿ç”¨`this`å…³é”®å­—ï¼Œæ˜¯æ— æ„ä¹‰çš„**ã€‚\n- åŒä¸€ä¸ªæ¨¡å—å¦‚æœåŠ è½½å¤šæ¬¡ï¼Œå°†åªæ‰§è¡Œä¸€æ¬¡ã€‚\n\n### 2.2 å¾ªç¯åŠ è½½\n\n```javascript\n// a.js\nimport {bar} from './b';\nconsole.log('a.js');\nconsole.log(bar);\nexport let foo = 'foo';\n```\n\n```javascript\n// b.js\nimport {foo} from './a';\nconsole.log('b.js');\nconsole.log(foo);\nexport let bar = 'bar';\n```\n\n```html\n<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<title>module test</title>\n\t\t<script type=\"module\" src='a.js'></script>\n\t</head>\n</html>\n<!--Cannot access 'foo' before initialization-->\n```\n\n------\n\n```javascript\n// a.js\nimport {bar} from './b';\nconsole.log('a.js');\nconsole.log(bar());\nfunction foo() { return 'foo' }\nexport {foo};\n```\n\n```javascript\n// b.js\nimport {foo} from './a';\nconsole.log('b.js');\nconsole.log(foo());\nfunction bar() { return 'bar' }\nexport {bar};\n```\n\n```javascript\n//b.mjs\n//foo\n//a.mjs\n//bar\n```\n\nå› ä¸ºå‡½æ•°å…·æœ‰æå‡ä½œç”¨ã€‚\n\n### 2.3 ES6æ¨¡å—å’ŒCommonJSæ¨¡å—çš„å·®å¼‚\n\n1. `import`å’Œ`export`æ˜¯å…³é”®å­—ï¼Œ`require`ä¸æ˜¯ã€‚\n\n2. CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚(è¯¦æƒ…è§ä¸Šæ–¹ã€å•ä¾‹æ¨¡å¼è§£è¯»ã€‘)\n\n3. CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ã€‚\n             å› ä¸º CommonJS åŠ è½½çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆå³`module.exports`å±æ€§ï¼‰ï¼Œè¯¥å¯¹è±¡åªæœ‰åœ¨è„šæœ¬è¿è¡Œå®Œæ‰ä¼šç”Ÿæˆã€‚è€Œ ES6 æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œå®ƒçš„å¯¹å¤–æ¥å£åªæ˜¯ä¸€ç§é™æ€å®šä¹‰ï¼Œåœ¨ä»£ç é™æ€è§£æé˜¶æ®µå°±ä¼šç”Ÿæˆã€‚\n\n          ```javascript\n          //counter.js\n          let counter = 2;\n          function addCounter(){\n              counter++;\n          }\n          addCounter();\n          module.exports = {\n              counter,\n              addCounter: addCunter\n          }\n          ```\n\n          ```javascript\n          //main.js\n          var counter = require('./addCounter.js');\n\n          console.log('main:' + counter.counter);//3\n          counter.addCounter();\n          console.log('main:' + counter.counter);//3\n          ```\n4. **`this`æŒ‡å‘ä¸åŒ**ã€‚ES6 æ¨¡å—ä¹‹ä¸­ï¼Œé¡¶å±‚çš„`this`æŒ‡å‘`undefined`ï¼›CommonJS æ¨¡å—çš„é¡¶å±‚`this`æŒ‡å‘å½“å‰æ¨¡å—ï¼Œè¿™æ˜¯ä¸¤è€…çš„ä¸€ä¸ªé‡å¤§å·®å¼‚ã€‚\n","tags":["æ¨¡å—åŒ–"],"categories":["çŸ¥è¯†"]},{"title":"PWAæ‰‹è®°","url":"%2F2019%2FPWA%E6%89%8B%E8%AE%B0.html","content":"\nPWAä½œä¸º2018æœ€ç«çƒ­çš„æŠ€æœ¯æ¦‚å¿µä¹‹ä¸€ï¼Œå¯¹æå‡Webåº”ç”¨çš„å®‰å…¨ã€æ€§èƒ½å’Œä½“éªŒæœ‰ç€å¾ˆå¤§çš„æ„ä¹‰ï¼Œéå¸¸å€¼å¾—æˆ‘ä»¬å»äº†è§£ä¸å­¦ä¹ ã€‚\n\nPWAæ˜¯Progressive Web Appçš„è‹±æ–‡ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯æ¸è¿›å¼å¢å¼ºWEBåº”ç”¨ã€‚ç›®çš„å°±æ˜¯åœ¨ç§»åŠ¨ç«¯åˆ©ç”¨æä¾›çš„æ ‡å‡†åŒ–æ¡†æ¶ï¼Œåœ¨ç½‘é¡µåº”ç”¨ä¸­å®ç°å’ŒåŸç”Ÿåº”ç”¨ç›¸è¿‘çš„ç”¨æˆ·ä½“éªŒã€‚\n\nä¸€ä¸ª PWA åº”ç”¨é¦–å…ˆæ˜¯ä¸€ä¸ªç½‘é¡µ, å¯ä»¥é€šè¿‡ Web æŠ€æœ¯ç¼–å†™å‡ºä¸€ä¸ªç½‘é¡µåº”ç”¨. éšåæ·»åŠ ä¸Š App Manifest å’Œ Service Worker æ¥å®ç° PWA çš„\n\nå®‰è£…å’Œç¦»çº¿ç­‰åŠŸèƒ½ã€‚\n\næˆ‘ä»¬éœ€è¦ç†è§£çš„æ˜¯ï¼ŒPWAä¸æ˜¯æŸä¸€é¡¹æŠ€æœ¯ï¼Œæˆ–è€…æŸä¸€ä¸ªæ–°çš„äº§ç‰©ï¼›è€Œæ˜¯ä¸€ç³»åˆ—WebæŠ€æœ¯ä¸æ ‡å‡†çš„é›†åˆä¸åº”ç”¨ã€‚é€šè¿‡åº”ç”¨è¿™äº›æ–°çš„æŠ€æœ¯ä¸æ ‡å‡†ï¼Œå¯ä»¥ä»å®‰\n\nå…¨ã€æ€§èƒ½å’Œä½“éªŒä¸‰ä¸ªæ–¹é¢ï¼Œä¼˜åŒ–æˆ‘ä»¬çš„Web Appã€‚æ‰€ä»¥ï¼Œå…¶å®PWAæœ¬è´¨ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ªWeb Appã€‚\n---\n<!--more-->\n\n## æ ¸å¿ƒæŠ€æœ¯\n\n- Service Worker ï¼ˆå¯ä»¥ç†è§£ä¸ºæœåŠ¡å·¥å‚ï¼‰\n\n- Manifest ï¼ˆåº”ç”¨æ¸…å•ï¼‰\n\n- Push Notificationï¼ˆæ¨é€é€šçŸ¥ï¼‰\n\n## service worker (web worker)\n- ä¸€ä¸ªç‹¬ç«‹çš„ worker çº¿ç¨‹ï¼Œç‹¬ç«‹äºå½“å‰ç½‘é¡µè¿›ç¨‹ï¼Œæœ‰è‡ªå·±ç‹¬ç«‹çš„ worker contextã€‚\n- ä¸€æ—¦è¢« installï¼Œå°±æ°¸è¿œå­˜åœ¨ï¼Œé™¤éè¢« uninstall\n- éœ€è¦çš„æ—¶å€™å¯ä»¥ç›´æ¥å”¤é†’ï¼Œä¸éœ€è¦çš„æ—¶å€™è‡ªåŠ¨ç¡çœ ï¼ˆæœ‰æ•ˆåˆ©ç”¨èµ„æºï¼‰\n- å¯ç¼–ç¨‹æ‹¦æˆªä»£ç†è¯·æ±‚å’Œè¿”å›ï¼Œç¼“å­˜æ–‡ä»¶ï¼Œç¼“å­˜çš„æ–‡ä»¶å¯ä»¥è¢«ç½‘é¡µè¿›ç¨‹å–åˆ°ï¼ˆåŒ…æ‹¬ç½‘ç»œç¦»çº¿çŠ¶æ€ï¼‰\n- ä¸èƒ½ç›´æ¥æ“ä½œDOMå‡ºäºå®‰å…¨çš„è€ƒè™‘ï¼Œå¿…é¡»åœ¨ HTTPS ç¯å¢ƒä¸‹æ‰èƒ½å·¥ä½œ\n- å¼‚æ­¥å®ç°ï¼Œå†…éƒ¨å¤§éƒ½æ˜¯é€šè¿‡ Promise å®ç°\n\nweb worker\nweb worker  æ˜¯è¿è¡Œåœ¨åå°çš„JavaScriptï¼Œç‹¬ç«‹äºå…¶ä»–è„šæœ¬ï¼Œä¸ä¼šå½±å“é¡µé¢çš„æ€§èƒ½ã€‚\n\nåº”ç”¨åœºæ™¯ï¼šå¤„ç†å¯†é›†å‹æ•°å­¦è®¡ç®—ã€å¤§æ•°æ®é›†æ’åºã€æ•°æ®å¤„ç†(å‹ç¼©ã€éŸ³é¢‘åˆ†æã€å›¾åƒå¤„ç†ç­‰)ã€é«˜æµé‡ç½‘ç»œé€šä¿¡\n\næµè§ˆå™¨ä¸€èˆ¬æœ‰ä¸‰ç±» web Worker\n\n- Dedicated Worker ï¼šä¸“ç”¨çš„ workerï¼Œåªèƒ½è¢«åˆ›å»ºå®ƒçš„ JS è®¿é—®ï¼Œåˆ›å»ºå®ƒçš„é¡µé¢å…³é—­ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸå°±ç»“æŸäº†ã€‚\n\n- Shared  Worker ï¼šå…±äº«çš„ workerï¼Œå¯ä»¥è¢«åŒä¸€åŸŸåä¸‹çš„ JS è®¿é—®ï¼Œå…³è”çš„é¡µé¢éƒ½å…³é—­æ—¶ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸå°±ç»“æŸäº†ã€‚\n\n- Service Worker ï¼šæ˜¯äº‹ä»¶é©±åŠ¨çš„ workerï¼Œç”Ÿå‘½å‘¨æœŸä¸é¡µé¢æ— å…³ï¼Œå…³è”é¡µé¢æœªå…³é—­æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥é€€å‡ºï¼Œæ²¡æœ‰å…³è”é¡µé¢æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥å¯åŠ¨ã€‚SW ä½œç”¨äºæµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´ï¼Œç›¸å½“äºä¸€ä¸ªä»£ç†æœåŠ¡å™¨ã€‚\n\n### Service Workerç”Ÿå‘½å‘¨æœŸ \nçœ‹æˆçº¢ç»¿ç¯\nçº¢ ä¸‹è½½å’Œè§£æ\né»„ æ­£åœ¨æ‰§è¡Œ è¿˜æ²¡å‡†å¤‡å¥½\nç»¿ éšæ—¶å¯ä½¿ç”¨\nä¸”ç¬¬ä¸€æ¬¡åŠ è½½é¡µé¢ swè¿˜æ²¡æœ‰æ¿€æ´» ä¸ä¼šå¤„ç†ä»»ä½•è¯·æ±‚ åªæœ‰å®‰è£…å’Œæ¿€æ´»åæ‰èƒ½ä½¿ç”¨ã€‚ï¼ˆåˆ·æ–°é¡µé¢å’Œè·³è½¬æ–°é¡µé¢æ‰ä¼šç”Ÿæ•ˆï¼‰\n\n- æ­¥éª¤\n1. ç”¨æˆ·å¯¼èˆªåˆ°url\n2. æ³¨å†Œsw è¿‡ç¨‹ä¸­æµè§ˆå™¨ä¸‹è½½è§£ææ‰§è¡Œsw\n3. ä¸€æ—¦æ‰§è¡Œæ¿€æ´»å®‰è£…æ—¶é—´\n4. å®‰è£…æˆåŠŸå°±å¯ä»¥æ§åˆ¶å®¢æˆ·ç«¯åŠŸèƒ½äº‹ä»¶\n\n### å…¨å±€å˜é‡\n- self: è¡¨ç¤º Service Worker ä½œç”¨åŸŸ, ä¹Ÿæ˜¯å…¨å±€å˜é‡\nSW çš„é»˜è®¤ä½œç”¨åŸŸä¸ºåŸºäºå½“å‰æ–‡ä»¶ URL çš„ ./ã€‚æ„æ€å°±æ˜¯å¦‚æœä½ åœ¨//example.com/foo/bar.jsé‡Œæ³¨å†Œäº†ä¸€ä¸ª SWï¼Œé‚£ä¹ˆå®ƒé»˜è®¤çš„ä½œç”¨åŸŸä¸º //example.com/foo/ã€‚\n\né€šè¿‡æŸ¥çœ‹navigator.serviceWorker.controlleræ˜¯å¦ä¸º null æ¥æŸ¥çœ‹ä¸€ä¸ªclientæ˜¯å¦è¢« SW æ§åˆ¶ã€‚\n- caches: è¡¨ç¤ºç¼“å­˜\n- skipWaiting: è¡¨ç¤ºå¼ºåˆ¶å½“å‰å¤„åœ¨ waiting çŠ¶æ€çš„è„šæœ¬è¿›å…¥ activate çŠ¶æ€ï¼ˆä¸ºäº†åœ¨é¡µé¢æ›´æ–°çš„è¿‡ç¨‹å½“ä¸­ï¼Œæ–°çš„ SW è„šæœ¬èƒ½å¤Ÿç«‹åˆ»æ¿€æ´»å’Œç”Ÿæ•ˆã€‚æ— éœ€åˆ·æ–°æˆ–è€…è·³è½¬æ–°é¡µé¢ã€‚ï¼‰\n- clients: è¡¨ç¤º Service Worker æ¥ç®¡çš„é¡µé¢\n- clients.claim() åœ¨ activate äº‹ä»¶å›è°ƒä¸­æ‰§è¡Œè¯¥æ–¹æ³•è¡¨ç¤ºå–å¾—é¡µé¢çš„æ§åˆ¶æƒ, è¿™æ ·ä¹‹åæ‰“å¼€é¡µé¢éƒ½ä¼šä½¿ç”¨ç‰ˆæœ¬æ›´æ–°çš„ç¼“å­˜ã€‚æ—§çš„ Service Worker è„šæœ¬ä¸å†æ§åˆ¶ç€é¡µé¢ï¼Œä¹‹åä¼šè¢«åœæ­¢ã€‚\n\n### Service Worker æ³¨å†Œ\n```js\n// æ£€æŸ¥å½“å‰æµè§ˆå™¨æ˜¯å¦æ”¯æŒsw\nif ('serviceWorker' in navigator) {\n    // å¦‚æœæ”¯æŒå¼€å§‹æ³¨å†Œsw\n    navigator.serviceWorker\n        .register('./service-worker.js')\n        .then(registration => { \n            console,log('æ³¨å†ŒæˆåŠŸ', registration)\n            // æ¶ˆæ¯æ¨é€ è·å–æˆæƒ\n            // Notification.requestPermission(function(result) {\n            //         console.log('result', result)\n            //         if (result === 'granted') {\n            //             registration.showNotification('Vibration Sample', {\n            //                 body: 'Buzz! Buzz!',\n            //                 icon: './img/mario.png',\n            //                 vibrate: [200, 100, 200, 100, 200, 100, 200],\n            //                 tag: 'vibration-sample'\n            //             });\n            //         } else {\n            //             alert(result);\n            //         }     \n            // });\n            // æ‰‹åŠ¨æ›´æ–°\n            // registration.update();\n        })\n        .catch(err => console.log('æ³¨å†Œå¤±è´¥',err));\n}\n// æŸ¥çœ‹æ˜¯å¦æ³¨å†ŒæˆåŠŸå¯ä»¥åœ¨ PC ä¸Šchrome æµè§ˆå™¨, è¾“å…¥ chrome://inspect/#service-workers\n```\n\n### Service Worker å®‰è£…ï¼ˆå¤„ç†é™æ€ç¼“å­˜ï¼‰\n\n1. è¿™ä¸ªçŠ¶æ€å‘ç”Ÿåœ¨ Service Worker æ³¨å†Œä¹‹åï¼Œæ˜¯ sw è§¦å‘çš„ç¬¬ä¸€ä¸ªäº‹ä»¶å¹¶ä¸”åªè§¦å‘ä¸€æ¬¡ã€‚è¡¨ç¤ºå¼€å§‹å®‰è£…ï¼Œè§¦å‘ install äº‹ä»¶å›è°ƒæŒ‡å®šä¸€äº›é™æ€èµ„æºè¿›è¡Œç¦»çº¿ç¼“å­˜ã€‚ä¿®æ”¹ä½ çš„ SW åï¼Œæµè§ˆå™¨ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ–°çš„ SWï¼Œä»è€Œä¼šå†è§¦å‘è¿™ä¸ªæ–° SW çš„installäº‹ä»¶ã€‚\n\n2. e.waitUntil() ä¼ å…¥ä¸€ä¸ª Promise ä¸ºå‚æ•°ï¼Œç­‰åˆ°è¯¥ Promise ä¸º resolve çŠ¶æ€ä¸ºæ­¢ã€‚å¦‚æœ Promise è¢«æ‹’ç»ï¼Œåˆ™å®‰è£…å¤±è´¥ï¼ŒSWä¼šè¿›å…¥ Redundantï¼ˆ åºŸå¼ƒ ï¼‰çŠ¶æ€ã€‚ç¡®ä¿ Service Worker ä¸ä¼šåœ¨ waitUntil() é‡Œé¢çš„ä»£ç æ‰§è¡Œå®Œæ¯•ä¹‹å‰å®‰è£…å®Œæˆã€‚\n\n3. sw åœ¨å®‰è£…æˆåŠŸå’Œæ¿€æ´»ä¹‹å‰ä¸ä¼šè§¦å‘ä»»ä½•çš„ fetch æˆ– push ç­‰äº‹ä»¶ã€‚\n\n4. é»˜è®¤æƒ…å†µä¸‹ï¼Œé¡µé¢çš„è¯·æ±‚ï¼ˆfetchï¼‰ä¸ä¼šé€šè¿‡ SWï¼Œé™¤éå®ƒæœ¬èº«æ˜¯é€šè¿‡ SW è·å–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å®‰è£… SW ä¹‹åï¼Œéœ€è¦åˆ·æ–°é¡µé¢æ‰èƒ½æœ‰æ•ˆæœã€‚\n\n5. clients.claim()å¯ä»¥æ”¹å˜è¿™ç§é»˜è®¤è¡Œä¸ºã€‚\n\nlocalStorage çš„ç”¨æ³•å’Œ Service Worker cache çš„ç”¨æ³•å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯ç”±äº localStorage æ˜¯åŒæ­¥çš„ç”¨æ³•ï¼Œæ‰€ä»¥ä¸å…è®¸åœ¨ Service Worker ä¸­ä½¿ç”¨ã€‚ IndexedDB ä¹Ÿå¯ä»¥åœ¨ Service Worker å†…åšæ•°æ®å­˜å‚¨ã€‚\n\n```js\n// é¦–å…ˆå®šä¹‰éœ€è¦ç¼“å­˜çš„è·¯å¾„, ä»¥åŠéœ€è¦ç¼“å­˜çš„é™æ€æ–‡ä»¶çš„åˆ—è¡¨ã€‚\nvar cacheName = 'minimal-pwa-1'\n\nvar cacheList = [\n  '/',\n  \"index.html\",\n  \"main.css\",\n  \"e.png\"\n]\nself.addEventListener('install', e => {\n    console.log(\"å®‰è£…äº‹ä»¶ï¼Œæ³¨å†Œåè§¦å‘åªè§¦å‘ä¸€æ¬¡\");\n    e.waitUntil(\n        // ä½¿ç”¨æŒ‡å®šçš„ç¼“å­˜åæ¥æ‰“å¼€ç¼“å­˜\n        caches.open(cacheName)\n            .then(cache => {\n                console.log(\"åŠ å…¥ç¼“å­˜\", cacheList);\n                return cache.addAll(cacheList);\n            })\n            // å¯åŠ \n            .then(() => {\n                console.log('è·³è¿‡ç­‰å¾…')\n                return self.skipWaiting()\n            })\n    );\n});\n// self.oninstall = e => {}\n```\n\n###  Service Worker æ¿€æ´»ï¼ˆæ›´æ–°ç¼“å­˜ï¼‰\n\nåœ¨è¿™ä¸ªçŠ¶æ€ä¸‹æ²¡æœ‰è¢«å…¶ä»–çš„ Service Worker æ§åˆ¶çš„å®¢æˆ·ç«¯ï¼Œå…è®¸å½“å‰çš„ worker å®Œæˆå®‰è£…ï¼Œå¹¶ä¸”æ¸…é™¤äº†å…¶ä»–çš„ worker ä»¥åŠå…³è”ç¼“å­˜çš„æ—§ç¼“å­˜èµ„æºï¼Œç­‰å¾…æ–°çš„ Service Worker çº¿ç¨‹è¢«æ¿€æ´»ã€‚\n\n```js\n// æ¿€æ´» ç¼“å­˜æ›´æ–°\nself.addEventListener('activate', e => {\n    console.log('[ServiceWorker] Activate');\n    e.waitUntil(\n        caches.keys()\n            .then(keyList => Promise.all(keyList.map(key => {\n                if (key !== cacheName) {\n                    console.log('ç§»é™¤æ—§ç¼“å­˜', key);\n                    return caches.delete(key);\n                }\n            })))\n            // å¯åŠ \n            .then(() => {\n            return self.clients.matchAll()\n                .then(clients => {\n                if (clients && clients.length) {\n                    clients.forEach((v,i) => {\n                        // å‘é€å­—ç¬¦ä¸²'sw.update'\n                        v.postMessage('sw '+i+' update')\n                    })\n                }\n                })\n            })\n            // return self.clients.claim();\n    );\n    // return self.clients.claim();\n});\n```\n\n### å·²æ¿€æ´» ï¼ˆactivatedï¼‰\n\nåœ¨è¿™ä¸ªçŠ¶æ€ä¼šå¤„ç† activate äº‹ä»¶å›è°ƒ (æä¾›äº†æ›´æ–°ç¼“å­˜ç­–ç•¥çš„æœºä¼š)ã€‚å¹¶å¯ä»¥å¤„ç†åŠŸèƒ½æ€§çš„äº‹ä»¶ fetch (è¯·æ±‚)ã€ sync (åå°åŒæ­¥)ã€ push (æ¨é€)ã€‚\n\n### åºŸå¼ƒ ï¼ˆredunantï¼‰\n\nè¿™ä¸ªçŠ¶æ€è¡¨ç¤ºä¸€ä¸ª Service Worker çš„ç”Ÿå‘½å‘¨æœŸç»“æŸã€‚\n\nè¿™é‡Œç‰¹åˆ«è¯´æ˜ä¸€ä¸‹ï¼Œè¿›å…¥åºŸå¼ƒ (redundant) çŠ¶æ€çš„åŸå› å¯èƒ½ä¸ºè¿™å‡ ç§ï¼š\n\n- å®‰è£… (installing) å¤±è´¥\n\n- æ¿€æ´» (activating) å¤±è´¥\n\n- æ–°ç‰ˆæœ¬çš„ Service Worker æ›¿æ¢äº†å®ƒå¹¶æˆä¸ºæ¿€æ´»çŠ¶æ€\n\n### å¤„ç†åŠ¨æ€ç¼“å­˜\nç›‘å¬æ•è· fetch äº‹ä»¶ï¼Œåœ¨ caches ä¸­å» match äº‹ä»¶çš„ request ï¼Œå¦‚æœ response ä¸ä¸ºç©ºçš„è¯å°±è¿”å› response ï¼Œæœ€åè¿”å› fetch è¯·æ±‚ï¼Œåœ¨ fetch äº‹ä»¶ä¸­æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç”Ÿæˆ response è¿”å›ç»™é¡µé¢ã€‚\n```js\n// æ•è·è¯·æ±‚\nself.addEventListener('fetch', e => {\n    console.log('fetchäº‹ä»¶', e.request.url);\n    e.respondWith(\n        caches.match(e.request)\n            .then(response => response || fetch(e.request))\n    );\n    // e.respondWith(\n    //     caches.match(e.request)\n    //         .then(response => {\n    //             if(response) {\n    //                 return response; // || fetch(e.request)\n    //             }\n    //             // æ–°çš„å†…å®¹æ·»åŠ åˆ°ç¼“å­˜ä¸­\n    //             // å¤åˆ¶è¯·æ±‚ è¯·æ±‚æ˜¯ä¸€ä¸ªæµ åªèƒ½ä½¿ç”¨ä¸€æ¬¡\n    //             var requestToCache = e.request.clone();\n    //             return fetch(requestToCache).then(function(response){\n    //                 if(!response || response.status !==200) {\n    //                     // é”™è¯¯ä¿¡æ¯ç«‹å³è¿”å›\n    //                     return response;\n    //                 }\n    //                 var responseToCache = response.clone();\n    //                 // å°†å“åº”æ·»åŠ åˆ°ç¼“å­˜ä¸­\n    //                 caches.open(cacheName).then(function (cache){\n    //                     cache.put(requestToCache, responseToCache);\n    //                 })\n    //             })\n    //         }) \n    // );\n\n    // è‡ªå®šä¹‰å“åº”\n    // e.respondWith(new Response('<p>it is a response</p>', {\n    //     headers:{\n    //         'Content-Type': 'text/html'\n    //     }\n    // }))\n});\n```\n\né€šè¿‡å­˜æ”¾åˆ° Cache Storage ä¸­ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è®¿é—®çš„æ—¶å€™å¦‚æœæ˜¯å¼±ç½‘æˆ–è€…æ–­ç½‘çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥ä¸èµ°ç½‘ç»œè¯·æ±‚ï¼Œè€Œç›´æ¥å°±èƒ½å°†æœ¬åœ°ç¼“å­˜çš„å†…å®¹å±•ç¤ºç»™ç”¨æˆ·ï¼Œä¼˜åŒ–ç”¨æˆ·çš„å¼±ç½‘åŠæ–­ç½‘ä½“éªŒã€‚\n\nä¸¤ç§æ–¹å¼çš„æ¯”è¾ƒ\n\n- on install çš„ä¼˜ç‚¹æ˜¯ç¬¬äºŒæ¬¡è®¿é—®å³å¯ç¦»çº¿ï¼Œç¼ºç‚¹æ˜¯éœ€è¦å°†éœ€è¦ç¼“å­˜çš„ URL åœ¨ç¼–è¯‘æ—¶æ’å…¥åˆ°è„šæœ¬ä¸­ï¼Œå¢åŠ ä»£ç é‡å’Œé™ä½å¯ç»´æŠ¤æ€§ï¼›\n\n- on fetch çš„ä¼˜ç‚¹æ˜¯æ— éœ€æ›´æ”¹ç¼–è¯‘è¿‡ç¨‹ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿé¢å¤–çš„æµé‡ï¼Œç¼ºç‚¹æ˜¯éœ€è¦å¤šä¸€æ¬¡è®¿é—®æ‰èƒ½ç¦»çº¿å¯ç”¨ã€‚\n\n### Service Worker è°ƒè¯•\n\n- å€ŸåŠ© Chrome æµè§ˆå™¨ debug\nä½¿ç”¨ Chrome æµè§ˆå™¨ï¼Œå¯ä»¥é€šè¿‡è¿›å…¥æ§åˆ¶å° Application -> Service Workers é¢æ¿æŸ¥çœ‹å’Œè°ƒè¯•ã€‚\n\n- æŸ¥çœ‹ç¼“å­˜\nService Worker ä½¿ç”¨ Cache API ç¼“å­˜åªè¯»èµ„æºï¼Œå¯ä»¥åœ¨ Chrome DevTools ä¸ŠæŸ¥çœ‹ç¼“å­˜çš„èµ„æºåˆ—è¡¨ã€‚\n\nhttpç¼“å­˜ï¼šç”±æœåŠ¡å™¨å‘ŠçŸ¥èµ„æºä½•æ—¶ç¼“å­˜å’Œä½•æ—¶è¿‡æœŸã€‚swç¼“å­˜æ˜¯å¯¹httpç¼“å­˜çš„å¢å¼º\n\n### Service Worker ç½‘ç»œè·Ÿè¸ª\nç»è¿‡ Service Worker çš„ fetch è¯·æ±‚ Chrome éƒ½ä¼šåœ¨ Chrome DevTools Network æ ‡ç­¾é¡µé‡Œæ ‡æ³¨å‡ºæ¥ï¼Œå…¶ä¸­ï¼š\n\n- æ¥è‡ª Service Worker çš„å†…å®¹ä¼šåœ¨ Size å­—æ®µä¸­æ ‡æ³¨ä¸º from ServiceWorker\n\n- Service Worker å‘å‡ºçš„è¯·æ±‚ä¼šåœ¨ Name å­—æ®µä¸­æ·»åŠ  â€˜é½¿è½®â€™ å›¾æ ‡ã€‚\n\n### Service Worker åŠŸèƒ½æ€§äº‹ä»¶\n\n- fetch (è¯·æ±‚)ï¼šå½“æµè§ˆå™¨åœ¨å½“å‰æŒ‡å®šçš„ scope ä¸‹å‘èµ·è¯·æ±‚æ—¶ï¼Œä¼šè§¦å‘ fetch äº‹ä»¶ï¼Œå¹¶å¾—åˆ°ä¼ æœ‰ response å‚æ•°çš„å›è°ƒå‡½æ•°ï¼Œå›è°ƒä¸­å°±å¯ä»¥åšå„ç§ä»£ç†ç¼“å­˜çš„äº‹æƒ…äº†ã€‚\n\n- push (æ¨é€)ï¼špush äº‹ä»¶æ˜¯ä¸ºæ¨é€å‡†å¤‡çš„ã€‚ä¸è¿‡é¦–å…ˆéœ€è¦äº†è§£ä¸€ä¸‹ Notification API å’Œ PUSH APIã€‚é€šè¿‡ PUSH APIï¼Œå½“è®¢é˜…äº†æ¨é€æœåŠ¡åï¼Œå¯ä»¥ä½¿ç”¨æ¨é€æ–¹å¼å”¤é†’ Service Worker ä»¥å“åº”æ¥è‡ªç³»ç»Ÿæ¶ˆæ¯ä¼ é€’æœåŠ¡çš„æ¶ˆæ¯ï¼Œå³ä½¿ç”¨æˆ·å·²ç»å…³é—­äº†é¡µé¢ã€‚\n\n- sync (åå°åŒæ­¥)ï¼šsync äº‹ä»¶ç”± background sync (åå°åŒæ­¥)å‘å‡ºã€‚background sync é…åˆ Service Worker æ¨å‡ºçš„ APIï¼Œç”¨äºä¸º Service Worker æä¾›ä¸€ä¸ªå¯ä»¥å®ç°æ³¨å†Œå’Œç›‘å¬åŒæ­¥å¤„ç†çš„æ–¹æ³•ã€‚ä½†å®ƒè¿˜ä¸åœ¨ W3C Web API æ ‡å‡†ä¸­ã€‚åœ¨ Chrome ä¸­è¿™ä¹Ÿåªæ˜¯ä¸€ä¸ªå®éªŒæ€§åŠŸèƒ½ï¼Œéœ€è¦è®¿é—® chrome://flags/#enable-experimental-web-platform-features ï¼Œå¼€å¯è¯¥åŠŸèƒ½ï¼Œç„¶åé‡å¯ç”Ÿæ•ˆã€‚\n\n## APP Manifest ä¸æ·»åŠ åˆ°ä¸»å±å¹•\n\nå…è®¸å°†ç«™ç‚¹æ·»åŠ è‡³ä¸»å±å¹•ï¼Œæ˜¯ PWA æä¾›çš„ä¸€é¡¹é‡è¦åŠŸèƒ½\n\n1. å®šä¹‰ manifest.json é…ç½®æ·»åŠ åˆ°ä¸»å±å¹•åŠŸèƒ½\n\n2. åˆ›å»º manifest.json æ–‡ä»¶ï¼Œå¹¶å°†å®ƒæ”¾åˆ°ä½ çš„ç«™ç‚¹ç›®å½•ä¸­\n\n3. åœ¨æ‰€æœ‰é¡µé¢å¼•å…¥è¯¥æ–‡ä»¶\n\n4. å¯ä»¥åœ¨ Service Worker ä¸­ç›‘å¬ beforeinstallprompt äº‹ä»¶åšä¸€äº›åº”ç”¨å†…çš„è¡Œä¸ºå¤„ç†\n\n```js\n{ \n    \"name\" : \"Minimal PWA\" , \n    \"short_name\" : \"PWA Demo\" , \n    \"display\" : \"standalone\" , \n    \"start_url\" : \"/\" , \n    \"theme_color\" : \"#313131\" , \n    \"background_color\" : \"#313131\" , \n    \"icons\" : [ \n        { \n        \"src\" : \"e.png\" , \n        \"sizes\" : \"256x256\" , \n        \"type\" : \"image/png\" \n        } \n    ] \n}\n```\n\n- name ï¼šå®šä¹‰æ­¤PWAçš„åç§°ã€‚\n\n- icons ï¼šå®šä¹‰ä¸€ç³»åˆ—çš„å›¾æ ‡ä»¥é€‚åº”ä¸åŒå‹å·çš„è®¾å¤‡ã€‚\n\n- theme_color ï¼šä¸»é¢˜é¢œè‰²ï¼ˆå½±å“æ‰‹æœºçŠ¶æ€æ é¢œè‰²ï¼‰ã€‚\n\n- background_color ï¼šèƒŒæ™¯é¢œè‰²ã€‚\n\n- start_url ï¼šå¯åŠ¨åœ°å€ã€‚ç”±äºPWAå®é™…ä¸Šæ˜¯ä¸€ä¸ªwebé¡µé¢ï¼Œæ‰€ä»¥éœ€è¦å®šä¹‰PWA åœ¨å¯åŠ¨æ—¶åº”è¯¥è®¿é—®å“ªä¸ªåœ°å€ã€‚\n\n- display ï¼š\"standalone\"è¡¨ç¤ºå…¶ä»¥ç±»ä¼¼åŸç”ŸAPPçš„å…¨å±æ–¹å¼å¯åŠ¨ã€‚\n\n### IOS Safari è®¾ç½®\n```js\nåº”ç”¨å›¾æ ‡ï¼š \n<link rel=\"apple-touch-icon\" href=\"apple-touch-icon.png\" > \nå¯åŠ¨ç”»é¢ï¼š \n<link rel=\"apple-touch-startup-image\" href=\"launch.png\" > \nåº”ç”¨åç§°ï¼š \n<meta name=\"apple-mobile-web-app-title\" content=\"Todo-PWA\" > \nå…¨å±æ•ˆæœï¼š \n<meta name=\"apple-mobile-web-app-capable\" content=\"yes\" > \nè®¾ç½®çŠ¶æ€æ é¢œè‰²ï¼š \n<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"#fff\" >\n```\n\n### window10 è´´ç‰‡å›¾æ ‡\n```js\n<meta name=\"msapplication-TileImage\" content=\"images/logo/144x144.png\" > \n<meta name=\"msapplication-TileColor\" content=\"#2F3BA2\" >\n```\n\n### åœ¨çº¿ç”Ÿæˆ manifest.json æ–‡ä»¶\n\n- https://app-manifest.firebaseapp.com/\n\n- https://tomitm.github.io/appmanifest/\n\n- https://brucelawson.github.io/manifest/\n\n### å‚è€ƒèµ„æ–™\n\n1. [Web App Manifest](https://developer.mozilla.org/en-US/docs/Web/Manifest)\n\n2. [manifest.json ç®€ä»‹](https://lavas.baidu.com/doc/engage-retain-users/add-to-home-screen/introduction)\n\n## App Shell\n\nApp Shellï¼Œé¡¾åæ€ä¹‰ï¼Œå°±æ˜¯`å£³`çš„æ„æ€ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸º`éª¨æ¶å±`ï¼Œè¯´ç™½äº†å°±æ˜¯åœ¨å†…å®¹å°šæœªåŠ è½½å®Œå…¨çš„æ—¶å€™ï¼Œä¼˜å…ˆå±•ç¤ºé¡µé¢çš„ç»“æ„ã€å ä½å›¾ã€ä¸»é¢˜å’ŒèƒŒæ™¯é¢œè‰²ç­‰ï¼Œå®ƒä»¬éƒ½æ˜¯ä¸€äº›è¢«å¼ºç¼“å­˜çš„htmlï¼Œcsså’Œjavascriptã€‚\n\nè¦ç”¨å¥½App Shellï¼Œå°±å¿…é¡»ä¿è¯è¿™éƒ¨åˆ†çš„èµ„æºè¢«Service Workerç¼“å­˜èµ·æ¥ã€‚æˆ‘ä»¬åœ¨ç»„ç»‡ä»£ç çš„æ—¶å€™ï¼Œå¯ä»¥ä¼˜å…ˆå®ŒæˆApp Shellçš„éƒ¨åˆ†ï¼Œç„¶åæŠŠè¿™éƒ¨åˆ†ä»£ç åˆ†åˆ«æ‰“åŒ…æ„å»ºå‡ºæ¥ã€‚\n\n### ä¼˜åŠ¿\n\n- å§‹ç»ˆå¿«é€Ÿçš„å¯é æ€§èƒ½\n\n- å¦‚åŒæœ¬æœºä¸€æ ·çš„äº¤äº’\n\n- æ•°æ®çš„ç»æµä½¿ç”¨\n\n### å‚è€ƒèµ„æ–™\n\n1. [App Shell æ¨¡å‹](https://developers.google.cn/web/fundamentals/architecture/app-shell)\n\n## ä½¿ç”¨Offine-PluginæŠŠç½‘ç«™å‡çº§æˆ PWA\n\n### å‚è€ƒèµ„æ–™\n\n1. [offline-plugin](https://github.com/NekR/offline-plugin)\n\n2. [offline-plugin DEMO](https://offline-plugin.now.sh)\n\n3. [ä½¿ç”¨offline-pluginæ­é…webpackè½»æ¾å®ç°PWA](https://segmentfault.com/a/1190000010669126)\n\n## ä¸PWAç›¸å…³çš„å¼€æºæ¡†æ¶\n\n### Lavas\n\nåŸºäº Vue çš„ PWA è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ­å»º PWA åº”ç”¨ï¼Œè§£å†³æ¥å…¥ PWA çš„å„ç§é—®é¢˜\n\n1. [Lavas å®˜ ç½‘](https://lavas.baidu.com/)\n\n2. [Lavas GitHub](https://github.com/lavas-project/lavas)\n\n### åŠ è½½åº“\nimportScripts() // swé‡Œçš„å…¨å±€å‡½æ•°\n```js\nimportScripts('workbox-sw.prod.v1.1.0.js');\n\nconst workboxSW = new self.WorkboxSW();\n\nworkbox.precaching([\n  // æ³¨å†ŒæˆåŠŸåè¦ç«‹å³ç¼“å­˜çš„èµ„æºåˆ—è¡¨\n]);\n\n// htmlçš„ç¼“å­˜ç­–ç•¥\nworkbox.routing.registerRoute(\n  new RegExp(''.*\\.html'),\n  workbox.strategies.networkFirst()\n);\n\nworkbox.routing.registerRoute(\n  new RegExp('.*\\.(?:js|css)'),\n  workbox.strategies.cacheFirst()\n);\n\nworkbox.routing.registerRoute(\n  new RegExp('https://your\\.cdn\\.com/'),\n  workbox.strategies.staleWhileRevalidate()\n);\n\nworkbox.routing.registerRoute(\n  new RegExp('https://your\\.img\\.cdn\\.com/'),\n  workbox.strategies.cacheFirst({\n    cacheName: 'example:img'\n  })\n);\n```\né€šè¿‡ workbox.precaching ä¸­çš„æ˜¯ install ä»¥åè¦å¡è¿› caches ä¸­çš„å†…å®¹ï¼Œworkbox.routing.registerRoute ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ­£åˆ™ï¼ŒåŒ¹é…ç»è¿‡ fetch äº‹ä»¶çš„æ‰€æœ‰è¯·æ±‚ï¼Œå¦‚æœåŒ¹é…ä¸Šäº†ï¼Œå°±èµ°ç›¸åº”çš„ç¼“å­˜ç­–ç•¥ã€‚\n\n## æ³¨æ„äº‹é¡¹\n- é¿å…æ”¹å˜ SW çš„ URLï¼ˆå¯¹index.htmlåšäº†ç¼“å­˜ï¼Œè¿™æ ·æ°¸è¿œæ‹¿ä¸åˆ°æ–°çš„swï¼‰","tags":["æ·±å…¥ç†è§£"],"categories":["JS"]},{"title":"use strict","url":"%2F2019%2Fuse%20strict.html","content":"\nä¸¥æ ¼æ¨¡å¼æ˜¯ES5å¼•å…¥çš„ï¼Œæ›´å¥½çš„å°†é”™è¯¯æ£€æµ‹å¼•å…¥ä»£ç çš„æ–¹æ³•ã€‚é¡¾åæ€ä¹‰ï¼Œä½¿å¾—JSåœ¨æ›´ä¸¥æ ¼çš„æ¡ä»¶ä¸‹è¿è¡Œã€‚\n\n```js\nå˜é‡å¿…é¡»å…ˆå£°æ˜ï¼Œå†ä½¿ç”¨\nfunction test(){\n\"use strict\";\nfoo = 'bar'; // Error\n}\n\nä¸èƒ½å¯¹å˜é‡æ‰§è¡Œdeleteæ“ä½œ\nvar foo = \"test\";\nfunction test(){}\n\ndelete foo; // Error\ndelete test; // Error\n\nfunction test2(arg) {\ndelete arg; // Error\n}\nå¯¹è±¡çš„å±æ€§åä¸èƒ½é‡å¤\n{ foo: true, foo: false } // Error\n\nç¦ç”¨eval()\n\nå‡½æ•°çš„argumentså‚æ•°\nsetTimeout(function later(){\n// do stuff...\nsetTimeout( later, 1000 );\n}, 1000 );\n\nç¦ç”¨with(){}\n\nä¸èƒ½ä¿®æ”¹arguments\nä¸èƒ½åœ¨å‡½æ•°å†…å®šä¹‰argumentså˜é‡\nä¸èƒ½ä½¿ç”¨arugment.callerå’Œargument.calleeã€‚å› æ­¤å¦‚æœä½ è¦å¼•ç”¨åŒ¿åå‡½æ•°ï¼Œéœ€è¦å¯¹åŒ¿åå‡½æ•°å‘½åã€‚\n```\n\n`ä¸¥æ ¼æ¨¡å¼`çš„ä¼˜ç‚¹ï¼š\n\n1. æ¶ˆé™¤Javascriptè¯­æ³•çš„ä¸€äº›ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘ä¸€äº›æ€ªå¼‚è¡Œä¸º;\n\n2. æ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸€äº›ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨ï¼›\n\n3. æé«˜ç¼–è¯‘å™¨æ•ˆç‡ï¼Œå¢åŠ è¿è¡Œé€Ÿåº¦ï¼›\n\n4. ä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„Javascriptåšå¥½é“ºå«ã€‚\n\n- æ³¨ï¼šç»è¿‡æµ‹è¯• IE6,7,8,9 å‡ä¸æ”¯æŒä¸¥æ ¼æ¨¡å¼ã€‚\n\nç¼ºç‚¹ï¼š\n\nç°åœ¨ç½‘ç«™çš„ JS éƒ½ä¼šè¿›è¡Œå‹ç¼©ï¼Œä¸€äº›æ–‡ä»¶ç”¨äº†ä¸¥æ ¼æ¨¡å¼ï¼Œè€Œå¦ä¸€äº›æ²¡æœ‰ã€‚è¿™æ—¶è¿™äº›æœ¬æ¥æ˜¯ä¸¥æ ¼æ¨¡å¼çš„æ–‡ä»¶ï¼Œè¢« merge åï¼Œè¿™ä¸ªä¸²å°±åˆ°äº†æ–‡ä»¶çš„ä¸­é—´ï¼Œä¸ä»…æ²¡æœ‰æŒ‡ç¤ºä¸¥æ ¼æ¨¡å¼ï¼Œåè€Œåœ¨å‹ç¼©åæµªè´¹äº†å­—èŠ‚ã€‚\n\n---\n<!--more-->\n\n## è¯¦ç»†è¯´æ˜\n1.ä½¿è°ƒè¯•æ›´åŠ å®¹æ˜“ã€‚é‚£äº›è¢«å¿½ç•¥æˆ–é»˜é»˜å¤±è´¥äº†çš„ä»£ç é”™è¯¯ï¼Œä¼šäº§ç”Ÿé”™è¯¯æˆ–æŠ›å‡ºå¼‚å¸¸ï¼Œå› æ­¤å°½æ—©æé†’ä½ ä»£ç ä¸­çš„é—®é¢˜ï¼Œä½ æ‰èƒ½æ›´å¿«åœ°æŒ‡å¼•åˆ°å®ƒä»¬çš„æºä»£ç ã€‚\n\n2.å˜é‡åœ¨èµ‹å€¼ä¹‹å‰å¿…é¡»å£°æ˜,é˜²æ­¢æ„å¤–çš„å…¨å±€å˜é‡ã€‚å¦‚æœæ²¡æœ‰ä¸¥æ ¼æ¨¡å¼ï¼Œå°†å€¼åˆ†é…ç»™ä¸€ä¸ªæœªå£°æ˜çš„å˜é‡ä¼šè‡ªåŠ¨åˆ›å»ºè¯¥åç§°çš„å…¨å±€å˜é‡ã€‚è¿™æ˜¯JavaScriptä¸­æœ€å¸¸è§çš„é”™è¯¯ä¹‹ä¸€ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™æ ·åšçš„è¯ä¼šæŠ›å‡ºé”™è¯¯ã€‚\n\n3.å–æ¶ˆthiså€¼çš„å¼ºåˆ¶è½¬æ¢ã€‚å¦‚æœæ²¡æœ‰ä¸¥æ ¼æ¨¡å¼ï¼Œå¼•ç”¨nullæˆ–æœªå®šä¹‰çš„å€¼åˆ° this å€¼ä¼šè‡ªåŠ¨å¼ºåˆ¶åˆ°å…¨å±€å˜é‡ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¼•ç”¨ nullæˆ–æœªå®šä¹‰çš„ this å€¼ä¼šæŠ›å‡ºé”™è¯¯ã€‚ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œthisä¸ä¼šæŒ‡å‘windowÂ \n\n4.ä¸å…è®¸é‡å¤çš„å±æ€§åç§°æˆ–å‚æ•°å€¼ã€‚å½“æ£€æµ‹åˆ°å¯¹è±¡ä¸­é‡å¤å‘½åçš„å±æ€§ï¼Œä¾‹å¦‚ï¼š\n```js\nvar object = {foo: \"bar\", foo: \"baz\"};\n\n// æˆ–æ£€æµ‹åˆ°å‡½æ•°ä¸­é‡å¤å‘½åçš„å‚æ•°æ—¶,ä¾‹å¦‚ï¼š\n\nfunction foo(val1, val2, val1){}ï¼‰\n\n// ä¸¥æ ¼æ¨¡å¼ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå› æ­¤æ•æ‰å‡ ä¹å¯ä»¥è‚¯å®šæ˜¯ä»£ç ä¸­çš„bugå¯ä»¥é¿å…æµªè´¹å¤§é‡çš„è·Ÿè¸ªæ—¶é—´ã€‚\n```\n5.ä½¿ eval() æ›´å®‰å…¨ã€‚åœ¨ä¸¥æ ¼æ¨¡å¼å’Œéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ eval() çš„è¡Œä¸ºæ–¹å¼æœ‰æ‰€ä¸åŒã€‚æœ€æ˜¾è€Œæ˜“è§çš„æ˜¯ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå˜é‡å’Œå£°æ˜åœ¨ eval() è¯­å¥å†…éƒ¨çš„å‡½æ•°ä¸ä¼šåœ¨åŒ…å«èŒƒå›´å†…åˆ›å»ºï¼ˆå®ƒä»¬ä¼šåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹çš„åŒ…å«èŒƒå›´ä¸­è¢«åˆ›å»ºï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸è§çš„é—®é¢˜æºï¼‰ã€‚\n\neval()æ²¡æœ‰è¢«ç§»é™¤ï¼Œä½†å®ƒåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å‘ç”Ÿäº†ä¸€äº›å˜åŒ–ã€‚æœ€å¤§çš„æ”¹å˜æ˜¯ï¼šåœ¨eval()è¯­å¥ä¸­å£°æ˜çš„å˜é‡ä»¥åŠå‡½æ•°ä¸ä¼šåœ¨åŒ…å«åŸŸä¸­åˆ›å»ºã€‚ä¾‹å¦‚ï¼š\n```js\n(function() {\n\neval(\"var x = 10;\");  \n \n// éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œxä¸º10  \n// ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œxæ²¡æœ‰å£°æ˜ï¼ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯  \nalert(x);  \n})();Â \nä»»æ„ç”±eval()åˆ›å»ºçš„å˜é‡æˆ–å‡½æ•°ä»å‘†åœ¨eval()é‡Œã€‚ç„¶è€Œï¼Œä½ å¯ä»¥é€šè¿‡ä»eval()ä¸­è¿”å›ä¸€ä¸ªå€¼çš„æ–¹å¼å®ç°å€¼çš„ä¼ é€’ï¼š\n\n(function() {\n\nvar result = eval(\"var x = 10, y = 20; x + y\");  \n \n// ä¸¥æ ¼æ¨¡å¼ä¸éä¸¥æ ¼æ¨¡å¼ä¸‹éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼ˆå¾—åˆ°30ï¼‰  \nalert(result);  \n}());Â \n```\n6.åœ¨ delete ä½¿ç”¨æ— æ•ˆæ—¶æŠ›å‡ºé”™è¯¯ã€‚ delete æ“ä½œç¬¦ï¼ˆç”¨äºä»å¯¹è±¡ä¸­åˆ é™¤å±æ€§ï¼‰ä¸èƒ½ç”¨åœ¨å¯¹è±¡ä¸å¯é…ç½®çš„å±æ€§ä¸Šã€‚å½“è¯•å›¾åˆ é™¤ä¸€ä¸ªä¸å¯é…ç½®çš„å±æ€§æ—¶ï¼Œéä¸¥æ ¼ä»£ç å°†é»˜é»˜åœ°å¤±è´¥ï¼Œè€Œä¸¥æ ¼æ¨¡å¼å°†åœ¨è¿™æ ·çš„æƒ…å†µä¸‹æŠ›å‡ºå¼‚å¸¸ã€‚\n\n7.ä¸¥æ ¼æ¨¡å¼å»é™¤äº†withè¯­å¥\n\n8.ä¸èƒ½ä¿®æ”¹arguments ï¼Œä¸èƒ½åœ¨å‡½æ•°å†…å®šä¹‰argumentså˜é‡Â  ï¼Œä¸èƒ½ä½¿ç”¨arugment.callerå’Œargument.calleeã€‚å› æ­¤å¦‚æœä½ è¦å¼•ç”¨åŒ¿åå‡½æ•°ï¼Œéœ€è¦å¯¹åŒ¿åå‡½æ•°å‘½åã€‚Â Â \n\n## ç®€æ´è¯´æ˜\n\n- å˜é‡å¿…é¡»å£°æ˜åå†ä½¿ç”¨\n- å‡½æ•°çš„å‚æ•°ä¸èƒ½æœ‰åŒåå±æ€§ï¼Œå¦åˆ™æŠ¥é”™\n- ä¸èƒ½ä½¿ç”¨withè¯­å¥\n- ä¸èƒ½å¯¹åªè¯»å±æ€§èµ‹å€¼ï¼Œå¦åˆ™æŠ¥é”™\n- ä¸èƒ½ä½¿ç”¨å‰ç¼€ 0 è¡¨ç¤ºå…«è¿›åˆ¶æ•°ï¼Œå¦åˆ™æŠ¥é”™\n- ä¸èƒ½åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼Œå¦åˆ™æŠ¥é”™\n- evalä¸ä¼šåœ¨å®ƒçš„å¤–å±‚ä½œç”¨åŸŸå¼•å…¥å˜é‡\n- evalå’Œargumentsä¸èƒ½è¢«é‡æ–°èµ‹å€¼\n- argumentsä¸ä¼šè‡ªåŠ¨åæ˜ å‡½æ•°å‚æ•°çš„å˜åŒ–\n- ä¸èƒ½ä½¿ç”¨arguments.callee\n- ä¸èƒ½ä½¿ç”¨arguments.caller\n- ç¦æ­¢thisæŒ‡å‘å…¨å±€å¯¹è±¡\n- ä¸èƒ½ä½¿ç”¨fn.callerå’Œfn.argumentsè·å–å‡½æ•°è°ƒç”¨çš„å †æ ˆ\n- å¢åŠ äº†ä¿ç•™å­—ï¼ˆæ¯”å¦‚protectedã€staticå’Œinterfaceï¼‰\n","tags":["çŸ¥è¯†"],"categories":["JS"]},{"title":"ES6Reflectå¯¹è±¡","url":"%2F2019%2FES6Reflect%E5%AF%B9%E8%B1%A1.html","content":"\n## ä»‹ç»\nReflect æ˜¯ä¸€ä¸ªå†…ç½®çš„å¯¹è±¡ï¼Œå®ƒæä¾›æ‹¦æˆª JavaScript æ“ä½œçš„æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ä¸å¤„ç†å™¨å¯¹è±¡çš„æ–¹æ³•ç›¸åŒã€‚Reflectä¸æ˜¯ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œå› æ­¤å®ƒæ˜¯ä¸å¯æ„é€ çš„ã€‚\n\nReflectè¿™ä¸ªå¯¹è±¡åœ¨æ–°ç‰ˆæœ¬çš„chromeæ˜¯æ”¯æŒçš„ï¼Œ ffæ¯”è¾ƒæ—©å°±æ”¯æŒProxyå’ŒReflectäº†ï¼Œè¦è®©nodeæ”¯æŒReflectå¯ä»¥å®‰è£…[harmony-reflect](https://github.com/tvcutsem/harmony-reflect/);\n\nReflectä¸æ˜¯æ„é€ å‡½æ•°ï¼Œ è¦ä½¿ç”¨çš„æ—¶å€™ç›´æ¥é€šè¿‡Reflect.method()è°ƒç”¨ï¼Œ Reflectæœ‰çš„æ–¹æ³•å’ŒProxyå·®ä¸å¤šï¼Œ è€Œä¸”å¤šæ•°Reflectæ–¹æ³•åŸç”Ÿçš„Objectå·²ç»é‡æ–°å®ç°äº†ã€‚\n\nä¸å¤§å¤šæ•°å…¨å±€å¯¹è±¡ä¸åŒï¼ŒReflectæ²¡æœ‰æ„é€ å‡½æ•°ã€‚ä½ ä¸èƒ½å°†å…¶ä¸ä¸€ä¸ªnewè¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œæˆ–è€…å°†Reflectå¯¹è±¡ä½œä¸ºä¸€ä¸ªå‡½æ•°æ¥è°ƒç”¨ã€‚Reflectçš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•éƒ½æ˜¯é™æ€çš„ï¼ˆå°±åƒMathå¯¹è±¡ï¼‰ã€‚\n\n---\n<!--more-->\n\n##  ä¸ºä»€ä¹ˆä½¿ç”¨\n\n- æ›´åŠ æœ‰ç”¨çš„è¿”å›å€¼\n\nReflectæœ‰ä¸€äº›æ–¹æ³•å’ŒES5ä¸­Objectæ–¹æ³•ä¸€æ ·æ ·çš„ï¼Œ æ¯”å¦‚ï¼š Reflect.getOwnPropertyDescriptorå’ŒReflect.defineProperty,  ä¸è¿‡, Object.defineProperty(obj, name, desc)æ‰§è¡ŒæˆåŠŸä¼šè¿”å›objï¼Œ ä»¥åŠå…¶å®ƒåŸå› å¯¼è‡´çš„é”™è¯¯ï¼Œ Reflect.definePropertyåªä¼šè¿”å›falseæˆ–è€…trueæ¥è¡¨ç¤ºå¯¹è±¡çš„å±æ€§æ˜¯å¦è®¾ç½®ä¸Šäº†ï¼Œ\n\n```js\ntry {\n  Object.defineProperty(obj, name, desc);\n  // property defined successfully\n} catch (e) {\n  // possible failure (and might accidentally catch the wrong exception)\n}\n```\nå¯ä»¥é‡æ„æˆ\n```js\nif (Reflect.defineProperty(obj, name, desc)) {\n  // success\n} else {\n  // failure\n}\n```\n\n- å‡½æ•°æ“ä½œ\n```js\nname in obj // Reflect.has(obj, name)\ndelete obj[name] // Reflect.deleteProperty(obj, name)\n```\n\n- æ›´åŠ å¯é çš„å‡½æ•°å¼æ‰§è¡Œæ–¹å¼ï¼š åœ¨ESä¸­ï¼Œ è¦æ‰§è¡Œä¸€ä¸ªå‡½æ•°fï¼Œå¹¶ç»™å®ƒä¼ ä¸€ç»„å‚æ•°argsï¼Œ è¿˜è¦ç»‘å®šthisçš„è¯ï¼Œ è¦è¿™ä¹ˆå†™ï¼š\n```js\nf.apply(obj, args) // applyæœ‰å¯èƒ½è¢«ç¯¡æ”¹\nFunction.prototype.apply.call(f, obj, args) // Reflect.apply(f, obj, args)\n```\n\n- å¯å˜å‚æ•°å½¢å¼çš„æ„é€ å‡½æ•°\n```js\nvar obj = new F(...args)\nvar obj = Reflect.construct(F, args)\n```\n\n- æ§åˆ¶è®¿é—®å™¨æˆ–è€…è¯»å–å™¨çš„this\n```js\nobj.name\nobj['name']\nReflect.get(obj, name, wrapper)\nReflect.set(obj, name, value, wrapper)\n```\n\nè®¿é—®å™¨ä¸­ä¸æƒ³ä½¿ç”¨è‡ªå·±çš„æ–¹æ³•ï¼Œè€Œæ˜¯æƒ³è¦é‡å®šå‘thisåˆ°wrapperï¼š\n```js\nvar  obj = {\n    set foo(value){\n        return this.bar();\n    }\n    bar(){\n        console.log(1)\n    }\n}\n\nvar wrapper = {\n    bar(){\n        console.log(2)\n    }\n}\nReflect.set(obj, \"foo\", \"value\", wrapper)\n```\n\n- é¿å…ç›´æ¥è®¿é—®__proto__\n\n### Reflect.apply\nReflect.applyå…¶å®å°±æ˜¯ES5ä¸­çš„ Function.prototype.apply() æ›¿èº«ï¼Œ æ‰§è¡ŒReflect.applyéœ€è¦ä¸‰ä¸ªå‚æ•°\n\nç¬¬ä¸€ä¸ªå‚æ•°ä¸ºï¼š éœ€è¦æ‰§è¡Œçš„å‡½æ•°ï¼›\nç¬¬äºŒä¸ªå‚æ•°ä¸ºï¼š éœ€è¦æ‰§è¡Œå‡½æ•°çš„ä¸Šä¸‹æ–‡thisï¼›\nç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºï¼š æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–è€…ä¼ªæ•°ç»„ï¼Œ ä¼šä½œä¸ºæ‰§è¡Œå‡½æ•°çš„å‚æ•°ï¼›\n\n### Reflect.construct\nReflect.constructå…¶å®å°±æ˜¯å®ä¾‹åŒ–æ„é€ å‡½æ•°ï¼Œé€šè¿‡ä¼ å‚å½¢å¼çš„å®ç°ï¼Œ æ‰§è¡Œçš„æ–¹å¼ä¸åŒï¼Œ æ•ˆæœå…¶å®ä¸€æ ·ï¼Œ constructçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ„é€ å‡½æ•°ï¼Œ ç¬¬äºŒä¸ªå‚æ•°ç”±å‚æ•°ç»„æˆçš„æ•°ç»„æˆ–è€…ä¼ªæ•°ç»„ï¼Œ ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºä¸€ä¸ªè¶…ç±»ï¼Œ æ–°å…ƒç´ ä¼šç»§æ‰¿è¿™ä¸ªè¶…ç±»ï¼›\n```js\nvar Fn = function(arg) {\n    this.args = [arg]\n};\nconsole.log( new Fn(1), Reflect.construct(Fn,[1]) ); // è¾“å‡ºæ˜¯ä¸€æ ·çš„\n\nvar d = Reflect.construct(Date, [2019, 5, 2]);\nd instanceof Date; // true\nd.getFullYear(); // 2019\n```\n\n### Reflect.defineProperty\nReflect.definePropertyè¿”å›çš„æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œ é€šè¿‡ç›´æ¥èµ‹å€¼çš„æ–¹å¼æŠŠå±æ€§å’Œå±æ€§å€¼æ·»åŠ ç»™å¯¹è±¡è¿”å›çš„æ˜¯ä¸€æ•´ä¸ªå¯¹è±¡ï¼Œ å¦‚æœæ·»åŠ å¤±è´¥ä¼šæŠ›é”™ï¼›\n```js\nvar obj = {};\nif( Reflect.defineProperty(obj, \"x\", {value : 7 }) ) {\n    console.log(\"added success\");\n}else{\n    console.log(\"æ·»åŠ å¤±è´¥\");\n};\n```\n\n### Reflect.deleteProperty\nReflect.deletePropertyå’ŒReflect.definePropertyçš„ä½¿ç”¨æ–¹æ³•å·®ä¸å¤šï¼Œ Reflect.deletePropertyå’Œ delete obj.xxçš„æ“ä½œç»“æœæ˜¯ä¸€æ ·ï¼Œ åŒºåˆ«æ˜¯ä½¿ç”¨å½¢å¼ä¸åŒï¼šä¸€ä¸ªæ˜¯æ“ä½œç¬¦ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°è°ƒç”¨ï¼›\n```js\nReflect.deleteProperty(Object.freeze({foo: 1}), \"foo\"); // false\ndelete Object.freeze({foo: 1}).foo; //è¾“å‡ºï¼šfalseï¼›\n```\n\n### Reflect.get\nè¿™ä¸ªæ–¹æ³•çš„æœ‰ä¸¤ä¸ªå¿…é¡»çš„å‚æ•°ï¼š ç¬¬ä¸€ä¸ªä¸ºobjç›®æ ‡å¯¹è±¡ï¼Œ ç¬¬äºŒä¸ªä¸ºå±æ€§åå¯¹è±¡ï¼Œ ç¬¬ä¸‰ä¸ªæ˜¯å¯é€‰çš„ï¼Œæ˜¯ä½œä¸ºè¯»å–å™¨çš„ä¸Šä¸‹æ–‡(this);\n```js\nvar obj = {};\nobj.foo = 1;\nconsole.log( obj.foo ); //è¾“å‡ºï¼š1;\nconsole.log( Reflect.get(obj, \"foo\") ) //è¾“å‡ºï¼š1;\n```\n\n### Reflect.getOwnPropertyDescritptor\nè·å–å±æ€§æè¿°\n```js\nReflect.getOwnPropertyDescriptor({x: \"hello\"}, \"x\");\n//ä¹Ÿå¯ä»¥è¿™æ ·è·å–ï¼š\nObject.getOwnPropertyDescriptor({x:\"1\"},\"x\");\n//è¿™ä¸¤ä¸ªçš„åŒºåˆ«æ˜¯ä¸€ä¸ªä¼šåŒ…è£…å¯¹è±¡ï¼Œ ä¸€ä¸ªä¸ä¼šï¼š\nReflect.getOwnPropertyDescriptor(\"hello\",0); //æŠ›å‡ºå¼‚å¸¸\nObject.getOwnPropertyDescriptor(\"hello\",0); //è¾“å‡ºï¼š {value: \"h\", writable: false, enumerable: true, configurable: false}\n```\n\n### Reflect.getPrototypeOf\nåŒObject.getPrototypeOf\n\n### Reflect.has\nåŒ in\n```js\nReflect.has({x:0}, \"x\") //è¾“å‡ºï¼š trueï¼›\n```\n\n### Reflect.isExtensible\n```js\n// ç°åœ¨è¿™ä¸ªå…ƒç´ æ˜¯å¯ä»¥æ‰©å±•çš„ï¼›\nvar empty = {};\nReflect.isExtensible(empty); // === true\n\n// ä½¿ç”¨preventExtensionsæ–¹æ³•ï¼Œ è®©è¿™ä¸ªå¯¹è±¡æ— æ³•æ‰©å±•æ–°å±æ€§ï¼›\nReflect.preventExtensions(empty);\nReflect.isExtensible(empty); // === false\n\n// è¿™ä¸ªå¯¹è±¡æ— æ³•æ‰©å±•æ–°å±æ€§ï¼Œ å¯å†™çš„å±æ€§ä¾ç„¶å¯ä»¥æ”¹åŠ¨\nvar sealed = Object.seal({});\nReflect.isExtensible(sealed); // === false\n\n// è¿™ä¸ªå¯¹è±¡å®Œå…¨è¢«å†»ç»“äº†\nvar frozen = Object.freeze({});\nReflect.isExtensible(frozen); // === false\n```\n\n### Reflect.ownKeys\nè¿”å›å¯¹è±¡çš„keys\n```js\nconsole.log(Reflect.ownKeys({\"a\":0,\"b\":1,\"c\":2,\"d\":3})); //è¾“å‡º ï¼š[\"a\", \"b\", \"c\", \"d\"]\nconsole.log(Reflect.ownKeys([])); // [\"length\"]\n```\nreflect.ownKeysçš„æ’åºæ˜¯æ ¹æ®: å…ˆæ˜¾ç¤ºæ•°å­—ï¼Œ æ•°å­—æ ¹æ®å¤§å°æ’åºï¼Œç„¶åæ˜¯ å­—ç¬¦ä¸²æ ¹æ®æ’å…¥çš„é¡ºåºæ’åºï¼Œ æœ€åæ˜¯symbolç±»å‹çš„keyä¹Ÿæ ¹æ®æ’å…¥æ’å…¥é¡ºåºæ’åº;\n\n### Reflect.set\n```js\nvar obj = {};\nReflect.set(obj, \"prop\", \"value\"); // è¾“å‡ºï¼štrue\nconsole.log( obj.prop ); // è¾“å‡ºï¼š\"value\"\n\nvar obj = {};\nReflect.set(obj); // è¾“å‡ºï¼štrue\n// ç›¸å½“äº Reflect.set(obj, undefined, undefined);\n```\n\n### Reflect.setPrototypeOf\nä¿®æ”¹å¯¹è±¡çš„\\_\\_proto\\_\\_å±æ€§\n```js\nReflect.setPrototypeOf({}, Object.prototype); // è¾“å‡ºtrue\n\n// ç»™è¯¥å¯¹è±¡æ•°ç»„[[Prototype]] ä¸ºnull.\nReflect.setPrototypeOf({}, null); // true\n// æ­¤æ—¶çš„obj.__proto__ä¸ºundefined\n\n//æŠŠå¯¹è±¡å†»ç»“ä»¥åé‡æ–°è®¾ç½®[[prototype]]\nReflect.setPrototypeOf(Object.freeze({}), null); // false\n\n// å¦‚æœåŸå‹é“¾å¾ªç¯ä¾èµ–çš„è¯å°±ä¼šè¿”å›false.\nvar target = {};\nvar proto = Object.create(target);\nReflect.setPrototypeOf(target, proto); // false\n```","tags":["æ·±å…¥ç†è§£"],"categories":["JS"]},{"title":"æ·±å…¥äº†è§£HTTP","url":"%2F2019%2F%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3HTTP.html","content":"\n## HTTP ç‰¹æ€§\n- åŸºäºTCP-IPåè®® åº”ç”¨å±‚åè®® é»˜è®¤ç«¯å£å·80\n- æ— è¿æ¥æ— çŠ¶æ€\n\n### ä»€ä¹ˆæ˜¯æ— çŠ¶æ€\n- çŠ¶æ€ã€‘çš„å«ä¹‰å°±æ˜¯ï¼šå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åœ¨æŸæ¬¡ä¼šè¯ä¸­äº§ç”Ÿçš„æ•°æ®\n- é‚£ä¹ˆå¯¹åº”çš„ã€æ— çŠ¶æ€ã€‘å°±æ„å‘³ç€ï¼šè¿™äº›æ•°æ®ä¸ä¼šè¢«ä¿ç•™\n- é€šè¿‡å¢åŠ cookieå’Œsessionæœºåˆ¶ï¼Œç°åœ¨çš„ç½‘ç»œè¯·æ±‚å…¶å®æ˜¯æœ‰çŠ¶æ€çš„\n- åœ¨æ²¡æœ‰çŠ¶æ€çš„httpåè®®ä¸‹ï¼ŒæœåŠ¡å™¨ä¹Ÿä¸€å®šä¼šä¿ç•™ä½ æ¯æ¬¡ç½‘ç»œè¯·æ±‚å¯¹æ•°æ®çš„ä¿®æ”¹ï¼Œä½†è¿™è·Ÿä¿ç•™æ¯æ¬¡è®¿é—®çš„æ•°æ®æ˜¯ä¸ä¸€æ ·çš„ï¼Œä¿ç•™çš„åªæ˜¯ä¼šè¯äº§ç”Ÿçš„ç»“æœï¼Œè€Œæ²¡æœ‰ä¿ç•™ä¼šè¯\n\n## HTTP æŠ¥æ–‡    \n### è¯·æ±‚æŠ¥æ–‡\nHTTP åè®®æ˜¯ä»¥ ASCII ï¼ˆa s kiï¼‰ç ä¼ è¾“ï¼Œå»ºç«‹åœ¨ TCP/IP åè®®ä¹‹ä¸Šçš„åº”ç”¨å±‚è§„èŒƒã€‚è§„èŒƒæŠŠ HTTP è¯·æ±‚åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šçŠ¶æ€è¡Œã€è¯·æ±‚å¤´ã€æ¶ˆæ¯ä¸»ä½“ã€‚\n\n- GET å¯æäº¤çš„æ•°æ®é‡å—åˆ°URLé•¿åº¦çš„é™åˆ¶ï¼ŒHTTP åè®®è§„èŒƒæ²¡æœ‰å¯¹ URL é•¿åº¦è¿›è¡Œé™åˆ¶ã€‚è¿™ä¸ªé™åˆ¶æ˜¯ç‰¹å®šçš„æµè§ˆå™¨åŠæœåŠ¡å™¨å¯¹å®ƒçš„é™åˆ¶\n- ç†è®ºä¸Šè®²ï¼ŒPOST æ˜¯æ²¡æœ‰å¤§å°é™åˆ¶çš„ï¼ŒHTTP åè®®è§„èŒƒä¹Ÿæ²¡æœ‰è¿›è¡Œå¤§å°é™åˆ¶ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒæœåŠ¡å™¨è½¯ä»¶åœ¨å®ç°æ—¶ä¼šåšä¸€å®šé™åˆ¶\n- å‚è€ƒä¸Šé¢çš„æŠ¥æ–‡ç¤ºä¾‹ï¼Œå¯ä»¥å‘ç° GET å’Œ POST æ•°æ®å†…å®¹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ï¼Œåªæ˜¯ä½ç½®ä¸åŒï¼Œä¸€ä¸ªåœ¨ URL é‡Œï¼Œä¸€ä¸ªåœ¨ HTTP åŒ…çš„åŒ…ä½“é‡Œ\n\n---\n<!--more-->\n\n### POSTæäº¤çš„æ–¹å¼\nHTTP åè®®ä¸­è§„å®š POST æäº¤çš„æ•°æ®å¿…é¡»åœ¨ body éƒ¨åˆ†ä¸­ï¼Œä½†æ˜¯åè®®ä¸­æ²¡æœ‰è§„å®šæ•°æ®ä½¿ç”¨å“ªç§ç¼–ç æ–¹å¼æˆ–è€…æ•°æ®æ ¼å¼ã€‚å®é™…ä¸Šï¼Œå¼€å‘è€…å®Œå…¨å¯ä»¥è‡ªå·±å†³å®šæ¶ˆæ¯ä¸»ä½“çš„æ ¼å¼ï¼Œåªè¦æœ€åå‘é€çš„ HTTP è¯·æ±‚æ»¡è¶³ä¸Šé¢çš„æ ¼å¼å°±å¯ä»¥ã€‚\n\nä½†æ˜¯ï¼Œæ•°æ®å‘é€å‡ºå»ï¼Œè¿˜è¦æœåŠ¡ç«¯è§£ææˆåŠŸæ‰æœ‰æ„ä¹‰ã€‚ä¸€èˆ¬æœåŠ¡ç«¯è¯­è¨€å¦‚ PHPã€Python ç­‰ï¼Œä»¥åŠå®ƒä»¬çš„ frameworkï¼Œéƒ½å†…ç½®äº†è‡ªåŠ¨è§£æå¸¸è§æ•°æ®æ ¼å¼çš„åŠŸèƒ½ã€‚æœåŠ¡ç«¯é€šå¸¸æ˜¯æ ¹æ®è¯·æ±‚å¤´ï¼ˆheadersï¼‰ä¸­çš„ Content-Type å­—æ®µæ¥è·çŸ¥è¯·æ±‚ä¸­çš„æ¶ˆæ¯ä¸»ä½“æ˜¯ç”¨ä½•ç§æ–¹å¼ç¼–ç ï¼Œå†å¯¹ä¸»ä½“è¿›è¡Œè§£æã€‚æ‰€ä»¥è¯´åˆ° POST æäº¤æ•°æ®æ–¹æ¡ˆï¼ŒåŒ…å«äº† Content-Type å’Œæ¶ˆæ¯ä¸»ä½“ç¼–ç æ–¹å¼ä¸¤éƒ¨åˆ†ã€‚\n\n1. application/x-www-form-urlencoded\nè¿™æ˜¯æœ€å¸¸è§çš„ POST æ•°æ®æäº¤æ–¹å¼ã€‚æµè§ˆå™¨çš„åŸç”Ÿ <form> è¡¨å•ï¼Œå¦‚æœä¸è®¾ç½® enctype å±æ€§ï¼Œé‚£ä¹ˆæœ€ç»ˆå°±ä¼šä»¥ application/x-www-form-urlencoded æ–¹å¼æäº¤æ•°æ®ã€‚\n\n2. multipart/form-data\nä½¿ç”¨è¡¨å•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå¿…é¡»è®© <form> è¡¨å•çš„ enctype ç­‰äº multipart/form-dataã€‚\n\nä¸Šé¢æåˆ°çš„è¿™ä¸¤ç§ POST æ•°æ®çš„æ–¹å¼ï¼Œéƒ½æ˜¯æµè§ˆå™¨åŸç”Ÿæ”¯æŒçš„ï¼Œè€Œä¸”ç°é˜¶æ®µæ ‡å‡†ä¸­åŸç”Ÿ <form> è¡¨å•ä¹Ÿåªæ”¯æŒè¿™ä¸¤ç§æ–¹å¼ï¼ˆé€šè¿‡ <form> å…ƒç´ çš„ enctype å±æ€§æŒ‡å®šï¼Œé»˜è®¤ä¸º application/x-www-form-urlencodedã€‚å…¶å® enctype è¿˜æ”¯æŒ text/plainï¼Œä¸è¿‡ç”¨å¾—éå¸¸å°‘ï¼‰ã€‚\n\néšç€è¶Šæ¥è¶Šå¤šçš„ Web ç«™ç‚¹ï¼Œå°¤å…¶æ˜¯ WebAppï¼Œå…¨éƒ¨ä½¿ç”¨ Ajax è¿›è¡Œæ•°æ®äº¤äº’ä¹‹åï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å®šä¹‰æ–°çš„æ•°æ®æäº¤æ–¹å¼ï¼Œä¾‹å¦‚ application/jsonï¼Œapplication/form-dataï¼Œtext/xmlï¼Œä¹ƒè‡³ application/x-protobuf è¿™ç§äºŒè¿›åˆ¶æ ¼å¼ï¼Œåªè¦æœåŠ¡å™¨å¯ä»¥æ ¹æ® Content-Type å’Œ Content-Encoding æ­£ç¡®åœ°è§£æå‡ºè¯·æ±‚ï¼Œéƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚\n\n### å“åº”æŠ¥æ–‡\n- çŠ¶æ€è¡Œ\n- å“åº”å¤´(Response Header)\n- å“åº”æ­£æ–‡\n\nGET è¯·æ±‚ 304è·å–ç¼“å­˜\nç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ç«¯è¿”å›è¯·æ±‚æ•°æ®ï¼Œä¹‹åçš„è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ ¹æ®è¯·æ±‚ä¸­çš„ If-Modified-Since å­—æ®µåˆ¤æ–­å“åº”æ–‡ä»¶æ²¡æœ‰æ›´æ–°ï¼Œå¦‚æœæ²¡æœ‰æ›´æ–°ï¼ŒæœåŠ¡å™¨è¿”å›ä¸€ä¸ª 304 Not Modifiedå“åº”ï¼Œå‘Šè¯‰æµè§ˆå™¨è¯·æ±‚çš„èµ„æºåœ¨æµè§ˆå™¨ä¸Šæ²¡æœ‰æ›´æ–°ï¼Œå¯ä»¥ä½¿ç”¨å·²ç¼“å­˜çš„ä¸Šæ¬¡è·å–çš„æ–‡ä»¶ã€‚\n\n### æŒä¹…è¿æ¥\n\nåœ¨ HTTP 1.0 ç‰ˆæœ¬ä¸­ï¼Œå¹¶æ²¡æœ‰å®˜æ–¹çš„æ ‡å‡†æ¥è§„å®š Keep-Alive å¦‚ä½•å·¥ä½œï¼Œå› æ­¤å®é™…ä¸Šå®ƒæ˜¯è¢«é™„åŠ åˆ° HTTP 1.0åè®®ä¸Šï¼Œå¦‚æœå®¢æˆ·ç«¯æµè§ˆå™¨æ”¯æŒ Keep-Alive ï¼Œé‚£ä¹ˆå°±åœ¨HTTPè¯·æ±‚å¤´ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µ Connection: Keep-Aliveï¼Œå½“æœåŠ¡å™¨æ”¶åˆ°é™„å¸¦æœ‰ Connection: Keep-Alive çš„è¯·æ±‚æ—¶ï¼Œå®ƒä¹Ÿä¼šåœ¨å“åº”å¤´ä¸­æ·»åŠ ä¸€ä¸ªåŒæ ·çš„å­—æ®µæ¥ä½¿ç”¨ Keep-Alive ã€‚è¿™æ ·ä¸€æ¥ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„HTTPè¿æ¥å°±ä¼šè¢«ä¿æŒï¼Œä¸ä¼šæ–­å¼€ï¼ˆè¶…è¿‡ Keep-Alive è§„å®šçš„æ—¶é—´ï¼Œæ„å¤–æ–­ç”µç­‰æƒ…å†µé™¤å¤–ï¼‰ï¼Œå½“å®¢æˆ·ç«¯å‘é€å¦å¤–ä¸€ä¸ªè¯·æ±‚æ—¶ï¼Œå°±ä½¿ç”¨è¿™æ¡å·²ç»å»ºç«‹çš„è¿æ¥ã€‚\n\nåœ¨ HTTP 1.1 ç‰ˆæœ¬ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰è¿æ¥éƒ½è¢«ä¿æŒï¼Œå¦‚æœåŠ å…¥ \"Connection: close\" æ‰å…³é—­ã€‚ç›®å‰å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½ä½¿ç”¨ HTTP 1.1 åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤éƒ½ä¼šå‘èµ· Keep-Alive çš„è¿æ¥è¯·æ±‚äº†ã€‚\n\n- HTTP Keep-Alive ç®€å•è¯´å°±æ˜¯ä¿æŒå½“å‰çš„TCPè¿æ¥ï¼Œé¿å…äº†é‡æ–°å»ºç«‹è¿æ¥ã€‚ä¹Ÿå°±æ˜¯é»˜è®¤éƒ½æ˜¯æŒç»­è¿æ¥çš„ã€‚åœ¨äº‹åŠ¡å¤„ç†ç»“æŸä¹‹åä»ç„¶ä¿æŒåœ¨æ‰“å¼€çŠ¶æ€çš„TCPè¿æ¥ç§°ä¹‹ä¸ºæŒä¹…è¿æ¥ã€‚\n\n- HTTP é•¿è¿æ¥ä¸å¯èƒ½ä¸€ç›´ä¿æŒï¼Œä¾‹å¦‚ Keep-Alive: timeout=5, max=100ï¼Œè¡¨ç¤ºè¿™ä¸ªTCPé€šé“å¯ä»¥ä¿æŒ5ç§’ï¼Œmax=100ï¼Œè¡¨ç¤ºè¿™ä¸ªé•¿è¿æ¥æœ€å¤šæ¥æ”¶100æ¬¡è¯·æ±‚å°±æ–­å¼€ã€‚\n\n#### å½“ HTTP é‡‡ç”¨ keepalive æ¨¡å¼ï¼Œå½“å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘ç”Ÿè¯·æ±‚ä¹‹åï¼Œå®¢æˆ·ç«¯å¦‚ä½•åˆ¤æ–­æœåŠ¡å™¨çš„æ•°æ®å·²ç»å‘ç”Ÿå®Œæˆï¼Ÿ\n1. ä½¿ç”¨æ¶ˆæ¯é¦–éƒ¨å­—æ®µ Conent-Lengthï¼šConent-Lengthè¡¨ç¤ºå®ä½“å†…å®¹é•¿åº¦ï¼Œå®¢æˆ·ç«¯å¯ä»¥æ ¹æ®è¿™ä¸ªå€¼æ¥åˆ¤æ–­æ•°æ®æ˜¯å¦æ¥æ”¶å®Œæˆã€‚\n\n2. ä½¿ç”¨æ¶ˆæ¯é¦–éƒ¨å­—æ®µ Transfer-Encodingï¼šchunkåœ¨æœ€åæœ‰ä¸€ä¸ªç©º chunked å—ï¼Œè¡¨æ˜æœ¬æ¬¡ä¼ è¾“æ•°æ®ç»“æŸã€‚ \n\n### HTTP Pipeliningï¼ˆHTTP ç®¡çº¿åŒ–ï¼‰\né»˜è®¤æƒ…å†µä¸‹ HTTP åè®®ä¸­æ¯ä¸ªä¼ è¾“å±‚è¿æ¥åªèƒ½æ‰¿è½½ä¸€ä¸ª HTTP è¯·æ±‚å’Œå“åº”ï¼Œæµè§ˆå™¨ä¼šåœ¨æ”¶åˆ°ä¸Šä¸€ä¸ªè¯·æ±‚çš„å“åº”ä¹‹åï¼Œå†å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚åœ¨ä½¿ç”¨æŒä¹…è¿æ¥çš„æƒ…å†µä¸‹ï¼ŒæŸä¸ªè¿æ¥ä¸Šæ¶ˆæ¯çš„ä¼ é€’ç±»ä¼¼äºè¯·æ±‚1 -> å“åº”1 -> è¯·æ±‚2 -> å“åº”2 -> è¯·æ±‚3 -> å“åº”3ã€‚\n\nHTTP Pipeliningï¼ˆç®¡çº¿åŒ–ï¼‰æ˜¯å°†å¤šä¸ª HTTP è¯·æ±‚æ•´æ‰¹æäº¤çš„æŠ€æœ¯ï¼Œåœ¨ä¼ é€è¿‡ç¨‹ä¸­ä¸éœ€ç­‰å¾…æœåŠ¡ç«¯çš„å›åº”ã€‚ä½¿ç”¨ HTTP Pipelining æŠ€æœ¯ä¹‹åï¼ŒæŸä¸ªè¿æ¥ä¸Šçš„æ¶ˆæ¯å˜æˆäº†ç±»ä¼¼è¿™æ ·è¯·æ±‚1 -> è¯·æ±‚2 -> è¯·æ±‚3 -> å“åº”1 -> å“åº”2 -> å“åº”3\n\n### ä¼šè¯è·Ÿè¸ª\n1. ä»€ä¹ˆæ˜¯ä¼šè¯ï¼Ÿ\n\nå®¢æˆ·ç«¯æ‰“å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥å‘å‡ºè¯·æ±‚åˆ°æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯è¯·æ±‚çš„å…¨è¿‡ç¨‹ç§°ä¹‹ä¸ºä¼šè¯ã€‚\n\n2. ä»€ä¹ˆæ˜¯ä¼šè¯è·Ÿè¸ªï¼Ÿ\n\nä¼šè¯è·Ÿè¸ªæŒ‡çš„æ˜¯å¯¹åŒä¸€ä¸ªç”¨æˆ·å¯¹æœåŠ¡å™¨çš„è¿ç»­çš„è¯·æ±‚å’Œæ¥å—å“åº”çš„ç›‘è§†ã€‚\n\n3. ä¸ºä»€ä¹ˆéœ€è¦ä¼šè¯è·Ÿè¸ªï¼Ÿ\n\næµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡æ˜¯é€šè¿‡HTTPåè®®è¿›è¡Œé€šä¿¡çš„ï¼Œè€ŒHTTPåè®®æ˜¯â€æ— çŠ¶æ€â€çš„åè®®ï¼Œå®ƒä¸èƒ½ä¿å­˜å®¢æˆ·çš„ä¿¡æ¯ï¼Œå³ä¸€æ¬¡å“åº”å®Œæˆä¹‹åè¿æ¥å°±æ–­å¼€äº†ï¼Œä¸‹ä¸€æ¬¡çš„è¯·æ±‚éœ€è¦é‡æ–°è¿æ¥ï¼Œè¿™æ ·å°±éœ€è¦åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€ä¸ªç”¨æˆ·ï¼Œæ‰€ä»¥æ‰æœ‰ä¼šè¯è·Ÿè¸ªæŠ€æœ¯æ¥å®ç°è¿™ç§è¦æ±‚ã€‚\n\nCookie\n\nCookie æ˜¯Web æœåŠ¡å™¨å‘é€ç»™å®¢æˆ·ç«¯çš„ä¸€å°æ®µä¿¡æ¯ï¼Œå®¢æˆ·ç«¯è¯·æ±‚æ—¶å¯ä»¥è¯»å–è¯¥ä¿¡æ¯å‘é€åˆ°æœåŠ¡å™¨ç«¯ï¼Œè¿›è€Œè¿›è¡Œç”¨æˆ·çš„è¯†åˆ«ã€‚å¯¹äºå®¢æˆ·ç«¯çš„æ¯æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡å™¨éƒ½ä¼šå°† Cookie å‘é€åˆ°å®¢æˆ·ç«¯,åœ¨å®¢æˆ·ç«¯å¯ä»¥è¿›è¡Œä¿å­˜,ä»¥ä¾¿ä¸‹æ¬¡ä½¿ç”¨ã€‚\n\nå®¢æˆ·ç«¯å¯ä»¥é‡‡ç”¨ä¸¤ç§æ–¹å¼æ¥ä¿å­˜è¿™ä¸ª Cookie å¯¹è±¡ï¼Œä¸€ç§æ–¹å¼æ˜¯ä¿å­˜åœ¨å®¢æˆ·ç«¯å†…å­˜ä¸­ï¼Œç§°ä¸ºä¸´æ—¶ Cookieï¼Œæµè§ˆå™¨å…³é—­åè¿™ä¸ª Cookie å¯¹è±¡å°†æ¶ˆå¤±ã€‚å¦å¤–ä¸€ç§æ–¹å¼æ˜¯ä¿å­˜åœ¨å®¢æˆ·æœºçš„ç£ç›˜ä¸Šï¼Œç§°ä¸ºæ°¸ä¹… Cookieã€‚ä»¥åå®¢æˆ·ç«¯åªè¦è®¿é—®è¯¥ç½‘ç«™ï¼Œå°±ä¼šå°†è¿™ä¸ª Cookie å†æ¬¡å‘é€åˆ°æœåŠ¡å™¨ä¸Šï¼Œå‰ææ˜¯è¿™ä¸ª Cookie åœ¨æœ‰æ•ˆæœŸå†…ï¼Œè¿™æ ·å°±å®ç°äº†å¯¹å®¢æˆ·çš„è·Ÿè¸ªã€‚\n\nCookie æ˜¯å¯ä»¥è¢«å®¢æˆ·ç«¯ç¦ç”¨çš„ã€‚\n\nSession:\n\næ¯ä¸€ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªä¸åŒçš„ sessionï¼Œå„ä¸ªç”¨æˆ·ä¹‹é—´æ˜¯ä¸èƒ½å…±äº«çš„ï¼Œæ˜¯æ¯ä¸ªç”¨æˆ·æ‰€ç‹¬äº«çš„ï¼Œåœ¨ session ä¸­å¯ä»¥å­˜æ”¾ä¿¡æ¯ã€‚\n\nåœ¨æœåŠ¡å™¨ç«¯ä¼šåˆ›å»ºä¸€ä¸ª session å¯¹è±¡ï¼Œäº§ç”Ÿä¸€ä¸ª sessionID æ¥æ ‡è¯†è¿™ä¸ª session å¯¹è±¡ï¼Œç„¶åå°†è¿™ä¸ª sessionID æ”¾å…¥åˆ° Cookie ä¸­å‘é€åˆ°å®¢æˆ·ç«¯ï¼Œä¸‹ä¸€æ¬¡è®¿é—®æ—¶ï¼ŒsessionID ä¼šå‘é€åˆ°æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œè¯†åˆ«ä¸åŒçš„ç”¨æˆ·ã€‚\n\nSession çš„å®ç°ä¾èµ–äº Cookieï¼Œå¦‚æœ Cookie è¢«ç¦ç”¨ï¼Œé‚£ä¹ˆ session ä¹Ÿå°†å¤±æ•ˆã€‚\n\n### è·¨ç«™æ”»å‡»\n\n#### CSRFï¼ˆCross-site request forgeryï¼Œè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼‰\n\n- å¦‚ä½•é˜²èŒƒ CSRF æ”»å‡»ï¼Ÿ\n\n1. å…³é”®æ“ä½œåªæ¥å— POST è¯·æ±‚ï¼Œget ä¸ä¿®æ”¹æ•°æ®\n2. éªŒè¯ç  å¼ºåˆ¶ç”¨æˆ·å¿…é¡»ä¸åº”ç”¨è¿›è¡Œäº¤äº’ã€‚\n3. æ£€æµ‹referer é€šè¿‡Refererè¯†åˆ« æ ¹æ®HTTPåè®®ï¼Œåœ¨HTTPå¤´ä¸­æœ‰ä¸€ä¸ªå­—æ®µå«Refererï¼Œå®ƒè®°å½•äº†è¯¥HTTPè¯·æ±‚çš„æ¥æºåœ°å€ã€‚åœ¨é€šå¸¸æƒ…å†µä¸‹ï¼Œè®¿é—®ä¸€ä¸ªå®‰å…¨å—é™çš„é¡µé¢çš„è¯·æ±‚éƒ½æ¥è‡ªäºåŒä¸€ä¸ªç½‘ç«™ã€‚\n4. è¯·æ±‚æ ¡éªŒ\n\n#### XSSï¼ˆCross Site Scriptingï¼Œè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰\n\nXSS å…¨ç§°â€œè·¨ç«™è„šæœ¬â€ï¼Œæ˜¯æ³¨å…¥æ”»å‡»çš„ä¸€ç§ã€‚å…¶ç‰¹ç‚¹æ˜¯ä¸å¯¹æœåŠ¡å™¨ç«¯é€ æˆä»»ä½•ä¼¤å®³ï¼Œè€Œæ˜¯é€šè¿‡ä¸€äº›æ­£å¸¸çš„ç«™å†…äº¤äº’é€”å¾„ï¼Œä¾‹å¦‚å‘å¸ƒè¯„è®ºï¼Œæäº¤å«æœ‰ JavaScript çš„å†…å®¹æ–‡æœ¬ã€‚è¿™æ—¶æœåŠ¡å™¨ç«¯å¦‚æœæ²¡æœ‰è¿‡æ»¤æˆ–è½¬ä¹‰æ‰è¿™äº›è„šæœ¬ï¼Œä½œä¸ºå†…å®¹å‘å¸ƒåˆ°äº†é¡µé¢ä¸Šï¼Œå…¶ä»–ç”¨æˆ·è®¿é—®è¿™ä¸ªé¡µé¢çš„æ—¶å€™å°±ä¼šè¿è¡Œè¿™äº›è„šæœ¬ã€‚\n\nXSS æ˜¯å®ç° CSRF çš„è¯¸å¤šé€”å¾„ä¸­çš„ä¸€æ¡ï¼Œä½†ç»å¯¹ä¸æ˜¯å”¯ä¸€çš„ä¸€æ¡ã€‚ä¸€èˆ¬ä¹ æƒ¯ä¸ŠæŠŠé€šè¿‡ XSS æ¥å®ç°çš„ CSRF ç§°ä¸º XSRFã€‚\n\nXSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»ï¼‰æ˜¯æŒ‡æ”»å‡»è€…åœ¨è¿”å›çš„HTMLä¸­åµŒå…¥jsè„šæœ¬ï¼Œä¸ºäº†å‡è½»è¿™äº›æ”»å‡»ï¼Œéœ€è¦åœ¨HTTPå¤´éƒ¨é…ä¸Šset-cookieï¼šhttp-onlyè¿™ä¸ªå±æ€§å¯ä»¥é˜²æ­¢xssï¼Œå®ƒä¼šç¦æ­¢jsè„šæœ¬è®¿é—®cookieã€‚secureè¿™ä¸ªå±æ€§å‘Šè¯‰æµè§ˆå™¨ä»…åœ¨è¯·æ±‚ä¸ºhttpsæ—¶å‘é€cookieã€‚\n\nåˆ†ä¸ºéæŒä¹…å‹(åå°„å‹XSS)ï¼Œä¸€æ¬¡æ”»å‡»ï¼›å­˜å‚¨å‹XSSå­˜å‚¨åˆ°æœåŠ¡å™¨ä¸Šï¼Œå¤šæ¬¡æ”»å‡»ã€‚\n\n- å¦‚ä½•é˜²èŒƒ XSS\n1. cookieè®¾ç½®http-onlyï¼Œä¸å…è®¸jsä¿®æ”¹è®¿é—®cookie\n2. è¾“å…¥æ£€æŸ¥ã€è¾“å‡ºæ£€æŸ¥ï¼Œå¯¹å˜é‡è¾“å…¥åˆ°HTMLé¡µé¢çš„ä»£ç è¿›è¡Œç¼–ç æˆ–è½¬ä¹‰\n\n### httpç¼“å­˜\n`ç¼“å­˜æ˜¯æŒ‡æµè§ˆå™¨ï¼ˆå®¢æˆ·ç«¯ï¼‰åœ¨æœ¬åœ°ç£ç›˜ä¸­å¯¹è®¿é—®è¿‡çš„èµ„æºä¿å­˜çš„å‰¯æœ¬æ–‡ä»¶ã€‚`\næµè§ˆå™¨ç¼“å­˜ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š\n\n1. å‡å°‘é‡å¤æ•°æ®è¯·æ±‚ï¼Œé¿å…é€šè¿‡ç½‘ç»œå†æ¬¡åŠ è½½èµ„æºï¼ŒèŠ‚çœæµé‡ã€‚\n2. é™ä½æœåŠ¡å™¨çš„å‹åŠ›ï¼Œæå‡ç½‘ç«™æ€§èƒ½ã€‚\n3. åŠ å¿«å®¢æˆ·ç«¯åŠ è½½ç½‘é¡µçš„é€Ÿåº¦ï¼Œ æå‡ç”¨æˆ·ä½“éªŒã€‚\n\næµè§ˆå™¨ç¼“å­˜åˆ†ä¸ºå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ï¼Œä¸¤è€…æœ‰ä¸¤ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„åŒºåˆ«ï¼š\n\n- å¦‚æœæµè§ˆå™¨å‘½ä¸­å¼ºç¼“å­˜ï¼Œåˆ™ä¸éœ€è¦ç»™æœåŠ¡å™¨å‘è¯·æ±‚ï¼›è€Œåå•†ç¼“å­˜æœ€ç»ˆç”±æœåŠ¡å™¨æ¥å†³å®šæ˜¯å¦ä½¿ç”¨ç¼“å­˜ï¼Œå³å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´å­˜åœ¨ä¸€æ¬¡é€šä¿¡ã€‚\n- åœ¨ chrome ä¸­å¼ºç¼“å­˜ï¼ˆè™½ç„¶æ²¡æœ‰å‘å‡ºçœŸå®çš„ http è¯·æ±‚ï¼‰çš„è¯·æ±‚çŠ¶æ€ç è¿”å›æ˜¯ 200 (from cache)ï¼›è€Œåå•†ç¼“å­˜å¦‚æœå‘½ä¸­èµ°ç¼“å­˜çš„è¯ï¼Œè¯·æ±‚çš„çŠ¶æ€ç æ˜¯ 304 (not modified)ã€‚ ä¸åŒæµè§ˆå™¨çš„ç­–ç•¥ä¸åŒï¼Œåœ¨ Fire Fox ä¸­ï¼Œfrom cache çŠ¶æ€ç æ˜¯ 304.\n\n>  from cache ä¼šåˆ†ä¸º from disk cache å’Œ from memory cache. ä»å†…å­˜ä¸­è·å–æœ€å¿«ï¼Œä½†æ˜¯æ˜¯ session çº§åˆ«çš„ç¼“å­˜ï¼Œå…³é—­æµè§ˆå™¨ä¹‹åå°±æ²¡æœ‰äº†ã€‚\n\n- å¼ºç¼“å­˜ï¼ˆfrom cacheï¼‰å¼ºåˆ¶æµè§ˆå™¨ä½¿ç”¨æœ¬åœ°ç¼“å­˜\n    - Cache-control(å“åº”å¤´)\n    - Expires(å“åº”å¤´)\n    - Pragma\n- åå•†ç¼“å­˜ï¼ˆ304è¿˜æ˜¯è¦å’ŒæœåŠ¡å™¨é€šä¿¡ä¸€æ¬¡ï¼‰\n    - last-modified(å“åº”å¤´)\n    - Etag(å“åº”å¤´)\n    - If-None-Match(è¯·æ±‚å¤´)\n    - If-Modified-Since(è¯·æ±‚å¤´)\n\nä¼˜å…ˆçº§\n>  Cache-Control  > Expires > Etag > Last-Modified\n\nHTTP ç¼“å­˜æœºåˆ¶æµç¨‹å›¾:\n![ç¼“å­˜æœºåˆ¶æµç¨‹å›¾](http://cdn.mydearest.cn/blog/images/http-cache.jpeg)\n\n![æµç¨‹å›¾](http://cdn.mydearest.cn/blog/images/http-cache2.png)\n\n### å¦‚ä½•è®¾ç½®å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜\n1. åç«¯æœåŠ¡å™¨ï¼Œå†™å…¥ä»£ç é€»è¾‘ä¸­ï¼š\n```js\nres.setHeader('max-age': '3600 public')\nres.setHeader(etag: '5c20abbd-e2e8')\nres.setHeader('last-modified': Mon, 24 Dec 2018 09:49:49 GMT)\n```\n\n2. Nginx é…ç½®\n```js\nadd_header Cache-Control \"max-age=3600\"\n```\n\n## HTTPSåŸºæœ¬è¿‡ç¨‹\nHTTPSå³ HTTP over TLSï¼Œæ˜¯ä¸€ç§åœ¨åŠ å¯†ä¿¡é“è¿›è¡ŒHTTPå†…å®¹ä¼ è¾“çš„åè®®\n\n> TLS çš„æ—©æœŸç‰ˆæœ¬å«åš SSLã€‚SSL çš„ 1.0, 2.0, 3.0 ç‰ˆæœ¬å‡å·²ç»è¢«åºŸå¼ƒï¼Œå‡ºäºå®‰å…¨é—®é¢˜è€ƒè™‘å¹¿å¤§æµè§ˆå™¨ä¹Ÿä¸å†å¯¹è€æ—§çš„ SSL ç‰ˆæœ¬è¿›è¡Œæ”¯æŒäº†ï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬å°±ç»Ÿä¸€ä½¿ç”¨ TLS åç§°äº†ã€‚","tags":["http"],"categories":["çŸ¥è¯†"]},{"title":"ç»´ç”Ÿç´ ","url":"%2F2019%2F%E7%BB%B4%E7%94%9F%E7%B4%A0.html","content":"\n## ç»´ç”Ÿç´ åˆ†ç±»\n\n### ç»´ç”Ÿç´ A\n\n> é•¿æœŸç”¨çœ¼ã€‚\n\nç»´ç”Ÿç´ Aç¼ºä¹ï¼Œä¼šå¸¦æ¥çœ¼ç›å¹²æ¶©ï¼Œå¤œé—´è§†åŠ›ä¸‹é™ç­‰é—®é¢˜ã€‚\n\n![ç»´ç”Ÿç´ A](http://cdn.mydearest.cn/blog/images/VA.jpg)\n\n---\n<!--more-->\n\n### ç»´ç”Ÿç´ C\n\n> æœè”¬æ²¡åƒå¤Ÿçš„\n\n![ç»´ç”Ÿç´ A](http://cdn.mydearest.cn/blog/images/VC.jpg)\n\n### ç»´ç”Ÿç´ D\n\n> å¤ªé˜³æ™’çš„å°‘ï¼Œå½±å“é’™å¸æ”¶\n\n### ç»´ç”Ÿç´ B\n\nBç±»çš„ç»´ç”Ÿç´ æœ‰å¾ˆå¤šç§ã€‚\n\n#### ç¡«èƒºç´ (ç»´ç”Ÿç´ B1)\n\nè¿åŠ¨è¶Šå¤šï¼Œæ¶ˆè€—èƒ½é‡ï¼ˆä¸»è¦æ˜¯ç¢³æ°´åŒ–åˆç‰©ï¼‰è¶Šå¤šï¼Œç¡«èƒºç´ éœ€è¦ä¹Ÿè¶Šå¤šã€‚éšç€è¿›é£Ÿé‡å¢åŠ ï¼Œç¡«èƒºç´ æ‘„å…¥å¯èƒ½ä¹Ÿä¼šå¢åŠ ï¼Œ**æ‰€ä»¥ä¸€èˆ¬ä¸å¿…é¢å¤–è¡¥å……ã€‚**\n\n#### æ ¸é»„ç´ ï¼ˆç»´ç”Ÿç´ B2ï¼‰\n\næ ¸é»„ç´ è·Ÿè›‹ç™½è´¨ã€è„‚è‚ªã€ç¢³æ°´åŒ–åˆç‰©çš„èƒ½é‡äº§ç”Ÿéƒ½æœ‰å…³ç³»ã€‚æˆ‘å›½ç›®å‰æ˜¯æˆå¹´ç”·æ€§1.4æ¯«å…‹/å¤©ï¼Œå¥³æ€§1.2æ¯«å…‹/å¤©ã€‚è¿åŠ¨äººç¾¤ï¼Œå¢åŠ åˆ°æ¨èé‡çš„1-2å€è¶³çŸ£ã€‚é£Ÿç‰©è¡¥å……çš„è¯ï¼Œå¹³æ—¶å¯ä»¥å¤šåƒè‚‰ã€è›‹å’Œå¥¶åˆ¶å“ã€‚èŠ±æ¤°èœã€èŠ¦ç¬‹ã€è èœè¿™ç±»ç»¿è‰²è”¬èœæ ¸é»„ç´ å«é‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚**è¿™äº›ä¸œè¥¿åƒçš„å°‘çš„è¯ï¼Œå¯ä»¥è€ƒè™‘è¡¥å……å‰‚ã€‚**\n\n#### çƒŸé…¸ï¼ˆç»´ç”Ÿç´ B3ï¼‰\n\nçƒŸé…¸è·Ÿè›‹ç™½è´¨ã€ç¢³æ°´åŒ–åˆç‰©ã€è„‚è‚ªçš„èƒ½é‡äº§ç”Ÿéƒ½æœ‰å…³ã€‚å«çƒŸé…¸æ¯”è¾ƒä¸°å¯Œçš„é£Ÿç‰©æœ‰è‚‰ç±»ã€è°·ç±»ã€è±†ç±»é£Ÿç‰©ã€‚å› ä¸ºè‰²æ°¨é…¸åœ¨ä½“å†…èƒ½è½¬åŒ–æˆçƒŸé…¸ï¼ŒåŠ¨ç‰©è›‹ç™½æ‘„å…¥æ¯”è¾ƒå¤šçš„äººï¼Œ**çƒŸé…¸ä¸€èˆ¬éƒ½ä¸ä¼šç¼ºä¹**ã€‚æ‰€ä»¥ï¼Œå¸¸åƒè¾ƒå¤šè‚‰çš„äººï¼Œå³ä¾¿æ˜¯è¿åŠ¨äººç¾¤ï¼Œä¹ŸåŸºæœ¬ä¸ç”¨é¢å¤–è¡¥å……çƒŸé…¸ã€‚\n\n#### ç»´ç”Ÿç´ B6\n\nè¿™ç§ç»´ç”Ÿç´ ä¸»è¦è·Ÿç³–åŸå’Œè›‹ç™½è´¨ä»£è°¢æœ‰å…³ã€‚ä½“å†…å‚¨å­˜çš„ç³–åŸæƒ³å˜æˆè‘¡è„ç³–ï¼Œæ°¨åŸºé…¸æƒ³è½¬æ¢åˆ©ç”¨ï¼Œéƒ½éœ€è¦ç»´ç”Ÿç´ B6ï¼Œæ‰€ä»¥è¿™ä¸œè¥¿è·Ÿè¿åŠ¨å…³ç³»å¯†åˆ‡ã€‚\n\nç»´ç”Ÿç´ B6è·Ÿåˆ«çš„Bæ—ç»´ç”Ÿç´ ä¸ä¸€æ ·ï¼Œè¿™ç©æ„æœ‰æ¯’æ€§ã€‚ä½†ä¸€èˆ¬éƒ½è¦è¾¾åˆ°è¯ç‰©å‰‚é‡æ‰ä¼šä¸­æ¯’ã€‚æ¯”å¦‚æ²»ç–—ç»æœŸæŒ‰ç»¼åˆç—‡ã€å“®å–˜æœ‰æ—¶ä¼šç”¨åˆ°B6ã€‚ç»´ç”Ÿç´ B6çš„æœ€é«˜è€å—ä¸Šé™æ˜¯100æ¯«å…‹/å¤©ã€‚ä½äºè¿™ä¸ªå‰‚é‡ä¸€èˆ¬æ²¡æœ‰å¤ªå¤§é—®é¢˜ã€‚\n\næ¯”è¾ƒå®‰å…¨çš„è¡¥å……æ–¹å¼è¿˜æ˜¯é£Ÿç‰©ï¼Œè‚‰ã€è”¬èœã€åšæœã€é¦™è•‰ã€å…¨è°·ç‰©é£Ÿå“é‡Œå«B6éƒ½å¾ˆä¸°å¯Œã€‚æ¯”å¦‚100å…‹é¸¡èƒ¸è‚‰é‡Œå°±æœ‰å¤§çº¦0.6æ¯«å…‹ç»´ç”Ÿç´ B6ã€‚æ‰€ä»¥ï¼Œè¿™äº›ä¸œè¥¿åƒçš„æ¯”è¾ƒå¤šçš„è¯ï¼Œä¸€èˆ¬ä¸ç”¨åƒè¡¥å……å‰‚é¢å¤–è¡¥å……ã€‚\n\n#### æ©™å­ã€æ©˜å­ã€æŸšå­ã€é’æŸ ã€è¥¿æŸšã€æŸ æª¬ã€èŠ¦æŸ‘çš„å…³ç³»ã€‚\n\næ©™å­æ˜¯æ©˜å­å’ŒæŸšå­æ‚äº¤æ¥çš„ï¼Œæ©˜å­å’Œæ©™å­æ‚äº¤æˆäº†èŠ¦æŸ‘ï¼ŒæŸšå­å’Œæ©™å­åˆæ‚äº¤æˆäº†é’æŸ ï¼Œæ©™å­å’Œé’æŸ æ‚äº¤äº†æŸ æª¬ï¼Œæ©™å­å’ŒæŸšå­æ‚äº¤æˆäº†è¥¿æŸšã€‚","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"title":"vuexå­¦ä¹ ç¬”è®°","url":"%2F2019%2Fvuex%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html","content":"\n## vuex\næ•°æ®é©±åŠ¨æ¨¡æ¿ï¼ˆç®¡ç†å…±äº«çŠ¶æ€ï¼‰\næ ¸å¿ƒstoreä»“åº“ï¼ˆå“åº”å¼çš„çŠ¶æ€å­˜å‚¨ï¼‰\næäº¤mutationæ‰èƒ½ä¿®æ”¹å†…éƒ¨çŠ¶æ€ è®°å½•æ¯æ¬¡æ”¹å˜ä¿å­˜çŠ¶æ€å¿«ç…§\n\n```js\nconst store = new Vuex.Store({\n    state:{\n        count:0\n    },\n    mutations: {\n        increase(state){\n            state.count++;\n        }\n    },\n    // å¼€å¯ä¸¥æ ¼æ¨¡å¼\n    strict: process.env.NODE_ENV !== 'production'\n    // åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ— è®ºä½•æ—¶å‘ç”Ÿäº†çŠ¶æ€å˜æ›´ä¸”ä¸æ˜¯ç”± mutation å‡½æ•°å¼•èµ·çš„ï¼Œå°†ä¼šæŠ›å‡ºé”™è¯¯ã€‚è¿™èƒ½ä¿è¯æ‰€æœ‰çš„çŠ¶æ€å˜æ›´éƒ½èƒ½è¢«è°ƒè¯•å·¥å…·è·Ÿè¸ªåˆ°ã€‚\n})\n\nstore.commit('increase');\nstore.state.count;\n```\n\nä¸è¦åœ¨å‘å¸ƒç¯å¢ƒä¸‹å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼ä¸¥æ ¼æ¨¡å¼ä¼šæ·±åº¦ç›‘æµ‹çŠ¶æ€æ ‘æ¥æ£€æµ‹ä¸åˆè§„çš„çŠ¶æ€å˜æ›´â€”â€”è¯·ç¡®ä¿åœ¨å‘å¸ƒç¯å¢ƒä¸‹å…³é—­ä¸¥æ ¼æ¨¡å¼ï¼Œä»¥é¿å…æ€§èƒ½æŸå¤±ã€‚\n\n---\n<!--more-->\n\n### stateï¼ˆå•ä¸€çŠ¶æ€æ ‘ï¼‰\n\nç”¨ä¸€ä¸ªå¯¹è±¡åŒ…å«æ‰€æœ‰çš„åº”ç”¨å±‚çº§çŠ¶æ€\n\n- ä»storeå®ä¾‹ä¸­è¯»å–çŠ¶æ€\n```js\n// è®¡ç®—å±æ€§\nconst Counter = {\n  template: `<div>{{ count }}</div>`,\n  computed: {\n    count () {\n      return store.state.count\n    }\n  }\n}\n```\n- ä»æ ¹ç»„ä»¶æ³¨å…¥å®ä¾‹\n```js\nconst app = new Vue({\n  el: '#app',\n  // æŠŠ store å¯¹è±¡æä¾›ç»™ â€œstoreâ€ é€‰é¡¹ï¼Œè¿™å¯ä»¥æŠŠ store çš„å®ä¾‹æ³¨å…¥æ‰€æœ‰çš„å­ç»„ä»¶\n  store,\n  components: { Counter },\n  template: `\n    <div class=\"app\">\n      <counter></counter>\n    </div>\n  `\n})\n// è¯»å–\nthis.$store.state.count\n```\n\n- å¤šä¸ªå±æ€§ä½¿ç”¨mapState()è¾…åŠ©å‡½æ•°\n```js\ncomputed: mapState({\n    count: state => state.count,\n    name: state=> state.name\n})\n// å¦‚æœå±æ€§ä¸stateå­èŠ‚ç‚¹åç§°ç›¸åŒ ä¼ å…¥å­—ç¬¦ä¸²æ•°ç»„\n// æ˜ å°„ this.count ä¸º store.state.count\nmapState(['count'])\n```\n\n### getterå¯¹stateæ•°æ®çš„æ´¾ç”Ÿæ“ä½œï¼ˆå…±äº«æ•°æ®çš„å…±äº«å‡½æ•°ï¼‰\n```js\nconst store = new Vuex.Store({\n    state:{\n        todos: [\n            { id: 1, text: '...', done: true },\n            { id: 2, text: '...', done: false }\n        ]\n    },\n    getters: {\n        doneTodos: state => {\n            return state.todos.filter(todo => todo.done)\n        }\n        // æ¥æ”¶getterå‚æ•°\n        doneTodosCount: (state, getters) => {\n            return getters.doneTodos.length\n        }\n        // æ–¹æ³•\n        getTodoById: (state) => (id) => {\n            return state.todos.find(todo => todo.id === id)\n        }\n    }\n})\n// è®¿é—®\nstore.getters.doneTodos // -> [{ id: 1, text: '...', done: true }]\n```\n- mapGetters()è¾…åŠ©å‡½æ•°\n```js\ncomputed: {\n    // ä½¿ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦å°† getter æ··å…¥ computed å¯¹è±¡ä¸­\n    ...mapGetters([\n        'doneTodosCount',\n        'anotherGetter',\n        // ...\n    ])\n}\nmapGetters({\n    // æŠŠ `this.doneCount` æ˜ å°„ä¸º `this.$store.getters.doneTodosCount`\n    doneCount: 'doneTodosCount'\n})\n```\n\n### mutation\næäº¤mutation\n```js\nstore.commit(\"increase\")\n// ä¼ å‚\nstore.commit('increase', 10)\n// æœ€å¥½è¿˜æ˜¯è§„èŒƒä¼ payloadå¯¹è±¡\nstore.commit('increase', {\n    amount:10\n})\n// å¯¹è±¡é£æ ¼æäº¤\nstore.commit({\n  type: 'increase',\n  amount: 10\n})\n```\n1.æœ€å¥½æå‰åœ¨ä½ çš„ store ä¸­åˆå§‹åŒ–å¥½æ‰€æœ‰æ‰€éœ€å±æ€§ã€‚\n\n2.å½“éœ€è¦åœ¨å¯¹è±¡ä¸Šæ·»åŠ æ–°å±æ€§æ—¶ï¼Œä½ åº”è¯¥\n\nâ€¢ä½¿ç”¨ Vue.set(obj, 'newProp', 123), æˆ–è€…\n\nâ€¢ä»¥æ–°å¯¹è±¡æ›¿æ¢è€å¯¹è±¡ã€‚\n```js\nstate.obj = { ...state.obj, newProp: 123 }\n```\n\n- å¸¸é‡æ›¿ä»£äº‹ä»¶ç±»å‹\n```js\n// mutation-types.js\nexport const SOME_MUTATION = 'SOME_MUTATION'\n```\n```js\n// store.js\nimport Vuex from 'vuex'\nimport { SOME_MUTATION } from './mutation-types'\n\nconst store = new Vuex.Store({\n  state: { ... },\n  mutations: {\n    // æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ES2015 é£æ ¼çš„è®¡ç®—å±æ€§å‘½ååŠŸèƒ½æ¥ä½¿ç”¨ä¸€ä¸ªå¸¸é‡ä½œä¸ºå‡½æ•°å\n    [SOME_MUTATION] (state) {\n      // mutate state\n    }\n  }\n})\n```\n\n**mutationå¿…é¡»æ˜¯åŒæ­¥å‡½æ•°**\nä¸€æ¡ mutation è¢«è®°å½•ï¼Œdevtools éƒ½éœ€è¦æ•æ‰åˆ°å‰ä¸€çŠ¶æ€å’Œåä¸€çŠ¶æ€çš„å¿«ç…§ã€‚devtools ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™å›è°ƒå‡½æ•°å®é™…ä¸Šè¢«è°ƒç”¨â€”â€”å®è´¨ä¸Šä»»ä½•åœ¨å›è°ƒå‡½æ•°ä¸­è¿›è¡Œçš„çŠ¶æ€çš„æ”¹å˜éƒ½æ˜¯ä¸å¯è¿½è¸ªçš„ã€‚\n\n#### ç»„ä»¶ä¸­æäº¤mutation\n1. \n```js\nthis.$store.commit('xxx')\n```\n\n2. mapMutations è¾…åŠ©å‡½æ•°\n```js\nmethods: {\n    ...mapMutations([\n      'increase', // å°† `this.increase()` æ˜ å°„ä¸º `this.$store.commit('increase')`\n\n      // `mapMutations` ä¹Ÿæ”¯æŒè½½è·ï¼š\n      'increaseBy' // å°† `this.increaseBy(amount)` æ˜ å°„ä¸º `this.$store.commit('increaseBy', amount)`\n    ]),\n    ...mapMutations({\n      add: 'increase' // å°† `this.add()` æ˜ å°„ä¸º `this.$store.commit('increase')`\n    })\n}\n```\n\n### action\n```js\nstore.commit('increment')\n// ä»»ä½•ç”± \"increment\" å¯¼è‡´çš„çŠ¶æ€å˜æ›´éƒ½åº”è¯¥åœ¨æ­¤åˆ»å®Œæˆã€‚\n```\n\nAction ç±»ä¼¼äº mutationï¼Œä¸åŒåœ¨äºï¼š\nâ€¢Action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ã€‚\nâ€¢Action å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚\n\n```js\nconst store = new Vuex.Store({\n  state: {\n    count: 0\n  },\n  mutations: {\n    increase (state) {\n      state.count++\n    }\n  },\n  actions: {\n    increase (context) {\n      context.commit('increase')\n    },\n    increaseOr({commit}) {\n      commit('increase')\n    },\n    increaseAsync ({ commit }) {\n        // æ”¯æŒå¼‚æ­¥æ“ä½œ\n        setTimeout(() => {\n        commit('increment')\n        }, 1000)\n    }\n  }\n})\n```\nAction å‡½æ•°æ¥å—ä¸€ä¸ªä¸ store å®ä¾‹å…·æœ‰ç›¸åŒæ–¹æ³•å’Œå±æ€§çš„ context å¯¹è±¡ï¼Œå› æ­¤ä½ å¯ä»¥è°ƒç”¨ context.commit æäº¤ä¸€ä¸ª mutationï¼Œæˆ–è€…é€šè¿‡ context.state å’Œ context.getters æ¥è·å– state å’Œ gettersã€‚\n\n- è§¦å‘action\n```js\nstore.dispatch('increase')\n```\n- æ”¯æŒåŒæ ·çš„è½½è·æ–¹å¼å’Œå¯¹è±¡æ–¹å¼åˆ†å‘\n```js\n// ä»¥è½½è·å½¢å¼åˆ†å‘\nstore.dispatch('increaseAsync', {\n  amount: 10\n})\n\n// ä»¥å¯¹è±¡å½¢å¼åˆ†å‘\nstore.dispatch({\n  type: 'increaseAsync',\n  amount: 10\n})\n```\n\n```js\n// è´­ç‰©è½¦æ“ä½œå®ä¾‹\nactions: {\n  checkout ({ commit, state }, products) {\n    // æŠŠå½“å‰è´­ç‰©è½¦çš„ç‰©å“å¤‡ä»½èµ·æ¥\n    const savedCartItems = [...state.cart.added]\n    // å‘å‡ºç»“è´¦è¯·æ±‚ï¼Œç„¶åä¹è§‚åœ°æ¸…ç©ºè´­ç‰©è½¦\n    commit(types.CHECKOUT_REQUEST)\n    // è´­ç‰© API æ¥å—ä¸€ä¸ªæˆåŠŸå›è°ƒå’Œä¸€ä¸ªå¤±è´¥å›è°ƒ\n    shop.buyProducts(\n      products,\n      // æˆåŠŸæ“ä½œ\n      () => commit(types.CHECKOUT_SUCCESS),\n      // å¤±è´¥æ“ä½œ\n      () => commit(types.CHECKOUT_FAILURE, savedCartItems)\n    )\n  }\n}\n```\n\n#### ç»„ä»¶ä¸­åˆ†å‘action\nåœ¨ç»„ä»¶ä¸­ä½¿ç”¨ this.$store.dispatch('xxx') åˆ†å‘ actionï¼Œæˆ–è€…ä½¿ç”¨ mapActions è¾…åŠ©å‡½æ•°å°†ç»„ä»¶çš„ methods æ˜ å°„ä¸º store.dispatch è°ƒç”¨ï¼ˆéœ€è¦å…ˆåœ¨æ ¹èŠ‚ç‚¹æ³¨å…¥ storeï¼‰\n```js\nimport { mapActions } from 'vuex'\n\nexport default {\n  // ...\n  methods: {\n    ...mapActions([\n      'increase', // å°† `this.increase()` æ˜ å°„ä¸º `this.$store.dispatch('increase')`\n\n      // `mapActions` ä¹Ÿæ”¯æŒè½½è·ï¼š\n      'increaseBy' // å°† `this.increaseBy(amount)` æ˜ å°„ä¸º `this.$store.dispatch('increaseBy', amount)`\n    ]),\n    ...mapActions({\n      add: 'increase' // å°† `this.add()` æ˜ å°„ä¸º `this.$store.dispatch('increase')`\n    })\n  }\n}\n```\n\n#### actionç»„åˆåµŒå¥—\nstore.dispatch å¯ä»¥å¤„ç†è¢«è§¦å‘çš„ action çš„å¤„ç†å‡½æ•°è¿”å›çš„ Promiseï¼Œå¹¶ä¸” store.dispatch ä»æ—§è¿”å› Promise\n```js\nactions: {\n  actionA ({ commit }) {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        commit('someMutation')\n        resolve()\n      }, 1000)\n    })\n  },\n   actionB ({ dispatch, commit }) {\n    return dispatch('actionA').then(() => {\n      commit('someOtherMutation')\n    })\n  }\n}\n\nstore.dispatch('actionA').then(() => {\n  // ...\n})\n```\n\né‡‡ç”¨async await\n\n```js\n// getData() å’Œ getOtherData() è¿”å›çš„æ˜¯ Promise\nactions: {\n  async actionA ({ commit }) {\n    commit('gotData', await getData())\n  },\n  async actionB ({ dispatch, commit }) {\n    await dispatch('actionA') // ç­‰å¾… actionA å®Œæˆ\n    commit('gotOtherData', await getOtherData())\n  }\n}\n```\n\n### moduleåˆ‡åˆ†æ¨¡å—\n```js\nconst moduleA = {\n  state: { ... },\n  mutations: { ... },\n  actions: { ... },\n  getters: { ... }\n}\n\nconst moduleB = {\n  state: { ... },\n  mutations: { ... },\n  actions: { ... }\n}\n\nconst store = new Vuex.Store({\n  modules: {\n    a: moduleA,\n    b: moduleB\n  }\n})\n\nstore.state.a // -> moduleA çš„çŠ¶æ€\nstore.state.b // -> moduleB çš„çŠ¶æ€\n```\n\n- æ¨¡å—å†…éƒ¨çš„action\n```js\nconst moduleA = {\n  // ...\n  actions: {\n    incrementIfOddOnRootSum ({ state, commit, rootState }) {\n      if ((state.count + rootState.count) % 2 === 1) {\n        commit('increment')\n      }\n    }\n  },\n   getters: {\n    sumWithRootCount (state, getters, rootState) {\n      return state.count + rootState.count\n    }\n  }\n}\n```\n\n- å‘½åç©ºé—´\n```js\nconst store = new Vuex.Store({\n  modules: {\n    account: {\n      namespaced: true,\n\n      // æ¨¡å—å†…å®¹ï¼ˆmodule assetsï¼‰\n      state: { ... }, // æ¨¡å—å†…çš„çŠ¶æ€å·²ç»æ˜¯åµŒå¥—çš„äº†ï¼Œä½¿ç”¨ `namespaced` å±æ€§ä¸ä¼šå¯¹å…¶äº§ç”Ÿå½±å“\n      getters: {\n        isAdmin () { ... } // -> getters['account/isAdmin']\n      },\n      actions: {\n        login () { ... } // -> dispatch('account/login')\n      },\n      mutations: {\n        login () { ... } // -> commit('account/login')\n      },\n\n      // åµŒå¥—æ¨¡å—\n      modules: {\n        // ç»§æ‰¿çˆ¶æ¨¡å—çš„å‘½åç©ºé—´\n        myPage: {\n          state: { ... },\n          getters: {\n            profile () { ... } // -> getters['account/profile']\n          }\n        },\n\n        // è¿›ä¸€æ­¥åµŒå¥—å‘½åç©ºé—´\n        posts: {\n          namespaced: true,\n\n          state: { ... },\n          getters: {\n            popular () { ... } // -> getters['account/posts/popular']\n          }\n        }\n      }\n    }\n  }\n})\n```\n\n- åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—å†…è®¿é—®å…¨å±€å†…å®¹ï¼ˆGlobal Assetsï¼‰\n```js\nmodules: {\n  foo: {\n    namespaced: true,\n\n    getters: {\n      // åœ¨è¿™ä¸ªæ¨¡å—çš„ getter ä¸­ï¼Œ`getters` è¢«å±€éƒ¨åŒ–äº†\n      // ä½ å¯ä»¥ä½¿ç”¨ getter çš„ç¬¬å››ä¸ªå‚æ•°æ¥è°ƒç”¨ `rootGetters`\n      someGetter (state, getters, rootState, rootGetters) {\n        getters.someOtherGetter // -> 'foo/someOtherGetter'\n        rootGetters.someOtherGetter // -> 'someOtherGetter'\n      },\n      someOtherGetter: state => { ... }\n    },\n\n    actions: {\n      // åœ¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œ dispatch å’Œ commit ä¹Ÿè¢«å±€éƒ¨åŒ–äº†\n      // ä»–ä»¬å¯ä»¥æ¥å— `root` å±æ€§ä»¥è®¿é—®æ ¹ dispatch æˆ– commit\n      someAction ({ dispatch, commit, getters, rootGetters }) {\n        getters.someGetter // -> 'foo/someGetter'\n        rootGetters.someGetter // -> 'someGetter'\n\n        dispatch('someOtherAction') // -> 'foo/someOtherAction'\n        dispatch('someOtherAction', null, { root: true }) // -> 'someOtherAction'\n\n        commit('someMutation') // -> 'foo/someMutation'\n        commit('someMutation', null, { root: true }) // -> 'someMutation'\n      },\n      someOtherAction (ctx, payload) { ... }\n    }\n  }\n}\n```\n\n- åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—æ³¨å†Œå…¨å±€ action\nè‹¥éœ€è¦åœ¨å¸¦å‘½åç©ºé—´çš„æ¨¡å—æ³¨å†Œå…¨å±€ actionï¼Œå¯æ·»åŠ  root: trueï¼Œå¹¶å°†è¿™ä¸ª action çš„å®šä¹‰æ”¾åœ¨å‡½æ•° handler ä¸­ã€‚\n```js\n{\n  actions: {\n    someOtherAction ({dispatch}) {\n      dispatch('someAction')\n    }\n  },\n  modules: {\n    foo: {\n      namespaced: true,\n\n      actions: {\n        someAction: {\n          root: true,\n          handler (namespacedContext, payload) { ... } // -> 'someAction'\n        }\n      }\n    }\n  }\n}\n```\n\n- å¸¦å‘½åç©ºé—´çš„ç»‘å®šå‡½æ•°\n```js\ncomputed: {\n  ...mapState({\n    a: state => state.some.nested.module.a,\n    b: state => state.some.nested.module.b\n  })\n},\nmethods: {\n  ...mapActions([\n    'some/nested/module/foo', // -> this['some/nested/module/foo']()\n    'some/nested/module/bar' // -> this['some/nested/module/bar']()\n  ])\n}\n```\n\nç®€åŒ–\n```js\ncomputed: {\n  ...mapState('some/nested/module', {\n    a: state => state.a,\n    b: state => state.b\n  })\n},\nmethods: {\n  ...mapActions('some/nested/module', [\n    'foo', // -> this.foo()\n    'bar' // -> this.bar()\n  ])\n}\n```\n\nä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨ createNamespacedHelpers åˆ›å»ºåŸºäºæŸä¸ªå‘½åç©ºé—´è¾…åŠ©å‡½æ•°ã€‚å®ƒè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡é‡Œæœ‰æ–°çš„ç»‘å®šåœ¨ç»™å®šå‘½åç©ºé—´å€¼ä¸Šçš„ç»„ä»¶ç»‘å®šè¾…åŠ©å‡½æ•°\n```js\nimport { createNamespacedHelpers } from 'vuex'\n\nconst { mapState, mapActions } = createNamespacedHelpers('some/nested/module')\n\nexport default {\n  computed: {\n    // åœ¨ `some/nested/module` ä¸­æŸ¥æ‰¾\n    ...mapState({\n      a: state => state.a,\n      b: state => state.b\n    })\n  },\n  methods: {\n    // åœ¨ `some/nested/module` ä¸­æŸ¥æ‰¾\n    ...mapActions([\n      'foo',\n      'bar'\n    ])\n  }\n}\n```\n\n## å®šä¹‰æ’ä»¶\n```js\nconst myPlugin = store => {\n    // ä¼ å…¥storeåˆå§‹åŒ–æ—¶è°ƒç”¨\n    store.subscribe((mutation, state)=>{\n        // æ¯æ¬¡mutationä¹‹åè°ƒç”¨\n        // mutation çš„æ ¼å¼ä¸º {type, payload}\n    })\n}\n```\n\n## è¡¨å•å¤„ç†\nå› ä¸ºæäº¤mutationæ‰èƒ½ä¿®æ”¹çŠ¶æ€ï¼Œæ‰€ä»¥v-modelä¸é€‚åˆç»‘å®švuexé‡Œçš„stateï¼Œä¸ç¬¦åˆvuexçš„æ€æƒ³ã€‚\n```html\n<input v-model=\"obj.message\">\n```\nå‡è®¾è¿™é‡Œçš„ obj æ˜¯åœ¨è®¡ç®—å±æ€§ä¸­è¿”å›çš„ä¸€ä¸ªå±äº Vuex store çš„å¯¹è±¡ï¼Œåœ¨ç”¨æˆ·è¾“å…¥æ—¶ï¼Œv-model ä¼šè¯•å›¾ç›´æ¥ä¿®æ”¹ obj.messageã€‚åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼Œç”±äºè¿™ä¸ªä¿®æ”¹ä¸æ˜¯åœ¨ mutation å‡½æ•°ä¸­æ‰§è¡Œçš„, è¿™é‡Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚\n\n1. ä¸é‡‡ç”¨v-model\næ‰€ä»¥éœ€è¦inputç»‘å®švalueï¼Œç„¶åè°ƒç”¨inputæˆ–è€…changeæäº¤mutationä¿®æ”¹çŠ¶æ€\n```html\n<input :value=\"message\" @input=\"updateMessage\">\n```\n```js\ncomputed: {\n    ...mapState({\n        message: state => state.obj.message\n    })\n},\nmethod: {\n    updateMessage(e){\n        this.$store.commit(\"updateMessage\", e.target.value)\n    }\n}\n```\n\n2. é‡‡ç”¨v-model\n```js\n// ...\ncomputed: {\n  message: {\n    get () {\n      return this.$store.state.obj.message\n    },\n    set (value) {\n      this.$store.commit('updateMessage', value)\n    }\n  }\n}\n```","tags":["vue"],"categories":["çŸ¥è¯†"]},{"title":"macvscodeæ›´æ–°å¤±è´¥ï¼šPermissiondeniedè§£å†³åŠæ³•","url":"%2F2019%2Fmacvscode%E6%9B%B4%E6%96%B0%E5%A4%B1%E8%B4%A5%EF%BC%9APermissiondenied%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95.html","content":"\n## åœºæ™¯ -- mac vscodeä¸èƒ½å®‰è£…æ›´æ–°\n> Could not create temporary directory: Permission denied\n\n## åŸå› åˆ†æ\nmacä¸‹`/Users/username/Library/Caches/`ç”¨æˆ·æ–‡ä»¶ä¸ä¸€æ ·ï¼Œrootå’Œusername\n\nå¯¼è‡´\n\n> drwxr-xr-x   6 username  staff   204B Jan 17 20:33 com.microsoft.VSCode\n> drwxr--r--   2 root    staff    68B Dec 17 13:51 com.microsoft.VSCode.ShipIt\n\n## è§£å†³æ–¹æ¡ˆ\n```\n// 1. å…³é—­vscode\n\n// 2. è¿™ä¸€æ­¥æ˜¯éœ€è¦è¾“å…¥å¯†ç çš„\nsudo chown $USER ~/Library/Caches/com.microsoft.VSCode.ShipIt/ \n\n// 3. è¿™ä¸€æ­¥æ˜¯ä¸éœ€è¦è¾“å…¥å¯†ç çš„, å¦‚æœä¸è¿›è¡Œç¬¬ä¸€æ­¥ï¼Œç¬¬äºŒæ­¥ä¼šæŠ¥é”™\nsudo chown $USER ~/Library/Caches/com.microsoft.VSCode.ShipIt/*\n\n// 4. æ›´æ–°xattr\nxattr -dr com.apple.quarantine /Applications/Visual\\ Studio\\ Code.app\n```\n\n## é‡æ–°å®‰è£…æ›´æ–° å®ŒæˆğŸ˜\n\n## Macç‰ˆæœ¬ä¸‹çš„Chromeï¼ŒåŒå‡»htmlæ–‡ä»¶æ‰“ä¸å¼€\nåŸå› å…¶å®æ˜¯å› ä¸ºåœ¨Mac OSç³»ç»Ÿä¸‹ï¼Œåœ¨Finder(è®¿è¾¾)ä¸­åšä»»ä½•æ“ä½œï¼Œæ–‡ä»¶éƒ½ä¼šä¸å¯é¿å…çš„è¢«é™„åŠ ä¸Šä¸€ä¸ªç‰¹æœ‰çš„æ‹“å±•å±æ€§(extend attributes)ï¼Œå¯ä»¥é€šè¿‡ç»ˆç«¯å‘½ä»¤ls -læŸ¥çœ‹ï¼Œè¿™äº›æ–‡ä»¶é€šå¸¸éƒ½ä¼šæœ‰@ä½œä¸ºæ ‡è®°ï¼Œå› æ­¤ï¼Œç”±äºäº§å“çš„åŸå‹æ˜¯ç”±Axureæ¥åˆ¶ä½œçš„ï¼Œç„¶åå¯¼å‡ºäº†tarçš„å‹ç¼©åŒ…ï¼Œå› æ­¤æˆ‘ä»¬è§£å‹ä¹‹åï¼Œé€šå¸¸éƒ½ä¸èƒ½ç›´æ¥åœ¨æµè§ˆå™¨æ‰“å¼€ï¼\n\næ€ä¹ˆè§£å†³è¿™ç§é—®é¢˜å‘¢ï¼Ÿ\n\næˆ‘ä»¬å¯ä»¥æ¸…é™¤æ‰è¿™ä¸ªå±æ€§(extend attributes)ï¼\n\n1. å¯ä»¥é’ˆå¯¹å•ä¸ªæ–‡ä»¶åšæ¸…é™¤æ“ä½œï¼ˆfilenameå°±æ˜¯è¦æ–‡ä»¶åï¼Œä¾‹å¦‚ï¼šindex.htmlï¼‰\n```js\nxattr -c filename\n```\n\n2. ä¹Ÿå¯ä»¥é’ˆå¯¹æ•´ä¸ªç›®å½•åšæ¸…é™¤æ“ä½œï¼ˆdirectoryå°±æ˜¯ç›®å½•åï¼Œä¾‹å¦‚ï¼šcontentï¼‰\n```js\nxattr -rc directory\n```\n","tags":["å·¥å…·"],"categories":["å·¥å…·"]},{"title":"borderRadiusç™¾åˆ†æ¯”50å’Œ100ç©¶ç«Ÿæœ‰ä»€ä¹ˆåŒºåˆ«","url":"%2F2019%2FborderRadius%E7%99%BE%E5%88%86%E6%AF%9450%E5%92%8C100%E7%A9%B6%E7%AB%9F%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB.html","content":"\n\nborder-radiusçš„å€¼æ˜¯ç™¾åˆ†æ¯”çš„è¯ï¼Œå°±ç›¸å½“äºç›’å­çš„å®½åº¦å’Œé«˜åº¦çš„ç™¾åˆ†æ¯”ã€‚æˆ‘ä»¬çŸ¥é“åœ¨ä¸€ä¸ªæ­£æ–¹å½¢å†…åšä¸€ä¸ªé¢ç§¯æœ€å¤§çš„åœ†å½¢ï¼Œè¿™ä¸ªåœ†çš„åŠå¾„å°±ä¸ºæ­£æ–¹å½¢è¾¹é•¿çš„ä¸€åŠã€‚æ‰€\n\nä»¥border-radiusä¸º50%æ—¶ï¼Œåˆ™ä¼šå½¢æˆåœ†ã€‚é‚£ä¹ˆå¯èƒ½æœ‰äººå°±ä¼šé—®ï¼Œborder-radiusä¸º100%æ—¶ï¼Œå¯¹åº”åœ†çš„åŠå¾„é•¿åº¦ä¸å°±æ˜¯æ­£æ–¹å½¢çš„å®½é«˜ä¹ˆï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯ä¼š\n\nå½¢æˆä¸€ä¸ªå’Œå€¼ä¸º50%ä¸€æ ·çš„åœ†å½¢å‘¢ï¼Ÿ\n\n---\n<!--more-->\n\nã€€ã€€å…¶å®è¿™æ˜¯W3Cå¯¹äº[é‡åˆæ›²çº¿](https://www.w3.org/TR/css-backgrounds-3/#corner-overlap)æœ‰è¿™æ ·çš„è§„èŒƒï¼šå¦‚æœä¸¤ä¸ªç›¸é‚»è§’çš„åŠå¾„å’Œè¶…è¿‡äº†å¯¹åº”çš„\n\nç›’å­çš„è¾¹çš„é•¿åº¦ï¼Œé‚£ä¹ˆæµè§ˆå™¨è¦é‡æ–°è®¡ç®—ä¿è¯å®ƒä»¬ä¸ä¼šé‡åˆã€‚ä¸‹é¢æˆ‘ä»¬å‡å®šä¸€ä¸ªå®½\n\né«˜ä¸º100pxçš„æ­£æ–¹å½¢Aã€‚æ­¤æ—¶è®¾ç½®border-top-left-radius=100%ï¼›åˆ™æ­£æ–¹å½¢Aä¼šå˜æˆä¸€ä¸ªåŠå¾„ä¸º100pxçš„å››åˆ†ä¹‹ä¸€åœ†å¼§ã€‚ \n\n![radius1](http://cdn.mydearest.cn/blog/images/radius1.png)\n\nã€€ã€€ç„¶åæˆ‘ä»¬å†ç»™border-top-right-radius=100%ã€‚æ­¤æ—¶ç›¸é‚»çš„è§’çš„åŠå¾„å·²ç»è¶…è¿‡äº†å¯¹åº”çš„ç›’å­çš„è¾¹çš„é•¿åº¦ã€‚æµè§ˆå™¨éœ€è¦é‡æ–°è®¡ç®—ã€‚é‡æ–°è®¡ç®—çš„è§„åˆ™æ˜¯åŒæ—¶ç¼©æ”¾ä¸¤\n\nä¸ªåœ†è§’çš„åŠå¾„çŸ¥é“ä»–ä»¬åˆšå¥½ç¬¦åˆè¿™ä¸ªæ–¹å½¢ã€‚\n\n\nã€€ã€€å»ºè®®ä½¿ç”¨border-radius = 50% æ¥é¿å…æµè§ˆå™¨ä¸å¿…è¦çš„è®¡ç®—ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯åœ¨æ¶‰åŠåˆ°ä¸åœ†è§’ç›¸å…³åŠ¨ç”»çš„æƒ…å†µä¸‹ï¼Œå€¼ä¸º50%å’Œ100%ï¼Œåœ¨åŠ¨ç”»æ•ˆæœä¸Šä¼šæœ‰ä¸åŒã€‚\n\n## ç¤ºä¾‹ä»£ç \n```html\n<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <title>åŠ¨ç”»æ•ˆæœå·®å¼‚</title>\n</head>\n<style>\ndiv{\n  width: 100px;\n  height: 100px;\n  margin-bottom: 10px;\n  \n  transition: border-radius 3s;\n\n}\n.half{\n  border-radius: 50%;\n  background: #000;\n}\n.full{\n  border-radius: 100%;\n  background: #f00;\n}\n\n.box1:hover div{\n  border-radius: 0;\n}\n.wrap{\n  width:100px;\n  height: 250px;\n  border: 1px solid red;\n  cursor: pointer;\n}\n\n.box2 .half{\n    border-radius: 0;\n    background: #000;\n}\n\n.box2 .full{\n    border-radius: 0;\n    background: #f00;\n}\n.box2:hover .half{\n  border-radius: 50%;\n}\n.box2:hover .full{\n  border-radius:100%\n}\n</style>\n<body>\n  <div class='wrap box1'>\n    <div class=\"half\"></div>\n    <div class=\"full\"></div>\n  </div>\n  \n  <div class='wrap box2'>\n    <div class=\"half\"></div>\n    <div class=\"full\"></div>\n  </div>\n  <p>å°†é¼ æ ‡ç§»åˆ°çº¢æ¡†å†…</p>\n</body>\n</html>\n```","tags":["çŸ¥è¯†"],"categories":["CSS"]},{"title":"JSå‡½æ•°åŸºç¡€","url":"%2F2019%2FJS%E5%87%BD%E6%95%B0%E5%9F%BA%E7%A1%80.html","content":"\n## å‡½æ•°çš„å®šä¹‰\nå‡½æ•°å…¶å®å°±æ˜¯ä¸€ä¸ªå°è£…ä¸€æ®µä»£ç æ®µçš„**å¯¹è±¡**ï¼Œé‚£å‡½æ•°åå…¶å®ä»…æ˜¯ç”¨æ¥å¼•ç”¨å‡½æ•°å¯¹è±¡çš„ä¸€ä¸ªæ™®é€šå˜é‡\n\nå†™ä»£ç çš„æ—¶å€™æˆ‘ä»¬é¿å…ä¸äº†è¦é‡å¤ç”¨ä¸€äº›ä»£ç ï¼Œä¸€ç›´é‡å¤å†™å¾ˆè€—æ—¶ï¼Œè€Œä¸”ä¸ç¾è§‚ä¹Ÿä¸åˆ©äºç»´æŠ¤ï¼Œå› æ­¤å‡½æ•°çš„å‡ºç°å°±æ˜¯æ¥è®©ä»£ç é‡ç”¨ï¼Œä¾¿äºç»´æŠ¤ã€‚\n\nä¸€æ®µä»£ç ï¼Œå¯èƒ½è¢«åå¤ä½¿ç”¨ï¼Œå¯ä»¥å®šä¹‰ä¸ºå‡½æ•°ï¼Œç„¶åè°ƒç”¨å‡½æ•°æ¥ä½¿ç”¨è¿™æ®µä»£ç ã€‚\n\nåœ¨JavaScriptä¸­å‡½æ•°å°±æ˜¯å¯¹è±¡ã€‚å‡½æ•°ä¸åŒäºå…¶ä»–å¯¹è±¡çš„å†³å®šæ€§ç‰¹ç‚¹æ˜¯ï¼Œå‡½æ•°å­˜åœ¨ä¸€ä¸ªè¢«ç§°ä¸º[[Call]]çš„å†…éƒ¨å±æ€§ã€‚å†…éƒ¨å±æ€§æ— æ³•é€šè¿‡ä»£ç è®¿é—®è€Œæ˜¯\n\nå®šä¹‰äº†ä»£ç æ‰§è¡Œæ—¶çš„è¡Œä¸ºã€‚ECMAScriptä¸ºJavaScriptçš„å¯¹è±¡å®šä¹‰äº†å¤šç§å†…éƒ¨å±æ€§ï¼Œè¿™äº›å†…éƒ¨å±æ€§éƒ½ç”¨åŒé‡ä¸­æ‹¬å·æ¥æ ‡æ³¨ã€‚\n\n[[Call]]å±æ€§æ˜¯å‡½æ•°ç‹¬æœ‰çš„ï¼Œè¡¨æ˜è¯¥å¯¹è±¡å¯ä»¥è¢«æ‰§è¡Œã€‚ç”±äºä»…å‡½æ•°æ‹¥æœ‰è¯¥å±æ€§ï¼ŒECMAScriptå®šä¹‰äº†typeofæ“ä½œç¬¦å¯¹ä»»ä½•å…·æœ‰[[Call]]å±æ€§çš„å¯¹\n\nè±¡è¿”å› `[object Function]`\n\n---\n<!--more-->\n\n## å‡½æ•°çš„åˆ›å»º\n**function å£°æ˜**\n\n```js\nfunction å‡½æ•°å(å‚æ•°åˆ—è¡¨) {\n  å‡½æ•°ä½“;\n  return è¿”å›å€¼;\n}\n```\n\n**ç›´æ¥é‡å£°æ˜**\n\n```js\nvar å‡½æ•°å = function(å‚æ•°åˆ—è¡¨) {\n  å‡½æ•°ä½“;\n  return è¿”å›å€¼;\n};\n```\n\n**ç”¨ new åˆ›å»º**\n\nå› ä¸º Function æ˜¯å†…ç½®ç±»å‹ï¼Œæœ¬èº«æœ‰ä¸€ä¸ª Function çš„æ„é€ å‡½æ•°ï¼Œæ˜¯å†…ç½®ç±»å‹ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥ `new` çš„\n\n```js\nvar å‡½æ•°å = new Function(\"å‚æ•°å1\",\"å‚æ•°å2\",...,\"å‡½æ•°ä½“; return è¿”å›å€¼\")\n```\n\nè¿™é‡Œæ³¨æ„ï¼Œå‚æ•°å’Œå‡½æ•°ä½“éƒ½è¦ç”¨å¼•å·å¼•èµ·æ¥ï¼Œä½†æ˜¯ä¸€èˆ¬å‡½æ•°çš„åˆ›å»ºéƒ½ä¸ä¼šè¿™æ ·åˆ›å»ºï¼Œä»¥å‰é¢çš„ä¸¤ç§ä¸ºä¸»ï¼Œé‚£å…¶å®å‰é¢ä¸¤ç§çš„åˆ›å»ºæ˜¯å­˜åœ¨ä¸€å®šçš„å·®åˆ«çš„ï¼Œä¸‹é¢ä¼šæåˆ°\n\n## å‡½æ•°çš„å‚æ•°\nå‡½æ•°æ‰§è¡Œæ—¶å¿…é¡»çš„æ•°æ®å˜é‡ï¼Œå®ƒåˆ†ä¸ºæ˜¾ç¤ºå‚æ•°(Parameters)ä¸éšå¼å‚æ•°(Arguments)\n\n### æ˜¾ç¤ºå‚æ•°\n```js\nfunction fun(name, id) {\n  //å‡½æ•°ä½“\n}\n```\n\nè¿™ç§ç›´æ¥ä¼ è¿›æ¥çš„ name å’Œ id å°±æ˜¯æ˜¾ç¤ºå‚æ•°ï¼Œä¹Ÿå°±æ˜¯ä½ èƒ½çœ‹åˆ°çš„ã€‚å…¶å®å‡½æ•°ä¼ é€’çš„å‚æ•°å°±ç›¸å½“äºåœ¨å‡½æ•°ä½“å†…åˆå£°æ˜äº†ä¸€ä¸ªå±€éƒ¨å˜é‡\n\n```js\nvar i = 10;\nfunction fun(i) {\n  i++;\n  console.log(i);\n}\nfun(i);\n```\n\nä¸Šé¢çš„ä»£ç ï¼Œå°±ç›¸å½“äºä¸‹é¢çš„ä»£ç \n\n```js\nvar i = 10;\nfunction fun() {\n  var i = 10; //è¿™ä¸ªå€¼å°±æ˜¯ä¼ è¿›æ¥çš„å‚æ•°çš„å€¼\n  i++;\n  console.log(i);\n}\nfun(i); //åœ¨æ­¤å¤„ä¼ å…¥i\n```\n\n### éšå¼å‚æ•°\næ¯ä¸ª JavaScript å‡½æ•°å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªå¯¹è±¡ `arguments` å¯¹è±¡,å…¶å®æ˜¯ä¸€ä¸ªç±»æ•°ç»„çš„å¯¹è±¡,å®ƒä¼šè‡ªåŠ¨æ¥å—æ‰€æœ‰ä¼ å…¥å‡½æ•°çš„å‚æ•°å€¼ã€‚\n\n```js\nfunction func(          ) {\n  //arguments[          ]\n}\n```\n\nå€¼å¾—ä¸€è¯´çš„æ˜¯,`arguments` æœ‰ä¸‹æ ‡æœ‰é•¿åº¦ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è·å¾—ä¼ å…¥çš„å‚æ•°ï¼Œæ¯”å¦‚ `arguments[0]` å°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°, `length` å°±å¯ä»¥éå†è¿™ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œä½†æ˜¯ï¼Œæ¯•ç«Ÿå®ƒä¸æ˜¯æ•°ç»„ï¼Œæ‰€ä»¥ä¸èƒ½è¿›è¡Œä¸€äº›æ•°ç»„ç‰¹æœ‰çš„æ“ä½œï¼Œæ¯”å¦‚ `sort`\n\n### å‡½æ•°é‡è½½\nå¼ºç±»å‹è¯­è¨€å¯¹é‡è½½çš„å®šä¹‰ï¼šå‡½æ•°åç›¸åŒï¼Œå‚æ•°ä¸åŒï¼Œæˆ–è€…æ˜¯å‚æ•°ç±»å‹ä¸åŒéƒ½å¯ä»¥å«åšå‡½æ•°çš„é‡è½½ã€‚\n\nä½†åœ¨jsä¸­å› ä¸º arguments çš„å­˜åœ¨ï¼ŒJavaScriptçš„å‡½æ•°æ ¹æœ¬å°±ä¸å­˜åœ¨æ‰€è°“çš„ç­¾åï¼Œæ‰€ä»¥é‡è½½åœ¨JavaScriptä¸­å®é™…æ˜¯ä¸å­˜åœ¨çš„ã€‚\n```js\n// æ¨¡æ‹Ÿå‡½æ•°é‡è½½\nfunction abc(){\n    if (arguments.length ===1){\n        //A\n    }\n    if(arguments.length ===2){\n        //B\n    }\n}\n\nabc(11);\nabc(11,22);\n```\n\n## å£°æ˜æå‰\nåœ¨å¼€å§‹æ‰§è¡Œç¨‹åºå‰,js å¼•æ“ä¼šé¦–å…ˆæŸ¥æ‰¾ `var` å£°æ˜çš„å˜é‡å’Œ `function` å£°æ˜çš„å‡½æ•°ï¼Œå°†å…¶æå‰åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨é›†ä¸­åˆ›å»ºï¼Œè€Œå°†èµ‹å€¼æ“ä½œä¿ç•™åœ¨åŸåœ°,è¿™é‡Œç‰¹åˆ«è¯´ä¸€ä¸‹,æœªç”¨ `var` å£°æ˜çš„å˜é‡ä¸ä¼šå£°æ˜æå‰.\n\n```js\nconsole.log(a); //a is not defined\na = 10;\n```\n\n```js\nconsole.log(a); //undefined\nvar a = 10;\nconsole.log(a); //10\n```\n\nä½†æ˜¯åœ¨å®ƒä¸‹é¢å£°æ˜å¹¶èµ‹å€¼å˜é‡ `a`,å› ä¸ºå£°æ˜æå‰,å…¶å®ä»£ç ä¼šå˜æˆä¸‹é¢è¿™ä¸ªæ ·å­\n\n```js\nvar a;\nconsole.log(a);\na = 10;\nconsole.log(a);\n```\n\nè¿™æ ·çœ‹ï¼Œä¸€åˆ‡éƒ½å˜å¾—å¾ˆåˆç†ã€‚ã€‚\n\nå‡½æ•°ä¹Ÿæ˜¯ä¸€æ ·\n\n```js\nfunction fun() {\n  console.log(1);\n}\nfun(); //2\nfunction fun() {\n  console.log(2);\n}\nfun(); //2\n```\n\næ§åˆ¶å°ä¼šè¾“å‡ºä¸¤ä¸ª 2,å› ä¸º function å£°æ˜çš„å‡½æ•°ä¹Ÿä¼šå£°æ˜æå‰,ä»£ç å…¶å®æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­\n\n```js\nfunction fun() {\n  console.log(1);\n}\nfunction fun() {\n  console.log(2);\n}\nfun(); //2\nfun(); //2\n```\n\nç¬¬äºŒæ¬¡å£°æ˜å› ä¸ºæ–¹æ³•åå­—ä¸€æ ·ï¼Œåè€…è¦†ç›–äº†å‰è€…ï¼Œæ‰€ä»¥å†è°ƒç”¨çš„æ—¶å€™å°±ä¼šè°ƒç”¨æœ€åè¿™ä¸ª\n\nä½†æ˜¯å£°æ˜æå‰ä¼šå¢åŠ ç¨‹åºè§£è¯»çš„éš¾åº¦ï¼Œå› æ­¤æˆ‘ä»¬åœ¨å†™ç¨‹åºæ—¶ï¼Œå°½é‡é¿å…å£°æ˜æå‰æ‰€å¸¦æ¥çš„å±å®³\n\n### å£°æ˜æå‰çš„è§£å†³æ–¹æ³•\né‚£æˆ‘ä»¬æ—¢ç„¶çŸ¥é“ä¼šæœ‰å£°æ˜æå‰è¿™ç§æ“ä½œï¼Œå°±åœ¨å˜é‡å’Œå‡½æ•°çš„å£°æ˜æ—¶éƒ½æ”¾åœ¨å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚\n\nåœ¨ ES6 ä¸­ å¯ä»¥ç”¨ let ä»£æ›¿ var,ä¸è¿‡è¦æ±‚åœ¨å½“å‰ä½œç”¨åŸŸä¸­ let å˜é‡ä¹‹å‰ä¸å…è®¸å‡ºç°å£°æ˜çš„å˜é‡\n\nä¹Ÿå¯ä»¥ç”¨ç›´æ¥é‡å£°æ˜å˜é‡çš„æ–¹æ³•\n\n```js\nvar fun = function() {\n  console.log(1);\n};\nfun(); //1\nvar fun = function() {\n  console.log(2);\n};\nfun(); //2\n```\n\nè¿™ç§å½“ç„¶ä¹Ÿä¼šå£°æ˜æå‰ï¼Œé‚£æˆ‘ä»¬çœ‹ä¸€ä¸‹å£°æ˜æå‰åçš„ä»£ç \n\n```js\nvar fun;\nvar fun;\nfun = function() {\n  console.log(1);\n};\nfun(); //1\nfun = function() {\n  console.log(2);\n};\nfun(); //2\n```\n\nå£°æ˜æå‰ä½†æ˜¯èµ‹å€¼è¿˜æ˜¯ç•™åœ¨åŸåœ°ï¼Œæ‰€ä»¥è™½ç„¶æœ‰å£°æ˜æå‰ï¼Œä½†æ˜¯å¹¶ä¸ä¼šæ”¹å˜æˆ‘ä»¬åŸæœ¬æƒ³è¦çš„ç»“æœã€‚ä¹Ÿå°±è§£å†³äº†å£°æ˜æå‰å¸¦æ¥çš„å±å®³ã€‚\n\n## åŒ¿åå‡½æ•°\nå‡½æ•°åˆ›å»ºæ—¶æ²¡æœ‰æŒ‡å®šå‡½æ•°å\n\nåŒ¿åå‡½æ•°ä½¿ç”¨åè‡ªåŠ¨é‡Šæ”¾,ä¼šèŠ‚çº¦å†…å­˜,å®ƒä¼šåˆ’åˆ†ä¸´æ—¶ä½œç”¨åŸŸï¼Œé¿å…å…¨å±€å˜é‡æ±¡æŸ“å…¨å±€ã€‚\n\n### ç”¨å¤„\n**callback**\n\nå°†ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°å†…ï¼Œè¢«å…¶å®ƒå‡½æ•°è°ƒç”¨\n\nä¸¾ä¸ªæ —å­ğŸŒ°\n\n```js\narr.sort(function(a, b) {\n  return a - b;\n});\n```\n\n```js\nstr.replace(/reg/g, function(kw,$1,$2,...){return æ›¿æ¢å€¼})\n```\n\n#### è‡ªè°ƒ\nå®šä¹‰å‡½æ•°åè‡ªå·±è°ƒç”¨è‡ªå·±ï¼Œè°ƒç”¨ç»“æŸåï¼Œç«‹åˆ»é‡Šæ”¾ï¼Œä¸å å†…å­˜\n\nä¸¾ä¸ªä¾‹å­ğŸŒ°\n\n```js\n(function(å‚æ•°åˆ—è¡¨) {\n  å‡½æ•°ä½“;\n  return è¿”å›å€¼;\n})(å‚æ•°å€¼åˆ—è¡¨);\n```\n\nä¼šå®šä¹‰ä¸€ä¸ªä¸´æ—¶çš„ä½œç”¨åŸŸï¼Œå‡å°‘ä½¿ç”¨å…¨å±€å˜é‡ï¼Œé¿å…å…¨å±€æ±¡æŸ“ã€‚\n\n## é‡è½½\nç›¸åŒå‡½æ•°åï¼Œä¸åŒå‚æ•°åˆ—è¡¨çš„å¤šä¸ªå‡½æ•°ã€‚åœ¨è°ƒç”¨æ—¶ï¼Œæ ¹æ®ä¼ å…¥å‚æ•°çš„ä¸åŒï¼Œè‡ªåŠ¨é€‰æ‹©åŒ¹é…çš„å‡½æ•°æ‰§è¡Œã€‚\n\nè¿™æ ·å¯ä»¥å‡å°‘ api çš„æ•°é‡ï¼Œå‡è½»è°ƒç”¨è€…çš„è´Ÿæ‹…ã€‚\n\nå¬èµ·æ¥å¾ˆè¯±äººï¼Œä½†æ˜¯ js è¯­æ³•ä¸æ”¯æŒé‡è½½ï¼ŒåŸå› æ˜¯ js ä¸å…è®¸å¤šä¸ªåŒåå‡½æ•°åŒæ—¶å­˜åœ¨ï¼Œåå£°æ˜çš„å‡½æ•°ä¼šè¦†ç›–å‰é¢å£°æ˜çš„ã€‚(å“‡ã€‚js ä¸æ”¯æŒä½ åœ¨è¿™é‡Œè¯´ä»€ä¹ˆï¼Œç¥ç»ç—…å•Š).\n\næ—¢ç„¶è¯´é‡è½½ï¼Œé‚£è‚¯å®šæ˜¯å¯ä»¥é€šè¿‡æŸäº›æ–¹æ³•å®ç°çš„ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯åˆ©ç”¨ `arguments`\n\n```js\nfunction test() {\n  if (arguments.length == 0) {\n    //ä¸ä¼ å€¼çš„æ“ä½œ\n  } else if (arguments.length == 1) {\n    //ä¼ ä¸€ä¸ªå€¼è¿›è¡Œçš„æ“ä½œ\n  } else {\n    //....ç­‰ç­‰\n  }\n}\n```\n\nå…¶å®ä¹Ÿä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„é‡è½½ï¼Œå› ä¸ºå¹¶æ²¡æœ‰åˆ›å»ºåŒåçš„å¤šä¸ªå‡½æ•°ï¼Œä½†æ˜¯å®ç°çš„æ•ˆæœæ˜¯å’Œé‡è½½å·®ä¸å¤šçš„ã€‚\n\n## å¸¸è§„å‡½æ•°\n\n- å‘½åå‡½æ•°\n- åŒ¿åå‡½æ•°\n- å¯¹è±¡æ–¹æ³•\n- å¯¹è±¡æ–¹æ³•ç®€å†™(ES 6)\n- IIFE(ç«‹å³æ‰§è¡Œå‡½æ•°)\n\n## ç®­å¤´å‡½æ•°\n- å‘½åç®­å¤´å‡½æ•°\n- åŒ¿åç®­å¤´å‡½æ•°\n- å¯¹è±¡æ–¹æ³•\n- IIFE ç®­å¤´å‡½æ•°\n","tags":["æ·±å…¥ç†è§£"],"categories":["JS"]},{"title":"NodeJSHttpåŠ è½½é™æ€èµ„æº","url":"%2F2019%2FNodeJSHttp%E5%8A%A0%E8%BD%BD%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90.html","content":"\né—®é¢˜åœºæ™¯ï¼šæµè§ˆå™¨å‘åå°å‘é€è¯·æ±‚åï¼Œåå°è¿”å›ä¸€ä¸ªhtmlç•Œé¢ã€‚ä½†æ˜¯åœ¨æµè§ˆå™¨ä¸­æ²¡æœ‰åŠ è½½jsã€cssç­‰é™æ€èµ„æºï¼ŒæŸ¥æ‰¾åŸå› åå‘ç°æ˜¯Content-Typeçš„åŸå› ã€‚æµè§ˆå™¨ä¸çŸ¥é“cssã€jsç­‰æ–‡ä»¶çš„æ–‡ä»¶æ ¼å¼ï¼Œæ— æ³•æˆåŠŸåŠ è½½é™æ€æ–‡ä»¶ã€‚æ‰€ä»¥ï¼Œéœ€è¦è®¾ç½®æ­£ç¡®çš„æ–‡ä»¶æ ¼å¼ã€‚\n\n---\n<!--more-->\n\n## æ­å»ºç®€å•çš„æœ¬åœ°æœåŠ¡\n```js\nvar http = require('http');//å¼•å…¥httpæ¨¡å—\n\n//å¼€å¯æœåŠ¡ï¼Œç›‘å¬8888ç«¯å£\n//ç«¯å£å·æœ€å¥½ä¸º6000ä»¥ä¸Š\nvar server = http.createServer(function(req,res){\n    /*\n        reqç”¨æ¥æ¥å—å®¢æˆ·ç«¯æ•°æ®\n        resç”¨æ¥å‘å®¢æˆ·ç«¯å‘é€æœåŠ¡å™¨æ•°æ®\n    */\n\n    console.log('æœ‰å®¢æˆ·ç«¯è¿æ¥');//åˆ›å»ºè¿æ¥æˆåŠŸæ˜¾ç¤ºåœ¨åå°\n\n    //ä¸€å‚æ˜¯httpè¯·æ±‚çŠ¶æ€ï¼Œ200è¿æ¥æˆåŠŸ\n    //è¿æ¥æˆåŠŸåå‘å®¢æˆ·ç«¯å†™å…¥å¤´ä¿¡æ¯\n    res.writeHeader(200,{\n        'content-type' : 'text/html;charset=\"utf-8\"'\n    });\n\n    res.write('è¿™æ˜¯æ­£æ–‡éƒ¨åˆ†');//æ˜¾ç¤ºç»™å®¢æˆ·ç«¯\n    res.end();\n\n}).listen(8888);\n\nconsole.log('æœåŠ¡å™¨å¼€å¯æˆåŠŸ');\n```\n\n## è®¿é—®æœ¬åœ°ç«™ç‚¹\n```js\nvar http = require('http');\nvar fs = require('fs');//å¼•å…¥æ–‡ä»¶è¯»å–æ¨¡å—\n\nvar documentRoot = 'E:/PhpProject/html5/websocket/www';\n//éœ€è¦è®¿é—®çš„æ–‡ä»¶çš„å­˜æ”¾ç›®å½•\n\nvar server= http.createServer(function(req,res){\n\n    var url = req.url; \n    //å®¢æˆ·ç«¯è¾“å…¥çš„urlï¼Œä¾‹å¦‚å¦‚æœè¾“å…¥localhost:8888/index.html\n    //é‚£ä¹ˆè¿™é‡Œçš„url == /index.html \n\n    var file = documentRoot + url;\n    console.log(url);\n    //E:/PhpProject/html5/websocket/www/index.html \n\n\n    fs.readFile( file , function(err,data){\n    /*\n        ä¸€å‚ä¸ºæ–‡ä»¶è·¯å¾„\n        äºŒå‚ä¸ºå›è°ƒå‡½æ•°\n            å›è°ƒå‡½æ•°çš„ä¸€å‚ä¸ºè¯»å–é”™è¯¯è¿”å›çš„ä¿¡æ¯ï¼Œè¿”å›ç©ºå°±æ²¡æœ‰é”™è¯¯\n            äºŒå‚ä¸ºè¯»å–æˆåŠŸè¿”å›çš„æ–‡æœ¬å†…å®¹\n    */\n        if(err){\n            res.writeHeader(404,{\n                'content-type' : 'text/html;charset=\"utf-8\"'\n            });\n            res.write('<h1>404é”™è¯¯</h1><p>ä½ è¦æ‰¾çš„é¡µé¢ä¸å­˜åœ¨</p>');\n            res.end();\n        }else{\n            res.writeHeader(200,{\n                'content-type' : 'text/html;charset=\"utf-8\"'\n            });\n            res.write(data);//å°†index.htmlæ˜¾ç¤ºåœ¨å®¢æˆ·ç«¯\n            res.end();\n\n        }\n\n    });\n\n\n\n}).listen(8888);\n\nconsole.log('æœåŠ¡å™¨å¼€å¯æˆåŠŸ');\n```\n\n## æ— æ³•åŠ è½½é™æ€æ–‡ä»¶\n\n### è§£å†³æ–¹æ¡ˆä¸€\n- æ‰‹åŠ¨è®¾ç½®Content-Type\n```js\nvar http = require('http');\nvar fs = require('fs');//å¼•å…¥æ–‡ä»¶è¯»å–æ¨¡å—\n\nvar documentRoot = './dist';\n//éœ€è¦è®¿é—®çš„æ–‡ä»¶çš„å­˜æ”¾ç›®å½•\n\nhttp.createServer(function(req,res){\n\n    var url = req.url; \n    //å®¢æˆ·ç«¯è¾“å…¥çš„urlï¼Œä¾‹å¦‚å¦‚æœè¾“å…¥localhost:8888/index.html\n    //é‚£ä¹ˆè¿™é‡Œçš„url == /index.html \n\n    var file = documentRoot + url;\n    console.log(file);\n\n    fs.readFile(file , function(err,data){\n    /*\n        ä¸€å‚ä¸ºæ–‡ä»¶è·¯å¾„\n        äºŒå‚ä¸ºå›è°ƒå‡½æ•°\n            å›è°ƒå‡½æ•°çš„ä¸€å‚ä¸ºè¯»å–é”™è¯¯è¿”å›çš„ä¿¡æ¯ï¼Œè¿”å›ç©ºå°±æ²¡æœ‰é”™è¯¯\n            äºŒå‚ä¸ºè¯»å–æˆåŠŸè¿”å›çš„æ–‡æœ¬å†…å®¹\n    */\n        if(err){\n            res.writeHeader(404,{\n                'content-type' : 'text/html;charset=\"utf-8\"'\n            });\n            res.write('<h1>404é”™è¯¯</h1><p>ä½ è¦æ‰¾çš„é¡µé¢ä¸å­˜åœ¨</p>');\n            res.end();\n        }else{\n            var type = file.substr(file.lastIndexOf(\".\")+1,file.length)\n            res.writeHeader(200,{'Content-type':\"text/\"+type+';charset=\"utf-8\"'});\t//åœ¨è¿™é‡Œè®¾ç½®æ–‡ä»¶ç±»å‹ï¼Œå‘Šè¯‰æµè§ˆå™¨è§£ææ–¹å¼\n            // æ ¹æ®åç¼€ååˆ¤æ–­æ–‡ä»¶ç±»å‹ä¸å¤ªå‡†ç¡® å¯ä»¥ä½¿ç”¨mimeæ¨¡å— mime.getType(filePath)\n            res.write(data);//å°†index.htmlæ˜¾ç¤ºåœ¨å®¢æˆ·ç«¯\n            res.end();\n        }\n    });\n}).listen(8888);\n\nconsole.log('æœåŠ¡å™¨å¼€å¯æˆåŠŸ');\n\n\n// // æ‰‹åŠ¨è®¾ç½®content-type\n// http.createServer(function(req,res){\n// \tvar path = req.url;\t\n// \tconsole.log(\"path: \"+path)\n// \tif(path == \"/\"){\n// \t\tpath = \"/index.html\";\n// \t}\n// \tsendFile(res,path);\n// }).listen(8888)\n\n// function sendFile(res,path){\n//   var path = process.cwd()+'/dist'+path;\n// \tfs.readFile(path,function(err,stdout,stderr){\n// \t\tif(!err){\n// \t\t\tvar data = stdout;\n// \t\t\tvar type = path.substr(path.lastIndexOf(\".\")+1,path.length)\n// \t\t\tres.writeHead(200,{'Content-type':\"text/\"+type+';charset=\"utf-8\"'});\t//åœ¨è¿™é‡Œè®¾ç½®æ–‡ä»¶ç±»å‹ï¼Œå‘Šè¯‰æµè§ˆå™¨è§£ææ–¹å¼\n// \t\t\tres.write(data);\n// \t\t}\n// \t\tres.end();\n//   })\n// }\n```\n\n### è§£å†³æ–¹æ¡ˆäºŒ\n\n- ä½¿ç”¨mimeæ¨¡å—ï¼Œnpm install mime.\n- mime.getType(filePath)","tags":["NodeJS"],"categories":["Node"]},{"title":"switchçš„å—çº§ä½œç”¨åŸŸ","url":"%2F2019%2Fswitch%E7%9A%84%E5%9D%97%E7%BA%A7%E4%BD%9C%E7%94%A8%E5%9F%9F.html","content":"\nES6 æˆ– TS å¼•å…¥äº†å—çº§ä½œç”¨åŸŸ,é€šè¿‡letå’Œconstã€classç­‰å¯ä»¥å®šä¹‰å—çº§ä½œç”¨åŸŸé‡Œçš„å˜é‡ï¼Œå—çº§ä½œç”¨åŸŸå†…çš„å˜é‡ä¸å­˜åœ¨å˜é‡æå‡ï¼Œä¸”å­˜åœ¨`æš‚æ—¶æ€§æ­»åŒº`(åœ¨ä»£ç å—å†…ï¼Œä½¿ç”¨letæˆ–constå£°æ˜å˜é‡å‰è¯¥å˜é‡éƒ½æ˜¯ä¸å¯æ”¹å˜çš„)ã€‚å¸¸è§çš„ifè¯­å¥ï¼Œforå¾ªç¯çš„å¾ªç¯ä½“å†…éƒ½å¯ä»¥å®šä¹‰å—çº§å˜é‡ã€‚é‚£ä¹ˆswitchè¯­å¥ä¸­çš„å—çº§ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ å…ˆç»™å‡ºç»“è®ºï¼š\n\n`switchè¯­å¥ä¸­çš„å—çº§ä½œç”¨åŸŸï¼Œåœ¨æ•´ä¸ªswitchè¯­å¥ä¸­ï¼Œè€Œä¸æ˜¯å¯¹äºæ¯ä¸€ä¸ªcaseç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„å—çº§ä½œç”¨åŸŸã€‚`\n\n---\n<!--more-->\n\nä¸¾ä¸ªæ —å­ğŸŒ°\n```javascript\nlet number = 1;\nswitch(number){\n  case 1:\n    let name = 'cosyer';\n  default:\n    console.log(name)\n}\n// cosyer\n```\n\n```javascript\nlet number = 1;\nswitch(number){\n  case 1:\n    let name = 'cosyer';\n    break;\n  case 2:\n    let name = 'yu';\n    break;\n  default:\n   console.log(name);\n}\n// Uncaught SyntaxError: Identifier 'name' has already been declared\n```\n\n## å¯èƒ½å­˜åœ¨çš„é—®é¢˜\n```javascript\nlet number = 1;\nswitch(number){\n    case 1 : name = 'cosyer'; break;\n}\n// nameè™½ç„¶æ²¡æœ‰å£°æ˜ï¼Œä½†æ˜¯ç»™nameèµ‹å€¼ç›¸å½“äºç»™å…¨å±€çš„windowå¯¹è±¡å¤åˆ¶ï¼Œä¹Ÿå°±æ˜¯window.name = 'cosyer'ã€‚\n```\n\n```javascript\nlet number = 2;\nswitch(number){\n  case 1:\n    let name = 'cosyer';\n    break;\n  case 2:\n    name = 'yu';\n    break;\n}\n// Uncaught ReferenceError: name is not defined\n```\n\nè¿™é‡Œè™½ç„¶caseé‡Œé¢å®šä¹‰çš„å—çº§è™½ç„¶ä¸ä¼šå­˜åœ¨å˜é‡æå‡ï¼Œä½†æ˜¯ä¼šå­˜åœ¨æš‚æ—¶æ€§é”åŒº,ä¹Ÿå°±æ˜¯è¯´å¦‚æœlet name = 'cosyer' æ²¡æœ‰æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯nameå®šä¹‰çš„è¿‡ç¨‹æ²¡æœ‰æ‰§è¡Œï¼Œé‚£ä¹ˆnameåœ¨æ•´ä¸ªå—çº§ä½œç”¨åŸŸå†…éƒ½æ˜¯ä¸å¯ç”¨çš„ï¼Œéƒ½æ˜¯undefinedã€‚\n\næ‰€ä»¥å°½é‡ä¸è¦åœ¨caseé‡Œå®šä¹‰å—çº§å˜é‡ã€‚\n","tags":["æ·±å…¥ç†è§£"],"categories":["JS"]},{"title":"æ·±å…¥ç†è§£instanceof","url":"%2F2019%2F%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3instanceof.html","content":"\nåœ¨JSä¸­ï¼Œå¤§å®¶é€šå¸¸ç”¨`typeof`æ¥åˆ¤æ–­åŸºæœ¬ç±»å‹ï¼Œ`instanceof`æ¥åˆ¤æ–­å¼•ç”¨ç±»å‹ã€‚\n\n## typeof\n> typeofä¸€èˆ¬åªèƒ½è¿”å›å¦‚ä¸‹å‡ ä¸ªç»“æœï¼šnumber,boolean,string,function,object,undefinedå­—ç¬¦ä¸²\n\n> å¯¹äºArray,nullç­‰ç‰¹æ®Šå¯¹è±¡ä½¿ç”¨typeofä¸€å¾‹è¿”å›objectï¼Œè€Œå‡½æ•°è¿”å›functionè¿™æ­£æ˜¯typeofçš„å±€é™æ€§ã€‚\n\n> åœ¨åˆ¤æ–­é™¤Objectç±»å‹çš„å¯¹è±¡(åŸºæœ¬ç±»å‹)æ—¶æ¯”è¾ƒæ–¹ä¾¿ã€‚\n\n\n## instanceof\n> object instanceof constructor\n\n> instanceof è¿ç®—ç¬¦ç”¨æ¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡åœ¨å…¶åŸå‹é“¾ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ„é€ å‡½æ•°çš„ prototype å±æ€§ã€‚\n\n> æ¢ç§è¯´æ³•å°±æ˜¯å·¦ä¾§çš„å¯¹è±¡æ˜¯å¦æ˜¯å³ä¾§å¯¹è±¡çš„å®ä¾‹ã€‚\n\n## ç›¸å…³ç»ƒä¹ \n```javascript\n'123' instanceof String // true\nlet str = new String('123')\nstr instanceof String // true\n```\n\n---\n<!--more-->\n\n```javascript\n// éƒ½æ˜¯Objectçš„å®ä¾‹ true\nconsole.log({} instanceof Object)\nconsole.log([] instanceof Array)\nconsole.log([] instanceof Object)\nconsole.log(function() {} instanceof Function)\nconsole.log(function() {} instanceof Object)\n```\n\n```javascript\nfunction Foo(){} \nfunction BFoo(){} \nFoo.prototype = new BFoo();\nlet foo = new Foo();\nconsole.log(foo instanceof Foo); // true\nconsole.log(foo instanceof BFoo); // true  \n```\n\n```javascript\nconsole.log(String instanceof String); // flase\nconsole.log(String instanceof Object);\nconsole.log(String instanceof Function);\nconsole.log(Object instanceof Object); \nconsole.log(Function instanceof Function); \nconsole.log(Function instanceof Object);\n\nfunction Foo(){} \nfunction BFoo(){} \nFoo.prototype = new BFoo();\nconsole.log(Foo instanceof Function);\nconsole.log(Foo instanceof Foo);\n```\n\n## instanceofå®ç°\n```javascript\nfunction instance_of(L, R) {//L è¡¨ç¤ºå·¦è¾¹çš„objectï¼ŒR è¡¨ç¤ºå³è¾¹çš„constructor\n const R_P = R.prototype;// å– R çš„æ˜¾å¼åŸå‹\n L = L.__proto__;// å– L çš„éšå¼åŸå‹,å¹¶ä¸”å¯èƒ½ä¼šé¡ºç€åŸå‹é“¾é‡æ–°èµ‹å€¼\n while (true) { \n   if (L === null) \n     return false; \n   if (R_P === L)// è¿™é‡Œé‡ç‚¹ï¼šä¸¥æ ¼æ¯”è¾ƒ true \n     return true; \n   L = L.__proto__; \n } \n}\n```\n\n## é‡ç‚¹è§£æ\n![åŸå‹é“¾](https://user-images.githubusercontent.com/25027560/37870377-2bc8211a-3007-11e8-92a0-04fa96aabf13.png)\n\n- \\_\\_proto\\_\\_ å±æ€§ï¼ŒæŒ‡å‘äº†åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°çš„åŸå‹\n\n- æ‰€æœ‰JSå¯¹è±¡éƒ½æœ‰ \\_\\_proto\\_\\_ å±æ€§ï¼Œé™¤äº†Object.prototype.\\_\\_proto\\_\\_ === null\n\n- æ³¨æ„Object(),å®ƒæ˜¯ç”±functionç”Ÿæˆçš„ï¼Œæ‰€ä»¥å®ƒçš„__proto__å±æ€§æŒ‡å‘äº†functionçš„æ„é€ å™¨Functionçš„åŸå‹Function.prototype\n\n- æ³¨æ„æ„é€ å™¨Function,å®ƒæ˜¯å”¯ä¸€ä¸€ä¸ªprototypeå’Œ__proto__æŒ‡å‘ç›¸åŒçš„å¯¹è±¡\n\n- ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬æ—¥å¸¸è‡ªè¡Œåˆ›å»ºçš„æ„é€ å™¨Fooçš„__proto__å±æ€§æŒ‡å‘functionçš„æ„é€ å™¨Functionçš„åŸå‹Function.prototypeï¼Œä½†æ˜¯æ„é€ å™¨çš„åŸå‹å¯¹è±¡Foo.prototypeçš„__proto__å±æ€§æ˜¯ç›´æ¥æŒ‡å‘Object.prototypeå¯¹è±¡çš„","tags":["æ·±å…¥ç†è§£"],"categories":["JS"]},{"title":"æ·±å…¥ç†è§£JSçš„ç»§æ‰¿","url":"%2F2019%2F%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JS%E7%9A%84%E7%BB%A7%E6%89%BF.html","content":"\n{% fi https://user-images.githubusercontent.com/25027560/38763933-ac0fdb2a-3fd8-11e8-8510-5e8a2444f49a.png, Summary, Summary %}\n\n---\n<!--more-->\n\n## æ€»è§ˆ\n![c5925056-aa27-4b97-9f5d-2ec786ea5125](https://user-images.githubusercontent.com/25027560/38763933-ac0fdb2a-3fd8-11e8-8510-5e8a2444f49a.png)\n\n## ä¸€ã€å€ŸåŠ©æ„é€ å‡½æ•°\n```js\nfunction Parent1() {\n  this.name = 'parent1'\n}\nfunction Child1() {\n  // å°†çˆ¶ç±»çš„æ‰§è¡Œä¸Šä¸‹æ–‡æŒ‡å‘å­ç±»ï¼Œçˆ¶ç±»æ‰§è¡Œæ—¶çš„å®ä¾‹å±æ€§éƒ½ä¼šæŒ‡å‘å­ç±»\n  Parent1.call(this);// apply\n  this.type = 'child1'\n}\n```\n\n#### ç¼ºç‚¹\nå­ç±»æ²¡æœ‰ç»§æ‰¿çˆ¶ç±»çš„åŸå‹æ–¹æ³•\nåªç»§æ‰¿äº†çˆ¶ç±»æ„é€ å‡½æ•°ä¸­çš„å±æ€§å’Œæ–¹æ³•\n\n```js\nParent1.prototype.method = (arg) =console.log(arg);\nconsole.log(new Child1().method); // undefined\n```\n\n## äºŒã€å€ŸåŠ©åŸå‹é“¾\n```js\nfunction Parent2() {\n  this.name = 'parent2';\n  this.arr = [1, 2, 3];\n  this.method = (arg) =console.log(arg)\n}\nfunction Child2() {\n  this.type = 'child2'\n}\nChild2.prototype = new Parent2();\n```\n\nåŸå‹å›¾å¦‚ä¸‹\n![f9311957-d401-4bc0-961b-65f3f49d65ea](https://user-images.githubusercontent.com/25027560/38763935-b449916e-3fd8-11e8-8b76-e12f58c20d27.png)\n\n#### ç¼ºç‚¹\nå¼•ç”¨ç±»å‹çš„å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œå®ä¾‹ä¹‹é—´ä¼šäº’ç›¸å½±å“\n\n```js\nlet c21 = new Child2();\nlet c22 = new Child2();\n\nc21.arr.push(4);\nconsole.log(c21.arr, c22.arr);\n// æ³¨æ„ï¼Œä¸‹é¢æ˜¯ç›´æ¥ç»™å®ä¾‹æ·»åŠ methodå±æ€§\n// åªæ˜¯ä¿®æ”¹äº†methodæŒ‡é’ˆï¼Œæ²¡æœ‰ä¿®æ”¹åŸå‹é“¾ä¸Šçš„methodæ–¹æ³•\n// åªæœ‰ä¿®æ”¹å¼•ç”¨å¯¹è±¡æ‰æ˜¯çœŸæ­£çš„ä¿®æ”¹\nc21.method = 'c21';\nconsole.log(Parent2);\nconsole.log(c21, c22);\n```\n\n![c79f3ffe-030d-4753-9f32-361a2dffb9d2](https://user-images.githubusercontent.com/25027560/38763937-bad54c58-3fd8-11e8-9248-1f6b2954daf9.png)\n\n## ä¸‰ã€ç»„åˆï¼ˆæ„é€ +åŸå‹é“¾ï¼‰\n```js\nfunction Parent3() {\n  this.name = 'parent3';\n  this.arr = [1, 2, 3]\n}\nfunction Child3() {\n  Parent3.call(this);\n  this.type = 'child3'\n}\nChild3.prototype = new Parent3();\n```\n\n#### ä¼˜ç‚¹\næ¯ä¸ªå®ä¾‹ä¸ä¼šå†äº’ç›¸å½±å“\n\n#### ç¼ºç‚¹\nå®ä¾‹åŒ–æ—¶ï¼Œçˆ¶ç±»è¢«æ„é€ äº†ä¸¤æ¬¡ï¼Œè¿™æ²¡æœ‰å¿…è¦\ncallä¸€æ¬¡ï¼Œnewä¸€æ¬¡\n\n## å››ã€ç»„åˆä¼˜åŒ–ä¸€\n```js\nfunction Parent4() {\n  this.name = 'parent4';\n  this.arr = [1, 2, 3]\n}\nfunction Child4() {\n  Parent4.call(this);\n  this.type = 'child4'\n}\nChild4.prototype = Parent4.prototype;\n```\n\n![3dcc9c3e-5e1d-45bc-bcb5-72aaea635cc2](https://user-images.githubusercontent.com/25027560/38763939-c318a5fe-3fd8-11e8-9581-9e04e57976a4.png)\n\n#### ç¼ºç‚¹\næ— æ³•åˆ¤æ–­å®ä¾‹çš„æ„é€ å‡½æ•°æ˜¯çˆ¶ç±»è¿˜æ˜¯å­ç±»\n\n```js\nlet c41 = new Child4();\nlet c42 = new Child4();\nconsole.log(c41 instanceof Child4, c41 instanceof Parent4);\n// true true\n```\n\nä½†å…¶å®ï¼Œæ„é€ å‡½æ•°å°±æ˜¯çˆ¶ç±»æœ¬èº«\n\n```js\nconsole.log(c41.constructor); // Parent4\n```\n\nå¾ˆéš¾å¾—æ‰é€šè¿‡`Parent4.call(this)`æ”¹å˜äº†æ„é€ å‡½æ•°çš„æŒ‡å‘ï¼Œç°åœ¨åˆæ”¹å›å»äº†ï¼Ÿå¤©â€¦â€¦ä¸æƒ³çœ‹ä¸‹å»äº†è¡Œä¸è¡Œï¼Œå…„deiï¼ŒåšæŒä¸€ä¼šå°±æ˜¯èƒœåˆ©ï¼Œåˆ«æ‰“çŒç¡\n\n`Child4.prototype = Parent4.prototype`åªæ˜¯æŠŠ`Child4`çš„`prototype`å±æ€§æŒ‡é’ˆæŒ‡å‘äº†`Parent4.prototype`è¿™ä¸ªå¼•ç”¨å¯¹è±¡è€Œå·²ï¼Œå®é™…ä¸Š`Parent4.prototype.constructor = Parent4`\n![af779508-30f5-43ea-8af8-ff25a308ccf9](https://user-images.githubusercontent.com/25027560/38763942-cdc97b40-3fd8-11e8-8f45-c7bdb95f8f5f.png)\n\n## äº”ã€ç»„åˆä¼˜åŒ–äºŒ\n```js\nfunction Parent5() {\n  this.name = 'parent5';\n  this.arr = [1, 2, 3]\n}\nfunction Child5() {\n  Parent5.call(this);\n  this.type = 'child5'\n}\n// ç»„æˆåŸå‹é“¾\nChild5.prototype = Object.create(Parent5.prototype);\n```\n\nä½†æ˜¯ï¼Œè¿™æ—¶å€™ï¼Œå®ä¾‹å¯¹è±¡çš„`constructor`ä¾ç„¶æ˜¯`Parent5`\n\n![f611911f-9fc1-4ff8-8da6-eb7874eeb335](https://user-images.githubusercontent.com/25027560/38763943-d3d9703a-3fd8-11e8-92d4-d161a335c80c.png)\n\næ‰€ä»¥éœ€è¦é‡æ–°æŒ‡å®šå®ä¾‹å¯¹è±¡çš„æ„é€ å™¨\n\n```js\nChild5.prototype.constructor = Child5;\n```\n\n```js\nlet c51 = new Child5();\nlet c52 = new Parent5();\nconsole.log(c51 instanceof Child5, c51 instanceof Parent5);\nconsole.log(c52 instanceof Child5, c52 instanceof Parent5);\nconsole.log(c51.constructor, c52.constructor);\n// true true\n// false true\n// Child5 Parent5\n```\n\n## ç›¸å…³é“¾æ¥\n[jsåˆ›å»ºå¯¹è±¡å®ç°ç»§æ‰¿](https://mydearest.cn/js%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E5%AE%9E%E7%8E%B0%E7%BB%A7%E6%89%BF.html)","tags":["æ·±å…¥ç†è§£"],"categories":["JS"]},{"title":"æ·±å…¥ç†è§£JSçš„ç±»å‹ã€å€¼å’Œç±»å‹è½¬æ¢","url":"%2F2019%2FECMAScript%202016%E3%80%812017%E3%80%812018%20%E6%96%B0%E7%89%B9%E6%80%A7%20.html","content":"\n![image](https://user-images.githubusercontent.com/25027560/38468332-c0336d1c-3b76-11e8-93b5-94f73acab1c6.png)\n\n---\n<!--more-->\n\n## ä¸€ã€ECMAScript 2016\n### 1ã€Array.prototype.includes\n[Array.prototype.includes() - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)\n\n```js\nconst arr = [1, 2, 3, NaN];\n\nif (arr.indexOf(3) >= 0) {\n  console.log(true)\n}\n// true\n\nif (arr.includes(3)) {\n  console.log(true)\n}\n// true\n\narr.indexOf(NaN)\n// -1  æ— æ³•è¯†åˆ«NaN\narr.includes(NaN);\n// true   å¯ä»¥è¯†åˆ«NaN\n```\n\n### 2ã€æŒ‡æ•°ï¼ˆå¹‚ï¼‰è¿ç®—ç¬¦ **\n```js\nMath.pow(2, 3)\n// 8\n\n2 ** 3\n// 8\n```\n\n## äºŒã€ECMAScript 2017\n### 1ã€Object.values()\n[Object.values() - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/values)\n\n```js\nconst obj = { foo: \"bar\", baz: 42 };\nconsole.log(Object.values(obj)); // ['bar', 42]\n```\n\n### 2ã€Object.entries()\n[Object.entries() - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/entries)\n\n```js\nconst obj = { foo: 'bar', baz: 42 };\nconsole.log(Object.entries(obj)); // [ ['foo', 'bar'], ['baz', 42] ]\n```\n\n### 3ã€å­—ç¬¦ä¸²å¡«å…… String padding\n[String.prototype.padStart() - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/padStart)\n[String.prototype.padEnd() - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd)\n\n```js\n'abc'.padStart(10);         // \"       abc\"\n'abc'.padStart(10, \"foo\");  // \"foofoofabc\"\n'abc'.padStart(6,\"123465\"); // \"123abc\"\n'abc'.padStart(8, \"0\");     // \"00000abc\"\n'abc'.padStart(1);          // \"abc\"\n\n'abc'.padEnd(10);          // \"abc       \"\n'abc'.padEnd(10, \"foo\");   // \"abcfoofoof\"\n'abc'.padEnd(6, \"123456\"); // \"abc123\"\n'abc'.padEnd(1);           // \"abc\"\n```\n\næ³¨æ„ï¼ŒEmojiså’ŒåŒå­—èŠ‚å­—ç¬¦ä¼šå æ®ä¸¤ä½\n\n```js\n'heart'.padStart(10, \"â¤ï¸\"); // 'â¤ï¸â¤ï¸â¤heart'\n```\n\n### 4ã€Object.getOwnPropertyDescriptors\n[Object.getOwnPropertyDescriptor() - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor)\n\n```js\nObject.getOwnPropertyDescriptor(obj, prop)\n```\n\n`Object.getOwnPropertyDescriptor() `æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡ä¸Šä¸€ä¸ªè‡ªæœ‰å±æ€§å¯¹åº”çš„å±æ€§æè¿°ç¬¦ã€‚ï¼ˆè‡ªæœ‰å±æ€§æŒ‡çš„æ˜¯ç›´æ¥èµ‹äºˆè¯¥å¯¹è±¡çš„å±æ€§ï¼Œä¸éœ€è¦ä»åŸå‹é“¾ä¸Šè¿›è¡ŒæŸ¥æ‰¾çš„å±æ€§ï¼‰\n\n### 5ã€å‡½æ•°å‚æ•°ç»“å°¾é€—å·\n```js\nfunction fn(a, b,) {}\n// æ³¨æ„ï¼Œå‚æ•°båé¢å¤šäº†ä¸ªé€—å·ï¼Œä¸ä¼šæŠ¥è¯­æ³•é”™è¯¯\n```\n\n### 6ã€Async/Await\n[async function - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function)\n\n## ä¸‰ã€ECMAScript 2018\n### 1ã€å…±äº«å†…å­˜ä¸åŸå­æ“ä½œ\n\nå³ä½¿æœ‰event loopçš„â€œä¼ªå¤šçº¿ç¨‹â€å’ŒService Workerçš„å¼ºåŠ›å¢æ´ï¼Œä½†ä¾ç„¶æ©ç›–ä¸äº†JSæ˜¯å•çº¿ç¨‹çš„äº‹å®ã€‚\n\nå…±äº«å†…å­˜ä¸åŸå­æ“ä½œï¼Œç»™JSå¸¦æ¥äº†å¤šçº¿ç¨‹çš„åŠŸèƒ½ï¼Œå…è®¸å¼€å‘äººå‘˜è‡ªè¡Œç®¡ç†å†…å­˜æ¥å¼€å‘é«˜æ€§èƒ½é«˜å¹¶å‘çš„ç¨‹åºã€‚\n\nç›´åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡`postMessage`åœ¨JSä¸»çº¿ç¨‹å’Œweb workerä¹‹é—´é€šä¿¡ï¼Œä¼ è¾“æ•°æ®ã€‚\n\n### 2ã€éè½¬ä¹‰åºåˆ—çš„æ¨¡æ¿å­—ç¬¦ä¸²\n[éè½¬ä¹‰åºåˆ—çš„æ¨¡æ¿å­—ç¬¦ä¸² | esnext | es6 es7 es2017 es2018 es2019](http://esnext.justjavac.com/proposal/template-literal-revision.html)\n\n### 3ã€å¯¹è±¡å±•å¼€è¿ç®—ç¬¦\n```js\nlet { firstName, age, ...rest } = {\n  firstName: 'a',\n  age: 18,\n  a: 1,\n  b: 2\n};\n\nfirstName; // 'a',\nage; // 18\nrest;\n// é‡ç‚¹çœ‹è¿™é‡Œ { a: 1, b: 2 }\n```\n\n### 4ã€Promise.prototype.finally()\n\n### 5ã€å¼‚æ­¥è¿­ä»£å™¨\næä¾›äº†`for-await-of`ï¼Œå¼‚æ­¥è¿­ä»£ï¼Œç­‰å¾…æ¯ä¸ªpromiseè¢«resolveå†æ‰§è¡Œä¸‹ä¸€ä¸ª\n\n```js\nconst promises = [\n  new Promise(resolve =resolve(1)),\n  new Promise(resolve =resolve(2)),\n  new Promise(resolve =resolve(3))\n];\n```\n\n```js\n// old\nasync function test1() {\n  for (const obj of promises) {\n    console.log(obj);\n  }\n}\ntest1(); // \n// PromiseÂ {<resolved>: 1}\n// PromiseÂ {<resolved>: 2}\n// PromiseÂ {<resolved>: 3}\n```\n\n```js\n// new\nasync function test2() {\n  for await (const obj of promises) {\n    console.log(obj);\n  }\n}\ntest2();\n// 1, 2, 3\n```\n\n### 6ã€æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³\n\n* `dotAll` æ¨¡å¼ï¼Œä½¿ . å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦\n* å‘½åæ•è·ç»„ï¼Œå¯ä»¥ç†è§£ä¸ºå¢åŠ ä¸€ä¸ªå¼•ç”¨\n\n```js\nconst regex = /(\\d{4})-(\\d{2})-(\\d{2})/;\nconst matchers = regex.exec('2015-01-02');\nmatchers[0];    // 2015-01-02\nmatchers[1];    // 2015\nmatchers[2];    // 01\nmatchers[3];    // 02\n```\n\n* åå‘æ–­è¨€ Lookbehind Assertions\n* Unicodeè½¬ä¹‰ Unicode Property Escapes","tags":["æ·±å…¥ç†è§£"],"categories":["JS"]},{"title":"æ·±å…¥ç†è§£JSçš„ç±»å‹ã€å€¼å’Œç±»å‹è½¬æ¢","url":"%2F2019%2F%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3JS%E7%9A%84%E7%B1%BB%E5%9E%8B%E3%80%81%E5%80%BC%E5%92%8C%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.html","content":"\n## ä¸€ã€ä¸ƒç§å†…ç½®ç±»å‹å’Œå¸¸è§å¼•ç”¨ç±»å‹\n![ç²¾ç®€](https://user-images.githubusercontent.com/25027560/37508449-123fc606-292e-11e8-9cf8-9667338b9ac4.png)\n\n![å¤æ‚](https://user-images.githubusercontent.com/25027560/37508456-1c2c0648-292e-11e8-94d7-541f20942869.png)\n\n---\n<!--more-->\n \n## äºŒã€ç‰¹æ®Šçš„`null`\nç”¨`typeof`æ¥æ£€æŸ¥ä¸Šè¿°ä¸ƒç§ç±»å‹æ—¶ï¼Œè¿”å›çš„æ˜¯å¯¹åº”çš„ç±»å‹å­—ç¬¦ä¸²å€¼\n \n```js\ntypeof null === 'ogject' // true\n```\n \n`null`æ˜¯å”¯ä¸€ä¸€ä¸ªç”¨`typeof`æ£€æµ‹ä¼šè¿”å›`object`çš„**åŸºæœ¬ç±»å‹å€¼**ï¼ˆæ³¨æ„â€˜åŸºæœ¬â€™ä¸¤å­—ï¼‰\n \nä¸åŒçš„å¯¹è±¡åœ¨åº•å±‚éƒ½è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶\nåœ¨JavaScriptä¸­äºŒè¿›åˆ¶å‰ä¸‰ä½ä¸º0çš„è¯éƒ½ä¼šè¢«åˆ¤æ–­ä¸ºobjectç±»å‹\nnullçš„äºŒè¿›åˆ¶è¡¨ç¤ºå…¨æ˜¯0ï¼Œè‡ªç„¶å‰ä¸‰ä½ä¹Ÿæ˜¯0\næ‰€ä»¥ typeof null === â€œobjectâ€\n \n## ä¸‰ã€å¼•ç”¨ç±»å‹çš„å­ç±»å‹ï¼štypeof [å¼•ç”¨ç±»å‹] === what ?\nä¸Šé¢çš„å›¾ä¸­è™½ç„¶åˆ—å‡ºäº†ä¸ƒç§å¼•ç”¨ç±»å‹ï¼Œä½†æ˜¯\n`typeof â€˜å¼•ç”¨ç±»å‹â€™ === â€˜objectâ€™ `ä¸€å®šæˆç«‹å—ï¼Ÿ\n \nä¸ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µï¼š`typeof â€˜æŸäº›å¼•ç”¨ç±»å‹â€™ === â€˜functionâ€™`\n\n```js\ntypeof Function; // 'function'\ntypeof new Function(); // 'function'\ntypeof function() {}; // 'function'\n\ntypeof Array; // 'function'\ntypeof Array(); // 'object'\ntypeof new Array(); // 'object'\ntypeof []; // 'object'\n\ntypeof Boolean; // \"function\"\ntypeof Boolean(); // \"boolean\"\ntypeof new Boolean(); // \"object\"\n\ntypeof Math; // 'object'\ntypeof Math(); // Math is not a function\ntypeof new Math(); // Math is not a constructor\n```\n\n### 1ã€å¼•ç”¨ç±»å‹ä¸­çš„å‡½æ•°\nå…ˆçœ‹å‰ä¸‰å¥ï¼ŒåŸæ¥typeofé™¤äº†èƒ½åˆ¤æ–­`åŸºæœ¬ç±»å‹`å’Œ`object`ä¹‹å¤–ï¼Œè¿˜èƒ½åˆ¤æ–­`function`ç±»å‹ï¼Œå‡½æ•°ä¹Ÿå±äºå¯¹è±¡\n\n### 2ã€å¼•ç”¨ç±»å‹çš„å­ç±»å‹\næ‹¿`Array`ä¸¾ä¾‹å­\n\n```js\ntypeof Array; // 'function'\ntypeof Array(); // 'object'\ntypeof new Array(); // 'object'\ntypeof []; // 'object'\n```\n\n`Array`æ˜¯ä¸ªæ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ç›´æ¥æ‰“å°å‡ºfunction\nä½†æ„é€ å‡ºæ¥çš„`Array()`å´åˆæ˜¯å¦ä¸€å›äº‹äº†ï¼Œæ„é€ å‡ºæ¥çš„ç»“æœæ˜¯ä¸ªæ•°ç»„ï¼Œè‡ªç„¶å±äºå¼•ç”¨ç±»å‹ï¼Œæ‰€ä»¥ä¹Ÿå°±æ‰“å°å‡ºäº†`â€˜objectâ€™`\n\næ„é€ å‡½æ•° Array(..) ä¸è¦æ±‚å¿…é¡»å¸¦ new å…³é”®å­—ã€‚ä¸å¸¦æ—¶ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨è¡¥ä¸Šã€‚ å› æ­¤ Array(1,2,3) å’Œ new Array(1,2,3) çš„æ•ˆæœæ˜¯ä¸€æ ·çš„\n\n### 3ã€å¼•ç”¨ç±»å‹ä¸­çš„åŸºæœ¬åŒ…è£…ç±»å‹\n```js\ntypeof Boolean; // \"function\"\ntypeof Boolean(); // \"boolean\"\ntypeof new Boolean(); // \"object\"\n```\n\n`Boolean`æ˜¯ä¸ªæ„é€ å‡½æ•°ï¼Œç¬¬ä¸€å¥æ²¡é—®é¢˜\n`Boolean()`ç›´æ¥æ‰§è¡Œï¼Œå¾—å‡ºäº†å¸ƒå°”å€¼ï¼Œæ‰€ä»¥å¾—åˆ°äº†`â€˜booleanâ€™`\n\nè€Œnewå‡ºæ¥çš„æ˜¯ä¸ªBooleanå¯¹è±¡ï¼Œå…·ä½“æ¥è¯´å°±æ˜¯ï¼š`é€šè¿‡æ„é€ å‡½æ•°åˆ›å»ºå‡ºæ¥çš„æ˜¯å°è£…äº†åŸºæœ¬ç±»å‹å€¼çš„å°è£…å¯¹è±¡`\n\nè¿™é‡Œç”¨`String`æ¥ä¸¾ä¸ªä¾‹å­å§ï¼Œçœ‹åˆ°äº†å—ï¼Œä¸€ä¸ªå°è£…å¯¹è±¡\n![å°è£…å¯¹è±¡](https://user-images.githubusercontent.com/25027560/37508489-350e6e80-292e-11e8-81f2-3124d28d219e.png)\n\nä½†æ˜¯ï¼Œä¸æ¨èä½¿ç”¨è¿™ç§å°è£…å¯¹è±¡ï¼Œä¸¾ä¸ªä¾‹å­\n\n```js\nvar a = new Boolean(false);\nif (!a) {\n  console.log('Oops'); // false\n}\n```\n\naæ˜¯ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡æ°¸è¿œæ˜¯çœŸã€‚\n\n### 4ã€Mathåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ\nMathå’ŒGlobalï¼ˆæµè§ˆå™¨ä¸­æ›¿ä»£ä¸ºwindowï¼‰éƒ½æ˜¯å†…ç½®çš„å¯¹è±¡ï¼Œå¹¶ä¸æ˜¯å¼•ç”¨ç±»å‹çš„ä¸€ç§\n\n```js\ntypeof Math; // 'object'\ntypeof Math(); // Math is not a function\ntypeof new Math(); // Math is not a constructor\n```\n\næ—¢ä¸æ˜¯å‡½æ•°ï¼Œä¹Ÿä¸æ˜¯æ„é€ å™¨ã€‚\n\n## å››ã€typeofçš„å®‰å…¨é˜²èŒƒæœºåˆ¶\né¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“`underfined`å’Œ`undeclared`çš„åŒºåˆ«\næœªå®šä¹‰ä¸æœªå£°æ˜\n\nä½†æ˜¯ï¼Œå¯¹äºtypeofæ¥è¯´ï¼Œè¿™ä¸¤è€…éƒ½ä¸€æ ·ï¼Œè¿”å›çš„éƒ½æ˜¯underfined\n\n```js\nvar a;\ntypeof a; // 'underfined'\ntypeof b; // 'underfined'\n```\n\nå¾ˆæ˜æ˜¾ï¼Œæˆ‘ä»¬çŸ¥é“bå°±æ˜¯undeclaredï¼ˆæœªå£°æ˜çš„ï¼‰ï¼Œä½†åœ¨typeofçœ‹æ¥éƒ½æ˜¯ä¸€æ ·\n\nè¿™ä¸ªç‰¹æ€§ï¼Œå¯ä»¥æ‹¿æ¥åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ\n\nä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œåœ¨ç¨‹åºä¸­ä½¿ç”¨å…¨å±€å˜é‡ DEBUG ä½œä¸ºâ€œè°ƒè¯•æ¨¡å¼â€çš„å¼€å…³ã€‚åœ¨è¾“å‡ºè°ƒè¯•ä¿¡ æ¯åˆ°æ§åˆ¶å°ä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šæ£€æŸ¥ DEBUG å˜é‡æ˜¯å¦å·²è¢«å£°æ˜ã€‚é¡¶å±‚çš„å…¨å±€å˜é‡å£°æ˜ var DEBUG = true åªåœ¨ debug.js æ–‡ä»¶ä¸­æ‰æœ‰ï¼Œè€Œè¯¥æ–‡ä»¶åªåœ¨å¼€å‘å’Œæµ‹è¯•æ—¶æ‰è¢«åŠ è½½åˆ°æµè§ˆå™¨ï¼Œåœ¨ç”Ÿäº§ç¯ å¢ƒä¸­ä¸äºˆåŠ è½½ã€‚\n\né—®é¢˜æ˜¯å¦‚ä½•åœ¨ç¨‹åºä¸­æ£€æŸ¥å…¨å±€å˜é‡ DEBUG æ‰ä¸ä¼šå‡ºç° ReferenceError é”™è¯¯ã€‚è¿™æ—¶ typeof çš„ å®‰å…¨é˜²èŒƒæœºåˆ¶å°±æˆäº†æˆ‘ä»¬çš„å¥½å¸®æ‰‹:\n\n```js\n// è¿™æ ·ä¼šæŠ›å‡ºé”™è¯¯\nif (DEBUG) {\n  console.log('Debugging is starting');\n}\n// è¿™æ ·æ˜¯å®‰å…¨çš„\nif (typeof DEBUG !== 'undefined') {\n  console.log('Debugging is starting');\n}\n```\n\nè¿™ä¸ä»…å¯¹ç”¨æˆ·å®šä¹‰çš„å˜é‡(æ¯”å¦‚ DEBUG)æœ‰ç”¨ï¼Œå¯¹å†…å»ºçš„ API ä¹Ÿæœ‰å¸®åŠ©:\n\n```js\nif (typeof atob === \"undefined\") {\n         atob = function() { /*..*/ };\n}\n```\n\n## äº”ã€å€¼\nè¿™ä¸€partå¼•ç”¨è‡ª[ä¸€ã€å†…å­˜ç©ºé—´è¯¦è§£ Â· Sample GitBook](https://yangbo5207.github.io/wutongluo/ji-chu-jin-jie-xi-lie/yi-3001-nei-cun-kong-jian-xiang-jie.html)\n\nJSçš„æ‰§è¡Œä¸Šä¸‹æ–‡ç”Ÿæˆä¹‹åï¼Œä¼šåˆ›å»ºä¸€ä¸ªå«åšå˜é‡å¯¹è±¡çš„ç‰¹æ®Šå¯¹è±¡ï¼ŒJSçš„åŸºç¡€ç±»å‹éƒ½ä¿å­˜åœ¨å˜é‡å¯¹è±¡ä¸­\n\nä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œå˜é‡å¯¹è±¡ä¹Ÿæ˜¯å­˜æ”¾äºå †å†…å­˜ä¸­ï¼Œä½†æ˜¯ç”±äºå˜é‡å¯¹è±¡çš„ç‰¹æ®ŠèŒèƒ½ï¼Œæˆ‘ä»¬åœ¨ç†è§£æ—¶ä»ç„¶éœ€è¦å°†å…¶äºå †å†…å­˜åŒºåˆ†å¼€æ¥ã€‚\n\nä½†å¼•ç”¨æ•°æ®ç±»å‹çš„å€¼æ˜¯ä¿å­˜åœ¨å †å†…å­˜ä¸­çš„å¯¹è±¡ã€‚JavaScriptä¸å…è®¸ç›´æ¥è®¿é—®å †å†…å­˜ä¸­çš„ä½ç½®ï¼Œå› æ­¤æˆ‘ä»¬ä¸èƒ½ç›´æ¥æ“ä½œå¯¹è±¡çš„å †å†…å­˜ç©ºé—´ã€‚\n\nåœ¨æ“ä½œå¯¹è±¡æ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ“ä½œå¯¹è±¡çš„å¼•ç”¨è€Œä¸æ˜¯å®é™…çš„å¯¹è±¡ã€‚å› æ­¤ï¼Œå¼•ç”¨ç±»å‹çš„å€¼éƒ½æ˜¯æŒ‰å¼•ç”¨è®¿é—®çš„ã€‚\n\nè¿™é‡Œçš„å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºä¿å­˜åœ¨å˜é‡å¯¹è±¡ä¸­çš„ä¸€ä¸ªåœ°å€ï¼Œè¯¥åœ°å€ä¸å †å†…å­˜çš„å®é™…å€¼ç›¸å…³è”ã€‚\n\n![3719a7f3-3915-4719-93d8-7629fa5b47bb](https://user-images.githubusercontent.com/25027560/37508497-409cd7fa-292e-11e8-8bc4-a62effd0f3c8.png)\n\n\nè€Œä¸ºä»€ä¹ˆåŸºç¡€æ•°æ®ç±»å‹å­˜åœ¨æ ˆä¸­ï¼Œè€Œå¼•ç”¨æ•°æ®ç±»å‹å­˜åœ¨å †ä¸­å‘¢?\n\n- å †æ¯”æ ˆå¤§ï¼Œæ ˆæ¯”å †é€Ÿåº¦å¿«ã€‚\n- åŸºç¡€æ•°æ®ç±»å‹æ¯”è¾ƒç¨³å®šï¼Œè€Œä¸”ç›¸å¯¹æ¥è¯´å ç”¨çš„å†…å­˜å°ã€‚\n- å¼•ç”¨æ•°æ®ç±»å‹å¤§å°æ˜¯åŠ¨æ€çš„ï¼Œè€Œä¸”æ˜¯æ— é™çš„ã€‚\n- å †å†…å­˜æ˜¯æ— åºå­˜å‚¨ï¼Œå¯ä»¥æ ¹æ®å¼•ç”¨ç›´æ¥è·å–ã€‚\n\n## å…­ã€å¼ºåˆ¶ç±»å‹è½¬æ¢\nã€Šyou donâ€™t know JSã€‹ä¸­ ç¬¬ä¸€éƒ¨åˆ†ç¬¬4ç« \n\nç±»å‹è½¬æ¢å‘ç”Ÿåœ¨é™æ€ç±»å‹è¯­è¨€çš„ç¼–è¯‘é˜¶æ®µï¼Œè€Œå¼ºåˆ¶ç±»å‹è½¬æ¢åˆ™å‘ç”Ÿåœ¨åŠ¨æ€ç±»å‹è¯­è¨€çš„è¿è¡Œæ—¶(runtime)ã€‚\n\nç„¶è€Œåœ¨ JavaScript ä¸­é€šå¸¸å°†å®ƒä»¬ç»Ÿç§°ä¸ºå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œæˆ‘ä¸ªäººåˆ™å€¾å‘äºç”¨â€œéšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢â€(implicit coercion)å’Œâ€œæ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬æ¢â€(explicit coercion)æ¥åŒºåˆ†ã€‚\n\n### 1ã€æŠ½è±¡å€¼æ“ä½œ\nä»‹ç»æ˜¾å¼å’Œéšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæŒæ¡å­—ç¬¦ä¸²ã€æ•°å­—å’Œå¸ƒå°”å€¼ä¹‹é—´ç±»å‹è½¬æ¢çš„åŸºæœ¬è§„åˆ™\n\n1ï¸âƒ£**ToString**\ntoString() å¯ä»¥è¢«æ˜¾å¼è°ƒç”¨ï¼Œæˆ–è€…åœ¨éœ€è¦å­—ç¬¦ä¸²åŒ–æ—¶è‡ªåŠ¨è°ƒç”¨\n\nnull è½¬æ¢ä¸º \"null\"ï¼Œundefined è½¬æ¢ä¸º \"undefined\"ï¼Œtrue è½¬æ¢ä¸º \"true\"ã€‚\næ•°å­—çš„å­—ç¬¦ä¸²åŒ–åˆ™éµå¾ªé€šç”¨è§„åˆ™\næå°å’Œæå¤§çš„ æ•°å­—ä½¿ç”¨æŒ‡æ•°å½¢å¼:\n\n```js\n// 1.07 è¿ç»­ä¹˜ä»¥ä¸ƒä¸ª 1000\nvar a = 1.07 * 1000 * 1000 * 1000 * 1000 * 1000 * 1000 * 1000;\n// ä¸ƒä¸ª1000ä¸€å…±21ä½æ•°å­— \na.toString(); // \"1.07e21\"\n```\n\næ•°ç»„çš„é»˜è®¤ toString() æ–¹æ³•ç»è¿‡äº†é‡æ–°å®šä¹‰ï¼Œå°†æ‰€æœ‰å•å…ƒå­—ç¬¦ä¸²åŒ–ä»¥åå†ç”¨ \",\" è¿æ¥èµ· æ¥\n\n```js\nvar a = [1,2,3];\n a.toString(); // \"1,2,3\"\n```\n\n2ï¸âƒ£ **ToNumber**\nå…¶ä¸­ true è½¬æ¢ä¸º 1ï¼Œfalse è½¬æ¢ä¸º 0ã€‚undefined è½¬æ¢ä¸º NaNï¼Œnull è½¬æ¢ä¸º 0ã€‚\nå¤„ç†å¤±è´¥ æ—¶è¿”å› NaN(å¤„ç†æ•°å­—å¸¸é‡å¤±è´¥æ—¶ä¼šäº§ç”Ÿè¯­æ³•é”™è¯¯)\n\n3ï¸âƒ£ **ToBoolean**\nå…ˆçœ‹ä»€ä¹ˆæ˜¯å‡å€¼\n\n```\nâ€¢ undefined\nâ€¢ null\nâ€¢ false\nâ€¢ +0ã€-0 å’Œ NaN\nâ€¢ \"\"\n```\nå‡å€¼çš„å¸ƒå°”å¼ºåˆ¶ç±»å‹è½¬æ¢ç»“æœä¸º falseã€‚\nä»é€»è¾‘ä¸Šè¯´ï¼Œå‡å€¼åˆ—è¡¨ä»¥å¤–çš„éƒ½åº”è¯¥æ˜¯çœŸå€¼(truth)\n\n```js\nvar a = new Boolean(false);\nvar b = new Number(0);\nvar c = new String('');\n\nvar d1 = Boolean( a && b && c );\nvar d2 = a && b && c;\n```\n\n![63754230-e3da-4363-a04d-cccca7030a15](https://user-images.githubusercontent.com/25027560/37508500-49f02fd2-292e-11e8-929b-168ea4309baf.png)\n\nå¦‚æœå‡å€¼å¯¹è±¡å¹¶éå°è£…äº†å‡å€¼çš„å¯¹è±¡ï¼Œé‚£å®ƒç©¶ç«Ÿæ˜¯ä»€ä¹ˆ?\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶ JavaScript ä»£ç ä¸­ä¼šå‡ºç°å‡å€¼å¯¹è±¡ï¼Œä½†å®ƒå®é™…ä¸Šå¹¶ä¸å±äº JavaScript è¯­è¨€çš„èŒƒç•´ã€‚\næµè§ˆå™¨åœ¨æŸäº›ç‰¹å®šæƒ…å†µä¸‹ï¼Œåœ¨å¸¸è§„ JavaScript è¯­æ³•åŸºç¡€ä¸Šè‡ªå·±åˆ›å»ºäº†ä¸€äº›å¤–æ¥(exotic) å€¼ï¼Œè¿™äº›å°±æ˜¯â€œå‡å€¼å¯¹è±¡â€ã€‚\nå‡å€¼å¯¹è±¡çœ‹èµ·æ¥å’Œæ™®é€šå¯¹è±¡å¹¶æ— äºŒè‡´(éƒ½æœ‰å±æ€§ï¼Œç­‰ç­‰)ï¼Œä½†å°†å®ƒä»¬å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºå¸ƒå°” å€¼æ—¶ç»“æœä¸º falseã€‚\n\n**çœŸå€¼å°±æ˜¯å‡å€¼åˆ—è¡¨ä¹‹å¤–çš„å€¼**\n\n```js\nvar a = 'false';\nvar b = '0';\nvar c = \"''\";\nvar d1 = Boolean(a && b && c);\nvar d2 = a && b && c\n```\n\n![985c49a4-061f-42fe-978c-83f7724d8867](https://user-images.githubusercontent.com/25027560/37508506-4e686bd8-292e-11e8-881b-81d56ac71281.png)\n\n\n```js\nvar a = \"0\";\nvar b = [];\nvar c = {};\nvar d = \"\";\nvar e = 0;\nvar f = null;\nvar g;\nBoolean( a ); // true  ç‰¹åˆ«æ³¨æ„è¿™ä¸ªï¼Œå­—ç¬¦ä¸²0å’Œç©ºå­—ç¬¦ä¸²ä¸ä¸€æ ·\nBoolean( b ); // true\nBoolean( c ); // true\nBoolean( d ); // false  å’Œç¬¬ä¸€ä¸ªæ¯”ï¼Œç©ºå­—ç¬¦ä¸²æ˜¯false\nBoolean( e ); // false\nBoolean( f ); // false\nBoolean( g ); // false\n```\n\n### 2ã€æ˜¾å¼ç±»å‹è½¬æ¢\n\n```js\n// å­—ç¬¦ä¸²è½¬æ¢\nvar a = 42;\nvar b = String(a);\n// æ•°å­—è½¬æ¢\nvar c = '3.14';\nvar d = Number(c);\n// å¸ƒå°”å€¼è½¬æ¢\nvar e = [];\nvar f = Boolean(e)\n```\n\n### 3ã€éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢\n1ï¸âƒ£å­—ç¬¦ä¸²å’Œæ•°å­—ä¹‹é—´çš„éšå¼è½¬æ¢\n\n```js\nvar a = '42';\nvar b = '0';\nvar c = 42;\nvar d = 0;\na + b; // \"420\" è¿™ä¸ªåœ°æ–¹ï¼Œæ³¨æ„ä¸€ä¸‹\nc + d; // 42\n```\n\n```js\nconsole.log([] + {}); // [object object]\nconsole.log({} + []); // ?è¿™ä¼šæ˜¯å¤šå°‘å‘¢ï¼Ÿ\n```\n\nã€Šyou donâ€™t know JS ã€‹ä¸­5.1.3ç« èŠ‚æ˜¯è¿™æ ·è¯´çš„\n\nè¿˜æœ‰ä¸€ä¸ªå‘å¸¸è¢«æåˆ°(æ¶‰åŠå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œå‚è§ç¬¬ 4 ç« )\n[] + {}; // \"[object Object]\"\n{} + []; // 0\nè¡¨é¢ä¸Šçœ‹ + è¿ç®—ç¬¦æ ¹æ®ç¬¬ä¸€ä¸ªæ“ä½œæ•°([] æˆ– {})çš„ä¸åŒä¼šäº§ç”Ÿä¸åŒçš„ç»“æœï¼Œå®åˆ™ä¸ç„¶ã€‚ ç¬¬ä¸€è¡Œä»£ç ä¸­ï¼Œ{} å‡ºç°åœ¨ + è¿ç®—ç¬¦è¡¨è¾¾å¼ä¸­ï¼Œå› æ­¤å®ƒè¢«å½“ä½œä¸€ä¸ªå€¼(ç©ºå¯¹è±¡)æ¥å¤„ç†ã€‚ç¬¬\n4 ç« è®²è¿‡ [] ä¼šè¢«å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸º \"\"ï¼Œè€Œ {} ä¼šè¢«å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸º \"[object Object]\"ã€‚\nä½†åœ¨ç¬¬äºŒè¡Œä»£ç ä¸­ï¼Œ{} è¢«å½“ä½œä¸€ä¸ªç‹¬ç«‹çš„ç©ºä»£ç å—(ä¸æ‰§è¡Œä»»ä½•æ“ä½œ)ã€‚ä»£ç å—ç»“å°¾ä¸éœ€ è¦åˆ†å·ï¼Œæ‰€ä»¥è¿™é‡Œä¸å­˜åœ¨è¯­æ³•ä¸Šçš„é—®é¢˜ã€‚æœ€å + [] å°† [] æ˜¾å¼å¼ºåˆ¶ç±»å‹è½¬æ¢(å‚è§ç¬¬ 4 ç« ) ä¸º 0ã€‚\n\nä½†ç›®å‰çš„chromeæµè§ˆå™¨æ§åˆ¶å°æ˜¯è¿™æ ·çš„\n![034d7fa4-b144-4028-a346-0a52a3ab7faa](https://user-images.githubusercontent.com/25027560/37508514-5698c8fc-292e-11e8-9220-52136c53d5c4.png)\n\n\n{} å…¶å®åº”è¯¥å½“æˆä¸€ä¸ªä»£ç å—ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Objectï¼Œå½“ä½ åœ¨console.logä½¿ç”¨çš„æ—¶å€™ï¼Œ{} è¢«å½“æˆäº†ä¸€ä¸ª Object\n![8c597cc9-d2e2-4a51-ad8c-dd1a25ac27db](https://user-images.githubusercontent.com/25027560/37509112-ef5b653e-2930-11e8-8456-824fd66271da.png)\n\n2ï¸âƒ£ éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºå¸ƒå°”å€¼\nä¸‹é¢çš„æƒ…å†µä¼šå‘ç”Ÿ å¸ƒå°”å€¼éšå¼å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚\n\n* (1)if (..)è¯­å¥ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ã€‚\n* (2)for ( .. ; .. ; .. )è¯­å¥ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼(ç¬¬äºŒä¸ª)ã€‚\n* (3) while (..) å’Œ do..while(..) å¾ªç¯ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ã€‚\n* (4)? :ä¸­çš„æ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼ã€‚\n* (5) é€»è¾‘è¿ç®—ç¬¦ ||(é€»è¾‘æˆ–)å’Œ &&(é€»è¾‘ä¸)å·¦è¾¹çš„æ“ä½œæ•°(ä½œä¸ºæ¡ä»¶åˆ¤æ–­è¡¨è¾¾å¼)ã€‚\n\n3ï¸âƒ£ || ä¸ &&\nå°±ä¸€å¥è¯ï¼Œç†è§£äº†å°±ä¸‡å²ï¼Œç§°ä¹‹ä¸ºâ€œæ“ä½œæ•°é€‰æ‹©å™¨â€\n\n```js\na || b;\n// å¤§è‡´ç›¸å½“äº(roughly equivalent to): a ? a : b;\na && b;\n// å¤§è‡´ç›¸å½“äº(roughly equivalent to): a ? b : a;\n```\n\n### 4ã€== ä¸ ===\n- å¸¸è§çš„è¯¯åŒºæ˜¯â€œ== æ£€æŸ¥å€¼æ˜¯å¦ç›¸ç­‰ï¼Œ=== æ£€æŸ¥å€¼å’Œç±»å‹æ˜¯å¦ç›¸ç­‰â€\n- æ­£ç¡®çš„è§£é‡Šæ˜¯:â€œ== å…è®¸åœ¨ç›¸ç­‰æ¯”è¾ƒä¸­è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼Œè€Œ === ä¸å…è®¸ã€‚","tags":["æ·±å…¥ç†è§£"],"categories":["JS"]},{"title":"React Refsæ­å¯†","url":"%2FReact%20Refs%E5%92%8CDOM%E6%8F%AD%E5%AF%86.html","content":"\n## ä»€ä¹ˆæ˜¯Ref\nReactçš„å®˜æ–¹ä»‹ç»æ˜¯è¿™æ ·çš„ï¼š\n\nIn the typical React dataflow, props are the only way that parent components interact with their children. To modify a child, you re-render it with new props. However, there are a few cases where you need to imperatively modify a child outside of the typical dataflow. The child to be modified could be an instance of a React component, or it could be a DOM element. For both of these cases, React provides an escape hatch.\n\nå…¶ä¸­æåˆ°äº†è¿™å‡ ä¸ªæ¦‚å¿µï¼š\n\nåœ¨å…¸å‹çš„Reactæ•°æ®æµç†å¿µä¸­ï¼Œçˆ¶ç»„ä»¶è·Ÿå­ç»„ä»¶çš„äº¤äº’éƒ½æ˜¯é€šè¿‡ä¼ é€’å±æ€§(properties)å®ç°çš„ã€‚å¦‚æœçˆ¶ç»„ä»¶éœ€è¦ä¿®æ”¹å­ç»„ä»¶ï¼Œåªéœ€è¦å°†æ–°çš„å±æ€§ä¼ é€’ç»™å­ç»„ä»¶ï¼Œç”±å­ç»„ä»¶æ¥å®ç°å…·ä½“çš„ç»˜åˆ¶é€»è¾‘ã€‚\n \nåœ¨ç‰¹æ®Šçš„æƒ…å†µä¸‹ï¼Œå¦‚æœä½ éœ€è¦å‘½ä»¤å¼(imperatively)çš„ä¿®æ”¹å­ç»„ä»¶ï¼ŒReactä¹Ÿæä¾›äº†åº”æ€¥çš„å¤„ç†åŠæ³•--Refã€‚\n\nRef æ—¢æ”¯æŒä¿®æ”¹DOMå…ƒç´ ï¼Œä¹Ÿæ”¯æŒä¿®æ”¹è‡ªå®šä¹‰çš„ç»„ä»¶ã€‚\n\n---\n<!-- more -->\n\n## ä»€ä¹ˆæ˜¯å£°æ˜å¼ç¼–ç¨‹(Declarative Programming)\nå€¼å¾—ä¸€æçš„æ˜¯å½“ä¸­å£°æ˜å¼ç¼–ç¨‹(Declarative Programming)å’Œå‘½ä»¤å¼ç¼–ç¨‹(Imperative Programming)çš„åŒºåˆ«ã€‚å£°æ˜å¼ç¼–ç¨‹çš„ç‰¹ç‚¹æ˜¯åªæè¿°è¦å®ç°çš„ç»“æœï¼Œè€Œä¸å…³å¿ƒå¦‚ä½•ä¸€æ­¥ä¸€æ­¥å®ç°çš„ï¼Œè€Œå‘½ä»¤å¼ç¼–ç¨‹åˆ™ç›¸åï¼Œå¿…é¡»æ¯ä¸ªæ­¥éª¤éƒ½å†™æ¸…æ¥šã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®è¯­ä¹‰ç›´è§‚çš„ç†è§£ä»£ç çš„åŠŸèƒ½æ˜¯ï¼šé’ˆå¯¹æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œå°†å®ƒçš„å€¼æ‰“å°å‡ºæ¥ã€‚ä¸å¿…å…³å¿ƒå®ç°å…¶çš„ç»†èŠ‚ã€‚è€Œå‘½ä»¤å¼ç¼–ç¨‹å¿…é¡»å°†æ¯è¡Œä»£ç è¯»æ‡‚ï¼Œç„¶åå†æ•´åˆèµ·æ¥ç†è§£æ€»ä½“å®ç°çš„åŠŸèƒ½ã€‚\n\nReactæœ‰2ä¸ªåŸºçŸ³è®¾è®¡ç†å¿µï¼šä¸€ä¸ªæ˜¯å£°æ˜å¼ç¼–ç¨‹ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°å¼ç¼–ç¨‹ã€‚å‡½æ•°å¼ç¼–ç¨‹ä»¥åæœ‰æœºä¼šå†å±•å¼€è®²ã€‚å£°æ˜å¼ç¼–ç¨‹çš„ç‰¹ç‚¹ä½“ç°åœ¨2æ–¹é¢ï¼š\n\nç»„ä»¶å®šä¹‰çš„æ—¶å€™ï¼Œæ‰€æœ‰çš„å®ç°é€»è¾‘éƒ½å°è£…åœ¨ç»„ä»¶çš„å†…éƒ¨ï¼Œé€šè¿‡stateç®¡ç†ï¼Œå¯¹å¤–åªæš´éœ²å±æ€§ã€‚\n\nç»„ä»¶ä½¿ç”¨çš„æ—¶å€™ï¼Œç»„ä»¶è°ƒç”¨è€…é€šè¿‡ä¼ å…¥ä¸åŒå±æ€§çš„å€¼æ¥è¾¾åˆ°å±•ç°ä¸åŒå†…å®¹çš„æ•ˆæœã€‚ä¸€åˆ‡æ•ˆæœéƒ½æ˜¯äº‹å…ˆå®šä¹‰å¥½çš„ï¼Œè‡³äºæ•ˆæœæ˜¯æ€ä¹ˆå®ç°çš„ï¼Œç»„ä»¶è°ƒç”¨è€…ä¸éœ€è¦å…³å¿ƒã€‚\n\nå› æ­¤ï¼Œåœ¨ä½¿ç”¨Reactçš„æ—¶å€™ï¼Œä¸€èˆ¬å¾ˆå°‘éœ€è¦ç”¨åˆ°Refã€‚é‚£ä¹ˆï¼ŒRefçš„ä½¿ç”¨åœºæ™¯åˆæ˜¯ä»€ä¹ˆï¼Ÿ\n\n## Refä½¿ç”¨åœºæ™¯\nReactå®˜æ–¹æ–‡æ¡£æ˜¯è¿™ä¹ˆè¯´çš„ï¼š\n\nThere are a few good use cases for refs: Managing focus, text selection, or media playback.Triggering imperative animations.Integrating with third-party DOM libraries. Avoid using refs for anything that can be done declaratively.\n\nç®€å•ç†è§£å°±æ˜¯ï¼Œæ§åˆ¶ä¸€äº›DOMåŸç”Ÿçš„æ•ˆæœï¼Œå¦‚è¾“å…¥æ¡†çš„èšç„¦æ•ˆæœå’Œé€‰ä¸­æ•ˆæœç­‰ï¼›è§¦å‘ä¸€äº›å‘½ä»¤å¼çš„åŠ¨ç”»ï¼›é›†æˆç¬¬ä¸‰æ–¹çš„DOMåº“ã€‚æœ€åè¿˜è¡¥äº†ä¸€å¥ï¼šå¦‚æœè¦å®ç°çš„åŠŸèƒ½å¯ä»¥é€šè¿‡å£°æ˜å¼çš„æ–¹å¼å®ç°ï¼Œå°±ä¸è¦å€ŸåŠ©Refã€‚\n\né€šå¸¸æˆ‘ä»¬ä¼šåˆ©ç”¨ render æ–¹æ³•å¾—åˆ°ä¸€ä¸ª App ç»„ä»¶çš„å®ä¾‹ï¼Œç„¶åå°±å¯ä»¥å¯¹å®ƒåšä¸€äº›æ“ä½œã€‚ä½†åœ¨ç»„ä»¶å†…ï¼ŒJSX æ˜¯ä¸ä¼šè¿”å›ä¸€ä¸ªç»„ä»¶çš„å®ä¾‹çš„ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªReactElementï¼Œåªæ˜¯å‘Šè¯‰ä½ ï¼ŒReactè¢«æŒ‚è½½çš„ç»„ä»¶åº”è¯¥ä»€ä¹ˆæ ·ï¼š\n\n```js\nconst myApp = <App />\n```\n\nrefså°±æ˜¯ç”±æ­¤è€Œç”Ÿï¼Œå®ƒæ˜¯Reactç»„ä»¶ä¸­éå¸¸ç‰¹æ®Šçš„propsï¼Œ å¯ä»¥é™„åŠ åˆ°ä»»ä½•ä¸€ä¸ªç»„ä»¶ä¸Šï¼Œä»å­—é¢æ„æ€ä¸Šçœ‹ï¼Œrefså³referenceï¼Œç»„ä»¶è¢«è°ƒç”¨æ—¶ä¼šåˆ›å»ºä¸€ä¸ªè¯¥ç»„ä»¶çš„å®ä¾‹ï¼Œè€Œrefdå°±ä¼šæŒ‡å‘è¿™ä¸ªå®ä¾‹ã€‚\n\n## Refç”¨æ³•\nå¦‚æœä½œç”¨åœ¨åŸç”Ÿçš„DOMå…ƒç´ ä¸Šï¼Œé€šè¿‡Refè·å–çš„æ˜¯DOMå…ƒç´ ï¼Œå¯ä»¥ç›´æ¥æ“ä½œDOMçš„APIï¼š\n\n```js\nclass CustomTextInput extends React.Component {  \n    constructor(props) {    \n        super(props);        \n         this.focusTextInput = this.focusTextInput.bind(this);  \n    } \n    focusTextInput() {    \n        if(this.myTextInput !== null) {         \n             this.textInput.current.focus();    \n        }  \n    }  \n    render() {    \n         return (      \n             <div>        \n                 <input type=\"text\" ref={(ref) => this.myTextInput = ref} />        \n                 <input type=\"button\" value=\"Focus the text input\" onClick={this.focusTextInput}/>      \n             </div>    \n \n         );  \n     } \n }\n ```\n \n å¦‚æœä½œç”¨åœ¨è‡ªå®šä¹‰ç»„ä»¶ï¼ŒRefè·å–çš„æ˜¯ç»„ä»¶çš„å®ä¾‹ï¼Œå¯ä»¥ç›´æ¥æ“ä½œç»„ä»¶å†…çš„ä»»æ„æ–¹æ³•ï¼š\n \n ```js\n class AutoFocusTextInput extends React.Component {  \n    constructor(props) {    \n        super(props);    \n         this.textInput = React.createRef();  \n    }  \n    componentDidMount() {    \n        this.textInput.current.focusTextInput();  \n    }  \n    render() {    \n        return (      \n            <CustomTextInput ref={this.textInput} />    \n        );  \n    } \n}\n```\n \n## Refæ€»ç»“\nä¸ºäº†é˜²æ­¢å†…å­˜æ³„æ¼ï¼Œå½“å¸è½½ä¸€ä¸ªç»„ä»¶æ—¶ï¼Œç»„ä»¶é‡Œæ‰€æœ‰çš„refså°±ä¼šå˜æˆnullã€‚\n\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ`findDOMNode` å’Œ `refs` éƒ½æ— æ³•ç”¨äºæ— çŠ¶æ€ç»„ä»¶ä¸­ã€‚å› ä¸ºï¼Œæ— çŠ¶æ€ç»„ä»¶æŒ‚è½½æ—¶åªæ˜¯æ–¹æ³•è°ƒç”¨ï¼Œå¹¶æ²¡æœ‰åˆ›å»ºå®ä¾‹ã€‚\n\nå¯¹äº React ç»„ä»¶æ¥è®²ï¼Œrefs ä¼šæŒ‡å‘ä¸€ä¸ªç»„ä»¶ç±»å®ä¾‹ï¼Œæ‰€ä»¥å¯ä»¥è°ƒç”¨è¯¥ç±»å®šä¹‰çš„ä»»ä½•æ–¹æ³•ã€‚å¦‚æœéœ€è¦è®¿é—®è¯¥ç»„ä»¶çš„çœŸå® DOM ï¼Œå¯ä»¥ç”¨ ReactDOM ã€‚ findDOMNodeæ¥æ‰¾åˆ° DOM èŠ‚ç‚¹ï¼Œä½†å¹¶ä¸æ¨èè¿™æ ·åšï¼Œå› ä¸ºè¿™å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ‰“ç ´äº†å°è£…æ€§ï¼Œè€Œä¸”é€šå¸¸éƒ½èƒ½ç”¨æ›´æ¸…æ™°çš„æ–¹æ³•åœ¨Reactä¸­æ„å»ºä»£ç ã€‚","tags":["react"],"categories":["JS"]},{"title":"flutterå…¥é—¨","url":"%2Fflutter%E5%85%A5%E9%97%A8.html","content":"\n## ä»€ä¹ˆæ˜¯flutter\n> Flutter is Googleâ€™s mobile UI framework for crafting high-quality \n> native interfaces on iOS and Android in record time. Flutter works \n> with existing code, is used by developers and organizations around \n> the world,and is free and open source.\n\n## ç¯å¢ƒå®‰è£…\n\n### ä¸‹è½½SDK\nhttps://flutter.io/docs/development/tools/sdk/archive?tab=macos#macos\næˆ–è€…\ngit clone -b beta https://github.com/flutter/flutter.git\n\n### é•œåƒ\næ·»åŠ ç¯å¢ƒå˜é‡ .bash_profile\n```bash\nexport ANDROID_HOME=~/Library/Android/sdk\nexport PATH=${PATH}:${ANDROID_HOME}/tools\nexport PATH=${PATH}:${ANDROID_HOME}/platform-tools\nexport PUB_HOSTED_URL=https://pub.flutter-io.cn\nexport FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn\nexport PATH=/Users/chenyu/treasure/flutter/flutter/bin:$PATH\n```\n\n### è¿è¡Œ`flutter doctor`æŸ¥çœ‹æ˜¯å¦éœ€è¦å®‰è£…å…¶å®ƒä¾èµ–é¡¹æ¥å®Œæˆå®‰è£…ï¼š\n\nè¯¥å‘½ä»¤æ£€æŸ¥æ‚¨çš„ç¯å¢ƒå¹¶åœ¨ç»ˆç«¯çª—å£ä¸­æ˜¾ç¤ºæŠ¥å‘Šã€‚Dart SDKå·²ç»åœ¨æ†ç»‘åœ¨Flutteré‡Œäº†ï¼Œæ²¡æœ‰å¿…è¦å•ç‹¬å®‰è£…Dartã€‚ ä»”ç»†æ£€æŸ¥å‘½ä»¤è¡Œè¾“å‡ºä»¥è·å–å¯èƒ½éœ€è¦å®‰è£…çš„å…¶ä»–è½¯ä»¶æˆ–è¿›ä¸€æ­¥éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆä»¥ç²—ä½“æ˜¾ç¤ºï¼‰\n\n## åˆ›å»ºé¡¹ç›®\n1. åœ¨AndroidStudioå®‰è£…Dartæ’ä»¶ã€‚å¯åŠ¨studioï¼Œæœç´¢flutterï¼Œè‡ªåŠ¨å®‰è£…Dartæ’ä»¶ï¼Œå®Œæˆåé‡å¯studioã€‚ \n\n2. Android Studio - File - New -New Flutter Project\n\n### æ–‡ä»¶å…¥å£\né¡¹ç›®è·¯å¾„ä¸‹çš„libæ–‡ä»¶å¤¹ä¸‹çš„main.dartæ–‡ä»¶\n\n```java\nimport 'package:flutter/material.dart'; //å¯¼åŒ…\nvoid main() => runApp(new MyApp());\nclass MyApp extends StatelessWidget {\n  // This widget is the root of your application.\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialAp\n}\n```","tags":["flutter"],"categories":["JS"]},{"title":"å¦‚ä½•ç”¨jså®ç°JSON.parse()","url":"%2F%E5%A6%82%E4%BD%95%E7%94%A8js%E5%AE%9E%E7%8E%B0JSON.parse().html","content":"\n## eval\n```javascript\nvar json = '{\"a\":\"1\", \"b\":2}';\nvar obj = eval(\"(\" + json + \")\");  // obj å°±æ˜¯ json ååºåˆ—åŒ–ä¹‹åå¾—åˆ°çš„å¯¹è±¡\n```\n> ä¸ºä»€ä¹ˆè¦åŠ æ‹¬å·å‘¢ï¼Ÿ\nå› ä¸ºjsä¸­{}é€šå¸¸æ˜¯è¡¨ç¤ºä¸€ä¸ªè¯­å¥å—ï¼Œevalåªä¼šè®¡ç®—è¯­å¥å—å†…çš„å€¼è¿›è¡Œè¿”å›ã€‚åŠ ä¸Šæ‹¬å·å°±å˜æˆä¸€ä¸ªæ•´ä½“çš„è¡¨è¾¾å¼ã€‚\n\n```javascript\nconsole.log( eval('{}') );      // undefind\nconsole.log( eval('({})') );    // Object {}\n```\n\n> evalä½œç”¨åŸŸé—®é¢˜\n```javascript\nvar s = 1;\nfunction a() {\n    eval('var s=2');\n    console.log(s);\n}\na();                // 2\nconsole.log(s);     // 1\n```\nåœ¨å±€éƒ¨ç¯å¢ƒä½¿ç”¨evalä¾¿ä¼šåˆ›å»ºå±€éƒ¨å˜é‡ã€‚å¯ä»¥æ˜¾ç¤ºæŒ‡å®ševalè°ƒç”¨è€…æ¥æ”¹å˜ä¸Šä¸‹æ–‡ç¯å¢ƒã€‚\n\n```javascript\nvar s = 'global';\nfunction a() {\n    eval('var s = \"local\"');\n    console.log(s);                 // local\n    console.log(eval('s'));         // local\n    console.log(window.eval('s'));  // global\n}\n```\n\n### å¯¹å‚æ•°jsonè¿›è¡Œæ ¡éªŒé˜²æ­¢xssæ¼æ´\n```javascript\nvar rx_one = /^[\\],:{}\\s]*$/;\nvar rx_two = /\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g;\nvar rx_three = /\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g;\nvar rx_four = /(?:^|:|,)(?:\\s*\\[)+/g;\n\nif (\n    rx_one.test(\n        json\n            .replace(rx_two, \"@\")\n            .replace(rx_three, \"]\")\n            .replace(rx_four, \"\")\n    )\n) {\n    var obj = eval(\"(\" +json + \")\");\n}\n```\n\n## é€’å½’æ‰‹åŠ¨æ‰«ææ¯ä¸ªå­—ç¬¦\n\n## new Function å‡½æ•°å£°æ˜çš„ä¼ å‚å½¢å¼\n```javascript\nvar add = new Function('a, b', 'return a+b;');\nconsole.log( add(2, 3) );    // 5\n```\n\n```javascript\nvar jsonStr = '{ \"age\": 20, \"name\": \"jack\" }',\n    json = (new Function('return ' + jsonStr))();\n```\n\n## æ’å…¥script\n> æ¨¡æ‹ŸjsonPçš„æ–¹å¼æ‹¼æ¥å­—ç¬¦ä¸²ç„¶åä»¥callBackçš„æ–¹å¼è¿”å›ã€‚","tags":["å‰ç«¯"],"categories":["JS"]},{"title":"Sassã€Lesså’ŒStylusåŒºåˆ«","url":"%2Fsass%E3%80%81less%E5%92%8Cstylus%E5%8C%BA%E5%88%AB.html","content":"\nåœ¨å‰ç«¯ç•Œï¼Œæœ‰ä¸‰å¤§ CSS é¢„å¤„ç†å™¨ï¼Œåˆ†åˆ«æ˜¯ SASS(SCSS), Less, Stylusã€‚\næœ¬æ–‡ä¾¿æ€»ç»“ä¸‹ Sassã€Less CSSã€Stylusè¿™ä¸‰ä¸ªé¢„å¤„ç†å™¨çš„åŒºåˆ«å’Œå„è‡ªçš„åŸºæœ¬è¯­æ³•ã€‚\n\n> æˆ‘æ°¸è¿œå–œæ¬¢Stylus :>\n\n## ä»€ä¹ˆæ˜¯CSSé¢„å¤„ç†å™¨\n\nCSS é¢„å¤„ç†å™¨æ˜¯ä¸€ç§è¯­è¨€ç”¨æ¥ä¸º CSS å¢åŠ ä¸€äº›ç¼–ç¨‹çš„çš„ç‰¹æ€§ï¼Œæ— éœ€è€ƒè™‘æµè§ˆå™¨çš„å…¼å®¹æ€§é—®é¢˜ï¼Œä¾‹å¦‚ä½ å¯ä»¥åœ¨ CSS ä¸­ä½¿ç”¨å˜é‡ã€ç®€å•çš„ç¨‹åºé€»è¾‘ã€å‡½æ•°ç­‰ç­‰åœ¨ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€äº›åŸºæœ¬æŠ€å·§ï¼Œå¯ä»¥è®©CSS æ›´è§ç®€æ´ï¼Œé€‚åº”æ€§æ›´å¼ºï¼Œä»£ç æ›´ç›´è§‚ç­‰è¯¸å¤šå¥½å¤„ã€‚\n\n## åŸºæœ¬è¯­æ³•æ¯”è¾ƒ\n\n### Sasså’ŒLess\né¦–å…ˆ Sass å’Œ Less éƒ½ä½¿ç”¨çš„æ˜¯æ ‡å‡†çš„ CSS è¯­æ³•ï¼Œå› æ­¤å¦‚æœå¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†å·²æœ‰çš„ CSS ä»£ç è½¬ä¸ºé¢„å¤„ç†å™¨ä»£ç ï¼Œé»˜è®¤ Sass ä½¿ç”¨ .scss æ‰©å±•åï¼Œè€Œ Less ä½¿ç”¨ .Less æ‰©å±•åã€‚\n```css\n/* style.scss or style.Less */\nh1 {\n  color: #0982C1;\n}\n```\nå¦ä¸€ç§ä¹Ÿæ˜¯æœ€æ—©çš„ Sass è¯­æ³•æ ¼å¼ï¼Œè¢«ç§°ä¸ºç¼©è¿›æ ¼å¼ (Indented Sass) é€šå¸¸ç®€ç§° \"Sass\"ï¼Œæ˜¯ä¸€ç§ç®€åŒ–æ ¼å¼ã€‚å®ƒä½¿ç”¨ â€œç¼©è¿›â€ ä»£æ›¿ â€œèŠ±æ‹¬å·â€ è¡¨ç¤ºå±æ€§å±äºæŸä¸ªé€‰æ‹©å™¨ï¼Œç”¨ â€œæ¢è¡Œâ€ ä»£æ›¿ â€œåˆ†å·â€ åˆ†éš”å±æ€§ï¼Œå¾ˆå¤šäººè®¤ä¸ºè¿™æ ·åšæ¯” SCSS æ›´å®¹æ˜“é˜…è¯»ï¼Œä¹¦å†™ä¹Ÿæ›´å¿«é€Ÿã€‚ç¼©è¿›æ ¼å¼ä¹Ÿå¯ä»¥ä½¿ç”¨ Sass çš„å…¨éƒ¨åŠŸèƒ½ï¼Œåªæ˜¯ä¸ SCSS ç›¸æ¯”ä¸ªåˆ«åœ°æ–¹é‡‡å–äº†ä¸åŒçš„è¡¨è¾¾æ–¹å¼ã€‚\n```css\n/* style.Sass */\nh1\n  color: #0982c1\n```\n\nè€Œ Stylus æ”¯æŒçš„è¯­æ³•è¦æ›´å¤šæ ·æ€§ä¸€ç‚¹ï¼Œå®ƒé»˜è®¤ä½¿ç”¨ .styl çš„æ–‡ä»¶æ‰©å±•åã€‚å¯ä»¥éšæ„åœ°ä¹¦å†™ã€‚\n```css\n/* style.styl */\nh1 {\n  color: #0982C1;\n}\n/* çœç•¥èŠ±æ‹¬å· */\nh1\n  color: #0982C1;\n/* çœç•¥èŠ±æ‹¬å·å’Œåˆ†å· */\nh1\n  color #0982C1\n```\n\n---\n<!--more-->\n\n### å˜é‡å£°æ˜\n1. Sass\n> Sasså˜é‡å¿…é¡»æ˜¯ä»¥$å¼€å¤´çš„ï¼Œç„¶åå˜é‡å’Œå€¼ä¹‹é—´ä½¿ç”¨å†’å·ï¼ˆï¼šï¼‰éš”å¼€ï¼Œå’Œcsså±æ€§æ˜¯ä¸€æ ·çš„ã€‚\n2. Less\n>  Lesså˜é‡éƒ½æ˜¯ç”¨@å¼€å¤´çš„ã€‚\n3. Stylus\n>  Styluså¯¹å˜é‡æ˜¯æ²¡æœ‰ä»»ä½•çº¦æŸï¼Œå¯ä»¥æ˜¯ä»¥$å¼€å¤´ï¼Œæˆ–è€…ä»»ä½•çš„å­—ç¬¦ï¼Œè€Œä¸”ä¸å˜é‡ä¹‹é—´å¯ä»¥ç”¨å†’å·ï¼Œç©ºæ ¼éš”å¼€ã€‚\n\n### åµŒå¥—\n```css\nsection {\n  margin: 10px;\n  nav {\n    height: 25px;\n    a {\n      color: #0982C1;\n      &:hover {\n        text-decoration: underline;\n      }\n    }\n  }\n} \n/* ä½¿ç”¨â€œ&â€ç¬¦å·æ¥å¼•ç”¨çˆ¶é€‰æ‹©å™¨ã€‚ */\n```\n\n### è¿ç®—ç¬¦\n```css\nbody {\n  margin: (14px/2);\n  top: 50px + 100px;\n  right: 80 * 10%;\n}\n```\n\n### é¢œè‰²å‡½æ•°\n- Sass\n```css\nlighten($color, 10%); /* è¿”å›çš„é¢œè‰²åœ¨$coloråŸºç¡€ä¸Šå˜äº®10% */\ndarken($color, 10%);  /* è¿”å›çš„é¢œè‰²åœ¨$coloråŸºç¡€ä¸Šå˜æš—10% */\nsaturate($color, 10%);   /* è¿”å›çš„é¢œè‰²åœ¨$coloråŸºç¡€ä¸Šé¥±å’Œåº¦å¢åŠ 10% */\ndesaturate($color, 10%); /* è¿”å›çš„é¢œè‰²åœ¨$coloråŸºç¡€ä¸Šé¥±å’Œåº¦å‡å°‘10% */\ngrayscale($color);  /* è¿”å›$colorçš„ç°åº¦è‰²*/\ncomplement($color); /* returns complement color of $color */\ninvert($color);     /* è¿”å›$colorçš„åç›¸è‰² */\nmix($color1, $color2, 50%); /* mix $color1 with $color2 with a weight of 50% */ \n```\n\n- Less\n```css\nlighten(@color, 10%); /* è¿”å›çš„é¢œè‰²åœ¨@coloråŸºç¡€ä¸Šå˜äº®10% */\ndarken(@color, 10%);  /* è¿”å›çš„é¢œè‰²åœ¨@coloråŸºç¡€ä¸Šå˜æš—10%*/\nsaturate(@color, 10%);   /* è¿”å›çš„é¢œè‰²åœ¨@coloråŸºç¡€ä¸Šé¥±å’Œåº¦å¢åŠ 10% */\ndesaturate(@color, 10%); /* è¿”å›çš„é¢œè‰²åœ¨@coloråŸºç¡€ä¸Šé¥±å’Œåº¦é™ä½10%*/\nspin(@color, 10);  /* è¿”å›çš„é¢œè‰²åœ¨@coloråŸºç¡€ä¸Šè‰²è°ƒå¢åŠ 10 */\nspin(@color, -10); /* è¿”å›çš„é¢œè‰²åœ¨@coloråŸºç¡€ä¸Šè‰²è°ƒå‡å°‘10 */\nmix(@color1, @color2); /* è¿”å›çš„é¢œè‰²æ˜¯@color1å’Œ@color2ä¸¤è€…çš„æ··åˆè‰² */  \n```\n\n- Stylus\n```css\nlighten(color, 10%); /* è¿”å›çš„é¢œè‰²åœ¨'color'åŸºç¡€ä¸Šå˜äº®10% */\ndarken(color, 10%);  /* è¿”å›çš„é¢œè‰²åœ¨'color'åŸºç¡€ä¸Šå˜æš—10% */\nsaturate(color, 10%);   /* è¿”å›çš„é¢œè‰²åœ¨'color'åŸºç¡€ä¸Šé¥±å’Œåº¦å¢åŠ 10% */\ndesaturate(color, 10%); /* è¿”å›çš„é¢œè‰²åœ¨'color'åŸºç¡€ä¸Šé¥±å’Œåº¦é™ä½10% */  \n```\n\n### cssé¢„å¤„ç†å™¨å¤„ç†å±æ€§å‰ç¼€\n```css\n @mixin border-radius($values) {\n  -webkit-border-radius: $values;\n     -moz-border-radius: $values;\n          border-radius: $values;\n}\ndiv {\n  @include border-radius(10px);\n} \n```\n\n### å¯¼å…¥ (Import)\nå¾ˆå¤š CSS å¼€å‘è€…å¯¹å¯¼å…¥çš„åšæ³•éƒ½ä¸å¤ªæ„Ÿå†’ï¼Œå› ä¸ºå®ƒéœ€è¦å¤šæ¬¡çš„ HTTP è¯·æ±‚ã€‚ä½†æ˜¯åœ¨ CSS é¢„å¤„ç†å™¨ä¸­çš„å¯¼å…¥æ“ä½œåˆ™ä¸åŒï¼Œå®ƒåªæ˜¯åœ¨è¯­ä¹‰ä¸ŠåŒ…å«äº†ä¸åŒçš„æ–‡ä»¶ï¼Œä½†æœ€ç»ˆç»“æœæ˜¯ä¸€ä¸ªå•ä¸€çš„ CSS æ–‡ä»¶ï¼Œå¦‚æœä½ æ˜¯é€šè¿‡ @ import â€œfile.cssâ€; å¯¼å…¥ CSS æ–‡ä»¶ï¼Œé‚£æ•ˆæœè·Ÿæ™®é€šçš„ CSS å¯¼å…¥ä¸€æ ·ã€‚\n```css\n/* file.{type} */\nbody {\n  background: #EEE;\n}\n```\n\n```css\n@import \"reset.css\";\n@import \"file.{type}\";\np {\n  background: #0982C1;\n} \n```\n\n- è½¬è¯‘å‡ºçš„css\n```css\n@import \"reset.css\";\nbody {\n  background: #EEE;\n}\np {\n  background: #0982C1;\n}  \n```\n\n### æ··åˆï¼ˆMixinsï¼‰\nMixinsæ˜¯é¢„å¤„å™¨ä¸­çš„å‡½æ•°ã€‚å½“æŸæ®µCSSæ ·å¼ç»å¸¸è¦ç”¨åˆ°å¤šä¸ªå…ƒç´ ä¸­ï¼Œè¿™æ ·å°±éœ€è¦é‡å¤çš„å†™å¤šæ¬¡ã€‚Mixinsæ˜¯ä¸€ä¸ªå…¬è®¤çš„é€‰æ‹©å™¨ï¼Œè¿˜å¯ä»¥åœ¨Mixinsä¸­å®šä¹‰å˜é‡æˆ–è€…æ˜¯é»˜è®¤å‚æ•°ã€‚\n- Sass @mixinå£°æ˜ @includeè°ƒç”¨\n```css\n@mixin error($borderWidth: 2px) {\n  border: $borderWidth solid #F00;\n  color: #F00;\n}\n.generic-error {\n  padding: 20px;\n  margin: 4px;\n  @include error(); //è¿™é‡Œè°ƒç”¨é»˜è®¤ border: 2px solid #F00;\n}\n.login-error {\n  left: 12px;\n  position: absolute;\n  top: 20px;\n  @include error(5px); //è¿™é‡Œè°ƒç”¨ border:5px solid #F00;\n}\n```\n\n- Less\n```css\n.error(@borderWidth: 2px) {\n  border: @borderWidth solid #F00;\n  color: #F00;\n}\n.generic-error {\n  padding: 20px;\n  margin: 4px;\n  .error(); //è¿™é‡Œè°ƒç”¨é»˜è®¤ border: 2px solid #F00;\n}\n.login-error {\n  left: 12px;\n  position: absolute;\n  top: 20px;\n  .error(5px); //è¿™é‡Œè°ƒç”¨ border:5px solid #F00;\n}\n```\n\n- Stylus åƒå‡½æ•°ä¸€æ ·\n```css\nerror(borderWidth= 2px) {\n  border: borderWidth solid #F00;\n  color: #F00;\n}\n.generic-error {\n  padding: 20px;\n  margin: 4px;\n  error(); \n}\n.login-error {\n  left: 12px;\n  position: absolute;\n  top: 20px;\n  error(5px); \n}\n```\n\n- example Sass3dæ–‡æœ¬\n```css\n@mixin text3d($color) {\n  color: $color;\n  text-shadow: 1px 1px 0px darken($color, 5%),\n               2px 2px 0px darken($color, 10%),\n               3px 3px 0px darken($color, 15%),\n               4px 4px 0px darken($color, 20%),\n               4px 4px 2px #000;\n}\n\nh1 {\n  font-size: 32pt;\n  @include text3d(#0982c1);\n}\n```\n\n### ç»§æ‰¿ï¼ˆInheritanceï¼‰\nåœ¨å¤šä¸ªå…ƒç´ åº”ç”¨ç›¸åŒçš„æ ·å¼æ—¶ï¼Œæˆ‘ä»¬åœ¨CSSé€šå¸¸éƒ½æ˜¯è¿™æ ·å†™ï¼š\n```css\np,\nul,\nol {\n  /* æ ·å¼å†™åœ¨è¿™ */\n} \n```\n\n- Sasså’ŒStylus @extend\n```css\n.block {\n  margin: 10px 5px;\n  padding: 2px;\n}\np {\n  @extend .block; /* ç»§æ‰¿.blockæ‰€æœ‰æ ·å¼ */\n  border: 1px solid #EEE;\n}\n```\n\n- Less\nLESSæ”¯æŒçš„ç»§æ‰¿å’ŒSassä¸Stylusä¸ä¸€æ ·,ä»–ä¸æ˜¯åœ¨é€‰æ‹©å™¨ä¸Šç»§æ‰¿ï¼Œè€Œæ˜¯å°†Mixinsä¸­çš„æ ·å¼åµŒå¥—åˆ°æ¯ä¸ªé€‰æ‹©å™¨é‡Œé¢ã€‚è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹å°±æ˜¯åœ¨æ¯ä¸ªé€‰æ‹©å™¨ä¸­ä¼šæœ‰é‡å¤çš„æ ·å¼äº§ç”Ÿã€‚\n```css\n .block {\n  margin: 10px 5px;\n  padding: 2px;\n}\np {\n  .block; /* ç»§æ‰¿ '.block'ä¸­çš„æ ·å¼ */\n  border: 1px solid #EEE;\n}\n```\n\n### ifè¯­å¥\n- Sass\n```css\n.mixin (@color) when (lightness(@color) > 30%) {\n    background-color: black;\n}\n.mixin (@color) when (lightness(@color) =<; 30%) {\n    background-color: white;\n}\n```\n\n- Less\n```css\n@if lightness($color) > 30% {\n    background-color: black;\n}\n\n@else {\n    background-color: white;\n}\n```\n\n- Stylus\n```css\nif lightness(color) > 30%\n    background-color black\nelse\n    background-color white\n```\n### loop\n- Sass\n```css\n@for $i from 1px to 3px {\n    .border-#{i} {\n        border: $i solid blue;\n    }\n}\n```\n\n- Less\n```css\n.loop(@counter) when (@counter > 0){\n    .loop((@counter - 1));\n\n    .border-@{counter} {\n        border: 1px * @counter solid blue;\n    }\n}\n```\n\n- Stylus\n```css\nfor num in (1..3)\n    .border-{num}\n        border 1px * num solid blue\n```\n\n### ä½œç”¨åŸŸ\n- Sass\nSassä¸­ä¸å­˜åœ¨ä»€ä¹ˆå…¨å±€å˜é‡.\n```css\n$color: black;\n.scoped {\n  $bg: blue;\n  $color: white;\n  color: $color; /*ç™½è‰²*/\n  background-color:$bg;\n}\n.unscoped {\n  color:$color;/*ç™½è‰²*/\n}\t\n```\n\n- Less\nLESSä¸­çš„ä½œç”¨åŸŸå’Œå…¶ä»–ç¨‹åºè¯­è¨€ä¸­çš„ä½œç”¨åŸŸéå¸¸çš„ç›¸åŒï¼Œä»–é¦–å…ˆä¼šæŸ¥æ‰¾å±€éƒ¨å®šä¹‰çš„å˜é‡ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œä¼šåƒå†’æ³¡ä¸€æ ·ï¼Œä¸€çº§ä¸€çº§å¾€ä¸‹æŸ¥æ‰¾ï¼Œç›´åˆ°æ ¹ä¸ºæ­¢ã€‚\n```css\n@color: black;\n.scoped {\n  @bg: blue;\n  @color: white;\n  color: @color; /*ç™½è‰²*/\n  background-color:@bg;\n}\n.unscoped {\n  color:@color; /*é»‘è‰²*/\n}\n```\n\n- Stylus\nStylusè™½ç„¶èµ·æ­¥æ¯”è¾ƒæ™šï¼Œä½†å…¶ä½œç”¨åŸŸçš„ç‰¹æ€§å’ŒLESSä¸€æ ·ï¼Œå¯ä»¥æ”¯æŒå…¨å±€å˜é‡å’Œå±€å˜é‡ã€‚ä¼šå‘ä¸Šå†’æ³¡æŸ¥æ‰¾ï¼Œç›´åˆ°æ ¹ä¸ºæ­¢ã€‚\n\n## æ€»ç»“\nLess ä»è¯­è¨€ç‰¹æ€§çš„è®¾è®¡åˆ°åŠŸèƒ½çš„å¥å£®ç¨‹åº¦å’Œå¦å¤–ä¸¤è€…ç›¸æ¯”éƒ½æœ‰ä¸€äº›ç¼ºé™·ï¼Œä½†ç”¨ Less å¯ä»¥æ»¡è¶³å¤§å¤šæ•°åœºæ™¯çš„éœ€æ±‚ã€‚\nä½†ç›¸æ¯”å¦å¤–ä¸¤è€…ï¼ŒåŸºäº Less å¼€å‘ç±»åº“ä¼šå¤æ‚å¾—å¤šï¼Œå®ç°çš„ä»£ç ä¼šæ¯”è¾ƒè„ï¼Œèƒ½å®ç°çš„åŠŸèƒ½ä¹Ÿä¼šå—åˆ° DSL çš„åˆ¶çº¦ã€‚\næ¯” Stylus è¯­ä¹‰æ›´æ¸…æ™°ã€æ¯” Sass æ›´æ¥è¿‘ CSS è¯­æ³•ï¼Œä½¿å¾—åˆšåˆšè½¬ç”¨ CSS é¢„ç¼–è¯‘çš„å¼€å‘è€…èƒ½å¤Ÿæ›´å¹³æ»‘åœ°è¿›è¡Œåˆ‡æ¢ã€‚\nSass åœ¨ä¸‰è€…ä¹‹ä¸­å†å²æœ€ä¹…ï¼Œä¹Ÿå¸æ”¶äº†å…¶ä»–ä¸¤è€…çš„ä¸€äº›ä¼˜ç‚¹ã€‚\nä»åŠŸèƒ½ä¸Šæ¥è¯´ Sass å¤§è€Œå…¨ï¼Œè¯­ä¹‰æ˜æ™°ä½†æ˜¯ä»£ç å¾ˆå®¹æ˜“æ˜¾å¾—ç´¯èµ˜ã€‚\nä¸»é¡¹ç›®åŸºäº Ruby å¯èƒ½ä¹Ÿæ˜¯ä¸€éƒ¨åˆ†äººä¸é€‰æ‹©å®ƒçš„ç†ç”±ï¼ˆLess å¼€å§‹ä¹Ÿæ˜¯åŸºäº Ruby å¼€å‘ï¼Œåæ¥é€æ¸è½¬åˆ° Less.js é¡¹ç›®ä¸­ï¼‰ã€‚\nSass æœ‰ä¸€ä¸ªã€Œäº‹å®æ ‡å‡†ã€åº“â€”â€”Compassï¼Œäºæ˜¯å¯¹äºå¾ˆå¤šå¼€å‘è€…è€Œè¨€çœå»äº†é€‰æ‹©ç±»åº“çš„çƒ¦æ¼ï¼Œå¯¹äºæå‡å¼€å‘æ•ˆç‡ä¹Ÿæœ‰ä¸å°çš„å¸®åŠ©ã€‚\nStylus çš„è¯­æ³•éå¸¸çµæ´»ï¼Œå¾ˆå¤šè¯­ä¹‰éƒ½æ˜¯æ ¹æ®ä¸Šä¸‹æ–‡éšå«çš„ã€‚\nåŸºäº Stylus å¯ä»¥å†™å‡ºéå¸¸ç®€æ´çš„ä»£ç ï¼Œä½†å¯¹ä½¿ç”¨å›¢é˜Ÿçš„å¼€å‘ç´ å…»è¦æ±‚ä¹Ÿæ›´é«˜ï¼Œæ›´éœ€è¦æœ‰è‰¯å¥½çš„å¼€å‘è§„èŒƒæˆ–çº¦å®šã€‚\næ€»çš„æ¥è¯´ï¼Œä¸‰ç§é¢„å¤„ç†å™¨ç™¾åˆ†ä¹‹ä¸ƒå…«åçš„åŠŸèƒ½æ˜¯ç±»ä¼¼çš„ã€‚Less é€‚åˆå¸®åŠ©å›¢é˜Ÿæ›´å¿«åœ°ä¸Šæ‰‹é¢„å¤„ç†ä»£ç çš„å¼€å‘ï¼Œè€Œ Sass å’Œ Stylus çš„å·®å¼‚æ›´åœ¨äºå£å‘³ã€‚","tags":["Stylus"],"categories":["CSS"]},{"title":"angular7è¯¦è§£","url":"%2Fangular7%E8%AF%A6%E8%A7%A3.html","content":"\n## å¼€å§‹å‡†å¤‡\n1. å®‰è£…nodejs\n```\nnpm -v\n```\n\n2. å®‰è£…@angular/cli\n```\nnpm i -g @angular/cli\n```\n\n3. CLIå‘½ä»¤å»ºç«‹é¡¹ç›®\n```\nng new ng7demo\n```\né€‰æ‹©æ˜¯å¦åŠ å…¥è·¯ç”±æ¨¡å—ä»¥åŠå“ªç§cssé¢„å¤„ç†å™¨\n\n> å¯ctrl+cå–æ¶ˆè‡ªåŠ¨å®‰è£…node_modulesï¼Œæ‰‹åŠ¨è¿›å…¥é¡¹ç›®npm install\n> node-sasså®‰è£…ä¸ä¸Šå¯åˆ‡æ¢æ·˜å®é•œåƒåº“æˆ–è€…ç”¨cnpmå®‰è£…\n1. npm config set registry https://registry.npm.taobao.org \n   npm install\n\nor \n\n2. npm install -g cnpm \n   cnpm install \n\n4. å¯åŠ¨é¡¹ç›®\n```javascript\nng serve --open // è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ http://localhost:4200/\n```\n---\n<!--more-->\n\n## è¯­æ³•\n### ç”Ÿæˆç»„ä»¶\n```\n// æ ‡ç­¾app-article å¦‚æœä¸æƒ³è¦æˆ–è€…è‡ªå®šä¹‰å‰ç¼€å¯åœ¨angular.jsoné‡Œä¿®æ”¹prefixå±æ€§\nng g c article\n// å¯æ·»åŠ ç›®å½•\nng g s ./serveices/eventBus\n// \n```\n### ç»„ä»¶å¼•ç”¨\n```\n// æ ‡ç­¾æ–¹å¼å¼•ç”¨\n<app-article></app-article>\n// å±æ€§æ–¹å¼å¼•ç”¨\n<div app-article></div>\n// ç±»æ–¹å¼å¼•ç”¨\n<div class=\"app-article\"></div>\n```\n\n```\n// @Componentè£…é¥°å™¨æ ‡è¯†è¿™æ˜¯ä¸€ä¸ªç»„ä»¶\n@Component({\n  //selector: 'app-article',\n  //selector: '[app-article]', //å±æ€§æ–¹å¼\n    selector: '.app-article',//ç±»æ–¹å¼\n  templateUrl: './article.component.html',\n  styleUrls: ['./article.component.css']\n})\n```\n\n### æ’å€¼è¡¨è¾¾å¼\nå°†ä¸šåŠ¡é€»è¾‘ä¸­çš„æ•°æ®é€šè¿‡æ’å€¼è¡¨è¾¾å¼æ˜¾ç¤ºåœ¨æ¨¡æ¿æ–‡ä»¶ï¼Œå³htmlé¡µé¢ä¸Šï¼Œæˆ–è€…å°†htmlé¡µé¢ä¸Šçš„äº‹ä»¶ä¼ è¾“åˆ°ä¸šåŠ¡é€»è¾‘ã€‚\n\n```\n<p>æ ‡é¢˜æ˜¯{{title}}</p>\n```\n### å±æ€§ç»‘å®š\n```\n<img [src]=\"imgSrc\" />\n<input value=\"value\"\n```\n\n### æ’å€¼è¿ç®— åŠ å‡ä¹˜é™¤/å­—ç¬¦ä¸²æ‹¼æ¥/ä¸‰å…ƒ/æ–¹æ³•è°ƒç”¨\n```\n{{5+3}},{{5-3}},{{5*3}},{{5/3}},{{ \"a\" + \"b\"}},{{true?1:0}}\n```\n### äº‹ä»¶ç»‘å®š\n```\n<button (click)=\"showModal('click')\"><button>\n// ä¼ é€’äº‹ä»¶å‚æ•°\n<input type=\"text\" (keyup) = \"updateContent($event)\"/>\n// åŒå‘ç»‘å®š è§†å›¾å’Œæ•°æ®ï¼Œåªè¦ä¸€æ–¹å‘ç”Ÿå˜åŒ–ï¼Œå¦ä¸€æ–¹è·Ÿç€å˜åŒ–ã€‚\n// ä¸éœ€è¦åœ¨ä»£ç ä¸­æ‰‹åŠ¨æ›´æ–°è§†å›¾ï¼Œç®€åŒ–å¼€å‘ï¼Œå¢åŠ ä»£ç å†…èšæ€§ï¼Œä»£ç å¯è¯»æ€§æ›´å¼ºã€‚\n<input type=\"text\" [(ngModel)]=\"title\"/>\n// ä¸ºäº†ngModelèƒ½å¤Ÿè§£æéœ€è¦å¼•å…¥import {FormsModule} from \"@angular/forms\";\n```\n\n### æ¨¡æ¿æŒ‡ä»¤\n#### åˆ¤æ–­æŒ‡ä»¤\n```\n<img *ngIf=\"imgShow;else #p1\"/>\n<p #p1></p>\n```\n#### æ ·å¼æŒ‡ä»¤\n```\n<p [ngClass]=\"{bg:true}\">è¿™æ®µå†…å®¹åº”ç”¨çš„æ˜¯ç±»æ ·å¼ã€‚</p>\n<p [ngStyle]=\"{backgroundColor:pink}\">æœ¬æ®µå†…å®¹æ ·å¼æ˜¯å†…è”æ ·å¼ã€‚</p>\n```\n#### å¾ªç¯æŒ‡ä»¤\n```\n<ul>\n    <li *ngFor=\"let race of raceList; let i = index\">\n    {{ race.name }}-{{ i + 1 }}\n    </li>\n</ul>\n```\n\n### ç®¡é“ç¬¦\n```\n{{currentTime | date: \"yyyy-MM-dd HH:mm:ss\" }}\n```\n### çˆ¶å­ç»„ä»¶é€šä¿¡\n```\n// è¾“å…¥\n<child title=\"æˆ‘çš„å­ç»„ä»¶\"></child>\n@Input\npublic title:string =\"\"\n// è¾“å‡º\n<child title=\"æˆ‘çš„å­ç»„ä»¶\" #child (follow)=\"getFollow($event)\"></child>\n@Output()\npublic follow = new EventEmitter();\nthis.follow.emit(\"å­ç»„ä»¶ä¼ æ¥çš„æ•°æ®\");\n```\n### localsStorage\n\n### æœåŠ¡æ€»çº¿\n1. æ³¨å†ŒæœåŠ¡\n```\nng g s ./services/eventBus\nimport { Injectable } from \"@angular/core\";\nimport { Observable, Subject } from \"rxjs\";\n// æœåŠ¡æ€»çº¿ ç»„ä»¶é—´åˆ†äº«æ•°æ®\n@Injectable({\n  providedIn: \"root\"\n})\nexport class EventBusService {\n  public eventBus: Subject<string> = new Subject();\n  constructor() {}\n}\n```\n\n2. ç»„ä»¶å†…å‘å°„æ•°æ®\n```javascript\nthis.eventBusService.eventBus.next(\"childç»„ä»¶å‘é€çš„æ•°æ®\");\n```\n\n3. ç»„ä»¶æ¥æ”¶æ•°æ®\n```javascript\nthis.eventBusService.eventBus.subscribe(arg => {\n    console.log(`æ¥æ”¶åˆ°äº‹ä»¶${arg}`);\n});\n```\n\n### æ ‡ç­¾å˜é‡å¼•ç”¨\n```\n<child title=\"æˆ‘çš„å­ç»„ä»¶\" #child (follow)=\"getFollow($event)\"></child>\n<button (click)=\"child.sayHello()\">å­ç»„ä»¶è¯´è¯</button>\n```\n\n### ç»„ä»¶æ³¨å†Œ\n```\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n// importéƒ¨åˆ†æ˜¯æ¨¡å—ä»¥åŠè£…é¥°å™¨çš„å¼•å…¥ã€‚\n// declarationséƒ¨åˆ†æ˜¯å£°æ˜æ¨¡å—çš„å†…éƒ¨æˆå‘˜ã€‚\n// importséƒ¨åˆ†æ˜¯å¯¼å…¥å…¶å®ƒæ¨¡å—ã€‚\n// providersæŒ‡å®šåº”ç”¨ç¨‹åºæ ¹çº§åˆ«éœ€è¦ä½¿ç”¨çš„serviceã€‚\n// bootstrapæ˜¯appå¯åŠ¨çš„æ ¹ç»„ä»¶ã€‚\n// exportæ§åˆ¶å°†é‚£äº›å†…éƒ¨æˆå‘˜æš´éœ²ç»™å¤–éƒ¨ä½¿ç”¨ã€‚\n```\n\n### è·¯ç”±å¯¼èˆª\n```\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ChildComponent } from \"./child/child.component\";\nimport { BrotherComponent } from \"./brother/brother.component\";\n\nconst routes: Routes = [{\n  path: '',\n  component: ChildComponent\n},\n{\n  path: 'brother',\n  component: BrotherComponent\n}];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n``` \n\n```\n<!--RouterOutlet ç›¸å½“äºä¸€ä¸ªå ä½ç¬¦,åœ¨Angularä¸­æ ¹æ®è·¯ç”±çŠ¶æ€åŠ¨æ€æ’å…¥è§†å›¾ã€‚-->\n<a [routerLink]=\"['/']\">child</a><br/>\n<a [routerLink]=\"['/brother']\">brother</a>\n<router-outlet></router-outlet>\n```\n### httpæœåŠ¡\n```\n// app.module.ts\nimport { HttpModule } from '@angular/http';\nimport { HttpClientModule } from '@angular/common/http';\n// services\nimport { Headers } from '@angular/http';\nimport { HttpClient, HttpResponse } from '@angular/common/http';\n\nthis.httpClient.request(UserService.METHOD_POST, url, options).subscribe((data)=>{});\n``` \n\n## ng7çš„æ–°ç‰¹æ€§\n```\n// angular.json\n\"budgets\": [\n    {\n        \"type\": \"initial\",\n        \"maximumWarning\": \"2mb\",\n        \"maximumError\": \"5mb\"\n    }\n]\n// è¿™ä¸ªé…ç½®é€‚ç”¨äºæ‰“åŒ…æ–‡ä»¶é™åˆ¶ ng build --prod \n// æ‰“åŒ…ç”Ÿæˆç”Ÿäº§ç¯å¢ƒæ—¶å¦‚æœåŒ…å¤§äº2MB,é‚£ä¹ˆCLIå·¥å…·ä¼šæç¤ºwaning,å¦‚æœå¤§äº5MB,ä¸­æ–­æ‰“åŒ…ã€‚\n```\n\n## npm i å’Œ npm installçš„å°åŒºåˆ«\n1ã€ç”¨npm i å®‰è£…çš„æ¨¡å—æ— æ³•ç”¨npm uninstallå¸è½½ï¼Œéœ€è¦ç”¨npm uninstall iå‘½ä»¤\n\n2ã€npm i ä¼šå¸®åŠ©æ£€æµ‹ä¸å½“å‰nodeç‰ˆæœ¬æœ€åŒ¹é…çš„npmåŒ… ç‰ˆæœ¬å·ï¼Œå¹¶åŒ¹é…å‡ºæ¥ç›¸äº’ä¾èµ–çš„npmåŒ…åº”è¯¥æå‡çš„ç‰ˆæœ¬å·\n\n3ã€éƒ¨åˆ†npmåŒ…åœ¨å½“å‰nodeç‰ˆæœ¬ä¸‹æ— æ³•ä½¿ç”¨ï¼Œå¿…é¡»ä½¿ç”¨å»ºè®®ç‰ˆæœ¬\n\n4ã€å®‰è£…æŠ¥é”™æ—¶intallè‚¯å®šä¼šå‡ºç°npm-debug.log æ–‡ä»¶ï¼Œnpm iä¸ä¸€å®š\n\n## npm install çš„æ‰§è¡Œè¿‡ç¨‹\n1. å‘å‡ºnpm installå‘½ä»¤\n2. æŸ¥è¯¢ node_modules ç›®å½•ä¹‹ä¸­æ˜¯å¦å·²ç»å­˜åœ¨æŒ‡å®šæ¨¡å—\n3. è‹¥å­˜åœ¨ï¼Œä¸å†é‡æ–°å®‰è£…\n4. è‹¥ä¸å­˜åœ¨npm å‘ registry æŸ¥è¯¢æ¨¡å—å‹ç¼©åŒ…çš„ç½‘å€ä¸‹è½½å‹ç¼©åŒ…ï¼Œå­˜æ”¾åœ¨æ ¹ç›®å½•ä¸‹çš„.npmç›®å½•é‡Œ\n5. è§£å‹å‹ç¼©åŒ…åˆ°å½“å‰é¡¹ç›®çš„ node_modules ç›®å½•\n","tags":["angular"],"categories":["Ng"]},{"title":"å¤§æ¼ ç©·ç§‹angular7è®²åº§","url":"%2F%E5%A4%A7%E6%BC%A0%E7%A9%B7%E7%A7%8Bangular7%E8%AE%B2%E5%BA%A7.html","content":"h5 132åˆæ³•æ ‡ç­¾\nå¤§è€Œå…¨çš„angular\nemmmä¸€ä¸Šåˆè¦è®²åŸºç¡€--è¿˜éƒ½æ˜¯åŸºæœ¬ä¾‹å­åŸºæœ¬éƒ½è§è¿‡\n\n### ç¼–è¯‘å™¨\né›†æˆå¼€å‘ç¯å¢ƒ@angular/cli\n### æ¨¡æ¿å¼•æ“\n\n## ç»„ä»¶åº“\n- datagrid\n- tree z-tree\n- datepicker\n- formvalid\nng2-admin \næ¯”è¾ƒæ¥åœ°æ°”\n- JHipster\n- nicefish\n\n- ç”Ÿæˆç»„ä»¶\n> ng g c User\n\n```javascript\nnpm install -g @angular/cli\n```\n--- \n<!--more-->\n\næˆ‘çš„çœ‹æ³•(å¥½ç”¨ç¨‹åº¦)\nstylus>less>sass\n\n* äººç±»çš„æœ¬è´¨å°±æ˜¯å¤è¯»æœº\n* å­¦ä¹ æœ¬å°±æ˜¯ä¸€ä¸ªä¸æ–­æŠ„è¢­ã€æ¨¡ä»¿ã€è”ç³»ã€åˆ›æ–°çš„è¿‡ç¨‹ã€‚\n* å°±è¿™ä¹ˆä¸ªæ„æ€è¿˜æ˜¯å­¦ä¹ äº†è¯­æ³•ç»‘å®šï¼Œè‡ªå·±è¯´æœè‡ªå·±ã€‚ä¼šè¯­æ³•åŸºæœ¬å°±èƒ½åšä¸œè¥¿ï¼Œæ·±å…¥æ‰æ˜¯é‡ç‚¹ã€‚\nå¤§ä½¬è‡ªå·±éƒ½è¯´angularæ…¢0.0ï¼ŒåŸºæœ¬éƒ½ä¼šæ¶µç›–demoçš„å†…å®¹å®ç°ä¸šåŠ¡å¼€å‘ã€‚\n\n##  ç¬¬ä¸€å¤©æ„Ÿå—\nå¤§ä½¬ä¸Šåˆè®²äº†jsçš„å‘å±•å†å²ï¼Œä¸‹åˆè®²äº†ngçš„åŸºç¡€è¯­æ³•ã€ç¯å¢ƒæ­å»ºç­‰ç‰¹æ€§ã€‚æ¯”è¾ƒåŸºç¡€çš„demoç¤ºä¾‹ï¼Œæ¯”è¾ƒä½ç«¯ï¼Œä»¥å‰å°±åšè¿‡ã€‚æœ‰ç‚¹å°å¤±æœ›ã€‚\n\nä¼˜åŒ–è®°å½•\n1. index.js 2.4M\n2. ä¸ƒç‰›äº‘çš„å›¾ç‰‡åŸŸåè¢«å›æ”¶äº†\n\n## qs.stringifyå’ŒJSON.stringify\n```javascript\nvar a = {name:'hehe',age:10};\n qs.stringify(a)\n// 'name=hehe&age=10'\nJSON.stringify(a)\n// '{\"name\":\"hehe\",\"age\":10}'\n```\nwp phpå»ºç«™ ä¸»é¢˜æ¨¡æ¿ å“åº”å¼æ’ä»¶ èµ„è®¯é—¨æˆ·ç«™\nåŠ è½½æ…¢ï¼Œangularè¿™ç§å¤§è€Œå…¨çš„æ¡†æ¶å¾ˆä¸é”™ï¼Œä½†æ˜¯æˆ‘æ°¸è¿œå–œæ¬¢react.jpgğŸ˜","tags":["è®²åº§"],"categories":["Ng"]},{"title":"cssé«˜åº¦åå¡Œå’Œåˆ¤æ–­æ¨ªç«–å±","url":"%2Fcss%E9%AB%98%E5%BA%A6%E5%9D%8D%E5%A1%8C%E5%92%8C%E5%88%A4%E6%96%AD%E6%A8%AA%E7%AB%96%E5%B1%8F.html","content":"\n{% centerquote %} \n 1.01^365=37.8\n{% endcenterquote %}\n\nä¸¤ä¸ªç›’å­ï¼Œä¸€ä¸ªä¸‹è¾¹è·20pxï¼Œä¸€ä¸ªä¸Šè¾¹è·50pxï¼Œæœ€åä¸ºä¸¤ä¸ªç›’å­ä¹‹é—´çš„è·ç¦»ä¸ºå¤šå°‘ 50px\nè§£å†³:æ ¹æ®W3Cçš„æ ‡å‡†ï¼Œåœ¨é¡µé¢ä¸­å…ƒç´ éƒ½ä¸€ä¸ªéšå«çš„å±æ€§å«åšBlock FormattingContext\nç®€ç§°BFCï¼Œè¯¥å±æ€§å¯ä»¥è®¾ç½®æ‰“å¼€æˆ–è€…å…³é—­ï¼Œé»˜è®¤æ˜¯å…³é—­çš„ã€‚\n\n---\n<!--more-->\n### cssé«˜åº¦åå¡Œ\n\nIFCï¼ˆinline Formatting Contexts)--å†…è”æ ¼å¼åŒ–ä¸Šä¸‹æ–‡,IFCçš„é«˜åº¦ç”±å…¶åŒ…å«è¡Œå†…å…ƒç´ ä¸­æœ€é«˜çš„å®é™…é«˜åº¦è®¡ç®—è€Œæ¥çš„ï¼ˆä¸å—ç«–ç›´æ–¹å‘ä¸Šçš„padding/marginå½±å“ï¼‰\n\nBFC--å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡\n\n- è§¦å‘æ¡ä»¶\n  - floatä¸ä¸ºnone\n  - overflowä¸ä¸ºvisible\n  - displayä¸ºtable-cellï¼Œtable-captionï¼Œinline-block\n  - positionä¸ºabsoluteï¼Œfixed\n  - fieldsetå…ƒç´ \n- åŠŸèƒ½\n  - è‡ªæˆ‘ç‹¬ç«‹ï¼Œå†…éƒ¨å…ƒç´ ä¸ä¼šå½±å“å¤–éƒ¨å…ƒç´ \n  - ä¼šåŒ…å«æµ®åŠ¨å…ƒç´ \n  - åŒä¸€ä¸ªBFCçš„marginé‡å \n\n#### å½“å¼€å¯å…ƒç´ çš„BFCä»¥åï¼Œå…ƒç´ å°†ä¼šå…·æœ‰å¦‚ä¸‹çš„ç‰¹æ€§ï¼š\n- å±äºåŒä¸€ä¸ª BFC çš„ä¸¤ä¸ªç›¸é‚» Box å‚ç›´æ’åˆ—\n- å±äºåŒä¸€ä¸ª BFC çš„ä¸¤ä¸ªç›¸é‚» Box çš„ margin ä¼šå‘ç”Ÿé‡å \n- BFC ä¸­å­å…ƒç´ çš„ margin box çš„å·¦è¾¹ï¼Œ ä¸åŒ…å«å— (BFC) border boxçš„å·¦è¾¹ç›¸æ¥è§¦ (å­å…ƒç´  absolute é™¤å¤–)\n- BFC çš„åŒºåŸŸä¸ä¼šä¸ float çš„å…ƒç´ åŒºåŸŸé‡å \n- è®¡ç®— BFC çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å­å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—\n- æ–‡å­—å±‚ä¸ä¼šè¢«æµ®åŠ¨å±‚è¦†ç›–ï¼Œç¯ç»•äºå‘¨å›´\n\n#### åº”ç”¨\n- çˆ¶å…ƒç´ é«˜åº¦å¡Œé™·\n- é˜»æ­¢marginé‡å \n- å¯ä»¥åŒ…å«æµ®åŠ¨å…ƒç´  â€”â€” æ¸…é™¤å†…éƒ¨å…ƒç´ æµ®åŠ¨(æ¸…é™¤æµ®åŠ¨çš„åŸç†æ˜¯ä¸¤ä¸ªdivéƒ½ä½äºåŒä¸€ä¸ª BFC åŒºåŸŸä¹‹ä¸­)\n- è‡ªé€‚åº”ä¸¤æ å¸ƒå±€\n- å¯ä»¥é˜»æ­¢å…ƒç´ è¢«æµ®åŠ¨å…ƒç´ è¦†ç›–\n\n#### å¦‚ä½•å¼€å¯å…ƒç´ çš„BFC\n1. è®¾ç½®å…ƒç´ æµ®åŠ¨(ä¸æ¨è)\n- ä½¿ç”¨è¿™ç§æ–¹å¼å¼€å¯ï¼Œè™½ç„¶å¯ä»¥æ’‘å¼€çˆ¶å…ƒç´ ï¼Œä½†æ˜¯ä¼šå¯¼è‡´çˆ¶å…ƒç´ çš„å®½åº¦ä¸¢å¤±ï¼Œè€Œä¸”ä½¿ç”¨è¿™ç§æ–¹å¼ä¹Ÿä¼šå¯¼è‡´ä¸‹è¾¹çš„å…ƒç´ ä¸Šç§»ï¼Œä¸èƒ½è§£å†³é—®é¢˜\n2. è®¾ç½®å…ƒç´ ç»å¯¹å®šä½(ä¸æ¨è)\n3. è®¾ç½®å…ƒç´ ä¸ºinline-block(ä¸æ¨è)\n- å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†æ˜¯ä¼šå¯¼è‡´å®½åº¦ä¸¢å¤±ï¼Œä¸æ¨èä½¿ç”¨è¿™ç§æ–¹å¼\n4. å°†å…ƒç´ çš„overflowè®¾ç½®ä¸ºä¸€ä¸ªévisibleçš„å€¼ï¼ˆaotu hiddenï¼‰\næ¨èæ–¹å¼ï¼šå°†overflowè®¾ç½®ä¸ºhiddenæ˜¯å‰¯ä½œç”¨æœ€å°çš„å¼€å¯BFCçš„æ–¹å¼ã€‚\noverflow: hidden;\n\nä½†æ˜¯åœ¨IE6åŠä»¥ä¸‹çš„æµè§ˆå™¨ä¸­å¹¶ä¸æ”¯æŒBFCï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼ä¸èƒ½å…¼å®¹IE6ã€‚\nåœ¨IE6ä¸­è™½ç„¶æ²¡æœ‰BFCï¼Œä½†æ˜¯å…·æœ‰å¦ä¸€ä¸ªéšå«çš„å±æ€§å«åšhasLayoutï¼Œè¯¥å±æ€§çš„ä½œç”¨å’ŒBFCç±»ä¼¼ï¼Œæ‰€åœ¨IE6æµè§ˆå™¨å¯ä»¥é€šè¿‡å¼€hasLayoutæ¥è§£å†³è¯¥é—®é¢˜å¼€å¯æ–¹å¼å¾ˆå¤šï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ä¸€ç§å‰¯ä½œç”¨æœ€å°çš„ï¼šç›´æ¥å°†å…ƒç´ çš„zoomè®¾ç½®ä¸º1å³å¯ã€‚\n\n> zoomè¡¨ç¤ºæ”¾å¤§çš„æ„æ€ï¼Œåè¾¹è·Ÿç€ä¸€ä¸ªæ•°å€¼ï¼Œå†™å‡ å°±å°†å…ƒç´ æ”¾å¤§å‡ å€\n> zoom:1è¡¨ç¤ºä¸æ”¾å¤§å…ƒç´ ï¼Œä½†æ˜¯é€šè¿‡è¯¥æ ·å¼å¯ä»¥å¼€å¯hasLayout\n> zoomè¿™ä¸ªæ ·å¼ï¼Œåªåœ¨IEä¸­æ”¯æŒï¼Œå…¶ä»–æµè§ˆå™¨éƒ½ä¸æ”¯æŒã€‚\n\n### è®¾å¤‡æ—‹è½¬ç›‘å¬\n- äº‹ä»¶\n```javascript\n// Listen for orientation changes\nwindow.addEventListener(\"orientationchange\", function() {\n    // Announce the new orientation number\n    alert(window.orientation);\n\n}, false);\n```\n\n- åª’ä½“æŸ¥è¯¢\n```html\n<!-- linkå…ƒç´ ä¸­çš„CSSåª’ä½“æŸ¥è¯¢ -->\n<link rel=\"stylesheet\" media=\"(max-width: 800px)\" href=\"example.css\" />\n```\n\n```css\n/* æ ·å¼è¡¨ä¸­çš„CSSåª’ä½“æŸ¥è¯¢ */\n@media all and (orientation: portrait) {\n  body div {background: red;} \n\n}\n@media (min-width: 700px) and (orientation: landscape) { \n  body div {background: blue; } \n}\n```\n\n- resizeæ–¹æ³•\nå¯ä»¥ç”¨resizeäº‹ä»¶æ¥åˆ¤æ–­ã€‚ç”¨innerWidth ï¼Œ innerHeightï¼Œå¯ä»¥æ£€ç´¢å¾—åˆ°å±å¹•å¤§å°ã€‚ä¾æ®å®½å’Œé«˜çš„å¤§å°æ¯”è¾ƒåˆ¤æ–­ï¼Œå®½å°äºé«˜ä¸ºç«–å±ï¼Œå®½å¤§ä¸é«˜å°±æ˜¯æ¨ªå±ã€‚\n```javascript\n(function(){\n    var updateOrientation = function(){\n        var orientation = (window.innerWidth > window.innerHeight) ? 'landscape' : 'portrait';\n    };\n\n    var init = function(){\n\n        updateOrientation();\n        \n        //ç›‘å¬resizeäº‹ä»¶\n        window.addEventListener('resize',updateOrientation,false);\n    };\n\n    window.addEventListener('DOMContentLoaded',init,false);\n})();\n```\n\n### å±‚å ä¸Šä¸‹æ–‡\nå…ƒç´ æå‡ä¸ºä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„å›¾å±‚ï¼Œåœ¨ä¸‰ç»´ç©ºé—´ä¸­ (zè½´) é«˜å‡ºæ™®é€šå…ƒç´ ä¸€ç­‰ã€‚\n\n- è§¦å‘æ¡ä»¶\n  - æ ¹å±‚å ä¸Šä¸‹æ–‡(html)\n    - position\n    - css3å±æ€§\n    - flex\n    - transform\n    - opacity\n    - filter\n    - will-change\n    - -webkit-overflow-scrolling\n\n- å±‚å ç­‰çº§ï¼šå±‚å ä¸Šä¸‹æ–‡åœ¨zè½´ä¸Šçš„æ’åº\n  - åœ¨åŒä¸€å±‚å ä¸Šä¸‹æ–‡ä¸­ï¼Œå±‚å ç­‰çº§æ‰æœ‰æ„ä¹‰\n  - z-indexçš„ä¼˜å…ˆçº§æœ€é«˜\n\n![z-index](http://cdn.mydearest.cn/blog/images/z-index.png)\n\n### å±…ä¸­å¸ƒå±€\n\n\n#### æ°´å¹³å±…ä¸­\n\nè¡Œå†…å…ƒç´ : text-align: center\nå—çº§å…ƒç´ : margin: 0 auto\nabsolute + transform\nflex + justify-content: center\n\n#### å‚ç›´å±…ä¸­\n\nline-height: height\nabsolute + transform\nflex + align-items: center\ntable\n\n#### æ°´å¹³å‚ç›´å±…ä¸­\n\nabsolute + transform\nflex + justify-content + align-items\n","tags":["å¸ƒå±€"],"categories":["çŸ¥è¯†"]},{"title":"ä½¿ç”¨å‘½ä»¤è¡Œæ¿€æ´»windows10ä¸“ä¸šç‰ˆ","url":"%2F%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%BF%80%E6%B4%BBwindows10%E4%B8%93%E4%B8%9A%E7%89%88.html","content":"\nä»¥ç®¡ç†å‘˜çš„èº«ä»½è¿è¡Œcmd\n\n1. å…ˆå¸è½½å¯†é’¥\n```bash\nslmgr.vbs /upk\n```\n- æ­¤æ—¶å¼¹å‡ºçª—å£æ˜¾æœªâ€œå·²æˆåŠŸå¸è½½äº†äº§å“å¯†é’¥â€ã€‚\n\n2. å®‰è£…å¯†é’¥\n```bash\nslmgr /ipk W269N-WFGWX-YVC9B-4J6C9-T83GX\n```\n- å¼¹å‡ºçª—å£æç¤ºï¼šâ€œæˆåŠŸçš„å®‰è£…äº†äº§å“å¯†é’¥â€ã€‚\n\n3. è®¾ç½®è®¡ç®—æœºå\n```bash\nslmgr /skms cosyerçš„ä¸ªäººç”µè„‘\n```\n- å¼¹å‡ºçª—å£æç¤ºï¼šâ€œå¯†é’¥ç®¡ç†æœåŠ¡è®¡ç®—æœºåæˆåŠŸçš„è®¾ç½®ä¸ºcosyerçš„ä¸ªäººç”µè„‘â€ã€‚\n\n---\n<!-- more -->\n\n4. æ¿€æ´»å¯†é’¥\n```bash\nslmgr /ato\n```\n- æ­¤æ—¶å°†å¼¹å‡ºçª—å£æç¤ºï¼šâ€œæˆåŠŸçš„æ¿€æ´»äº†äº§å“â€ã€‚\n\nå¦‚æœç¬¬4æ­¥æœªèƒ½æˆåŠŸåœ°æ¿€æ´»ï¼Œåˆ™é‡å¤æ‰§è¡Œç¬¬3æ­¥ã€ç¬¬4æ­¥ï¼Œä¸”å°†ç¬¬3æ­¥çš„è¯­å¥ä¿®æ”¹ä¸ºä»¥ä¸‹å‡ ä¸ªä¹‹ä¸€ï¼Œéœ€è¦ä¸€ä¸ªä¸€ä¸ªè¿›è¡Œå°è¯•ã€‚\n\n```bash\nâ€œslmgr /skms 110.noip.meâ€\nâ€œslmgr /skms kms.lotro.ccâ€\nâ€œslmgr /skms mhd.kmdns.netâ€\nâ€œslmgr /skms xykz.f3322.orgâ€\nâ€œslmgr /skms 106.186.25.239â€\nâ€œslmgr /skms 3rss.vicp.net:20439â€\nâ€œslmgr /skms 45.78.3.223â€\nâ€œslmgr /skms kms.chinancce.comâ€\nâ€œslmgr /skms kms.didichuxing.comâ€\nâ€œslmgr /skms skms.ddns.netâ€\nâ€œslmgr /skms franklv.ddns.netâ€\nâ€œslmgr /skms 192.168.2.8â€\n```","tags":["windows10æ¿€æ´»"],"categories":["çŸ¥è¯†"]},{"title":"helloPHP","url":"%2FhelloPHP.html","content":"\n1å¹´ä»¥å‰æˆ‘å°±æµ…å­¦è¿‡PHPï¼Œç”¨`thinkPHP`æ¡†æ¶å¼€å‘èµ·æ¥ç¡®å®æ¯”è¾ƒè½»æ¾å¿«æ·æµæ°´åŒ–ã€‚æœ€è¿‘é—²æ¥æ— äº‹ï¼Œå†æ¬¡å›é¡¾å­¦ä¹ ä¸‹è¿™ä¸ªä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ã€‚\n\n## ç®€ä»‹\nPHP æ˜¯ä¸€ç§åˆ›å»ºåŠ¨æ€äº¤äº’æ€§ç«™ç‚¹çš„å¼ºæœ‰åŠ›çš„æœåŠ¡å™¨ç«¯è„šæœ¬è¯­è¨€ã€‚\n\n## è¯­æ³•\nPHP è„šæœ¬åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œç„¶åå°†çº¯ HTML ç»“æœå‘é€å›æµè§ˆå™¨ã€‚\n\nPHP è„šæœ¬å¯ä»¥æ”¾åœ¨æ–‡æ¡£ä¸­çš„ä»»ä½•ä½ç½®ã€‚\n\nPHP è„šæœ¬ä»¥ <?php å¼€å§‹ï¼Œä»¥ ?> ç»“æŸã€‚å¾ˆå¤šè¯­è¨€çš„è¯­æ³•éƒ½ç›¸ç±»ä¼¼ã€‚\n\n```php\n<!DOCTYPE html> \n<html> \n<body> \n<?php \necho \"Hello World!\";\n// å•è¡Œæ³¨é‡Š\n/*\nå¤šè¡Œæ³¨é‡Š\n*/\n?> \n</body> \n</html>\n```\n\n---\n<!-- more -->\n\n### å˜é‡\n- å˜é‡ä»¥ $ ç¬¦å·å¼€å§‹ï¼Œåé¢è·Ÿç€å˜é‡çš„åç§°\n\n- å˜é‡åå¿…é¡»ä»¥å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿å­—ç¬¦å¼€å§‹\n\n- å˜é‡ååªèƒ½åŒ…å«å­—æ¯æ•°å­—å­—ç¬¦ä»¥åŠä¸‹åˆ’çº¿ï¼ˆA-zã€0-9 å’Œ _ ï¼‰\n\n- å˜é‡åä¸èƒ½åŒ…å«ç©ºæ ¼\n\n- å˜é‡åæ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼ˆ$y å’Œ $Y æ˜¯ä¸¤ä¸ªä¸åŒçš„å˜é‡ï¼‰\n\n> åŒjsä¸€æ ·PHPä¹Ÿæ˜¯å¼±ç±»å‹è„šæœ¬è¯­è¨€ä¸éœ€è¦å£°æ˜å˜é‡çš„æ•°æ®ç±»å‹\n\n### ä½œç”¨åŸŸ\n1. local å±€éƒ¨\n2. global å…¨å±€\n3. static é™æ€\n4. parameter å‚æ•°\n\n```php\n<?php \n$x=5; // å…¨å±€å˜é‡ \n$z=5;\nfunction myTest() \n{ \n    $y=10; // å±€éƒ¨å˜é‡ \n    global $x,$z; // å‡½æ•°å†…éƒ¨è®¿é—®å…¨å±€å˜é‡éœ€è¦åŠ globalå…³é”®å­—\n    $z=$x+$z;\n    // ä¸€æ ·çš„æ•ˆæœ$GLOBALS['z']=$GLOBALS['x']+$GLOBALS['z'];\n}  \n\nmyTest(); \necho \"<p>æµ‹è¯•å‡½æ•°å¤–å˜é‡:<p>\"; \necho \"å˜é‡ x ä¸º: $x\"; \necho \"<br>\"; \necho \"å˜é‡ y ä¸º: $y\"; \necho $z; // 10\n?>\n```\n\nå½“ä¸€ä¸ªå‡½æ•°å®Œæˆæ—¶ï¼Œå®ƒçš„æ‰€æœ‰å˜é‡é€šå¸¸éƒ½ä¼šè¢«åˆ é™¤ã€‚æ‰€ä»¥å½“éœ€è¦æ—¶å¯ä»¥å£°æ˜é™æ€å˜é‡\n\n```php\n<?php\nfunction myTest($y)\n{\n    static $x=0;\n    echo $x,$y; // å‚æ•°å˜é‡\n    $x++;\n}\n \nmyTest(1);\nmyTest(2);\nmyTest(3);\n?>\n```\n\n### è¾“å‡ºechoå’Œprint\necho å’Œ print åŒºåˆ«:\n- echo - å¯ä»¥è¾“å‡ºä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ä¸²\n- print - åªå…è®¸è¾“å‡ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¿”å›å€¼æ€»ä¸º 1\n> echo è¾“å‡ºçš„é€Ÿåº¦æ¯” print å¿«ï¼Œ echo æ²¡æœ‰è¿”å›å€¼ï¼Œprintæœ‰è¿”å›å€¼1ã€‚\n\n### è¯­å¥åŠ åˆ†å·\n\n### æ•°æ®ç±»å‹\n1. Stringï¼ˆå­—ç¬¦ä¸²ï¼‰\n\n```php\n<?php \n$txt1=\"Hello\"; \n$txt2=\"World\"; \necho $txt1 . \" \" . $txt2;  // \"Hello world\"\necho strlen(\"Hello World!\"); // è¿”å›é•¿åº¦\necho strpos(\"Hello World!\",\"World\"); // è¿”å›ç´¢å¼•å’Œjs indexOfå¾ˆåƒ\n?>\n```\n\n2. Integerï¼ˆæ•´å‹ï¼‰\n3. Floatï¼ˆæµ®ç‚¹å‹ï¼‰\n4. Booleanï¼ˆå¸ƒå°”å‹ï¼‰\n5. Arrayï¼ˆæ•°ç»„ï¼‰\n```php\n<?php\n$cars=array(\"Volvo\",\"BMW\",\"Toyota\");\necho count($cars);\n?>\n// æ•°ç»„éå†\n<?php\n$cars=array(\"Volvo\",\"BMW\",\"Toyota\");\n$arrlength=count($cars);\n \nfor($x=0;$x<$arrlength;$x++)\n{\n    echo $cars[$x];\n    echo \"<br>\";\n}\n?>\n// å…³è”æ•°ç»„ objectï¼Ÿ\n<?php\n$age=array(\"Peter\"=>\"35\",\"Ben\"=>\"37\",\"Joe\"=>\"43\");\necho \"Peter is \" . $age['Peter'] . \" years old.\";\n?>\n// éå†å…³è”æ•°ç»„\n<?php\n$age=array(\"Peter\"=>\"35\",\"Ben\"=>\"37\",\"Joe\"=>\"43\");\n \nforeach($age as $x=>$x_value)\n{\n    echo \"Key=\" . $x . \", Value=\" . $x_value;\n    echo \"<br>\";\n}\n?>\n```\næ•°ç»„æ’åºå‡½æ•°\n- sort() - å¯¹æ•°ç»„è¿›è¡Œå‡åºæ’åˆ—\n- rsort() - å¯¹æ•°ç»„è¿›è¡Œé™åºæ’åˆ—\n- asort() - æ ¹æ®å…³è”æ•°ç»„çš„å€¼ï¼Œå¯¹æ•°ç»„è¿›è¡Œå‡åºæ’åˆ—\n- ksort() - æ ¹æ®å…³è”æ•°ç»„çš„é”®ï¼Œå¯¹æ•°ç»„è¿›è¡Œå‡åºæ’åˆ—\n- arsort() - æ ¹æ®å…³è”æ•°ç»„çš„å€¼ï¼Œå¯¹æ•°ç»„è¿›è¡Œé™åºæ’åˆ—\n- krsort() - æ ¹æ®å…³è”æ•°ç»„çš„é”®ï¼Œå¯¹æ•°ç»„è¿›è¡Œé™åºæ’åˆ—\n\n6. Objectï¼ˆå¯¹è±¡ï¼‰\nä½¿ç”¨classå…³é”®å­—å£°æ˜ç±»å¯¹è±¡ã€‚ç±»æ˜¯å¯ä»¥åŒ…å«å±æ€§å’Œæ–¹æ³•çš„ç»“æ„ã€‚\n\n```php\n<?php\nclass Car\n{\n  var $color;\n  function __construct($color=\"green\") {\n    $this->color = $color;\n  }\n  function what_color() {\n    return $this->color;\n  }\n}\n?>\n```\n\n7. NULLï¼ˆç©ºå€¼ï¼‰\n> PHP var_dump() å‡½æ•°è¿”å›å˜é‡çš„æ•°æ®ç±»å‹å’Œå€¼ï¼š\n### å¸¸é‡çš„å£°æ˜\ndefine()å‡½æ•° \n> define(\"slogan\", \"hello\");\nè¯¥å‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°:\n- nameï¼šå¿…é€‰å‚æ•°ï¼Œå¸¸é‡åç§°ï¼Œå³æ ‡å¿—ç¬¦ã€‚\n- valueï¼šå¿…é€‰å‚æ•°ï¼Œå¸¸é‡çš„å€¼ã€‚\n- case_insensitive ï¼šå¯é€‰å‚æ•°ï¼Œå¦‚æœè®¾ç½®ä¸º TRUEï¼Œè¯¥å¸¸é‡åˆ™å¤§å°å†™ä¸æ•æ„Ÿã€‚é»˜è®¤æ˜¯å¤§å°å†™æ•æ„Ÿçš„ã€‚\n\n### if...elseif....else è¯­å¥\n```php\n<?php\n$t=date(\"H\");\nif ($t<\"10\")\n{\n    echo \"Have a good morning!\";\n}\nelseif ($t<\"20\")\n{\n    echo \"Have a good day!\";\n}\nelse\n{\n    echo \"Have a good night!\";\n}\n?>\n```\n\n### è¶…çº§å…¨å±€å˜é‡\n- $GLOBALS(è¶…çº§å…¨å±€å˜é‡ç»„)\n- $_SERVER(åŒ…å«äº†è¯¸å¦‚å¤´ä¿¡æ¯(header)ã€è·¯å¾„(path)ã€ä»¥åŠè„šæœ¬ä½ç½®(script locations)ç­‰ç­‰ä¿¡æ¯çš„æ•°ç»„)\n- $_REQUEST(ç”¨äºæ”¶é›†HTMLè¡¨å•æäº¤çš„æ•°æ®)\n- $_POST(ç”¨äºæ”¶é›†HTMLè¡¨å•æäº¤çš„æ•°æ®,methodè®¾ç½®ä¸ºpost)\n- $_GET(ç”¨äºæ”¶é›†HTMLè¡¨å•æäº¤çš„æ•°æ®,methodè®¾ç½®ä¸ºget,ä¹Ÿå¯ä»¥æ”¶é›†URLä¸­å‘é€çš„æ•°æ®)\n- $_FILES\n- $_ENV\n- $_COOKIE\n- $_SESSION\n\n```php\n<?php\n$x=array(\"one\",\"two\",\"three\");\nforeach ($x as $value)\n{\n    echo $value . \"<br>\";\n}\n?>\n```\n\n### é­”æœ¯å¸¸é‡(é¢„å®šä¹‰å¸¸é‡)\n- __LINE__(å½“å‰è¡Œå·)\n- __FILE__(æ–‡ä»¶çš„å®Œæ•´è·¯å¾„å’Œæ–‡ä»¶å)\n- __DIR__(æ–‡ä»¶æ‰€åœ¨ç›®å½•)\n- __FUNCTION__(å‡½æ•°å†…éƒ¨è¿”å›å‡½æ•°å)\n- __CLASS__(ç±»å†…éƒ¨è¿”å›ç±»å)\n- __TRAIT__(Trait ååŒ…æ‹¬å…¶è¢«å£°æ˜çš„ä½œç”¨åŒºåŸŸ)\nä»åŸºç±»ç»§æ‰¿çš„æˆå‘˜è¢«æ’å…¥çš„ SayWorld Trait ä¸­çš„ MyHelloWorld æ–¹æ³•æ‰€è¦†ç›–ã€‚\nå…¶è¡Œä¸º MyHelloWorld ç±»ä¸­å®šä¹‰çš„æ–¹æ³•ä¸€è‡´ã€‚ä¼˜å…ˆé¡ºåºæ˜¯å½“å‰ç±»ä¸­çš„æ–¹æ³•ä¼šè¦†ç›– trait æ–¹æ³•ï¼Œè€Œ trait æ–¹æ³•åˆè¦†ç›–äº†åŸºç±»ä¸­çš„æ–¹æ³•ã€‚\n\n```php\n<?php\nclass Base {\n    public function sayHello() {\n        echo 'Hello ';\n    }\n}\n \ntrait SayWorld {\n    public function sayHello() {\n        parent::sayHello();\n        echo 'World!';\n    }\n}\n \nclass MyHelloWorld extends Base {\n    use SayWorld;\n}\n \n$o = new MyHelloWorld();\n$o->sayHello(); // Hello World\n?>\n```\n\n- __METHOD__(è¿”å›æ–¹æ³•å®šä¹‰æ—¶çš„åç§°)\n- __NAMESPACE__(å½“å‰çš„å‘½åç©ºé—´åç§°)\n1. ç”¨æˆ·ç¼–å†™çš„ä»£ç ä¸PHPå†…éƒ¨çš„ç±»/å‡½æ•°/å¸¸é‡æˆ–ç¬¬ä¸‰æ–¹ç±»/å‡½æ•°/å¸¸é‡ä¹‹é—´çš„åå­—å†²çªã€‚\n2. ä¸ºå¾ˆé•¿çš„æ ‡è¯†ç¬¦åç§°(é€šå¸¸æ˜¯ä¸ºäº†ç¼“è§£ç¬¬ä¸€ç±»é—®é¢˜è€Œå®šä¹‰çš„)åˆ›å»ºä¸€ä¸ªåˆ«åï¼ˆæˆ–ç®€çŸ­ï¼‰çš„åç§°ï¼Œæé«˜æºä»£ç çš„å¯è¯»æ€§ã€‚\n\n### phpè·å–ä¸‹æ‹‰èœå•çš„æ•°æ®\n```php\n<?php\n$q = isset($_GET['q'])? htmlspecialchars($_GET['q']) : '';\nif($q) {\n        if($q =='BAIDU') {\n                echo 'ç™¾åº¦<br>http://www.baidu.com';\n        } else if($q =='GOOGLE') {\n                echo 'Google æœç´¢<br>http://www.google.com';\n        } else if($q =='TAOBAO') {\n                echo 'æ·˜å®<br>http://www.taobao.com';\n        }\n} else {\n?>\n<form action=\"\" method=\"get\"> \n    <select name=\"q\">\n    <option value=\"\">é€‰æ‹©ä¸€ä¸ªç«™ç‚¹:</option>\n    <option value=\"BAIDU\">Runoob</option>\n    <option value=\"GOOGLE\">Google</option>\n    <option value=\"TAOBAO\">Taobao</option>\n    </select>\n    <input type=\"submit\" value=\"æäº¤\">\n    </form>\n<?php\n}\n?>\n```\n\n### è·å–å½“å‰æ—¶é—´\n```php\n<?php\n//è®¾ç½®é»˜è®¤å½“å‰æ—¶åŒº\ndate_default_timezone_set('PRC');\necho date('Y-m-d H:i:s',time());\n?>\n```\n\n### æ–‡ä»¶å¼•å…¥\n> include å’Œ require çš„åŒºåˆ«\n- require ä¸€èˆ¬æ”¾åœ¨ PHP æ–‡ä»¶çš„æœ€å‰é¢ï¼Œç¨‹åºåœ¨æ‰§è¡Œå‰å°±ä¼šå…ˆå¯¼å…¥è¦å¼•ç”¨çš„æ–‡ä»¶ï¼›\n- include ä¸€èˆ¬æ”¾åœ¨ç¨‹åºçš„æµç¨‹æ§åˆ¶ä¸­ï¼Œå½“ç¨‹åºæ‰§è¡Œæ—¶ç¢°åˆ°æ‰ä¼šå¼•ç”¨ï¼Œç®€åŒ–ç¨‹åºçš„æ‰§è¡Œæµç¨‹ã€‚\n- require å¼•å…¥çš„æ–‡ä»¶æœ‰é”™è¯¯æ—¶ï¼Œæ‰§è¡Œä¼šä¸­æ–­ï¼Œå¹¶è¿”å›ä¸€ä¸ªè‡´å‘½é”™è¯¯ï¼›\n- include å¼•å…¥çš„æ–‡ä»¶æœ‰é”™è¯¯æ—¶ï¼Œä¼šç»§ç»­æ‰§è¡Œï¼Œå¹¶è¿”å›ä¸€ä¸ªè­¦å‘Šã€‚\n\n### æ‰“å¼€æ–‡ä»¶\n```php\n$file = fopen(\"test.txt\",\"r\");\n\n// è¯»å–æ–‡ä»¶æ¯ä¸€è¡Œï¼Œç›´åˆ°æ–‡ä»¶ç»“å°¾\nwhile(!feof($file))\n{\n    echo fgets($file). \"<br>\";\n    //  é€ä¸ªå­—ç¬¦echo fgetc($file);\n}\n\nfclose($file);\n```\n\n### æ–‡ä»¶ä¸Šä¼ \n```html\n<form action=\"upload_file.php\" method=\"post\" enctype=\"multipart/form-data\">\n    <label for=\"file\">æ–‡ä»¶åï¼š</label>\n    <input type=\"file\" name=\"file\" id=\"file\"><br>\n    <input type=\"submit\" name=\"submit\" value=\"æäº¤\">\n</form>\n```\n\n```php\n<?php\nheader(\"Content-Type: text/html;charset=utf-8\");\n// å…è®¸ä¸Šä¼ çš„å›¾ç‰‡åç¼€\n$allowedExts = array(\"gif\", \"jpeg\", \"jpg\", \"png\", \"PNG\");\n$temp = explode(\".\", $_FILES[\"file\"][\"name\"]);\necho $_FILES[\"file\"][\"size\"];\n$extension = end($temp);     // è·å–æ–‡ä»¶åç¼€å\nif ((($_FILES[\"file\"][\"type\"] == \"image/gif\")\n|| ($_FILES[\"file\"][\"type\"] == \"image/jpeg\")\n|| ($_FILES[\"file\"][\"type\"] == \"image/jpg\")\n|| ($_FILES[\"file\"][\"type\"] == \"image/pjpeg\")\n|| ($_FILES[\"file\"][\"type\"] == \"image/x-png\")\n|| ($_FILES[\"file\"][\"type\"] == \"image/png\"))\n&& ($_FILES[\"file\"][\"size\"] < 204800)   // å°äº 200 kb\n&& in_array($extension, $allowedExts))\n{\n    if ($_FILES[\"file\"][\"error\"] > 0)\n    {\n        echo \"é”™è¯¯ï¼š: \" . $_FILES[\"file\"][\"error\"] . \"<br>\";\n    }\n    else\n    {\n        echo \"ä¸Šä¼ æ–‡ä»¶å: \" . $_FILES[\"file\"][\"name\"] . \"<br>\";\n        echo \"æ–‡ä»¶ç±»å‹: \" . $_FILES[\"file\"][\"type\"] . \"<br>\";\n        echo \"æ–‡ä»¶å¤§å°: \" . ($_FILES[\"file\"][\"size\"] / 1024) . \" kB<br>\";\n        echo \"æ–‡ä»¶ä¸´æ—¶å­˜å‚¨çš„ä½ç½®: \" . $_FILES[\"file\"][\"tmp_name\"] . \"<br>\";\n        \n        // åˆ¤æ–­å½“æœŸç›®å½•ä¸‹çš„ upload ç›®å½•æ˜¯å¦å­˜åœ¨è¯¥æ–‡ä»¶\n        // å¦‚æœæ²¡æœ‰ upload ç›®å½•ï¼Œä½ éœ€è¦åˆ›å»ºå®ƒï¼Œupload ç›®å½•æƒé™ä¸º 777\n        if (file_exists(\"upload/\" . $_FILES[\"file\"][\"name\"]))\n        {\n            echo $_FILES[\"file\"][\"name\"] . \" æ–‡ä»¶å·²ç»å­˜åœ¨ã€‚ \";\n        }\n        else\n        {\n            // å¦‚æœ upload ç›®å½•ä¸å­˜åœ¨è¯¥æ–‡ä»¶åˆ™å°†æ–‡ä»¶ä¸Šä¼ åˆ° upload ç›®å½•ä¸‹\n            move_uploaded_file($_FILES[\"file\"][\"tmp_name\"], \"upload/\" . $_FILES[\"file\"][\"name\"]);\n            echo \"æ–‡ä»¶å­˜å‚¨åœ¨: \" . \"upload/\" . $_FILES[\"file\"][\"name\"];\n        }\n    }\n}\nelse\n{\n    echo \"éæ³•çš„æ–‡ä»¶æ ¼å¼\";\n}\n?>\n```\n\n### è®¾ç½®cookie(å¿…é¡»å†™åœ¨htmlä¹‹å‰)\n```php\nsetcookie(\"user\", \"cosyer\", time()+3600); // 1å°æ—¶åè¿‡æœŸ\necho $_COOKIE[\"user\"]; // (isset($_COOKIE[\"user\"])åˆ¤æ–­æ˜¯å¦è®¾ç½®äº†cookie\n// åˆ é™¤setcookie(\"user\", \"\", time()-3600);è®¾ç½®æˆè¿‡å»çš„æ—¶ç‚¹\n```\n\n### å­˜å‚¨session\n```php\nsession_start();\n// å­˜å‚¨ session æ•°æ®\n$_SESSION['views']=1;\n// é‡Šæ”¾ session æ•°æ®\n// unset($_SESSION['views']);\n// æ¸…ç©ºæ‰€æœ‰æ•°æ®\n// session_destroy();\n```\n\n### phpå‘é€email\n```php\n<?php\nif (isset($_REQUEST['email'])) { // å¦‚æœæ¥æ”¶åˆ°é‚®ç®±å‚æ•°åˆ™å‘é€é‚®ä»¶\n    // å‘é€é‚®ä»¶\n    $email = $_REQUEST['email'] ;\n    $subject = $_REQUEST['subject'] ;\n    $message = $_REQUEST['message'] ;\n    mail(\"someone@example.com\", $subject,\n    $message, \"From:\" . $email);\n    echo \"é‚®ä»¶å‘é€æˆåŠŸ\";\n} else { // å¦‚æœæ²¡æœ‰é‚®ç®±å‚æ•°åˆ™æ˜¾ç¤ºè¡¨å•\n    echo \"<form method='post' action='mailform.php'>\n    Email: <input name='email' type='text'><br>\n    Subject: <input name='subject' type='text'><br>\n    Message:<br>\n    <textarea name='message' rows='15' cols='40'>\n    </textarea><br>\n    <input type='submit'>\n    </form>\";\n}\n?>\n```\n\n### é”™è¯¯å¤„ç†\n> die(\"æ–‡ä»¶ä¸å­˜åœ¨\");\n### å¼‚å¸¸å¤„ç† åŒ try catch new Exception()","tags":["PHP"],"categories":["PHP"]},{"title":"chromeæ’ä»¶æ‰©å±•ç¨‹åºå¼€å‘æŒ‡å—","url":"%2Fchrome%E6%8F%92%E4%BB%B6%E6%89%A9%E5%B1%95%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97.html","content":"\n### ä»€ä¹ˆæ˜¯chrome extensions\nChrome Extensionsï¼Œä¸­æ–‡åå« â€œChromeæµè§ˆå™¨æ‰©å±•ç¨‹åºâ€ã€‚å¼•ç”¨å®˜æ–¹æ–‡æ¡£çš„æè¿°ï¼Œç¿»è¯‘ä¸€ä¸‹å°±æ˜¯ â€œå¯ä»¥ä¿®æ”¹å’Œå¢å¼ºæµè§ˆå™¨åŠŸèƒ½çš„ H5 å°ç¨‹åºâ€ã€‚\nå®ƒçš„å…¥å£åœ¨æµè§ˆå™¨çª—å£çš„å³ä¸Šè§’ï¼Œåœ°å€æ çš„æœ€å³è¾¹\n\n---\n<!-- more -->\n\n### å…¥é—¨\n#### manifest.json\nmanifest.json æ˜¯æ•´ä¸ªæ’ä»¶æ‰©å±•ç¨‹åºä¸­æœ€é‡è¦çš„ä¸€ä¸ªæè¿°æ–‡ä»¶ï¼Œè¿™ä¸ª json æ ¼å¼çš„æ–‡ä»¶åŒ…å«äº†ä½ æ•´ä¸ªæ‰©å±•ç¨‹åºçš„ä¸€äº›é‡è¦æè¿°ï¼Œæ¯”å¦‚ â€œæ‰©å±•ç¨‹åºåç§°â€ã€â€œæ‰©å±•ç¨‹åºå›¾æ ‡â€ã€â€œæƒé™ç”³è¯·â€ ç­‰ã€‚\n\n```json\n{\n  // Required\n  \"manifest_version\": 2, // manifest ç‰ˆæœ¬å·ï¼Œè¿™é‡Œéƒ½å†™ 2 å°±å¥½äº†ï¼Œä» Google Chrome 18 å¼€å§‹ï¼Œå°±å¼€å§‹å‡çº§åˆ° 2 ç‰ˆæœ¬äº†\n  \"name\": \"My Extension\",\n  \"version\": \"1.0.0\", // æ‰©å±•ç¨‹åºç‰ˆæœ¬ï¼Œè¿™ä¸ªæ˜¯è‡ªå®šä¹‰çš„ï¼Œå»ºè®®å‚è€ƒ semver è§„èŒƒ(http://semver.org/)\n\n  // Recommended\n  \"default_locale\": \"zh\", // é»˜è®¤è¯­è¨€ï¼Œå…·ä½“å¯ä»¥çœ‹ i18n æ–‡æ¡£(https://developer.chrome.com/extensions/i18n)\n  \"description\": \"A plain text description\", // é¡¹ç›®æè¿°\n  \"icons\": { // iconï¼Œä¸åŒçš„ä½ç½®æ”¯æŒä¸åŒå¤§å°çš„ iconï¼Œå…·ä½“çœ‹æ–‡æ¡£(https://developer.chrome.com/extensions/manifest/icons)\n    \"128\": \"icons/icon_128.png\",\n    \"48\": \"icons/icon_48.png\",\n    \"16\": \"icons/icon_16.png\"\n  },\n\n  // Pick one (or none)\n  \"browser_action\": { // å¤šæ•°éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªï¼Œæ’ä»¶æ‰©å±•ç¨‹åºé’ˆå¯¹çš„æ˜¯æµè§ˆå™¨è¡Œä¸ºï¼ˆå›¾æ ‡æ˜¯åœ¨åœ°å€æ å¤–é¢ï¼‰\n    \"default_icon\": \"icons/24.png\", // æœ€ä½³å¤§å°ä¸º19*19ï¼Œåœ°å€æ ä¸Šçš„æ’ä»¶æ‰©å±•ç¨‹åºçš„ iconï¼ˆä¸€èˆ¬ä½œä¸ºä¸»å…¥å£ï¼‰\n    \"default_popup\": \"popup.html\", // ç‚¹å‡»æ’ä»¶æ‰©å±•ç¨‹åº icon åå¼¹å‡ºæ¥çš„çª—å£çš„ä¸»é¡µé¢ html\n    \"default_title\": \"extentsions demo\" // å½“é¼ æ ‡æ”¾åˆ°æ‰©å±•ç¨‹åºå›¾æ ‡ä¸Šæ—¶æ˜¾ç¤ºçš„æ–‡å­—\n  },\n  \"page_action\": { // æ’ä»¶æ‰©å±•ç¨‹åºé’ˆå¯¹çš„æ˜¯é¡µé¢è¡Œä¸ºï¼ˆå›¾æ ‡æ˜¯åœ¨åœ°å€æ é‡Œé¢çš„ï¼‰\n    ...\n  },\n\n  // Optional\n  \"author\": ...,\n  \"automation\": ...,\n  \"background\": {\n    // Recommended\n    \"persistent\": false\n  },\n  \"background\": {\n    \"scripts\": [\"eventPage.js\"],\n    \"persistent\": false\n  },\n  \"chrome_settings_overrides\": {...},\n  \"chrome_ui_overrides\": {\n    \"bookmarks_ui\": {\n      \"remove_bookmark_shortcut\": true,\n      \"remove_button\": true\n    }\n  },\n  \"chrome_url_overrides\": {...},\n  \"commands\": {...},\n  \"content_capabilities\": ...,\n  \"content_scripts\": [{...}],\n  \"content_security_policy\": \"policyString\",\n  \"converted_from_user_script\": ...,\n  \"current_locale\": ...,\n  \"declarative_net_request\": ...,\n  \"devtools_page\": \"devtools.html\",\n  \"event_rules\": [{...}],\n  \"externally_connectable\": {\n    \"matches\": [\"*://*.example.com/*\"]\n  },\n  \"file_browser_handlers\": [...],\n  \"file_system_provider_capabilities\": {\n    \"configurable\": true,\n    \"multiple_mounts\": true,\n    \"source\": \"network\"\n  },\n  \"homepage_url\": \"http://path/to/homepage\",\n  \"import\": [{\"id\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}],\n  \"incognito\": \"spanning, split, or not_allowed\",\n  \"input_components\": ...,\n  \"key\": \"publicKey\",\n  \"minimum_chrome_version\": \"versionString\",\n  \"nacl_modules\": [...],\n  \"oauth2\": ...,\n  \"offline_enabled\": true,\n  \"omnibox\": {\n    \"keyword\": \"aString\"\n  },\n  \"optional_permissions\": [\"tabs\"],\n  \"options_page\": \"options.html\",\n  \"options_ui\": {\n    \"chrome_style\": true,\n    \"page\": \"options.html\"\n  },\n  \"permissions\": [\"tabs\"],\n  \"platforms\": ...,\n  \"plugins\": [...],\n  \"requirements\": {...},\n  \"sandbox\": [...],\n  \"short_name\": \"Short Name\",\n  \"signature\": ...,\n  \"spellcheck\": ...,\n  \"storage\": {\n    \"managed_schema\": \"schema.json\"\n  },\n  \"system_indicator\": ...,\n  \"tts_engine\": {...},\n  \"update_url\": \"http://path/to/updateInfo.xml\",\n  \"version_name\": \"aString\",\n  \"web_accessible_resources\": [...]\n}\n```\n\n#### å­¦åšä¸€ä¸ªdemo\n1. manifestjson(è¯¥æ–‡æœ¬æ–‡ä»¶éœ€è¦ç”¨UTF8å­—ç¬¦é›†ä¿å­˜)\n```json\n{\n  \"name\": \"ç¬¬ä¸€ä¸ªChromeæ’ä»¶\",\n  \"manifest_version\": 2,\n  \"version\": \"1.0\",\n  \"description\": \"æˆ‘çš„ç¬¬ä¸€ä¸ªChromeæ’ä»¶ï¼Œè¿˜ä¸é”™å§\",\n  \"browser_action\": {\n    \"default_icon\": \"1.png\"\n  },\n  \"content_scripts\": [\n    {\n      \"matches\": [\"https://www.baidu.com/\"],\n      \"js\": [\"test.js\"]\n    }\n  ]\n}\n```\n\n2. test.js\n```javascript\nalert(\"Hello World\");\ndocument.body.style.backgroundColor=\"gray\";\n```\ncontent_scriptsæ˜¯è¿è¡Œåœ¨æ‰“å¼€é¡µé¢çš„è„šæœ¬ï¼Œå¯ä»¥æ‹¿åˆ°æ•´ä¸ªé¡µé¢çš„DOMå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨è¯¥è„šæœ¬å¯¹é¡µé¢è¿›è¡Œæ“ä½œã€‚\n\n3. æ·»åŠ å›¾ç‰‡1.png\n\n4. æ‰“å¼€chromeï¼Œæ‰“å¼€èœå•ï¼Œæ‰¾åˆ°æ‰©å±•ç¨‹åºé€‰é¡¹æ›´å¤šå·¥å…·>æ‰©å±•ç¨‹åºè·¯å¾„ä¸‹ã€‚ç‚¹å‡»åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºï¼Œæ·»åŠ æ–‡ä»¶å¤¹å°±OKå•¦ï¼\n\n\n### å¸¸ç”¨api \n- bookmarks: ä¹¦ç­¾ç®¡ç†æ¥å£ï¼Œå¯ä»¥å¯¹æµè§ˆå™¨çš„ä¹¦ç­¾è¿›è¡Œå¢åˆ æ”¹æŸ¥ç­‰ç®¡ç†\n- tabs: æ ‡ç­¾ç®¡ç†æ¥å£ï¼Œå¯ä»¥å¯¹æµè§ˆå™¨çš„æ ‡ç­¾è¿›è¡Œå¢åˆ æ”¹æŸ¥ç­‰ç®¡ç†\n- contextMenus: å³é”®èœå•ç®¡ç†\n- cookies: æµè§ˆå™¨ cookie çš„ç®¡ç†\n- notifications: æ¶ˆæ¯é€šçŸ¥\n- desktopCapture: å¯é’ˆå¯¹ â€œçª—å£â€ æˆ–è€… â€æ ‡ç­¾â€œ çš„æˆªå›¾æ¥å£\n- i18n: å›½é™…åŒ–ï¼ˆå¤šè¯­è¨€æ”¯æŒï¼‰\n\n### ç¨‹åºå‘å¸ƒå’Œåˆ†äº«\næ‰“åŒ…æ‰©å±•ç¨‹åºï¼Œç¬¬ä¸€æ¬¡æ‰“åŒ…åªéœ€è¦è®¾ç½®æ ¹ç›®å½•ï¼Œæ‰“åŒ…å®Œæˆåä¼šç”Ÿæˆ.crxå’Œ.pemå¯†é’¥æ–‡ä»¶(ç‰ˆæœ¬çš„è¿­ä»£éœ€è¦æ­¤æ–‡ä»¶ï¼Œå¦åˆ™åˆ™ä¼šç”Ÿæˆæ–°çš„ç¨‹åºæ–‡ä»¶)ï¼Œå°†.crxæ–‡ä»¶å‘ç»™å…¶ä»–äººæ‹–å…¥æ‰©å±•ç¨‹åºé¡µé¢å³å¯å®‰è£…ã€‚\n\n### å‘å¸ƒåˆ°chromeå•†åº—\nå½“ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œå°±å¯ä»¥å‡†å¤‡å‘å¸ƒä¸Šçº¿äº†ï¼ŒChrome æœ‰ä¸ªå®˜æ–¹çš„æ’ä»¶æ‰©å±•ç¨‹åºå¸‚åœºï¼Œè¿˜è‡ªå¸¦äº†å‘å¸ƒå’Œæ›´æ–°ç­‰ä¸€ä½“åŒ–ç®¡ç†çš„æµç¨‹ï¼Œéå¸¸æ–¹ä¾¿ã€‚\nä¼ é€é—¨ï¼š[Chromeå•†åº—dashboard](https://chrome.google.com/webstore/developer/dashboard)\n\næ³¨æ„ï¼Œä¸Šä¼ çš„æ˜¯ zip è€Œä¸æ˜¯ç”Ÿæˆçš„ crx æ–‡ä»¶ï¼Œå…·ä½“å‚è€ƒï¼š[https://developer.chrome.com/webstore/publish](https://developer.chrome.com/webstore/publish)\n\n### å¸¸è§é—®é¢˜\n1. å¼•å…¥å¤–éƒ¨ js æ—¶æŠ¥ Refused to load the script çš„é—®é¢˜\n```javascript\n<script src=\"https://code.jquery.com/jquery-3.2.1.min.js\"></script>\n```\nè§£å†³æ–¹æ¡ˆï¼šä¿®æ”¹ content_security_policyï¼ŒæŠŠå¯¹åº”çš„åŸŸååŠ ä¸Šå»å³å¯ï¼Œæ¯”å¦‚ä»¥ä¸Šçš„é—®é¢˜å¯ä»¥è§£å†³ï¼š\n\n```json\n{\n    \"content_security_policy\": \"https://code.jquery.com\"\n}\n```\n> ä»¥ä¸Šè¡¨ç¤ºå…è®¸ https://code.jquery.com åŸŸåä¸‹çš„å¤–éƒ¨ js çš„å¼•å…¥ã€‚\n2. Chrome æ’ä»¶æ‰©å±•ç¨‹åºæ˜¯å¼€æºçš„æ–¹å¼å®‰è£…çš„ï¼Œå¯ä»¥å»å®‰è£…ç›®å½•é€šè¿‡æ‰©å±•ç¨‹åº ID æ¥æ‰¾åˆ°æºç ã€‚\næ­£å¸¸æƒ…å†µä¸‹ï¼ŒChrome æ’ä»¶æ‰©å±•ç¨‹åºçš„é»˜è®¤å®‰è£…ç›®å½•å¦‚ä¸‹ï¼š\n\n- Windows XPï¼šC:\\Documents and Settings\\ç”¨æˆ·å\\Local Settings\\Application Data\\Google\\Chrome\\User Data\\Default\\Extensions\n- Windows7ï¼šC:\\Users\\ç”¨æˆ·å\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\Extensions\n- Macï¼š~/Library/Application Support/Google/Chrome/Default/Extensions\n- Ubuntuï¼š~/.config/google-chrome/Default/Extensions\nå¦‚æœåœ¨è¿™äº›ä¸åŒæ“ä½œç³»ç»Ÿä¸­çš„é»˜è®¤å®‰è£…ä½ç½®æ²¡æ‰¾åˆ°æ’ä»¶ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥æŸ¥è¯¢åˆ°ã€‚\n\nåœ°å€æ è®¿é—® chrome:version\næ‰¾åˆ° â€œä¸ªäººèµ„æ–™è·¯å¾„â€ï¼Œè¯¥è·¯å¾„ä¸‹çš„ extensions æ–‡ä»¶å¤¹å°±æ˜¯ Chrome æ’ä»¶æ‰©å±•ç¨‹åºçš„å®‰è£…è·¯å¾„äº†\nå®‰è£…è·¯å¾„ä¸‹çš„æ’ä»¶æ‰©å±•ç¨‹åºï¼Œæ˜¯ä»¥ ID ä¸ºç›®å½•åŒºåˆ†çš„\nåœ°å€æ è®¿é—® chrome://extensions/ï¼Œå¯ä»¥æŸ¥çœ‹æ¯ä¸ªæ’ä»¶æ‰©å±•ç¨‹åºçš„ ID\n\n### é«˜çº§æ•™ç¨‹-chromeæ’ä»¶åˆé›†\n[é¡¹ç›®åœ°å€](https://github.com/cosyer/chrome-extensions)\n\n### å‚è€ƒèµ„æ–™\n[å®˜æ–¹æ–‡æ¡£](https://developer.chrome.com/extensions/overview)","tags":["æ•´ç†"],"categories":["çŸ¥è¯†"]},{"title":"webapck4é›¶é…ç½®äº†è§£ä¸€ä¸‹","url":"%2Fwebpack4%E9%9B%B6%E9%85%8D%E7%BD%AE%E4%BA%86%E8%A7%A3%E4%B8%80%E4%B8%8B.html","content":"\nwebpack4 æœ€ä¸»è¦çš„å–ç‚¹ä¾¿æ˜¯é›¶é…ç½®ï¼Œè¦æƒ³æˆä¸ºä¸€ä½webpacké…ç½®å·¥ç¨‹å¸ˆæ€ä¹ˆèƒ½ä¸å¼€å§‹äº†è§£å‘¢ï¼Ÿè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬å¼€å§‹ä½“éªŒ webpack 4 çš„ä¸€äº›ç‰¹æ€§ã€‚\n\n### entry å’Œ output\n1. åˆ›å»ºç©ºç›®å½•ï¼Œåˆå§‹åŒ–é…ç½®\n```bash\nmkdir webpack4-quickstart\ncd  webpack4-quickstart\nnpm init -xyz\n```\n\n2. å®‰è£…ç›¸å…³ä¾èµ–\n```bash\nnpm i webpack --save-dev\nnpm i webpack-cli --save-dev\n```\n\n- webpackï¼š å³ webpack æ ¸å¿ƒåº“ã€‚å®ƒæä¾›äº†å¾ˆå¤š API, é€šè¿‡ Node.js è„šæœ¬ä¸­ require('webpack') çš„æ–¹å¼æ¥ä½¿ç”¨ webpackã€‚\n- webpack-cliï¼šæ˜¯ webpack çš„å‘½ä»¤è¡Œå·¥å…·ã€‚webpack 4 ä¹‹å‰å‘½ä»¤è¡Œå·¥å…·æ˜¯é›†æˆåœ¨ webpack åŒ…ä¸­çš„ï¼Œ4.0 å¼€å§‹ webpack åŒ…æœ¬èº«ä¸å†é›†æˆ cliã€‚\n\n3. package.jsonæ·»åŠ æ„å»ºå‘½ä»¤\n```javascript\n\"scripts\":{\n    \"build\":\"webpack\"\n}\n```\n---\n<!-- more -->\n\n- å¦‚æœç›´æ¥å¼€å§‹è¿è¡Œ`npm run build`ä¼šå› ä¸ºç¼ºå°‘æŒ‡å®šçš„é»˜è®¤ç›®å½•çš„æ–‡ä»¶å¯¼è‡´æŠ›å‡ºé”™è¯¯\n- æ·»åŠ å…¥å£æ–‡ä»¶ \n```javascript\n// ./src/index.js\nconsole.log(\"hello world\")\n```\n- å†æ‰§è¡Œ`npm run build`ï¼Œåˆ™é»˜è®¤ç”Ÿæˆäº†'./dist/main.js'æ–‡ä»¶\n\n### developmentå’Œproductionæ¨¡å¼\nåœ¨webpack 4 ä»¥å‰ï¼Œæ‹¥æœ‰2ä»½é…ç½®æ–‡ä»¶æ˜¯webpacké¡¹ç›®å¸¸è§çš„æƒ…å†µï¼Œä¸€ä¸ªå¸¸è§„çš„é¡¹ç›®é…ç½®å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š\n\n> ä¸€ä»½å¼€å‘ç¯å¢ƒçš„é…ç½®ï¼Œç”¨æ¥é…ç½® dev server å’Œå…¶ä»–çš„ä¸€äº›ä¸œè¥¿\n> ä¸€ä»½ç”Ÿäº§ç¯å¢ƒçš„é…ç½®ï¼Œé…ç½®ä¸€äº› UglifyJSPluginã€sourcemaps ç­‰ç­‰\nä½†æ˜¯åœ¨webpack 4ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®å‘½ä»¤è¡Œå‚æ•°productionå’Œdevelopmentæ¥åŒºåˆ†ç¯å¢ƒï¼š\n\n```json\n\"scripts\": {\n  \"dev\": \"webpack --mode development\",\n  \"build\": \"webpack --mode production\"\n}\n```\n\nåˆ†åˆ«æ‰§è¡Œ`npm run dev`å’Œ`npm run build`ä¼šå‘ç°ç¬¬äºŒç§æ‰§è¡Œçš„ä»£ç è¢«å‹ç¼©äº†ã€‚\n\n> Development mode åˆ™æ˜¯åœ¨é€Ÿåº¦ä¸Šè¿›è¡Œäº†ä¼˜åŒ–ï¼Œåªä¸è¿‡ä¸ä¼šæä¾›å‹ç¼©åŠŸèƒ½ã€‚\n> Production mode å¯ä»¥å®ç°å„ç§ä¼˜åŒ–ï¼ŒåŒ…æ‹¬ ä»£ç å‹ç¼©ã€tree-shaking...\n\n### è„šæœ¬ä¸­è¦†ç›–é»˜è®¤çš„å…¥å£å’Œå‡ºå£\n```json\n\"scripts\": {\n  \"dev\": \"webpack --mode development ./entry/index.js --output ./output/main.js\",\n  \"build\": \"webpack --mode production ./entry/index.js --output ./output/main.js\"\n}\n```\n\n### babelæ’ä»¶é…ç½®es6->es5\n\n1. æ’ä»¶ä¾èµ–\n> babel-core\n> babel-loader\n> babel-preset-env ç¼–è¯‘ ES6 -> ES5 \n```javascript\nnpm i babel-core babel-loader babel-preset-env --save-dev\n```\n\n2. é€šè¿‡`./babelrc`æ¥é…ç½®ç›¸å…³æ’ä»¶\n```json\n{\n    \"presets\":[\n        \"env\"\n    ]\n}\n```\n\n3. 2ç§æ–¹å¼æ¥é…ç½®`babel-loader`\n> webpack.config.jsé…ç½®\n```javascript\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        exclude: /node_modules/,\n        use: {\n          loader: \"babel-loader\"\n        }\n      }\n    ]\n  }\n};\n```\n> è„šæœ¬å‘½ä»¤é…ç½® --module-bind\n```json\n\"scripts\": {\n    \"dev\": \"webpack --mode development --module-bind js=babel-loader\",\n    \"build\": \"webpack --mode production --module-bind js=babel-loader\"\n  }\n```\n\n### æœ€å°åŒ–jsæ–‡ä»¶\n> config.optimization.minimize(true)\n\n### å›¾ç‰‡èµ„æºå‹ç¼©\n```js\nconfig.module\n  .rule('images')\n  .use('image-webpack-loader')\n  .loader('image-webpack-loader')\n  .options({\n    bypassOnDebug: true\n  })\n  .end()\n```\n\nè¿™é‡Œåªæ˜¯ç®€å•çš„ä»‹ç»ï¼Œæƒ³è¦è¯¦ç»†çš„äº†è§£webpack4çš„æ–°ç‰¹æ€§è¯·è®¿é—®[githubåœ°å€](https://github.com/cosyer/webpack4)ã€‚\n","tags":["æ•´ç†"],"categories":["çŸ¥è¯†"]},{"title":"å®ç°å‰ç«¯è·¯ç”±","url":"%2F%E5%AE%9E%E7%8E%B0%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1.html","content":"\nç°ä»£çš„å‰ç«¯æ¡†æ¶react/vue/angularéƒ½æœ‰è·¯ç”±routerçš„æ¦‚å¿µï¼Œé€šè¿‡æ‰‹å†™å®ç°å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°äº†è§£å®ƒçš„å·¥ä½œåŸç†ã€‚å®ƒä»¬éƒ½æ¨èå•é¡µé¢åº”ç”¨ SPA å¼€å‘æ¨¡å¼ï¼Œåœ¨è·¯ç”±åˆ‡æ¢æ—¶æ›¿æ¢ DOM Tree ä¸­æœ€å°ä¿®æ”¹çš„éƒ¨åˆ† DOMï¼Œæ¥å‡å°‘åŸå…ˆå› ä¸ºå¤šé¡µåº”ç”¨çš„é¡µé¢è·³è½¬å¸¦æ¥çš„å·¨é‡æ€§èƒ½æŸè€—ã€‚å®ƒä»¬éƒ½æœ‰è‡ªå·±çš„å…¸å‹è·¯ç”±è§£å†³æ–¹æ¡ˆï¼Œ@angular/routerã€react-routerã€vue-routerç­‰ã€‚\n\nä¸€èˆ¬æ¥è¯´ï¼Œè¿™äº›è·¯ç”±æ’ä»¶æ€»æ˜¯æä¾›ä¸¤ç§ä¸åŒæ–¹å¼çš„è·¯ç”±æ–¹å¼ï¼š Hash å’Œ Historyï¼Œæœ‰æ—¶ä¹Ÿä¼šæä¾›éæµè§ˆå™¨ç¯å¢ƒä¸‹çš„è·¯ç”±æ–¹å¼ Abstract(æ”¯æŒæ‰€æœ‰ JavaScript è¿è¡Œ\nç¯å¢ƒï¼Œå¦‚ Node.js æœåŠ¡å™¨ç«¯ã€‚å¦‚æœå‘ç°æ²¡æœ‰æµè§ˆå™¨çš„ APIï¼Œè·¯ç”±ä¼šè‡ªåŠ¨å¼ºåˆ¶è¿›å…¥è¿™ä¸ªæ¨¡å¼)ã€‚\n\n### å®ç°è·¯ç”±çš„2ç§æ–¹å¼\n1. hashæ¨¡å¼ çŠ¶æ€ä¿å­˜éœ€è¦å¦è¡Œä¼ é€’\n2. historyæ¨¡å¼ åŸç”Ÿæä¾›äº†è‡ªå®šä¹‰çŠ¶æ€ä¼ é€’çš„èƒ½åŠ›\n\n### ç¼ºç‚¹\nhash: åœ°å€æ ä¼šå¤šå‡ºä¸€ä¸ª#å·ï¼Œå¯¹urlé€ æˆå½±å“ï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹å¦‚å¾®ä¿¡æ”¯ä»˜æœ‰å‘ã€‚\nhistory: å…¼å®¹æ€§å·®ï¼Œç›´æ¥è®¿é—®æŠ¥404ï¼Œéœ€è¦æœåŠ¡å™¨åšå¤„ç†ã€‚\n\n### åŸºæœ¬åŸç†\n- hash ä¸»è¦åŸç†æ˜¯é€šè¿‡ç›‘å¬ # åçš„ URL è·¯å¾„æ ‡è¯†ç¬¦çš„æ›´æ”¹è€Œè§¦å‘çš„æµè§ˆå™¨ hashchange äº‹ä»¶(å½“ location.hash å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå°†è§¦å‘è¿™ä¸ªäº‹ä»¶)\n\n> æ³¨æ„ï¼š Hash æ–¹æ³•æ˜¯åˆ©ç”¨äº†ç›¸å½“äºé¡µé¢é”šç‚¹çš„åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸åŸæ¥çš„é€šè¿‡é”šç‚¹å®šä½æ¥è¿›è¡Œé¡µé¢æ»šåŠ¨å®šä½çš„æ–¹å¼å†²çªï¼Œå¯¼è‡´å®šä½åˆ°é”™è¯¯çš„è·¯ç”±è·¯å¾„ï¼Œå› æ­¤éœ€è¦é‡‡ç”¨åˆ«çš„åŠæ³•ã€‚\n\n- history åˆ™åŸºäº pushState å’Œ popState replaceState\n\nHash æ¨¡å¼æ˜¯ä½¿ç”¨ URL çš„ Hash æ¥æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„ URLï¼Œå› æ­¤å½“ URL æ”¹å˜çš„æ—¶å€™é¡µé¢å¹¶ä¸ä¼šé‡è½½ã€‚History æ¨¡å¼åˆ™ä¼šç›´æ¥æ”¹å˜ URLï¼Œæ‰€ä»¥åœ¨è·¯ç”±è·³è½¬çš„æ—¶å€™ä¼šä¸¢å¤±ä¸€äº›åœ°å€ä¿¡æ¯(åªæ˜¯åŠ¨æ€çš„é€šè¿‡jsæ“ä½œwindow.historyæ¥æ”¹å˜æµè§ˆå™¨åœ°å€æ é‡Œçš„è·¯å¾„ï¼Œå¹¶æ²¡æœ‰å‘èµ·httpè¯·æ±‚)ï¼Œåœ¨åˆ·æ–°æˆ–ç›´æ¥è®¿é—®è·¯ç”±åœ°å€çš„æ—¶å€™ä¼šåŒ¹é…ä¸åˆ°é™æ€èµ„æºã€‚å› æ­¤éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šé…ç½®ä¸€äº›ä¿¡æ¯ï¼Œè®©æœåŠ¡å™¨å¢åŠ ä¸€ä¸ªè¦†ç›–æ‰€æœ‰æƒ…å†µçš„å€™é€‰èµ„æºã€‚\n\n> history æ¨¡å¼ä¸‹ï¼Œå‰ç«¯çš„ URL å¿…é¡»å’Œå®é™…å‘åç«¯å‘èµ·è¯·æ±‚çš„ URL ä¸€è‡´ï¼Œå¦‚ www.xxx.com/items/idã€‚åç«¯å¦‚æœç¼ºå°‘å¯¹ /items/id çš„è·¯ç”±å¤„ç†ï¼Œå°†è¿”å› \n404 é”™è¯¯ã€‚\n\n---\n<!--more-->\n\n- æœåŠ¡å™¨é…ç½®\n1. Nginxæ–¹å¼\né‡‡ç”¨Nginxæ–¹æ¡ˆéœ€è¦å…ˆå°†æ‰€æœ‰èµ„æºæ‰“åŒ…ç”Ÿæˆåˆ°å¯¹åº”çš„ç›®å½•ï¼Œæ¯”å¦‚distï¼Œç„¶ååšå¦‚ä¸‹é…ç½®ï¼š\n```js\nserver {\n\tserver_name react.thinktxt.com;\n\tlisten 80;\n\n\troot /Users/txBoy/WEB-Project/React-Demo/dist;\n\tindex index.html;\n\tlocation / {\n    // $uri æ˜¯ nginx çš„å˜é‡ï¼Œå°±æ˜¯å½“å‰è¿™æ¬¡è¯·æ±‚çš„è·¯å¾„\n    // try_files ä¼šå°è¯•åœ¨è¿™ä¸ªè·¯å¾„ä¸‹å¯»æ‰¾èµ„æºï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œä¼šç»§ç»­æœä¸‹ä¸€ä¸ªå¯»æ‰¾\n    // $uri/ çš„æ„æ€æ˜¯åœ¨è·¯å¾„ç›®å½•ä¸‹å¯»æ‰¾ index.html æˆ– index.htm\n    // æœ€åéƒ½æ‰¾ä¸åˆ°çš„è¯ï¼Œè¿”å› index.html\n    \ttry_files $uri $uri/ /index.html;\n  }\n}\n```\n\n2. é€šè¿‡ä¿®æ”¹webpack-dev-serverè¿è¡Œæ–¹å¼\nè¿™ä¸ªè§£å†³æ–¹æ³•å¾ˆç®€å•ï¼Œç›´æ¥åœ¨è¿è¡Œæ—¶åŠ å…¥å‚æ•°â€œâ€“history-api-fallbackâ€å°±å¯ä»¥äº†\n\n3. NodeæœåŠ¡ç«¯é…ç½®\n\n```js\n// express\n//é…ç½®ä»»ä½•è¯·æ±‚éƒ½è½¬åˆ°index.htmlï¼Œè€Œindex.htmlä¼šæ ¹æ®React-Routerè§„åˆ™å»åŒ¹é…ä»»ä½•ä¸€ä¸ªroute\napp.get('*', function (request, response){\n  response.sendFile(path.resolve(__dirname, 'dist', 'index.html'))\n})\n\n// koa\nimport xtpl from 'koa-xtpl';\napp.use(xtpl({\n\troot: path.resolve(__dirname, '../dist'),\n\textname: 'html',\n\tcommands: {}\n}));\n```\nç”±äºkoaçš„è¿™ç§æ–¹å¼ç«¯å£ä¸webpack-dev-serverï¼ˆ8080ï¼‰å¿…é¡»ä¸åŒï¼Œæ‰€ä»¥è¿˜éœ€è¦é…åˆNginxä»£ç†ã€‚ä¾‹å¦‚ï¼š\n```js\nserver {\n\tserver_name react.thinktxt.com;\n\tlisten 80;\n\n\tlocation / {\n\t\tproxy_pass http://localhost:8081;\n\t}\n}\n\nserver {\n\tserver_name static.react.thinktxt.com;\n\tlisten 80;\n\n\tlocation / {\n\t\tproxy_pass http://localhost:8080;\n\t}\n}\n```\n\næ—¢ç„¶æˆ‘ä»¬çš„Nginxä»£ç†ç”¨äº†çœŸå®åŸŸåï¼Œè‡ªç„¶åˆ«å¿˜äº†ä¿®æ”¹ä¸€ä¸‹hostï¼Œå¦‚ä¸‹ï¼š\n```js\n127.0.0.1 react.thinktxt.com\n127.0.0.1 static.react.thinktxt.com\n```\n\n### hashæ¨¡å¼\n```javascript\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Document</title>\n  <style>\n    body {\n      margin: 0;\n      padding: 0;\n    }\n\n    #login, #index {\n      width: 100%;\n      height: 100%;\n      display: none;\n    }\n\n    #login {\n      background: #f5f5f5;\n      display: block;\n    }\n\n    #index {\n      background: #aaddff;\n    }\n  </style>\n</head>\n<body>\n\n<!--ç™»å½•é¡µ-->\n<div id=\"login\" class=\"component\">\n  <input type=\"button\" onclick=\"hashPush('index?id=1')\" value=\"ç™»é™†\">\n</div>\n\n<!--é¦–é¡µ-->\n<div id=\"index\" class=\"component\">\n  <input type=\"button\" onclick=\"hashPush('login?key=2',{data:'params data'})\" value=\"é€€å‡ºç™»é™†\">\n</div>\n\n</body>\n<script>\n  // å…¨å±€å˜é‡\n  var params = {}\n\n  // é¡µé¢è·³è½¬\n  function hashPush(url, param) {\n    location.hash = \"#\" + url\n\n    // è§£æurl\n    let questionIndex = url.indexOf(\"?\")\n    let path = url\n    if (questionIndex >= 0) {\n      path = url.substr(0, questionIndex)\n    }\n\n    if (param) {\n      // pathè·¯ç”±ä½œä¸ºkeyæ ‡è¯†å†…å®¹ä¼ å‚ å­˜å‚¨è·¯ç”±\n      params[path] = param \n    }\n  }\n\n  // ç›‘å¬hashçš„å˜åŠ¨\n  window.addEventListener('hashchange', function (e) {\n    // let newURL = event.newURL; // hash æ”¹å˜åçš„æ–° url\n    // let oldURL = event.oldURL; // hash æ”¹å˜å‰çš„æ—§ url\n    let url = location.hash.slice(1) || \"index\"\n    // è§£æurl\n    let questionIndex = url.indexOf(\"?\")\n    let path, query\n    if (questionIndex >= 0) {\n      // è·å–å½“å‰å˜åŒ–çš„è·¯ç”±å\n      path = url.substr(0, questionIndex)\n      // è·å–urlä¸Šçš„ä¼ å‚\n      let queryString = url.substr(questionIndex + 1)\n      let queryArray = queryString.split(\"&\")\n      let queryObject = {}\n      queryArray.map(str => {\n        let equalIndex = str.indexOf(\"=\")\n        if (equalIndex > 0) {\n          let key = str.substr(0, equalIndex)\n          let value = str.substr(equalIndex + 1)\n          queryObject[key] = value\n        }\n      })\n      query = queryObject\n    } else {\n      path = url\n      query = {}\n    }\n\n    console.log('æ¥æ”¶åˆ°urlä¼ é€’çš„å‚æ•°', query)\n    console.log('ç›´æ¥ç”¨paramsä¼ é€’çš„å‚æ•°', params[path])\n    setVisible(path)\n  })\n\n  // æ˜¾ç¤ºè·Ÿè·¯ç”±åœ°å€å¯¹åº”çš„å†…å®¹ï¼Œéšè—å…¶ä»–å†…å®¹\n  function setVisible(url) {\n    let components = Array.from(document.body.querySelectorAll(\".component\"))\n    components.map(item => {\n      if (item.id === url) {\n        // console.log('æ˜¾ç¤º',item.id)\n        item.style.display = 'block'\n      } else {\n        // console.log('éšè—',item.id)\n        item.style.display = 'none'\n      }\n    })\n  }\n</script>\n</html>\n```\n\n### historyæ¨¡å¼(éœ€è¦æœåŠ¡å™¨ç¯å¢ƒ)\n```javascript\n<html>\n<head>\n  <meta charset=\"UTF-8\">\n  <title>Document</title>\n  <style>\n    body {\n      margin: 0;\n      padding: 0;\n    }\n\n    #login, #index {\n      width: 100%;\n      height: 100%;\n      display: none;\n    }\n\n    #login {\n      background: #f5f5f5;\n      display: block;\n    }\n\n    #index {\n      background: #aaddff;\n    }\n  </style>\n</head>\n<body>\n\n<!--ç™»å½•é¡µ-->\n<div id=\"login\" class=\"component\">\n  <input type=\"button\" onclick=\"historyPush('index')\" value=\"ç™»é™†\">\n</div>\n\n<!--é¦–é¡µ-->\n<div id=\"index\" class=\"component\">\n  <input type=\"button\" onclick=\"historyPush('login',{data:'params data'})\" value=\"é€€å‡ºç™»é™†\">\n</div>\n\n</body>\n<script>\n  // å…¨å±€å˜é‡\n  var params = {}\n\n  // é¡µé¢è·³è½¬\n  function historyPush(url, param) {\n    history.pushState(param, 'æˆ‘æ˜¯é¡µé¢æ ‡é¢˜', url)\n    if (param) {\n      params[url] = param\n    }\n  }\n\n  // ç›‘å¬å‰è¿›åé€€\n  window.addEventListener('popstate', function (e) {\n    // e.state å°±æ˜¯pushState çš„æ—¶å€™ï¼Œä¼ çš„ç¬¬ä¸€ä¸ªå‚æ•°\n    let url = state.target.location.pathName\n    console.log('æ¥æ”¶åˆ°ä¼ é€’çš„å‚æ•°', e.state)\n    console.log('ç›´æ¥ç”¨paramsä¼ é€’çš„å‚æ•°', params[path])\n    setVisible(path)\n  })\n\n  // æ˜¾ç¤ºè·Ÿè·¯ç”±åœ°å€å¯¹åº”çš„å†…å®¹ï¼Œéšè—å…¶ä»–å†…å®¹\n  function setVisible(url) {\n    let components = Array.from(document.body.querySelectorAll(\".component\"))\n    components.map(item => {\n      if (item.id === url) {\n        // console.log('æ˜¾ç¤º',item.id)\n        item.style.display = 'block'\n      } else {\n        // console.log('éšè—',item.id)\n        item.style.display = 'none'\n      }\n\n    })\n  }\n</script>\n</html>\n```\n\n## å‚è€ƒèµ„æ–™\n- [å‰ç«¯è·¯ç”±è·³è½¬åŸºæœ¬åŸç†](https://juejin.im/post/5c52da9ee51d45221f242804)\n","tags":["æ•´ç†"],"categories":["çŸ¥è¯†"]},{"title":"jså‡½æ•°æŸ¯é‡ŒåŒ–","url":"%2Fjs%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96.html","content":"\n### å‡½æ•°æŸ¯é‡ŒåŒ–å®šä¹‰\n\nå‡½æ•°æŸ¯é‡ŒåŒ–ï¼ˆfunction curryingï¼‰åˆç§°éƒ¨åˆ†æ±‚å€¼ã€‚ä¸€ä¸ªcurryingçš„å‡½æ•°é¦–å…ˆä¼šæ¥å—ä¸€äº›å‚æ•°ï¼Œæ¥å—äº†è¿™äº›å‚æ•°åï¼Œ\n\nè¯¥å‡½æ•°å¹¶ä¸ä¼šç«‹å³æ±‚å€¼ï¼Œè€Œæ˜¯ç»§ç»­è¿”å›å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œåˆšæ‰ä¼ å…¥çš„å‚æ•°åœ¨å‡½æ•°å½¢æˆçš„é—­åŒ…é‡Œè¢«ä¿å­˜èµ·æ¥ã€‚å¾…åˆ°å‡½æ•°çœŸæ­£éœ€è¦æ±‚å€¼çš„æ—¶å€™ï¼Œä¹‹å‰ä¼ å…¥çš„å‚æ•°éƒ½ä¼šè¢«ä¸€æ¬¡æ€§ç”¨äºæ±‚å€¼ã€‚\n\næŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼ˆæœ€åˆå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼‰çš„å‡½æ•°ï¼Œå¹¶ä¸”è¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°è€Œä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°ã€‚\n\né¡¾åæ€ä¹‰ï¼ŒæŸ¯é‡ŒåŒ–å…¶å®æœ¬èº«æ˜¯å›ºå®šä¸€ä¸ªå¯ä»¥é¢„æœŸçš„å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªç‰¹å®šçš„å‡½æ•°ï¼Œå¤„ç†æ‰¹ç‰¹å®šçš„éœ€æ±‚ã€‚è¿™å¢åŠ äº†å‡½æ•°çš„é€‚ç”¨æ€§ï¼Œä½†åŒæ—¶ä¹Ÿé™ä½äº†å‡½æ•°çš„é€‚ç”¨èŒƒå›´ã€‚\n\n```javascript\nfunction add(x,y){\n    return x + y;\n}\n// å‡½æ•°åªä¼ å…¥ä¸€ä¸ªå‚æ•°çš„æ—¶å€™å®ç°åŠ æ³•\nfunction curry(x){\n    return function(y){\n        return x + y;\n    }\n}\nvar add2 = curry(1);\nadd2(1) // 2 å³curry(1)(1)\n```\n\n--- \n<!-- more -->\n\n### å‡½æ•°æŸ¯é‡ŒåŒ–å®è·µ\n\n```javascript\n// é€šè¿‡ä»¥ä¸Šç®€å•ä»‹ç»æˆ‘ä»¬å¤§æ¦‚äº†è§£äº†ï¼Œå‡½æ•°æŸ¯é‡ŒåŒ–åŸºæœ¬æ˜¯åœ¨åšè¿™ä¹ˆä¸€ä»¶äº‹æƒ…ï¼šåªä¼ é€’ç»™å‡½æ•°ä¸€éƒ¨åˆ†å‚æ•°æ¥è°ƒç”¨å®ƒï¼Œè®©å®ƒè¿”å›ä¸€ä¸ªå‡½æ•°å»å¤„ç†å‰©ä¸‹çš„å‚æ•°ã€‚ç”¨å…¬å¼è¡¨ç¤ºå°±æ˜¯æˆ‘ä»¬è¦åšçš„äº‹æƒ…å…¶å®æ˜¯\n\nfn(a,b,c,d)=>fn(a)(b)(c)(d)ï¼›\n\nfn(a,b,c,d)=>fn(aï¼Œb)(c)(d)ï¼›\n\nfn(a,b,c,d)=>fn(a)(bï¼Œcï¼Œd)ï¼›\n\n......\n\n// å†æˆ–è€…è¿™æ ·ï¼š\n\nfn(a,b,c,d)=>fn(a)(b)(c)(d)()ï¼›\n\nfn(a,b,c,d)=>fn(a)ï¼›fn(b)ï¼›fn(c)ï¼›fn(d)ï¼›fn()ï¼›\n```\n\n> é€šç”¨çš„å‡½æ•°æŸ¯é‡ŒåŒ–ç‰ˆæœ¬\n\n```javascript\n// è¿™é‡Œéœ€è¦ä¼ å…¥é•¿åº¦\nfunction curry(fn, length, ary) {\n    length = length || fn.length;\n    ary = ary || [];//è®°å½•æ‰€æœ‰ä¼ å…¥çš„å‚æ•°\n    var slice = Array.prototype.slice;\n    return function () {\n        if (arguments.length < length) {\n            Array.prototype.push.apply(ary, slice.call(arguments));//æ¯æ¬¡æŠŠå‚æ•°åˆå¹¶åˆ°aryæ•°ç»„ä¸­\n            return curry(fn, length - arguments.length, ary)//æŠŠè¿˜éœ€ä¼ å‚çš„é•¿åº¦å’Œå·²æœ‰å‚æ•°æ•°ç»„ä¼ å…¥curryï¼Œé€’å½’è°ƒç”¨\n        } else {\n            return fn.apply(this, ary.concat(slice.call(arguments))); //è°ƒç”¨æ±‚èŒå‡½æ•°ï¼Œè®°å¾—æŠŠæ­¤æ¬¡ä¼ å…¥çš„å‚æ•°åˆå¹¶åˆ°aryæ•°ç»„å†è®¡ç®—\n        }\n    };\n}\n\nlet total = function () {\n        let total = 0;\n        [].slice.call(arguments).forEach(item => {\n            total += item;\n        });\n        return total;\n    };\n let fn = curry(total, 4);\n fn(1)(2)(3)(4);//10\n fn(1,2)(3)(4);//10\n```\n\n```javascript\n// è¿™é‡Œæ˜¯æ— å‚æ•°æ—¶å¼€å§‹è®¡ç®—æ‰€æœ‰çš„cost\nvar currying = function(fn){\n    var args = [];\n    \n    return function(){\n        if(arguments.length === 0){\n            return fn.apply(this, args);\n        }else{\n            [].push.apply(args, arguments);\n            return arguments.callee;\n        }\n    }\n};\nvar cost = (function(){\n    var money = 0;\n    \n    return function(){\n        for(var i = 0, l = arguments.length; i < l; i++){\n            money += arguments[i];\n        }\n        return money;\n    }\n}());\n\nvar cost = currying(cost);//è½¬åŒ–ä¸ºcurryingå‡½æ•°\n\ncost(100);//æœªçœŸæ­£æ±‚å€¼\ncost(200);//æœªçœŸæ­£æ±‚å€¼\ncost(300);//æœªçœŸæ­£æ±‚å€¼\n\nconsole.log(cost());//æ±‚å€¼å¹¶è¾“å‡ºï¼š600  \n```\n\n```javascript\n// å’ŒtoString().valueOf()æ—¶è®¡ç®—å’Œæ˜¯ä¸€æ ·çš„é“ç†\nfunction add(num){\n    var _add = function(args){\n        num+=args;\n        return arguments.callee;\n    }\n    // (function foo(args){num+=args return foo;})\n    var _add =(function foo(args){num+=args; return foo;})\n    _add.toString = _add.valueOf = function(){\n        return num;\n    }\n    return _add;\n}\n```\n\n### ä¸ºäº†å‡å°‘å‡½æ•°ä¼ å‚ï¼ŒåŒæ—¶å°†ä¸€äº›å›ºå®šå‚æ•°ç§æœ‰åŒ–\n```javascript\nfunction curry(fn, args) {\n  // è·å–å‡½æ•°éœ€è¦çš„å‚æ•°é•¿åº¦\n  let length = fn.length;\n\n  args = args || [];\n\n  return function() {\n    let subArgs = args.slice(0);\n\n    // æ‹¼æ¥å¾—åˆ°ç°æœ‰çš„æ‰€æœ‰å‚æ•°\n    for (let i = 0; i < arguments.length; i++) {\n      subArgs.push(arguments[i]);\n    }\n\n    // åˆ¤æ–­å‚æ•°çš„é•¿åº¦æ˜¯å¦å·²ç»æ»¡è¶³å‡½æ•°æ‰€éœ€å‚æ•°çš„é•¿åº¦\n    if (subArgs.length >= length) {\n      // å¦‚æœæ»¡è¶³ï¼Œæ‰§è¡Œå‡½æ•°\n      return fn.apply(this, subArgs);\n    } else {\n      // å¦‚æœä¸æ»¡è¶³ï¼Œé€’å½’è¿”å›ç§‘é‡ŒåŒ–çš„å‡½æ•°ï¼Œç­‰å¾…å‚æ•°çš„ä¼ å…¥\n      return curry.call(this, fn, subArgs);\n    }\n  };\n}\n```\n\n```js\n// es6å®ç°\nfunction curry(fn, ...args) {\n  return fn.length <= args.length ? fn(...args) : curry.bind(null, fn, ...args);\n}\n```\n\n### å‡½æ•°æŸ¯é‡ŒåŒ–çš„ä¼˜ç‚¹\n1. å»¶è¿Ÿè®¡ç®— \nå¯ä»¥ä¼ é€’éœ€è¦çš„å‚æ•°ï¼Œç­‰åˆ°ä½•æ—¶æƒ³è¦ç»“æœï¼Œå†ä¸€å¹¶è®¡ç®—ã€‚\n\n2. å‚æ•°å¤ç”¨ \næœ‰äº›å‚æ•°ç›¸åŒï¼Œåªéœ€è¦ä¼ é€’ä¸€éå³å¯ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½ä¼ ï¼Œå¤ªç¹çã€‚\n","tags":["æ•´ç†"],"categories":["çŸ¥è¯†"]},{"title":"ä¸ºä»€ä¹ˆreactå’Œimmutableæˆä¸ºäº†å¥½åŸºå‹","url":"%2F%E4%B8%BA%E4%BB%80%E4%B9%88react%E5%92%8Cimmutable%E6%88%90%E4%B8%BA%E4%BA%86%E5%A5%BD%E5%9F%BA%E5%8F%8B.html","content":"\nå·¥ä½œä¸­ï¼ŒReactç¤¾åŒºæ¨å´‡æ­é…ä¸€èµ·ä½¿ç”¨Immutableï¼Œå°±åƒå’–å•¡ç‰›å¥¶ä¼´ä¾£ä¸€æ ·ã€‚ä¼—æ‰€å‘¨çŸ¥Reactçš„æ€§èƒ½ä¼˜åŒ–æˆ‘ä»¬å¯ä»¥ä¼˜åŒ–ç»„ä»¶çš„åµŒå¥—å±‚çº§ï¼Œ\n\né¿å…ä¸å¿…è¦çš„é‡ç»˜ï¼Œä»¥åŠshouldComponentUpdateæ¥åˆ¤åˆ«ç»„ä»¶æ˜¯å¦ä¼šå› ä¸ºå½“å‰å±æ€§(props)å’ŒçŠ¶æ€(state)å˜åŒ–è€Œå¯¼è‡´ç»„ä»¶è¾“å‡ºå˜åŒ–ã€‚\n\nä¸€æåˆ°Reactï¼Œå¤§å®¶ç¬¬ä¸€æ—¶é—´å°±æƒ³åˆ°çš„è™šæ‹ŸDOM(Virtual DOM)å’Œä¼´éšå…¶å¸¦æ¥çš„é«˜æ€§èƒ½ï¼ˆåœ¨è™šæ‹Ÿdomä¸Šè¿›è¡ŒèŠ‚ç‚¹çš„æ›´æ”¹æœ€ååœ¨åæ˜ åˆ°çœŸå®domä¸Šï¼‰ã€‚\n\nä½†æ˜¯Reactæä¾›çš„æ˜¯å£°æ˜å¼çš„API(declarative API),å¥½çš„ä¸€æ–¹é¢æ˜¯è®©æˆ‘ä»¬ç¼–å†™ç¨‹åºæ›´åŠ æ–¹ä¾¿ï¼Œä½†å¦ä¸€æ–¹é¢ï¼Œå´ä½¿å¾—æˆ‘ä»¬ä¸å¤ªäº†è§£å†…éƒ¨ç»†èŠ‚ã€‚\n\n--- \n<!-- more -->\n\n### ä¸€è‡´åŒ–å¤„ç†(Reconciliation)\nReacté‡‡ç”¨çš„æ˜¯è™šæ‹ŸDOMï¼Œæ¯æ¬¡å±æ€§(props)å’ŒçŠ¶æ€(state)å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œrenderå‡½æ•°è¿”å›ä¸åŒçš„å…ƒç´ æ ‘ï¼Œ\n\nReactä¼šæ£€æµ‹å½“å‰è¿”å›çš„å…ƒç´ æ ‘å’Œä¸Šæ¬¡æ¸²æŸ“çš„å…ƒç´ æ ‘ä¹‹å‰çš„å·®å¼‚ï¼Œç„¶åæ‰¾å‡ºä½•å¦‚é«˜æ•ˆçš„æ›´æ–°UIã€‚å³renderå°±æ‰§è¡Œdiffå·®å¼‚å†è¿›è¡Œé‡ç»˜ã€‚\n\n### shouldComponentUpdate\né»˜è®¤çš„shouldComponentUpdateä¼šåœ¨propså’Œstateå‘ç”Ÿå˜åŒ–æ—¶è¿”å›true,è¡¨ç¤ºç»„ä»¶ä¼šé‡æ–°æ¸²æŸ“ï¼Œä»è€Œè°ƒç”¨renderå‡½æ•°ã€‚\n\nå½“ç„¶äº†åœ¨é¦–æ¬¡æ¸²æŸ“çš„æ—¶å€™å’Œä½¿ç”¨forceUpdateçš„æ—¶å€™ï¼Œæ˜¯ä¸ä¼šç»è¿‡shouldComponentUpdateåˆ¤æ–­ã€‚\n\nåˆç†åœ°ç¼–å†™shouldComponentUpdateå‡½æ•°ï¼Œä»è€Œèƒ½é¿å…ä¸å¿…è¦çš„ä¸€è‡´åŒ–å¤„ç†ï¼Œä½¿å¾—æ€§èƒ½å¯ä»¥æå¤§æé«˜ã€‚ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡\n\nç»§æ‰¿React.PureComponentæˆ–è€…é€šè¿‡å¼•å…¥PureRenderMixinæ¨¡å—æ¥è¾¾åˆ°ç›®çš„ã€‚ä½†æ˜¯è¿™ä¹Ÿå­˜åœ¨ä¸€ä¸ªé—®é¢˜:\n\n```javascript\n// å­ç»„ä»¶ç»§æ‰¿PureComponentåªä¼šè¿›è¡Œæµ…æ¯”è¾ƒ\nclass ListOfWords extends React.PureComponent {\n  render() {\n    return <div>{this.props.words.join(',')}</div>;\n  }\n}\n\nclass WordAdder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      words: ['marklar'] // å¤æ‚ç±»å‹\n    };\n    this.handleClick = this.handleClick.bind(this);\n  }\n\n  handleClick() {\n    // å½“è§¦å‘ç‚¹å‡»é¡µé¢å¹¶æ²¡æœ‰è¿›è¡Œé‡æ–°æ¸²æŸ“\n    const words = this.state.words;\n    words.push('marklar');\n    this.setState({words: words});\n  }\n\n  render() {\n    return (\n      <div>\n        <button onClick={this.handleClick} />\n        <ListOfWords words={this.state.words} />\n      </div>\n    );\n  }\n}\n```\n> å…±äº«çš„å¯å˜çŠ¶æ€æ˜¯ä¸‡æ¶ä¹‹æº\n\nJavaScript ä¸­çš„å¯¹è±¡ä¸€èˆ¬æ˜¯å¯å˜çš„ï¼ˆMutableï¼‰ï¼Œå› ä¸ºä½¿ç”¨äº†å¼•ç”¨èµ‹å€¼ï¼Œæ–°çš„å¯¹è±¡ç®€å•çš„å¼•ç”¨äº†åŸå§‹å¯¹è±¡ï¼Œæ”¹å˜æ–°çš„å¯¹è±¡å°†å½±å“åˆ°åŸå§‹å¯¹è±¡ã€‚\n\nå¦‚ foo={a: 1}; bar=foo; bar.a=2 ä½ ä¼šå‘ç°æ­¤æ—¶ foo.a ä¹Ÿè¢«æ”¹æˆäº† 2ã€‚\n\nè™½ç„¶è¿™æ ·åšå¯ä»¥èŠ‚çº¦å†…å­˜ï¼Œä½†å½“åº”ç”¨å¤æ‚åï¼Œè¿™å°±é€ æˆäº†éå¸¸å¤§çš„éšæ‚£ï¼ŒMutable å¸¦æ¥çš„ä¼˜ç‚¹å˜å¾—å¾—ä¸å¿å¤±ã€‚\n\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€èˆ¬çš„åšæ³•æ˜¯ä½¿ç”¨ shallowCopyï¼ˆæµ…æ‹·è´ï¼‰æˆ– deepCopyï¼ˆæ·±æ‹·è´ï¼‰æ¥é¿å…è¢«ä¿®æ”¹ï¼Œä½†è¿™æ ·åšé€ æˆäº† CPU å’Œå†…å­˜çš„æµªè´¹ã€‚\n\nImmutable å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™äº›é—®é¢˜ã€‚\n\n\n### Immutable Data\n\nImmutable Data å°±æ˜¯ä¸€æ—¦åˆ›å»ºï¼Œå°±ä¸èƒ½å†è¢«æ›´æ”¹çš„æ•°æ®ã€‚å¯¹ Immutable å¯¹è±¡çš„ä»»ä½•ä¿®æ”¹æˆ–æ·»åŠ åˆ é™¤æ“ä½œéƒ½ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Immutable å¯¹è±¡ã€‚\n\nImmutable å®ç°çš„åŸç†æ˜¯ Persistent Data Structureï¼ˆæŒä¹…åŒ–æ•°æ®ç»“æ„ï¼‰ï¼Œ\n\nä¹Ÿå°±æ˜¯ä½¿ç”¨æ—§æ•°æ®åˆ›å»ºæ–°æ•°æ®æ—¶ï¼Œè¦ä¿è¯æ—§æ•°æ®åŒæ—¶å¯ç”¨ä¸”ä¸å˜ã€‚åŒæ—¶ä¸ºäº†é¿å… deepCopy æŠŠæ‰€æœ‰èŠ‚ç‚¹éƒ½å¤åˆ¶ä¸€éå¸¦æ¥çš„æ€§èƒ½æŸè€—ï¼Œ\n\nImmutable ä½¿ç”¨äº† Structural Sharingï¼ˆç»“æ„å…±äº«ï¼‰ï¼Œå³å¦‚æœå¯¹è±¡æ ‘ä¸­ä¸€ä¸ªèŠ‚ç‚¹å‘ç”Ÿå˜åŒ–ï¼Œåªä¿®æ”¹è¿™ä¸ªèŠ‚ç‚¹å’Œå—å®ƒå½±å“çš„çˆ¶èŠ‚ç‚¹ï¼Œå…¶å®ƒèŠ‚ç‚¹åˆ™è¿›è¡Œå…±äº«ã€‚\n\n> Mapï¼šé”®å€¼å¯¹é›†åˆï¼Œå¯¹åº”äº Objectï¼ŒES6 ä¹Ÿæœ‰ä¸“é—¨çš„ Map å¯¹è±¡\n\n> Listï¼šæœ‰åºå¯é‡å¤çš„åˆ—è¡¨ï¼Œå¯¹åº”äº Array\n\n> Setï¼šæ— åºä¸”ä¸å¯é‡å¤çš„åˆ—è¡¨\n\næ¯”è¾ƒä¸¤ä¸ªImmutableå¯¹è±¡æ˜¯å¦ç›¸åŒï¼Œåªéœ€è¦ä½¿ç”¨===å°±å¯ä»¥è½»æ¾åˆ¤åˆ«ã€‚å› æ­¤å¦‚æœReactä¼ å…¥çš„æ•°æ®æ˜¯Immutable Data,é‚£ä¹ˆReactå°±èƒ½é«˜æ•ˆåœ°æ¯”è¾ƒå‰åå±æ€§çš„å˜åŒ–ï¼Œä»è€Œå†³å®šshouldComponentUpdateçš„è¿”å›å€¼ã€‚\n\n```javascript\n// åŸæ¥çš„å†™æ³•\nlet foo = {a: {b: 1}};\nlet bar = foo;\nbar.a.b = 2;\nconsole.log(foo.a.b);  // æ‰“å° 2\nconsole.log(foo === bar);  //  æ‰“å° true\n\n// ä½¿ç”¨ immutable.js å\nimport Immutable from 'immutable';\nfoo = Immutable.fromJS({a: {b: 1}});\nbar = foo.setIn(['a', 'b'], 2);   // ä½¿ç”¨ setIn èµ‹å€¼\nconsole.log(foo.getIn(['a', 'b']));  // ä½¿ç”¨ getIn å–å€¼ï¼Œæ‰“å° 1\nconsole.log(foo === bar);  //  æ‰“å° false\n\n// ä½¿ç”¨  seamless-immutable.js å\nimport SImmutable from 'seamless-immutable';\nfoo = SImmutable({a: {b: 1}})\nbar = foo.merge({a: { b: 2}})   // ä½¿ç”¨ merge èµ‹å€¼\nconsole.log(foo.a.b);  // åƒåŸç”Ÿ Object ä¸€æ ·å–å€¼ï¼Œæ‰“å° 1\nconsole.log(foo === bar);  //  æ‰“å° false\n```\n\n#### Immutable-advantage\n1. Immutable é™ä½äº† Mutable å¸¦æ¥çš„å¤æ‚åº¦\n```javascript\nfunction touchAndLog(touchFn) {\n  let data = { key: 'value' };\n  touchFn(data);\n  console.log(data.key);\n}\n```\nåœ¨ä¸äº†è§£touchFnå‡½æ•°çš„ä»£ç çš„æƒ…å†µä¸‹ï¼Œä¸çŸ¥é“æ˜¯å¦å¯¹dataè¿›è¡Œäº†ä¿®æ”¹ã€‚è€Œå¦‚æœdataä¸ºImmutableå¯¹è±¡ä¸€åˆ‡éƒ½ç®€å•äº†ï¼Œä¼šæ‰“å°valueã€‚\n\n2. èŠ‚çœå†…å­˜\nImmutable.js ä½¿ç”¨äº† Structure Sharing ï¼ˆç»“æ„å…±äº«ï¼‰ä¼šå°½é‡å¤ç”¨å†…å­˜ï¼Œç”šè‡³ä»¥å‰ä½¿ç”¨çš„å¯¹è±¡ä¹Ÿå¯ä»¥å†æ¬¡è¢«å¤ç”¨ã€‚æ²¡æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡ä¼šè¢«åƒåœ¾å›æ”¶ã€‚\n\n```javascript\nimport { Map } from 'immutable';\nlet a = Map({\n  select: 'users',\n  filter: Map({ name: 'Cam' })\n})\nlet b = a.set('select', 'people');\n\na === b; // false\na.get('filter') === b.get('filter'); // true\n// ä¸Šé¢ a å’Œ b å…±äº«äº†æ²¡æœ‰å˜åŒ–çš„ filter èŠ‚ç‚¹ã€‚\n```\n\n3. Undo/Redoï¼ŒCopy/Pasteï¼Œæ—¶é—´æ—…è¡Œç­‰åŠŸèƒ½\n\n4. å¹¶å‘å®‰å…¨\n\n5. å‡½æ•°å¼ç¼–ç¨‹\n\n#### Immutable-disadvantage\n1. éœ€è¦ç†Ÿæ‚‰æ–°çš„api\n\n2. å¼•å…¥æ–°çš„åº“æœ‰å¤§å°\n\n3. æ€ç»´çš„å˜åŒ–\nImmutable ä¸­çš„ Map å’Œ List è™½å¯¹åº”åŸç”Ÿ Object å’Œ Arrayï¼Œä½†æ“ä½œéå¸¸ä¸åŒï¼Œæ¯”å¦‚ä½ è¦ç”¨ map.get('key')è€Œä¸æ˜¯ map.keyï¼Œarray.get(0) è€Œä¸æ˜¯ array[0]ã€‚\n\nä¸‹é¢ç»™å‡ºä¸€äº›åŠæ³•æ¥é¿å…ç±»ä¼¼é—®é¢˜å‘ç”Ÿï¼š\n\n> ä½¿ç”¨ Flow æˆ– TypeScript è¿™ç±»æœ‰é™æ€ç±»å‹æ£€æŸ¥çš„å·¥å…·\n> çº¦å®šå˜é‡å‘½åè§„åˆ™ï¼šå¦‚æ‰€æœ‰ Immutable ç±»å‹å¯¹è±¡ä»¥ $$ å¼€å¤´ã€‚\n> ä½¿ç”¨ Immutable.fromJS è€Œä¸æ˜¯ Immutable.Map æˆ– Immutable.List æ¥åˆ›å»ºå¯¹è±¡ï¼Œè¿™æ ·å¯ä»¥é¿å… Immutable å’ŒåŸç”Ÿå¯¹è±¡é—´çš„æ··ç”¨ã€‚\n\nå¦å¤– Immutable æ¯æ¬¡ä¿®æ”¹éƒ½ä¼šè¿”å›æ–°å¯¹è±¡ï¼Œä¹Ÿå¾ˆå®¹æ˜“å¿˜è®°èµ‹å€¼ã€‚\n\n#### ä¸¤ä¸ªImmutableå¯¹è±¡çš„æ¯”è¾ƒ\n1. === å…¨ç­‰æ¯”è¾ƒå†…å­˜åœ°å€æ€§èƒ½æœ€å¥½\n\n2. Immutable.is() è¿›è¡Œå€¼æ¯”è¾ƒ\n\nImmutable.is æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå¯¹è±¡çš„ hashCode æˆ– valueOfï¼ˆå¯¹äº JavaScript å¯¹è±¡ï¼‰ã€‚\n\nç”±äº immutable å†…éƒ¨ä½¿ç”¨äº† Trie æ•°æ®ç»“æ„æ¥å­˜å‚¨ï¼Œåªè¦ä¸¤ä¸ªå¯¹è±¡çš„ hashCode ç›¸ç­‰ï¼Œå€¼å°±æ˜¯ä¸€æ ·çš„ã€‚è¿™æ ·çš„ç®—æ³•é¿å…äº†æ·±åº¦éå†æ¯”è¾ƒï¼Œæ€§èƒ½éå¸¸å¥½ã€‚\n\n```javascript\nlet a = Immutable.Map({aï¼š1})\nlet b = Immutable.Map({aï¼š1})\na === b // false \nImmutable.is(a,b) // true \n// Object.defineProperty() // IE9\n```\n#### ä¸ Object.freezeã€const åŒºåˆ«\nObject.freeze å’Œ ES6 ä¸­æ–°åŠ å…¥çš„ const éƒ½å¯ä»¥è¾¾åˆ°é˜²æ­¢å¯¹è±¡è¢«ç¯¡æ”¹çš„åŠŸèƒ½ï¼Œä½†å®ƒä»¬æ˜¯ shallowCopy çš„ã€‚å¯¹è±¡å±‚çº§ä¸€æ·±å°±è¦ç‰¹æ®Šå¤„ç†äº†ã€‚æ€ªä¸å¾—å¸¸é‡constå¤æ‚ç±»å‹å°±ä¸è¡Œäº†ï¼Œç›´æ¥å›ç­”æµ…æ‹·è´ã€‚\n\n\n#### reactä¸­ä½¿ç”¨\n```javascript\nimport { is } from 'immutable';\n\nshouldComponentUpdate: (nextProps = {}, nextState = {}) => {\n  const thisProps = this.props || {}, thisState = this.state || {};\n  // ä¸æ¸…æ¥šå±‚çº§ ç›´æ¥æ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡\n  if (Object.keys(thisProps).length !== Object.keys(nextProps).length ||\n      Object.keys(thisState).length !== Object.keys(nextState).length) {\n      return true;\n  }\n\n  for (const key in nextProps) {\n    if (!is(thisProps[key], nextProps[key])) {\n      return true;\n    }\n  }\n\n  for (const key in nextState) {\n    if (thisState[key] !== nextState[key] || !is(thisState[key], nextState[key])) {\n      return true;\n    }\n  }\n  return false;\n}\n```\n\n```javascript\nfunction diff(obj1,obj2){\n    var o1 = obj1 instanceof Object;\n    var o2 = obj2 instanceof Object;\n    if(!o1 || !o2){/*  åˆ¤æ–­ä¸æ˜¯å¯¹è±¡  */\n        return obj1 === obj2;\n    }\n\n    if(Object.keys(obj1).length !== Object.keys(obj2).length){\n        return false;\n        //Object.keys() è¿”å›ä¸€ä¸ªç”±å¯¹è±¡çš„è‡ªèº«å¯æšä¸¾å±æ€§(keyå€¼)ç»„æˆçš„æ•°ç»„,ä¾‹å¦‚ï¼šæ•°ç»„è¿”å›ä¸‹è¡¨ï¼šlet arr = [\"a\", \"b\", \"c\"];console.log(Object.keys(arr))->0,1,2;\n        //å³Object.keysåªé€‚ç”¨äºå¯æšä¸¾çš„å±æ€§ï¼Œè€ŒObject.getOwnPropertyNamesè¿”å›å¯¹è±¡è‡ªåŠ¨çš„å…¨éƒ¨å±æ€§åç§°ã€‚\n    }\n\n    for(var attr in obj1){\n        var t1 = obj1[attr] instanceof Object;\n        var t2 = obj2[attr] instanceof Object;\n        if(t1 && t2){\n            return diff(obj1[attr],obj2[attr]);\n        }else if(obj1[attr] !== obj2[attr]){\n            return false;\n        }\n    }\n    return true;\n}\n```\n\n```javascript\nimport '_' from 'lodash';\n\nconst Component = React.createClass({\n  getInitialState() {\n    return {\n      data: { times: 0 }\n    }\n  },\n  handleAdd() {\n    let data = _.cloneDeep(this.state.data);\n    data.times = data.times + 1;\n    this.setState({ data: data });\n    // å¦‚æœä¸Šé¢ä¸åš cloneDeepï¼Œä¸‹é¢æ‰“å°çš„ç»“æœä¼šæ˜¯å·²ç»åŠ  1 åçš„å€¼ã€‚let data = this.state.data æŒ‡å‘åŒä¸€å†…å­˜åœ°å€\n    console.log(this.state.data.times);\n  }\n}\n\nä½¿ç”¨ Immutable åï¼š\n\n  getInitialState() {\n    return {\n      data: Map({ times: 0 })\n    }\n  },\n  handleAdd() {\n    this.setState({ data: this.state.data.update('times', v => v + 1) });\n    // è¿™æ—¶çš„ times å¹¶ä¸ä¼šæ”¹å˜\n    console.log(this.state.data.get('times'));\n  }\nä¸Šé¢çš„ handleAdd å¯ä»¥ç®€å†™æˆï¼š\n\n  handleAdd() {\n    this.setState(({data}) => ({\n      data: data.update('times', v => v + 1) })\n    });\n  }\n```\n\n#### å¸¸ç”¨api\n```javascript\n// å£°æ˜\nImmutable.Map({a:1})\nImmutable.Map([1,2])\n\n// åŸç”Ÿjsè½¬æ¢ä¸ºimmutable data\nImmutable.fromJS({a:1}) // immutableçš„ map\n\nImmutable.fromJS([1,2]) // immutableçš„ list\n\n// ä»immutableData å›åˆ° JavaScript å¯¹è±¡\nimmutableData.toJS()\n\n// åˆ¤æ–­ä¸¤ä¸ªimmutableæ•°æ®æ˜¯å¦ä¸€è‡´\nImmutable.is(immutableA, immutableB)\n\n// åˆ¤æ–­æ˜¯ä¸æ˜¯mapæˆ–List\nImmutable.Map.isMap(x)\n\nImmutable.List.isList(x)\n\n// å¯¹è±¡åˆå¹¶(æ³¨æ„æ˜¯åŒä¸ªç±»å‹)\nimmutableMaB = immutableMapA.merge(immutableMaC)\n\n// Mapçš„å¢åˆ æ”¹æŸ¥\nimmutableData.get('a') // {a:1} å¾—åˆ°1ã€‚\n\nimmutableData.getIn(['a', 'b']) // {a:{b:2}} å¾—åˆ°2ã€‚è®¿é—®æ·±å±‚æ¬¡çš„key\n\n// å¢å’Œæ”¹(æ³¨æ„ä¸ä¼šæ”¹å˜åŸæ¥çš„å€¼ï¼Œè¿”å›æ–°çš„å€¼åŸæœ‰çš„åŸºç¡€ä¸Šæ‰©å±•å‡ºåˆ†æ”¯)\nimmutableData.set('a', 2) // {a:1} å¾—åˆ°1ã€‚\n\nimmutableData.setIn(['a', 'b'], 3)\n\nimmutableData.update('a',function(x){return x+1})\n\nimmutableData.updateIn(['a', 'b'],function(x){return x+1})\n\n// åˆ \nimmutableData.delete('a')\n\nimmutableData.deleteIn(['a', 'b'])\n\n// Listçš„å¢åˆ æŸ¥æ”¹å¦‚åŒMapï¼Œä¸è¿‡å‚æ•°å˜ä¸ºæ•°å­—ç´¢å¼•ã€‚æ¯”å¦‚immutableList.set(1, 2)\n```\n\nå½“ç„¶è¿˜æœ‰ç°åœ¨ç«çƒ­çš„immer.jsï¼Œunstatedäº†è§£ä¸€ä¸‹@_@\n\n[å‚è€ƒæ–‡ç« ](https://www.cnblogs.com/3body/p/6224010.html)","tags":["react"],"categories":["JS"]},{"title":"\\[1,2,3\\]æ˜¯JSONå—ï¼Ÿ","url":"%2F%5B1%2C2%2C3%5D%E6%98%AFJSON%E5%90%97%EF%BC%9F.html","content":"\nA: â€œè¿™ä¸ªæ¥å£æˆ‘ä¼ ä¸ª JSON ç»™ä½ ï¼Œæ ¼å¼æ˜¯è¿™æ ·çš„ '[1, 2, 3]'â€\n\nB: â€œç­‰ä¸‹ï¼Œè¿™ä¸æ˜¯æ•°ç»„å—ï¼ŒJSON åº”è¯¥æœ‰é”®å•Šï¼Œç±»ä¼¼è¿™æ ·æ‰è¡Œ'{ \"key\": [1, 2, 3] }'â€\n\nA: â€œä¸ï¼Œè¿™å°±æ˜¯ JSON æ ¼å¼çš„æ•°æ®â€\n\nB: â€œå•Šï¼Œæ˜¯å—ï¼Ÿâ€\nä½ æ˜¯å¦ä¹Ÿæœ‰è¿™æ ·çš„ç–‘æƒ‘ï¼Ÿ wappalyzer chromeç½‘é¡µåˆ†ææ’ä»¶\n\n--- \n<!-- more -->\n\n## ä»€ä¹ˆæ˜¯JSON\n\n**JSON(JavaScript Object Notation) æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚**\n\nå®ƒä»…ä»…æ˜¯ä¸€ç§æ ¼å¼ï¼Œå°±å¥½æ¯”å¨å¸ˆè„‘ä¸­çš„é£Ÿè°±ï¼Œè¿™é“èœæœ‰ä»€ä¹ˆææ–™ã€‚è€Œä»åŸææ–™å˜æˆæˆå“ç»™é¡¾å®¢é£Ÿç”¨ï¼Œè¿™ä¸ªè¿‡ç¨‹é£Ÿè°±å¹¶æ²¡æœ‰å®é™…å‚ä¸ï¼Œåªæ˜¯ä¸€ä¸ªæŒ‡å¯¼ä½œç”¨ã€‚\n\næ‰€ä»¥JSONä¹Ÿæ˜¯ä¸å­˜åœ¨äºæˆ‘ä»¬çš„ç¨‹åºä¸­ï¼Œä¸å­˜åœ¨ä»»ä½•åœ°æ–¹ï¼Œåªæ˜¯ä¸€ä¸ªæ€ç»´ï¼Œå­˜åœ¨æˆ‘ä»¬è„‘æµ·é‡Œã€‚\n\nè¿™ä¸ªæ€ç»´ï¼Œå°±æ˜¯JSONè¿™ç§æ ¼å¼åº”è¯¥åŒ…å«å“ªäº›å…ƒç´ ã€‚\n\n- â€œåç§°/å€¼â€å¯¹çš„é›†åˆ\n- å€¼çš„æœ‰åºåˆ—è¡¨\n\n> æ‰€ä»¥\"[1,2,3]\"æ˜¯ç¬¦åˆJSONæ ¼å¼çš„æ•°æ®ç»“æ„çš„\n\n> ä½†ä¸èƒ½è¯´[1, 2, 3]æ˜¯ä¸€ä¸ªJSONï¼Œå®ƒåœ¨javascriptä¸­å¯ä»¥è¢«è½¬æ¢ä¸ºæ•°ç»„ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–è¯­è¨€ä¸­è¢«è½¬æ¢ä¸ºæ•°ç»„ï¼ˆå¦‚æœæœ‰è¿™ç§ç±»å‹ï¼‰ã€‚è€Œä¹‹æ‰€ä»¥åªæœ‰è¿™ä¸¤ç§ï¼Œæ˜¯å› ä¸ºå¤§éƒ¨åˆ†ç°ä»£è®¡ç®—æœºè¯­è¨€éƒ½æ”¯æŒã€‚\né‚£[1, 2, undefined, 3]ç¬¦åˆJSONæ ¼å¼å—ï¼Ÿ\n> â€œæ—¢ç„¶ç»“æ„è¦æ˜¯è®¡ç®—æœºè¯­è¨€éƒ½æ”¯æŒçš„ï¼Œé‚£ç»“æ„ä¸­çš„å€¼ä¹Ÿéœ€è¦å§ï¼Œè€Œundefinedæ˜¯javascriptç‹¬æœ‰çš„ï¼Œå…¶ä»–è¯­è¨€å¹¶æ²¡æœ‰ï¼Œæ‰€ä»¥ä¸ç¬¦åˆJSONæ ¼å¼ã€‚â€\n\nåˆæ³•çš„JSONå€¼æœ‰ä»¥ä¸‹6ç§\n- string\n- number\n- boolean\n- null\n- object\n- array\n\n```javascript\n{\n    \"person\": {\n        \"name\": \"cosyer\",\n        \"age\": 18,\n        \"skills\": [\"javascript\", \"html\", \"css\"]\n    },\n    \"happy\": true\n}\n```\n\n## JSä¸­çš„JSON\nåœ¨JavaScriptä¸­ï¼Œå¦‚æœåœ¨è¯·æ±‚æ¥å£æ—¶è¦ä¼ é€’æ•°æ®ï¼Œæˆ‘ä»¬å¾€å¾€ä¼šè¯´â€œä¼ ä¸€ä¸ªJSONâ€ï¼Œä»ä¸Šé¢å·²ç»çŸ¥é“JSONåªæ˜¯ä¸€ä¸ªæ ¼å¼ï¼Œé‚£æˆ‘ä»¬ä¼ é€’çš„åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ\n\n```javascript\n// ä¸€ä¸ªç®€å•çš„ post è¯·æ±‚\nconst body = {\n    name: 'cosyer',\n    age: 18\n};\n\nfetch('https://easy-mock.com/mock/5a1d30028e6ddb24964c2d91/business/api/login', {\n    method: 'POST',\n    body,\n})\n    .then((res) => res.json())\n    .then((data) => {\n        console.log(data);\n    });\n```\n\n> ä½†å®é™…ä¸Šå¹¶æ²¡æœ‰å°†å‚æ•°ä¼ é€’è¿‡å»ï¼Œå³Headersä¸­å¹¶ä¸å­˜åœ¨Request Payloadï¼Œéœ€è¦å°†bodyä½¿ç”¨JSON.stringify()æ–¹æ³•è½¬æ¢ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²åï¼Œæ‰èƒ½æˆåŠŸä¼ é€’ã€‚\nbody:JSON.stringify(body) or '{\"name\": 'cosyer',\"age\": 18}'\n\nä½†ä¸¤è€…è¿˜æ˜¯æœ‰åŒºåˆ«çš„\n\n```javascript\nconst body = {\n    name: 'cosyer',\n    skills: undefined,\n};\nconsole.log(JSON.stringify(body)); // {\"name\":\"cosyer\"}\n```\n\n```javascript\nconst body = {\n    name: 'cosyer',\n    skills: [undefined],\n};\nconsole.log(JSON.stringify(body)); // {\"name\":\"cosyer\",\"skills\":[null]}ã€‚\n```\n\n### JSON.parse\n> JSON.parse() æ–¹æ³•ç”¨æ¥è§£æJSONå­—ç¬¦ä¸²ï¼Œæ„é€ ç”±å­—ç¬¦ä¸²æè¿°çš„JavaScriptå€¼æˆ–å¯¹è±¡ã€‚\n> å¯ä»¥ç”¨æ¥åˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆJSONæ ¼å¼\n\n### å’ŒXMLçš„åŒºåˆ«\n- æ•°æ®ä½“ç§¯æ–¹é¢\nJSONç›¸å¯¹äºXMLæ¥è®²ï¼Œæ•°æ®çš„ä½“ç§¯å°ï¼Œä¼ é€’çš„é€Ÿåº¦æ›´å¿«äº›ã€‚\n- æ•°æ®äº¤äº’æ–¹é¢\nJSONä¸JavaScriptçš„äº¤äº’æ›´åŠ æ–¹ä¾¿ï¼Œæ›´å®¹æ˜“è§£æå¤„ç†ï¼Œæ›´å¥½çš„æ•°æ®äº¤äº’\n- æ•°æ®æè¿°æ–¹é¢\nJSONå¯¹æ•°æ®çš„æè¿°æ€§æ¯”XMLè¾ƒå·®\n- ä¼ è¾“é€Ÿåº¦æ–¹é¢\nJSONçš„é€Ÿåº¦è¦è¿œè¿œå¿«äºXML\n\n## æ€»ç»“\n\nJSONæ˜¯æ—¥å¸¸å¼€å‘ä¸­æœ€å¸¸ä½¿ç”¨çš„ï¼Œä½†ä»…é™äºâ€œä¼šç”¨â€ï¼Œå®é™…ä¸ŠJSONçš„ç”¨é€”å·²ç»ä¸å±€é™åœ¨â€œæ•°æ®äº¤æ¢â€ï¼ŒNoSQLã€é…ç½®æ–‡ä»¶ä¹Ÿæœ‰JSONçš„èº«å½±ï¼Œæ·±å…¥äº†è§£æ˜¯æœ‰å¿…è¦çš„ï¼Œæ¯•ç«Ÿçœ‹èµ·æ¥è¿™ä¹ˆâ€œç®€å•â€ã€‚","tags":["çŸ¥è¯†"],"categories":["çŸ¥è¯†"]},{"title":"java -jarä¸nohup","url":"%2Fjava%20-jar%E4%B8%8Enohup.html","content":"\njavaç¨‹åºå‘˜ï¼Œç»å¸¸ä¼šé‡åˆ°è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œæ‰“ä¸ªjaråŒ…ï¼Œæµ‹è¯•æˆ–è€…ä¸Šçº¿ç”Ÿäº§ï¼Œäºæ˜¯ä¹é¢ä¸´çš„é€‰æ‹©æ¥äº†ï¼Œjava â€“jar or nohupï¼Ÿ\nä¸‹é¢æˆ‘æ¥æ‰’ä¸€æ‰’ï¼š\n\n## java -jar a.jar &\nç›´æ¥å¯åŠ¨jaræ–‡ä»¶ï¼Œåœ¨å½“å‰ä¼šè¯è¿›ç¨‹ä¸­å¼€å¯ä¸€ä¸ªå­è¿›ç¨‹æ¥è¿è¡Œç¨‹åºï¼Œè¿™ä¸ªå­è¿›ç¨‹ä¼šéšç€ä¼šè¯è¿›ç¨‹çš„ç»“æŸè€Œç»“æŸã€‚\n\nè¿™ç§æƒ…å†µé€‚åˆçŸ­æ—¶é—´æµ‹è¯•ç”¨ã€‚\n\n## nohup java -jar a.jar &\nhangup ï¼š(æŒ‚æ–­)ï¼Œç»ˆç«¯é€€å‡ºæ—¶ä¼šå‘é€ hangup ä¿¡å·æ¥é€šçŸ¥å…¶å…³é—­æ‰€æœ‰å­è¿›ç¨‹ã€‚\n\nnohup ï¼š(ä¸æŒ‚æ–­ï¼Œå¿½ç•¥æŒ‚æ–­ä¿¡å·)ã€‚\n\nnohup çš„ä½¿ç”¨æ˜¯ååˆ†æ–¹ä¾¿çš„ï¼Œåªéœ€åœ¨è¦å¤„ç†çš„å‘½ä»¤å‰åŠ ä¸Š nohup å³å¯ï¼Œæ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯ç¼ºçœä¼šè¢«é‡å®šå‘åˆ° nohup.out æ–‡ä»¶ä¸­ã€‚ä¸€èˆ¬æˆ‘ä»¬å¯åœ¨ç»“å°¾åŠ ä¸Š\"&\"æ¥å°†å‘½ä»¤åŒæ—¶æ”¾å…¥åå°è¿è¡Œï¼Œä¹Ÿå¯ç”¨\">filename2>&1\"æ¥æ›´æ”¹ç¼ºçœçš„é‡å®šå‘æ–‡ä»¶åã€‚\n\nè¿™ç§æƒ…å†µé€‚åˆåœ¨ç”Ÿäº§ç¯å¢ƒé•¿æ—¶é—´è¿è¡Œã€‚\n\n## nodejsåº”ç”¨åœ¨linuxä¸Šè¿è¡Œ\n\n### ä½¿ç”¨åœºæ™¯\n\n- foreverç®¡ç†å¤šä¸ªç«™ç‚¹ï¼Œæ¯ä¸ªç«™ç‚¹è®¿é—®é‡ä¸å¤§ï¼Œä¸éœ€è¦ç›‘æ§ã€‚\n- supervisoræ˜¯å¼€å‘ç¯å¢ƒç”¨ã€‚\n- nodemon æ˜¯å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¿®æ”¹è‡ªåŠ¨é‡å¯ã€‚\n- pm2 ç½‘ç«™è®¿é—®é‡æ¯”è¾ƒå¤§,éœ€è¦å®Œæ•´çš„ç›‘æ§ç•Œé¢ã€‚\n\n1. forever\n```javascript\nnpm install -g forever\nforever start index.js -o out.log -e err.log\nforever list \nforever stop index.js [id]\nforever stopall\nforever restartall\n```\n\n2. supervisor çƒ­éƒ¨ç½²\n```javascript\nnpm install -g supervisor\nsupervisor app.js // æ–‡ä»¶æœ‰æ”¹åŠ¨ä¼šç«‹å³é‡å¯nodeæ¨¡å—\n```\n\n3. nodemon\n```javascript\nnpm install -g nodemon\nnodemon app.js\n```\n\n4. nohup\n```javascript\nnohup node index.js &\nnohup node index.js > myLog.log 2>&1 &\n```\n\nnohupé—®é¢˜:\n\nä½†æ˜¯æœ‰æ—¶å€™åœ¨è¿™ä¸€æ­¥ä¼šæœ‰é—®é¢˜ï¼Œå½“æŠŠç»ˆç«¯å…³é—­åï¼Œè¿›ç¨‹ä¼šè‡ªåŠ¨è¢«å…³é—­ï¼ŒæŸ¥çœ‹nohup.outå¯ä»¥çœ‹åˆ°åœ¨å…³é—­ç»ˆç«¯ç¬é—´æœåŠ¡è‡ªåŠ¨å…³é—­ã€‚\næœ‰ä¸ªæ“ä½œç»ˆç«¯æ—¶çš„ç»†èŠ‚ï¼šå½“shellä¸­æç¤ºäº†nohupæˆåŠŸåè¿˜éœ€è¦æŒ‰ç»ˆç«¯ä¸Šé”®ç›˜ä»»æ„é”®é€€å›åˆ°shellè¾“å…¥å‘½ä»¤çª—å£ï¼Œç„¶åé€šè¿‡åœ¨shellä¸­è¾“å…¥exitæ¥é€€å‡ºç»ˆç«¯ï¼›\nè€Œæˆ‘æ˜¯æ¯æ¬¡åœ¨nohupæ‰§è¡ŒæˆåŠŸåç›´æ¥ç‚¹å…³é—­ç¨‹åºæŒ‰é’®å…³é—­ç»ˆç«¯ã€‚æ‰€ä»¥è¿™æ—¶å€™ä¼šæ–­æ‰è¯¥å‘½ä»¤æ‰€å¯¹åº”çš„sessionï¼Œå¯¼è‡´nohupå¯¹åº”çš„è¿›ç¨‹è¢«é€šçŸ¥éœ€è¦ä¸€èµ·shutdownã€‚\n\n5. é«˜å¤§ä¸Šçš„pm2\n\nç‰¹æ€§ï¼š\n- å†…å»ºè´Ÿè½½å‡è¡¡ï¼ˆä½¿ç”¨Node cluster é›†ç¾¤æ¨¡å—ï¼‰\n- åå°è¿è¡Œ\n- 0ç§’åœæœºé‡è½½ï¼Œç»´æŠ¤å‡çº§çš„æ—¶å€™ä¸éœ€è¦åœæœº\n- å…·æœ‰Ubuntuå’ŒCentOS çš„å¯åŠ¨è„šæœ¬\n- åœæ­¢ä¸ç¨³å®šçš„è¿›ç¨‹ï¼ˆé¿å…æ— é™å¾ªç¯ï¼‰\n- æ§åˆ¶å°æ£€æµ‹\n- æä¾› HTTP API\n- è¿œç¨‹æ§åˆ¶å’Œå®æ—¶çš„æ¥å£API ( Nodejs æ¨¡å—,å…è®¸å’ŒPM2è¿›ç¨‹ç®¡ç†å™¨äº¤äº’ )\n\nä½¿ç”¨ï¼š\n\n```javascript\nnpm install -g pm2\npm2 start app.js -o out.log -e err.log\npm2 stop app.js\npm2 restart app.js\npm2 list\npm2 descibe [id]\npm2 monit // æŸ¥çœ‹cpuå’Œå†…å­˜ä½¿ç”¨\npm2 logs // å®æ—¶é›†ä¸­logå¤„ç†\npm2 web // æµè§ˆå™¨æŸ¥çœ‹\n```","tags":["Java"],"categories":["çŸ¥è¯†"]},{"title":"å®ç°åŒå‘ç»‘å®š","url":"%2F%E5%AE%9E%E7%8E%B0%E5%8F%8C%E5%90%91%E7%BB%91%E5%AE%9A.html","content":"\nä¸»æµçš„åŒå‘ç»‘å®šæ–¹æ³•\n1.å‘å¸ƒ-è®¢é˜…æ¨¡å¼\né€šè¿‡ä½¿ç”¨ get å’Œ set çš„æ–¹å¼è·å–æ•°æ®ç„¶åæ›´æ–°æ•°æ®ï¼Œå…¶åŸç†å°±æ˜¯ç›‘å¬é¡µé¢ä¸­æŸä¸ªå…·ä½“å…ƒç´ çš„äº‹ä»¶ï¼Œç„¶åå°†å…¶æœ€æ–°çš„å€¼æ‰‹åŠ¨ set åˆ° æ•°æ®ä¸­ï¼ŒåŒæ—¶è®¢é˜… model å±‚çš„æ”¹å˜ï¼Œç„¶åè§¦å‘é¡µé¢çš„æ¸²æŸ“æ›´æ–°\n\n2.è„æ£€æµ‹\né€šè¿‡å¯¹æ¯”æ•°æ®æ˜¯å¦æœ‰å˜æ›´ï¼Œæ¥å†³å®šæ˜¯å¦æ›´æ–°è§†å›¾ã€‚æœ€ç®€å•çš„å¯ä»¥é€šè¿‡å®šæ—¶è½®è¯¢å»æ£€æµ‹æ•°æ®çš„å˜åŠ¨ã€‚Angular åªæœ‰åœ¨æŒ‡å®šäº‹ä»¶è§¦å‘æ—¶è¿›å…¥è„æ£€æµ‹ï¼š\n\n- DOMäº‹ä»¶ï¼Œæ¯”å¦‚ç”¨æˆ·è¾“å…¥æ–‡æœ¬ç‚¹å‡»æŒ‰é’®ç­‰ï¼ˆng-clickï¼‰\n- XHRå“åº”äº‹ä»¶\næµè§ˆå™¨ Location å˜æ›´\n- Timeräº‹ä»¶\n- æ‰§è¡Œ $digest() æˆ– $apply();\n\nè„æ£€æŸ¥çš„ä¸»è¦åŸç†æ˜¯åœ¨å°†æ•°æ®ç»‘å®šåˆ° View çš„æ—¶å€™ï¼Œå°±åœ¨ç›‘å¬å™¨åˆ—è¡¨ï¼ˆscope ä½œç”¨åŸŸä¸­çš„ç›‘å¬é˜Ÿåˆ— watchListï¼‰ä¸­æ’å…¥ä¸€æ¡ç›‘å¬å™¨ï¼Œå½“è§¦å‘ UI äº‹ä»¶æˆ–è€… Ajax è¯·æ±‚æ—¶ï¼Œå°±ä¼šè§¦å‘è„æ£€æŸ¥ï¼ˆ$digest cycle), åœ¨ $digest æµç¨‹ä¸­ï¼Œå°†éå†æ¯ä¸ªæ•°æ®å˜é‡çš„ watcherï¼Œæ¯”è¾ƒå®ƒçš„æ–°æ—§å€¼ã€‚å½“æ–°æ—§å€¼ä¸åŒæ—¶ï¼Œè§¦å‘ listener å‡½æ•°ï¼Œæ‰§è¡Œç›¸å…³çš„æ›´æ–°é€»è¾‘ã€‚è¿™ä¸ªè¿‡ç¨‹å°†ä¼šä¸€ç›´é‡å¤ï¼Œç›´åˆ°æ‰€æœ‰æ•°æ®æŒ‡ä»¤çš„æ–°æ—§å€¼éƒ½ç›¸åŒä¸ºæ­¢ã€‚\n\nè„æ£€æŸ¥è™½ç„¶å¯ä»¥è¾¾åˆ°å®ç°åŒå‘ç»‘å®šï¼Œä½†æ˜¯å½“é¡µé¢ä¸­ç»‘å®šçš„ watcher è¿‡å¤šæ—¶ï¼Œå°±ä¼šå¼•å‘æ€§èƒ½é—®é¢˜ã€‚æ‰€ä»¥ angular åœ¨è¿›è¡Œ $digest æ£€æµ‹æ—¶ï¼Œä¼šé™åˆ¶å¾ªç¯æ£€æŸ¥çš„æ¬¡æ•°æœ€å°‘2æ¬¡ï¼Œæœ€å¤š10æ¬¡ï¼Œé˜²æ­¢æ— æ•ˆçš„æ£€æŸ¥ã€‚\n\n3.æ•°æ®åŠ«æŒ\né€šè¿‡ ES5 çš„ Object.defineProperty() æ¥åŠ«æŒæ•°æ®å±æ€§çš„ getter å’Œ setterï¼Œ åœ¨æ•°æ®å˜åŠ¨æ—¶è§¦å‘è®¢é˜…è€…ï¼ˆwatcherï¼‰ï¼Œä»è€Œè§¦å‘ç›¸åº”çš„ç›‘å¬å›è°ƒæ›´æ–°è§†å›¾ã€‚\n\n- Observer å¯¹æ•°æ®çš„æ‰€æœ‰å±æ€§è¿›è¡Œç›‘å¬å…¶ getter å’Œ setter\n- Compile æ˜¯ä¸€ä¸ªæŒ‡ä»¤è§£æå™¨ï¼Œå¯¹ MVVM å®ä¾‹çš„æ‰€æœ‰å…ƒç´ æŒ‡ä»¤è¿›è¡Œè§£æï¼Œå¹¶æ¸²æŸ“æˆ model ä¸­çš„ç»‘å®šæ•°æ®ï¼Œå½“æ•°æ®è¿›è¡Œæ›´æ–°æ—¶ï¼Œä¹Ÿèƒ½æ›¿æ¢ä¸ºæ›´æ–°åçš„å€¼ã€‚\n- Watcher ä½œä¸º Compile å’Œ Observer çš„æ¡¥æ¢ï¼Œèƒ½å¤Ÿè®¢é˜…æ•°æ®å±æ€§çš„æ›´æ–°ï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„ç›‘å¬å›è°ƒ\n- Deps ç”¨äºå­˜æ”¾ç›‘å¬å™¨æ•°ç»„ï¼Œä¸»è¦ç”¨æ¥ä¿å­˜ Watcher\n- Updater æ‰§è¡Œæ›´æ–°æ“ä½œï¼Œé’ˆå¯¹ä¸åŒçš„æŒ‡ä»¤è¿›è¡Œä¸åŒçš„æ›´æ–°æ“ä½œï¼Œå¦‚ v-model, v-class, v-html ç­‰ç±»å‹çš„æŒ‡ä»¤ã€‚\n- MVVM ä½œä¸ºå…¥å£å‡½æ•°ï¼Œæ•´åˆä»¥ä¸Šæ‰€æœ‰çš„åŠŸèƒ½ã€‚\n\n![vue-mvvm](http://cdn.mydearest.cn/blog/images/vue-mvvm.png)\n\nObserver åŠ«æŒäº†æ‰€æœ‰æ•°æ®å±æ€§çš„ getter å’Œ setterï¼Œå½“æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå°±ä¼šé€šçŸ¥ deps ä¸­æ‰€æœ‰ watcher çš„æ›´æ–°æ“ä½œï¼Œè¿›è€Œè§¦å‘é¡µé¢çš„é‡æ–°æ¸²æŸ“ï¼Œè¿™æ˜¯ä¿®æ”¹ Model å±‚ä»è€Œå¼•å‘ View å±‚çš„é‡æ–°æ¸²æŸ“ã€‚\nåœ¨ Compile ä¸­ç›‘å¬å¯è¾“å…¥å…ƒç´ çš„äº‹ä»¶ï¼Œç„¶åå°†æ–°å€¼æ›´æ–°åˆ° model çš„æ•°æ®ä¸­ï¼Œè¿™æ˜¯ä¿®æ”¹ View å±‚è§¦å‘çš„ Model å±‚çš„ä¿®æ”¹ã€‚\n\n- ç”¨æˆ·åæˆ–è€…é‚®ç®±è·Ÿgithubæ²¡æœ‰å…³è”ä¸Šï¼Œ githubè®¤ä¸ºä¸æ˜¯ä½ æäº¤çš„ï¼Œ ä¸ç»Ÿè®¡ã€‚\n- fork çš„é¡¹ç›®ï¼Œ ä¸ç»Ÿè®¡\n- æ²¡æœ‰åœ¨ç‰ˆæœ¬åº“çš„masterã€é»˜è®¤åˆ†æ”¯ã€‘ä¸Šæäº¤\n\n[è§£è¯»](https://github.com/SunShinewyf/issue-blog/issues/46)\n\n---\n<!--more-->\n\n## definePropertyå®ç°\n\nç›®å‰æ”¯æŒåŒå‘ç»‘å®šçš„Vueä¸­çš„å®ç°å°±æ˜¯è¿™ç§æ–¹æ³•ã€‚ä½†æ˜¯è¿™ç§æ–¹æ³•ä¸å¤ªå¥½çš„åœ°æ–¹å°±æ˜¯å¯¹äºæ•°ç»„ä¹‹ç±»çš„å¯¹è±¡ï¼Œç±»ä¼¼ä¿®æ”¹æ•°ç»„çš„lengthï¼Œç›´æ¥ç”¨ç´¢å¼•è®¾ç½®å…ƒç´ å¦‚items[0] = {}ï¼Œä»¥åŠæ•°ç»„çš„pushï¼Œpopç­‰å˜å¼‚æ–¹æ³•æ˜¯æ— æ³•è§¦å‘setterçš„ã€‚é’ˆå¯¹è¿™äº›ï¼Œvueä¸­çš„å®ç°æ˜¯åœ¨Objectå’ŒArrayçš„åŸå‹æ·»åŠ äº†å®šåˆ¶æ–¹æ³•æ¥å¤„ç†è¿™äº›ç‰¹æ®Šæ“ä½œï¼Œå¯ä»¥å®ç°ä¸Šè¿°è¦æ±‚ã€‚\n\n```js\n/**\n  * bind\n  * @param {object} target \n  * @param {object} dom \n  * @param {object} map \n  */\nconst bind = (target, dom, map) =>\n  Object.keys(map || target).forEach(key =>\n    Object.defineProperty(target, key, {\n      set(value) {\n        const domKey = map ? map[key] : key\n        dom[domKey] = value\n      },\n      get() {\n        const domKey = map ? map[key] : key\n        return dom[domKey]\n      }\n    }))\nwindow._alternate = {}\n\nconst p = document.getElementById('p')\n\nbind(_alternate, p, {\n  'value': 'innerHTML'\n})\n```\n\n## proxyå®ç°\n\næ€ä¹ˆç†è§£reflect\nreflect æ˜¯es6æ–°å¢çš„ä¸€ä¸ªå…¨å±€å¯¹è±¡ã€‚é¡¾åæ€ä¹‰ï¼Œåå°„ï¼Œç±»ä¼¼äºJavaé‡Œé¢çš„åå°„æœºåˆ¶ã€‚åœ¨Javaé‡Œé¢ï¼Œåå°„æ˜¯ä¸ªå¾ˆå¤´ç–¼çš„æ¦‚å¿µã€‚ç®€å•ç†è§£ä¸ºï¼šé€šè¿‡åå°„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿è¡Œæ—¶è·å¾—ç¨‹åºæˆ–ç¨‹åºé›†ä¸­æ¯ä¸€ä¸ªç±»å‹çš„æˆå‘˜å’Œæˆå‘˜çš„ä¿¡æ¯ã€‚å¯¹äºJavaæ¥è¯´ï¼Œç¨‹åºä¸­ä¸€èˆ¬çš„å¯¹è±¡çš„ç±»å‹éƒ½æ˜¯åœ¨ç¼–è¯‘æœŸå°±ç¡®å®šä¸‹æ¥çš„ï¼Œè€ŒJavaåå°„æœºåˆ¶å¯ä»¥åŠ¨æ€åœ°åˆ›å»ºå¯¹è±¡å¹¶è°ƒç”¨å…¶å±æ€§ï¼Œè¿™æ ·çš„å¯¹è±¡çš„ç±»å‹åœ¨ç¼–è¯‘æœŸæ˜¯æœªçŸ¥çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡åå°„æœºåˆ¶ç›´æ¥åˆ›å»ºå¯¹è±¡ï¼Œå³ä½¿è¿™ä¸ªå¯¹è±¡çš„ç±»å‹åœ¨ç¼–è¯‘æœŸæ˜¯æœªçŸ¥çš„ã€‚\n\n```js\n/**\n  * bind\n  * @param {object} model \n  * @param {object} map \n  */\nconst bind = (model, map) => new Proxy(map || model, {\n  get(_, key) {\n    const mkey = map ? map[key] : key\n    return Reflect.get(model, mkey)\n  },\n  set(_, key, value) {\n    const mkey = map ? map[key] : key\n    return Reflect.set(model, mkey, value)\n  }\n})\n\nwindow.__alternate = bind(document.getElementById('p'), {\n  'value': 'innerHTML'\n})\n```\n\n## mvvm\n[MVVM](https://github.com/cosyer/MVVM)\n\n### mvvm\n```js\nfunction MVVM(options) {\n  this.$el = options.el;\n  this.$data = options.data;\n  this.$method = options.method;\n  if (this.$el) {\n    // å¯¹æ‰€æœ‰æ•°æ®è¿›è¡ŒåŠ«æŒ\n    new Observer(this.$data);\n    // å°†æ•°æ®ç›´æ¥ä»£ç†åˆ°å®ä¾‹ä¸­ï¼Œæ— éœ€é€šè¿‡vm.$dataæ¥æ“ä½œ\n    this.proxyData(this.$data);\n    new Compile(this.$el, this);\n  }\n}\n\nMVVM.prototype = {\n  proxyData: function (data) {\n    Object.keys(data).forEach((key) => {\n      Object.defineProperty(this, key, {\n        get() {\n          return data[key];\n        },\n        set(newValue) {\n          data[key] = newValue;\n        },\n      });\n    });\n  },\n};\n```\n\n### observer\n```js\nfunction Observer(data) {\n  this.data = data;\n  this.observe(this.data);\n}\n\nObserver.prototype = {\n  /**\n   * @param {data} è¦ç›‘å¬çš„æ•°æ®å¯¹è±¡\n   */\n  observe: function (data) {\n    if (!data || typeof data !== \"object\") return;\n    // ä¸ºæ¯ä¸€ä¸ªå±æ€§è®¾ç½®æ•°æ®ç›‘å¬\n    Object.keys(data).forEach((key) => {\n      this.defineReactive(data, key, data[key]);\n      this.observe(data[key]); // æ·±åº¦é€’å½’åŠ«æŒå±æ€§\n    });\n  },\n\n  /**\n   * @param {data} è¦ç›‘å¬çš„æ•°æ®å¯¹è±¡\n   * @param {key} è¦ç›‘å¬çš„å¯¹è±¡å±æ€§keyå€¼\n   * @param {value} è¦ç›‘å¬çš„å¯¹è±¡å±æ€§å€¼\n   */\n  defineReactive: function (data, key, value) {\n    let dep = new Dep();\n    let self = this;\n\n    // å¦‚æœæ˜¯è¯¥å±æ€§å€¼æ˜¯å¯¹è±¡ç±»å‹ï¼Œåˆ™éå†\n    Object.defineProperty(data, key, {\n      enumerable: true,\n      configurable: false,\n      get: () => {\n        // ç”±äºéœ€è¦åœ¨é—­åŒ…å†…æ·»åŠ watcherï¼Œæ‰€æœ‰éœ€è¦ Dep å®šä¹‰ä¸€ä¸ªå…¨å±€ target å±æ€§ï¼Œæš‚å­˜ watcher ï¼Œæ·»åŠ å®Œç§»é™¤\n        if (Dep.target) {\n          // å¦‚æœä¸ºtrueï¼Œåˆ™è¯´æ˜æ˜¯å®ä¾‹åŒ– watcher å¼•èµ·çš„ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ è¿›æ¶ˆæ¯è®¢é˜…å™¨ä¸­\n          dep.depend();\n        }\n        return value;\n      },\n      set: (newVal) => {\n        if (newVal === value) return;\n        value = newVal;\n        // å¯¹æ–°å€¼è¿›è¡Œç›‘å¬\n        self.observe(newVal);\n        // é€šçŸ¥æ‰€æœ‰è®¢é˜…è€…\n        dep.notify();\n      },\n    });\n  },\n};\n```\n\n### watcher\n```js\n/**\n *\n * @param {*vm} åŒå‘ç»‘å®šå®ä¾‹\n * @param {*expOrFn} æ˜¯è¡¨è¾¾å¼è¿˜æ˜¯function\n * @param {*cb} æ‰§è¡Œæ›´æ–°æ—¶çš„å›è°ƒå‡½æ•°\n */\nfunction Watcher(vm, expr, cb) {\n  this.depIds = {}; // å­˜å‚¨depsè®¢é˜…çš„ä¾èµ–\n  this.vm = vm; // component å®ä¾‹\n  this.cb = cb; // æ›´æ–°æ•°æ®æ—¶çš„å›è°ƒå‡½æ•°\n  this.expr = expr; // è¡¨è¾¾å¼è¿˜æ˜¯function\n  this.value = this.get(vm, expr); // åœ¨å®ä¾‹åŒ–çš„æ—¶å€™è·å–è€å€¼\n}\n\nWatcher.prototype = {\n  // æš´éœ²ç»™ Dep ç±»çš„æ–¹æ³•ï¼Œç”¨äºåœ¨è®¢é˜…çš„æ•°æ®æ›´æ–°æ—¶è§¦å‘\n  update: function () {\n    const newValue = this.get(this.vm, this.expr); // è·å–åˆ°çš„æ–°å€¼\n    const oldValue = this.value; // è·å–åˆ°çš„æ—§å€¼\n    if (newValue !== oldValue) {\n      // åˆ¤æ–­æ–°æ—§å€¼æ˜¯å¦ç›¸ç­‰ï¼Œä¸ç›¸ç­‰å°±æ‰§è¡Œå›è°ƒ\n      this.value = newValue;\n      this.cb(newValue);\n    }\n  },\n\n  addDep: function (dep) {\n    // æ£€æŸ¥depIdså¯¹è±¡æ˜¯å¦å­˜åœ¨æŸä¸ªå®ä¾‹ï¼Œé¿å…å»æŸ¥æ‰¾åŸå‹é“¾ä¸Šçš„å±æ€§\n    if (!this.depIds.hasOwnProperty(dep.id)) {\n      dep.addSub(this); // åœ¨ dep å­˜å‚¨ watcher ç›‘å¬å™¨\n      this.depIds[dep.id] = dep; // åœ¨ watcher å­˜å‚¨è®¢é˜…è€… dep\n    }\n  },\n\n  // è·å–dataä¸­çš„å€¼ï¼Œå¯èƒ½å‡ºç° hello.a.bçš„æƒ…å†µ\n  getVal: function (vm, expr) {\n    expr = expr.split(\".\");\n    return expr.reduce((prev, next) => {\n      return prev[next];\n    }, vm.$data);\n  },\n\n  // è·å–å€¼\n  get: function (vm, expr) {\n    Dep.target = this;\n    const val = this.getVal(vm, expr);\n    Dep.target = null;\n    return val;\n  },\n};\n```\n\n### dep\n```js\n// è®¢é˜…äº‹ä»¶çš„å”¯ä¸€æ ‡è¯†\nlet uid = 0;\n\n// è®¢é˜…ç±»\nfunction Dep() {\n  this.id = uid++;\n  this.subs = [];\n}\n\nDep.prototype = {\n  addSub: function (sub) {\n    if (this.subs.indexOf(sub) === -1) {\n      // é¿å…é‡å¤æ·»åŠ \n      this.subs.push(sub);\n    }\n  },\n\n  removeSub: function (sub) {\n    const index = this.subs.indexOf(sub);\n    if (index > -1) {\n      this.subs.splice(index, 1);\n    }\n  },\n\n  depend: function () {\n    Dep.target.addDep(this); //æ‰§è¡Œ watcher çš„ addDep æ–¹æ³•\n  },\n\n  notify: function () {\n    this.subs.forEach((sub) => {\n      sub.update(); // æ‰§è¡Œ watcher çš„ update æ–¹æ³•\n    });\n  },\n};\n\n// Dep ç±»çš„å…¨å±€å±æ€§ targetï¼Œæ˜¯ä¸€ä¸ª Watch å®ä¾‹\nDep.target = null;\n```\n\n### compile\n```js\nfunction Compile(el, vm) {\n  this.el = this.isElementNode(el) ? el : document.querySelector(el);\n  this.vm = vm;\n  if (this.el) {\n    // å°†çœŸå®DOMç§»å…¥å†…å­˜ fragment ä¸­\n    let fragment = this.node2Fragment(this.el);\n    this.compile(fragment);\n    //å°†ç¼–è¯‘åçš„ fragment å†æ¬¡è½¬åŒ–ä¸º DOM å¡å›åˆ°é¡µé¢ä¸­\n    this.el.appendChild(fragment);\n  }\n}\n\nCompile.prototype = {\n  // å°† DOM è½¬åŒ–ä¸º fragment\n  node2Fragment: function (el) {\n    let fragment = document.createDocumentFragment();\n    // æ¯æ¬¡è·å–DOMèŠ‚ç‚¹æ ‘ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç›´åˆ°ç§»é™¤å®Œæ¯•ä¸ºæ­¢\n    while (el.firstChild) {\n      fragment.appendChild(el.firstChild);\n    }\n    // è¿”å›ä¸€ä¸ªæ–‡æ¡£ç¢ç‰‡å®¹å™¨ï¼Œå­˜å‚¨DOMæ ‘çš„æ‰€æœ‰èŠ‚ç‚¹\n    return fragment;\n  },\n  // æ˜¯å¦æ˜¯DOMèŠ‚ç‚¹å…ƒç´ \n  isElementNode(node) {\n    return node.nodeType === 1;\n  },\n  //ç¼–è¯‘å‡½æ•°\n  compile: function (fragment) {\n    let childNodes = fragment.childNodes;\n    Array.from(childNodes).forEach((node) => {\n      // æ˜¯å¦æ˜¯å…ƒç´ èŠ‚ç‚¹\n      if (this.isElementNode(node)) {\n        this.compileElement(node);\n        this.compile(node);\n      } else {\n        // æ˜¯å¦æ˜¯æ–‡æœ¬èŠ‚ç‚¹\n        this.compileText(node);\n      }\n    });\n  },\n\n  //åˆ¤æ–­æ˜¯å¦æ˜¯æŒ‡ä»¤\n  isDirective: function (name) {\n    // ä¸èƒ½ä½¿ç”¨ indexOf çš„æ–¹å¼ï¼Œå› ä¸ºå¯èƒ½å‡ºç° v-model-v-model,å¿…é¡»ä»¥ v- å¼€å¤´\n    return name.startsWith(\"v-\");\n  },\n\n  // æ˜¯å¦æ˜¯äº‹ä»¶æŒ‡ä»¤\n  isEventDirective: function (dir) {\n    return dir.startsWith(\"on\");\n  },\n\n  //ç¼–è¯‘èŠ‚ç‚¹å…ƒç´ \n  compileElement: function (node) {\n    // å¸¦v-model v-text\n    let attrs = node.attributes; // å–å‡ºå½“å‰èŠ‚ç‚¹çš„å±æ€§\n    Array.from(attrs).forEach((attr) => {\n      let attrName = attr.name;\n      if (this.isDirective(attrName)) {\n        // å–åˆ°æŒ‡ä»¤å¯¹åº”çš„å€¼æ”¾åˆ°èŠ‚ç‚¹ä¸­\n        let expr = attr.value;\n        const attrArr = attrName.split(\"-\");\n        // è¯´æ˜æ­¤æ—¶ä¸æ˜¯ v-model çš„è¿™ç§å½¢å¼ï¼Œè€Œæ˜¯ v-model-v-model\n        if (attrArr.length !== 2) {\n          return;\n        }\n        let type = attrArr[1]; // è·å–æŒ‡ä»¤æ˜¯å“ªç§ç±»å‹ï¼Œæ¯”å¦‚v-model,v-text\n        // å¦‚æœæ˜¯äº‹ä»¶æŒ‡ä»¤\n        if (this.isEventDirective(type)) {\n          CompileUtil.eventHandler(node, this.vm, expr, type);\n        } else {\n          // è°ƒç”¨å¯¹åº”çš„ç¼–è¯‘æ–¹æ³• ç¼–è¯‘å“ªä¸ªèŠ‚ç‚¹,ç”¨æ•°æ®æ›¿æ¢æ‰è¡¨è¾¾å¼\n          CompileUtil[type](node, this.vm, expr);\n        }\n      }\n    });\n  },\n\n  // ç¼–è¯‘æ–‡æœ¬å…ƒç´ \n  compileText: function (node) {\n    let expr = node.textContent; // å–æ–‡æœ¬ä¸­çš„å†…å®¹ todo:å’Œ innerHTML çš„åŒºåˆ«\n    let reg = /\\{\\{([^}]+)\\}\\}/g; // ä¸èƒ½ç›´æ¥æ£€æµ‹ {{}} è¿™ç§æƒ…å†µï¼Œè¿˜è¦è€ƒè™‘è¿™ç§æƒ…å†µ {{a}} {{b}} {{c}}\n    if (reg.test(expr)) {\n      // è°ƒç”¨ç¼–è¯‘æ–‡æœ¬çš„æ–¹æ³• ç¼–è¯‘å“ªä¸ªèŠ‚ç‚¹,ç”¨æ•°æ®æ›¿æ¢æ‰è¡¨è¾¾å¼\n      CompileUtil[\"text\"](node, this.vm, expr);\n    }\n  },\n};\n\n// æŒ‡ä»¤å¤„ç†é›†åˆ\nvar CompileUtil = {\n  // æ–‡æœ¬å¤„ç†\n  text: function (node, vm, expr) {\n    let updateFn = Updater[\"textUpdater\"];\n    let value = this.getTextVal(vm, expr);\n    expr.replace(/\\{\\{([^}]+)\\}\\}/g, (...arguments) => {\n      // å®ä¾‹åŒ–è§‚å¯Ÿè€…ï¼Œæ·»åŠ åˆ°å‘å¸ƒè®¢é˜…çš„æ•°ç»„ä¸­\n      new Watcher(vm, arguments[1], (newValue) => {\n        // ä¼ å…¥æ¯æ¬¡çš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚å‡ºç° {{a}} {{b}}, å°±è¦åˆ†åˆ«å–è·å–è¡¨è¾¾å¼ a,b çš„å€¼,\n        // å¦‚æœç›´æ¥ä¼ å…¥ newValue,åˆ™åä¸€ä¸ªå€¼ä¼šè¦†ç›–å‰ä¸€ä¸ªå€¼\n        updateFn && updateFn(node, this.getTextVal(vm, expr));\n      });\n    });\n    updateFn && updateFn(node, value);\n  },\n  // htmlæŒ‡ä»¤å¤„ç†\n  html: function (node, vm, expr) {\n    let updateFn = Updater[\"htmlUpdater\"];\n    // æ›´æ–°æ¸²æŸ“\n    new Watcher(vm, expr, (newValue) => {\n      updateFn && updateFn(node, newValue);\n    });\n    // åˆå§‹åŒ–æ¸²æŸ“\n    updateFn && updateFn(node, this.getVal(vm, expr));\n  },\n\n  // class æŒ‡ä»¤å¤„ç†\n  class: function (node, vm, expr) {\n    let updateFn = Updater[\"classUpdater\"];\n    // æ›´æ–°æ¸²æŸ“\n    new Watcher(vm, expr, (newValue) => {\n      updateFn && updateFn(node, newValue);\n    });\n    // åˆå§‹åŒ–æ¸²æŸ“\n    updateFn && updateFn(node, this.getVal(vm, expr));\n  },\n\n  // modelæŒ‡ä»¤å¤„ç†\n  model: function (node, vm, expr) {\n    let updateFn = Updater[\"modelUpdater\"];\n    new Watcher(vm, expr, (newValue) => {\n      updateFn && updateFn(node, newValue);\n    });\n    // ç›‘å¬è¾“å…¥æ¡†çš„inputäº‹ä»¶ï¼Œå¹¶å°†å€¼å›å¡«åˆ°æ•°æ®ä¸­\n    node.addEventListener(\"input\", (e) => {\n      let newValue = e.target.value;\n      this.setVal(vm, expr, newValue);\n    });\n    updateFn && updateFn(node, this.getVal(vm, expr));\n  },\n\n  // äº‹ä»¶æŒ‡ä»¤å¤„ç†\n  eventHandler: function (node, vm, expr, type) {\n    // todo\n    let eventType = type.split(\":\")[1],\n      fn = vm.$method[expr];\n    if (eventType && fn) {\n      node.addEventListener(eventType, fn.bind(vm), false);\n    }\n  },\n\n  // è·å–æ–‡æœ¬çš„å€¼\n  getTextVal: function (vm, expr) {\n    return expr.replace(/\\{\\{([^}]+)\\}\\}/g, (...arguments) => {\n      //argument[1] å°±æ˜¯ {{hello}} é‡Œé¢çš„ hello å€¼\n      return this.getVal(vm, arguments[1]);\n    });\n  },\n  // è·å–å€¼\n  getVal: function (vm, expr) {\n    expr = expr.split(\".\"); //å°† hello.a.b è½¬åŒ–ä¸ºæ•°ç»„,è°ƒç”¨reduceè·å–æœ€é‡Œé¢çš„å€¼\n    return expr.reduce((prev, next) => {\n      return prev[next];\n    }, vm.$data);\n  },\n  // è®¾ç½®å€¼\n  setVal: function (vm, expr, value) {\n    expr = expr.split(\".\");\n    // å°†æ–°å€¼å›å¡«åˆ°æ•°æ®ä¸­ï¼Œå¹¶ä¸”å›å¡«åˆ°æœ€åä¸€ä¸ªå€¼ï¼Œå¦‚:hello.a.bï¼Œå°±éœ€è¦æŠŠå€¼å›å¡«åˆ°bä¸­\n    return expr.reduce((prev, next, index) => {\n      if (index === expr.length - 1) {\n        return (prev[next] = value);\n      }\n      return prev[next];\n    }, vm.$data);\n  },\n};\n\n// æ›´æ–°æ•°æ®å¤„ç†é›†åˆ\nvar Updater = {\n  // æ–‡æœ¬æ›´æ–°\n  textUpdater: function (node, value) {\n    node.textContent = typeof value === \"undefined\" ? \"\" : value;\n  },\n  // html æ›´æ–°\n  htmlUpdater: function (node, value) {\n    node.innerHTML = typeof value === \"undefined\" ? \"\" : value;\n  },\n  // class æ›´æ–°\n  classUpdater: function (node, value) {\n    let className = node.className;\n    className = className.replace(value, \"\").replace(/\\s$/, \"\");\n    var space = className && String(value) ? \" \" : \"\";\n    node.className = className + space + value;\n  },\n  // model æ›´æ–°\n  modelUpdater: function (node, value) {\n    node.value = typeof value === \"undefined\" ? \"\" : value;\n  },\n};\n```\n","tags":["æ•´ç†"],"categories":["JS"]},{"title":"æ·±æµ…æ‹·è´","url":"%2F%E6%B7%B1%E6%B5%85%E6%8B%B7%E8%B4%9D.html","content":"\n## æ·±æµ…æ‹·è´æ¦‚å¿µ\n\næ·±æ‹·è´å’Œæµ…æ‹·è´åªé’ˆå¯¹è±¡ Object, Array è¿™æ ·çš„å¤æ‚å¯¹è±¡ï¼ˆå¼•ç”¨ç±»å‹ï¼‰çš„ã€‚\n\nå¤åˆ¶å¼•ç”¨ï¼ˆå¼•ç”¨ç±»å‹ï¼‰çš„æ‹·è´æ–¹æ³•ç§°ä¹‹ä¸ºæµ…æ‹·è´ï¼Œåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ç€åŸå§‹å¯¹è±¡å±æ€§å€¼çš„ä¸€ä»½ç²¾ç¡®æ‹·è´ã€‚å¦‚æœå±æ€§æ˜¯åŸºæœ¬ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼Œå¦‚æœ\n\nå±æ€§æ˜¯å¼•ç”¨ç±»å‹ï¼Œæ‹·è´çš„å°±æ˜¯å†…å­˜åœ°å€ ï¼Œæ‰€ä»¥å¦‚æœå…¶ä¸­ä¸€ä¸ªå¯¹è±¡æ”¹å˜äº†è¿™ä¸ªåœ°å€ï¼Œå°±ä¼šå½±å“åˆ°å¦ä¸€ä¸ªå¯¹è±¡ã€‚\n\næ·±æ‹·è´å°±æ˜¯æŒ‡å®Œå…¨çš„æ‹·è´ä¸€ä¸ªå¯¹è±¡ï¼Œå°†åŸå¯¹è±¡çš„å„ä¸ªå±æ€§é€’å½’å¤åˆ¶ä¸‹æ¥ã€‚è¿™æ ·å³ä½¿åµŒå¥—äº†å¯¹è±¡ï¼Œä¸¤è€…ä¹Ÿç›¸äº’åˆ†ç¦»ã€‚\n\n## æµ…æ‹·è´ å¯¹åŸºæœ¬ç±»å‹æ‹·è´å€¼ï¼Œå¼•ç”¨ç±»å‹æ‹·è´å¼•ç”¨\n### Object.assign()\n### æ‰©å±•è¿ç®—ç¬¦...\n\n```javascript\nvar shallowCopy = function(obj) {\n    if (typeof obj !== 'object') return;      // åªæ‹·è´å¯¹è±¡\n    var newObj = obj instanceof Array ? [] : {};     // æ ¹æ®objçš„ç±»å‹åˆ¤æ–­æ˜¯æ–°å»ºä¸€ä¸ªæ•°ç»„è¿˜æ˜¯å¯¹è±¡\n    for (var key in obj) {      // éå†objï¼Œå¹¶ä¸”åˆ¤æ–­æ˜¯objçš„å±æ€§æ‰æ‹·è´\n        if (obj.hasOwnProperty(key)) {\n            newObj[key] = obj[key];\n        }\n    }\n    return newObj;\n}\n\nfunction shallowCopy2(source) {\n  if (source === null || typeof source !== 'object') return source;\n  const copy = Array.isArray(source) ? [] : {};\n\n  Object.keys(source).forEach(key => {\n    copy[key] = source[key];\n  });\n  return copy;\n}\n\nvar obj = { a:1, arr: [2,3] };\nvar shallowObj = shallowCopy(obj);\nshallowObj.arr[1] = 5;\nconsole.log(obj.arr[1])  // 5 äº’ç›¸å½±å“ æŒ‡å‘äº†åŒä¸€å—å†…å­˜åœ°å€\nshallowObj.a = 5;\nconsole.log(obj.a) // 1 \n```\n\n## æ·±æ‹·è´(å°†ä¸€ä¸ªå¯¹è±¡ä»å†…å­˜ä¸­å®Œæ•´çš„æ‹·è´ä¸€ä»½å‡ºæ¥,ä»å †å†…å­˜ä¸­å¼€è¾Ÿä¸€ä¸ªæ–°çš„åŒºåŸŸå­˜æ”¾æ–°å¯¹è±¡,ä¸”ä¿®æ”¹æ–°å¯¹è±¡ä¸ä¼šå½±å“åŸå¯¹è±¡ã€‚)\n### JSON.parse(JSON.stringify(a)): æ€§èƒ½æœ€å¿«\nå…·æœ‰å¾ªç¯å¼•ç”¨çš„å¯¹è±¡æ—¶ï¼ŒæŠ¥é”™\nå½“å€¼ä¸ºå‡½æ•°ã€undefinedã€æˆ–symbolæ—¶ï¼Œæ— æ³•æ‹·è´\n\n### é€’å½’å¤åˆ¶\n```javascript\n// ä¸è€ƒè™‘å¾ªç¯å¼•ç”¨\nvar deepCopy = function(obj) {\n    if (typeof obj !== 'object') return;\n    var newObj = obj instanceof Array ? [] : {};\n    for (var key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            newObj[key] = typeof obj[key] === 'object' ? deepCopy(obj[key]) : obj[key];\n        }\n    }\n    return newObj;\n}\n\nvar obj = { a:1, arr: [2,3] };\nvar shallowObj = shallowCopy(obj);\nshallowObj.arr[1] = 5;\nconsole.log(obj.arr[1])  // 3 æ²¡æœ‰å½±å“ é‡æ–°æ‹·è´äº†æ–°æ•°æ®\nshallowObj.a = 5;\nconsole.log(obj.a) // 1 \n```\n\n```js\n// ä¸è€ƒè™‘å¾ªç¯å¼•ç”¨\nconst clone = function(data){\n    if(typeof data !== 'object'){\n        return data;\n    }\n    let keys = Object.keys(data);\n    let result = Array.isArray(data) ? [] : {};\n    keys.forEach(key=>{\n        if(typeof data[key] === 'object'){\n            result[key] = clone(data[key]);\n        }else{\n            result[key] = data[key];\n        }\n    })\n    return result;\n}\n```\n\n```js\n// è€ƒè™‘å¾ªç¯å¼•ç”¨ åªè€ƒè™‘äº†æ™®é€šçš„ objectå’Œ arrayä¸¤ç§æ•°æ®ç±»å‹\nconst clone = function(data){\n    let map = new WeakMap(); // è¿™é‡Œç”¨WeakMapå¼±å¼•ç”¨ï¼Œä¼šè‡ªåŠ¨å›æ”¶ï¼Œä¸éœ€è¦æ‰‹åŠ¨å¤„ç†ç½®ä¸ºnull\n    function dp(obj){\n        if(typeof obj !== 'object'){\n            return obj;\n        }\n        let o = map.get(obj);\n        if(o){\n            return o;\n        }\n        let result = Array.isArray(obj) ? [] : {};\n        map.set(obj, result);\n        let keys = Object.keys(obj);\n        keys.forEach(key=>{\n            if(typeof obj[key] === 'object'){\n                result[key] = dp(obj[key]);\n            }else{\n                result[key] = obj[key];\n            }\n        })\n        return result;\n    }\n    return dp(data);\n}\n```\n\n```js\n// ç»ˆæç‰ˆ\nconst mapTag = '[object Map]';\nconst setTag = '[object Set]';\nconst arrayTag = '[object Array]';\nconst objectTag = '[object Object]';\nconst argsTag = '[object Arguments]';\n\nconst boolTag = '[object Boolean]';\nconst dateTag = '[object Date]';\nconst numberTag = '[object Number]';\nconst stringTag = '[object String]';\nconst symbolTag = '[object Symbol]';\nconst errorTag = '[object Error]';\nconst regexpTag = '[object RegExp]';\nconst funcTag = '[object Function]';\n\nconst deepTag = [mapTag, setTag, arrayTag, objectTag, argsTag];\n\n\nfunction forEach(array, iteratee) {\n    let index = -1;\n    const length = array.length;\n    while (++index < length) {\n        iteratee(array[index], index);\n    }\n    return array;\n}\n\nfunction isObject(target) {\n    const type = typeof target;\n    return target !== null && (type === 'object' || type === 'function');\n}\n\nfunction getType(target) {\n    return Object.prototype.toString.call(target);\n}\n\nfunction getInit(target) {\n    const Ctor = target.constructor;\n    return new Ctor();\n}\n\nfunction cloneSymbol(targe) {\n    return Object(Symbol.prototype.valueOf.call(targe));\n}\n\nfunction cloneReg(targe) {\n    const reFlags = /\\w*$/;\n    const result = new targe.constructor(targe.source, reFlags.exec(targe));\n    result.lastIndex = targe.lastIndex;\n    return result;\n}\n\nfunction cloneFunction(func) {\n    const bodyReg = /(?<={)(.|\\n)+(?=})/m;\n    const paramReg = /(?<=\\().+(?=\\)\\s+{)/;\n    const funcString = func.toString();\n    if (func.prototype) {\n        const param = paramReg.exec(funcString);\n        const body = bodyReg.exec(funcString);\n        if (body) {\n            if (param) {\n                const paramArr = param[0].split(',');\n                return new Function(...paramArr, body[0]);\n            } else {\n                return new Function(body[0]);\n            }\n        } else {\n            return null;\n        }\n    } else {\n        return eval(funcString);\n    }\n}\n\nfunction cloneOtherType(targe, type) {\n    const Ctor = targe.constructor;\n    switch (type) {\n        case boolTag:\n        case numberTag:\n        case stringTag:\n        case errorTag:\n        case dateTag:\n            return new Ctor(targe);\n        case regexpTag:\n            return cloneReg(targe);\n        case symbolTag:\n            return cloneSymbol(targe);\n        case funcTag:\n            return cloneFunction(targe);\n        default:\n            return null;\n    }\n}\n\nfunction clone(target, map = new WeakMap()) {\n\n    // å…‹éš†åŸå§‹ç±»å‹\n    if (!isObject(target)) {\n        return target;\n    }\n\n    // åˆå§‹åŒ–\n    const type = getType(target);\n    let cloneTarget;\n    if (deepTag.includes(type)) {\n        cloneTarget = getInit(target, type);\n    } else {\n        return cloneOtherType(target, type);\n    }\n\n    // é˜²æ­¢å¾ªç¯å¼•ç”¨\n    if (map.get(target)) {\n        return map.get(target);\n    }\n    map.set(target, cloneTarget);\n\n    // å…‹éš†set\n    if (type === setTag) {\n        target.forEach(value => {\n            cloneTarget.add(clone(value, map));\n        });\n        return cloneTarget;\n    }\n\n    // å…‹éš†map\n    if (type === mapTag) {\n        target.forEach((value, key) => {\n            cloneTarget.set(key, clone(value, map));\n        });\n        return cloneTarget;\n    }\n\n    // å…‹éš†å¯¹è±¡å’Œæ•°ç»„\n    const keys = type === arrayTag ? undefined : Object.keys(target);\n    forEach(keys || target, (value, key) => {\n        if (keys) {\n            key = value;\n        }\n        cloneTarget[key] = clone(target[key], map);\n    });\n\n    return cloneTarget;\n}\n\nmodule.exports = {\n    clone\n};\n```\n\nå°½ç®¡ä½¿ç”¨æ·±æ‹·è´ä¼šå®Œå…¨çš„å…‹éš†ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨ï¼Œä½†æ˜¯æ·±æ‹·è´å› ä¸ºä½¿ç”¨é€’å½’ï¼Œæ€§èƒ½ä¼šä¸å¦‚æµ…æ‹·è´ï¼Œåœ¨å¼€å‘ä¸­ï¼Œè¿˜æ˜¯è¦æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œé€‰æ‹©ã€‚\n","tags":["æ•´ç†"],"categories":["çŸ¥è¯†"]},{"title":"jsåˆ¤æ–­æ•°æ®ç±»å‹","url":"%2Fjs%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html","content":"\n## typeof\n> typeofä¸€èˆ¬åªèƒ½è¿”å›å¦‚ä¸‹å‡ ä¸ªç»“æœï¼šnumber,boolean,string,function,object,undefinedå­—ç¬¦ä¸²\n\n> å¯¹äºArray,nullç­‰ç‰¹æ®Šå¯¹è±¡ä½¿ç”¨typeofä¸€å¾‹è¿”å›objectï¼Œè¿™æ­£æ˜¯typeofçš„å±€é™æ€§ã€‚\n\n> typeofè¡¨ç¤ºæ˜¯å¯¹æŸä¸ªå˜é‡ç±»å‹çš„æ£€æµ‹ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹é™¤äº†nulléƒ½èƒ½æ­£å¸¸çš„æ˜¾ç¤ºä¸ºå¯¹åº”çš„ç±»å‹ï¼Œå¼•ç”¨ç±»å‹é™¤äº†å‡½æ•°ä¼šæ˜¾ç¤ºä¸º'function'ï¼Œå…¶å®ƒéƒ½æ˜¾ç¤ºä¸ºobjectã€‚\n\n```javascript\nvar fn = new Function ('a', 'b', 'return a + b')\n\ntypeof fn // function\n```\n\n## instanceof \n> instanceofé€‚ç”¨äºæ£€æµ‹å¯¹è±¡ï¼Œå®ƒæ˜¯åŸºäºåŸå‹é“¾è¿ä½œçš„ã€‚\n\n> instanceof è¿ç®—ç¬¦ç”¨æ¥æµ‹è¯•ä¸€ä¸ªå¯¹è±¡åœ¨å…¶åŸå‹é“¾ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªæ„é€ å‡½æ•°çš„ prototype å±æ€§ã€‚æ¢ç§è¯´æ³•å°±æ˜¯å¦‚æœå·¦ä¾§çš„å¯¹è±¡æ˜¯å³ä¾§å¯¹è±¡çš„å®ä¾‹ï¼Œ åˆ™è¡¨è¾¾å¼è¿”å›true, å¦åˆ™è¿”å›false ã€‚\n\n> instanceofå¯¹åŸºæœ¬æ•°æ®ç±»å‹æ£€æµ‹ä¸èµ·ä½œç”¨ï¼Œå› ä¸ºåŸºæœ¬æ•°æ®ç±»å‹æ²¡æœ‰åŸå‹é“¾ã€‚å¯ä»¥å‡†ç¡®çš„åˆ¤æ–­å¤æ‚æ•°æ®ç±»å‹ã€‚\n\n```javascript\n[1, 2, 3] instanceof Array // true \n/abc/ instanceof RegExp // true \n({}) instanceof Object // true \n(function(){}) instanceof Function // true\n\n// åŸºäºconstructor \na.constructor === Array; \n// åŸºäºObject.prototype.isPrototypeOf \nArray.prototype.isPrototypeOf(a); \n// 4.åŸºäºgetPrototypeOf \nObject.getPrototypeOf(a) === Array.prototype; \n```\n\n## Object.prototype.toString.call\n\nå¯ä»¥æ£€æµ‹å„ç§æ•°æ®ç±»å‹ï¼Œæ¨èä½¿ç”¨ã€‚\n\n```javascript\nObject.prototype.toString.call([]); // => [object Array] \nObject.prototype.toString.call({}); // => [object Object] \nObject.prototype.toString.call(''); // => [object String] \nObject.prototype.toString.call(new Date()); // => [object Date] \nObject.prototype.toString.call(1); // => [object Number] \nObject.prototype.toString.call(function () {}); // => [object Function] \nObject.prototype.toString.call(/test/i); // => [object RegExp] \nObject.prototype.toString.call(true); // => [object Boolean] \nObject.prototype.toString.call(null); // => [object Null] \nObject.prototype.toString.call(); // => [object Undefined]\n```\n\n```javascript\nlet isType = type => obj => {\n  return Object.prototype.toString.call( obj ) === '[object ' + type + ']';\n}\n \nvar isString = isType( 'String' ); \nvar isArray = isType( 'Array' ); \nvar isNumber = isType( 'Number' );\n\nconsole.log( isArray( [ 1, 2, 3 ] ) ); //true\n```\n\n## constructor\nconstructorä¹Ÿä¸æ˜¯ä¿é™©çš„ï¼Œå› ä¸ºconstructorå±æ€§æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ï¼Œä¼šå¯¼è‡´æ£€æµ‹å‡ºçš„ç»“æœä¸æ­£ç¡®ã€‚\n\n```js\nconsole.log([].constructor === Array)   // true\nfunction a() {}\nconsole.log(a.constructor === Function)   // true\nconsole.log(12.constructor === Number)  // true\nconsole.log('22'.constructor === String)  // true\nconsole.log([] .constructor ===  Array)   // true\nconsole.log({a: 1}.constructor ===  Object) // true\nconsole.log(true.constructor === Boolean) // true\nconsole.log(json.constructor === Object) // true\nconsole.log((new Date()).constructor === Date)   // true\nconsole.log(reg.constructor ===  RegExp) //true\nconsole.log(error.constructor === Error) // true\n```\n","tags":["æ•´ç†"],"categories":["çŸ¥è¯†"]},{"title":"jsåˆ›å»ºå¯¹è±¡å®ç°ç»§æ‰¿","url":"%2Fjs%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1%E5%AE%9E%E7%8E%B0%E7%BB%A7%E6%89%BF.html","content":"\nä»Šå¤©10æœˆ31æ—¥ï¼Œä¸‡åœ£èŠ‚å‰å¤œã€‚å¸Œæœ›ffçš„ç—…æ—©ç‚¹å¥½ï¼Œèº«ä½“å¥åº·ã€‚\n\n## åˆ›å»ºå¯¹è±¡(å­—é¢é‡ã€æ„é€ å‡½æ•°ã€createæ–¹æ³•ã€è°ƒç”¨å‡½æ•°è¿”å›å¯¹è±¡)\n```javascript\nvar obj = {} // å­—é¢é‡ \nvar obj = new Object() // å¾ˆå°‘è§ï¼Œæ€§èƒ½ä½ æ²¡æœ‰å½¢å‚æ—¶å¯çœç•¥()\nvar obj = Object.create(null) // ä»¥xxä¸ºåŸå‹åˆ›å»ºå¯¹è±¡\nvar obj = Object.assign({})   // å¤åˆ¶åˆ°ç›®æ ‡å¯¹è±¡\n// Object.assign()è¿˜å¯ä»¥å»é™¤å¤šä½™çš„å‚æ•°è¦†ç›–\nObject.assign({ a: 1, b: 2 }, { b: 3, c: 3 })\nconst newObj = { ...{ a: 1, b: 2 }, ...{ b: 3, c: 3 } }\n// {a: 1, b: 3, c: 3}\n// Object() ==> {}\n```\n\n---\n<!--more-->\n\n### å¤åˆ¶ä¸€ä¸ªå¯¹è±¡\n```javascript\nvar obj = { a: 1 };\nvar copy = Object.assign({}, obj);\nconsole.log(copy); // { a: 1 }\n```\n\n### æµ…æ‹·è´\n\nObject.assign()æ‹·è´çš„æ˜¯å±æ€§å€¼ã€‚å‡å¦‚æºå¯¹è±¡çš„å±æ€§å€¼æ˜¯ä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒä¹Ÿåªæ‹·è´é‚£ä¸ªå¼•ç”¨å€¼ã€‚\n\n```javascript\nlet obj1 = { a: 0 , b: { c: 0}};\nlet obj2 = Object.assign({}, obj1);\nconsole.log(JSON.stringify(obj2)); // { a: 0, b: { c: 0}}\n\nobj1.a = 1;\nconsole.log(JSON.stringify(obj1)); // { a: 1, b: { c: 0}}\nconsole.log(JSON.stringify(obj2)); // { a: 0, b: { c: 0}}\n\nobj2.a = 2;\nconsole.log(JSON.stringify(obj1)); // { a: 1, b: { c: 0}}\nconsole.log(JSON.stringify(obj2)); // { a: 2, b: { c: 0}}\n\nobj2.b.c = 3;\nconsole.log(JSON.stringify(obj1)); // { a: 1, b: { c: 3}}\nconsole.log(JSON.stringify(obj2)); // { a: 2, b: { c: 3}}\n\n// Deep Clone\nobj1 = { a: 0 , b: { c: 0}};\nlet obj3 = JSON.parse(JSON.stringify(obj1));\nobj1.a = 4;\nobj1.b.c = 4;\nconsole.log(JSON.stringify(obj3)); // { a: 0, b: { c: 0}}\n```\n\n### åˆå¹¶å¯¹è±¡\n```javascript\nvar o1 = { a: 1 };\nvar o2 = { b: 2 };\nvar o3 = { c: 3 };\n\nvar obj = Object.assign(o1, o2, o3);\nconsole.log(obj); // { a: 1, b: 2, c: 3 }\nconsole.log(o1);  // { a: 1, b: 2, c: 3 }, æ³¨æ„ç›®æ ‡å¯¹è±¡è‡ªèº«ä¹Ÿä¼šæ”¹å˜ã€‚\n```\n\n### åˆå¹¶ç›¸åŒå±æ€§çš„å¯¹è±¡\n```javascript\nvar o1 = { a: 1, b: 1, c: 1 };\nvar o2 = { b: 2, c: 2 };\nvar o3 = { c: 3 };\n\nvar obj = Object.assign({}, o1, o2, o3);\nconsole.log(obj); // { a: 1, b: 2, c: 3 }\n```\n\n### åˆ›å»ºå¯¹è±¡æ¨¡å¼(6ç§)\n#### å·¥å‚æ¨¡å¼\n\nåœ¨ä¸€ä¸ªå‡½æ•°å†…åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œç»™ç©ºå¯¹è±¡æ·»åŠ å±æ€§å’Œå±æ€§å€¼ï¼Œreturnè¿™ä¸ªå¯¹è±¡ã€‚ç„¶åè°ƒç”¨è¿™ä¸ªå‡½æ•°å¹¶ä¼ å…¥å‚æ•°æ¥ä½¿ç”¨ã€‚\n\n```javascript\nfunction createPerson(name, age, job){ \n    var o = new Object();\n    o.name = name;\n    o.age = age;\n    o.sayName = function(){ alert(this.name); }; \n    return o;\n}\nvar person1 = createPerson(\"cosyer\", 23); \nconsole.log(person1.name) //cosyer\nconsole.log(person1.sayName()) //cosyer\n```\nä¼˜ç‚¹ï¼šè§£å†³äº†åˆ›å»ºå¤šä¸ªç›¸ä¼¼å¯¹è±¡çš„é—®é¢˜\nç¼ºç‚¹ï¼šæ²¡æœ‰è§£å†³å¯¹è±¡è¯†åˆ«çš„é—®é¢˜ï¼ˆå³æ€æ ·çŸ¥é“ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹ï¼‰\n\n#### æ„é€ å‡½æ•°æ¨¡å¼\n\nåˆ›å»ºä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç„¶åç”¨new åˆ›å»ºæ„é€ å‡½æ•°çš„å®ä¾‹ã€‚\n\n```javascript\nfunction Person(name, age, job){\n    this.name = name; \n    this.age = age; \n    this.sayName = function(){ \n        console.log(this.name); \n    }; \n}\n\nvar person1 = new Person(\"cosyer\", 22); \nconsole.log(person1.name) //cosyer\nconsole.log(person1.sayName()) //cosyer\n```\n\nä¼˜ç‚¹ï¼š\n\n1. å­ç±»å‹æ„é€ å‡½æ•°ä¸­å¯å‘è¶…ç±»å‹æ„é€ å‡½æ•°ä¼ é€’å‚æ•°ã€‚\n2. æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œå¯¹äºå±æ€§å€¼æ˜¯å¼•ç”¨ç±»å‹çš„å°±å¯é€šè¿‡åœ¨æ¯ä¸ªå®ä¾‹ä¸Šé‡æ–°åˆ›å»ºä¸€éï¼Œé¿å…æ‰€æœ‰å®ä¾‹çš„è¯¥å±æ€§å€¼æŒ‡å‘åŒä¸€å †å†…å­˜åœ°å€ï¼Œä¸€ä¸ªæ”¹å…¶ä»–ä¹Ÿè·Ÿç€æ”¹ã€‚\nåŸå§‹ å¤æ‚(å¼•ç”¨) \nç¼ºç‚¹ï¼š\nå¯¹äºä¸€äº›å¯å…±ç”¨çš„å±æ€§æ–¹æ³•ï¼ˆæ¯”å¦‚è¿™è¾¹çš„this.sayNameï¼‰æ²¡å¿…è¦éƒ½åœ¨æ¯ä¸ªå®ä¾‹ä¸Šé‡æ–°åˆ›å»ºä¸€éï¼Œå ç”¨å†…å­˜ã€‚(æ— æ³•å¤ç”¨)\n\n\n- å¯¹è±¡å­—é¢é‡vsæ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡å¯¹æ¯”\n\nå­—é¢é‡çš„ä¼˜åŠ¿ï¼š\n\n1. ä»£ç é‡æ›´å°‘ï¼Œæ›´æ˜“è¯»ï¼›\n\n2. å¯ä»¥å¼ºè°ƒå¯¹è±¡å°±æ˜¯ä¸€ä¸ªç®€å•çš„å¯å˜çš„æ•£åˆ—è¡¨ï¼Œè€Œä¸å¿…ä¸€å®šæ´¾ç”Ÿè‡ªæŸä¸ªç±»ï¼›\n\n3. å¯¹è±¡å­—é¢é‡è¿è¡Œé€Ÿåº¦æ›´å¿«ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥åœ¨è§£æçš„æ—¶å€™è¢«ä¼˜åŒ–ï¼šå®ƒä»¬ä¸éœ€è¦ä½œç”¨åŸŸè§£æ(scope resolution)ï¼›å› ä¸ºå­˜åœ¨æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŒåçš„æ„é€ å‡½æ•°Object()çš„å¯èƒ½ï¼Œå½“æˆ‘ä»¬è°ƒç”¨Object()çš„æ—¶å€™ï¼Œè§£æå™¨éœ€è¦é¡ºç€ä½œç”¨åŸŸé“¾ä»å½“å‰ä½œç”¨åŸŸå¼€å§‹æŸ¥æ‰¾ï¼Œå¦‚æœåœ¨å½“å‰ä½œç”¨åŸŸæ‰¾åˆ°äº†åä¸ºObject()çš„å‡½æ•°å°±æ‰§è¡Œï¼Œå¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°±ç»§ç»­é¡ºç€ä½œç”¨åŸŸé“¾å¾€ä¸Šç…§ï¼Œç›´åˆ°æ‰¾åˆ°å…¨å±€Object()æ„é€ å‡½æ•°ä¸ºæ­¢ï¼›\n\n4. Object()æ„é€ å‡½æ•°å¯ä»¥æ¥æ”¶å‚æ•°ï¼Œé€šè¿‡è¿™ä¸ªå‚æ•°å¯ä»¥æŠŠå¯¹è±¡å®ä¾‹çš„åˆ›å»ºè¿‡ç¨‹å§”æ‰˜ç»™å¦ä¸€ä¸ªå†…ç½®æ„é€ å‡½æ•°ï¼Œå¹¶è¿”å›å¦å¤–ä¸€ä¸ªå¯¹è±¡å®ä¾‹ï¼Œè€Œè¿™å¾€å¾€ä¸æ˜¯ä½ æƒ³è¦çš„ã€‚\n\n#### åŸå‹æ¨¡å¼\n\nåˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç»™å‡½æ•°åŸå‹å¯¹è±¡èµ‹å€¼ã€‚åˆ©ç”¨å‡½æ•°çš„prototypeå±æ€§æŒ‡å‘å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼Œä»è€Œåœ¨åŸå‹å¯¹è±¡æ·»åŠ æ‰€æœ‰å®ä¾‹å¯å…±äº«çš„å±æ€§å’Œæ–¹æ³•ã€‚\n\n```javascript\nfunction Person(){ }\nPerson.prototype.name = \"cosyer\"; \nPerson.prototype.age = 23; \nPerson.prototype.sayName = function(){\n     console.log(this.name); \n};\nvar person1 = new Person();\nconsole.log(person1.name) //cosyer\nconsole.log(person1.sayName()) //cosyer\n```\nä¼˜ç‚¹ï¼š\nå¯ä»¥è®©æ‰€æœ‰å¯¹è±¡å®ä¾‹å…±äº«å®ƒæ‰€åŒ…å«çš„å±æ€§å’Œæ–¹æ³•(å¤ç”¨æ€§)ã€‚\nç¼ºç‚¹ï¼š\n\n1. åœ¨åˆ›å»ºå­ç±»å‹çš„å®ä¾‹æ—¶ï¼Œä¸èƒ½å‘è¶…ç±»å‹çš„æ„é€ å‡½æ•°ä¸­ä¼ é€’å‚æ•°ã€‚\n2. å¦‚æœåŒ…å«å¼•ç”¨ç±»å‹å€¼çš„å±æ€§ï¼Œé‚£ä¸€ä¸ªå®ä¾‹æ”¹äº†è¿™ä¸ªå±æ€§ï¼ˆå¼•ç”¨ç±»å‹å€¼ï¼‰ï¼Œå…¶ä»–å®ä¾‹ä¹Ÿè·Ÿç€æ”¹å˜ã€‚\n\n#### ç»„åˆæ¨¡å¼\n\næ„é€ å‡½æ•°æ¨¡å¼ç”¨äºå®šä¹‰å®ä¾‹å±æ€§ï¼Œè€ŒåŸå‹æ¨¡å¼ç”¨äºå®šä¹‰æ–¹æ³•å’Œå…±äº«çš„å±æ€§ã€‚ç®€å•æ¥è¯´å°±æ˜¯å±æ€§å€¼æ˜¯å¼•ç”¨ç±»å‹çš„å°±ç”¨æ„é€ å‡½æ•°æ¨¡å¼ï¼Œæ–¹æ³•å’Œå±æ€§èƒ½å…±äº«çš„å°±ç”¨åŸå‹æ¨¡å¼ï¼Œå–ç²¾å»ç³Ÿã€‚\n\n```javascript\nfunction Person(name, age){ //æ„é€ å‡½æ•°æ¨¡å¼\n    this.name = name; \n    this.age = age; \n    this.friends = [\"aa\", \"bb\"]; \n}\nPerson.prototype = {  //åŸå‹æ¨¡å¼\n    constructor : Person, \n    sayName : function(){ \n        console.log(this.name); \n    }\n}\nPerson.prototype.hobby = {exercise:\"ball\"}; //åŸå‹æ¨¡å¼\n\nvar person1 = new Person(\"cosyer\", 23);\nvar person2 = new Person(\"cuby\", 27)\nperson1.friends.push(\"cc\");   \nconsole.log(person1.friends);   //\"aa,bb,cc\"\nconsole.log(person2.friends);   //\"aa,bb\"\nperson1.sayName = function(){console.log(this.age)};\nperson1.sayName();  //22\nperson2.sayName();  //cuby\nperson1.hobby.exercise = \"running\";\nconsole.log(person1.hobby);  //{exercise: \"running\"}\nconsole.log(person2.hobby); //{exercise: \"running\"}\n```\n\n#### åŠ¨æ€åŸå‹æ¨¡å¼\n```javascript\nfunction Person(name, age){ //æ„é€ å‡½æ•°æ¨¡å¼\n    this.name = name; \n    this.age = age; \n    this.friends = [\"aa\", \"bb\"]; \n    if(typeof Person.prototype.hobby !== 'object'){\n        // åªå†™å…¥1æ¬¡\n        Person.prototype.hobby = {exercise:\"ball\"};  \n    }\n}\n```\n\n#### å¯„ç”Ÿæ„é€ å‡½æ•°æ¨¡å¼\n\n## ç»§æ‰¿æ–¹å¼(9ç§)\n### æ„é€ å‡½æ•°ç»§æ‰¿(å¤åˆ¶çˆ¶ç±»çš„å®ä¾‹å±æ€§ç»™å­ç±»)\n```javascript\nfunction SuperType(){ \n    this.colors = [\"red\", \"blue\", \"green\"]; \n}\nfunction SubType(){ //ç»§æ‰¿äº† SuperType \n    SuperType.call(this); \n}\n\nvar instance1 = new SubType(); \ninstance1.colors.push(\"black\"); \nconsole.log(instance1.colors); //\"red,blue,green,black\"\nvar instance2 = new SubType(); \nconsole.log(instance2.colors); //\"red,blue,green\"\n```\nä¼˜ç‚¹ï¼š\n1. ç®€å•ï¼Œæ˜“äºå®ç°\n2. çˆ¶ç±»æ–°å¢åŸå‹æ–¹æ³•ã€åŸå‹å±æ€§ï¼Œå­ç±»éƒ½èƒ½è®¿é—®åˆ°\nç¼ºç‚¹ï¼š\n1. æ— æ³•å®ç°å¤šç»§æ‰¿ï¼Œå› ä¸ºåŸå‹ä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªå®ä¾‹æ›´æ”¹\n2. æ¥è‡ªåŸå‹å¯¹è±¡çš„æ‰€æœ‰å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼ˆä¸Šè¯‰ä¾‹å­ä¸­çš„colorå±æ€§ï¼‰\n3. åˆ›å»ºå­ç±»å®ä¾‹æ—¶ï¼Œæ— æ³•å‘çˆ¶æ„é€ å‡½æ•°ä¼ å‚\n\n### åŸå‹é“¾ç»§æ‰¿(å°†çˆ¶ç±»çš„å®ä¾‹ä½œä¸ºå­ç±»çš„åŸå‹)\n```javascript\nfunction SuperType(){ \n    this.colors = [\"red\", \"blue\", \"green\"];\n}\nfunction SubType(){};\nSubType.prototype = new SuperType();\n\nvar instance1 = new SubType();\nvar instance2 = new SubType(); \nconsole.log(instance1.colors); //[\"red\", \"blue\", \"green\"]\nconsole.log(instance2.colors);//[\"red\", \"blue\", \"green\"]\n\ninstance1.colors.push(\"black\"); \nconsole.log(instance1.colors);//[\"red\", \"blue\", \"green\", \"black\"]\nconsole.log(instance2.colors);//[\"red\", \"blue\", \"green\", \"black\"]\n```\nä¼˜ç‚¹ï¼š\n1. ç®€å•ï¼Œæ˜“äºå®ç°\n2. çˆ¶ç±»æ–°å¢åŸå‹æ–¹æ³•ã€åŸå‹å±æ€§ï¼Œå­ç±»éƒ½èƒ½è®¿é—®åˆ°\nç¼ºç‚¹ï¼š\n1. æ— æ³•å®ç°å¤šç»§æ‰¿ï¼Œå› ä¸ºåŸå‹ä¸€æ¬¡åªèƒ½è¢«ä¸€ä¸ªå®ä¾‹æ›´æ”¹\n2. æ¥è‡ªåŸå‹å¯¹è±¡çš„æ‰€æœ‰å±æ€§è¢«æ‰€æœ‰å®ä¾‹å…±äº«ï¼ˆä¸Šè¯‰ä¾‹å­ä¸­çš„colorå±æ€§ï¼‰\n3. åˆ›å»ºå­ç±»å®ä¾‹æ—¶ï¼Œæ— æ³•å‘çˆ¶æ„é€ å‡½æ•°ä¼ å‚\n\n### ç»„åˆç»§æ‰¿(å°†åŸå‹é“¾å’Œå€Ÿç”¨æ„é€ å‡½æ•°çš„æŠ€æœ¯ç»„åˆåˆ°ä¸€å—ã€‚ä½¿ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿ï¼Œè€Œé€šè¿‡æ„é€ å‡½æ•°æ¥å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿)\n```javascript\nfunction SuperType(name){  //çˆ¶ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰\n    this.name = name;\n}\n\nSuperType.prototype.sayName = function(){  //çˆ¶ç±»çš„åŸå‹æ·»åŠ ä¸€ä¸ªæ–¹æ³•\n    console.log(this.name);\n}\n\nfunction SubType(name, age){  //å€Ÿç”¨æ„é€ å‡½æ•°æ¥å®ç°å¯¹å®ä¾‹å±æ€§çš„ç»§æ‰¿ \n    SuperType.call(this, name);    //ç»§æ‰¿å®ä¾‹å±æ€§ è¿™è¾¹ç»§æ‰¿this.name = name;\n    this.age = age;     //è‡ªå·±çš„å±æ€§\n}\n\nSubType.prototype = new SuperType();    //ä½¿ç”¨åŸå‹é“¾å®ç°å¯¹åŸå‹å±æ€§å’Œæ–¹æ³•çš„ç»§æ‰¿  è¿™è¾¹æ˜¯ç»§æ‰¿\nSubType.prototype.constructor = SubType;\nSubType.prototype.sayAge = function(){ \n    alert(this.age); \n};\nvar instance1 = new SubType(\"cosyer\", 23);\nconsole.log(instance1.age)   //23\nconsole.log(instance1.name)  //cosyer\ninstance1.sayName(); //cosyer\ninstance1.sayAge(); //23\n```\nä¼˜ç‚¹ï¼š\n1. å¼¥è¡¥äº†æ„é€ ç»§æ‰¿çš„ç¼ºç‚¹ï¼Œç°åœ¨æ—¢å¯ä»¥ç»§æ‰¿å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç»§æ‰¿åŸå‹çš„å±æ€§å’Œæ–¹æ³•\n2. æ—¢æ˜¯å­ç±»çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯çˆ¶ç±»çš„å®ä¾‹\n3. å¯ä»¥å‘çˆ¶ç±»ä¼ é€’å‚æ•°\n4. å‡½æ•°å¯ä»¥å¤ç”¨\nç¼ºç‚¹ï¼š\n1. è°ƒç”¨äº†ä¸¤æ¬¡çˆ¶ç±»æ„é€ å‡½æ•°ï¼Œç”Ÿæˆäº†ä¸¤ä»½å®ä¾‹\n2. constructoræŒ‡å‘é—®é¢˜\n\n### å®ä¾‹ç»§æ‰¿(ä¸ºçˆ¶ç±»å®ä¾‹æ·»åŠ æ–°ç‰¹å¾ï¼Œä½œä¸ºå­ç±»å®ä¾‹è¿”å›)\n```js\nfunction Son(name) {\n    let f=new Father('ä¼ ç»™çˆ¶ç±»çš„å‚æ•°')\n    f.name=name||'son'\n    return f\n}\n\nlet s = new Son(\"son\"); //æˆ–è€…ç›´æ¥è°ƒç”¨å­ç±»æ„é€ å‡½æ•° let s = Son(\"son\");\nconsole.log(s.name); // son\ns.sayAge(); // 18\ns.sayName(); // son\nconsole.log(s.age); // 18\nconsole.log(s instanceof Father); // true\nconsole.log(s instanceof Son); // false\nconsole.log(s.constructor === Father); // true\nconsole.log(s.constructor === Son); // false=\n```\nä¼˜ç‚¹ï¼š\n1. ä¸é™åˆ¶è°ƒç”¨æ–¹å¼ï¼Œä¸ç®¡æ˜¯new å­ç±»()è¿˜æ˜¯å­ç±»(),è¿”å›çš„å¯¹è±¡å…·æœ‰ç›¸åŒçš„æ•ˆæœ\nç¼ºç‚¹ï¼š\n1. å®ä¾‹æ˜¯çˆ¶ç±»çš„å®ä¾‹ï¼Œä¸æ˜¯å­ç±»çš„å®ä¾‹\n2. ä¸æ”¯æŒå¤šç»§æ‰¿\n\n### æ‹·è´ç»§æ‰¿(å¯¹çˆ¶ç±»å®ä¾‹ä¸­çš„çš„æ–¹æ³•ä¸å±æ€§æ‹·è´ç»™å­ç±»çš„åŸå‹)\n```js\nfunction Son(name) {\n    let f = new Father(\"ä¼ ç»™çˆ¶ç±»çš„å‚æ•°\");\n    for (let k in f) {\n    Son.prototype[k] = f[k];\n    }\n    Son.prototype.name = name;\n}\n\nlet s = new Son(\"son\");\nconsole.log(s.name); // son\ns.sayAge(); // 18\ns.sayName(); // son\nconsole.log(s.age); // 18\nconsole.log(s instanceof Father); // false\nconsole.log(s instanceof Son); // true\nconsole.log(s.constructor === Father); // false\nconsole.log(s.constructor === Son); // true\n```\nä¼˜ç‚¹ï¼š\n1. æ”¯æŒå¤šç»§æ‰¿\nç¼ºç‚¹ï¼š\n1. æ•ˆç‡ä½ï¼Œæ€§èƒ½å·®ï¼Œå ç”¨å†…å­˜é«˜ï¼ˆå› ä¸ºéœ€è¦æ‹·è´çˆ¶ç±»å±æ€§ï¼‰\n2. æ— æ³•è·å–çˆ¶ç±»ä¸å¯æšä¸¾çš„æ–¹æ³•ï¼ˆä¸å¯æšä¸¾çš„æ–¹æ³•ï¼Œä¸èƒ½ä½¿ç”¨for-inè®¿é—®åˆ°)\n\n### å¯„ç”Ÿç»„åˆç»§æ‰¿(é€šè¿‡å¯„ç”Ÿæ–¹å¼ï¼Œç æ‰çˆ¶ç±»çš„å®ä¾‹å±æ€§ï¼Œé¿å…äº†ç»„åˆç»§æ‰¿äºŒæ¬¡æ‰§è¡Œçˆ¶ç±»æ„é€ å‡½æ•°çš„ç¼ºç‚¹)\n```js\nfunction Son(name) {\n    Father.call(this);\n    this.name = name || \"son\";\n}\n\n// æ–¹æ³•ä¸€  è‡ªå·±åŠ¨æ‰‹åˆ›å»ºä¸€ä¸ªä¸­é—´ç±»\n// (function() {\n//   let NoneFun = function() {};\n//   NoneFun.prototype = Father.prototype;\n//   Son.prototype = new NoneFun();\n//   Son.prototype.constructor = Son;\n// })();\n\n// æ–¹æ³•äºŒ  ç›´æ¥å€Ÿç”¨Object.create()æ–¹æ³•\nSon.prototype = Object.create(Father.prototype);\n// ä¿®å¤æ„é€ å‡½æ•°æŒ‡å‘\nSon.prototype.constructor = Son;\n\nlet s = new Son(\"son\");\nconsole.log(s.name); // son\ns.sayAge(); // 18\ns.sayName(); // son\nconsole.log(s.age); // 18\nconsole.log(s instanceof Father); // true\nconsole.log(s instanceof Son); // true\nconsole.log(s.constructor === Father); // false\nconsole.log(s.constructor === Son); // true\n```\nä¼˜ç‚¹ï¼š\n1. æ¯”è¾ƒå®Œç¾ï¼ˆjså®ç°ç»§æ‰¿é¦–é€‰æ–¹å¼ï¼‰\nç¼ºç‚¹ï¼š\n1.å®ç°èµ·æ¥è¾ƒä¸ºå¤æ‚ï¼ˆå¯é€šè¿‡Object.createç®€åŒ–ï¼‰\n\n```js\nfunction Person(obj) {\n    this.name = obj.name\n    this.age = obj.age\n}\nPerson.prototype.add = function(value){\n    console.log(value)\n}\nvar p1 = new Person({name:\"ç•ªèŒ„\", age: 18})\n\nfunction Person1(obj) {\n    Person.call(this, obj)\n    this.sex = obj.sex\n}\n// è¿™ä¸€æ­¥æ˜¯ç»§æ‰¿çš„å…³é”®\nPerson1.prototype = Object.create(Person.prototype)\nPerson1.prototype.play = function(value){\n    console.log(value)\n}\nvar p2 = new Person1({name:\"é¸¡è›‹\", age: 118, sex: \"ç”·\"})\n```\n\n### es6 classç»§æ‰¿(ä½¿ç”¨extendsè¡¨æ˜ç»§æ‰¿è‡ªå“ªä¸ªçˆ¶ç±»ï¼Œå¹¶ä¸”åœ¨å­ç±»æ„é€ å‡½æ•°ä¸­å¿…é¡»è°ƒç”¨super) \n```js\nclass Son extends Father {\n    constructor(name) {\n    super(name);\n    this.name = name || \"son\";\n    }\n}\n\nlet s = new Son(\"son\");\nconsole.log(s.name); // son\ns.sayAge(); // 18\ns.sayName(); // son\nconsole.log(s.age); // 18\nconsole.log(s instanceof Father); // true\nconsole.log(s instanceof Son); // true\nconsole.log(s.constructor === Father); // false\nconsole.log(s.constructor === Son); // true\n```\n\n### åŸå‹å¼ç»§æ‰¿\nåˆ©ç”¨ä¸€ä¸ªç©ºå¯¹è±¡ä½œä¸ºä¸­ä»‹ï¼Œå°†æŸä¸ªå¯¹è±¡ç›´æ¥èµ‹å€¼ç»™ç©ºå¯¹è±¡æ„é€ å‡½æ•°çš„åŸå‹ã€‚\n```js\nfunction object(obj){\n  function F(){}\n  F.prototype = obj;\n  return new F();\n}\n```\nç¼ºç‚¹ï¼š\n- åŸå‹é“¾ç»§æ‰¿å¤šä¸ªå®ä¾‹çš„å¼•ç”¨ç±»å‹å±æ€§æŒ‡å‘ç›¸åŒï¼Œå­˜åœ¨ç¯¡æ”¹çš„å¯èƒ½ã€‚\n- æ— æ³•ä¼ é€’å‚æ•°\n\n### å¯„ç”Ÿå¼ç»§æ‰¿\næ ¸å¿ƒï¼šåœ¨åŸå‹å¼ç»§æ‰¿çš„åŸºç¡€ä¸Šï¼Œå¢å¼ºå¯¹è±¡ï¼Œè¿”å›æ„é€ å‡½æ•°ã€‚\n```js\nfunction createAnother(original){\n  var clone = object(original); // é€šè¿‡è°ƒç”¨ object() å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡\n  clone.sayHi = function(){  // ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºå¯¹è±¡\n    alert(\"hi\");\n  };\n  return clone; // è¿”å›è¿™ä¸ªå¯¹è±¡\n}\n```\nç¼ºç‚¹ï¼ˆåŒåŸå‹å¼ç»§æ‰¿ï¼‰\n\n## ES5/ES6 çš„ç»§æ‰¿é™¤äº†å†™æ³•ä»¥å¤–è¿˜æœ‰ä»€ä¹ˆåŒºåˆ«\n- ES5 çš„ç»§æ‰¿ï¼Œå®è´¨æ˜¯å…ˆåˆ›é€ å­ç±»çš„å®ä¾‹å¯¹è±¡thisï¼Œç„¶åå†å°†çˆ¶ç±»çš„æ–¹æ³•æ·»åŠ åˆ°thisä¸Šé¢ï¼ˆParent.apply(this)ï¼‰ã€‚\n```js\nfunction Super() {}\nfunction Sub() {}\n\nSub.prototype = new Super();\nSub.prototype.constructor = Sub;\n\nvar sub = new Sub();\n\nSub.__proto__ === Function.prototype;\n```\n\n- ES6 çš„ç»§æ‰¿æœºåˆ¶å®Œå…¨ä¸åŒï¼Œå®è´¨æ˜¯å…ˆå°†çˆ¶ç±»å®ä¾‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼ŒåŠ åˆ°thisä¸Šé¢ï¼ˆæ‰€ä»¥å¿…é¡»å…ˆè°ƒç”¨superæ–¹æ³•ï¼‰ï¼Œç„¶åå†ç”¨å­ç±»çš„æ„é€ å‡½æ•°ä¿®æ”¹thisã€‚\n```js\nclass A extends B{}\nA.__proto__ === B;  //ç»§æ‰¿å±æ€§\nA.prototype.__proto__ == B.prototype;//ç»§æ‰¿æ–¹æ³•\n```\n\n`Happy Halloween!`\n","tags":["æ•´ç†"],"categories":["çŸ¥è¯†"]},{"title":"å®ç°jsonp","url":"%2F%E5%AE%9E%E7%8E%B0jsonp.html","content":"\nä½œä¸ºå¸¸ç”¨çš„è·¨åŸŸè§£å†³æ–¹æ¡ˆï¼Œæ€ä¹ˆèƒ½ä¸ç”¨åŸç”Ÿå®ç°ä¸€ä¸‹å‘¢ï¼\n\njsonpè·¨åŸŸå…¶å®ä¹Ÿæ˜¯JavaScriptè®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§ä»£ç†æ¨¡å¼ã€‚\nåœ¨htmlé¡µé¢ä¸­é€šè¿‡ç›¸åº”çš„æ ‡ç­¾ä»ä¸åŒåŸŸåä¸‹åŠ è½½é™æ€èµ„æºæ–‡ä»¶æ˜¯è¢«æµè§ˆå™¨å…è®¸çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªâ€œçŠ¯ç½ªæ¼æ´â€æ¥è¿›è¡Œè·¨åŸŸã€‚\nä¸€èˆ¬ï¼Œæˆ‘ä»¬å¯ä»¥åŠ¨æ€çš„åˆ›å»ºscriptæ ‡ç­¾ï¼Œå†å»è¯·æ±‚ä¸€ä¸ªå¸¦å‚ç½‘å€æ¥å®ç°è·¨åŸŸé€šä¿¡ã€‚è¡¥å……ä¸€ç‚¹ï¼ŒJSONPä¸ä½¿ç”¨XMLHttpRequestå¯¹è±¡åŠ è½½èµ„æºï¼Œä¸å±äºçœŸæ­£æ„ä¹‰ä¸Šçš„AJAXã€‚\n\n```javascript\n// å®ç°ç›®æ ‡\nJSONP(url, {\n  data: {\n    key1: value1\n  },\n  callback: function (data) {\n    // data æ˜¯æœåŠ¡ç«¯è¿”å›çš„æ•°æ®\n  }\n})\n```\n\n--- \n<!-- more -->\n\n- å¸¦å‚æ•°\n```javascript\nconst JSONP = (url, jsonpObj) => {\n  // å±æ€§å \n  let cbName = \"cb\" + JSONP.count++\n  // å›è°ƒå‡½æ•° \n  let cbQuery = \"JSONP.\" + cbName\n  let paramsToQuery = obj => {\n    let query = '?'\n    for (let k in obj) {\n      if (obj.hasOwnProperty(k)) {\n        query += `${k}=${obj[k]}&`\n      }      \n    }\n    return query\n  }\n  JSONP[cbName] = data => {\n    try {\n      jsonpObj.callback(data)\n    } finally {\n      delete JSONP[cbName]\n      document.body.removeChild(script)\n    }   \n  }\n  let queryStr = paramsToQuery(jsonpObj.data) + 'callback=' + cbQuery\n  let script = document.createElement('script')\n  script.src = url + encodeURIComponent(queryStr)\n  document.body.appendChild(script)\n}\nJSONP.count = 0\n```\n\n- easyæ¨¡å¼\n```js\nfunction jsonp(url, jsonpCallback, success) {\n  const script = document.createElement('script')\n  script.src = url\n  script.async = true\n  script.type = 'text/javascript'\n  window[jsonpCallback] = function(data) {\n    success && success(data)\n  }\n  document.body.appendChild(script)\n}\n```\n\n- ç®€å•çš„ä¸ä¼ å‚æ•°çš„jsonpå®ç°\n```js\nconst jsonp = url => {\n  new Promise((resolve, reject) => {\n    // åˆ›å»ºæ ‡ç­¾\n    const script = document.createElement('script')\n    // è®¾ç½®å›è°ƒå\n    const callbackId = `jsonp_${Date.now()}`\n    // æ‹¼æ¥url\n    script.src = url.includes('?') ? `${url}&callback=${callbackId}` : `${url}?callback=${callbackId}`\n\n    // è®¾ç½®è¯»å–è¿”å›ç»“æœçš„å›è°ƒå‡½æ•°, å¿…é¡»è®¾ç½®åœ¨windowä¸Š\n    window[callbackId] = result => {\n      // é‡Šæ”¾å†…å­˜\n      delete window[callbackId]\n      // ç§»é™¤æ ‡ç­¾\n      document.body.removeChild(script)\n      // ç»“æœ\n      result ? resolve(result) : reject('404')\n    }\n\n    script.addEventListener('error', () => reject('script create fail'))\n    // å‘å‡ºè¯·æ±‚\n    document.body.appendChild(script)\n}\n\njsonp('').then(console.log)\n```\n\n## æœåŠ¡ç«¯å®ç°jsonp\n- express\n```js\n/* æœåŠ¡ç«¯ç›¸å…³æ“ä½œï¼Œä»¥expressä¸ºä¾‹ */\nlet express = require('express')\nlet app = express()\nconst port = '3000'\napp.get('/',function(req,res){\n  let {a,b,callback} = req.query\n  console.log(a)\n  console.log(b)\n  // æ³¨æ„ï¼Œè¿”å›ç»™scriptæ ‡ç­¾ï¼Œæµè§ˆå™¨ç›´æ¥æŠŠè¿™éƒ¨åˆ†å­—ç¬¦ä¸²æ‰§è¡Œ\n  res.send(`${callback}('æ•°æ®åŒ…')`)\n})\napp;listen(port)\n```\n\nå’ŒCORSç›¸æ¯”ï¼ŒJSONP æœ€å¤§çš„ä¼˜åŠ¿åœ¨äºå…¼å®¹æ€§å¥½ï¼ŒIE 10ä»¥ä¸‹ä½ç‰ˆæœ¬ä¸èƒ½ä½¿ç”¨ CORS ä½†å¯ä»¥ä½¿ç”¨ JSONPï¼Œç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œè¯·æ±‚æ–¹æ³•å•ä¸€ï¼Œåªæ”¯æŒ GET è¯·æ±‚ã€‚\n","tags":["çŸ¥è¯†"],"categories":["çŸ¥è¯†"]},{"title":"é«˜é€¼æ ¼çš„JSä»£ç ","url":"%2F%E9%AB%98%E9%80%BC%E6%A0%BC%E7%9A%84JS%E4%BB%A3%E7%A0%81.html","content":"\né»‘ç§‘æŠ€JSä»£ç æ•´ç† æ˜¯ä¸æ˜¯å¾ˆvoid 666\n\n### ä¸€è¡Œä»£ç å®ç°è¯„çº§\n```javascript\n\"â˜…â˜…â˜…â˜…â˜…â˜†â˜†â˜†â˜†â˜†\".slice(5 - rate, 10 - rate);å®šä¹‰ä¸€ä¸ªå˜é‡rateæ˜¯1åˆ°5çš„å€¼\n```\n\n### SBã€NBã€Hello World\n```javascript\n(!(~+[])+{})[--[~+\"\"][+[]]*[~+[]] + ~~!+[]]+({}+[])[[~!+[]]*~+[]]\n\n([][[]]+[])[+!![]]+([]+{})[!+[]+!![]]\n\n([]+[][(![]+[])[!+[]+!![]+!![]]+([]+{})[+!![]]+(!![]+[])[+!![]]+(!![]+[])[+[]]][([]+{})[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]]+(![]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+[]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+([]+{})[+!![]]+(!![]+[])[+!![]]]((!![]+[])[+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+([][[]]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]+!![]+!![]]+(![]+[])[!+[]+!![]]+([]+{})[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(+{}+[])[+!![]]+(!![]+[])[+[]]+([][[]]+[])[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]])())[+[]]+([][[]]+[])[!+[]+!![]+!![]]+(![]+[])[!+[]+!![]]+(![]+[])[!+[]+!![]]+([]+{})[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]+!![]+!![]]+[][(![]+[])[!+[]+!![]+!![]]+([]+{})[+!![]]+(!![]+[])[+!![]]+(!![]+[])[+[]]][([]+{})[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]]+(![]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+[]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+([]+{})[+!![]]+(!![]+[])[+!![]]]((!![]+[])[+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+([][[]]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]+!![]+!![]]+([][[]]+[])[+[]]+([][[]]+[])[+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(![]+[])[!+[]+!![]+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(+{}+[])[+!![]]+([]+[][(![]+[])[!+[]+!![]+!![]]+([]+{})[+!![]]+(!![]+[])[+!![]]+(!![]+[])[+[]]][([]+{})[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]]+(![]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+[]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+([]+{})[+!![]]+(!![]+[])[+!![]]]((!![]+[])[+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+([][[]]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]+!![]+!![]]+(![]+[])[!+[]+!![]]+([]+{})[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(+{}+[])[+!![]]+(!![]+[])[+[]]+([][[]]+[])[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]])())[!+[]+!![]+!![]]+([][[]]+[])[!+[]+!![]+!![]])()([][(![]+[])[!+[]+!![]+!![]]+([]+{})[+!![]]+(!![]+[])[+!![]]+(!![]+[])[+[]]][([]+{})[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]]+(![]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+[]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+([]+{})[+!![]]+(!![]+[])[+!![]]]((!![]+[])[+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+([][[]]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]+!![]+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(![]+[])[!+[]+!![]+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(+{}+[])[+!![]]+([]+[][(![]+[])[!+[]+!![]+!![]]+([]+{})[+!![]]+(!![]+[])[+!![]]+(!![]+[])[+[]]][([]+{})[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]]+(![]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+[]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+([]+{})[+!![]]+(!![]+[])[+!![]]]((!![]+[])[+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+([][[]]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]+!![]+!![]]+(![]+[])[!+[]+!![]]+([]+{})[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(+{}+[])[+!![]]+(!![]+[])[+[]]+([][[]]+[])[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]])())[!+[]+!![]+!![]]+([][[]]+[])[!+[]+!![]+!![]])()(([]+{})[+[]])[+[]]+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+[])+(!+[]+!![]+!![]+!![]+!![]+!![]+!![]+[]))+([]+{})[+!![]]+(!![]+[])[+!![]]+(![]+[])[!+[]+!![]]+([][[]]+[])[!+[]+!![]]+[][(![]+[])[!+[]+!![]+!![]]+([]+{})[+!![]]+(!![]+[])[+!![]]+(!![]+[])[+[]]][([]+{})[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]]+(![]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+[]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+([]+{})[+!![]]+(!![]+[])[+!![]]]((!![]+[])[+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+([][[]]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]+!![]+!![]]+([][[]]+[])[+[]]+([][[]]+[])[+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(![]+[])[!+[]+!![]+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(+{}+[])[+!![]]+([]+[][(![]+[])[!+[]+!![]+!![]]+([]+{})[+!![]]+(!![]+[])[+!![]]+(!![]+[])[+[]]][([]+{})[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]]+(![]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+[]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+([]+{})[+!![]]+(!![]+[])[+!![]]]((!![]+[])[+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+([][[]]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]+!![]+!![]]+(![]+[])[!+[]+!![]]+([]+{})[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(+{}+[])[+!![]]+(!![]+[])[+[]]+([][[]]+[])[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]])())[!+[]+!![]+!![]]+([][[]]+[])[!+[]+!![]+!![]])()([][(![]+[])[!+[]+!![]+!![]]+([]+{})[+!![]]+(!![]+[])[+!![]]+(!![]+[])[+[]]][([]+{})[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]]+(![]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+[]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+([]+{})[+!![]]+(!![]+[])[+!![]]]((!![]+[])[+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+([][[]]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]+!![]+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(![]+[])[!+[]+!![]+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(+{}+[])[+!![]]+([]+[][(![]+[])[!+[]+!![]+!![]]+([]+{})[+!![]]+(!![]+[])[+!![]]+(!![]+[])[+[]]][([]+{})[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]]+(![]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+[]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(!![]+[])[+[]]+([]+{})[+!![]]+(!![]+[])[+!![]]]((!![]+[])[+!![]]+([][[]]+[])[!+[]+!![]+!![]]+(!![]+[])[+[]]+([][[]]+[])[+[]]+(!![]+[])[+!![]]+([][[]]+[])[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]+!![]+!![]]+(![]+[])[!+[]+!![]]+([]+{})[+!![]]+([]+{})[!+[]+!![]+!![]+!![]+!![]]+(+{}+[])[+!![]]+(!![]+[])[+[]]+([][[]]+[])[!+[]+!![]+!![]+!![]+!![]]+([]+{})[+!![]]+([][[]]+[])[+!![]])())[!+[]+!![]+!![]]+([][[]]+[])[!+[]+!![]+!![]])()(([]+{})[+[]])[+[]]+(!+[]+!![]+[])+(+!![]+[]))\n```\n\n### é”™è¯¯å¤„ç†çš„æ­£ç¡®æ–¹æ³•\n```javascript\ntry {\n    something\n} catch (e) {\n    window.location.href =\n        \"http://stackoverflow.com/search?q=[js]+\" +\n        e.message;\n}\n// ç™¾åº¦ç‰ˆ\ntry {\n    something\n} catch (e) {\n    window.location.href =\n        \"https://www.baidu.com/s?wd=\" +\n        e.message;\n}\n```\n\n--- \n\n<!-- more -->\n\n### æ ‡è®°åŒºåŸŸçš„èŒƒå›´\n```javascript\n[].forEach.call($$(\"*\"),function(a){\n    a.style.outline=\"1px solid #\"+(~~(Math.random()*(1<<24))).toString(16)\n})\n// ç­‰ä»·äº\nArray.prototype.forEach.call(document.querySelectorAll('*'), \ndom => dom.style.outline = `1px solid #${parseInt(Math.random() * \nMath.pow(2,24)).toString(16)}`)\n\n$$('*').map(x => x.style.border = '1px solid')\n// åˆ é™¤æ‹¬å·å†…å®¹replace(/\\((.+?)\\)$/g,'')\n```\n\n### è·å–éšæœºå­—ç¬¦ä¸²\n```javascript\nMath.random().toString(16).substring(2)  // 0e7a48ca4bec3\nMath.random().toString(36).substring(2)  // s2ue8xvgu7a\n```\n\n### è¿™æ ·çš„åˆ¤æ–­ä½ èƒ½åšå¯¹å—\n```javascript\n(10)[\"toString\"]() === \"10\" // true\n\nconsole.log(10..toString());//10\nconsole.log(10.toString());//SyntaxError: Unexpected token ILLEGAL\n// åœ¨JavaScriptä¸­ï¼Œæ•°å­—åé¢çš„\".\"æ“ä½œç¬¦æ˜¯çš„æ„ä¹‰æ˜¯ä¸ç¡®å®šã€‚å› ä¸ºå®ƒæ—¢å¯èƒ½æ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°çš„æ ‡å¿—ï¼Œåˆå¯èƒ½æ˜¯å–ä¸€ä¸ªå¯¹è±¡çš„å±æ€§çš„è¿ç®—ç¬¦ã€‚ä½†æ˜¯JavaScriptçš„è§£é‡Šå™¨æŠŠä»–å½“åšäº†æµ®ç‚¹æ•°çš„æ ‡å¿—\n// ç­‰ä»·äº \nconsole.log((10.).toString());\nconsole.log((10.)toString())\n```\n\n### åŒ¿åå‡½æ•°è‡ªæ‰§è¡Œæ–¹æ³•\n```javascript\n( function() {}() );\n( function() {} )();\n[ function() {}() ];\n\n~ function() {}();\n! function() {}();\n+ function() {}();\n- function() {}();\n\ndelete function() {}();\ntypeof function() {}();\nvoid function() {}();\nnew function() {}();\nnew function() {};\n\nvar f = function() {}();\n\n1, function() {}();\n1 ^ function() {}();\n1 > function() {}();\n```\n\n### ç»ˆäºåˆ° void 666\n```javascript\n// ä»¥ä¸‹éƒ½æ˜¯undefined\nvar a; \nvar a = undefined \nvoid 0\nvoid 666\nvoid(0)\nvoid (0)\n```\n\n### é‡‘é¢æ ¼å¼åŒ–\n```javascript\n// api\n(156589822366).toLocaleString() // \"156,589,822,366\"\n\n// æ­£åˆ™å°±å®Œäº‹äº†\nvar test1 = '1234567890'\nvar format = test1.replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',')\nconsole.log(format) // 1,234,567,890\n\n// éæ­£åˆ™\n function formatCash(str) {\n       return str.split('').reverse().reduce((prev, next, index) => {\n            return ((index % 3) ? next : (next + ',')) + prev\n       })\n}\nconsole.log(formatCash('1234567890')) // 1,234,567,890\n```\n\n### é€—å·è¿ç®—ç¬¦\n```javascript\nvar a = 0;\nvar b = (a++,99);\n// a 1 b 99\n```\n\n### äº¤æ¢ä¸¤ä¸ªæ•°çš„å€¼\n```javascript\n// åŠ å‡è¿ç®— ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œæ•´å‹æ•°æ®æº¢å‡ºï¼Œå¯¹äº32ä½å­—ç¬¦æœ€å¤§è¡¨ç¤ºæ•°å­—æ˜¯2147483647ï¼Œå¦‚æœæ˜¯2147483645å’Œ2147483646äº¤æ¢å°±å¤±è´¥äº†ã€‚\nvar a=1,b=2;\na += b;\nb = a - b;\na -= b;\n\n// ç¬¬ä¸‰ä¸ªä¸´æ—¶å˜é‡\nvar a=1,b=2;\nvar temp = a;\na = b;\nb= temp;\n\n// ä½è¿ç®—\nlet a=3,b=4;\na^=b;\nb^=a;\na^=b;\n\n// es6\nlet a = 1, b = 2;\n[a, b] = [b, a];\n```\n\n### JSONæ•°æ®çš„æ·±æ‹·è´\n```javascript\nvar a = {\n    a: 1,\n    b: { c: 1, d: 2 }\n}\nvar b=JSON.parse(JSON.stringify(a))\n// Number parseInt parseFloat\n```\nå±€é™æ€§ï¼š\n- ä¼šå¿½ç•¥ undefined\n- ä¸èƒ½åºåˆ—åŒ–å‡½æ•°ï¼Œä¼šè¢«å¿½ç•¥\n- ä¸èƒ½è§£å†³å¾ªç¯å¼•ç”¨çš„å¯¹è±¡\n\n### é•¿åº¦ä¸º6å€¼ä¸º8çš„æ•°ç»„\n```javascript\nArray(6).fill(8)\n```\n\n### è„šæœ¬æ°¸ä¸æŠ¥é”™\n```javascript\nwindow.onerror = function(m, f, l){ return true }\n```\n\n### ç”Ÿæ´»å¸¸è¯†\n36.3â„ƒï½37.2â„ƒ(å£è…”)ã€36.1â„ƒï½37â„ƒ(è…‹çª)\n\n60ï½100æ¬¡/åˆ†\n\n1500ml\n\n2500å¤§å¡\n\n90mmHg<æ”¶ç¼©å‹<140mmHgã€60mmHg<èˆ’å¼ å‹<90mmHg\n\n## ä½¿ç”¨Booleanè¿‡æ»¤æ•°ç»„ä¸­çš„å‡å€¼\nåŒå¦è¿ç®—ç¬¦(~~)\n```js\nconst compact = arr => arr.filter(Boolean)\ncompact([0, 1, false, 2, '', 3, 'a', 'e' * 23, NaN, 's', 34]) // // [ 1, 2, 3, 'a', 's', 34 ] \n```\n\n## æƒ°æ€§è½½å…¥å‡½æ•°\n```js\njsfunction foo(){\n    if(a !== b){\n        console.log('aaa')\n    }else{\n        console.log('bbb')\n    }\n}\n \n// ä¼˜åŒ–å\nfunction foo(){\n    if(a != b){\n        foo = function(){\n            console.log('aaa')\n        }\n    }else{\n        foo = function(){\n            console.log('bbb')\n        }\n    }\n    return foo();\n}\n```\né‚£ä¹ˆç¬¬ä¸€æ¬¡è¿è¡Œä¹‹åå°±ä¼šè¦†å†™è¿™ä¸ªæ–¹æ³•ï¼Œä¸‹ä¸€æ¬¡å†è¿è¡Œçš„æ—¶å€™å°±ä¸ä¼šæ‰§è¡Œåˆ¤æ–­äº†ã€‚å½“ç„¶ç°åœ¨åªæœ‰ä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æœåˆ¤æ–­å¾ˆå¤šï¼Œåˆ†æ”¯æ¯”è¾ƒå¤æ‚ï¼Œé‚£ä¹ˆèŠ‚çº¦çš„èµ„æºè¿˜æ˜¯å¯è§‚çš„ã€‚\n\n## å­—ç¬¦ä¸²æ¯”è¾ƒæ—¶é—´å¤§å°\n```js\nvar a = \"2014-08-08\";\nvar b = \"2014-09-09\";\n \nconsole.log(a>b, a<b); // false true\nconsole.log(\"21:00\"<\"09:10\");  // false\nconsole.log(\"21:00\"<\"9:10\");   // true   æ—¶é—´å½¢å¼æ³¨æ„è¡¥0\n```\nå­—ç¬¦ä¸²æ¯”è¾ƒå¤§å°æ˜¯æŒ‰ç…§å­—ç¬¦ä¸²ä»å·¦åˆ°å³æ¯ä¸ªå­—ç¬¦çš„charCodeæ¥çš„ï¼Œä½†æ‰€ä»¥ç‰¹åˆ«è¦æ³¨æ„æ—¶é—´å½¢å¼æ³¨æ„è¡¥0\n\n```js\n// æ–¹æ³•1\nvar a = [1,2,3]\na.join = a.toString = a.shift\na == 1 && a == 2 && a == 3 // true éšå¼ç±»å‹è½¬æ¢\n\n// æ–¹æ³•2\nvar a = {\n    num: 0,\n    valueOf(){\n        this.num++;\n        return this.num;\n    }\n}\n'é€‰æ‹©'>'åŠªåŠ›' // true\n```\n\n## æ•°å­—è¡¥0æ“ä½œ\n```js\nconst addZero1 = (num, len = 2) => (`0${num}`).slice(-len)\nconst addZero2 = (num, len = 2) => (`${num}`).padStart(len, '0')\naddZero1(3) // 03\n \naddZero2(32,4)  // 0032\n```\n\n## es6çš„å…«è¿›åˆ¶è¡¨ç¤º\n```js\n035            // 8è¿›åˆ¶29      åŸæ¥çš„æ–¹å¼\n0o35            // 8è¿›åˆ¶29     es6çš„æ–¹å¼\n```\n\n## Math.roundå®ç°çš„ç²¾ç¡®ä¿ç•™æŒ‡å®šä½æ•°çš„å‡½æ•°(toFixedä¸å®Œå–„)\n```js\nconst round = (n, decimals = 0) => Number(`${Math.round(`${n}e${decimals}`)}e-${decimals}`)\nround(1.345, 2)                 // 1.35\nround(1.345, 1)                 // 1.3\n\n// ä¸å¤ªå®Œå–„ round(1.2,2) ä¸º1.2æ²¡æœ‰è¡¥0\nfunction addZ(num,len=2){ \n    num=num.toString() \n    if(!num.includes('.')) num=num+'.' \n    if(!Object.is(Number(num),NaN)){ \n        num= Number(num).toFixed(len)    \n    } \n    else if(num.includes(',')){ \n        if(!Object.is(Number(num.replace(/,/g,'')),NaN)){ \n        len=num.indexOf('.')+Number(len)+1 \n        num= num.length<len? num.padEnd(len,'0'):num; \n        } \n    } \n    return num \n}\n\nfunction keepDecimal (num, len=2) {\n    let result = parseFloat(num)\n    result = Math.round(num * 10**len) / (10**len)\n    return result\n}\n```\n\n## ç»Ÿè®¡ç›¸åŒé¡¹(reduce)\n```js\nvar str = a.split('').reduce((p,k)=>(p[k]++||(p[k]=1),p),{})\n\n\njsvar cars = ['BMW','Benz', 'Benz', 'Tesla', 'BMW', 'Toyota'];\nvar carsObj = cars.reduce(function (obj, name) {\n  obj[name] = obj[name] ? ++obj[name] : 1;\n  return obj;\n}, {});\ncarsObj; // => { BMW: 2, Benz: 2, Tesla: 1, Toyota: 1 }\n```\n\n```js\n// æ•°ç»„ç›¸åŒé¡¹çš„æ¬¡æ•°\nconst countOccurrences = (arr, val) => arr.reduce((a, v) => (v === val ? a + 1 : a), 0);\ncountOccurrences([1, 1, 2, 1, 2, 3], 1); // 3\n```\n\n## ä¸¤ä¸ªæ•°å€¼çš„äº¤æ¢\n```js\nvar temp = a; a = b; b = temp            \nb = [a, a = b][0]                     \na = a + b; b = a - b; a = a - b \n// es6 è§£æ„èµ‹å€¼\nlet x = 1;\nlet y = 2;\n[x, y] = [y, x];\n```\n\n## å¤šåˆ¤æ–­\n```js\nif ( foo === 'bar' || foo === 'foobar' || foo === 'foo' )\n{\n//...\n}\n\nå°±å¯ä»¥å†™æˆï¼š\nif ( foo in { 'bar':'', 'foobar':'', 'foo':'' } )\n{\n//...\n}\n```\n\n## shellå‹ç¼©è§£å‹\n```shell\ntar -zcvf newfilename.tar.gz filename\ntar -zxvf newfilename.tar.gz\n```\n\n## banana\n```js\n('b'+'a'+ +'a'+'a').toLowerCase()\n// banana\n```\n","tags":["æ•´ç†"],"categories":["JS"]},{"title":"babelçš„.babelrcé…ç½®","url":"%2Fbabel%E7%9A%84.babelrc%E9%85%8D%E7%BD%AE.html","content":"\n> Babel æ˜¯ä¸€ä¸ªå·¥å…·é“¾ï¼Œä¸»è¦ç”¨äºå°† ECMAScript 2015+ ç‰ˆæœ¬çš„ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹çš„ JavaScript è¯­æ³•ï¼Œä»¥ä¾¿èƒ½å¤Ÿè¿è¡Œåœ¨å½“å‰å’Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨æˆ–å…¶ä»–ç¯å¢ƒä¸­ã€‚Babel å†…éƒ¨æ‰€ä½¿ç”¨çš„è¯­æ³•è§£æå™¨æ˜¯ Babylon\n\nä¸€ä¸ªåŸºæœ¬çš„.babelrcé…ç½®:\n\n```javascript\n{\n  \"presets\": [\n    \"env\",\n    \"stage-0\"\n  ],\n  \"plugins\": [\"transform-runtime\"]\n}\n```\n\n--- \n<!-- more -->\n\n### presets env\n\npresets æ˜¯babelçš„ä¸€ä¸ªé¢„è®¾ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦å®‰è£…å¯¹åº”çš„æ’ä»¶ï¼Œå¯¹åº”babel-preset-xxxï¼Œä¾‹å¦‚ä¸‹é¢çš„é…ç½®ï¼Œéœ€è¦npm install babel-preset-env\n\n> æ¯å¹´æ¯ä¸ª preset åªç¼–è¯‘å½“å¹´æ‰¹å‡†çš„å†…å®¹ã€‚ è€Œ babel-preset-env ç›¸å½“äº es2015 ï¼Œes2016 ï¼Œes2017 åŠæœ€æ–°ç‰ˆæœ¬ã€‚\n\n```javascript\n{\n  \"presets\": [\"env\"]\n}\n```\n\n### presets stage\nstage ä»£è¡¨ç€ESææ¡ˆçš„å„ä¸ªé˜¶æ®µï¼Œä¸€å…±æœ‰5ä¸ªé˜¶æ®µï¼Œå­˜åœ¨ä¾èµ–å…³ç³»ã€‚ä¹Ÿå°±æ˜¯è¯´stage-1æ˜¯åŒ…æ‹¬stage-0çš„ï¼Œä»¥æ­¤ç±»æ¨ï¼š\n- Stage 0 - ç¨»è‰äºº: åªæ˜¯ä¸€ä¸ªæƒ³æ³•ï¼Œå¯èƒ½æ˜¯ babel æ’ä»¶ã€‚\n- Stage 1 - ææ¡ˆ: åˆæ­¥å°è¯•ã€‚\n- Stage 2 - åˆç¨¿: å®Œæˆåˆæ­¥è§„èŒƒã€‚\n- Stage 3 - å€™é€‰: å®Œæˆè§„èŒƒå’Œæµè§ˆå™¨åˆæ­¥å®ç°ã€‚\n- Stage 4 - å®Œæˆ: å°†è¢«æ·»åŠ åˆ°ä¸‹ä¸€å¹´åº¦å‘å¸ƒã€‚\n\n### plugins\npresetsï¼Œæ˜¯pluginsçš„é¢„è®¾ï¼Œèµ·åˆ°æ–¹ä¾¿è®¾ç½®çš„ä½œç”¨ã€‚å¦‚æœä¸é‡‡ç”¨presetsï¼Œå¯ä»¥ä½¿ç”¨plugins\n```javascript\n{\n  \"plugins\": [\"transform-es2015-arrow-functions\"] // ä¹Ÿå¯ä»¥é¢„è®¾babel-preset-es2015\n}\n``` \n\n### è‡ªå®šä¹‰é¢„è®¾å’Œæ’ä»¶\n3ç§æ–¹å¼è®¾ç½®éƒ½ok\n\n```javascript\n\"plugins\": [\"babel-plugin-myPlugin\"]\n\"plugins\": [\"myPlugin\"]\n\"plugins\": [\"./node_modules/asdf/plugin\"]ã€‚\n// presetsåŒç†ã€‚\n```\n\n### plugins/presetsæ’åº\n- plugins ä¼šè¿è¡Œåœ¨ presets ä¹‹å‰ã€‚\n- plugins ä¼šä»ç¬¬ä¸€ä¸ªå¼€å§‹é¡ºåºæ‰§è¡Œã€‚\n- presets çš„é¡ºåºåˆ™åˆšå¥½ç›¸å(ä»æœ€åä¸€ä¸ªé€†åºæ‰§è¡Œ)ã€‚\n\n### babel-polyfill\n`babel`æœ¬èº«åªæä¾›é¢„å‘çš„è½¬æ¢ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä¸€äº›ç®­å¤´å‡½æ•°è¿™æ ·çš„æ–°çš„è¯­æ³•ï¼Œå…¶å®åœ¨babelçœ‹æ¥ï¼Œæ›´åƒæ˜¯ä¸€ç§è¯­æ³•ç³–ã€‚\nä½†æ˜¯babelä¸èƒ½è½¬ä¹‰ä¸€äº›ES6ã€ES7...çš„æ–°çš„å…¨å±€å±æ€§ï¼Œä¾‹å¦‚ Promise ã€æ–°çš„åŸç”Ÿæ–¹æ³•å¦‚ String.padStart (left-pad) ç­‰ã€‚\nè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦ä½¿ç”¨babel-polyfillã€‚","tags":["æ•´ç†"],"categories":["çŸ¥è¯†"]},{"title":"å®ç°trimçš„3ç§æ–¹æ³•","url":"%2F%E5%AE%9E%E7%8E%B0trim%E7%9A%843%E7%A7%8D%E6%96%B9%E6%B3%95.html","content":"\ntrim æ–¹æ³• (å­—ä¸²) (JavaScript) ç§»é™¤å­—ä¸²å‰åçš„ç©ºç™½å­—å…ƒä»¥åŠè¡Œç»“æŸå­—å…ƒã€‚\n- ç”¨æ³•\nstring.trim()\n\n1. é€’å½’æˆªå–(ä¸æ¨è)\n```javascript\nfunction trim(str){\n// åŠ å…¥ç±»å‹åˆ¤æ–­ \nif(str[0]===' '||str[str.length-1]===' '){\n    if(str[0]===' '){\n      str=str.substring(1,str.length)\n    }\n    if(str[str.length-1]===' '){\n      str=str.substring(0,str.length-1)\n    }\n    trim(str)\n  }else{\n    console.log(str)\n    return str\n  }\n}\n```\n\n2. 2æ¬¡éå†è®°å½•ä¸ä¸ºç©ºæ ¼çš„ç´¢å¼•ï¼Œæœ€åæˆªå–\n```javascript\nfunction trim(str) {\n    let start, end // å¼€å§‹å’Œç»“æŸä¸ºæ­¢ éå†è®°å½•ä¸ä¸ºç©ºæ ¼çš„ç´¢å¼•\n    for (let i = 0; i < str.length; i++) {\n        if (str[i] !== ' ') {\n            start = i\n            break\n        }\n    }\n    for (let i = str.length - 1; i > 0; i--) {\n        if (str[i] !== ' ') {\n            end = i\n            break\n        }\n    }\n    return str.substring(start, end + 1)\n}\n```\n\n3. æ­£åˆ™æ›¿æ¢\n```javascript\nfunction trim(str) {\n    return str.replace(/(^\\s*)|(\\s*$)/g, \"\")\n}\n\n// 1. value.toString()\n// 2. String('123213') \n// 3. '' + value\n```","tags":["æ•´ç†"],"categories":["çŸ¥è¯†"]},{"title":"æ­£åˆ™æ€»ç»“","url":"%2F%E6%AD%A3%E5%88%99%E6%80%BB%E7%BB%93.html","content":"\næ­£åˆ™è¡¨è¾¾å¼è„±ç¦»è¯­è¨€ï¼Œå’Œæ•°æ®ç»“æ„ä¸ç®—æ³•ä¸€æ ·ï¼Œä½œä¸ºç¨‹åºå‘˜çš„è½¯æŠ€èƒ½ã€‚ç›®å‰å­˜åœ¨çš„é—®é¢˜ï¼šä¸å—é‡è§†\nä¼˜ç‚¹ï¼š\n\n- æ˜¾è‘—çš„æå‡ä»£ç è´¨é‡\n- çµæ´»å¤šå˜\n- å¼ºå¤§çš„æ•°æ®æ ¡éªŒæ”¯æŒ\n\n```javascript\nvar regex1 = /cosyer/g;\nvar regex2 = new RegExp('cosyer', 'g');\nvar regex3 = new RegExp(/cosyer/, 'g');\nvar regex4 = new RegExp(/cosyer/g);\n```\n\nå…¶ä¸­çš„æ¨¡å¼ï¼ˆpatternï¼‰éƒ¨åˆ†å¯ä»¥æ˜¯ä»»ä½•ç®€å•æˆ–å¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥åŒ…å«å­—ç¬¦ç±»ã€é™å®šç¬¦ã€åˆ†ç»„ã€ å‘å‰æŸ¥æ‰¾ä»¥åŠåå‘å¼•ç”¨ã€‚æ¯ä¸ªæ­£åˆ™è¡¨è¾¾å¼éƒ½å¯å¸¦æœ‰ä¸€æˆ–å¤šä¸ªæ ‡å¿—ï¼ˆflagsï¼‰ï¼Œç”¨ä»¥æ ‡æ˜æ­£åˆ™è¡¨è¾¾å¼çš„è¡Œä¸ºã€‚ æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ¨¡å¼æ”¯æŒä¸‹åˆ— 3 ä¸ªæ ‡å¿—ã€‚\n\n- gï¼šè¡¨ç¤ºå…¨å±€ï¼ˆglobalï¼‰æ¨¡å¼ï¼Œå³æ¨¡å¼å°†è¢«åº”ç”¨äºæ‰€æœ‰å­—ç¬¦ä¸²ï¼Œè€Œéåœ¨å‘ç°ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹æ—¶ç«‹å³åœæ­¢ï¼›\n- iï¼šè¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™ï¼ˆcase-insensitiveï¼‰æ¨¡å¼ï¼Œå³åœ¨ç¡®å®šåŒ¹é…é¡¹æ—¶å¿½ç•¥æ¨¡å¼ä¸å­—ç¬¦ä¸²çš„å¤§å°å†™ï¼›\n- mï¼šè¡¨ç¤ºå¤šè¡Œï¼ˆmultilineï¼‰æ¨¡å¼ï¼Œå³åœ¨åˆ°è¾¾ä¸€è¡Œæ–‡æœ¬æœ«å°¾æ—¶è¿˜ä¼šç»§ç»­æŸ¥æ‰¾ä¸‹ä¸€è¡Œä¸­æ˜¯å¦å­˜åœ¨ä¸æ¨¡å¼åŒ¹é…çš„é¡¹ã€‚\n\næ–°å¢çš„ä¿®é¥°ç¬¦ï¼š\n\n- u: Unicodeæ¨¡å¼ã€‚ç”¨æ¥å¤„ç†Unicodeå¤§äº\t\\uFFFFçš„å•ä¸ªå­—ç¬¦ï¼ˆè¶…è¿‡\\uFFFFä¼šè¢«ç¨‹åºå‘˜è§£æä¸ºä¸¤ä¸ªå­—ç¬¦ï¼‰\n- y: ç²˜è¿æ¨¡å¼ã€‚å’Œgä¸€æ ·ä½œä¸ºå…¨å±€åŒ¹é…ï¼ŒåŒºåˆ«æ˜¯gçš„ä¸‹ä¸€æ¬¡åŒ¹é…ä¸è¦æ±‚ä½ç½®ï¼Œä½†æ˜¯yä¸‹ä¸€æ¬¡åŒ¹é…è¦æ±‚ç´§è·Ÿè¿™è¿™æ¬¡åŒ¹é…é¡¹ä¹‹å\n- s: dotAllæ¨¡å¼ã€‚æ­£åˆ™è¡¨è¾¾å¼ä¸­ç‚¹(.)ä½œä¸ºåŒ¹é…ï¼ˆé™¤æ¢è¡Œç¬¦\\nï¼Œå›è½¦ç¬¦\\rï¼Œè¡Œåˆ†éš”ç¬¦ï¼Œæ®µåˆ†éš”ç¬¦ï¼‰ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œæ”¯æŒç‚¹(.)çœŸæ­£åŒ¹é…æ‰€æœ‰å•ä¸ªå­—ç¬¦\n\n## ä¸¤ç§ä½¿ç”¨æ–¹å¼\n```js\nvar a1 = /\\+d/g; // å­—é¢å½¢å¼\nvar a2 = new RegExp('\\\\+d','g') // æ„é€ å‡½æ•°\n```\n\nåœ¨JavaScriptä¸­å»ºè®®ä½¿ç”¨å­—é¢å½¢å¼çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå› ä¸ºä¸éœ€è¦æ‹…å¿ƒå­—ç¬¦ä¸²ä¸­çš„è½¬ä¹‰å­—ç¬¦ã€‚æ¯”å¦‚ä¸Šé¢ç¤ºä¾‹ä»£ç ä¸­å­—é¢å½¢å¼ä½¿ç”¨\\dè€Œæ„é€ å‡½æ•°ä½¿ç”¨çš„æ˜¯\\\\dï¼›\n\n```javascript\nvar text = \"aaa \"; \nvar pattern1 = /\\s$/; //åŒ¹é…å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºæ ¼ \npattern1.exec(text);\n```\n---\n<!-- more -->\n\næ­£åˆ™å®šä¹‰äº†å¾ˆå¤šç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦ï¼Œæœ‰åè¯ï¼Œé‡è¯ï¼Œè°“è¯ç­‰\n\n## ç®€å•å­—ç¬¦\næ²¡æœ‰ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦éƒ½æ˜¯ç®€å•å­—ç¬¦ï¼Œç®€å•å­—ç¬¦å°±ä»£è¡¨è‡ªèº«ï¼Œç»å¤§éƒ¨åˆ†å­—ç¬¦éƒ½æ˜¯ç®€å•å­—ç¬¦ï¼Œä¸¾ä¸ªä¾‹å­ã€‚\n\n```javascript\n/abc/ // åŒ¹é… abc\n/123/ // åŒ¹é… 123\n/-_-/ // åŒ¹é… -_-\n```\n## è½¬ä¹‰å­—ç¬¦\n\\æ˜¯è½¬ä¹‰å­—ç¬¦ï¼Œå…¶åé¢çš„å­—ç¬¦ä¼šä»£è¡¨ä¸åŒçš„æ„æ€ï¼Œè½¬ä¹‰å­—ç¬¦ä¸»è¦æœ‰ä¸‰ä¸ªä½œç”¨ï¼š\n\n1. æ˜¯ä¸ºäº†åŒ¹é…ä¸æ–¹ä¾¿æ˜¾ç¤ºçš„ç‰¹æ®Šå­—ç¬¦ï¼Œæ¯”å¦‚æ¢è¡Œï¼Œtabç¬¦å·ç­‰\n\n2. æ­£åˆ™ä¸­é¢„å…ˆå®šä¹‰äº†ä¸€äº›ä»£è¡¨ç‰¹æ®Šæ„ä¹‰çš„å­—ç¬¦ï¼Œæ¯”å¦‚\\wç­‰\n\n3. åœ¨æ­£åˆ™ä¸­æŸäº›å­—ç¬¦æœ‰ç‰¹æ®Šå«ä¹‰(æ¯”å¦‚ä¸‹é¢è¯´åˆ°çš„)ï¼Œè½¬ä¹‰å­—ç¬¦å¯ä»¥è®©å…¶æ˜¾ç¤ºè‡ªèº«çš„å«ä¹‰\n\n|å¸¸ç”¨è½¬ä¹‰å­—ç¬¦|æ„ä¹‰|\n|:---|:---|\n|\\n\t|åŒ¹é…æ¢è¡Œç¬¦ ï¼ˆnewlineï¼‰|\n|\\r\t|åŒ¹é…å›è½¦ç¬¦ ï¼ˆreturnï¼‰|\n|\\t\t|åŒ¹é…åˆ¶è¡¨ç¬¦ï¼Œä¹Ÿå°±æ˜¯tabé”®|\n|\\v\t|åŒ¹é…å‚ç›´åˆ¶è¡¨ç¬¦|\n|\\x20\t|20æ˜¯2ä½16è¿›åˆ¶æ•°å­—ï¼Œä»£è¡¨å¯¹åº”çš„å­—ç¬¦|\n|\\u002B\t|002Bæ˜¯4ä½16è¿›åˆ¶æ•°å­—ï¼Œä»£è¡¨å¯¹åº”çš„å­—ç¬¦|\n|\\u002B\t|002Bæ˜¯4ä½16è¿›åˆ¶æ•°å­—ï¼Œä»£è¡¨å¯¹åº”çš„å­—ç¬¦|\n|\\w\t|åŒ¹é…ä»»ä½•ä¸€ä¸ªå­—æ¯æˆ–è€…æ•°å­—æˆ–è€…ä¸‹åˆ’çº¿ å•å­å­—ç¬¦ (word)|\n|\\W\t|åŒ¹é…ä»»ä½•ä¸€ä¸ªå­—æ¯æˆ–è€…æ•°å­—æˆ–è€…ä¸‹åˆ’çº¿ä»¥å¤–çš„å­—ç¬¦ éå•å­å­—ç¬¦|\n|\\s\t|åŒ¹é…ç©ºç™½å­—ç¬¦ï¼Œå¦‚ç©ºæ ¼ï¼Œtabç­‰ ï¼ˆspaceï¼‰|\n|\\S\t|åŒ¹é…éç©ºç™½å­—ç¬¦|\n|\\d\t|åŒ¹é…æ•°å­—å­—ç¬¦ï¼Œ0~9 ï¼ˆdigitï¼‰\n|\\D\t|åŒ¹é…éæ•°å­—å­—ç¬¦|\n|\\b\t|åŒ¹é…å•è¯çš„è¾¹ç•Œ (boundary)|\n|\\B\t|åŒ¹é…éå•è¯è¾¹ç•Œ|\n|\\ |åŒ¹é…\\æœ¬èº«|\n\n## å­—ç¬¦é›†åˆ\n```javascript\n// æœ‰æ—¶æˆ‘ä»¬éœ€è¦åŒ¹é…ä¸€ç±»å­—ç¬¦ï¼Œå­—ç¬¦é›†å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œå­—ç¬¦é›†çš„è¯­æ³•ç”¨[]åˆ†éš”ï¼Œä¸‹é¢çš„ä»£ç èƒ½å¤ŸåŒ¹é…aæˆ–bæˆ–c\n[abc]\n\n// å¦‚æœè¦è¡¨ç¤ºå­—ç¬¦å¾ˆå¤šï¼Œå¯ä»¥ä½¿ç”¨-è¡¨ç¤ºä¸€ä¸ªèŒƒå›´å†…çš„å­—ç¬¦ï¼Œä¸‹é¢ä¸¤ä¸ªåŠŸèƒ½ç›¸åŒ\n[0123456789]\n[0-9]\n\n// åœ¨å‰é¢æ·»åŠ ^ï¼Œå¯è¡¨ç¤ºéçš„æ„æ€ï¼Œä¸‹é¢çš„ä»£ç èƒ½å¤ŸåŒ¹é…abcä¹‹å¤–çš„ä»»æ„å­—ç¬¦\n[^abc]\n```\nå…¶å®æ­£åˆ™è¿˜å†…ç½®äº†ä¸€äº›å­—ç¬¦é›†ï¼Œåœ¨ä¸Šé¢çš„è½¬ä¹‰å­—ç¬¦æœ‰æåˆ°ï¼Œä¸‹é¢ç»™å‡ºå†…ç½®å­—ç¬¦é›†å¯¹åº”çš„è‡ªå®šä¹‰å­—ç¬¦é›†\n\n```javascript\n// åŒ¹é…é™¤äº†æ¢è¡Œç¬¦ï¼ˆ\\nï¼‰ä»¥å¤–çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ = [^\\n]\n\\w = [0-9a-zA-Z_]\n\\W = [^0-9a-zA-Z_]\n\\s = [ \\t\\n\\v]\n\\S = [^ \\t\\n\\v]\n\\d = [0-9]\n\\D = [^0-9]\n```\n\n## é‡è¯\nå¦‚æœéœ€è¦åŒ¹é…å¤šæ¬¡æŸä¸ªå­—ç¬¦ï¼Œæ­£åˆ™ä¹Ÿæä¾›äº†é‡è¯çš„åŠŸèƒ½ï¼Œæ­£åˆ™ä¸­çš„é‡è¯æœ‰å¤šä¸ªï¼Œå¦‚?ã€+ã€*ã€{n}ã€{m,n}ã€{m,}\n\n{n}åŒ¹é…næ¬¡ï¼Œæ¯”å¦‚a{2}ï¼ŒåŒ¹é…aa\n\n{m, n}åŒ¹é…m-næ¬¡ï¼Œä¼˜å…ˆåŒ¹é…næ¬¡ï¼Œæ¯”å¦‚a{1,3}ï¼Œå¯ä»¥åŒ¹é…aaaã€aaã€a\n\n{m,}åŒ¹é…m-âˆæ¬¡ï¼Œä¼˜å…ˆåŒ¹é…âˆæ¬¡ï¼Œæ¯”å¦‚a{1,}ï¼Œå¯ä»¥åŒ¹é…aaaa...\n\n?åŒ¹é…0æ¬¡æˆ–1æ¬¡ï¼Œä¼˜å…ˆåŒ¹é…1æ¬¡ï¼Œç›¸å½“äº{0,1}\n\n+åŒ¹é…1-næ¬¡ï¼Œä¼˜å…ˆåŒ¹é…næ¬¡ï¼Œç›¸å½“äº{1,}\n\n*åŒ¹é…0-næ¬¡ï¼Œä¼˜å…ˆåŒ¹é…næ¬¡ï¼Œç›¸å½“äº{0,}\n\næ­£åˆ™é»˜è®¤å’Œäººå¿ƒä¸€æ ·æ˜¯è´ªå©ªçš„ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„è´ªå©ªæ¨¡å¼ï¼Œå‡¡æ˜¯è¡¨ç¤ºèŒƒå›´çš„é‡è¯ï¼Œéƒ½ä¼˜å…ˆåŒ¹é…ä¸Šé™è€Œä¸æ˜¯ä¸‹é™\n\n```javascript\n// a{1, 3} åŒ¹é…å­—ç¬¦ä¸²'aaa'çš„è¯ï¼Œä¼šåŒ¹é…aaaè€Œä¸æ˜¯a\nvar text = \"aaa\"; \nvar pattern1 = /a{1,3}/;\npattern1.exec(text); //[\"aaa\", index: 0, input: \"aaa\"] // index inputä¸ºå±æ€§\n```\n\næœ‰æ—¶å€™è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œå¯ä»¥åœ¨é‡è¯åé¢åŠ ä¸Š?ï¼Œå°±å¯ä»¥å¼€å¯éè´ªå©ªæ¨¡å¼\n\n```javascript\nvar text = \"aaa\"; \nvar pattern1 = /a{1,3}?/;\npattern1.exec(text); //[\"a\", index: 0, input: \"aaa\"]\n```\n\n## å­—ç¬¦è¾¹ç•Œ\n^åœ¨[]å¤–è¡¨ç¤ºåŒ¹é…å¼€å¤´çš„æ„æ€\n^abc // å¯ä»¥åŒ¹é…abcï¼Œä½†æ˜¯ä¸èƒ½åŒ¹é…aabc\n\n$è¡¨ç¤ºåŒ¹é…ç»“å°¾çš„æ„æ€\nabc$ // å¯ä»¥åŒ¹é…abcï¼Œä½†æ˜¯ä¸èƒ½åŒ¹é…abcc\nä¸Šé¢æåˆ°çš„\\bè¡¨ç¤ºå•è¯çš„è¾¹ç•Œ\n\n\\bè¡¨ç¤ºåŒ¹é…ä¸€ä¸ªè¯çš„è¾¹ç•Œã€‚ä¸€ä¸ªè¯çš„è¾¹ç•Œå°±æ˜¯ä¸€ä¸ªè¯ä¸è¢«å¦å¤–ä¸€ä¸ªâ€œå­—â€å­—ç¬¦è·Ÿéšçš„ä½ç½®æˆ–è€…æ²¡æœ‰å…¶ä»–â€œå­—â€å­—ç¬¦åœ¨å…¶å‰é¢çš„ä½ç½®ã€‚\nabc\\b // å¯ä»¥åŒ¹é… abc ï¼Œä½†æ˜¯ä¸èƒ½åŒ¹é… abccï¼›\n/\\bm/åŒ¹é…â€œmoonâ€ä¸­å¾—â€˜mâ€™ï¼›\n/oo\\b/å¹¶ä¸åŒ¹é…\"moon\"ä¸­å¾—'oo'ï¼Œå› ä¸º'oo'è¢«ä¸€ä¸ªâ€œå­—â€å­—ç¬¦'n'ç´§è·Ÿç€ã€‚\n/oon\\b/åŒ¹é…\"moon\"ä¸­å¾—'oon'ï¼Œå› ä¸º'oon'æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²çš„ç»“æŸéƒ¨åˆ†ã€‚è¿™æ ·ä»–æ²¡æœ‰è¢«ä¸€ä¸ªâ€œå­—â€å­—ç¬¦ç´§è·Ÿç€ã€‚\n/\\w\\b\\w/å°†ä¸èƒ½åŒ¹é…ä»»ä½•å­—ç¬¦ä¸²ï¼Œå› ä¸ºåœ¨ä¸€ä¸ªå•è¯ä¸­é—´çš„å­—ç¬¦æ°¸è¿œä¹Ÿä¸å¯èƒ½åŒæ—¶æ»¡è¶³æ²¡æœ‰â€œå­—â€å­—ç¬¦è·Ÿéšå’Œæœ‰â€œå­—â€å­—ç¬¦è·Ÿéšä¸¤ç§æƒ…å†µã€‚\n\n## é€‰æ‹©è¡¨è¾¾å¼\næœ‰æ—¶æˆ‘ä»¬æƒ³åŒ¹é…xæˆ–è€…yï¼Œå¦‚æœxå’Œyæ˜¯å•ä¸ªå­—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨å­—ç¬¦é›†ï¼Œ[abc]å¯ä»¥åŒ¹é…aæˆ–bæˆ–cï¼Œå¦‚æœxå’Œyæ˜¯å¤šä¸ªå­—ç¬¦ï¼Œå­—ç¬¦é›†å°±æ— èƒ½ä¸ºåŠ›äº†ï¼Œæ­¤æ—¶å°±è¦ç”¨åˆ°åˆ†ç»„\n\næ­£åˆ™ä¸­ç”¨|æ¥è¡¨ç¤ºåˆ†ç»„ï¼Œa|bè¡¨ç¤ºåŒ¹é…aæˆ–è€…bçš„æ„æ€\n\n```javascript\n123|456|789 // åŒ¹é… 123 æˆ– 456 æˆ– 789\n```\n\n## åˆ†ç»„ä¸å¼•ç”¨\nåˆ†ç»„æ˜¯æ­£åˆ™ä¸­éå¸¸å¼ºå¤§çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥è®©ä¸Šé¢æåˆ°çš„é‡è¯ä½œç”¨äºä¸€ç»„å­—ç¬¦ï¼Œè€Œéå•ä¸ªå­—ç¬¦ï¼Œåˆ†ç»„çš„è¯­æ³•æ˜¯åœ†æ‹¬å·åŒ…è£¹(xxx)\n\n```javascript\n(abc){2} // åŒ¹é…abcabc\n```\nåˆ†ç»„ä¸èƒ½æ”¾åœ¨[]ä¸­ï¼Œåˆ†ç»„ä¸­è¿˜å¯ä»¥ä½¿ç”¨é€‰æ‹©è¡¨è¾¾å¼\n```javascript\n(123|456){2} // åŒ¹é… 123123ã€456456ã€123456ã€456123\n```\n\nå’Œåˆ†ç»„ç›¸å…³çš„æ¦‚å¿µè¿˜æœ‰ä¸€ä¸ªæ•è·åˆ†ç»„å’Œéæ•è·åˆ†ç»„ï¼Œåˆ†ç»„é»˜è®¤éƒ½æ˜¯æ•è·çš„ï¼Œåœ¨åˆ†ç»„çš„(åé¢æ·»åŠ ?:å¯ä»¥è®©åˆ†ç»„å˜ä¸ºéæ•è·åˆ†ç»„ï¼Œéæ•è·åˆ†ç»„å¯ä»¥æé«˜æ€§èƒ½å’Œç®€åŒ–é€»è¾‘\n\n```javascript\n'123'.match(/(?:123)/) // è¿”å› ['123']\n'123'.match(/(123)/)  // è¿”å› ['123', '123']\n// å’Œåˆ†ç»„ç›¸å…³çš„å¦ä¸€ä¸ªæ¦‚å¿µæ˜¯å¼•ç”¨ï¼Œæ¯”å¦‚åœ¨åŒ¹é…htmlæ ‡ç­¾æ—¶ï¼Œé€šå¸¸å¸Œæœ›<xxx></xxx>åé¢çš„xxxèƒ½å¤Ÿå’Œå‰é¢ä¿æŒä¸€è‡´\n```\n\nå¼•ç”¨çš„è¯­æ³•æ˜¯\\æ•°å­—ï¼Œæ•°å­—ä»£è¡¨å¼•ç”¨å‰é¢ç¬¬å‡ ä¸ªæ•è·åˆ†ç»„ï¼Œæ³¨æ„éæ•è·åˆ†ç»„ä¸èƒ½è¢«å¼•ç”¨\n\n```javascript\n<([a-z]+)><\\/\\1> // å¯ä»¥åŒ¹é… `<span></span>` æˆ– `<div></div>`ç­‰\n```\n\n## é¢„æœç´¢\n\nå¦‚æœä½ æƒ³åŒ¹é…xxxå‰ä¸èƒ½æ˜¯yyyï¼Œæˆ–è€…xxxåä¸èƒ½æ˜¯yyyï¼Œé‚£å°±è¦ç”¨åˆ°é¢„æœç´¢\n\njsåªæ”¯æŒæ­£å‘é¢„æœç´¢ï¼Œä¹Ÿå°±æ˜¯xxxåé¢å¿…é¡»æ˜¯yyyï¼Œæˆ–è€…xxxåé¢ä¸èƒ½æ˜¯yyy\n\n```javascript\n1(?=2) // å¯ä»¥åŒ¹é…12ï¼Œä¸èƒ½åŒ¹é…22\n1(?!2) // å¯æœ‰åŒ¹é…22ï¼Œä¸èƒ½åŒ¹é…12\n```\n\n## ä¿®é¥°ç¬¦\né»˜è®¤æ­£åˆ™æ˜¯åŒºåˆ†å¤§å°å†™ï¼Œè¿™å¯èƒ½å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæ­£åˆ™æä¾›äº†ä¿®é¥°ç¬¦çš„åŠŸèƒ½ï¼Œä¿®å¤çš„è¯­æ³•å¦‚ä¸‹\n\n```javascript\n/xxx/gi // æœ€åé¢çš„gå’Œiå°±æ˜¯ä¸¤ä¸ªä¿®é¥°ç¬¦\n```\ngæ­£åˆ™é‡åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„å­—ç¬¦å°±ä¼šç»“æŸï¼ŒåŠ ä¸Šå…¨å±€ä¿®å¤ç¬¦ï¼Œå¯ä»¥è®©å…¶åŒ¹é…åˆ°ç»“æŸ\n\niæ­£åˆ™é»˜è®¤æ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œiå¯ä»¥å¿½ç•¥å¤§å°å†™\n\nmæ­£åˆ™é»˜è®¤æƒ…å†µä¸‹ï¼Œ^å’Œ$åªèƒ½åŒ¹é…å­—ç¬¦ä¸²çš„å¼€å§‹å’Œç»“å°¾ï¼Œmä¿®é¥°ç¬¦å¯ä»¥è®©^å’Œ$åŒ¹é…è¡Œé¦–å’Œè¡Œå°¾ï¼Œä¸ç†è§£å°±çœ‹ä¾‹å­\n\n```javascript\n/jing$/ // èƒ½å¤ŸåŒ¹é… 'yanhaijingï¼Œä¸èƒ½åŒ¹é… 'yanhaijing\\n'\n/jing$/m // èƒ½å¤ŸåŒ¹é… 'yanhaijingï¼Œ èƒ½å¤ŸåŒ¹é… 'yanhaijing\\n'\n\n/^jing/ // èƒ½å¤ŸåŒ¹é… 'jing'ï¼Œä¸èƒ½åŒ¹é… '\\njing'\n/^jing/m // èƒ½å¤ŸåŒ¹é… 'jing'ï¼Œèƒ½å¤ŸåŒ¹é… '\\njing'\n```\n\n## jsä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³•\næ­£åˆ™è¡¨è¾¾å¼æ˜¯ç”¨äºåŒ¹é…å­—ç¬¦ä¸²ä¸­å­—ç¬¦ç»„åˆçš„æ¨¡å¼ã€‚åœ¨ JavaScriptä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¹Ÿæ˜¯å¯¹è±¡ã€‚è¿™äº›æ¨¡å¼è¢«ç”¨äº RegExp çš„ exec å’Œ test æ–¹æ³•, ä»¥åŠ String çš„ matchã€replaceã€search å’Œ split æ–¹æ³•\n\n|æ–¹æ³•|æè¿°|\n|:---|:---|\n|exec\t|ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡ŒæŸ¥æ‰¾åŒ¹é…çš„RegExpæ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°ç»„ï¼ˆæœªåŒ¹é…åˆ°åˆ™è¿”å›nullï¼‰ã€‚|\n|test\t|ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æµ‹è¯•æ˜¯å¦åŒ¹é…çš„RegExpæ–¹æ³•ï¼Œå®ƒè¿”å›trueæˆ–falseã€‚|\n|match\t|ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡ŒæŸ¥æ‰¾åŒ¹é…çš„Stringæ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°ç»„æˆ–è€…åœ¨æœªåŒ¹é…åˆ°æ—¶è¿”å›nullã€‚|\n|search\t|ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æµ‹è¯•åŒ¹é…çš„Stringæ–¹æ³•ï¼Œå®ƒè¿”å›åŒ¹é…åˆ°çš„ä½ç½®ç´¢å¼•ï¼Œæˆ–è€…åœ¨å¤±è´¥æ—¶è¿”å›-1ã€‚|\n|replace\t|ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡ŒæŸ¥æ‰¾åŒ¹é…çš„Stringæ–¹æ³•ï¼Œå¹¶ä¸”ä½¿ç”¨æ›¿æ¢å­—ç¬¦ä¸²æ›¿æ¢æ‰åŒ¹é…åˆ°çš„å­å­—ç¬¦ä¸²ã€‚|\n|split\t|ä¸€ä¸ªä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æˆ–è€…ä¸€ä¸ªå›ºå®šå­—ç¬¦ä¸²åˆ†éš”ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†åˆ†éš”åçš„å­å­—ç¬¦ä¸²å­˜å‚¨åˆ°æ•°ç»„ä¸­çš„Stringæ–¹æ³•ã€‚|\n\n\nå½“ä½ æƒ³è¦çŸ¥é“åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªåŒ¹é…æ˜¯å¦è¢«æ‰¾åˆ°ï¼Œä½ å¯ä»¥ä½¿ç”¨testæˆ–searchæ–¹æ³•ï¼›æƒ³å¾—åˆ°æ›´å¤šçš„ä¿¡æ¯ï¼ˆä½†æ˜¯æ¯”è¾ƒæ…¢ï¼‰åˆ™å¯ä»¥ä½¿ç”¨execæˆ–matchæ–¹æ³•ã€‚å¦‚æœä½ ä½¿ç”¨execæˆ–matchæ–¹æ³•å¹¶ä¸”åŒ¹é…æˆåŠŸäº†ï¼Œé‚£ä¹ˆè¿™äº›æ–¹æ³•å°†è¿”å›ä¸€ä¸ªæ•°ç»„å¹¶ä¸”æ›´æ–°ç›¸å…³çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡çš„å±æ€§å’Œé¢„å®šä¹‰çš„æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼ˆè¯¦è§ä¸‹ï¼‰ã€‚å¦‚æœåŒ¹é…å¤±è´¥ï¼Œé‚£ä¹ˆexecæ–¹æ³•è¿”å›nullï¼ˆä¹Ÿå°±æ˜¯falseï¼‰ã€‚\n\n```javascript\nvar text = \"cat, bat, sat, fat\"; var pattern1 = /.at/;\n\nvar matches = pattern1.exec(text);\nconsole.log(matches) //[\"cat\", index: 0, input: \"cat, bat, sat, fat\"]\n```\n\n## åŒ¹é…è§„åˆ™\n### å…³é”®å­—åŒ¹é…\nå¸¸ç”¨çš„åŒ¹é…æ–¹å¼ï¼Œé€šå¸¸æ˜¯é€šè¿‡åŒ¹é…å…³é”®è¯æ¥å®ç°å®šä½\n\nç¤ºä¾‹1ï¼šæ­£åˆ™è®¾å®šæ‰‹æœºå·æ ¼å¼\n```js\nvar regex = /^(086-)?1[345789]\\d{9}$/;\nregex.test('15512341234'); // true\n```\n\nç¤ºä¾‹2ï¼šæ­£åˆ™å°†æ—¶é—´æ ¼å¼è½¬æ¢ï¼šå¹´/æœˆ/æ—¥ï¼ˆyyyy/mm/ddï¼‰\n```js\nvar date = new Date();\nvar time = date.toISOString();\nvar regex = /^(\\d{4})-(\\d{2})-(\\d{2})(.+)$/;\ntime.replace(regex, '$1/$2/$3'); // \"2019/08/23\"\n```\n\n### ä½ç½®åŒ¹é…\nå¸¸ç”¨çš„ä½ç½®åŒ¹é…å°±æ˜¯^ï¼ˆåŒ¹é…å­—ç¬¦ä¸²å¼€å¤´ï¼‰å’Œ$ï¼ˆåŒ¹é…å­—ç¬¦ä¸²ç»“å°¾ï¼‰ã€‚\nå¦å¤–è¿˜æœ‰\\bï¼ˆåŒ¹é…ä¸€ä¸ªå•è¯è¾¹ç•Œï¼‰ï¼Œ\\Bï¼ˆåŒ¹é…éå•è¯è¾¹ç•Œï¼‰\n\nç¤ºä¾‹1ï¼šæŠŠå­—ç¬¦ä¸²ä¸­æ‰€æœ‰å•è¯çš„é¦–å­—æ¯å¤§å†™\n```js\nvar regex = /\\b[a-z]/g;\nvar str = 'i am cosyer who is a web developers';\nstr.replace(regex, word => word.toUpperCase()); // \"I Am Cosyer Who Is A Web Developers\"\n```\n\nç¤ºä¾‹2ï¼šæŠŠå­—ç¬¦ä¸²ä¸­æ‰€æœ‰æ¯è¶…è¿‡3ä¸ªå­—ç¬¦çš„å•è¯å°±å¢åŠ ä¸€ä¸ªçŸ­æ¨ªï¼ˆ-ï¼‰\n```js\nvar regex = /[a-zA-Z]{3}\\B/g;\nvar str = 'i am cosyer who is a web developers';\nstr.replace(regex, word => word + '-'); // \"i am cos-yer who is a web dev-elo-per-s\"\n```\n\n## é«˜çº§ç”¨æ³•\n### è´ªå©ªåŒ¹é…\n\n- è´ªå©ªåŒ¹é…ï¼šè¶‹å‘äºæœ€å¤§é•¿åº¦åŒ¹é…ã€‚ï¼ˆé»˜è®¤ï¼‰\n- éè´ªå©ªåŒ¹é…ï¼šåŒ¹é…åˆ°ç»“æœå°±å¥½ã€‚\n\nç¤ºä¾‹1ï¼šè´ªå©ªåŒ¹é…è·å–æ•°å­—\n```js\n'123456789'.match(/\\d+/)[0]; // \"123456789\"\n```\n\nç¤ºä¾‹2ï¼šéè´ªå©ªåŒ¹é…è·å–æ•°å­—\n```js\n'123456789'.match(/\\d+?/)[0]; // \"1\"\n```\n\n### æ‡’æƒ°åŒ¹é…\nä¸Šæ–‡ä¸­çš„éè´ªå©ªåŒ¹é…å°±ç”¨åˆ°äº†æƒ°æ€§åŒ¹é…ï¼Œå…¶ç‰¹ç‚¹å°±æ˜¯åœ¨å…¶ä»–é‡å¤é‡è¯åé¢åŠ ä¸Šé™å®šç¬¦ï¼ˆ?ï¼‰\næƒ°æ€§åŒ¹é…çš„ç‰¹ç‚¹ï¼š\n\n- é‡å¤é‡è¯åé¢æ·»åŠ é™å®šç¬¦ï¼ˆ?ï¼‰\n- æƒ°æ€§åŒ¹é…ä¼šå°½å¯èƒ½å°‘çš„åŒ¹é…å­—ç¬¦ï¼ŒåŒæ—¶å¿…é¡»æ»¡è¶³æ•´ä¸ªåŒ¹é…æ¨¡å¼ã€‚\n\nç¤ºä¾‹1ï¼šéæƒ°æ€§åŒ¹é…å’Œæƒ°æ€§åŒ¹é…\n```js\n'123412341234'.match(/1(\\d+)4/)[0]; // \"123412341234\"\n'123412341234'.match(/1(\\d+?)4/)[0]; // \"1234\"\n```\n\n### å…ˆè¡Œæ–­è¨€/å…ˆè¡Œå¦å®šæ–­è¨€\nå…ˆè¡Œæ–­è¨€ï¼šxåªæœ‰åœ¨yå‰é¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/x(?=y)/çš„å½¢å¼ã€‚\nå…ˆè¡Œå¦å®šæ–­è¨€ï¼šxåªæœ‰ä¸åœ¨yå‰é¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/x(?!y)/çš„å½¢å¼ã€‚\nåŒ¹é…çš„ç»“æœæ˜¯xï¼Œå¦‚é€šè¿‡matchæ–¹æ³•åŒ¹é…é¡¹ä¼šè¿”å›xã€‚\n\nç¤ºä¾‹1ï¼šå…ˆè¡Œæ–­è¨€å’Œå…ˆè¡Œå¦å®šæ–­è¨€çš„ç”¨æ³•\n```js\n/cosyer(?=2019)/.test('cosyer2019'); // true\n/cosyer(?=2019)/.test('cosyer-2019'); // false\n\n/cosyer(?!2019)/.test('cosyer2019'); // false\n/cosyer(?!2019)/.test('cosyer-2019'); // true\n```\næˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè¿™é‡ŒåŒæ—¶åŒ…å«äº†å…³é”®è¯åŒ¹é…å’Œä½ç½®åŒ¹é…ï¼Œå±äºæ­£åˆ™çš„é«˜çº§åŒ¹é…ã€‚\næ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥çœ‹çœ‹æ€ä¹ˆå¤„ç†ä¸šåŠ¡ä¸­çš„é—®é¢˜ã€‚\n\nç¤ºä¾‹2ï¼šé€šè¿‡æ­£åˆ™æŠŠæ•°å­— 1234567890 è½¬æ¢æˆç¾å…ƒ $1,234,567,890\n```js\nvar str = '1234567890';\nvar regex = /(?!^)(?=(\\d{3})+$)/g;\nstr.replace(regex, ',').replace(/^/, '$'); // \"$1,234,567,890\"\n```\n\n### åè¡Œæ–­è¨€/åè¡Œå¦å®šæ–­è¨€\nåè¡Œæ–­è¨€å’Œå…ˆè¡Œæ–­è¨€æ­£å¥½ç›¸åã€‚\n\nåè¡Œæ–­è¨€ï¼šxåªæœ‰åœ¨yåé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/(?<=y)x/çš„å½¢å¼ã€‚\nåè¡Œå¦å®šæ–­è¨€ï¼šxåªæœ‰ä¸å†yåé¢æ‰åŒ¹é…ï¼Œå¿…é¡»å†™æˆ/(?<!y)x/çš„å½¢å¼ã€‚\nåŒ¹é…çš„ç»“æœæ˜¯xï¼Œå¦‚é€šè¿‡matchæ–¹æ³•åŒ¹é…é¡¹ä¼šè¿”å›xã€‚\n\nç¤ºä¾‹1ï¼šåè¡Œæ–­è¨€å’Œåè¡Œå¦å®šæ–­è¨€çš„ç”¨æ³•\n```js\n/(?<=2019)cosyer/.test('2019cosyer'); // true\n/(?<=2019)cosyer/.test('2019-cosyer'); // false\n\n/(?<!2019)cosyer/.test('2019cosyer'); // false\n/(?<!2019)cosyer/.test('2019-cosyer'); // true\n```\nç¤ºä¾‹2ï¼šé€šè¿‡æ­£åˆ™æŠŠç¾å…ƒ $123,456,789,000 å˜æˆç¾å…ƒ $1234,5678,9000\nè¯•ç€é€šè¿‡å…ˆè¡Œæ–­è¨€+å…ˆè¡Œå¦å®šæ–­è¨€æ¥å¤„ç†\n```js\nvar str = '$123,456,789,000';\nvar regex = /(?!^)(?=(\\d{4})+$)/g;\nstr.replace(/,/g, '').replace(regex, ','); // \"$,1234,5678,9000\"\n```\nç”±äºç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯$è€Œä¸æ˜¯æ•°å­—ï¼Œåœ¨è¿™é‡Œå…ˆè¡Œå¦å®šæ–­è¨€åˆ¤æ–­å­—ç¬¦ä¸²åˆå§‹æ— æ•ˆï¼Œæ‰€ä»¥åœ¨$å’Œæ•°å­—ä¸­é—´å‡ºç°äº†é€—å·åˆ†éš”ç¬¦ã€‚\nåŒæ—¶ä¹Ÿä¸èƒ½æŠŠ(?!^)æ”¹æˆ(?!$)ï¼Œå› ä¸ºåŒ¹é…åˆ°1234ï¼Œ56789ï¼Œ000çš„æ—¶å€™å‰é¢çš„å­—ç¬¦ä¹Ÿä¸æ˜¯$è€Œæ˜¯1ï¼Œæ‰€ä»¥ä»ç„¶ä¼šåœ¨å¼€å¤´æ·»åŠ ä¸€ä¸ªé€—å·ï¼ˆ,ï¼‰ã€‚\n```js\nvar str = '$123,456,789,000';\nvar regex = /(?!\\$)(?=(\\d{4})+$)/g;\nstr.replace(/,/g, '').replace(regex, ','); // \"$,1234,5678,9000\"\n```\næˆ‘ä»¬å‘ç°ï¼Œæˆ‘ä»¬åªéœ€è¦æ’é™¤ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯$åé¢è·Ÿç€é€—å·çš„æƒ…å†µã€‚\nè¿™ä¸ªæ—¶å€™æ»¡è¶³åè¡Œæ–­è¨€åŒ¹é…é¡¹ï¼ˆxï¼‰åœ¨ç¾å…ƒç¬¦å·$åé¢ã€‚\nè¯•ç€é€šè¿‡åè¡Œå¦å®šæ–­è¨€ä»£æ›¿å…ˆè¡Œå¦å®šæ–­è¨€ã€‚\n```js\nvar str = '$123,456,789,000';\nvar regex = /(?<!\\$)(?=(\\d{4})+$)/g;\nstr.replace(/,/g, '').replace(regex, ','); // \"$1234,5678,9000\"\n```","tags":["redux"],"categories":["JS"]},{"title":"åŠ¨æ‰‹å®ç°redux","url":"%2F%E5%8A%A8%E6%89%8B%E5%AE%9E%E7%8E%B0redux.html","content":"\næ¦‚å¿µï¼š\n- ä¸€ä¸ªappåªæœ‰ä¸€ä¸ªstoreï¼Œä¸€ä¸ªstoreç®¡ç†ç€ä¸€ä¸ªå…¨å±€stateå«æœ‰ä»¥ä¸‹æ–¹æ³•\n  - getState: è·å– stateï¼›\n  - dispatch: è§¦å‘ action, æ›´æ–° stateï¼›\n  - subscribe: è®¢é˜…æ•°æ®å˜æ›´ï¼Œæ³¨å†Œç›‘å¬å™¨ï¼›\n- createStore ä¼ å…¥reducerï¼Œè¿”å›getState, dispatch, subscribe\n- actionæ˜¯ä¸€ä¸ªè‡³å°‘æœ‰typeè¿™ä¸ªé”®çš„å¯¹è±¡ï¼Œå¯ä»¥å†™ä¸€ä¸ªcreactAction å‡½æ•°å»returnç”Ÿæˆactionå¯¹è±¡\n- createStore.dispatch(action) æ ¹æ®actionè¿™ä¸ªå¯¹è±¡å»æ›´æ–°state\n- dispatchæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå†…éƒ¨åˆå°†æ‰§è¡Œreducerå‡½æ•°\n- reducerä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä¼ å…¥state,action, è¾“å‡ºä¸€ä¸ªæ–°çš„state . (switch case returnâ€¦)\n  - éµå®ˆæ•°æ®ä¸å¯å˜ï¼Œä¸è¦å»ç›´æ¥ä¿®æ”¹ stateï¼Œè€Œæ˜¯è¿”å›å‡ºä¸€ä¸ª æ–°å¯¹è±¡ï¼›\n  - é»˜è®¤æƒ…å†µä¸‹éœ€è¦ è¿”å›åŸæ•°æ®ï¼Œé¿å…æ•°æ®è¢«æ¸…ç©ºï¼›\n  - æœ€å¥½è®¾ç½® åˆå§‹å€¼ï¼Œä¾¿äºåº”ç”¨çš„åˆå§‹åŒ–åŠæ•°æ®ç¨³å®šï¼›\n\n![redux](http://cdn.mydearest.cn/blog/images/redux.png)\n\n---\n<!-- more -->\n\n```html\n<div id = 'title'></div>\n<input type=\"button\" id = \"changeTheme\" value=\"å˜æˆè“è‰²ä¸»é¢˜\">\n```\n\n```javascript\n// å®ç°createStore ä¼ å…¥reducer\nfunction createStore(reducer){\n    // å­˜å‚¨æ•°æ®\n    let state = null\n    // è®¢é˜…åˆ—è¡¨\n    const listenerList=[]\n    // å¢åŠ è®¢é˜…\n    const subscribe=(listener)=>listenerList.push(listener)\n    // è¿”å›state\n    const getState=()=>state \n    // dispatch\n    const dispatch=(action)=>{\n      // æ–°çš„state\n      state=reducer(state,action)\n      // éå†æ‰§è¡Œ\n      listenerList.forEach(item)=>item()\n    }\n    // åˆå§‹åŒ–state\n    dispatch({})\n    return {getState,subscribe,dispatch}\n}\n\n// å®ç°reducer\nfunction reducer(state,action){\n  if(!state){\n    return {\n      title:'çº¢è‰²',\n      color:'red'\n    }\n  }\n  switch(action.type){\n    case 'UPDATE_TITLE':\n    return {...state,title:action.title}\n    case 'UPDATE_COLOR':\n    return {...state,color:action.color}\n    default:return state\n  }\n}\n\n// ä¼ å…¥reducerç”Ÿæˆstore\nconst store = createStore(reducer)\n\n// æ¸²æŸ“ä»£ç \nfunction renderDom(state){\n  const titleDOM = document.getElementById('title');\n  titleDOM.innerHTML = state.title;\n  titleDOM.style.color = state.color;\n}\n\n// ç›‘å¬æ•°æ®å˜åŒ–é‡æ–°æ¸²æŸ“é¡µé¢\nstore.subscribe(() => renderDom(store.getState()));// è®©æ¯æ¬¡dispatchæ—¶éƒ½ä¼šæ‰§è¡Œä¼ å…¥çš„è¿™ä¸ªå‡½æ•°ï¼Œæ¸²æŸ“é¡µé¢\n\n// é¦–æ¬¡æ¸²æŸ“é¡µé¢\nrenderDom(store.getState());\n\n// createAction\n// const MAIN_PAGE_TYPE = 'mainPage'\n// export function getMainPage({ name }) {\n//   return {\n//     type: MAIN_PAGE_TYPE,\n//     payload: {\n//       name\n//     }\n//   }\n// }\n\n// action\nconst updateThemeName = () => ({\n  type: 'UPDATE_TITLE',\n  title: 'è“è‰²'\n});\nconst updateThemeColor = () => ({\n  type: 'UPDATE_COLOR',\n  color: 'blue'\n});\n\n// ç»‘å®šäº‹ä»¶\ndocument.getElementById('changeTheme').onclick = () => {\n  store.dispatch(updateThemeName());\n  store.dispatch(updateThemeColor());\n};\n```\n\n## å®ç°`bindActionCreator`\n```js\n// å°†actionCreatorè½¬åŒ–æˆdispatchå½¢å¼\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function() {\n    return dispatch(actionCreator.apply(this, arguments))\n  }\n}\n\n// å‚æ•°actionCreatorsæ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€…å‡½æ•°ï¼Œdispatchå³store.dispatch\n\nexport default function bindActionCreators(actionCreators, dispatch) {\n  // å¦‚æœä¼ å…¥æ˜¯å‡½æ•°ï¼Œç›´æ¥è¿”å›ä¸€ä¸ªåŒ…è£¹dispatchçš„å‡½æ•°\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch)\n  }\n  // ä¼ å…¥å‚æ•°ä¸ç¬¦åˆè§„èŒƒæƒ…å†µ\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(\n      `bindActionCreators expected an object or a function, instead received ${\n        actionCreators === null ? 'null' : typeof actionCreators\n      }. ` +\n        `Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?`\n    )\n  }\n  // ä¼ å…¥å‚æ•°æ˜¯Objectçš„æƒ…å†µï¼Œéå†å¯¹è±¡ï¼Œæ ¹æ®ç›¸åº”çš„keyï¼Œç”ŸæˆåŒ…è£¹dispatchçš„å‡½æ•°\n  const keys = Object.keys(actionCreators)\n  const boundActionCreators = {}\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i]\n    const actionCreator = actionCreators[key]\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch)\n    }\n  }\n  // è¿”å›æ¯ä¸ªvalueéƒ½æ˜¯åŒ…è£¹dispatchå‡½æ•°çš„å¯¹è±¡\n  return boundActionCreators\n}\n```\n","tags":["redux"],"categories":["JS"]},{"title":"äººä¸€ç”Ÿå¿…é¡»è¦å»çš„3ä¸ªåœ°æ–¹","url":"%2F%E4%BA%BA%E4%B8%80%E7%94%9F%E5%BF%85%E9%A1%BB%E5%8E%BB%E7%9A%843%E4%B8%AA%E5%9C%B0%E6%96%B9.html","content":"\né€šå¸¸æœ‰äººè¯´ä¸€ä¸ªäººä¸€ç”Ÿæœ€å¥½ç»å¸¸å»ä¸‰ä¸ªåœ°æ–¹çœ‹çœ‹ï¼Œäººç”Ÿæ„Ÿæ‚Ÿä¼šæé«˜ä¸€ä¸ªæ¡£æ¬¡ï¼Œäººç”Ÿè§‚ï¼Œä»·å€¼è§‚ä¹ƒè‡³ä¸–ç•Œè§‚ï¼Œéƒ½ä¼šæœ‰ä¸€ä¸ªè´¨çš„é£è·ƒã€‚è¿™ä¸‰ä¸ªåœ°æ–¹å°±æ˜¯ï¼šæ‰˜å„¿æ‰€ã€æ®¡ä»ªé¦†ã€ç›‘ç‹±ã€‚ å¸¸å»æ‰˜å„¿æ‰€ï¼Œçœ‹åˆ°å¤©çœŸçƒ‚æ¼«ã€ç«¥çœŸæ— é‚ªã€æ´»æ³¼å¯çˆ±çš„å­©å­ä»¬ï¼Œä¼šæ›´åŠ çš„ä½“ä¼šåˆ°ç”Ÿå‘½çš„é‡è¦å’Œå¯çˆ±ï¼Œä»è€Œæ›´åŠ çæƒœç”Ÿå‘½ï¼Œçƒ­çˆ±ç”Ÿæ´»ï¼Œæ¿€å‘å‡ºæ›´å¤šç§¯æå‘ä¸Šçš„äººç”Ÿå¿—å‘ã€‚ å¸¸å»æ®¡ä»ªé¦†ï¼Œçœ‹åˆ°æ’’æ‰‹äººå¯°é€å»çš„äººä»¬ï¼Œä¼šæ„Ÿå—åˆ°ï¼Œäººèµ¤æ¡æ¡æ¥ï¼Œèµ¤æ¡æ¡å»ï¼Œäººä¸ºè´¢æ­»ï¼Œé¸Ÿä¸ºé£Ÿäº¡ï¼Œæ˜¯å¤šä¹ˆçš„ç‹­éš˜å’Œè‡ªç§ï¼Œå¿ƒèƒ¸ä¼šè±ç„¶å¼€æœ—ï¼Œï¼Œä¸ä¼šåœ¨ä¸ºé¸¡æ¯›è’œçš®çš„å°äº‹æ–¤æ–¤è®¡è¾ƒï¼Œé€€ä¸€æ­¥æµ·é˜”å¤©ç©ºï¼Œè®©ä¸‰åˆ†å¿ƒå¹³æ°”å’Œã€‚ä¼šæ›´åŠ çš„é¢†ä¼šäººç”Ÿçš„ä»·å€¼æ‰€åœ¨ï¼Œè®©äººç”Ÿæ›´å…·å¼‚å½©ã€‚ å¸¸å»ç›‘ç‹±ï¼Œçœ‹åˆ°æ— è®ºæ˜¯è¿‡å»é«˜å®˜è¿˜æ˜¯è´«æ°‘ç™¾å§“ï¼Œè¿›åˆ°ç›‘ç‹±æ²¡æœ‰äº†å§“åï¼Œåªæœ‰å·ç ï¼Œä¸€å¾‹å›šæœï¼Œè¿›å‡ºæŠ¥å‘Šï¼Œæå¤§çš„é™åˆ¶äº†äººèº«è‡ªç”±ï¼Œå¤©é«˜ä»»é¸Ÿé£ï¼Œæµ·é˜”å‡­é±¼è·ƒçš„ç°å®å·²ç»æˆä¸ºæ¢¦ä¸­çš„ç†æƒ³ã€‚è‡ªå¤å°±æœ‰äººçŠ¯ç‹æ³•èº«æ— ä¸»ï¼Œå› æ­¤ä¹Ÿå°±ä¼šæ›´åŠ çš„æ´èº«è‡ªå¥½ï¼Œä»¥äººä¸ºé•œï¼Œä¸¥äºå¾‹å·±ã€‚å®ˆæ³•åº¦è€…ä¸ºå¹¸ç¦ï¼Œä¸–ä¸Šæœ¬æ²¡æœ‰ç»å¯¹çš„è‡ªç”±ï¼Œéµå®ˆäº†ï¼Œä¹ æƒ¯äº†ï¼Œé€‚åº”äº†ä¹Ÿå°±è‡ªç”±äº†ã€‚\n\n---\n<!--more-->\n\nä¸­å›½çš„äººå®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œäººå‡èµ„æºå°‘ï¼Œè€Œä¸”åˆ†é…ä¸å‡ï¼Œæ—±æ­»çš„æ—±æ­»æ¶æ­»çš„æ¶æ­»ã€‚å°æ—¶å€™å¥¶å¥¶ç»å¸¸è¯´æˆ‘çˆ¸ç”Ÿä¸‹æ¥å¤šä¹ˆç˜¦å°ï¼Œä¸ºäº†ç”Ÿå­˜è¿˜å»å–è¿‡è¡€ã€‚æˆ‘çˆ¸ä¹Ÿæ˜¯ä»æ— åˆ°æœ‰çš„æ‰“æ‹¼ã€‚æˆ‘æ˜¯åŠªåŠ›äº†ï¼Œä½†æˆ‘æ‹¼å‘½åŠªåŠ›äº†ä¹ˆï¼Ÿæ²¡æœ‰ï¼ï¼ï¼æ˜¯éœ€è¦æœ‰é‚£ç§ä¸æˆåŠŸä¾¿æˆä»çš„å†³å¿ƒå’ŒåšæŒåˆ°åº•çš„æ¯…åŠ›ã€‚æ˜¯çš„ï¼Œæˆ‘è‡ªå·±ä»€ä¹ˆéƒ½å°†å¯ä»¥ç‰ºç‰²çš„ï¼è¦æƒ³å¾—åˆ°ä»€ä¹ˆå¿…é¡»ä»˜å‡ºåŒç­‰çš„ä»£ä»·ã€‚æ–°ä¸­å›½æˆç«‹è§£æ”¾äº†äººæ°‘ï¼ŒåŒæ ·ä¹Ÿè¯ç”Ÿäº†æ–°çš„å‰¥å‰Šé˜¶çº§ã€‚æ–‡é©å„ä¸ªç»„ç»‡é—´çš„åˆ©ç›Šå†²çªã€‚ä¸­å›½è¿˜æ˜¯é‚£ä¸ªä¸­å›½ï¼Œä¼¼æ›¾ç›¸è¯†çš„ä¸­å¤®é›†æƒï¼Œäººæ°‘å½“å®¶åšä¸»æ©æ©ï¼Œå½“å¥½éŸ­èœï¼Œæ¥æ”¶è¢«å‰¥å‰Šæ”¶å‰²çš„å‘½è¿ã€‚\n\nè‡ªå¤ä»¥æ¥çš„äººæƒ…ç¤¾ä¼šï¼Œä¸é€ç¤¼åŠä¸æˆäº‹ï¼Œè´ªæ±¡è½é©¬çš„å¤§è€è™ä»¬ä¸€æ‰¹æ¥ä¸€æ‰¹ã€‚æ‹‰å¸®ç»“æ´¾ã€ç»“å…šè¥ç§ã€å®˜å®˜ç›¸æŠ¤ã€‚\n\n- é€€ä¼‘å¹´é¾„å°†æ¥ç›®æ ‡æ˜¯65å²é€€ä¼‘ï¼Œç°åœ¨å›½äººå¹³å‡å¯¿å‘½æ¥è¿‘75å²ï¼Œ10å¹´èƒ½æ‹¿å›å¤šå°‘é€€ä¼‘é‡‘ï¼Ÿ- å…»è€ä¸ªäººéƒ¨åˆ†é€€ä¼‘å¯ä»¥é€å¹´é¢†å›ï¼Œä½†åªç®—æœ¬é‡‘ï¼ŒæŒ‰æœ¬å›½å¤šå¹´é€šè´§è†¨èƒ€ç‡æµ‹ç®—ï¼Œé€€ä¼‘æ—¶ç›¸å½“äºå¤šå°‘å®é™…è´­ä¹°åŠ›ï¼Ÿ\n- ç¤¾ä¿é‡Œæœ‰äº›é™©ç§å¯èƒ½å¤šæ•°äººç”¨ä¸åˆ°ï¼Œæ¯”å¦‚å¤±ä¸šé™©ï¼Œå¤šäº¤äº†å¾ˆå¤šäººä¹Ÿæ²¡å¾—ç›Šï¼Œç®—ä¸‹è¿™ç§ä¼šå å¤šå°‘ï¼Ÿ\n- æœ€åï¼Œè¦çœ‹æ˜¯å…¬å¸å•ç‹¬ç»™å‘˜å·¥äº¤æ»¡é¢è¿˜æ˜¯å…¨ç¤¾ä¼šæ‰€æœ‰å…¬å¸éƒ½äº¤æ»¡é¢ã€‚è¿™ä¹Ÿæœ‰å…³ç³»ï¼Ÿæ˜¯çš„ï¼Œå…¬å¸æ˜¯ç›ˆåˆ©ç»„ç»‡ï¼Œå¤šæ”¯ä»˜äº†æˆæœ¬å°±è¦æƒ³åŠæ³•æ”¶å›æ¥ã€‚\n\nè¿‘äº›å¹´çš„ç¤¾ä¿åˆ¶åº¦ï¼Œè¦çŸ¥é“ä»¥å‰çš„å…¬å¯“éƒ½æ˜¯ä¸äº¤å…»è€ä¿é™©çš„ã€‚ç°åœ¨ä»–ä»¬æ¨å‘è¿˜èƒ½æ‹¿åˆ°ä¸è²çš„å…»è€é‡‘ã€‚æ˜¯è°çš„ç¼´çº³çš„å‘¢ï¼Ÿè¿™æ ·çš„åºæ°éª—å±€èƒ½æŒç»­å¤šä¹…å‘¢ï¼Ÿ\n\nå¦ˆå¦ˆçš„èƒƒç»“çŸ³ã€å¥¶å¥¶çš„ç”²äº¢ã€çˆ·çˆ·çš„éª¨åˆºã€‚èº«ä½“å¥åº·æœ€é‡è¦ï¼Œè®¨åŒåŒ»é™¢é‡Œæ¶ˆæ¯’æ°´å’Œä¸­è¯çš„å‘³é“ã€‚è¿™é‡Œçš„æ°›å›´ä»£å‡¯è±è¾¾ã€‚ä»¥å‰ä¸€è€ä»¥ä¸ºè‡ªå·±æœ‰ç»ç—‡é‡ç—…ï¼Œä»€ä¹ˆåè„‘å‹ºçš„çªèµ·ï¼Œåæ‘©æ‰˜è½¦æ—¶çš„å¿ƒæ‚¸ï¼Œä¸æ•¢å»åšåˆºæ¿€æ€§çš„å¨±ä¹é¡¹ç›®ï¼Œä»¥å‰å»æ–¹ç‰¹éƒ½åªæ˜¯å»ååæ—‹è½¬æœ¨é©¬ï¼Œæœ‰å¿ƒè„ç—…ã€‚è¿™å°±æ˜¯æˆ‘çš„æé™å—ï¼Ÿï¼\n\nç§‘å®¤çœŸçš„å¥½èµšé’±ï¼ŒåŒ»ç”Ÿå¥½é—²ã€‚\n\nåŠªåŠ›åŠªåŠ›ï¼Œä¸æƒ³å½“éŸ­èœäº†ã€‚ä¿æŠ¤å¥½è‡ªå·±çš„å®¶äººï¼ŒåŠªåŠ›åœ°æ´»ä¸‹å»ï¼ï¼ï¼\n\nä¸€ç‚¹ç²¾ç¥éƒ½æ²¡æœ‰~æ—©çŸ¥é“å»è‹å®äº†ï¼Œæœç„¶è¿˜æ˜¯æƒ³å•¥éƒ½å¹²å¤–åŒ…å…¬å¸åªèƒ½æ¸©é¥±ï¼Œå‘è´¢æ˜¯æ²¡æœ‰å¸Œæœ›çš„ã€‚åªèƒ½å»äº’è”ç½‘å…¬å¸ã€‚\nä¸æ˜¯ä»€ä¹ˆç—…çœŸæ˜¯å¤ªå¥½äº†ï¼Œä½†æ˜¯è¦è€ƒå…¬åŠ¡å‘˜ã€‚å¯èƒ½ä¼šç¦»å¾ˆè¿œã€‚æˆ‘ä¸ºäº†ç¦»å¾—è¿‘é€‰æ‹©äº†å¤–åŒ…å…¬å¸ï¼Œå¤„äºé„™è§†é“¾ä¸‹ï¼Œå­¦ä¹ å—é™ã€‚æ¥ç§æ´»ã€‚å¯èƒ½å»snè¿™ç§å¤§å…¬å¸é•€ä¸ªé‡‘ä¹Ÿæ˜¯ä¸ªå¥½é€‰æ‹©å§ï¼å¤§å¹³å°ä¹‹é—´è·³è½¬çš„é‡è¦æ€§ã€‚\n\nä¸€å¤©åˆ°æ™šæ²¡ä»€ä¹ˆç²¾ç¥ï¼Œè®©äººå¥½æ‹…å¿ƒã€‚10.3ä¸€èµ·ç…®é¥­åƒäº†ã€‚å¯¹èœä»·ä»€ä¹ˆçš„ä¹Ÿæœ‰äº†å¤§æ¦‚çš„äº†è§£ï¼Œç”Ÿæ´»çš„ä¸°å¯Œå¤šå½©ã€‚2å¹´ä¸åˆ°15kï¼Œå¤§åŸå¸‚çš„é«˜è–ªçœŸæ˜¯ä¸ªè¯±æƒ‘ï¼Œå®¶é‡Œè¿˜å’Œæˆ‘è¯´ä¹°è½¦ä½emmmã€‚\n\nangularjså†™çš„å¥½éš¾å—ï¼Œä¸€ä¸ª controller æ–‡ä»¶å¤§å‡ åƒè¡Œçœ‹çš„è„‘èƒ€==ã€‚ç°åœ¨ç»æµä¸‹è¡Œï¼Œå—äº¬è¿™è¾¹æ²¡ä»€ä¹ˆçš„å¥½å…¬å¸å•Šã€‚hwæ¡Œé¢äº‘ç”¨èµ·æ¥ä¹Ÿä¸å¤ªçˆ½ï¼ŒåŸºæœ¬æœ‰é—®é¢˜ä¸€ä¸ªæ‹‰ä¸€ä¸ªæœ€åä¸€å †äººå®šä½é—®é¢˜ï¼Œå›½é™…åŒ–çš„å¤šä¸ªå±€ç‚¹ç‰¹æ€§ä¹Ÿå¾ˆéº»çƒ¦ï¼Œå…¨æ˜¯ä¸šåŠ¡å±‚é¢å’Œç¯å¢ƒéƒ¨ç½²ã€‚\n\nemmmåˆå¾—æè®²åº§ï¼Œæ··ä¸è¿‡å»å•Šï¼Œäººå¤šç´§å¼ å¿˜è¯ã€‚åˆä¸å¥½æŠŠé—®é¢˜å…¨è´´PPTä¸Šï¼Œå°´å°¬ã€‚å…¨æ˜¯è¯­æ³•å†…å®¹å…¶å®ä¹Ÿæ²¡ä»€ä¹ˆå¥½è®²çš„ğŸ˜‚æå¾—Switchéƒ½è½ç°äº†ã€‚\n\n996çæƒœæ—¶é—´å……åˆ†åˆ©ç”¨æ—¶é—´ï¼Œä¸åšæ— æ•ˆåŠ³åŠ¨ã€‚\n\nåœ¨é«˜ä¸­çš„æ—¶å€™èº«è¾¹å°šä¸”éƒ½æ˜¯ä¸è‡ªå·±å®¶å¢ƒç›¸å·®ä¸å¤§çš„äººï¼Œåˆ°äº†å¤§å­¦å°±å½»åº•æ˜¾éœ²å‡ºé˜¶çº§å·®è·ï¼Œå®¶å¢ƒå¥½çš„ä¸ä»…ç²¾é€šå¤–è¯­ï¼Œè€Œä¸”å…´è¶£å¹¿æ³›ï¼Œç›¸æ¯”ä¹‹ä¸‹æˆ‘ä»¬å°±åªä¼šæ­»è¯»ä¹¦ã€‚æˆ‘ä»¬è¿™äº›åº•å±‚çˆ¬å‡ºçš„å¹´è½»äººå»å‚åŠ å­¦ç”Ÿä¼šå‚åŠ æ‹›æ–°ï¼Œç«äº‰ä¸è¿‡åˆ«äººæµåˆ©çš„å£æ‰ï¼Œå»æ–‡è‰ºéƒ¨åˆæ²¡æœ‰å‚²äººçš„æ‰è‰ºï¼Œä¸€æ—¶é—´éš¾å…è§‰å¾—è‡ªå·±ä¸€æ— æ˜¯å¤„ã€‚\n\n1. revenage/respect/insult/limit edu/compare\n2. protect family/stress\n3. enjoy life/interest/enthusiastic\n4. fk fair/breakthrough\n5. strong/advance giant\n6. death\n7. house/physical beauty desire è±ªå®…ã€æ™ºèƒ½å®¶å±…\n8. science\n\n1. remember packet/jokes\n2. æƒ…ç»ªç®¡ç†/ç¥ç»è¡°å¼±\n3. ä¸åˆ†åœºåˆ dependency=>excuse\n4. selfish æ‰‹è‡‚ hug\n5. tourism house\n6. naive ç‹¬ç«‹æ€è€ƒ\n7. é“å¾·ç»‘æ¶ key\n8. lazy/ç´¯ åšä¸åˆ°çš„è¯å°±åˆ«è¯´\n9. åŒæ–¹çˆ¶æ¯æ”¯æŒ\n10. seiseiçš„èº«æ\n\n1. ä¸å»åšçš„è¯æ°¸è¿œä¹Ÿåšä¸åˆ°ã€‚\n2. è¦æƒ³å¾—åˆ°ä»€ä¹ˆï¼Œå¿…é¡»ä»˜å‡ºåŒç­‰çš„ä»£ä»·ã€‚\n3. æˆ‘çš„é’»å¤´å¯æ˜¯çªç ´å¤©é™…çš„é’»å¤´å•Šï¼\n4. å­¦ä¹ å°±æ˜¯ä¸æ–­é‡å¤ä¸æŠ„è¢­çš„ä¸€ä¸ªè¿‡ç¨‹ã€‚\n\n1. eat drink\n2. enjoy nature\n3. work\n4. games\n5. ç—’\n6. sleep break\n7. pull and push\n8. wc\n9. é©¬æ€é¸¡spa\n10. Bath feet\n11. think animate\n12. neck bones\n13. é‡‡è€³\nå½¢å®¹è¯ï¼š ç™½å¯Œç¾ã€ç™½ç˜¦å¹¼ã€é»‘é•¿ç›´ã€é’æ˜¥qcã€è‚¤ç™½è²Œç¾\n\n- é©¬æ–¯æ´›éœ€æ±‚å±‚æ¬¡ç†è®ºå…¶åŸºæœ¬å†…å®¹æ˜¯å°†äººçš„éœ€æ±‚ä»ä½åˆ°é«˜ä¾æ¬¡åˆ†ä¸ºç”Ÿç†éœ€æ±‚ã€å®‰å…¨éœ€æ±‚ã€ç¤¾äº¤éœ€æ±‚ã€å°Šé‡éœ€æ±‚å’Œè‡ªæˆ‘å®ç°éœ€æ±‚äº”ç§éœ€æ±‚ã€‚\n\n- é©¬å¤ªæ•ˆåº”æ˜¯æŒ‡å¼ºè€…æ„ˆå¼ºã€å¼±è€…æ„ˆå¼±çš„ç°è±¡ã€‚\n\n- å¢¨è²å®šå¾‹ï¼šå¦‚æœäº‹æƒ…æœ‰å˜åçš„å¯èƒ½ï¼Œä¸ç®¡è¿™ç§å¯èƒ½æ€§æœ‰å¤šå°ï¼Œå®ƒæ€»ä¼šå‘ç”Ÿã€‚\n\n- å›šå¾’å›°å¢ƒï¼šä¸¤ä¸ªå…±è°‹çŠ¯ç½ªçš„äººè¢«å…³å…¥ç›‘ç‹±ï¼Œä¸èƒ½äº’ç›¸æ²Ÿé€šæƒ…å†µã€‚å¦‚æœä¸¤ä¸ªäººéƒ½ä¸æ­å‘å¯¹æ–¹ï¼Œåˆ™ç”±äºè¯æ®ä¸ç¡®å®šï¼Œæ¯ä¸ªäººéƒ½åç‰¢ä¸€å¹´ï¼›è‹¥ä¸€äººæ­å‘ï¼Œè€Œå¦ä¸€äººæ²‰é»˜ï¼Œåˆ™æ­å‘è€…å› ä¸ºç«‹åŠŸè€Œç«‹å³è·é‡Šï¼Œæ²‰é»˜è€…å› ä¸åˆä½œè€Œå…¥ç‹±åå¹´ï¼›è‹¥äº’ç›¸æ­å‘ï¼Œåˆ™å› è¯æ®ç¡®å‡¿ï¼ŒäºŒè€…éƒ½åˆ¤åˆ‘å…«å¹´ã€‚ç”±äºå›šå¾’æ— æ³•ä¿¡ä»»å¯¹æ–¹ï¼Œå› æ­¤å€¾å‘äºäº’ç›¸æ­å‘ï¼Œè€Œä¸æ˜¯åŒå®ˆæ²‰é»˜ã€‚(ä¸¤ä¸ªäººå¹³åˆ†æˆ–ç‹¬å 100w)\n\n- ä¸›æ—æ³•åˆ™æ˜¯è‡ªç„¶ç•Œé‡Œç”Ÿç‰©å­¦æ–¹é¢çš„ç‰©ç«å¤©æ‹©ã€ä¼˜èƒœåŠ£æ±°ã€å¼±è‚‰å¼ºé£Ÿçš„è§„å¾‹æ³•åˆ™ã€‚\n\n- ä¸–ç•Œäº”å¤§å¥åº·æ°´æœ\n\n1. è‹¹æœï¼›è‹¹æœå«æœ‰ä¸°å¯Œçš„ç³–ç±»ã€æœ‰æœºé…¸ã€çº¤ç»´ç´ ã€ç»´ç”Ÿç´ ã€çŸ¿ç‰©è´¨ã€å¤šé…šåŠé»„é…®ç±»è¥å…»ç‰©è´¨ï¼Œé™ä½è¡€è„‚ï¼Œé™è¡€å‹ï¼Œé¢„é˜²ç™Œç—‡ã€‚è‹¹æœåœ¨å¤å¸Œè…Šç¥è¯ä¸­ï¼Œæ˜¯æ™ºæ…§çš„è±¡å¾ã€‚\n\n2. æï¼›æä¸­å«æœ‰ä¸°å¯Œçš„Î²èƒ¡ç½—åœç´ ï¼Œèƒ½å¾ˆå¥½åœ°å¸®åŠ©äººæ‘„å–ç»´ç”Ÿç´ Aï¼›ä½†ä¸å®œå¤šé£Ÿï¼Œä¸€æ¬¡ä»¥3-5æšå³å¯ã€‚\n\n3. é¦™è•‰ï¼›å¤å°åº¦å’Œæ³¢æ–¯æ°‘é—´è®¤ä¸ºï¼Œé‡‘è‰²çš„é¦™è•‰æœå®ä¹ƒæ˜¯â€œä¸Šè‹èµäºˆäººç±»çš„ä¿å¥ä½³æœâ€ã€‚ä¼ è¯´ä½›æ•™å§‹ç¥–é‡Šè¿¦ç‰Ÿå°¼ç”±äºåƒäº†é¦™è•‰è€Œè·å¾—æ™ºæ…§ï¼Œé¦™è•‰å› æ­¤è¢«èª‰ä¸ºâ€œæ™ºæ…§ä¹‹æœâ€ã€‚é¦™è•‰å«æœ‰å¤šç§å¾®é‡å…ƒç´ å’Œç»´ç”Ÿç´ ï¼Œèƒ½å¸®åŠ©è‚Œè‚‰æ¾\nå¼›ï¼Œä½¿äººèº«å¿ƒæ„‰æ‚¦ ï¼Œå¹¶å…·æœ‰ä¸€å®šçš„å‡è‚¥åŠŸæ•ˆã€‚\n\n4. é»‘è“ï¼›åŒç­‰é‡é‡é»‘è“ä¸­çº¤ç»´ç‰©è´¨çš„å«é‡æ˜¯å…¶ä»–æ°´æœçš„3å€å¤šï¼Œæ¯«æ— ç–‘é—®å¯¹å¿ƒè„å¥åº·æœ‰å¸®åŠ©ï¼›é˜²è¡°è€ï¼Œæé«˜å…ç–«åŠ›ï¼Œå…·æœ‰ä¿ƒè¿›è„‘ä»£è°¢ï¼Œé™å‹ï¼Œé™è¡€è„‚å’ŒæŠ—å¿ƒå¾‹å¤±å¸¸çš„ä½œç”¨ã€‚\n\n5. è“è“ï¼›è“è“æ˜¯ç§ç‰¹åˆ«çš„æ°´æœï¼Œå¤šåƒè“è“å¯duå‡å°‘å°¿è·¯æ„ŸæŸ“çš„å‡ ç‡ï¼›æ‹¥æœ‰æŠ—æ°§åŒ–çš„åŠŸèƒ½ï¼Œdaoå¯ä»¥å‡ä½ç™Œç—‡å‘ç”Ÿçš„æœºä¼šã€‚\n\næ´»ç€ï¼Œå³ä½¿æ€ä¹ˆæ ·ä¹Ÿè¦æ´»ç€ï¼Œä¸ºè‡ªå·±æ´»ç€ï¼Œè‡ªæ®‹å°±è‡ªæ®‹ï¼Œæ²¡äººå…³å¿ƒåªæ˜¯ä»–ä»¬ä¸ç†è§£ï¼Œä¹Ÿä¸æ„¿æ„äº†è§£ã€‚é‚£äº›ä»€ä¹ˆéƒ½ä¸çŸ¥é“çš„äººå‡­ä»€ä¹ˆåŠä½ ä¸ºåˆ«äººæ´»ï¼Ÿå‡­ä»€ä¹ˆè§‰å¾—è‡ªæ®‹åªæ˜¯æƒ³è¯æ˜ä»€ä¹ˆï¼Ÿå¯ç¬‘ï¼ä¸€ä¸ªäººé‡åˆ°æ— è®ºå¦‚ä½•éƒ½æ— æ³•è§£å†³åˆä¸èƒ½å¯¹æŠ—çš„ç—›è‹¦ï¼Œé‚£ä»–é™¤äº†æ‰¾ä¸€ä¸ªèƒ½å¤Ÿå‘æ³„çš„é€”å¾„è¿˜èƒ½å¹²ä»€ä¹ˆï¼Ÿåªæ˜¯ä¸è¦åšè®©è‡ªå·±åæ‚”çš„äº‹ï¼Œåæ‚”çš„äº‹æƒ…å¾ˆéš¾æŒ½å›ã€‚æˆ‘ä¸çŸ¥é“æ­»èƒ½ä¸èƒ½è®©æˆ‘è§£è„±ï¼Œä½†æˆ‘ä¸€å®šä¼šåæ‚”ã€‚å‡­ä»€ä¹ˆæ´»çš„è¿™ä¹ˆç—›è‹¦äº†ï¼Œè¿˜è¦å»æ­»å‘¢ï¼Ÿé‚£ä¹‹å‰çš„ç—›è‹¦è¿˜æœ‰æ„ä¹‰å—ï¼Ÿç”˜å¿ƒå—ï¼Ÿæˆ‘ä¸ç”˜å¿ƒã€‚ä¸€ç”Ÿæœ€ç¾å¥½çš„ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œå°±æ˜¯æ­»çš„æ—¶å€™ï¼Œè¿˜èƒ½å‘è‡ªå†…å¿ƒçš„å¾®ç¬‘ç€å»æ­»ã€‚ç°åœ¨å‘¢ï¼Ÿéš¾é“å°±å¸¦ç€è„‘å­é‡Œé‚£äº›æŠ˜ç£¨äººçš„ä¸œè¥¿ï¼Œç»“æŸè¿™ä¸€ç”Ÿï¼Ÿæ€»ä¹‹ï¼Œä¸è¦åšè®©è‡ªå·±åæ‚”çš„äº‹ï¼Œå³ä¾¿æ»¡èº«ä¼¤ç—›ï¼Œä¹Ÿè¯·å¾®ç¬‘ç€æ´»åˆ°æœ€åå§ï¼(â—¦Ë™â–½Ë™â—¦)\n\nå¦‚æœä½ é€‰æ‹©è®¤å¯ä¸”æ¥çº³å­¦å†çš„é„™è§†é“¾ï¼Œå¹¶åœ¨ç”Ÿæ´»ä¸­å¤„å¤„åŠ¿åˆ©æ”€æ¯”ï¼Œä»å¿ƒé‡Œæ¸´æœ›è·å¾—äººä¸Šäººçš„è™šè£ï¼Œé‚£ä¹ˆä½ é‡åˆ°çš„æ¯ä¸€ä¸ªäººéƒ½ä¼šè®©ä½ åœ¨è‡ªå¤§å’Œè‡ªå‘ä¸­åå¤ã€å¾˜å¾Šï¼Œç»§è€Œæ’•è£‚ä½ çš„è‡ªæˆ‘è®¤åŒå’Œè‡ªæˆ‘å°Šä¸¥ã€‚é•¿æ­¤ä»¥å¾€ï¼Œä½ ç¡®å®å°±å®Œäº†ã€‚\n","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"title":"toFixedæ–¹æ³•æ³¨æ„ç‚¹","url":"%2FtoFixed%E6%96%B9%E6%B3%95%E6%B3%A8%E6%84%8F%E7%82%B9.html","content":"\n### é‡åˆ°çš„é—®é¢˜:\n\njsçš„æµ®ç‚¹æ•°è¿ç®—ä¸å‡†ç¡®ï¼Œ(a + b).toFixed(2)èƒ½è§£å†³ä¸€éƒ¨åˆ†é—®é¢˜ï¼Œä½†å¹¶ä¸å®Œç¾ã€‚\n\n```javascript\n0.1 + 0.2 //0.30000000000000004\n(0.1 + 0.2).toFixed(2) // 0.30\n0.815 + 0.1 // 0.9149999999999999\n(0.815 + 0.1).toFixed(2) // 0.91ï¼Œé”™è¯¯ï¼æœŸæœ›0.92\n// toFixedå¹¶ä¸æ˜¯æˆ‘ä»¬é€šå¸¸ç†è§£çš„â€œå››èˆäº”å…¥â€ï¼Œè€Œæ˜¯â€œå››èˆå…­å…¥äº”ç•™åŒâ€\n// ç®€å•æ¥è¯´å°±æ˜¯ï¼šå››èˆå…­å…¥äº”è€ƒè™‘ï¼Œäº”åéé›¶å°±è¿›ä¸€ï¼Œäº”åä¸ºé›¶çœ‹å¥‡å¶ï¼Œäº”å‰ä¸ºå¥‡åº”èˆå»ï¼Œäº”å‰ä¸ºå¶è¦è¿›ä¸€ã€‚\n(0.225).toFixed(2) // 0.23\n(0.235).toFixed(2) // 0.23ï¼Œé”™è¯¯ï¼æœŸæœ›0.24\n```\n---\n<!-- more -->\n\n### è§£å†³æ–¹æ¡ˆ\n\nç½‘ç»œä¸Šæœ‰å¾ˆå¤šç§è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥ä¿®æ­£toFixedæ–¹æ³•ï¼Œä¹Ÿå¯ä»¥é‡æ–°å®šä¹‰å››åˆ™è¿ç®—ã€‚é‡æ–°å®šä¹‰å››åˆ™è¿ç®—ï¼Œæœ€ä¸ºè§„èŒƒï¼Œä½†ä½¿ç”¨éº»çƒ¦ï¼Œæ•…æˆ‘æœ€ç»ˆé€‰æ‹©äº†ä¿®æ­£toFixedã€‚\nå£°æ˜ï¼šæºç æ¥æºäºç½‘ç»œï¼Œæœ¬æ–‡åªæ˜¯æ·»åŠ äº†æ³¨é‡Šå’Œåˆ†æã€‚\n\n```javascript\n// ç›´æ¥æ›¿æ¢åŸå‹é“¾ä¸Šçš„æ–¹æ³•ï¼Œæ–¹ä¾¿ä½¿ç”¨\nNumber.prototype.toFixed = function (n) {\n  // nä¸ºæœŸæœ›ä¿ç•™çš„ä½æ•°ï¼Œè¶…è¿‡é™å®šï¼ŒæŠ¥é”™ï¼\n  if (n > 20 || n < 0) {\n    throw new RangeError('toFixed() digits argument must be between 0 and 20');\n  }\n  // è·å–æ•°å­—\n  const number = this;\n  // å¦‚æœæ˜¯NaN,æˆ–è€…æ•°å­—è¿‡å¤§ï¼Œç›´æ¥è¿”å›'NaN'æˆ–è€…ç±»ä¼¼'1e+21'çš„ç§‘å­¦è®¡æ•°æ³•å­—ç¬¦ä¸²\n  if (isNaN(number) || number >= Math.pow(10, 21)) {\n    return number.toString();\n  }\n  // é»˜è®¤ä¿ç•™æ•´æ•°\n  if (typeof (n) == 'undefined' || n == 0) {\n    return (Math.round(number)).toString();\n  }\n\n  // å…ˆè·å–å­—ç¬¦ä¸²\n  let result = number.toString();\n  // è·å–å°æ•°éƒ¨åˆ†\n  const arr = result.split('.');\n\n  // æ•´æ•°çš„æƒ…å†µï¼Œç›´æ¥åœ¨åé¢åŠ ä¸Šå¯¹åº”ä¸ªæ•°çš„0å³å¯\n  if (arr.length < 2) {\n    result += '.';\n    for (let i = 0; i < n; i += 1) {\n      result += '0';\n    }\n    return result;\n  }\n\n  // æ•´æ•°å’Œå°æ•°\n  const integer = arr[0];\n  const decimal = arr[1];\n  // å¦‚æœå·²ç»ç¬¦åˆè¦æ±‚ä½æ•°ï¼Œç›´æ¥è¿”å›\n  if (decimal.length == n) {\n      return result;\n  }\n  // å¦‚æœå°äºæŒ‡å®šçš„ä½æ•°ï¼Œè¡¥ä¸Š\n  if (decimal.length < n) {\n    for (let i = 0; i < n - decimal.length; i += 1) {\n      result += '0';\n    }\n    return result;\n  }\n  // å¦‚æœåˆ°è¿™é‡Œè¿˜æ²¡ç»“æŸï¼Œè¯´æ˜åŸæœ‰å°æ•°ä½å¤šäºæŒ‡å®šçš„nä½\n  // å…ˆç›´æ¥æˆªå–å¯¹åº”çš„ä½æ•°\n  result = integer + '.' + decimal.substr(0, n);\n  // è·å–åé¢çš„ä¸€ä½\n let last = decimal.substr(n, 1);\n if (/^\\d(9){5,}[89]$/.test(decimal.substr(n))) {\n    last += last + 1;\n  }\n  // å¤§äºç­‰äº5ç»Ÿä¸€è¿›ä¸€ä½\n  if (parseInt(last, 10) >= 5) {\n    // è½¬æ¢å€æ•°ï¼Œè½¬æ¢ä¸ºæ•´æ•°åï¼Œå†è¿›è¡Œå››èˆäº”å…¥\n    const x = Math.pow(10, n);\n    // è¿›ä¸€ä½åï¼Œè½¬åŒ–è¿˜åŸä¸ºå°æ•°\n    result = (Math.round((parseFloat(result) * x)) + 1) / x;\n    // å†ç¡®è®¤ä¸€é\n    result = result.toFixed(n);\n  }\n\n  return result;\n};\n```","tags":["çŸ¥è¯†"],"categories":["JS"]},{"title":"jsåˆ¤æ–­æµè§ˆå™¨ç±»å‹å’Œè®¿é—®æ¥æº","url":"%2Fjs%E5%88%A4%E6%96%AD%E6%B5%8F%E8%A7%88%E5%99%A8%E7%B1%BB%E5%9E%8B%E5%92%8C%E8%AE%BF%E9%97%AE%E6%9D%A5%E6%BA%90.html","content":"\n`userAgent` å±æ€§æ˜¯ä¸€ä¸ªåªè¯»çš„å­—ç¬¦ä¸²ï¼Œå£°æ˜äº†æµè§ˆå™¨ç”¨äº HTTP è¯·æ±‚çš„ç”¨æˆ·ä»£ç†å¤´çš„å€¼ã€‚\n\nä¸€èˆ¬æ¥è®²ï¼Œå®ƒæ˜¯åœ¨ `navigator.appCodeName` çš„å€¼ä¹‹ååŠ ä¸Šæ–œçº¿å’Œ `navigator.appVersion` çš„å€¼æ„æˆçš„ã€‚\n\nä¾‹å¦‚ï¼šMozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.2; SV1; .NET CLR 1.1.4322)ã€‚\n\næ³¨ï¼šç”¨æˆ·ä»£ç†å¤´ï¼šuser-agent headerã€‚\n\n--- \n<!-- more -->\n\n## åˆ¤æ–­æµè§ˆå™¨ç±»å‹\n```javascript\n//åˆ¤æ–­å½“å‰æµè§ˆç±»å‹ \n function BrowserType() \n { \n   var userAgent = navigator.userAgent; //å–å¾—æµè§ˆå™¨çš„userAgentå­—ç¬¦ä¸² \n   var isOpera = userAgent.indexOf(\"Opera\") > -1; //åˆ¤æ–­æ˜¯å¦Operaæµè§ˆå™¨ \n   var isIE = userAgent.indexOf(\"compatible\") > -1 && userAgent.indexOf(\"MSIE\") > -1 && !isOpera; //åˆ¤æ–­æ˜¯å¦IEæµè§ˆå™¨ \n   var isEdge = userAgent.indexOf(\"Windows NT 6.1; Trident/7.0;\") > -1 && !isIE; //åˆ¤æ–­æ˜¯å¦IEçš„Edgeæµè§ˆå™¨ \n   var isFF = userAgent.indexOf(\"Firefox\") > -1; //åˆ¤æ–­æ˜¯å¦Firefoxæµè§ˆå™¨ \n   var isSafari = userAgent.indexOf(\"Safari\") > -1 && userAgent.indexOf(\"Chrome\") == -1; //åˆ¤æ–­æ˜¯å¦Safariæµè§ˆå™¨ \n   var isChrome = userAgent.indexOf(\"Chrome\") > -1 && userAgent.indexOf(\"Safari\") > -1; //åˆ¤æ–­Chromeæµè§ˆå™¨ \n \n   if (isIE)  \n   { \n      var reIE = new RegExp(\"MSIE (\\\\d+\\\\.\\\\d+);\"); \n      reIE.test(userAgent); \n      var fIEVersion = parseFloat(RegExp[\"$1\"]); \n      if(fIEVersion == 7) \n      { return \"IE7\";} \n      else if(fIEVersion == 8) \n      { return \"IE8\";} \n      else if(fIEVersion == 9) \n      { return \"IE9\";} \n      else if(fIEVersion == 10) \n      { return \"IE10\";} \n      else if(fIEVersion == 11) \n      { return \"IE11\";} \n      else \n      { return \"0\"}//IEç‰ˆæœ¬è¿‡ä½ \n    }//isIE end \n     \n    if (isFF) { return \"FF\";} \n    if (isOpera) { return \"Opera\";} \n    if (isSafari) { return \"Safari\";} \n    if (isChrome) { return \"Chrome\";} \n    if (isEdge) { return \"Edge\";} \n  }\n```\n\n## åˆ¤æ–­æµè§ˆå™¨è®¿é—®æ¥æº\n### æ–¹æ³•1\n```javascript\nwindow.location.href = /Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent) ? \"https://www.baidu.com/\" :  \"http://news.baidu.com/\";\n```\n\n### æ–¹æ³•2\n```javascript\nfunction IsPC() {\n    var userAgentInfo = navigator.userAgent;\n    var Agents = [\"Android\", \"iPhone\",\n                \"SymbianOS\", \"Windows Phone\",\n                \"iPad\", \"iPod\"];\n    var flag = true;\n    for (var v = 0; v < Agents.length; v++) {\n        if (userAgentInfo.indexOf(Agents[v]) > 0) {\n            flag = false;\n            break;\n        }\n    }\n    return flag;\n}\n```\n\n### æ–¹æ³•3\n```javascript\nfunction browserRedirect() {\n    var sUserAgent = navigator.userAgent.toLowerCase();\n    var bIsIpad = sUserAgent.match(/ipad/i) == \"ipad\";\n    var bIsIphoneOs = sUserAgent.match(/iphone os/i) == \"iphone os\";\n    var bIsMidp = sUserAgent.match(/midp/i) == \"midp\";\n    var bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == \"rv:1.2.3.4\";\n    var bIsUc = sUserAgent.match(/ucweb/i) == \"ucweb\";\n    var bIsAndroid = sUserAgent.match(/android/i) == \"android\";\n    var bIsCE = sUserAgent.match(/windows ce/i) == \"windows ce\";\n    var bIsWM = sUserAgent.match(/windows mobile/i) == \"windows mobile\";\n    if (!(bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) ){\n        window.location.href=Bé¡µé¢;\n    }\n}\nbrowserRedirect();\n```","tags":["çŸ¥è¯†"],"categories":["JS"]},{"title":"å®ç°ç½‘é¡µé¡¶éƒ¨åŠ è½½æ¡loading","url":"%2F%E5%AE%9E%E7%8E%B0%E7%BD%91%E9%A1%B5%E9%A1%B6%E9%83%A8%E5%8A%A0%E8%BD%BD%E6%9D%A1loading.html","content":"\n### ä¸ºä»€ä¹ˆè¦åŠ loadingçš„æ•ˆæœ\n\nä¸€æ¬¾å¥½çš„äº§å“ï¼Œéƒ½éœ€è¦æœ‰ä¸€ä¸ªæ¼‚äº®çš„loadingç•Œé¢ã€‚lodaingç•Œé¢ä¸ä»…èƒ½ç»™ç”¨æˆ·å¸¦æ¥è‰¯å¥½çš„ä½“éªŒï¼Œè€Œä¸”æœ‰æ•ˆçš„æ¶ˆé™¤äº†ç¨‹åºåŠ è½½ç­‰å¾…è¿‡ç¨‹ä¸­çš„æ¯èºæ„Ÿã€‚loadingè¿›åº¦æ¡æ›´æ˜¯å¯¹å½“å‰åŠ è½½è¿›åº¦çš„ä¸€ä¸ªè‰¯å¥½åé¦ˆã€‚ä»0%-100%çš„åŠ è½½è¿›åº¦å¯ä»¥æœ‰æ•ˆçš„å‘ŠçŸ¥ç”¨æˆ·è¿˜æœ‰å¤šä¹…å³å¯æ‰“å¼€é¡µé¢ã€‚å¸¦æœ‰è¿›åº¦æ¡çš„loadingç•Œé¢åœ¨ç¨‹åºä¸­å¹¶ä¸ç½•è§ï¼Œä½†æ˜¯åœ¨webä¸­å‘¢ï¼Ÿåˆ°ç›®å‰ä¸ºæ­¢æµè§ˆå™¨å¹¶æ²¡æœ‰æä¾›æœ‰æ•ˆçš„æµè§ˆå™¨å¯¹è±¡æ¥åé¦ˆé¡µé¢çš„åŠ è½½è¿›åº¦ï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥ã€ä¾¿æ·çš„è·å¾—é¡µé¢åŠ è½½è¿›åº¦çš„åé¦ˆã€‚\n\n---\n<!-- more -->\n\n### jqueryå®ç°\n```html\n<div id=\"progress\"> \n   <span></span> \n</div> \n```\n\n```css\nbody{ \n      margin:0; \n  } \n  #progress { \n      position:fixed; \n      height: 2px; \n      background:#6bc30d; \n      transition:opacity 500ms linear \n  } \n  #progress.done { \n      opacity:0 \n  } \n  #progress span { \n      position:absolute; \n      height:2px; \n      -webkit-box-shadow:#6bc30d 1px 0 6px 1px; \n      -webkit-border-radius:100%; \n      opacity:1; \n      width:150px; \n      right:-10px; \n      -webkit-animation:pulse 2s ease-out 0s infinite; \n  } \n \n  @-webkit-keyframes pulse { \n      30% { \n          opacity:.6 \n      } \n      60% { \n          opacity:0; \n      } \n      100% { \n          opacity:.6 \n      } \n} \n```\n\n```javascript\n$({property: 0}).animate({property: 100}, { \n    duration: 2000, \n    step: function() { \n        var percentage = Math.round(this.property); \n \n        $('#progress').css('width',  percentage+\"%\"); \n \n         if(percentage == 100) { \n                $(\"#progress\").addClass(\"done\");//å®Œæˆï¼Œéšè—è¿›åº¦æ¡ \n            } \n    } \n}); \n```\n\n### tip\n- è¿™ç§æ–¹æ³•ç®€å•æ˜äº†ï¼Œä½†å…¼å®¹æ€§ä¸æ˜¯å¤ªå¥½ã€‚ä¸»æµçš„æµè§ˆå™¨è‚¯å®šæ²¡æœ‰é—®é¢˜ï¼Œä½†å¦‚æœè€ƒè™‘IEå…¼å®¹æ€§çš„ï¼Œå°±ä¸è¦ç”¨æ­¤æ–¹æ³•äº†ã€‚\n- durationæ˜¯è®¾ç½®æ—¶é—´çš„ã€‚é»˜è®¤æ˜¯2ç§’ã€‚æ¢ç®—ä»£ç ï¼š2000=2ç§’\n- è¯·å¼•å…¥jqueryåº“æ–‡ä»¶ã€‚å¦åˆ™ç¨‹åºä¸ä¼šè¿è¡Œ\n\n","tags":["çŸ¥è¯†"],"categories":["JS"]},{"title":"Sasså­¦ä¹ ç¬”è®°","url":"%2Fsass.html","content":"\n### ç®€ä»‹\nSass æ˜¯ä¸€æ¬¾å¼ºåŒ– CSS çš„è¾…åŠ©å·¥å…·ï¼Œå®ƒåœ¨ CSS è¯­æ³•çš„åŸºç¡€ä¸Šå¢åŠ äº†å˜é‡ (variables)ã€åµŒå¥— (nested rules)ã€æ··åˆ (mixins)ã€å¯¼å…¥ (inline imports) ç­‰é«˜çº§åŠŸèƒ½ï¼Œè¿™äº›æ‹“å±•ä»¤ CSS æ›´åŠ å¼ºå¤§ä¸ä¼˜é›…ã€‚\n\n---\n<!--more-->\n\n### å¯¼å…¥\n```javascript\n@import \"reset.css\"; // css\n@import \"index\"; // sass\n```\n\n### å˜é‡\n```javascript\n// æ™®é€šå˜é‡\n$fontSize:16px;\n\n// é»˜è®¤å˜é‡\n$baseLineHeight: 1.5 !default;\n\n// è¦†ç›–é»˜è®¤å˜é‡ï¼Œéœ€è¦å†™åœ¨ !default å‰é¢\n$baseLineHeight: 1.7;\n$baseLineHeight: 1.5 !default;\n\n// ä¸€ç»´ list\n$px: (5px 10px 20px 30px);\n\n// äºŒç»´ list\n$px: (5px 10px)\n     (20px 30px);\n// æˆ–è€…\n$pxs: 5px 10px, 20px 30px;\n\n// Map ç±»ä¼¼å¯¹è±¡\n$heading: (\n    h1: 2em,\n    h2: 1.5em,\n    h3: 1.2em\n);\n```\n\n### æ’å€¼\næ’å€¼ä½¿ç”¨ #{}\n\n```javascript\n// Variables\n$mySelector: banner;\n\n// .banner\n.#{mySelector} {\n    font-weight: bold;\n    line-height: 40px;\n    margin: 0 auto;\n}\n```\n\n### è·³å‡ºåµŒå¥—\n@at-root (without: rule| all | media)\n\n```javascript\n// è·³å‡ºæ™®é€šçš„åµŒå¥—\n.demo {\n    animation: motion 3s infinite;\n\n    @at-root {\n        @keyframes motion {\n          ...\n        }\n    }\n}\n\n// è·³å‡º media åµŒå¥—\n@media print {\n    .parent2{\n        color:#f00;\n\n        @at-root (without: media) {\n            .child2 {\n                width:200px;\n            }\n        }\n    }\n}\n```\n\n### æ··åˆ(mixin)\nä½¿ç”¨ @mixin å£°æ˜æ··åˆï¼Œå¯ä»¥ä¼ é€’å‚æ•°ï¼Œå‚æ•°åä»¥$ç¬¦å·å¼€å§‹ï¼Œå¤šä¸ªå‚æ•°ä»¥é€—å·åˆ†å¼€ï¼Œä¹Ÿå¯ä»¥ç»™å‚æ•°è®¾ç½®é»˜è®¤å€¼ã€‚\n@mixin é€šè¿‡ @include æ¥è°ƒç”¨ã€‚\næ··åˆå™¨ä¸­ä¸ä»…å¯ä»¥åŒ…å«å±æ€§ï¼Œä¹Ÿå¯ä»¥åŒ…å« css è§„åˆ™ï¼ŒåŒ…å«é€‰æ‹©å™¨å’Œé€‰æ‹©å™¨ä¸­çš„å±æ€§ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ & ä¸Šä¸‹æ–‡ã€‚\n\nä¸ºä¾¿äºä¹¦å†™ï¼Œ@mixin å¯ä»¥ç”¨ = è¡¨ç¤ºï¼Œè€Œ @include å¯ä»¥ç”¨ + è¡¨ç¤º\n\n```javascript\n// æ— å‚æ•°\n@mixin block {\n    display: block;\n}\n\n// css è§„åˆ™ï¼Œæ³¨æ„ä¸Šä¸‹æ–‡\n@mixin no-bullets {\n    list-style: none;\n    li {\n        list-style-image: none;\n        list-style-type: none;\n        margin-left: 0px;\n    }\n}\n\n// å¸¦å‚æ•°\n@mixin opacity($opacity: 50) {\n    opacity: $opacity / 100;\n    filter: alpha(opacity=$opacity);\n}\n\n// å¤šä¸ªå‚æ•°\n@mixin horizontal-line($border: 1px dashed #ccc, $padding: 10px){\n    border-bottom: $border;\n    padding-top: $padding;\n    padding-bottom: $padding;\n}\n\n@include horizontal-line($padding: 15px);\n\n// å¤šç»„å€¼å‚æ•°\n@mixin box-shadow($shadow...) {\n    -webkit-box-shadow:$shadow;\n    box-shadow:$shadow;\n}\n\n@include box-shadow(\n    0 2px 2px rgba(0, 0, 0, 0.3),\n    0 3px 3px rgba(0, 0, 0, 0.2)\n);\n```\n\n#### @Content\n@content å®ƒå¯ä»¥ä½¿ @mixin æ¥å—ä¸€æ•´å—æ ·å¼ï¼Œæ¥å—çš„æ ·å¼ä» @content å¼€å§‹ã€‚\n\n```javascript\n@mixin max-screen($res) {\n    @media only screen and ( max-width: $res ) {\n        @content; // body { color: red }\n    }\n}\n\n@include max-screen(480px) {\n    body { color: red } // è¿™é‡Œå°±i @content å¼•ç”¨çš„å†…å®¹\n}\n```\n\n## ç»§æ‰¿\né€‰æ‹©å™¨ç»§æ‰¿å¯ä»¥è®©é€‰æ‹©å™¨ç»§æ‰¿å¦ä¸€ä¸ªé€‰æ‹©å™¨çš„æ‰€æœ‰æ ·å¼ï¼Œå¹¶è”åˆå£°æ˜ã€‚ä½¿ç”¨é€‰æ‹©å™¨çš„ç»§æ‰¿ï¼Œè¦ä½¿ç”¨å…³é”®è¯ @extendï¼Œåé¢ç´§è·Ÿéœ€è¦ç»§æ‰¿çš„é€‰æ‹©å™¨ã€‚\nç»§æ‰¿å¯ä»¥ç»§æ‰¿é»˜è®¤çš„å…ƒç´ å±æ€§ï¼Œæ¯”å¦‚è®©ä¸€ä¸ªdivç»§æ‰¿aï¼Œé‚£ä¹ˆè¿™ div çœ‹èµ·æ¥å°±å¥½åƒ a ä¸€æ ·ã€‚\n\n```javascript\n// ç»§æ‰¿ç°æœ‰çš„æ ‡ç­¾ï¼Œæˆ–ç±»\nh1{\n    border: 4px solid #ff9aa9;\n}\n.speaker{\n    @extend h1;\n    border-width: 2px;\n}\n```\n\n## å ä½é€‰æ‹©å™¨%\nå¯ä»¥å®šä¹‰å ä½é€‰æ‹©å™¨ %ï¼Œå¦‚æœä¸è°ƒç”¨åˆ™ä¸ä¼šæœ‰ä»»ä½•å¤šä½™çš„ css ä»£ç ã€‚\n\n```javascript\n%block {\n    display: block;\n}\n\n.box {\n    @extend %block;\n}\n```\n\n## å‡½æ•°\nsasså®šä¹‰äº†å¾ˆå¤šå‡½æ•°å¯ä¾›ä½¿ç”¨ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰å‡½æ•°ï¼Œä»¥@fuctionå¼€å§‹ã€‚\n\nä½¿ç”¨æœ€å¤šçš„æ˜¯é¢œè‰²å‡½æ•°ï¼š\né¢œè‰²å‡½æ•°ä¸­åˆä»¥ lighten å‡æ·¡å’Œ darken åŠ æ·±ä¸ºæœ€ï¼Œ\nå…¶è°ƒç”¨æ–¹æ³•ä¸º lighten($color, $amount) å’Œ darken($color, $amount)\nå®ƒä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯é¢œè‰²å€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°éƒ½æ˜¯ç™¾åˆ†æ¯”ã€‚\n\n```javascript\n@function pxToRem($px) {\n    @return $px / $baseFontSize * 1rem;\n}\nbody {\n    color: lighten($gray, 10%); // ç›´æ¥ä½¿ç”¨\n}\ndiv {\n    font-size: pxToRem(16px);\n    color: darken($gray, 10%);\n}\n```\n\n## @ifåˆ¤æ–­\n@if å¯ä¸€ä¸ªæ¡ä»¶å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å’Œ @else ç»“åˆå¤šæ¡ä»¶ä½¿ç”¨\n\n```javascript\n$big: false;\np {\n    @if $big == false {\n        margin: 10px;\n    }\n    @else {\n        margin: 10px auto;\n    }\n}\n```\n\n## ä¸‰ç›®åˆ¤æ–­\nè¯­æ³•ä¸ºï¼šif($condition, $if_true, $if_false) ã€‚ä¸‰ä¸ªå‚æ•°åˆ†åˆ«è¡¨ç¤ºï¼šæ¡ä»¶ï¼Œæ¡ä»¶ä¸ºçœŸçš„å€¼ï¼Œæ¡ä»¶ä¸ºå‡çš„å€¼ã€‚\n\n```javascript\n$min: 20;\np {\n    color: if($min > 10, red, blue); // blue\n}\n```\n\n## forå¾ªç¯\nfor å¾ªç¯æœ‰ä¸¤ç§å½¢å¼ï¼Œåˆ†åˆ«ä¸ºï¼š@for $var from [start] through [end] å’Œ @for $var from [start] to [end]ã€‚\nå…³é”®å­—throughè¡¨ç¤ºåŒ…æ‹¬endè¿™ä¸ªæ•°ï¼Œè€Œtoåˆ™ä¸åŒ…æ‹¬endè¿™ä¸ªæ•°ã€‚\n\n```javascript\n@for $i from 1 through 3 {\n    .item-#{$i} { width: 2em * $i; }\n}\n```\n\n## @each å¾ªç¯\nè¯­æ³•ä¸ºï¼š@each $var in [list or map]\n\n```javascript\n$headings: (h1: 2em, h2: 1.5em, h3: 1.2em);\n@each $header, $size in $headings {\n    #{$header} {\n        font-size: $size;\n    }\n}\n```\n","tags":["Sass"],"categories":["CSS"]},{"title":"å¦‚ä½•ç»ƒå°±è¶…å¼ºçš„å­¦ä¹ èƒ½åŠ›","url":"%2F%E5%A6%82%E4%BD%95%E7%BB%83%E5%B0%B1%E8%B6%85%E5%BC%BA%E7%9A%84%E5%AD%A6%E4%B9%A0%E8%83%BD%E5%8A%9B.html","content":"\n### å­¦ä¹ å¼€å§‹å‰çš„å‡†å¤‡\n\nå¿ƒæ€æˆ‘è®¤ä¸ºä¸–ç•Œä¸Šæ²¡æœ‰â€œå›°éš¾â€çš„å†…å®¹ï¼Œåªæœ‰â€œç®€å•ä½†æ˜¯ä¸å®Œæ•´â€çš„å†…å®¹ã€‚çˆ±å› æ–¯å¦è¯´ï¼šâ€œå¦‚æœä½ ä¸èƒ½è®©ä¸€ä¸ªäº”å²å°å­©ç†è§£ä½ çš„æ¦‚å¿µï¼Œé‚£å°±æ„å‘³ç€ä½ å¯¹è¿™ä¸ªæ¦‚å¿µä¸å¤Ÿäº†è§£ã€‚â€è¿™å¥è¯çš„å«ä¹‰å¾ˆä¸°å¯Œã€‚é¦–å…ˆï¼Œä¸ºä»€ä¹ˆä¸€ä¸ªäº”å²å°å­©å…·å¤‡å¯ä»¥ç†è§£æ‰€æœ‰æ¦‚å¿µçš„èƒ½åŠ›ï¼Ÿå› ä¸ºæ‰€æœ‰æ¦‚å¿µæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸€ä¸ªé€»è¾‘é“¾æ¡ï¼Œä¸€ç¯æ¥ä¸€ç¯ã€‚åªè¦æŠŠæ¯ä¸€ä¸ªç¯èŠ‚çš„é€»è¾‘ç†è§£äº†ï¼Œé‚£ä½ å¯¹è¿™ä¸ªæ¦‚å¿µæœ¬èº«å°±ç†è§£é€äº†ã€‚è¿™ä¸ªé€»è¾‘é“¾æ¡ä¸Šçš„æ¯ä¸€ç¯éƒ½ä¸å›°éš¾ï¼Œæ‰€ä»¥ä¸€ä¸ªäº”å²å°å­©éƒ½èƒ½ç†è§£ã€‚ç†è§£ä¸€ä¸ªæ¦‚å¿µæœ€å›°éš¾çš„åœ°æ–¹åœ¨äºå¡«è¡¥ä¸€ä¸ªæ–­è£‚çš„é€»è¾‘é“¾æ¡ã€‚å¾ˆå¤šæ—¶å€™ï¼Œæ•™ç§‘ä¹¦é‡Œä¼šè¯´ï¼šâ€œå› ä¸ºAï¼Œæ‰€ä»¥Cã€‚â€ ç„¶è€Œé‚£ä¸ªæ¦‚å¿µå…¶å®æ˜¯â€œå› ä¸ºAï¼Œæ‰€ä»¥Bï¼Œæ‰€ä»¥Cã€‚â€åœ¨è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±ä¼šå¤´å¤§ï¼šçœ‹ä¸æ‡‚Aå’ŒCä¹‹é—´çš„è”ç³»å•Šï¼Œéš¾é“æ˜¯å› ä¸ºAæ‰€ä»¥Dæ‰€ä»¥Cï¼Ÿè¿˜æ˜¯å› ä¸ºAæ‰€ä»¥Eæ‰€ä»¥Cï¼Ÿå›°éš¾å°±æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­å‡ºç°çš„ã€‚æˆ‘ä»¬éƒ½æ›¾æœ‰è¿‡è¿™ä¸ªç»å†ï¼šè‡ªå·±è‹¦è‹¦æ€ç´¢äº†è®¸ä¹…çš„éš¾é¢˜ï¼Œåœ¨åˆ«äººä¸€ä¸¤å¥è¯çš„ç‚¹æ‹¨ä¸‹å°±è±ç„¶å¼€æœ—ã€‚è¿™ç§ç»å†çš„æœ¬è´¨å°±æ˜¯å¯¹æ–¹å‘Šè¯‰äº†ä½ ï¼šâ€œAå’ŒCä¹‹é—´ç¼ºå¤±çš„é‚£ä¸ªéƒ¨åˆ†æ˜¯Bã€‚â€ä»Aåˆ°Båˆ°Cçš„é€»è¾‘ä¸éš¾ï¼Œéš¾çš„æ˜¯ä¿®è¡¥Aå’ŒCä¹‹é—´æ–­è£‚çš„é€»è¾‘é“¾æ¡ã€‚å› æ­¤ï¼Œæˆ‘å†æ¬¡é‡å¤ï¼šä¸–ç•Œä¸Šæ²¡æœ‰â€œå›°éš¾â€çš„å†…å®¹ï¼Œåªæœ‰â€œç®€å•ä½†æ˜¯ä¸å®Œæ•´â€çš„å†…å®¹ã€‚å½“ä½ åœ¨å­¦ä¹ ä¸Šæ„Ÿåˆ°æ°”é¦æ—¶ï¼Œè®°ä½ä¸Šé¢è¿™å¥è¯ï¼Œå®ƒå°†ä¼šç»™ä½ ç»§ç»­æ¢ç´¢çš„ä¿¡å¿ƒå’Œå‹‡æ°”ã€‚\n\n---\n<!-- more -->\n\n### ç—´è¿·ï¼ˆobsessionï¼‰\n\nâ€œç—´è¿·â€æ˜¯æˆ‘ç”¨è¿‡çš„æœ€æœ‰æ•ˆçš„æ–¹æ³•ã€‚å½“æˆ‘å­¦åˆ°ä¸€ä¸ªæ–°æ¦‚å¿µæ—¶ï¼Œå¦‚æœæˆ‘ä¸èƒ½é©¬ä¸Šç†è§£å®ƒï¼Œæˆ‘å°±ä¼šä¸€æ•´å¤©åå¤åœ¨è„‘ä¸­æ€ç´¢è¿™ä¸ªæ¦‚å¿µï¼šèµ°è·¯æ—¶ã€åƒé¥­æ—¶ã€åè½¦æ—¶éƒ½åœ¨æ€è€ƒã€‚å…¶å®å°±æ˜¯æŠŠåˆ«äººçœ‹æ‰‹æœºçš„æ—¶é—´æ‹¿æ¥æ€è€ƒæ¦‚å¿µäº†ã€‚ä½†æ˜¯â€œç—´è¿·â€å’Œå¸¸è§çš„â€œåˆ©ç”¨ç¢ç‰‡æ—¶é—´â€æœ‰ä¸€ä¸ªæ ¹æœ¬æ€§çš„ä¸åŒã€‚åˆ©ç”¨ç¢ç‰‡æ—¶é—´æ˜¯è¢«åŠ¨çš„ï¼Œæ˜¯â€œå› ä¸ºæˆ‘æœ‰è¿™äº›æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘è¦åˆ©ç”¨å¥½å®ƒâ€ï¼›è€Œç—´è¿·æ˜¯ä¸»åŠ¨çš„ï¼Œæ˜¯â€œæˆ‘å¯¹è¿™ä¸ªå†…å®¹å¾ˆå¥½å¥‡ï¼Œæ‰€ä»¥æˆ‘è¦å¼„æ‡‚å®ƒã€‚â€æ¢å¥è¯è¯´ï¼Œåˆ©ç”¨ç¢ç‰‡æ—¶é—´çš„é‡ç‚¹åœ¨äºâ€œåˆ©ç”¨æ—¶é—´â€ï¼Œè€Œç—´è¿·çš„é‡ç‚¹åœ¨äºâ€œä½ å¾ˆå¥½å¥‡â€ã€‚å½“ä½ ç”¨â€œç—´è¿·â€çš„æ–¹æ³•æƒ³é€šä¸€ä¸ªæ¦‚å¿µæ—¶ï¼Œä½ å°±ä¼šæŠŠè¿™ä¸ªæ¦‚å¿µè®°å¾—ç‰¹åˆ«ç‰¢å›ºï¼Œå› ä¸º1ï¼‰ä½ èŠ±äº†å¾ˆå¤šæ—¶é—´åå¤æ€è€ƒå®ƒï¼Œè¿™æœ¬èº«å°±æ˜¯ä¸€ä¸ªè®°å¿†çš„è¿‡ç¨‹ï¼›2ï¼‰ä½ å¯¹è¿™ä¸ªæ¦‚å¿µä¼šæœ‰è‡ªå·±çš„ç†è§£ï¼ŒçŸ¥å…¶ç„¶å¹¶çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œè€Œä¸æ˜¯å•çº¯æŠŠæ•™ç§‘ä¹¦èƒŒäº†ä¸‹æ¥ã€‚â€œçŸ¥å…¶ç„¶å¹¶çŸ¥å…¶æ‰€ä»¥ç„¶â€æ„å‘³ç€å½“ä½ å¯¹è¿™ä¸ªæ¦‚å¿µçš„è®°å¿†å˜å¾—æ¨¡ç³Šæ—¶ï¼Œä½ è„‘é‡Œå°†æœ‰æ›´å¤šå…³äºè¿™ä¸ªæ¦‚å¿µçš„å†…å®¹æ¥â€œæç¤ºâ€ä½ å°†å…¶è®°èµ·æ¥ã€‚\n\n### æœ‰æ•ˆç‡çš„å­¦ä¹ ç­–ç•¥\n\nå½“ä½ é‡åˆ°ä¸€é“æ•°å­¦éš¾é¢˜æ—¶ï¼Œä½ ä¼šæ€ä¹ˆåšï¼ŸæŸ¥ç­”æ¡ˆï¼Ÿè‡ªå·±è‹¦è‹¦æ€ç´¢ï¼Ÿå¼€å§‹ç©æ‰‹æœºé€ƒé¿ï¼Ÿæˆ‘çš„åšæ³•æ˜¯åœ¨æœ‰ç­”æ¡ˆçš„æƒ…å†µä¸‹å…ˆæŸ¥ç­”æ¡ˆï¼Œä¸æµªè´¹æ—¶é—´åœ¨è§£é¢˜è¿‡ç¨‹ä¸Šï¼Œè€Œæ˜¯æŠŠæ—¶é—´éƒ½èŠ±åœ¨ç†è§£æ¦‚å¿µä¸Šã€‚è¿™æ ·æ‰å¯ä»¥æŠŠæ—¶é—´çš„æ•ˆç”¨æœ€å¤§åŒ–ï¼Œå› ä¸ºéš¾é¢˜éƒ½æ˜¯æ ‘çš„å¶å­ï¼Œè€Œé¢˜ç›®è€ƒå¯Ÿçš„æ¦‚å¿µæ˜¯æ ‘çš„ä¸»å¹²ã€‚ä¸€æ£µæ ‘åªæœ‰ä¸€ä¸ªä¸»å¹²ï¼Œä½†æ˜¯å¯ä»¥æœ‰èŒ«èŒ«å¤šçš„å¶å­ã€‚å¦‚æœä½ æ¯ä¸ªéš¾é¢˜éƒ½è‡ªå·±æ€ç´¢çš„è¯ï¼Œä½ å¤§æ¦‚ç‡å¾—å­¦åˆ°çŒ´å¹´é©¬æœˆäº†ã€‚å› æ­¤ï¼Œåº”å¯¹éš¾é¢˜æœ€å¥½çš„æ–¹æ³•ä¸æ˜¯ç¡¬åˆšï¼Œè€Œæ˜¯æ‰¾ç­”æ¡ˆã€‚","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"title":"é€‰æ‹©","url":"%2F%E9%80%89%E6%8B%A9.html","content":"\n{% centerquote %} \næ²¡æœ‰æ–¹å‘çš„èˆ¹ï¼Œä»»ä½•æ–¹å‘éƒ½æ˜¯é€†é£ã€‚\n{% endcenterquote %} \n\n{% centerquote %} \næ‹¼å‘½æ´»ä¸‹å»ï¼Œå‘ç°æ›´å¤§çš„ä¸–ç•Œã€‚\n{% endcenterquote %} \n\né€‰æ‹©æ¯”åŠªåŠ›æ›´åŠ é‡è¦ã€‚åœ¨ä¸­å›½è¿™ä¸ªæœ‰ç€ç‰¹æ®Šå›½æƒ…çš„å›½å®¶é‡Œï¼Œä¸ªäººçš„ä½ç½®æ˜¯å¾ˆéš¾æ‰¾å‡†å®šä½çš„ã€‚æ··çš„å·®äº†ï¼Œè¢«äººé„™å¤·ã€‚æ··çš„å¥½äº†æ‹›äººè®°æ¨ã€‚äººå°±æ˜¯å–œæ¬¢äº’ç›¸æ¯”è¾ƒï¼Œæ¯ä¸ªäººçš„å­¦ä¹ äº§å‡ºæ¯”æ˜¯ä¸ä¸€æ ·çš„ã€‚ä¸æ»¡è¶³äºç°çŠ¶ï¼Œæ€»æƒ³ç€æ˜å¤©ä¸€å®šæ¯”ä»Šå¤©çš„è‡ªå·±å¼ºã€‚\n\n--- \n<!--more-->\n\næ¯ä¸ªäººçš„æ ¼å±€å’Œæ‰€è°“çš„å¹¸ç¦åº¦éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œnj1å¹´10kçœ‹ä¸Šå»å·²ç»ä¸é”™äº†ï¼Œæ¯”ä¸Šä¸è¶³æ¯”ä¸‹æœ‰ä½™ã€‚æœ‰å¾ˆå¤šè€å®¶çš„å¹´è½»äººæ‹¿ç€å¾®è–„çš„è–ªæ°´è¿‡ç€éšé‡è€Œå®‰çš„ç”Ÿæ´»ï¼Œè€Œæœ‰è‡ªå°Šå¿ƒå¸Œæœ›å—åˆ°åˆ«äººçš„è‚¯å®šï¼ŒåŠªåŠ›åœ°æ´»ä¸‹å»ã€‚å»å¤–åŒ…å°±å»å¤–åŒ…å§ï¼Œé’±ç»™è¶³ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ç¦åˆ©å¾…é‡æœ‰ä¸é”™ã€‚å°±æ˜¯ä¼°è®¡è¦ä¸Šsnå’Œtnçš„é»‘åå•äº†ï¼Œå‘äº†offeréƒ½ä¸å»ã€‚ã€‚ã€‚ä¹Ÿæœ‰éœ€è¦é‡æ–°ç§Ÿæˆ¿ç­‰ä¸€ç³»åˆ—é—®é¢˜ã€‚å°±æ˜¯æŠ€æœ¯å•ä¸€ï¼Œå·¥ä½œç¯å¢ƒå·®ï¼Œå†…ç½‘ç¯å¢ƒã€‚ä¸ç®¡æ€æ ·éƒ½ä¸èƒ½æ‡ˆæ€ ï¼Œä¸ä¼šè¿™ä¹ˆä¸€ç›´å¹²ä¸‹å»ã€‚ä½†æ˜¯ç¦åˆ©å¾…é‡è¿˜æ˜¯ä¸é”™çš„ï¼Œä¸æ–­å……å®è‡ªå·±çš„æŠ€èƒ½ã€‚å­˜é‡ä¸å¢é‡\n\né£å‘³äººé—´çœŸå¥½çœ‹ï¼Œæµå£æ°´=3=\n2018.11.20åˆè®©æˆ‘æƒ³èµ·äº†revengeï¼Œç”Ÿæ´»æ˜¯éœ€è¦`passion`ï¼Œ`enthusastic`ï¼Œ`motion`,`stress`ã€‚\n\nåˆ¶å®šè®¡åˆ’ï¼Œæ—¶é—´ç®¡ç†ã€‚åšä¸€ä¸ªå¥½çœ‹çš„todoListã€‚åŒºåˆ«äºå…¶ä»–äººï¼Œè‡ªä¸»æ€è€ƒã€ç”„åˆ«æ˜¯éçš„èƒ½åŠ›ã€‚\n\n`æˆåŠŸç”·å£«` --- è‡ªèº«çš„å¼ºå¤§\n- æ•™è‚²\n- ç§æ´»\n- åº—é¢\n- è¥å…»å¸ˆ\n- ç†è´¢","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"title":"consoleæ§åˆ¶å°ä¼˜åŒ–","url":"%2Fconsole%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3.html","content":"\nç†Ÿæ‚‰å‰ç«¯çš„ä¸ä¼šå¯¹consoleå’Œalerté™Œç”Ÿï¼Œä¸¤è€…åœ¨è°ƒè¯•çš„æ—¶å€™å¯è°“æ˜¯æ³•å®çº§åˆ«çš„å·¥å…·ï¼Œä½†æ˜¯å…³äºconsoleï¼Œå…¶å®è¿œè¿œä¸æ­¢äºconsole.logè¿™ä¸€ä¸ªç®€å•çš„å‘½ä»¤ï¼Œå®ƒèƒ½åšçš„äº‹æƒ…æœ‰å¾ˆå¤šï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬æ¥ä¸€èµ·äº†è§£ä¸€ä¸‹ï¼Œå®ƒæœ‰å“ªäº›å†·é—¨åŠŸèƒ½å§ã€‚\n\n---\n<!--more-->\n### æ˜¾ç¤ºä¿¡æ¯çš„å‘½ä»¤\n```javascript\nconsole.log('hello world');\nconsole.info('ä¿¡æ¯');\nconsole.debug('è°ƒè¯•');\nconsole.error('é”™è¯¯');\nconsole.warn('è­¦å‘Š');\n```\n\n### å ä½ç¬¦\nâ€‹ consoleä¸Šè¿°çš„é›†ä¸­åº¦æ”¯æŒprintfçš„å ä½ç¬¦æ ¼å¼ï¼Œæ”¯æŒçš„å ä½ç¬¦æœ‰ï¼šå­—ç¬¦ï¼ˆ%sï¼‰ã€æ•´æ•°ï¼ˆ%dæˆ–%iï¼‰ã€æµ®ç‚¹æ•°ï¼ˆ%fï¼‰å’Œå¯¹è±¡ï¼ˆ%oï¼‰\n\n```javascript\nconsole.log(\"%då¹´%dæœˆ%dæ—¥\",2016,11,11);\n```\n\n### ä¿¡æ¯åˆ†ç»„\n```javascript\nconsole.group(\"ç¬¬ä¸€ç»„ä¿¡æ¯\");\nconsole.log(\"ç¬¬ä¸€ç»„ç¬¬ä¸€æ¡:ä½•é—®èµ·(http://hovertree.com)\");\nconsole.log(\"ç¬¬ä¸€ç»„ç¬¬äºŒæ¡:æŸ¯ä¹ä¹‰(http://keleyi.com)\");\nconsole.groupEnd();\nconsole.group(\"ç¬¬äºŒç»„ä¿¡æ¯\");\nconsole.log(\"ç¬¬äºŒç»„ç¬¬ä¸€æ¡:HoverClock ä¸€ä¸ªjQueryæ—¶é’Ÿæ’ä»¶\");\nconsole.log(\"ç¬¬äºŒç»„ç¬¬äºŒæ¡:æ¬¢è¿ä½¿ç”¨\");\nconsole.groupEnd();\n```\n\n### å¯¹è±¡ä¿¡æ¯\n```javascript\nvar obj={\n    id:1,\n    name:123\n}\nconsole.dir(obj)\n```\n\n### æ˜¾ç¤ºç½‘é¡µèŠ‚ç‚¹\n```javascript\nconsole.dirxml()ç”¨æ¥æ˜¾ç¤ºç½‘é¡µçš„æŸä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰æ‰€åŒ…å«çš„html/xmlä»£ç \nvar info = document.getElementById('info');\nconsole.dirxml(info);\n```\n\n### åˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºçœŸ\nâ€‹console.assert()ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªè¡¨è¾¾å¼æˆ–å˜é‡æ˜¯å¦ä¸ºçœŸã€‚å¦‚æœç»“æœä¸ºå¦ï¼Œåˆ™åœ¨æ§åˆ¶å°è¾“å‡ºä¸€æ¡ç›¸åº”ä¿¡æ¯ï¼Œå¹¶ä¸”æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚\n\n```javascript\nconsole.assert(1 == 1); \nconsole.assert(1 == 2); // Assertion failed: console.assert\n```\n\n### è¿½è¸ªå‡½æ•°çš„è°ƒç”¨è¸ªè¿¹\n```javascript\nfunction add(a,b){\nconsole.trace();\nreturn a+b;\n}\nvar x = add3(1,1);\nfunction add3(a,b){return add2(a,b);}\nfunction add2(a,b){return add1(a,b);}\nfunction add1(a,b){return add(a,b);}\n// add add1 add2 add3\n```\n\n### è®¡æ—¶åŠŸèƒ½\nconsole.time()å’Œconsole.timeEnd()ï¼Œç”¨æ¥æ˜¾ç¤ºä»£ç çš„è¿è¡Œæ—¶é—´ã€‚\n\n```javascript\nconsole.time(\"æ§åˆ¶å°è®¡æ—¶å™¨ä¸€\");\nfor(var i=0;i<10000;i++){\nfor(var j=0;j<1000;j++){}\n}\nconsole.timeEnd(\"æ§åˆ¶å°è®¡æ—¶å™¨ä¸€\");\n```","tags":["ä¼˜åŒ–"],"categories":["çŸ¥è¯†"]},{"title":"å‰ç«¯æ€§èƒ½ä¼˜åŒ–","url":"%2F%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html","content":"\nå‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸»è¦æ˜¯ä¸ºäº†æé«˜é¡µé¢çš„åŠ è½½é€Ÿåº¦ï¼Œä¼˜åŒ–ç”¨æˆ·çš„è®¿é—®ä½“éªŒã€‚\n---\n<!--more-->\n\n![optimize](http://cdn.mydearest.cn/blog/images/optimize.png)\n\n## é¡µé¢çš„å†…å®¹\n1. é€šè¿‡æ–‡ä»¶åˆå¹¶ã€css é›ªç¢§å›¾ã€ä½¿ç”¨ base64 ç­‰æ–¹å¼æ¥å‡å°‘ HTTP è¯·æ±‚æ•°ï¼Œé¿å…è¿‡å¤šçš„è¯·æ±‚é€ æˆç­‰å¾…çš„æƒ…å†µã€‚\n\n2. é€šè¿‡ DNS ç¼“å­˜ç­‰æœºåˆ¶æ¥å‡å°‘ DNS çš„æŸ¥è¯¢æ¬¡æ•°ã€‚\n\n3. é€šè¿‡è®¾ç½®ç¼“å­˜ç­–ç•¥ï¼Œå¯¹å¸¸ç”¨ä¸å˜çš„èµ„æºè¿›è¡Œç¼“å­˜ã€‚\n\n4. ä½¿ç”¨å»¶è¿ŸåŠ è½½çš„æ–¹å¼ï¼Œæ¥å‡å°‘é¡µé¢é¦–å±åŠ è½½æ—¶éœ€è¦è¯·æ±‚çš„èµ„æºã€‚å»¶è¿ŸåŠ è½½çš„èµ„æºå½“ç”¨æˆ·éœ€è¦è®¿é—®æ—¶ï¼Œå†å»è¯·æ±‚åŠ è½½ã€‚\n\n5. é€šè¿‡ç”¨æˆ·è¡Œä¸ºï¼Œå¯¹æŸäº›èµ„æºä½¿ç”¨é¢„åŠ è½½çš„æ–¹å¼ï¼Œæ¥æé«˜ç”¨æˆ·éœ€è¦è®¿é—®èµ„æºæ—¶çš„å“åº”é€Ÿåº¦ã€‚ç»„ä»¶è·¯ç”±æŒ‰éœ€åŠ è½½ã€‚\n\n6. ä¸ç®¡å¯¹äºCSRæˆ–è€…SSRï¼Œéƒ½å»ºè®®é…åˆä½¿ç”¨Service workerï¼Œæ¥æ§åˆ¶èµ„æºçš„è°ƒé…åŠéª¨æ¶å±ç§’å¼€çš„ä½“éªŒã€‚\n\n## æœåŠ¡å™¨\n1. ä½¿ç”¨ CDN æœåŠ¡ï¼Œæ¥æé«˜ç”¨æˆ·å¯¹äºèµ„æºè¯·æ±‚æ—¶çš„å“åº”é€Ÿåº¦ã€‚\n\n2. æœåŠ¡å™¨ç«¯å¯ç”¨ Gzipã€Deflate ç­‰æ–¹å¼å¯¹äºä¼ è¾“çš„èµ„æºè¿›è¡Œå‹ç¼©ï¼Œå‡å°æ–‡ä»¶çš„ä½“ç§¯ã€‚\n\n3. å°½å¯èƒ½å‡å° cookie çš„å¤§å°ï¼Œå¹¶ä¸”é€šè¿‡å°†é™æ€èµ„æºåˆ†é…åˆ°å…¶ä»–åŸŸåä¸‹ï¼Œæ¥é¿å…å¯¹é™æ€èµ„æºè¯·æ±‚æ—¶æºå¸¦ä¸å¿…è¦çš„ cookie\n\n## CSS å’Œ JavaScript\n1. æŠŠæ ·å¼è¡¨æ”¾åœ¨é¡µé¢çš„ head æ ‡ç­¾ä¸­ï¼Œå‡å°‘é¡µé¢çš„é¦–æ¬¡æ¸²æŸ“çš„æ—¶é—´ã€‚\n\n2. é¿å…ä½¿ç”¨ @import æ ‡ç­¾ã€‚\n\n3. å°½é‡æŠŠ js è„šæœ¬æ”¾åœ¨é¡µé¢åº•éƒ¨æˆ–è€…ä½¿ç”¨ defer æˆ– async å±æ€§ï¼Œé¿å…è„šæœ¬çš„åŠ è½½å’Œæ‰§è¡Œé˜»å¡é¡µé¢çš„æ¸²æŸ“ã€‚\n\n4. é€šè¿‡å¯¹ JavaScript å’Œ CSS çš„æ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼Œæ¥å‡å°æ–‡ä»¶çš„ä½“ç§¯ã€‚\n\n## èµ„æºåˆå¹¶å‹ç¼© å‡å°‘HTTPè¯·æ±‚\n### å°½é‡åˆå¹¶å’Œå‹ç¼©html csså’Œjsæ–‡ä»¶ å€ŸåŠ©å‰ç«¯å·¥å…· ä¾‹å¦‚ webpack gulp grunt...\n### å¼€å¯gzipå‹ç¼©\n\n## å›¾ç‰‡ä¼˜åŒ–\n### é›ªç¢§å›¾ å›¾ç‰‡å‹ç¼© svg base64\n\n## æ‡’åŠ è½½ / é¢„åŠ è½½\n### æ‡’åŠ è½½ï¼šå›¾ç‰‡è¿›å…¥å¯è§†åŒºåŸŸä¹‹åè¯·æ±‚å›¾ç‰‡èµ„æº å¯¹äºç”µå•†ç­‰å›¾ç‰‡å¾ˆå¤šï¼Œé¡µé¢å¾ˆé•¿çš„ä¸šåŠ¡åœºæ™¯é€‚ç”¨ å¹¶å‘åŠ è½½çš„èµ„æºè¿‡å¤šä¼šé˜»å¡ js çš„åŠ è½½ï¼Œå½±å“ç½‘ç«™çš„æ­£å¸¸ä½¿ç”¨\n### é¢„åŠ è½½ï¼šå›¾ç‰‡ç­‰é™æ€èµ„æºåœ¨ä½¿ç”¨ä¹‹å‰çš„æå‰è¯·æ±‚ èµ„æºä½¿ç”¨åˆ°æ—¶èƒ½ä»ç¼“å­˜ä¸­åŠ è½½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ\n\n## æµè§ˆå™¨å­˜å‚¨\n### localStorageï¼šå¤§å°ä¸º 5M å·¦å³ä»…åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œä¸å’ŒæœåŠ¡ç«¯è¿›è¡Œé€šä¿¡ æµè§ˆå™¨æœ¬åœ°ç¼“å­˜æ–¹æ¡ˆ\n### indexedDBï¼šç”¨äºå®¢æˆ·ç«¯å­˜å‚¨å¤§é‡ç»“æ„åŒ–æ•°æ® ä¸ºåº”ç”¨åˆ›å»ºç¦»çº¿ç‰ˆæœ¬\n\n## æµè§ˆå™¨ç¼“å­˜\n### å¼ºç¼“å­˜ï¼š\n\n- expiresï¼š\nç¼“å­˜è¿‡æœŸæ—¶é—´ï¼Œç”¨æ¥æŒ‡å®šèµ„æºåˆ°æœŸçš„æ—¶é—´ï¼Œæ˜¯æœåŠ¡å™¨ç«¯çš„ç»å¯¹æ—¶é—´\nå‘Šè¯‰æµè§ˆå™¨åœ¨è¿‡æœŸæ—¶é—´å‰æµè§ˆå™¨å¯ä»¥ç›´æ¥ä»æµè§ˆå™¨ç¼“å­˜å–æ•°æ®ï¼Œè€Œæ— éœ€å†æ¬¡è¯·æ±‚\n\n- cache-controlï¼šmax-age = xxx\nå£°æ˜è¯¥èµ„æºåœ¨åŠ è½½åçš„xxxç§’å†…éƒ½ç›´æ¥ä½¿ç”¨ç¼“å­˜ ä½¿ç”¨çš„æ˜¯ç›¸å¯¹æ—¶é—´ å³åŠ è½½æ–‡ä»¶æœ¬æœºçš„æ—¶é—´\n\nå¦‚æœåœ¨Cache-Controlå“åº”å¤´è®¾ç½®äº† \"max-age\" æˆ–è€… \"s-max-age\" æŒ‡ä»¤ï¼Œé‚£ä¹ˆ Expires å¤´ä¼šè¢«å¿½ç•¥ã€‚\n\n\n### åå•†ç¼“å­˜ï¼š\n\n> è§¦å‘æ¡ä»¶\n\n> Cache-Control çš„å€¼ä¸º no-cache ï¼ˆä¸å¼ºç¼“å­˜ï¼‰\n> max-age è¿‡æœŸäº† ï¼ˆå¼ºç¼“å­˜ï¼Œä½†æ€»æœ‰è¿‡æœŸçš„æ—¶å€™ï¼‰\n\n- Last-Modified / If-Modified-Since\n\nLast-Modified ------- response header\nIf-Modified-Since ------- request header\nç¼ºç‚¹ï¼šæŸäº›æœåŠ¡ç«¯ä¸èƒ½è·å–ç²¾ç¡®çš„ä¿®æ”¹æ—¶é—´ï¼›æ–‡ä»¶ä¿®æ”¹æ—¶é—´æ”¹äº†ï¼Œä½†æ–‡ä»¶å†…å®¹å´æ²¡æœ‰å˜\n\n- Etag / If-None-Match\n\næ–‡ä»¶å†…å®¹çš„ hash å€¼\netag ------- response header\nif-none-match ------- request header\n\n## CDN å†…å®¹åˆ†å‘ç½‘ç»œ\njsdelivr/PicGo\n\n## å‰ç«¯é”™è¯¯ç›‘æ§ä»¥åŠä¸ŠæŠ¥\n- å‰ç«¯é”™è¯¯åˆ†ç±»ï¼š\n\n1. å³æ—¶è¿è¡Œé”™è¯¯ï¼šä»£ç é”™è¯¯\n2. èµ„æºåŠ è½½é”™è¯¯\n3. å¯¹äºè·¨åŸŸçš„ä»£ç è¿è¡Œé”™è¯¯ä¼šæ˜¾ç¤º Script error. å¯¹äºè¿™ç§æƒ…å†µæˆ‘ä»¬éœ€è¦ç»™ script æ ‡ç­¾æ·»åŠ  crossorigin å±æ€§ï¼Œå¹¶ä¸”æœåŠ¡å™¨æ·»åŠ Access-Control-Allow-Origin\n\n- å³æ—¶è¿è¡Œé”™è¯¯æ•è·\nï¼ˆ1ï¼‰try ....catch\nï¼ˆ2) window.onerror æˆ–è€… window.addEventListener è®°ä½äº‹ä»¶æ•è·é˜¶æ®µè·å¾—ï¼Œä¸æ˜¯å†’æ³¡é˜¶æ®µ\n\n\n- èµ„æºåŠ è½½é”™è¯¯\nï¼ˆ1ï¼‰object.onerrorï¼Œå¦‚img.onerror\nï¼ˆ2ï¼‰performance.getEntries ï¼ˆgetEntries apiè¿”å›ä¸€ä¸ªèµ„æºåŠ è½½å®Œæˆæ•°ç»„ï¼Œå‡è®¾ä¸ºimgï¼Œå†æŸ¥è¯¢é¡µé¢ä¸­ä¸€å…±æœ‰å¤šå°‘ä¸ªimgï¼ŒäºŒè€…çš„å·®å°±æ˜¯æ²¡æœ‰åŠ è½½ä¸Šçš„èµ„æºï¼‰\nï¼ˆ3ï¼‰Erroräº‹ä»¶æ•è·\n\n4. é”™è¯¯å¦‚ä½•ä¸ŠæŠ¥\n- ajax\n- imageçš„srcä¸ŠæŠ¥\n```js\n(new Image()).src = 'é”™è¯¯ä¸ŠæŠ¥çš„è¯·æ±‚åœ°å€'\n```\n\nä¸€èˆ¬æ¥è¯´éƒ½æ˜¯é‡‡ç”¨imageå¯¹è±¡çš„æ–¹å¼ä¸ŠæŠ¥é”™è¯¯çš„ï¼›ä½¿ç”¨å›¾ç‰‡å‘é€getè¯·æ±‚ï¼Œä¸ŠæŠ¥ä¿¡æ¯ï¼Œç”±äºæµè§ˆå™¨å¯¹å›¾ç‰‡æœ‰ç¼“å­˜ï¼ŒåŒæ ·çš„è¯·æ±‚ï¼Œå›¾ç‰‡åªä¼šå‘é€ä¸€æ¬¡ï¼Œé¿å…é‡å¤ä¸Š\næŠ¥ã€‚\n","tags":["æ€§èƒ½ä¼˜åŒ–"],"categories":["JS"]},{"title":"classNamesåœ¨reactä¸Šçš„åº”ç”¨","url":"%2FclassNames%E5%9C%A8react%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8.html","content":"\n### å‰è¨€\n\nåœ¨ Vue é‡Œæœ‰ä¸€ä¸ªåŠ¨æ€çš„ class è¯­æ³•ï¼Œå¾ˆå¥½çš„æ ¹æ®æ¡ä»¶åŠ¨æ€è®¾ç½® classã€‚ä¾‹å¦‚ï¼š\n\n```javascript\n<div class=\"button\" :class=\"{ active: show }\"></div>\n```\nå°±æ˜¯å½“ show ä¸º true æ—¶ï¼Œæ­¤æ ‡ç­¾è¢«èµ‹äºˆ active æ ·å¼ã€‚\n\nåœ¨ React è¦å®ç°è¿™æ ·åŠŸèƒ½ï¼Œå¯èƒ½ä¼šè¿™æ ·åšï¼š\n\n```javascript\n<div className={`button ${show ? 'active' : ''}`}></div>\n```\næ³¨æ„åˆ°ï¼Œè¿™é‡Œåªæœ‰ä¸€ä¸ªå±æ€§åˆ¤æ–­ï¼Œå¦‚æœæœ‰å¤šä¸ªæ—¶ä¼šæ˜¾å¾—éå¸¸éº»çƒ¦ï¼Œé‚£ä¹ˆç°åœ¨ä½¿ç”¨ [ClassNames](https://github.com/JedWatson/classnames) è¿™ä¸ªåº“æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n---\n<!-- more -->\n\n### åŸºæœ¬ä½¿ç”¨\n`ClassNames` æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€ç®€ä¾¿çš„ç”¨æˆ·æ ¹æ®æ¡ä»¶åŠ¨æ€è®¾ç½® `className` çš„ `Javascript` åº“ã€‚\n\nå®ƒçš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œæ¥çœ‹çœ‹ä¸‹é¢çš„å‡ ç§ä½¿ç”¨æ–¹å¼ã€‚ï¼ˆè‡ªå·±ä¹Ÿå¯ä»¥å¼€å‘ä¸€ä¸ªç±»ä¼¼çš„åº“ï¼Œä¸è¿‡æ²¡å¿…è¦å†é€ è½®å­ï¼‰\n\n```javascript\nimport classNames from 'classnames';\n\nclassNames('foo', 'bar');                   // => 'foo bar'\nclassNames('foo', { bar: true });           // => 'foo bar'\nclassNames({ 'foo-bar': true });            // => 'foo-bar'\nclassNames({ 'foo-bar': false });           // => ''\nclassNames({ foo: true }, { bar: true });   // => 'foo bar'\nclassNames({ foo: true, bar: true });       // => 'foo bar'\n\n// å¤šçº§åµŒå¥—ï¼Œå¤šå‚æ•°\nclassNames('foo', { bar: true, duck: false }, 'baz', { quux: true });\n// => 'foo bar baz quux'\n\n// !! ä¸º false çš„å°†è¢«å¿½ç•¥\nclassNames(null, false, 'bar', undefined, 0, 1, { baz: null }, '');\n// => 'bar 1'\n```\n\n### åŠ¨æ€å±æ€§å\nåœ¨ ES6 ä¸‹ï¼Œå¯ä»¥ä½¿ç”¨æ¨¡æ¿è¯­æ³•ï¼Œæ¥è®¾ç½®è·Ÿå¼ºå¤§çš„åŠ¨æ€ `className`ã€‚\n\n```javascript\nconst buttonType = 'primary';\nclassNames({ [`btn-${buttonType}`]: true });\n```\n\n### å»é‡åŠŸèƒ½dedupe\nä½¿ç”¨ dedupe ç‰ˆæœ¬çš„ classNames å¯ä»¥æ­£ç¡®åœ°å¯¹ç±»è¿›è¡Œé‡å¤æ•°æ®åˆ é™¤ï¼Œå¹¶ç¡®ä¿åœ¨åé¢çš„å‚æ•°ä¸­æŒ‡å®šçš„é”™è¯¯ç±»ä»ç»“æœé›†ä¸­æ’é™¤ã€‚dedupe ä¼šæ…¢ï¼ˆçº¦5å€ï¼‰ï¼Œå› æ­¤å®ƒæ˜¯ä½œä¸ºé€‰æ‹©æä¾›çš„ï¼ˆåœ¨é»˜è®¤æ˜¯ä¸ä¼šå»é‡çš„ï¼‰ã€‚\n\n```javascript\nimport classNames from 'classnames/dedupe';\n\nclassNames('foo', 'foo', 'bar');                // => 'foo bar'\nclassNames('foo', { foo: false, bar: true });   // => 'bar'\n```\n### æ˜ å°„bind\nå¦‚æœæ‚¨ä½¿ç”¨ css-modules æˆ–ç±»ä¼¼çš„æ–¹æ³•æ¥æŠ½è±¡ç±»â€œåç§°â€ä»¥åŠ className å®é™…è¾“å‡ºåˆ° DOM çš„çœŸå®å€¼ï¼Œé‚£ä¹ˆè¦ä½¿ç”¨ bind ç‰ˆæœ¬ã€‚\n\n```javascript\nimport classNames from 'classnames/bind';\n// æ˜ å°„å…³ç³»\nconst styles = {\n    foo: 'abc',\n    bar: 'def',\n    baz: 'xyz'\n};\n\nconst cx = classNames.bind(styles);\nconst className = cx('foo', ['bar'], { baz: true });  //ï¼ˆ1ï¼‰ => \"abc def xyz\"\n// const className = cx('abc', ['def'], { xyz: true }); ï¼ˆ2ï¼‰\n```\nè¿™é‡Œä»€ä¹ˆæ„æ€å‘¢ï¼Ÿå®é™…ä¸Šå°±æ˜¯æŠŠ foo ä¸ abc äº§ç”Ÿæ˜ å°„ï¼Œä¹Ÿå°±æ˜¯è¯´ ï¼ˆ1ï¼‰ å’Œ ï¼ˆ2ï¼‰ ä¸¤æ¡è¯­å¥æ˜¯ç­‰æ•ˆçš„ï¼Œå¥½å¤„å°±åƒæ˜¯å®šä¹‰ä¸€äº›å¸¸é‡ä¸€æ ·ã€‚\n\n### åœ¨Reactä¸Šä½¿ç”¨\nå¦‚antdä¸Šçš„æºç ï¼Œprefixå®šä¹‰class\n\n```javascript\nconst prefixCls = 'alter';\n\nconst classs = classNames(prefixCls, {\n    [`${prefixCls}-${type}`]: true,\n    [`${prefixCls}-close`]: !this.state.closing,\n    [`${prefixCls}-with-description`]: !!description,\n    [`${prefixCls}-no-icon`]: !showIcon,\n    [`${prefixCls}-banner`]: !!banner,\n}, className);\n```\n\n### å‚è€ƒèµ„æ–™\n- https://github.com/JedWatson/classnames\n- https://www.npmjs.com/package/classcat","tags":["react"],"categories":["JS"]},{"title":"generatorç”Ÿæˆå™¨","url":"%2Fes6generator.html","content":"\nç”Ÿæˆå™¨ï¼ˆ generatorï¼‰æ˜¯èƒ½è¿”å›ä¸€ä¸ªè¿­ä»£å™¨çš„å‡½æ•°ã€‚ç”Ÿæˆå™¨å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§å‡½æ•°ï¼Œæœ€ç›´è§‚çš„è¡¨ç°å°±æ˜¯æ¯”æ™®é€šçš„functionå¤šäº†ä¸ªæ˜Ÿå·*ï¼Œåœ¨å…¶å‡½æ•°ä½“å†…å¯ä»¥ä½¿ç”¨yieldå…³é”®å­—ï¼Œæœ‰æ„æ€çš„æ˜¯å‡½æ•°ä¼šåœ¨æ¯ä¸ªyieldåæš‚åœã€‚\n\nè¿™é‡Œç”Ÿæ´»ä¸­æœ‰ä¸€ä¸ªæ¯”è¾ƒå½¢è±¡çš„ä¾‹å­ã€‚å’±ä»¬åˆ°é“¶è¡ŒåŠç†ä¸šåŠ¡æ—¶å€™éƒ½å¾—å‘å¤§å…çš„æœºå™¨å–ä¸€å¼ æ’é˜Ÿå·ã€‚ä½ æ‹¿åˆ°ä½ çš„æ’é˜Ÿå·ï¼Œæœºå™¨å¹¶ä¸ä¼šè‡ªåŠ¨ä¸ºä½ å†å‡ºä¸‹ä¸€å¼ ç¥¨ã€‚ä¹Ÿå°±æ˜¯è¯´å–ç¥¨æœºâ€œæš‚åœâ€ä½äº†ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªäººå†æ¬¡å”¤èµ·æ‰ä¼šç»§ç»­åç¥¨ã€‚\n\n--- \n<!-- more -->\n\nOKã€‚è¯´è¯´è¿­ä»£å™¨ã€‚å½“ä½ è°ƒç”¨ä¸€ä¸ªgeneratoræ—¶ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚è¿™ä¸ªè¿­ä»£å™¨å¯¹è±¡æ‹¥æœ‰ä¸€ä¸ªå«åšnextçš„æ–¹æ³•æ¥å¸®åŠ©ä½ é‡å¯generatorå‡½æ•°å¹¶å¾—åˆ°ä¸‹ä¸€ä¸ªå€¼ã€‚nextæ–¹æ³•ä¸ä»…è¿”å›å€¼ï¼Œå®ƒè¿”å›çš„å¯¹è±¡å…·æœ‰ä¸¤ä¸ªå±æ€§ï¼šdoneå’Œvalueã€‚valueæ˜¯ä½ è·å¾—çš„å€¼ï¼Œdoneç”¨æ¥è¡¨æ˜ä½ çš„generatoræ˜¯å¦å·²ç»åœæ­¢æä¾›å€¼ã€‚ç»§ç»­ç”¨åˆšåˆšå–ç¥¨çš„ä¾‹å­ï¼Œæ¯å¼ æ’é˜Ÿå·å°±æ˜¯è¿™é‡Œçš„valueï¼Œæ‰“å°ç¥¨çš„çº¸æ˜¯å¦ç”¨å®Œå°±è¿™æ˜¯è¿™é‡Œçš„doneã€‚\n\n- function å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ªæ˜Ÿå·ï¼›\n- å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨ yieldè¡¨è¾¾å¼ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ï¼›\n- next æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªçŠ¶æ€\n\n```javascript\n// ç”Ÿæˆå™¨ æœ€å¤§çš„ç‰¹ç‚¹æ˜¯å¯ä»¥äº¤å‡ºå‡½æ•°çš„æ‰§è¡Œæƒ\nfunction *createGenerator(){\n    yield 1;\n    yield 2;\n    yield 3;\n}\n\n// è¿­ä»£å™¨\nlet iterator=createGenerator()\nconsole.log(iterator.next().value) // 1\nconsole.log(iterator.next().value) // 2\nconsole.log(iterator.next().value) // 3\n```\n\n```js\nfunction *foo(x) {\n  let y = 2 * (yield (x + 1))\n  let z = yield (y / 3)\n  return (x + y + z)\n}\nlet it = foo(5)\nconsole.log(it.next())   // => {value: 6, done: false}\nconsole.log(it.next(12)) // => {value: 8, done: false}\nconsole.log(it.next(13)) // => {value: 42, done: true}\n```\n1. é¦–å…ˆ Generator å‡½æ•°è°ƒç”¨æ—¶å®ƒä¼šè¿”å›ä¸€ä¸ªè¿­ä»£å™¨\n2. å½“æ‰§è¡Œç¬¬ä¸€æ¬¡ next æ—¶ï¼Œä¼ å‚ä¼šè¢«å¿½ç•¥ï¼Œå¹¶ä¸”å‡½æ•°æš‚åœåœ¨ yield (x + 1) å¤„ï¼Œæ‰€ä»¥è¿”å› 5 + 1 = 6\n3. å½“æ‰§è¡Œç¬¬äºŒæ¬¡ next æ—¶ï¼Œä¼ å…¥çš„å‚æ•°ç­‰äºä¸Šä¸€ä¸ª yield çš„è¿”å›å€¼ï¼Œå¦‚æœä½ ä¸ä¼ å‚ï¼Œyield æ°¸è¿œè¿”å› undefinedã€‚æ­¤æ—¶ let y = 2 * 12ï¼Œæ‰€ä»¥ç¬¬äºŒä¸ª \nyield ç­‰äº 2 * 12 / 3 = 8\n4. å½“æ‰§è¡Œç¬¬ä¸‰æ¬¡ next æ—¶ï¼Œä¼ å…¥çš„å‚æ•°ä¼šä¼ é€’ç»™ zï¼Œæ‰€ä»¥ z = 13, x = 5, y = 24ï¼Œç›¸åŠ ç­‰äº 42\n\né‚£ç”Ÿæˆå™¨å’Œè¿­ä»£å™¨åˆæœ‰ä»€ä¹ˆç”¨å¤„å‘¢ï¼Ÿ\n\nå›´ç»•ç€ç”Ÿæˆå™¨çš„è®¸å¤šå…´å¥‹ç‚¹éƒ½ä¸å¼‚æ­¥ç¼–ç¨‹ç›´æ¥ç›¸å…³ã€‚å¼‚æ­¥è°ƒç”¨å¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯å¾ˆå›°éš¾çš„äº‹ï¼Œæˆ‘ä»¬çš„å‡½æ•°å¹¶ä¸ä¼šç­‰å¾…å¼‚æ­¥è°ƒç”¨å®Œå†æ‰§è¡Œï¼Œä½ å¯èƒ½ä¼šæƒ³åˆ°ç”¨å›è°ƒå‡½æ•°ï¼Œï¼ˆå½“ç„¶è¿˜æœ‰å…¶ä»–æ–¹æ¡ˆæ¯”å¦‚Promiseæ¯”å¦‚Async/awaitï¼‰ã€‚\n\nç”Ÿæˆå™¨å¯ä»¥è®©æˆ‘ä»¬çš„ä»£ç è¿›è¡Œç­‰å¾…ã€‚å°±ä¸ç”¨åµŒå¥—çš„å›è°ƒå‡½æ•°ã€‚ä½¿ç”¨generatorå¯ä»¥ç¡®ä¿å½“å¼‚æ­¥è°ƒç”¨åœ¨æˆ‘ä»¬çš„generatorå‡½æ•°è¿è¡Œä¸€ä¸‹è¡Œä»£ç ä¹‹å‰å®Œæˆæ—¶æš‚åœå‡½æ•°çš„æ‰§è¡Œã€‚\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå’±ä»¬ä¹Ÿä¸èƒ½æ‰‹åŠ¨ä¸€ç›´è°ƒç”¨next()æ–¹æ³•ï¼Œä½ éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿè°ƒç”¨ç”Ÿæˆå™¨å¹¶å¯åŠ¨è¿­ä»£å™¨çš„æ–¹æ³•ã€‚å°±åƒè¿™æ ·å­çš„ï¼š\n\n```javascript\nfunction run(taskDef){\n  // åˆ›å»ºè¿­ä»£å™¨ï¼Œè®©å®ƒåœ¨åˆ«å¤„å¯ç”¨\n  let task=taskDef();\n\n  // å¯åŠ¨ä»»åŠ¡\n  let result=task.next();\n\n  // é€’å½’ä½¿ç”¨å‡½æ•°æ¥ä¿æŒå¯¹next()çš„è°ƒç”¨\n  function step(){\n      // å¦‚æœè¿˜æœ‰æ›´å¤šè¦åšçš„\n      if(!result.done){\n        result=task.next();\n        step();\n      }\n  }\n\n  // å¼€å§‹å¤„ç†è¿‡ç¨‹\n  step();\n}\n```\nç”Ÿæˆå™¨ä¸è¿­ä»£å™¨æœ€æœ‰è¶£ã€æœ€ä»¤äººæ¿€åŠ¨çš„æ–¹é¢ï¼Œæˆ–è®¸å°±æ˜¯å¯åˆ›å»ºå¤–è§‚æ¸…æ™°çš„å¼‚æ­¥æ“ä½œä»£ç ã€‚å¯ä»¥ä¸å¿…åˆ°å¤„ä½¿ç”¨å›è°ƒå‡½æ•°ï¼Œè€Œæ˜¯å¯ä»¥å»ºç«‹è²Œä¼¼åŒæ­¥çš„ä»£ç ï¼Œä½†å®é™…ä¸Šå´ä½¿ç”¨ \n`yield` æ¥ç­‰å¾…å¼‚æ­¥æ“ä½œç»“æŸã€‚\n\nes6å¼•å…¥äº† async å‡½æ•°ï¼Œä½¿å¾—å¼‚æ­¥æ“ä½œå˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚\n\nasync å‡½æ•°æ˜¯ä»€ä¹ˆï¼Ÿä¸€å¥è¯ï¼Œå®ƒå°±æ˜¯ Generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚\n\n```javascript\nfunction timeout(ms){\n  return new Promise((resolve)=>{\n      setTimeout(resolve,ms)\n  });\n}\n\nasync function asyncPrint(value,ms){\n    await timeout(ms);\n    console.log(value);\n}\n\nasyncPrint('hello world',50)\n```\n\nä¸€æ¯”è¾ƒå°±ä¼šå‘ç°ï¼Œasyncå‡½æ•°å°±æ˜¯å°† Generator å‡½æ•°çš„æ˜Ÿå·ï¼ˆ*ï¼‰æ›¿æ¢æˆasyncï¼Œå°†yieldæ›¿æ¢æˆawaitï¼Œä»…æ­¤è€Œå·²ã€‚\nasyncå‡½æ•°å¯¹ Generator å‡½æ•°çš„æ”¹è¿›ï¼Œä½“ç°åœ¨ä»¥ä¸‹å››ç‚¹ï¼š\n- å†…ç½®æ‰§è¡Œå™¨\n- æ›´å¥½çš„è¯­ä¹‰\n- æ›´å¹¿çš„é€‚ç”¨æ€§\n- è¿”å›å€¼æ˜¯Promise\n\n## å¯è¿­ä»£å¯¹è±¡çš„ç‰¹ç‚¹\n1. çŸ¥é“å¦‚ä½•æ¯æ¬¡è®¿é—®é›†åˆä¸­çš„ä¸€é¡¹ï¼Œå¹¶è·Ÿè¸ªè¯¥åºåˆ—ä¸­çš„å½“å‰ä½ç½®\n2. æä¾›è€Œnextæ–¹æ³•ï¼Œæ¥è¿”å›åºåˆ—ä¸­çš„ä¸‹ä¸€é¡¹(value, done)\n3. è¿­ä»£å™¨ä¸€æ—¦è¢«åˆ›å»ºï¼Œå¯ä»¥åå¤è°ƒç”¨next\n\n```js\nfunction makeIterator(array){\n    var nextIndex = 0;\n    return {\n       next: function(){\n           return nextIndex < array.length ?\n               {value: array[nextIndex++], done: false} :\n               {done: true};\n       }\n    };\n}\n// ä½¿ç”¨ next æ–¹æ³•ä¾æ¬¡è®¿é—®å¯¹è±¡ä¸­çš„é”®å€¼\nvar it = makeIterator(['step', 'by','step']);\nconsole.log(it.next().value); // 'step'\nconsole.log(it.next().value); // 'by'\nconsole.log(it.next().value); // 'step'\nconsole.log(it.next().value);  // undefined\nconsole.log(it.next().done); // true\n```\n","tags":["es6"],"categories":["JS"]},{"title":"ç§»åŠ¨ç«¯webé—®é¢˜æ€»ç»“ï¼ˆé•¿æœŸæ›´æ–°ï¼‰","url":"%2F%E7%A7%BB%E5%8A%A8%E7%AB%AFweb%E9%97%AE%E9%A2%98%E6%80%BB%E7%BB%93.html","content":"\n## metaåŸºç¡€çŸ¥è¯†\n### H5é¡µé¢çª—å£è‡ªåŠ¨è°ƒæ•´åˆ°è®¾å¤‡å®½åº¦ï¼Œå¹¶ç¦æ­¢ç”¨æˆ·ç¼©æ”¾é¡µé¢\n```javascript\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no\" />\n```\n\n## iosç«–å±æ‹ç…§ä¸Šä¼ ï¼Œå›¾ç‰‡è¢«æ—‹è½¬é—®é¢˜\n```js\n// 1.é€šè¿‡ç¬¬ä¸‰æ–¹æ’ä»¶exif-jsè·å–åˆ°å›¾ç‰‡çš„æ–¹å‘\n// 2.newä¸€ä¸ªFileReaderå¯¹è±¡ï¼ŒåŠ è½½è¯»å–ä¸Šä¼ çš„å›¾ç‰‡\n// 3.åœ¨fileReaderçš„onloadå‡½æ•°ä¸­ï¼Œå¾—åˆ°çš„å›¾ç‰‡æ–‡ä»¶ç”¨ä¸€ä¸ªImageå¯¹è±¡æ¥æ”¶\n// 4.åœ¨imageçš„onloadå‡½æ•°ä¸­ï¼Œåˆ©ç”¨æ­¥éª¤1ä¸­è·å–åˆ°çš„æ–¹å‘orientationï¼Œé€šè¿‡canvasæ—‹è½¬æ ¡æ­£ï¼Œé‡æ–°ç»˜åˆ¶ä¸€å¼ æ–°å›¾\n// æ³¨æ„iPhoneæœ‰3ä¸ªæ‹ç…§æ–¹å‘éœ€è¦å¤„ç†ï¼Œæ¨ªå±æ‹æ‘„ï¼Œhomeé”®åœ¨å·¦ä¾§ï¼Œç«–å±æ‹æ‘„ï¼Œhomeå»ºä¸Šä¸‹\n// 5.å°†ç»˜åˆ¶çš„æ–°å›¾è½¬æˆBlobå¯¹è±¡ï¼Œæ·»åŠ åˆ°FormDataå¯¹è±¡ä¸­ï¼Œç„¶åè¿›è¡Œæ ¡æ­£åçš„ä¸Šä¼ æ“ä½œ\n// ä»£ç æœ‰ç‚¹æ‚ï¼Œå¾…æ•´ç†åä¸Šä¼ ï¼Œç½‘ä¸Šåº”è¯¥æ˜¯å¯ä»¥æ‰¾åˆ°çš„\n```\n\n## iosï¼šDOMå…ƒç´ å›ºå®šä¸€è¾¹ï¼Œå¦ä¸€è¾¹æ»šåŠ¨ï¼Œæ»šåŠ¨å¾ˆå¡çš„é—®é¢˜\n```js\n// (æ¨ªå‘æ»šåŠ¨ç”¨çš„å¤šäº›)ç®€å•ç²—æš´çš„åŠæ³•ï¼Œæ ·å¼æ·»åŠ å¦‚ä¸‹å±æ€§\n-webkit-overflow-scrolling: touch;\n```\n\n## éƒ¨åˆ†æ‰‹æœºç¬¬ä¸‰æ–¹è¾“å…¥æ³•ä¼šå°†é¡µé¢ç½‘ä¸ŠæŒ¤çš„é—®é¢˜\n```js\n// ç‰¹å®šéœ€æ±‚é¡µé¢ï¼Œæ¯”å¦‚è¯„è®ºé¡µé¢ï¼Œè¾“å…¥æ¡†åœ¨é¡¶éƒ¨ä¹‹ç±»çš„\nconst interval = setInterval(function() {\n    document.body.scrollTop = 0;\n}, 100)\n// æ³¨æ„å…³é—­é¡µé¢æˆ–è€…é”€æ¯ç»„ä»¶çš„æ—¶å€™è®°å¾—æ¸…ç©ºå®šæ—¶å™¨\nclearInterval(interval);\n```\n\n## iPhoneXé€‚é…\n```\n// 1.viewport meta æ ‡ç­¾å¢åŠ å±æ€§viewport-fit=cover\n<meta name=\"viewport\" content=\"width=device-width, viewport-fit=cover, xxxx\">\n// 2.bodyå…ƒç´ å¢åŠ æ ·å¼\nbody {\n  padding-bottom: constant(safe-area-inset-bottom);\n  padding-bottom: env(safe-area-inset-bottom);\n}\n// 3.å¦‚æœ‰fixedåº•éƒ¨çš„å…ƒç´ ï¼Œä¹Ÿå¢åŠ ä¸Šé¢æ ·å¼\nxxx {\n  padding-bottom: constant(safe-area-inset-bottom);\n  padding-bottom: env(safe-area-inset-bottom);\n  background-color: #fff; // è®°å¾—æ·»åŠ background-colorï¼Œä¸ç„¶ä¼šå‡ºç°é€æ˜é•‚ç©ºçš„æƒ…å†µ\n}\n```\n\n## æŸäº›æœºå‹ä¸æ”¯æŒvideoæ ‡ç­¾çš„posterå±æ€§ï¼Œç‰¹åˆ«æ˜¯å®‰å“\n```js\nç”¨å›¾ç‰‡å…ƒç´  <img />æ¥ä»£æ›¿poster\næ’­æ”¾å‰æ˜¾ç¤º<img />ï¼Œéšè— <video />\næ’­æ”¾åæ˜¾ç¤º<video />ï¼Œéšè— <img />\n```\n\n## CSSé€æ˜åº¦é¢œè‰²è®¾ç½®é—®é¢˜\n```\nAndroidéƒ¨åˆ†ä¸æ”¯æŒ hexå†™æ³•ï¼Œæ¨èç”¨rgbaçš„å†™æ³•\n#0000009c --> rgba(0, 0, 0, 0.61)\n```\n\n## flexå¯¹ä½ç‰ˆæœ¬çš„ioså’ŒAndroidçš„æ”¯æŒé—®é¢˜\n```js\n// ä½¿ç”¨postcssçš„autoprefixeræ’ä»¶ï¼Œè‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å†…æ ¸å‰ç¼€ï¼Œ\n// å¹¶ä¸”å¢åŠ æ›´ä½æµè§ˆå™¨ç‰ˆæœ¬çš„é…ç½®ï¼Œè‡ªåŠ¨æ·»åŠ flexè€ç‰ˆæœ¬çš„å±æ€§å’Œå†™æ³•\nautoprefixer({\n    browsers: [\n        'iOS >= 6',     // ç‰¹æ®Šå¤„ç†æ”¯æŒä½ç‰ˆæœ¬IOS\n        'Safari >= 6',  // ç‰¹æ®Šå¤„ç†æ”¯æŒä½ç‰ˆæœ¬Safari\n    ],\n}),\n```\n\n## ios é¡µé¢å›é€€åˆ°é•¿åˆ—è¡¨å‡ºç°ç°è‰²é®æŒ¡é—®é¢˜\n```\næ–¹æ¡ˆ1ï¼šå¯¹åˆ—è¡¨æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œæ¯”å¦‚reduxä¹‹ç±»çš„ç”¨æ³•ã€‚\næ–¹æ¡ˆ2ï¼šå›é€€æ—¶ï¼Œè·³åˆ°é¡µé¢é¡¶éƒ¨ã€‚\nconst timer = setTimeout(() => {\n    window.scrollTo(0, 1);\n    window.scrollTo(0, 0);\n}, 0);\n```\n\n## ios æ—¥æœŸè½¬æ¢NANçš„é—®é¢˜\n```\nå°†æ—¥æœŸå­—ç¬¦ä¸²çš„æ ¼å¼ç¬¦å·æ›¿æ¢æˆ'/'ã€‚\næ —å­ï¼š'yyyy-MM-dd'.replace(/-/g, '/')\n```\n\n## reactæœªçŸ¥é”™è¯¯å¼‚å¸¸ï¼Œå¯¼è‡´é¡µé¢å´©æºƒï¼Œç©ºç™½\n```\nReact 16.x å¢åŠ äº†componentDidCatch() ç”Ÿå‘½å‘¨æœŸæ–¹æ³•\næ•è·å…¨å±€å¼‚å¸¸æ¥è¿›è¡Œé¡µé¢çš„å‹å¥½æç¤º\n```\n\n## ç§»åŠ¨ç«¯é€‚é…\n- åª’ä½“æŸ¥è¯¢\n- px2rem\n- flexible\n- flex\n- grid\n- ç™¾åˆ†æ¯”\n","tags":["çŸ¥è¯†"],"categories":["çŸ¥è¯†"]},{"title":"reactç»„ä»¶å®ç°æŒ‰éœ€åŠ è½½","url":"%2Freact%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0%E6%8C%89%E9%9C%80%E5%8A%A0%E8%BD%BD.html","content":"\néšç€å‰ç«¯åº”ç”¨ä½“ç§¯çš„æ‰©å¤§ï¼Œèµ„æºåŠ è½½çš„ä¼˜åŒ–æ˜¯æˆ‘ä»¬å¿…é¡»è¦é¢å¯¹çš„é—®é¢˜ï¼ŒåŠ¨æ€ä»£ç åŠ è½½å°±æ˜¯å…¶ä¸­çš„ä¸€ä¸ªæ–¹æ¡ˆï¼Œwebpack æä¾›äº†ç¬¦åˆÂ ECMAScript ææ¡ˆÂ çš„Â `import()`Â è¯­æ³• ï¼Œè®©æˆ‘ä»¬æ¥å®ç°åŠ¨æ€åœ°åŠ è½½æ¨¡å—ï¼ˆæ³¨ï¼šrequire.ensure ä¸ import() å‡ä¸º webpack æä¾›çš„ä»£ç åŠ¨æ€åŠ è½½æ–¹æ¡ˆï¼Œåœ¨ webpack 2.x  ä¸­ï¼Œrequire.ensure å·²è¢« import å–ä»£ï¼‰ã€‚\n\n## React.lazy æ˜¯ä»€ä¹ˆ\nåœ¨ React 16.6 ç‰ˆæœ¬ä¸­ï¼Œæ–°å¢äº† React.lazy å‡½æ•°ï¼Œå®ƒèƒ½è®©ä½ åƒæ¸²æŸ“å¸¸è§„ç»„ä»¶ä¸€æ ·å¤„ç†åŠ¨æ€å¼•å…¥çš„ç»„ä»¶ï¼Œé…åˆ webpack çš„ Code Splitting ï¼Œåªæœ‰å½“ç»„ä»¶è¢«åŠ è½½ï¼Œå¯¹åº”çš„èµ„æºæ‰ä¼šå¯¼å…¥ ï¼Œä»è€Œè¾¾åˆ°æ‡’åŠ è½½çš„æ•ˆæœã€‚\n\n## ä½¿ç”¨ React.lazy\n```js\n// ä¸ä½¿ç”¨ React.lazy\nimport OtherComponent from './OtherComponent';\n// ä½¿ç”¨ React.lazy\nconst OtherComponent = React.lazy(() => import('./OtherComponent'))\n```\n\nReact.lazy æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°éœ€è¦è°ƒç”¨ import() ã€‚å®ƒéœ€è¦è¿”å›ä¸€ä¸ª  Promiseï¼Œè¯¥ Promise éœ€è¦ resolve ä¸€ä¸ª defalut export çš„ React ç»„ä»¶ã€‚\n\nåœ¨æ§åˆ¶å°æ‰“å°å¯ä»¥çœ‹åˆ°ï¼ŒReact.lazy æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª lazy ç»„ä»¶çš„å¯¹è±¡ï¼Œç±»å‹æ˜¯ react.lazyï¼Œå¹¶ä¸” lazy ç»„ä»¶å…·æœ‰ _status å±æ€§ï¼Œä¸ Promise ç±»ä¼¼å®ƒå…·æœ‰ Pendingã€Resolvedã€Rejected ä¸‰ä¸ªçŠ¶æ€ï¼Œåˆ†åˆ«ä»£è¡¨ç»„ä»¶çš„åŠ è½½ä¸­ã€å·²åŠ è½½ã€å’ŒåŠ è½½å¤±è´¥ä¸‰ç§çŠ¶æ€ã€‚\n\n> éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼ŒReact.lazy éœ€è¦é…åˆ Suspense ç»„ä»¶ä¸€èµ·ä½¿ç”¨ï¼Œåœ¨ Suspense ç»„ä»¶ä¸­æ¸²æŸ“ React.lazy å¼‚æ­¥åŠ è½½çš„ç»„ä»¶ã€‚å¦‚æœå•ç‹¬ä½¿ç”¨ React.lazyï¼ŒReact ä¼šç»™å‡ºé”™è¯¯æç¤ºã€‚å…¶ä¸­åœ¨ Suspense ç»„ä»¶ä¸­ï¼Œ\nfallback æ˜¯ä¸€ä¸ªå¿…éœ€çš„å ä½å±æ€§ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªå±æ€§çš„è¯ä¹Ÿæ˜¯ä¼šæŠ¥é”™çš„ã€‚\n\n```js\n// å»¶è¿ŸåŠ è½½å›è°ƒ ä¸éœ€è¦åŠ è½½æ•ˆæœè®¾ç½®ä¸ºnull maxDurationå¯ä»¥è®¾ç½®æœ€å¤§æŒç»­æ—¶é—´ æœ€æ–°ç‰ˆæœ¬ä¸­å·²ç§»é™¤äº†è¿™ä¸ªå±æ€§\nconst SuspenseComponent = (Component) => (props) => {\n  return (\n    <Suspense fallback={Math.random() >= 0.5 ? <Loading /> : <SkeletonView />}>\n      <Component {...props}></Component>\n    </Suspense>\n  );\n};\n...\n...\ncomponent: SuspenseComponent(OtherComponent),\n```\n\n---\n<!--more-->\n\n## Webpack åŠ¨æ€åŠ è½½\nä¸Šé¢ä½¿ç”¨äº† `import()` è¯­æ³•ï¼Œwebpack æ£€æµ‹åˆ°è¿™ç§è¯­æ³•ä¼šè‡ªåŠ¨ä»£ç åˆ†å‰²ã€‚ä½¿ç”¨è¿™ç§åŠ¨æ€å¯¼å…¥è¯­æ³•ä»£æ›¿ä»¥å‰çš„é™æ€å¼•å…¥ï¼Œå¯ä»¥è®©ç»„ä»¶åœ¨æ¸²æŸ“çš„æ—¶å€™ï¼Œå†å»åŠ è½½ç»„ä»¶å¯¹åº”çš„èµ„æºã€‚è¿™ä¸ªå¼‚æ­¥åŠ è½½æµç¨‹çš„å®ç°æœºåˆ¶æ˜¯æ€ä¹ˆæ ·\nå‘¢ï¼Ÿ\n\n```js\n__webpack_require__.e = function requireEnsure(chunkId) {\n    // installedChunks æ˜¯åœ¨å¤–å±‚ä»£ç ä¸­å®šä¹‰çš„å¯¹è±¡ï¼Œå¯ä»¥ç”¨æ¥ç¼“å­˜äº†å·²åŠ è½½ chunk\n  var installedChunkData = installedChunks[chunkId]\n    // åˆ¤æ–­ installedChunkData æ˜¯å¦ä¸º 0ï¼šè¡¨ç¤ºå·²åŠ è½½ \n  if (installedChunkData === 0) {\n    return new Promise(function(resolve) {\n      resolve()\n    })\n  }\n  if (installedChunkData) {\n    return installedChunkData[2]\n  } \n  // å¦‚æœ chunk è¿˜æœªåŠ è½½ï¼Œåˆ™æ„é€ å¯¹åº”çš„ Promsie å¹¶ç¼“å­˜åœ¨ installedChunks å¯¹è±¡ä¸­\n  var promise = new Promise(function(resolve, reject) {\n    installedChunkData = installedChunks[chunkId] = [resolve, reject]\n  })\n  installedChunkData[2] = promise\n  // æ„é€  script æ ‡ç­¾\n  var head = document.getElementsByTagName(\"head\")[0]\n  var script = document.createElement(\"script\")\n  script.type = \"text/javascript\"\n  script.charset = \"utf-8\"\n  script.async = true\n  script.timeout = 120000\n  if (__webpack_require__.nc) {\n    script.setAttribute(\"nonce\", __webpack_require__.nc)\n  }\n  script.src =\n    __webpack_require__.p +\n    \"static/js/\" +\n    ({ \"0\": \"alert\" }[chunkId] || chunkId) +\n    \".\" +\n    { \"0\": \"620d2495\" }[chunkId] +\n    \".chunk.js\"\n  var timeout = setTimeout(onScriptComplete, 120000)\n  script.onerror = script.onload = onScriptComplete\n  function onScriptComplete() {\n    script.onerror = script.onload = null\n    clearTimeout(timeout)\n    var chunk = installedChunks[chunkId]\n    // å¦‚æœ chunk !== 0 è¡¨ç¤ºåŠ è½½å¤±è´¥\n    if (chunk !== 0) {\n        // è¿”å›é”™è¯¯ä¿¡æ¯\n      if (chunk) {\n        chunk[1](new Error(\"Loading chunk \" + chunkId + \" failed.\"))\n      }\n      // å°†æ­¤ chunk çš„åŠ è½½çŠ¶æ€é‡ç½®ä¸ºæœªåŠ è½½çŠ¶æ€\n      installedChunks[chunkId] = undefined\n    }\n  }\n  head.appendChild(script)\n    // è¿”å› fulfilled çš„ Promise\n  return promise\n}\n```\n\nç»“åˆä¸Šé¢çš„ä»£ç æ¥çœ‹ï¼Œwebpack é€šè¿‡åˆ›å»º script æ ‡ç­¾æ¥å®ç°åŠ¨æ€åŠ è½½çš„ï¼Œæ‰¾å‡ºä¾èµ–å¯¹åº”çš„ chunk ä¿¡æ¯ï¼Œç„¶åç”Ÿæˆ script æ ‡ç­¾æ¥åŠ¨æ€åŠ è½½ chunkï¼Œæ¯ä¸ª chunk éƒ½æœ‰å¯¹åº”çš„çŠ¶æ€ï¼šæœªåŠ è½½ ã€ åŠ è½½ä¸­ã€å·²åŠ è½½ ã€‚\n\n\n## Suspense\nSuspense å†…éƒ¨ä¸»è¦é€šè¿‡æ•è·ç»„ä»¶çš„çŠ¶æ€å»åˆ¤æ–­å¦‚ä½•åŠ è½½ï¼Œä¸Šé¢æˆ‘ä»¬æåˆ° React.lazy åˆ›å»ºçš„åŠ¨æ€åŠ è½½ç»„ä»¶å…·æœ‰Â Pendingã€Resolvedã€RejectedÂ ä¸‰ç§çŠ¶æ€ï¼Œå½“è¿™ä¸ªç»„ä»¶çš„çŠ¶æ€ä¸º Pending æ—¶æ˜¾ç¤ºçš„æ˜¯ Suspense \nä¸­ fallback çš„å†…å®¹ï¼Œåªæœ‰çŠ¶æ€å˜ä¸º resolve åæ‰æ˜¾ç¤ºç»„ä»¶ã€‚\n\n\n## Error Boundaries ç»Ÿä¸€å¤„ç†èµ„æºåŠ è½½å¤±è´¥åœºæ™¯\nå¦‚æœé‡åˆ°ç½‘ç»œé—®é¢˜æˆ–æ˜¯ç»„ä»¶å†…éƒ¨é”™è¯¯ï¼Œé¡µé¢çš„åŠ¨æ€èµ„æºå¯èƒ½ä¼šåŠ è½½å¤±è´¥ï¼Œä¸ºäº†ä¼˜é›…é™çº§ï¼Œå¯ä»¥ä½¿ç”¨ [Error Boundaries](https://react.docschina.org/docs/error-boundaries.html) æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\nError Boundaries æ˜¯ä¸€ç§ç»„ä»¶ï¼Œå¦‚æœä½ åœ¨ç»„ä»¶ä¸­å®šä¹‰äº† static getDerivedStateFromError() æˆ–Â componentDidCatch() ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå®ƒå°±ä¼šæˆä¸ºä¸€ä¸ª  Error Boundaries çš„ç»„ä»¶ã€‚\n\n```js\nclass ErrorBoundary extends React.Component {\n Â constructor(props) {\n Â  Â super(props);\n Â  Â this.state = { hasError: false };\n  }\nâ€‹\n Â static getDerivedStateFromError(error) { \n      // æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“èƒ½å¤Ÿæ˜¾ç¤ºé™çº§åçš„ UI\n Â  Â  Â return { hasError: true }; Â \n  }\n Â componentDidCatch(error, errorInfo) { \n      // ä½ åŒæ ·å¯ä»¥å°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨\n Â  Â  Â logErrorToMyService(error, errorInfo);\n  }\n Â render() {\n Â  Â if (this.state.hasError) { \n        // ä½ å¯ä»¥è‡ªå®šä¹‰é™çº§åçš„ UI å¹¶æ¸²æŸ“ Â  Â  Â \n Â  Â  Â  Â return <h1>å¯¹ä¸èµ·ï¼Œå‘ç”Ÿå¼‚å¸¸ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•</h1>; Â  Â \n Â   }\n Â  Â return this.props.children; \n  }\n}\n```\nä½ å¯ä»¥åœ¨ componentDidCatch  æˆ–è€… getDerivedStateFromError ä¸­æ‰“å°é”™è¯¯æ—¥å¿—å¹¶å®šä¹‰æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯çš„æ¡ä»¶ï¼Œå½“æ•è·åˆ° error æ—¶ä¾¿å¯ä»¥æ¸²æŸ“å¤‡ç”¨çš„ç»„ä»¶å…ƒç´ ï¼Œä¸è‡³äºå¯¼è‡´é¡µé¢èµ„æºåŠ è½½å¤±è´¥è€Œå‡ºç°ç©ºç™½ã€‚\n\n```js\n<ErrorBoundary>\n Â <App />\n</ErrorBoundary>\n```\n\n> éœ€è¦æ³¨æ„çš„æ˜¯ï¼šé”™è¯¯è¾¹ç•Œä»…å¯ä»¥æ•è·å…¶å­ç»„ä»¶çš„é”™è¯¯ï¼Œå®ƒæ— æ³•æ•è·å…¶è‡ªèº«çš„é”™è¯¯ã€‚\n\n## æ€»ç»“\nReact.lazy()Â  å’Œ React.Suspense çš„æå‡ºä¸ºç°ä»£ React åº”ç”¨çš„æ€§èƒ½ä¼˜åŒ–å’Œå·¥ç¨‹åŒ–æä¾›äº†ä¾¿æ·ä¹‹è·¯ã€‚ React.lazy å¯ä»¥è®©æˆ‘ä»¬åƒæ¸²æŸ“å¸¸è§„ç»„ä»¶ä¸€æ ·å¤„ç†åŠ¨æ€å¼•å…¥çš„ç»„ä»¶ï¼Œç»“åˆ Suspense å¯ä»¥æ›´ä¼˜é›…åœ°å±•ç°ç»„ä»¶æ‡’\nåŠ è½½çš„è¿‡æ¸¡åŠ¨ç”»ä»¥åŠå¤„ç†åŠ è½½å¼‚å¸¸çš„åœºæ™¯ã€‚\n\n> æ³¨æ„ï¼šReact.lazy å’Œ Suspense å°šä¸å¯ç”¨äºæœåŠ¡å™¨ç«¯ï¼Œå¦‚æœéœ€è¦æœåŠ¡ç«¯æ¸²æŸ“ï¼Œå¯éµä»å®˜æ–¹å»ºè®®ä½¿ç”¨ [Loadable Components](https://github.com/gregberge/loadable-components)ã€‚loadableæ”¯æŒæœåŠ¡ç«¯\næ‡’åŠ è½½ï¼Œè€Œä¸”æ”¯æŒåº“çš„æ‡’åŠ è½½ã€‚\n\n[react koa2 ssræ•™ç¨‹](https://github.com/cosyer/react-koa2-ssr)\n","tags":["react"],"categories":["JS"]},{"title":"cssç»˜åˆ¶å‡ ä½•å›¾å½¢","url":"%2Fcss%E7%BB%98%E5%88%B6%E5%87%A0%E4%BD%95%E5%9B%BE%E5%BD%A2.html","content":"\nCSSèƒ½å¤Ÿç”Ÿæˆå„ç§å½¢çŠ¶ã€‚æ­£æ–¹å½¢å’ŒçŸ©å½¢å¾ˆå®¹æ˜“ï¼Œå› ä¸ºå®ƒä»¬æ˜¯ web çš„è‡ªç„¶å½¢çŠ¶ã€‚æ·»åŠ å®½åº¦å’Œé«˜åº¦ï¼Œå°±å¾—åˆ°äº†æ‰€éœ€çš„ç²¾ç¡®å¤§å°çš„çŸ©å½¢ã€‚æ·»åŠ è¾¹æ¡†åŠå¾„ï¼Œä½ å°±å¯ä»¥æŠŠè¿™ä¸ªå½¢çŠ¶å˜æˆåœ†å½¢ï¼Œè¶³å¤Ÿå¤šçš„è¾¹æ¡†åŠå¾„ï¼Œä½ å°±å¯ä»¥æŠŠè¿™äº›çŸ©å½¢å˜æˆåœ†å½¢å’Œæ¤­åœ†å½¢ã€‚\n\næˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ CSS ä¼ªå…ƒç´ ä¸­çš„ `::before` å’Œ `::after`ï¼Œè¿™ä¸ºæˆ‘ä»¬æä¾›äº†å‘åŸå§‹å…ƒç´ æ·»åŠ å¦å¤–ä¸¤ä¸ªå½¢çŠ¶çš„å¯èƒ½æ€§ã€‚é€šè¿‡å·§å¦™åœ°ä½¿ç”¨å®šä½ã€è½¬æ¢å’Œè®¸å¤šå…¶ä»–æŠ€å·§ï¼Œæˆ‘ä»¬å¯ä»¥åªç”¨ä¸€ä¸ª HTML å…ƒç´ åœ¨ CSS ä¸­åˆ›å»ºè®¸å¤šå½¢çŠ¶ã€‚\n\nè™½ç„¶æˆ‘ä»¬ç°åœ¨å¤§éƒ½ä½¿ç”¨å­—ä½“å›¾æ ‡æˆ–è€…svgå›¾ç‰‡ï¼Œä¼¼ä¹ä½¿ç”¨ CSS æ¥åšå›¾æ ‡æ„ä¹‰ä¸æ˜¯å¾ˆå¤§ï¼Œä½†æ€ä¹ˆå®ç°è¿™äº›å›¾æ ‡ç”¨åˆ°çš„ä¸€äº›æŠ€å·§åŠæ€è·¯æ˜¯å¾ˆå€¼å¾—æˆ‘ä»¬å­¦ä¹ ã€‚\n\n---\n<!--more-->\n\n### åœ†\n```css\ndiv {\nwidth: 100px;\nheight: 100px;\nborder-radius: 50px; \n/* æ³¨æ„å®½é«˜ç›¸åŒåœ†è§’ä¸ºä¸€åŠ 50%/100%éƒ½å¯ä»¥*/\n}\n```\n\n### å››ä¸ªä¸åŒæ–¹å‘çš„åŠåœ†\n```css\n.top\n{\n  width: 100px;\n  height: 50px;\n  border-radius: 50px 50px 0 0;\n}\n.right {\n  width: 50px;\n  height: 100px;\n  border-radius: 0 50px 50px 0;\n}\n.bottom {\n  width: 100px;\n  height: 50px;\n  border-radius: 0 0 50px 50px;\n}\n.left {\n  width: 50px;\n  height: 100px;\n  border-radius: 50px 0 0 50px;\n}\n```\n\n--- \n<!-- more -->\n\n### å››åˆ†ä¹‹ä¸€åœ†\n```css\n{\n  width:50px;\n  height:50px;\n  border-radius:50px 0 0 0;\n}\n```\n\n## æ¤­åœ†\n```css\n{\n  width: 150px;\n  height: 100px;\n  border-radius: 50%; \n}\n```\n\n### è±å½¢\n```css\n.quarter-ellipse{\n    width: 100px;\n    height: 50px;\n    background: pink;\n    transform: skew(-20deg);\n    text-align: center;\n    line-height: 50px;\n}\n```\n\n### ä¸‰è§’å½¢\n```css\n/* ä¸Šä¸‰è§’ */\n#triangle-up {\n    width: 0;\n    height: 0;\n    border-left: 50px solid transparent;\n    border-right: 50px solid transparent;\n    border-bottom: 100px solid lightblue;\n}\n/* ä¸‹ä¸‰è§’ */\n#triangle-down {\n    width: 0;\n    height: 0;\n    border-left: 50px solid transparent;\n    border-right: 50px solid transparent;\n    border-top: 100px solid lightblue;\n}\n/* å·¦ä¸‰è§’ */\n#triangle-left {\n    width: 0;\n    height: 0;\n    border-top: 50px solid transparent;\n    border-right: 100px solid lightblue;\n    border-bottom: 50px solid transparent;\n}\n/* å³ä¸‰è§’ */\n#triangle-right {\n    width: 0;\n    height: 0;\n    border-top: 50px solid transparent;\n    border-left: 100px solid lightblue;\n    border-bottom: 50px solid transparent;\n}\n/* å·¦ä¸Šè§’ */\n#triangle-topleft {\n    width: 0;\n    height: 0;\n    border-top: 100px solid lightblue;\n    border-right: 100px solid transparent;\n}\n/* å³ä¸Šè§’ */\n#triangle-topright {\n    width: 0;\n    height: 0;\n    border-top: 100px solid lightblue;\n    border-left: 100px solid transparent; \n}\n/* å·¦ä¸‹è§’ */\n#triangle-bottomleft {\n    width: 0;\n    height: 0;\n    border-bottom: 100px solid lightblue;\n    border-right: 100px solid transparent;\n}\n/* å³ä¸‹è§’ */\n#triangle-bottomright {\n    width: 0;\n    height: 0;\n    border-bottom: 100px solid lightblue;\n    border-left: 100px solid transparent;\n}\n```\n\n### ç®­å¤´\n```css\n#curvedarrow {\n  position: relative;\n  width: 0;\n  height: 0;\n  border-top: 9px solid transparent;\n  border-right: 9px solid red;\n  transform: rotate(10deg);\n}\n#curvedarrow:after {\n  content: \"\";\n  position: absolute;\n  border: 0 solid transparent;\n  border-top: 3px solid red;\n  border-radius: 20px 0 0 0;\n  top: -12px;\n  left: -9px;\n  width: 12px;\n  height: 12px;\n  transform: rotate(45deg);\n}\n```\n\n### æ¢¯å½¢\n```css\n#trapezoid {\n  border-bottom: 100px solid red;\n  border-left: 25px solid transparent;\n  border-right: 25px solid transparent;\n  height: 0;\n  width: 100px;\n}\n```\n\n### å…­è§’æ˜Ÿ\n```css\n#star-six {\n  width: 0;\n  height: 0;\n  border-left: 50px solid transparent;\n  border-right: 50px solid transparent;\n  border-bottom: 100px solid red;\n  position: relative;\n}\n#star-six:after {\n  width: 0;\n  height: 0;\n  border-left: 50px solid transparent;\n  border-right: 50px solid transparent;\n  border-top: 100px solid red;\n  position: absolute;\n  content: \"\";\n  top: 30px;\n  left: -50px;\n}\n```\n\n### äº”è§’æ˜Ÿ\n```css\n#star-five {\n  margin: 50px 0;\n  position: relative;\n  display: block;\n  color: red;\n  width: 0px;\n  height: 0px;\n  border-right: 100px solid transparent;\n  border-bottom: 70px solid red;\n  border-left: 100px solid transparent;\n  transform: rotate(35deg);\n}\n#star-five:before {\n  border-bottom: 80px solid red;\n  border-left: 30px solid transparent;\n  border-right: 30px solid transparent;\n  position: absolute;\n  height: 0;\n  width: 0;\n  top: -45px;\n  left: -65px;\n  display: block;\n  content: '';\n  transform: rotate(-35deg);\n}\n#star-five:after {\n  position: absolute;\n  display: block;\n  color: red;\n  top: 3px;\n  left: -105px;\n  width: 0px;\n  height: 0px;\n  border-right: 100px solid transparent;\n  border-bottom: 70px solid red;\n  border-left: 100px solid transparent;\n  transform: rotate(-70deg);\n  content: '';\n}\n```\n\n### äº”è¾¹å½¢\n```css\n#pentagon {\n  position: relative;\n  width: 54px;\n  box-sizing: content-box;\n  border-width: 50px 18px 0;\n  border-style: solid;\n  border-color: red transparent;\n}\n#pentagon:before {\n  content: \"\";\n  position: absolute;\n  height: 0;\n  width: 0;\n  top: -85px;\n  left: -18px;\n  border-width: 0 45px 35px;\n  border-style: solid;\n  border-color: transparent transparent red;\n}\n```\n\n### å…­è¾¹å½¢\n```css\n#hexagon {\n  width: 100px;\n  height: 55px;\n  background: red;\n  position: relative;\n}\n#hexagon:before {\n  content: \"\";\n  position: absolute;\n  top: -25px;\n  left: 0;\n  width: 0;\n  height: 0;\n  border-left: 50px solid transparent;\n  border-right: 50px solid transparent;\n  border-bottom: 25px solid red;\n}\n#hexagon:after {\n  content: \"\";\n  position: absolute;\n  bottom: -25px;\n  left: 0;\n  width: 0;\n  height: 0;\n  border-left: 50px solid transparent;\n  border-right: 50px solid transparent;\n  border-top: 25px solid red;\n}\n```\n\n### å…«è¾¹å½¢\n```css\n#octagon {\n  width: 100px;\n  height: 100px;\n  background: red;\n  position: relative;\n}\n#octagon:before {\n  content: \"\";\n  width: 100px;\n  height: 0;\n  position: absolute;\n  top: 0;\n  left: 0;\n  border-bottom: 29px solid red;\n  border-left: 29px solid #eee;\n  border-right: 29px solid #eee;\n}\n#octagon:after {\n  content: \"\";\n  width: 100px;\n  height: 0;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  border-top: 29px solid red;\n  border-left: 29px solid #eee;\n  border-right: 29px solid #eee;\n}\n```\n\n### çˆ±å¿ƒğŸ’—\n```css\n#heart {\n  position: relative;\n  width: 100px;\n  height: 90px;\n}\n#heart:before,\n#heart:after {\n  position: absolute;\n  content: \"\";\n  left: 50px;\n  top: 0;\n  width: 50px;\n  height: 80px;\n  background: red;\n  border-radius: 50px 50px 0 0;\n  transform: rotate(-45deg);\n  transform-origin: 0 100%;\n}\n#heart:after {\n  left: 0;\n  transform: rotate(45deg);\n  transform-origin: 100% 100%;\n}\n```\n\n### æ— ç©·å¤§ï¼ˆè«æ¯”ä¹Œæ–¯ç¯ï¼‰\n```css\n#infinity {\n  position: relative;\n  width: 212px;\n  height: 100px;\n  box-sizing: content-box;\n}\n#infinity:before,\n#infinity:after {\n  content: \"\";\n  box-sizing: content-box;\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 60px;\n  height: 60px;\n  border: 20px solid red;\n  border-radius: 50px 50px 0 50px;\n  transform: rotate(-45deg);\n}\n#infinity:after {\n  left: auto;\n  right: 0;\n  border-radius: 50px 50px 50px 0;\n  transform: rotate(45deg);\n}\n```\n\n### é’»çŸ³\n```css\n#cut-diamond {\n  border-style: solid;\n  border-color: transparent transparent red transparent;\n  border-width: 0 25px 25px 25px;\n  height: 0;\n  width: 50px;\n  box-sizing: content-box;\n  position: relative;\n  margin: 20px 0 50px 0;\n}\n#cut-diamond:after {\n  content: \"\";\n  position: absolute;\n  top: 25px;\n  left: -25px;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-color: red transparent transparent transparent;\n  border-width: 70px 50px 0 50px;\n}\n```\n\n### åƒè±†äºº\n```css\n#pacman {\n  width: 0px;\n  height: 0px;\n  border-right: 60px solid transparent;\n  border-top: 60px solid red;\n  border-left: 60px solid red;\n  border-bottom: 60px solid red;\n  border-top-left-radius: 60px;\n  border-top-right-radius: 60px;\n  border-bottom-left-radius: 60px;\n  border-bottom-right-radius: 60px;\n}\n```\n\n### å¯¹è¯æ³¡æ³¡\n```css\n#talkbubble {\n  width: 120px;\n  height: 80px;\n  background: red;\n  position: relative;\n  -moz-border-radius: 10px;\n  -webkit-border-radius: 10px;\n  border-radius: 10px;\n}\n#talkbubble:before {\n  content: \"\";\n  position: absolute;\n  right: 100%;\n  top: 26px;\n  width: 0;\n  height: 0;\n  border-top: 13px solid transparent;\n  border-right: 26px solid red;\n  border-bottom: 13px solid transparent;\n}\n```\n\n### å¤ªæ\n```css\n#yin-yang {\n  width: 96px;\n  box-sizing: content-box;\n  height: 48px;\n  background: #eee;\n  border-color: red;\n  border-style: solid;\n  border-width: 2px 2px 50px 2px;\n  border-radius: 100%;\n  position: relative;\n}\n#yin-yang:before {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 0;\n  background: #eee;\n  border: 18px solid red;\n  border-radius: 100%;\n  width: 12px;\n  height: 12px;\n  box-sizing: content-box;\n}\n#yin-yang:after {\n  content: \"\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  background: red;\n  border: 18px solid #eee;\n  border-radius: 100%;\n  width: 12px;\n  height: 12px;\n  box-sizing: content-box;\n}  \n```\n\n### æ”¾å¤§é•œ\n```css\n#magnifying-glass {\n  font-size: 10em;\n  display: inline-block;\n  width: 0.4em;\n  box-sizing: content-box;\n  height: 0.4em;\n  border: 0.1em solid red;\n  position: relative;\n  border-radius: 0.35em;\n}\n#magnifying-glass:before {\n  content: \"\";\n  display: inline-block;\n  position: absolute;\n  right: -0.25em;\n  bottom: -0.1em;\n  border-width: 0;\n  background: red;\n  width: 0.35em;\n  height: 0.08em;\n  transform: rotate(45deg);\n}\n```\n\n### æœˆäº®\n```css\n#moon {\n  width: 80px;\n  height: 80px;\n  border-radius: 50%;\n  box-shadow: 15px 15px 0 0 red;\n}  \n```\n\n### è™šçº¿\n```css\n.dotted-line{\n    border: 1px dashed transparent;\n    background: linear-gradient(white,white) padding-box, repeating-linear-gradient(-45deg,#ccc 0, #ccc .25em,white 0,white .75em);\n}\n```\n\n## æ°”æ³¡æ¡†\nä½¿ç”¨ç»å¯¹å®šä½è¿›è¡Œä¸‰è§’å½¢è¦†ç›–ï¼Œå®ç°æ°”æ³¡æ¡†çªå‡ºéƒ¨åˆ†ã€‚\n```html\n<style>\n.bubble-tip {\n  width: 100px;\n  height: 30px;\n  line-height: 30px;\n  margin-left: 10px;\n  border: 1px solid #c5c5c5;\n  border-radius: 4px;\n  position: relative;\n  background-color: #fff;\n}\n.bubble-tip::before {\n  content: \"\";\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 10px 10px 10px 0;\n  border-color: transparent #ffffff transparent transparent;\n  position: absolute;\n  top: 5px;\n  left: -10px;\n  z-index: 2;\n}\n.bubble-tip::after {\n  content: \"\";\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 10px 10px 10px 0;\n  border-color: transparent #c5c5c5 transparent transparent;\n  position: absolute;\n  top: 5px;\n  left: -11px;\n  z-index: 1;\n}\n</style>\n<div class=\"bubble-tip\"></div>\n```\n\n## å¡åˆ¸è´´\nåœ¨CSS3å½“ä¸­ï¼Œbackgroundæ·»åŠ äº†`background-size`å±æ€§ï¼Œæ§åˆ¶èƒŒæ™¯å›¾ç‰‡çš„å¤§å°ï¼Œé…åˆ`background-position`å±æ€§ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªèƒŒæ™¯ä¸‹é¢å±•ç¤ºå¤šå¼ å›¾ç‰‡ã€‚è¯¦è§[background-MDN](https://developer.mozilla.org/zh-CN/docs/Web/CSS/background)ã€‚\n\nbackground-size: cover;ä½¿èƒŒæ™¯å›¾åƒå®Œå…¨è¦†ç›–èƒŒæ™¯åŒºåŸŸã€‚ä¹Ÿå¯ä»¥jsè·å–å›¾ç‰‡å®½é«˜å†æ¯”è¾ƒä¸€ä¸‹ï¼Œå†å†³å®šå¾€å“ªä¸ªæ–¹å‘å±…ä¸­ã€‚\n\nå¡åˆ¸è´´çš„æ ¸å¿ƒæ˜¯ä½¿ç”¨é€æ˜ç™½è‰²å¾„å‘æ¸å˜radial-gradientï¼Œåˆ†åˆ«è®©4å¼ èƒŒæ™¯å›¾ä¸­çš„å·¦ä¸‹è§’ã€å³ä¸‹è§’ã€å³ä¸Šè§’å’Œå·¦ä¸‹è§’å‡ºç°ç¼ºçœï¼Œå†åˆ©ç”¨drop-shadowå®ç°å…ƒç´ é˜´å½±ï¼Œä»è€Œè¾¾åˆ°æ•ˆæœã€‚\n\nradial-gradientè¯­æ³•å¦‚ä¸‹ï¼š\n```css\nradial-gradient(shape size at position, start-color, ..., last-color)\n```\n\n```html\n<style>\n.coupon{\n  width: 200px;\n  height: 80px;\n  background: radial-gradient(circle at right bottom, transparent 10px, #ffffff 0) top right / 50% 40px no-repeat,\n    radial-gradient(circle at left bottom, transparent 10px, #ffffff 0) top left / 50% 40px no-repeat,\n    radial-gradient(circle at right top, transparent 10px, #ffffff 0) bottom right / 50% 40px no-repeat,\n    radial-gradient(circle at left top, transparent 10px, #ffffff 0) bottom left / 50% 40px no-repeat;\n  filter: drop-shadow(3px 3px 3px #c5c5c5);\n}\n</style>\n\n<div class=\"coupon\"></div>\n```\n\n## å›¾ç‰‡åˆ‡è§’\n```css\nbackground: url(image.png);\n  mask:\n      linear-gradient(135deg, transparent 15px, #fff 0)\n      top left,\n      linear-gradient(-135deg, transparent 15px, #fff 0)\n      top right,\n      linear-gradient(-45deg, transparent 15px, #fff 0)\n      bottom right,\n      linear-gradient(45deg, transparent 15px, #fff 0)\n      bottom left;\n  mask-size: 50% 50%;\n  mask-repeat: no-repeat;\n```\n\n## 1pxé«˜çš„çº¿æ¡\n```html\n<div style=\"height:1px;overflow:hidden;background:red\"></div>\n```\n","tags":["å¸ƒå±€"],"categories":["CSS"]},{"title":"Httpè¯·æ±‚æ¦‚è¿°","url":"%2Fhttp%E8%AF%B7%E6%B1%82%E6%A6%82%E8%BF%B0.html","content":"\nè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHTTP, HyperText Transfer Protocolï¼‰æ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œå®ƒä½äºOSIä¸ƒå±‚æ¨¡å‹çš„ä¼ è¾“å±‚ã€‚HTTPå®¢æˆ·ç«¯ä¼šæ ¹æ®éœ€è¦æ„å»ºåˆé€‚çš„HTTPè¯·æ±‚æ–¹æ³•ï¼Œè€ŒHTTPæœåŠ¡å™¨ä¼šæ ¹æ®ä¸åŒçš„HTTPè¯·æ±‚æ–¹æ³•åšå‡ºä¸åŒçš„å“åº”ã€‚\n\n--- \n<!-- more -->\n\n\n## HTTP æŠ¥æ–‡ç»„æˆéƒ¨åˆ†\n- è¯·æ±‚æŠ¥æ–‡: è¯·æ±‚è¡Œ è¯·æ±‚å¤´ ç©ºè¡Œ è¯·æ±‚ä½“\n- å“åº”æŠ¥æ–‡: å“åº”è¡Œ å“åº”å¤´ ç©ºè¡Œ å“åº”ä½“\n> è¯·æ±‚è¡Œé‡ŒåŒ…æ‹¬è¯·æ±‚æ–¹æ³•, url, http ç‰ˆæœ¬; å“åº”è¡Œé‡ŒåŒ…æ‹¬çŠ¶æ€ç , http ç‰ˆæœ¬, çŠ¶æ€è¯´æ˜;\n\n![http-request](http://cdn.mydearest.cn/blog/images/http-request.png)\n\n![http-response](http://cdn.mydearest.cn/blog/images/http-response,png)\n\n## HTTPç‰ˆæœ¬\nåœ¨HTTPçš„å‘å±•è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†å¾ˆå¤šHTTPç‰ˆæœ¬ï¼Œå…¶ä¸­çš„å¤§éƒ¨åˆ†åè®®éƒ½æ˜¯å‘ä¸‹å…¼å®¹çš„ã€‚åœ¨è¿›è¡ŒHTTPè¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯åœ¨è¯·æ±‚æ—¶ä¼šå‘Šè¯‰æœåŠ¡å™¨å®ƒé‡‡ç”¨çš„åè®®ç‰ˆæœ¬å·ï¼Œè€ŒæœåŠ¡å™¨åˆ™ä¼šåœ¨ä½¿ç”¨ç›¸åŒæˆ–è€…æ›´æ—©çš„åè®®ç‰ˆæœ¬è¿›è¡Œå“åº”ã€‚\n- HTTP/0.9\nè¿™æ˜¯HTTPæœ€æ—©å¤§è§„æ¨¡ä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œç°å·²è¿‡æ—¶ã€‚åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸­ åªæœ‰GETä¸€ç§è¯·æ±‚æ–¹æ³•ï¼Œåœ¨HTTPé€šè®¯ä¹Ÿæ²¡æœ‰æŒ‡å®šç‰ˆæœ¬å·ï¼Œä¹Ÿä¸æ”¯æŒè¯·æ±‚å¤´ä¿¡æ¯ã€‚è¯¥ç‰ˆæœ¬ä¸æ”¯æŒPOSTç­‰æ–¹æ³•ï¼Œå› æ­¤å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ä¼ é€’ä¿¡æ¯çš„èƒ½åŠ›éå¸¸æœ‰é™ã€‚HTTP/0.9çš„è¯·æ±‚åªæœ‰å¦‚ä¸‹ä¸€è¡Œï¼š\nGET www.baidu.com\n\n- HTTP/1.0\nè¿™ä¸ªç‰ˆæœ¬æ˜¯ç¬¬ä¸€ä¸ªåœ¨HTTPé€šè®¯ä¸­æŒ‡å®šç‰ˆæœ¬å·çš„åè®®ç‰ˆæœ¬ï¼ŒHTTP/1.0è‡³ä»Šä»è¢«å¹¿æ³›é‡‡ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨ä»£ç†æœåŠ¡å™¨ä¸­ã€‚è¯¥ç‰ˆæœ¬æ”¯æŒï¼šGETã€POSTã€HEADä¸‰ç§HTTPè¯·æ±‚æ–¹æ³•ã€‚\n- HTTP/1.1\n\nHTTP/1.1æ˜¯å½“å‰æ­£åœ¨ä½¿ç”¨çš„ç‰ˆæœ¬ã€‚è¯¥ç‰ˆæœ¬é»˜è®¤é‡‡ç”¨æŒä¹…è¿æ¥ï¼Œå¹¶èƒ½å¾ˆå¥½åœ°é…åˆä»£ç†æœåŠ¡å™¨å·¥ä½œã€‚è¿˜æ”¯æŒä»¥ç®¡é“æ–¹å¼åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œä»¥ä¾¿é™ä½çº¿è·¯è´Ÿè½½ï¼Œæé«˜ä¼ è¾“é€Ÿåº¦ã€‚HTTP/1.1æ–°å¢äº†ï¼šOPTIONSã€PUTã€DELETEã€TRACEã€CONNECTäº”ç§HTTPè¯·æ±‚æ–¹æ³•ã€‚\n\n- HTTP/2\nè¿™ä¸ªç‰ˆæœ¬æ˜¯æœ€æ–°å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œäº2015å¹´5æœˆåšHTTPæ ‡å‡†æ­£å¼å‘å¸ƒã€‚HTTP/2é€šè¿‡æ”¯æŒè¯·æ±‚ä¸ç›¸åº”çš„å¤šè·¯é‡ç”¨æ¥å‡å°‘å»¶è¿Ÿï¼Œé€šè¿‡å‹ç¼©HTTPå¤´å­—æ®µå°†åè®®å¼€é”€é™åˆ°æœ€ä½ï¼ŒåŒæ—¶å¢åŠ äº†å¯¹è¯·æ±‚ä¼˜å…ˆçº§å’ŒæœåŠ¡å™¨ç«¯æ¨é€çš„æ”¯æŒã€‚\n\n - äºŒè¿›åˆ¶æµï¼šhttp2.0ä¼šå°†æ‰€æœ‰çš„ä¼ è¾“ä¿¡æ¯åˆ†å‰²ä¸ºæ›´å°çš„ä¿¡æ¯æˆ–è€…å¸§ï¼Œå¹¶å¯¹ä»–ä»¬è¿›è¡ŒäºŒè¿›åˆ¶ç¼–ç \n - æ•°æ®å‹ç¼©ï¼šä½¿ç”¨HPACKç®—æ³•å¯¹headerçš„æ•°æ®è¿›è¡Œå‹ç¼©\n - å¤šè·¯å¤ç”¨ï¼šå¤šè·¯å¤ç”¨å…è®¸åŒæ—¶é€šè¿‡å•ä¸€çš„HTTP/2è¿æ¥å‘é€å¤šé‡è¯·æ±‚-å“åº”ä¿¡æ¯ã€‚æ”¹å–„äº†ï¼šåœ¨http1.1ä¸­æµè§ˆå™¨å®¢æˆ·ç«¯åœ¨åŒä¸€æ—¶é—´ï¼Œé’ˆå¯¹åŒä¸€åŸŸåä¸‹çš„è¯·æ±‚æœ‰ä¸€å®šæ•°é‡çš„é™åˆ¶ï¼Œè¶…è¿‡é™åˆ¶ä¼šå‘ç”Ÿé˜»å¡ã€‚\n - èµ„æºæ¨é€ä¼˜å…ˆçº§(æœåŠ¡å™¨ç«¯æ¨é€)-å½“æˆ‘ä»¬å¯¹æ”¯æŒHTTP2.0çš„web serverè¯·æ±‚æ•°æ®çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šé¡ºä¾¿æŠŠä¸€äº›å®¢æˆ·ç«¯éœ€è¦çš„èµ„æºä¸€èµ·æ¨é€åˆ°å®¢æˆ·ç«¯ï¼Œå…å¾—å®¢æˆ·ç«¯å†æ¬¡åˆ›å»ºè¿æ¥å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ç«¯è·å–ã€‚è¿™ç§æ–¹å¼éå¸¸\n åˆé€‚åŠ è½½é™æ€èµ„æºã€‚\n\n![æœåŠ¡ç«¯æ¨é€](http://cdn.mydearest.cn/blog/images/http2-push.png)\n### nginxå®ç°\n```\nserver {\n    listen 443 ssl http2;\n    Â·Â·Â·//çœç•¥\n    location / {\n        Â·Â·Â·//çœç•¥\n        http2_push /style.css;\n        http2_push /example.png;\n    }\n}\n```\n\n### å¤šè·¯å¤ç”¨å’ŒæŒä¹…è¿æ¥çš„åŒºåˆ«\n> ç›¸å½“äºä½ ä»¬å®¶è·Ÿä½ å”å”å®¶æ‰“ç”µè¯ï¼šä¸€ä¸ªæ˜¯ä½ æŠŠè·Ÿä½ å”å”èŠå®Œåï¼Œä¸æŒ‚ç”µè¯ï¼Œä½ å¦ˆå’Œä½ å©¶å©¶èŠï¼Œä½ è·Ÿä½ å ‚å…„å¼Ÿå§å¦¹èŠã€‚ä¸€ä¸ªæ˜¯ä½ ä»¬å®¶3å£äººå’Œä½ å”å”å®¶ä¸‰å£äººåŒæ—¶ä¸€å¯¹ä¸€èŠå¤©ã€‚\n- æ‰€è°“æŒä¹…è¿æ¥ï¼Œå°±æ˜¯é‡ç”¨ä¸‹ä¹‹å‰çš„è¿æ¥ï¼Œæ˜æ˜¾è¿æ¥ä¸€æ¬¡åªèƒ½ä¸€ä¸ªè¯·æ±‚/åº”ç­”æ¶ˆæ¯ã€‚\n- å¤šè·¯å¤ç”¨ï¼ˆmultiple accessï¼‰ï¼Œå°±æ˜¯å¤šä¸ªhttpè¯·æ±‚/åº”ç­”ä½¿ç”¨ä¸€ä¸ªè¿æ¥ã€‚\n\n## HTTPè¯·æ±‚æ–¹æ³•\n\n### HTTP/1.1\nåè®®ä¸­å…±å®šä¹‰äº†8ç§HTTPè¯·æ±‚æ–¹æ³•ï¼ŒHTTPè¯·æ±‚æ–¹æ³•ä¹Ÿè¢«å«åšâ€œè¯·æ±‚åŠ¨ä½œâ€ï¼Œä¸åŒçš„æ–¹æ³•è§„å®šäº†ä¸åŒçš„æ“ä½œæŒ‡å®šçš„èµ„æºæ–¹å¼ã€‚æœåŠ¡ç«¯ä¹Ÿä¼šæ ¹æ®ä¸åŒçš„è¯·æ±‚æ–¹æ³•åšä¸åŒçš„å“åº”ã€‚\n\n#### GET\nGETè¯·æ±‚ä¼šæ˜¾ç¤ºè¯·æ±‚æŒ‡å®šçš„èµ„æºã€‚ä¸€èˆ¬æ¥è¯´GETæ–¹æ³•åº”è¯¥åªç”¨äºæ•°æ®çš„è¯»å–ï¼Œè€Œä¸åº”å½“ç”¨äºä¼šäº§ç”Ÿå‰¯ä½œç”¨çš„éå¹‚ç­‰çš„æ“ä½œä¸­ã€‚GETä¼šæ–¹æ³•è¯·æ±‚æŒ‡å®šçš„é¡µé¢ä¿¡æ¯ï¼Œå¹¶è¿”å›å“åº”ä¸»ä½“ï¼ŒGETè¢«è®¤ä¸ºæ˜¯ä¸å®‰å…¨çš„æ–¹æ³•ï¼Œå› ä¸ºGETæ–¹æ³•ä¼šè¢«ç½‘ç»œèœ˜è››ç­‰ä»»æ„çš„è®¿é—®ã€‚\n\n#### HEAD\nHEADæ–¹æ³•ä¸GETæ–¹æ³•ä¸€æ ·ï¼Œéƒ½æ˜¯å‘æœåŠ¡å™¨å‘å‡ºæŒ‡å®šèµ„æºçš„è¯·æ±‚ã€‚ä½†æ˜¯ï¼ŒæœåŠ¡å™¨åœ¨å“åº”HEADè¯·æ±‚æ—¶ä¸ä¼šå›ä¼ èµ„æºçš„å†…å®¹éƒ¨åˆ†ï¼Œå³ï¼šå“åº”ä¸»ä½“ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ä¼ è¾“å…¨éƒ¨å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è·å–æœåŠ¡å™¨çš„å“åº”å¤´ä¿¡æ¯ã€‚HEADæ–¹æ³•å¸¸è¢«ç”¨äºå®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½ã€‚\n\n#### POST\nPOSTè¯·æ±‚ä¼š å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®ï¼Œè¯·æ±‚æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼Œå¦‚ï¼šè¡¨å•æ•°æ®æäº¤ã€æ–‡ä»¶ä¸Šä¼ ç­‰ï¼Œè¯·æ±‚æ•°æ®ä¼šè¢« åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚POSTæ–¹æ³•æ˜¯éå¹‚ç­‰çš„æ–¹æ³•ï¼Œå› ä¸ºè¿™ä¸ªè¯·æ±‚å¯èƒ½ä¼šåˆ›å»ºæ–°çš„èµ„æºæˆ–/å’Œä¿®æ”¹ç°æœ‰èµ„æºã€‚\n\n#### PUT\nPUTè¯·æ±‚ä¼šèº«å‘æŒ‡å®šèµ„æºä½ç½®ä¸Šä¼ å…¶æœ€æ–°å†…å®¹ï¼ŒPUTæ–¹æ³•æ˜¯å¹‚ç­‰çš„æ–¹æ³•ã€‚é€šè¿‡è¯¥æ–¹æ³•å®¢æˆ·ç«¯å¯ä»¥å°†æŒ‡å®šèµ„æºçš„æœ€æ–°æ•°æ®ä¼ é€ç»™æœåŠ¡å™¨å–ä»£æŒ‡å®šçš„èµ„æºçš„å†…å®¹ã€‚\n\n#### DELETE\nDELETEè¯·æ±‚ç”¨äºè¯·æ±‚æœåŠ¡å™¨åˆ é™¤æ‰€è¯·æ±‚URIï¼ˆç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ŒUniform Resource Identifierï¼‰æ‰€æ ‡è¯†çš„èµ„æºã€‚DELETEè¯·æ±‚åæŒ‡å®šèµ„æºä¼šè¢«åˆ é™¤ï¼ŒDELETEæ–¹æ³•ä¹Ÿæ˜¯å¹‚ç­‰çš„ã€‚\n\n#### CONNECT\nCONNECTæ–¹æ³•æ˜¯HTTP/1.1åè®®é¢„ç•™çš„ï¼Œèƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚é€šå¸¸ç”¨äºSSLåŠ å¯†æœåŠ¡å™¨çš„é“¾æ¥ä¸éåŠ å¯†çš„HTTPä»£ç†æœåŠ¡å™¨çš„é€šä¿¡ã€‚\n\n#### OPTIONS\nOPTIONSè¯·æ±‚ä¸HEADç±»ä¼¼ï¼Œä¸€èˆ¬ä¹Ÿæ˜¯ç”¨äºå®¢æˆ·ç«¯æŸ¥çœ‹æœåŠ¡å™¨çš„æ€§èƒ½ã€‚ è¿™ä¸ªæ–¹æ³•ä¼šè¯·æ±‚æœåŠ¡å™¨è¿”å›è¯¥èµ„æºæ‰€æ”¯æŒçš„æ‰€æœ‰HTTPè¯·æ±‚æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šç”¨ * æ¥ä»£æ›¿èµ„æºåç§°ï¼Œå‘æœåŠ¡å™¨å‘é€OPTIONSè¯·æ±‚ï¼Œå¯ä»¥æµ‹è¯•æœåŠ¡å™¨åŠŸèƒ½æ˜¯å¦æ­£å¸¸ã€‚JavaScriptçš„XMLHttpRequestå¯¹è±¡è¿›è¡ŒCORSè·¨åŸŸèµ„æºå…±äº«æ—¶ï¼Œå°±æ˜¯ä½¿ç”¨OPTIONSæ–¹æ³•å‘é€å—…æ¢è¯·æ±‚ï¼Œä»¥åˆ¤æ–­æ˜¯å¦æœ‰å¯¹æŒ‡å®šèµ„æºçš„è®¿é—®æƒé™ã€‚\n\n#### TRACE\nTRACEè¯·æ±‚æœåŠ¡å™¨å›æ˜¾å…¶æ”¶åˆ°çš„è¯·æ±‚ä¿¡æ¯ï¼Œè¯¥æ–¹æ³•ä¸»è¦ç”¨äºHTTPè¯·æ±‚çš„æµ‹è¯•æˆ–è¯Šæ–­ã€‚\n\n### HTTP/1.1ä¹‹åå¢åŠ çš„æ–¹æ³•\nåœ¨HTTP/1.1æ ‡å‡†åˆ¶å®šä¹‹åï¼Œåˆé™†ç»­æ‰©å±•äº†ä¸€äº›æ–¹æ³•ã€‚å…¶ä¸­ä½¿ç”¨ä¸­è¾ƒå¤šçš„æ˜¯PATCH æ–¹æ³•:\n\n#### PATCH\nPATCHæ–¹æ³•å‡ºç°çš„è¾ƒæ™šï¼Œå®ƒåœ¨2010å¹´çš„RFC 5789æ ‡å‡†ä¸­è¢«å®šä¹‰ã€‚PATCHè¯·æ±‚ä¸PUTè¯·æ±‚ç±»ä¼¼ï¼ŒåŒæ ·ç”¨äºèµ„æºçš„æ›´æ–°ã€‚äºŒè€…æœ‰ä»¥ä¸‹ä¸¤ç‚¹ä¸åŒï¼š\n1.PATCHä¸€èˆ¬ç”¨äºèµ„æºçš„éƒ¨åˆ†æ›´æ–°ï¼Œè€ŒPUTä¸€èˆ¬ç”¨äºèµ„æºçš„æ•´ä½“æ›´æ–°ã€‚\n2.å½“èµ„æºä¸å­˜åœ¨æ—¶ï¼ŒPATCHä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„èµ„æºï¼Œè€ŒPUTåªä¼šå¯¹å·²åœ¨èµ„æºè¿›è¡Œæ›´æ–°ã€‚\n\n### è¯·æ±‚å¤´å’Œå“åº”å¤´\n> header æœ‰å“ªäº›å­—æ®µ\n1)è¯·æ±‚(å®¢æˆ·ç«¯->æœåŠ¡ç«¯[request]) \n    GET(è¯·æ±‚çš„æ–¹å¼) /newcoder/hello.html(è¯·æ±‚çš„ç›®æ ‡èµ„æº) HTTP/1.1(è¯·æ±‚é‡‡ç”¨çš„åè®®å’Œç‰ˆæœ¬å·) \n    Accept: */*(å®¢æˆ·ç«¯èƒ½æ¥æ”¶çš„èµ„æºç±»å‹) \n    Accept-Language: en-us(å®¢æˆ·ç«¯æ¥æ”¶çš„è¯­è¨€ç±»å‹) \n    Connection: Keep-Alive(ç»´æŠ¤å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥å…³ç³») \n    Host: localhost:8080(è¿æ¥çš„ç›®æ ‡ä¸»æœºå’Œç«¯å£å·) \n    Referer: http://localhost/links.asp(å‘Šè¯‰æœåŠ¡å™¨æˆ‘æ¥è‡ªäºå“ªé‡Œ) \n    User-Agent: Mozilla/4.0(å®¢æˆ·ç«¯ç‰ˆæœ¬å·çš„åå­—) \n    Accept-Encoding: gzip, deflate(å®¢æˆ·ç«¯èƒ½æ¥æ”¶çš„å‹ç¼©æ•°æ®çš„ç±»å‹) \n    If-Modified-Since: Tue, 11 Jul 2000 18:23:51 GMT(ç¼“å­˜æ—¶é—´)  \n    Cookie(å®¢æˆ·ç«¯æš‚å­˜æœåŠ¡ç«¯çš„ä¿¡æ¯) \n    Date: Tue, 11 Jul 2000 18:23:51 GMT(å®¢æˆ·ç«¯è¯·æ±‚æœåŠ¡ç«¯çš„æ—¶é—´)\n    content-typeï¼šè¯·æ±‚/å“åº”ä½“æ–‡ä»¶é‡Œ MIME ç±»å‹ã€‚\n    content-lengthï¼šè¯·æ±‚/å“åº”ä½“é•¿\n    originï¼šè·¨åŸŸè¯·æ±‚æ—¶å­˜åœ¨ï¼Œè¯·æ±‚æ¥æº\n    cache-controlï¼šå¼ºç¼“å­˜æ§åˆ¶ï¼Œå­—æ®µè§ MDN\n    expiresï¼šå¼ºç¼“å­˜æ§åˆ¶ï¼Œå€¼ä¸ºæ—¶é—´æˆ³ï¼Œæ ‡è®°ç¼“å­˜è¿‡æœŸæ—¶é—´\n\n2)å“åº”(æœåŠ¡ç«¯->å®¢æˆ·ç«¯[response])\n    HTTP/1.1(å“åº”é‡‡ç”¨çš„åè®®å’Œç‰ˆæœ¬å·) 200(çŠ¶æ€ç ) OK(æè¿°ä¿¡æ¯)\n    Location: http://www.baidu.com(æœåŠ¡ç«¯éœ€è¦å®¢æˆ·ç«¯è®¿é—®çš„é¡µé¢è·¯å¾„) \n    Server:apache tomcat(æœåŠ¡ç«¯çš„WebæœåŠ¡ç«¯å)\n    Content-Encoding: gzip(æœåŠ¡ç«¯èƒ½å¤Ÿå‘é€å‹ç¼©ç¼–ç ç±»å‹) \n    Content-Length: 80(æœåŠ¡ç«¯å‘é€çš„å‹ç¼©æ•°æ®çš„é•¿åº¦) \n    Content-Language: zh-cn(æœåŠ¡ç«¯å‘é€çš„è¯­è¨€ç±»å‹) \n    Content-Type: text/html; charset=GB2312(æœåŠ¡ç«¯å‘é€çš„ç±»å‹åŠé‡‡ç”¨çš„ç¼–ç æ–¹å¼)\n    Last-Modified: Tue, 11 Jul 2000 18:23:51 GMT(æœåŠ¡ç«¯å¯¹è¯¥èµ„æºæœ€åä¿®æ”¹çš„æ—¶é—´)\n    Refresh: 1;url=http://www.it315.org(æœåŠ¡ç«¯è¦æ±‚å®¢æˆ·ç«¯1ç§’é’Ÿåï¼Œåˆ·æ–°ï¼Œç„¶åè®¿é—®æŒ‡å®šçš„é¡µé¢è·¯å¾„)\n    Content-Disposition: attachment; filename=aaa.zip(æœåŠ¡ç«¯è¦æ±‚å®¢æˆ·ç«¯ä»¥ä¸‹è½½æ–‡ä»¶çš„æ–¹å¼æ‰“å¼€è¯¥æ–‡ä»¶)\n    Transfer-Encoding: chunked(åˆ†å—ä¼ é€’æ•°æ®åˆ°å®¢æˆ·ç«¯ï¼‰  \n    Set-Cookie:SS=Q0=5Lb_nQ; path=/search(æœåŠ¡ç«¯å‘é€åˆ°å®¢æˆ·ç«¯çš„æš‚å­˜æ•°æ®)\n    Expires: -1//3ç§(æœåŠ¡ç«¯ç¦æ­¢å®¢æˆ·ç«¯ç¼“å­˜é¡µé¢æ•°æ®)\n    Cache-Control: no-cache(æœåŠ¡ç«¯ç¦æ­¢å®¢æˆ·ç«¯ç¼“å­˜é¡µé¢æ•°æ®)  \n    Pragma: no-cache(æœåŠ¡ç«¯ç¦æ­¢å®¢æˆ·ç«¯ç¼“å­˜é¡µé¢æ•°æ®)   \n    Connection: close(1.0)/(1.1)Keep-Alive(ç»´æŠ¤å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥å…³ç³»)  \n    Date: Tue, 11 Jul 2000 18:23:51 GMT(æœåŠ¡ç«¯å“åº”å®¢æˆ·ç«¯çš„æ—¶é—´)\nåœ¨æœåŠ¡å™¨å“åº”å®¢æˆ·ç«¯çš„æ—¶å€™ï¼Œå¸¦ä¸ŠAccess-Control-Allow-Originå¤´ä¿¡æ¯ï¼Œè§£å†³è·¨åŸŸçš„ä¸€ç§æ–¹æ³•ã€‚\n\n## çŠ¶æ€ç \n\n|   | ç±»åˆ«                          | åŸå› çŸ­è¯­\n:---|:----------                   |:---------\n1XX | Informationalï¼ˆä¿¡æ¯æ€§çŠ¶æ€ç ï¼‰   | æ¥æ”¶çš„è¯·æ±‚æ­£åœ¨å¤„ç†\n2XX | Successï¼ˆæˆåŠŸçŠ¶æ€ç ï¼‰           | è¯·æ±‚æ­£å¸¸å¤„ç†å®Œæ¯•\n3XX | Redirectionï¼ˆé‡å®šå‘çŠ¶æ€ç ï¼‰     | éœ€è¦è¿›è¡Œé™„åŠ æ“ä½œä»¥å®Œæˆè¯·æ±‚\n4XX | Client Errorï¼ˆå®¢æˆ·ç«¯é”™è¯¯çŠ¶æ€ç ï¼‰ | æœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚\n5XX | Server Errorï¼ˆæœåŠ¡å™¨é”™è¯¯çŠ¶æ€ç ï¼‰ | æœåŠ¡å™¨å¤„ç†è¯·æ±‚å‡ºé”™\n\n- 101: éœ€è¦åˆ‡æ¢åè®®(ä½¿ç”¨ Websocket å¼€å§‹é˜¶æ®µæ˜¯ http åè®®, ä¸­é—´åˆ‡æ¢åˆ° WebSocket åè®®, æ­¤æ—¶è¿”å›çš„çŠ¶æ€ç æ˜¯ 101 è¡¨ç¤ºåç»­åè®®è¿˜éœ€åˆ‡æ¢)\n- 2XX\n  * 200 OK \n    <details>\n      <summary>æˆåŠŸå¤„ç†</summary>\n      è¡¨ç¤ºä»å®¢æˆ·ç«¯å‘æ¥çš„è¯·æ±‚åœ¨æœåŠ¡å™¨ç«¯è¢«æ­£å¸¸å¤„ç†äº†\n    </details>\n  * 204 No Content\n    <details>\n      <summary>æˆåŠŸå¤„ç†ï¼Œä½†æ— æŠ¥æ–‡å®ä½“çš„ä¸»ä½“è¿”å›</summary>\n      è¯¥çŠ¶æ€ç ä»£è¡¨æœåŠ¡å™¨æ¥æ”¶çš„è¯·æ±‚å·²æˆåŠŸå¤„ç†ï¼Œä½†åœ¨è¿”å›çš„å“åº”æŠ¥æ–‡ä¸­ä¸å«å®ä½“çš„ä¸»ä½“éƒ¨åˆ†ã€‚å¦å¤–ï¼Œä¹Ÿä¸å…è®¸è¿”å›ä»»ä½•å®ä½“çš„ä¸»ä½“ã€‚æ¯”å¦‚ï¼Œå½“ä»æµè§ˆå™¨å‘å‡ºè¯·æ±‚å¤„ç†åï¼Œè¿”å› 204 å“åº”ï¼Œé‚£ä¹ˆæµè§ˆå™¨æ˜¾ç¤ºçš„é¡µé¢ä¸å‘ç”Ÿæ›´æ–°ã€‚\n    </details>\n  * 206 Partial Content\n    <details>\n      <summary>èŒƒå›´è¯·æ±‚</summary>\n      è¯¥çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯è¿›è¡Œäº†èŒƒå›´è¯·æ±‚ï¼Œè€ŒæœåŠ¡å™¨æˆåŠŸæ‰§è¡Œäº†è¿™éƒ¨åˆ†çš„GET è¯·æ±‚ã€‚å“åº”æŠ¥æ–‡ä¸­åŒ…å«ç”± Content-Range æŒ‡å®šèŒƒå›´çš„å®ä½“å†…å®¹ã€‚\n    </details>\n- 3XX\n  * 301 Moved Permanently\n    <details>\n      <summary>æ°¸ä¹…æ€§é‡å®šå‘</summary>\n      è¯¥çŠ¶æ€ç è¡¨ç¤ºè¯·æ±‚çš„èµ„æºå·²è¢«åˆ†é…äº†æ–°çš„ URIï¼Œä»¥ååº”ä½¿ç”¨èµ„æºç°åœ¨æ‰€æŒ‡çš„ URIã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå·²ç»æŠŠèµ„æºå¯¹åº”çš„ URIä¿å­˜ä¸ºä¹¦ç­¾äº†ï¼Œè¿™æ—¶åº”è¯¥æŒ‰ Location é¦–éƒ¨å­—æ®µæç¤ºçš„ URI é‡æ–°ä¿å­˜ã€‚\n    </details>\n  * 302 Found\n    <details>\n      <summary>ä¸´æ—¶æ€§é‡å®šå‘(å¯ä½¿ç”¨åŸæœ‰URI)</summary>\n      è¯¥çŠ¶æ€ç è¡¨ç¤ºè¯·æ±‚çš„èµ„æºå·²è¢«åˆ†é…äº†æ–°çš„ URIï¼Œå¸Œæœ›ç”¨æˆ·ï¼ˆæœ¬æ¬¡ï¼‰èƒ½ä½¿ç”¨æ–°çš„ URI è®¿é—®ã€‚å’Œ 301 Moved Permanently çŠ¶æ€ç ç›¸ä¼¼ï¼Œä½† 302 çŠ¶æ€ç ä»£è¡¨çš„èµ„æºä¸æ˜¯è¢«æ°¸ä¹…ç§»åŠ¨ï¼Œåªæ˜¯ä¸´æ—¶æ€§è´¨çš„ã€‚æ¢å¥è¯è¯´ï¼Œå·²ç§»åŠ¨çš„èµ„æºå¯¹åº”çš„URI å°†æ¥è¿˜æœ‰å¯èƒ½å‘ç”Ÿæ”¹å˜ã€‚æ¯”å¦‚ï¼Œç”¨æˆ·æŠŠ URI ä¿å­˜æˆä¹¦ç­¾ï¼Œä½†ä¸ä¼šåƒ 301 çŠ¶æ€ç å‡ºç°æ—¶é‚£æ ·å»æ›´æ–°ä¹¦ç­¾ï¼Œè€Œæ˜¯ä»æ—§ä¿ç•™è¿”å› 302 çŠ¶æ€ç çš„é¡µé¢å¯¹åº”çš„ URIã€‚\n    </details>\n  * 303 See Other\n    <details>\n      <summary>åŒ302ï¼Œä½†æ­¤å¤„å› é‡‡ç”¨GET\bæ–¹æ³•</summary>\n      è¯¥çŠ¶æ€ç è¡¨ç¤ºç”±äºè¯·æ±‚å¯¹åº”çš„èµ„æºå­˜åœ¨ç€å¦ä¸€ä¸ª URIï¼Œåº”ä½¿ç”¨ GETæ–¹æ³•å®šå‘è·å–è¯·æ±‚çš„èµ„æºã€‚303 çŠ¶æ€ç å’Œ 302 Found çŠ¶æ€ç æœ‰ç€ç›¸åŒçš„åŠŸèƒ½ï¼Œä½† 303 çŠ¶æ€ç æ˜ç¡®è¡¨ç¤ºå®¢æˆ·ç«¯åº”å½“é‡‡ç”¨ GET æ–¹æ³•è·å–èµ„æºï¼Œè¿™ç‚¹ä¸ 302 çŠ¶æ€ç æœ‰åŒºåˆ«ã€‚\n    </details>\n  * 304 Not Modified\n    <details>\n      <summary>åå•†ç¼“å­˜(èµ„æºæœªä¿®æ”¹å¯ä½¿ç”¨ç¼“å­˜)</summary>\n      è¯¥çŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯å‘é€é™„å¸¦æ¡ä»¶çš„è¯·æ±‚æ—¶ï¼ŒæœåŠ¡å™¨ç«¯å…è®¸è¯·æ±‚è®¿é—®èµ„æºï¼Œä½†æœªæ»¡è¶³æ¡ä»¶çš„æƒ…å†µã€‚304 çŠ¶æ€ç è¿”å›æ—¶ï¼Œä¸åŒ…å«ä»»ä½•å“åº”çš„ä¸»ä½“éƒ¨åˆ†ã€‚304 è™½ç„¶è¢«åˆ’åˆ†åœ¨ 3XX ç±»åˆ«ä¸­ï¼Œä½†æ˜¯å’Œé‡å®šå‘æ²¡æœ‰å…³ç³»ã€‚(é™„å¸¦æ¡ä»¶çš„è¯·æ±‚æ˜¯æŒ‡é‡‡ç”¨ GETæ–¹æ³•çš„è¯·æ±‚æŠ¥æ–‡ä¸­åŒ…å« If-Matchï¼ŒIf-ModifiedSinceï¼ŒIf-None-Matchï¼ŒIf-Rangeï¼ŒIf-Unmodified-Since ä¸­ä»»ä¸€é¦–éƒ¨ã€‚)\n    </details>\n  * 307 Temporary Redirect\n    <details>\n      <summary>ä¸´æ—¶é‡å®šå‘</summary>\n      è¯¥çŠ¶æ€ç ä¸ 302 Found æœ‰ç€ç›¸åŒçš„å«ä¹‰ã€‚å°½ç®¡ 302 æ ‡å‡†ç¦æ­¢ POST å˜æ¢æˆ GETï¼Œä½†å®é™…ä½¿ç”¨æ—¶å¤§å®¶å¹¶ä¸éµå®ˆã€‚307 ä¼šéµç…§æµè§ˆå™¨æ ‡å‡†ï¼Œä¸ä¼šä» POST å˜æˆ GETã€‚ä½†æ˜¯ï¼Œå¯¹äºå¤„ç†å“åº”æ—¶çš„è¡Œä¸ºï¼Œæ¯ç§æµè§ˆå™¨æœ‰å¯èƒ½å‡ºç°ä¸åŒçš„æƒ…å†µã€‚\n    </details>\n- 4XX å®¢æˆ·ç«¯é”™è¯¯\n  * 400 Bad Request\n    <details>\n      <summary>æŠ¥æ–‡ä¸­å­˜åœ¨è¯­æ³•é”™è¯¯</summary>\n      è¯¥çŠ¶æ€ç è¡¨ç¤ºè¯·æ±‚æŠ¥æ–‡ä¸­å­˜åœ¨è¯­æ³•é”™è¯¯ã€‚å½“é”™è¯¯å‘ç”Ÿæ—¶ï¼Œéœ€ä¿®æ”¹è¯·æ±‚çš„å†…å®¹åå†æ¬¡å‘é€è¯·æ±‚ã€‚å¦å¤–ï¼Œæµè§ˆå™¨ä¼šåƒ 200 OK ä¸€æ ·å¯¹å¾…è¯¥çŠ¶æ€ç ã€‚\n    </details>\n  * 401 Unauthorized\n    <details>\n      <summary>è¦æ±‚èº«ä»½è®¤è¯</summary>\n      è¯¥çŠ¶æ€ç è¡¨ç¤ºå‘é€çš„è¯·æ±‚éœ€è¦æœ‰é€šè¿‡ HTTP è®¤è¯ï¼ˆBASIC è®¤è¯ã€DIGEST è®¤è¯ï¼‰çš„è®¤è¯ä¿¡æ¯ã€‚å¦å¤–è‹¥ä¹‹å‰å·²è¿›è¡Œè¿‡ 1 æ¬¡è¯·æ±‚ï¼Œåˆ™è¡¨ç¤ºç”¨ æˆ·è®¤è¯å¤±è´¥ã€‚è¿”å›å«æœ‰ 401 çš„å“åº”å¿…é¡»åŒ…å«ä¸€ä¸ªé€‚ç”¨äºè¢«è¯·æ±‚èµ„æºçš„ WWWAuthenticate é¦–éƒ¨ç”¨ä»¥è´¨è¯¢ï¼ˆchallengeï¼‰ç”¨æˆ·ä¿¡æ¯ã€‚å½“æµè§ˆå™¨åˆæ¬¡æ¥æ”¶åˆ° 401 å“åº”ï¼Œä¼šå¼¹å‡ºè®¤è¯ç”¨çš„å¯¹è¯çª—å£ã€‚\n    </details>\n  * 403 Forbidden\n    <details>\n      <summary>æ‹’ç»è¯·æ±‚</summary>\n      è¯¥çŠ¶æ€ç è¡¨æ˜å¯¹è¯·æ±‚èµ„æºçš„è®¿é—®è¢«æœåŠ¡å™¨æ‹’ç»äº†ã€‚æœåŠ¡å™¨ç«¯æ²¡æœ‰å¿…è¦ç»™å‡ºæ‹’ç»çš„è¯¦ç»†ç†ç”±ï¼Œä½†å¦‚æœæƒ³ä½œè¯´æ˜çš„è¯ï¼Œå¯ä»¥åœ¨å®ä½“çš„ä¸»ä½“éƒ¨åˆ†å¯¹åŸå› è¿›è¡Œæè¿°ï¼Œè¿™æ ·å°±èƒ½è®©ç”¨æˆ·çœ‹åˆ°äº†ã€‚æœªè·å¾—æ–‡ä»¶ç³»ç»Ÿçš„è®¿é—®æˆæƒï¼Œè®¿é—®æƒé™å‡ºç°æŸäº›é—®é¢˜ï¼ˆä»æœªæˆæƒçš„å‘é€æº IP åœ°å€è¯•å›¾è®¿é—®ï¼‰ç­‰åˆ—ä¸¾çš„æƒ…å†µéƒ½å¯èƒ½æ˜¯å‘ç”Ÿ 403 çš„åŸå› ã€‚\n    </details>\n  * 404 Not Found\n    <details>\n      <summary>æœªæ‰¾åˆ°è¯·æ±‚çš„èµ„æº</summary>\n      è¯¥çŠ¶æ€ç è¡¨æ˜æœåŠ¡å™¨ä¸Šæ— æ³•æ‰¾åˆ°è¯·æ±‚çš„èµ„æºã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥åœ¨æœåŠ¡å™¨ç«¯æ‹’ç»è¯·æ±‚ä¸”ä¸æƒ³è¯´æ˜ç†ç”±æ—¶ä½¿ç”¨ã€‚\n    </details>\n  * 415 Unsupported media typeï¼šä¸æ”¯æŒçš„åª’ä½“ç±»å‹\n* 5XX\n  * 500 Internal Server Error\n    <details>\n      <summary>æœåŠ¡å™¨ç«¯åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯</summary>\n      è¯¥çŠ¶æ€ç è¡¨æ˜æœåŠ¡å™¨ç«¯åœ¨æ‰§è¡Œè¯·æ±‚æ—¶å‘ç”Ÿäº†é”™è¯¯ã€‚ä¹Ÿæœ‰å¯èƒ½æ˜¯ Webåº”ç”¨å­˜åœ¨çš„ bug æˆ–æŸäº›ä¸´æ—¶çš„æ•…éšœã€‚\n    </details>\n  * 503 Service Unavailable\n    <details>\n      <summary>æœåŠ¡å™¨æš‚æ—¶æ— å“åº”</summary>\n      è¯¥çŠ¶æ€ç è¡¨æ˜æœåŠ¡å™¨æš‚æ—¶å¤„äºè¶…è´Ÿè½½æˆ–æ­£åœ¨è¿›è¡Œåœæœºç»´æŠ¤ï¼Œç°åœ¨æ— æ³•å¤„ç†è¯·æ±‚ã€‚å¦‚æœäº‹å…ˆå¾—çŸ¥è§£é™¤ä»¥ä¸ŠçŠ¶å†µéœ€è¦çš„æ—¶é—´ï¼Œæœ€å¥½å†™å…¥RetryAfter é¦–éƒ¨å­—æ®µå†è¿”å›ç»™å®¢æˆ·ç«¯ã€‚\n    </details>\n\n## HTTP äº‹ç‰©æ—¶å»¶\nDNS è§£æã€è¿æ¥ã€ä¼ è¾“ã€å¤„ç†ã€‚\n\n## HTTP è¿æ¥\nç®¡é“åŒ–è¿æ¥: ä¾èµ–äº Http/1.1 æ˜¯æŒä¹…è¿æ¥çš„ã€‚\n\n## TCPä¸‰æ¬¡æ¡æ‰‹\nå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½éœ€è¦çŸ¥é“å„è‡ªå¯æ”¶å‘ï¼Œå› æ­¤éœ€è¦ä¸‰æ¬¡æ¡æ‰‹(synå»ºç«‹è”æœº,ackç¡®è®¤è”æœº)\n\n- å®¢æˆ·ç«¯å‘é€ syn=1(åŒæ­¥åºåˆ—ç¼–å·)ï¼Œack=0æ ‡å¿—çš„æ•°æ®åŒ…ç»™æœåŠ¡ç«¯ï¼Œè¿›å…¥ syn_send çŠ¶æ€ï¼Œç­‰å¾…ç¡®è®¤\n- æœåŠ¡ç«¯æ¥æ”¶å¹¶ç¡®è®¤ syn åŒ…åå‘é€ syn+ack(1,1) åŒ…ï¼Œè¿›å…¥ syn_recv çŠ¶æ€\n- å®¢æˆ·ç«¯æ¥æ”¶ syn+ack åŒ…åï¼Œå‘é€syn=0ï¼Œack=1 åŒ…ï¼ŒåŒæ–¹è¿›å…¥ established çŠ¶æ€\n\n```js\n                  C                   S\n                          SYN=1\n                     ---------------> ç¡®è®¤è‡ªå·±å¯ä»¥æ¥æ”¶\n                        SYN=1,ACK\n   ç¡®å®šså¯æ”¶ï¼Œè‡ªå·±å¯æ”¶ <--------------\n                            ACK\n                     ---------------> ç¡®è®¤Cå¯æ”¶\n\n```\n\n## TCPå››æ¬¡æŒ¥æ‰‹\n- å®¢æˆ·ç«¯ -- FIN --> æœåŠ¡ç«¯ï¼Œ FINâ€”WAIT\n- æœåŠ¡ç«¯ -- ACK --> å®¢æˆ·ç«¯ï¼Œ CLOSE-WAIT\n- æœåŠ¡ç«¯ -- ACK,FIN --> å®¢æˆ·ç«¯ï¼Œ LAST-ACK\n- å®¢æˆ·ç«¯ -- ACK --> æœåŠ¡ç«¯ï¼ŒCLOSED\n\n```\n1. ç¬¬ä¸€æ¬¡æŒ¥æ‰‹(FIN=1ï¼Œseq=x)\n\nå‡è®¾å®¢æˆ·ç«¯æƒ³è¦å…³é—­è¿æ¥ï¼Œå®¢æˆ·ç«¯å‘é€ä¸€ä¸ª FIN æ ‡å¿—ä½ç½®ä¸º1çš„åŒ…ï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»æ²¡æœ‰æ•°æ®å¯ä»¥å‘é€äº†ï¼Œä½†æ˜¯ä»ç„¶å¯ä»¥æ¥å—æ•°æ®ã€‚\n\nå‘é€å®Œæ¯•åï¼Œå®¢æˆ·ç«¯è¿›å…¥ FIN_WAIT_1 çŠ¶æ€ã€‚\n\n2. ç¬¬äºŒæ¬¡æŒ¥æ‰‹(ACK=1ï¼ŒACKnum=x+1)\n\næœåŠ¡å™¨ç«¯ç¡®è®¤å®¢æˆ·ç«¯çš„ FIN åŒ…ï¼Œå‘é€ä¸€ä¸ªç¡®è®¤åŒ…ï¼Œè¡¨æ˜è‡ªå·±æ¥å—åˆ°äº†å®¢æˆ·ç«¯å…³é—­è¿æ¥çš„è¯·æ±‚ï¼Œä½†è¿˜æ²¡æœ‰å‡†å¤‡å¥½å…³é—­è¿æ¥ã€‚\n\nå‘é€å®Œæ¯•åï¼ŒæœåŠ¡å™¨ç«¯è¿›å…¥ CLOSE_WAIT çŠ¶æ€ï¼Œå®¢æˆ·ç«¯æ¥æ”¶åˆ°è¿™ä¸ªç¡®è®¤åŒ…ä¹‹åï¼Œè¿›å…¥ FIN_WAIT_2 çŠ¶æ€ï¼Œç­‰å¾…æœåŠ¡å™¨ç«¯å…³é—­è¿æ¥ã€‚\n\n3. ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹(FIN=1ï¼Œseq=y)\n\næœåŠ¡å™¨ç«¯å‡†å¤‡å¥½å…³é—­è¿æ¥æ—¶ï¼Œå‘å®¢æˆ·ç«¯å‘é€ç»“æŸè¿æ¥è¯·æ±‚ï¼ŒFIN ç½®ä¸º1ã€‚\n\nå‘é€å®Œæ¯•åï¼ŒæœåŠ¡å™¨ç«¯è¿›å…¥ LAST_ACK çŠ¶æ€ï¼Œç­‰å¾…æ¥è‡ªå®¢æˆ·ç«¯çš„æœ€åä¸€ä¸ªACKã€‚\n\n4. ç¬¬å››æ¬¡æŒ¥æ‰‹(ACK=1ï¼ŒACKnum=y+1)\n\nå®¢æˆ·ç«¯æ¥æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨ç«¯çš„å…³é—­è¯·æ±‚ï¼Œå‘é€ä¸€ä¸ªç¡®è®¤åŒ…ï¼Œå¹¶è¿›å…¥ TIME_WAITçŠ¶æ€ï¼Œç­‰å¾…å¯èƒ½å‡ºç°çš„è¦æ±‚é‡ä¼ çš„ ACK åŒ…ã€‚\n\næœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°è¿™ä¸ªç¡®è®¤åŒ…ä¹‹åï¼Œå…³é—­è¿æ¥ï¼Œè¿›å…¥ CLOSED çŠ¶æ€ã€‚\n\nå®¢æˆ·ç«¯ç­‰å¾…äº†æŸä¸ªå›ºå®šæ—¶é—´ï¼ˆä¸¤ä¸ªæœ€å¤§æ®µç”Ÿå‘½å‘¨æœŸï¼Œ2MSLï¼Œ2 Maximum Segment Lifetimeï¼‰ä¹‹åï¼Œæ²¡æœ‰æ”¶åˆ°æœåŠ¡å™¨ç«¯çš„ ACK ï¼Œè®¤ä¸ºæœåŠ¡å™¨ç«¯å·²ç»æ­£å¸¸å…³é—­è¿æ¥ï¼Œäºæ˜¯è‡ªå·±ä¹Ÿå…³é—­è¿æ¥ï¼Œè¿›å…¥ CLOSED çŠ¶æ€ã€‚\n```\n\n## TCPå’ŒUDPçš„åŒºåˆ«\n\n1. TCPæ˜¯é¢å‘è¿æ¥çš„ï¼ŒUDPæ˜¯æ— è¿æ¥çš„ï¼Œå³å‘é€ä¹‹å‰ä¸éœ€è¦å…ˆå»ºç«‹è¿æ¥ \n\n2. TCPæä¾›å¯é çš„æœåŠ¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡TCPè¿æ¥ä¼ è¾“æ•°æ®ï¼Œæ— å·®é”™ï¼Œä¸ä¸¢å¤±ï¼Œä¸é‡å¤ï¼Œä¸”æŒ‰åºåˆ°è¾¾ï¼›UDPå°½æœ€å¤§åŠªåŠ›äº¤ä»˜ï¼Œå³ä¸ä¿è¯å¯é äº¤ä»˜ã€‚æ­£å› å¦‚æ­¤ï¼ŒTCPé€‚åˆå¤§æ•°æ®é‡çš„äº¤æ¢ (ä¸ºä»€ä¹ˆæ˜¯å¯é çš„ï¼šå› ä¸ºæœ‰ACK)\n\n3. TCPæ˜¯é¢å‘å­—èŠ‚æµï¼ŒUDPæ˜¯é¢å‘æŠ¥æ–‡ï¼Œå¹¶ä¸”ç½‘ç»œå‡ºç°æ‹¥å¡ä¸ä¼šä½¿å‘é€é€Ÿç‡é™ä½ï¼ˆå› æ­¤ä¼šå‡ºç°ä¸¢åŒ…ï¼Œå®æ—¶çš„åº”ç”¨å¦‚ipç”µè¯å’Œè§†é¢‘ä¼šè®®ç­‰ï¼‰\n\n4. TCPæ˜¯ä¸€å¯¹ä¸€ï¼ŒUDPæ”¯æŒä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤š \n\n5. TCPçš„é¦–éƒ¨è¾ƒå¤§ä¸º20å­—èŠ‚ï¼Œè€ŒUDPåªæœ‰8å­—èŠ‚ \n\n6. TCPæ˜¯é¢å‘è¿æ¥çš„å¯é æ€§ä¼ è¾“ï¼Œè€ŒUDPæ˜¯ä¸å¯é çš„\n","tags":["http"],"categories":["çŸ¥è¯†"]},{"title":"è·å–æµè§ˆå™¨urlå‚æ•°æ–¹æ³•æ€»ç»“","url":"%2F%E8%8E%B7%E5%8F%96%E6%B5%8F%E8%A7%88%E5%99%A8url%E5%8F%82%E6%95%B0%E6%96%B9%E6%B3%95%E6%80%BB%E7%BB%93.html","content":" \n1. æ­£åˆ™(xxx?typeId=2)\n```javascript\nfunction getQueryString(name) {\n    var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');\n    var r = window.location.search.substr(1).match(reg);\n    if (r != null) {\n        // return unescape(r[2]); // ä¸­æ–‡ä¼šä¹±ç \n        return decodeURI(r[2]);\n    }\n    return null;\n}\ngetQueryString(\"typeId\") // \"2\"\n```\n\n---\n<!-- more -->\n\n2. splitæ‹†åˆ†\n```javascript\nfunction getQueryString() {\n    var url = location.search; //è·å–urlä¸­\"?\"ç¬¦åçš„å­—ä¸²\n    var theRequest = new Object();\n    if (url.indexOf(\"?\") != -1) {\n        var str = url.substr(1);\n        strs = str.split(\"&\");\n        for(var i = 0; i < strs.length; i ++) {\n            theRequest[strs[i].split(\"=\")[0]] = decodeURI(strs[i].split(\"=\")[1]);\n        }\n    }\n    return theRequest;\n}\ngetQueryString(\"typeId\") // {typeId:\"2}\n```\n\n3. æ­£åˆ™è·å€¼ å’Œ1ä¸€æ ·\n```javascript\nfunction getQueryString(name) {  \n    var reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");  \n    var r = window.location.search.substr(1).match(reg);  //è·å–urlä¸­\"?\"ç¬¦åçš„å­—ç¬¦ä¸²å¹¶æ­£åˆ™åŒ¹é…\n    var context = \"\";  \n    if (r != null)  \n         context = r[2];  \n    reg = null;  \n    r = null;  \n    return context == null || context == \"\" || context == \"undefined\" ? \"\" : context;  \n}\n```\n\n4. å•å‚æ•°è·å–(?1)è·å–ï¼Ÿåé¢çš„æ•°æ®\n```javascript\nvar url=window.location.href\nurl.substring(url.indexOf('?') + 1)\n// url.substr(url.indexOf('?') + 1)\n\nvar url=window.location.search\nurl.substring(1)\n// url.substr(1)\n```\n\n5. è·å–æ‰€æœ‰å‚æ•°çš„å¯¹è±¡\n```js\nfunction getQueryStringObject() {\n    var reg = /([^?&=]+)=([^&]+)/g;\n    var q = {};\n    location.search.replace(reg, (m, k, v) => q[k] = v);\n    return q;\n}\n```\n\n6. URLå¯¹è±¡-URLSearchParams\nURLSearchParams æ„é€ å‡½æ•°ä¸ä¼šè§£æå®Œæ•´ URLï¼Œä½†æ˜¯å¦‚æœå­—ç¬¦ä¸²èµ·å§‹ä½ç½®æœ‰ ? çš„è¯ä¼šè¢«å»é™¤ã€‚\n```js\nvar paramsString1 = \"http://example.com/search?query=123\";\nvar searchParams1 = new URLSearchParams(paramsString1);\n\nsearchParams1.has(\"query\"); // false \nsearchParams1.has(\"http://example.com/search?query\"); // true\n\nsearchParams1.get(\"query\"); // null\nsearchParams1.get(\"http://example.com/search?query\"); // \"123\" (equivalent to decodeURIComponent('%40'))\n\nvar paramsString2 = \"?query=value\";\nvar searchParams2 = new URLSearchParams(paramsString2);\nsearchParams2.has(\"query\"); // true \n\nvar url = new URL(\"http://example.com/search?query=%40\");\nvar searchParams3 = new URLSearchParams(url.search);\nsearchParams3.has(\"query\") // true\n\nlet param = new URLSearchParams()\nparam.append('username', 'admin')\nparam.append('pwd', 'admin')\n```\n","tags":["çŸ¥è¯†"],"categories":["çŸ¥è¯†"]},{"title":"å•é¡µåº”ç”¨ä¼˜ç¼ºç‚¹åˆ†æ","url":"%2Fspa.html","content":"\nå•é¡µWebåº”ç”¨ï¼ˆsingle page web applicationï¼ŒSPAï¼‰ï¼Œå°±æ˜¯åªæœ‰ä¸€å¼ Webé¡µé¢çš„åº”ç”¨ã€‚å•é¡µåº”ç”¨ç¨‹åº (SPA) æ˜¯åŠ è½½å•ä¸ªHTML é¡µé¢å¹¶åœ¨ç”¨æˆ·ä¸åº”ç”¨ç¨‹åºäº¤äº’æ—¶åŠ¨æ€æ›´æ–°è¯¥é¡µé¢çš„Webåº”ç”¨ç¨‹åºã€‚æµè§ˆå™¨ä¸€å¼€å§‹ä¼šåŠ è½½å¿…éœ€çš„HTMLã€CSSå’ŒJavaScriptï¼Œæ‰€æœ‰çš„æ“ä½œéƒ½åœ¨è¿™å¼ é¡µé¢ä¸Šå®Œæˆï¼Œéƒ½ç”±JavaScriptæ¥æ§åˆ¶ã€‚\n\n--- \n<!--more-->\n\n## ä¼˜ç‚¹ï¼š\n1ã€åˆ†ç¦»å‰åç«¯å…³æ³¨ç‚¹ï¼Œå‰ç«¯è´Ÿè´£ç•Œé¢æ˜¾ç¤ºï¼Œåç«¯è´Ÿè´£æ•°æ®å­˜å‚¨å’Œè®¡ç®—ï¼Œå„å¸å…¶èŒï¼Œä¸ä¼šæŠŠå‰åç«¯çš„é€»è¾‘æ··æ‚åœ¨ä¸€èµ·ï¼›å‰åå°åˆ†ç¦»å¼€å‘æ¨¡å¼ã€‚\n\n2ã€å‡è½»æœåŠ¡å™¨å‹åŠ›ï¼ŒæœåŠ¡å™¨åªç”¨å‡ºæ•°æ®å°±å¯ä»¥ï¼Œä¸ç”¨ç®¡å±•ç¤ºé€»è¾‘å’Œé¡µé¢åˆæˆï¼Œååèƒ½åŠ›ä¼šæé«˜å‡ å€ï¼›\n\n3ã€åŒä¸€å¥—åç«¯ç¨‹åºä»£ç ï¼Œä¸ç”¨ä¿®æ”¹å°±å¯ä»¥ç”¨äºWebç•Œé¢ã€æ‰‹æœºã€å¹³æ¿ç­‰å¤šç§å®¢æˆ·ç«¯ï¼›\n\n4. æœåŠ¡å™¨å‹åŠ›å˜å°ï¼Œåå°ä¸éœ€è¦è´Ÿè´£æ¨¡æ¿æ¸²æŸ“ï¼Œè¾“å‡ºé¡µé¢å·¥ä½œã€‚ajaxå®ç°é¡µé¢åˆ·æ–°ï¼Œä¸éœ€è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚\n\n## ç¼ºç‚¹ï¼š\n1ã€SEOéš¾åº¦å¤§ï¼Œç”±äºæ‰€æœ‰çš„å†…å®¹éƒ½æ˜¯åœ¨ä¸€ä¸ªé¡µé¢ä¸­åŠ¨æ€æ›¿æ¢æ˜¾ç¤ºï¼Œç°åœ¨å¯ä»¥é€šè¿‡Prerenderç­‰æŠ€æœ¯è§£å†³ä¸€éƒ¨åˆ†ï¼›\n\n2ã€å‰è¿›åé€€ç”±è·¯ç”±ç®¡ç†ï¼Œç”±äºå•é¡µé¢åº”ç”¨åœ¨ä¸€ä¸ªé¡µé¢ä¸­æ˜¾ç¤ºæ‰€æœ‰çš„å†…å®¹ï¼Œæ‰€ä»¥ä¸èƒ½ä½¿ç”¨æµè§ˆå™¨çš„å‰è¿›åé€€åŠŸèƒ½ï¼Œæ‰€æœ‰é¡µé¢çš„åˆ‡æ¢éœ€è¦è‡ªå·±å»ºç«‹å †æ ˆç®¡ç†ï¼›\n\n3ã€åˆæ¬¡åŠ è½½è€—æ—¶å¤šï¼Œä¸ºå®ç°å•é¡µé¢webåº”ç”¨åŠŸèƒ½åŠæ˜¾ç¤ºæ•ˆæœï¼Œéœ€è¦åœ¨åŠ è½½é¡µé¢çš„æ—¶å€™å°†jsï¼Œcssç»Ÿä¸€åŠ è½½ï¼Œéƒ¨åˆ†é¡µé¢æŒ‰éœ€åŠ è½½ï¼›\n","tags":["çŸ¥è¯†"],"categories":["çŸ¥è¯†"]},{"title":"httpsåŠ å¯†é€šä¿¡æµç¨‹è§£æ","url":"%2Fhttps%E5%8A%A0%E5%AF%86%E9%80%9A%E4%BF%A1.html","content":"\nhttpså…¶å®æ˜¯æœ‰ä¸¤éƒ¨åˆ†ç»„æˆï¼šhttp + SSL / TLSåŠ å¯†æ•°æ®åŒ…ï¼Œä¹Ÿå°±æ˜¯åœ¨HTTPä¸ŠåˆåŠ äº†ä¸€å±‚å¤„ç†åŠ å¯†ä¿¡æ¯çš„æ¨¡å—ã€‚æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯çš„ä¿¡æ¯ä¼ è¾“éƒ½ä¼šé€šè¿‡TLSè¿›è¡ŒåŠ å¯†ï¼Œæ‰€ä»¥ä¼ è¾“çš„æ•°æ®éƒ½æ˜¯åŠ å¯†åçš„æ•°æ®ã€‚\n\nhttpsæ¯”httpè¦å ç”¨æ›´å¤šçš„èµ„æºï¼Œhttpä½¿ç”¨TCP ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éœ€è¦äº¤æ¢3ä¸ªåŒ…ï¼Œhttpsé™¤äº† TCP çš„ä¸‰ä¸ªåŒ…ï¼Œè¿˜è¦åŠ ä¸Š sslæ¡æ‰‹éœ€è¦çš„9ä¸ªåŒ…ï¼Œæ‰€ä»¥ä¸€å…±æ˜¯12ä¸ªåŒ…ã€‚\n\n> SSLçš„å…¨ç§°æ˜¯Secure Sockets Layerï¼Œå³å®‰å…¨å¥—æ¥å±‚åè®®ï¼Œæ˜¯ä¸ºç½‘ç»œé€šä¿¡æä¾›å®‰å…¨åŠæ•°æ®å®Œæ•´æ€§çš„ä¸€ç§å®‰å…¨åè®®ã€‚SSLæœ€æ–°çš„ç‰ˆæœ¬æ˜¯3.0ã€‚TLSçš„å…¨ç§°æ˜¯Transport Layer Securityï¼Œå³å®‰å…¨ä¼ è¾“å±‚åè®®ï¼Œæ˜¯å»ºç«‹åœ¨SSL 3.0åè®®è§„èŒƒä¹‹ä¸Šï¼Œæ˜¯SSL 3.0çš„åç»­ç‰ˆæœ¬ã€‚\n\nSSL/TLS = éå¯¹ç§°åŠ å¯†ï¼ˆå¦‚RSAã€ECCï¼‰ + å¯¹ç§°åŠ å¯†ï¼ˆå¦‚AESã€DESï¼‰ + æ•£åˆ—ç®—æ³•ï¼ˆå¦‚MD5ï¼‰\n\n> 1.å¯¹æ•°æ®åŠ å¯† 2.éªŒè¯ç½‘ç«™æœåŠ¡å™¨èº«ä»½\n---\n\n<!-- more -->\n\n## æµç¨‹è§£æ\n\n### å®¢æˆ·ç«¯å‘èµ·HTTPSè¯·æ±‚\n\nç”¨æˆ·åœ¨æµè§ˆå™¨é‡Œè¾“å…¥ä¸€ä¸ªhttpsç½‘å€ï¼Œç„¶åè¿æ¥åˆ°serverçš„443ç«¯å£ã€‚\n\n### æœåŠ¡ç«¯çš„é…ç½®\n\né‡‡ç”¨HTTPSåè®®çš„æœåŠ¡å™¨å¿…é¡»è¦æœ‰ä¸€å¥—æ•°å­—è¯ä¹¦ï¼Œå¯ä»¥è‡ªå·±åˆ¶ä½œï¼Œä¹Ÿå¯ä»¥å‘ç»„ç»‡ç”³è¯·ã€‚åŒºåˆ«å°±æ˜¯è‡ªå·±é¢å‘çš„è¯ä¹¦éœ€è¦å®¢æˆ·ç«¯éªŒè¯é€šè¿‡ï¼Œæ‰å¯ä»¥ç»§ç»­è®¿é—®ï¼Œè€Œä½¿ç”¨å—ä¿¡ä»»çš„å…¬å¸ç”³è¯·çš„è¯ä¹¦åˆ™ä¸ä¼šå¼¹å‡ºæç¤ºé¡µé¢(startsslå°±æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œæœ‰1å¹´çš„å…è´¹æœåŠ¡)ã€‚è¿™å¥—è¯ä¹¦å…¶å®å°±æ˜¯ä¸€å¯¹å…¬é’¥å’Œç§é’¥ã€‚å¦‚æœå¯¹å…¬é’¥å’Œç§é’¥ä¸å¤ªç†è§£ï¼Œå¯ä»¥æƒ³è±¡æˆä¸€æŠŠé’¥åŒ™å’Œä¸€ä¸ªé”å¤´ï¼Œåªæ˜¯å…¨ä¸–ç•Œåªæœ‰ä½ ä¸€ä¸ªäººæœ‰è¿™æŠŠé’¥åŒ™ï¼Œä½ å¯ä»¥æŠŠé”å¤´ç»™åˆ«äººï¼Œåˆ«äººå¯ä»¥ç”¨è¿™ä¸ªé”æŠŠé‡è¦çš„ä¸œè¥¿é”èµ·æ¥ï¼Œç„¶åå‘ç»™ä½ ï¼Œå› ä¸ºåªæœ‰ä½ ä¸€ä¸ªäººæœ‰è¿™æŠŠé’¥åŒ™ï¼Œæ‰€ä»¥åªæœ‰ä½ æ‰èƒ½çœ‹åˆ°è¢«è¿™æŠŠé”é”èµ·æ¥çš„ä¸œè¥¿ã€‚\n\n### ä¼ é€è¯ä¹¦\n\nè¿™ä¸ªè¯ä¹¦å…¶å®å°±æ˜¯å…¬é’¥ï¼Œåªæ˜¯åŒ…å«äº†å¾ˆå¤šä¿¡æ¯ï¼Œå¦‚è¯ä¹¦çš„é¢å‘æœºæ„ï¼Œè¿‡æœŸæ—¶é—´ç­‰ç­‰ã€‚\n\n### ä¼ é€åŠ å¯†ä¿¡æ¯\n\nè¿™éƒ¨åˆ†å·¥ä½œæ˜¯æœ‰å®¢æˆ·ç«¯çš„TLSæ¥å®Œæˆçš„ï¼Œé¦–å…ˆä¼šéªŒè¯å…¬é’¥æ˜¯å¦æœ‰æ•ˆï¼Œæ¯”å¦‚é¢å‘æœºæ„ï¼Œè¿‡æœŸæ—¶é—´ç­‰ç­‰ï¼Œå¦‚æœå‘ç°å¼‚å¸¸ï¼Œåˆ™ä¼šå¼¹å‡ºä¸€ä¸ªè­¦å‘Šæ¡†ï¼Œæç¤ºè¯ä¹¦å­˜åœ¨é—®é¢˜ã€‚å¦‚æœè¯ä¹¦æ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆå°±ç”Ÿæˆä¸€ä¸ªéšæœºå€¼ã€‚ç„¶åç”¨è¯ä¹¦å¯¹è¯¥éšæœºå€¼è¿›è¡ŒåŠ å¯†ã€‚å°±å¥½åƒä¸Šé¢è¯´çš„ï¼ŒæŠŠéšæœºå€¼ç”¨é”å¤´é”èµ·æ¥ï¼Œè¿™æ ·é™¤éæœ‰é’¥åŒ™ï¼Œä¸ç„¶çœ‹ä¸åˆ°è¢«é”ä½çš„å†…å®¹ã€‚\n\n### æœåŠ¡ç«¯è§£å¯†ä¿¡æ¯\n\næœåŠ¡ç«¯ç”¨ç§é’¥è§£å¯†åï¼Œå¾—åˆ°äº†å®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„éšæœºå€¼(ç§é’¥)ï¼Œç„¶åæŠŠå†…å®¹é€šè¿‡è¯¥å€¼è¿›è¡Œå¯¹ç§°åŠ å¯†ã€‚æ‰€è°“å¯¹ç§°åŠ å¯†å°±æ˜¯ï¼Œå°†ä¿¡æ¯å’Œç§é’¥é€šè¿‡æŸç§ç®—æ³•æ··åˆåœ¨ä¸€èµ·ï¼Œè¿™æ ·é™¤éçŸ¥é“ç§é’¥ï¼Œä¸ç„¶æ— æ³•è·å–å†…å®¹ï¼Œè€Œæ­£å¥½å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½çŸ¥é“è¿™ä¸ªç§é’¥ï¼Œæ‰€ä»¥åªè¦åŠ å¯†ç®—æ³•å¤Ÿå½ªæ‚ï¼Œç§é’¥å¤Ÿå¤æ‚ï¼Œæ•°æ®å°±å¤Ÿå®‰å…¨ã€‚\n\n### ä¼ è¾“åŠ å¯†åçš„ä¿¡æ¯\n\nè¿™éƒ¨åˆ†ä¿¡æ¯æ˜¯æœåŠ¡æ®µç”¨ç§é’¥åŠ å¯†åçš„ä¿¡æ¯ï¼Œå¯ä»¥åœ¨å®¢æˆ·ç«¯è¢«è¿˜åŸã€‚\n\n### å®¢æˆ·ç«¯è§£å¯†ä¿¡æ¯\n\nå®¢æˆ·ç«¯ç”¨ä¹‹å‰ç”Ÿæˆçš„ç§é’¥è§£å¯†æœåŠ¡æ®µä¼ è¿‡æ¥çš„ä¿¡æ¯ï¼Œäºæ˜¯è·å–äº†è§£å¯†åçš„å†…å®¹ã€‚æ•´ä¸ªè¿‡ç¨‹ç¬¬ä¸‰æ–¹å³ä½¿ç›‘å¬åˆ°äº†æ•°æ®ï¼Œä¹ŸæŸæ‰‹æ— ç­–ã€‚\n\n- GET / HEAD / OPTIONSæ–¹æ³•           \nåªä»æœåŠ¡ç«¯è·å–èµ„æº å¹¶ä¸å¯¹æœåŠ¡å™¨è¿›è¡Œä¿®æ”¹ å› æ­¤ç›¸å¯¹å®‰å…¨ã€‚\nå¯¹äºå®¢æˆ·ç«¯æ¥è¯´æ˜¯ä¸å®‰å…¨çš„ è¯·æ±‚å‚æ•°ä¼šæ˜¾ç¤ºåœ¨URLä¸­ã€‚ \n\n- TRACEæ–¹æ³•ï¼ˆä¸¤ç«¯å®‰å…¨ï¼‰\nç”¨äºè¯Šæ–­è¯Šæ–­æœåŠ¡å™¨ ä»…è®°å½•è·¯å¾„ä¿¡æ¯ æ˜¯å®‰å…¨çš„ã€‚\n\n- POSTæ–¹æ³•\nä¼šå½±å“æœåŠ¡å™¨ç«¯çš„èµ„æºã€‚\n\n## è¯´ä¸€ä¸‹httpå’Œhttps\n> httpsçš„sslåŠ å¯†æ˜¯åœ¨ä¼ è¾“å±‚å®ç°çš„ã€‚\n\n1. http è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯è¯·æ±‚åº”ç­”çš„æ ‡å‡†ã€‚ç”¨äºä»wwwæœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ è¾“åè®®ã€‚å®ƒå¯ä»¥ä½¿æµè§ˆå™¨æ›´åŠ é«˜æ•ˆï¼Œä½¿ç½‘ç»œä¼ è¾“å‡å°‘ã€‚\n\n2. ä»¥å®‰å…¨ä¸ºç›®æ ‡çš„httpé€šé“ï¼Œç®€å•è®²å°±æ˜¯httpçš„å®‰å…¨ç‰ˆã€‚å³åœ¨httpä¸‹åŠ å…¥sslå±‚ï¼Œhttpsçš„å®‰å…¨åŸºç¡€å°±æ˜¯sslï¼Œå› æ­¤åŠ å¯†çš„è¯¦ç»†å†…å®¹å°±éœ€è¦sslã€‚\n\n## ä¸ºä»€ä¹ˆè¦ç”¨HTTPSï¼Ÿ\nå› ä¸ºHTTPåœ¨â€œè£¸å¥”â€ï¼ˆæ˜æ–‡ä¼ è¾“ï¼Œä¸å®‰å…¨ï¼‰ã€‚\n- å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†ï¼Œå¹¶å»ºç«‹ä¸€ä¸ªä¿¡æ¯å®‰å…¨é€šé“ï¼Œæ¥ä¿è¯ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®å®‰å…¨\n- å¯¹ç½‘ç«™æœåŠ¡å™¨è¿›è¡ŒçœŸå®èº«ä»½è®¤è¯\n\n### httpå’Œhttpsçš„åŒºåˆ«ï¼Ÿ\n1. httpæ˜¯è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼Œä¿¡æ¯æ˜¯æ˜æ–‡ä¼ è¾“ï¼Œhttpsåˆ™æ˜¯å…·æœ‰å®‰å…¨æ€§çš„sslåŠ å¯†ä¼ è¾“åè®®ï¼Œéœ€è¦CAè¯ä¹¦ã€‚\n\n2. é“¾æ¥æ–¹å¼ä¸åŒï¼Œå¯¹åº”çš„é»˜è®¤ç«¯å£ä¹Ÿä¸åŒï¼Œhttp 80ï¼Œhttp 443ç«¯å£ã€‚\n\n3. httpæ— çŠ¶æ€ï¼Œhttpsåè®®æ˜¯ç”±ssl+httpåè®®æ„å»ºçš„å¯è¿›è¡ŒåŠ å¯†ä¼ è¾“ã€èº«ä»½è®¤è¯çš„ç½‘ç»œåè®®ï¼Œæ¯”httpåè®®å®‰å…¨ã€‚\n\n### httpsåè®®çš„å·¥ä½œåŸç†(åŒå‘åŠ å¯†å»ºç«‹)\nå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æœ‰å…¬é’¥å’Œç§é’¥ã€‚\n\n1. å®¢æˆ·ç«¯ä½¿ç”¨https urlè®¿é—®æœåŠ¡å™¨ï¼Œåˆ™è¦æ±‚webæœåŠ¡å™¨å»ºç«‹sslé“¾æ¥\n\n2. æœåŠ¡ç«¯å‘é€å…¬é’¥\n\n3. å®¢æˆ·ç«¯å‘é€'éªŒè¯ä¸²+æœåŠ¡ç«¯å…¬é’¥' && å®¢æˆ·ç«¯å…¬é’¥\n\n4. æœåŠ¡ç«¯ä½¿ç”¨ç§é’¥å–å¾—éªŒè¯ä¸²ä¸å®¢æˆ·ç«¯å…¬é’¥ä¸€èµ·å‘é€ç»™å®¢æˆ·ç«¯\n\n5. å®¢æˆ·ç«¯ä½¿ç”¨å®¢æˆ·ç«¯ç§é’¥æ¥è·å–éªŒè¯ä¸²æ˜¯å¦åŒ¹é…\n\n### åè®®è§£æ\nå¤šäº†ä¸€ä¸ª upgrade-insecure-requests çš„å­—æ®µã€‚è¯¥å­—æ®µè®©é¡µé¢æ‰“å¼€åçš„è¯·æ±‚è‡ªåŠ¨å˜ä¸º httpsã€‚\n\n### ç¼ºç‚¹\n1. httpsæ¡æ‰‹é˜¶æ®µæ¯”è¾ƒè´¹æ—¶ï¼Œä¼šä½¿é¡µé¢åŠ è½½æ—¶é—´å»¶é•¿ï¼Œè€—ç”µå¢åŠ \n\n2. httpsç¼“å­˜ä¸å¦‚httpé«˜æ•ˆï¼Œä¼šå¢åŠ æ•°æ®çš„å¼€é”€\n\n3. sslè¯ä¹¦ä¹Ÿéœ€è¦èŠ±é’±ï¼ŒåŠŸèƒ½è¶Šå¼ºå¤§çš„è¯ä¹¦è´¹ç”¨è¶Šé«˜\n\n4. sslè¯ä¹¦éœ€è¦ç»‘å®šIPï¼Œä¸èƒ½å†åŒä¸€ä¸ªipä¸Šç»‘å®šå¤šä¸ªåŸŸåï¼ŒIpv4èµ„æºæ”¯æŒä¸äº†è¿™æ ·çš„æ¶ˆè€—\n","tags":["http"],"categories":["çŸ¥è¯†"]},{"title":"ç½‘é¡µåŸ‹ç‚¹ç›¸å…³çŸ¥è¯†","url":"%2F%E5%9F%8B%E7%82%B9%E6%8A%80%E6%9C%AF.html","content":"\nåŸ‹ç‚¹çš„éœ€æ±‚ï¼šä¸€ä¸ªç½‘ç«™ä¸Šçº¿,å¼€å‘è€…é™¤äº†ä¿è¯ç½‘ç«™åŠŸèƒ½æ­£å¸¸,ä½“éªŒä¼˜å¥½ä¹‹å¤–,è¿˜æœ‰ä¸€é¡¹é‡è¦çš„å·¥ä½œæ˜¯æ•°æ®æ”¶é›†,é€šè¿‡æ”¶é›†ç”¨æˆ·çš„è¡Œä¸ºæ•°æ®å¯ä»¥å¸®åŠ©äº†è§£ç½‘ç«™çš„åŠŸèƒ½æ˜¯å¦æ»¡è¶³ç”¨æˆ·çš„éœ€æ±‚,å¯¼æµæ–¹å¼æ˜¯å¦æœ‰æ•ˆ,æ–°åŠŸèƒ½ä¸Šçº¿åæ˜¯å¦æ•ˆæœæ˜¯å¦è¾¾åˆ°è®¾è®¡åˆè¡·,æ ¹æ®æ•°æ®æŒ‡å¼•æœ‰æ•ˆä¼˜åŒ–äº§å“ä½“éªŒä»¥åŠå‘ç°æ–°çš„äº§å“æ–¹å‘æ˜¯äº§å“ç»ç†çš„å¿…å¤‡æŠ€èƒ½,è€Œå¦‚ä½•é‡‡é›†å‡†ç¡®å¹¶ä¸”è¶³å¤Ÿçš„ç½‘ç«™æ•°æ®åˆ™åº”è¯¥æ˜¯å¼€å‘è€…çš„è´£ä»».åœ¨å¤§æ•°æ®å¤„ç†èƒ½åŠ›è¶Šæ¥è¶Šå¼ºä¸‹,ä»¥åŠæœºå™¨å­¦ä¹ ç­‰ä¾èµ–æ•°æ®å“ºè‚²çš„å·¥å…·è¿›åŒ–ä¸‹,é‡‡é›†è¶³å¤Ÿå¤šçš„æ•°æ®å¾€å¾€æ˜¯ç½‘ç«™å‘ç€è‰¯æ€§æ–¹å‘è¿›åŒ–çš„å¿…å¤‡æ¡ä»¶\n\n---\n<!-- more -->\n\n## åŸ‹ç‚¹æ–¹æ¡ˆ\n- ajax\n- img(ä¼˜åŠ¿ï¼šä¸å ç”¨ajaxè¯·æ±‚ï¼Œå¤©ç„¶æ”¯æŒè·¨åŸŸï¼Œæ‰§è¡Œæ— é˜»å¡ã€‚)\n- script\n\n## å¸¸è§å·¥å…·\n\nç½‘ç«™çš„æ•°æ®é‡‡é›†æœ‰å¾ˆå¤šç°æˆçš„å·¥å…·,å¦‚google Analytics, ç™¾åº¦ç»Ÿè®¡, å‹ç›Ÿ+ç­‰,å¾€å¾€é€šè¿‡åœ¨é¡µé¢ä¸Šæ¥å…¥js SDKä»£ç ã€‚\n\nè€Œåœ¨å®é™…é‡‡é›†è¿‡ç¨‹ä¸­,æ•°æ®æ˜¯å¦‚ä½•ä¼ é€’è¿‡å»çš„å‘¢,,æˆ‘ä»¬éšä¾¿æ‰“å¼€ä¸€ä¸ªåŸ‹æœ‰ç™¾åº¦ç»Ÿè®¡çš„ç½‘ç«™, æ‰“å¼€chromeçš„å¼€å‘è€…å·¥å…·,å‹¾é€‰Preserve log,\nå¯ä»¥å‘ç°åœ¨é¡µé¢ç‚¹å‡»ä¸€ä¸ªé“¾æ¥æˆ–è€…åšä¸€äº›å…¶ä»–æ“ä½œ,åœ¨Networking tabä¸‹å¯ä»¥çœ‹åˆ°hm.gifçš„ç½‘ç»œè¯·æ±‚, è¿™é‡Œç”±äºç»Ÿè®¡çš„æ•°æ®å‘é€æ¶‰åŠåˆ°ç¬¬ä¸‰æ–¹ç½‘å€,æ¶‰åŠè·¨åŸŸé—®é¢˜,è€Œå›¾ç‰‡è¯·æ±‚å¤©ç„¶æ˜¯è·¨åŸŸçš„,æ‰€ä»¥ä¸šç•Œçš„é€šç”¨åšæ³•æ˜¯æ„é€ ä¸€ä¸ªç©ºçš„gifç”¨äºå‘ç¬¬ä¸‰æ–¹ç½‘ç«™, è€ŒçœŸæ­£éœ€è¦ç»Ÿè®¡çš„å‚æ•°å¾€å¾€æ˜¯é€šè¿‡urlè¿›è¡Œä¼ é€’ã€‚\n\n## æ•°æ®é‡‡é›†(ç”Ÿæˆå›¾ç‰‡Urlå‚æ•°æŒ‚åœ¨?ä¸Š)\n\n- åŸºæœ¬çš„å‘é€å‡½æ•°ï¼Œåˆ›å»ºImgå‘é€ç»Ÿè®¡è¯·æ±‚å¯¼æ•°æ®é‡‡é›†åå°ã€‚\n```javascript\nfunction sendUrl(url) {\n    let img = new Image();  // åˆ›å»ºä¸€ä¸ªimgå¯¹è±¡\n    let key = 'project_log_' // ä¸ºæœ¬æ¬¡æ•°æ®è¯·æ±‚åˆ›å»ºä¸€ä¸ªå”¯ä¸€id\n        + Math.floor(Math.random() * 2147483648).toString(36); \n \n    window[key] = img;   // ç”¨ä¸€ä¸ªæ•°ç»„ç»´æŠ¤imgå¯¹è±¡\n \n    img.onload = img.onerror = img.onabort = function () {\n        img.onload = img.onerror = img.onabort = null;  // æ¸…é™¤imgå…ƒç´ \n        window[key] = null;\n        img = null;  \n    };\n    img.src = url;  // imgå¯¹è±¡èµ‹å€¼urlåè‡ªåŠ¨å‘é€è¯·æ±‚,æ— éœ€æ’å…¥åˆ°é¡µé¢å…ƒç´ ä¸­å»\n}\n```\n\n- æ•°æ®æ ¼å¼çº¦å®š\n```javascript\næ•°æ®æ ¼å¼è§„åˆ™,å¦‚:1.gif?q=xxx&fr=xxx&refer=xxx&p=xxxx&xxxxx\nqè¡¨ç¤ºé¡µé¢æœç´¢è¯; frè¡¨ç¤ºé¡µé¢çš„ä¸Šæ¸¸é¡µé¢æ—¶ä»€ä¹ˆ, referæ˜¯æŒ‡ä»æ¥æºé¡µé¢, pè¡¨ç¤ºäº‹ä»¶ç±»å‹ç­‰;\n```\n\n## è®¿é—®æ—¶é•¿çš„è®¡ç®—\n```javascript\nvar st = new Date().getTime();  // åœ¨é¡µé¢åŠ è½½è¿è¡Œjsæ—¶è®°å½•å½“å‰æ—¶é—´\n\n$(window).on('beforeunload', function () {\n    var et = new Date().getTime();\n    var stayTime = et - st;\n    \n}); // åœ¨é¡µé¢è¦unloadè§¦å‘'beforeunload'äº‹ä»¶æ—¶è¿›è¡Œæ—¶é—´å·®è®¡ç®—å¾—åˆ°è®¿é—®æ—¶é•¿\n\n// éœ€è¦ç”¨æˆ·åœ¨é¡µé¢æœ‰è¿‡ä»»ä½•æ“ä½œæ‰ä¼šå‡ºç°æç¤ºã€‚æ¯æ¬¡éƒ½æ˜¯æ‰“å¼€æ¥ç€å°±å…³é—­è¿›è¡Œæµ‹è¯•ï¼Œæ‰€ä»¥ä»¥ä¸ºæ²¡ç”¨\nwindow.onbeforeunload = function(){\n    return \"onbeforeunload is work\";\n}\n```\n\n## å…³é”®æŒ‡æ ‡\n### PV pageview\n\nä¼ ç»Ÿæ„ä¹‰ä¸Šæ¯æ¬¡é¡µé¢åˆ·æ–°ä»£è¡¨ç€ä¸€æ¬¡æ–°çš„pv, ä¹Ÿå°±æ˜¯æ¯æ¬¡ç»Ÿè®¡jsæ‰§è¡Œæ—¶éƒ½+1, è€Œç°åœ¨é¡µé¢å¾ˆå¤šéƒ½ç”¨åˆ°äº†ajaxæŠ€æœ¯æ¥è¿›è¡Œæ— åˆ·æ–°è·å–å±•ç°é¡µé¢æ¥æ›¿ä»£ç¿»é¡µ,å¦‚ç€‘å¸ƒæµé¡µé¢é€šè¿‡ä¸‹æ¥åŠ è½½æ–°çš„é¡µé¢,è¿™æ—¶å€™é¡µé¢ä¸é‡æ–°åˆ·æ–°,å› æ­¤å¯ä»¥åœ¨ajaxè¯·æ±‚æ¥å£å¤„è¿›è¡ŒåŸ‹ç‚¹è¿›è¡Œpvç´¯åŠ ;\n\n### å•é¡¹PV\n\né¡µé¢ä¸Šéƒ¨åˆ†å…ƒç´ æœ‰å•ç‹¬ç»Ÿè®¡pvçš„éœ€è¦,æœ‰äº›é¡µé¢å…ƒç´ ä¸æ˜¯é¡µé¢å±•ç°éƒ½å±•ç°,æˆ–è€…éœ€è¦ç»Ÿè®¡ç±»ä¼¼äºæŸä¸€å¹¿å‘Šçš„å±•ç°æ¬¡æ•°,è¿™ç§éœ€è¦éœ€è¦åœ¨urlé‡Œå•ç‹¬å®šä¹‰å‚æ•°æ¥æ ‡è¯†;\n\n### èšç„¦æ—¶é—´\n\nä¸è®¿é—®æ—¶é•¿ä¸åŒ,ç”±äºé¡µé¢å¯ä»¥é€šè¿‡tabåˆ‡æ¢å¯¼è‡´è™½ç„¶é¡µé¢æ²¡æœ‰unloadä½†å®é™…å¤„äºå¤±å»ç„¦ç‚¹çŠ¶æ€, å› æ­¤éœ€è¦è®¢é˜…focusInä¸focusOutä¸¤ä¸ªäº‹ä»¶,åœ¨focusInæ—¶å¼€å§‹è®¡æ—¶, åœ¨focusOutæ—¶åœæ­¢è®¡æ—¶,åœ¨é¡µé¢unloadæ—¶å°†focusæ—¶é—´è¿›è¡Œç´¯åŠ å¾—åˆ°èšç„¦æ—¶é—´;\n\n","tags":["çŸ¥è¯†"],"categories":["çŸ¥è¯†"]},{"title":"export/export default/importçš„åŒºåˆ«ä»¥åŠç”¨æ³•","url":"%2Fes6export.html","content":"\nES6æ¨¡å—ä¸»è¦æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼šexportå’Œimport\n\nexportç”¨äºå¯¹å¤–è¾“å‡ºæœ¬æ¨¡å—ï¼ˆä¸€ä¸ªæ–‡ä»¶å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ¨¡å—ï¼‰å˜é‡çš„æ¥å£\n\nimportç”¨äºåœ¨ä¸€ä¸ªæ¨¡å—ä¸­åŠ è½½å¦ä¸€ä¸ªå«æœ‰exportæ¥å£çš„æ¨¡å—ã€‚\n\nä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨exportå‘½ä»¤å®šä¹‰äº†æ¨¡å—çš„å¯¹å¤–æ¥å£ä»¥åï¼Œå…¶ä»–JSæ–‡ä»¶å°±å¯ä»¥é€šè¿‡importå‘½ä»¤åŠ è½½è¿™ä¸ªæ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰ã€‚\n\n---\n<!-- more -->\n\n## exportå’Œimportï¼ˆä¸€ä¸ªå¯¼å‡ºä¸€ä¸ªå¯¼å…¥ï¼‰\n```javascript\n// a æ–‡ä»¶ \nexport var name=\"cosyer\" // å¯¼å‡ºå•ä¸ªå˜é‡\n\n// å¼•ç”¨aæ–‡ä»¶ \nimport {name} from './a'\nexport default {\n    data(){\n\n    },\n    howl:function (){\n    console.log(name) // cosyer\n    }\n}\n\n// å¯¼å‡ºå¤šä¸ªå˜é‡ \nlet name1='å¼ ä¸‰';\nlet name2='æå››';\nexport {name1,name2}\n\n// å¼•ç”¨å¤šä¸ªå˜é‡\nimport {name1,name2} from './a'\n\n// å¯¼å‡ºå‡½æ•°\nfunction mini(num){\n    console.log(num)\n}\n\nexport {mini}\n\n// å¼•ç”¨å‡½æ•°\nimport {mini} from './a'\nexport default{\n    howl:function(){\n        mini(1) // 1\n    }\n}\n```\n\n## exportå’Œexport default\n\n1. exportä¸export defaultå‡å¯ç”¨äºå¯¼å‡ºå¸¸é‡ã€å‡½æ•°ã€æ–‡ä»¶ã€æ¨¡å—ç­‰ã€‚\n\n2. ä½ å¯ä»¥åœ¨å…¶å®ƒæ–‡ä»¶æˆ–æ¨¡å—ä¸­é€šè¿‡import + (å¸¸é‡ | å‡½æ•° | æ–‡ä»¶ | æ¨¡å—)åçš„æ–¹å¼ï¼Œå°†å…¶å¯¼å…¥ï¼Œä»¥ä¾¿èƒ½å¤Ÿå¯¹å…¶è¿›è¡Œä½¿ç”¨ã€‚\n\n3. åœ¨ä¸€ä¸ªæ–‡ä»¶æˆ–æ¨¡å—ä¸­ï¼Œexportã€importå¯ä»¥æœ‰å¤šä¸ªï¼Œexport defaultä»…æœ‰ä¸€ä¸ªã€‚\n\n```javascript\nexport name1;\nexport name2;\n```\n\n4. é€šè¿‡exportæ–¹å¼å¯¼å‡ºï¼Œåœ¨å¯¼å…¥æ—¶è¦åŠ {}ï¼Œexport defaultåˆ™ä¸éœ€è¦ã€‚\n\nå…¶å®å¾ˆå¤šæ—¶å€™exportä¸export defaultå¯ä»¥å®ç°åŒæ ·çš„ç›®çš„ï¼Œä½†ä½¿ç”¨export defaultå‘½ä»¤ï¼Œä¸ºæ¨¡å—æŒ‡å®šé»˜è®¤è¾“å‡ºï¼Œè¿™æ ·å°±ä¸éœ€è¦çŸ¥é“åŠ è½½æ¨¡å—çš„å˜é‡åã€‚\n\n```javascript\nexport default name\nimport name from './a'\n```\n\n- å½“ç”¨export default peopleå¯¼å‡ºæ—¶ï¼Œå°±ç”¨ import people å¯¼å…¥ï¼ˆä¸å¸¦å¤§æ‹¬å·ï¼‰ã€‚\n- ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œæœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªexport defaultã€‚ä½†å¯ä»¥æœ‰å¤šä¸ªexportã€‚\n- å½“ç”¨export name æ—¶ï¼Œå°±ç”¨ import{name} å¯¼å…¥ï¼ˆè®°å¾—å¸¦ä¸Šå¤§æ‹¬å·ï¼‰ã€‚\n- å½“ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œæ—¢æœ‰ä¸€ä¸ªexport default people, åˆæœ‰å¤šä¸ªexport name æˆ–è€… - export ageæ—¶ï¼Œå¯¼å…¥å°±ç”¨ import people,{name,age}ã€‚\n- å½“ä¸€ä¸ªæ–‡ä»¶é‡Œå‡ºç°nå¤šä¸ª export å¯¼å‡ºå¾ˆå¤šæ¨¡å—ï¼Œå¯¼å…¥æ—¶é™¤äº†ä¸€ä¸ªä¸€ä¸ªå¯¼å…¥ï¼Œä¹Ÿå¯ä»¥ç”¨ import * as exampleã€‚","tags":["es6"],"categories":["JS"]},{"title":"mobx -- èµ°è¿›è§‚å¯Ÿè€…æ¨¡å¼","url":"%2Fmobx.html","content":"\n#### Reactæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œç”±å¼€å§‹çš„åˆå§‹çŠ¶æ€ï¼Œé€šè¿‡ä¸ç”¨æˆ·çš„äº’åŠ¨ï¼Œå¯¼è‡´çŠ¶æ€å˜åŒ–ï¼Œä»è€Œé‡æ–°æ¸²æŸ“UIã€‚\n#### React æä¾›äº†ä¼˜åŒ–UIæ¸²æŸ“çš„æœºåˆ¶ï¼Œ è¿™ç§æœºåˆ¶å°±æ˜¯é€šè¿‡ä½¿ç”¨è™šæ‹ŸDOMæ¥å‡å°‘æ˜‚è´µçš„DOMå˜åŒ–çš„æ•°é‡ã€‚\n#### MobX æä¾›äº†ä¼˜åŒ–åº”ç”¨çŠ¶æ€ä¸ React ç»„ä»¶åŒæ­¥çš„æœºåˆ¶ï¼Œè¿™ç§æœºåˆ¶å°±æ˜¯ä½¿ç”¨å“åº”å¼è™šæ‹Ÿä¾èµ–çŠ¶æ€å›¾è¡¨ï¼Œå®ƒåªæœ‰åœ¨çœŸæ­£éœ€è¦çš„æ—¶å€™æ‰æ›´æ–°å¹¶ä¸”æ°¸è¿œä¿æŒæ˜¯æœ€æ–°çš„ã€‚\n#### reduxç¼“å­˜æœºåˆ¶ æ—¶é—´å›æº¯é€‚ç”¨äºæ’¤é”€æ“ä½œ æ“ä½œçŠ¶æ€\n\n1. å®‰è£…\n~~~\nnpm install --save mobx mobx-react\n~~~\n2. æ ¸å¿ƒæ¦‚å¿µ\n- state(çŠ¶æ€) \nçŠ¶æ€æ˜¯é©±åŠ¨åº”ç”¨çš„æ•°æ®ã€‚\n- observable(value) && @observable \nObservable å€¼å¯ä»¥æ˜¯JSåŸºæœ¬æ•°æ®ç±»å‹ã€å¼•ç”¨ç±»å‹ã€æ™®é€šå¯¹è±¡ã€ç±»å®ä¾‹ã€æ•°ç»„å’Œæ˜ å°„ã€‚å…¶ä¿®é¥°çš„stateä¼šæš´éœ²å‡ºæ¥ä¾›è§‚å¯Ÿè€…ä½¿ç”¨ã€‚\n- observer(è§‚å¯Ÿè€…)\nè¢«observerä¿®é¥°çš„ç»„ä»¶ï¼Œå°†ä¼šæ ¹æ®ç»„ä»¶å†…ä½¿ç”¨åˆ°çš„è¢«observableä¿®é¥°çš„stateçš„å˜åŒ–è€Œè‡ªåŠ¨é‡æ–°æ¸²æŸ“ã€‚\n- action(åŠ¨ä½œ)\nåªæœ‰åœ¨ actions ä¸­ï¼Œæ‰å¯ä»¥ä¿®æ”¹ Mobx ä¸­ state çš„å€¼ã€‚\naction-->state-->view\n- computed \nè®¡ç®—å€¼(computed values)æ˜¯å¯ä»¥æ ¹æ®ç°æœ‰çš„çŠ¶æ€æˆ–å…¶å®ƒè®¡ç®—å€¼è¡ç”Ÿå‡ºçš„å€¼ã€‚(å¯ä»¥çœ‹æˆå…¬å¼)\ngetterï¼šè·å¾—è®¡ç®—å¾—åˆ°çš„æ–°stateå¹¶è¿”å›ã€‚\nsetterï¼šä¸èƒ½ç”¨æ¥ç›´æ¥æ”¹å˜è®¡ç®—å±æ€§çš„å€¼ï¼Œä½†æ˜¯å®ƒä»¬å¯ä»¥ç”¨æ¥ä½œ\"é€†å‘\"è¡ç”Ÿã€‚\n- autorun\nè¿™é€šå¸¸æ˜¯å½“ä½ éœ€è¦ä»ååº”å¼ä»£ç æ¡¥æ¥åˆ°å‘½ä»¤å¼ä»£ç çš„æƒ…å†µï¼Œä¾‹å¦‚æ‰“å°æ—¥å¿—ã€æŒä¹…åŒ–æˆ–è€…æ›´æ–°UIçš„ä»£ç ã€‚\n- å¦‚æœä½ æœ‰ä¸€ä¸ªå‡½æ•°åº”è¯¥è‡ªåŠ¨è¿è¡Œï¼Œä½†ä¸ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å€¼ï¼Œè¯·ä½¿ç”¨autorunã€‚ å…¶ä½™æƒ…å†µéƒ½åº”è¯¥ä½¿ç”¨ computedã€‚\n- reactions\nReactions å’Œè®¡ç®—å€¼å¾ˆåƒï¼Œä½†å®ƒä¸æ˜¯äº§ç”Ÿä¸€ä¸ªæ–°çš„å€¼ï¼Œè€Œæ˜¯ä¼šäº§ç”Ÿä¸€äº›å‰¯ä½œç”¨ï¼Œæ¯”å¦‚æ‰“å°åˆ°æ§åˆ¶å°ã€ç½‘ç»œè¯·æ±‚ã€é€’å¢åœ°æ›´æ–° React ç»„ä»¶æ ‘ä»¥ä¿®è¡¥DOMã€ç­‰ç­‰ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œreactions åœ¨ å“åº”å¼ç¼–ç¨‹å’Œå‘½ä»¤å¼ç¼–ç¨‹ä¹‹é—´å»ºç«‹æ²Ÿé€šçš„æ¡¥æ¢ã€‚\n\n~~~javascript\n// component\nimport {inject, observer} from \"mobx-react\";\n\n// è§‚å¯Ÿè€… æ³¨å…¥storeæ·»åŠ åˆ°å±æ€§ä¸Š\n@inject(\"store\") @observer\n\nthis.props.store.xxStore.num\nthis.props.store.xxStore.plus() // num+=1\nthis.props.store.xxStore.total\n\n// homeStore\n\n@observable num;\nconstrutor(){\n    this.name=''\n    this.items=[]\n}\n\n@computed get total() {\n    return this.items.length;\n }\n  \n@action plus=()=>{\n    this.num+=1\n}\n\nautorun((e)=>{})\n\nconst homeStore =new HomeStore()\nexport {homeStore}\n~~~\n\n~~~javascript\nswitch\nrouter render={(props)=><Item {...props}/>}\nrouter component={Index}\nreact-route-dom\nwithRouter\nLinking\n// Provider ä¼ é€’stores\nPrivider store={stores}\ncreate-react-app react-scripts\n~~~\nåŸºæœ¬å°±è¿™ä¸¤ç§æ–¹æ³•:immutable/observable\nmobx: oop\nredux: å‡½æ•°å¼\n\nssr:æµæ¨¡å¼ã€å­—ç¬¦ä¸²\n\n[demoåœ°å€](https://github.com/cosyer/mobx-demo)\n\n","tags":["çŠ¶æ€ç®¡ç†"],"categories":["JS"]},{"title":"ä¸»æµæµè§ˆå™¨çš„å†…æ ¸å’Œæ¸²æŸ“æ–¹å¼è§£è¯»","url":"%2F%E4%B8%BB%E6%B5%81%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%86%85%E6%A0%B8%E5%92%8C%E6%B8%B2%E6%9F%93%E6%96%B9%E5%BC%8F%E8%A7%A3%E8%AF%BB.html","content":"\n## æµè§ˆå™¨å†…æ ¸\n- Trident:IEï¼Œ360ï¼Œæœç‹—\n\n- Geckoï¼šfirefox\n\n- webkit:safariï¼Œæ—§ç‰ˆchrome\n\n- prestoï¼šæ—§ç‰ˆopera\n\n- blink(webkitçš„ä¸€ä¸ªåˆ†æ”¯)ï¼šæ–°ç‰ˆchromeï¼Œæ–°ç‰ˆopera\n\n## æµè§ˆå™¨çš„æ¸²æŸ“æ–¹å¼\n\n1. æ„å»ºDOMæ ‘\næµè§ˆå™¨è¯·æ±‚åˆ°htmlä»£ç åï¼Œåœ¨ç”ŸæˆDOMçš„æœ€å¼€å§‹é˜¶æ®µï¼Œå¹¶è¡Œå‘èµ·cssã€å›¾ç‰‡ã€jsçš„è¯·æ±‚ã€‚ï¼ˆè§£ç ->ä»¤ç‰ŒåŒ–->è¯æ³•åˆ†æ->domæ ‘åˆ›å»ºï¼‰\n\n2. æ„å»ºCSSOM\ncssæ–‡ä»¶åŠ è½½å®Œæˆï¼Œå¼€å§‹æ„å»ºCSSOMï¼ˆCSSOMåªè¾“å‡ºåŒ…å«æœ‰æ ·å¼çš„èŠ‚ç‚¹ï¼‰\n\n3. ç”Ÿæˆæ¸²æŸ“æ ‘ï¼ˆRender Treeï¼‰\nCSSOMæ„å»ºç»“æŸåï¼Œå’ŒDOMä¸€èµ·ç”ŸæˆRender Tree\n\n4. è®¡ç®—æ¸²æŸ“æ ‘å¸ƒå±€ï¼ˆLayoutï¼‰\næœ‰äº†Render Treeï¼Œæµè§ˆå™¨å·²ç»èƒ½çŸ¥é“ç½‘é¡µä¸­æœ‰å“ªäº›èŠ‚ç‚¹ï¼Œå„ä¸ªèŠ‚ç‚¹çš„CSSå®šä¹‰ä»¥åŠä»–ä»¬çš„ä»å±å…³ç³»ã€‚ä¾ç…§ç›’å­æ¨¡å‹ï¼Œè®¡ç®—å‡ºæ¯ä¸ªèŠ‚ç‚¹åœ¨å±å¹•ä¸­çš„ä½ç½®åŠå°ºå¯¸ã€‚\n\n5. å°†å¸ƒå±€Paintç»˜åˆ¶åˆ°å±å¹•ä¸Š\nå¸ƒå±€ä¹‹åï¼Œæµè§ˆå™¨çŸ¥é“å“ªäº›èŠ‚ç‚¹è¦æ˜¾ç¤ºï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„CSSå±æ€§æ˜¯ä»€ä¹ˆï¼Œæ¯ä¸ªèŠ‚ç‚¹åœ¨å±å¹•ä¸­çš„ä½ç½®ã€‚æ‰€ä»¥æ¥ä¸‹æ¥æŒ‰ç…§ç®—å‡ºæ¥çš„è§„åˆ™ï¼Œé€šè¿‡æ˜¾å¡ï¼ŒæŠŠå†…å®¹ç”»åœ¨å±å¹•ä¸Šã€‚\n\n![render](http://cdn.mydearest.cn/blog/images/render.png)\n\nCSSé˜»å¡æ¸²æŸ“ï¼šç”±äºCSSOMè´Ÿè´£å­˜å‚¨æ¸²æŸ“ä¿¡æ¯ï¼Œæµè§ˆå™¨å°±å¿…é¡»ä¿è¯åœ¨åˆæˆæ¸²æŸ“æ ‘ä¹‹å‰ï¼ŒCSSOMæ˜¯å®Œå¤‡çš„ï¼Œè¿™ç§å®Œå¤‡æ˜¯æŒ‡æ‰€æœ‰çš„CSSï¼ˆå†…è”ã€å†…éƒ¨å’Œå¤–éƒ¨ï¼‰éƒ½å·²ç»ä¸‹è½½å®Œï¼Œå¹¶è§£æå®Œï¼Œåªæœ‰CSSOMå’ŒDOMçš„è§£æå®Œå…¨ç»“æŸï¼Œæµè§ˆå™¨æ‰ä¼šè¿›å…¥ä¸‹ä¸€æ­¥çš„æ¸²æŸ“ã€‚CSSé˜»å¡æ¸²æŸ“æ„å‘³ç€ï¼Œåœ¨CSSOMå®Œå¤‡å‰ï¼Œé¡µé¢å°†ä¸€ç›´å¤„ç†ç™½å±çŠ¶æ€ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ ·å¼æ”¾åœ¨headä¸­ï¼Œä»…ä»…æ˜¯ä¸ºäº†æ›´å¿«çš„è§£æCSSï¼Œä¿è¯æ›´å¿«çš„é¦–æ¬¡æ¸²æŸ“ã€‚\nJSé˜»å¡é¡µé¢ï¼šJSå¯ä»¥æ“ä½œDOMæ¥ä¿®æ”¹DOMç»“æ„ï¼Œå¯ä»¥æ“ä½œCSSOMæ¥ä¿®æ”¹èŠ‚ç‚¹æ ·å¼ï¼Œè¿™å°±å¯¼è‡´äº†æµè§ˆå™¨åœ¨è§£æHTMLæ—¶ï¼Œä¸€æ—¦ç¢°åˆ°scriptï¼Œå°±ä¼šç«‹å³åœæ­¢HTMLçš„è§£æï¼Œä¹Ÿé˜»å¡äº†å…¶åçš„CSSè§£æï¼Œæ•´ä¸ªè§£æè¿›ç¨‹å¿…é¡»ç­‰å¾…JSçš„æ‰§è¡Œå®Œæˆæ‰èƒ½å¤Ÿç»§ç»­ã€‚ä»æ€§èƒ½è§’åº¦ä¸Šè®²ï¼Œå°†scriptæ”¾åœ¨é¡µé¢åº•éƒ¨ï¼Œä¹Ÿå°±åˆæƒ…åˆç†äº†ã€‚\n\n## é‡ç»˜ï¼ˆRepaintï¼‰ï¼š\n\nå½“å„ç§ç›’å­çš„ä½ç½®ã€å¤§å°ä»¥åŠå…¶ä»–å±æ€§ï¼Œä¾‹å¦‚é¢œè‰²ã€å­—ä½“å¤§å°ç­‰éƒ½ç¡®å®šä¸‹æ¥åï¼Œæµè§ˆå™¨ä¾¿æŠŠè¿™äº›å…ƒç´ éƒ½æŒ‰ç…§å„è‡ªçš„ç‰¹æ€§ç»˜åˆ¶äº†ä¸€éï¼Œäºæ˜¯é¡µé¢çš„å†…å®¹å‡ºç°äº†ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸ºrepaintã€‚\n\n- é‡ç»˜(repaint): å½“å…ƒç´ æ ·å¼çš„æ”¹å˜ä¸å½±å“å¸ƒå±€æ—¶ï¼Œæµè§ˆå™¨å°†ä½¿ç”¨é‡ç»˜å¯¹å…ƒç´ è¿›è¡Œæ›´æ–°ï¼Œæ­¤æ—¶ç”±äºåªéœ€è¦UIå±‚é¢çš„é‡æ–°åƒç´ ç»˜åˆ¶ï¼Œå› æ­¤ æŸè€—è¾ƒå°‘ã€‚\n\n### è§¦å‘é‡ç»˜\n\n1. DOMæ”¹åŠ¨\n2. CSSæ”¹åŠ¨\n\n## é‡æ’ï¼ˆReflowï¼‰ï¼š\n\nDOMç»“æ„ä¸­çš„å„ä¸ªå…ƒç´ éƒ½æœ‰è‡ªå·±çš„ç›’å­ï¼ˆæ¨¡å‹ï¼‰ï¼Œè¿™äº›éƒ½éœ€è¦æµè§ˆå™¨æ ¹æ®å„ç§æ ·å¼æ¥è®¡ç®—å¹¶æ ¹æ®è®¡ç®—ç»“æœå°†å…ƒç´ æ”¾åˆ°å®ƒè¯¥å‡ºç°çš„ä½ç½®ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸ºreflowã€‚\n\n- å›æµ(reflow): å½“å…ƒç´ çš„å°ºå¯¸ã€ç»“æ„æˆ–è§¦å‘æŸäº›å±æ€§æ—¶ï¼Œæµè§ˆå™¨ä¼šé‡æ–°æ¸²æŸ“é¡µé¢ï¼Œç§°ä¸ºå›æµã€‚æ­¤æ—¶ï¼Œæµè§ˆå™¨éœ€è¦é‡æ–°ç»è¿‡è®¡ç®—ï¼Œè®¡ç®—åè¿˜éœ€è¦é‡æ–°é¡µé¢å¸ƒå±€ï¼Œå› æ­¤æ˜¯è¾ƒé‡çš„æ“ä½œã€‚\n\n### è§¦å‘é‡æ’\n\n1. å½“å¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹DOMèŠ‚ç‚¹æ—¶ï¼Œä¼šå¯¼è‡´reflowæˆ–repaint\n2. å½“ç§»åŠ¨DOMçš„ä½ç½®ï¼Œæˆ–æ˜¯æ’å…¥åŠ¨ç”»çš„æ—¶å€™\n3. å½“ä¿®æ”¹CSSæ ·å¼çš„æ—¶å€™\n4. å½“Resizeçª—å£çš„æ—¶å€™ï¼Œæˆ–æ˜¯æ»šåŠ¨çš„æ—¶å€™\n5. å½“ä¿®æ”¹ç½‘é¡µçš„é»˜è®¤å­—ä½“æ—¶\n\n## æœ€å°åŒ–é‡ç»˜å’Œé‡æ’ \n1. é¿å…é¢‘ç¹ä½¿ç”¨ styleï¼Œè€Œæ˜¯é‡‡ç”¨ä¿®æ”¹classçš„æ–¹å¼ã€‚\n\n2. æ‰¹é‡ä¿®æ”¹DOMï¼šä½¿ç”¨æ–‡æ¡£ç‰‡æ®µåˆ›å»ºä¸€ä¸ªå­æ ‘ï¼Œç„¶åå†æ‹·è´åˆ°æ–‡æ¡£ä¸­ï¼ˆdocument.fragmentï¼‰ä½¿ç”¨createDocumentFragmentè¿›è¡Œæ‰¹é‡çš„ DOM æ“ä½œã€‚\n\n3. ç¼“å­˜å¸ƒå±€ä¿¡æ¯\n\n4. å¯¹äº resizeã€scroll ç­‰è¿›è¡Œé˜²æŠ–/èŠ‚æµå¤„ç†ã€‚\n","tags":["çŸ¥è¯†"],"categories":["çŸ¥è¯†"]},{"title":"flexå¸ƒå±€","url":"%2Fflex.html","content":"\nèŠ® rui å››å£°\n\næµè§ˆå™¨å‰ç¼€ -webkit/chromeã€safari -moz/firefox -ms/ie -o/opera\n\nå¼¹æ€§ä¼¸ç¼©flexboxå¸ƒå±€ \n\nä»»ä½•ä¸€ä¸ªå®¹å™¨éƒ½å¯è®¾ä¸ºdisplay:flex\n\nè¡Œå†…å…ƒç´  display:inline-flex\n\nwebkitå†…æ ¸æµè§ˆå™¨ï¼ˆSafariï¼‰ display:-webkit-flex; display:flex\n\nè®¾ä¸ºflexå¸ƒå±€ä»¥åï¼Œå­å…ƒç´ çš„floatã€clearã€vertical-alignå±æ€§å°†å¤±æ•ˆã€‚\n\n--- \n<!-- more -->\n## å®¹å™¨çš„å±æ€§\n### flex-direction å†³å®šä¸»è½´çš„æ–¹å‘\n\nflex-direction:row;  /*é»˜è®¤ï¼šä»å·¦åˆ°å³*/\n\nflex-direction:row-reverse;  /*ä»å³åˆ°å·¦*/\n\nflex-direction:column;  /*ä»ä¸Šåˆ°ä¸‹*/\n\nflex-direction:column-reverse;  /*ä»ä¸‹åˆ°ä¸Š*/\n\n### flex-wrap:ä¸€æ¡è½´æ’åˆ—ä¸ä¸‹ï¼Œå¦‚ä½•æ¢è¡Œ\n\nflex-wrap:nowrap;  /*é»˜è®¤:ä¸æ¢è¡Œ*/\n\nflex-wrap:wrap;  /*æ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸Šæ–¹*/\n\nflex-wrap:wrap-reverse;  /*æ¢è¡Œï¼Œç¬¬ä¸€è¡Œåœ¨ä¸‹æ–¹*/\n\n### flex-flowï¼šä¸Šé¢ä¸¤ä¸ªçš„ç®€å†™\nflex-flow:fiex-direction flex-wrap;  /*é»˜è®¤ row no-wrap*/\n\n### justify-content:ä¸»è½´ä¸Šçš„å¯¹é½æ–¹å¼\n\njustify-content:flex-start;  /*é»˜è®¤ï¼šå·¦å¯¹é½*/\n\njustify-content:flex-end;  /*å³å¯¹é½*/\n\njustify-content:center;  /*å±…ä¸­*/\n\njustify-content:space-between;  /*ä¸¤ç«¯å¯¹é½ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”ç›¸åŒï¼Œè¾¹ç¼˜é¡¹ç›®ç´§è´´è¾¹æ¡†*/\n\njustify-content:space-around;  /*é¡¹ç›®ä¸¤ä¾§çš„é—´éš”ç›¸åŒï¼Œæ‰€ä»¥ï¼Œé¡¹ç›®ä¹‹é—´çš„é—´éš”æ¯”é¡¹ç›®ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€*/\n\n### align-items:äº¤å‰è½´ä¸Šå¦‚ä½•å¯¹é½\n\nalign-items:flex-start;  /*èµ·ç‚¹å¯¹é½*/\n\nalign-items:flex-end;  /*ç»ˆç‚¹å¯¹é½*/\n\nalign-items:center;  /*ä¸­ç‚¹å¯¹é½*/\n\nalign-items:baseline;  /*é¡¹ç›®çš„ç¬¬ä¸€è¡Œæ–‡å­—çš„åŸºçº¿å¯¹é½*/\n\nalign-items:stretch;  /*é»˜è®¤ï¼šé¡¹ç›®æœªè®¾é«˜åº¦æˆ–autoï¼Œå æ»¡æ•´ä¸ªå®¹å™¨é«˜åº¦*/\n\n### align-contentï¼šå¤šæ ¹è½´çº¿çš„å¯¹é½æ–¹å¼ï¼Œåªæœ‰ä¸€æ ¹è½´çº¿æ—¶ï¼Œä¸èµ·ä½œç”¨ã€‚\n\naling-content:flex-start;  /*ä¸äº¤å‰è½´çš„èµ·ç‚¹å¯¹é½*/\n\naling-content:flex-end;  /*ä¸äº¤å‰è½´çš„ç»ˆç‚¹å¯¹é½*/\n\naling-content:center;  /*ä¸äº¤å‰è½´çš„ä¸­ç‚¹å¯¹é½*/\n\naling-content:space-between;  /*ä¸äº¤å‰è½´ä¸¤ç«¯å¯¹é½ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”å¹³å‡åˆ†å¸ƒã€‚*/\n\naling-content:space-around;  /*æ¯æ ¹è½´çº¿ä¸¤ä¾§çš„é—´éš”éƒ½ç›¸ç­‰ã€‚æ‰€ä»¥ï¼Œè½´çº¿ä¹‹é—´çš„é—´éš”æ¯”è½´çº¿ä¸è¾¹æ¡†çš„é—´éš”å¤§ä¸€å€*/\n\naling-content:stretch;  /*é»˜è®¤ï¼šè½´çº¿å æ»¡æ•´ä¸ªäº¤å‰è½´*/\n\n## é¡¹ç›®çš„å±æ€§\n\n### order:å®šä¹‰é¡¹ç›®çš„æ’åˆ—é¡ºåºã€‚æ•°å€¼è¶Šå°ï¼Œæ’åˆ—è¶Šé å‰ï¼Œé»˜è®¤ä¸º0ã€‚\n\norder:1;\n\norder:99;\n\norder:-1;   \n\n/*-1 1 99çš„é¡ºåºæ’åˆ—*/\n\n### flex-growï¼šå®šä¹‰é¡¹ç›®çš„æ”¾å¤§æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º0ï¼Œå³å¦‚æœå­˜åœ¨å‰©ä½™ç©ºé—´ï¼Œä¹Ÿä¸æ”¾å¤§ã€‚\n\nflex-grow: <number>; /* default 0 */\n\nå¦‚æœæ‰€æœ‰é¡¹ç›®çš„flex-growå±æ€§éƒ½ä¸º1ï¼Œåˆ™å®ƒä»¬å°†ç­‰åˆ†å‰©ä½™ç©ºé—´ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚\n\nå¦‚æœä¸€ä¸ªé¡¹ç›®çš„flex-growå±æ€§ä¸º2ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™å‰è€…å æ®çš„å‰©ä½™ç©ºé—´å°†æ¯”å…¶ä»–é¡¹å¤šä¸€å€ã€‚\n\n### flex-shrink:å®šä¹‰äº†é¡¹ç›®çš„ç¼©å°æ¯”ä¾‹ï¼Œé»˜è®¤ä¸º1ï¼Œå³å¦‚æœç©ºé—´ä¸è¶³ï¼Œè¯¥é¡¹ç›®å°†ç¼©å°ã€‚\n\nflex-shrink: <number>; /* default 1 */\n\nå¦‚æœæ‰€æœ‰é¡¹ç›®çš„flex-shrinkå±æ€§éƒ½ä¸º1ï¼Œå½“ç©ºé—´ä¸è¶³æ—¶ï¼Œéƒ½å°†ç­‰æ¯”ä¾‹ç¼©å°ã€‚\n\nå¦‚æœä¸€ä¸ªé¡¹ç›®çš„flex-shrinkå±æ€§ä¸º0ï¼Œå…¶ä»–é¡¹ç›®éƒ½ä¸º1ï¼Œåˆ™ç©ºé—´ä¸è¶³æ—¶ï¼Œå‰è€…ä¸ç¼©å°ã€‚\n\nè´Ÿå€¼å¯¹è¯¥å±æ€§æ— æ•ˆã€‚\n\n### flex-basis:å®šä¹‰äº†åœ¨åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰ï¼Œé¡¹ç›®å æ®çš„ä¸»è½´ç©ºé—´ï¼ˆmain sizeï¼‰ã€‚æµè§ˆå™¨æ ¹æ®è¿™ä¸ªå±æ€§ï¼Œè®¡ç®—ä¸»è½´æ˜¯å¦æœ‰å¤šä½™ç©ºé—´ã€‚å®ƒçš„é»˜è®¤å€¼ä¸ºautoï¼Œå³é¡¹ç›®çš„æœ¬æ¥å¤§å°ã€‚\n\nflex-basis: <length> | auto; /* default auto */\n\nå®ƒå¯ä»¥è®¾ä¸ºè·Ÿwidthæˆ–heightå±æ€§ä¸€æ ·çš„å€¼ï¼ˆæ¯”å¦‚350pxï¼‰ï¼Œåˆ™é¡¹ç›®å°†å æ®å›ºå®šç©ºé—´ã€‚\n\n### flex: 1 æ˜¯flex-grow, flex-shrink å’Œ flex-basisçš„ç®€å†™ï¼Œé»˜è®¤å€¼ä¸º0 1 autoã€‚åä¸¤ä¸ªå±æ€§å¯é€‰ã€‚åˆ†åˆ«å¯¹åº”çš„æ˜¯ flex å…ƒç´ çš„å ä½ã€ç¼©æ”¾ã€å®¹å™¨å®½é«˜ã€‚\n\nflex: none | [ <'flex-grow'> <'flex-shrink'>? || <'flex-basis'> ]\n\n### align-selfå±æ€§å…è®¸å•ä¸ªé¡¹ç›®æœ‰ä¸å…¶ä»–é¡¹ç›®ä¸ä¸€æ ·çš„å¯¹é½æ–¹å¼ï¼Œå¯è¦†ç›–align-itemså±æ€§ã€‚é»˜è®¤å€¼ä¸ºautoï¼Œè¡¨ç¤ºç»§æ‰¿çˆ¶å…ƒç´ çš„align-itemså±æ€§ï¼Œå¦‚æœæ²¡æœ‰çˆ¶å…ƒç´ ï¼Œåˆ™ç­‰åŒäºstretchã€‚\n\nalign-self: auto | flex-start | flex-end | center | baseline | stretch;\n\n## react-nativeä½¿ç”¨flexå¸ƒå±€æ³¨æ„ç‚¹\n\n- æ ·å¼å¯¹è±¡éœ€è¦é©¼å³°å¼å†™æ³•\n- React Nativeä¸­çš„Flexboxçš„å·¥ä½œåŸç†å’Œwebä¸Šçš„CSSåŸºæœ¬ä¸€è‡´ï¼Œå½“ç„¶ä¹Ÿå­˜åœ¨å°‘è®¸å·®å¼‚ã€‚\n\né¦–å…ˆæ˜¯é»˜è®¤å€¼ä¸åŒï¼šflexDirectionçš„é»˜è®¤å€¼æ˜¯columnè€Œä¸æ˜¯rowï¼Œè€Œflexä¹Ÿåªèƒ½æŒ‡å®šä¸€ä¸ªæ•°å­—å€¼ã€‚\n\n## æ‰©å±•é˜…è¯»ï¼š\n[w3cplusæŒ‡å—](http://www.w3cplus.com/css3/a-guide-to-flexbox-new.html)\n[Flex å¸ƒå±€æ•™ç¨‹ï¼šè¯­æ³•ç¯‡](http://www.ruanyifeng.com/blog/2015/07/flex-grammar.html)\n[æ€ç»´å›¾](http://blog.csdn.net/magneto7/article/details/70854472)\n[å¯è§†åŒ–ç»ƒä¹ 1](https://buptsteve.github.io/flex-playground/)\n[å¯è§†åŒ–ç»ƒä¹ 2](https://react-medellin.github.io/flexbox-playground/)\n[å¯è§†åŒ–ç»ƒä¹ 3](https://www.flexbox.aweutist.dev/showcase.html)\n[å¯è§†åŒ–ç»ƒä¹ 4](https://vikram-rajput.github.io/flexbox-playground/)\n","tags":["å¸ƒå±€"],"categories":["CSS"]},{"title":"å‰ç«¯å·¥ç¨‹åŒ–","url":"%2F%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96.html","content":"\nå‰ç«¯çš„å·¥ç¨‹åŒ–ã€æ¨¡å—åŒ–ã€ç»„ä»¶åŒ–ã€‚\n\n1. å¹¿ä¹‰çš„å‰ç«¯å·¥ç¨‹åŒ–\n\nå‰ç«¯å·¥ç¨‹æ˜¯è½¯ä»¶å·¥ç¨‹çš„ä¸€ä¸ªå­ç±»ï¼ŒæŒ‡çš„æ˜¯å°†è½¯ä»¶å·¥ç¨‹çš„æ–¹æ³•å’ŒåŸç†è¿ç”¨åœ¨å‰ç«¯å¼€å‘ä¸­, ç›®çš„æ˜¯å®ç°é«˜æ•ˆå¼€å‘ï¼Œæœ‰æ•ˆååŒï¼Œè´¨é‡å¯æ§ã€‚\n\n2. ç‹­ä¹‰çš„å‰ç«¯å·¥ç¨‹åŒ–\n\nå‰ç«¯å·¥ç¨‹æ˜¯æŒ‡å°†å¼€å‘é˜¶æ®µä»£ç è½¬å˜æˆç”Ÿäº§ç¯å¢ƒçš„ä»£ç çš„ä¸€ç³»åˆ—æ­¥éª¤ã€‚ä¸»è¦åŒ…æ‹¬æ„å»ºï¼Œåˆ†æ”¯ç®¡ç†ï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œéƒ¨ç½²ç­‰ã€‚\n\nå‰ç«¯å·¥ç¨‹åŒ–çš„å…·ä½“å†…å®¹\n\n1. ä»£ç è§„èŒƒï¼šä¿è¯å›¢é˜Ÿæ‰€æœ‰æˆå‘˜ä»¥åŒæ ·çš„è§„èŒƒå¼€å‘ä»£ç ã€‚\n\n2. åˆ†æ”¯ç®¡ç†ï¼šä¸åŒçš„å¼€å‘äººå‘˜å¼€å‘ä¸åŒçš„åŠŸèƒ½æˆ–ç»„ä»¶ï¼ŒæŒ‰ç…§ç»Ÿä¸€çš„æµç¨‹åˆå¹¶åˆ°ä¸»å¹²ã€‚\n\n3. æ¨¡å—ç®¡ç†ï¼šä¸€æ–¹é¢ï¼Œå›¢é˜Ÿå¼•ç”¨çš„æ¨¡å—åº”è¯¥æ˜¯è§„èŒƒçš„ï¼›å¦ä¸€æ–¹é¢ï¼Œå¿…é¡»ä¿è¯è¿™äº›æ¨¡å—å¯ä»¥æ­£ç¡®çš„åŠ å…¥åˆ°æœ€ç»ˆç¼–è¯‘å¥½çš„åŒ…æ–‡ä»¶ä¸­ã€‚\n\n4. è‡ªåŠ¨åŒ–æµ‹è¯•ï¼šä¸ºäº†ä¿è¯å’Œå¹¶è¿›ä¸»å¹²çš„ä»£ç è¾¾åˆ°è´¨é‡æ ‡å‡†ï¼Œå¿…é¡»æœ‰æµ‹è¯•ï¼Œè€Œä¸”æµ‹è¯•åº”è¯¥æ˜¯è‡ªåŠ¨åŒ–çš„ï¼Œå¯ä»¥å›å½’çš„ã€‚\n\n5. æ„å»ºï¼šä¸»å¹²æ›´æ–°ä»¥åï¼Œè‡ªåŠ¨å°†ä»£ç ç¼–è¯‘ä¸ºæœ€ç»ˆçš„ç›®æ ‡æ ¼å¼ï¼Œå¹¶ä¸”å‡†å¤‡å¥½å„ç§é™æ€èµ„æºï¼Œ\n\n6. éƒ¨ç½²ï¼šå°†æ„å»ºå¥½çš„ä»£ç éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚","tags":["çŸ¥è¯†"],"categories":["çŸ¥è¯†"]},{"title":"æœåŠ¡å™¨æ¨é€æŠ€æœ¯","url":"%2F%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%8E%A8%E9%80%81%E6%8A%80%E6%9C%AF.html","content":"\nåœ¨åšå‰ç«¯é¡µé¢æ¸²æŸ“æ—¶ï¼Œç»å¸¸ä¼šé‡åˆ°æœ‰çš„ç»„ä»¶éœ€è¦è·Ÿéšæ•°æ®çš„å˜åŒ–è€Œå®æ—¶çš„å˜åŒ–ï¼Œä¾‹å¦‚ï¼šä¸€ä¸ªçº¿ä¸ŠæŠ¥åç³»ç»Ÿï¼Œæ€»äººæ•°æœ‰ä¸€å®šé™åˆ¶ï¼Œæ‰€ä»¥è¦å®æ—¶çš„å±•ç°å·²ç»æŠ¥åçš„äººæ•°ï¼Œåº”è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿæœ€åŸºæœ¬æœ‰å¦‚ä¸‹3ç§æ–¹æ¡ˆï¼š\n\n- Ajaxè½®è¯¢\n- Ajaxé•¿è½®è¯¢(comet)\n- websocketé•¿è¿æ¥\n\n--- \n<!-- more -->\n\n## Ajaxè½®è¯¢\n\n### ä¼˜ç‚¹\nå®ç°ç®€å•ï¼Œåˆ©ç”¨XHR,é€šè¿‡setIntervalå®šæ—¶å‘åç«¯å‘é€è¯·æ±‚ã€‚\n\n### ç¼ºç‚¹\nä¼šé€ æˆæ•°æ®åœ¨ä¸€å°æ®µæ—¶é—´å†…ä¸åŒæ­¥å’Œå¤§é‡æ— æ•ˆçš„è¯·æ±‚ï¼Œå¢åŠ åç«¯å¤„ç†å‹åŠ›.\n\n```javascript\nsetInterval(function() {\n    $.ajax({\n        url: 'https://www.baidu.com/',\n        success: function() {\n            //success code\n        }\n    });\n}, 3000);\n```\n\n## Ajaxé•¿è½®è¯¢(comet)\n\nåœ¨Ajaxè½®è¯¢çš„åŸºç¡€ä¸Šåšçš„ä¸€ç‚¹æ”¹è¿›ï¼Œåœ¨åç«¯æ•°æ®æ²¡æœ‰æ›´æ–°çš„æ—¶å€™ä¸å†è¿”å›ç©ºå“åº”ï¼Œè€Œä¸”åç«¯ä¸€ç›´ä¿å­˜è¿æ¥ï¼Œç›´åˆ°åç«¯æœ‰æ•°æ®å˜åŒ–ï¼Œåˆ™ç›¸åº”è¯·æ±‚å¹¶ä¸”å…³é—­è¿æ¥ï¼Œå‰ç«¯æ”¶åˆ°æ•°æ®ï¼Œé©¬ä¸Šå†æ¬¡å‘åç«¯å‘èµ·è¯·æ±‚ï¼Œå¹¶å¤„ç†åˆšåˆšæ”¶åˆ°çš„æ•°æ®ã€‚\n\né€šå¸¸çš„åšæ³•æ˜¯ï¼Œåœ¨æœåŠ¡å™¨çš„ç¨‹åºä¸­åŠ å…¥ä¸€ä¸ªæ­»å¾ªç¯ï¼Œåœ¨å¾ªç¯ä¸­ç›‘æµ‹æ•°æ®çš„å˜åŠ¨ã€‚å½“å‘ç°æ–°æ•°æ®æ—¶ï¼Œç«‹å³å°†å…¶è¾“å‡ºç»™æµè§ˆå™¨å¹¶æ–­å¼€è¿æ¥ï¼Œæµè§ˆå™¨åœ¨æ”¶åˆ°æ•°æ®åï¼Œå†æ¬¡å‘èµ·è¯·æ±‚ä»¥è¿›å…¥ä¸‹ä¸€ä¸ªå‘¨æœŸã€‚\n\n```javascript\nfunction async() {\n    $.ajax({\n        url: 'http://api.3g.qq.com',\n        success: function() {\n            async();\n            //success code\n        }\n    });\n}\n```\n\n## websocketé•¿è¿æ¥\n\nWebSocketæ˜¯html5ä¸­çš„åè®®ï¼Œæ”¯æŒæŒä¹…è¿æ¥ã€‚httpåè®®ä¸æ”¯æŒæŒä¹…è¿æ¥ï¼Œhttp1.0å’Œhttp1.xéƒ½ä¸æ”¯æŒæŒä¹…æ€§è¿æ¥ï¼Œhttp1.1ä¸­çš„keep-aliveå°†å¤šä¸ªhttpè¯·æ±‚åˆå¹¶ä¸º1ä¸ªã€‚\n\nWebSocketé€šä¿¡åè®®åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€æ˜¯å¼€æ”¾æ€§HTTPæ¡æ‰‹è¿æ¥åå•†è¿æ¥å‚æ•°ï¼ŒäºŒæ˜¯äºŒè¿›åˆ¶æ¶ˆæ¯åˆ†å¸§æœºåˆ¶ï¼ˆæ¥æ”¶æ¶ˆæ¯çš„æ–‡æœ¬å’ŒäºŒè¿›åˆ¶æ•°æ®ä¼ è¾“ï¼‰ã€‚å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹å®Œå–„çš„åè®®ï¼Œä¹Ÿå¯ä»¥åœ¨æµè§ˆå™¨ä¹‹å¤–å®ç°ã€‚\n\nHTTPçš„ç”Ÿå‘½å‘¨æœŸé€šè¿‡Requestæ¥ç•Œå®šï¼Œä¹Ÿå°±æ˜¯Requestä¸€ä¸ªresponseï¼Œé‚£ä¹ˆåœ¨http1.0åè®®ä¸­è¿™æ¬¡è¯·æ±‚å°±ç»“æŸäº†ï¼›åœ¨http1.1ä¸­è¿›è¡Œäº†æ”¹è¿›ï¼Œæ˜¯æœ‰ä¸€ä¸ªconnectionï¼škeep-aliveï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€ä¸ªhttpè¿æ¥é‡Œå¯ä»¥å‘é€å¤šä¸ªrequestï¼Œæ¥æ”¶å¤šä¸ªresponseã€‚\n\nWebsocketæ˜¯åŸºäºhttpåè®®çš„ï¼Œæˆ–è€…è¯´å€Ÿç”¨äº†httpåè®®æ¥å®Œæˆéƒ¨åˆ†æ¡æ‰‹ï¼Œåœ¨æ¡æ‰‹é˜¶æ®µå’Œhttpæ˜¯ç›¸åŒçš„ï¼Œè¯·æ±‚å¤´ä¸­å¤šäº†ä¸¤ä¸ªå±æ€§ï¼šupgradeï¼Œconnection\n```js\nUpgrade: websocket\nConnection: Upgrade\n```\n\n### HTTPå‡çº§åå•†\n\nWebSocketåè®®æä¾›äº†å¾ˆå¤šå¼ºå¤§çš„ç‰¹æ€§ï¼šåŸºäºæ¶ˆæ¯çš„é€šä¿¡ã€è‡ªå®šä¹‰çš„äºŒè¿›åˆ¶åˆ†å¸§å±‚ã€å­åè®®åå•†ã€å¯é€‰çš„åè®®æ‰©å±•ï¼Œç­‰ç­‰ã€‚å³åœ¨äº¤æ¢æ•°æ®ä¹‹å‰ï¼Œå®¢æˆ·ç«¯å¿…é¡»ä¸æœåŠ¡å™¨åå•†é€‚å½“çš„å‚æ•°ä»¥å»ºç«‹è¿æ¥ã€‚\n\nåˆ©ç”¨HTTPå®Œæˆæ¡æ‰‹æœ‰å‡ ä¸ªå¥½å¤„ã€‚é¦–å…ˆï¼Œè®©WebSocketsä¸ç°æœ‰HTTPåŸºç¡€è®¾æ–½å…¼å®¹ï¼šWebSocketæœåŠ¡å™¨å¯ä»¥è¿è¡Œåœ¨80å’Œ443 ç«¯å£ä¸Šï¼Œè¿™é€šå¸¸æ˜¯å¯¹å®¢æˆ·ç«¯å”¯ä¸€å¼€æ”¾çš„ç«¯å£ã€‚å…¶æ¬¡ï¼Œè®©æˆ‘ä»¬å¯ä»¥é‡ç”¨å¹¶æ‰©å±•HTTPçš„Upgradeæµï¼Œä¸ºå…¶æ·»åŠ è‡ªå®šä¹‰çš„WebSocketé¦–éƒ¨ï¼Œä»¥å®Œæˆåå•†ã€‚\n\n### è¯·æ±‚å¤´ä¿¡æ¯\n\nConnection:Upgrade Sec-WebSocket-Key:eDCPPyPQZq7PiwRcx8SPog== Sec-WebSocket-Version:13 Upgrade:websocket \n\n### å“åº”å¤´ä¿¡æ¯\n\nHTTP/1.1 101 Switching Protocols Connection:Upgrade Sec-WebSocket-Accept:/ZVAP3n6XuqDUoDp416PYUO+ZJc= Upgrade:websocket\n\n\næœ€åï¼Œå‰è¿°æ¡æ‰‹å®Œæˆåï¼Œå¦‚æœæ¡æ‰‹æˆåŠŸï¼Œè¯¥è¿æ¥å°±å¯ä»¥ç”¨ä½œåŒå‘é€šä¿¡ä¿¡é“äº¤æ¢WebSocketæ¶ˆæ¯ã€‚åˆ°æ­¤ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´ä¸ä¼šå†å‘ç”ŸHTTPé€šä¿¡ï¼Œä¸€åˆ‡ç”±WebSocket åè®®æ¥ç®¡ã€‚\n\n### å…·ä½“ä½¿ç”¨æ–¹æ³•ï¼Œæœ¬æ–‡é‡‡ç”¨node.jsä¸­çš„Socket.IOæ¥è¿›è¡Œè¯´æ˜ï¼š\n\n1. æœåŠ¡ç«¯åˆ›å»ºsocket.ioçš„å®ä¾‹\n\n```javascript\nvar app = require('express')(); \nvar http = require('http').Server(app); \nvar io = require('socket.io')(http);//åˆ›å»ºå®ä¾‹ \n\napp.get('/', function(req, res){ res.sendfile('index.html'); });\n\nio.on('connection', function(socket){ \n    console.log('a user connected'); \n});// ç›‘å¬å‰ç«¯è¿æ¥ \n\nhttp.listen(3000, function(){ console.log('listening on *:3000'); });  \n```\n\n2. æ•°æ®ä¼ è¾“\n\n```javascript\n// å‰ç«¯å®¢æˆ·ç«¯å‘åç«¯å‘é€æ•°æ®ï¼š\nsocket.emit('chat message', $('#m').val()); \n\n// åç«¯æ¥æ”¶æ•°æ®ï¼š\n\nio.on('connection', function(socket){ \n    socket.on('chat message', function(msg){ \n    console.log('message: ' + msg); }); \n}); \n\n// åç«¯å‘å‰ç«¯å‘é€æ•°æ®ï¼š\n\nio.on('connection', function(socket){\n    socket.on('chat message', function(msg){ \n    io.emit('chat message', msg); }); \n}); \n\n// å‰ç«¯æ¥æ”¶æ•°æ®ï¼š\nsocket.on('chat message', function(msg){ console.log(msg); });\n```\n","tags":["çŸ¥è¯†"],"categories":["çŸ¥è¯†"]},{"title":"å‡½æ•°çš„é˜²æŠ–å’ŒèŠ‚æµ","url":"%2F%E5%87%BD%E6%95%B0%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81.html","content":"\nåœºæ™¯ï¼šäº‹ä»¶é¢‘ç¹è¢«è§¦å‘ï¼Œé¢‘ç¹æ‰§è¡ŒDOMæ“ä½œã€èµ„æºåŠ è½½ç­‰é‡å¤è¡Œä¸ºï¼Œå¯¼è‡´UIåœé¡¿ç”šè‡³æµè§ˆå™¨å´©æºƒã€‚å¦‚ input å®æ—¶æœç´¢ã€scrollview æ»šåŠ¨æ›´æ–°ã€‚\n\nå‡½æ•°é˜²æŠ–å’ŒèŠ‚æµç”¨äºé™åˆ¶å‡½æ•°çš„æ‰§è¡Œã€‚æ˜¯ä¼˜åŒ–é«˜é¢‘ç‡æ‰§è¡Œjsä»£ç çš„ä¸€ç§æ‰‹æ®µã€‚\n\n---\n<!--more-->\n\n## å‡½æ•°é˜²æŠ–\n\nå‡½æ•°é˜²æŠ–å°±æ˜¯è®©æŸä¸ªå‡½æ•°åœ¨ä¸Šä¸€æ¬¡æ‰§è¡Œåï¼Œæ»¡è¶³ç­‰å¾…æŸä¸ªæ—¶é—´å†…ä¸å†è§¦å‘æ­¤å‡½æ•°åå†æ‰§è¡Œï¼Œè€Œåœ¨è¿™ä¸ªç­‰å¾…æ—¶é—´å†…å†æ¬¡è§¦å‘æ­¤å‡½æ•°ï¼Œç­‰å¾…æ—¶é—´ä¼šé‡æ–°è®¡ç®—ã€‚\n\n```javascript\nvar debounce = function(idle,action){\n  var last;\n  return function(){\n    var ctx = this,\n        args = arguments; // å­˜å‚¨å‚æ•°\n    clearTimeout(last);\n    last = setTimeout(function(){\n      action.apply(ctx,args);\n    },idle);\n  }\n}\n\n// è¿”å›å‡½æ•°è¿ç»­è°ƒç”¨æ—¶ï¼Œç©ºé—²æ—¶é—´å¿…é¡»å¤§äºæˆ–ç­‰äºidleï¼Œactionæ‰ä¼šæ‰§è¡Œã€‚\n```\n\n### å®é™…ä¾‹å­\n\nå½“æŒç»­è§¦å‘äº‹ä»¶æ—¶ï¼Œä¸€å®šæ—¶é—´æ®µå†…æ²¡æœ‰å†è§¦å‘äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°æ‰ä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœè®¾å®šçš„æ—¶é—´åˆ°æ¥ä¹‹å‰ï¼Œåˆä¸€æ¬¡è§¦å‘äº†äº‹ä»¶ï¼Œå°±é‡æ–°å¼€å§‹å»¶æ—¶ã€‚å¦‚ä¸‹å›¾ï¼ŒæŒç»­è§¦å‘scrolläº‹ä»¶æ—¶ï¼Œå¹¶ä¸æ‰§è¡Œhandleå‡½æ•°ï¼Œå½“1000æ¯«ç§’å†…æ²¡æœ‰è§¦å‘scrolläº‹ä»¶æ—¶ï¼Œæ‰ä¼šå»¶æ—¶è§¦å‘scrolläº‹ä»¶ã€‚\n\n```javascript\nfunction debounce(fn, wait) {\n    var timeout = null;\n    return function() {\n        if(timeout !== null) \n                clearTimeout(timeout);\n        timeout = setTimeout(fn, wait);\n    }\n}\n// å¤„ç†å‡½æ•°\nfunction handle() {\n    console.log(Math.random()); \n}\n// æ»šåŠ¨äº‹ä»¶\nwindow.addEventListener('scroll', debounce(handle, 1000));\n```\n\nå½“æŒç»­è§¦å‘scrolläº‹ä»¶æ—¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°handleåªåœ¨åœæ­¢æ»šåŠ¨1000æ¯«ç§’ä¹‹åæ‰ä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨æŒç»­è§¦å‘scrolläº‹ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°handleä¸€ç›´æ²¡æœ‰æ‰§è¡Œã€‚\n\nå‡½æ•°é˜²æŠ–é€‚ç”¨äºè¿ç»­è°ƒç”¨å‡½æ•°ï¼Œä½†åªåœ¨å»¶æ—¶åè°ƒç”¨ä¸€æ¬¡ã€‚å®šæ—¶å™¨å­˜åœ¨åˆ™é”€æ¯ï¼Œç¬¬ä¸€æ¬¡ä¸€å®šä¼šåˆ›å»ºå¹¶è°ƒç”¨å‡½æ•°ã€‚\n\n## å‡½æ•°èŠ‚æµ\n\næ¯éš”æŸä¸ªæ—¶é—´å»æ‰§è¡ŒæŸå‡½æ•°ï¼Œé¿å…å‡½æ•°çš„è¿‡å¤šæ‰§è¡Œã€‚\n\nå¦‚æœå°†æ°´é¾™å¤´æ‹§ç´§ç›´åˆ°æ°´æ˜¯ä»¥æ°´æ»´çš„å½¢å¼æµå‡ºï¼Œé‚£ä½ ä¼šå‘ç°æ¯éš”ä¸€æ®µæ—¶é—´ï¼Œå°±ä¼šæœ‰ä¸€æ»´æ°´æµå‡ºã€‚ä¹Ÿå°±æ˜¯è¯´ä¼šå…ˆè®¾å®šä¸€ä¸ªæ‰§è¡Œå‘¨æœŸï¼Œå½“è°ƒç”¨åŠ¨ä½œçš„æ—¶åˆ»å¤§äºç­‰äºæ‰§è¡Œå‘¨æœŸåˆ™æ‰§è¡Œè¯¥åŠ¨ä½œï¼Œç„¶åè¿›å…¥ä¸‹ä¸€ä¸ªæ–°å‘¨æœŸã€‚\n\n```javascript\nvar throttle = function(delay,action){\n  var last ;\n  return function(){\n    var cur = +new Date();  //è¿”å›æ¯«ç§’æ•°\n    if(cur - last > = delay){\n      action.apply(this,arguments);\n      last = cur;\n    }\n  }\n}\n```\n\n### å®é™…ä¾‹å­\nå‡½æ•°èŠ‚æµä¸»è¦æœ‰ä¸¤ç§å®ç°æ–¹æ³•ï¼šæ—¶é—´æˆ³å’Œå®šæ—¶å™¨ã€‚\n\n```javascript\nvar throttle = function(func, delay) {\n    var prev = Date.now();\n    return function() {\n        var context = this;\n        var args = arguments;\n        var now = Date.now();\n        if (now - prev >= delay) {\n            func.apply(context, args);\n            prev = Date.now();\n        }\n    }\n}\nfunction handle() {\n    console.log(Math.random());\n}\nwindow.addEventListener('scroll', throttle(handle, 1000));\n```\n\n```javascript\nvar throttle = function(func, delay) {\n    var timer = null;\n    return function() {\n        var context = this;\n        var args = arguments;\n        if (!timer) {\n            timer = setTimeout(function() {\n                func.apply(context, args);\n                timer = null;\n            }, delay);\n        }\n    }\n}\nfunction handle() {\n    console.log(Math.random());\n}\nwindow.addEventListener('scroll', throttle(handle, 1000));\n```\n\nå‡½æ•°èŠ‚æµé€‚ç”¨äºé—´æ¥æ€§è°ƒç”¨å‡½æ•°ã€‚å®šæ—¶å™¨ä¸å­˜åœ¨åˆ™åˆ›å»ºè°ƒç”¨å‡½æ•°ï¼Œå®šæ—¶é”€æ¯ã€‚","tags":["çŸ¥è¯†"],"categories":["JS"]},{"title":"åœ¨å»ä¸Šæµ·å‰çš„ä¸€äº›æƒ³æ³•","url":"%2Fbeforehz.html","content":"\næ€¯æ‡¦çš„æˆ‘ç»ˆäºå’Œé¢†å¯¼æå‡ºäº†ç¦»èŒï¼Œä»8æœˆ11å·å…¥èŒä»¥æ¥ï¼Œjenkinsæ‰“åŒ…ç®¡ç†ã€bugattiè‡ªåŠ¨åŒ–éƒ¨ç½²ç­‰ç­‰æƒŠè‰³åˆ°äº†åœ¨ä¸Šå®¶å…¬å¸è¿˜æ˜¯ç”¨æ‰‹åŠ¨å‘åŒ…javacçš„æˆ‘ï¼Œå­¦åˆ°äº†æ›´æ­£è§„çš„è½¯ä»¶å¼€å‘æµç¨‹ä½“ç³»å’Œäº§å“çº¿çš„è¿­ä»£ï¼ŒKAé¡¹ç›®çš„å®šåˆ¶åŒ–ã€‚ä»1æœˆå¼€å§‹ä¸€ç›´ç”¨RNåšç›¸å…³çš„å¾®åº”ç”¨ï¼ŒæœŸé—´è™½ç„¶ä¹Ÿåšè¿‡å°ç¨‹åºã€muiçš„H5ã€antdçš„ä¸­åå°ç³»ç»Ÿï¼Œä½†å¤§å¤šæ•°æ—¶é—´è¿˜æ˜¯ç”¨RNå†™ä¸šåŠ¡åº”ç”¨ã€‚ç»è¿‡å‡ ä¸ªåº”ç”¨çš„é”»ç‚¼ã€æ”¹é€ ï¼Œå·²ç»å°å‡ºäº†ä¸€äº›è¾ƒèƒ½åº”ä»˜ä¸šåŠ¡éœ€æ±‚çš„ç»„ä»¶ã€‚å¤æ‚çš„é›†æˆè°ƒç”¨æ¡†æ¶é‚£è¾¹éƒ½åšäº†ï¼Œå…¶ä»–éƒ¨åˆ†åšèµ·æ¥æ²¡æœ‰ä»€ä¹ˆæŠ€æœ¯å«é‡äº†ã€‚æˆ‘çŸ¥é“å·²ç»æ¯•ä¸š1å¹´çš„æˆ‘è¯¥åšå‡ºäº›æ”¹å˜äº†ã€‚\n\n---\n<!-- more -->\n\né¢å¯¹é¢†å¯¼ä»¬çš„æŒ½ç•™ï¼Œæˆ‘ä¹Ÿåªèƒ½ç¬‘ç€å©‰æ‹’ã€‚æˆ‘æƒ³åœ¨å¤§å‰ç«¯çš„é“è·¯ä¸Šè¿ˆçš„æ›´è¿œï¼Œæœ¬æ¥å°±æ²¡æ‰“ç®—æ´»å¾ˆé•¿çš„æ—¶é—´ï¼Œåœ¨çŸ­æš‚è¿˜ç®—å……æ»¡å¹²åŠ²çš„äººç”Ÿä¸­å¤šåšç‚¹è‡ªå·±æ„Ÿåˆ°å¿«ä¹çš„äº‹ã€‚è¯´æ¥ä¹Ÿæ˜¯å¥½ç¬‘ï¼Œæ¥äº†å—äº¬è¿™ä¹ˆä¹…ä¹Ÿæ²¡å‡ºå»é€›è¿‡ï¼Œåªå¯¹å…¬å¸å’Œå…¬å¯“å‘¨è¾¹ç†Ÿæ‚‰ä¸€äº›ï¼ŒçœŸæ˜¯ç¬¦åˆæˆ‘çš„ä½œé£å•Šo(*ï¿£ï¸¶ï¿£*)oã€‚\n\nä¾ç¨€è¿˜è®°å¾—åˆšè¿½è¢«å»å—äº¬å‘å±•æ˜¯æˆ‘çš„å†…å¿ƒä¹Ÿæ˜¯éå¸¸æ…Œä¹±çš„ï¼Œé™Œç”Ÿçš„åŸå¸‚ã€ç¯å¢ƒå’Œäººä¸åœåœ°åœ¨åŠé€€ç€æˆ‘ï¼ŒæŠ•é€’çš„ç®€å†æœ‰äº†å›å¤ï¼Œæˆ‘ä¸æ–­é¢„æ¼”è¿™é¢è¯•çš„åœºæ™¯ï¼Œç«Ÿå¯èƒ½å¤šçš„å°†è‡ªå·±çš„ä¼˜åŠ¿å±•ç°å‡ºæ¥ã€‚å°†è¿‘2ä¸ªå°æ—¶çš„é•¿é€”å®¢è½¦æ—…é€”ï¼Œæˆ‘åˆ°äº†å—äº¬å—ç«™ï¼Œæ‘¸ç€é»‘ä¸Šäº†åœ°é“åˆ°äº†è½¯ä»¶å¤§é“ã€‚9ç‚¹åŠåˆè¯¯æ‰“è¯¯æ’åœ°æ‘¸åˆ°äº†ç›®çš„åœ°ï¼Œä¸å¥½æ„æ€éšä¾¿è¿›å…¥ï¼Œéšå³æ‰“ç”µè¯ç¡®è®¤ï¼ˆæœ‰äººæ¥å¼•ä¸‹è·¯å¤šå¥½ï¼‰ã€‚ç­‰å¾…çš„è¿‡ç¨‹å¿å¿‘ä¸å®‰ï¼Œäººç”Ÿç¬¬ä¸€æ¬¡ç»å†ä¸‰è½®é¢è¯•ï¼Œå’ŒæŠ€æœ¯èŠçœŸçš„å¼€å¿ƒå•ŠO(âˆ©_âˆ©)Oå“ˆå“ˆ~é¢è¯•å®Œåç«‹å³åˆä¹°äº†è½¦ç¥¨å›äº†å®¶æ±—~~\n\nè‡ªä»å·¥ä½œä»¥æ¥å°±æ²¡è¯·è¿‡å‡ï¼Œæ²¡è¿Ÿè¿‡åˆ°ã€‚è‡ªå°Šå¿ƒå¼ºçƒˆçš„æˆ‘å¾ˆåœ¨æ„åˆ«äººå¯¹æˆ‘çš„çœ‹æ³•ã€‚å»å¹´ä¹°äº†æˆ¿ï¼Œæˆ¿è´·æ²¡ä»€ä¹ˆå‹åŠ›ã€‚æˆ¿å­è®©çˆ¶æ¯ä½ï¼Œæˆ‘åœ¨å·¥ä½œçš„åœ°æ–¹ç§Ÿæˆ¿ä½ï¼Œè¿™æ˜¯æˆ‘çš„è§„åˆ’ã€‚ä¸æƒ³å»ç›¸äº²ï¼Œä¸æƒ³è¢«å„ç§ç»‘æ¶ã€‚\n\nä½œä¸ºç†Ÿç»ƒçš„api callerï¼Œé«˜ä¸­ä¹‹å‰çš„å­¦ä¹ æ˜¯å¤šä¹ˆå¿«ä¹å•Šï¼Œæ˜¯çš„ï¼Œåšé¢˜(é™¤äº†è¯­æ–‡)å­¦ä¹ å¾ˆå¿«ä¹ã€‚æ–°æ€ç»´è§£é¢˜éƒ½æ˜¯å¸¦æ¥å¾ˆå¤šä¸åŒçš„æ€è·¯ï¼Œè¯¾å ‚ä¸Šæœ‰é€‰æ‹©åœ°å»å­¦ä¹ è‡ªå·±å–œæ¬¢çš„äº‹ç‰©ã€‚è™½ç„¶è¢«è€å¸ˆéª‚çš„æƒ¨ï¼Œä½†æš—åœ°é‡Œè¿˜æ˜¯æ”¯æŒçš„ã€‚æ²¡å‹åŠ›åœ°è€ƒä¸Šäº†é‡ç‚¹é«˜ä¸­ï¼Œè¿›åŸä¸Šé«˜ä¸­äº†ï¼Œæ‰æ„Ÿè§‰åˆ°å·®è·æ˜¯å·¨å¤§çš„ã€‚åŸé‡Œçš„å°å­©ç»ˆç©¶æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¯»è¿‡çš„ä¹¦ä¹Ÿå¥½ï¼ŒåŸ¹å…»çš„å…´è¶£çˆ±å¥½ä¹Ÿå¥½ï¼Œä¸Šè¿‡çš„å…´è¶£ç­éƒ½è¿œè¶…è¿‡ä½ ã€‚å­¦çš„ä¸œè¥¿éƒ½æ˜¯å¥—è·¯åŒ–çš„è§£é¢˜ï¼Œæ¯ç‡¥ä¹å‘³ã€‚æ¸²æŸ“äº†xxçš„æ°”æ°›ï¼Œè¡¨è¾¾äº†xxä»€ä¹ˆçš„æƒ…æ„Ÿã€‚å„ç§çƒ¦å¿ƒã€å€’éœ‰çš„äº‹ä¹Ÿæ¥è¸µè€Œæ¥ï¼Œå°å°çš„å¹¸ç¦è¢«æ‰¼æ€ã€‚å¥½å¥‡å¿ƒå’Œè„–å­çš„æ‰­ï¼ŒçŸ¥é“çš„è¶Šå¤šï¼Œè¶Šè§‰å¾—ç»æœ›ã€‚è§è¿‡çš„æ‰€è°“çš„'çœŸå®'ï¼Œéƒ½æ˜¯ä¸ºäº†åˆ©ç›Šã€‚æ°¸è¿œä¸è¦å»è¯•æ¢äººæ€§ã€‚ç°åœ¨çœ‹æ¥éƒ½åªæ˜¯å¯ç¬‘çš„å€Ÿå£ç½¢äº†ï¼Œå‹åŠ›æŠ‘éƒåˆ°è‡ªæ®‹ã€‚äººä¸äººä¹‹é—´æœ€å…¬å¹³çš„å°±æ˜¯æ—¶é—´äº†ï¼Œæ¯ä¸ªäººä¸€å¤©éƒ½æ˜¯24å°æ—¶ï¼Œè°ä¹Ÿä¸å¤šï¼Œè°ä¹Ÿä¸å°‘ã€‚ç‰¹åˆ«ä½©æœé‚£äº›æ´»çš„ç‹¬ç«‹ã€è®¤çœŸçš„äººä»¬ã€‚ä»–ä»¬å¹´è½»ã€å¼ºå¤§ã€å……æ»¡ä¸ªæ€§ï¼Œå·®è·çœŸçš„å·®åˆ°å¤©å·®åœ°åˆ«ï¼Œæ˜¯æˆ‘å‰è¿›çš„ç›®æ ‡å’Œæ†§æ†¬çš„å¯¹è±¡ã€‚æˆ‘ä¸ä¼šå†è¿·èŒ«äº†ï¼Œæ¯•ç«Ÿ~~~\n\n{% centerquote %} \nä¸å»åšçš„è¯æ°¸è¿œä¹Ÿåšä¸åˆ°ã€‚\n{% endcenterquote %} \n\ns(ä¼˜åŠ¿):äº’è”ç½‘æ°›å›´ã€å¤§ç‰›ã€æŠ€æœ¯æå‡\nw(åŠ£åŠ¿):æˆ¿ç§Ÿã€10m2çš„åœ°ä¸‹å®¤ã€æ¶ˆè´¹ã€ç¦»å®¶è¿œã€é€šå‹¤æ—¶é—´ã€å¼‚åœ°æ‹\no(æœºä¼š):æ›´é«˜çš„å¾…é‡å¤©èŠ±æ¿ã€æœªæ¥å‘å±•\nt(å¨èƒ):é™Œç”Ÿçš„åŸå¸‚ã€é‡æ–°æ•´ç†æŠ€æœ¯ä½“ç³»ã€é¢è¯•\n\n---\n\ns:é—¨é¢åšçš„ä¸é”™ã€è¿‘10kï¼ˆå—äº¬1å¹´ç»éªŒï¼‰ã€åŒä¼‘ï¼ˆæœ‰æ—¶é—´åšè‡ªå·±é¡¹ç›®å­¦ä¹ ã€æ¥å¤–åŒ…ï¼‰ã€é›¨èŠ±å°åŒºï¼ˆç¦»è€å©†è¿‘ï¼‰\nw:ä¸èèµ„ã€å®˜ç½‘lowã€æ²¡æ ¸å¿ƒäº§å“ï¼ˆè¯´åœ¨æ‹›äººæ˜å¹´åšã€è¯´å‘†1å¹´èƒ½åˆ°13-14 0^0ï¼Ÿï¼Ÿï¼Ÿï¼‰ã€ç€æ€¥æ‹›äººï¼ˆç›®å‰äººæ•°è¾ƒå°‘ï¼Ÿï¼‰ã€å¤–åŒ…å›­ã€1-3å¹´9-12kï¼Ÿï¼Ÿï¼Ÿå¸¸è§éƒ½æ˜¯10-15kã€‚\n\nå—äº¬è¿™è¾¹çš„å·¥èµ„å¾…é‡çœŸçš„å¾ˆä½ï¼Œæ„Ÿè§‰åƒå‘½è¿ä¸€æ ·ï¼Œç•™äº†æœ€åä¸€å¼ ç®€å†ï¼Œååæ‰‡è´åˆåœ¨è¿™ä¸ªæ—¶å€™å«æˆ‘å»é¢è¯•ã€‚é¢è¯•å±…ç„¶è¿˜æä¾›é¥®å“ã€‚è¿™è¾¹å‚¬ç€å…¥èŒï¼Œå‰é¢çš„è¿˜æ²¡æ¶ˆæ¯ï¼Œè¯´åˆ°åº•è¿˜æ˜¯è‡ªå·±å¤ªæ‡¦å¼±äº†ï¼Œå¦‚æœæœ‰è”ç³»æˆ–è€…æœæ–­ç‚¹ï¼Œå°±ä¸ä¼šæœ‰è¿™æ ·çš„æƒ…å†µå‡ºç°äº†ã€‚ä¸å»è¯•ä¸€è¯•æ€ä¹ˆä¼šçŸ¥é“å‘¢ï¼Œæ‹…å½“èµ·è‡ªå·±çš„responsibilityã€‚\n\n2å‘¨å‰æŠ•çš„ç°åœ¨è®¤è¯†æ‰æé†’é¢è¯•æ˜¯ä¸æ˜¯å¤ªè¿Ÿäº†ï¼›è™½ç„¶å¾ˆæƒ³å»ï¼ŒæŠ€æœ¯æ°›å›´æµ“åšã€‚å¤§å…¬å¸å°±ä¼šæ¯”è¾ƒé€‰äººï¼Œä¸ä¼šç«‹å³ç»™ä½ ç­”å¤ã€‚å¯è¿™è¾¹çš„å·¥ä½œæ€¥ç€è®©ä½ ç»™ç­”å¤ã€‚å”‰å°±è¿™æ ·å½¢æˆäº†ç°åœ¨çš„å¤„å¢ƒã€‚åŠªåŠ›æ²‰æ·€ä¸€ç‚¹å†è·³æ§½åˆ°æ–°å…¬å¸å§ï¼ï¼ï¼\n\nåŠæ¯æ°´ï¼Œæ‡‚äº†ä¹ˆã€‚è‡ªèº«çš„å¼ºå¤§å¾ˆé‡è¦ï¼Œmore experience æˆå¹´äºº å§è–ªå°èƒ†\n\nåŠå…¬ç¯å¢ƒã€è¡¥è´´ã€äº”é™©ä¸€é‡‘ã€å·¥èµ„ã€ç¦åˆ©å¾…é‡ã€æ°›å›´ã€å¤§å…¬å¸é•€é‡‘ã€è‡ªèº«çš„å¼ºå¤§ã€‚é€‰æ‹©æ¯”åŠªåŠ›æ›´é‡è¦ï¼Œå®åŠ›å’Œæœºé‡ã€‚çœ‹çœ‹åˆ«äººçš„è¯„åˆ†98ï¼Œ6å‘¨å¹´dlunè¿™ç§è‡ªç ”çš„èƒ½è·Ÿç€ä¸€èµ·æˆé•¿ã€‚å¤§æ ¼å±€ï¼Œè¿™æ ·ä¼šè¶Šæ¥è¶Šè¿·èŒ«æ‰¾ä¸åˆ°è‡ªå·±çš„å®šä½ï¼ŒåŠæ¯æ°´çš„æ€æƒ³ã€‚çœŸæ­£çš„æ•ˆç‡ã€‚\n\n3å¹´äº†ï¼Œè¿˜æ˜¯åœ¨å—äº¬ã€‚ã€‚ã€‚\n","tags":["æ‚è°ˆ"],"categories":["æ‚è°ˆ"]},{"title":"å¸¸è§æ’åºçš„JSå®ç°","url":"%2Fsort.html","content":"\nhttps://github.com/damonare/Sorts è¿™ä½å¤§å…„å¼Ÿâ™‚æ€»ç»“çš„å¾ˆå¥½ï¼Œå¿«å»çœ‹çœ‹å§ï¼\n---\n<!-- more -->\n\n## å†’æ³¡æ’åº(ä¸¤ä¸¤æ¯”è¾ƒ)\n```js\nfunction bubleSort(arr) {\n    var len = arr.length;\n    for (let outer = len ; outer >= 2; outer--) {\n        for(let inner = 0; inner <=outer - 1; inner++) {\n            if(arr[inner] > arr[inner + 1]) {\n                [arr[inner],arr[inner+1]] = [arr[inner+1],arr[inner]]\n            }\n        }\n    }\n    return arr;\n}\n\n// æ¨è\nfunction bubleSort(arr) {\n    var nLength = arr.length;\n\n    if (nLength < 2) {\n        return arr;\n    }\n\n    for (var i = nLength - 1; i > 0; --i) {\n        for (var j = 0; j < i; ++j) {\n            if (arr[j] > arr[j + 1]) {\n                var temp = arr[j];\n                arr[j] = arr[j + 1];\n                arr[j + 1] = temp;\n            }\n        }\n    }\n    return arr;\n}\n```\n\n## é€‰æ‹©æ’åº(éå†è‡ªèº«ä»¥å¤–çš„å…ƒç´ ï¼Œæœ€å°çš„å…ƒç´ å’Œè‡ªå·±è°ƒæ¢ä½ç½®)\n```js\n// æ¨è\nfunction selectSort(arr) {\n    var len = arr.length;\n    for(let i = 0 ;i < len - 1; i++) {\n        for(let j = i ; j<len; j++) {\n            if(arr[j] < arr[i]) {\n                [arr[i],arr[j]] = [arr[j],arr[i]];\n            }\n        }\n    }\n    return arr\n}\n\nfunction selectSort(arr) {\n    var nLength = arr.length;\n    if (nLength < 2) {\n        return arr;\n    }\n    for (var i = 0; i < nLength; i++) {\n        var index = i;\n        for (var j = i + 1; j < nLength; j++) {\n            if (arr[j] < arr[index]) {\n                index = j;\n            }\n        }\n        if (i !== index) {\n            var temp = arr[i];\n            arr[i] = arr[index];\n            arr[index] = temp;\n        }\n    }\n    return arr;\n}\n```\n\n## æ’å…¥æ’åº(å°†å…ƒç´ æ’å…¥åˆ°å·²æ’åºå¥½çš„æ•°ç»„ä¸­)\n```js\nfunction insertSort(arr) {\n    for(let i = 1; i < arr.length; i++) {  \n        // å¤–å¾ªç¯ä»1å¼€å§‹ï¼Œé»˜è®¤arr[0]æ˜¯æœ‰åºæ®µ\n        for(let j = i; j > 0; j--) {  \n            // j = i,å°†arr[j]ä¾æ¬¡æ’å…¥æœ‰åºæ®µä¸­\n            if(arr[j] < arr[j-1]) {\n                [arr[j],arr[j-1]] = [arr[j-1],arr[j]];\n            } else {\n                break;\n            }\n        }\n    }\n    return arr;\n}\n\nfunction insertSort(arr) {\n    var nLength = arr.length;\n    if (nLength < 2) {\n        return arr;\n    }\n    for (var i = 1; i < nLength; ++i) {\n        var j = i,\n            value = arr[i];\n        while (j > 0 && arr[j - 1] > value) {\n            arr[j] = arr[j - 1];\n            --j;\n        }\n        if (j !== i) {\n            arr[j] = value;\n        }\n    }\n    return arr;\n}\n```\n\n### å¿«é€Ÿæ’åº\n- é€‰æ‹©åŸºå‡†å€¼(base)ï¼ŒåŸæ•°ç»„é•¿åº¦å‡ä¸€(åŸºå‡†å€¼)ï¼Œä½¿ç”¨ splice\n- å¾ªç¯åŸæ•°ç»„ï¼Œå°çš„æ”¾å·¦è¾¹(leftæ•°ç»„)ï¼Œå¤§çš„æ”¾å³è¾¹(rightæ•°ç»„);\n- concat(left, base, right)\n- é€’å½’ç»§ç»­æ’åº left ä¸ right\n\n```js\nfunction quickSort(arr) {\n    if(arr.length <= 1) {\n        return arr;  //é€’å½’å‡ºå£\n    }\n    var left = [],\n        right = [],\n        current = arr.splice(0,1); \n    for(let i = 0; i < arr.length; i++) {\n        if(arr[i] < current) {\n            left.push(arr[i])  //æ”¾åœ¨å·¦è¾¹\n        } else {\n            right.push(arr[i]) //æ”¾åœ¨å³è¾¹\n        }\n    }\n    return quickSort(left).concat(current,quickSort(right));\n}\n\nfunction quickSort(arr) {\n    var nLength = arr.length,\n        pivotIndex = Math.floor(nLength / 2),\n        pivot = arr.splice(pivotIndex, 1)[0],\n        left = [],\n        right = [];\n    if (nLength < 2) {\n        return arr;\n    }\n    for (var i = 0; i < arr.length; i++) {\n        if (arr[i] < pivot) {\n            left.push(arr[i]);\n        } else {\n            right.push(arr[i]);\n        }\n    }\n    return arguments.callee(left).concat([pivot], arguments.callee(right));\n}\n```\n\n### å¸Œå°”æ’åº(ä¸å®šæ­¥æ•°çš„æ’å…¥æ’åºï¼Œæ’å…¥æ’åº)\n> æ’å†’å½’åŸºç¨³å®šï¼Œå¿«é€‰å †å¸Œä¸ç¨³å®š\n```js\nfunction shellSort(arr){\n    var nLength = arr.length;\n    if (nLength < 2) {\n        return arr;\n    }\n    for (var step = nLength >> 1; step > 0; step >>= 1) {\n        for (var i = 0; i < step; ++i) {\n            for (var j = i + step; j < nLength; j += step) {\n                var k = j,\n                    value = arr[j];\n                while (k >= step && arr[k - step] > value) {\n                    arr[k] = arr[k - step];\n                    k -= step;\n                }\n                arr[k] = value;\n            }\n        }\n    }\n    return arr;\n}\n```\n![sort](http://cdn.mydearest.cn/blog/images/sort.png)\n","tags":["æ’åº"],"categories":["JS"]},{"title":"è¯¦è§£ Cookieã€ LocalStorage ä¸ SessionStorage","url":"%2Fstorage.html","content":"\n## Cookie(å±äºæ–‡æ¡£å¯¹è±¡æ¨¡å‹DOMæ ‘æ ¹èŠ‚ç‚¹document)\n\nCookie æ˜¯å°ç”œé¥¼çš„æ„æ€ã€‚é¡¾åæ€ä¹‰ï¼Œcookie ç¡®å®éå¸¸å°ï¼Œå®ƒçš„å¤§å°é™åˆ¶ä¸º4KBå·¦å³ã€‚å®ƒçš„ä¸»è¦ç”¨é€”æœ‰ä¿å­˜ç™»å½•ä¿¡æ¯ï¼Œæ¯”å¦‚ä½ ç™»å½•æŸä¸ªç½‘ç«™å¸‚åœºå¯ä»¥çœ‹åˆ°â€œè®°ä½å¯†ç â€ï¼Œè¿™é€šå¸¸å°±æ˜¯é€šè¿‡åœ¨ Cookie ä¸­å­˜å…¥ä¸€æ®µè¾¨åˆ«ç”¨æˆ·èº«ä»½çš„æ•°æ®æ¥å®ç°çš„ã€‚\n\n## localStorage(å±äºæµè§ˆå™¨å¯¹è±¡æ¨¡å‹BOMçš„å¯¹è±¡window)\n\nlocalStorage æ˜¯ HTML5 æ ‡å‡†ä¸­æ–°åŠ å…¥çš„æŠ€æœ¯ï¼Œå®ƒå¹¶ä¸æ˜¯ä»€ä¹ˆåˆ’æ—¶ä»£çš„æ–°ä¸œè¥¿ã€‚æ—©åœ¨ IE 6 æ—¶ä»£ï¼Œå°±æœ‰ä¸€ä¸ªå« userData çš„ä¸œè¥¿ç”¨äºæœ¬åœ°å­˜å‚¨ï¼Œè€Œå½“æ—¶è€ƒè™‘åˆ°æµè§ˆå™¨å…¼å®¹æ€§ï¼Œæ›´é€šç”¨çš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ Flashã€‚è€Œå¦‚ä»Šï¼ŒlocalStorage è¢«å¤§å¤šæ•°æµè§ˆå™¨æ‰€æ”¯æŒï¼Œå¦‚æœä½ çš„ç½‘ç«™éœ€è¦æ”¯æŒ IE6+ï¼Œé‚£ä»¥ userData ä½œä¸ºä½ çš„ polyfill çš„æ–¹æ¡ˆæ˜¯ç§ä¸é”™çš„é€‰æ‹©ã€‚\n\nç¼ºç‚¹ï¼š\n1. å­˜å‚¨å®¹é‡é™åˆ¶ï¼Œå¤§éƒ¨åˆ†æµè§ˆå™¨åº”è¯¥æœ€å¤š5Mã€‚\n2. ä»…æ”¯æŒå­—ç¬¦ä¸²ï¼Œå¦‚æœæ˜¯å­˜å¯¹è±¡è¿˜éœ€è¦å°†ä½¿ç”¨JSON.stringifyå’ŒJSON.parseæ–¹æ³•äº’ç›¸è½¬æ¢ï¼Œæœ‰äº›å•°å—¦ã€‚\n3. è¯»å–éƒ½æ˜¯åŒæ­¥çš„ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿˜æŒºå¥½ä½¿çš„ã€‚ä½†å¦‚æœå­˜å‚¨æ•°æ®æ¯”è¾ƒå¤§ï¼Œä¾‹å¦‚ä¸€å¼ é‡è¦å›¾ç‰‡base64æ ¼å¼å­˜å‚¨äº†ï¼Œè¯»å–å¯èƒ½ä¼šæœ‰å¯æ„ŸçŸ¥çš„å»¶è¿Ÿæ—¶é—´ã€‚\n\n## sessionStorage\n\nsessionStorage ä¸ localStorage çš„æ¥å£ç±»ä¼¼ï¼Œä½†ä¿å­˜æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸä¸ localStorage ä¸åŒã€‚åšè¿‡åç«¯å¼€å‘çš„åŒå­¦åº”è¯¥çŸ¥é“ Session è¿™ä¸ªè¯çš„æ„æ€ï¼Œç›´è¯‘è¿‡æ¥æ˜¯â€œä¼šè¯â€ã€‚è€Œ sessionStorage æ˜¯ä¸€ä¸ªå‰ç«¯çš„æ¦‚å¿µï¼Œå®ƒåªæ˜¯å¯ä»¥å°†ä¸€éƒ¨åˆ†æ•°æ®åœ¨å½“å‰ä¼šè¯ä¸­ä¿å­˜ä¸‹æ¥ï¼Œåˆ·æ–°é¡µé¢æ•°æ®ä¾æ—§å­˜åœ¨ã€‚ä½†å½“é¡µé¢å…³é—­åï¼ŒsessionStorage ä¸­çš„æ•°æ®å°±ä¼šè¢«æ¸…ç©ºã€‚\n\n--- \n<!-- more -->\n\n## ä¸‰è€…çš„å¼‚åŒ\n\n|ç‰¹æ€§|Cookie|localstorage|sessionstorage|\n|:---:|:---:|:---:|\n|ç”Ÿå‘½å‘¨æœŸ|ä¸€èˆ¬ç”±æœåŠ¡å™¨ç”Ÿæˆï¼Œå¯è®¾ç½®å¤±æ•ˆæ—¶é—´ã€‚å¦‚æœåœ¨æµè§ˆå™¨ç«¯ç”ŸæˆCookieï¼Œé»˜è®¤æ˜¯å…³é—­æµè§ˆå™¨åå¤±æ•ˆ|é™¤éè¢«æ¸…é™¤ï¼Œå¦åˆ™æ°¸ä¹…ä¿å­˜|ä»…åœ¨å½“å‰ä¼šè¯ä¸‹æœ‰æ•ˆï¼Œå…³é—­é¡µé¢æˆ–æµè§ˆå™¨åè¢«æ¸…é™¤|\n|æ•°æ®å¤§å°|4K|5M|5M|\n|ä¸æœåŠ¡å™¨ç«¯é€šä¿¡|æ¯æ¬¡éƒ½ä¼šæºå¸¦åœ¨HTTPå¤´ä¸­ï¼Œå¦‚æœä½¿ç”¨cookieä¿å­˜è¿‡å¤šæ•°æ®ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜|ä»…åœ¨å®¢æˆ·ç«¯ï¼ˆå³æµè§ˆå™¨ï¼‰ä¸­ä¿å­˜ï¼Œä¸å‚ä¸å’ŒæœåŠ¡å™¨çš„é€šä¿¡|åŒä¸Š|\n|æ˜“ç”¨æ€§|éœ€è¦è‡ªå·±å°è£…ï¼ŒåŸç”Ÿçš„Cookieæ¥å£ä¸å‹å¥½|å¯ä»¥å°è£…æ¥å¯¹Objectå’ŒArrayæœ‰æ›´å¥½çš„æ”¯æŒ|åŒä¸Š|\n\nè¿˜æœ‰ä¸¤ç§å­˜å‚¨æŠ€æœ¯ç”¨äºå¤§è§„æ¨¡æ•°æ®å­˜å‚¨ï¼ŒwebSQLï¼ˆå·²è¢«åºŸé™¤ï¼‰å’Œ indexDBã€‚\nIE æ”¯æŒ userData å­˜å‚¨æ•°æ®ï¼Œä½†æ˜¯åŸºæœ¬å¾ˆå°‘ä½¿ç”¨åˆ°ï¼Œé™¤éæœ‰å¾ˆå¼ºçš„æµè§ˆå™¨å…¼å®¹éœ€æ±‚ã€‚\n\n## å®‰å…¨æ€§çš„è€ƒè™‘\n\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸æ˜¯ä»€ä¹ˆæ•°æ®éƒ½é€‚åˆæ”¾åœ¨ Cookieã€localStorage å’Œ sessionStorage ä¸­çš„ã€‚ä½¿ç”¨å®ƒä»¬çš„æ—¶å€™ï¼Œéœ€è¦æ—¶åˆ»æ³¨æ„æ˜¯å¦æœ‰ä»£ç å­˜åœ¨ XSS æ³¨å…¥çš„é£é™©ã€‚å› ä¸ºåªè¦æ‰“å¼€æ§åˆ¶å°ï¼Œä½ å°±éšæ„ä¿®æ”¹å®ƒä»¬çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ çš„ç½‘ç«™ä¸­æœ‰ XSS çš„é£é™©ï¼Œå®ƒä»¬å°±èƒ½å¯¹ä½ çš„ localStorage è‚†æ„å¦„ä¸ºã€‚æ‰€ä»¥åƒä¸‡ä¸è¦ç”¨å®ƒä»¬å­˜å‚¨ä½ ç³»ç»Ÿä¸­çš„æ•æ„Ÿæ•°æ®ã€‚\n\n## cookieç”¨æ³•\nJavaScript å¯ä»¥ä½¿ç”¨ document.cookie å±æ€§æ¥åˆ›å»º ã€è¯»å–ã€åŠåˆ é™¤ cookieã€‚\ndocument.cookie=\"username=John Doe\";\n\næ‚¨è¿˜å¯ä»¥ä¸º cookie æ·»åŠ ä¸€ä¸ªè¿‡æœŸæ—¶é—´ï¼ˆä»¥ UTC æˆ– GMT æ—¶é—´ï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œcookie åœ¨æµè§ˆå™¨å…³é—­æ—¶åˆ é™¤ï¼š\ndocument.cookie=\"username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 GMT\";\n\næ‚¨å¯ä»¥ä½¿ç”¨ path å‚æ•°å‘Šè¯‰æµè§ˆå™¨ cookie çš„è·¯å¾„ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œcookie å±äºå½“å‰é¡µé¢ã€‚\ndocument.cookie=\"username=John Doe; expires=Thu, 18 Dec 2013 12:00:00 GMT; path=/\";\n\n```javascript\n// è®¾ç½®cookie\nfunction setCookie(cname,cvalue,exdays)\n{\n  var d = new Date();\n  d.setTime(d.getTime()+(exdays*24*60*60*1000));\n  var expires = \"expires=\"+d.toGMTString();\n  document.cookie = cname + \"=\" + cvalue + \"; \" + expires;\n}\n\nfunction getCookie(name) {\n  var arr = document.cookie.replace(/\\s/g, \"\").split(\";\");\n  for (var i = 0; i < arr.length; i++) {\n    var tempArr = arr[i].split(\"=\");\n    if (tempArr[0] === name) {\n      return decodeURIComponent(tempArr[1]);\n    }\n  }\n  return \"\";\n}\n\n// è·å–æŒ‡å®šcookie\nfunction getCookie2(cname)\n{\n  var name = cname + \"=\";\n  var ca = document.cookie.split(';');\n  for(var i=0; i<ca.length; i++) \n  {\n    var c = ca[i].trim();\n    if (c.indexOf(name)==0) return c.substring(name.length,c.length);\n  }\n  return \"\";\n}\n\nfunction getCookie3(name) {\n  let v = window.document.cookie.match(\"(^|;) ?\" + name + \"=([^;]*)(;|$)\");\n  return v ? v[2] : null;\n}\n\nconst cookie = (n, v) => {\n  if (typeof v !== 'undefined') {\n    window.document.cookie = [n, '=', encodeURIComponent(v)].join('')\n  } else {\n    v = window.document.cookie.match(new RegExp(`(?:\\\\s|^)${n}\\\\=([^;]*)`))\n    return v ? decodeURIComponent(v[1]) : null\n  }\n}\n\n// æ£€æµ‹cookieå‡½æ•°\nfunction checkCookie()\n{\n  var username=getCookie(\"username\");\n  if (username!=\"\")\n  {\n    alert(\"Welcome again \" + username);\n  }\n  else \n  {\n    username = prompt(\"Please enter your name:\",\"\");\n    if (username!=\"\" && username!=null)\n    {\n      setCookie(\"username\",username,365);\n    }\n  }\n}\n```\n## localStorageå’ŒsessionStorageç”¨æ³•(å­˜å‚¨æ•°ç»„ã€æ•°å­—ã€å¯¹è±¡ç­‰å¯ä»¥è¢«åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²çš„å†…å®¹)\nlocalStorageå’ŒsessionStorageç±»ä¼¼(ä¹Ÿå¯ä»¥åƒæ™®é€šå¯¹è±¡ä¸€æ ·ç”¨ç‚¹(.)æ“ä½œç¬¦ï¼ŒåŠ[]çš„æ–¹å¼è¿›è¡Œæ•°æ®å­˜å‚¨)\n\nwindow.localStorage.key(1) // è¯»å–ç´¢å¼•ä¸º1çš„å€¼\n```javascript\n    static setStorage(name, data) {\n        if (typeof data === 'object') {\n            window.localStorage.setItem(name, JSON.stringify(data))\n        } else if (typeof data === 'number' || typeof data === 'string' || typeof data === 'boolean') {\n            window.localStorage.setItem(name, data)\n        } else {\n            alert('è¯¥ç±»å‹ä¸èƒ½ç”¨äºæœ¬åœ°å­˜å‚¨~')\n        }\n    }\n\n    /**\n     * è·å–localstorage\n     */\n    static getStorage(name) {\n        let data = window.localStorage.getItem(name)\n        if (data) {\n            return JSON.parse(data)\n        } else {\n            return ''\n        }\n    }\n\n    /**\n     * åˆ é™¤localstorage\n     */\n    static removeStorage(name) {\n        window.localStorage.removeItem(name)\n    }\n\n    /**\n     * æ¸…ç©ºlocalstorage\n     */\n    static clearStorage() {\n        window.localStorage.clear()\n    }\n```\n\n## cookie ä¸ session çš„åŒºåˆ«\n- Session æ˜¯åœ¨æœåŠ¡ç«¯ä¿å­˜çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨æ¥è·Ÿè¸ªç”¨æˆ·çš„çŠ¶æ€ï¼Œè¿™ä¸ªæ•°æ®å¯ä»¥ä¿å­˜åœ¨é›†ç¾¤ã€æ•°æ®åº“ã€æ–‡ä»¶ä¸­ï¼› \n\n- Cookie æ˜¯å®¢æˆ·ç«¯ä¿å­˜ç”¨æˆ·ä¿¡æ¯çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨æ¥è®°å½•ç”¨æˆ·çš„ä¸€äº›ä¿¡æ¯ï¼Œä¹Ÿæ˜¯å®ç° Session çš„ä¸€ç§æ–¹å¼ã€‚\n\n## è§„é¿localStorageç¼ºç‚¹---localforage\n\nlocalforageçš„é€»è¾‘æ˜¯è¿™æ ·çš„ï¼šä¼˜å…ˆä½¿ç”¨IndexedDBå­˜å‚¨æ•°æ®ï¼Œå¦‚æœæµè§ˆå™¨ä¸æ”¯æŒï¼Œä½¿ç”¨WebSQLï¼Œæµè§ˆå™¨å†ä¸æ”¯æŒï¼Œä½¿ç”¨localStorageã€‚\n\nlocalforageçš„APIåç§°å’ŒlocalStorageä¸€æ ·ï¼Œä½†æ˜¯ï¼Œåœ¨åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ä¸Šå´ä¸åŒï¼Œlocalforageæ˜¯å¼‚æ­¥æ‰§è¡Œçš„ï¼Œç”¨æ³•ç¤ºæ„å¦‚ä¸‹ã€‚\n```javascript\nlocalforage.getItem('key', function (err, value) {\n    // å¦‚æœerrä¸æ˜¯nullï¼Œåˆ™å‡ºé”™ã€‚å¦åˆ™valueå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„å€¼\n});\n```","tags":["æµè§ˆå™¨"],"categories":["JS"]},{"title":"é¢è¯•é¢˜æ•´ç†å½’çº³","url":"%2Finterview.html","content":"\n## å­—ç¬¦ä¸²æ‰©å±•çš„æ–¹æ³•\n- includes()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²ã€‚æ•°ç»„ä¹Ÿå¯ä»¥ a[1]=1 ä¸”èƒ½åˆ¤æ–­undefined\n```js\nvar a=[1,2,3]\na[4]=5 // [1, 2, 3, undefined Ã— 1, 5] empty\n// a[3]=undefined [1, 2, 3, undefined, 5] \n\na.indexOf(undefined) // -1\na.includes(undefined) // true \n```\n- startsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å¤´éƒ¨ã€‚\n```js\n// polyfill\nif (String.prototype.startsWith) {\n  String.prototype.startsWith = function (search, index) {\n    return this.substr((!index || index < 0) ? 0 : index, search.length) === search;\n  }\n}\n```\n- endsWith()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å°¾éƒ¨ã€‚\nstr | index\n- repeat()ï¼šè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå°†åŸå­—ç¬¦ä¸²é‡å¤næ¬¡ã€‚å‚æ•°å¦‚æœæ˜¯å°æ•°ï¼Œä¼šè¢«å–æ•´(ä¸å››èˆäº”å…¥)ã€‚å‚æ•°æ˜¯è´Ÿæ•°æˆ–è€…Infinityï¼Œä¼šæŠ¥é”™ã€‚0/NaNè¿”å›ç©ºå­—ç¬¦ä¸²,å‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œåˆ™ä¼šå…ˆè½¬æ¢æˆæ•°å­—ï¼Œä¸ä¼ åˆ™ä¸ºç©ºå­—ç¬¦ä¸²ã€‚\n- padStart()ï¼šå¤´éƒ¨è¡¥å…¨ã€‚\n- padEnd()ï¼šå°¾éƒ¨è¡¥å…¨\n~~~\n'x'.padStart(5, 'ab') // 'ababx'\n'x'.padStart(4, 'ab') // 'abax'\n\n'x'.padEnd(5, 'ab') // 'xabab'\n'x'.padEnd(4, 'ab') // 'xaba'\n~~~\nå¦‚æœåŸå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œç­‰äºæˆ–å¤§äºæŒ‡å®šçš„æœ€å°é•¿åº¦ï¼Œåˆ™è¿”å›åŸå­—ç¬¦ä¸²ã€‚é»˜è®¤ä½¿ç”¨ç©ºæ ¼\n\n---\n<!-- more -->\n\n- æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆtemplate stringï¼‰æ˜¯å¢å¼ºç‰ˆçš„å­—ç¬¦ä¸²ï¼Œç”¨åå¼•å·\\`æ ‡è¯†ã€‚å®ƒå¯ä»¥å½“ä½œæ™®é€šå­—ç¬¦ä¸²ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ç”¨æ¥å®šä¹‰å¤šè¡Œå­—ç¬¦ä¸²ï¼Œæˆ–è€…åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡ã€‚\\`${è¡¨è¾¾å¼ã€å˜é‡}\\`\n- commonjs æœåŠ¡å™¨ç«¯ amd æµè§ˆå™¨ç«¯\n- const å¿…é¡»èµ‹å€¼å®šä¹‰ let åœ¨åŒä¸€ä½œç”¨äºæ— æ³•é‡å¤å‘½å æ— æ³•å˜é‡æå‡\n- split(å­—ç¬¦ä¸²æˆ–è€…æ­£åˆ™,è®¾ç½®é•¿åº¦) å­—ç¬¦ä¸²=>æ•°ç»„\n- substr(å¼€å§‹çš„ç´¢å¼•//spliceå¯ä»¥ä¸ºè´Ÿæ•°-1åˆ™ä¸ºå­—ç¬¦ä¸²æœ€åä¸€ä¸ªå­—ç¬¦,lengthå­—ç¬¦æ•°)æ–¹æ³•ä¸åŒçš„æ˜¯,substring(å¼€å§‹ç´¢å¼•ï¼Œç»“æŸç´¢å¼•+1)è´Ÿçš„å‚æ•°æœ‰åŒºåˆ«\nåªæœ‰å•å‚æ•°æ—¶åˆ°å­—ç¬¦ä¸²ç»“å°¾\nString exd=filePath.substring(filePath.lastIndexOf(\".\")+1,filePath.length)\n\n## å£°æ˜å‡½æ•°ä½œç”¨æå‡?å£°æ˜å˜é‡å’Œå£°æ˜å‡½æ•°çš„æå‡æœ‰ä»€ä¹ˆåŒºåˆ«?\n\n(1) å˜é‡å£°æ˜æå‡ï¼šå˜é‡ç”³æ˜åœ¨è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡å°±å®Œæˆäº†ã€‚\nåªè¦å˜é‡åœ¨ä»£ç ä¸­è¿›è¡Œäº†å£°æ˜ï¼Œæ— è®ºå®ƒåœ¨å“ªä¸ªä½ç½®ä¸Šè¿›è¡Œå£°æ˜ï¼Œ jså¼•æ“éƒ½ä¼šå°†å®ƒçš„å£°æ˜æ”¾åœ¨èŒƒå›´ä½œç”¨åŸŸçš„é¡¶éƒ¨ï¼›\n\n(2) å‡½æ•°å£°æ˜æå‡ï¼šæ‰§è¡Œä»£ç ä¹‹å‰ä¼šå…ˆè¯»å–å‡½æ•°å£°æ˜ï¼Œæ„å‘³ç€å¯ä»¥æŠŠå‡½æ•°ç”³æ˜æ”¾åœ¨è°ƒç”¨å®ƒçš„è¯­å¥åé¢ã€‚\nåªè¦å‡½æ•°åœ¨ä»£ç ä¸­è¿›è¡Œäº†å£°æ˜ï¼Œæ— è®ºå®ƒåœ¨å“ªä¸ªä½ç½®ä¸Šè¿›è¡Œå£°æ˜ï¼Œ jså¼•æ“éƒ½ä¼šå°†å®ƒçš„å£°æ˜æ”¾åœ¨èŒƒå›´ä½œç”¨åŸŸçš„é¡¶éƒ¨ï¼›\n\n(3) å˜é‡orå‡½æ•°å£°æ˜ï¼šå‡½æ•°å£°æ˜ä¼šè¦†ç›–å˜é‡å£°æ˜ï¼Œä½†ä¸ä¼šè¦†ç›–å˜é‡èµ‹å€¼ã€‚\nåŒä¸€ä¸ªåç§°æ ‡è¯†aï¼Œå³æœ‰å˜é‡å£°æ˜var aï¼Œåˆæœ‰å‡½æ•°å£°æ˜function a() {}ï¼Œä¸ç®¡äºŒè€…å£°æ˜çš„é¡ºåºï¼Œå‡½æ•°å£°æ˜ä¼šè¦†ç›–å˜é‡å£°æ˜ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ­¤æ—¶açš„å€¼æ˜¯å£°æ˜çš„å‡½æ•°function a() {}ã€‚æ³¨æ„ï¼šå¦‚æœåœ¨å˜é‡å£°æ˜çš„åŒæ—¶åˆå§‹åŒ–aï¼Œæˆ–æ˜¯ä¹‹åå¯¹aè¿›è¡Œèµ‹å€¼ï¼Œæ­¤æ—¶açš„å€¼å˜é‡çš„å€¼ã€‚\n```javascript\neg: var a; var c = 1; a = 1; function a() { return true; } console.log(a);\n```\n\n## å¦‚ä½•åˆ¤æ–­æ•°æ®ç±»å‹ï¼Ÿ\ntypeofè¿”å›çš„ç±»å‹éƒ½æ˜¯å­—ç¬¦ä¸²å½¢å¼ï¼Œå¯ä»¥åˆ¤æ–­functionçš„ç±»å‹ï¼›åœ¨åˆ¤æ–­é™¤Objectç±»å‹çš„å¯¹è±¡æ—¶æ¯”è¾ƒæ–¹ä¾¿ã€‚\nåˆ¤æ–­å·²çŸ¥å¯¹è±¡ç±»å‹çš„æ–¹æ³•ï¼š instanceofï¼Œåé¢ä¸€å®šè¦æ˜¯å¯¹è±¡ç±»å‹ï¼Œå¹¶ä¸”å¤§å°å†™ä¸èƒ½é”™ï¼Œè¯¥æ–¹æ³•é€‚åˆä¸€äº›æ¡ä»¶é€‰æ‹©æˆ–åˆ†æ”¯ã€‚\n```javascript\ntypeof null // object null instanceof Object // false\n\nvar str = 'abc';     \nconsole.log(typeof str++);         //number NaN\nconsole.log(typeof ('abc' + 1));   //string 'abc1'\n\nconsole.log(typeof new Date());    //object\nconsole.log(typeof Date());        //string\nconsole.log(typeof Date);          //function\n```\n\n### typeofåŸç†\n- jsåœ¨åº•å±‚å­˜å‚¨å˜é‡çš„æ—¶å€™ï¼Œä¼šåœ¨å˜é‡çš„æœºå™¨ç çš„ä½ä½1-3ä½å­˜å‚¨ç±»å‹ä¿¡æ¯\n - å¯¹è±¡ 000å¼€å¤´\n - null éƒ½ä¸º0\n - æµ®ç‚¹æ•° 010\n - å­—ç¬¦ä¸² 100\n - å¸ƒå°” 110\n - æ•´æ•° 1\n - undefined -2^30\n \n## å¼‚æ­¥ç¼–ç¨‹ï¼Ÿ\n- æ–¹æ³•1ï¼šå›è°ƒå‡½æ•°ï¼Œä¼˜ç‚¹æ˜¯ç®€å•ã€å®¹æ˜“ç†è§£å’Œéƒ¨ç½²ï¼Œç¼ºç‚¹æ˜¯ä¸åˆ©äºä»£ç çš„é˜…è¯»å’Œç»´æŠ¤ï¼Œå„ä¸ªéƒ¨åˆ†ä¹‹é—´é«˜åº¦è€¦åˆï¼ˆCouplingï¼‰ï¼Œæµç¨‹ä¼šå¾ˆæ··ä¹±ï¼Œè€Œä¸”æ¯ä¸ªä»»åŠ¡åªèƒ½æŒ‡å®šä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚\n\n- æ–¹æ³•2ï¼šäº‹ä»¶ç›‘å¬ï¼Œå¯ä»¥ç»‘å®šå¤šä¸ªäº‹ä»¶ï¼Œæ¯ä¸ªäº‹ä»¶å¯ä»¥æŒ‡å®šå¤šä¸ªå›è°ƒå‡½æ•°ï¼Œè€Œä¸”å¯ä»¥â€œå»è€¦åˆâ€ï¼ˆDecouplingï¼‰ï¼Œæœ‰åˆ©äºå®ç°æ¨¡å—åŒ–ã€‚ç¼ºç‚¹æ˜¯æ•´ä¸ªç¨‹åºéƒ½è¦å˜æˆäº‹ä»¶é©±åŠ¨å‹ï¼Œè¿è¡Œæµç¨‹ä¼šå˜å¾—å¾ˆä¸æ¸…æ™°ã€‚\n\n- æ–¹æ³•3ï¼šäº‹ä»¶å‘å¸ƒ/è®¢é˜…ï¼Œæ€§è´¨ä¸â€œäº‹ä»¶ç›‘å¬â€ç±»ä¼¼ï¼Œä½†æ˜¯æ˜æ˜¾ä¼˜äºåè€…ã€‚\n\n- æ–¹æ³•4ï¼šPromiseså¯¹è±¡ï¼Œæ˜¯CommonJSå·¥ä½œç»„æå‡ºçš„ä¸€ç§è§„èŒƒï¼Œç›®çš„æ˜¯ä¸ºå¼‚æ­¥ç¼–ç¨‹æä¾›ç»Ÿä¸€æ¥å£ã€‚ç®€å•è¯´ï¼Œå®ƒçš„æ€æƒ³æ˜¯ï¼Œæ¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰ä¸€ä¸ªthenæ–¹æ³•ï¼Œå…è®¸æŒ‡å®šå›è°ƒå‡½æ•°ã€‚\n\n - generator\n - async/await\n\n## äº‹ä»¶æµï¼Ÿäº‹ä»¶æ•è·ï¼Ÿäº‹ä»¶å†’æ³¡ï¼Ÿ\näº‹ä»¶æµï¼šä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåºã€‚ä¹Ÿå°±æ˜¯è¯´å½“ä¸€ä¸ªäº‹ä»¶äº§ç”Ÿæ—¶ï¼Œè¿™ä¸ªäº‹ä»¶çš„ä¼ æ’­è¿‡ç¨‹ï¼Œå°±æ˜¯äº‹ä»¶æµã€‚\n\näº‹ä»¶çš„ä¼ æ’­åˆ†ä¸º3ä¸ªé˜¶æ®µï¼š\n1. æ•è·é˜¶æ®µï¼šäº‹ä»¶ä»windowå¯¹è±¡è‡ªä¸Šè€Œä¸‹å‘ç›®æ ‡èŠ‚ç‚¹ä¼ æ’­çš„é˜¶æ®µï¼›\n2. ç›®æ ‡é˜¶æ®µï¼šçœŸæ­£çš„ç›®æ ‡èŠ‚ç‚¹æ­£åœ¨å¤„ç†äº‹ä»¶çš„é˜¶æ®µï¼›\n3. å†’æ³¡é˜¶æ®µï¼šäº‹ä»¶ä»ç›®æ ‡èŠ‚ç‚¹è‡ªä¸‹è€Œä¸Šå‘windowå¯¹è±¡ä¼ æ’­çš„é˜¶æ®µï¼›\n\näº‹ä»¶æ•è·æ˜¯ä¸å¤ªå…·ä½“çš„å…ƒç´ åº”è¯¥æ›´æ—©æ¥å—åˆ°äº‹ä»¶ï¼Œè€Œæœ€å…·ä½“çš„èŠ‚ç‚¹åº”è¯¥æœ€åæ¥æ”¶åˆ°äº‹ä»¶ã€‚ä»–ä»¬çš„ç”¨æ„æ˜¯åœ¨äº‹ä»¶åˆ°è¾¾ç›®æ ‡ä¹‹å‰å°±æ•è·å®ƒã€‚\näº‹ä»¶å†’æ³¡ï¼šäº‹ä»¶å¼€å§‹æ—¶ç”±æœ€å…·ä½“çš„å…ƒç´ æ¥æ”¶ï¼Œç„¶åé€çº§å‘ä¸Šä¼ æ’­åˆ°è¾ƒä¸ºä¸å…·ä½“çš„èŠ‚ç‚¹ï¼ˆæ–‡æ¡£ï¼‰ã€‚\n\n> å¹¶ä¸æ˜¯æ‰€æœ‰çš„äº‹ä»¶éƒ½èƒ½å†’æ³¡\n- onblur\n- onfocus\n- onmouseenter\n- onmouseleave\n\n![boardcast](http://cdn.mydearest.cn/blog/images/boardcast.png)\n\n```html\n<nav id=\"root_b\">\n  <ul id=\"first_b\">\n    <li id=\"second_b\"><a id=\"target_b\" href=\"#\">å†’æ³¡</a></li>\n  </ul>\n</nav>\n<nav id=\"root_c\">\n  <ul id=\"first_c\">\n    <li id=\"second_c\"><a id=\"target_c\" href=\"#\">æ•è·</a></li>\n  </ul>\n</nav>\n```\n```js\n/**\n* listen\n* @param {string[]} ids \n* @param {boolean} isCatch \n*/\nconst listen = (ids, isCatch) => ids.forEach(id => document.getElementById(id).addEventListener('click', () => alert(id), isCatch))\n\n// BubbleEvent\nlisten(['root_b', 'first_b', 'second_b', 'target_b'], false)\n\n// CatchEvent\nlisten(['root_c', 'first_c', 'second_c', 'target_c'], true)\n```\n\n## å¦‚ä½•æ·»åŠ ä¸€ä¸ªdomå¯¹è±¡åˆ°bodyä¸­?innerHTMLã€document.writeå’ŒinnerTextåŒºåˆ«?\nbody.appendChild(domå…ƒç´ )ï¼›  \ninnerHTML:ä»å¯¹è±¡çš„èµ·å§‹ä½ç½®åˆ°ç»ˆæ­¢ä½ç½®çš„å…¨éƒ¨å†…å®¹,åŒ…æ‹¬Htmlæ ‡ç­¾ã€‚\ninnerText:ä»èµ·å§‹ä½ç½®åˆ°ç»ˆæ­¢ä½ç½®çš„å†…å®¹, ä½†å®ƒå»é™¤Htmlæ ‡ç­¾ \ndocument.writeåªèƒ½é‡ç»˜æ•´ä¸ªé¡µé¢\n\n## ç®€è¿°ajaxæµç¨‹  \n1)å®¢æˆ·ç«¯äº§ç”Ÿè§¦å‘jsçš„äº‹ä»¶  \n2)åˆ›å»ºXMLHttpRequestå¯¹è±¡  \n```js \nvar client=null\nif(window.XMLHttpRequest){\n      client = new XMLHttpRequest();\n}else{\n      client = new ActiveXObject(\"Microsoft.XMLHTTP\");\n}\n```\n3)å¯¹XMLHttpRequestè¿›è¡Œé…ç½® \n```js   \nclient.open(\"GET\", url);\nclient.onreadystatechange = function(e) {\n    if (client.readyState !== 4) { // clientçŠ¶æ€\n      return;\n    }\n    if (client.status === 200) { // HTTPçŠ¶æ€ç \n      console.log('success', client.responseText);\n    } else {\n      console.warn('error');\n    }\n}; // æŒ‡å®šå›è°ƒå‡½æ•°\nclient.responseType = \"json\";\nclient.setRequestHeader(\"Accept\", \"application/json;\");\nclient.setRequestHeader(\"Content-Type\", \"application/json;charset=utf-8\");\n```\n4)é€šè¿‡AJAXå¼•æ“å‘é€å¼‚æ­¥è¯·æ±‚ \n```javascript\n  client.send()\n```\n`promise å°è£…`\n```js\n/**\n  * @param {string} url\n  * @param {string} method\n  * @param {object} params\n  * @returns\n  */\nfunction request(url, method = 'GET', params = null) {\n  return new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest()\n    xhr.open(method, url)\n    xhr.addEventListener('readystatechange', () => {\n      if (xhr.readyState === 4) {\n        if (xhr.status === 200) {\n          resolve(xhr.responseText)\n        } else {\n          reject({\n            code: xhr.status,\n            response: xhr.response\n          })\n        }\n      }\n    })\n    setTimeout(() => reject('timeout:1000'), 1000)\n    xhr.send(JSON.stringify(params))\n  })\n}\n```\n5)æœåŠ¡å™¨ç«¯æ¥æ”¶è¯·æ±‚å¹¶ä¸”å¤„ç†è¯·æ±‚ï¼Œè¿”å›htmlæˆ–è€…xmlå†…å®¹  \n6)XMLè°ƒç”¨ä¸€ä¸ªcallback()å¤„ç†å“åº”å›æ¥çš„å†…å®¹  \n7)ä½¿ç”¨JSå’ŒDOMå®ç°å±€éƒ¨åˆ·æ–°\n\n## è‡ªæ‰§è¡Œå‡½æ•°ï¼Ÿç”¨äºä»€ä¹ˆåœºæ™¯ï¼Ÿå¥½å¤„ï¼Ÿ  \n1ã€å£°æ˜ä¸€ä¸ªåŒ¿åå‡½æ•°  \n2ã€é©¬ä¸Šè°ƒç”¨è¿™ä¸ªåŒ¿åå‡½æ•°ã€‚  \nä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸã€‚  \n\nå¥½å¤„ï¼šé˜²æ­¢å˜é‡å¼¥æ•£åˆ°å…¨å±€ï¼Œä»¥å…å„ç§jsåº“å†²çªã€‚éš”ç¦»ä½œç”¨åŸŸé¿å…æ±¡æŸ“ï¼Œæˆ–è€…æˆªæ–­ä½œç”¨åŸŸé“¾ï¼Œé¿å…é—­åŒ…é€ æˆå¼•ç”¨å˜é‡æ— æ³•é‡Šæ”¾ã€‚åˆ©ç”¨ç«‹å³æ‰§è¡Œç‰¹æ€§ï¼Œè¿”å›éœ€è¦çš„ä¸šåŠ¡å‡½æ•°æˆ–å¯¹è±¡ï¼Œé¿å…æ¯æ¬¡é€šè¿‡æ¡ä»¶åˆ¤æ–­æ¥å¤„ç†ã€‚\n\nåœºæ™¯ï¼šä¸€èˆ¬ç”¨äºæ¡†æ¶ã€æ’ä»¶ç­‰åœºæ™¯ï¼Œè®¾è®¡ç§æœ‰å˜é‡å’Œæ–¹æ³•ï¼Œå°é—­ç§æœ‰ä½œç”¨åŸŸã€‚\n\n## ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼(IIFE)\n### ä½¿ç”¨åŒ¿åå‡½æ•°è¡¨è¾¾å¼\n```js\nvar a = 2;\n(function IIFE(){\n\tvar a = 3;\n\tconsole.log(a);//3\n})();\nconsole.log(a);//2\n```\n### å½“ä½œå‡½æ•°è°ƒç”¨å¹¶ä¼ é€’å‚æ•°è¿›å»\n```js\nvar a = 2;\n(function IIFE(global){\n\tvar a = 3;\n\tconsole.log(a);//3\n\tconsole.log(global.a);//2\n})(window);\nconsole.log(a);//2\n```\n### è§£å†³undefinedæ ‡è¯†ç¬¦é»˜è®¤å€¼è¢«é”™è¯¯è¦†ç›–\n```js\nundefined = true;\n(function IIFE(){\n\tvar a ;\n\tif(a === undefined){\n\t\tconsole.log('Undefined is safe here!');\n\t}\n})();\n```\n### å€’ç½®ä»£ç è¿è¡Œé¡ºåº\n```js\nvar a = 2;\n(function IIFE(def){\n\tdef(window);\n})(function def(global){\n\tvar a = 3;\n\tconsole.log(a);//3\n\tconsole.log(global.a);//2\n});\n```\n\n```js\nvar i = 1;\nvar IFun = (function(){\n\tvar i = 1;\n\tconsole.log(i);\n\treturn function(){\n\t\ti++;\n\t\tconsole.log(i);\n}\n})();\nIFun();\nIFun();\næœ€ç»ˆè¾“å‡ºçš„ç»“æœä¸º1ï¼Œ2ï¼Œ3ï¼Œå¾ˆå¤šäººä¼šä¸‹æ„è¯†çš„è§‰å¾—ç»“æœä¼šæœ‰4ä¸ªå€¼ï¼Œä½†æ˜¯è¿ç”¨äº†return è¿”å›å€¼ä»¥åŠè‡ªæ‰§è¡Œå‡½æ•°å°†å‡½æ•°è¿”å›ç»™IFunå˜é‡ï¼Œä½¿å¾—åœ¨ç¬¬ä¸€æ¬¡æ“ä½œè¿‡ç¨‹åï¼Œå°†è¿”å›å‡½æ•°ç›´æ¥èµ‹ç»™IFunã€‚\n```\n\n### ä½œç”¨\n1. åˆ›å»ºä½œç”¨åŸŸï¼Œå†…éƒ¨ä¿å­˜ä¸€äº›å¤§é‡ä¸´æ—¶å˜é‡çš„ä»£ç é˜²æ­¢å‘½åå†²çªã€‚\n2. ä¸€äº›åº“çš„å¤–å±‚ç”¨è¿™ç§å½¢å¼åŒ…èµ·æ¥é˜²æ­¢ä½œç”¨åŸŸæ±¡æŸ“ã€‚\n3. è¿è¡Œä¸€äº›åªæ‰§è¡Œä¸€æ¬¡çš„ä»£ç \n\n## å›è°ƒå‡½æ•°ï¼Ÿï¼ˆä¼ é€’åœ°å€ï¼Œç”±éå®ç°æ–¹è°ƒç”¨ï¼‰  \nå›è°ƒå‡½æ•°å°±æ˜¯ä¸€ä¸ªé€šè¿‡å‡½æ•°æŒ‡é’ˆè°ƒç”¨çš„å‡½æ•°ã€‚å¦‚æœä½ æŠŠå‡½æ•°çš„æŒ‡é’ˆï¼ˆåœ°å€ï¼‰ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°ï¼Œå½“è¿™ä¸ªæŒ‡é’ˆè¢«ç”¨æ¥è°ƒç”¨å…¶æ‰€æŒ‡å‘çš„å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å°±è¯´è¿™æ˜¯å›è°ƒå‡½\næ•°ã€‚å›è°ƒå‡½æ•°ä¸æ˜¯ç”±è¯¥å‡½æ•°çš„å®ç°æ–¹ç›´æ¥è°ƒç”¨ï¼Œè€Œæ˜¯åœ¨ç‰¹å®šçš„äº‹ä»¶æˆ–æ¡ä»¶å‘ç”Ÿæ—¶ç”±å¦å¤–çš„ä¸€æ–¹è°ƒç”¨çš„ï¼Œç”¨äºå¯¹è¯¥äº‹ä»¶æˆ–æ¡ä»¶è¿›è¡Œå“åº”ã€‚\n\n## ä»€ä¹ˆæ˜¯é—­åŒ…?å †æ ˆæº¢å‡ºæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ å†…å­˜æ³„æ¼? é‚£äº›æ“ä½œä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Ÿæ€ä¹ˆæ ·é˜²æ­¢å†…å­˜æ³„æ¼ï¼Ÿimpression  \né—­åŒ…ï¼šå°±æ˜¯èƒ½å¤Ÿè¯»å–å…¶ä»–å‡½æ•°å†…éƒ¨å˜é‡çš„å‡½æ•°ã€‚ä¸€èˆ¬æ˜¯æŒ‡å†…å±‚å‡½æ•°ã€‚(å­å‡½æ•°åœ¨å¤–è°ƒç”¨ï¼Œå­å‡½æ•°æ‰€åœ¨çš„çˆ¶å‡½æ•°çš„ä½œç”¨åŸŸä¸ä¼šè¢«é‡Šæ”¾ã€‚) \n\nå †æ ˆæº¢å‡ºï¼šå°±æ˜¯ä¸é¡¾å †æ ˆä¸­åˆ†é…çš„å±€éƒ¨æ•°æ®å—å¤§å°ï¼Œå‘è¯¥æ•°æ®å—å†™å…¥äº†è¿‡å¤šçš„æ•°æ®ï¼Œå¯¼è‡´æ•°æ®è¶Šç•Œï¼Œç»“æœè¦†ç›–äº†åˆ«çš„æ•°æ®ã€‚ç»å¸¸ä¼šåœ¨é€’å½’ä¸­å‘ç”Ÿã€‚\n\nå†…å­˜æ³„æ¼æ˜¯æŒ‡ï¼šç”¨åŠ¨æ€å­˜å‚¨åˆ†é…å‡½æ•°å†…å­˜ç©ºé—´ï¼Œåœ¨ä½¿ç”¨å®Œæ¯•åæœªé‡Šæ”¾ï¼Œå¯¼è‡´ä¸€ç›´å æ®è¯¥å†…å­˜å•å…ƒã€‚ç›´åˆ°ç¨‹åºç»“æŸã€‚æŒ‡ä»»ä½•å¯¹è±¡åœ¨æ‚¨ä¸å†æ‹¥æœ‰æˆ–éœ€è¦å®ƒä¹‹åä»ç„¶å­˜åœ¨ã€‚\n\né€ æˆå†…å­˜æ³„æ¼ï¼š\nsetTimeout çš„ç¬¬ä¸€ä¸ªå‚æ•°ä½¿ç”¨å­—ç¬¦ä¸²è€Œéå‡½æ•°çš„è¯ï¼Œä¼šå¼•å‘å†…å­˜æ³„æ¼ã€‚\né—­åŒ…ã€æ§åˆ¶å°æ—¥å¿—ã€å¾ªç¯ï¼ˆåœ¨ä¸¤ä¸ªå¯¹è±¡å½¼æ­¤å¼•ç”¨ä¸”å½¼æ­¤ä¿ç•™æ—¶ï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ªå¾ªç¯ï¼‰\n\né˜²æ­¢å†…å­˜æ³„æ¼ï¼š  \n1ã€ä¸è¦åŠ¨æ€ç»‘å®šäº‹ä»¶ï¼›      \n2ã€ä¸è¦åœ¨åŠ¨æ€æ·»åŠ ï¼Œæˆ–è€…ä¼šè¢«åŠ¨æ€ç§»é™¤çš„domä¸Šç»‘äº‹ä»¶ï¼Œç”¨äº‹ä»¶å†’æ³¡åœ¨çˆ¶å®¹å™¨ç›‘å¬äº‹ä»¶ï¼›  \n3ã€å¦‚æœè¦è¿åä¸Šé¢çš„åŸåˆ™ï¼Œå¿…é¡»æä¾›destroyæ–¹æ³•ï¼Œä¿è¯ç§»é™¤domåäº‹ä»¶ä¹Ÿè¢«ç§»é™¤ï¼Œè¿™ç‚¹å¯ä»¥å‚è€ƒBackboneçš„æºä»£ç ï¼Œåšçš„æ¯”è¾ƒå¥½ï¼›  \n4ã€å•ä¾‹åŒ–ï¼Œå°‘åˆ›å»ºdomï¼Œå°‘ç»‘äº‹ä»¶ã€‚\n\nåŸå› ï¼š\nå…¨å±€å˜é‡æ²¡æœ‰æ‰‹åŠ¨é”€æ¯ï¼Œå› ä¸ºå…¨å±€å˜é‡ä¸ä¼šè¢«å›æ”¶\né—­åŒ…ï¼šé—­åŒ…ä¸­çš„å˜é‡è¢«å…¨å±€å¯¹è±¡å¼•ç”¨ï¼Œåˆ™é—­åŒ…ä¸­çš„å±€éƒ¨å˜é‡ä¸èƒ½é‡Šæ”¾\nç›‘å¬äº‹ä»¶æ·»åŠ åï¼Œæ²¡æœ‰ç§»é™¤ï¼Œä¼šå¯¼è‡´å†…å­˜æ³„æ¼\n- æ„å¤–çš„å…¨å±€å˜é‡æ— æ³•è¢«å›æ”¶\n- é—­åŒ…\n- å®šæ—¶å™¨æœªåˆ é™¤è¢«æ­£ç¡®å…³é—­\n- domäº‹ä»¶æœªæ¸…é™¤\n- domå…ƒç´ åˆ é™¤å†…å­˜å­˜åœ¨å¼•ç”¨\n\n## htmlå’Œxhtmlæœ‰ä»€ä¹ˆåŒºåˆ«?\nHTMLæ˜¯ä¸€ç§åŸºæœ¬çš„WEBç½‘é¡µè®¾è®¡è¯­è¨€ï¼ŒXHTMLæ˜¯ä¸€ä¸ªåŸºäºXMLçš„æ ‡è®°è¯­è¨€ã€‚\n\n1.XHTML å…ƒç´ å¿…é¡»è¢«æ­£ç¡®åœ°åµŒå¥—ã€‚\n\n2.XHTML å…ƒç´ å¿…é¡»è¢«å…³é—­ã€‚\n\n3.æ ‡ç­¾åå¿…é¡»ç”¨å°å†™å­—æ¯ã€‚\n\n4.ç©ºæ ‡ç­¾ä¹Ÿå¿…é¡»è¢«å…³é—­ã€‚\n\n5.XHTML æ–‡æ¡£å¿…é¡»æ‹¥æœ‰æ ¹å…ƒç´ ã€‚\n\n## ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°ï¼Ÿä¸æ™®é€šå‡½æ•°æœ‰ä»€ä¹ˆåŒºåˆ«?\næ„é€ å‡½æ•°ï¼šæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–¹æ³•(å‡½æ•°ã€å¯¹è±¡)ã€ä¸»è¦ç”¨æ¥åˆ›å»ºå¯¹è±¡æ—¶åˆå§‹åŒ–å¯¹è±¡ï¼Œæ€»ä¸newè¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œåˆ›å»ºå¯¹è±¡çš„è¯­å¥ä¸­æ„é€ å‡½æ•°çš„å‡½æ•°åå¿…é¡»ä¸ç±»åå®Œå…¨ç›¸åŒã€‚\n\nä¸æ™®é€šå‡½æ•°ç›¸æ¯”åªèƒ½ç”±newå…³é”®å­—è°ƒç”¨ï¼Œæ„é€ å‡½æ•°æ˜¯ç±»çš„æ ‡è¯†ã€‚\n\n## é€šè¿‡newåˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå‡½æ•°å†…éƒ¨æœ‰å“ªäº›æ”¹å˜ï¼Ÿ\n```javascript\nfunction Person(){}\nPerson.prototype.friend = [];\nPerson.prototype.age = 18;\n  var a = new Person();\n  a.friend[0] = 'æ–¹æ¶›'; // a.friend=['123'] æŒ‡å‘æ–°å¯¹è±¡ b.friend // []\n  a.age = 18;\n  var b = new Person();\n  b.friend // ['æ–¹æ¶›'] \n  b.age   // 18\n```\n> 1ã€åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¹¶ä¸” this å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ï¼ŒåŒæ—¶è¿˜ç»§æ‰¿äº†è¯¥å‡½æ•°çš„åŸå‹ã€‚   \n> 2ã€å±æ€§å’Œæ–¹æ³•è¢«åŠ å…¥åˆ° this å¼•ç”¨çš„å¯¹è±¡ä¸­ã€‚  \n> 3ã€æ–°åˆ›å»ºçš„å¯¹è±¡ç”± this æ‰€å¼•ç”¨ï¼Œå¹¶ä¸”æœ€åéšå¼çš„è¿”å› this ã€‚\n\n`new æ“ä½œç¬¦æ–°å»ºäº†ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„prototypeï¼Œæ‰§è¡Œæ„é€ å‡½æ•°åè¿”å›è¿™ä¸ªå¯¹è±¡ã€‚`\n\n- åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼švar obj = {}\n\n- å°†ç©ºå¯¹è±¡çš„__proto__æŒ‡å‘æ„é€ å‡½æ•°çš„ prototypeï¼šobj.__proto__ = Person().prototype\n\n- ä½¿ç”¨ç©ºå¯¹è±¡ä½œä¸ºä¸Šä¸‹æ–‡è°ƒç”¨æ„é€ å‡½æ•°ï¼š Person.call(obj)\n\n```js\nfunction myNew (fn, ...args) {\n  let instance = Object.create(fn.prototype);\n  let result = fn.call(instance, ...args)\n  return typeof result === 'object' ? result : instance;\n}\n```\n\n## äº‹ä»¶å§”æ‰˜çš„å¥½å¤„éƒ½æœ‰å•¥ï¼Ÿè¯´å¯¹äº†éƒ½ç»™å®ƒ=3=\n- åˆ©ç”¨å†’æ³¡çš„åŸç†ï¼ŒæŠŠäº‹ä»¶åŠ åˆ°çˆ¶çº§ä¸Šï¼Œè§¦å‘æ‰§è¡Œæ•ˆæœ  \n\n- å¥½å¤„ï¼šæ–°æ·»åŠ çš„å…ƒç´ è¿˜ä¼šæœ‰ä¹‹å‰çš„äº‹ä»¶ï¼›æé«˜æ€§èƒ½ã€‚\n\n## èŠ‚ç‚¹ç±»å‹?åˆ¤æ–­å½“å‰èŠ‚ç‚¹ç±»å‹?\n- å…ƒç´ èŠ‚ç‚¹ \n- å±æ€§èŠ‚ç‚¹ \n- æ–‡æœ¬èŠ‚ç‚¹ \n- æ³¨é‡ŠèŠ‚ç‚¹ \n- æ–‡æ¡£èŠ‚ç‚¹\n\né€šè¿‡nodeObject.nodeTypeåˆ¤æ–­èŠ‚ç‚¹ç±»å‹ï¼šå…¶ä¸­ï¼ŒnodeObject ä¸ºDOMèŠ‚ç‚¹ï¼ˆèŠ‚ç‚¹å¯¹è±¡ï¼‰ã€‚è¯¥å±æ€§è¿”å›ä»¥æ•°å­—è¡¨ç¤ºçš„èŠ‚ç‚¹ç±»å‹ï¼Œä¾‹å¦‚ï¼Œå…ƒç´ èŠ‚ç‚¹è¿”å› 1ï¼Œå±æ€§èŠ‚ç‚¹è¿”å› 2 ã€‚\n\n## æ•°ç»„åˆå¹¶çš„æ–¹æ³•ï¼Ÿ\n```js\n// å››ç§æ–¹æ³•ã€‚\nvar arr1=[1,2,3];\nvar arr2=[4,5,6];\narr1 = arr1.concat(arr2);\nconsole.log(arr1); \n\nvar arr1=[1,2,3];\nvar arr2=[4,5,6];\nArray.prototype.push.apply(arr1,arr2);\nconsole.log(arr1);\n\nvar arr1=[1,2,3];\nvar arr2=[4,5,6];\nfor (var i=0; i < arr2.length; i++) {\narr1.push( arr2[i] );\n}\nconsole.log(arr1); \n\nvar arr1=[1,2,3];\nvar arr2=[4,5,6];\n\narr1.push(...arr2)\n```\n\n## jqueryå’Œzeptoæœ‰ä»€ä¹ˆåŒºåˆ«?\n- é’ˆå¯¹ç§»åŠ¨ç«¯ç¨‹åºï¼ŒZeptoæœ‰ä¸€äº›åŸºæœ¬çš„è§¦æ‘¸äº‹ä»¶å¯ä»¥ç”¨æ¥åšè§¦æ‘¸å±äº¤äº’ï¼ˆtapäº‹ä»¶ã€swipeäº‹ä»¶ï¼‰ï¼ŒZeptoæ˜¯ä¸æ”¯æŒIEæµè§ˆå™¨çš„ï¼Œè¿™ä¸æ˜¯Zeptoçš„å¼€å‘è€…Thomas Fucksåœ¨è·¨æµè§ˆå™¨é—®é¢˜ä¸ŠçŠ¯äº†è¿·ç³Šï¼Œè€Œæ˜¯ç»è¿‡äº†è®¤çœŸè€ƒè™‘åä¸ºäº†é™ä½æ–‡ä»¶å°ºå¯¸è€Œåšå‡ºçš„å†³å®šï¼Œå°±åƒjQueryçš„å›¢é˜Ÿåœ¨2.0ç‰ˆä¸­ä¸å†æ”¯æŒæ—§ç‰ˆçš„IEï¼ˆ6 7 8ï¼‰ä¸€æ ·ã€‚å› ä¸ºZeptoä½¿ç”¨jQueryå¥æ³•ï¼Œæ‰€ä»¥å®ƒåœ¨æ–‡æ¡£ä¸­å»ºè®®æŠŠjQueryä½œä¸ºIEä¸Šçš„åå¤‡åº“ã€‚é‚£æ ·ç¨‹åºä»èƒ½åœ¨IEä¸­ï¼Œè€Œå…¶ä»–æµè§ˆå™¨åˆ™èƒ½äº«å—åˆ°Zeptoåœ¨æ–‡ä»¶å¤§å°ä¸Šçš„ä¼˜åŠ¿ï¼Œç„¶è€Œå®ƒä»¬ä¸¤ä¸ªçš„APIä¸æ˜¯å®Œå…¨å…¼å®¹çš„ï¼Œæ‰€ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•æ—¶ä¸€å®šè¦å°å¿ƒï¼Œå¹¶è¦åšå……åˆ†çš„æµ‹è¯•ã€‚\n\n- Domæ“ä½œçš„åŒºåˆ«ï¼šæ·»åŠ idæ—¶jQueryä¸ä¼šç”Ÿæ•ˆè€ŒZeptoä¼šç”Ÿæ•ˆã€‚\n\n- zeptoä¸»è¦ç”¨åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œåªæ”¯æŒè¾ƒæ–°çš„æµè§ˆå™¨ï¼Œå¥½å¤„æ˜¯ä»£ç é‡æ¯”è¾ƒå°ï¼Œæ€§èƒ½ä¹Ÿè¾ƒå¥½ã€‚\njqueryä¸»è¦æ˜¯å…¼å®¹æ€§å¥½ï¼Œå¯ä»¥è·‘åœ¨å„ç§pcï¼Œç§»åŠ¨ä¸Šï¼Œå¥½å¤„æ˜¯å…¼å®¹å„ç§æµè§ˆå™¨ï¼Œç¼ºç‚¹æ˜¯ä»£ç é‡å¤§ï¼ŒåŒæ—¶è€ƒè™‘å…¼å®¹ï¼Œæ€§èƒ½ä¹Ÿä¸å¤Ÿå¥½ã€‚\n\n## $(function(){})å’Œwindow.onload å’Œ $(document).ready(function(){})\n\n- window.onload:ç”¨äºå½“é¡µé¢çš„æ‰€æœ‰å…ƒç´ ï¼ŒåŒ…æ‹¬å¤–éƒ¨å¼•ç”¨æ–‡ä»¶ï¼Œå›¾ç‰‡ç­‰éƒ½åŠ è½½å®Œæ¯•æ—¶è¿è¡Œå‡½æ•°å†…çš„å‡½æ•°ã€‚loadæ–¹æ³•åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœåœ¨jsæ–‡ä»¶é‡Œå†™äº†å¤šä¸ªï¼Œåªèƒ½æ‰§è¡Œæœ€åä¸€ä¸ªã€‚\n\n- $(document).ready(function(){})å’Œ$(function(){})éƒ½æ˜¯ç”¨äºå½“é¡µé¢çš„æ ‡å‡†DOMå…ƒç´ è¢«è§£ææˆDOMæ ‘åå°±æ‰§è¡Œå†…éƒ¨å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°æ˜¯å¯ä»¥åœ¨jsæ–‡ä»¶é‡Œå¤šæ¬¡ç¼–å†™çš„ï¼Œå¯¹äºå¤šäººå…±åŒç¼–å†™çš„jså°±æœ‰å¾ˆå¤§çš„ä¼˜åŠ¿ï¼Œå› ä¸ºæ‰€æœ‰è¡Œä¸ºå‡½æ•°éƒ½ä¼šæ‰§è¡Œåˆ°ã€‚è€Œä¸”$(document).ready()å‡½æ•°åœ¨HMTLç»“æ„åŠ è½½å®Œåå°±å¯ä»¥æ‰§è¡Œï¼Œä¸éœ€è¦ç­‰å¤§å‹æ–‡ä»¶åŠ è½½æˆ–è€…ä¸å­˜åœ¨çš„è¿æ¥ç­‰è€—æ—¶å·¥ä½œå®Œæˆæ‰æ‰§è¡Œï¼Œæ•ˆç‡é«˜ã€‚\n\n## ç®€è¿°ä¸‹ this å’Œå®šä¹‰å±æ€§å’Œæ–¹æ³•çš„æ—¶å€™æœ‰ä»€ä¹ˆåŒºåˆ«?Prototypeï¼Ÿ\n\n- thisè¡¨ç¤ºå½“å‰å¯¹è±¡ï¼Œå¦‚æœåœ¨å…¨å±€ä½œç”¨èŒƒå›´å†…ä½¿ç”¨thisï¼Œåˆ™æŒ‡ä»£å½“å‰é¡µé¢å¯¹è±¡windowï¼› å¦‚æœåœ¨å‡½æ•°ä¸­ä½¿ç”¨thisï¼Œåˆ™thisæŒ‡ä»£ä»€ä¹ˆæ˜¯æ ¹æ®è¿è¡Œæ—¶æ­¤å‡½æ•°åœ¨ä»€ä¹ˆå¯¹è±¡ä¸Šè¢«è°ƒç”¨ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨applyå’Œcallä¸¤ä¸ªå…¨å±€æ–¹æ³•æ¥æ”¹å˜å‡½æ•°ä¸­thisçš„å…·ä½“æŒ‡å‘ã€‚\n\n- prototypeæœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªJavaScriptå¯¹è±¡ã€‚ å¹¶ä¸”æ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªé»˜è®¤çš„prototypeå±æ€§ã€‚\n\n- åœ¨prototypeä¸Šå®šä¹‰çš„å±æ€§æ–¹æ³•ä¸ºæ‰€æœ‰å®ä¾‹å…±äº«ï¼Œæ‰€æœ‰å®ä¾‹çš†å¼•ç”¨åˆ°åŒä¸€ä¸ªå¯¹è±¡ï¼Œå•ä¸€å®ä¾‹å¯¹åŸå‹ä¸Šçš„å±æ€§è¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿä¼šå½±å“åˆ°æ‰€æœ‰å…¶ä»–å®ä¾‹ã€‚\n\n## ajaxå’Œjsonpçš„åŒºåˆ«ï¼Ÿ\n- ç›¸åŒç‚¹ï¼šéƒ½æ˜¯è¯·æ±‚ä¸€ä¸ªurl\n- ä¸åŒç‚¹ï¼šajaxçš„æ ¸å¿ƒæ˜¯é€šè¿‡XMLHttpRequestè·å–å†…å®¹ï¼Œjsonpåªèƒ½getè¯·æ±‚\n- jsonpçš„æ ¸å¿ƒåˆ™æ˜¯åŠ¨æ€æ·»åŠ `<script>`æ ‡ç­¾æ¥è°ƒç”¨æœåŠ¡å™¨æä¾›çš„jsè„šæœ¬ã€‚\n\n## å¸¸è§çš„httpåè®®çŠ¶æ€ç ï¼Ÿ\n```js\n1xx (ä¸´æ—¶å“åº”)\n100: ç»§ç»­(æ­£åœ¨åŠ è½½)\n101ï¼šåˆ‡æ¢åè®®  \n200ï¼šè¯·æ±‚æˆåŠŸ\n201ï¼šè¯·æ±‚æˆåŠŸå¹¶ä¸”æœåŠ¡å™¨åˆ›å»ºäº†æ–°çš„èµ„æº\n302ï¼šæœåŠ¡å™¨ç›®å‰ä»ä¸åŒä½ç½®çš„ç½‘é¡µå“åº”è¯·æ±‚ï¼Œä½†è¯·æ±‚è€…åº”ç»§ç»­ä½¿ç”¨åŸæœ‰ä½ç½®æ¥å“åº”ä»¥åçš„è¯·æ±‚ã€‚\n304ï¼šè‡ªä»ä¸Šæ¬¡è¯·æ±‚åï¼Œè¯·æ±‚çš„ç½‘é¡µæœªä¿®æ”¹è¿‡ã€‚æœåŠ¡å™¨è¿”å›æ­¤å“åº”æ—¶ï¼Œä¸ä¼šè¿”å›ç½‘é¡µå†…å®¹ã€‚\n400ï¼šæœåŠ¡å™¨ä¸ç†è§£è¯·æ±‚çš„è¯­æ³•ã€‚\n403ï¼šè¯¥çŠ¶æ€è¡¨ç¤ºæœåŠ¡å™¨ç†è§£äº†æœ¬æ¬¡è¯·æ±‚ä½†æ˜¯æ‹’ç»æ‰§è¡Œè¯¥ä»»åŠ¡\n404ï¼šè¯·æ±‚çš„èµ„æºï¼ˆç½‘é¡µç­‰ï¼‰ä¸å­˜åœ¨\n405ï¼šæ–¹æ³•ä¸è¢«å…è®¸\n500ï¼šå†…éƒ¨æœåŠ¡å™¨é”™è¯¯\n502ï¼šç½‘å…³é”™è¯¯\n504ï¼šç½‘å…³è¶…æ—¶\n```\n\n## sessionStorageå’Œlocalstroageä¸cookieä¹‹é—´æœ‰ä»€ä¹ˆå…³è”, cookieæœ€å¤§å­˜æ”¾å¤šå°‘å­—èŠ‚ï¼Ÿ\nä¸‰è€…å…±åŒç‚¹ï¼šéƒ½æ˜¯ä¿å­˜åœ¨æµè§ˆå™¨ç«¯ï¼Œä¸”åŒæºçš„ã€‚\n\nåŒºåˆ«:\n1ã€cookieåœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨é—´æ¥å›ä¼ é€’ã€‚è€ŒsessionStorageå’ŒlocalStorageä¸ä¼šè‡ªåŠ¨æŠŠæ•°æ®å‘ç»™æœåŠ¡å™¨ï¼Œä»…åœ¨æœ¬åœ°ä¿å­˜\n\n### cookieçš„ä½œç”¨\n- ä¿å­˜ç”¨æˆ·ç™»å½•çŠ¶æ€(å­˜å‚¨sessionIdæ¥æ ‡è¯†å”¯ä¸€ç”¨æˆ·)\n- è·Ÿè¸ªç”¨æˆ·è¡Œä¸º\n- å®šåˆ¶é¡µé¢\n\n2ã€å­˜å‚¨å¤§å°é™åˆ¶ä¹Ÿä¸åŒï¼Œcookieæ•°æ®ä¸èƒ½è¶…è¿‡4kï¼ŒsessionStorageå’ŒlocalStorage ä½†æ¯”cookieå¤§å¾—å¤šï¼Œå¯ä»¥è¾¾åˆ°5M\n\n3ã€æ•°æ®æœ‰æ•ˆæœŸä¸åŒï¼ŒsessionStorageï¼šä»…åœ¨å½“å‰æµè§ˆå™¨çª—å£å…³é—­å‰æœ‰æ•ˆï¼Œè‡ªç„¶ä¹Ÿå°±ä¸å¯èƒ½æŒä¹…ä¿æŒï¼›localStorageï¼šå§‹ç»ˆæœ‰æ•ˆï¼Œçª—å£æˆ–æµè§ˆå™¨å…³é—­ä¹Ÿä¸€ç›´ä¿å­˜ï¼Œå› æ­¤ç”¨ä½œæŒä¹…æ•°æ®ï¼›cookieåªåœ¨è®¾ç½®çš„cookieè¿‡æœŸæ—¶é—´ä¹‹å‰ä¸€ç›´æœ‰æ•ˆï¼Œå³ä½¿çª—å£æˆ–æµè§ˆå™¨å…³é—­\n\n4ã€ä½œç”¨åŸŸä¸åŒï¼ŒsessionStorageåªåœ¨åŒæºçš„åŒçª—å£ï¼ˆæˆ–æ ‡ç­¾é¡µï¼‰ä¸­å…±äº«æ•°æ®ï¼Œä¹Ÿå°±æ˜¯åªåœ¨å½“å‰ä¼šè¯ä¸­å…±äº«ï¼›localStorage åœ¨æ‰€æœ‰åŒæºçª—å£ä¸­éƒ½æ˜¯å…±äº«çš„ï¼›cookieä¹Ÿæ˜¯åœ¨æ‰€æœ‰åŒæºçª—å£ä¸­éƒ½æ˜¯å…±äº«çš„( å³æ•°æ®å…±äº« )ã€‚\n\n\n## ajaxçš„getä¸poståŒºåˆ«ï¼Ÿ\n- getå’Œpostéƒ½æ˜¯æ•°æ®æäº¤çš„æ–¹å¼ã€‚\n- getçš„æ•°æ®æ˜¯é€šè¿‡ç½‘å€é—®å·åè¾¹æ‹¼æ¥çš„å­—ç¬¦ä¸²è¿›è¡Œä¼ é€’çš„ã€‚postæ˜¯é€šè¿‡ä¸€ä¸ªHTTPåŒ…(request body)è¿›è¡Œä¼ é€’æ•°æ®çš„ã€‚\n- getçš„ä¼ è¾“é‡æ˜¯æœ‰é™åˆ¶çš„ï¼Œpostæ˜¯æ²¡æœ‰é™åˆ¶çš„ã€‚(å®é™…ä¸ŠHTTP åè®®ä»æœªè§„å®š GET/POST çš„è¯·æ±‚é•¿åº¦é™åˆ¶æ˜¯å¤šå°‘ã€‚å¯¹getè¯·æ±‚å‚æ•°çš„é™åˆ¶æ˜¯æ¥æºä¸æµè§ˆå™¨æˆ–webæœåŠ¡å™¨ï¼Œæµè§ˆå™¨æˆ–webæœåŠ¡å™¨é™åˆ¶äº†urlçš„é•¿åº¦)\n- getçš„å®‰å…¨æ€§å¯èƒ½æ²¡æœ‰posté«˜ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ç”¨getæ¥è·å–æ•°æ®ï¼Œpostä¸€èˆ¬ç”¨æ¥ä¿®æ”¹æ•°æ®ã€‚\n- getè¯·æ±‚, å€’é€€æŒ‰é’®æ˜¯æ— å®³çš„, postä¼šé‡æ–°å‘èµ·è¯·æ±‚\n- getä¼šä¸»åŠ¨ç¼“å­˜, postä¸ä¼š\n- getè¯·æ±‚åªèƒ½è¿›è¡Œurlç¼–ç ï¼Œè€Œpostè¯·æ±‚æ”¯æŒå¤šç§ç¼–ç \n- ***getäº§ç”Ÿä¸€ä¸ªTCPæ•°æ®åŒ…ï¼ŒPOSTäº§ç”Ÿä¸¤ä¸ªTCPæ•°æ®åŒ…***\n- getæ¯”è¾ƒå¿«ä¸”æœ‰å†å²è®°å½•\n\ngetå°±æ˜¯å°†è´§å“æ”¾åœ¨è½¦é¡¶ï¼Œpostæ”¾åœ¨è½¦å†…ã€‚\n\n![get-post-diff](http://cdn.mydearest.cn/blog/images/get-post-diff.png)\n\n## GCæœºåˆ¶ï¼Ÿä¸ºä»€ä¹ˆé—­åŒ…ä¸ä¼šè¢«å›æ”¶å˜é‡å’Œå‡½æ•°ï¼Ÿ\n- GCåƒåœ¾å›æ”¶æœºåˆ¶ï¼šå°†å†…å­˜ä¸­ä¸å†ä½¿ç”¨çš„æ•°æ®è¿›è¡Œæ¸…ç†ï¼Œé‡Šæ”¾å‡ºå†…å­˜ç©ºé—´ã€‚\n\nå¼•ç”¨ç±»å‹æ˜¯åœ¨æ²¡æœ‰å¼•ç”¨ä¹‹å, é€šè¿‡ v8 çš„ GC è‡ªåŠ¨å›æ”¶, å€¼ç±»å‹å¦‚æœæ˜¯å¤„äºé—­åŒ…çš„æƒ…å†µä¸‹, è¦ç­‰é—­åŒ…æ²¡æœ‰å¼•ç”¨æ‰ä¼šè¢« GC å›æ”¶, éé—­åŒ…çš„æƒ…å†µä¸‹ç­‰å¾… v8 çš„æ–°ç”Ÿä»£ \n(new space) åˆ‡æ¢çš„æ—¶å€™å›æ”¶ã€‚\n\nv8 çš„åƒåœ¾å›æ”¶æœºåˆ¶åŸºäºåˆ†ä»£å›æ”¶æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶åˆåŸºäºä¸–ä»£å‡è¯´ï¼Œè¿™ä¸ªå‡è¯´æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼Œä¸€æ˜¯æ–°ç”Ÿçš„å¯¹è±¡å®¹æ˜“æ—©æ­»ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸æ­»çš„å¯¹è±¡ä¼šæ´»å¾—æ›´ä¹…ã€‚åŸºäºè¿™ä¸ªå‡è¯´ï¼Œv\n8 å¼•æ“å°†å†…å­˜åˆ†ä¸ºäº†æ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ã€‚\n\næ–°åˆ›å»ºçš„å¯¹è±¡æˆ–è€…åªç»å†è¿‡ä¸€æ¬¡çš„åƒåœ¾å›æ”¶çš„å¯¹è±¡è¢«ç§°ä¸ºæ–°ç”Ÿä»£ã€‚ç»å†è¿‡å¤šæ¬¡åƒåœ¾å›æ”¶çš„å¯¹è±¡è¢«ç§°ä¸ºè€ç”Ÿä»£ã€‚\n\nV8 å°†å†…å­˜åˆ†æˆ æ–°ç”Ÿä»£ç©ºé—´ å’Œ è€ç”Ÿä»£ç©ºé—´ã€‚\n\nå›æ”¶æ–¹æ³•æœ‰ä¸¤ç§ï¼šæ ‡è®°æ¸…é™¤ã€è®¡æ•°å¼•ç”¨\n\nè€ç”Ÿä»£é‡‡ç”¨äº†æ ‡è®°æ¸…é™¤æ³•å’Œæ ‡è®°å‹ç¼©æ³•ã€‚æ ‡è®°æ¸…é™¤ç®€å•è®²å°±æ˜¯å˜é‡å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå½“å˜é‡è¿›å…¥æ‰§è¡Œç¯å¢ƒçš„æ—¶å€™ï¼Œåƒåœ¾å›æ”¶å™¨ä¼šç»™å®ƒåŠ ä¸Šæ ‡è®°ï¼Œè¿™ä¸ªå˜é‡ç¦»å¼€æ‰§è¡Œç¯å¢ƒï¼Œå°†å…¶æ ‡è®°ä¸ºâ€œæ¸…é™¤â€ï¼Œä¸å¯\nè¿½è¸ªï¼Œä¸è¢«å…¶ä»–å¯¹è±¡å¼•ç”¨ï¼Œæˆ–è€…æ˜¯ä¸¤ä¸ªå¯¹è±¡äº’ç›¸å¼•ç”¨ï¼Œä¸è¢«ç¬¬ä¸‰ä¸ªå¯¹è±¡å¼•ç”¨ï¼Œç„¶åç”±åƒåœ¾å›æ”¶å™¨æ”¶å›ï¼Œé‡Šæ”¾å†…å­˜ç©ºé—´ã€‚ã€‚\n\nç”±äºåœ¨è¿›è¡Œåƒåœ¾å›æ”¶çš„æ—¶å€™ä¼šæš‚åœåº”ç”¨çš„é€»è¾‘ï¼Œå¯¹äºæ–°ç”Ÿä»£æ–¹æ³•ç”±äºå†…å­˜å°ï¼Œæ¯æ¬¡åœé¡¿çš„æ—¶é—´ä¸ä¼šå¤ªé•¿ï¼Œä½†å¯¹äºè€ç”Ÿä»£æ¥è¯´æ¯æ¬¡åƒåœ¾å›æ”¶çš„æ—¶é—´é•¿ï¼Œåœé¡¿ä¼šé€ æˆå¾ˆå¤§çš„å½±\nå“ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ V8 å¼•å…¥äº†å¢é‡æ ‡è®°çš„æ–¹æ³•ï¼Œå°†ä¸€æ¬¡åœé¡¿è¿›è¡Œçš„è¿‡ç¨‹åˆ†ä¸ºäº†å¤šæ­¥ï¼Œæ¯æ¬¡æ‰§è¡Œå®Œä¸€å°æ­¥å°±è®©è¿è¡Œé€»è¾‘æ‰§è¡Œä¸€ä¼šï¼Œå°±è¿™æ ·äº¤æ›¿è¿è¡Œã€‚\n\n## é¢å‘å¯¹è±¡ï¼Ÿ\nä¸‡ç‰©çš†å¯¹è±¡ï¼ŒæŠŠä¸€ä¸ªå¯¹è±¡æŠ½è±¡æˆç±»ï¼Œå…·ä½“ä¸Šå°±æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡çš„é™æ€ç‰¹å¾å’ŒåŠ¨æ€ç‰¹å¾æŠ½è±¡æˆå±æ€§ï¼ˆå±æ€§åã€å±æ€§å€¼ï¼‰å’Œæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æŠŠä¸€ç±»äº‹ç‰©çš„ç®—æ³•å’Œæ•°æ®ç»“æ„å°è£…åœ¨ä¸€\nä¸ªç±»ä¹‹ä¸­ï¼Œç¨‹åºå°±æ˜¯å¤šä¸ªå¯¹è±¡å’Œäº’ç›¸ä¹‹é—´çš„é€šä¿¡ç»„æˆçš„ã€‚\n\né¢å‘å¯¹è±¡å…·æœ‰å°è£…æ€§ï¼Œç»§æ‰¿æ€§ï¼Œå¤šæ€æ€§ã€‚\nå°è£…ï¼šéšè”½äº†å¯¹è±¡å†…éƒ¨ä¸éœ€è¦æš´éœ²çš„ç»†èŠ‚ï¼Œä½¿å¾—å†…éƒ¨ç»†èŠ‚çš„å˜åŠ¨è·Ÿå¤–ç•Œè„±ç¦»ï¼Œåªä¾é æ¥å£è¿›è¡Œé€šä¿¡ã€‚å°è£…æ€§é™ä½äº†ç¼–ç¨‹çš„å¤æ‚æ€§ã€‚é€šè¿‡ç»§æ‰¿ï¼Œä½¿å¾—æ–°å»ºä¸€ä¸ªç±»å˜å¾—å®¹æ˜“ï¼Œä¸€ä¸ªç±»ä»æ´¾ç”Ÿç±»é‚£é‡Œè·å¾—å…¶éç§æœ‰çš„æ–¹æ³•å’Œå…¬ç”¨å±æ€§çš„ç¹çå·¥ä½œäº¤ç»™äº†ç¼–è¯‘å™¨ã€‚è€Œç»§æ‰¿å’Œå®ç°æ¥å£å’Œè¿è¡Œæ—¶çš„ç±»å‹ç»‘å®šæœºåˆ¶æ‰€äº§ç”Ÿçš„å¤šæ€ï¼Œä½¿å¾—ä¸åŒçš„ç±»æ‰€äº§ç”Ÿçš„å¯¹è±¡èƒ½å¤Ÿå¯¹ç›¸åŒçš„æ¶ˆæ¯ä½œå‡ºä¸åŒçš„ååº”ï¼Œæå¤§åœ°æé«˜äº†ä»£ç çš„é€šç”¨æ€§ã€‚\n\næ€»ä¹‹ï¼Œé¢å‘å¯¹è±¡çš„ç‰¹æ€§æé«˜äº†å¤§å‹ç¨‹åºçš„é‡ç”¨æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\n\n## jsonpçš„åŸç†å’Œç¼ºç‚¹ï¼Ÿ\n- åŸç†ï¼šä½¿ç”¨scriptæ ‡ç­¾å®ç°è·¨åŸŸè®¿é—®ï¼Œå¯åœ¨urlä¸­æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œè·å–JSONæ•°æ®å¹¶åœ¨æŒ‡å®šçš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œjqueryå®ç°jsopã€‚\n- ç¼ºç‚¹ï¼šåªæ”¯æŒGETæ–¹å¼çš„jsonpå®ç°ï¼Œæ˜¯ä¸€ç§è„šæœ¬æ³¨å…¥è¡Œä¸ºå­˜åœ¨ä¸€å®šçš„å®‰å…¨éšæ‚£ã€‚å¦‚æœè¿”å›çš„æ•°æ®æ ¼å¼æœ‰é—®é¢˜æˆ–è€…è¿”å›å¤±è´¥äº†ï¼Œå¹¶ä¸ä¼šæŠ¥é”™ã€‚\n\n## callå’Œapplyä¸¤è€…çš„åŒºåˆ«å’Œå¥½å¤„ï¼Ÿ\n- callå’Œapplyéƒ½æ˜¯æ”¹å˜thisæŒ‡å‘çš„æ–¹æ³•ï¼ŒåŒºåˆ«åœ¨äºcallå¯ä»¥å†™å¤šä¸ªå‚æ•°ï¼Œè€Œapplyåªèƒ½å†™ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç”¨äºå­˜æ”¾è¦ä¼ çš„å‚æ•°ã€‚\n- ç”¨callå’Œapplyå®ç°æ›´å¥½çš„ç»§æ‰¿å’Œæ‰©å±•ï¼Œæ›´å®‰å…¨ã€‚\n\n## å‹ç¼©åˆå¹¶ç›®çš„ï¼Ÿhttpè¯·æ±‚çš„ä¼˜åŒ–æ–¹å¼ï¼Ÿ\n- Webæ€§èƒ½ä¼˜åŒ–æœ€ä½³å®è·µä¸­æœ€é‡è¦çš„ä¸€æ¡æ˜¯å‡å°‘HTTPè¯·æ±‚ã€‚è€Œå‡å°‘HTTPè¯·æ±‚çš„æœ€ä¸»è¦çš„æ–¹å¼å°±æ˜¯ï¼Œåˆå¹¶å¹¶å‹ç¼©JavaScriptå’ŒCSSæ–‡ä»¶ã€‚ \n\n- CSS Spritesï¼ˆé›ªç¢§å›¾ã€CSSç²¾çµï¼‰ï¼šæŠŠå…¨ç«™çš„å›¾æ ‡éƒ½æ”¾åœ¨ä¸€ä¸ªå›¾åƒæ–‡ä»¶ä¸­ï¼Œç„¶åç”¨CSSçš„background-imageå’Œbackground-positionå±æ€§å®šä½æ¥æ˜¾ç¤ºå…¶ä¸­çš„ä¸€å°éƒ¨åˆ†ã€‚\n\nä¼˜ç‚¹ï¼š\n1. å‡å°‘ HTTP è¯·æ±‚æ•°ï¼Œæå¤§åœ°æé«˜é¡µé¢åŠ è½½é€Ÿåº¦\n2. å¢åŠ å›¾ç‰‡ä¿¡æ¯é‡å¤åº¦ï¼Œæé«˜å‹ç¼©æ¯”ï¼Œå‡å°‘å›¾ç‰‡å¤§å°\n3. æ›´æ¢é£æ ¼æ–¹ä¾¿ï¼Œåªéœ€åœ¨ä¸€å¼ æˆ–å‡ å¼ å›¾ç‰‡ä¸Šä¿®æ”¹é¢œè‰²æˆ–æ ·å¼å³å¯å®ç°\n\nç¼ºç‚¹ï¼š\n\n1. å›¾ç‰‡åˆå¹¶éº»çƒ¦\n2. ç»´æŠ¤éº»çƒ¦ï¼Œä¿®æ”¹ä¸€ä¸ªå›¾ç‰‡å¯èƒ½éœ€è¦é‡æ–°å¸ƒå±€æ•´ä¸ªå›¾ç‰‡ï¼Œæ ·å¼\n\n- åˆå¹¶è„šæœ¬å’Œæ ·å¼è¡¨; å›¾ç‰‡åœ°å›¾ï¼šåˆ©ç”¨image mapæ ‡ç­¾å®šä¹‰ä¸€ä¸ªå®¢æˆ·ç«¯å›¾åƒæ˜ å°„ï¼Œï¼ˆå›¾åƒæ˜ å°„æŒ‡å¸¦æœ‰å¯ç‚¹å‡»åŒºåŸŸçš„ä¸€å¹…å›¾åƒï¼‰å…·ä½“çœ‹ï¼šhttp://club.topsage.com/thread-2527479-1-1.html \n\n- å›¾ç‰‡js/cssç­‰é™æ€èµ„æºæ”¾åœ¨é™æ€æœåŠ¡å™¨æˆ–CDNæœåŠ¡å™¨æ—¶ï¼Œå°½é‡é‡‡ç”¨ä¸ç”¨çš„åŸŸåï¼Œè¿™æ ·èƒ½é˜²æ­¢cookieä¸ä¼šäº’ç›¸æ±¡æŸ“ï¼Œå‡å°‘æ¯æ¬¡è¯·æ±‚çš„å¾€è¿”æ•°æ®ã€‚ \n\n- cssæ›¿ä»£å›¾ç‰‡, ç¼“å­˜ä¸€äº›æ•°æ® \n\n- å°‘ç”¨location.reload()ï¼šä½¿ç”¨location.reload() ä¼šåˆ·æ–°é¡µé¢ï¼Œåˆ·æ–°é¡µé¢æ—¶é¡µé¢æ‰€æœ‰èµ„æº (cssï¼Œjsï¼Œimgç­‰) ä¼šé‡æ–°è¯·æ±‚æœåŠ¡å™¨ã€‚å»ºè®®ä½¿ç”¨location.href=\"å½“å‰é¡µurl\" ä»£æ›¿location.reload() ï¼Œä½¿ç”¨location.href æµè§ˆå™¨ä¼šè¯»å–æœ¬åœ°ç¼“å­˜èµ„æºã€‚\n\n- å›¾ç‰‡æ‡’åŠ è½½ \n\n\n## commonjs?requirejs?AMD|CMD|UMD?\n- CommonJSå°±æ˜¯ä¸ºJSçš„è¡¨ç°æ¥åˆ¶å®šè§„èŒƒï¼ŒNodeJSæ˜¯è¿™ç§è§„èŒƒçš„å®ç°ï¼Œwebpack ä¹Ÿæ˜¯ä»¥CommonJSçš„å½¢å¼æ¥ä¹¦å†™ã€‚å› ä¸ºjsæ²¡æœ‰æ¨¡å—çš„åŠŸèƒ½ï¼Œæ‰€ä»¥CommonJSåº”è¿è€Œç”Ÿã€‚ä½†å®ƒä¸èƒ½åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚ CommonJSå®šä¹‰çš„æ¨¡å—åˆ†ä¸º:{æ¨¡å—å¼•ç”¨(require)} {æ¨¡å—å®šä¹‰(exports)} {æ¨¡å—æ ‡è¯†(module)} \n\n- RequireJS æ˜¯ä¸€ä¸ªJavaScriptæ¨¡å—åŠ è½½å™¨ã€‚ RequireJSæœ‰ä¸¤ä¸ªä¸»è¦æ–¹æ³•(method): define()å’Œrequire()ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•åŸºæœ¬ä¸Šæ‹¥æœ‰ç›¸åŒçš„å®šä¹‰(declaration) å¹¶ä¸”å®ƒä»¬éƒ½çŸ¥é“å¦‚ä½•åŠ è½½çš„ä¾èµ–å…³ç³»ï¼Œç„¶åæ‰§è¡Œä¸€ä¸ªå›è°ƒå‡½æ•°(callback function)ã€‚ä¸require()ä¸åŒçš„æ˜¯ï¼Œ define()ç”¨æ¥å­˜å‚¨ä»£ç ä½œä¸ºä¸€ä¸ªå·²å‘½åçš„æ¨¡å—ã€‚ å› æ­¤define()çš„å›è°ƒå‡½æ•°éœ€è¦æœ‰ä¸€ä¸ªè¿”å›å€¼ä½œä¸ºè¿™ä¸ªæ¨¡å—å®šä¹‰ã€‚è¿™äº›ç±»ä¼¼è¢«å®šä¹‰çš„æ¨¡å—å«ä½œAMD (Asynchronous Module Definitionï¼Œå¼‚æ­¥æ¨¡å—å®šä¹‰)ã€‚ \n\n- AMD æ˜¯ RequireJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡º AMDå¼‚æ­¥åŠ è½½æ¨¡å—ã€‚å®ƒçš„æ¨¡å—æ”¯æŒå¯¹è±¡ å‡½æ•° æ„é€ å™¨ å­—ç¬¦ä¸² JSONç­‰å„ç§ç±»å‹çš„æ¨¡å—ã€‚ é€‚ç”¨AMDè§„èŒƒé€‚ç”¨defineæ–¹æ³•å®šä¹‰æ¨¡å—ã€‚\n\n- CMDæ˜¯SeaJS åœ¨æ¨å¹¿è¿‡ç¨‹ä¸­å¯¹æ¨¡å—å®šä¹‰çš„è§„èŒƒåŒ–äº§å‡º\nAMDä¸CMDçš„åŒºåˆ«ï¼š\nï¼ˆ1ï¼‰å¯¹äºäºä¾èµ–çš„æ¨¡å—ï¼ŒAMD æ˜¯æå‰æ‰§è¡Œ(requirejs2.0+å¯ä»¥å»¶è¿Ÿæ‰§è¡Œäº†)ï¼ŒCMD æ˜¯å»¶è¿Ÿæ‰§è¡Œã€‚\nï¼ˆ2ï¼‰AMD æ¨å´‡ä¾èµ–å‰ç½®ï¼ŒCMD æ¨å´‡ä¾èµ–å°±è¿‘ã€‚\nï¼ˆ3ï¼‰AMD æ¨å´‡å¤ç”¨æ¥å£ï¼ŒCMD æ¨å´‡å•ç”¨æ¥å£ã€‚\nï¼ˆ4ï¼‰ä¹¦å†™è§„èŒƒçš„å·®å¼‚ã€‚\n\n- umdæ˜¯AMDå’ŒCommonJSçš„ç³…åˆã€‚\nAMD æµè§ˆå™¨ç¬¬ä¸€çš„åŸåˆ™å‘å±• å¼‚æ­¥åŠ è½½æ¨¡å—ã€‚\nCommonJSæ¨¡å—ä»¥æœåŠ¡å™¨ç¬¬ä¸€åŸåˆ™å‘å±•ï¼Œé€‰æ‹©åŒæ­¥åŠ è½½ï¼Œå®ƒçš„æ¨¡å—æ— éœ€åŒ…è£…(unwrapped modules)ã€‚è¿™è¿«ä½¿äººä»¬åˆæƒ³å‡ºå¦ä¸€ä¸ªæ›´é€šç”¨çš„æ¨¡å¼UMD ( Universal Module Definition ), å¸Œæœ›è§£å†³è·¨å¹³å°çš„è§£å†³æ–¹æ¡ˆã€‚UMDå…ˆåˆ¤æ–­æ˜¯å¦æ”¯æŒNode.jsçš„æ¨¡å—( exports )æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™ä½¿ç”¨Node.jsæ¨¡å—æ¨¡å¼ã€‚\n\n### å·®å¼‚\n1. `CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æµ…æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚`ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€æ—¦è¾“å‡ºä¸€ä¸ªå€¼ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–å°±å½±å“ä¸åˆ°è¿™ä¸ªå€¼ã€‚ES6 æ¨¡å—çš„è¿è¡Œæœºåˆ¶ä¸ \nCommonJS ä¸ä¸€æ ·ã€‚JS å¼•æ“å¯¹è„šæœ¬é™æ€åˆ†æçš„æ—¶å€™ï¼Œé‡åˆ°æ¨¡å—åŠ è½½å‘½ä»¤ importï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªåªè¯»å¼•ç”¨ã€‚ç­‰åˆ°è„šæœ¬çœŸæ­£æ‰§è¡Œæ—¶ï¼Œå†æ ¹æ®è¿™ä¸ªåªè¯»å¼•ç”¨ï¼Œåˆ°è¢«åŠ è½½çš„é‚£\nä¸ªæ¨¡å—é‡Œé¢å»å–å€¼ã€‚\n\n2. `CommonJS æ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 æ¨¡å—æ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£ã€‚`CommonJS æ¨¡å—å°±æ˜¯å¯¹è±¡ï¼Œå³åœ¨è¾“å…¥æ—¶æ˜¯å…ˆåŠ è½½æ•´ä¸ªæ¨¡å—ï¼Œç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œç„¶åå†ä»è¿™ä¸ªå¯¹è±¡ä¸Šé¢è¯»\nå–æ–¹æ³•ï¼Œè¿™ç§åŠ è½½ç§°ä¸ºâ€œè¿è¡Œæ—¶åŠ è½½â€ã€‚è€Œ ES6 æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œå®ƒçš„å¯¹å¤–æ¥å£åªæ˜¯ä¸€ç§é™æ€å®šä¹‰ï¼Œåœ¨ä»£ç é™æ€è§£æé˜¶æ®µå°±ä¼šç”Ÿæˆã€‚\n\n3. CommonJså¯¼å…¥çš„æ¨¡å—è·¯å¾„å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå› ä¸ºå®ƒä½¿ç”¨çš„æ˜¯require()æ–¹æ³•ï¼›è€ŒES6 Modulesåªèƒ½æ˜¯å­—ç¬¦ä¸²ã€‚\n\n4. CommonJS thisæŒ‡å‘å½“å‰æ¨¡å—ï¼ŒES6 Modules thisæŒ‡å‘undefined\n\n5. ES6 Modulesä¸­æ²¡æœ‰è¿™äº›é¡¶å±‚å˜é‡ï¼šargumentsã€requireã€moduleã€exportsã€__filenameã€__dirname\n\n## jsçš„å‡ ç§ç»§æ‰¿æ–¹å¼ï¼Ÿ\n- ä½¿ç”¨å¯¹è±¡å†’å……å®ç°ç»§æ‰¿\n- callã€applyæ”¹å˜å‡½æ•°ä¸Šä¸‹æ–‡å®ç°ç»§æ‰¿\n- åŸå‹é“¾æ–¹å¼å®ç°ç»§æ‰¿\n\n## jsåŸå‹ã€åŸå‹é“¾ï¼Œæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿ\nåœ¨JavaScriptä¸­,ä¸€å…±æœ‰ä¸¤ç§ç±»å‹çš„å€¼,åŸå§‹å€¼å’Œå¯¹è±¡å€¼.æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…éƒ¨å±æ€§[[prototype]],æˆ‘ä»¬é€šå¸¸ç§°ä¹‹ä¸ºåŸå‹.åŸå‹çš„å€¼å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡,ä¹Ÿå¯ä»¥æ˜¯null.å¦‚æœå®ƒçš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡,åˆ™è¿™ä¸ªå¯¹è±¡ä¹Ÿä¸€å®šæœ‰è‡ªå·±çš„åŸå‹.è¿™æ ·å°±å½¢æˆäº†ä¸€æ¡çº¿æ€§çš„é“¾,æˆ‘ä»¬ç§°ä¹‹ä¸ºåŸå‹é“¾. \n\nè®¿é—®ä¸€ä¸ªå¯¹è±¡çš„åŸå‹å¯ä»¥ä½¿ç”¨ES5ä¸­çš„Object.getPrototypeOfæ–¹æ³•,æˆ–è€…ES6ä¸­çš„__proto__å±æ€§. åŸå‹é“¾çš„ä½œç”¨æ˜¯ç”¨æ¥å®ç°ç»§æ‰¿,æ¯”å¦‚æˆ‘ä»¬æ–°å»ºä¸€ä¸ªæ•°ç»„,æ•°ç»„çš„æ–¹æ³•å°±æ˜¯ä»æ•°ç»„çš„åŸå‹ä¸Šç»§æ‰¿è€Œæ¥çš„ã€‚\n\nç±»çš„ç»§æ‰¿\nç‰¹ç‚¹ï¼šåŸºäºåŸå‹é“¾ï¼Œæ—¢æ˜¯çˆ¶ç±»çš„å®ä¾‹ï¼Œä¹Ÿæ˜¯å­ç±»çš„å®ä¾‹\nç¼ºç‚¹ï¼šæ— æ³•å®ç°å¤šç»§æ‰¿\n\næ„é€ ç»§æ‰¿ã€ç»„åˆç»§æ‰¿ã€å®ä¾‹ç»§æ‰¿å’Œæ‹·è´ç»§æ‰¿...\n\n## evalæ˜¯åšä»€ä¹ˆçš„ï¼Ÿ\n- å°†æŠŠå¯¹åº”çš„å­—ç¬¦ä¸²è§£ææˆJSä»£ç å¹¶è¿è¡Œï¼› åº”è¯¥é¿å…ä½¿ç”¨evalï¼Œä¸å®‰å…¨ï¼Œéå¸¸è€—æ€§èƒ½ï¼ˆ2æ¬¡ï¼Œä¸€æ¬¡è§£ææˆjsè¯­å¥ï¼Œä¸€æ¬¡æ‰§è¡Œï¼‰ã€‚\n- ç”±JSONå­—ç¬¦ä¸²è½¬æ¢ä¸ºJSONå¯¹è±¡çš„æ—¶å€™å¯ä»¥ç”¨evalï¼Œvar obj =eval('('+ str +')');\n\n## nullå’Œundefined\n- null         è¡¨ç¤ºä¸€ä¸ªå¯¹è±¡æ˜¯â€œæ²¡æœ‰å€¼â€çš„å€¼ï¼Œä¹Ÿå°±æ˜¯å€¼ä¸ºâ€œç©ºâ€ï¼›\n- undefined     è¡¨ç¤ºä¸€ä¸ªå˜é‡å£°æ˜äº†æ²¡æœ‰åˆå§‹åŒ–(èµ‹å€¼)ï¼›\n> Number(null)ä¸º0ï¼Œè€Œundefinedä¸ºNaN\n\n## jsonçš„ç†è§£ï¼Ÿ\n- JSONï¼ˆè½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼‰ï¼ŒåŸºäºJSçš„å­é›†ï¼Œæ•°æ®æ ¼å¼ç®€å•ï¼Œæ˜“äºè¯»å†™ï¼Œå ç”¨å¸¦å®½å°ã€‚\n```javascript\nJSON.parse() // è§£ææˆJSONå¯¹è±¡\n\nJSON.strinify() // è§£ææˆJSONå­—ç¬¦ä¸²\n```\n\n## script å¼•å…¥æ–¹å¼ï¼š\n- html é™æ€<script>å¼•å…¥\n- js åŠ¨æ€æ’å…¥<script>\n- <script defer>: å»¶è¿ŸåŠ è½½ï¼Œå…ƒç´ è§£æå®Œæˆåæ‰§è¡Œ\n- <script async>: å¼‚æ­¥åŠ è½½ï¼Œä½†æ‰§è¡Œæ—¶ä¼šé˜»å¡å…ƒç´ æ¸²æŸ“åªæ˜¯å®ƒçš„åŠ è½½è¿‡ç¨‹ä¸ä¼šé˜»å¡\n\n## ajaxï¼ˆå¼‚æ­¥çš„jså’Œxmlï¼‰\n- ajaxæ˜¯æŒ‡ä¸€ç§åˆ›å»ºäº¤äº’å¼ç½‘é¡µåº”ç”¨çš„ç½‘é¡µå¼€å‘æŠ€æœ¯ã€‚é€šè¿‡åå°ä¸æœåŠ¡å™¨è¿›è¡Œå°‘é‡æ•°æ®äº¤æ¢ï¼ŒAJAXå¯ä»¥ä½¿ç½‘é¡µå®ç°å¼‚æ­¥æ›´æ–°ã€‚è¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸é‡æ–°åŠ è½½æ•´ä¸ªç½‘é¡µçš„æƒ…å†µä¸‹ï¼Œå¯¹ç½‘é¡µçš„æŸéƒ¨åˆ†è¿›è¡Œæ›´æ–°ã€‚\n\n## åŒå¼‚æ­¥çš„åŒºåˆ«ï¼Ÿ\n- åŒæ­¥(sync)ï¼šæŒ‰é¡ºåºæ‰§è¡Œã€‚\n- å¼‚æ­¥(async)ï¼šä¸æŒ‰é¡ºåºæ‰§è¡Œï¼Œå¯ä»¥è·³è¿‡æ‰§è¡Œä¸‹é¢çš„ä»£ç ã€‚\n\n### ä»€ä¹ˆæ˜¯å¼‚æ­¥\nå½“å‰ä¸€ä¸ªä»»åŠ¡è¢«æ‰§è¡Œæ—¶ï¼Œä¸ä¼šç­‰å¾…ä»»åŠ¡æ‰§è¡Œå®Œæˆåå°±å»æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œç­‰å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œå°†å»æ‰§è¡Œå…¶è¿”å›çš„å›è°ƒå‡½æ•°ï¼Œè¿™æ˜¯å¼‚æ­¥æ“ä½œã€‚\n\n### ä¸ºä»€ä¹ˆè¦å¼‚æ­¥\njsæ˜¯å•çº¿ç¨‹çš„ï¼Œå› æ­¤å¿…é¡»ç­‰å‰ä¸€ä¸ªä»»åŠ¡å®Œæˆåï¼Œåä¸€ä¸ªä»»åŠ¡æ‰ä¼šè¢«æ‰§è¡Œã€‚å› æ­¤å½“æ‰§è¡Œä¸€æ®µè€—æ—¶çš„ç¨‹åºæ—¶ï¼Œä¼šå½±å“æ•´ä¸ªç¨‹åºçš„æ‰§è¡Œï¼Œå¼‚æ­¥çš„æ–¹æ³•å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n\n## ajaxçš„ç¼ºç‚¹ï¼Ÿ\n- ä¸æ”¯æŒæµè§ˆå™¨çš„backæŒ‰é’®(äº‹ä»¶ç”±æµè§ˆå™¨å†…æ ¸æ§åˆ¶)\n- ajaxæš´éœ²äº†ä¸æœåŠ¡å™¨çš„äº¤äº’\n- å¯¹æœç´¢å¼•æ“çš„æ”¯æŒè¾ƒå¼±\n- ç ´åäº†ç¨‹åºçš„å¼‚å¸¸æœºåˆ¶\n- ä¸å®¹æ˜“è°ƒè¯•\n\n## è·¨åŸŸé—®é¢˜ï¼Ÿ\n### åŒæºç­–ç•¥\nåŒæºç­–ç•¥é™åˆ¶ä»ä¸€ä¸ªæºåŠ è½½çš„æ–‡æ¡£æˆ–è„šæœ¬å¦‚ä½•ä¸æ¥è‡ªå¦ä¸€ä¸ªæºçš„èµ„æºè¿›è¡Œäº¤äº’ã€‚è¿™æ˜¯ä¸€ä¸ªç”¨äºéš”ç¦»æ½œåœ¨æ¶æ„æ–‡ä»¶çš„å…³é”®å®‰å…¨æœºåˆ¶ã€‚\n\n- åè®®ä¸åŒ\n- ç«¯å£ä¸åŒ\n- åŸŸåä¸åŒ\n- å¸¸ç”¨è§£å†³æ–¹æ¡ˆï¼š\n1. jsonp\n```html\n<script src=\"http://example.com/data.php?callback=do\"></script>\n```\n2. iframe\n3. window.name\nåœ¨ä¸€ä¸ªçª—å£ä¸­ï¼Œçª—å£è½½å…¥çš„æ‰€æœ‰é¡µé¢å…±äº«ä¸€ä¸ªwindow.nameï¼Œæ¯ä¸ªé¡µé¢éƒ½å¯¹window.nameå…·æœ‰è¯»å†™æƒé™ï¼Œå¯ä»¥åœ¨window.nameä¸­è®¾ç½®æƒ³è¦çš„æ•°æ®ã€‚\n4. window.postMessage\n```js\n// iframeé€šä¿¡\niframe.contentWindow.postMessage(msg);\nwindow.onmessage = function (e) {\n    e = e || event;\n    alert(e.data);\n}\n```\n5. document.domain\nå°†ä¸¤ä¸ªé¡µé¢çš„document.domainè®¾ç½®æˆç›¸åŒåŸŸåå³å¯ï¼Œjsä¸­è®¾ç½®ï¼Œå½¢å¦‚ï¼š\ndocument.domain = \"\";\n6. æœåŠ¡å™¨è®¾ç½®ä»£ç†é¡µé¢/å“åº”headeré…ç½®cors access-control-allow-origin\nCORSå…¨ç§°â€œ Cross-origin resource sharing â€ï¼ˆè·¨åŸŸèµ„æºå…±äº«ï¼‰ï¼Œç›¸æ¯”JSONPï¼Œ CORSå…è®¸ä»»ä½•ç±»å‹çš„è¯·æ±‚ ã€‚\n\n> CORSéœ€è¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨åŒæ—¶æ”¯æŒã€‚ç›®å‰ï¼Œæ‰€æœ‰æµè§ˆå™¨éƒ½æ”¯æŒè¯¥åŠŸèƒ½ï¼ŒIEæµè§ˆå™¨ä¸èƒ½ä½äºIE10ã€‚\n\n> æ•´ä¸ªCORSé€šä¿¡è¿‡ç¨‹ï¼Œéƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨å®Œæˆï¼Œä¸éœ€è¦ç”¨æˆ·å‚ä¸ã€‚å¯¹äºå¼€å‘è€…æ¥è¯´ï¼ŒCORSé€šä¿¡ä¸åŒæºçš„AJAXé€šä¿¡æ²¡æœ‰å·®åˆ«ï¼Œä»£ç å®Œå…¨ä¸€æ ·ã€‚æµè§ˆå™¨ä¸€æ—¦å‘ç°AJAXè¯·æ±‚è·¨\n> æºï¼Œå°±ä¼šè‡ªåŠ¨æ·»åŠ ä¸€äº›é™„åŠ çš„å¤´ä¿¡æ¯ï¼Œæœ‰æ—¶è¿˜ä¼šå¤šå‡ºä¸€æ¬¡é™„åŠ çš„è¯·æ±‚ï¼Œä½†ç”¨æˆ·ä¸ä¼šæœ‰æ„Ÿè§‰ã€‚\n\n> å› æ­¤ï¼Œå®ç°CORSé€šä¿¡çš„å…³é”®æ˜¯æœåŠ¡å™¨ã€‚åªè¦æœåŠ¡å™¨å®ç°äº†CORSæ¥å£ï¼Œå°±å¯ä»¥è·¨æºé€šä¿¡ã€‚\n\n7. nginxåå‘ä»£ç†ã€nodejsåå‘ä»£ç†\n- http-proxy-middleware æ’ä»¶\n```js\nvar express = require('express');\nvar proxy = require('http-proxy-middleware');\n\nvar app = express();\n\napp.use('/cosyer', proxy({target: 'http://39.105.136.190:3000/', changeOrigin: true}));\napp.listen(3000);\n```\n\n- webpack-dev-server\n```js\ndevServer: {\n    port: 3000,\n    inline: true,\n    proxy: {\n        \"/cosyer\": {\n            target: \"http://39.105.136.190:3000/\",\n            changeOrigin: true  //å¿…é¡»é…ç½®ä¸ºtrueï¼Œæ‰èƒ½æ­£ç¡®ä»£ç†\n        }\n    }\n}\n```\nwebpack çš„ devServer.proxy å°±æ˜¯ä½¿ç”¨äº†éå¸¸å¼ºå¤§çš„ http-proxy-middleware åŒ…æ¥å®ç°ä»£ç†çš„ï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šæ˜¯ç›¸é€šçš„ã€‚\n\n- nginx\n```js\nserver {\n  listen  80;\n  server_name  client.com;\n  location /api {\n    proxy_pass server.com;\n  }\n}\n```\n\n8. WebSocket\nWebSocketæ˜¯ä¸€ç§é€šä¿¡åè®®ï¼Œä½¿ç”¨ws://ï¼ˆéåŠ å¯†ï¼‰å’Œwss://ï¼ˆåŠ å¯†ï¼‰ä½œä¸ºåè®®å‰ç¼€ã€‚è¯¥åè®®ä¸å®è¡ŒåŒæºæ”¿ç­–ï¼Œåªè¦æœåŠ¡å™¨æ”¯æŒï¼Œå°±å¯ä»¥é€šè¿‡å®ƒè¿›è¡Œè·¨æºé€šä¿¡ã€‚\n\nç”±äºå‘å‡ºçš„WebSocketè¯·æ±‚ä¸­æœ‰æœ‰ä¸€ä¸ªå­—æ®µæ˜¯Originï¼Œè¡¨ç¤ºè¯¥è¯·æ±‚çš„è¯·æ±‚æºï¼ˆoriginï¼‰ï¼Œå³å‘è‡ªå“ªä¸ªåŸŸåã€‚\n\næ­£æ˜¯å› ä¸ºæœ‰äº†Originè¿™ä¸ªå­—æ®µï¼Œæ‰€ä»¥WebSocketæ‰æ²¡æœ‰å®è¡ŒåŒæºæ”¿ç­–ã€‚å› ä¸ºæœåŠ¡å™¨å¯ä»¥æ ¹æ®è¿™ä¸ªå­—æ®µï¼Œåˆ¤æ–­æ˜¯å¦è®¸å¯æœ¬æ¬¡é€šä¿¡ã€‚\n```js\nvar ws = new WebSocket('wss://echo.websocket.org');\nws.onopen = function (evt) {\n  console.log('Connection open ...');\n  ws.send('Hello WebSockets!');\n};\nws.onmessage = function (evt) {\n  console.log('Received Message: ', evt.data);\n  ws.close();\n};\nws.onclose = function (evt) {\n  console.log('Connection closed.');\n};\n```\n\n```\nå‰åç«¯é€šä¿¡æ–¹å¼\nAjax æ”¯æŒåŒæºé€šä¿¡\nWebSocket ä¸å—åŒæºç­–ç•¥å½±å“\nCORS æ—¢æ”¯æŒåŒæºé€šä¿¡ä¹Ÿæ”¯æŒè·¨åŸŸé€šä¿¡\n```\n\n## è§£å†³å¼‚æ­¥å›è°ƒåœ°ç‹±æœ‰å“ªäº›æ–¹æ¡ˆï¼Ÿ\n- promise\n- generator\n- async/await(ä¼˜ç¼ºç‚¹)\n`async å’Œawait` ç›¸æ¯”ç›´æ¥ä½¿ç”¨ `Promise` æ¥è¯´,ä¼˜åŠ¿åœ¨äºå¤„ç† then çš„è°ƒç”¨é“¾ï¼Œèƒ½å¤Ÿæ›´æ¸…æ™°å‡†ç¡®çš„å†™å‡ºä»£ç ã€‚ç¼ºç‚¹åœ¨äºæ»¥ç”¨ await å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½é—®é¢˜ï¼Œå› ä¸º await ä¼šé˜»å¡ä»£ç ï¼Œä¹Ÿè®¸ä¹‹åçš„å¼‚æ­¥ä»£ç å¹¶ä¸ä¾èµ–äºå‰è€…ï¼Œä½†ä»ç„¶éœ€è¦ç­‰å¾…å‰è€…å®Œæˆï¼Œå¯¼è‡´ä»£ç å¤±å»äº†å¹¶å‘æ€§ï¼Œå¯¼è‡´æ€§èƒ½çš„é™ä½ã€‚\n\n## å›¾ç‰‡çš„é¢„åŠ è½½å’Œæ‡’åŠ è½½ï¼Ÿ\n- é¢„åŠ è½½ï¼šæå‰åŠ è½½å›¾ç‰‡ï¼Œå½“ç”¨æˆ·éœ€è¦æŸ¥çœ‹æ—¶å¯ç›´æ¥ä»æœ¬åœ°ç¼“å­˜ä¸­æ¸²æŸ“ï¼ŒåŠ å¿«å“åº”é€Ÿåº¦ã€‚\n- æ‡’åŠ è½½ï¼šæ‡’åŠ è½½çš„ä¸»è¦ç›®çš„æ˜¯ä½œä¸ºæœåŠ¡å™¨å‰ç«¯çš„ä¼˜åŒ–ï¼Œå‡å°‘è¯·æ±‚æ•°æˆ–å»¶è¿Ÿè¯·æ±‚æ•°ã€‚\n\nä¸¤ç§æŠ€æœ¯çš„æœ¬è´¨ï¼šä¸¤è€…çš„è¡Œä¸ºæ˜¯ç›¸åçš„ï¼Œä¸€ä¸ªæ˜¯æå‰åŠ è½½ï¼Œä¸€ä¸ªæ˜¯è¿Ÿç¼“ç”šè‡³ä¸åŠ è½½ã€‚ æ‡’åŠ è½½å¯¹æœåŠ¡å™¨å‰ç«¯æœ‰ä¸€å®šçš„ç¼“è§£å‹åŠ›ä½œç”¨ï¼Œé¢„åŠ è½½åˆ™ä¼šå¢åŠ æœåŠ¡å™¨å‰ç«¯å‹åŠ›ã€‚\n\n## mouseoverå’Œmouseenterçš„åŒºåˆ«ï¼Ÿ\n- mouseoverï¼šå½“é¼ æ ‡ç§»å…¥å…ƒç´ æˆ–å…¶å­å…ƒç´ éƒ½ä¼šè§¦å‘äº‹ä»¶ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªé‡å¤è§¦å‘ï¼Œå†’æ³¡çš„è¿‡ç¨‹ã€‚å¯¹åº”çš„ç§»é™¤äº‹ä»¶æ˜¯mouseout\n\n- mouseenterï¼šå½“é¼ æ ‡ç§»å…¥å…ƒç´ æœ¬èº«ï¼ˆä¸åŒ…å«å…ƒç´ çš„å­å…ƒç´ ï¼‰ä¼šè§¦å‘äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸ä¼šå†’æ³¡ï¼Œå¯¹åº”çš„ç§»é™¤äº‹ä»¶æ˜¯mouseleave\n\n- onmousedown å½“å…ƒç´ ä¸ŠæŒ‰ä¸‹é¼ æ ‡æŒ‰é’®æ—¶å‡ºå‘\n- onmousemove å½“é¼ æ ‡æŒ‡é’ˆç§»åŠ¨åˆ°å…ƒç´ ä¸Šç§»åŠ¨è§¦å‘\n- onmouseover å½“é¼ æ ‡æŒ‡é’ˆç§»åŠ¨å…ƒç´ ä¸Šæ—¶è§¦å‘\n- onmouseout å½“é¼ æ ‡æŒ‡é’ˆç§»å‡ºæŒ‡å®šçš„å¯¹è±¡æ—¶å‘ç”Ÿã€‚\n- onmouseup å½“åœ¨å…ƒç´ ä¸Šé‡Šæ”¾é¼ æ ‡æŒ‰é’®æ—¶è§¦å‘\n- onmouseenter äº‹ä»¶åœ¨é¼ æ ‡æŒ‡é’ˆç§»åŠ¨åˆ°å…ƒç´ ä¸Šæ—¶è§¦å‘ã€‚(ä¸å†’æ³¡)\n- onmouseleave äº‹ä»¶åœ¨é¼ æ ‡ç§»é™¤å…ƒç´ æ—¶è§¦å‘ã€‚(ä¸å†’æ³¡)\n\n## æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡é’ˆçš„æŒ‡å‘å‡½æ•°ï¼ˆbindï¼Œapplyï¼Œcallçš„åŒºåˆ«ï¼‰ï¼Ÿ\n- é€šè¿‡applyå’Œcallæ”¹å˜å‡½æ•°çš„thisæŒ‡å‘ï¼Œä»–ä»¬ä¸¤ä¸ªå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ä¸€æ ·çš„è¡¨ç¤ºè¦æ”¹å˜æŒ‡å‘çš„é‚£ä¸ªå¯¹è±¡(å‡½æ•°ä½œç”¨åŸŸ)ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼Œapplyæ˜¯æ•°ç»„æˆ–è€…ç±»æ•°ç»„å¯¹è±¡argumentsï¼Œè€Œcallåˆ™æ˜¯arg1,arg2...è¿™ç§å½¢å¼ã€‚\n\n- é€šè¿‡bindæ”¹å˜thisä½œç”¨åŸŸä¼šè¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¸ä¼šé©¬ä¸Šæ‰§è¡Œã€‚\n\n## è¯´è¯´å‰ç«¯ä¸­çš„äº‹ä»¶æµ\nHTMLä¸­ä¸javascriptäº¤äº’æ˜¯é€šè¿‡äº‹ä»¶é©±åŠ¨æ¥å®ç°çš„ï¼Œä¾‹å¦‚é¼ æ ‡ç‚¹å‡»äº‹ä»¶onclickã€é¡µé¢çš„æ»šåŠ¨äº‹ä»¶onscrollç­‰ç­‰ï¼Œå¯ä»¥å‘æ–‡æ¡£æˆ–è€…æ–‡æ¡£ä¸­çš„å…ƒç´ æ·»åŠ äº‹ä»¶ä¾¦å¬å™¨æ¥é¢„è®¢äº‹ä»¶ã€‚æƒ³è¦çŸ¥é“è¿™äº›äº‹ä»¶æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è¿›è¡Œè°ƒç”¨çš„ï¼Œå°±éœ€è¦äº†è§£ä¸€ä¸‹â€œäº‹ä»¶æµâ€çš„æ¦‚å¿µã€‚\nä»€ä¹ˆæ˜¯äº‹ä»¶æµï¼šäº‹ä»¶æµæè¿°çš„æ˜¯ä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåº,DOM2çº§äº‹ä»¶æµåŒ…æ‹¬ä¸‹é¢å‡ ä¸ªé˜¶æ®µã€‚\n\näº‹ä»¶æ•è·é˜¶æ®µ\nå¤„äºç›®æ ‡é˜¶æ®µ\näº‹ä»¶å†’æ³¡é˜¶æ®µ\n\naddEventListenerï¼šaddEventListener æ˜¯DOM2 çº§äº‹ä»¶æ–°å¢çš„æŒ‡å®šäº‹ä»¶å¤„ç†ç¨‹åºçš„æ“ä½œï¼Œè¿™ä¸ªæ–¹æ³•æ¥æ”¶3ä¸ªå‚æ•°ï¼šè¦å¤„ç†çš„äº‹ä»¶åã€ä½œä¸ºäº‹ä»¶å¤„ç†ç¨‹åºçš„å‡½æ•°å’Œä¸€ä¸ªå¸ƒå°”å€¼ã€‚æœ€åè¿™ä¸ªå¸ƒå°”å€¼å‚æ•°å¦‚æœæ˜¯trueï¼Œè¡¨ç¤ºåœ¨æ•è·é˜¶æ®µè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åºï¼›å¦‚æœæ˜¯falseï¼Œè¡¨ç¤ºåœ¨å†’æ³¡é˜¶æ®µè°ƒç”¨äº‹ä»¶å¤„ç†ç¨‹åºã€‚\nIEåªæ”¯æŒäº‹ä»¶å†’æ³¡ã€‚\n\n## å¦‚ä½•è®©äº‹ä»¶å…ˆå†’æ³¡åæ‰§è¡Œï¼Ÿ\nåœ¨DOMæ ‡å‡†äº‹ä»¶æ¨¡å‹ä¸­ï¼Œæ˜¯å…ˆæ•è·åå†’æ³¡ã€‚ä½†æ˜¯å¦‚æœè¦å®ç°å…ˆå†’æ³¡åæ•è·çš„æ•ˆæœï¼Œå¯¹äºåŒä¸€ä¸ªäº‹ä»¶ï¼Œç›‘å¬æ•è·å’Œå†’æ³¡ï¼Œåˆ†åˆ«å¯¹åº”ç›¸åº”çš„å¤„ç†å‡½æ•°ï¼Œç›‘å¬åˆ°æ•è·äº‹ä»¶ï¼Œå…ˆæš‚ç¼“æ‰§è¡Œï¼Œç›´åˆ°å†’æ³¡äº‹ä»¶è¢«æ•è·åå†æ‰§è¡Œæ•è·äº‹\nä»¶ã€‚\n\n## ä»€ä¹ˆæ˜¯äº‹ä»¶å§”æ‰˜ï¼Ÿï¼ˆäº‹ä»¶ä»£ç†ï¼‰\nç®€ä»‹ï¼šäº‹ä»¶å§”æ‰˜æŒ‡çš„æ˜¯ï¼Œä¸åœ¨äº‹ä»¶çš„å‘ç”Ÿåœ°ï¼ˆç›´æ¥domï¼‰ä¸Šè®¾ç½®ç›‘å¬å‡½æ•°ï¼Œè€Œæ˜¯åœ¨å…¶çˆ¶å…ƒç´ ä¸Šè®¾ç½®ç›‘å¬å‡½æ•°ï¼Œé€šè¿‡äº‹ä»¶å†’æ³¡ï¼Œçˆ¶å…ƒç´ å¯ä»¥ç›‘å¬åˆ°å­å…ƒç´ ä¸Šäº‹ä»¶çš„è§¦å‘ï¼Œé€šè¿‡åˆ¤æ–­äº‹ä»¶å‘ç”Ÿå…ƒç´ DOMçš„ç±»å‹ï¼Œæ¥åšå‡ºä¸åŒçš„\nå“åº”ã€‚\n\næ•è·é˜¶æ®µçš„å®é™…åº”ç”¨ï¼šå¯ä»¥åœ¨çˆ¶å…ƒç´ å±‚é¢é˜»æ­¢äº‹ä»¶å‘å­å…ƒç´ ä¼ æ’­ï¼Œä¹Ÿå¯ä»¥ä»£æ›¿å­å…ƒç´ æ‰§è¡ŒæŸäº›æ“ä½œã€‚\n\nä¸¾ä¾‹ï¼šæœ€ç»å…¸çš„å°±æ˜¯ulå’Œliæ ‡ç­¾çš„äº‹ä»¶ç›‘å¬ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨æ·»åŠ äº‹ä»¶æ—¶å€™ï¼Œé‡‡ç”¨äº‹ä»¶å§”æ‰˜æœºåˆ¶ï¼Œä¸ä¼šåœ¨liæ ‡ç­¾ä¸Šç›´æ¥æ·»åŠ ï¼Œè€Œæ˜¯åœ¨ulçˆ¶å…ƒç´ ä¸Šæ·»åŠ ã€‚\n\nå¥½å¤„ï¼š\n1. å‡å°‘å†…å­˜æ¶ˆè€—ï¼Œæé«˜æ€§èƒ½(ä¸éœ€è¦ä¸ºæ¯ä¸€ä¸ªå­å…ƒç´ ç»‘å®šäº‹ä»¶)\n2. åŠ¨æ€ç»‘å®šäº‹ä»¶\n\n```html\n<ul id=\"proxy\">\n  <li><button id=\"1\">1</button></li>\n  <li><button id=\"2\">2</button></li>\n  <li><button id=\"3\">3</button></li>\n</ul>\n```\n\n```js\nfunction main() {\n  const proxy = document.getElementById('proxy')\n\n  proxy.addEventListener('click', event => {\n    const currentTarget = event.target\n    const id = currentTarget.id\n    switch (id) {\n      case '1':\n        alert(`proxy: ${1}`)\n        break;\n      case '2':\n        alert(`proxy: ${2}`)\n        break;\n      case '3':\n        alert(`proxy: ${3}`)\n        break;\n      default:\n        break;\n    }\n  })\n}\n```\n- event.target & event.currentTarget\n```js\n<div id=\"a\">\n    aaaa\n  <div id=\"b\">\n      bbbb\n    <div id=\"c\">\n        cccc\n      <div id=\"d\">\n          dddd\n      </div>\n    </div>\n  </div>\n</div>\n\n<script>\n    document.getElementById(\"a\").addEventListener(\"click\", function (e) {\n        console.log(\n            \"target:\" + e.target.id + \"&currentTarget:\" + e.currentTarget.id\n        );\n    });\n    document.getElementById(\"b\").addEventListener(\"click\", function (e) {\n        console.log(\n            \"target:\" + e.target.id + \"&currentTarget:\" + e.currentTarget.id\n        );\n    });\n    document.getElementById(\"c\").addEventListener(\"click\", function (e) {\n        console.log(\n            \"target:\" + e.target.id + \"&currentTarget:\" + e.currentTarget.id\n        );\n    });\n    document.getElementById(\"d\").addEventListener(\"click\", function (e) {\n        console.log(\n            \"target:\" + e.target.id + \"&currentTarget:\" + e.currentTarget.id\n        );\n    });\n</script>\n\n// å½“æˆ‘ä»¬ç‚¹å‡»æœ€é‡Œå±‚çš„å…ƒç´ dçš„æ—¶å€™ï¼Œä¼šä¾æ¬¡è¾“å‡º:\n// target:d&currentTarget:d\n// target:d&currentTarget:c\n// target:d&currentTarget:b\n// target:d&currentTarget:a\n```\nevent.targetå§‹ç»ˆæ˜¯äº‹ä»¶çš„çœŸæ­£å‘å‡ºè€…ï¼Œè€Œevent.currentTargetå§‹ç»ˆæ˜¯ç›‘å¬äº‹ä»¶è€…ã€‚\n\n## å‚ç›´å±…ä¸­\n1. margin:autoæ³•\n```css\ndiv{\n    width:200px;\n    margin:0 auto;\n}\n/* ç»å¯¹å®šä½å±…ä¸­ */\ndiv {\n    position: absolute;\n    width: 300px;\n    height: 300px;\n    margin: auto;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    background-color: pink;    /* æ–¹ä¾¿çœ‹æ•ˆæœ */\n}\n```\n\n2. marginè´Ÿå€¼æ³• relative -> absolute \n```css\ndiv {\n    position: relative;        /* ç›¸å¯¹å®šä½æˆ–ç»å¯¹å®šä½å‡å¯ */\n    width:500px;\n    height:300px;\n    top: 50%;\n    left: 50%;\n    margin: -150px 0 0 -250px;         /* å¤–è¾¹è·ä¸ºè‡ªèº«å®½é«˜çš„ä¸€åŠ */\n    /* transform: translate(-50%, -50%); */\n    background-color: pink;         /* æ–¹ä¾¿çœ‹æ•ˆæœ */\n\n}\n```\n\n3. flexå¸ƒå±€\n```css\n.container {\n    display: flex;\n    align-items: center;         /* å‚ç›´å±…ä¸­ */\n    justify-content: center;    /* æ°´å¹³å±…ä¸­ */\n\n}\n.container div {\n    width: 100px;\n    height: 100px;\n    background-color: pink;        /* æ–¹ä¾¿çœ‹æ•ˆæœ */\n}  \n```\n\n4. table-cellæœªè„±ç¦»æ–‡æ¡£æµ è®¾ç½®çˆ¶å…ƒç´ çš„display:table-cell,å¹¶ä¸”vertical-align:middleï¼Œè¿™æ ·å­å…ƒç´ å¯ä»¥å®ç°å‚ç›´å±…ä¸­ã€‚\n5. gridå¸ƒå±€\n6. line-heightå•é…height\n\n## visibility=hidden, opacity=0ï¼Œdisplay:none\n- opacity=0ï¼Œè¯¥å…ƒç´ éšè—èµ·æ¥äº†ï¼Œä½†ä¸ä¼šæ”¹å˜é¡µé¢å¸ƒå±€ï¼Œå¹¶ä¸”ï¼Œå¦‚æœè¯¥å…ƒç´ å·²ç»ç»‘å®šä¸€äº›äº‹ä»¶ï¼Œå¦‚clickäº‹ä»¶ï¼Œé‚£ä¹ˆç‚¹å‡»è¯¥åŒºåŸŸï¼Œä¹Ÿèƒ½è§¦å‘ç‚¹å‡»äº‹ä»¶çš„\n- visibility=hiddenï¼Œè¯¥å…ƒç´ éšè—èµ·æ¥äº†ï¼Œä½†ä¸ä¼šæ”¹å˜é¡µé¢å¸ƒå±€ï¼Œä½†æ˜¯ä¸ä¼šè§¦å‘è¯¥å…ƒç´ å·²ç»ç»‘å®šçš„äº‹ä»¶ã€‚\n- display=noneï¼ŒæŠŠå…ƒç´ éšè—èµ·æ¥ï¼Œå¹¶ä¸”ä¼šæ”¹å˜é¡µé¢å¸ƒå±€ï¼Œå¯ä»¥ç†è§£æˆåœ¨é¡µé¢ä¸­æŠŠè¯¥å…ƒç´ åˆ é™¤æ‰ä¸€æ ·ã€‚\n\n## å—å…ƒç´ å’Œè¡Œå†…å…ƒç´ çš„åŒºåˆ«\n- å—å…ƒç´ ï¼šç‹¬å ä¸€è¡Œï¼Œå¹¶ä¸”æœ‰è‡ªåŠ¨å¡«æ»¡çˆ¶å…ƒç´ ï¼Œå¯ä»¥è®¾ç½®marginå’Œpaddingä»¥åŠé«˜åº¦å’Œå®½åº¦ã€‚\n- è¡Œå…ƒç´ ï¼šä¸ä¼šç‹¬å ä¸€è¡Œï¼Œwidthå’Œheightä¼šå¤±æ•ˆï¼Œå¹¶ä¸”åœ¨å‚ç›´æ–¹å‘çš„paddingå’Œmarginä¼šå¤±æ•ˆã€‚\n- å†…å®¹ä¸Šï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¡Œå†…å…ƒç´ åªèƒ½åŒ…å«æ–‡æœ¬å’Œå…¶ä»–è¡Œå†…å…ƒç´ ã€‚è€Œå—çº§å…ƒç´ å¯ä»¥åŒ…å«è¡Œå†…å…ƒç´ å’Œå…¶ä»–å—çº§å…ƒç´ ã€‚  \n\n## æ·±æ‹·è´\n- æ·±æ‹·è´çš„æ–¹æ³• 1-2é€‚ç”¨äºä¸€èˆ¬çš„å¯¹è±¡å’Œæ•°ç»„ 4-5é€‚ç”¨äºæ•°ç»„ 3é€šç”¨\n\n```JS\nlet obj = {\n    a: 1,\n    arr: [1, 2]\n};\nlet obj2 = deepCopy(obj);\nobj2.a = 2\nconsole.log(obj) // { a:1, arr: [1,2] };\n2.es6\nObject.assign()æ–¹æ³•(æ·±å¤åˆ¶åªæœ‰ä¸€å±‚ï¼Œä¹‹åä¸ºæµ…å¤åˆ¶ï¼ˆé™¤éå†æ¬¡ä½¿ç”¨Object.assignåµŒå¥—æ–¹å¼èµ‹å€¼ï¼‰)\nlet obj = {\n    a: 1,\n    arr: [1, 2]\n};\nlet obj1 = Object.assign({}, obj);\nobj1.a = 2\n//ä¸å˜\nconsole.log(obj) // { a:1, arr: [1,2] };\n3.immutable\n4.arr1=arr.slice(0) slice() è¿”å›æ–°æ•°ç»„\n5.arr1=arr.concat()\nvar deepCopy= function(source) { \n    var result={};\n    for (var key in source) {\n        result[key] = typeof source[key]==='object'? deepCoypy(source[key]): source[key];\n     } \n   return result; \n}\n```\n\n## åˆ¤æ–­ä¸€ä¸ªå˜é‡æ˜¯å¦æ˜¯æ•°ç»„\n```JS\nvar a = []; \n// 1.åŸºäºinstanceof \na instanceof Array; \n// 2.åŸºäºconstructor \na.constructor === Array; \n// 3.åŸºäºObject.prototype.isPrototypeOf \nArray.prototype.isPrototypeOf(a); \n// 4.åŸºäºgetPrototypeOf \nObject.getPrototypeOf(a) === Array.prototype; \n// 5.åŸºäºObject.prototype.toString \nObject.prototype.toString.apply(a) === '[object Array]';\n// 6.Array.isArray\nArray.isArray(a); // true\n```\nä»¥ä¸Šï¼Œé™¤äº†Object.prototype.toStringå¤–ï¼Œå…¶å®ƒæ–¹æ³•éƒ½ä¸èƒ½æ­£ç¡®åˆ¤æ–­å˜é‡çš„ç±»å‹ã€‚è™½ç„¶Arrayç»§æ‰¿è‡ªObjectï¼Œä¹Ÿä¼šæœ‰ toStringæ–¹æ³•ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•æœ‰å¯èƒ½ä¼šè¢«æ”¹å†™è€Œè¾¾ä¸åˆ°æˆ‘ä»¬çš„è¦æ±‚ï¼Œè€ŒObject.prototypeåˆ™æ˜¯è€è™çš„å±è‚¡ï¼Œå¾ˆå°‘æœ‰äººæ•¢å»ç¢°å®ƒçš„ï¼Œæ‰€ä»¥èƒ½ä¸€å®šç¨‹åº¦ä¿è¯å…¶â€œçº¯æ´æ€§â€ï¼š)ğŸ˜\n\n* ç”±äºæ¯ä¸ªiframeéƒ½æœ‰ä¸€å¥—è‡ªå·±çš„æ‰§è¡Œç¯å¢ƒï¼Œè·¨iframeå®ä¾‹åŒ–çš„å¯¹è±¡å½¼æ­¤æ˜¯ä¸å…±äº«åŸå‹é“¾çš„ï¼Œå› æ­¤å¯¼è‡´æ£€æµ‹ä»£ç å¤±æ•ˆã€‚\n\nä¸¾ä¸ªğŸŒ°\n```js\nvar iframe = document.createElement('iframe'); //åˆ›å»ºiframe\ndocument.body.appendChild(iframe); //æ·»åŠ åˆ°bodyä¸­\nxArray = window.frames[window.frames.length-1].Array;\nvar arr = new xArray(1,2,3); // å£°æ˜æ•°ç»„[1,2,3]\nalert(arr instanceof Array); // false\nalert(arr.constructor === Array); // false\n```\n\n* æœ€ä½³å†™æ³•\n```JS\nvar arr = [1,2,3,1];\nvar arr2 = [{ abac : 1, abc : 2 }];\nfunction isArrayFn(value){\nif (typeof Array.isArray === \"function\") {\nreturn Array.isArray(value);\n}else{\nreturn Object.prototype.toString.call(value) === \"[object Array]\";\n}\n}\nconsole.log(isArrayFn(arr));// true\nconsole.log(isArrayFn(arr2));// true\n```\n\n## ä¼˜åŒ–\n- æŒ‰éœ€åŠ è½½ï¼ˆå½“ç”¨æˆ·è§¦å‘äº†åŠ¨ä½œæ—¶æ‰åŠ è½½å¯¹åº”çš„åŠŸèƒ½ï¼‰è·¯ç”±\n- ä¸šåŠ¡ä»£ç æ‹†åˆ†\n- ç¬¬ä¸‰æ–¹åº“æå–vendor\n\n- é™ä½è¯·æ±‚é‡ï¼šå‹ç¼©æ–‡ä»¶å›¾ç‰‡ï¼Œåˆå¹¶æ–‡ä»¶ å‡å°‘httpè¯·æ±‚ã€minify/gzipå‹ç¼©ï¼ŒwebPï¼Œlazyload\n- ç½‘ç»œå›¾ã€å­—ä½“å›¾æ ‡(é›ªç¢§å›¾)\n- ç¼“å­˜ï¼šHTTPåè®®ç¼“å­˜è¯·æ±‚ï¼Œç¦»çº¿ç¼“å­˜manifest\n- åŠ å¿«è¯·æ±‚é€Ÿåº¦ï¼šé¢„è§£æDNSï¼Œå‡å°‘åŸŸåæ•°ï¼Œå¹¶è¡ŒåŠ è½½ï¼Œä¸Šcdnåˆ†å‘\n- æ¸²æŸ“ï¼šjsã€cssä¼˜åŒ–ï¼ŒåŠ è½½é¡ºåºï¼ŒæœåŠ¡ç«¯æ¸²æŸ“ï¼Œpipeline\n\n## è¡Œå†…ã€å—çº§ã€ç©ºå…ƒç´  \n- è¡Œå†…å…ƒç´ ï¼šaã€bã€spanã€imgã€inputã€strongã€selectã€labelã€emã€buttonã€textarea\n- å—çº§å…ƒç´ ï¼šdivã€ulã€liã€dlã€dtã€ddã€pã€h1-h6ã€blockquote\n- å¸¸è§ç©ºå…ƒç´ ï¼šå³æ²¡æœ‰å†…å®¹çš„HTMLå…ƒç´ ï¼Œä¾‹å¦‚ï¼šbrã€metaã€hrã€linkã€inputã€img\n- ä¸å¸¸è§ç©ºå…ƒç´ ï¼šareaã€baseã€colã€commandã€embedã€keygenã€paramã€sourceã€trackã€wbr\n\nå®½é«˜å’Œmarginå¯ä»¥è®¾ç½®autoã€‚å¯¹äºå—çº§å…ƒç´ æ¥è¯´ï¼Œå®½åº¦è®¾ç½®ä¸ºautoï¼Œåˆ™ä¼šå°½å¯èƒ½çš„å®½ï¼›é«˜åº¦è®¾ç½®ä¸ºautoï¼Œåˆ™ä¼šå°½å¯èƒ½çš„çª„ æ³¨æ„ï¼š å¦‚æœæ²¡æœ‰æ˜¾å¼å£°æ˜åŒ…å«å—çš„heightï¼Œåˆ™å…ƒç´ çš„ç™¾åˆ†æ•°é«˜åº¦ä¼šé‡ç½®ä¸ºauto\næ³¨æ„ï¼š ä¸ç®¡æ˜¯ä¸Šä¸‹paddingè¿˜æ˜¯å·¦å³paddingï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ç™¾åˆ†æ¯”è®¾ç½®çš„æ—¶å€™ï¼Œéƒ½æ˜¯åŸºäºwidthçš„ã€‚\næ³¨æ„ï¼š marginé€šè¿‡ç™¾åˆ†æ¯”è®¾ç½®çš„æ—¶å€™åŒæ ·æ˜¯åŸºäºå®½åº¦çš„ã€‚\n\n## pxã€emã€remçš„åŒºåˆ«\npxå’Œeméƒ½æ˜¯é•¿åº¦å•ä½,pxçš„åªæ˜¯å›ºå®šçš„,emçš„å€¼æ˜¯ç›¸å¯¹çš„ç»§æ‰¿çˆ¶ç±»å…ƒç´ çš„å­—ä½“å¤§å°ã€‚æµè§ˆå™¨çš„é»˜è®¤å­—ä½“é«˜ä½16pxã€‚1em=16px;\nremå•ä½åŸºäºhtmlæ ¹å…ƒç´ çš„å­—ä½“å¤§å°ã€‚\n\n- vw/vh(css3) vmin(vwå’Œvhçš„è¾ƒå°å€¼)/vmax(vwå’Œvhçš„è¾ƒå¤§å€¼)å’Œç™¾åˆ†æ¯”çš„åŒºåˆ«\n\n|å•ä½|å«ä¹‰|\n|:---|:---|\n|%|å¤§éƒ¨åˆ†ç›¸å¯¹äºç¥–å…ˆå…ƒç´ ï¼Œä¹Ÿæœ‰ç›¸å¯¹äºè‡ªèº«çš„æƒ…å†µæ¯”å¦‚ï¼ˆborder-radiusã€translateç­‰)|\n|vm/vh|ç›¸å¯¹äºè§†çª—çš„å°ºå¯¸|\n\n## è·¯ç”±æƒé™ç®¡ç†\n- route renderæ–¹æ³•é‡Œè¿›è¡Œåˆ¤æ–­ redirect or return null\n- ç»„ä»¶å†…éƒ¨åˆ¤æ–­\n- é«˜é˜¶ç»„ä»¶\n- dvaç›‘å¬url subscription\n\n## nodeä¸­çš„äº‹ä»¶å¾ªç¯æ˜¯ä»€ä¹ˆæ ·å­çš„?\n- event loopå…¶å®å°±æ˜¯ä¸€ä¸ªäº‹ä»¶é˜Ÿåˆ—ï¼Œå…ˆåŠ å…¥å…ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¸€æ¬¡é˜Ÿåˆ—ï¼Œå†æ¬¡å¾ªç¯éå†çœ‹æœ‰æ²¡æœ‰æ–°äº‹ä»¶åŠ å…¥é˜Ÿåˆ—ï¼æ‰§è¡Œä¸­çš„å«IO events, setImmediateæ˜¯åœ¨å½“å‰é˜Ÿåˆ—ç«‹å³æ‰§è¡Œ,setTimout/setIntervalæ˜¯æŠŠæ‰§è¡Œå®šæ—¶åˆ°ä¸‹ä¸€ä¸ªé˜Ÿåˆ—ï¼Œprocess.nextTickæ˜¯åœ¨å½“å‰æ‰§è¡Œå®Œï¼Œä¸‹æ¬¡éå†å‰æ‰§è¡Œï¼æ‰€ä»¥æ€»ä½“é¡ºåºæ˜¯: IO events >> setImmediate >> setTimeout/setInterval >> process.nextTick\n\n## æ¸…ç©ºæ•°ç»„\n- ç›´æ¥èµ‹å€¼ç©ºæ•°ç»„\n- splice(0,æ•°ç»„length)æ¸…ç©º\n- è®¾ç½®æ•°ç»„length=0\n\n## åˆ¤æ–­æ•°ç»„ä¸­å‡ºç°æ¬¡æ•°æœ€å¤šçš„å…ƒç´ \n1. ä¸´æ—¶å¯¹è±¡æ•°ç»„ï¼ŒåŸæ•°ç»„sortæ’åºï¼Œåˆ¤æ–­å‰åä½æ˜¯å¦ç›¸ç­‰ã€‚ä¸´æ—¶å¯¹è±¡æ•°ç»„æ’åº\n\n```javascript\nfunction f(arr){\n    var temp=[];//å¯¹è±¡æ•°ç»„\n    var i;\n    temp[0]={value:arr[0],index:1};//ä¿å­˜æ•°ç»„å…ƒç´ å‡ºç°çš„æ¬¡æ•°å’Œå€¼\n    arr.sort();\n    for(i=1;i<arr.length;i++){\n        if(arr[i]==arr[i-1]){\n            temp[temp.length-1].index++;\n        }else{//ä¸ç›¸åŒåˆ™æ–°å¢ä¸€ä¸ªå¯¹è±¡å…ƒç´ \n            temp.push({index:1,value:arr[i]});\n        }\n    }\n    temp.sort(function(a,b){//æŒ‰ç…§å‡ºç°æ¬¡æ•°ä»å¤§åˆ°å°æ’åˆ—\n        return b.index-a.index;\n    })\n    var max=temp[0].index;\n    var maxV=temp[0].value;\n    var second=temp[1].index;\n    var secondV=temp[1].value;\n\n    return {max,maxV,second,secondV};\n}\nvar arr=[2,2,3,4,5,100,100,,3,1,4,4,100,100];\nvar {max,maxV,second,secondV}=f(arr);\nconsole.log(max,maxV,second,secondV); // 4 100 3 4\n```\n\n2. ä¸´æ—¶å¯¹è±¡ åˆ¤æ–­å±æ€§åå­˜ä¸å­˜åœ¨ 2æ¬¡éå†\n```javascript\nvar arr = [1,1,2,2,2,2,2,3,3,3,4,4];\n    var obj = {};\n    for(var i = 0; i<arr.length; i++){\n        if(!obj[arr[i]]){\n            obj[arr[i]] = 1;\n        }else {\n            obj[arr[i]]++;\n        }\n    }\n    /*\n        æ­¤æ—¶çš„objå¯¹è±¡åŒ…å«äº†æ‰€æœ‰å…ƒç´ å‡ºç°æ¬¡æ•°çš„ä¿¡æ¯\n        ç„¶åå†éå†objå¯¹è±¡å°±å¯ä»¥æŸ¥è¯¢å‡ºå‡ºç°æ¬¡æ•°æœ€å¤š/æœ€å°‘çš„å…ƒç´ äº†\n    */\n    var maxNum = 0;\n    var minNum = obj[arr[0]];  //å…ˆéšæ„ç»™æœ€å°‘çš„å˜é‡èµ‹å€¼ï¼ˆä½†ä¿è¯æ˜¯æ•°ç»„ä¸­çš„å…ƒç´ å‡ºç°çš„æ¬¡æ•°ï¼‰\n    var maxEleArr = [],minEleArr = [];\n    //ç¬¬ä¸€æ¬¡éå†æ‰¾å‡ºå‡ºç°æ¬¡æ•°æœ€å¤šå’Œæœ€å°‘çš„å€¼\n    for(var key in obj){\n        if(obj[key] > maxNum){\n            maxNum = obj[key];\n        }\n        if(obj[key] < maxNum){\n            minNum = obj[key];\n        }\n    }\n    //ç¬¬äºŒæ¬¡éå†æ‰¾å‡ºæ‰€æœ‰å‡ºç°æ¬¡æ•°æœ€å¤šå’Œæœ€å°‘çš„å…ƒç´ \n    for(var key in obj){\n        if(obj[key] == maxNum){\n            maxEleArr.push(key);\n        }\n        if(obj[key] == minNum){\n            minEleArr.push(key);\n        }\n    }\n    console.log(maxEleArr + \":\" + maxNum );  // 2:5\n    console.log(minEleArr + \":\" + minNum );  // 1,4:2\n```\n\n3. reduceç®€å†™\n```js\nvar arr = 'abcdaabc';\n\nvar info = arr\n    .split('')\n    .reduce((p, k) => (p[k]++ || (p[k] = 1), p), {});\n\nconsole.log(info); //{ a: 3, b: 2, c: 2, d: 1 }\n```\n\n4. ä¸´æ—¶å¯¹è±¡ç®€å†™\n```js\nconst map = {}\nconst str = 'hello world'\n\nstr.split('').forEach(key => {\n  map[key] = -~map[key]\n})\n\nconsole.log(map)\n// {\" \": 1, d: 1, e: 1, h: 1, l: 3, o: 2, r: 1, w: 1}\n// ~i = -(i + 1)ï¼Œ~undefined = -1\n```\n\n## æ¸…é™¤æµ®åŠ¨\n**æµ®åŠ¨å…ƒç´ çš„å½±å“**\n- æµ®åŠ¨å…ƒç´ å®½åº¦é»˜è®¤ä¸ºå†…å®¹çš„å®½åº¦\n- å‘æŒ‡å®šçš„æµ®åŠ¨æ–¹å‘ä¸€ç›´ç§»åŠ¨\n- å¯¹å®ƒä¹‹å‰çš„blockæ²¡æœ‰å½±å“\n- ä¼šæ©ç›–åé¢çš„blockå…ƒç´ ï¼Œä½†æ˜¯ä¸ä¼šé®ç›–å…¶ä¸­çš„æ–‡æœ¬å’Œå†…è”å…ƒç´ \n\n**å¤šä¸ªæµ®åŠ¨å…ƒç´ **\n- å¤šä¸ªæµ®åŠ¨å…ƒç´ ä¸ä¼šç›¸äº’é‡å \n- æµ®åŠ¨å…ƒç´ æŒ‰ç…§åœ¨çˆ¶å…ƒç´ ä¸­çš„ä¹¦å†™é¡ºåºï¼Œä»ä¸Šè‡³ä¸‹æ’å¸ƒ\n- å½“åŒä¸€è¡Œæœ‰ç©ºé—´çš„æ—¶å€™ï¼Œä¸ç®¡å·¦æµ®åŠ¨è¿˜æ˜¯å³æµ®åŠ¨ï¼Œéƒ½ä¼˜å…ˆåœ¨åŒä¸€è¡Œæ’åˆ—\n- å½“åŒä¸€è¡Œæ²¡æœ‰ç©ºé—´ï¼Œåç»­æµ®åŠ¨å…ƒç´ ä¼šä»ä¸Šè‡³ä¸‹å¯»æ‰¾ç©ºé—´\n- æµ®åŠ¨å…ƒç´ çš„ä¸Šä¸‹å·¦å³marginä¸ä¼šå‘ç”Ÿé‡å åˆå¹¶\n\næ¸…é™¤æµ®åŠ¨æ˜¯ä¸ºäº†æ¸…é™¤æµ®åŠ¨å…ƒç´ äº§ç”Ÿçš„å½±å“ã€‚æµ®åŠ¨å…ƒç´ çš„é«˜åº¦ä¼šå‘ç”Ÿåå¡Œï¼Œä½¿é¡µé¢åé¢çš„å¸ƒå±€ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚\nè®¾ç½®æˆæµ®åŠ¨åï¼Œdisplayå€¼ä¼šè‡ªåŠ¨å˜æˆblockã€‚\n> æµ®åŠ¨ä¼šå¼•èµ·é«˜åº¦å¡Œé™·å’Œæ–‡å­—ç¯ç»•ã€‚\n1. ä½¿ç”¨ç©ºæ ‡ç­¾æ¸…é™¤æµ®åŠ¨clear: both ï¼ˆå¢åŠ äº†æ— æ„ä¹‰çš„æ ‡ç­¾ï¼‰\n2. ä½¿ç”¨overflow: auto/hidden ï¼ˆä½¿ç”¨zoom: 1å…¼å®¹IEï¼‰\nzoom:1çš„æ¸…é™¤æµ®åŠ¨åŸç†?\næ¸…é™¤æµ®åŠ¨ï¼Œè§¦å‘hasLayoutï¼›\nZoomå±æ€§æ˜¯IEæµè§ˆå™¨çš„ä¸“æœ‰å±æ€§ï¼Œå®ƒå¯ä»¥è®¾ç½®æˆ–æ£€ç´¢å¯¹è±¡çš„ç¼©æ”¾æ¯”ä¾‹ã€‚è§£å†³ieä¸‹æ¯”è¾ƒå¥‡è‘©çš„bugã€‚\nè­¬å¦‚å¤–è¾¹è·ï¼ˆmarginï¼‰çš„é‡å ï¼Œæµ®åŠ¨æ¸…é™¤ï¼Œè§¦å‘ieçš„hasLayoutå±æ€§ç­‰ã€‚\n\næ¥é¾™å»è„‰å¤§æ¦‚å¦‚ä¸‹ï¼š\nå½“è®¾ç½®äº†zoomçš„å€¼ä¹‹åï¼Œæ‰€è®¾ç½®çš„å…ƒç´ å°±ä¼šå°±ä¼šæ‰©å¤§æˆ–è€…ç¼©å°ï¼Œé«˜åº¦å®½åº¦å°±ä¼šé‡æ–°è®¡ç®—äº†ï¼Œè¿™é‡Œä¸€æ—¦æ”¹å˜zoomå€¼æ—¶å…¶å®ä¹Ÿä¼šå‘ç”Ÿé‡æ–°æ¸²æŸ“ï¼Œè¿ç”¨è¿™ä¸ªåŸç†ï¼Œä¹Ÿå°±è§£å†³äº†ieä¸‹å­å…ƒç´ æµ®åŠ¨æ—¶å€™çˆ¶å…ƒç´ ä¸éšç€è‡ªåŠ¨æ‰©å¤§çš„é—®é¢˜ã€‚\n\n3. ç»™æµ®åŠ¨å…ƒç´ çš„å®¹å™¨ä¹Ÿæ·»åŠ æµ®åŠ¨(åˆ›å»ºçˆ¶çº§BFC)\n4. ç»™æµ®åŠ¨å…ƒç´ åé¢çš„å…ƒç´ æ·»åŠ clearå±æ€§\n5. ä½¿ç”¨afterä¼ªå…ƒç´ æ¸…é™¤æµ®åŠ¨ï¼ˆç”¨äºéIEæµè§ˆå™¨ï¼‰\n\n```css\n.clear {\n    overflow: auto;\n    zoom: 1;\n}\n\n.clear::after {\n    display: block;\n    content: 'æ¸…é™¤æµ®åŠ¨',\n    height: 0;\n    clear: both;\n}\n\n.clearfix::before, .clearfix::after {\n    content: \" \";\n    display: table;\n}\n```\nå‘ç°ï¼šé™¤äº†clearï¼šbothç”¨æ¥é—­åˆæµ®åŠ¨çš„ï¼Œå…¶ä»–ä»£ç æ— ééƒ½æ˜¯ä¸ºäº†éšè—æ‰contentç”Ÿæˆçš„å†…å®¹ï¼Œè¿™ä¹Ÿå°±æ˜¯å…¶ä»–ç‰ˆæœ¬çš„é—­åˆæµ®åŠ¨ä¸ºä»€ä¹ˆä¼šæœ‰font-sizeï¼š0ï¼Œline-heightï¼š0ã€‚\n\n## margin-topå’Œpadding-leftæ ¹æ®heightè¿˜æ˜¯widthï¼Ÿ\nwidth\n\n## vueçš„éçˆ¶å­ç»„ä»¶ä¼ é€’\n1. vuex 2. åœ¨åŒä¸€ä¸ªvueå®ä¾‹ä¸Šè°ƒç”¨$emitå’Œ$on\n\n## åŸç”Ÿjså®ç°æ‹–æ‹½\n```html\n<div id=\"div1\" ondrop=\"drop(event)\" ondragover=\"allowDrop(event)\"></div>\n<img\nid=\"img1\"\ndraggable=\"true\"\nondragstart=\"drag(event)\"\nsrc=\"http://dir.mydearest.cn/static/img/avatar.jpg\"\n/>\n<script>\n  function allowDrop(ev) {\n    ev.preventDefault();\n  }\n\n  function drag(ev) {\n    ev.dataTransfer.setData(\"Text\", ev.target.id);\n  }\n\n  function drop(ev) {\n    ev.preventDefault();\n    var data = ev.dataTransfer.getData(\"Text\");\n    ev.target.appendChild(document.getElementById(data));\n  }\n</script>\n```\n[æ‹–æ‹½](https://cosyer.github.io/jelly/drag/)\n\n## å®ç°å‡½æ•°ç›‘å¬å‡½æ•°å‘å¸ƒè®¢é˜…æ¨¡å¼ on emit off æ–¹æ³• ç±»ä¼¼ iflux\n```js\nfunction event() {\n  this.elem = document.createElement('div')\n}\nevent.prototype.on = function (name, fn) {\n  this.e = new Event(name)\n  this.elem.addEventListener(name, fn.call(this, this.e, this.e.type))\n}\nevent.prototype.emit = function(name) {\n  this.elem.dispatchEvent(this.e) // è¿™é‡Œæ¥å—çš„å‚æ•°å¿…é¡»æ˜¯Eventç±»å‹çš„ï¼Œä¸ç„¶æŠ¥é”™\n}\nevent.prototype.off = function (name, fn) {\n  this.e = null\n}\nvar ee = new event()\nee.on('foo', function(){console.log(110)})\nee.emit('foo') // 110\n```\n\n## å·¦è¾¹å›ºå®šï¼Œå³è¾¹è‡ªé€‚åº”å¸ƒå±€\n1. float\n2. flexå¸ƒå±€\n3. é€šè¿‡position çˆ¶çº§relative\n\n## mysql å­—ç¬¦è½¬æ¢\n```sql\n-- dateè½¬å­—ç¬¦ä¸²\nselect date_format(now(), '%Y-%m-%d'); \n--  dateè½¬æ—¶é—´æˆ³\nselect unix_timestamp(now())\n--  å­—ç¬¦ä¸²è½¬æ—¶é—´\nselect str_to_date(\"2019-01-15\",'%Y-%m-%d %H')\n-- 20190115\n-- æ—¶é—´æˆ³è½¬æ—¶é—´\nselect from_unixtime(1451997924)\n-- æ—¶é—´æˆ³è½¬å­—ç¬¦ä¸²\nselect from_unixtime(1451997924,\"%Y-%m-%d %H\")\n```\n\n## empty()å’Œhtml(\"\")\næ¨èä½¿ç”¨empty htmlä¸ä¼šæ¸…é™¤å­ç»„ä»¶çš„äº‹ä»¶\n\n## reactã€vueå¤šä¸ªclass\n### react\næ–¹æ³•ä¸€ï¼šES6 æ¨¡æ¿å­—ç¬¦ä¸² ``\n\nclassName={title ${index === this.state.active ? 'active' : ''}}\nã€€ã€€\n\næ–¹æ³•äºŒï¼šjoin(\"\")\n\nclassName={[\"title\", index === this.state.active?\"active\":null].join(' ')}\n\næ–¹æ³•ä¸‰ï¼šclassnames\n\n### vue\næ–¹æ³•ä¸€ï¼š\n:class=\"[box,shadow]\"\næ–¹æ³•äºŒï¼š\n:class=\"{box:show1,shadow:show2}\"\n\n## vueç»„ä»¶é€šä¿¡\n```\n// çˆ¶ä¼ å­\n// çˆ¶ç»„ä»¶\n<note-address :data=\"msg\"></note-address> \n\n// å­ç»„ä»¶\n\n<div>{{ data.partment }}</div>\n\nexport default {\n  //props:['data']\n  props: {\n    data: Object\n  }\n}\n// å­ä¼ çˆ¶\n// çˆ¶ç»„ä»¶\n<note-address @new=\"addNote\"></note-address> \n\n// å­ç»„ä»¶\n<button type=\"small\" class=\"confirm\" @click=\"add\">è®¾ä¸ºæ•™æ¡ˆ</button>\n\nmethods: {\n add () {\n  this.$emit('new', false)\n }\n}\n// å…„å¼Ÿç›¸ä¼ \n// 1.åˆ›å»º å…¬å…±bus.js\n\n//bus.js\nimport Vue from 'vue'\nexport default new Vue()\n\n// 2.çˆ¶ç»„ä»¶æ³¨å†Œä¸¤ä¸ªå­ç»„ä»¶\ncomponents:{\n    firstChild,\n    secondChild\n}\n\n// 3.firstChildç»„ä»¶\n\n<input type=\"button\" value=\"ç‚¹å‡»è§¦å‘\" @click=\"elementByValue\">\n\n<script>\n// å¼•å…¥å…¬å…±çš„busï¼Œæ¥åšä¸ºä¸­é—´ä¼ è¾¾çš„å·¥å…·\n  import Bus from './bus.js'\n  export default {\n      methods: {\n      elementByValue: function () {\n        Bus.$emit('val', 'å…„å¼Ÿï¼Œæ”¶åˆ°äº†å—ï¼Ÿ')\n      }\n    }\n  }\n</script>\n\n// 4.secondChildç»„ä»¶\n\n<span>{{msg}}</span>\n\n<script>\n  import Bus from './bus.js'\n  export default {\n      mounted(){\n            let self = this;\n            Bus.$on('val', function (msg) {\n                console.log(msg)\n                self.msg = msg\n            })\n      }\n    }\n  }\n</script>\n```\n\n## OSIä¸ƒå±‚åè®®\n![tcp](http://cdn.mydearest.cn/blog/images/tcp.png)\n\n- åº”ç”¨å±‚\n- è¡¨ç¤ºå±‚\n- ä¼šè¯å±‚\n- ä¼ è¾“å±‚\n- ç½‘ç»œå±‚\n- æ•°æ®é“¾è·¯å±‚\n- ç‰©ç†å±‚\n\n- åº”ç”¨å±‚ï¼ˆHTTPï¼ŒFTPï¼ŒNFSï¼ŒSMTPï¼‰\nä¸å…¶å®ƒè®¡ç®—æœºè¿›è¡Œé€šè®¯çš„ä¸€ä¸ªåº”ç”¨ï¼Œå®ƒæ˜¯å¯¹åº”åº”ç”¨ç¨‹åºçš„é€šä¿¡æœåŠ¡çš„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ²¡æœ‰é€šä¿¡åŠŸèƒ½çš„å­—å¤„ç†ç¨‹åºå°±ä¸èƒ½æ‰§è¡Œé€šä¿¡çš„ä»£ç ï¼Œä»äº‹å­—å¤„ç†å·¥ä½œçš„ç¨‹åºå‘˜ä¹Ÿä¸å…³å¿ƒOSIçš„ç¬¬7å±‚ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ·»åŠ äº†ä¸€ä¸ªä¼ è¾“æ–‡ä»¶çš„é€‰é¡¹ï¼Œé‚£ä¹ˆå­—å¤„ç†å™¨çš„ç¨‹åºå‘˜å°±éœ€è¦å®ç°OSIçš„ç¬¬7å±‚ã€‚ç¤ºä¾‹ï¼šTELNETï¼ŒHTTPï¼ŒFTPï¼ŒNFSï¼ŒSMTPç­‰ã€‚\n\n- è¡¨ç¤ºå±‚\nè¿™ä¸€å±‚çš„ä¸»è¦åŠŸèƒ½æ˜¯å®šä¹‰æ•°æ®æ ¼å¼åŠåŠ å¯†ã€‚ä¾‹å¦‚ï¼ŒFTPå…è®¸ä½ é€‰æ‹©ä»¥äºŒè¿›åˆ¶æˆ–ASCIIæ ¼å¼ä¼ è¾“ã€‚å¦‚æœé€‰æ‹©äºŒè¿›åˆ¶ï¼Œé‚£ä¹ˆå‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¸æ”¹å˜æ–‡ä»¶çš„å†…å®¹ã€‚å¦‚æœé€‰æ‹©ASCIIæ ¼å¼ï¼Œå‘é€æ–¹å°†æŠŠæ–‡æœ¬ä»å‘é€æ–¹çš„å­—ç¬¦é›†è½¬æ¢æˆæ ‡å‡†çš„ASCIIåå‘é€æ•°æ®ã€‚åœ¨æ¥æ”¶æ–¹å°†æ ‡å‡†çš„ASCIIè½¬æ¢æˆæ¥æ”¶æ–¹è®¡ç®—æœºçš„å­—ç¬¦é›†ã€‚ç¤ºä¾‹ï¼šåŠ å¯†ï¼ŒASCIIç­‰ã€‚\n\n- ä¼ è¾“å±‚ï¼ˆTCPï¼ŒUDPï¼ŒSPXï¼‰\nè¿™å±‚çš„åŠŸèƒ½åŒ…æ‹¬æ˜¯å¦é€‰æ‹©å·®é”™æ¢å¤åè®®è¿˜æ˜¯æ— å·®é”™æ¢å¤åè®®ï¼ŒåŠåœ¨åŒä¸€ä¸»æœºä¸Šå¯¹ä¸åŒåº”ç”¨çš„æ•°æ®æµçš„è¾“å…¥è¿›è¡Œå¤ç”¨ï¼Œè¿˜åŒ…æ‹¬å¯¹æ”¶åˆ°çš„é¡ºåºä¸å¯¹çš„æ•°æ®åŒ…çš„é‡æ–°æ’åºåŠŸèƒ½ã€‚ç¤ºä¾‹ï¼šTCPï¼ŒUDPï¼ŒSPXã€‚\n\n- ä¼šè¯å±‚ï¼ˆRPCï¼ŒSQLï¼‰\nå®ƒå®šä¹‰äº†å¦‚ä½•å¼€å§‹ã€æ§åˆ¶å’Œç»“æŸä¸€ä¸ªä¼šè¯ï¼ŒåŒ…æ‹¬å¯¹å¤šä¸ªåŒå‘æ¶ˆæ¯çš„æ§åˆ¶å’Œç®¡ç†ï¼Œä»¥ä¾¿åœ¨åªå®Œæˆè¿ç»­æ¶ˆæ¯çš„ä¸€éƒ¨åˆ†æ—¶å¯ä»¥é€šçŸ¥åº”ç”¨ï¼Œä»è€Œä½¿è¡¨ç¤ºå±‚çœ‹åˆ°çš„æ•°æ®æ˜¯è¿ç»­çš„ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚æœè¡¨ç¤ºå±‚æ”¶åˆ°äº†æ‰€æœ‰çš„æ•°æ®ï¼Œåˆ™ç”¨æ•°æ®ä»£è¡¨è¡¨ç¤ºå±‚ã€‚ç¤ºä¾‹ï¼šRPCï¼ŒSQLç­‰\n\n- ç½‘ç»œå±‚ï¼ˆIPï¼ŒIPXï¼‰\nè¿™å±‚å¯¹ç«¯åˆ°ç«¯çš„åŒ…ä¼ è¾“è¿›è¡Œå®šä¹‰ï¼Œå®ƒå®šä¹‰äº†èƒ½å¤Ÿæ ‡è¯†æ‰€æœ‰ç»“ç‚¹çš„é€»è¾‘åœ°å€ï¼Œè¿˜å®šä¹‰äº†è·¯ç”±å®ç°çš„æ–¹å¼å’Œå­¦ä¹ çš„æ–¹å¼ã€‚ä¸ºäº†é€‚åº”æœ€å¤§ä¼ è¾“å•å…ƒé•¿åº¦å°äºåŒ…é•¿åº¦çš„ä¼ è¾“ä»‹è´¨ï¼Œç½‘ç»œå±‚è¿˜å®šä¹‰äº†å¦‚ä½•å°†ä¸€ä¸ªåŒ…åˆ†è§£æˆæ›´å°çš„åŒ…çš„åˆ†æ®µæ–¹æ³•ã€‚ç¤ºä¾‹ï¼šIPï¼ŒIPXç­‰ã€‚\n\n- æ•°æ®é“¾è·¯å±‚ï¼ˆIPï¼ŒIPXï¼‰\nå®ƒå®šä¹‰äº†åœ¨å•ä¸ªé“¾è·¯ä¸Šå¦‚ä½•ä¼ è¾“æ•°æ®ã€‚è¿™äº›åè®®ä¸è¢«è®¨è®ºçš„å„ç§ä»‹è´¨æœ‰å…³ã€‚ç¤ºä¾‹ï¼šATMï¼ŒFDDIç­‰ã€‚\n\n- ç‰©ç†å±‚ï¼ˆRj45ï¼Œ802.3ï¼‰\nOSIçš„ç‰©ç†å±‚è§„èŒƒæ˜¯æœ‰å…³ä¼ è¾“ä»‹è´¨çš„ç‰¹è¿™äº›è§„èŒƒé€šå¸¸ä¹Ÿå‚è€ƒäº†å…¶ä»–ç»„ç»‡åˆ¶å®šçš„æ ‡å‡†ã€‚è¿æ¥å¤´ã€å¸§ã€å¸§çš„ä½¿ç”¨ã€ç”µæµã€ç¼–ç åŠå…‰è°ƒåˆ¶ç­‰éƒ½å±äºå„ç§ç‰©ç†å±‚è§„èŒƒä¸­çš„å†…å®¹ã€‚ç‰©ç†å±‚å¸¸ç”¨å¤šä¸ªè§„èŒƒå®Œæˆå¯¹æ‰€æœ‰ç»†èŠ‚çš„å®šä¹‰ã€‚ç¤ºä¾‹ï¼šRj45ï¼Œ802.3ç­‰ã€‚\n\n## callä½¿ç”¨\n```js\nfunction add(a,b){\nconsole.log(a+b)\n}\n\nfunction sub(a,b){\nconsole.log(a-b)\n}\n\nadd.call(sub,3,1) // 4\n```\n\n## cssé€‰æ‹©å™¨çš„ä¼˜å…ˆçº§\n\né€‰æ‹©å™¨ï¼šidé€‰æ‹©å™¨ï¼Œclassé€‰æ‹©å™¨ï¼Œæ ‡ç­¾é€‰æ‹©å™¨ï¼Œä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼Œä¼ªç±»é€‰æ‹©å™¨ç­‰ç­‰\n\nåŒä¸€å…ƒç´ å¼•ç”¨å¤šä¸ªæ ·å¼æ—¶ï¼Œæ’åœ¨åé¢çš„æ ·å¼å±æ€§çš„ä¼˜å…ˆçº§é«˜\n\næ ·å¼é€‰æ‹©å™¨çš„ç±»å‹ä¸åŒæ—¶ã€‚ä¼˜å…ˆçº§é¡ºåºä¸ºï¼šid>class>æ ‡ç­¾\n\næ ‡ç­¾ä¹‹é—´å­˜åœ¨å±‚çº§åŒ…å«å…³ç³»æ—¶ï¼Œåä»£å…ƒç´ ä¼šç»§æ‰¿ç¥–å…ˆå…ƒç´ çš„æ ·å¼ï¼Œå¦‚æœåä»£å…ƒç´ å®šä¹‰äº†ä¸ç¥–å…ˆå…ƒç´ ç›¸åŒçš„æ ·å¼ï¼Œåˆ™ç¥–å…ˆå…ƒç´ çš„ç›¸åŒçš„æ ·å¼ä¼šè¢«è¦†ç›–ã€‚ç»§æ‰¿çš„æ ·å¼ä¼˜å…ˆçº§è¾ƒä½ï¼Œè‡³å°‘æ¯”æ ‡ç­¾é€‰æ‹©å™¨ä½ã€‚\n\nå¸¦æœ‰ï¼importantæ ‡è®°çš„æ ·å¼å±æ€§ä¼˜å…ˆçº§æœ€é«˜\n\næ ·å¼è¡¨æ¥æºä¸åŒæ—¶ä¼˜å…ˆçº§é¡ºåºä¸ºï¼šå†…è”>å†…éƒ¨>å¤–éƒ¨>æµè§ˆå™¨ç”¨æˆ·è‡ªå®šä¹‰çš„æ ·å¼>æµè§ˆå™¨é»˜è®¤æ ·å¼\n\n## äº‹ä»¶é˜Ÿåˆ—ï¼ˆeventLoopï¼‰\n```js\n// ä»¥ä¸‹æ˜¯å¤´æ¡çš„ç±»ä¼¼é¢˜ç›®ï¼Œè¿™ä¸ªè€ƒå¾—æ›´å…¨é¢\nasync function a1 () {\n    console.log('a1 start')\n    await a2()\n    console.log('a1 end')\n}\nasync function a2 () {\n    console.log('a2')\n}\nconsole.log('script start')\nsetTimeout(() => {\n    console.log('setTimeout')\n}, 0)\nPromise.resolve().then(() => {\n    console.log('promise1')\n})\na1()\nlet promise2 = new Promise((resolve) => {\n    resolve('promise2.then')\n    console.log('promise2')\n})\npromise2.then((res) => {\n    console.log(res)\n    Promise.resolve().then(() => {\n        console.log('promise3')\n    })\n})\nconsole.log('script end')\n\n// script start\n// a1 start\n// a2\n// promise2\n// script end\n// promise1\n// a1 end\n// promise2.then\n// promise3\n// setTimeout\n```\n\n## vueä¸­watchå’Œcomputedçš„åŒºåˆ«\n\n- computedï¼Œè®¡ç®—å±æ€§ï¼Œéšç€ä¾èµ–çš„æ•°æ®å“åº”å¼åœ°æ”¹å˜ï¼Œç”¨äºå¤æ‚é€»è¾‘å¤„ç†\n\n- watchï¼Œå‘½ä»¤å¼åœ°ç›‘å¬æ•°æ®å˜åŒ–è¿›è¡Œæ“ä½œ\n\n## ç®€å•ä»‹ç»es6\n\nES6åœ¨å˜é‡çš„å£°æ˜å’Œå®šä¹‰æ–¹é¢å¢åŠ äº†letã€constå£°æ˜å˜é‡ï¼Œæœ‰å±€éƒ¨å˜é‡çš„æ¦‚å¿µï¼Œèµ‹å€¼ä¸­æœ‰æ¯”è¾ƒå¸å¼•äººçš„ç»“æ„èµ‹å€¼ï¼ŒåŒæ—¶ES6å¯¹å­—ç¬¦ä¸²ã€ æ•°ç»„ã€æ­£åˆ™ã€å¯¹è±¡ã€å‡½æ•°ç­‰æ‹“å±•äº†ä¸€äº›æ–¹æ³•ï¼Œå¦‚å­—ç¬¦ä¸²æ–¹é¢çš„æ¨¡æ¿å­—ç¬¦ä¸²ã€å‡½æ•°æ–¹é¢çš„é»˜è®¤å‚æ•°ã€å¯¹è±¡æ–¹é¢å±æ€§çš„ç®€æ´è¡¨è¾¾æ–¹å¼ï¼ŒES6ä¹Ÿ å¼•å…¥äº†æ–°çš„æ•°æ®ç±»å‹symbolï¼Œæ–°çš„æ•°æ®ç»“æ„setå’Œmap,symbolå¯ä»¥é€šè¿‡typeofæ£€æµ‹å‡ºæ¥ï¼Œä¸ºè§£å†³å¼‚æ­¥å›è°ƒé—®é¢˜ï¼Œå¼•å…¥äº†promiseå’Œ generatorï¼Œè¿˜æœ‰æœ€ä¸ºå¸å¼•äººäº†å®ç°Classå’Œæ¨¡å—ï¼Œé€šè¿‡Classå¯ä»¥æ›´å¥½çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä½¿ç”¨æ¨¡å—åŠ è½½æ–¹ä¾¿æ¨¡å—åŒ–ç¼–ç¨‹ï¼Œå½“ç„¶è€ƒè™‘åˆ° æµè§ˆå™¨å…¼å®¹æ€§ï¼Œæˆ‘ä»¬åœ¨å®é™…å¼€å‘ä¸­éœ€è¦ä½¿ç”¨babelè¿›è¡Œç¼–è¯‘ã€‚\n\n## jsæ¨¡å—åŒ–\nåœ¨ES6å‡ºç°ä¹‹å‰ï¼Œjsæ²¡æœ‰æ ‡å‡†çš„æ¨¡å—åŒ–æ¦‚å¿µï¼Œè¿™ä¹Ÿå°±é€ æˆäº†jså¤šäººå†™ä½œå¼€å‘å®¹æ˜“é€ æˆå…¨å±€æ±¡æŸ“çš„æƒ…å†µï¼Œä»¥å‰æˆ‘ä»¬å¯èƒ½ä¼šé‡‡ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°ã€å¯¹è±¡ç­‰æ–¹å¼æ¥å°½é‡å‡å°‘å˜é‡è¿™ç§æƒ…å†µï¼Œåé¢ç¤¾åŒºä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜é™†ç»­æå‡ºäº†AMDè§„èŒƒå’ŒCMDè§„èŒƒï¼Œè¿™é‡Œä¸åŒäºNode.jsçš„ CommonJSçš„åŸå› åœ¨äºæœåŠ¡ç«¯æ‰€æœ‰çš„æ¨¡å—éƒ½æ˜¯å­˜åœ¨äºç¡¬ç›˜ä¸­çš„ï¼ŒåŠ è½½å’Œè¯»å–å‡ ä¹æ˜¯ä¸éœ€è¦æ—¶é—´çš„ï¼Œè€Œæµè§ˆå™¨ç«¯å› ä¸ºåŠ è½½é€Ÿåº¦å–å†³äºç½‘é€Ÿï¼Œ å› æ­¤éœ€è¦é‡‡ç”¨å¼‚æ­¥åŠ è½½ï¼ŒAMDè§„èŒƒä¸­ä½¿ç”¨defineæ¥å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œä½¿ç”¨requireæ–¹æ³•æ¥åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼Œç°åœ¨ES6ä¹Ÿæ¨å‡ºäº†æ ‡å‡†çš„æ¨¡å—åŠ è½½æ–¹æ¡ˆï¼Œé€šè¿‡exportå’Œimportæ¥å¯¼å‡ºå’Œå¯¼å…¥æ¨¡å—ã€‚\n\n## æ¨¡å—åŒ–çš„ç†è§£\nä¸€ä¸ªæ¨¡å—æ˜¯å®ç°ä¸€ä¸ªç‰¹å®šåŠŸèƒ½çš„ä¸€ç»„æ–¹æ³•ã€‚åœ¨æœ€å¼€å§‹çš„æ—¶å€™ï¼Œjs åªå®ç°ä¸€äº›ç®€å•çš„åŠŸèƒ½ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰æ¨¡å—çš„æ¦‚å¿µï¼Œä½†éšç€ç¨‹åºè¶Šæ¥è¶Šå¤æ‚ï¼Œä»£ç çš„æ¨¡å—åŒ–å¼€å‘å˜å¾—è¶Šæ¥\nè¶Šé‡è¦ã€‚\n\nç”±äºå‡½æ•°å…·æœ‰ç‹¬ç«‹ä½œç”¨åŸŸçš„ç‰¹ç‚¹ï¼Œæœ€åŸå§‹çš„å†™æ³•æ˜¯ä½¿ç”¨å‡½æ•°æ¥ä½œä¸ºæ¨¡å—ï¼Œå‡ ä¸ªå‡½æ•°ä½œä¸ºä¸€ä¸ªæ¨¡å—ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼å®¹æ˜“é€ æˆå…¨å±€å˜é‡çš„æ±¡æŸ“ï¼Œå¹¶ä¸”æ¨¡å—é—´æ²¡æœ‰è”ç³»ã€‚\n\nåé¢æå‡ºäº†å¯¹è±¡å†™æ³•ï¼Œé€šè¿‡å°†å‡½æ•°ä½œä¸ºä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•æ¥å®ç°ï¼Œè¿™æ ·è§£å†³äº†ç›´æ¥ä½¿ç”¨å‡½æ•°ä½œä¸ºæ¨¡å—çš„ä¸€äº›ç¼ºç‚¹ï¼Œä½†æ˜¯è¿™ç§åŠæ³•ä¼šæš´éœ²æ‰€æœ‰çš„æ‰€æœ‰çš„æ¨¡å—æˆå‘˜ï¼Œå¤–éƒ¨ä»£ç å¯\nä»¥ä¿®æ”¹å†…éƒ¨å±æ€§çš„å€¼ã€‚\n\nç°åœ¨æœ€å¸¸ç”¨çš„æ˜¯ç«‹å³æ‰§è¡Œå‡½æ•°çš„å†™æ³•ï¼Œé€šè¿‡åˆ©ç”¨é—­åŒ…æ¥å®ç°æ¨¡å—ç§æœ‰ä½œç”¨åŸŸçš„å»ºç«‹ï¼ŒåŒæ—¶ä¸ä¼šå¯¹å…¨å±€ä½œç”¨åŸŸé€ æˆæ±¡æŸ“ã€‚\n\n## å›¾ç‰‡åŠ è½½æˆåŠŸæˆ–è€…å¤±è´¥\nonload/onerror\n\n## é€’å½’å’Œè¿­ä»£çš„åŒºåˆ«\nç¨‹åºè°ƒç”¨è‡ªèº«ç§°ä¸ºé€’å½’(ä»å‰æœ‰åº§å±±ï¼Œå±±é‡Œæœ‰åº§åº™ï¼Œåº™é‡Œæœ‰ä¸ªè€å’Œå°šåœ¨å’Œå°å’Œå°šè®²æ•…äº‹ï¼Œæ•…äº‹è®²çš„æ˜¯)ï¼Œåˆ©ç”¨å˜é‡çš„åŸå€¼æ¨å‡ºæ–°å€¼ç§°ä¸ºè¿­ä»£ï¼Œé€’å½’çš„ä¼˜ç‚¹ å¤§é—®é¢˜è½¬åŒ–ä¸ºå°é—®é¢˜ï¼Œå¯ä»¥å‡å°‘ä»£ç é‡ï¼ŒåŒæ—¶åº”ä¸ºä»£ç ç²¾ç®€ï¼Œå¯è¯»æ€§å¥½ï¼Œ ç¼ºç‚¹å°±æ˜¯ï¼Œé€’å½’è°ƒç”¨æµªè´¹äº†ç©ºé—´ï¼Œè€Œä¸”é€’å½’å¤ªæ·±å®¹æ˜“é€ æˆå †æ ˆçš„æº¢å‡ºã€‚è¿­ä»£çš„å¥½å¤„ å°±æ˜¯ä»£ç è¿è¡Œæ•ˆç‡å¥½ï¼Œå› ä¸ºæ—¶é—´åªå› å¾ªç¯æ¬¡æ•°å¢åŠ è€Œå¢åŠ ï¼Œè€Œä¸”æ²¡æœ‰é¢å¤–çš„ç©ºé—´å¼€é”€ï¼Œ ç¼ºç‚¹å°±æ˜¯ä»£ç ä¸å¦‚é€’å½’ç®€æ´\n\n## åŸç”ŸJSæ“ä½œDOMçš„æ–¹æ³•æœ‰å“ªäº›ï¼Ÿ\nè·å–èŠ‚ç‚¹çš„æ–¹æ³•getElementByIdã€getElementsByClassNameã€getElementsByTagNameã€ getElementsByNameã€querySelectorã€querySelectorAll,å¯¹å…ƒç´ å±æ€§è¿›è¡Œæ“ä½œçš„ getAttributeã€ setAttributeã€removeAttributeæ–¹æ³•ï¼Œå¯¹èŠ‚ç‚¹è¿›è¡Œå¢åˆ æ”¹çš„appendChildã€insertBeforeã€replaceChildã€removeChildã€ createElementç­‰\n\n## setTimeoutå’ŒsetIntervalçš„åŒºåˆ«ï¼ŒåŒ…å«å†…å­˜æ–¹é¢çš„åˆ†æï¼Ÿ\nsetTimeoutè¡¨ç¤ºé—´éš”ä¸€æ®µæ—¶é—´ä¹‹åæ‰§è¡Œä¸€æ¬¡è°ƒç”¨ï¼Œè€ŒsetIntervalåˆ™æ˜¯æ¯é—´éš”ä¸€æ®µæ—¶é—´å¾ªç¯è°ƒç”¨ï¼Œç›´è‡³clearIntervalç»“æŸã€‚ å†…å­˜æ–¹é¢ï¼ŒsetTimeoutåªéœ€è¦è¿›å…¥ä¸€æ¬¡é˜Ÿåˆ—ï¼Œä¸ä¼šé€ æˆå†…å­˜æº¢å‡ºï¼ŒsetIntervalå› ä¸ºä¸è®¡ç®—ä»£ç æ‰§è¡Œæ—¶é—´ï¼Œæœ‰å¯èƒ½åŒæ—¶æ‰§è¡Œå¤šæ¬¡ä»£ç ï¼Œ å¯¼è‡´å†…å­˜æº¢å‡ºã€‚\n\n## addEventListeneræœ‰å“ªäº›å‚æ•°ï¼Ÿ\næœ‰ä¸‰ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯äº‹ä»¶çš„ç±»å‹ï¼Œç¬¬äºŒä¸ªæ˜¯äº‹ä»¶çš„å›è°ƒå‡½æ•°ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ä¸€ä¸ªè¡¨ç¤ºäº‹ä»¶æ˜¯å†’æ³¡é˜¶æ®µè¿˜æ˜¯æ•è·é˜¶æ®µæ•è·çš„å¸ƒå°”å€¼ï¼Œtrueè¡¨ç¤ºæ•è·ï¼Œfalseè¡¨ç¤ºå†’æ³¡\n\n## å°†é™æ€èµ„æºæ”¾åœ¨å…¶ä»–åŸŸåçš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ\nè¿™æ ·åšçš„ä¸»è¦ç›®çš„æ˜¯åœ¨è¯·æ±‚è¿™äº›é™æ€èµ„æºçš„æ—¶å€™ä¸ä¼šå‘é€cookieï¼ŒèŠ‚çœäº†æµé‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯cookieæ˜¯ä¼šå‘é€ç»™å­åŸŸåçš„ï¼ˆäºŒçº§åŸŸåï¼‰ï¼Œæ‰€ä»¥è¿™äº›é™æ€èµ„æºæ˜¯ä¸ä¼šæ”¾åœ¨å­åŸŸåä¸‹çš„ï¼Œ è€Œæ˜¯å•ç‹¬æ”¾åœ¨ä¸€ä¸ªå•ç‹¬çš„ä¸»åŸŸåä¸‹ã€‚åŒæ—¶è¿˜æœ‰ä¸€ä¸ªåŸå› å°±æ˜¯æµè§ˆå™¨å¯¹äºä¸€ä¸ªåŸŸåä¼šæœ‰è¯·æ±‚æ•°çš„é™åˆ¶ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥æ–¹ä¾¿åšCDNã€‚\n\n## httpçŠ¶æ€ç 301å’Œ302çš„åŒºåˆ«\n- 301 redirect: 301 ä»£è¡¨æ°¸ä¹…æ€§è½¬ç§»(Permanently Moved) \n\nå¦‚ä½•é¿å…301è·³è½¬https(åœ¨responseä¸­header)\n\n- 302 redirect: 302 ä»£è¡¨æš‚æ—¶æ€§è½¬ç§»(Temporarily Moved)\n\nè¯¦ç»†æ¥è¯´ï¼Œ301å’Œ302çŠ¶æ€ç éƒ½è¡¨ç¤ºé‡å®šå‘ï¼Œå°±æ˜¯è¯´æµè§ˆå™¨åœ¨æ‹¿åˆ°æœåŠ¡å™¨è¿”å›çš„è¿™ä¸ªçŠ¶æ€ç åä¼šè‡ªåŠ¨è·³è½¬åˆ°ä¸€ä¸ªæ–°çš„URLåœ°å€ï¼Œè¿™ä¸ªåœ°å€å¯ä»¥ä»å“åº”çš„Locationé¦–éƒ¨ä¸­è·å–ï¼ˆç”¨æˆ·çœ‹åˆ°çš„æ•ˆæœå°±æ˜¯ä»–è¾“å…¥çš„åœ°å€Aç¬é—´å˜æˆäº†å¦ä¸€ä¸ªåœ°å€Bï¼‰â€”â€”è¿™æ˜¯å®ƒä»¬çš„å…±åŒç‚¹ã€‚ä»–ä»¬çš„ä¸åŒåœ¨äºã€‚301è¡¨ç¤ºæ—§åœ°å€Açš„èµ„æºå·²ç»è¢«æ°¸ä¹…åœ°ç§»é™¤äº†ï¼ˆè¿™ä¸ªèµ„æºä¸å¯è®¿é—®äº†ï¼‰ï¼Œæœç´¢å¼•æ“åœ¨æŠ“å–æ–°å†…å®¹çš„åŒæ—¶ä¹Ÿå°†æ—§çš„ç½‘å€äº¤æ¢ä¸ºé‡å®šå‘ä¹‹åçš„ç½‘å€ï¼›302è¡¨ç¤ºæ—§åœ°å€Açš„èµ„æºè¿˜åœ¨ï¼ˆä»ç„¶å¯ä»¥è®¿é—®ï¼‰ï¼Œè¿™ä¸ªé‡å®šå‘åªæ˜¯ä¸´æ—¶åœ°ä»æ—§åœ°å€Aè·³è½¬åˆ°åœ°å€Bï¼Œæœç´¢å¼•æ“ä¼šæŠ“å–æ–°çš„å†…å®¹è€Œä¿å­˜æ—§çš„ç½‘å€ã€‚\n\n[é‡å®šå‘](http://cdn.mydearest.cn/blog/images/redirectCache.png)\n\n## åœ¨ä»€ä¹ˆæƒ…å†µä¸‹a === a-1 ?\n- Infinity/-Infinity\n\n```js\nlet a = Infinity;\n\nconsole.log(a === a - 1); // true\n\nlet b = -Infinity;\n\nconsole.log(b === b - 1);  // true\n\nconsole.log(Infinity + Infinity); // Infinity\nconsole.log(Infinity - Infinity); // NaN\nconsole.log(Infinity * Infinity); // Infinity\nconsole.log(Infinity / Infinity); // NaN\nconsole.log(Infinity * 0); // NaN\n```\n\n- å®‰å…¨æ•°(-2 ** 53 + 1åˆ°2 ** 53 - 1) å³Number.MAX_SAFE_INTEGERå’ŒNumber.MIN_SAFE_INTEGER å¤„ç†ç‰¹æ®Šæƒ…å†µ\n\n```js\nlet a = Number.MIN_SAFE_INTEGER - 1;\nconsole.log(a === a - 1); // true\n```\n\n- a == a -1\n\n```js\nvar x = 1\nvar a = { x, valueOf: () => a.x }\nObject.defineProperty(a, 'x', { get() { return --x } })\n\nvar set = 1\nObject.defineProperty(window, \"a\", {\n  get : function(){\n    return set++\n  },\n  enumerable : true,\n  configurable : true\n});\n\nconst a = {\n times: 0,\n\n valueOf() {\n   if (this.times & 1) {\n     return 0;\n   }\n   this.times += 1;\n   return 1;\n },\n};\n```\n\n## placeholderæ ·å¼è®¾ç½®\n\n```css\n::-webkit-input-placeholder{}    /* ä½¿ç”¨webkitå†…æ ¸çš„æµè§ˆå™¨ */\n:-moz-placeholder{}                  /* Firefoxç‰ˆæœ¬4-18 */\n::-moz-placeholder{}                  /* Firefoxç‰ˆæœ¬19+ */\n:-ms-input-placeholder{}           /* IEæµè§ˆå™¨ */\n```\n\n## å·§ç”¨currentColorè‡ªå®šä¹‰checkboxæ ·å¼\n```css\n/* æ— æ³•è‡ªå®šä¹‰checkboxæ ·å¼ */\ninput[type=checkbox] {\n  background-color: red;\n  color: red;\n  border: solid red;\n}\n```\n\n```css\ninput[type=checkbox] {\n  position: relative;\n  color: inherit;\n}\n\ninput[type=checkbox]::before,\ninput[type=checkbox]::after {\n  position: absolute;\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  line-height: 12px;\n  border-radius: 3px;\n  text-align: center;\n}\n\ninput[type=checkbox]:checked::after {\n  content: 'x';\n  color: white;\n}\n\ninput[type=checkbox]::before {\n  content: ' ';\n  /* è¡¨ç¤ºå°†èƒŒæ™¯è‰²è®¾ç½®ä¸ºå½“å‰çš„æ–‡å­—é¢œè‰²å€¼ã€‚ */\n  background-color: currentColor;\n}\n```\n\n## å¢è¡¥å­—ç¬¦ä¸é€‚ç”¨String.prototype.charCodeAtå’ŒString.fromCharCode\n```js\n'ğŸ€„'.length // 2\n\nconst str = 'ğŸ€„';\nconsole.log(str.codePointAt(0)); // 126980\n\nconsole.log(String.fromCodePoint(126980)); // ğŸ€„\n\nconsole.log([...\"ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦\"])\n// [\"ğŸ‘¨\", \"â€\", \"ğŸ‘©\", \"â€\", \"ğŸ‘¦\", \"â€\", \"ğŸ‘¦\"]\n```\n\n## ä¸‰æ¬¡æ¡æ‰‹ã€å››æ¬¡æŒ¥æ‰‹\n- å»ºç«‹è¿æ¥-TCPçš„ä¸‰æ¬¡æ¡æ‰‹\n\n(1) ä¸»æœºå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªå»ºç«‹è¿æ¥çš„è¯·æ±‚\n\n(2) æœåŠ¡å™¨æ¥åˆ°è¯·æ±‚åå‘é€åŒæ„è¿æ¥çš„ä¿¡å·\n\n(3) ä¸»æœºæ¥åˆ°åŒæ„è¿æ¥çš„ä¿¡å·åï¼Œå†æ¬¡å‘æœåŠ¡å™¨å‘é€äº†ç¡®è®¤ä¿¡å·\n\nå‘é€ç«¯é¦–å…ˆå‘é€ä¸€ä¸ªå¸¦SYNæ ‡å¿—çš„æ•°æ®åŒ…ç»™å¯¹æ–¹ã€‚æ¥æ”¶ç«¯æ”¶åˆ°åï¼Œå›ä¼ ä¸€ä¸ªå¸¦æœ‰SYN/ACKæ ‡å¿—çš„æ•°æ®åŒ…ä»¥ç¤ºä¼ è¾¾ç¡®è®¤ä¿¡æ¯ã€‚æœ€åï¼Œå‘é€ç«¯å†å›ä¼ ä¸€ä¸ªå¸¦ACKæ ‡å¿—çš„æ•°æ®åŒ…ï¼Œä»£è¡¨â€œæ¡æ‰‹â€ç»“æŸã€‚è‹¥åœ¨æ¡æ‰‹è¿‡ç¨‹ä¸­æŸä¸ªé˜¶æ®µè«åä¸­æ–­ï¼ŒTCPåè®®ä¼šå†æ¬¡ä»¥ç›¸åŒçš„é¡ºåºå‘é€ç›¸åŒçš„æ•°æ®åŒ…ã€‚\n\n- æ–­å¼€è¿æ¥-TCPçš„å››æ¬¡æŒ¥æ‰‹\n(1) ä¸»æœºå‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªæ–­å¼€è¿æ¥çš„è¯·æ±‚\n\n(2) æœåŠ¡å™¨æ¥åˆ°è¯·æ±‚åå‘é€ç¡®è®¤æ”¶åˆ°è¯·æ±‚çš„ä¿¡å·ï¼›(æ­¤æ—¶æœåŠ¡å™¨å¯èƒ½è¿˜æœ‰æ•°æ®è¦å‘é€è‡³ä¸»æœº)\n\n(3) æœåŠ¡å™¨å‘ä¸»æœºå‘é€æ–­å¼€é€šçŸ¥ï¼›(æ­¤æ—¶æœåŠ¡å™¨ç¡®è®¤æ²¡æœ‰è¦å‘ä¸»æœºå‘é€çš„æ•°æ®)\n\n(4) ä¸»æœºæ¥åˆ°æ–­å¼€é€šçŸ¥åæ–­å¼€è¿æ¥å¹¶åé¦ˆä¸€ä¸ªç¡®è®¤ä¿¡å·ï¼ŒæœåŠ¡å™¨æ”¶åˆ°ç¡®è®¤ä¿¡å·åæ–­å¼€è¿æ¥\n\n> æ³¨æ„ï¼šè¿™é‡Œçš„å››æ¬¡æŒ¥æ‰‹ä¸­æœåŠ¡å™¨ä¸¤æ¬¡å‘ä¸»æœºå‘é€æ¶ˆæ¯ï¼Œç¬¬ä¸€æ¬¡æ˜¯å›å¤ä¸»æœºå·²æ”¶åˆ°æ–­å¼€çš„è¯·æ±‚ï¼Œç¬¬äºŒæ¬¡æ˜¯å‘ä¸»æœºç¡®è®¤æ˜¯å¦æ–­å¼€ï¼Œç¡®ä¿æ•°æ®ä¼ è¾“å®Œæ¯•ã€‚\n\n## å¹‚ç­‰æ€§\n\nå…¶ä»»æ„å¤šæ¬¡æ‰§è¡Œå¯¹èµ„æºæœ¬èº«æ‰€äº§ç”Ÿçš„å½±å“å‡ä¸ä¸€æ¬¡æ‰§è¡Œçš„å½±å“ç›¸åŒã€‚\n\n## srcå’Œhrefçš„åŒºåˆ«(å¼•å…¥å’Œå¼•ç”¨)\n- srcÂ æŒ‡çš„æ˜¯ sourceÂ ï¼Œå±æ€§ä¸­å¯ä»¥è®¾ç½® srcÂ  çš„æ ‡ç­¾å¤šä¸ºæ›¿æ¢æ ‡ç­¾ï¼Œç”¨äºå°†èµ„æºåŠ è½½åæ›¿æ¢è¯¥æ ‡ç­¾çš„å†…å®¹ï¼Œ srcÂ  åŠ è½½çš„èµ„æºæ˜¯ä¼šé˜»å¡ DOM è§£æçš„ã€‚\n\n- hrefÂ æŒ‡çš„æ˜¯ hypertext referenceÂ ï¼Œå±æ€§ä¸­å¯ä»¥è®¾ç½® hrefÂ  çš„æ ‡ç­¾å¤šä¸ºå¼•ç”¨æˆ–é“¾æ¥æ ‡ç­¾ï¼Œç”¨äºå¼•ç”¨äº’è”ç½‘ä¸Šçš„å…¶ä»–èµ„æºæˆ–è®¾ç½®é”šç‚¹ï¼Œ hrefÂ  å¼•ç”¨çš„èµ„æºä¸ä¼šé˜»å¡ DOM è§£æï¼Œè€Œæ˜¯ä¼šå¹¶è¡ŒåŠ è½½ã€‚\n\n## a.b.c.d å’Œ a['b']['c']['d']ï¼Œå“ªä¸ªæ€§èƒ½æ›´é«˜ï¼Ÿ\n```js\nvar obj = {\n  a:{\n      b:{\n        c:{\n          d:1\n        }\n      }\n    }\n}\nconsole.time()\nconsole.log(obj.a.b.c.d)\nconsole.timeEnd() \n// console.time()\n// console.log(obj[\"a\"][\"b\"][\"c\"][\"d\"])\n// console.timeEnd() \n// default:1.100ms 0.964ms\n```\n\n## å¯¹è±¡å¼•ç”¨\n```js\nvar a = {n: 1};\nvar b = a;\na.x = a = {n: 2};\n\nconsole.log(a.x) \t\nconsole.log(b.x)\n// undefined\n// {n:2}\n```\né¦–å…ˆï¼Œaå’ŒbåŒæ—¶å¼•ç”¨äº†{n:1}å¯¹è±¡ï¼Œæ¥ç€æ‰§è¡Œåˆ°a.x = a = {nï¼š2}è¯­å¥ï¼Œå°½ç®¡èµ‹å€¼æ˜¯ä»å³åˆ°å·¦çš„æ²¡é”™ï¼Œä½†æ˜¯.çš„ä¼˜å…ˆçº§æ¯”=è¦é«˜ï¼Œæ‰€ä»¥è¿™é‡Œé¦–å…ˆæ‰§è¡Œa.xï¼Œç›¸å½“äºä¸ºaï¼ˆæˆ–è€…bï¼‰æ‰€æŒ‡å‘çš„{n:1}å¯¹è±¡æ–°å¢äº†ä¸€ä¸ªå±æ€§xï¼Œå³æ­¤æ—¶å¯¹è±¡å°†å˜ä¸º{n:1;x:undefined}ã€‚ä¹‹åæŒ‰æ­£å¸¸æƒ…å†µï¼Œä»å³åˆ°å·¦è¿›è¡Œèµ‹å€¼ï¼Œæ­¤æ—¶æ‰§è¡Œa ={n:2}çš„æ—¶å€™ï¼Œaçš„å¼•ç”¨æ”¹å˜ï¼ŒæŒ‡å‘äº†æ–°å¯¹è±¡{nï¼š2},è€Œbä¾ç„¶æŒ‡å‘çš„æ˜¯æ—§å¯¹è±¡ã€‚ä¹‹åæ‰§è¡Œa.x = {nï¼š2}çš„æ—¶å€™ï¼Œå¹¶ä¸ä¼šé‡æ–°è§£æä¸€éaï¼Œè€Œæ˜¯æ²¿ç”¨æœ€åˆè§£æa.xæ—¶å€™çš„aï¼Œä¹Ÿå³æ—§å¯¹è±¡ï¼Œæ•…æ­¤æ—¶æ—§å¯¹è±¡çš„xçš„å€¼ä¸º{nï¼š2}ï¼Œæ—§å¯¹è±¡ä¸º {n:1;x:{nï¼š2}}ï¼Œå®ƒè¢«bå¼•ç”¨ç€ã€‚\nåé¢è¾“å‡ºa.xçš„æ—¶å€™ï¼Œåˆè¦è§£æaäº†ï¼Œæ­¤æ—¶çš„aæ˜¯æŒ‡å‘æ–°å¯¹è±¡çš„aï¼Œè€Œè¿™ä¸ªæ–°å¯¹è±¡æ˜¯æ²¡æœ‰xå±æ€§çš„ï¼Œæ•…è®¿é—®æ—¶è¾“å‡ºundefinedï¼›è€Œè®¿é—®b.xçš„æ—¶å€™ï¼Œå°†è¾“å‡ºæ—§å¯¹è±¡çš„xçš„å€¼ï¼Œå³{n:2}ã€‚\n\n\n## Doctypeä½œç”¨ï¼Ÿæ ‡å‡†æ¨¡å¼ä¸å…¼å®¹æ¨¡å¼å„æœ‰ä»€ä¹ˆåŒºåˆ«?\n1. <!DOCTYPE>å£°æ˜ä½äºHTMLæ–‡æ¡£ä¸­çš„ç¬¬ä¸€è¡Œï¼Œå¤„äº <html> æ ‡ç­¾ä¹‹å‰ã€‚å‘ŠçŸ¥æµè§ˆå™¨çš„è§£æå™¨ç”¨ä»€ä¹ˆæ–‡æ¡£æ ‡å‡†è§£æè¿™ä¸ªæ–‡æ¡£ã€‚DOCTYPEä¸å­˜åœ¨æˆ–æ ¼å¼ä¸æ­£ç¡®ä¼šå¯¼è‡´æ–‡æ¡£ä»¥å…¼å®¹æ¨¡å¼å‘ˆç°ã€‚\n\n2. æ ‡å‡†æ¨¡å¼çš„æ’ç‰ˆ å’ŒJSè¿ä½œæ¨¡å¼éƒ½æ˜¯ä»¥è¯¥æµè§ˆå™¨æ”¯æŒçš„æœ€é«˜æ ‡å‡†è¿è¡Œã€‚åœ¨å…¼å®¹æ¨¡å¼ä¸­ï¼Œé¡µé¢ä»¥å®½æ¾çš„å‘åå…¼å®¹çš„æ–¹å¼æ˜¾ç¤º,æ¨¡æ‹Ÿè€å¼æµè§ˆå™¨çš„è¡Œä¸ºä»¥é˜²æ­¢ç«™ç‚¹æ— æ³•å·¥ä½œã€‚\n\n3. æœ‰ä¸¤ç§æ¨¡å¼ï¼šä¸¥æ ¼æ¨¡å¼ï¼šä»¥è¯¥æµè§ˆå™¨æ”¯æŒçš„æœ€é«˜æ ‡å‡†è¿è¡Œ æ··æ‚æ¨¡å¼ï¼šå‘åå…¼å®¹ï¼Œæ¨¡æ‹Ÿè€æµè§ˆå™¨ï¼Œé˜²æ­¢æµè§ˆå™¨æ— æ³•å…¼å®¹é¡µé¢ã€‚\n\n## HTML5 ä¸ºä»€ä¹ˆåªéœ€è¦å†™ <!DOCTYPE HTML>ï¼Ÿ\n- HTML5 ä¸åŸºäº SGMLï¼Œå› æ­¤ä¸éœ€è¦å¯¹DTD(æ–‡æ¡£ç±»å‹å®šä¹‰)è¿›è¡Œå¼•ç”¨ï¼Œä½†æ˜¯éœ€è¦doctypeæ¥è§„èŒƒæµè§ˆå™¨çš„è¡Œä¸ºï¼ˆè®©æµè§ˆå™¨æŒ‰ç…§å®ƒä»¬åº”è¯¥çš„æ–¹å¼æ¥è¿è¡Œï¼‰ï¼›\n\n- è€ŒHTML4.01åŸºäºSGML,æ‰€ä»¥éœ€è¦å¯¹DTDè¿›è¡Œå¼•ç”¨ï¼Œæ‰èƒ½å‘ŠçŸ¥æµè§ˆå™¨æ–‡æ¡£æ‰€ä½¿ç”¨çš„æ–‡æ¡£ç±»å‹ã€‚\n\n- æ–°å¢è¯­ä¹‰åŒ–æ ‡ç­¾\n```html\n<header>ã€<footer>ã€<section>ã€<article>ã€<nav>ã€<hgroup>ã€<aside>ã€<figure>\n```\n\n- åˆ é™¤çš„æ ‡ç­¾\n```html\n<big>ã€<u>ã€<font>ã€<basefont>ã€<center>ã€<s>ã€<tt>\n```\n\n- å¤šåª’ä½“\n```html\n<audio>ã€<video>\n```\n\n```html\n<!-- åªå†™å±æ€§åé»˜è®¤ä¸ºtrue -->\n<input type=\"checkbox\"  checked/>\n<!-- å±æ€§å=\"å±æ€§å\"ä¹Ÿä¸ºtrue -->\n<input type=\"checkbox\"  checked=\"checked\"/>\n```\n\n## å¯¹æµè§ˆå™¨å†…æ ¸çš„ç†è§£ï¼Ÿ\nä¸»è¦åˆ†æˆä¸¤éƒ¨åˆ†ï¼šæ¸²æŸ“å¼•æ“(layout engineeræˆ–Rendering Engine)å’ŒJSå¼•æ“ã€‚\næ¸²æŸ“å¼•æ“ï¼šè´Ÿè´£å–å¾—ç½‘é¡µçš„å†…å®¹ï¼ˆHTMLã€XMLã€å›¾åƒç­‰ç­‰ï¼‰ã€æ•´ç†è®¯æ¯ï¼ˆä¾‹å¦‚åŠ å…¥CSSç­‰ï¼‰ï¼Œä»¥åŠè®¡ç®—ç½‘é¡µçš„æ˜¾ç¤ºæ–¹å¼ï¼Œç„¶åä¼šè¾“å‡ºè‡³æ˜¾ç¤ºå™¨æˆ–æ‰“å°æœºã€‚æµè§ˆå™¨çš„å†…æ ¸çš„ä¸åŒå¯¹äºç½‘é¡µçš„è¯­æ³•è§£é‡Šä¼šæœ‰ä¸åŒï¼Œæ‰€ä»¥æ¸²æŸ“çš„æ•ˆæœä¹Ÿä¸ç›¸åŒã€‚æ‰€æœ‰ç½‘é¡µæµè§ˆå™¨ã€ç”µå­é‚®ä»¶å®¢æˆ·ç«¯ä»¥åŠå…¶å®ƒéœ€è¦ç¼–è¾‘ã€æ˜¾ç¤ºç½‘ç»œå†…å®¹çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦å†…æ ¸ã€‚\n\nJSå¼•æ“ï¼šè§£æå’Œæ‰§è¡Œjavascriptæ¥å®ç°ç½‘é¡µçš„åŠ¨æ€æ•ˆæœã€‚\n\næœ€å¼€å§‹æ¸²æŸ“å¼•æ“å’ŒJSå¼•æ“å¹¶æ²¡æœ‰åŒºåˆ†çš„å¾ˆæ˜ç¡®ï¼Œåæ¥JSå¼•æ“è¶Šæ¥è¶Šç‹¬ç«‹ï¼Œå†…æ ¸å°±å€¾å‘äºåªæŒ‡æ¸²æŸ“å¼•æ“ã€‚\n\n## html5æ–°ç‰¹æ€§ï¼Ÿ\n- HTML5 ç°åœ¨å·²ç»ä¸æ˜¯ SGML çš„å­é›†ï¼Œä¸»è¦æ˜¯å…³äºå›¾åƒï¼Œä½ç½®ï¼Œå­˜å‚¨ï¼Œå¤šä»»åŠ¡ç­‰åŠŸèƒ½çš„å¢åŠ ã€‚\n### ç»˜ç”» canvas;\n### ç”¨äºåª’ä»‹å›æ”¾çš„ video å’Œ audio å…ƒç´ ;\n### æœ¬åœ°ç¦»çº¿å­˜å‚¨ localStorage é•¿æœŸå­˜å‚¨æ•°æ®ï¼Œæµè§ˆå™¨å…³é—­åæ•°æ®ä¸ä¸¢å¤±;sessionStorage çš„æ•°æ®åœ¨æµè§ˆå™¨å…³é—­åè‡ªåŠ¨åˆ é™¤;\n### è¯­ä¹‰åŒ–æ›´å¥½çš„å†…å®¹å…ƒç´ ï¼Œæ¯”å¦‚ articleã€footerã€headerã€navã€section;\nè¡¨å•æ§ä»¶ï¼Œcalendarã€dateã€timeã€emailã€urlã€search;\næ–°çš„æŠ€æœ¯webworker, websocket, Geolocation;\n\n- ç§»é™¤çš„å…ƒç´ ï¼š\nçº¯è¡¨ç°çš„å…ƒç´ ï¼šbasefontï¼Œbigï¼Œcenterï¼Œfont, sï¼Œstrikeï¼Œttï¼Œu;\nå¯¹å¯ç”¨æ€§äº§ç”Ÿè´Ÿé¢å½±å“çš„å…ƒç´ ï¼šframeï¼Œframesetï¼Œnoframesï¼›\n\n- æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼š\nIE8/IE7/IE6æ”¯æŒé€šè¿‡document.createElementæ–¹æ³•äº§ç”Ÿçš„æ ‡ç­¾ï¼Œ\nå¯ä»¥åˆ©ç”¨è¿™ä¸€ç‰¹æ€§è®©è¿™äº›æµè§ˆå™¨æ”¯æŒHTML5æ–°æ ‡ç­¾ï¼Œ\næµè§ˆå™¨æ”¯æŒæ–°æ ‡ç­¾åï¼Œè¿˜éœ€è¦æ·»åŠ æ ‡ç­¾é»˜è®¤çš„æ ·å¼ã€‚\nå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æˆç†Ÿçš„æ¡†æ¶ã€æ¯”å¦‚html5shim;\n\n```js\n<!--[if lt IE 9]>\n<script> src=\"http://html5shim.googlecode.com/svn/trunk/html5.js\"</script>\n<![endif]-->\n```\n\n- å¦‚ä½•åŒºåˆ†HTML5ï¼š DOCTYPEå£°æ˜æ–°å¢çš„ç»“æ„å…ƒç´ åŠŸèƒ½å…ƒç´ \nè¯­ä¹‰åŒ–æ ‡ç­¾ï¼šheader,footer,nav,aside,section å¢å¼ºè¡¨å•ï¼šä¸ºinputå¢åŠ äº†color,email,data,rangeç­‰ç±»å‹ å­˜å‚¨ï¼šsessionStorageï¼ŒlocalStorageï¼Œç¦»çº¿å­˜å‚¨ å¤šåª’ä½“ï¼šaudioï¼Œvedio canvas æ‹–æ”¾ åœ°ç†å®šä½ webworker websocket\n\n## å¯¹HTMLè¯­ä¹‰åŒ–çš„ç†è§£ï¼Ÿ\nç”¨æ­£ç¡®çš„æ ‡ç­¾åšæ­£ç¡®çš„äº‹æƒ…ã€‚\nhtmlè¯­ä¹‰åŒ–è®©é¡µé¢çš„å†…å®¹ç»“æ„åŒ–ï¼Œç»“æ„æ›´æ¸…æ™°ï¼Œä¾¿äºå¯¹æµè§ˆå™¨ã€æœç´¢å¼•æ“è§£æ;\nå³ä½¿åœ¨æ²¡æœ‰æ ·å¼CSSæƒ…å†µä¸‹ä¹Ÿä»¥ä¸€ç§æ–‡æ¡£æ ¼å¼æ˜¾ç¤ºï¼Œå¹¶ä¸”æ˜¯å®¹æ˜“é˜…è¯»çš„;\næœç´¢å¼•æ“çš„çˆ¬è™«ä¹Ÿä¾èµ–äºHTMLæ ‡è®°æ¥ç¡®å®šä¸Šä¸‹æ–‡å’Œå„ä¸ªå…³é”®å­—çš„æƒé‡ï¼Œåˆ©äºSEO;\nä½¿é˜…è¯»æºä»£ç çš„äººå¯¹ç½‘ç«™æ›´å®¹æ˜“å°†ç½‘ç«™åˆ†å—ï¼Œä¾¿äºé˜…è¯»ç»´æŠ¤ç†è§£ã€‚\n\n## iframeç¼ºç‚¹\n* iframeä¼šé˜»å¡ä¸»é¡µé¢çš„Onloadäº‹ä»¶ï¼›\n* æœç´¢å¼•æ“çš„æ£€ç´¢ç¨‹åºæ— æ³•è§£è¯»è¿™ç§é¡µé¢ï¼Œä¸åˆ©äºSEO;\n* iframeå’Œä¸»é¡µé¢å…±äº«è¿æ¥æ± ï¼Œè€Œæµè§ˆå™¨å¯¹ç›¸åŒåŸŸçš„è¿æ¥æœ‰é™åˆ¶ï¼Œæ‰€ä»¥ä¼šå½±å“é¡µé¢çš„å¹¶è¡ŒåŠ è½½ã€‚\n\nä½¿ç”¨iframeä¹‹å‰éœ€è¦è€ƒè™‘è¿™ä¸¤ä¸ªç¼ºç‚¹ã€‚å¦‚æœéœ€è¦ä½¿ç”¨iframeï¼Œæœ€å¥½æ˜¯é€šè¿‡javascriptåŠ¨æ€ç»™iframeæ·»åŠ srcå±æ€§å€¼ã€‚\n\n## å¤šä¸ªæ ‡ç­¾é¡µé€šä¿¡\n1. ä½¿ç”¨ WebSocketï¼Œé€šä¿¡çš„æ ‡ç­¾é¡µè¿æ¥åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œå‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨åï¼ŒæœåŠ¡å™¨æ¨é€æ¶ˆæ¯ç»™æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯ã€‚\n2. ä½¿ç”¨ SharedWorker ï¼ˆåªåœ¨ chrome æµè§ˆå™¨å®ç°äº†ï¼‰ï¼Œä¸¤ä¸ªé¡µé¢å…±äº«åŒä¸€ä¸ªçº¿ç¨‹ï¼Œé€šè¿‡å‘çº¿ç¨‹å‘é€æ•°æ®å’Œæ¥æ”¶æ•°æ®æ¥å®ç°æ ‡ç­¾é¡µä¹‹é—´çš„åŒå‘é€šè¡Œã€‚\n3. ä¹Ÿå¯ä»¥è°ƒç”¨localstorgeã€cookiesç­‰æœ¬åœ°å­˜å‚¨æ–¹å¼ï¼›localstorgeå¦ä¸€ä¸ªæµè§ˆä¸Šä¸‹æ–‡é‡Œè¢«æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤æ—¶ï¼Œå®ƒéƒ½ä¼šè§¦å‘ä¸€ä¸ª storage äº‹ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡ç›‘\nå¬ storage äº‹ä»¶ï¼Œæ§åˆ¶å®ƒçš„å€¼æ¥è¿›è¡Œé¡µé¢ä¿¡æ¯é€šä¿¡ã€‚\n4. è·å–å¯¹åº”æ ‡ç­¾é¡µçš„å¼•ç”¨ï¼Œé€šè¿‡ postMessage æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥å®ç°å¤šä¸ªæ ‡ç­¾é¡µé€šä¿¡çš„ã€‚\n\n## CSSçš„ç›’å­æ¨¡å‹ border-sizing (border-box)\nï¼ˆ1ï¼‰æœ‰ä¸¤ç§ï¼Œ IE ç›’å­æ¨¡å‹ã€W3C ç›’å­æ¨¡å‹ï¼›\nï¼ˆ2ï¼‰ç›’æ¨¡å‹ï¼š å†…å®¹(content)ã€å¡«å……(padding)ã€è¾¹ç•Œ(margin)ã€ è¾¹æ¡†(border)ï¼›\nï¼ˆ3ï¼‰åŒº  åˆ«ï¼š IEçš„contentéƒ¨åˆ†æŠŠ border å’Œ paddingè®¡ç®—äº†è¿›å»;\n\n- W3C æ ‡å‡†ç›’æ¨¡å‹(content-box)ï¼š\n![w3c](http://cdn.mydearest.cn/blog/images/w3c-box.jpg)\n\n- IE ç›’æ¨¡å‹(border-box)ï¼š\n![ie](http://cdn.mydearest.cn/blog/images/ie-box.jpg)\n\nåœ¨ IE ç›’æ¨¡å‹ä¸­ï¼Œç›’å­å®½é«˜ä¸ä»…åŒ…å«äº†å…ƒç´ çš„å®½é«˜ï¼Œè€Œä¸”åŒ…å«äº†å…ƒç´ çš„è¾¹æ¡†ä»¥åŠå†…è¾¹è·ã€‚\n\næ‰€ä»¥åœ¨åŒæ ·çš„è®¾ç½®ä¸‹ï¼ŒIE ä¸‹çš„å…ƒç´ ä¼šçœ‹èµ·æ¥ç›¸å¯¹äºæ ‡å‡†ç›’å­æ¥çš„å°ã€‚\n\n## CSSé€‰æ‹©å™¨æœ‰å“ªäº›ï¼Ÿå“ªäº›å±æ€§å¯ä»¥ç»§æ‰¿ï¼Ÿ(4+4+2+1)11ç§\n**4ä¸ªå±äºç®€å•é€‰æ‹©å™¨_**\n### idé€‰æ‹©å™¨ï¼ˆ#myidï¼‰\n\n### ç±»é€‰æ‹©å™¨ï¼ˆ.myclassnameï¼‰\n\n### æ ‡ç­¾é€‰æ‹©å™¨ï¼ˆdiv, h1, pï¼‰\n\n### é€šé…ç¬¦é€‰æ‹©å™¨ï¼ˆ*ï¼‰\n\n**4ä¸ªå±äºç»„åˆé€‰æ‹©å™¨**\nç»„åˆé€‰æ‹©å™¨æ˜¯é€šè¿‡å¤šä¸ªç®€å•é€‰æ‹©å™¨è¿›è¡Œç»„åˆ\n\n### ç›¸é‚»é€‰æ‹©å™¨ï¼ˆh1 + pï¼‰\n\n### åŒçº§å…ƒç´ é€‰æ‹©å™¨ï¼šA~Bï¼Œä½œç”¨äºAåé¢çš„æ‰€æœ‰åŒçº§çš„B\n\n### å­é€‰æ‹©å™¨ï¼ˆul > liï¼‰\n\n### åä»£é€‰æ‹©å™¨ï¼ˆli aï¼‰\n\n### ä¼ªç±»é€‰æ‹©å™¨ï¼ˆa:hover, li:nth-childï¼‰\n|å¸¸è§çš„ä¼ªç±»é€‰æ‹©å™¨|åŠŸèƒ½|\n|:--|:--|\n|:hover|é¼ æ ‡ç§»å…¥å…ƒç´ ä¸Šæ–¹|\n|:focus|å…ƒç´ è·å¾—ç„¦ç‚¹|\n|:checked|é€‰ä¸­çš„è¡¨å•å…ƒç´ |\n|:empty|æ²¡æœ‰ä»»ä½•å­å…ƒç´ çš„å…ƒç´ |\n|:optional|è¡¨å•å…ƒç´ ä¸­å¯ä»¥ä¸ºç©ºçš„å…ƒç´ |\n|:read-only|åªè¯»å±æ€§çš„å…ƒç´ |\n|:read-write|æ²¡æœ‰åªè¯»å±æ€§çš„å…ƒç´ |\n|:required|\té€‰æ‹©è¡¨å•å¿…å¡«é¡¹çš„å…ƒç´ |\n|:valid|é€‰æ‹©æ‰€æœ‰æœ‰æ•ˆå€¼çš„å…ƒç´ |\n|:target|å½“å‰æ´»åŠ¨å…ƒç´ |\n|:root|åŒ¹é…åˆ°æ–‡æ¡£æ ¹å…ƒç´ |\n|:enabled|åŒ¹é…åˆ°é¡µé¢ä¸Šå¯ç”¨çŠ¶æ€çš„å…ƒç´ |\n|:disabled|åŒ¹é…åˆ°ä¸å¯ç”¨çš„å…ƒç´ |\n|:first-child|åŒ¹é…åˆ°ä¸€ä¸ªä½œä¸ºç¬¬ä¸€ä¸ªå­å…ƒç´ çš„å…ƒç´ |\n|:last-child|åŒ¹é…åˆ°ä¸€ä¸ªä½œä¸ºæœ€åä¸€ä¸ªå­å…ƒç´ çš„å…ƒç´ |\n|:nth-child(n)|åŒ¹é…çˆ¶å…ƒç´ çš„ç¬¬nä¸ªå­å…ƒç´ ï¼ˆå…è®¸é£Ÿç”¨ä¹˜æ³•å› å­nä½œä¸ºæ¢ç®—ï¼‰|\n|:nth-last-child(n)|åŒ¹é…çˆ¶å…ƒç´ çš„å€’æ•°ç¬¬nä¸ªå­å…ƒç´ |\n|:link|\tæ²¡æœ‰è®¿é—®è¿‡çš„é“¾æ¥|\n|:visited|è®¿é—®è¿‡çš„é“¾æ¥|\n\n### ä¼ªå…ƒç´ é€‰æ‹©å™¨ï¼ˆ::afterï¼‰\nå®šä¹‰ï¼š ä¼ªå…ƒç´ å»ºç«‹äº†å¯¹è¶…å‡ºæ–‡æ¡£è¯­è¨€æŒ‡å®šçš„æ–‡æ¡£æ ‘çš„æŠ½è±¡ã€‚\n|ä¼ªå…ƒç´ é€‰æ‹©å™¨|åŠŸèƒ½|\n|:--|:--|\n|::first-letter|é€‰æ‹©å…ƒç´ çš„ç¬¬ä¸€ä¸ªå­—æ¯|\n|::first-line|é€‰æ‹©å…ƒç´ çš„ç¬¬ä¸€è¡Œ|\n|::before|åœ¨å…ƒç´ ä¹‹å‰æ’å…¥å†…å®¹å¹¶å®šåˆ¶æ ·å¼|\n|::after|åœ¨å…ƒç´ ä¹‹åæ’å…¥å†…å®¹å¹¶å®šåˆ¶æ ·å¼|\n|::selection|è¢«ç”¨æˆ·é€‰ä¸­çš„å†…å®¹|\n\n### å±æ€§é€‰æ‹©å™¨ï¼ˆa[rel = \"external\"]ï¼‰\n```css\n/* ç¬¬ä¸€ç§ [attr] */\n[disabled]{\n    background-color: #ccc;\n}\n/* ç¬¬äºŒç§ [attr=val] */\n[type='button']{\n    background-color: #ccc;\n}\n/* ç¬¬ä¸‰ç§ [attr~=val] å±æ€§åŒ…å«val */\n[class~='test']{\n    color:red;\n}\n/* ç¬¬å››ç§ [attr^=val] å±æ€§ä»¥valå¼€å¤´ */\n[class^='demo']{\n    background-color:red;\n}\n/* ç¬¬äº”ç§ [attr|=val] å±æ€§ä»¥ val- å¼€å¤´ */\n[class|='demo']{\n    background-color:red;\n}\n/* ç¬¬å…­ç§ [attr$=val] å±æ€§ä»¥ val ç»“å°¾ */\n[class$='item']{\n    font-weight: bold;   \n}\n```\n\n* å¯ç»§æ‰¿çš„æ ·å¼ï¼š font-size font-family color, UL LI DL DD DT;\n\n* ä¸å¯ç»§æ‰¿çš„æ ·å¼ï¼šborder padding margin width height ;\n\n## cssä¼˜å…ˆçº§ç®—æ³•\nå†…è”æ ·å¼ > IDé€‰æ‹©å™¨ > ä¼ªç±»é€‰æ‹©å™¨=å±æ€§é€‰æ‹©å™¨=ç±»é€‰æ‹©å™¨ > æ ‡ç­¾é€‰æ‹©å™¨ > é€šç”¨é€‰æ‹©å™¨ > ç»§æ‰¿æ ·å¼\n* ä¼˜å…ˆçº§å°±è¿‘åŸåˆ™ï¼ŒåŒæƒé‡æƒ…å†µä¸‹æ ·å¼å®šä¹‰æœ€è¿‘è€…ä¸ºå‡†;\n* è½½å…¥æ ·å¼ä»¥æœ€åè½½å…¥çš„å®šä½ä¸ºå‡†;\n\nä¼˜å…ˆçº§ä¸º:\nåŒæƒé‡: å†…è”æ ·å¼è¡¨ï¼ˆæ ‡ç­¾å†…éƒ¨ï¼‰> åµŒå…¥æ ·å¼è¡¨ï¼ˆå½“å‰æ–‡ä»¶ä¸­ï¼‰> å¤–éƒ¨æ ·å¼è¡¨ï¼ˆå¤–éƒ¨æ–‡ä»¶ä¸­ï¼‰ã€‚\n!important > è¡Œå†…æ ·å¼ > id > class > tag > * > ç»§æ‰¿ > é»˜è®¤\nimportant æ¯” å†…è”ä¼˜å…ˆçº§é«˜ï¼Œé€‰æ‹©å™¨ä»å³å¾€å·¦è§£æ\n\n_æƒå€¼_\n```\nå†…è”æ ·å¼ -> 1000\nIDå±æ€§å€¼ -> 100\nç±»å±æ€§å€¼ã€å±æ€§é€‰æ‹©æˆ–ä¼ªç±» -> 10\nå…ƒç´ æˆ–ä¼ªå…ƒç´  -> 1\nç»“åˆç¬¦å’Œé€šé…é€‰æ‹©å™¨ -> 0\n```\n\n## css3æ–°å¢çš„ä¼ªç±»ã€ä¼ªå…ƒç´ \nä¸¾ä¾‹ï¼š\np:first-of-type    é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„é¦–ä¸ª <p> å…ƒç´ çš„æ¯ä¸ª <p> å…ƒç´ ã€‚\np:last-of-type    é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„æœ€å <p> å…ƒç´ çš„æ¯ä¸ª <p> å…ƒç´ ã€‚\np:only-of-type    é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ å”¯ä¸€çš„ <p> å…ƒç´ çš„æ¯ä¸ª <p> å…ƒç´ ã€‚\np:only-child        é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„å”¯ä¸€å­å…ƒç´ çš„æ¯ä¸ª <p> å…ƒç´ ã€‚\np:nth-child(2)    é€‰æ‹©å±äºå…¶çˆ¶å…ƒç´ çš„ç¬¬äºŒä¸ªå­å…ƒç´ çš„æ¯ä¸ª <p> å…ƒç´ ã€‚oddå¥‡æ•°/evenå¶æ•°\n\n::after            åœ¨å…ƒç´ ä¹‹å‰æ·»åŠ å†…å®¹,ä¹Ÿå¯ä»¥ç”¨æ¥åšæ¸…é™¤æµ®åŠ¨ã€‚\n::before            åœ¨å…ƒç´ ä¹‹åæ·»åŠ å†…å®¹\n:enabled          \n:disabled         æ§åˆ¶è¡¨å•æ§ä»¶çš„ç¦ç”¨çŠ¶æ€ã€‚\n:checked        å•é€‰æ¡†æˆ–å¤é€‰æ¡†è¢«é€‰ä¸­ã€‚\n\n## displayæœ‰å“ªäº›å€¼ï¼Ÿ19ç§ è¿™é‡Œåªåˆ—ä¸¾ä¸‹å¸¸è§çš„\nblock           å—ç±»å‹ã€‚é»˜è®¤å®½åº¦ä¸ºçˆ¶å…ƒç´ å®½åº¦ï¼Œå¯è®¾ç½®å®½é«˜ï¼Œæ¢è¡Œæ˜¾ç¤ºã€‚\nnone            å…ƒç´ ä¸æ˜¾ç¤ºï¼Œå¹¶ä»æ–‡æ¡£æµä¸­ç§»é™¤ã€‚\ninline          è¡Œå†…å…ƒç´ ç±»å‹ã€‚é»˜è®¤å®½åº¦ä¸ºå†…å®¹å®½åº¦ï¼Œä¸å¯è®¾ç½®å®½é«˜ï¼ŒåŒè¡Œæ˜¾ç¤ºã€‚\ninline-block    é»˜è®¤å®½åº¦ä¸ºå†…å®¹å®½åº¦ï¼Œå¯ä»¥è®¾ç½®å®½é«˜ï¼ŒåŒè¡Œæ˜¾ç¤ºã€‚\nlist-item       åƒå—ç±»å‹å…ƒç´ ä¸€æ ·æ˜¾ç¤ºï¼Œå¹¶æ·»åŠ æ ·å¼åˆ—è¡¨æ ‡è®°ã€‚\ntable           æ­¤å…ƒç´ ä¼šä½œä¸ºå—çº§è¡¨æ ¼æ¥æ˜¾ç¤ºã€‚\ntable-cell\ninherit         è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿ display å±æ€§çš„å€¼ã€‚\nflex\n\n## positionæœ‰å“ªäº›å€¼ï¼Ÿ7ç§\n- fixedï¼šå›ºå®šå®šä½ã€‚å…ƒç´ çš„ä½ç½®ç›¸å¯¹äºæµè§ˆå™¨çª—å£å®šä½ï¼Œå³æ˜¯çª—å£æ˜¯æ»šåŠ¨çš„ä»–ä¹Ÿä¸ä¼šç§»åŠ¨ã€‚fixedå®šä½ä½¿å…ƒç´ çš„ä½ç½®ä¸æ–‡æ¡£æµæ— å…³ï¼Œå› æ­¤ä¸å æ®ç©ºé—´ã€‚fixedå®šä½çš„å…ƒç´ å’Œå…¶å®ƒå…ƒç´ é‡å \n\n- relativeï¼šå¦‚æœå¯¹ä¸€ä¸ªå…ƒç´ è¿›è¡Œç›¸å¯¹å®šä½ï¼Œå®ƒå°†å‡ºç°åœ¨å®ƒæ‰€åœ¨çš„ä½ç½®ä¸Šï¼Œç„¶åå¯ä»¥é€šè¿‡è®¾ç½®å‚ç›´æˆ–æ°´å¹³ä½ç½®ï¼Œè®©è¿™ä¸ªå…ƒç´ ç›¸å¯¹äºå®ƒçš„èµ·ç‚¹ç§»åŠ¨ï¼Œåœ¨ä½¿ç”¨ç›¸å¯¹å®šä½æ—¶ï¼Œæ— è®ºæ˜¯å¦è¿›è¡Œç§»åŠ¨ï¼Œå…ƒç´ ä»ç„¶å æ®åŸæ¥çš„ç©ºé—´ï¼Œå› æ­¤ï¼Œç§»åŠ¨å…ƒç´ å°†å¯¼è‡´å®ƒè¦†ç›–å…¶ä»–æ¡†ã€‚\n\n- absoluteï¼šç»å¯¹å®šä½çš„å…ƒç´ çš„ä½ç½®ç›¸å¯¹äº static å®šä½ä»¥å¤–çš„ç¬¬ä¸€ä¸ªçˆ¶å…ƒç´ è¿›è¡Œå®šä½ï¼Œå¦‚æœå…ƒç´ æ²¡æœ‰å·²å®šä½çš„çˆ¶å…ƒç´ ï¼Œé‚£ä¹ˆä»–çš„ä½ç½®ç›¸å¯¹äºhtmlã€‚absoluteå®šä½ä½¿å…ƒç´ çš„ä½ç½®ä¸æ–‡æ¡£æµæ— å…³ï¼Œå› æ­¤ä¸å æ®ç©ºé—´ï¼Œabsoluteå®šä½çš„å…ƒç´ å’Œå…¶å®ƒå…ƒç´ é‡å \n\n- stickyï¼šç²˜æ€§å®šä½ã€‚å…ƒç´ å…ˆæŒ‰ç…§æ™®é€šæ–‡æ¡£æµå®šä½ï¼Œç„¶åç›¸å¯¹äºè¯¥å…ƒç´ åœ¨æµä¸­çš„flow rootï¼ˆBFCï¼‰å’Œcontaining blockï¼ˆæœ€è¿‘çš„å—çº§ç¥–å…ˆå…ƒç´ ï¼‰å®šä½ã€‚è€Œåï¼Œå…ƒç´ å®šä½è¡¨ç°ä¸ºåœ¨è·¨è¶Šç‰¹å®šé˜ˆå€¼å‰ä¸ºç›¸å¯¹å®šä½ï¼Œä¹‹åä¸ºfixedå®šä½\n\n- staticï¼šé»˜è®¤å®šä½ã€‚ä¹Ÿå°±æ˜¯æ²¡æœ‰ç‰¹æ®Šå®šä½ï¼Œå…ƒç´ å‡ºç°åœ¨æ­£å¸¸çš„æµä¸­ï¼Œå¿½ç•¥topï¼Œbottomï¼Œleftæˆ–è€…z-indexå£°æ˜\n\n- inheritï¼š ç»§æ‰¿å®šä½ã€‚è§„å®šåº”è¯¥ä»çˆ¶å…ƒç´ ç»§æ‰¿positionçš„å€¼\n\n`float`å…ƒç´ çš„displayä¸ºblockã€‚\n\n## CSS3æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ\n### æ–°å¢å„ç§CSSé€‰æ‹©å™¨ï¼ˆ: not(.input)ï¼šæ‰€æœ‰ class ä¸æ˜¯â€œinputâ€çš„èŠ‚ç‚¹ï¼‰\n### åœ†è§’ï¼ˆborder-radius:8pxï¼‰\n### é˜´å½±ï¼ˆborder-shadow/border-imageï¼‰\n### å¤šåˆ—å¸ƒå±€ï¼ˆmulti-column layoutï¼‰\n### åå°„ï¼ˆReflectï¼‰\n-webkit-box-reflect:æ–¹å‘[ above-ä¸Š | below-ä¸‹ | right-å³ | left-å·¦ ]ï¼Œåç§»é‡ï¼Œé®ç½©å›¾ç‰‡\n### æ–‡å­—ç‰¹æ•ˆï¼ˆtext-shadowï¼‰\n### æ–‡å­—æ¸²æŸ“ï¼ˆtext-decorationï¼‰\n### çº¿æ€§æ¸å˜ï¼ˆgradientï¼‰\n### è¿‡æ¸¡ï¼ˆtransitionï¼‰\n### å½¢çŠ¶è½¬æ¢ï¼ˆtransformï¼‰\nrotate(30deg);Â  Â translate(30px,30px);Â  Â scale(.8);Â  Â  Â  Â  skew(10deg,10deg);Â  Â  Â  Â  rotateX(180deg);Â  Â  Â rotateY(180deg);Â  Â  Â  Â  rotate3d(10,10,10,90deg);\n### åŠ¨ç”»ï¼ˆanimation keyframesï¼‰\n### æ»¤é•œï¼ˆfilterï¼‰\n### å¼¹æ€§å¸ƒå±€ï¼ˆflexï¼‰\n### æ …æ ¼å¸ƒå±€ï¼ˆgridï¼‰\n### åª’ä½“æŸ¥è¯¢ï¼ˆmediaï¼‰\n\n## BFCè§„èŒƒ(å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼šblock formatting context)çš„ç†è§£ï¼Ÿ\n\nBFCï¼ˆBlock Formatting Contextï¼‰å—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼Œæ˜¯ Web é¡µé¢ä¸­ç›’æ¨¡å‹å¸ƒå±€çš„ CSS æ¸²æŸ“æ¨¡å¼ï¼ŒæŒ‡ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸæˆ–è€…è¯´æ˜¯ä¸€ä¸ªéš”ç¦»çš„ç‹¬ç«‹å®¹å™¨ã€‚\n\nä¹Ÿå°±æ˜¯è¯´BFCå†…éƒ¨çš„å…ƒç´ å’Œå¤–éƒ¨çš„å…ƒç´ ä¸ä¼šäº’ç›¸å½±å“ã€‚\n\n- åˆ›å»ºè§„åˆ™ï¼š\n\n1. æ ¹å…ƒç´ \n2. æµ®åŠ¨å…ƒç´ ï¼ˆfloatä¸æ˜¯noneï¼‰\n3. ç»å¯¹å®šä½å…ƒç´ ï¼ˆpositionå–å€¼ä¸ºabsoluteæˆ–fixedï¼‰\n4. displayå–å€¼ä¸ºinline-block,table-cell,table-caption,flex,inline-flexä¹‹ä¸€çš„å…ƒç´ \n5. overflowä¸æ˜¯visibleçš„å…ƒç´ (hiddenã€autoã€scroll)\n\n- ä½œç”¨ç‰¹æ€§ï¼š\n1. å†…éƒ¨çš„ Box ä¼šåœ¨å‚ç›´æ–¹å‘ä¸Šä¸€ä¸ªæ¥ä¸€ä¸ªçš„æ”¾ç½®\n2. å‚ç›´æ–¹å‘ä¸Šçš„è·ç¦»ç”± margin å†³å®šï¼›ï¼ˆè§£å†³å¤–è¾¹è·é‡å é—®é¢˜ï¼‰\n3. bfc çš„åŒºåŸŸä¸ä¼šä¸ float çš„å…ƒç´ åŒºåŸŸé‡å ï¼›ï¼ˆé˜²æ­¢æµ®åŠ¨æ–‡å­—ç¯ç»•ï¼‰\n4. è®¡ç®— bfc çš„é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—ï¼›ï¼ˆæ¸…é™¤æµ®åŠ¨ï¼‰\n5. å†…éƒ¨çš„å…ƒç´ å’Œå¤–éƒ¨çš„å…ƒç´ ä¸ä¼šäº’ç›¸å½±å“\n\n## cssæƒé‡\n> æ ‡ç­¾çš„æƒé‡ä¸º1ï¼Œclassçš„æƒé‡ä¸º10ï¼Œidçš„æƒé‡ä¸º100ï¼Œä»¥ä¸‹ä¾‹å­æ˜¯æ¼”ç¤ºå„ç§å®šä¹‰çš„æƒé‡å€¼\n> å¦‚æœæƒé‡ç›¸åŒï¼Œåˆ™æœ€åå®šä¹‰çš„æ ·å¼ä¼šèµ·ä½œç”¨ï¼Œä½†æ˜¯åº”è¯¥é¿å…è¿™ç§æƒ…å†µå‡ºç°\n\n```css\n/*æƒé‡ä¸º1*/\ndiv{\n}\n/*æƒé‡ä¸º10*/\n.class1{\n}\n/*æƒé‡ä¸º100*/\n#id1{\n}\n/*æƒé‡ä¸º100+1=101*/\n#id1 div{\n}\n/*æƒé‡ä¸º10+1=11*/\n.class1 div{\n}\n/*æƒé‡ä¸º10+10+1=21*/\n.class1 .class2 div{\n}\n```\n\n## .gitignoreè¯´æ˜\n```shell\n.a # å¿½ç•¥æ‰€æœ‰ .a ç»“å°¾çš„æ–‡ä»¶\n!lib.a # ä½† lib.a é™¤å¤–\n/TODO # ä»…ä»…å¿½ç•¥é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ TODO æ–‡ä»¶ï¼Œä¸åŒ…æ‹¬ subdir/TODO\nbuild/ # å¿½ç•¥ build/ ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶\ndoc/.txt # ä¼šå¿½ç•¥ doc/notes.txt ä½†ä¸åŒ…æ‹¬ doc/server/arch.txt\n```\nè§„åˆ™å¾ˆç®€å•ï¼Œä¸åšè¿‡å¤šè§£é‡Šï¼Œä½†æ˜¯æœ‰æ—¶å€™åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œçªç„¶å¿ƒè¡€æ¥æ½®æƒ³æŠŠæŸäº›ç›®å½•æˆ–æ–‡ä»¶åŠ å…¥å¿½ç•¥è§„åˆ™ï¼ŒæŒ‰ç…§ä¸Šè¿°æ–¹æ³•å®šä¹‰åå‘ç°å¹¶æœªç”Ÿæ•ˆï¼ŒåŸå› æ˜¯ .gitignore åªèƒ½å¿½ç•¥é‚£äº›åŸæ¥æ²¡æœ‰è¢« track çš„æ–‡ä»¶ï¼Œå¦‚æœæŸäº›æ–‡ä»¶å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œåˆ™ä¿®æ”¹ .gitignore æ˜¯æ— æ•ˆçš„ã€‚é‚£ä¹ˆè§£å†³æ–¹æ³•å°±æ˜¯å…ˆæŠŠæœ¬åœ°ç¼“å­˜åˆ é™¤ï¼ˆæ”¹å˜æˆæœª track çŠ¶æ€ï¼‰ï¼Œç„¶åå†æäº¤ï¼š\n\n```shell\ngit rm -r --cached .\ngit add .\ngit commit -m update .gitignore\n```\n\n## å¤–è¾¹è·åˆå¹¶\nå¤–è¾¹è·åˆå¹¶æŒ‡çš„æ˜¯ï¼Œå½“ä¸¤ä¸ªå‚ç›´å¤–è¾¹è·ç›¸é‡æ—¶ï¼Œå®ƒä»¬å°†å½¢æˆä¸€ä¸ªå¤–è¾¹è·ã€‚åˆå¹¶åçš„å¤–è¾¹è·çš„é«˜åº¦ç­‰äºä¸¤ä¸ªå‘ç”Ÿåˆå¹¶çš„å¤–è¾¹è·çš„é«˜åº¦ä¸­çš„è¾ƒå¤§è€…ã€‚\n[w3schoolä»‹ç»ç½‘å€](https://www.w3school.com.cn/css/css_margin_collapsing.asp)\n\n## å¦‚ä½•ä¼˜åŒ–cssï¼Œæé«˜æ€§èƒ½ï¼Ÿ\n- ä½¿ç”¨å…³é”®é€‰æ‹©å™¨ï¼Œè¿‡æ»¤æ‰æ— å…³çš„è§„åˆ™\n- æå–é¡¹ç›®å…¬å…±æ ·å¼ï¼Œå¢å¼ºå¯å¤ç”¨æ€§ã€æ¨¡å—åŒ–ç¼–å†™ç»„ä»¶\n- é¢„å¤„ç†å™¨ä»¥åŠæ„å»ºå·¥å…·(postcss`åå¤„ç†å™¨`è¡¥å……å‰ç¼€ã€æ‰“åŒ…å‹ç¼©ã€è‡ªåŠ¨ä¼˜é›…é™çº§)\n\n## marginå’Œpaddingåˆ†åˆ«é€‚åˆä»€ä¹ˆåœºæ™¯ä½¿ç”¨ï¼Ÿ\nmarginæ˜¯ç”¨æ¥éš”å¼€å…ƒç´ ä¸å…ƒç´ çš„é—´è·ï¼›paddingæ˜¯ç”¨æ¥éš”å¼€å…ƒç´ ä¸å†…å®¹çš„é—´éš”ã€‚\nmarginç”¨äºå¸ƒå±€åˆ†å¼€å…ƒç´ ä½¿å…ƒç´ ä¸å…ƒç´ äº’ä¸ç›¸å¹²ï¼›\npaddingç”¨äºå…ƒç´ ä¸å†…å®¹ä¹‹é—´çš„é—´éš”ï¼Œè®©å†…å®¹ï¼ˆæ–‡å­—ï¼‰ä¸ï¼ˆåŒ…è£¹ï¼‰å…ƒç´ ä¹‹é—´æœ‰ä¸€æ®µ\n\n## å¦‚ä½•ä¿®æ”¹chromeè®°ä½å¯†ç åè‡ªåŠ¨å¡«å……è¡¨å•çš„é»„è‰²èƒŒæ™¯ ï¼Ÿ\n```css\ninput:-webkit-autofill, textarea:-webkit-autofill, select:-webkit-autofill {\n  background-color: rgb(250, 255, 189); /*#FAFFBD;*/\n  background-image: none;\n  color: rgb(0, 0, 0);\n}\n```\n\n## ä»€ä¹ˆæ˜¯Cookie éš”ç¦»ï¼Ÿ\nå¦‚æœé™æ€æ–‡ä»¶éƒ½æ”¾åœ¨ä¸»åŸŸåä¸‹ï¼Œé‚£é™æ€æ–‡ä»¶è¯·æ±‚çš„æ—¶å€™éƒ½å¸¦æœ‰çš„cookieçš„æ•°æ®æäº¤ç»™serverçš„ï¼Œéå¸¸æµªè´¹æµé‡ï¼Œ\næ‰€ä»¥ä¸å¦‚éš”ç¦»å¼€ã€‚\n\nå› ä¸ºcookieæœ‰åŸŸçš„é™åˆ¶ï¼Œå› æ­¤ä¸èƒ½è·¨åŸŸæäº¤è¯·æ±‚ï¼Œæ•…ä½¿ç”¨éä¸»è¦åŸŸåçš„æ—¶å€™ï¼Œè¯·æ±‚å¤´ä¸­å°±ä¸ä¼šå¸¦æœ‰cookieæ•°æ®ï¼Œ\nè¿™æ ·å¯ä»¥é™ä½è¯·æ±‚å¤´çš„å¤§å°ï¼Œé™ä½è¯·æ±‚æ—¶é—´ï¼Œä»è€Œè¾¾åˆ°é™ä½æ•´ä½“è¯·æ±‚å»¶æ—¶çš„ç›®çš„ã€‚\n\nåŒæ—¶è¿™ç§æ–¹å¼ä¸ä¼šå°†cookieä¼ å…¥Web Serverï¼Œä¹Ÿå‡å°‘äº†Web Serverå¯¹cookieçš„å¤„ç†åˆ†æç¯èŠ‚ï¼Œ\næé«˜äº†webserverçš„httpè¯·æ±‚çš„è§£æé€Ÿåº¦ã€‚\n\n## ajaxç¼“å­˜é—®é¢˜\n\n1ã€åœ¨ajaxå‘é€è¯·æ±‚å‰åŠ ä¸Š anyAjaxObj.setRequestHeader(\"If-Modified-Since\",\"0\")ã€‚\n\n2ã€åœ¨ajaxå‘é€è¯·æ±‚å‰åŠ ä¸Š anyAjaxObj.setRequestHeader(\"Cache-Control\",\"no-cache\")ã€‚\n\n3ã€åœ¨URLåé¢åŠ ä¸Šä¸€ä¸ªéšæœºæ•°ï¼š \"fresh=\" + Math.random();ã€‚\n\n4ã€åœ¨URLåé¢åŠ ä¸Šæ—¶é—´æˆ³ï¼š\"nowtime=\" + new Date().getTime();ã€‚\n\n5ã€å¦‚æœæ˜¯ä½¿ç”¨jQueryï¼Œç›´æ¥è¿™æ ·å°±å¯ä»¥äº† $.ajaxSetup({cache:false})ã€‚è¿™æ ·é¡µé¢çš„æ‰€æœ‰ajaxéƒ½ä¼šæ‰§è¡Œè¿™æ¡è¯­å¥å°±æ˜¯ä¸éœ€è¦ä¿å­˜ç¼“å­˜è®°å½•ã€‚\n\næ¨¡å—åŒ–å¼€å‘ï¼Œé‡‡ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°ä¸æš´éœ²ç§æœ‰æˆå‘˜ã€‚\n\n## jquery.extend ä¸ jquery.fn.extendçš„åŒºåˆ«ï¼Ÿ\n- jquery.extendï¼šä¸ºjqueryç±»æ·»åŠ ç±»æ–¹æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºæ·»åŠ é™æ€æ–¹æ³•\n- jquery.fn.extend: æºç ä¸­jquery.fn = jquery.prototypeï¼Œæ‰€ä»¥å¯¹jquery.fnçš„æ‰©å±•ï¼Œå°±æ˜¯ä¸ºjqueryç±»æ·»åŠ æˆå‘˜å‡½æ•°\n\n> jquery.extendæ‰©å±•ï¼Œéœ€è¦é€šè¿‡jqueryç±»æ¥è°ƒç”¨ï¼Œè€Œjquery.fn.extendæ‰©å±•ï¼Œæ‰€æœ‰jqueryå®ä¾‹éƒ½å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚\n\n## jqueryä¸€ä¸ªå¯¹è±¡ç»‘å®šå¤šä¸ªäº‹ä»¶\n```js\n// å¤šä¸ªäº‹ä»¶åŒä¸€ä¸ªå‡½æ•°\n$(\"div\").on(\"click mouseover\", function(){});\n\n// å¤šä¸ªäº‹ä»¶ä¸åŒå‡½æ•°\n$(\"div\").on({\nclick: function(){},\nmouseover: function(){}\n});\n```\n\n## å¦‚ä½•ä¸ä½¿ç”¨loopå¾ªç¯ï¼Œåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸º100çš„æ•°ç»„ï¼Œå¹¶ä¸”æ¯ä¸ªå…ƒç´ çš„å€¼ç­‰äºå®ƒçš„ä¸‹æ ‡ï¼Ÿ\n```js\nArray.from(Array(100).keys())\n\n[...Array(100).keys()]\n```\n\næ¥ç€ä¹±åºæ’åº\n```js\narr.sort( () => Math.random() > .5 ? -1 : 1 )\n```\n\nå‰åä¸ªæ•°ç›¸åŠ \n```js\nvar [a, b, c, d, e, f, g, h, i, j, ...last] = arr3;\nvar total = a + b + c + d + e + f + g + h + i + j;\n```\n\n```js\nconst foo = ((x, f = (y = x) => x + y) => {\n      let y = f();\n      x = y++;\n      return [x, y, f(y)]\n    })(2)\n// foo = [4,5,9]\n```\n\n## linkä¸@importçš„åŒºåˆ«\n- link æ˜¯ html æ–¹å¼ï¼Œ@importæ˜¯cssæ–¹å¼ï¼ŒlinkåŠŸèƒ½è¾ƒå¤šï¼Œå¯ä»¥å®šä¹‰ RSSï¼Œå®šä¹‰ Rel ç­‰ä½œç”¨ï¼Œè€Œ@importåªèƒ½ç”¨äºåŠ è½½ css\n\n- linkæœ€å¤§é™åº¦æ”¯æŒå¹¶è¡Œä¸‹è½½ï¼Œ@importè¿‡å¤šåµŒå¥—å¯¼è‡´ä¸²è¡Œä¸‹è½½\n\n- linkå¯ä»¥é€šè¿‡rel=\"alternate stylesheet\"æŒ‡å®šå€™é€‰æ ·å¼ã€‚link æ ‡ç­¾å¯ä»¥å®ç°èµ„æºåŠ è½½ã€DNS é¢„è§£æç­‰åŠŸèƒ½ã€‚\n\n- æµè§ˆå™¨å¯¹linkæ”¯æŒæ—©äº@importï¼Œå¯ä»¥ä½¿ç”¨@importå¯¹è€æµè§ˆå™¨éšè—æ ·å¼ï¼Œ@importéœ€è¦ IE5 ä»¥ä¸Šæ‰èƒ½ä½¿ç”¨\n\n- @importå¿…é¡»åœ¨æ ·å¼è§„åˆ™ä¹‹å‰ï¼Œå¯ä»¥åœ¨ css æ–‡ä»¶ä¸­å¼•ç”¨å…¶ä»–æ–‡ä»¶ï¼Œlinkå¯ä»¥ä½¿ç”¨ js åŠ¨æ€å¼•å…¥ï¼Œ@importä¸è¡Œ\n\n- æ€»ä½“æ¥è¯´ï¼šlink ä¼˜äº@import\n\n## PNG,GIF,JPG çš„åŒºåˆ«\n- GIF:\n\n8 ä½åƒç´ ï¼Œ256 è‰²\næ— æŸå‹ç¼©\næ”¯æŒç®€å•åŠ¨ç”»\næ”¯æŒ boolean é€æ˜\né€‚åˆç®€å•åŠ¨ç”»\n\n- JPEGï¼š\n\né¢œè‰²é™äº 256\næœ‰æŸå‹ç¼©\nå¯æ§åˆ¶å‹ç¼©è´¨é‡\nä¸æ”¯æŒé€æ˜\né€‚åˆç…§ç‰‡\n\n- PNGï¼š\n\næœ‰ PNG8 å’Œ truecolor PNG\nPNG8 ç±»ä¼¼ GIF é¢œè‰²ä¸Šé™ä¸º 256ï¼Œæ–‡ä»¶å°ï¼Œæ”¯æŒ alpha é€æ˜åº¦ï¼Œæ— åŠ¨ç”»\né€‚åˆå›¾æ ‡ã€èƒŒæ™¯ã€æŒ‰é’®\n\n## ä»€ä¹ˆæ˜¯ FOUC?å¦‚ä½•é¿å…\n\nFlash Of Unstyled Contentï¼šç”¨æˆ·å®šä¹‰æ ·å¼è¡¨åŠ è½½ä¹‹å‰æµè§ˆå™¨ä½¿ç”¨é»˜è®¤æ ·å¼æ˜¾ç¤ºæ–‡æ¡£ï¼Œç”¨æˆ·æ ·å¼åŠ è½½æ¸²æŸ“ä¹‹åå†ä»æ–°æ˜¾ç¤ºæ–‡æ¡£ï¼Œé€ æˆé¡µé¢é—ªçƒã€‚è§£å†³æ–¹æ³•ï¼šæŠŠæ ·å¼è¡¨æ”¾åˆ°æ–‡æ¡£çš„head\n\n## focus/blur ä¸ focusin/focusoutçš„åŒºåˆ«å’Œè”ç³»\n1. focus/blur ä¸å†’æ³¡ï¼Œfocusin/focusout å†’æ³¡\n2. focus/blur å…¼å®¹æ€§å¥½ï¼Œfocusin/focusout åœ¨é™¤ FireFox å¤–çš„æµè§ˆå™¨ä¸‹éƒ½ä¿æŒè‰¯å¥½å…¼å®¹æ€§ï¼Œå¦‚éœ€ä½¿ç”¨äº‹ä»¶æ‰˜ç®¡ï¼Œå¯è€ƒè™‘åœ¨ FireFox ä¸‹ä½¿ç”¨äº‹ä»¶æ•è· elem.addEventListener('focus', handler, true)\n3. å¯è·å¾—ç„¦ç‚¹çš„å…ƒç´ ï¼š\n- window\n- é“¾æ¥è¢«ç‚¹å‡»æˆ–é”®ç›˜æ“ä½œ\n- è¡¨å•ç©ºé—´è¢«ç‚¹å‡»æˆ–é”®ç›˜æ“ä½œ\n- è®¾ç½®tabindexå±æ€§çš„å…ƒç´ è¢«ç‚¹å‡»æˆ–é”®ç›˜æ“ä½œ\n\n## == å’Œ === æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n== ä¸€èˆ¬æ¯”è¾ƒï¼Œåœ¨æ¯”è¾ƒçš„æ—¶å€™å¯ä»¥è½¬æ¢æ•°æ®ç±»å‹ï¼Œå‡å®š x == y è¡¨è¾¾å¼ï¼š\n\n1. å¦‚æœxå’Œyç±»å‹ç›¸åŒï¼Œåˆ™ js ä¼šæ¢æˆ === è¿›è¡Œæ¯”è¾ƒï¼›å¦‚æœxä¸ºnull, yä¸ºundefinedï¼Œåˆ™è¿”å› trueï¼Œé¡ºåºè°ƒæ¢ä¸€æ ·;\n2. å¦‚æœxçš„ç±»å‹æ˜¯numberæˆ–è€…boolean, yçš„ç±»å‹æ˜¯stringï¼Œé‚£ä¹ˆè¿”å›x == toNumber(y)ï¼Œé¡ºåºè°ƒæ¢ä¸€æ ·;\n3. å¦‚æœxæ˜¯stringã€symbolæˆ–numberï¼Œè€Œyæ˜¯objectç±»å‹ï¼Œåˆ™è¿”å›x == toPrimitive(y)ï¼Œé¡ºåºè°ƒæ¢ä¸€æ ·;;\n\ntoPrimitiveé¦–å…ˆåœ¨å¯¹è±¡ä¸­ä½¿ç”¨valueOfæ–¹æ³•ï¼Œç„¶åä½¿ç”¨toStringæ–¹æ³•æ¥è·å–è¯¥å¯¹è±¡çš„åŸå§‹å€¼å‰©ä¸‹çš„è¿”å› false\n\n=== ä¸¥æ ¼æ¯”è¾ƒï¼Œåªè¦ç±»å‹ä¸åŒ¹é…å°±è¿”å› false;\n\n## å¯¹è±¡åˆ°å­—ç¬¦ä¸²çš„è½¬æ¢\nå¦‚æœå¯¹è±¡æœ‰ toString()æ–¹æ³•ï¼Œjavascript è°ƒç”¨å®ƒã€‚å¦‚æœè¿”å›ä¸€ä¸ªåŸå§‹å€¼ï¼ˆprimitive value å¦‚ï¼šstring number booleanï¼‰,å°†è¿™ä¸ªå€¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ä½œä¸ºç»“\næœã€‚å¦‚æœå¯¹è±¡æ²¡æœ‰ toString()æ–¹æ³•æˆ–è€…è¿”å›å€¼ä¸æ˜¯åŸå§‹å€¼ï¼Œjavascript å¯»æ‰¾å¯¹è±¡çš„ valueOf()æ–¹æ³•ï¼Œå¦‚æœå­˜åœ¨å°±è°ƒç”¨å®ƒï¼Œè¿”å›ç»“æœæ˜¯åŸå§‹å€¼åˆ™è½¬ä¸ºå­—ç¬¦ä¸²ä½œä¸ºç»“\næœå¦åˆ™ï¼Œjavascript ä¸èƒ½ä» toString()æˆ–è€… valueOf()è·å¾—ä¸€ä¸ªåŸå§‹å€¼ï¼Œæ­¤æ—¶ throws a TypeError\n\n## å¯¹è±¡åˆ°æ•°å­—çš„è½¬æ¢\nå¦‚æœå¯¹è±¡æœ‰valueOf()æ–¹æ³•å¹¶ä¸”è¿”å›å…ƒç´ å€¼ï¼Œjavascriptå°†è¿”å›å€¼è½¬æ¢ä¸ºæ•°å­—ä½œä¸ºç»“æœ\nå¦åˆ™ï¼Œå¦‚æœå¯¹è±¡æœ‰toString()å¹¶ä¸”è¿”å›åŸå§‹å€¼ï¼Œjavascriptå°†è¿”å›ç»“æœè½¬æ¢ä¸ºæ•°å­—ä½œä¸ºç»“æœ\nå¦åˆ™ï¼Œthrows a TypeError\n\n## <,>,<=,>=çš„æ¯”è¾ƒè§„åˆ™\næ‰€æœ‰æ¯”è¾ƒè¿ç®—ç¬¦éƒ½æ”¯æŒä»»æ„ç±»å‹ï¼Œä½†æ˜¯æ¯”è¾ƒåªæ”¯æŒæ•°å­—å’Œå­—ç¬¦ä¸²ï¼Œæ‰€ä»¥éœ€è¦æ‰§è¡Œå¿…è¦çš„è½¬æ¢ç„¶åè¿›è¡Œæ¯”è¾ƒï¼Œè½¬æ¢è§„åˆ™å¦‚ä¸‹:\n\nå¦‚æœæ“ä½œæ•°æ˜¯å¯¹è±¡ï¼Œè½¬æ¢ä¸ºåŸå§‹å€¼ï¼šå¦‚æœ valueOf æ–¹æ³•è¿”å›åŸå§‹å€¼ï¼Œåˆ™ä½¿ç”¨è¿™ä¸ªå€¼ï¼Œå¦åˆ™ä½¿ç”¨ toString æ–¹æ³•çš„ç»“æœï¼Œå¦‚æœè½¬æ¢å¤±è´¥åˆ™æŠ¥é”™\nç»è¿‡å¿…è¦çš„å¯¹è±¡åˆ°åŸå§‹å€¼çš„è½¬æ¢åï¼Œå¦‚æœä¸¤ä¸ªæ“ä½œæ•°éƒ½æ˜¯å­—ç¬¦ä¸²ï¼ŒæŒ‰ç…§å­—æ¯é¡ºåºè¿›è¡Œæ¯”è¾ƒï¼ˆä»–ä»¬çš„ 16 ä½ unicode å€¼çš„å¤§å°ï¼‰\nå¦åˆ™ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ“ä½œæ•°ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œå°†ä¸¤ä¸ªæ“ä½œæ•°è½¬æ¢ä¸ºæ•°å­—è¿›è¡Œæ¯”è¾ƒ\n\n## +è¿ç®—ç¬¦å·¥ä½œæµç¨‹\nå¦‚æœæœ‰æ“ä½œæ•°æ˜¯å¯¹è±¡ï¼Œè½¬æ¢ä¸ºåŸå§‹å€¼\næ­¤æ—¶å¦‚æœæœ‰ä¸€ä¸ªæ“ä½œæ•°æ˜¯å­—ç¬¦ä¸²ï¼Œå…¶ä»–çš„æ“ä½œæ•°éƒ½è½¬æ¢ä¸ºå­—ç¬¦ä¸²å¹¶æ‰§è¡Œè¿æ¥\nå¦åˆ™ï¼šæ‰€æœ‰æ“ä½œæ•°éƒ½è½¬æ¢ä¸ºæ•°å­—å¹¶æ‰§è¡ŒåŠ æ³•\n\n## question\n```js\nlet i = 0;\nif (function temp(){}) {\n i+=typeof temp;\n}\nconsole.log(i)\n// '0undefined'\n```\n\n- Element.getBoundingClientRect() æ–¹æ³•è¿”å›å…ƒç´ çš„å¤§å°åŠå…¶ç›¸å¯¹äºè§†å£çš„ä½ç½®ã€‚\nå±æ€§å°†ä¼šå¯¹å€¼å››èˆäº”å…¥å–æ•´ã€‚å¦‚æœéœ€è¦å°æ•°å€¼\n\n## ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°è°ƒç”¨ï¼Ÿ\nä½¿ç”¨newå…³é”®å­—ï¼Œè¢«ç§°ä¸ºâ€œæ„é€ å‡½æ•°è°ƒç”¨â€\n\n## ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°ï¼Ÿ\næ„é€ å‡½æ•° ï¼Œæ˜¯ä¸€ç§ç‰¹æ®Šçš„æ–¹æ³•ã€‚ä¸»è¦ç”¨æ¥åœ¨åˆ›å»ºå¯¹è±¡æ—¶åˆå§‹åŒ–å¯¹è±¡ï¼Œ å³ä¸ºå¯¹è±¡æˆå‘˜å˜é‡èµ‹åˆå§‹å€¼ï¼Œæ€»ä¸newè¿ç®—ç¬¦ä¸€èµ·ä½¿ç”¨åœ¨åˆ›å»ºå¯¹è±¡çš„è¯­å¥ä¸­ã€‚\n\n## querySelectorAll ä¸ getElementsBy ç³»åˆ—çš„åŒºåˆ«\n\n1. querySelectorAll å±äº W3C ä¸­ Selectors API è§„èŒƒï¼Œ è€Œ getElementsBy ç³»åˆ—åˆ™å±äº W3C DOM è§„èŒƒã€‚\n\n2. querySelectorAll æ–¹æ³•æ¥å—å‚æ•°æ˜¯ CSS é€‰æ‹©ç¬¦ï¼Œå½“ä¼ å…¥çš„æ˜¯ä¸ç¬¦åˆ CSS é€‰æ‹©ç¬¦è§„èŒƒæ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œ getElementsBy ç³»åˆ—åˆ™æ¥å—çš„å‚æ•°æ˜¯å•ä¸€çš„ classNameï¼ŒtagName ç­‰ç­‰ã€‚\n\n3. ä»è¿”å›å€¼è§’åº¦æ¥çœ‹ï¼ŒquerySelectorAll è¿”å›çš„æ˜¯ä¸å˜çš„ç»“ç‚¹åˆ—è¡¨ï¼Œè€Œ getElementsBy ç³»åˆ—è¿”å›çš„æ˜¯åŠ¨æ€çš„ç»“ç‚¹åˆ—è¡¨ã€‚\n\n```js\n// Demo 1\nvar ul = document.querySelectorAll('ul')[0],\n  lis = ul.querySelectorAll(\"li\");\nfor(var i = 0; i < lis.length ; i++){\n  ul.appendChild(document.createElement(\"li\"));\n}\n\n// Demo 2\nvar ul = document.getElementsByTagName('ul')[0], \n  lis = ul.getElementsByTagName(\"li\"); \nfor(var i = 0; i < lis.length ; i++){\n  ul.appendChild(document.createElement(\"li\")); \n}\n```\nå› ä¸º Demo 2 ä¸­çš„ lis æ˜¯ä¸€ä¸ªåŠ¨æ€çš„ç»“ç‚¹åˆ—è¡¨ï¼Œ æ¯ä¸€æ¬¡è°ƒç”¨ lis éƒ½ä¼šé‡æ–°å¯¹æ–‡æ¡£è¿›è¡ŒæŸ¥è¯¢ï¼Œå¯¼è‡´æ— é™å¾ªç¯çš„é—®é¢˜ã€‚\n\nè€Œ Demo 1 ä¸­çš„ lis æ˜¯ä¸€ä¸ªé™æ€çš„ç»“ç‚¹åˆ—è¡¨ï¼Œæ˜¯ä¸€ä¸ª li é›†åˆçš„å¿«ç…§ï¼Œå¯¹æ–‡æ¡£çš„ä»»ä½•æ“ä½œéƒ½ä¸ä¼šå¯¹å…¶äº§ç”Ÿå½±å“ã€‚\n\n- æ™®éè®¤ä¸ºï¼šgetElementsBy ç³»åˆ—æ€§èƒ½æ¯” querySelectorAll å¥½\n\n- querySelectorAll è¿”å›å€¼ä¸ºä¸€ä¸ª NodeListï¼Œè€Œ getElementsBy ç³»åˆ—è¿”å›å€¼ä¸ºä¸€ä¸ª HTMLCollection\n\n## NodeList ä¸ HTMLCollection åŒºåˆ«?\n1. HTMLCollection æ˜¯å…ƒç´ é›†åˆè€Œ NodeList æ˜¯èŠ‚ç‚¹é›†åˆ(å³å¯ä»¥åŒ…å«å…ƒç´ ï¼Œæ–‡æœ¬èŠ‚ç‚¹ï¼Œä»¥åŠæ³¨é‡Šç­‰ç­‰)ã€‚\n\n2. node.childNodesï¼ŒquerySelectorAll(è™½ç„¶æ˜¯é™æ€çš„) è¿”å›çš„æ˜¯ NodeListï¼Œè€Œ node.children å’Œ node.getElementsByXXX è¿”å› HTMLCollectionã€‚\n\n## å¦‚ä½•åˆ¤æ–­å‡½æ•°æ˜¯ new è°ƒç”¨è¿˜æ˜¯æ™®é€šè°ƒç”¨?\n- instanceof\n```js\nfunction Person() {\n  if(this instanceof arguments.callee) {\n    console.log('new è°ƒç”¨');\n  }else {\n    console.log('æ™®é€šè°ƒç”¨');\n  }\n}\nlet p1 = new Person(); // new è°ƒç”¨\nlet p2 = Person(); // å‡½æ•°è°ƒç”¨\n```\n\n- é€šè¿‡ constructor\n```js\nfunction Person() {\n  if(this.constructor === arguments.callee) {\n    console.log('new è°ƒç”¨');\n  }else {\n    console.log('æ™®é€šè°ƒç”¨');\n  }\n}\nlet p1 = new Person(); // new è°ƒç”¨\nlet p2 = Person(); // å‡½æ•°è°ƒç”¨ \n```\n\n## fetchä¼šå‘é€ä¸¤æ¬¡è¯·æ±‚çš„åŸå› \nfetchå‘é€postè¯·æ±‚æ—¶æ€»æ˜¯å‘é€ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡çŠ¶æ€ç æ˜¯204ï¼Œç¬¬äºŒæ¬¡æ‰ä¼šæˆåŠŸã€‚ åŸå› æ˜¯ï¼Œç”¨fetchå‘é€postè¯·æ±‚æ—¶ï¼Œç¬¬ä¸€æ¬¡å‘é€äº†ä¸€ä¸ªoptionsè¯·æ±‚(é¢„æ£€ã€å—…æ¢è¯·æ±‚)ï¼Œè¯¢é—®æœåŠ¡å™¨æ˜¯å¦æ”¯æŒä¿®æ”¹çš„è¯·æ±‚å¤´ï¼Œå¦‚æœæ”¯æŒï¼Œåˆ™åœ¨ç¬¬äºŒæ¬¡å‘é€çœŸæ­£çš„è¯·æ±‚\n\n## webworker\nåœ¨htmlé¡µé¢ä¸­ï¼Œå¦‚æœåœ¨æ‰§è¡Œè„šæœ¬æ—¶ï¼Œé¡µé¢çš„çŠ¶æ€æ˜¯ä¸å¯å“åº”çš„ï¼Œç›´åˆ°è„šæœ¬æ‰§è¡Œå®Œæˆåé¡µé¢æ‰å˜ä¸ºå¯å“åº”ã€‚web workeræ˜¯è¿è¡Œåœ¨åå°çš„jsï¼Œç‹¬ç«‹äºå…¶ä»–è„šæœ¬ï¼Œä¸ä¼šå½±å“é¡µé¢ã€‚å¹¶ä¸”é€šè¿‡postMessageå°†ç»“æœå›è½¬è‡³ä¸»çº¿ç¨‹ã€‚\n\nç°ä»£æµè§ˆå™¨ä¸ºJavaScriptåˆ›é€ çš„å¤šçº¿ç¨‹ç¯å¢ƒã€‚å¯ä»¥æ–°å»ºå¹¶å°†éƒ¨åˆ†ä»»åŠ¡åˆ†é…åˆ°workerçº¿ç¨‹å¹¶è¡Œè¿è¡Œï¼Œä¸¤ä¸ªçº¿ç¨‹å¯ç‹¬ç«‹è¿è¡Œï¼Œäº’ä¸å¹²æ‰°ï¼Œå¯é€šè¿‡è‡ªå¸¦çš„æ¶ˆæ¯æœºåˆ¶ç›¸äº’é€šä¿¡ã€‚\n```js\n// åˆ›å»º worker\nconst worker = new Worker('work.js');\n\n// å‘ä¸»è¿›ç¨‹æ¨é€æ¶ˆæ¯\nworker.postMessage('Hello World');\n\n// ç›‘å¬ä¸»è¿›ç¨‹æ¥çš„æ¶ˆæ¯\nworker.onmessage = function (event) {\n  console.log('Received message ' + event.data);\n}\n```\n- é™åˆ¶\n  - åŒæºé™åˆ¶\n  - æ— æ³•ä½¿ç”¨ document / window / alert / confirm\n  - æ— æ³•åŠ è½½æœ¬åœ°èµ„æº\n\n## ä¸€å¥è¯æ¦‚æ‹¬RESTFUL\nç”¨urlå®šä½èµ„æºï¼Œç”¨httpæè¿°æ“ä½œ\n\n## è®¾å¤‡åƒç´ æ¯”ï¼ˆDPR device pixel redioï¼‰\n1DPR = ç‰©ç†åƒç´ /åˆ†è¾¨ç‡ ä¹Ÿå°±æ˜¯ç‰©ç†åƒç´ åœ¨å±å¹•ä¸Šæœ€ä½³çš„é€»è¾‘åƒç´ å¤§å°\n\nåœ¨ä¸ç¼©æ”¾çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªé€»è¾‘åƒç´ å°±ç­‰äºä¸€ä¸ªDPRï¼Œå³1é€»è¾‘åƒç´  = ç‰©ç†åƒç´ /åˆ†è¾¨ç‡\n\n- è‡ªé€‚åº”\n - åª’ä½“æŸ¥è¯¢\n - ç™¾åˆ†æ¯”\n - rem(éƒ½åªç›¸å¯¹äºæµè§ˆå™¨çš„æ ¹å…ƒç´ HTML é»˜è®¤æƒ…å†µä¸‹htmlå…ƒç´ çš„font-sizeä¸º16pxï¼Œæ‰€ä»¥1rem=16pxçš„font-size)\nä¸ºäº†è®¡ç®—æ–¹ä¾¿\n```css\nhtml {\n  font-size: 62.5%\n}\n```\nè¿™ä¸ªæ„æ€æ˜¯é»˜è®¤å­—ä½“å°ºå¯¸çš„62.5%ï¼Œä¹Ÿå°±æ˜¯ 16*62.5%=10pxï¼Œæ­¤æ—¶æˆ‘ä»¬å°±æœ‰1rem = 10pxã€‚\n\n## clickåœ¨iosä¸Šæœ‰300msçš„å»¶è¿Ÿï¼ŒåŸå› å’Œè§£å†³åŠæ³•\nè‹¹æœä¸Šæœ‰ä¸€ä¸ªåŒå‡»ç¼©æ”¾ç½‘é¡µçš„åŠŸèƒ½ï¼Œå½“ç¬¬ä¸€æ¬¡clickæ—¶å€™æµè§ˆå™¨ä¼šç­‰å¾…300msåˆ¤å®šç”¨æˆ·æ˜¯å¦è¦åŒå‡»ï¼Œæ‰€ä»¥ç‚¹å‡»ä¸€æ¬¡åä¼šå»¶è¿Ÿ300msæ‰å‘ç”Ÿclickäº‹ä»¶ã€‚\n\nè§£å†³åŠæ³•ï¼š\n1. ç¦ç”¨ç¼©æ”¾ï¼š\n```js\n<meta name=\"viewport\" content=\"width=device-width;user-scalable=no;\">\n```\n\n2. åˆ©ç”¨fastClickï¼š(`FastClick.attach(document.body)`)\næ£€æµ‹åˆ°touchendäº‹ä»¶æ—¶ç«‹å³å‘å‡ºæ¨¡æ‹Ÿclickäº‹ä»¶ï¼Œå¹¶ä¸”æŠŠæµè§ˆå™¨300msåå‘å‡ºçš„ç‚¹å‡»äº‹ä»¶ç»™é˜»æ–­æ‰ã€‚\n\n## æµè§ˆå™¨ç¼“å­˜çš„å››ç§å®ç°æ–¹æ³•\næŒ‰ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š\n1. Service Workerï¼šæœ¬è´¨æ˜¯ä¸€ä¸ªweb workerï¼Œæ˜¯ç‹¬ç«‹äºç½‘é¡µè¿è¡Œçš„è„šæœ¬ã€‚\n2. Memory Cacheï¼šMemory CacheæŒ‡çš„æ˜¯å†…å­˜ç¼“å­˜ï¼Œä»æ•ˆç‡ä¸Šè®²å®ƒæ˜¯æœ€å¿«çš„ã€‚\n3. Disk Cacheï¼šDisk Cacheå°±æ˜¯å­˜å‚¨åœ¨ç£ç›˜ä¸­çš„ç¼“å­˜ï¼Œä»å­˜å–æ•ˆç‡ä¸Šè®²æ˜¯æ¯”å†…å­˜ç¼“å­˜æ…¢çš„ï¼Œä½†æ˜¯ä»–çš„ä¼˜åŠ¿åœ¨äºå­˜å‚¨å®¹é‡å’Œå­˜å‚¨æ—¶é•¿ã€‚\n4. Push Cacheï¼šå³æ¨é€ç¼“å­˜ï¼Œæ˜¯ HTTP/2 çš„å†…å®¹ã€‚\n\næµè§ˆå™¨çš„ä¸‰çº§ç¼“å­˜åŸç†ï¼š\n\n1. å…ˆå»å†…å­˜çœ‹ï¼Œå¦‚æœæœ‰ï¼Œç›´æ¥åŠ è½½\n\n2. å¦‚æœå†…å­˜æ²¡æœ‰ï¼Œæ‹©å–ç¡¬ç›˜è·å–ï¼Œå¦‚æœæœ‰ç›´æ¥åŠ è½½\n\n3. å¦‚æœç¡¬ç›˜ä¹Ÿæ²¡æœ‰ï¼Œé‚£ä¹ˆå°±è¿›è¡Œç½‘ç»œè¯·æ±‚\n\n4. åŠ è½½åˆ°çš„èµ„æºç¼“å­˜åˆ°ç¡¬ç›˜å’Œå†…å­˜\n\n## åœ¨åœ°å€æ é‡Œè¾“å…¥ä¸€ä¸ªurlåˆ°é¡µé¢å‘ˆç°å‡ºæ¥ï¼Œä¸­é—´å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ\n- è¾“å…¥urlï¼ŒæŸ¥è¯¢å¯¹åº”ipï¼ˆdnsè§£æï¼‰ï¼ˆDNSæŸ¥è¯¢åˆ†ä¸ºé€’å½’æŸ¥è¯¢å’Œè¿­ä»£æŸ¥è¯¢ï¼‰\n  - å…ˆæŸ¥æ‰¾ç¼“å­˜ï¼šæµè§ˆå™¨ç¼“å­˜->ç³»ç»Ÿç¼“å­˜->è·¯ç”±å™¨ç¼“å­˜\n  - æ²¡æœ‰æŸ¥åˆ°åˆ™æŸ¥æ‰¾ç³»ç»Ÿçš„hostsæ–‡ä»¶ä¸­æ˜¯å¦æœ‰è®°å½•ï¼Œ\n  - æ²¡æœ‰åˆ™æŸ¥è¯¢DNSæœåŠ¡å™¨ï¼Œç¼“å­˜\n- å»ºç«‹tcpè¿æ¥ï¼ˆTCPä¸‰æ¬¡æ¡æ‰‹ï¼‰\n- æ ¹æ®ipå’Œç«¯å£å·æ„å»ºä¸€ä¸ªhttpè¯·æ±‚ï¼Œå°è£…ä¸ºtcpåŒ…ï¼Œè¯·æ±‚ä¼ è¾“ï¼šåº”ç”¨å±‚->ä¼ è¾“å±‚->ç½‘ç»œå±‚->æ•°æ®é“¾è·¯å±‚->ç‰©ç†å±‚ï¼ˆå‘é€è¯·æ±‚ï¼Œè§£æurlï¼Œè®¾ç½®è¯·æ±‚æŠ¥æ–‡(å¤´ï¼Œä¸»ä½“)ï¼‰\n  - åˆ°è¾¾æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è§£æè¯·æ±‚ä½œå‡ºå“åº”\n- æµè§ˆå™¨æ¥æ”¶åˆ°htmlæ„å»ºDOMæ ‘ï¼ˆä¸­é€”å¦‚æœé‡åˆ°jså°±ä¼šåœæ­¢æ„å»ºè€Œå»æ‰§è¡Œä¼šä¸‹è½½è„šæœ¬ï¼‰ï¼ˆæµè§ˆå™¨æ¸²æŸ“ï¼‰\n  - æ„å»ºCSSOMæ ‘\n  - åˆå¹¶ä¸¤æ ‘ä¸ºæ¸²æŸ“æ ‘ï¼ˆæ’é™¤äº†éè§†è§‰ç»“ç‚¹ï¼‰\n  - å¸ƒå±€ï¼ˆç¡®å®šä¸ªå…ƒç´ çš„å°ºå¯¸å’Œä½ç½®ï¼‰\n  - æ¸²æŸ“ç»˜åˆ¶é¡µé¢\n\n## Cache-controlçš„å€¼æœ‰å“ªäº›\nCache-controlæ˜¯ä¸€ä¸ªé€šç”¨æ¶ˆæ¯å¤´å­—æ®µï¼Œè¢«ç”¨äºHTTPè¯·æ±‚å’Œå“åº”ä¸­ã€‚é€šè¿‡æŒ‡å®šæŒ‡ä»¤æ¥å®ç°ç¼“å­˜æœºåˆ¶ï¼Œè¿™ä¸ªç¼“å­˜æŒ‡ä»¤æ˜¯å•å‘çš„ï¼Œå¸¸è§çš„å–å€¼æœ‰ï¼š\n- private(é»˜è®¤)\n- no-cache\n- max-age\n- must-revalidate\n\n## å¦‚ä½•ç”»0.5pxçš„çº¿\n- é‡‡ç”¨è§†å£æ§åˆ¶\n```html\n<meta name=\"viewport\" content=\"width=device-width;initial-scale=0.5;user-scalable=no;\" />\n```\n\n- border-image\néœ€è¦è‡ªå·±åˆ¶ä½œä¸€ä¸ª0.5pxçš„çº¿æ¡å›¾ç‰‡\n```css\np {\n    border-width: 0 0 1px 0;\n    border-image: url(xxx.png) 2 0 round;\n}\n```\n\n- transform\n```css\np {\n    transform: scaleY(0.5);\n    /* è®¾ç½®åŸºç‚¹ */\n    transform-origin: 50% 100%;\n}\n```\n\n## transitionå’Œanimationçš„åŒºåˆ«\n- animationï¼šåŠ¨ç”»ï¼Œä¸éœ€è¦è§¦å‘ä»»ä½•äº‹ä»¶å°±å¯ä»¥æ”¹å˜å±æ€§å€¼ \n- transitionï¼šè¿‡æ¸¡ï¼Œä¾¦å¬å±æ€§å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼Œæ­é…å…¶ä»–æ ·å¼å±æ€§èƒ½å®ç°å¤§å¤šæ•°è¿‡æ¸¡åŠ¨ç”»\n\nåˆ›å»ºåŠ¨ç”»åºåˆ—ï¼Œéœ€è¦ä½¿ç”¨animationå±æ€§æˆ–è€…å…¶å­å±æ€§ï¼Œè¯¥å±æ€§å…è®¸é…ç½®åŠ¨ç”»æ—¶é—´ã€æ—¶é•¿ä»¥åŠå…¶ä»–åŠ¨ç”»ç»†èŠ‚ï¼Œä½†è¯¥å±æ€§ä¸èƒ½é…ç½®åŠ¨ç”»çš„å®é™…è¡¨ç°ã€‚åŠ¨ç”»çš„å®é™…è¡¨ç°æ˜¯ç”±@keyframesè§„åˆ™å®ç°\n\ntransitionä¹Ÿå¯ä»¥å®ç°åŠ¨ç”»ï¼Œtransitionå¼ºè°ƒè¿‡æ¸¡ï¼Œæ˜¯å…ƒç´ çš„ä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§å‘ç”Ÿå˜åŒ–æ—¶äº§ç”Ÿçš„è¿‡æ¸¡æ•ˆæœï¼ŒåŒä¸€ä¸ªå…ƒç´ é€šè¿‡ä¸¤ä¸ªä¸åŒé€”å¾„è·å–æ ·å¼ï¼Œè€Œç¬¬äºŒä¸ªé€”å¾„å½“æŸç§æ”¹å˜å‘ç”Ÿæ—¶æ‰èƒ½è·å–æ ·å¼ï¼Œè¿™æ ·å°±ä¼šäº§ç”Ÿè¿‡æ¸¡åŠ¨ç”»ã€‚transitionå¤šä¸ªå±æ€§ç”¨é€—å·éš”å¼€ã€‚\n```css\ntransition: transform 2s ease,border-radius 3s ease-out;\n```\n\n## å…³äºjsåŠ¨ç”»å’Œcss3åŠ¨ç”»çš„å·®å¼‚æ€§\næ¸²æŸ“çº¿ç¨‹åˆ†ä¸ºmain threadå’Œcompositor threadã€‚å¦‚æœcssåŠ¨ç”»åªæ”¹å˜transformå’Œopacityï¼Œè¿™æ—¶å€™æ•´ä¸ªcssåŠ¨ç”»åœ¨compositor threadå¾—ä»¥å®Œæˆï¼ˆè€ŒjsåŠ¨ç”»ä¼šåœ¨main threadæ‰§è¡Œç„¶åcompositor threadè¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼‰ï¼Œç‰¹åˆ«æ³¨æ„çš„æ˜¯å¦‚æœæ”¹å˜transformå’Œopacityæ˜¯ä¸ä¼šlayoutå’Œpaintçš„.\n\n- åŒºåˆ«\n - åŠŸèƒ½è¦†ç›–é¢ï¼Œjsæ¯”csså¤§ å®ç°æˆ–è€…é‡æ„éš¾åº¦ä¸ä¸€ï¼Œé€‚åˆæ•ˆæœå¤æ‚ä¸”åŠ¨æ€æ•ˆæœè¦æ±‚é«˜çš„åŠ¨ç”»\n - css3æ¯”jsç®€å•ï¼Œæ€§èƒ½è°ƒä¼˜æ–¹å‘å›ºå®š èƒ½è§¦å‘ GPU åŠ é€Ÿï¼Œè°ƒç”¨ GPU èƒ½åŠ›ï¼Œå¸§ç‡é«˜\n - css3å¯ä»¥åšåˆ°è‡ªç„¶é™çº§ cssåŠ¨ç”»æœ‰å¤©ç„¶äº‹ä»¶æ”¯æŒ css3æœ‰å…¼å®¹æ€§é—®é¢˜\n\n`calcå±æ€§ä½¿ç”¨æˆ·å¯ä»¥åŠ¨æ€è®¡ç®—é•¿åº¦å€¼ã€‚ä»»ä½•é•¿åº¦å€¼éƒ½å¯ä»¥ä½¿ç”¨calc()å‡½æ•°æ¥è®¡ç®—`\n\n## å¿«é€Ÿä¸‹è½½git\nhttps://npm.taobao.org/mirrors/git-for-windows/\nç§‘å­¦è®¡æ•°æ³• 1e3 === 1000\n\n## åŒè¾¹è·é‡å é—®é¢˜ï¼ˆå¤–è¾¹è·æŠ˜å ï¼‰\nç°è±¡ï¼šå¤šä¸ªç›¸é‚»ï¼ˆå…„å¼Ÿæˆ–è€…çˆ¶å­å…³ç³»ï¼‰æ™®é€šæµçš„å—å…ƒç´ å‚ç›´æ–¹å‘marginä¼šé‡å \n\næŠ˜å ç»“æœä¸ºï¼š\n\nä¸¤ä¸ªç›¸é‚»çš„å¤–è¾¹è·éƒ½æ˜¯æ­£æ•°æ—¶ï¼ŒæŠ˜å ç»“æœæ˜¯è¾ƒå¤§è€… ä¸¤ä¸ªç›¸é‚»çš„å¤–è¾¹è·éƒ½æ˜¯è´Ÿæ•°æ—¶ï¼ŒæŠ˜å ç»“æœæ˜¯ç»å¯¹å€¼è¾ƒå¤§è€… ä¸¤ä¸ªç›¸é‚»çš„å¤–è¾¹è·ä¸€æ­£ä¸€è´Ÿæ—¶ï¼ŒæŠ˜å ç»“æœæ˜¯ä¸¤è€…çš„å’Œ\n\n## displayï¼štableå’Œæœ¬èº«tableæœ‰ä»€ä¹ˆåŒºåˆ«\ndisplayï¼štableå’Œæœ¬èº«tableæ˜¯ç›¸å¯¹åº”çš„ï¼ŒåŒºåˆ«åœ¨äºdisplayï¼štableçš„å£°æ˜èƒ½å¤Ÿè®©ä¸€ä¸ªhtmlå…ƒç´ å’Œå®ƒçš„å­èŠ‚ç‚¹åƒtableå…ƒç´ ä¸€æ ·ï¼Œä½¿ç”¨åŸºäºè¡¨æ ¼çš„csså¸ƒå±€ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿè½»æ¾å®šä¹‰ä¸€ä¸ªå•å…ƒæ ¼çš„è¾¹ç•Œï¼ŒèƒŒæ™¯ç­‰æ ·å¼ï¼Œè€Œä¸ä¼šäº§ç”Ÿå› ä¸ºä½¿ç”¨äº†tableé‚£æ ·çš„åˆ¶è¡¨æ ‡ç­¾å¯¼è‡´çš„è¯­ä¹‰åŒ–é—®é¢˜ã€‚\n\nä¹‹æ‰€ä»¥ç°åœ¨é€æ¸æ·˜æ±°äº†tableç³»åˆ—è¡¨æ ¼å…ƒç´ ï¼Œæ˜¯å› ä¸ºä½¿ç”¨div+cssç¼–å†™å‡ºæ¥çš„æ–‡ä»¶æ¯”ç”¨tableç¼–å†™å‡ºæ¥çš„å°ï¼Œè€Œtableå¿…é¡»åœ¨é¡µé¢å®Œå…¨åŠ è½½å®Œæˆåæ‰æ˜¾ç¤ºï¼Œdivåˆ™æ˜¯é€è¡Œæ˜¾ç¤ºï¼Œtableçš„åµŒå¥—æ€§å¤ªå¤šï¼Œæ²¡æœ‰divç®€æ´\n\n## line-heightå’Œheightçš„åŒºåˆ«\nline-heightä¸€èˆ¬æ˜¯æŒ‡å¸ƒå±€é‡Œé¢ä¸€æ®µæ–‡å­—ä¸Šä¸‹è¡Œä¹‹é—´çš„é«˜åº¦ï¼Œæ˜¯é’ˆå¯¹å­—ä½“æ¥è®¾ç½®çš„ã€‚heightä¸€èˆ¬æ˜¯æŒ‡å®¹å™¨çš„æ•´ä½“é«˜åº¦\n\n## é‡ç»˜å’Œé‡æ’\n\n### é‡ç»˜\n\nå½“ç›’å­çš„ä½ç½®ï¼Œå¤§å°ä»¥åŠå…¶ä»–å±æ€§ï¼Œä¾‹å¦‚é¢œè‰²ã€‚å­—ä½“å¤§å°ç­‰éƒ½ç¡®å®šä¸‹æ¥ä¹‹åï¼Œæµè§ˆå™¨ä¾¿æŠŠè¿™äº›å…ƒç´ éƒ½æŒ‰å„è‡ªçš„ç‰¹æ€§ç»˜åˆ¶ä¸€éï¼Œå°†å†…å®¹å‘ˆç°åœ¨é¡µé¢ä¸Šï¼Œé‡ç»˜æ˜¯æŒ‡ä¸€ä¸ªå…ƒç´ å¤–è§‚çš„æ”¹å˜è§¦å‘çš„æµè§ˆå™¨è¡Œä¸ºï¼Œæµè§ˆå™¨ä¼šæ ¹æ®å…ƒç´ çš„æ–°å±æ€§é‡æ–°ç»˜åˆ¶ï¼Œä½¿å…ƒç´ å‘ˆç°æ–°çš„å¤–è§‚ã€‚\n\nè§¦å‘é‡ç»˜çš„æ¡ä»¶ï¼šæ”¹å˜å…ƒç´ çš„å¤–è§‚å±æ€§\n\n### é‡æ’ï¼šå½“æ¸²æŸ“æ ‘ä¸­çš„ä¸€éƒ¨åˆ†æˆ–å…¨éƒ¨å› ä¸ºå…ƒç´ çš„è§„æ¨¡å°ºå¯¸ï¼Œå¸ƒå±€ï¼Œéšè—ç­‰æ”¹å˜è€Œéœ€è¦é‡æ–°æ„å»ºï¼Œæ¯ä¸ªé¡µé¢è‡³å°‘ç»å†ä¸€æ¬¡é‡æ’ï¼Œå³é¦–æ¬¡åŠ è½½\n\né‡ç»˜å’Œé‡æ’çš„å…³ç³»ï¼šåœ¨å›æµçš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šä½¿æ¸²æŸ“æ ‘ä¸­å—åˆ°å½±å“çš„éƒ¨åˆ†å¤±æ•ˆï¼Œå¹¶é‡æ–°æ„é€ è¿™éƒ¨åˆ†æ¸²æŸ“æ ‘ï¼Œå®Œæˆå›æµåï¼Œæµè§ˆå™¨ä¼šé‡æ–°ç»˜åˆ¶å—å½±å“çš„éƒ¨åˆ†åˆ°å±å¹•ä¸­ï¼Œä¹Ÿå°±æ˜¯æ„å‘³ç€é‡æ’æ„å‘³ç€é‡ç»˜æ“ä½œï¼Œè€Œé‡ç»˜ä¸ä¸€å®šå¯¼è‡´é‡æ’\n\nå¼•èµ·é‡æ’é‡ç»˜çš„åŸå› æœ‰:\n- æ·»åŠ æˆ–è€…åˆ é™¤å¯è§çš„DOMå…ƒç´ \n- å…ƒç´ å°ºå¯¸ä½ç½®çš„æ”¹å˜\n- æµè§ˆå™¨é¡µé¢çš„åˆå§‹åŒ–\n- æµè§ˆå™¨çª—å£å¤§å°å‘ç”Ÿæ”¹å˜\n\nå‡å°‘é‡ç»˜é‡æ’çš„æ–¹æ³•æœ‰\n- ä¸åœ¨å¸ƒå±€ä¿¡æ¯æ”¹å˜æ—¶åšDOMæŸ¥è¯¢\n- ä½¿ç”¨csstextï¼ŒclassNameä¸€æ¬¡æ€§æ”¹å˜å±æ€§\n- ä½¿ç”¨fragment\n- å¯¹äºå¤šæ¬¡é‡æ’çš„å…ƒç´ ï¼Œæ¯”å¦‚åŠ¨ç”»ï¼Œä½¿ç”¨ç»å¯¹å®šä½è„±ç¦»æ–‡æ¡£æµï¼Œä½¿å…¶ä¸å½±å“å…¶ä»–å…ƒç´ \n\n## ajaxé˜»æ­¢ç¼“å­˜è¯·æ±‚\n- åœ¨ajaxå‘é€è¯·æ±‚å‰åŠ ä¸ŠajaxObj.setRequestHeader(\"If-Modified-Since\", \"0\")\n- åœ¨ajaxå‘é€è¯·æ±‚å‰åŠ ä¸ŠajaxObj.setRequestHeader(\"Cache-Control\", \"no-cache\")\n- åœ¨urlåé¢åŠ ä¸€ä¸ªéšæœºæ•°ï¼š\"fresh=\"+Math.rendom()\n- åœ¨urlåé¢åŠ ä¸Šæ—¶é—´æˆ³ï¼š\"nowtime=\"+new Date().getTime()\n\n## å®ç°å•ä¾‹æ¨¡å¼(é—­åŒ…)\n- æ¨¡ä»¿å—çº§ä½œç”¨åŸŸï¼Œä¿å­˜å¤–éƒ¨å‡½æ•°çš„å˜é‡ï¼Œå°è£…ç§æœ‰å˜é‡\n```js\nfunction Person(name) {\n    this.name = name;\n}\n\nfunction Singleton = function(constructor) {\n    var ret;\n    return function() {\n        if(!ret) ret = new constructor(...arguments);\n        return ret;\n    }\n}\n```\n\n## ä¸‰æ ç­‰å®½å›¾ç‰‡å¸ƒå±€\n```css\nimg {\n    display: block;\n    width: 30%;\n    margin: 2.5% 0 0 2.5%;\n    float: left;\n}\n```\n\n## è¡¨å•æäº¤çš„å¸¸ç”¨æ–¹å¼æ˜¯ä»€ä¹ˆï¼Œåº”ç”¨å±‚å’Œé€šä¿¡å±‚å‘ç”Ÿäº†ä»€ä¹ˆè¿‡ç¨‹ï¼Ÿ\n- åœ¨formè¡¨å•æäº¤æ—¶æˆ‘ä»¬æœ€å¸¸ç”¨çš„æ–¹å¼æ—¶getå’Œpostï¼Œformè¡¨å•æäº¤æ—¶æœ€è¦æ³¨æ„çš„å°±æ˜¯enctypeï¼Œenctypeå±æ€§é»˜è®¤æ˜¯application/x-www-form-urlencoded.\n- åœ¨getæ–¹å¼æ—¶ï¼Œæµè§ˆå™¨ä¼šä»¥å½“å‰çš„enctypeç¼–ç æ–¹å¼å°†formæ•°æ®è½¬åŒ–æˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶å°†æ”¹å­—ç¬¦ä¸²appendåˆ°urlä¸Šï¼Œä»¥ï¼Ÿåˆ†å‰²ã€‚åŠ è½½è¯¥æ–°çš„url\n- åœ¨postæ–¹å¼ä¸­ï¼š\n - å¦‚æœformä¸­æ²¡æœ‰typeä¸ºfileçš„æ§ä»¶æ—¶ï¼Œformä¹Ÿä¼šä»¥é»˜è®¤enctypeè¿›è¡Œç¼–ç ã€‚\n - å¦‚æœæ˜¯å…·æœ‰typeä¸ºfileçš„æ§ä»¶æ—¶ï¼Œenctypeå¾—è®¾ç½®æˆmultipart/form-dataï¼Œè¿™æ ·æµè§ˆå™¨ä¼šå°†è¡¨å•ä»¥æ§ä»¶ä¸ºå•ä½åˆ†å‰²ï¼Œå¹¶ä¸ºæ¯ä¸ªéƒ¨åˆ†åŠ ä¸ŠContent-Dispositionï¼ˆform-dataæˆ–è€…æ—¶fileï¼‰ã€content-typeï¼ˆé»˜è®¤å€¼ä¸ºtext/plainï¼‰ã€nameç­‰ä¿¡æ¯ï¼Œå¹¶åŠ ä¸Šåˆ†å‰²ç¬¦ï¼ˆboundaryï¼‰\n\n- åº”ç”¨å±‚å’Œé€šä¿¡å±‚å‘ç”Ÿäº†ä»€ä¹ˆè¿‡ç¨‹ï¼Ÿ\n - æµè§ˆå™¨å‘é€è¯·æ±‚åï¼ŒDNSï¼ˆDomain Name Systemï¼‰è§£æåŸŸåå¾—åˆ°ç›¸åº”çš„IPåœ°å€ã€‚\n  - é€šè¿‡åŸŸåè®¿é—®ç½‘é¡µ\n  - å°†åŸŸåå‘é€åˆ°è§£æåŸŸåçš„æœåŠ¡å™¨ä¸Šï¼Œæœ‰å¾ˆå¤šä¸“é—¨è§£æ.orgã€.cnã€.comç­‰ï¼Œæœ€ä¸»è¦æœ‰ä¸€å°æ ¹åŸŸåæœåŠ¡å™¨\n  - æ‰¾åˆ°å¯¹åº”çš„IPåœ°å€\n\n  - åº”ç”¨å±‚httpåè®®ï¼ˆHyperText Transfer Protocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰\n    - å‘é€è¯·æ±‚çš„æˆ‘ä»¬ç§°ä¹‹ä¸ºå®¢æˆ·ç«¯ï¼ˆclientï¼‰ã€è€Œåšå‡ºç›¸åº”çš„æœåŠ¡å™¨å«åšæºæœåŠ¡å™¨ï¼ˆorigin serverï¼‰ã€‚åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´å¯èƒ½å­˜åœ¨å¾ˆå¤šä¸­é—´å±‚ï¼Œæ¯”å¦‚ä»£ç†ï¼Œç½‘å…³ï¼Œéš§é“ç­‰ã€‚\n    - httpåè®®ä¸­çš„è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ï¼ˆå…·ä½“æ ¼å¼å¤§å®¶å¯ä»¥ç™¾åº¦äº†è§£ä¸‹ï¼‰\n  - é€šä¿¡å±‚ï¼ˆTCP/IPï¼‰ï¼š\n    - ç”ŸæˆhttpæŠ¥æ–‡åŠè¯·æ±‚\n    - TCPåè®®å°†httpè¯·æ±‚æŠ¥æ–‡è¿›è¡Œåˆ†å‰²ï¼ˆä¸ºäº†æ–¹ä¾¿ä¼ è¾“ï¼‰ï¼Œå¹¶åœ¨æ¯ä¸ªæŠ¥æ–‡ä¸Šæ ‡è®°åºå·å’Œç«¯å£å·å‘ç»™ç½‘ç»œå±‚ï¼ˆIPåè®®ï¼‰\n    - ç½‘ç»œå±‚å¢åŠ ä½œä¸ºé€šä¿¡ç›®çš„çš„MACåœ°å€åè½¬å‘ç»™é“¾è·¯å±‚ï¼ˆå»ºç«‹ç”µè·¯è¿æ¥ï¼Œæ•´ä¸ªç½‘ç»œçš„ç‰©ç†åŸºç¡€ï¼Œå…¸å‹åè®®ä¸ºä»¥å¤ªç½‘å’ŒADSLç­‰ï¼‰\n    - é“¾è·¯å±‚å¤„ç†åç”Ÿæˆçš„æ•°æ®åŒ…é€šè¿‡ç‰©ç†å±‚ä¼ è¾“åˆ°æ¥æ”¶ç«¯\n    - æ¥æ”¶åˆ°æ•°æ®çš„æœåŠ¡ç«¯åæŒ‰åºç½‘ä¸Šä¼ ï¼Œ\n    - TCPè¿æ¥çš„ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹\n    - IPåè®®å®ç°æ•°æ®ä¼ é€’åˆ°å¯¹æ–¹è®¡ç®—æœº\n    - è§£æè¯·æ±‚æŠ¥æ–‡å¹¶ç”Ÿæˆå“åº”æŠ¥æ–‡\nTCPåè®®æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„å­—èŠ‚æµçš„è¿è¾“å±‚é€šä¿¡åè®®ï¼ŒTCPæ˜¯å…¨åŒå·¥æ¨¡å¼ã€‚\n\n## flex: 0 1 auto è¡¨ç¤ºä»€ä¹ˆæ„æ€\n> flex: 0 1 auto å…¶å®å°±æ˜¯å¼¹æ€§ç›’å­çš„é»˜è®¤å€¼ï¼Œè¡¨ç¤º flex-grow, flex-shrink å’Œ flex-basis çš„ç®€å†™ï¼Œåˆ†åˆ«è¡¨ç¤ºæ”¾å¤§æ¯”ä¾‹ã€ç¼©å°æ¯”ä¾‹ã€åˆ†é…å¤šä½™ç©ºé—´ä¹‹å‰å æ®çš„ä¸»è½´ç©ºé—´ã€‚\n\n\n## å°ç¨‹åºçš„æŠ€æœ¯æ¶æ„å’Œæ–¹æ¡ˆã€å°ç¨‹åºçš„å‡ºç°ä¸»è¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ\nåŒ…å«å°ç¨‹åºå®¹å™¨ã€æ¸²æŸ“å¼•æ“å’Œ JavaScript å¼•æ“ã€‚UI å±‚è¿è¡Œåœ¨ WebView ä¸­ï¼Œè€Œé€»è¾‘å±‚è¿è¡Œåœ¨ç‹¬ç«‹çš„ JS å¼•æ“ä¸­ã€‚\n\né™ä½è·å®¢æˆæœ¬ã€æ‰“é€šè·¨ç«¯\n\n## view å±‚ã€js å±‚åˆ†åˆ«åœ¨å“ªé‡Œã€æ€ä¹ˆé€šä¿¡ ?\nä¸šåŠ¡é€»è¾‘çš„ JS åœ¨ç‹¬ç«‹çš„ JavaScript å¼•æ“ï¼ˆServiceWorkerï¼‰ä¸­ï¼Œæ¯ä¸ªé¡µé¢çš„ view å’Œ css è¿è¡Œåœ¨å„è‡ªç‹¬ç«‹çš„ webview é‡Œé¢ï¼Œé¡µé¢ä¹‹é—´æ˜¯é€šè¿‡å‡½æ•° navigateTo è¿›è¡Œé¡µé¢çš„åˆ‡æ¢ï¼›JS å±‚å’Œ view å±‚é€šè¿‡æ¶ˆæ¯æœåŠ¡ MessageChannel è¿›è¡Œé€šä¿¡ã€‚\n\n## AST(æŠ½è±¡è¯­æ³•æ ‘)\næŠ½è±¡è¯­æ³•æ ‘ (Abstract Syntax Tree)ï¼Œæ˜¯å°†ä»£ç é€å­—æ¯è§£ææˆ æ ‘çŠ¶å¯¹è±¡ çš„å½¢å¼ã€‚è¿™æ˜¯è¯­è¨€ä¹‹é—´çš„è½¬æ¢ã€ä»£ç è¯­æ³•æ£€æŸ¥ï¼Œä»£ç é£æ ¼æ£€æŸ¥ï¼Œä»£ç æ ¼å¼åŒ–ï¼Œä»£ç é«˜äº®ï¼Œä»£ç é”™è¯¯æç¤ºï¼Œä»£ç è‡ªåŠ¨è¡¥å…¨ç­‰ç­‰çš„åŸºç¡€ã€‚ä¾‹å¦‚:\n```js\nfunction square(n){\n\treturn n * n\n}\n```\n![ast](http://cdn.mydearest.cn/blog/images/ast.png)\n\n## babelç¼–è¯‘åŸç†\n- babylon å°† ES6/ES7 ä»£ç è§£ææˆ AST (è§£æ)\n- babel-traverse å¯¹ AST è¿›è¡Œéå†è½¬è¯‘ï¼Œå¾—åˆ°æ–°çš„ AST (è½¬æ¢)\n- æ–° AST é€šè¿‡ babel-generator è½¬æ¢æˆ ES5 (ç”Ÿæˆ)\n\n## å‡½æ•°å¼ç¼–ç¨‹\nå‡½æ•°å¼ç¼–ç¨‹æ˜¯ä¸€ç§ ç¼–ç¨‹èŒƒå¼ï¼Œä½ å¯ä»¥ç†è§£ä¸ºä¸€ç§è½¯ä»¶æ¶æ„çš„æ€ç»´æ¨¡å¼ã€‚å®ƒæœ‰ç€ç‹¬ç«‹ä¸€å¥—ç†è®ºåŸºç¡€ä¸è¾¹ç•Œæ³•åˆ™ï¼Œè¿½æ±‚çš„æ˜¯ æ›´ç®€æ´ã€å¯é¢„æµ‹ã€é«˜å¤ç”¨ã€æ˜“æµ‹è¯•ã€‚å…¶å®åœ¨ç°æœ‰çš„ä¼—å¤šçŸ¥ååº“ä¸­ï¼Œéƒ½è•´å«ç€ä¸°å¯Œçš„å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œå¦‚ React / Redux ç­‰ã€‚\n\n`å‡½æ•°å¼ç¼–ç¨‹ï¼ˆç¼©å†™ä¸ºFPï¼‰æ˜¯é€šè¿‡ç¼–å†™çº¯å‡½æ•°ï¼Œé¿å…å…±äº«çŠ¶æ€ã€å¯å˜æ•°æ®ã€å‰¯ä½œç”¨æ¥æ„å»ºè½¯ä»¶çš„è¿‡ç¨‹ã€‚`å‡½æ•°å¼ç¼–ç¨‹æ˜¯å£°æ˜å¼çš„è€Œä¸æ˜¯å‘½ä»¤å¼çš„ï¼Œåº”ç”¨ç¨‹åºçš„çŠ¶æ€æ˜¯é€šè¿‡çº¯å‡½æ•°æµåŠ¨çš„ã€‚ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹å½¢æˆå¯¹æ¯”ï¼Œé¢å‘\nå¯¹è±¡ä¸­åº”ç”¨ç¨‹åºçš„çŠ¶æ€é€šå¸¸ä¸å¯¹è±¡ä¸­çš„æ–¹æ³•å…±äº«å’Œå…±å¤„ã€‚\n\n- å¸¸è§çš„ç¼–ç¨‹èŒƒå¼:\n  - å‘½ä»¤å¼ç¼–ç¨‹(è¿‡ç¨‹åŒ–ç¼–ç¨‹): æ›´å…³å¿ƒè§£å†³é—®é¢˜çš„æ­¥éª¤ï¼Œä¸€æ­¥æ­¥ä»¥è¯­è¨€çš„å½¢å¼å‘Šè¯‰è®¡ç®—æœºåšä»€ä¹ˆï¼›\n  - äº‹ä»¶é©±åŠ¨ç¼–ç¨‹: äº‹ä»¶è®¢é˜…ä¸è§¦å‘ï¼Œè¢«å¹¿æ³›ç”¨äº GUI çš„ç¼–ç¨‹è®¾è®¡ä¸­ï¼›\n  - é¢å‘å¯¹è±¡ç¼–ç¨‹: åŸºäºç±»ã€å¯¹è±¡ä¸æ–¹æ³•çš„è®¾è®¡æ¨¡å¼ï¼Œæ‹¥æœ‰ä¸‰ä¸ªåŸºç¡€æ¦‚å¿µ: å°è£…æ€§ã€ç»§æ‰¿æ€§ã€å¤šæ€æ€§ï¼›\n  - å‡½æ•°å¼ç¼–ç¨‹(é¢å‘æ•°å­¦ç¼–ç¨‹)ï¼šå…³å¿ƒæ•°æ®çš„æ˜ å°„ã€‚\n\n- å¥½å¤„\n1. å‡½æ•°å‰¯ä½œç”¨å°ï¼Œæ‰€æœ‰å‡½æ•°ç‹¬ç«‹å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•è€¦åˆï¼Œå¤ç”¨æ€§æé«˜ï¼›\n2. ä¸å…³æ³¨æ‰§è¡Œæ—¶é—´ï¼Œæ‰§è¡Œé¡ºåºï¼Œå‚æ•°ï¼Œå‘½åç­‰ï¼Œèƒ½ä¸“æ³¨äºæ•°æ®çš„æµåŠ¨ä¸å¤„ç†ï¼Œèƒ½æœ‰æ•ˆæé«˜ç¨³å®šæ€§ä¸å¥å£®æ€§ï¼›\n3. è¿½æ±‚å•å…ƒåŒ–ï¼Œç²’åº¦åŒ–ï¼Œä½¿å…¶é‡æ„å’Œæ”¹é€ æˆæœ¬é™ä½ï¼Œå¯ç»´æŠ¤ã€å¯æ‹“å±•æ€§è¾ƒå¥½ï¼›\n4. æ›´æ˜“äºåšå•å…ƒæµ‹è¯•ã€‚\n\n## ä»€ä¹ˆæ˜¯cdnåŠå…¶å¥½å¤„\nCDN:CDNæ˜¯å°†æºç«™å†…å®¹åˆ†å‘è‡³æœ€æ¥è¿‘ç”¨æˆ·çš„èŠ‚ç‚¹ï¼Œä½¿ç”¨æˆ·å¯å°±è¿‘å–å¾—æ‰€éœ€å†…å®¹ï¼Œæé«˜ç”¨æˆ·è®¿é—®çš„å“åº”é€Ÿåº¦å’ŒæˆåŠŸç‡ã€‚è§£å†³å› åˆ†å¸ƒã€å¸¦å®½ã€æœåŠ¡å™¨æ€§èƒ½å¸¦æ¥çš„è®¿é—®å»¶è¿Ÿé—®\né¢˜ï¼Œé€‚ç”¨äºç«™ç‚¹åŠ é€Ÿã€ç‚¹æ’­ã€ç›´æ’­ç­‰åœºæ™¯ã€‚\n\n### å¥½å¤„\n1. å¤šåŸŸååŠ è½½èµ„æº\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨éƒ½ä¼šå¯¹å•ä¸ªåŸŸåä¸‹çš„å¹¶å‘è¯·æ±‚æ•°ï¼ˆæ–‡ä»¶åŠ è½½ï¼‰è¿›è¡Œé™åˆ¶ï¼Œé€šå¸¸æœ€å¤šæœ‰4ä¸ªï¼Œé‚£ä¹ˆç¬¬5ä¸ªåŠ è½½é¡¹å°†ä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å‰é¢çš„æŸä¸€ä¸ªæ–‡ä»¶åŠ è½½å®Œæ¯•ã€‚\nå› ä¸ºCDNæ–‡ä»¶æ˜¯å­˜æ”¾åœ¨ä¸åŒåŒºåŸŸï¼ˆä¸åŒIPï¼‰çš„ï¼Œæ‰€ä»¥å¯¹æµè§ˆå™¨æ¥è¯´æ˜¯å¯ä»¥åŒæ—¶åŠ è½½é¡µé¢æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆè¿œä¸æ­¢4ä¸ªï¼‰ï¼Œä»è€Œæé«˜é¡µé¢åŠ è½½é€Ÿåº¦ã€‚\n\n2. æ–‡ä»¶å¯èƒ½å·²ç»è¢«åŠ è½½è¿‡å¹¶ä¿å­˜æœ‰ç¼“å­˜\nä¸€äº›é€šç”¨çš„jsåº“æˆ–è€…æ˜¯cssæ ·å¼åº“ï¼Œå¦‚jQueryï¼Œåœ¨ç½‘ç»œä¸­çš„ä½¿ç”¨æ˜¯éå¸¸æ™®éçš„ã€‚å½“ä¸€ä¸ªç”¨æˆ·åœ¨æµè§ˆä½ çš„æŸä¸€ä¸ªç½‘é¡µçš„æ—¶å€™ï¼Œå¾ˆæœ‰å¯èƒ½ä»–å·²ç»é€šè¿‡ä½ ç½‘ç«™ä½¿ç”¨çš„CDNè®¿é—®è¿‡äº†å…¶ä»–çš„æŸä¸€ä¸ªç½‘ç«™ï¼Œæ°å·§è¿™ä¸ªç½‘ç«™åŒæ ·ä¹Ÿä½¿ç”¨äº†jQueryï¼Œé‚£ä¹ˆæ­¤æ—¶ç”¨æˆ·æµè§ˆå™¨å·²ç»ç¼“å­˜æœ‰è¯¥jQueryæ–‡ä»¶ï¼ˆåŒIPçš„åŒåæ–‡ä»¶å¦‚æœæœ‰ç¼“å­˜ï¼Œæµè§ˆå™¨ä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ï¼Œä¸ä¼šå†è¿›è¡ŒåŠ è½½ï¼‰ï¼Œæ‰€ä»¥å°±ä¸ä¼šå†åŠ è½½ä¸€æ¬¡äº†ï¼Œä»è€Œé—´æ¥çš„æé«˜äº†ç½‘ç«™çš„è®¿é—®é€Ÿåº¦ã€‚\n\n3. é«˜æ•ˆç‡\nä½ çš„ç½‘ç«™åšçš„å†NBä¹Ÿä¸ä¼šNBè¿‡ç™¾åº¦NBè¿‡Googleå§ï¼Ÿä¸€ä¸ªå¥½çš„CDNä¼šæä¾›æ›´é«˜çš„æ•ˆç‡ï¼Œæ›´ä½çš„ç½‘ç»œå»¶æ—¶å’Œæ›´å°çš„ä¸¢åŒ…ç‡ã€‚\n\n4. åˆ†å¸ƒå¼çš„æ•°æ®ä¸­å¿ƒ\nå‡å¦‚ä½ çš„ç«™ç‚¹å¸ƒç½®åœ¨åŒ—äº¬ï¼Œå½“ä¸€ä¸ªé¦™æ¸¯æˆ–è€…æ›´è¿œçš„ç”¨æˆ·è®¿é—®ä½ çš„ç«™ç‚¹çš„æ—¶å€™ï¼Œä»–çš„æ•°æ®è¯·æ±‚åŠ¿å¿…ä¼šå¾ˆæ…¢å¾ˆæ…¢ã€‚è€ŒCDNsåˆ™ä¼šè®©ç”¨æˆ·ä»ç¦»ä»–æœ€è¿‘çš„èŠ‚ç‚¹å»åŠ è½½æ‰€éœ€çš„æ–‡ä»¶ï¼Œæ‰€ä»¥åŠ è½½é€Ÿåº¦æå‡å°±æ˜¯ç†æ‰€å½“ç„¶çš„äº†ã€‚\n\n5. ä½¿ç”¨æƒ…å†µåˆ†æ\nä¸€èˆ¬æƒ…å†µä¸‹CDNsæä¾›å•†ï¼ˆå¦‚ç™¾åº¦äº‘åŠ é€Ÿï¼‰éƒ½ä¼šæä¾›æ•°æ®ç»Ÿè®¡åŠŸèƒ½ï¼Œå¯ä»¥äº†è§£æ›´å¤šå…³äºç”¨æˆ·è®¿é—®è‡ªå·±ç½‘ç«™çš„æƒ…å†µï¼Œå¯ä»¥æ ¹æ®ç»Ÿè®¡æ•°æ®å¯¹è‡ªå·±çš„ç«™ç‚¹é€‚æ—¶é€‚å½“çš„åšå‡ºäº›è®¸è°ƒæ•´ã€‚\n\n6. æœ‰æ•ˆé˜²æ­¢ç½‘ç«™è¢«æ”»å‡»\nä¸€èˆ¬æƒ…å†µä¸‹CDNsæä¾›å•†ä¹Ÿæ˜¯ä¼šæä¾›ç½‘ç«™å®‰å…¨æœåŠ¡çš„\n\n## ç½‘ç«™çªç„¶æ‰“ä¸å¼€æœ‰å“ªäº›å¯èƒ½\næ–­ç½‘ï¼ŒDNS è§£æå‡ºç°é—®é¢˜ï¼Œä»£ç†æœåŠ¡å™¨å‡ºç°é—®é¢˜ï¼Œæµé‡è¢«åŠ«æŒäº†ç­‰ç­‰\n\n## å‰ç«¯å‘åç«¯å‘é€è¯·æ±‚æœ‰å‡ ç§æ–¹å¼ï¼Ÿ\n1. link src=\"\"\n2. script src=\"\"\n3. img src=\"\" // audio video\n4. ajaxè¯·æ±‚\n5. è¡¨å•æäº¤\n6. a href=\"\"\n7. iframe src=\"\"\n\n## axios ç‰¹ç‚¹\n1. axios æ˜¯ä¸€ä¸ªåŸºäº promise çš„ HTTP åº“ï¼Œæ”¯æŒ promise æ‰€æœ‰çš„ API\n\n2. å®ƒå¯ä»¥æ‹¦æˆªè¯·æ±‚å’Œå“åº”\n\n3. å®ƒå¯ä»¥è½¬æ¢è¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®ï¼Œå¹¶å¯¹å“åº”å›æ¥çš„å†…å®¹è‡ªåŠ¨è½¬æ¢æˆ JSON ç±»å‹çš„æ•°æ®\n\n4. å®‰å…¨æ€§æ›´é«˜ï¼Œå®¢æˆ·ç«¯æ”¯æŒé˜²å¾¡ XSRF\n\n5. å–æ¶ˆè¯·æ±‚\n```js\nvar app = new Vue({\n  el: '#app',\n  data: {\n    message: 'Hello Axios!',\n    source: null\n  },\n  methods: {\n    sendRequest () {\n      this.source = this.axios.CancelToken.source(); // è¿™é‡Œåˆå§‹åŒ–sourceå¯¹è±¡\n      this.axios.get(url, {\n        cancelToken: this.source.token // è¿™é‡Œå£°æ˜çš„cancelTokenå…¶å®ç›¸å½“äºæ˜¯ä¸€ä¸ªæ ‡è®°ï¼Œ\n        // å½“æˆ‘ä»¬è¦å–æ¶ˆè¯·æ±‚çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡è¿™ä¸ªæ‰¾åˆ°è¯¥è¯·æ±‚\n      })\n        .then(res => {\n          // ä½ çš„é€»è¾‘\n        })\n        .catch(res => {\n          // å¦‚æœè°ƒç”¨äº†cancelæ–¹æ³•ï¼Œé‚£ä¹ˆè¿™é‡Œçš„reså°±æ˜¯cancelä¼ å…¥çš„ä¿¡æ¯\n          // ä½ çš„é€»è¾‘\n        })\n    },\n    cancel () {\n      this.source.cancel('è¿™é‡Œä½ å¯ä»¥è¾“å‡ºä¸€äº›ä¿¡æ¯ï¼Œå¯ä»¥åœ¨catchä¸­æ‹¿åˆ°')\n    }\n  }\n})\n```\n\né»˜è®¤ Content-Type: application/json;charset=utf-8\n- Content-Type: application/json ï¼š è¯·æ±‚ä½“ä¸­çš„æ•°æ®ä¼šä»¥jsonå­—ç¬¦ä¸²çš„å½¢å¼å‘é€åˆ°åç«¯\n- Content-Type: application/x-www-form-urlencodedï¼šè¯·æ±‚ä½“ä¸­çš„æ•°æ®ä¼šä»¥æ™®é€šè¡¨å•å½¢å¼ï¼ˆé”®å€¼å¯¹ï¼‰å‘é€åˆ°åç«¯\n- Content-Type: multipart/form-dataï¼š å®ƒä¼šå°†è¯·æ±‚ä½“çš„æ•°æ®å¤„ç†ä¸ºä¸€æ¡æ¶ˆæ¯ï¼Œä»¥æ ‡ç­¾ä¸ºå•å…ƒï¼Œç”¨åˆ†éš”ç¬¦åˆ†å¼€ã€‚æ—¢å¯ä»¥ä¸Šä¼ é”®å€¼å¯¹ï¼Œä¹Ÿå¯ä»¥ä¸Šä¼ æ–‡ä»¶ã€‚\n\næ•°æ®å‘é€å­—æ®µï¼šparams(get)ã€data(postã€put)\n\n### é…ç½®axiosè¯·æ±‚å¤´ä¸­çš„content-typeä¸ºæŒ‡å®šç±»å‹\n```js\naxios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded'; æˆ–è€… \n\n{headers:{'Content-Type':'application/x-www-form-urlencoded'}}\n```\n\n## Base64çš„ç¼–ç åŸç†\nå­—ç¬¦é€‰ç”¨äº†\"A-Zã€a-zã€0-9ã€+ã€/\" 64ä¸ªå¯æ‰“å°å­—ç¬¦ï¼Œè¿™æ˜¯æ ‡å‡†çš„Base64åè®®è§„å®šã€‚\n```js\n['A', 'B', 'C', ... 'a', 'b', 'c', ... '0', '1', ... '+', '/']\n```\n\n### å…·ä½“è½¬æ¢æ­¥éª¤\n- ç¬¬ä¸€æ­¥ å°†å¾…è½¬æ¢çš„å­—ç¬¦ä¸²æ¯ä¸‰ä¸ªå­—èŠ‚åˆ†ä¸ºä¸€ç»„ï¼Œæ¯ä¸ªå­—èŠ‚å 8bitï¼Œé‚£ä¹ˆå…±æœ‰24ä¸ªäºŒè¿›åˆ¶ä½ã€‚\n- ç¬¬äºŒæ­¥ å°†ä¸Šé¢çš„24ä¸ªäºŒè¿›åˆ¶ä½æ¯6ä¸ªä¸€ç»„ï¼Œå…±åˆ†ä¸º4ç»„ã€‚\n- ç¬¬ä¸‰æ­¥ åœ¨æ¯ç»„å‰é¢æ·»åŠ ä¸¤ä¸ª0ï¼Œæ¯ç»„ç”±6ä¸ªå˜ä¸º8ä¸ªäºŒè¿›åˆ¶ä½ï¼Œæ€»å…±32ä¸ªäºŒè¿›åˆ¶ä½ï¼Œå³å››ä¸ªå­—èŠ‚ã€‚\n- ç¬¬å››æ­¥ æ ¹æ®Base64ç¼–ç å¯¹ç…§è¡¨è·å¾—å¯¹åº”çš„å€¼ã€‚\n\n## {}å’Œ[]çš„valueOfå’ŒtoStringç»“æœ\n```js\nvar a = {}\na.valueOf() // {}\na.toString() // [object Object]\n\nvar b = []\nb.valueOf() // []\nb.toString()  // \"\"\n```\n\n## ä¸‰ç§äº‹ä»¶æ¨¡å‹\n- äº‹ä»¶(æ˜¯ç”¨æˆ·æ“ä½œç½‘é¡µæ—¶å‘ç”Ÿçš„äº¤äº’åŠ¨ä½œæˆ–è€…ç½‘é¡µæœ¬èº«çš„ä¸€äº›æ“ä½œ)\nåŸå§‹äº‹ä»¶æ¨¡å‹ï¼ˆDOM0ï¼‰ï¼ŒDOM2äº‹ä»¶æ¨¡å‹ï¼ŒIEäº‹ä»¶æ¨¡å‹\n\n### DOM0çº§æ¨¡å‹\nè¿™ç§æ¨¡å‹ä¸ä¼šä¼ æ’­ï¼Œæ‰€ä»¥æ²¡æœ‰äº‹ä»¶æµçš„æ¦‚å¿µï¼Œä½†æ˜¯ç°åœ¨æœ‰çš„æµè§ˆå™¨æ”¯æŒä»¥å†’æ³¡çš„æ–¹å¼å®ç°ï¼Œå®ƒå¯ä»¥åœ¨ç½‘é¡µä¸­ç›´æ¥å®šä¹‰ç›‘å¬å‡½æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ jså±æ€§æ¥æŒ‡å®šç›‘å¬å‡½æ•°ã€‚è¿™ç§æ–¹å¼æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½å…¼å®¹çš„ã€‚\n- ç¼ºç‚¹\n  - é€»è¾‘å’Œæ˜¾ç¤ºæ²¡æœ‰åˆ†ç¦»\n  - ç›¸åŒäº‹ä»¶çš„ç›‘å¬å‡½æ•°åªèƒ½ç»‘å®šä¸€ä¸ªï¼Œåé¢ç»‘å®šçš„ä¼šè¦†ç›–æ‰å‰é¢çš„\n  - æ— æ³•å¤„ç†äº‹ä»¶çš„å†’æ³¡å’Œå§”æ‰˜\n```html\n<!-- åœ¨ html ä»£ç ä¸­ç›´æ¥æŒ‡å®šå±æ€§å€¼ -->\n<button onclick=\"doSomeTing()\">test</button>\n\n<script>\n  // åœ¨ js ä»£ç ä¸­\n  document.getElementsById('demo').onclick = doSomeTine();\n</script>\n```\n\n### IE äº‹ä»¶æ¨¡å‹\nåœ¨è¯¥äº‹ä»¶æ¨¡å‹ä¸­ï¼Œä¸€æ¬¡äº‹ä»¶å…±æœ‰ä¸¤ä¸ªè¿‡ç¨‹ï¼Œäº‹ä»¶å¤„ç†(ç›®æ ‡)é˜¶æ®µï¼Œå’Œäº‹ä»¶å†’æ³¡é˜¶æ®µã€‚äº‹ä»¶å¤„ç†é˜¶æ®µä¼šé¦–å…ˆæ‰§è¡Œç›®æ ‡å…ƒç´ ç»‘å®šçš„ç›‘å¬äº‹ä»¶ã€‚ç„¶åæ˜¯äº‹ä»¶å†’æ³¡é˜¶æ®µï¼Œå†’æ³¡æŒ‡çš„æ˜¯äº‹ä»¶ä»ç›®æ ‡å…ƒç´ å†’æ³¡åˆ° documentï¼Œä¾æ¬¡æ£€æŸ¥ç»è¿‡çš„èŠ‚ç‚¹æ˜¯å¦ç»‘å®šäº†äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œå¦‚æœæœ‰åˆ™æ‰§è¡Œã€‚è¿™ç§æ¨¡å‹é€šè¿‡ attachEvent æ¥æ·»åŠ ç›‘å¬å‡½æ•°ï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªç›‘å¬å‡½æ•°ï¼Œä¼šæŒ‰é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚\n\n### DOM2 çº§äº‹ä»¶æ¨¡å‹\nåœ¨è¯¥äº‹ä»¶æ¨¡å‹ä¸­ï¼Œä¸€æ¬¡äº‹ä»¶å…±æœ‰ä¸‰ä¸ªè¿‡ç¨‹ï¼Œç¬¬ä¸€ä¸ªè¿‡ç¨‹æ˜¯äº‹ä»¶æ•è·é˜¶æ®µã€‚æ•è·æŒ‡çš„æ˜¯äº‹ä»¶ä» document ä¸€ç›´å‘ä¸‹ä¼ æ’­åˆ°ç›®æ ‡å…ƒç´ ï¼Œä¾æ¬¡æ£€æŸ¥ç»è¿‡çš„èŠ‚ç‚¹æ˜¯å¦ç»‘å®šäº†äº‹ä»¶ç›‘å¬å‡½æ•°ï¼Œå¦‚æœæœ‰åˆ™æ‰§è¡Œã€‚åé¢ä¸¤ä¸ªé˜¶æ®µå’Œ IE äº‹ä»¶æ¨¡å‹çš„ä¸¤ä¸ªé˜¶æ®µç›¸åŒã€‚è¿™ç§äº‹ä»¶æ¨¡å‹ï¼Œäº‹ä»¶ç»‘å®šçš„å‡½æ•°æ˜¯ addEventListenerï¼Œå…¶ä¸­ç¬¬ä¸‰ä¸ªå‚æ•°å¯ä»¥æŒ‡å®šäº‹ä»¶æ˜¯å¦åœ¨æ•è·é˜¶æ®µæ‰§è¡Œã€‚\n\næ‰€æœ‰çš„äº‹ä»¶ç±»å‹éƒ½ä¼šç»å†äº‹ä»¶æ•è·ï¼Œä½†æ˜¯åªæœ‰éƒ¨åˆ†äº‹ä»¶ä¼šç»å†äº‹ä»¶å†’æ³¡é˜¶æ®µï¼Œä¾‹å¦‚ submit äº‹ä»¶å°±ä¸ä¼šå†’æ³¡ã€‚\n\n## ç®€å•ä»‹ç»ä¸€ä¸‹V8å¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶\n```\nv8 çš„åƒåœ¾å›æ”¶æœºåˆ¶åŸºäºåˆ†ä»£å›æ”¶æœºåˆ¶ï¼Œè¿™ä¸ªæœºåˆ¶åˆåŸºäºä¸–ä»£å‡è¯´ï¼Œè¿™ä¸ªå‡è¯´æœ‰ä¸¤ä¸ªç‰¹ç‚¹ï¼Œä¸€æ˜¯æ–°ç”Ÿçš„å¯¹è±¡å®¹æ˜“æ—©æ­»ï¼Œå¦ä¸€ä¸ªæ˜¯ä¸æ­»çš„å¯¹è±¡ä¼šæ´»å¾—æ›´ä¹…ã€‚åŸºäºè¿™ä¸ªå‡è¯´ï¼Œv8 å¼•æ“å°†å†…å­˜åˆ†ä¸ºäº†æ–°ç”Ÿä»£å’Œè€ç”Ÿä»£ã€‚\n\næ–°åˆ›å»ºçš„å¯¹è±¡æˆ–è€…åªç»å†è¿‡ä¸€æ¬¡çš„åƒåœ¾å›æ”¶çš„å¯¹è±¡è¢«ç§°ä¸ºæ–°ç”Ÿä»£ã€‚ç»å†è¿‡å¤šæ¬¡åƒåœ¾å›æ”¶çš„å¯¹è±¡è¢«ç§°ä¸ºè€ç”Ÿä»£ã€‚\n\næ–°ç”Ÿä»£è¢«åˆ†ä¸º From å’Œ To ä¸¤ä¸ªç©ºé—´ï¼ŒTo ä¸€èˆ¬æ˜¯é—²ç½®çš„ã€‚å½“ From ç©ºé—´æ»¡äº†çš„æ—¶å€™ä¼šæ‰§è¡Œ Scavenge ç®—æ³•è¿›è¡Œåƒåœ¾å›æ”¶ã€‚å½“æˆ‘ä»¬æ‰§è¡Œåƒåœ¾å›æ”¶ç®—æ³•çš„æ—¶å€™åº”ç”¨é€»è¾‘å°†ä¼šåœæ­¢ï¼Œç­‰åƒåœ¾å›æ”¶ç»“æŸåå†ç»§ç»­æ‰§è¡Œã€‚è¿™ä¸ªç®—\næ³•åˆ†ä¸ºä¸‰æ­¥ï¼š\n\nï¼ˆ1ï¼‰é¦–å…ˆæ£€æŸ¥ From ç©ºé—´çš„å­˜æ´»å¯¹è±¡ï¼Œå¦‚æœå¯¹è±¡å­˜æ´»åˆ™åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ»¡è¶³æ™‹å‡åˆ°è€ç”Ÿä»£çš„æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶åˆ™æ™‹å‡åˆ°è€ç”Ÿä»£ã€‚å¦‚æœä¸æ»¡è¶³æ¡ä»¶åˆ™ç§»åŠ¨ To ç©ºé—´ã€‚\n\nï¼ˆ2ï¼‰å¦‚æœå¯¹è±¡ä¸å­˜æ´»ï¼Œåˆ™é‡Šæ”¾å¯¹è±¡çš„ç©ºé—´ã€‚\n\nï¼ˆ3ï¼‰æœ€åå°† From ç©ºé—´å’Œ To ç©ºé—´è§’è‰²è¿›è¡Œäº¤æ¢ã€‚\n\næ–°ç”Ÿä»£å¯¹è±¡æ™‹å‡åˆ°è€ç”Ÿä»£æœ‰ä¸¤ä¸ªæ¡ä»¶ï¼š\n\nï¼ˆ1ï¼‰ç¬¬ä¸€ä¸ªæ˜¯åˆ¤æ–­æ˜¯å¯¹è±¡å¦å·²ç»ç»è¿‡ä¸€æ¬¡ Scavenge å›æ”¶ã€‚è‹¥ç»å†è¿‡ï¼Œåˆ™å°†å¯¹è±¡ä» From ç©ºé—´å¤åˆ¶åˆ°è€ç”Ÿä»£ä¸­ï¼›è‹¥æ²¡æœ‰ç»å†ï¼Œåˆ™å¤åˆ¶åˆ° To ç©ºé—´ã€‚\n\nï¼ˆ2ï¼‰ç¬¬äºŒä¸ªæ˜¯ To ç©ºé—´çš„å†…å­˜ä½¿ç”¨å æ¯”æ˜¯å¦è¶…è¿‡é™åˆ¶ã€‚å½“å¯¹è±¡ä» From ç©ºé—´å¤åˆ¶åˆ° To ç©ºé—´æ—¶ï¼Œè‹¥ To ç©ºé—´ä½¿ç”¨è¶…è¿‡ 25%ï¼Œåˆ™å¯¹è±¡ç›´æ¥æ™‹å‡åˆ°è€ç”Ÿä»£ä¸­ã€‚è®¾ç½® 25% çš„åŸå› ä¸»è¦æ˜¯å› ä¸ºç®—æ³•ç»“æŸåï¼Œä¸¤ä¸ªç©ºé—´ç»“æŸå\nä¼šäº¤æ¢ä½ç½®ï¼Œå¦‚æœ To ç©ºé—´çš„å†…å­˜å¤ªå°ï¼Œä¼šå½±å“åç»­çš„å†…å­˜åˆ†é…ã€‚\n\nè€ç”Ÿä»£é‡‡ç”¨äº†æ ‡è®°æ¸…é™¤æ³•å’Œæ ‡è®°å‹ç¼©æ³•ã€‚æ ‡è®°æ¸…é™¤æ³•é¦–å…ˆä¼šå¯¹å†…å­˜ä¸­å­˜æ´»çš„å¯¹è±¡è¿›è¡Œæ ‡è®°ï¼Œæ ‡è®°ç»“æŸåæ¸…é™¤æ‰é‚£äº›æ²¡æœ‰æ ‡è®°çš„å¯¹è±¡ã€‚ç”±äºæ ‡è®°æ¸…é™¤åä¼šé€ æˆå¾ˆå¤šçš„å†…å­˜ç¢ç‰‡ï¼Œä¸ä¾¿äºåé¢çš„å†…å­˜åˆ†é…ã€‚æ‰€ä»¥äº†è§£å†³å†…å­˜ç¢\nç‰‡çš„é—®é¢˜å¼•å…¥äº†æ ‡è®°å‹ç¼©æ³•ã€‚\n\nç”±äºåœ¨è¿›è¡Œåƒåœ¾å›æ”¶çš„æ—¶å€™ä¼šæš‚åœåº”ç”¨çš„é€»è¾‘ï¼Œå¯¹äºæ–°ç”Ÿä»£æ–¹æ³•ç”±äºå†…å­˜å°ï¼Œæ¯æ¬¡åœé¡¿çš„æ—¶é—´ä¸ä¼šå¤ªé•¿ï¼Œä½†å¯¹äºè€ç”Ÿä»£æ¥è¯´æ¯æ¬¡åƒåœ¾å›æ”¶çš„æ—¶é—´é•¿ï¼Œåœé¡¿ä¼šé€ æˆå¾ˆå¤§çš„å½±å“ã€‚ ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ V8 å¼•å…¥äº†å¢é‡æ ‡è®°çš„\næ–¹æ³•ï¼Œå°†ä¸€æ¬¡åœé¡¿è¿›è¡Œçš„è¿‡ç¨‹åˆ†ä¸ºäº†å¤šæ­¥ï¼Œæ¯æ¬¡æ‰§è¡Œå®Œä¸€å°æ­¥å°±è®©è¿è¡Œé€»è¾‘æ‰§è¡Œä¸€ä¼šï¼Œå°±è¿™æ ·äº¤æ›¿è¿è¡Œã€‚\n```\n\n## è·å–åŸå‹çš„æ–¹æ³•\n```js\np.__proto__\n\np.construtor.prototype\n\nObject.getProtorypeOf(p)\n```\n\n## é€ ç«ç®­\n- ä»€ä¹ˆæ˜¯xxx\n- è®²è®²ä½ å¯¹xxxçš„ç†è§£\n- xxxçš„åŸç†ã€xxxæ€ä¹ˆå®ç°\n- xxxçš„ä¼˜ç¼ºç‚¹\n- xxxæ€ä¹ˆè¿›è¡Œä¼˜åŒ–\n- è®²è®²xxxçš„æ€æƒ³ï¼Œè®¾è®¡æ€è·¯\n- xxxçš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆåšçš„\n- é¡¹ç›®ä¸­(react/vue)é‡åˆ°çš„é—®é¢˜\n- æœ€æ»¡æ„çš„é¡¹ç›®ï¼Œä»€ä¹ˆåœ°æ–¹åšçš„å¥½\n- å¦‚ä½•å®ç°ä¸€ä¸ª animate.js\n- ä¸‰ä¸ªè¯æè¿°è‡ªå·±\n- è§‰å¾—è‡ªå·±ä¸ºå•¥èƒ½ç¬¦åˆè¿™ä¸ªå²—ä½\n- xxxè§£å†³äº†ä»€ä¹ˆé—®é¢˜\n- å¦‚ä½•æ­å»ºå‰ç«¯ç›‘æ§ä½“ç³»\n- éšæœºåº”å˜\n\n- äººæ‰çš„å®šä¹‰ï¼Œæƒ³æ‹›ä»€ä¹ˆæ ·çš„äºº\nè¿‡ç¡¬çš„æŠ€æœ¯åŸºç¡€å¤–ï¼Œè¿˜éœ€è¦æœ‰è‰¯å¥½çš„è¡¨è¾¾èƒ½åŠ›ã€å¤„äº‹èƒ½åŠ›ç­‰è½¯å®åŠ›ã€‚\n\n### å·¥å…·\nçŸ­å‘½ä»¤è¡Œå·¥å…·ã€è‡ªåŠ¨åŒ–ä¸Šä¼ éƒ¨ç½²ã€i18nè¯æ¡ç¿»è¯‘ã€eslintæ ¡éªŒç›®å½•æ ¼å¼ã€chromeæ’ä»¶ã€æ¨¡æ¿ç¼–è¯‘ã€axioså°è£…ã€åŸºå»º\n\n## Iteratoræ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ\nteratorï¼ˆè¿­ä»£å™¨ï¼‰æ˜¯ä¸€ç§æ¥å£ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ä¸€ç§è§„èŒƒã€‚ä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½²Iteratoræ¥å£ï¼Œå°±å¯ä»¥å®Œæˆéå†æ“ä½œï¼ˆå³\nä¾æ¬¡å¤„ç†è¯¥æ•°æ®ç»“æ„çš„æ‰€æœ‰æˆå‘˜ï¼‰ã€‚\n\n```js\nconst obj = {\n    [Symbol.iterator]:function(){}\n}\n```\n\nè¿­ä»£å™¨çš„éå†æ–¹æ³•æ˜¯é¦–å…ˆè·å¾—ä¸€ä¸ªè¿­ä»£å™¨çš„æŒ‡é’ˆï¼Œåˆå§‹æ—¶è¯¥æŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€æ¡æ•°æ®ä¹‹å‰ï¼Œæ¥ç€é€šè¿‡è°ƒç”¨ next æ–¹æ³•ï¼Œæ”¹å˜æŒ‡é’ˆçš„æŒ‡å‘ï¼Œè®©å…¶æŒ‡å‘ä¸‹ä¸€æ¡æ•°æ® æ¯ä¸€æ¬¡çš„ \nnext éƒ½ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§\n\n- value ä»£è¡¨æƒ³è¦è·å–çš„æ•°æ®\n- done å¸ƒå°”å€¼ï¼Œfalseè¡¨ç¤ºå½“å‰æŒ‡é’ˆæŒ‡å‘çš„æ•°æ®æœ‰å€¼ï¼Œtrueè¡¨ç¤ºéå†å·²ç»ç»“æŸ\n\n### ä½œç”¨\n1. ä¸ºå„ç§æ•°æ®ç»“æ„ï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€çš„ã€ç®€ä¾¿çš„è®¿é—®æ¥å£ï¼›\n2. ä½¿å¾—æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ—ï¼›\n3. ES6 åˆ›é€ äº†ä¸€ç§æ–°çš„éå†å‘½ä»¤forâ€¦ofå¾ªç¯ï¼ŒIterator æ¥å£ä¸»è¦ä¾›forâ€¦ofæ¶ˆè´¹ã€‚\n\n## æ£€æµ‹å¯¹è±¡ä¸­å­˜åœ¨æŸä¸ªå±æ€§\n- prop in objï¼šè¿”å›å¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºæŒ‡å®šçš„å±æ€§åœ¨æŒ‡å®šçš„å¯¹è±¡æˆ–å…¶åŸå‹é“¾ä¸­ï¼›\n\n- obj.hasOwnProperty(prop)ï¼šè¿”å›å¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºå¯¹è±¡è‡ªèº«å±æ€§ä¸­æ˜¯å¦å…·æœ‰æŒ‡å®šçš„å±æ€§ï¼Œå› æ­¤è¿™ä¸ªæ–¹æ³•ä¼šå¿½ç•¥æ‰é‚£äº›ä»åŸå‹é“¾ä¸Šç»§æ‰¿åˆ°çš„å±æ€§ï¼›\n\n- obj[\"prop\"]ï¼šè¯»å–å±æ€§å€¼ï¼Œå­˜åœ¨åˆ™è¿”å›å€¼ï¼Œå¦åˆ™è¿”å› undefinedï¼›\n\n## JS ä¸­çš„ä¸»è¦æœ‰å“ªå‡ ç±»é”™è¯¯\n- åŠ è½½æ—¶é”™è¯¯ï¼šåŠ è½½webé¡µé¢æ—¶å‡ºç°çš„é”™è¯¯(å¦‚è¯­æ³•é”™è¯¯)ç§°ä¸ºåŠ è½½æ—¶é”™è¯¯ï¼Œå®ƒä¼šåŠ¨æ€ç”Ÿæˆé”™è¯¯ã€‚\n\n- è¿è¡Œæ—¶é”™è¯¯ï¼šç”±äºæ»¥ç”¨HTMLè¯­è¨€ä¸­çš„å‘½ä»¤è€Œå¯¼è‡´çš„é”™è¯¯ã€‚  \n\n- é€»è¾‘é”™è¯¯ï¼šè¿™äº›é”™è¯¯æ˜¯ç”±äºå¯¹å…·æœ‰ä¸åŒæ“ä½œçš„å‡½æ•°æ‰§è¡Œäº†é”™è¯¯çš„é€»è¾‘è€Œå¯¼è‡´çš„\n\n## mulå‡½æ•°ä¹˜æ³•æŒ‡ä»¤\n```js\nfunction mul (x) {  \n return function (y) { \n   return function (z) {   \n     return x * y * z;\n   }\n  }\n}\n```\n\n## jså®ç°æšä¸¾\n> æšä¸¾çš„ç‰¹ç‚¹\n- æšä¸¾å€¼ä¸èƒ½é‡å¤\n- ä¸èƒ½è¢«ä¿®æ”¹\n- switch caseå¯ä»¥ç›´æ¥åˆ¤æ–­\n\n```js\nconst EnumSex = Object.freeze({\n    man: Symbol('ç”·'),\n    woman: Symbol('å¥³')\n})\n```\n\n## æ•°ç»„å’Œé“¾è¡¨çš„åŒºåˆ«\n> æ•°ç»„æ˜¯æˆ‘ä»¬å¹³æ—¶ç”¨çš„æœ€å¤šçš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯æŸ¥è¯¢æ•°æ®å¿«ï¼Œæ’å…¥æ•°æ®æ…¢ï¼ŒæŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(1),æ’å…¥çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n).\n\n> é“¾è¡¨æˆ‘ä»¬å¹³æ—¶ç”¨çš„æ¯”è¾ƒå°‘ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯:æ’å…¥æ•°æ®å¿«ï¼ŒæŸ¥è¯¢æ•°æ®æ…¢ï¼ŒæŸ¥è¯¢çš„æ—¶é—´å¤æ‚åº¦æ˜¯ï¼šO(n)ï¼Œæ’å…¥çš„æ—¶é—´å¤æ‚åº¦æ˜¯ï¼šO(1)ï¼Œå®ƒçš„ç‰¹ç‚¹æ˜¯å’Œæ•°ç»„ç›¸åçš„ï¼›\n\n1. æ•°ç»„æ˜¯å°†å…ƒç´ åœ¨å†…å­˜ä¸­è¿ç»­å­˜æ”¾ã€‚é“¾è¡¨ä¸­çš„å…ƒç´ åœ¨å†…å­˜ä¸­ä¸æ˜¯é¡ºåºå­˜å‚¨çš„ï¼Œè€Œæ˜¯é€šè¿‡å­˜åœ¨å…ƒç´ ä¸­çš„æŒ‡é’ˆè”ç³»åˆ°ä¸€èµ·ã€‚\n\n2. æ•°ç»„å¿…é¡»äº‹å…ˆå®šä¹‰å›ºå®šçš„é•¿åº¦ï¼Œä¸èƒ½é€‚åº”æ•°æ®åŠ¨æ€çš„å¢å‡çš„æƒ…å†µã€‚å½“æ•°æ®å¢åŠ æ—¶ï¼Œå¯èƒ½è¶…å‡ºåŸå…ˆå®šä¹‰çš„å…ƒç´ ä¸ªæ•°ï¼›å½“æ•°æ®å‡å°‘æ—¶ï¼Œé€ æˆå†…å­˜æµªè´¹ï¼›é“¾è¡¨åŠ¨æ€åœ°è¿›è¡Œå­˜å‚¨åˆ†é…ï¼Œå¯ä»¥é€‚åº”æ•°æ®åŠ¨æ€åœ°å¢å‡çš„æƒ…å†µã€‚\n\n### æ—¶é—´å¤æ‚åº¦\n||æ•°ç»„|é“¾è¡¨|\n|æ’å…¥|O(n)æ…¢|O(1)å¿«|\n|åˆ é™¤|O(n)æ…¢|O(1)å¿«|\n|æŸ¥è¯¢|O(1)å¿«|O(n)æ…¢|\n\nå“ˆå¸Œè¡¨(æ•°ç»„é“¾è¡¨)å…·æœ‰è¾ƒå¿«ï¼ˆå¸¸é‡çº§ï¼‰çš„æŸ¥è¯¢é€Ÿåº¦ï¼ŒåŠç›¸å¯¹è¾ƒå¿«çš„å¢åˆ é€Ÿåº¦ï¼Œæ‰€ä»¥å¾ˆé€‚åˆåœ¨æµ·é‡æ•°æ®çš„ç¯å¢ƒä¸­ä½¿ç”¨ã€‚ä¸€èˆ¬å®ç°å“ˆå¸Œè¡¨çš„æ–¹æ³•é‡‡ç”¨â€œæ‹‰é“¾æ³•â€ï¼Œæˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºâ€œé“¾è¡¨çš„æ•°ç»„â€\n\n## å†…å­˜æœ‰å“ªäº›åˆ†åŒºï¼Ÿ\n### æ ˆåŒºï¼ˆstackï¼‰\nç”±ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†é…é‡Šæ”¾ï¼Œå­˜æ”¾å‡½æ•°çš„å‚æ•°å€¼ï¼Œå±€éƒ¨å˜é‡çš„å€¼ç­‰ã€‚å…¶æ“ä½œæ–¹å¼ç±»ä¼¼äºæ•°æ®ç»“æ„ä¸­çš„æ ˆã€‚  \n\n### å †åŒºï¼ˆheapï¼‰\nä¸€èˆ¬ç”±åˆ†é…é‡Šæ”¾ï¼Œè‹¥ä¸é‡Šæ”¾ï¼Œç¨‹åºç»“æŸæ—¶å¯èƒ½ç”±OSå›æ”¶ã€‚æ³¨æ„å®ƒä¸æ•°æ®ç»“æ„ä¸­çš„å †æ˜¯ä¸¤å›äº‹ï¼Œåˆ†é…æ–¹å¼å€’æ˜¯ç±»ä¼¼äºé“¾è¡¨ã€‚  \n\n### å…¨å±€åŒºï¼ˆé™æ€åŒºï¼‰ï¼ˆstaticï¼‰\nå…¨å±€å˜é‡å’Œé™æ€å˜é‡çš„å­˜å‚¨æ˜¯æ”¾åœ¨ä¸€å—çš„ï¼Œåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œé™æ€å˜é‡åœ¨ä¸€å—åŒºåŸŸï¼Œæœªåˆå§‹åŒ–çš„å…¨å±€å˜é‡å’Œæœªåˆå§‹åŒ–çš„é™æ€å˜é‡åœ¨ç›¸é‚»çš„å¦ä¸€å—åŒºåŸŸã€‚ç¨‹åºç»“æŸåç”±ç³»ç»Ÿé‡Šæ”¾ã€‚  \n\n### æ–‡å­—å¸¸é‡åŒº\nå¸¸é‡å­—ç¬¦ä¸²å°±æ˜¯æ”¾åœ¨è¿™é‡Œçš„ã€‚ç¨‹åºç»“æŸåç”±ç³»ç»Ÿé‡Šæ”¾ã€‚\n\n### ç¨‹åºä»£ç åŒº\nå­˜æ”¾å‡½æ•°ä½“çš„äºŒè¿›åˆ¶ä»£ç ã€‚  \n\n## å•å…ƒæµ‹è¯•æ¡†æ¶\n- Unit.js\n- Jasmine\n- Karma\n- Chai \n- AVA\n- Mocha\n- JSUnit\n- QUnit\n- Jest\n\n## BOM å’Œ DOM çš„å…³ç³»\n- BOMå…¨ç§°Browser Object Modelï¼Œå³æµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼Œä¸»è¦å¤„ç†æµè§ˆå™¨çª—å£å’Œæ¡†æ¶ã€‚(location/history/navigator)\n- DOMå…¨ç§°Document Object Modelï¼Œå³æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼Œæ˜¯ HTML å’ŒXML çš„åº”ç”¨ç¨‹åºæ¥å£ï¼ˆAPIï¼‰ï¼Œéµå¾ªW3C çš„æ ‡å‡†ï¼Œæ‰€æœ‰æµè§ˆå™¨å…¬å…±éµå®ˆçš„æ ‡å‡†ã€‚\n\nBOMåŒ…å«äº†DOM(å¯¹è±¡)ï¼Œæµè§ˆå™¨æä¾›å‡ºæ¥ç»™äºˆè®¿é—®çš„æ˜¯BOMå¯¹è±¡ï¼Œä»BOMå¯¹è±¡å†è®¿é—®åˆ°DOMå¯¹è±¡ï¼Œä»è€Œjså¯ä»¥æ“ä½œæµè§ˆå™¨ä»¥åŠæµè§ˆå™¨è¯»å–åˆ°çš„æ–‡æ¡£ã€‚\n\n## jså®ç°Map(æ•°ç»„å­˜æ”¾å¯¹è±¡å®ç°api)ï¼Œreduceæ–¹æ³•\n```js\n// å½’å¹¶æ–¹æ³•\nconst reduceHelper = (f, acc, arr) => {\n  if (arr.length === 0) return acc\n  const [head, ...tail] = arr\n  return reduceHelper(f, f(acc, head), tail)\n}\n\nArray.prototype.fakeReduce = function (fn, initialValue) {\n  return reduceHelper(fn, initialValue, this)\n}\n```\n\n## reduceå®ç°æ•°ç»„map\n```js\n\nArray.prototype._map = function(fn, thisArg) {\n  const result = [];\n  this.reduce((prev, curr, index, array) => {\n    result[index] = fn.call(thisArg, array[index], index, array);\n  }, 0)\n  return result;\n}\n```\n\n## Label çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ\nlabel æ ‡ç­¾æ¥å®šä¹‰è¡¨å•æ§åˆ¶é—´çš„å…³ç³»ï¼Œå½“ç”¨æˆ·é€‰æ‹©è¯¥æ ‡ç­¾æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°†ç„¦ç‚¹è½¬åˆ°å’Œæ ‡ç­¾ç›¸å…³çš„è¡¨å•æ§ä»¶ä¸Šã€‚\n```html\n<label for=\"Name\">Number:</label>\n<input type=â€œtextâ€œ name=\"Name\" id=\"Name\"/>\n```\n\n## Canvas å’Œ SVG æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n> Canvas æ˜¯ä¸€ç§é€šè¿‡ JavaScript æ¥ç»˜åˆ¶ 2D å›¾å½¢çš„æ–¹æ³•ã€‚Canvas æ˜¯é€åƒç´ æ¥è¿›è¡Œæ¸²æŸ“çš„ï¼Œå› æ­¤å½“æˆ‘ä»¬å¯¹ Canvas è¿›è¡Œç¼©æ”¾æ—¶ï¼Œä¼šå‡ºç°é”¯é½¿æˆ–è€…å¤±çœŸçš„æƒ…å†µã€‚ä¾èµ–äºåƒç´ ï¼Œæ— æ³•é«˜æ•ˆä¿çœŸï¼Œç”»å¸ƒè¾ƒå¤§æ—¶å€™æ€§èƒ½è¾ƒ\nä½ã€‚\n \n> SVG æ˜¯ä¸€ç§ä½¿ç”¨ XML æè¿° 2D å›¾å½¢çš„è¯­è¨€ã€‚SVG åŸºäº XMLï¼Œè¿™æ„å‘³ç€ SVG DOM ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯å¯ç”¨çš„ã€‚æˆ‘ä»¬å¯ä»¥ä¸ºæŸä¸ªå…ƒç´ é™„åŠ  JavaScript äº‹ä»¶ç›‘å¬å‡½\næ•°ã€‚å¹¶ä¸” SVG ä¿å­˜çš„æ˜¯å›¾å½¢çš„ç»˜åˆ¶æ–¹æ³•ï¼Œå› æ­¤å½“ SVG å›¾å½¢ç¼©æ”¾æ—¶å¹¶ä¸ä¼šå¤±çœŸã€‚svg:domå½¢å¼ï¼Œæ¶‰åŠåˆ°åŠ¨ç”»æ—¶å€™éœ€è¦æ›´æ–°domï¼Œæ€§èƒ½è¾ƒä½ã€‚\n\n## ç½‘é¡µéªŒè¯ç æ˜¯å¹²å˜›çš„ï¼Œæ˜¯ä¸ºäº†è§£å†³ä»€ä¹ˆå®‰å…¨é—®é¢˜ï¼Ÿ\n1. åŒºåˆ†ç”¨æˆ·æ˜¯è®¡ç®—æœºè¿˜æ˜¯äººçš„å…¬å…±å…¨è‡ªåŠ¨ç¨‹åºã€‚å¯ä»¥é˜²æ­¢æ¶æ„ç ´è§£å¯†ç ã€åˆ·ç¥¨ã€è®ºå›çŒæ°´\n2. æœ‰æ•ˆé˜²æ­¢é»‘å®¢å¯¹æŸä¸€ä¸ªç‰¹å®šæ³¨å†Œç”¨æˆ·ç”¨ç‰¹å®šç¨‹åºæš´åŠ›ç ´è§£æ–¹å¼è¿›è¡Œä¸æ–­çš„ç™»é™†å°è¯•\n\n## æ¸è¿›å¢å¼ºå’Œä¼˜é›…é™çº§çš„å®šä¹‰\n- æ¸è¿›å¢å¼ºï¼šé’ˆå¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨è¿›è¡Œæ„å»ºé¡µé¢ï¼Œä¿è¯æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œç„¶åå†é’ˆå¯¹é«˜çº§æµè§ˆå™¨è¿›è¡Œæ•ˆæœã€äº¤äº’ç­‰æ”¹è¿›å’Œè¿½åŠ åŠŸèƒ½è¾¾åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚\n- ä¼˜é›…é™çº§ï¼šä¸€å¼€å§‹å°±æ ¹æ®é«˜ç‰ˆæœ¬æµè§ˆå™¨æ„å»ºå®Œæ•´çš„åŠŸèƒ½ï¼Œç„¶åå†é’ˆå¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨è¿›è¡Œå…¼å®¹ã€‚\n\n> æ— å¤´æµè§ˆå™¨ï¼ˆHeadless browserï¼‰æŒ‡æ²¡æœ‰ç”¨æˆ·å›¾å½¢ç•Œé¢çš„(GUI)çš„æµè§ˆå™¨ï¼Œç›®å‰å¹¿æ³›è¿ç”¨äºwebçˆ¬è™«å’Œè‡ªåŠ¨åŒ–æµ‹è¯•ä¸­ã€‚\n\n## Window.getComputedStyle()\n`Window.getComputedStyle()`æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡åœ¨åº”ç”¨æ´»åŠ¨æ ·å¼è¡¨å¹¶è§£æè¿™äº›å€¼å¯èƒ½åŒ…å«çš„ä»»ä½•åŸºæœ¬è®¡ç®—åæŠ¥å‘Šå…ƒç´ çš„æ‰€æœ‰CSSå±æ€§çš„å€¼ã€‚ ç§æœ‰çš„CSSå±æ€§å€¼å¯ä»¥é€šè¿‡å¯¹è±¡æä¾›çš„APIæˆ–é€šè¿‡ç®€å•åœ°ä½¿ç”¨CSS\nå±æ€§åç§°è¿›è¡Œç´¢å¼•æ¥è®¿é—®ã€‚\n```js\nlet elem1 = document.getElementById(\"elemId\");\nlet style = window.getComputedStyle(elem1, null);\n\n// å®ƒç­‰ä»·äº\n// let style = document.defaultView.getComputedStyle(elem1, null);\n```\n\n## å¦‚ä½•å–æ¶ˆfetchè¯·æ±‚\nFetch APIå·²ç»æˆä¸ºç°åœ¨æµè§ˆå™¨å¼‚æ­¥ç½‘ç»œè¯·æ±‚çš„æ ‡å‡†æ–¹æ³•ï¼Œä½†Fetchä¹Ÿæ˜¯æœ‰å¼Šç«¯çš„ï¼Œæ¯”å¦‚ï¼š Fetchè¿˜æ²¡æœ‰æ–¹æ³•ç»ˆæ­¢ä¸€ä¸ªè¯·æ±‚ï¼Œè€Œä¸”Fetchæ— æ³•æ£€æµ‹ä¸Šä¼ è¿›åº¦ã€‚\n### æµç¨‹\n- åˆ›å»ºä¸€ä¸ª AbortController å®ä¾‹\n- è¯¥å®ä¾‹å…·æœ‰ signal å±æ€§\n- å°† signal ä¼ é€’ç»™ fetch option çš„ signal\n- è°ƒç”¨ AbortController çš„ abort å±æ€§æ¥å–æ¶ˆæ‰€æœ‰ä½¿ç”¨è¯¥ä¿¡å·çš„ fetchã€‚\n\n```js\nconst controller = new AbortController();\nconst { signal } = controller;\n\nfetch(\"http://localhost:8000\", { signal }).then(response => {\n    console.log(`Request 1 is complete!`);\n}).catch(e => {\n   if(e.name === \"AbortError\") {\n        // We know it's been canceled!\n    }\n    console.warn(`Fetch 1 error: ${e.message}`);\n});\n\n// Abort request\ncontroller.abort();\n```\n\n## åè®®ç›¸å¯¹URL\nå¦‚æœç”¨æˆ·å½“å‰è®¿é—®çš„é¡µé¢æ˜¯é€šè¿‡ HTTPS åè®®æ¥æµè§ˆçš„ï¼Œé‚£ä¹ˆç½‘é¡µä¸­çš„èµ„æºä¹Ÿåªèƒ½é€šè¿‡ HTTPS åè®®æ¥å¼•ç”¨ï¼Œå¦åˆ™æµè§ˆå™¨ä¼šå‡ºç°è­¦å‘Šä¿¡æ¯ï¼Œä¸åŒæµè§ˆå™¨è­¦å‘Šä¿¡æ¯å±•ç°å½¢å¼\nä¸åŒã€‚\n\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥çœç•¥ URL çš„åè®®å£°æ˜ï¼Œçœç•¥åæµè§ˆå™¨ç…§æ ·å¯ä»¥æ­£å¸¸å¼•ç”¨ç›¸åº”çš„èµ„æºï¼Œè¿™é¡¹è§£å†³æ–¹æ¡ˆç§°ä¸ºprotocol-relative URLï¼Œæš‚ä¸”å¯è¯‘ä½œåè®®ç›¸\nå¯¹ URLã€‚\n\n## MVCæ¨¡å¼\n![mvc](http://cdn.mydearest.cn/blog/images/mvc.png)\n\nç”¨æˆ·æŠŠå¯¹Viewçš„æ“ä½œäº¤ç»™äº†Controllerå¤„ç†ï¼Œåœ¨Controllerä¸­å“åº”Viewçš„äº‹ä»¶è°ƒç”¨Modelçš„æ¥å£å¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼Œä¸€æ—¦Modelå‘ç”Ÿå˜åŒ–ä¾¿é€šçŸ¥ç›¸å…³è§†å›¾è¿›è¡Œæ›´æ–°ã€‚\n\nMVCæ¨¡å¼å¯ä»¥è¿™æ ·ç†è§£ã€‚å°†htmlçœ‹æˆview;jsçœ‹æˆcontrollerï¼Œè´Ÿè´£å¤„ç†ç”¨æˆ·ä¸åº”ç”¨çš„äº¤äº’ï¼Œå“åº”å¯¹viewçš„æ“ä½œï¼ˆå¯¹äº‹ä»¶çš„ç›‘å¬ï¼‰ï¼Œè°ƒç”¨Modelå¯¹æ•°æ®è¿›è¡Œæ“ä½œï¼Œå®Œ\næˆmodelä¸viewçš„åŒæ­¥ï¼ˆæ ¹æ®modelçš„æ”¹å˜ï¼Œé€šè¿‡é€‰æ‹©å™¨å¯¹viewè¿›è¡Œæ“ä½œï¼‰;å°†jsçš„ajaxå½“åšModelï¼Œä¹Ÿå°±æ˜¯æ•°æ®å±‚ï¼Œé€šè¿‡ajaxä»æœåŠ¡å™¨è·å–æ•°æ®ã€‚\n\n\n## MVVMæ¨¡å¼\n![mvvm](http://cdn.mydearest.cn/blog/images/mvvm.png)\n\nMVVMä¸MVCä¸¤è€…ä¹‹é—´æœ€å¤§çš„åŒºåˆ«å°±æ˜¯ï¼šMVVMå®ç°äº†å¯¹Viewå’ŒModelçš„è‡ªåŠ¨åŒæ­¥ï¼Œä¹Ÿå°±æ˜¯å½“Modelçš„å±æ€§æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬ä¸ç”¨å†è‡ªå·±æ‰‹åŠ¨æ“ä½œDomå…ƒç´ æ¥æ”¹å˜Viewçš„å˜åŒ–ï¼Œ\nè€Œæ˜¯æ”¹å˜å…¶å±æ€§åï¼Œè¯¥å±æ€§å¯¹åº”çš„Viewå±‚æ•°æ®ä¼šè‡ªåŠ¨æ”¹å˜ã€‚\n\n- Modelä»£è¡¨æ•°æ®æ¨¡å‹ï¼Œä¹Ÿå¯ä»¥åœ¨Modelä¸­å®šä¹‰æ“ä½œæ•°æ®å˜åŒ–çš„ä¸šåŠ¡é€»è¾‘ï¼›\n- Viewä»£è¡¨UIè§†å›¾ï¼Œå®ƒè´Ÿè´£å°†æ•°æ®æ¨¡å‹è½¬åŒ–æˆUIå±•ç°å‡ºæ¥ï¼›\n- ViewModelç›‘å¬Modelä¸­æ•°æ®çš„æ”¹å˜å’Œæ§åˆ¶Viewå±‚çš„å±•ç°ï¼›\n\n### ä¸åŒç©ºæ ¼ç¬¦åˆçš„åŒºåˆ«\n- &nbsp; åŠè§’çš„ä¸æ–­è¡Œçš„ç©ºç™½æ ¼ï¼ˆæ¨èä½¿ç”¨ï¼‰\n\n- &ensp; åŠè§’çš„ç©ºæ ¼\n\n- &emsp; å…¨è§’çš„ç©ºæ ¼\n\n_è¯¦ç»†çš„å«ä¹‰ï¼š_\n\n1. `&nbsp;`ï¼šè¿™æ˜¯æˆ‘ä»¬ä½¿ç”¨æœ€å¤šçš„ç©ºæ ¼ï¼Œä¹Ÿå°±æ˜¯æŒ‰ä¸‹spaceé”®äº§ç”Ÿçš„ç©ºæ ¼ã€‚åœ¨HTMLä¸­ï¼Œå¦‚æœä½ ç”¨ç©ºæ ¼é”®äº§ç”Ÿæ­¤ç©ºæ ¼ï¼Œç©ºæ ¼æ˜¯ä¸ä¼šç´¯åŠ çš„ï¼ˆåªç®—1ä¸ªï¼‰ã€‚è¦ä½¿ç”¨htmlå®ä½“è¡¨ç¤ºæ‰å¯ç´¯åŠ ã€‚è¯¥ç©ºæ ¼å æ®å®½åº¦å—å­—ä½“å½±å“æ˜æ˜¾è€Œå¼ºçƒˆã€‚åœ¨inline-blockå¸ƒå±€ä¸­ä¼šæäº›å°ç ´åï¼Œåœ¨ä¸¤ç«¯å¯¹é½å¸ƒå±€ä¸­åˆæ˜¯ä¸å¯å°‘çš„å…ƒç´ ã€‚\n\n2. `&ensp;`ï¼šæ­¤ç©ºæ ¼æœ‰ä¸ªç›¸å½“ç¨³å¥çš„ç‰¹æ€§ï¼Œå°±æ˜¯å…¶å æ®çš„å®½åº¦æ­£å¥½æ˜¯1/2ä¸ªä¸­æ–‡å®½åº¦ï¼Œè€Œä¸”åŸºæœ¬ä¸Šä¸å—å­—ä½“å½±å“ã€‚\n\n3. `&emsp;`ï¼šæ­¤ç©ºæ ¼ä¹Ÿæœ‰ä¸ªç›¸å½“ç¨³å¥çš„ç‰¹æ€§ï¼Œå°±æ˜¯å…¶å æ®çš„å®½åº¦æ­£å¥½æ˜¯1ä¸ªä¸­æ–‡å®½åº¦ï¼Œè€Œä¸”åŸºæœ¬ä¸Šä¸å—å­—ä½“å½±å“ã€‚\n\n### æµè§ˆå™¨ç§æœ‰å±æ€§\n|-webkit-|-moz-|-ms-|-o-|\n|chrome,safari|firefox||||\n\n### CSSå˜é‡\nè‡ªä»CSS3ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨CSSä¸­å®šä¹‰å˜é‡ï¼Œä»è€Œä½¿å¾—é¡µé¢çš„æ ·å¼æ›´ç»Ÿä¸€ã€‚\n```css\n/* å£°æ˜å…¨å±€å˜é‡ */\n:root{\n    --color-main-font: #303133;\n    --color-normal-font: #606266;\n    --color-secondary-font: #909399;\n    --size-main-title: 20px;\n    --size-title: 18px;\n    --size-second-title: 16px;\n    --size-body: 14px;\n    --size-tip: 12px;\n}\n/* å£°æ˜å±€éƒ¨å˜é‡ */\ndiv{\n    --color: green;\n}\n/* ä½¿ç”¨å˜é‡ */\n.example{\n    color:var(--color-main-font);\n    /* å¦‚æœå˜é‡ä¸å­˜åœ¨å°±ä¼šä½¿ç”¨é€—å·åé¢çš„å€¼ */\n    font-size:var(--color-body,20px);\n}\n```\næ³¨ï¼š å½“æœ‰é‡å¤å˜é‡åçš„æ—¶å€™ï¼Œéµå¾ªä¼˜å…ˆçº§è§„åˆ™è¦†ç›–ï¼\n\n#### åª’ä½“æŸ¥è¯¢(@media)\n```csss\n@media only screen and (max-width: 600px) {\n    .example {background: red;}\n}\n```\n\næˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨HTMLæ–‡ä»¶ä¸­é€šè¿‡åª’ä½“æŸ¥è¯¢åˆ¤æ–­æ˜¯å¦å¼•å…¥ä¸€ä¸ªCSS\n\n```html\n<link rel=\"stylesheet\" media=\"(min-width:480px)\" href=\"mystylesheet.css\">\n```\n\n#### è‡ªå®šä¹‰å­—ä½“(@font-face)\n```css\n@font-face{\n    font-family:'myFont';\n    src:url('./font/example.svg')format('svg'),\n        url('./font/example.ttf')format('truetype');\n}\n\n/* å¯ä»¥ç›´æ¥å°†ä¸Šé¢å®šä¹‰å¥½çš„çš„ `my-font` ä½œä¸ºå­—ä½“ */\n.my-font{\n    font-family: 'myFont';\n}\n/* å¦‚æœæ˜¯å°å›¾æ ‡ï¼Œå¯ä»¥ä½œä¸ºä¼ªå…ƒç´ æ’å…¥åˆ°é¡µé¢ä¸­ */\n.icon-back:before{\n    content:'\\800';\n}\n\n/* <span class=\"my-font icon-back\"></span> */\n```\n\n### è£…é¥°å™¨çš„åŸç†\nè¯­æ³•ç³–ï¼Œå®åˆ™è°ƒç”¨Object.definePropertyï¼Œå¯ä»¥æ·»åŠ ã€ä¿®æ”¹å¯¹è±¡å±æ€§\n\n### å †æ ˆçš„åŒºåˆ«\n\n- ç”³è¯·æ–¹å¼\nå†…å­˜ä¸­çš„å †å’Œæ ˆç¬¬ä¸€ä¸ªåŒºåˆ«å°±æ˜¯ç”³è¯·æ–¹å¼çš„ä¸åŒï¼šæ ˆæ˜¯ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ç©ºé—´çš„ï¼Œè€Œå †åˆ™æ˜¯ç¨‹åºå‘˜æ ¹æ®éœ€è¦è‡ªå·±ç”³è¯·çš„ç©ºé—´ã€‚ç”±äºæ ˆä¸Šçš„ç©ºé—´æ˜¯è‡ªåŠ¨åˆ†é…è‡ªåŠ¨å›æ”¶çš„ï¼Œæ‰€ä»¥æ ˆä¸Šçš„æ•°æ®çš„ç”Ÿå­˜å‘¨æœŸåªæ˜¯åœ¨å‡½æ•°çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œ\nè¿è¡Œåå°±é‡Šæ”¾æ‰ï¼Œä¸å¯ä»¥å†è®¿é—®ã€‚è€Œå †ä¸Šçš„æ•°æ®åªè¦ç¨‹åºå‘˜ä¸é‡Šæ”¾ç©ºé—´ï¼Œå°±ä¸€ç›´å¯ä»¥è®¿é—®åˆ°ï¼Œä¸è¿‡ç¼ºç‚¹æ˜¯ä¸€æ—¦å¿˜è®°é‡Šæ”¾ä¼šé€ æˆå†…å­˜æ³„éœ²ã€‚\nç”³è¯·æ•ˆç‡çš„æ¯”è¾ƒï¼šæ ˆç”±ç³»ç»Ÿè‡ªåŠ¨åˆ†é…ï¼Œé€Ÿåº¦è¾ƒå¿«ã€‚ä½†ç¨‹åºå‘˜æ˜¯æ— æ³•æ§åˆ¶çš„ã€‚å †æ˜¯ç”±newåˆ†é…çš„å†…å­˜ï¼Œä¸€èˆ¬é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œè€Œä¸”å®¹æ˜“äº§ç”Ÿå†…å­˜ç¢ç‰‡ï¼Œä¸è¿‡ç”¨èµ·æ¥æœ€æ–¹ä¾¿ã€‚\n\n- ç”³è¯·å¤§å°çš„é™åˆ¶ï¼š\næ ˆï¼šåœ¨Windowsä¸‹ï¼Œæ ˆæ˜¯å‘ä½åœ°å€æ‰©å±•çš„æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸€å—è¿ç»­çš„å†…å­˜çš„åŒºåŸŸã€‚è¿™å¥è¯çš„æ„æ€æ˜¯æ ˆé¡¶çš„åœ°å€å’Œæ ˆçš„æœ€å¤§å®¹é‡æ˜¯ç³»ç»Ÿé¢„å…ˆè§„å®šå¥½çš„ï¼Œåœ¨Windowsä¸‹ï¼Œæ ˆçš„å¤§å°æ˜¯2Mï¼ˆä¹Ÿæœ‰çš„è¯´æ˜¯1Mï¼Œæ€»ä¹‹æ˜¯ä¸€ä¸ªç¼–è¯‘æ—¶å°±ç¡®\nå®šçš„å¸¸æ•°ï¼‰ï¼Œå¦‚æœç”³è¯·çš„ç©ºé—´è¶…è¿‡æ ˆçš„å‰©ä½™ç©ºé—´æ—¶ï¼Œå°†æç¤ºoverflowã€‚å› æ­¤ï¼Œèƒ½ä»æ ˆè·å¾—çš„ç©ºé—´è¾ƒå°ã€‚\nå †ï¼šå †æ˜¯å‘é«˜åœ°å€æ‰©å±•çš„æ•°æ®ç»“æ„ï¼Œæ˜¯ä¸è¿ç»­çš„å†…å­˜åŒºåŸŸã€‚è¿™æ˜¯ç”±äºç³»ç»Ÿæ˜¯ç”¨é“¾è¡¨æ¥å­˜å‚¨ç©ºé—²å†…å­˜åœ°å€çš„ï¼Œè‡ªç„¶æ˜¯ä¸è¿ç»­çš„ï¼Œè€Œé“¾è¡¨çš„éå†æ–¹å‘æ˜¯ç”±ä½åœ°å€å‘é«˜åœ°å€ã€‚å †çš„å¤§å°å—é™äºè®¡ç®—æœºç³»ç»Ÿä¸­æœ‰æ•ˆçš„è™šæ‹Ÿå†…å­˜ã€‚ç”±\næ­¤å¯è§ï¼Œå †è·å¾—çš„ç©ºé—´æ¯”è¾ƒçµæ´»ï¼Œä¹Ÿæ¯”è¾ƒå¤§ã€‚\n\n### ä¸ºä»€ä¹ˆä¸è¦æ‰©å±•jså†…ç½®å¯¹è±¡\nå¦‚æœæµè§ˆå™¨æˆ–javascriptæœ¬èº«å°±ä¼šå®ç°è¿™ä¸ªæ–¹æ³•ï¼Œè€Œä¸”å’Œä½ æ‰©å±•çš„å®ç°æœ‰ä¸ä¸€è‡´çš„è¡¨ç°ã€‚åˆ°æ—¶å€™ä½ çš„javascriptä»£ç å¯èƒ½å·²ç»åœ¨æ— æ•°ä¸ªé¡µé¢ä¸­æ‰§è¡Œäº†æ•°å¹´ï¼Œè€Œæµè§ˆå™¨çš„å®ç°å¯¼è‡´æ‰€æœ‰ä½¿ç”¨æ‰©å±•åŸå‹çš„ä»£ç éƒ½å´©æºƒã€‚\n\n### å¯å˜ (mutable) å’Œä¸å˜ (immutable) å¯¹è±¡çš„åŒºåˆ«\n- Mutableå¯¹è±¡ï¼š\nåœ¨JavaScriptä¸­ï¼Œå¯¹è±¡æ˜¯å¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œå…¶ä¼˜ç‚¹åœ¨äºé¢‘ç¹åœ°ä¿®æ”¹å¯¹è±¡æ—¶éƒ½æ˜¯åœ¨åŸå¯¹è±¡çš„åŸºç¡€ä¸Šä¿®æ”¹ï¼Œå¹¶ä¸éœ€è¦é‡æ–°åˆ›å»ºï¼Œè¿™æ ·å°±å¯ä»¥æœ‰æ•ˆåœ°åˆ©ç”¨å†…å­˜ï¼Œä¸ä¼šé€ æˆå†…å­˜ç©ºé—´çš„æµªè´¹\n\n- Immutableå¯¹è±¡ï¼š(string, number)\næ¯æ¬¡ä¿®æ”¹ä¸€ä¸ªimmutableå¯¹è±¡æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ä¸å¯å˜å¯¹è±¡ï¼Œåœ¨æ–°å¯¹è±¡ä¸Šçš„æ“ä½œä¸ä¼šå½±å“åˆ°åŸå¯¹è±¡çš„æ•°æ®\n\n- åŒºåˆ«ï¼š\nImmutableå¯¹è±¡åœ¨ä¿®æ”¹æ•°æ®æ—¶å¹¶ä¸ä¼šå¤åˆ¶ä¸€æ•´ä»½æ•°æ®ï¼Œè€Œæ˜¯å°†å˜åŒ–çš„èŠ‚ç‚¹ä¸æœªå˜åŒ–çš„èŠ‚ç‚¹çš„çˆ¶å­å…³ç³»è½¬ç§»åˆ°ä¸€ä¸ªæ–°èŠ‚ç‚¹ä¸Š(ç»“æ„å…±äº«)ï¼Œè€ŒMutableåœ¨å¤åˆ¶æ—¶æ˜¯â€œå…¨é‡â€ã€‚Immutableå¯¹è±¡éœ€è¦é€šè¿‡setå’Œgetæ¥å¯¹æ•°æ®è¿›è¡Œ\nè¯»å’Œå†™ã€‚\n\n#### ä¸å¯å˜ä¼˜ç‚¹\n- é™ä½ Mutable å¸¦æ¥çš„å¤æ‚åº¦\n- èŠ‚çœå†…å­˜ç©ºé—´\n- æ–¹ä¾¿å®ç°æ’¤é”€é‡åšåŠŸèƒ½\n- æ‹¥æŠ±å‡½æ•°å¼ç¼–ç¨‹\n\n#### ä¸å¯å˜ç¼ºç‚¹\n- å®¹æ˜“ä¸åŸç”Ÿå¯¹è±¡ææ··\n\n### é˜²æ­¢é‡å¤å‘é€ajaxè¯·æ±‚\n1. ç‚¹å‡»æŒ‰é’®ådisabled\n2. å‡½æ•°èŠ‚æµ\n3. abortä¸Šä¸€ä¸ªè¯·æ±‚\n\n### Ajaxå’ŒFetchåŒºåˆ«\n- fetchä¼˜ç‚¹\nè¯­æ³•ç®€æ´ï¼Œæ›´åŠ è¯­ä¹‰åŒ–\nåŸºäºæ ‡å‡† Promise å®ç°ï¼Œæ”¯æŒ async/await\nåŒæ„æ–¹ä¾¿ï¼Œä½¿ç”¨ isomorphic-fetch\n\n- ajaxæ˜¯ä½¿ç”¨XMLHttpRequestå¯¹è±¡å‘èµ·çš„ï¼Œä½†æ˜¯ç”¨èµ·æ¥å¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥ES6æ–°è§„èŒƒå°±æœ‰äº†fetchï¼Œfetchå‘ä¸€ä¸ªè¯·æ±‚ä¸ç”¨åƒajaxé‚£æ ·å†™ä¸€å¤§å †ä»£ç ã€‚\n- ä½¿ç”¨fetchæ— æ³•å–æ¶ˆä¸€ä¸ªè¯·æ±‚ï¼Œè¿™æ˜¯å› ä¸ºfetchåŸºäºPromiseï¼Œè€ŒPromiseæ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚\n- åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œfetchä¸ä¼šæ¥å—æˆ–è€…å‘é€cookies\n- fetchæ²¡æœ‰åŠæ³•åŸç”Ÿç›‘æµ‹è¯·æ±‚çš„è¿›åº¦ï¼Œè€ŒXMLHttpRequestå¯ä»¥(xhr.upload.onprogress)\n- fetchåªå¯¹ç½‘ç»œè¯·æ±‚æŠ¥é”™ï¼Œå¯¹400ï¼Œ500éƒ½å½“åšæˆåŠŸçš„è¯·æ±‚ï¼Œéœ€è¦å°è£…å»å¤„ç†\n- fetchç”±äºæ˜¯ES6è§„èŒƒï¼Œå…¼å®¹æ€§ä¸Šæ¯”ä¸ä¸ŠXMLHttpRequest\n\n### setTimeout() çš„ç¬¬äºŒä¸ªå‚æ•°çš„æœ€å°å€¼ä¸å¾—å°äº4æ¯«ç§’ï¼Œå¦‚æœä½äºè¿™ä¸ªå€¼ï¼Œåˆ™é»˜è®¤æ˜¯4æ¯«ç§’\n\n### é¢å‘è¿‡ç¨‹ã€é¢å‘å¯¹è±¡\né¢å‘å¯¹è±¡ç‰¹ç‚¹ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€\n- é¢å‘è¿‡ç¨‹å°±æ˜¯åˆ†æå‡ºè§£å†³é—®é¢˜æ‰€éœ€è¦çš„æ­¥éª¤ï¼Œç„¶åç”¨å‡½æ•°æŠŠè¿™äº›æ­¥éª¤ä¸€æ­¥ä¸€æ­¥å®ç°ã€‚\n- é¢å‘å¯¹è±¡æ˜¯æŠŠæ„æˆé—®é¢˜äº‹åŠ¡åˆ†è§£æˆå„ä¸ªå¯¹è±¡ï¼Œå»ºç«‹å¯¹è±¡çš„ç›®çš„ä¸æ˜¯ä¸ºäº†å®Œæˆä¸€ä¸ªæ­¥éª¤ï¼Œè€Œæ˜¯ä¸ºäº†æå™æŸä¸ªäº‹ç‰©åœ¨æ•´ä¸ªè§£å†³é—®é¢˜çš„æ­¥éª¤ä¸­çš„è¡Œä¸ºã€‚é¢å‘å¯¹è±¡æ˜¯ä»¥åŠŸèƒ½æ¥åˆ’åˆ†é—®é¢˜ï¼Œè€Œä¸æ˜¯æ­¥éª¤\n\né¢å‘å¯¹è±¡æ€æƒ³ï¼š\nåŸºæœ¬æ€æƒ³æ˜¯ä½¿ç”¨å¯¹è±¡ï¼Œç±»ï¼Œç»§æ‰¿ï¼Œå°è£…ç­‰åŸºæœ¬æ¦‚å¿µæ¥è¿›è¡Œç¨‹åºè®¾è®¡ã€‚\nä¼˜ç‚¹\n1. æ˜“ç»´æŠ¤\né‡‡ç”¨é¢å‘å¯¹è±¡æ€æƒ³è®¾è®¡çš„ç»“æ„ï¼Œå¯è¯»æ€§é«˜ï¼Œç”±äºç»§æ‰¿çš„å­˜åœ¨ï¼Œå³ä½¿æ”¹å˜éœ€æ±‚ï¼Œé‚£ä¹ˆç»´æŠ¤ä¹Ÿåªæ˜¯åœ¨å±€éƒ¨æ¨¡å—ï¼Œæ‰€ä»¥ç»´æŠ¤èµ·æ¥æ˜¯éå¸¸æ–¹ä¾¿å’Œè¾ƒä½æˆæœ¬çš„\n2. æ˜“æ‰©å±•\nå¼€å‘å·¥ä½œçš„é‡ç”¨æ€§ã€ç»§æ‰¿æ€§é«˜ï¼Œé™ä½é‡å¤å·¥ä½œé‡ã€‚ç¼©çŸ­äº†å¼€å‘å‘¨æœŸ\n\n### 100 * 100 çš„ Canvas å å†…å­˜å¤šå¤§\næˆ‘ä»¬åœ¨å®šä¹‰é¢œè‰²çš„æ—¶å€™å°±æ˜¯ä½¿ç”¨ rgba(r,g,b,a) å››ä¸ªç»´åº¦æ¥è¡¨ç¤ºï¼Œè€Œä¸”æ¯ä¸ªåƒç´ å€¼å°±æ˜¯ç”¨åå…­ä½ 00-ff è¡¨ç¤ºï¼Œå³æ¯ä¸ªç»´åº¦çš„èŒƒå›´æ˜¯ 0~255ï¼Œå³ 2^8 ä½ï¼Œå³ 1 byte, ä¹Ÿå°±æ˜¯ Uint8 èƒ½è¡¨ç¤ºçš„èŒƒå›´ã€‚\næ‰€ä»¥ 100 * 100 canvas å çš„å†…å­˜æ˜¯ 100 * 100 * 4 bytes = 40,000 bytes\n\n### å®ç°Object.create\n```js\nfunction create(proto) {\n  function Fn() {}\n  Fn.prototype = proto\n  Fn.prototype.constructor = Fn\n  return new Fn()\n}\n```\n\n### 10è¿›åˆ¶è½¬æ¢\n```js\nfunction convert(number, base = 2) {\n  let rem, res = '', digits = '0123456789ABCDEF', stack = [];\n\n  while (number) {\n    rem = number % base;\n    stack.push(rem);\n\n    number = Math.floor(number / base);\n  }\n\n  while (stack.length) {\n    res += digits[stack.pop()].toString();\n  }\n  \n  return res;\n}\n```\n\n### ç›¸é‚»çš„ä¸¤ä¸ªinline-blockèŠ‚ç‚¹å‡ºç°é—´éš”çš„åŸå› ä»¥åŠè§£å†³æ–¹æ³•\nåŸå› ï¼šå…ƒç´ è¢«å½“æˆè¡Œå†…å…ƒç´ æ’ç‰ˆçš„æ—¶å€™ï¼ŒåŸæ¥HTMLä»£ç ä¸­çš„å›è½¦æ¢è¡Œè¢«è½¬æˆä¸€ä¸ªç©ºç™½ç¬¦ï¼Œåœ¨å­—ä½“ä¸ä¸º0çš„æƒ…å†µä¸‹ï¼Œç©ºç™½ç¬¦å æ®ä¸€å®šå®½åº¦ï¼Œæ‰€ä»¥inline-blockçš„å…ƒç´ ä¹‹é—´\nå°±å‡ºç°äº†ç©ºéš™ã€‚è¿™äº›å…ƒç´ ä¹‹é—´çš„é—´è·ä¼šéšç€å­—ä½“çš„å¤§å°è€Œå˜åŒ–ï¼Œå½“è¡Œå†…å…ƒç´ font-size:16pxæ—¶ï¼Œé—´è·ä¸º8pxã€‚\n\nè§£å†³æ–¹æ¡ˆï¼š\n1. ç»™çˆ¶çº§å…ƒç´ è®¾ç½®font-sizeï¼š 0ï¼›å­å…ƒç´ è®¾ç½®ç›¸åº”çš„font-size\n2. æ”¹å˜ä¹¦å†™æ–¹å¼(å»æ‰ç©ºæ ¼)\n3. marginè´Ÿå€¼å’Œå­—ä½“å¤§å°æœ‰å…³ä¸æ¨è\n4. è®¾ç½®çˆ¶å…ƒç´ ï¼Œdisplay:tableå’Œword-spacing:0\n\n\n### Promise.reject\n```js\nPromise.reject(2).catch(e => e).then(d => {\n  console.log(d);\n});\n// 2\n```\n\n### å­—ç¬¦ç¼–ç \n- ASCIIï¼šç¼–ç çš„è§„èŒƒæ ‡å‡†\n- Unicodeï¼šå°†å…¨\nä¸–ç•Œæ‰€æœ‰çš„å­—ç¬¦åŒ…å«åœ¨ä¸€ä¸ªé›†åˆé‡Œï¼Œè®¡ç®—æœºåªè¦æ”¯æŒè¿™ä¸€ä¸ªå­—ç¬¦é›†ï¼Œå°±èƒ½æ˜¾ç¤ºæ‰€æœ‰çš„å­—ç¬¦ï¼Œå†ä¹Ÿä¸ä¼šæœ‰ä¹±ç äº†ã€‚Unicodeç æ˜¯ASCIIç çš„ä¸€ä¸ªè¶…é›†\n(superset)\n- UTF-32 UTF-8 UTF-16 éƒ½æ˜¯Unicodeç çš„ç¼–ç å½¢å¼\n- UTF-32ï¼šç”¨å›ºå®šé•¿åº¦çš„å››ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºæ¯ä¸ªç ç‚¹\n- UTF-8ï¼šç”¨å¯å˜é•¿åº¦çš„å­—èŠ‚æ¥è¡¨ç¤ºæ¯ä¸ªç ç‚¹,å¦‚æœåªéœ€è¦ä¸€ä¸ªå­—èŠ‚å°±èƒ½è¡¨ç¤ºçš„,å°±ç”¨ä¸€ä¸ªå­—èŠ‚,ä¸€ä¸ªä¸å¤Ÿ,å°±ç”¨ä¸¤ä¸ªâ€¦æ‰€ä»¥,åœ¨UTF-8ç¼–ç ä¸‹,ä¸€ä¸ªå­—ç¬¦æœ‰å¯èƒ½ç”±1-4ä¸ªå­—èŠ‚ç»„æˆ.\n- UTF-16ï¼šç»“åˆäº†å›ºå®šé•¿åº¦å’Œå¯å˜é•¿åº¦,å®ƒåªæœ‰ä¸¤ä¸ªå­—èŠ‚å’Œå››ä¸ªå­—èŠ‚ä¸¤ç§æ–¹å¼æ¥è¡¨ç¤ºç ç‚¹\n\n### å‰åç«¯åˆ†ç¦»çš„é¡¹ç›®å¦‚ä½•seo\n1. ä½¿ç”¨prerenderã€‚\n2. å…ˆå» `https://www.baidu.com/robots.txt` æ‰¾å‡ºå¸¸è§çš„çˆ¬è™«ï¼Œç„¶ååœ¨nginxä¸Šåˆ¤æ–­æ¥è®¿é—®é¡µé¢ç”¨æˆ·çš„User-Agentæ˜¯å¦æ˜¯çˆ¬è™«ï¼Œå¦‚æœæ˜¯çˆ¬è™«ï¼Œå°±ç”¨nginxæ–¹å‘ä»£ç†åˆ°æˆ‘ä»¬è‡ªå·±ç”¨nodejs + \npuppeteerå®ç°çš„çˆ¬è™«æœåŠ¡å™¨ä¸Šï¼Œç„¶åç”¨ä½ çš„çˆ¬è™«æœåŠ¡å™¨çˆ¬è‡ªå·±çš„å‰åç«¯åˆ†ç¦»çš„å‰ç«¯é¡¹ç›®é¡µé¢ï¼Œå¢åŠ æ‰’é¡µé¢çš„æ¥æ”¶å»¶æ—¶ï¼Œä¿è¯å¼‚æ­¥æ¸²æŸ“çš„æ¥å£æ•°æ®è¿”å›ï¼Œæœ€åå¾—åˆ°äº†é¡µé¢çš„æ•°æ®ï¼Œè¿”è¿˜ç»™æ¥è®¿é—®çš„çˆ¬è™«å³\nå¯ã€‚\n\n### å¸¸è§æ¨¡æ¿è¯­è¨€\n- jade\n- pug\n- thymeleaf\n\n### BFF(Back-end for Front-end)ä¸­é—´å±‚\n![bff](http://cdn.mydearest.cn/blog/images/bff.png)\nå‰ç«¯åˆ†å±‚å’Œå»ºæ¨¡ï¼Œå®ç°ä¸Šæ²¡å¤ªå¤§é™åˆ¶ï¼Œå°±æ˜¯ä¸€å±‚nodejsï¼Œèƒ½åšè¯·æ±‚è½¬å‘å’Œæ•°æ®è½¬åŒ–å³å¯ã€‚\n\n- ä¼˜ç‚¹\n1. å‰åç«¯å½»åº•åˆ†ç¦»ï¼Œå³ä¾¿æ˜¯åæœŸæœ‰å¾®æœåŠ¡è¿ç§»ï¼Œä¹Ÿä¸éœ€æ”¹åŠ¨å‰ç«¯ä»£ç \n\n2. ä¸šåŠ¡æ›´å‘å‰é æ‹¢ï¼Œçç¢çš„apiç”±å‰ç«¯å¼€å‘è‡ªå·±å†³å®šï¼Œæ›´é€‚é…å‰ç«¯æ¡†æ¶\n\n3. BFFå¯ä»¥è‡ªå¼€mockï¼Œæ’ä»¶ä¹Ÿèƒ½ç”ŸæˆAPIæ–‡æ¡£ï¼Œç›¸æ¯”åç«¯å•å¼€è¿™ç±»æœåŠ¡è¦æ–¹ä¾¿äº›å§\n\n4. ç•™ç»™åç«¯æ›´æ¸…æ™°çš„æœåŠ¡è¾¹ç•Œï¼Œåªéœ€è¦æä¾›ç²—ç²’åº¦çš„æ¥å£å³å¯\n\n- ç¼ºç‚¹\n1. ä¸­é—´å±‚è½¬å‘ä¼šå¢åŠ è¯·æ±‚å»¶è¿Ÿã€‚\n\n2. éœ€è¦ä¿è¯ç«¯åˆ°ç«¯æµ‹è¯•\n\n3. å¿…é¡»éšæ—¶å‡†å¤‡å¥½åç«¯å¼‚å¸¸è¯·æ±‚\n\n4. BFFåˆ†å±‚ä¼šå¢åŠ å¼€å‘æˆæœ¬\n","tags":["é¢è¯•"],"categories":["çŸ¥è¯†"]},{"title":"æ­£ç¡®è®¾ç½®ç½‘ç«™titleã€keywordsã€description","url":"%2Fseo.html","content":"\n---\n<!--more-->\n\nSEOï¼šæœç´¢å¼•æ“ä¼˜åŒ–ï¼Œæé«˜ç½‘ç«™æµè§ˆé‡\n\nSEMï¼šæœç´¢å¼•æ“è¥é”€\n\nIPï¼šç‹¬ç«‹IPè®¿é—®çš„ç”¨æˆ·\n\nPVï¼šé¡µé¢æµè§ˆé‡æˆ–ç‚¹å‡»é‡\n\nUVï¼šç‹¬ç«‹è®¿å®¢æ•°\n\n## titleï¼ˆç½‘ç«™æ ‡é¢˜ï¼‰\n\ntitleï¼Œå°±æ˜¯æµè§ˆå™¨ä¸Šæ˜¾ç¤ºçš„é‚£äº›å†…å®¹ï¼Œä¸ä»…ç”¨æˆ·èƒ½çœ‹åˆ°ï¼Œä¹Ÿèƒ½è¢«æœç´¢å¼•æ“æ£€ç´¢åˆ°ï¼ˆæœç´¢å¼•æ“åœ¨æŠ“å–ç½‘é¡µæ—¶ï¼Œæœ€å…ˆè¯»å–çš„å°±æ˜¯ç½‘é¡µæ ‡é¢˜ï¼Œæ‰€ä»¥titleæ˜¯å¦æ­£ç¡®è®¾ç½®æå…¶é‡è¦ã€‚ï¼‰titleä¸€èˆ¬ä¸è¶…è¿‡80ä¸ªå­—ç¬¦ï¼Œè€Œä¸”è¯è¯­é—´è¦ç”¨è‹±æ–‡â€œ-â€éš”å¼€ï¼Œå› ä¸ºè®¡ç®—æœºåªå¯¹è‹±è¯­çš„æ•æ„Ÿæ€§è¾ƒé«˜ï¼Œå¯¹æ±‰è¯­çš„æ•æ„Ÿæ€§ä¸é«˜ã€‚\n\n```html\nç”¨æ³•ï¼š<title>ç½‘ç«™æ ‡é¢˜</title>\n```\n\n1. é¦–é¡µtitleå†™æ³•ï¼Œä¸€èˆ¬æ˜¯â€œç½‘ç«™åç§°-ä¸»å…³é”®è¯æˆ–ä¸€å¥å«æœ‰ä¸»å…³é”®è¯çš„æè¿°â€ã€‚åœ¨åšä¼˜åŒ–æ—¶ä¹ æƒ¯æŠŠä¸»å…³é”®è¯æ”¾æœ€å‰é¢ï¼Œç½‘ç«™åç§°æ”¾åé¢ï¼Œå› ä¸ºæœç´¢å¼•æ“ç»™äºˆæ ‡é¢˜æœ€å‰é¢çš„è¯æ¯”åé¢çš„é«˜ã€‚æ¯”å¦‚ï¼Œåšâ€œæ‹›è˜â€è¿™ä¸ªè¯ï¼Œå°±è¿™æ ·å†™â€œä¼ä¸šæ‹›è˜-åˆ›ä¸šå…¬å¸æ‹›è˜æŠ€å·§-xxæ‹›è˜â€ã€‚\n\n2. æ ç›®é¡µtitleå†™æ³•ï¼Œä¸€èˆ¬æœ‰2ç§ï¼šâ€œæ ç›®åç§°-ç½‘ç«™åç§°â€ã€â€œæ ç›®åç§°æ ç›®å…³é”®è¯-ç½‘ç«™åç§°â€ã€‚å»ºè®®ç”¨â€œæ ç›®åç§°-ç½‘ç«™åç§°â€ã€‚è€Œä¸”æ ç›®åç§°æœ€å¥½ç”¨å…³é”®è¯æ¥ç¡®å®šï¼Œæ¯”å¦‚ä¼ä¸šæ‹›è˜æ ç›®æœ€å¥½å°±ç”¨ä¼ä¸šæ‹›è˜ï¼Œè€Œä¸è¦èµ·ä¸ªè®©äººæ— æ³•è¯†åˆ«çš„åå­—å¦‚ä¼ä¸šæ¥äººï¼Œä¼ä¸šçœ‹çœ‹ï¼Œæˆ–ä¼ä¸šåŠ ä¸Šä¸€äº›ç‰¹æ®Šç¬¦å·ï¼Œè¿™ç§å†™æ³•è™½ç„¶å¾ˆæœ‰ä¸ªæ€§ï¼Œä½†ä¼šè®©ä½ çš„ç½‘ç«™åœ¨ä¼˜åŒ–ä¸Šå äº†ä¸‹é£ã€‚\n\n3. åˆ†ç±»åˆ—è¡¨é¡µtitleå†™æ³•ï¼Œä¸€èˆ¬æ˜¯â€œåˆ†ç±»åˆ—è¡¨é¡µåç§°-æ ç›®åç§°-ç½‘ç«™åç§°â€ï¼Œè¿™ä¸ªå’Œæ ç›®é¡µå·®ä¸å¤šã€‚\n\n4. æ–‡ç« é¡µtitleå†™æ³•ï¼Œä¸€èˆ¬æœ‰3ç§ï¼šâ€œæ–‡ç« æ ‡é¢˜-ç½‘ç«™åç§°â€ã€â€œå†…å®¹æ ‡é¢˜-æ ç›®åç§°â€ã€â€œå†…å®¹æ ‡é¢˜-æ ç›®åç§°-ç½‘ç«™åç§°â€ã€‚å…¶ä¸­ï¼Œâ€œå†…å®¹æ ‡é¢˜-æ ç›®åç§°-ç½‘ç«™åç§°â€çš„å†™æ³•æœ€ä¸ºè§„èŒƒï¼Œä½†ä¹Ÿç›¸å¯¹å¤æ‚ï¼Œå®ƒèƒ½ç»™ç”¨æˆ·å¾ˆå¥½çš„æç¤ºï¼Œè®©ç”¨æˆ·çŸ¥é“ä»–åœ¨è®¿é—®å“ªç¯‡æ–‡ç« ï¼Œå¹¶ä¸”æ˜¯åœ¨å“ªä¸ªç½‘ç«™çš„å“ªä¸ªæ ç›®ä¸‹ã€‚\n\n \n\n## keywordsï¼ˆå…³é”®è¯ï¼‰\n\nkeywordsï¼Œæ˜¯ç”¨æˆ·ä¸æŸ¥çœ‹æºä»£ç çœ‹ä¸åˆ°çš„ã€‚ä¸»è¦ä½œç”¨æ˜¯å‘Šè¯‰æœç´¢å¼•æ“æœ¬é¡µå†…å®¹æ˜¯å›´ç»•å“ªäº›è¯å±•å¼€çš„ã€‚å› æ­¤keywordsçš„æ¯ä¸ªè¯éƒ½è¦èƒ½åœ¨å†…å®¹ä¸­æ‰¾åˆ°ç›¸åº”åŒ¹é…ï¼Œæ‰æœ‰åˆ©äºæ’åã€‚keywordsä¸€èˆ¬ä¸è¶…è¿‡3ä¸ªï¼Œæ¯ä¸ªå…³é”®è¯ä¸å®œè¿‡é•¿ï¼Œè€Œä¸”è¯è¯­é—´è¦ç”¨è‹±æ–‡â€œ,â€éš”å¼€ã€‚ä¸ºä»€ä¹ˆç”¨è‹±æ–‡ä¸Šæ–‡å·²ç»è¯´è¿‡ã€‚è€Œä¸”ï¼Œå°½é‡å°†é‡è¦çš„å…³é”®å­—é å‰æ”¾ï¼Œå› ä¸ºé åçš„å…³é”®å­—æ’åè¾ƒå·®ï¼Œé™¤éä½ ç«™æœ‰å¾ˆé«˜çš„æƒé‡ã€‚\n\nå°é“æ¶ˆæ¯ç§°keywordsæ›¾è¢«ç™¾åº¦ã€è°·æ­Œã€é›…è™ç­‰æœç´¢å¼•æ“å‰”é™¤ï¼Œå°†ä¸ä¼šå†å½±å“æœç´¢å¼•æ“çš„æ’åºç»“æœï¼Œè®¾ç½®ä¸€ä¸‹æ€»æ²¡åå¤„ï¼Œè¿˜æ˜¯æœ‰ä¸€äº›æœç´¢å¼•æ“æ¯”è¾ƒé‡è§†keywordsæ ‡ç­¾çš„ã€‚\n\n```html\nç”¨æ³•ï¼š<meta name=\"Keywords\" Content=\"å…³é”®è¯1,å…³é”®è¯2,å…³é”®è¯3,å…³é”®è¯4\">\n```\n\n1. é¦–é¡µkeywordså†™æ³•ï¼Œä¸€èˆ¬æ˜¯â€œç½‘ç«™åç§°,ä¸»è¦æ ç›®å,ä¸»è¦å…³é”®è¯â€ã€‚\n\n2. æ ç›®é¡µkeywordså†™æ³•ï¼Œä¸€èˆ¬æ˜¯â€œæ ç›®åç§°,æ ç›®å…³é”®å­—,æ ç›®åˆ†ç±»åˆ—è¡¨åç§°â€ã€‚\n\n3. åˆ†ç±»åˆ—è¡¨é¡µkeywordså†™æ³•ï¼Œè¿™ä¸ªå°±æ¯”è¾ƒç®€å•äº†ï¼Œåªè¦å°†ä½ è¿™ä¸ªæ ç›®ä¸­çš„ä¸»è¦å…³é”®å­—å†™å…¥å³å¯ã€‚\n\n4. æ–‡ç« é¡µkeywordså†™æ³•ï¼Œå»ºè®®å¤§å®¶æå–æ–‡ç« ä¸­çš„å…³é”®è¯ï¼Œæ¯”å¦‚æˆ‘çš„æ–‡ç« ä¸»è¦æ˜¯è®²SEOä¼˜åŒ–çš„ï¼Œé‚£ä¹ˆæˆ‘å…³é”®è¯è‚¯å®šæ˜¯SEOä¼˜åŒ–ï¼Œå¦‚æœä½ è§‰å¾—ä½ æå–å…³é”®è¯çš„èƒ½åŠ›è¾ƒå·®ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æ–‡ç« ä¸­å‡ºç°æ¯”è¾ƒå¤šçš„è¯æ¥ä½œä¸ºå…³é”®è¯ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨å†™çš„å†…å®¹æ˜¯å…³äºtitleã€keywordsã€descriptionçš„ï¼Œé‚£æˆ‘çš„æ–‡ç« é¡µå…³é”®è¯å°±æ˜¯è¿™3ä¸ªã€‚\n\n## descriptionï¼ˆå†…å®¹æ‘˜è¦ï¼‰\n\ndescriptionï¼Œå’Œä¸Šé¢çš„keywordsä¸€æ ·ï¼Œæ˜¯ç”¨æˆ·ä¸æŸ¥çœ‹æºä»£ç çœ‹ä¸åˆ°çš„ï¼Œè€Œä¸”ä¹Ÿæ˜¯å¯¹äºä¸€ä¸ªç½‘é¡µçš„ç®€è¦å†…å®¹æ¦‚å†µã€‚ä¸åŒçš„æ˜¯ï¼Œkeywordsæ˜¯ç”±å‡ ä¸ªè¯è¯­çš„ç»„æˆçš„ï¼Œè€Œdescriptionåˆ™æ˜¯å®Œæ•´çš„ä¸€å¥è¯ã€‚descriptionä¸€èˆ¬ä¸è¶…è¿‡150ä¸ªå­—ç¬¦ï¼Œæè¿°å†…å®¹è¦å’Œé¡µé¢å†…å®¹ç›¸å…³ã€‚\n\n```html\nç”¨æ³•ï¼š<meta name=â€Descriptionâ€ Content=â€ä½ ç½‘é¡µçš„ç®€è¿°â€>\n```\n\n1. é¦–é¡µdescriptionå†™æ³•ï¼Œä¸€èˆ¬æ˜¯å°†é¦–é¡µçš„æ ‡é¢˜ã€å…³é”®è¯å’Œä¸€äº›ç‰¹æ®Šæ ç›®çš„å†…å®¹èåˆåˆ°é‡Œé¢ï¼Œå†™æˆç®€å•çš„ä»‹ç»ã€‚\n\n2. æ ç›®é¡µdescriptionå†™æ³•ï¼Œä¸€èˆ¬æ˜¯å°†æ ç›®çš„æ ‡é¢˜ã€å…³é”®å­—ã€åˆ†ç±»åˆ—è¡¨åç§°èåˆåˆ°é‡Œé¢ï¼Œå†™æˆç®€å•çš„ä»‹ç»ã€‚\n\n3. åˆ†ç±»åˆ—è¡¨é¡µdescriptionï¼Œè¿™ä¸ªå°±æ¯”è¾ƒç®€å•äº†ï¼Œä¸€èˆ¬åªéœ€è¦æŠŠåˆ†ç±»åˆ—è¡¨çš„æ ‡é¢˜ã€å…³é”®è¯èåˆåœ¨ä¸€èµ·ï¼Œå†™æˆç®€å•çš„ä»‹ç»ã€‚\n\n4. æ–‡ç« é¡µdescriptionå†™æ³•ï¼Œä¸€èˆ¬æœ‰2ç§å†™æ³•ï¼Œæ ‡å‡†å†™æ³•å°±å’Œå‰é¢çš„ä¸€æ ·ï¼Œå°†æ–‡ç« æ ‡é¢˜ã€æ–‡ç« ä¸­çš„é‡è¦å†…å®¹å’Œå…³é”®è¯èåˆåœ¨ä¸€èµ·ï¼Œå†™æˆç®€å•çš„ä»‹ç»ã€‚è¿™æ˜¯æœ€å¥½æœ€æ ‡å‡†çš„å†™æ³•ã€‚ä½†æ˜¯è¿™æ ·å†™æ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥åœ¨æ–‡ç« é¦–æ®µå’Œæ ‡é¢˜ä¸­åŠ å…¥å…³é”®è¯ï¼Œæ¯”å¦‚æˆ‘è¿™ç¯‡æ–‡ç« æ˜¯è®²titleã€keywordsã€descriptionçš„ï¼Œé‚£ä¹ˆåœ¨æ–‡ç« é¦–æ®µå’Œæ ‡é¢˜ä¸­å°±åŠ å…¥è¿™äº›å†…å®¹ï¼Œç„¶åç›´æ¥å°†æ–‡ç« é¦–æ®µçš„å†…å®¹å¤åˆ¶åˆ°descriptionä¸­å³å¯ã€‚\n\n**PSï¼š3ä¸ªæ ‡ç­¾æŒ‰é‡è¦æ€§æ¥åˆ†ï¼štitle>description>keywords**\n\n## å…¶ä»–ä¼˜åŒ–æŠ€å·§\n\n1ï¼‰æ ‡ç­¾è¯­ä¹‰åŒ–(æ­£ç¡®çš„æ ‡ç­¾åŒ…å«äº†æ­£ç¡®çš„å†…å®¹ï¼Œç»“æ„è‰¯å¥½ï¼Œä¾¿äºé˜…è¯»)\n2ï¼‰ä¸€ä¸ªé¡µé¢ä¸­çš„H1æ ‡ç­¾åªèƒ½ä½¿ç”¨ä¸€æ¬¡ \n3ï¼‰imgæ ‡ç­¾éƒ½è¦è®¾ç½® alt å±æ€§ï¼Œåœ¨è¿™ä¸ªå±æ€§ä¸­å£°æ˜å½“å‰å›¾ç‰‡(éçº¯è£…é¥°å›¾ç‰‡)çš„ä¿¡æ¯ï¼ˆspiderä¸èƒ½æ”¶å½•å›¾ç‰‡ï¼Œä½†æ˜¯å¯ä»¥æŠ“å–åˆ°å›¾ç‰‡altå±æ€§çš„å€¼ï¼‰ \n4ï¼‰HTMLçš„å±‚çº§ä¸è¦å¤ªæ·±çš„å±‚çº§ï¼Œèœ˜è››å¯èƒ½ä¸ä¼šæŠ“å–å’Œæ”¶å½• \n5ï¼‰æŠŠéœ€è¦æ¨å¹¿çš„å…³é”®è¯å°½å¯èƒ½çš„åœ¨é¡µé¢ä¸­æ›å…‰ï¼ˆæœ€å¥½éƒ½å†™åœ¨Hï¼ˆ2~6ï¼‰æ ‡ç­¾ä¸­ï¼‰\n6ï¼‰æé«˜ç½‘ç«™é€Ÿåº¦ \n7ï¼‰å°‘ç”¨iframeï¼Œä¸ç”¨jsè¾“å‡ºé‡è¦å†…å®¹\n","tags":["ä¼˜åŒ–"],"categories":["çŸ¥è¯†"]},{"title":"JavaScriptæ•´ç†æ€»ç»“","url":"%2Fjssummary.html","content":"\nJSçš„ç›¸å…³çŸ¥è¯†ç‚¹æ¯”è¾ƒç¹æ‚ï¼Œç‰¹æ­¤å¼€ç¯‡æ•´ç†ä¸€æ³¢ï¼Œæ–¹ä¾¿å›é¡¾æ€»ç»“æŸ¥é˜…ã€‚\n\n- è¿è¡Œåœ¨å®¿ä¸»ç¯å¢ƒç¯å¢ƒä¸­ï¼Œæ¯”å¦‚æµè§ˆå™¨æˆ–nodeç¯å¢ƒ\n- ä¸ç”¨é¢„ç¼–è¯‘ï¼Œç›´æ¥è§£é‡Šæ‰§è¡Œä»£ç \n- æ˜¯å¼±ç±»å‹è¯­è¨€ï¼Œè¾ƒä¸ºçµæ´»\n- ä¸æ“ä½œç³»ç»Ÿæ— å…³ï¼Œè·¨å¹³å°çš„è¯­è¨€\n- è„šæœ¬è¯­è¨€ï¼Œè§£é‡Šæ€§è¯­è¨€\n\n--- \n<!--more -->\n\n## æ¦‚å¿µ\nJavaScript æ˜¯ä¸€é—¨è·¨å¹³å°ã€é¢å‘å¯¹è±¡ã€åŸºäºåŸå‹çš„è½»é‡çº§åŠ¨æ€è„šæœ¬è¯­è¨€ã€‚\n\nä¸javaçš„å¯¹æ¯”ï¼š\n\n|JavaScript|Java|\n|:---|:---|\n|é¢å‘å¯¹è±¡ã€‚ä¸åŒºåˆ†å¯¹è±¡ç±»å‹ã€‚é€šè¿‡åŸå‹æœºåˆ¶ç»§æ‰¿ï¼Œä»»ä½•å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•å‡å¯ä»¥è¢«åŠ¨æ€æ·»åŠ ã€‚|åŸºäºç±»ç³»ç»Ÿã€‚åˆ†ä¸ºç±»å’Œå®ä¾‹ï¼Œé€šè¿‡ç±»å±‚çº§çš„å®šä¹‰å®ç°ç»§æ‰¿ã€‚ä¸èƒ½åŠ¨æ€å¢åŠ å¯¹è±¡æˆ–ç±»çš„å±æ€§æˆ–æ–¹æ³•ã€‚|\n|å˜é‡ç±»å‹ä¸éœ€è¦æå‰å£°æ˜(åŠ¨æ€ç±»å‹)ã€‚|å˜é‡ç±»å‹å¿…é¡»æå‰å£°æ˜(é™æ€ç±»å‹)ã€‚|\n|ä¸èƒ½ç›´æ¥è‡ªåŠ¨å†™å…¥ç¡¬ç›˜ã€‚|å¯ä»¥ç›´æ¥è‡ªåŠ¨å†™å…¥ç¡¬ç›˜ã€‚|\n\n## å˜é‡å£°æ˜\n### var(å­˜åœ¨å˜é‡æå‡)\nå£°æ˜ä¸€ä¸ªå˜é‡ï¼Œå¯èµ‹ä¸€ä¸ªåˆå§‹åŒ–å€¼ã€‚\n\n### let(let åŒä¸€å˜é‡åœ¨åŒä¸€ä½œç”¨åŸŸä¸èƒ½åŒæ—¶å£°æ˜)\nå£°æ˜ä¸€ä¸ªå—ä½œç”¨åŸŸçš„å±€éƒ¨å˜é‡ï¼Œå¯èµ‹ä¸€ä¸ªåˆå§‹åŒ–å€¼ã€‚\n\n### const(const å£°æ˜æ—¶å¿…é¡»èµ‹åˆå§‹å€¼,ä¹Ÿä¸å¯ä»¥åœ¨è„šæœ¬è¿è¡Œæ—¶é‡æ–°å£°æ˜)\nå£°æ˜ä¸€ä¸ªå—ä½œç”¨åŸŸçš„åªè¯»çš„å‘½åå¸¸é‡ã€‚\nconstå£°æ˜åˆ›å»ºä¸€ä¸ªå€¼çš„åªè¯»å¼•ç”¨ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒæ‰€æŒæœ‰çš„å€¼æ˜¯ä¸å¯å˜çš„ï¼Œåªæ˜¯å˜é‡æ ‡è¯†ç¬¦ä¸èƒ½é‡æ–°åˆ†é…ã€‚\nå¦‚const a=[1,2,3] a[1]=4; const b={} b.name=\"1\" æ•°ç»„å…ƒç´ å’Œå¯¹è±¡å±æ€§ä¸å—ä¿æŠ¤ã€‚\n\n## å˜é‡çš„ä½œç”¨åŸŸ\nåœ¨æ‰€æœ‰å‡½æ•°ä¹‹å¤–å£°æ˜çš„å˜é‡ï¼Œå«åšå…¨å±€å˜é‡ï¼Œå› ä¸ºå®ƒå¯è¢«å½“å‰æ–‡æ¡£ä¸­çš„ä»»ä½•å…¶ä»–ä»£ç æ‰€è®¿é—®ã€‚åœ¨å‡½æ•°å†…éƒ¨å£°æ˜çš„å˜é‡ï¼Œå«åšå±€éƒ¨å˜é‡ï¼Œå› ä¸ºå®ƒåªèƒ½åœ¨è¯¥å‡½æ•°å†…éƒ¨è®¿é—®ã€‚å…¨åŒºå˜é‡æ˜¯å…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œåœ¨æµè§ˆå™¨ä¸­å¯ä»¥ç”¨window.xxæˆ–xxæ¥è®¿é—®ã€‚\n\n```javascript\nif(true){\n    var a=5\n}\nconsole.log(a) // 5 ä½¿ç”¨letå£°æ˜å—çº§åˆ™æ˜¯undefined\n```\n## å˜é‡æå‡\nJavaScript å˜é‡çš„å¦ä¸€ç‰¹åˆ«ä¹‹å¤„æ˜¯ï¼Œä½ å¯ä»¥å¼•ç”¨ç¨åå£°æ˜çš„å˜é‡è€Œä¸ä¼šå¼•å‘å¼‚å¸¸ã€‚è¿™ä¸€æ¦‚å¿µç§°ä¸ºå˜é‡å£°æ˜æå‡(hoisting)ï¼›\nvar ok ; let å’Œ const åˆ™ä¸ä¼šå­˜åœ¨å˜é‡æå‡\n\n```javascript\n1.\nconsole.log(x === undefined); // true\nvar x = 3;\n\n2.\nvar myvar = \"my value\";\n\n(function() {\n  console.log(myvar); // undefined\n  var myvar = \"local value\";\n})();\n\n1.1 ä¹Ÿå¯å†™ä½œ\nvar x;\nconsole.log(x === undefined); // true\nx = 3;\n\n2.1\nvar myvar = \"my value\";\n \n(function() {\n  var myvar;\n  console.log(myvar); // undefined\n  myvar = \"local value\";\n})();\n```\n\n## å‡½æ•°æå‡\nå£°æ˜å‡½æ•°çš„3ç§æ–¹å¼ï¼š\n\n```javascript\nfunction foo(){} // å‡½æ•°å£°æ˜ å­˜åœ¨å‡½æ•°æå‡ä¸”å¤§äºå˜é‡æå‡\nvar foo=function (){} // å‡½æ•°è¡¨è¾¾å¼ var foo=function foo1(){} å‡½æ•°åå¯å†™\nnew Function(\"å‚æ•°1\",\"å‚æ•°2\",...,\"å‚æ•°n\",\"å‡½æ•°ä½“\"); // ä½¿ç”¨Functionæ„é€ å‡½æ•°\n```\n\nä»ä½œç”¨åŸŸä¸Šæ¥è¯´ï¼Œå‡½æ•°å£°æ˜å¼å’Œå‡½æ•°è¡¨è¾¾å¼ä½¿ç”¨çš„æ˜¯å±€éƒ¨å˜é‡ï¼Œè€Œ Function()æ„é€ å‡½æ•°å´æ˜¯å…¨å±€å˜é‡ã€‚\n```js\nvar name = 'æˆ‘æ˜¯å…¨å±€å˜é‡ name';\n\n// å£°æ˜å¼\nfunction a () {\n  var name = 'æˆ‘æ˜¯å‡½æ•°aä¸­çš„name';\n  return name;\n}\nconsole.log(a()); // æ‰“å°: \"æˆ‘æ˜¯å‡½æ•°aä¸­çš„name\"\n\n// è¡¨è¾¾å¼\nvar b = function() {\n  var name = 'æˆ‘æ˜¯å‡½æ•°bä¸­çš„name';\n  return name; // æ‰“å°: \"æˆ‘æ˜¯å‡½æ•°bä¸­çš„name\"\n}\nconsole.log(b())\n\n// Functionæ„é€ å‡½æ•°\nfunction c() {\n  var name = 'æˆ‘æ˜¯å‡½æ•°cä¸­çš„name';\n  return new Function('return name')\n}\nconsole.log(c()()) // æ‰“å°ï¼š\"æˆ‘æ˜¯å…¨å±€å˜é‡ name\"ï¼Œå› ä¸ºFunction()è¿”å›çš„æ˜¯å…¨å±€å˜é‡ nameï¼Œè€Œä¸æ˜¯å‡½æ•°ä½“å†…çš„å±€éƒ¨å˜é‡ã€‚\n```\n\nä»æ‰§è¡Œæ•ˆç‡ä¸Šæ¥è¯´ï¼ŒFunction()æ„é€ å‡½æ•°çš„æ•ˆç‡è¦ä½äºå…¶å®ƒä¸¤ç§æ–¹å¼ï¼Œå°¤å…¶æ˜¯åœ¨å¾ªç¯ä½“ä¸­ï¼Œå› ä¸ºæ„é€ å‡½æ•°æ¯æ‰§è¡Œä¸€æ¬¡éƒ½è¦é‡æ–°ç¼–è¯‘ï¼Œå¹¶ä¸”ç”Ÿæˆæ–°çš„å‡½æ•°å¯¹è±¡ã€‚\n\næ­¤æ—¶çš„3ç§é€’å½’è°ƒç”¨è‡ªèº«çš„æ–¹å¼ \n- foo()\n- foo1()\n- arguments.callee() \n\nç°åœ¨å·²ç»ä¸æ¨èä½¿ç”¨arguments.callee()ï¼›\nåŸå› ï¼šè®¿é—® arguments æ˜¯ä¸ªå¾ˆæ˜‚è´µçš„æ“ä½œï¼Œå› ä¸ºå®ƒæ˜¯ä¸ªå¾ˆå¤§çš„å¯¹è±¡ï¼Œæ¯æ¬¡é€’å½’è°ƒç”¨æ—¶éƒ½éœ€è¦é‡æ–°åˆ›å»ºã€‚å½±å“ç°ä»£æµè§ˆå™¨çš„æ€§èƒ½ï¼Œè¿˜ä¼šå½±å“é—­åŒ…ã€‚\n\n## æ•°æ®ç±»å‹ 8ç§\n### åŸå§‹ç±»å‹\n- Boolean\n- null\n- undefined\n- String \n- Number æ ‡è¯†èŒƒå›´ -2^53~2^53 æ•°å­—å‡ä¸ºåŒç²¾åº¦æµ®ç‚¹ç±»å‹\n  - å®è´¨æ˜¯ä¸€ä¸ª 64 ä½çš„æµ®ç‚¹æ•°ã€‚ä½¿ç”¨ 53 ä½è¡¨ç¤ºå°æ•°ä½ï¼Œ10 ä½è¡¨ç¤ºæŒ‡æ•°ä½ï¼Œ1 ä½è¡¨ç¤ºç¬¦å·ä½ã€‚\n- Symbol(å®ƒçš„å®ä¾‹æ˜¯å”¯ä¸€ä¸”ä¸å¯æ”¹å˜)\n- bigint\n\nObject æ˜¯ JavaScript ä¸­æ‰€æœ‰å¯¹è±¡çš„çˆ¶å¯¹è±¡ï¼ˆobjectã€arrayã€functionï¼‰\n\nä¸¤ç§ç±»å‹çš„åŒºåˆ«æ˜¯ï¼šå­˜å‚¨ä½ç½®ä¸åŒï¼›\nåŸå§‹æ•°æ®ç±»å‹ç›´æ¥å­˜å‚¨åœ¨æ ˆ(stack)ä¸­çš„ç®€å•æ•°æ®æ®µï¼Œå æ®ç©ºé—´å°ã€å¤§å°å›ºå®šï¼Œå±äºè¢«é¢‘ç¹ä½¿ç”¨æ•°æ®ï¼Œæ‰€ä»¥æ”¾å…¥æ ˆä¸­å­˜å‚¨ï¼›\nå¼•ç”¨æ•°æ®ç±»å‹å­˜å‚¨åœ¨å †(heap)ä¸­çš„å¯¹è±¡,å æ®ç©ºé—´å¤§ã€å¤§å°ä¸å›ºå®š,å¦‚æœå­˜å‚¨åœ¨æ ˆä¸­ï¼Œå°†ä¼šå½±å“ç¨‹åºè¿è¡Œçš„æ€§èƒ½ï¼›å¼•ç”¨æ•°æ®ç±»å‹åœ¨æ ˆä¸­å­˜å‚¨äº†æŒ‡é’ˆï¼Œè¯¥æŒ‡é’ˆæŒ‡å‘å †ä¸­è¯¥å®ä½“çš„èµ·å§‹åœ°å€ã€‚å½“è§£é‡Šå™¨å¯»æ‰¾å¼•ç”¨å€¼æ—¶ï¼Œä¼šé¦–å…ˆ\næ£€ç´¢å…¶åœ¨æ ˆä¸­çš„åœ°å€ï¼Œå–å¾—åœ°å€åä»å †ä¸­è·å¾—å®ä½“\n\næ•°æ®å°è£…ç±»å¯¹è±¡ï¼šObjectã€Arrayã€Booleanã€Number å’Œ String\nå…¶ä»–å¯¹è±¡ï¼šFunctionã€Argumentsã€Mathã€Dateã€RegExpã€Error\n\nä¸ºä»€ä¹ˆ x=0.1 èƒ½å¾—åˆ° 0.1ï¼Ÿ\næ­å–œä½ åˆ°äº†çœ‹å±±ä¸æ˜¯å±±çš„å¢ƒç•Œã€‚å› ä¸º mantissa å›ºå®šé•¿åº¦æ˜¯ 52 ä½ï¼Œå†åŠ ä¸Šçœç•¥çš„ä¸€ä½ï¼Œæœ€å¤šå¯ä»¥è¡¨ç¤ºçš„æ•°æ˜¯ 2^53=9007199254740992ï¼Œå¯¹åº”ç§‘å­¦è®¡æ•°å°¾æ•°æ˜¯ \n\n9.007199254740992ï¼Œè¿™ä¹Ÿæ˜¯ JS æœ€å¤šèƒ½è¡¨ç¤ºçš„ç²¾åº¦ã€‚å®ƒçš„é•¿åº¦æ˜¯ 16ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ toPrecision(16) æ¥åšç²¾åº¦è¿ç®—ï¼Œè¶…è¿‡çš„ç²¾åº¦ä¼šè‡ªåŠ¨åšå‡‘æ•´å¤„ç†ã€‚\n\nä¸ä»… JavaScriptï¼Œæ‰€æœ‰éµå¾ª IEEE 754 è§„èŒƒçš„è¯­è¨€éƒ½æ˜¯å¦‚æ­¤ï¼›\n\n`åœ¨JavaScriptä¸­ï¼Œæ‰€æœ‰çš„Numberéƒ½æ˜¯ä»¥64-bitçš„åŒç²¾åº¦æµ®ç‚¹æ•°å­˜å‚¨çš„ï¼Œåœ¨ç”¨äºŒè¿›åˆ¶å­˜å‚¨æ—¶ä¼šå­˜åœ¨ç²¾åº¦è¯¯å·®ï¼›`\n\n`åŸå› ï¼šè®¡ç®—æœºä¸èƒ½ç²¾ç¡®è¡¨ç¤º0.1ï¼Œ 0.2è¿™æ ·çš„æµ®ç‚¹æ•°ï¼Œè®¡ç®—æ—¶ä½¿ç”¨çš„æ˜¯å¸¦æœ‰èˆå…¥è¯¯å·®çš„æ•°ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„æµ®ç‚¹æ•°åœ¨è®¡ç®—æœºå†…éƒ¨éƒ½å­˜åœ¨èˆå…¥è¯¯å·®ï¼Œæ¯”å¦‚0.5å°±æ²¡æœ‰èˆå…¥è¯¯å·®`\n\nåŒç²¾åº¦çš„æµ®ç‚¹æ•°åœ¨è¿™64ä½ä¸Šåˆ’åˆ†ä¸º3æ®µï¼Œè€Œè¿™3æ®µä¹Ÿå°±ç¡®å®šäº†ä¸€ä¸ªæµ®ç‚¹æ•°çš„å€¼ï¼Œ64bitçš„åˆ’åˆ†æ˜¯â€œ1-11-52â€çš„æ¨¡å¼ï¼Œå…·ä½“æ¥è¯´ï¼š\n\n1.å°±æ˜¯1ä½æœ€é«˜ä½ï¼ˆæœ€å·¦è¾¹é‚£ä¸€ä½ï¼‰è¡¨ç¤ºç¬¦å·ä½ï¼Œ0è¡¨ç¤ºæ­£ï¼Œ1è¡¨ç¤ºè´Ÿï¼›\n\n2.11ä½è¡¨ç¤ºæŒ‡æ•°éƒ¨åˆ†ï¼›52ä½è¡¨ç¤ºå°¾æ•°éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯æœ‰æ•ˆåŸŸéƒ¨åˆ†\n\nä»»ä½•åŸå§‹ç±»å‹éƒ½æœ‰å­—é¢é‡å½¢å¼ï¼Œå¯ä»¥ä¸è¢«å˜é‡æ‰€å­˜å‚¨ã€‚\n\nJavaScriptè¯­è¨€æœ‰\"åƒåœ¾å›æ”¶\"åŠŸèƒ½ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å¼•ç”¨ç±»å‹çš„æ—¶å€™æ— éœ€æ‹…å¿ƒå†…å­˜åˆ†é…ã€‚ä½†æ˜¯ä¸ºäº†é˜²æ­¢\"å†…å­˜æ³„æ¼\"è¿˜æ˜¯åº”è¯¥åœ¨ä¸å®ç”¨å¯¹è±¡çš„æ—¶å€™å°†è¯¥å¯¹\n\nè±¡çš„å¼•ç”¨èµ‹å€¼ä¸ºnullã€‚è®©\"åƒåœ¾å›æ”¶\"å™¨åœ¨ç‰¹å®šçš„æ—¶é—´å¯¹é‚£ä¸€å—å†…å­˜è¿›è¡Œå›æ”¶ã€‚\n\n64ä½æµ®ç‚¹æ•°ï¼š1ä½ç¬¦å·ä½ + 52ä½æ•´æ•°ä½ + 11ä½å°æ•°ä½ï¼Œå¦‚æœç¬¦å·ä½ä¸º1ï¼Œå…¶ä»–å„ä½å‡ä¸º0ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å€¼ä¼šè¢«è¡¨ç¤ºæˆ\"-0\"ã€‚åŒç†è¿˜å¯ä»¥è¡¨ç¤º\"+0\"\n\n```js\n// äºŒè¿›åˆ¶æ„é€ -0\n// é¦–å…ˆåˆ›å»ºä¸€ä¸ª8ä½çš„ArrayBuffer\nconst buffer = new ArrayBuffer(8);\n// åˆ›å»ºDataViewå¯¹è±¡æ“ä½œbuffer\nconst dataView = new DataView(buffer);\n\n// å°†ç¬¬1ä¸ªå­—èŠ‚è®¾ç½®ä¸º0x80ï¼Œå³æœ€é«˜ä½ä¸º1\ndataView.setUint8(0, 0x80);\n\n// å°†bufferå†…å®¹å½“åšFloat64ç±»å‹è¿”å›\nconsole.log(dataView.getFloat64(0)); // -0\n```\n\n- åˆ¤æ–­+-0\n```js\n0 === -0 // true\n// Object.is(-0, 0)è¿”å›falseï¼ŒObject.is(NaN, NaN)è¿”å›true\n// æ—©æœŸesåˆ©ç”¨1/-0ä¸º-Infinityçš„ç‰¹ç‚¹æ¥åˆ¤æ–­\nfunction isNegativeZero(num) {  \n  return num === 0 && (1 / num < 0);\n}  \n```\n\n- Object.is()æ–¹æ³•çš„polyfill\n```js\nif (!Object.is) {\n  Object.is = function(x, y) {\n    // SameValue algorithm\n    if (x === y) { // Steps 1-5, 7-10\n      // Steps 6.b-6.e: +0 != -0\n      return x !== 0 || 1 / x === 1 / y;\n    } else {\n      // Step 6.a: NaN == NaN\n      return x !== x && y !== y;\n    }\n  };\n}\n```\n\n### åŸå§‹å°è£…ç±»å‹\n```js\nvar a ='qwer';\nvar firstChar = a.chatAt(0);\nconsole.log(firstChar);// q\n```\n\nåœ¨jså¼•æ“ä¸­å‘ç”Ÿäº†\n```js\nvar a ='qwer';\nvar temp = new String(a);\nvar firstChar = temp.chatAt(0);\ntemp =null;\nconsole.log(firstChar);// q\n```\n\n```js\n0.10000000000000000555.toPrecision(16)\n// è¿”å› 0.1000000000000000ï¼Œå»æ‰æœ«å°¾çš„é›¶åæ­£å¥½ä¸º 0.1\n\n// ä½†ä½ çœ‹åˆ°çš„ `0.1` å®é™…ä¸Šå¹¶ä¸æ˜¯ `0.1`ã€‚ä¸ä¿¡ä½ å¯ç”¨æ›´é«˜çš„ç²¾åº¦è¯•è¯•ï¼š\n0.1.toPrecision(21) = 0.100000000000000005551\n```\n\n`\"getters\"/\"setters\"`å¯ä»¥æƒ³è±¡ä¸€ä¸ªç»™å®šçš„å­—ç¬¦ä¸²å°±åƒä¸€ä¸ªé™„åŠ äº†ä¸€å †æ–¹æ³•å’Œå±æ€§çš„å¯¹è±¡ã€‚å½“è®¿é—®æ•°ç»„çš„é•¿åº¦æ—¶ï¼Œä½ åªéœ€è°ƒç”¨ç›¸åº”çš„ getterã€‚setter å‡½æ•°ç”¨äºè®¾ç½®æ“ä½œ:\n```js\nvar array = {\n  value: [\"Hello\", 89, false, true],\n  push: function(element) {\n    //\n  },\n  shift: function() {\n    //\n  },\n  get length() {\n    // gets the length\n  },\n  set length(newLen) {\n    // sets the length\n  }\n};\n\n// Getter call\nvar len = array.length\n\n// Setter call\narray.length = 50;\n```\n\n### å¯¹è±¡Object\nObject æ˜¯ JS ä¸­æœ€é‡è¦çš„ç±»å‹ï¼Œå› æ­¤å‡ ä¹æ‰€æœ‰å…¶ä»–å®ä½“éƒ½å¯ä»¥ä»ä¸­æ´¾ç”Ÿã€‚ ä¾‹å¦‚ï¼Œå‡½æ•°å’Œæ•°ç»„æ˜¯ä¸“ç”¨å¯¹è±¡ã€‚ JS ä¸­çš„å¯¹è±¡æ˜¯é”®/å€¼å¯¹çš„å®¹å™¨ã€‚\n\nå¯¹è±¡è¢«å®šä¹‰ä¸ºâ€œæ— åºå±æ€§çš„é›†åˆï¼Œå…¶å±æ€§å¯ä»¥åŒ…å«åŸºæœ¬å€¼ï¼Œå¯¹è±¡æˆ–è€…å‡½æ•°â€ã€‚\n\nåªæœ‰nullå’Œundefinedæ— æ³•æ‹¥æœ‰æ–¹æ³•\n\nFunction Array Number Boolean String Date Math RegExpç±»\n\n```javascript\ntypeof null === 'object' // true\nnull instanceof Object // false \nnull instanceof null // error\n\n// ä¸åŒçš„å¯¹è±¡åœ¨åº•å±‚éƒ½è¡¨ç¤ºä¸ºäºŒè¿›åˆ¶\n// åœ¨JavaScriptä¸­äºŒè¿›åˆ¶å‰ä¸‰ä½ä¸º0çš„è¯éƒ½ä¼šè¢«åˆ¤æ–­ä¸ºobjectç±»å‹\n// nullçš„äºŒè¿›åˆ¶è¡¨ç¤ºå…¨æ˜¯0ï¼Œè‡ªç„¶å‰ä¸‰ä½ä¹Ÿæ˜¯0\n// æ‰€ä»¥ typeof null === â€œobjectâ€\n\ntypeof Function; // 'function'\ntypeof new Function(); // 'function'\ntypeof function() {}; // 'function'\n\ntypeof Array; // 'function'\ntypeof Array(); // 'object'\ntypeof new Array(); // 'object'\ntypeof []; // 'object'\n\ntypeof Boolean; // \"function\"\ntypeof Boolean(); // \"boolean\"\ntypeof new Boolean(); // \"object\"\n\ntypeof Math; // 'object'\ntypeof Math(); // Math is not a function\ntypeof new Math(); // Math is not a constructor\n\n[]+[] // \"\"\n[]+{} // \"[object Object]\"\n{}+[] // 0\n\n!+[]+[]+![] // \"truefalse\"\n\nMath.max() // -Infinity\nMath.min() // Infinity\n```\n\n> æ„é€ å‡½æ•° Array(..) ä¸è¦æ±‚å¿…é¡»å¸¦ new å…³é”®å­—ã€‚ä¸å¸¦æ—¶ï¼Œå®ƒä¼šè¢«è‡ªåŠ¨è¡¥ä¸Šã€‚ å› æ­¤ Array(1,2,3) å’Œ new Array(1,2,3) çš„æ•ˆæœæ˜¯ä¸€æ ·çš„\n\n## MDNåŸºæœ¬æ•°æ®ç±»å‹çš„å®šä¹‰\n> é™¤ Object ä»¥å¤–çš„æ‰€æœ‰ç±»å‹éƒ½æ˜¯ä¸å¯å˜çš„ï¼ˆå€¼æœ¬èº«æ— æ³•è¢«æ”¹å˜ï¼‰ã€‚ä¾‹å¦‚ï¼Œä¸ C è¯­è¨€ä¸åŒï¼ŒJavaScript ä¸­å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„\n>ï¼ˆè¯‘æ³¨ï¼šå¦‚ï¼ŒJavaScript ä¸­å¯¹å­—ç¬¦ä¸²çš„æ“ä½œä¸€å®šè¿”å›äº†ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼ŒåŸå§‹å­—ç¬¦ä¸²å¹¶æ²¡æœ‰è¢«æ”¹å˜ï¼‰ã€‚æˆ‘ä»¬ç§°è¿™äº›ç±»å‹çš„å€¼ä¸ºâ€œåŸå§‹å€¼â€ã€‚\n\n```javascript\nvar a = 'string'\na[0] = 'a'\nconsole.log(a)  // string\n```\næˆ‘ä»¬é€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯å¯¹ä¸€ä¸ªå˜é‡é‡æ–°èµ‹å€¼ï¼Œè€Œä¸æ˜¯æ”¹å˜åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼ã€‚åœ¨ js ä¸­æ˜¯æ²¡æœ‰æ–¹æ³•æ˜¯å¯ä»¥æ”¹å˜å¸ƒå°”å€¼å’Œæ•°å­—çš„ã€‚\nå€’æ˜¯æœ‰å¾ˆå¤šæ“ä½œå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™äº›æ–¹æ³•éƒ½æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå¹¶æ²¡æœ‰æ”¹å˜å…¶åŸæœ‰çš„æ•°æ®ã€‚\n\n### å¼•ç”¨æ•°æ®ç±»å‹\nå¼•ç”¨ç±»å‹ï¼ˆobjectï¼‰æ˜¯å­˜æ”¾åœ¨å †heapå†…å­˜ä¸­çš„ï¼Œå˜é‡å®é™…ä¸Šæ˜¯ä¸€ä¸ªå­˜æ”¾åœ¨æ ˆå†…å­˜çš„æŒ‡é’ˆï¼Œè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘å †å†…å­˜ä¸­çš„åœ°å€ã€‚æ¯ä¸ªç©ºé—´å¤§å°ä¸ä¸€æ ·ï¼Œè¦æ ¹æ®æƒ…å†µå¼€è¿›è¡Œç‰¹å®šçš„åˆ†é…ã€‚\n\n### ä¼ å€¼å’Œä¼ å€\näº†è§£äº†åŸºæœ¬æ•°æ®ç±»å‹ä¸å¼•ç”¨ç±»å‹çš„åŒºåˆ«ä¹‹åï¼Œæˆ‘ä»¬å°±åº”è¯¥èƒ½æ˜ç™½ä¼ å€¼ä¸ä¼ å€çš„åŒºåˆ«äº†ã€‚\nåœ¨æˆ‘ä»¬è¿›è¡Œèµ‹å€¼æ“ä½œçš„æ—¶å€™ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„èµ‹å€¼ï¼ˆ=ï¼‰æ˜¯åœ¨å†…å­˜ä¸­æ–°å¼€è¾Ÿä¸€æ®µæ ˆå†…å­˜ï¼Œç„¶åå†å°†å€¼èµ‹å€¼åˆ°æ–°çš„æ ˆä¸­ã€‚ä¾‹å¦‚:\n\n```javascript\nvar a = 10;\nvar b = a;\n\na ++ ;\nconsole.log(a); // 11\nconsole.log(b); // 10\n```\næ‰€ä»¥è¯´ï¼ŒåŸºæœ¬ç±»å‹çš„èµ‹å€¼çš„ä¸¤ä¸ªå˜é‡æ˜¯ä¸¤ä¸ªç‹¬ç«‹ç›¸äº’ä¸å½±å“çš„å˜é‡ã€‚\n\nä½†æ˜¯å¼•ç”¨ç±»å‹çš„èµ‹å€¼æ˜¯ä¼ å€ã€‚åªæ˜¯æ”¹å˜æŒ‡é’ˆçš„æŒ‡å‘ï¼Œä¾‹å¦‚ï¼Œä¹Ÿå°±æ˜¯è¯´å¼•ç”¨ç±»å‹çš„èµ‹å€¼æ˜¯å¯¹è±¡ä¿å­˜åœ¨æ ˆä¸­çš„åœ°å€çš„èµ‹å€¼ï¼Œè¿™æ ·çš„è¯ä¸¤ä¸ªå˜é‡å°±æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤ä¸¤è€…ä¹‹é—´æ“ä½œäº’ç›¸æœ‰å½±å“ã€‚ä¾‹å¦‚ï¼š\n\n```javascript\nvar a = {}; // aä¿å­˜äº†ä¸€ä¸ªç©ºå¯¹è±¡çš„å®ä¾‹\nvar b = a;  // aå’Œbéƒ½æŒ‡å‘äº†è¿™ä¸ªç©ºå¯¹è±¡\n\na.name = 'jozo';\nconsole.log(a.name); // 'jozo'\nconsole.log(b.name); // 'jozo'\n\nb.age = 22;\nconsole.log(b.age);// 22\nconsole.log(a.age);// 22\n\nconsole.log(a == b);// true\n```\n\n## å­—é¢é‡\nå­—é¢é‡æ˜¯ç”±è¯­æ³•è¡¨è¾¾å¼å®šä¹‰çš„å¸¸é‡\n\n- æ•°ç»„å­—é¢é‡(Array literals) []\n- å¸ƒå°”å­—é¢é‡(Boolean literals) true/false\n- æµ®ç‚¹æ•°å­—é¢é‡(Floating-point literals) 3.14\n- æ•´æ•°(Intergers) 5 \n- å¯¹è±¡å­—é¢é‡(Object literals) {}\n- RegExp literals ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æ˜¯å­—ç¬¦è¢«æ–œçº¿ï¼ˆè¯‘æ³¨ï¼šæ­£æ–œæ â€œ/â€ï¼‰å›´æˆçš„è¡¨è¾¾å¼ /a+b/ \nRegExp.test() RegExp.exec() string.match() \n- å­—ç¬¦ä¸²å­—é¢é‡(String literals) \"1212\" '1212'\nJavaScriptä¼šè‡ªåŠ¨å°†å­—ç¬¦ä¸²å­—é¢å€¼è½¬æ¢ä¸ºä¸€ä¸ªä¸´æ—¶å­—ç¬¦ä¸²å¯¹è±¡ï¼Œè°ƒç”¨è¯¥æ–¹æ³•ï¼Œç„¶ååºŸå¼ƒæ‰é‚£ä¸ªä¸´æ—¶çš„å­—ç¬¦ä¸²å¯¹è±¡ã€‚ä½ ä¹Ÿèƒ½ç”¨å¯¹å­—ç¬¦ä¸²å­—é¢å€¼ä½¿ç”¨ç±»ä¼¼\n\n```javascript\nString.lengthçš„å±æ€§ï¼š\nconsole.log(\"John's cat\".length)\n```\n\n```javascript\nvar obj={\n  say:funciton(){\n\n  },\n  // ç®€å†™\n  say(){\n\n  }\n}\n```\nåè¿›åˆ¶æ•´æ•°å­—é¢é‡ç”±ä¸€ä¸²æ•°å­—åºåˆ—ç»„æˆï¼Œä¸”æ²¡æœ‰å‰ç¼€0ã€‚\nå…«è¿›åˆ¶çš„æ•´æ•°ä»¥ 0ï¼ˆæˆ–0Oã€0oï¼‰å¼€å¤´ï¼Œåªèƒ½åŒ…æ‹¬æ•°å­—0-7ã€‚\nåå…­è¿›åˆ¶æ•´æ•°ä»¥0xï¼ˆæˆ–0Xï¼‰å¼€å¤´ï¼Œå¯ä»¥åŒ…å«æ•°å­—ï¼ˆ0-9ï¼‰å’Œå­—æ¯ a~f æˆ– A~Fã€‚\näºŒè¿›åˆ¶æ•´æ•°ä»¥0bï¼ˆæˆ–0Bï¼‰å¼€å¤´ï¼Œåªèƒ½åŒ…å«æ•°å­—0å’Œ1ã€‚\n\n## æ¨¡æ¿å­—ç¬¦ä¸²\n```javascript\nvar name = \"Bob\", time = \"today\";\n`Hello ${name}, how are you ${time}?`\n```\n\n## å¸ƒå°”ç¯å¢ƒçš„å‡å€¼\n* false\n* undefined\n* null\n* 0\n* NaN\n* ç©ºå­—ç¬¦ä¸²ï¼ˆ\"\"ï¼‰\n\n## try-catch \nå¦‚æœfinallyå—è¿”å›ä¸€ä¸ªå€¼ï¼Œè¯¥å€¼ä¼šæ˜¯æ•´ä¸ªtry-catch-finallyæµç¨‹çš„è¿”å›å€¼ï¼Œä¸ç®¡åœ¨tryå’Œcatchå—ä¸­è¯­å¥è¿”å›äº†ä»€ä¹ˆï¼š\n\n```javascript\nfunction f() {\n  try {\n    console.log(0);\n    throw \"bogus\";\n  } catch(e) {\n    console.log(1);\n    return true; // this return statement is suspended\n                 // until finally block has completed\n    console.log(2); // not reachable\n  } finally {\n    console.log(3);\n    return false; // overwrites the previous \"return\"\n    console.log(4); // not reachable\n  }\n  // \"return false\" is executed now  \n  console.log(5); // not reachable\n}\nf(); // console 0, 1, 3; returns false\n```\n\n## for of å’Œ for inå¾ªç¯\n- for in æ›´é€‚åˆå¯¹è±¡ï¼Œéå†æ•°ç»„å’Œå¯¹è±¡\n- for of é€‚åˆéå†æ•°ç»„ï¼Œéå†æ²¡æœ‰Symbol.iteratorå±æ€§çš„å¯¹è±¡æ˜¯ä¼šæŠ¥é”™çš„\n```javascript\nlet arr = [3, 5, 7];\narr.foo = \"hello\";\n\nfor (let i in arr) {\n   console.log(i); // logs \"0\", \"1\", \"2\", \"foo\"\n}\n\n// æ‰€æœ‰å¯æšä¸¾çš„å±æ€§å\nfor (let i of arr) {\n   console.log(i); // logs \"3\", \"5\", \"7\" // æ³¨æ„è¿™é‡Œæ²¡æœ‰ hello\n}\n\n// for in çš„å¾ªç¯é¡ºåº => éå†é¦–å…ˆæ•°å­—çš„å¯ä»¥æ¥ç€æŒ‰ç…§åˆ›å»ºé¡ºåºéå†\n// å¯¹è±¡æ•°å­—é”®åä¼šè½¬æˆå­—ç¬¦ä¸² å¯¹è±¡çš„keyå€¼åªæœ‰stringå’Œsymbolç±»å‹\n// æ’åºè§„åˆ™åŒæ ·é€‚ç”¨äºä¸‹åˆ—APIï¼š\n// Object.entries\n// Object.values\n// Object.keys\n// Object.getOwnPropertyNames\n// Reflect.ownKeys\n\nvar a = {1:1,name:'cosyer',2:2}\nfor (let i in a) {\n  if(a.hasOwnProperty(i)){\n      console.log(i)\n  }\n}\n// 1 2 name\n```\n\n## åµŒå¥—å‡½æ•°å’Œé—­åŒ…\nä¸€ä¸ªé—­åŒ…æ˜¯ä¸€ä¸ªå¯ä»¥è‡ªå·±æ‹¥æœ‰ç‹¬ç«‹çš„ç¯å¢ƒä¸å˜é‡çš„çš„è¡¨è¾¾å¼ã€‚\n- å†…éƒ¨å‡½æ•°åŒ…å«å¤–éƒ¨å‡½æ•°çš„ä½œç”¨åŸŸã€‚\n- å†…éƒ¨å‡½æ•°åªå¯ä»¥åœ¨å¤–éƒ¨å‡½æ•°ä¸­è®¿é—®ã€‚\n- å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„å‚æ•°å’Œå˜é‡ï¼Œä½†æ˜¯å¤–éƒ¨å‡½æ•°å´ä¸èƒ½ä½¿ç”¨å®ƒçš„å‚æ•°å’Œå˜é‡ã€‚\n\n## å¤šå±‚åµŒå¥—å‡½æ•°\nå‡½æ•°å¯ä»¥è¢«å¤šå±‚åµŒå¥—ã€‚ä¾‹å¦‚ï¼Œå‡½æ•°Aå¯ä»¥åŒ…å«å‡½æ•°Bï¼Œå‡½æ•°Bå¯ä»¥å†åŒ…å«å‡½æ•°Cã€‚Bå’ŒCéƒ½å½¢æˆäº†é—­åŒ…ï¼Œæ‰€ä»¥Bå¯ä»¥è®¿é—®Aï¼ŒCå¯ä»¥è®¿é—®Bå’ŒAã€‚å› æ­¤ï¼Œé—­åŒ…å¯ä»¥åŒ…å«å¤šä¸ªä½œç”¨åŸŸï¼›ä»–ä»¬é€’å½’å¼çš„åŒ…å«äº†æ‰€æœ‰åŒ…å«å®ƒçš„å‡½æ•°ä½œç”¨åŸŸã€‚è¿™ä¸ªç§°ä¹‹ä¸ºä½œç”¨åŸŸé“¾ã€‚\n\n```javascript\nfunction A(x) {\n  function B(y) {\n    function C(z) {\n      console.log(x + y + z);\n    }\n    C(3);\n  }\n  B(2);\n}\nA(1); // logs 6 (1 + 2 + 3)\n```\n\nåœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼ŒCå¯ä»¥è®¿é—®Bçš„yå’ŒAçš„xã€‚è¿™æ˜¯å› ä¸ºï¼š\n\n1. Bå½¢æˆäº†ä¸€ä¸ªåŒ…å«Açš„é—­åŒ…ï¼ŒBå¯ä»¥è®¿é—®Açš„å‚æ•°å’Œå˜é‡\n2. Cå½¢æˆäº†ä¸€ä¸ªåŒ…å«Bçš„é—­åŒ…\n3. BåŒ…å«Aï¼Œæ‰€ä»¥Cä¹ŸåŒ…å«Aï¼ŒCå¯ä»¥è®¿é—®Bå’ŒAçš„å‚æ•°å’Œå˜é‡ã€‚æ¢è¨€ä¹‹ï¼ŒCç”¨è¿™ä¸ªé¡ºåºé“¾æ¥äº†Bå’ŒAçš„ä½œç”¨åŸŸ\n\nåè¿‡æ¥å´ä¸æ˜¯è¿™æ ·ã€‚Aä¸èƒ½è®¿é—®Cï¼Œå› ä¸ºAçœ‹ä¸åˆ°Bä¸­çš„å‚æ•°å’Œå˜é‡ï¼ŒCæ˜¯Bä¸­çš„ä¸€ä¸ªå˜é‡ï¼Œæ‰€ä»¥Cæ˜¯Bç§æœ‰çš„ã€‚\n\n## ä½œç”¨åŸŸé“¾è§£é‡Šè¯´æ˜\nå½“åŒä¸€ä¸ªé—­åŒ…ä½œç”¨åŸŸä¸‹ä¸¤ä¸ªå‚æ•°æˆ–è€…å˜é‡åŒåæ—¶ï¼Œå°±ä¼šäº§ç”Ÿå‘½åå†²çªã€‚æ›´è¿‘çš„ä½œç”¨åŸŸæœ‰æ›´é«˜çš„ä¼˜å…ˆæƒï¼Œæ‰€ä»¥æœ€è¿‘çš„ä¼˜å…ˆçº§æœ€é«˜ï¼Œæœ€è¿œçš„ä¼˜å…ˆçº§æœ€ä½ã€‚è¿™å°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚é“¾çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°±æ˜¯æœ€é‡Œé¢çš„ä½œç”¨åŸŸï¼Œæœ€åä¸€ä¸ªå…ƒç´ ä¾¿æ˜¯æœ€å¤–å±‚çš„ä½œç”¨åŸŸã€‚\n\n`å…¨å±€å‡½æ•°æ— æ³•æŸ¥çœ‹å±€éƒ¨å‡½æ•°çš„å†…éƒ¨ç»†èŠ‚ï¼Œä½†å±€éƒ¨å‡½æ•°å¯ä»¥æŸ¥çœ‹å…¶ä¸Šå±‚çš„å‡½æ•°ç»†èŠ‚ï¼Œç›´è‡³å…¨å±€ç»†èŠ‚ã€‚\nå½“éœ€è¦ä»å±€éƒ¨å‡½æ•°æŸ¥æ‰¾æŸä¸€å±æ€§æˆ–æ–¹æ³•æ—¶ï¼Œå¦‚æœå½“å‰ä½œç”¨åŸŸæ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä¼šä¸Šæº¯åˆ°ä¸Šå±‚ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œ\nç›´è‡³å…¨å±€å‡½æ•°ï¼Œè¿™ç§ç»„ç»‡å½¢å¼å°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚`\n\n```javascript\nfunction outside() {\n  var x = 5;\n  function inside(x) {\n    return x * 2;\n  }\n  return inside;\n}\n\noutside()(10); // returns 20 instead of 10\n```\nå‘½åå†²çªå‘ç”Ÿåœ¨return xä¸Šï¼Œinsideçš„å‚æ•°xå’Œoutsideå˜é‡xå‘ç”Ÿäº†å†²çªã€‚è¿™é‡Œçš„ä½œç”¨åŸŸé“¾æ˜¯{inside, outside, å…¨å±€å¯¹è±¡}ã€‚å› æ­¤insideçš„xå…·æœ‰æœ€é«˜ä¼˜å…ˆæƒï¼Œè¿”å›äº†20ï¼ˆinsideçš„xï¼‰è€Œä¸æ˜¯10ï¼ˆoutsideçš„xï¼‰ã€‚\n\n## é—­åŒ…\nJavaScript å…è®¸å‡½æ•°åµŒå¥—ï¼Œå¹¶ä¸”å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å®šä¹‰åœ¨å¤–éƒ¨å‡½æ•°ä¸­çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°ï¼Œä»¥åŠå¤–éƒ¨å‡½æ•°èƒ½è®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°ã€‚ä½†æ˜¯ï¼Œå¤–éƒ¨å‡½æ•°å´ä¸èƒ½å¤Ÿè®¿é—®å®šä¹‰åœ¨å†…éƒ¨å‡½æ•°ä¸­çš„å˜é‡å’Œå‡½æ•°ã€‚è¿™ç»™å†…éƒ¨å‡½æ•°çš„å˜é‡æä¾›äº†ä¸€å®šçš„å®‰å…¨æ€§ã€‚æ­¤å¤–ï¼Œç”±äºå†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°çš„ä½œç”¨åŸŸï¼Œå› æ­¤å½“å†…éƒ¨å‡½æ•°ç”Ÿå­˜å‘¨æœŸå¤§äºå¤–éƒ¨å‡½æ•°æ—¶ï¼Œå¤–éƒ¨å‡½æ•°ä¸­å®šä¹‰çš„å˜é‡å’Œå‡½æ•°å°†çš„ç”Ÿå­˜å‘¨æœŸæ¯”å†…éƒ¨å‡½æ•°æ‰§è¡Œæ—¶é—´é•¿ã€‚å½“å†…éƒ¨å‡½æ•°ä»¥æŸä¸€ç§æ–¹å¼è¢«ä»»ä½•ä¸€ä¸ªå¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸè®¿é—®æ—¶ï¼Œä¸€ä¸ªé—­åŒ…å°±äº§ç”Ÿäº†ã€‚\n\n```javascript\nvar pet = function(name) {          //å¤–éƒ¨å‡½æ•°å®šä¹‰äº†ä¸€ä¸ªå˜é‡\"name\"\n  var getName = function() {            \n    //å†…éƒ¨å‡½æ•°å¯ä»¥è®¿é—® å¤–éƒ¨å‡½æ•°å®šä¹‰çš„\"name\"\n    return name; \n  }\n  //è¿”å›è¿™ä¸ªå†…éƒ¨å‡½æ•°ï¼Œä»è€Œå°†å…¶æš´éœ²åœ¨å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸ\n  return getName;               \n};\nmyPet = pet(\"Vivie\");\n    \nmyPet();                            // è¿”å›ç»“æœ \"Vivie\"\n```\n\n## arguments å¯¹è±¡\nå‡½æ•°çš„å®é™…å‚æ•°ä¼šè¢«ä¿å­˜åœ¨ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„argumentså¯¹è±¡ä¸­ã€‚\n\n```javascript\narguments[i] // è®¿é—®\n```\nargumentså˜é‡åªæ˜¯ â€ç±»æ•°ç»„å¯¹è±¡â€œï¼Œå¹¶ä¸æ˜¯ä¸€ä¸ªæ•°ç»„ã€‚ç§°å…¶ä¸ºç±»æ•°ç»„å¯¹è±¡æ˜¯è¯´å®ƒæœ‰ä¸€ä¸ªç´¢å¼•ç¼–å·å’Œlengthå±æ€§ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå®ƒå¹¶ä¸æ‹¥æœ‰å…¨éƒ¨çš„Arrayå¯¹è±¡çš„æ“ä½œæ–¹æ³•ã€‚\n\n## å‡½æ•°å‚æ•°(é»˜è®¤å‚æ•°ã€å‰©ä½™å‚æ•°(rest))\nå‰©ä½™å‚æ•°è¯­æ³•å…è®¸å°†ä¸ç¡®å®šæ•°é‡çš„å‚æ•°è¡¨ç¤ºä¸ºæ•°ç»„\n\n```javascript\nfunction multiply(a, b = 1,...[1,2,3]) {\n  return a*b;\n}\n```\n\n## ç®­å¤´å‡½æ•°\nç®­å¤´å‡½æ•°æ€»æ˜¯åŒ¿åçš„\nå¼•å…¥ç®­å¤´å‡½æ•°çš„åŸå› \n\n1. æ›´ç®€æ´çš„è¯­æ³•\n2. æ•æ‰é—­åŒ…ä¸Šä¸‹æ–‡çš„thiså€¼\n```javascript\nfunction Person(){\n  this.age = 0;\n\n  setInterval(() => {\n    this.age++; // |this| properly refers to the person object\n  }, 1000);\n}\n\nvar p = new Person();\n```\n\n## æ‰©å±•è¯­å¥\né€‚ç”¨äºå¯¹è±¡ï¼Œæ•°ç»„\n```javascript\nfunction f(x, y, z) { }\nvar args = [0, 1, 2];\nf(...args);\n```\n## ä¸´æ—¶å¯¹è±¡\nä½ å¯ä»¥åœ¨Stringå­—é¢å€¼ä¸Šä½¿ç”¨Stringå¯¹è±¡çš„ä»»ä½•æ–¹æ³•â€”JavaScriptè‡ªåŠ¨æŠŠStringå­—é¢å€¼è½¬æ¢ä¸ºä¸€ä¸ªä¸´æ—¶çš„Stringå¯¹è±¡, ç„¶åè°ƒç”¨å…¶ç›¸åº”æ–¹æ³•,æœ€åä¸¢å¼ƒé”€æ¯æ­¤ä¸´æ—¶å¯¹è±¡.åœ¨Stringå­—é¢å€¼ä¸Šä¹Ÿå¯ä»¥ä½¿ç”¨String.lengthå±æ€§.\n\n```javascript\nvar s1 = \"2 + 2\"; // Creates a string literal value\nvar s2 = new String(\"2 + 2\"); // Creates a String object\neval(s1); // Returns the number 4\neval(s2); // Returns the string \"2 + 2\"\nNumber(null) // 0\n```\n\n## æ•°ç»„æ–¹æ³•\n\n### concat() è¿æ¥ä¸¤ä¸ªæ•°ç»„å¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ã€‚\n```javascript\nvar myArray = new Array(\"1\", \"2\", \"3\");\nmyArray = myArray.concat(\"a\", \"b\", \"c\"); \n// myArray is now [\"1\", \"2\", \"3\", \"a\", \"b\", \"c\"]\n```\n\n###  join() å°†æ•°ç»„çš„æ‰€æœ‰å…ƒç´ è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\n```javascript\nvar myArray = new Array(\"Wind\", \"Rain\", \"Fire\");\nvar list = myArray.join(\" - \"); // list is \"Wind - Rain - Fire\"\n```\n\n### push() åœ¨æ•°ç»„æœ«å°¾æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æ•°ç»„æ“ä½œåçš„é•¿åº¦ã€‚\n```javascript\nvar myArray = new Array(\"1\", \"2\");\nmyArray.push(\"3\"); // myArray is now [\"1\", \"2\", \"3\"]\n```\n\n### pop() ä»æ•°ç»„ç§»å‡ºæœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ ã€‚\n```javascript\nvar myArray = new Array(\"1\", \"2\", \"3\");\nvar last = myArray.pop(); \n// myArray is now [\"1\", \"2\"], last = \"3\"\n```\n\n### shift() ä»æ•°ç»„ç§»å‡ºç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ ã€‚\n```javascript\nvar myArray = new Array (\"1\", \"2\", \"3\");\nvar first = myArray.shift(); \n// myArray is now [\"2\", \"3\"], first is \"1\"\n```\n\n### unshift()åœ¨æ•°ç»„å¼€å¤´æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›æ•°ç»„çš„æ–°é•¿åº¦ã€‚\n```javascript\nvar myArray = new Array (\"1\", \"2\", \"3\");\nmyArray.unshift(\"4\", \"5\"); \n// myArray becomes [\"4\", \"5\", \"1\", \"2\", \"3\"]\n```\n\n### slice(å¼€å§‹ç´¢å¼•ï¼Œç»“æŸç´¢å¼•) ä»æ•°ç»„æå–ä¸€ä¸ªç‰‡æ®µï¼Œå¹¶ä½œä¸ºä¸€ä¸ªæ–°æ•°ç»„è¿”å›ã€‚ \n```javascript\nvar myArray = new Array (\"a\", \"b\", \"c\", \"d\", \"e\");\nmyArray = myArray.slice(1, 4); // until index 3, returning [ \"b\", \"c\", \"d\"]\n```\nslice æ–¹æ³•å¯ä»¥ç”¨æ¥å°†ä¸€ä¸ªç±»æ•°ç»„ï¼ˆArray-likeï¼‰å¯¹è±¡/é›†åˆè½¬æ¢æˆä¸€ä¸ªæ–°æ•°ç»„ã€‚åªéœ€å°†è¯¥æ–¹æ³•ç»‘å®šåˆ°è¿™ä¸ªå¯¹è±¡ä¸Šã€‚ ä¸€ä¸ªå‡½æ•°ä¸­çš„ arguments å°±æ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡çš„ä¾‹å­ã€‚\n\n```javascript\nArray.prototype.slice.call({0:1,1:3,length:2});\n```\n\n### splice(index, count_to_remove, addElement1, addElement2, ...)ä»æ•°ç»„ç§»å‡ºä¸€äº›å…ƒç´ ï¼Œï¼ˆå¯é€‰ï¼‰å¹¶æ›¿æ¢å®ƒä»¬ã€‚\n```javascript\nvar myArray = new Array (\"1\", \"2\", \"3\", \"4\", \"5\");\nmyArray.splice(1, 3, \"a\", \"b\", \"c\", \"d\"); \n// myArray is now [\"1\", \"a\", \"b\", \"c\", \"d\", \"5\"]\n```\n\n### reverse() é¢ å€’æ•°ç»„å…ƒç´ çš„é¡ºåºï¼šç¬¬ä¸€ä¸ªå˜æˆæœ€åä¸€ä¸ªï¼Œæœ€åä¸€ä¸ªå˜æˆç¬¬ä¸€ä¸ªã€‚\n```javascript\nvar myArray = new Array (\"1\", \"2\", \"3\");\nmyArray.reverse(); \n// transposes the array so that myArray = [ \"3\", \"2\", \"1\" ]\n```\n\n### sort() ç»™æ•°ç»„å…ƒç´ æ’åºã€‚\n```javascript\nvar arr=[2,1,3]\narr.sort() // [1,2,3]\n```\nsort() ä¹Ÿå¯ä»¥å¸¦ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥å†³å®šæ€ä¹ˆæ¯”è¾ƒæ•°ç»„å…ƒç´ ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°æ¯”è¾ƒä¸¤ä¸ªå€¼ï¼Œå¹¶è¿”å›3ä¸ªå€¼ä¸­çš„ä¸€ä¸ªï¼š\n- å¦‚æœ a å°äº b ï¼Œè¿”å› -1(æˆ–ä»»ä½•è´Ÿæ•°) é™åº\n- å¦‚æœ a å¤§äº b ï¼Œè¿”å› 1 (æˆ–ä»»ä½•æ­£æ•°) å‡åº\n- å¦‚æœ a å’Œ b ç›¸ç­‰ï¼Œè¿”å› 0ã€‚\n\n### indexOf(searchElement[, fromIndex]) åœ¨æ•°ç»„ä¸­æœç´¢searchElement å¹¶è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…çš„ç´¢å¼•ã€‚\n```javascript\nvar a = ['a', 'b', 'a', 'b', 'a'];\nconsole.log(a.indexOf('b')); // logs 1\n// Now try again, starting from after the last match\nconsole.log(a.indexOf('b', 2)); // logs 3\nconsole.log(a.indexOf('z')); // logs -1, because 'z' was not found\n```\n\n### lastIndexOf(searchElement[, fromIndex]) å’Œ indexOf å·®ä¸å¤šï¼Œä½†è¿™æ˜¯ä»ç»“å°¾å¼€å§‹ï¼Œå¹¶ä¸”æ˜¯åå‘æœç´¢ã€‚\n\n### forEach() å¾ªç¯æ•°ç»„ ä¸å®šçš„é¡ºåº ä¸èƒ½ç”¨break,return falseè·³å‡ºå¾ªç¯éå†\n\néå†éƒ½ä¸ä¼šä¿®æ”¹åŸæ¥çš„åŸºæœ¬ç±»å‹ï¼ˆåªèƒ½è¿”å›æ–°æ•°ç»„ï¼‰å¼•ç”¨ç±»å‹å¯ä»¥ã€‚\n\n### map() å¾ªç¯æ•°ç»„è¿”å›æ–°æ•°ç»„\n```javascript\nvar a1 = ['a', 'b', 'c'];\nvar a2 = a1.map(function(item) { return item.toUpperCase(); });\nconsole.log(a2); // logs A,B,C\n```\n\n### find() æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ \n\n### filter() å¾ªç¯æ•°ç»„è¿”å›ç¬¦åˆæ¡ä»¶çš„å…ƒç´ \n```javascript\nvar a1 = ['a', 10, 'b', 20, 'c', 30];\nvar a2 = a1.filter(function(item) { return typeof item == 'number'; });\nconsole.log(a2); // logs 10,20,30\n```\n### every() å¾ªç¯æ•°ç»„ å¦‚æœå…¨éƒ¨å…ƒç´ æ»¡è¶³æ¡ä»¶åˆ™è¿”å›true å¦åˆ™è¿”å›false\n\n### some() å¾ªç¯æ•°ç»„ åªè¦æœ‰ä¸€é¡¹æ»¡è¶³æ¡ä»¶åˆ™è¿”å›true å…¨éƒ¨ä¸æ»¡è¶³è¿”å›false\n\n### reduce() è¿­ä»£ ä½¿ç”¨å›è°ƒå‡½æ•° callback(firstValue, secondValue) æŠŠæ•°ç»„åˆ—è¡¨è®¡ç®—æˆä¸€ä¸ªå•ä¸€å€¼ reduceRight() ä»å³è¾¹å¼€å§‹\n```javascript\nvar a = [10, 20, 30];\nvar total = a.reduce(function(first, second) { return first + second; }, 0);\nconsole.log(total) // Prints 60\n\n[3,2,1].reduce(Math.pow) // 9\n[].reduce(Math.pow) // error\n```\n\n### å¡«å……fill/splice\n```javascript\nvar fruits = [\"Banana\", \"Orange\", \"Apple\", \"Mango\"];\nfruits.fill(\"cosyer\", 2, 4); // å¼€å§‹å’Œç»“æŸç´¢å¼•\nfruits.splice(2,2,'cosyer','cosyer'); // spliceæ–¹æ³•éœ€è¦æ‰‹åŠ¨æ·»åŠ å¤šä¸ª\n// [\"Banana\", \"Orange\", \"cosyer\", \"cosyer\"]\n```\n\n### copyWithin\n```javascript\nvar fruits = [\"Banana\", \"Orange\", \"Apple\", \"Mango\"];\nfruits.copyWithin(2, 0); // Banana,Orange,Banana,Orange\n// copyWithin(target, start, end);\n```\n\n### entries ä¸€ä¸ªæ•°ç»„çš„è¿­ä»£å¯¹è±¡ï¼Œè¯¥å¯¹è±¡åŒ…å«æ•°ç»„çš„é”®å€¼å¯¹\n```javascript\nvar a = ['a','b','c']\nvar iterator = a.entries()\nconsole.log(iterator) // Array Iterator{}\nconsole.log(iterator.next().value) // [0,'a']\nfor(let a of iterator){\n    console.log(a)\n}\n//[0,'a']\n//[1,'b']\n//[2,'c']\n// keysè¿”å›é”®() values()è¿”å›å€¼\n```\n\n## Mapç®€å•çš„é”®å€¼å¯¹é›†åˆ(å­—å…¸çš„æ•°å­—ç»“æ„ç±»ä¼¼å¯¹è±¡ï¼Œé”®å¯ä»¥æ˜¯å„ç§ç±»å‹çš„å€¼)\n```javascript\nvar sayings = new Map();\nsayings.set('dog', 'woof');\nsayings.set('cat', 'meow');\nsayings.set('elephant', 'toot');\nsayings.size; // 3\nsayings.get('fox'); // undefined\nsayings.has('bird'); // false\nsayings.delete('dog');\nsayings.has('dog'); // false\n\nfor (var [key, value] of sayings) {\n  console.log(key + ' goes ' + value);\n}\n// \"cat goes meow\"\n// \"elephant goes toot\"\n\nsayings.clear();\nsayings.size; // 0\n```\nnew Map() å‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„æˆ–è€…å…¶ä»– iterable å¯¹è±¡ï¼Œå…¶å…ƒç´ æˆ–ä¸ºé”®å€¼å¯¹ï¼Œæˆ–ä¸ºä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ã€‚ æ¯ä¸ªé”®å€¼å¯¹éƒ½ä¼šæ·»åŠ åˆ°æ–°çš„ Mapã€‚null ä¼šè¢«å½“åš undefinedã€‚\n```js\nconst set = new Set([\n  ['foo', 1],\n  ['bar', 2]\n]);\nconst m1 = new Map(set);\nm1.get('foo') // 1\n\nconst m2 = new Map([['baz', 3]]);\nconst m3 = new Map(m2);\nm3.get('baz') // 3\n```\n\n### WeakMapï¼ˆç±»ä¼¼Mapï¼Œåªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆnullé™¤å¤–ï¼‰ï¼ŒWeakMapçš„é”®åæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œä¸è®¡å…¥åƒåœ¾å›æ”¶æœºåˆ¶ï¼‰\n\n**Objectå’ŒMapçš„æ¯”è¾ƒ**\n\n1. ä¸€èˆ¬åœ°ï¼Œobjectsä¼šè¢«ç”¨äºå°†å­—ç¬¦ä¸²ç±»å‹æ˜ å°„åˆ°æ•°å€¼ã€‚Objectå…è®¸è®¾ç½®é”®å€¼å¯¹ã€æ ¹æ®é”®è·å–å€¼ã€åˆ é™¤é”®ã€æ£€æµ‹æŸä¸ªé”®æ˜¯å¦å­˜åœ¨ã€‚è€ŒMapå…·æœ‰æ›´å¤šçš„ä¼˜åŠ¿ã€‚\n2. Objectçš„é”®å‡ä¸ºStringsç±»å‹ï¼Œåœ¨Mapé‡Œé”®å¯ä»¥æ˜¯ä»»æ„ç±»å‹ã€‚\n3. å¿…é¡»æ‰‹åŠ¨è®¡ç®—Objectçš„å°ºå¯¸ï¼Œä½†æ˜¯å¯ä»¥å¾ˆå®¹æ˜“åœ°è·å–ä½¿ç”¨Mapçš„å°ºå¯¸ã€‚\n4. Mapçš„éå†éµå¾ªå…ƒç´ çš„æ’å…¥é¡ºåºã€‚\n5. Objectæœ‰åŸå‹ï¼Œæ‰€ä»¥æ˜ å°„ä¸­æœ‰ä¸€äº›ç¼ºçœçš„é”®ã€‚ï¼ˆå¯ä»¥ç†è§£ä¸ºmap = Object.create(null)ï¼‰ã€‚\n\nå¦‚æœé”®åœ¨è¿è¡Œæ—¶æ‰èƒ½çŸ¥é“ï¼Œæˆ–è€…æ‰€æœ‰çš„é”®ç±»å‹ç›¸åŒï¼Œæ‰€æœ‰çš„å€¼ç±»å‹ç›¸åŒï¼Œé‚£å°±ä½¿ç”¨Mapã€‚\nå¦‚æœéœ€è¦å°†åŸå§‹å€¼å­˜å‚¨ä¸ºé”®ï¼Œåˆ™ä½¿ç”¨Mapï¼Œå› ä¸ºObjectå°†æ¯ä¸ªé”®è§†ä¸ºå­—ç¬¦ä¸²ï¼Œä¸ç®¡å®ƒæ˜¯ä¸€ä¸ªæ•°å­—å€¼ã€å¸ƒå°”å€¼è¿˜æ˜¯ä»»ä½•å…¶ä»–åŸå§‹å€¼ã€‚\nå¦‚æœéœ€è¦å¯¹ä¸ªåˆ«å…ƒç´ è¿›è¡Œæ“ä½œï¼Œä½¿ç”¨Objectã€‚\n\n## Seté›†åˆ(ç±»ä¼¼æ•°ç»„ï¼Œæˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€ä¸”æ— åºçš„)\n```javascript\nvar mySet = new Set();\nmySet.add(1);\nmySet.add(\"some text\");\nmySet.add(\"foo\");\n\nmySet.has(1); // true\nmySet.delete(\"foo\");\nmySet.size; // 2\nmySet.clear(); // æ¸…ç©ºé›†åˆ\n\nfor (let item of mySet) console.log(item);\n// 1\n// \"some text\"\n\nmySet2 = new Set([1,2,2,4]);\nArray.from(mySet2);  // [1,2,3] å¸¸ç”¨æ¥å»é‡\n\n// argumentå¯¹è±¡ï¼ˆç±»æ•°ç»„ï¼‰è½¬æˆæ•°ç»„\n// Array.from({0:111,1:222,2:333,length:3}) [111,222,333]\n```\n\n### WeakSetï¼ˆç±»ä¼¼Setï¼Œæˆå‘˜éƒ½æ˜¯å¯¹è±¡ï¼Œå¼±å¼•ç”¨ï¼‰\nWeakSet å¯¹è±¡ä¸­å‚¨å­˜çš„å¯¹è±¡å€¼éƒ½æ˜¯è¢«å¼±å¼•ç”¨çš„ï¼Œå³åƒåœ¾å›æ”¶æœºåˆ¶ä¸è€ƒè™‘ WeakSet å¯¹è¯¥å¯¹è±¡çš„åº”ç”¨ï¼Œå¦‚æœæ²¡æœ‰å…¶ä»–çš„å˜é‡æˆ–å±æ€§å¼•ç”¨è¿™ä¸ªå¯¹è±¡å€¼ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡å°†ä¼šè¢«åƒåœ¾å›æ”¶æ‰ï¼ˆä¸è€ƒè™‘è¯¥å¯¹è±¡è¿˜å­˜åœ¨äº WeakSet ä¸­ï¼‰ï¼Œæ‰€ä»¥ï¼ŒWeakSet å¯¹è±¡é‡Œæœ‰å¤šå°‘ä¸ªæˆå‘˜å…ƒç´ ï¼Œå–å†³äºåƒåœ¾å›æ”¶æœºåˆ¶æœ‰æ²¡æœ‰è¿è¡Œï¼Œè¿è¡Œå‰åæˆå‘˜ä¸ªæ•°å¯èƒ½ä¸ä¸€è‡´ï¼Œéå†ç»“æŸä¹‹åï¼Œæœ‰çš„æˆå‘˜å¯èƒ½å–ä¸åˆ°äº†ï¼ˆè¢«åƒåœ¾å›æ”¶äº†ï¼‰ï¼ŒWeakSet å¯¹è±¡æ˜¯æ— æ³•è¢«éå†çš„ï¼ˆES6 è§„å®š WeakSet ä¸å¯éå†ï¼‰ï¼Œä¹Ÿæ²¡æœ‰åŠæ³•æ‹¿åˆ°å®ƒåŒ…å«çš„æ‰€æœ‰å…ƒç´ ã€‚\n\n**Arrayå’ŒSetçš„æ¯”è¾ƒ**\n\n1. æ•°ç»„ä¸­ç”¨äºåˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨çš„indexOf å‡½æ•°æ•ˆç‡ä½ä¸‹ã€‚\n2. Setå¯¹è±¡å…è®¸æ ¹æ®å€¼åˆ é™¤å…ƒç´ ï¼Œè€Œæ•°ç»„ä¸­å¿…é¡»ä½¿ç”¨åŸºäºä¸‹æ ‡çš„ splice æ–¹æ³•ã€‚\n3. æ•°ç»„çš„indexOfæ–¹æ³•æ— æ³•æ‰¾åˆ°NaNå€¼ã€‚\n4. Setå¯¹è±¡å­˜å‚¨ä¸é‡å¤çš„å€¼ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‰‹åŠ¨å¤„ç†åŒ…å«é‡å¤å€¼çš„æƒ…å†µã€‚\n5. æ•°ç»„æ˜¯ç‰¹æ®Šçš„å¯¹è±¡,å¯¹è±¡æ˜¯å…³è”æ•°ç»„ å­—ç¬¦ä¸²æ˜¯ç‰¹æ®Šçš„æ•°ç»„\n6. æ–¹æ‹¬å¼§å–å€¼ä¸ºåŠ¨æ€åˆ¤å®š[]ï¼Œæ•°å­—éæœ‰æ•ˆçš„jsæ ‡è¯†ç¬¦   \n\n## setterå’Œgetter (get setä¿®é¥°function)\n```javascript\nvar o = {\n  a: 7,\n  get b() { \n    return this.a + 1;\n  },\n  set c(x) {\n    this.a = x / 2\n  }\n};\n\nconsole.log(o.a); // 7\nconsole.log(o.b); // 8 å–bå€¼æ—¶è°ƒç”¨\no.c = 50;         // ç»™cè®¾ç½®å€¼è°ƒç”¨\nconsole.log(o.a); // 25\n-----------------------\nvar o = {\n  a: 7,\n  b:function(){ \n    return this.a + 1;\n  }\n};\n\nconsole.log(o.b()); // 8\n```\n\n## è®¿é—®æ‰€æœ‰å¯æšä¸¾å¯¹è±¡å±æ€§\n1. for in æ— åº\n2. Object.keys() ä¸åŒ…æ‹¬åŸå‹çš„å±æ€§åæ•°ç»„\n3. Object.getOwnPropertyNames()\n\n## Symbol(åŸå§‹æ•°æ®ç±»å‹) ä¸å¯æšä¸¾çš„ ç¬¦å·ç±»å‹\n- åº”ç”¨äºå¯¹è±¡çš„å±æ€§,Symbolç±»å‹çš„å±æ€§å…·æœ‰ä¸€å®šçš„éšè—æ€§ã€‚\n```javascript\nvar  myPrivateMethod  = Symbol(); // ä¸èƒ½ä½¿ç”¨new Symbol()åˆ›å»ºï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å®Œæ•´çš„ç±»å±äºåŸºæœ¬ç±»å‹\nthis[myPrivateMethod] = function() {...};\n```\n\nfor in å’Œ Object.getOwnPropertyNames()è®¿é—®ä¸åˆ°ï¼Œåªèƒ½é€šè¿‡myPrivateMethodæˆ–è€…Object.getOwnPropertySymbols()æ¥è®¿é—®\n\n```javascript\nSymbol(\"foo\") !== Symbol(\"foo\") // true\nconst foo = Symbol()\nconst bar = Symbol()\ntypeof foo === \"symbol\" // true\ntypeof bar === \"symbol\" // true\nlet obj = {}\nobj[foo] = \"foo\"\nobj[bar] = \"bar\"\nJSON.stringify(obj) // {}\nObject.keys(obj) // []\nObject.getOwnPropertyNames(obj) // []\nObject.getOwnPropertySymbols(obj) // [ foo, bar ]\n\nSymbol.for(\"foo\"); // åˆ›å»ºä¸€ä¸ª symbol å¹¶æ”¾å…¥ symbol æ³¨å†Œè¡¨ä¸­ï¼Œé”®ä¸º \"foo\"\nSymbol.for(\"foo\"); // ä» symbol æ³¨å†Œè¡¨ä¸­è¯»å–é”®ä¸º\"foo\"çš„ symbol\nSymbol.for(\"bar\") === Symbol.for(\"bar\"); // trueï¼Œè¯æ˜äº†ä¸Šé¢è¯´çš„\n\n// åˆ›å»ºä¸€ä¸ª symbol å¹¶æ”¾å…¥ Symbol æ³¨å†Œè¡¨ï¼Œkey ä¸º \"foo\"\nvar globalSym = Symbol.for(\"foo\"); \nSymbol.keyFor(globalSym); // \"foo\"\n```\n\n```js\nlet name = Symbol('name');\nlet obj = {\n  age:22,\n  [name]:'Joh'\n};\n\nconsole.log(Object.keys(obj)); // æ‰“å°ä¸å‡º ç±»å‹ä¸ºSymbolçš„[name]å±æ€§\n\n// ä½¿ç”¨for-inä¹Ÿæ‰“å°ä¸å‡º ç±»å‹ä¸ºSymbolçš„[name]å±æ€§\nfor(var k in obj) {\n  console.log(k);\n}\n\n// ä½¿ç”¨ Object.getOwnPropertyNames åŒæ ·æ‰“å°ä¸å‡º ç±»å‹ä¸ºSymbolçš„[name]å±æ€§\nconsole.log(Object.getOwnPropertyNames(obj)); \n\n// ä½¿ç”¨ Object.getOwnPropertySymbols å¯ä»¥\nvar key = Object.getOwnPropertySymbols(obj)[0];\nconsole.log(obj[key]); // Joh\n```\n- ä½¿ç”¨Symbol.iteratorè¿­ä»£å™¨æ¥é€ä¸ªè¿”å›æ•°ç»„çš„å•é¡¹\n```js\net arr = ['a', 'b', 'c'];\nvar iterator = arr[Symbol.iterator]();\n// next æ–¹æ³•è¿”å›doneè¡¨ç¤ºæ˜¯å¦å®Œæˆ\nconsole.log(iterator.next()); // {value: \"a\", done: false}\nconsole.log(iterator.next()); // {value: \"b\", done: false}\nconsole.log(iterator.next()); // {value: \"c\", done: false}\nconsole.log(iterator.next()); // {value: undefined, done: true}\nconsole.log(iterator.next()); // {value: undefined, done: true}\n```\n\n## Proxy ä»£ç†\n`let p= new Proxy(target,handler)`\n- target\nç”¨ProxyåŒ…è£…çš„ç›®æ ‡å¯¹è±¡ï¼ˆå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬åŸç”Ÿæ•°ç»„ï¼Œå‡½æ•°ï¼Œç”šè‡³å¦ä¸€ä¸ªä»£ç†ï¼‰ã€‚\n\n- handler\nä¸€ä¸ªå¯¹è±¡ï¼Œå…¶å±æ€§æ˜¯å½“æ‰§è¡Œä¸€ä¸ªæ“ä½œæ—¶å®šä¹‰ä»£ç†çš„è¡Œä¸ºçš„å‡½æ•°ã€‚\n\n```javascript\n// è®¾ç½®ç¼ºçœå€¼\nlet handler = {\n    get: function(target, name){\n        return name in target ? target[name] : 37;\n    }\n};\n\nlet p = new Proxy({}, handler);\n\np.a = 1;\np.b = undefined;\n\nconsole.log(p.a, p.b);    // 1, undefined\n\nconsole.log('c' in p, p.c);    // false, 37\n\n// è½¬å‘ä»£ç†\nlet target = {};\nlet p = new Proxy(target, {});\n\np.a = 37;   // æ“ä½œè½¬å‘åˆ°ç›®æ ‡\n\nconsole.log(target.a);    // 37. æ“ä½œå·²ç»è¢«æ­£ç¡®åœ°è½¬å‘\n\n// demo\nlet book  = {\"name\":\"ã€ŠES6åŸºç¡€ç³»åˆ—ã€‹\",\"price\":56 };\nlet proxy = new Proxy(book,{\n    get:function(target,property){\n        if(property === \"name\"){\n            return \"ã€Šå…¥é—¨åˆ°æ‡µé€¼ã€‹\";\n        }else{\n            return target[property];\n        }\n    },\n    set:function(target,property,value){\n        if(property === 'price'){\n            target[property] = 56;\n        }\n    }\n})\n```\n\n## ç”Ÿæˆå™¨ generator \nfunction* æ¥ä¿®é¥°GeneratorFunctionå‡½æ•°\n\n```javascript\nfunction* idMaker() {\n  var index = 0;\n  while(true)\n    yield index++;\n}\n\nvar gen = idMaker();\n\nconsole.log(gen.next().value); // 0\nconsole.log(gen.next().value); // 1\nconsole.log(gen.next().value); // 2\n// ...\n```\n\nå¯¹è±¡å®ç°è¿­ä»£è¡Œä¸º\n\n```javascript\nvar myIterable = {};\nmyIterable[Symbol.iterator] = function* () {\n    yield 1;\n    yield 2;\n    yield 3;\n};\n\nfor (let value of myIterable) { \n    console.log(value); \n}\n// 1\n// 2\n// 3\n\nor\n[...myIterable]; // [1, 2, 3]\n```\n\n## 3è¡Œå®ç°Promise\n```javascript\nfunction Promise (fn) {\n    this.then = cb => this.cb = cb\n    this.resolve = data => this.cb(data)\n    fn(this.resolve)\n}\n// ä½¿ç”¨\nnew Promise((resolve) => {\n    setTimeout(() => {\n        resolve(\"å»¶æ—¶æ‰§è¡Œ\")\n    }, 1000)\n}).then((data) => {\n    console.log(data)\n})\n\nfunction Promise(fn) {\n  var value = null,\n      callbacks = [];  //callbacksä¸ºæ•°ç»„ï¼Œå› ä¸ºå¯èƒ½åŒæ—¶æœ‰å¾ˆå¤šä¸ªå›è°ƒ\n\n  this.then = function (onFulfilled) {\n      callbacks.push(onFulfilled);\n  };\n\n  function resolve(value) {\n      callbacks.forEach(function (callback) {\n          callback(value);\n      });\n  }\n\n  fn(resolve);\n}\n```\n- ç®€å•ç‰ˆ\n```js\nfunction myPromise(constructor) {\n    let self = this;\n    self.status = \"pending\";\n    // resolvedæ—¶å€™çš„å€¼\n    self.value = undefined;\n    // rejectedæ—¶å€™çš„å€¼\n    self.reason = undefined;\n    // å­˜æ”¾æˆåŠŸå›è°ƒçš„æ•°ç»„\n    self.onResolveCallbacks = [];\n    // å­˜æ”¾å¤±è´¥å›è°ƒçš„æ•°ç»„\n    self.onRejectedCallbacks = [];\n    function resolve(value) {\n        if(self.status === 'pending') {\n            self.value = value;\n            self.status = \"resolved\";\n            self.onResolveCallbacks.forEach(cb => cb(self.value))\n        }\n    }\n    function reject(reason) {\n        if(self.status === 'pending') {\n            self.reason = reason;\n            self.status = \"rejected\";\n            self.onRejectedCallbacks.forEach(cb => cb(self.value))\n        }\n    }\n    // æ•è·æ„é€ å¼‚å¸¸\n    try {\n        constructor(resolve, reject);\n    } catch(e) {\n        reject(e);\n    }\n}\n\nmyPromise.prototype.then = function(onFulfilled, onRejected) {\n  // let self = this;\n  // switch(self.status) {\n  //     case \"resolved\":\n  //         resolved(self.value);\n  //         break;\n  //     case \"rejected\":\n  //         rejected(self.reason);\n  //         break;\n  //     default:\n\n  // å¦‚æœæˆåŠŸå’Œå¤±è´¥çš„å›è°ƒæ²¡æœ‰ä¼ ï¼Œè¡¨ç¤ºè¿™ä¸ªthenæ²¡æœ‰ä»»ä½•é€»è¾‘ï¼Œåªè´Ÿè´£æŠŠå€¼å¾€åæŠ›\n  onFulfilled = typeof onFulfilled == 'function' ? onFulfilled : value => value\n  onRejected = typeof onRejected == 'function' ? onRejected : reason => { throw reason }\n  let self = this;\n  let promise2;\n  // å®ç°é“¾å¼è°ƒç”¨ï¼Œæ¯ä¸€ç§çŠ¶æ€éƒ½è¦è¿”å›çš„æ˜¯ä¸€ä¸ªpromiseå®ä¾‹\n  if(self.status == \"resolved\"){ // å¦‚æœpromiseçŠ¶æ€å·²ç»æ˜¯æˆåŠŸæ€ï¼ŒonFulfilledç›´æ¥å–å€¼\n    return promise2 = new Promise(function(resolve, reject){\n      setTimeout(function(){  // ä¿è¯è¿”å›çš„promiseæ˜¯å¼‚æ­¥\n        try{\n          onFulfilled(self.value)\n        } catch (e){\n          //  å¦‚æœæ‰§è¡ŒæˆåŠŸçš„å›è°ƒè¿‡ç¨‹ä¸­å‡ºé”™ï¼Œç”¨é”™è¯¯åŸå› æŠŠpromise2 reject\n          reject(e)\n        }\n      })\n    })\n  }\n  if(self.status == \"rejected\"){\n    return promise2 = new Promise(function(resolve, reject){\n      setTimeout(function(){\n        try{\n          onRejected(self.reason)\n        } catch (e){\n          reject(e)\n        }\n      })\n    })\n  }\n  if(self.status === \"pending\"){\n    return promise2 = new Promise(function(resolve, reject){\n      // pending çŠ¶æ€æ—¶å°±ä¼šæŠŠæ‰€æœ‰çš„å›è°ƒå‡½æ•°éƒ½æ·»åŠ åˆ°å®ä¾‹ä¸­çš„ä¸¤ä¸ªå †æ ˆä¸­æš‚å­˜ï¼Œç­‰çŠ¶æ€æ”¹å˜åä¾æ¬¡æ‰§è¡Œï¼Œå…¶å®è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯è§‚å¯Ÿè€…æ¨¡å¼\n      self.onResolveCallbacks.push(function(){\n        setTimeout(function(){\n          try{\n            onFulfilled(self.value)\n          } catch(e){\n            reject(e)\n          }\n        })\n      })\n      self.onRejectCallbacks.push(function(){\n        setTimeout(function(){\n          try{\n            onRejected(self.reason)\n          } catch(e){\n            reject(e)\n          }\n        })\n      })\n    })\n  }\n}\n```\n\n## ç°ä¸€ä¸ªå‡½æ•°ï¼Œå°†ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­çš„ç©ºæ ¼æ›¿æ¢æˆâ€œ%20â€\n```javascript\nfunction convertSpace2percent20(str){\n  return str.replace(/\\s+?/g,\"%20\"); //å¼€å¯éè´ªå©ªæ¨¡å¼\n}\n\nconvertSpace2percent20(\"hellow world\")\n// \"hellow%20world\"\n```\n\n## var obj = { 1: \"Hello\", 2: \"World\" }æ‰“å°Hello World\n```javascript\nvar obj = {\n    1: \"Hello\",\n    2: \"World\"\n};\n\nvar str = '';\n\n// æ–¹æ³•1\nfor (var i = 1; i < 3; i++) {\n\tstr += obj[i] + \" \"; //æ³¨æ„ä¸èƒ½ä½¿ç”¨obj.i\n}\n\n// æ–¹æ³•2\nfor (var key of Object.keys(obj)) {\n\tstr += obj[key] + \" \";\n}\n\n// æ–¹æ³•3\nfor (let i in obj) {\n  str += obj[i] + \" \"; \n}\n\n// æ–¹æ³•4\nObject.values(obj).join(\" \")\n```\n\n## å¾ªç¯\n- while - åªè¦æŒ‡å®šçš„æ¡ä»¶æˆç«‹ï¼Œåˆ™å¾ªç¯æ‰§è¡Œä»£ç å—\n- do...while - é¦–å…ˆæ‰§è¡Œä¸€æ¬¡ä»£ç å—ï¼Œç„¶ååœ¨æŒ‡å®šçš„æ¡ä»¶æˆç«‹æ—¶é‡å¤è¿™ä¸ªå¾ªç¯\n- for - å¾ªç¯æ‰§è¡Œä»£ç å—æŒ‡å®šçš„æ¬¡æ•°\n- foreach - æ ¹æ®æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ¥å¾ªç¯ä»£ç å—\n### forEachç­‰å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°çš„ç”¨æ³•\nforEachå‡½æ•°ç”¨å¾—å¹³æ—¶ç”¨å¾—æ¯”è¾ƒå¤šï¼Œä½†æ˜¯ä»æ¥æ²¡æƒ³åˆ°forEachå‡½æ•°è¿˜æœ‰ç¬¬äºŒä¸ªå‚æ•°ã€‚\n\nç®€å•ç‚¹æ¥è¯´ï¼Œå°±æ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ç¬¬äºŒä¸ªå‚æ•°æ¥æŒ‡å®šå‡½æ•°é‡Œçš„thisçš„å€¼ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨ç®­å¤´å‡½æ•°æˆ–è€…åœ¨å¤–é¢å®šä¹‰var that = this;ç­‰æ“ä½œã€‚\n\n```javascript\nvar obj = {\n    name: \"å°æ˜\",\n    say: function() {\n        console.log(this.name); // \"å°æ˜\"\n    },\n    think: function() {\n        var arr = [1];\n        arr.forEach(function(item) {\n            console.log(this); // window\n        })\n        console.log('---------')\n        arr.forEach(function(item) {\n            console.log(this); // obj\n        }, this)\n    }\n}\n\nobj.say();\nobj.think();\n\n[3,2,4,1].sort((a,b)=>{\n    return a > b ? 1 : -1; // return a-b\n})\n```\n\n## æ•°ç»„æ‰å¹³åŒ–(å°†å¤šç»´æ•°ç»„å±•å¼€ä¸ºä¸€ç»´æ•°ç»„)\n```javascript\n//  es6 é€’å½’+åˆ¤æ–­æ˜¯ä¸æ˜¯æ•°ç»„ ä¹Ÿå¯ä»¥ä½¿ç”¨reduceè¿›è¡Œéå†\nconst flattenES6 = (arr) => {\n  let result = [];\n  arr.forEach((item, i, arr) => {\n    if (Array.isArray(item)) {\n      result = result.concat(flattenES6(item));\n    } else {\n      result.push(arr[i])\n    }\n  })\n  return result;\n};\nconsole.log(flattenES6([1, [2, [3, [4]], 5]]))\n\n// some+concat\nArray.prototype.flat02 = function () {\n  let arr = this\n  while (arr.some(item => Array.isArray(item))) {\n    arr = [].concat(...arr)\n  }\n  return arr\n}\n\n\n// toStringæ–¹æ³•\nconst flattenES6 = (arr) => arr.toString().split(',').map((item) => +item);\nconsole.log(flattenES6([1, [2, [3, [4]], 5]]))\n\n// ...\nvar entries = [1, [2, 5], [6, 7], 9];\nvar flat_entries = [].concat(...entries);\n\n// flatæ–¹æ³• è¿”å›æ–°æ•°ç»„ï¼Œä¸ä¼šæ”¹å˜åŸæ•°ç»„\n[1, 2, [3, 4]].flat()\n// [1, 2, 3, 4] é»˜è®¤æ‹‰å¹³ä¸€å±‚\n\n[1, 2, [3, [4, 5]]].flat(2)\n// [1, 2, 3, 4, 5] æ‹‰å¹³ä¸¤å±‚çš„åµŒå¥—æ•°ç»„\n\n[1, [2, [3]]].flat(Infinity)\n// Infinityæ— è®ºå¤šå°‘å±‚éƒ½æ‹‰å¹³\n\n// flatMap()æ–¹æ³•å¯¹åŸæ•°ç»„çš„æ¯ä¸ªæˆå‘˜æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼Œç›¸å½“äºæ‰§è¡ŒArray.prototype.map(),ç„¶åå¯¹è¿”å›å€¼ç»„æˆçš„æ•°ç»„æ‰§è¡Œflat()æ–¹æ³•ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¸æ”¹å˜åŸæ•°ç»„\n// ç›¸å½“äº [[2, 4], [3, 6], [4, 8]].flat() flatMap()åªèƒ½å±•å¼€ä¸€å±‚æ•°ç»„\n[2, 3, 4].flatMap((x) => [x, x * 2])\n// [2, 4, 3, 6, 4, 8]\n```\n\n## è‡ªå®šä¹‰é”™è¯¯ç±»å‹\n```javascript\n// ES6\nclass CustomError extends Error {\n  constructor(message) {\n    super(message)\n    this.name = 'CustomError'\n  }\n}\n\n// ES5\nfunction CustomError(message) {\n  this.name = 'CustomError'\n  this.message = message\n  Error.captureStackTrace(this, CustomError)\n}\n\nCustomError.prototype = new Error()\nCustomError.prototype.constructor = CustomError\n\n// imgæ ‡ç­¾æ¥åŸ‹ç‚¹å¤„ç†é”™è¯¯æ—¥å¿—\nfunction logError(msg) {\n  const img = new Image()\n  img.src = `/log?${encodeURIComponent(msg)}`\n}\n```\n\n## å‘½ä»¤å¼ç¼–ç¨‹å’Œå£°æ˜å¼ç¼–ç¨‹\n- çº¯ç²¹æ€§ï¼šçº¯å‡½æ•°ä¸æ”¹å˜é™¤å½“å‰ä½œç”¨åŸŸä»¥å¤–çš„å€¼;\n- æ•°æ®ä¸å¯å˜æ€§: Immutable\n\n```javascript\n// åé¢ç¤ºä¾‹\nlet a = 0\nconst add = (b) => a = a + b // ä¸¤æ¬¡ add(1) ç»“æœä¸ä¸€è‡´\n\n// æ­£ç¡®ç¤ºä¾‹\nconst add = (a, b) => a + b\n```\n\n- å‡½æ•°æŸ¯é‡ŒåŒ– å°†å¤šä¸ªå…¥å‚çš„å‡½æ•°è½¬åŒ–æˆ1ä¸ªå…¥å‚çš„å‡½æ•°\n```javascript\nconst add = a => b => c => a + b + c\nadd(1)(2)(3)\n```\né—®é¢˜ï¼šsum(2, 3)å®ç°sum(2)(3)çš„æ•ˆæœ\n```js\n// é—­åŒ…\nfunction sub_curry(fn) {\n    let args = [].slice.call(arguments, 1);\n    return function() {\n        return fn.apply(this, args.concat([].slice.call(arguments)));\n    };\n}\n\nfunction curry(fn, length) {\n    // åˆå§‹åŒ–æ—¶èµ‹å€¼ä¸ºfnçš„å½¢å‚ä¸ªæ•°ï¼Œç”¨ä»¥æ ‡ç¤ºå‰©ä½™éœ€è¦ä¼ å…¥å‚æ•°çš„ä¸ªæ•°\n    length = length || fn.length;\n\n    const slice = Array.prototype.slice;\n\n    return function() {\n        if (arguments.length < length) {\n            const combined = [fn].concat(slice.call(arguments));\n            // length - arguments.lengthç”¨ä»¥è®¡æ•°å½“å‰å·²ä¼ å…¥çš„å‚æ•°\n            return curry(sub_curry.apply(this, combined), length - arguments.length);\n        } else {\n            return fn.apply(this, arguments);\n        }\n    };\n}\n\nfunction add(a, b) {\n  return a + b\n}\nvar sum = curry(add)\n```\n\n\n- åå‡½æ•° å°†å¤šä¸ªå…¥å‚çš„å‡½æ•°è½¬åŒ–æˆä¸¤éƒ¨åˆ†(è¿”å›ä¸€ä¸ªåŒ…å«é¢„å¤„ç†å‚æ•°çš„æ–°å‡½æ•°)\n```javascript\nconst add = a => (b, c) => a + b + c\nadd(1)(2, 3)\n```\n\n- ç»„åˆå‡½æ•°\n```javascript\nconst add = (x) => x + x\nconst mult = (x) => x * x\n\nconst addAndMult = (x) => add(mult(x))\n```\n\n## å®ç°bindå‡½æ•°\n```javascript\n// ç¬¬ä¸€ç§: å€ŸåŠ© call/apply\nFunction.prototype.bind1 = function (context) {\n  const self = this\n  return function () {\n    return self.call(context)\n  }\n}\n\n// æµ‹è¯•:\nconst obj = {\n  value: 'cosyer',\n}\nfunction testBind() {\n  console.log(this.value)\n}\nconst resultBind = testBind.bind1(obj)\nresultBind() // cosyer\n\n// ç¬¬äºŒç§: å€ŸåŠ© arguments\nFunction.prototype.bind2 = function (context) {\n  const arr = Array.prototype.slice.call(arguments, 1)\n  const self = this\n  return function () {\n    const restArr = Array.prototype.slice.call(arguments)\n    return self.apply(context, arr.concat(restArr))\n  }\n}\n\n// è€ƒè™‘åˆ°åŸå‹é“¾ å› ä¸ºåœ¨new ä¸€ä¸ªbindè¿‡ç”Ÿæˆçš„æ–°å‡½æ•°çš„æ—¶å€™ï¼Œå¿…é¡»çš„æ¡ä»¶æ˜¯è¦ç»§æ‰¿åŸå‡½æ•°çš„åŸå‹\nFunction.prototype.bind2New = function(context){\n  var arr = Array.prototype.slice.call(arguments, 1);\n  var self = this;\n  var bound = function() {\n    restArr = restArr.concat(Array.prototype.slice.call(arguments));\n    return self.apply(context, restArr);\n  }\n  var F = function(){}\n  // è¿™é‡Œéœ€è¦ä¸€ä¸ªå¯„ç”Ÿç»„åˆç»§æ‰¿\n  F.prototype = context.prototype;\n  bound.prototype = new F();\n  // bound.prototype = Object.create(context.prototype);\n  return bound;\n}\n// è¿™ç§æ–¹å¼çš„å®ç°å…¶å®æ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–çš„å˜ç‰ˆ\n\n// æ¯”å¦‚åœ¨ç›‘å¬äº‹ä»¶æ—¶å¯ä»¥è¿™æ ·å­ç”¨:\n\ndom.addEventListener('click', fn.bind(this))\n// è¿›è¡Œå¦‚ä¸‹æµ‹è¯•:\n\nconst obj2 = {\n  value: 'cosyer',\n}\nfunction testBind2(age, gender) {\n  console.log(this.value) // cosyer\n  console.log(age)        // 23\n  console.log(gender)     // male\n}\nconst resultBind2 = testBind2.bind2(obj2, 23)\nresultBind2('male')\n\n// ç¬¬ä¸‰ç§: åŒºåˆ†ç¯å¢ƒ, æ˜¯æ™®é€šè°ƒç”¨è¿˜æ˜¯ new è°ƒç”¨\nFunction.prototype.bind3 = function (context) {\n  const arr = Array.prototype.slice.call(arguments, 1)\n  const self = this\n  return function () {\n    const restArr = Array.prototype.slice.call(arguments)\n    return self.apply(this !== windows ? this : context, arr.concat(restArr))\n  }\n}\n\n// æµ‹è¯•: ä½¿ç”¨ new ä»¥å this ä¼šæŒ‡å‘ newObj\nconst obj3 = {\n  value: 'cosyer',\n}\nfunction testBind3(age, gender) {\n  console.log(this.value)\n  console.log(age)\n  console.log(gender)\n}\nconst resultBind3 = testBind3.bind3(obj3, 23, 'male')\nconst newObj = new resultBind3()\n```\n\n## callå‡½æ•°çš„å®ç°\n```javascript\n// å¯¹è±¡å±æ€§æŒ‡å‘å‡½æ•°å¹¶è°ƒç”¨\n// å°†å‡½æ•°å¼•ç”¨åˆ°å¯¹è±¡é‡Œ\n// è°ƒç”¨å‡½æ•°\n// åˆ é™¤å¯¹è±¡é‡Œçš„å‡½æ•°\nFunction.prototype.call1 = function (context, ...args) {\n  let key = Symbol('KEY')\n  // æŠŠå‡½æ•°å½“æˆå¯¹è±¡çš„æŸä¸ªæˆå‘˜,(æˆå‘˜åå”¯ä¸€:é˜²æ­¢ä¿®æ”¹åŸå§‹å¯¹è±¡çš„ç»“æ„å€¼)\n  context[key] = this;\n  let result = context[key](...args) // ...args\n  delete context[key]\n  return result\n}\n\nconst obj = {\n  value: 'cosyer',\n}\n\nfunction testCall() {\n  console.log(this.value)\n}\n\nconst resultCall = testCall.call1(obj) // cosyer\n\n// ä¼ å…¥å‡½æ•°çš„å®ç°\nFunction.prototype.call2 = function (context) {\n  const arr = Array.prototype.slice.call(arguments, 1)\n\n  context.fn = this // this æŒ‡å‘å®ä¾‹\n  context.fn(...arr)\n  delete context.fn\n}\n\n// æµ‹è¯•:\nconst obj2 = {\n  value: 'cosyer',\n}\n\nfunction testCall2(age) {\n  console.log(this.value, age) // cosyer 23\n}\n\nconst resultCall = testCall2.call2(obj2, 23)\n```\n\n## ç¨€ç–æ•°ç»„\n```javascript\nvar ary = [0,1,2];\nary[10] = 10;\nary.filter(function(x) { return x === undefined;}); // []\n// 3 - 9 éƒ½æ˜¯æ²¡æœ‰åˆå§‹åŒ–çš„'å‘'!, è¿™äº›ç´¢å¼•å¹¶ä¸å­˜åœ¨ä¸æ•°ç»„ä¸­. åœ¨ array çš„å‡½æ•°è°ƒç”¨çš„// æ—¶å€™æ˜¯ä¼šè·³è¿‡è¿™äº›'å‘'çš„.\n```\n\n## switchä¸¥æ ¼æ¯”è¾ƒ\n```javascript\nfunction showCase(value) {\n    switch(value) {\n    case 'A':\n        console.log('Case A');\n        break;\n    case 'B':\n        console.log('Case B');\n        break;\n    case undefined:\n        console.log('undefined');\n        break;\n    default:\n        console.log('Do not know!');\n    }\n}\nshowCase(new String('A')); // 'Do not know!'\n// switch æ˜¯ä¸¥æ ¼æ¯”è¾ƒ, String å®ä¾‹å’Œ å­—ç¬¦ä¸²ä¸ä¸€æ ·.\n\nfunction showCase2(value) {\n    switch(value) {\n    case 'A':\n        console.log('Case A');\n        break;\n    case 'B':\n        console.log('Case B');\n        break;\n    case undefined:\n        console.log('undefined');\n        break;\n    default:\n        console.log('Do not know!');\n    }\n}\nshowCase2(String('A')); // 'Case A'\n// String ä¸ä»…æ˜¯ä¸ªæ„é€ å‡½æ•° ç›´æ¥è°ƒç”¨è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²å“¦.\n```\n\n## ä¸ºä»€ä¹ˆJSæ˜¯å•çº¿ç¨‹çš„\n> ä¸ç”¨é€”æœ‰å…³ï¼ŒJavaScriptçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œDOM\n> å‡å®šJavaScriptåŒæ—¶æœ‰ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨æŸä¸ªDOMèŠ‚ç‚¹ä¸Šæ·»åŠ å†…å®¹ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹åˆ é™¤äº†è¿™ä¸ªèŠ‚ç‚¹ï¼Œè¿™æ—¶æµè§ˆå™¨åº”è¯¥ä»¥å“ªä¸ªçº¿ç¨‹ä¸ºå‡†ï¼Ÿ\n\nä¸ºäº†åˆ©ç”¨å¤šæ ¸CPUçš„è®¡ç®—èƒ½åŠ›ï¼ŒHTML5æå‡ºWeb Workeræ ‡å‡†ï¼Œå…è®¸JavaScriptè„šæœ¬åˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œä½†æ˜¯å­çº¿ç¨‹å®Œå…¨å—ä¸»çº¿ç¨‹æ§åˆ¶ï¼Œä¸”ä¸å¾—æ“ä½œDOMã€‚æ‰€ä»¥ï¼Œè¿™ä¸ªæ–°æ ‡å‡†å¹¶æ²¡æœ‰æ”¹å˜JavaScriptå•çº¿ç¨‹çš„æœ¬è´¨ã€‚\n\n## å»é‡æ€»é›†ç¯‡\n1. Set\n```javascript\n[...new Set([1,1,2,3])]\nArray.from(new Set([1,1,2,3]))\n```\n\n2. filter\n```javascript\n[1,1,2,3].filter((element,index,array)=>{\n  return array.indexOf(element) === index;\n})\n```\n\n3. Map\n```javascript\nvar set =new Set()\n[1,1,2,3].filter((item)=>{\nreturn !set.has(item)&&set.add(item)\n})\n// ä¸€ä¸ªé“ç†\nvar map =new Map();\n[1,1,2,3].filter((item,index)=>{\nreturn !map.has(item)&&map.set(item,index)\n})\n```\n\n4. åŸºç¡€\n```js\n// ä¸ä½¿ç”¨es6,è€ƒè™‘åˆ°ï¼ˆie6-8ï¼‰indexOfå…¼å®¹æ€§é—®é¢˜\n// å¯¹è±¡å®¹å™¨\nfunction unique(arr) {\n  var ret = []\n  var hash = {}\n\n  for (var i = 0; i < arr.length; i++) {\n    var item = arr[i]\n    // typeof åŒºåˆ† 1 ä¸ â€˜1â€™\n    var key = typeof(item) + item\n    if (hash[key] !== 1) {\n      ret.push(item)\n      hash[key] = 1\n    }\n  }\n  return ret\n}\n\n// æ•°ç»„\nfunction unique(arr) {\n  const temp = []\n  arr.forEach(item => {\n    if (temp.indexOf(item) === -1) {\n      temp.push(item)\n    }\n  })\n  return temp\n}\n```\n\n5. reduce\n```js\nfunction unique(arr) {\n  return arr.reduce((pre, cur) => {\n    !pre.includes(cur) && pre.push(cur)\n    return pre\n  }, [])\n}\n```\n\n## 2å¯¹è±¡\n```javascript\n(2).toString() // '2'\n2 .toString() // '2'\n[(1,2,3)] // [3]\n```\n\n## é€’å½’è¿ç”¨æ–æ³¢é‚£å¥‘æ•°åˆ— js å®ç°\n\n```js\nfunction* fibo()\n{\n    let [pre,curr] = [0,1];\n    for(;;)\n    {\n        yield curr;\n        [pre,curr] = [curr,pre + curr];\n    }\n}\nfor(let i of fibo())\n{\n    if(i > 10000)\n    {\n        break;\n    }\n    console.log(i);\n}\n// å®ç°10000ä»¥å†…çš„æ•°åˆ—\n```\nçˆ¬æ¥¼æ¢¯é—®é¢˜\nåˆå§‹åœ¨ç¬¬ä¸€çº§ï¼Œåˆ°ç¬¬ä¸€çº§æœ‰1ç§æ–¹æ³•(s(1) = 1)ï¼Œåˆ°ç¬¬äºŒçº§ä¹Ÿåªæœ‰ä¸€ç§æ–¹æ³•(s(2) = 1)ï¼Œ ç¬¬ä¸‰çº§(s(3) = s(1) + s(2))\n```js\nfunction cStairs(n) {\n    if(n === 1 || n === 2) {\n        return 1;\n    } else {\n        return cStairs(n-1) + cStairs(n-2)\n    }\n}\n```\n\n## argumentså¯¹è±¡çš„lengthå±æ€§æ˜¾ç¤ºå®å‚çš„ä¸ªæ•°ï¼Œå‡½æ•°çš„lengthå±æ€§æ˜¾ç¤ºå½¢å‚çš„ä¸ªæ•°ã€‚\n\n## åœ¨ä¸æ”¹å˜åŸæ•°ç»„çš„å‰æä¸‹ï¼Œæ·»åŠ æˆ–åˆ é™¤æŸä¸ªå…ƒç´ \n- concat\n```js\nlet arr = [1, 2, 3, 4]\nlet newArr = [].concat(0, arr)\n```\n\n- æ‰©å±•è¿ç®—ç¬¦\n```js\nlet arr = [1, 2, 3, 4]\nlet newArr = [0, ...arr]\n```\n\n- reduce\n```js\nlet arr = [1, 2, 3, 4]\n, newArr = arr.reduce((acc, cur) => {\n  acc.push(cur)\n  return acc\n}, [0])\n```\n\n- slice\n```js\nlet arr = [1, 2, 3, 4]\n, newArr = arr.slice(0, -1)\n```\n### æ€»ç»“Â·å½’çº³\n- ä¸ä¿®æ”¹åŸæ•°ç»„\n - slice\n - concat\n - forEach\n - map\n - every\n - some\n - filter\n - reduce\n - reduceRight\n - keys\n - values\n - entries\n - includes\n - find\n - findIndex\n - flat\n - flatMap\n\n- ä¿®æ”¹åŸæ•°ç»„\n - splice\n - pop\n - push\n - shift\n - unshift\n - sort\n - reverse\n - fill\n - copyWithin\n\n## polyfill(è…»å­)\npolyfill æ˜¯â€œåœ¨æ—§ç‰ˆæµè§ˆå™¨ä¸Šå¤åˆ¶æ ‡å‡† API çš„ JavaScript è¡¥å……â€,å¯ä»¥åŠ¨æ€åœ°åŠ è½½ JavaScript ä»£ç æˆ–åº“ï¼Œåœ¨ä¸æ”¯æŒè¿™äº›æ ‡å‡† API çš„æµè§ˆå™¨ä¸­æ¨¡æ‹Ÿå®ƒä»¬ã€‚\n\n- å¸¸ç”¨çš„æ–¹æ¡ˆ\n> html5shivã€Geolocationã€Placeholder\n","tags":["æ•´ç†"],"categories":["JS"]},{"title":"reduxçŠ¶æ€ä¼ æ’­","url":"%2Freduxstate.html","content":"\n## Reduxä¸‰å¤§æ¦‚å¿µ\n> Redux æ˜¯JavaScriptçŠ¶æ€å®¹å™¨ï¼Œæä¾›å¯é¢„æµ‹åŒ–çš„çŠ¶æ€ç®¡ç†\n\n> action æ™®é€šçš„JSå¯¹è±¡æè¿°å‘ç”Ÿä»€ä¹ˆ\n\n> reducer åªæ˜¯ä¸€ä¸ªæ¥æ”¶ state å’Œ actionï¼Œå¹¶è¿”å›æ–°çš„ state çš„å‡½æ•°\n\nStore â€” æ•°æ®å­˜å‚¨ä¸­å¿ƒï¼ŒåŒæ—¶è¿æ¥ç€Actionså’ŒViewsï¼ˆReact Componentsï¼‰ã€‚\n\n1. Storeéœ€è¦è´Ÿè´£æ¥æ”¶Viewsä¼ æ¥çš„Action\n2. ç„¶åï¼Œæ ¹æ®Action.typeå’ŒAction.payloadå¯¹Storeé‡Œçš„æ•°æ®è¿›è¡Œä¿®æ”¹\n3. æœ€åï¼ŒStoreè¿˜éœ€è¦é€šçŸ¥Viewsï¼Œæ•°æ®æœ‰æ”¹å˜ï¼ŒViewsä¾¿å»è·å–æœ€æ–°çš„Storeæ•°æ®ï¼Œé€šè¿‡setStateè¿›è¡Œé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼ˆre-renderï¼‰ã€‚\n\n### ä¸‰å¤§åŸåˆ™\n\n1. å•ä¸€æ•°æ®æº\n\næ•´ä¸ªåº”ç”¨çš„ state è¢«å‚¨å­˜åœ¨ä¸€æ£µ object tree ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ª object tree åªå­˜åœ¨äºå”¯ä¸€ä¸€ä¸ª store ä¸­ã€‚å’Œæ ¹çº§çš„reducer,æ‹†æˆå¤šä¸ªreducerè€Œä¸æ˜¯å¤šä¸ªstoreã€‚\n\n2. State æ˜¯åªè¯»çš„\n\nå”¯ä¸€æ”¹å˜ state çš„æ–¹æ³•å°±æ˜¯è§¦å‘ actionï¼Œaction æ˜¯ä¸€ä¸ªç”¨äºæè¿°å·²å‘ç”Ÿäº‹ä»¶çš„æ™®é€šå¯¹è±¡ã€‚\n\n3. ä½¿ç”¨çº¯å‡½æ•°æ¥æ‰§è¡Œä¿®æ”¹\n\nä¸ºäº†æè¿° action å¦‚ä½•æ”¹å˜ state tree ï¼Œä½ éœ€è¦ç¼–å†™ reducersã€‚ä¼ é€’æ•°æ® payloadè§„èŒƒã€‚\n\nå½“ state å˜åŒ–æ—¶éœ€è¦è¿”å›å…¨æ–°çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¿®æ”¹ä¼ å…¥çš„å‚æ•°ã€‚\n\n--- \n<!-- more -->\n\n### api\n~~~javascript\n// API æ˜¯ { subscribe, dispatch, getState }ã€‚\nlet store = createStore(counter);\n\n// å¯ä»¥æ‰‹åŠ¨è®¢é˜…æ›´æ–°ï¼Œä¹Ÿå¯ä»¥äº‹ä»¶ç»‘å®šåˆ°è§†å›¾å±‚ã€‚\nstore.subscribe(() =>\n  console.log(store.getState())\n);\n\n// æ”¹å˜å†…éƒ¨ state å”¯ä¸€æ–¹æ³•æ˜¯ dispatch ä¸€ä¸ª actionã€‚\n// action å¯ä»¥è¢«åºåˆ—åŒ–ï¼Œç”¨æ—¥è®°è®°å½•å’Œå‚¨å­˜ä¸‹æ¥ï¼ŒåæœŸè¿˜å¯ä»¥ä»¥å›æ”¾çš„æ–¹å¼æ‰§è¡Œ\nstore.dispatch({ type: 'INCREMENT' });\n// 1\nstore.dispatch({ type: 'INCREMENT' });\n// 2\nstore.dispatch({ type: 'DECREMENT' });\n// 1\n~~~ \n\nä¸è¦å†reduceré‡Œåšä»¥ä¸‹æ“ä½œä¿æŒçº¯å‡€\n\n> ä¿®æ”¹ä¼ å…¥å‚æ•°ï¼›\n\n> æ‰§è¡Œæœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œå¦‚ API è¯·æ±‚å’Œè·¯ç”±è·³è½¬ï¼›\n\n> è°ƒç”¨éçº¯å‡½æ•°ï¼Œå¦‚ Date.now() æˆ– Math.random()ã€‚\n\né€šè¿‡reducerä¿®æ”¹æ•°æ®å¸¦æ¥çš„å¥½å¤„\n1. æ•°æ®æ‹†è§£ => é€šè¿‡å®šä¹‰å¤šä¸ªreducerrå¯¹æ•°æ®è¿›è¡Œæ‹†è§£è®¿é—®æˆ–è€…ä¿®æ”¹ï¼Œæœ€ç»ˆå†é€šè¿‡combineReducerså‡½æ•°å°†é›¶æ•£çš„æ•°æ®æ‹¼è£…å›å»ã€‚\n\n```javascript\nimport { combineReducers } from 'redux';\n\n// å¶å­reducer\nfunction aReducer(state = 1, action) {/*...*/}\nfunction cReducer(state = true, action) {/*...*/}\nfunction eReducer(state = [2, 3], action) {/*...*/}\n\nconst dReducer = combineReducers({\n  e: eReducer\n});\n\nconst bReducer = combineReducers({\n  c: cReducer,\n  d: dReducer\n});\n\n// æ ¹reducer\nconst rootReducer = combineReducers({\n  a: aReducer,\n  b: bReducer\n});\n```\n2. æ•°æ®ä¸å¯å˜\nç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°shouldComponentUpdateè¿›è¡Œåˆ¤æ–­æ˜¯å¦æœ‰å¿…è¦è¿›è¡Œå¯¹è¯¥ç»„ä»¶è¿›è¡Œæ›´æ–°ï¼ˆå³ï¼Œæ˜¯å¦æ‰§è¡Œè¯¥ç»„ä»¶renderæ–¹æ³•ä»¥åŠè¿›è¡Œdiffè®¡ç®—ï¼‰\n\n#### ç»´æŒåº”ç”¨çš„ state\n\n> æä¾› getState() æ–¹æ³•è·å– stateï¼›\n\n> æä¾› dispatch(action) æ–¹æ³•æ›´æ–° stateï¼›å‘é€é€šçŸ¥ï¼›\n\n> é€šè¿‡ subscribe(listener) æ³¨å†Œç›‘å¬å™¨;\n\n> é€šè¿‡ unsubscribe() è¿”å›çš„å‡½æ•°æ³¨é”€ç›‘å¬å™¨ã€‚\n\nçº¯å‡½æ•°æ˜¯è¿™æ ·ä¸€ç§å‡½æ•°ï¼Œå³ç›¸åŒçš„è¾“å…¥ï¼Œæ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡ºã€‚\nstore.dispatchæ–¹æ³•ä¼šè§¦å‘ Reducer çš„è‡ªåŠ¨æ‰§è¡Œã€‚ä¸ºæ­¤ï¼ŒStore éœ€è¦çŸ¥é“ Reducer å‡½æ•°ï¼Œåšæ³•å°±æ˜¯åœ¨ç”Ÿæˆ Store çš„æ—¶å€™ï¼Œå°† Reducer ä¼ å…¥createStoreæ–¹æ³•ã€‚\n\nä¸­é—´ä»¶æä¾›çš„æ˜¯ä½äº action è¢«å‘èµ·ä¹‹åï¼Œåˆ°è¾¾ reducer ä¹‹å‰çš„æ‰©å±•ç‚¹ã€‚\n\n```javascript\nimport { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport createLogger from 'redux-logger';\nimport rootReducer from '../reducers';\n\n// storeæ‰©å±•\nconst enhancer = applyMiddleware(\n  thunk,\n  createLogger()\n);\n\nconst store = createStore(rootReducer, initialState, enhancer);\n```\n\n## react-redux\nRedux æœ¬èº«å’ŒReactæ²¡æœ‰å…³ç³»ï¼Œåªæ˜¯æ•°æ®å¤„ç†ä¸­å¿ƒï¼Œæ˜¯React-Reduxè®©å®ƒä»¬è”ç³»åœ¨ä¸€èµ·ã€‚\n\nReact-Reduxæä¾›ä¸¤ä¸ªæ–¹æ³•ï¼šconnectå’ŒProviderã€‚\n\n### connect\nconnectè¿æ¥Reactç»„ä»¶å’ŒRedux storeã€‚connectå®é™…ä¸Šæ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å·²ä¸ Redux store è¿æ¥çš„ç»„ä»¶ç±»ã€‚\n\n```javascript\nconst VisibleTodoList = connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(TodoList)\n```\n\nTodoListæ˜¯ UI ç»„ä»¶ï¼ŒVisibleTodoListå°±æ˜¯ç”± react-redux é€šè¿‡connectæ–¹æ³•è‡ªåŠ¨ç”Ÿæˆçš„å®¹å™¨ç»„ä»¶ã€‚\n\nmapStateToPropsï¼šä»ReduxçŠ¶æ€æ ‘ä¸­æå–éœ€è¦çš„éƒ¨åˆ†ä½œä¸ºpropsä¼ é€’ç»™å½“å‰çš„ç»„ä»¶ã€‚\nmapDispatchToPropsï¼šå°†éœ€è¦ç»‘å®šçš„å“åº”äº‹ä»¶ï¼ˆactionï¼‰ä½œä¸ºpropsä¼ é€’åˆ°ç»„ä»¶ä¸Šã€‚\n\n### Provide(å°† store é€šè¿‡ context ä¼ å…¥ç»„ä»¶ä¸­)\nProviderå®ç°storeçš„å…¨å±€è®¿é—®ï¼Œå°†storeä¼ ç»™æ¯ä¸ªç»„ä»¶ã€‚\nåŸç†ï¼šä½¿ç”¨Reactçš„contextï¼Œcontextå¯ä»¥å®ç°è·¨ç»„ä»¶ä¹‹é—´çš„ä¼ é€’ã€‚\n\n### reducerçš„æ‹†åˆ†å’Œé‡æ„\néšç€é¡¹ç›®è¶Šå¤§ï¼Œå¦‚æœå°†æ‰€æœ‰çŠ¶æ€çš„ reducer å…¨éƒ¨å†™åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œå°†ä¼š éš¾ä»¥ç»´æŠ¤ï¼›å¯ä»¥å°† reducer è¿›è¡Œæ‹†åˆ†ï¼Œä¹Ÿå°±æ˜¯ å‡½æ•°åˆ†è§£ï¼Œæœ€ç»ˆå†ä½¿ç”¨`combineReducers()`è¿›è¡Œé‡æ„åˆå¹¶ï¼›\n\n### å¼‚æ­¥Action\nç”±äº Reducer æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„çº¯å‡½æ•°ï¼Œå› æ­¤æ— æ³•åœ¨ Reducer ä¸­è¿›è¡Œæ•°æ®çš„è¯·æ±‚ï¼Œéœ€è¦å…ˆè·å–æ•°æ®ï¼Œå†dispatch(Action)å³å¯ï¼Œä¸‹é¢æ˜¯ä¸‰ç§ä¸åŒçš„å¼‚æ­¥å®ç°:\n- [redex-thunk](https://github.com/reduxjs/redux-thunk)\n- [redux-saga](https://github.com/redux-saga/redux-saga)\n- [redux-observable](https://github.com/redux-observable/redux-observable)\n\n## ä½¿ç”¨ å¤æ‚æ€§ æ•°æ®äº¤äº’ ç»“æ„å¤æ‚ç¹ç å¤§å‹\n- \"å¦‚æœä½ ä¸çŸ¥é“æ˜¯å¦éœ€è¦ Reduxï¼Œé‚£å°±æ˜¯ä¸éœ€è¦å®ƒã€‚\"\n- \"åªæœ‰é‡åˆ° React å®åœ¨è§£å†³ä¸äº†çš„é—®é¢˜ï¼Œä½ æ‰éœ€è¦ Reduxã€‚\"\n","tags":["redux"],"categories":["JS"]},{"title":"å“åº”å¼ç½‘é¡µè®¾è®¡","url":"%2Fresponsive.html","content":"\n## ä»€ä¹ˆæ˜¯å“åº”å¼ç½‘ç«™\n\nå“åº”å¼å¸ƒå±€æ˜¯Ethan Marcotteåœ¨2010å¹´5æœˆä»½æå‡ºçš„ä¸€ä¸ªæ¦‚å¿µï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä¸€ä¸ªç½‘ç«™èƒ½å¤Ÿå…¼å®¹å¤šä¸ªç»ˆç«¯â€”â€”è€Œä¸æ˜¯ä¸ºæ¯ä¸ªç»ˆç«¯åšä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬ã€‚è¿™ä¸ªæ¦‚å¿µæ˜¯ä¸ºè§£å†³ç§»åŠ¨äº’è”ç½‘æµè§ˆè€Œè¯ç”Ÿçš„ã€‚Webè®¾è®¡åº”è¯¥åšåˆ°æ ¹æ®ä¸åŒè®¾å¤‡ç¯å¢ƒè‡ªåŠ¨å“åº”åŠè°ƒæ•´ã€‚å½“ç„¶å“åº”å¼Webè®¾è®¡ä¸ä»…ä»…æ˜¯å…³äºå±å¹•åˆ†è¾¨ç‡è‡ªé€‚åº”ä»¥åŠè‡ªåŠ¨ç¼©æ”¾çš„å›¾ç‰‡ç­‰ç­‰ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ç§å¯¹äºè®¾è®¡çš„å…¨æ–°æ€ç»´æ¨¡å¼ï¼›æˆ‘ä»¬åº”å½“å‘ä¸‹å…¼å®¹ã€ç§»åŠ¨ä¼˜å…ˆã€‚\n\n--- \n<!--more -->\n\n## èƒŒæ™¯\n\n1. PCäº’è”ç½‘åŠ é€Ÿå‘ç§»åŠ¨ç«¯è¿ç§»\n2. ç§»åŠ¨ç«¯å…¥å£\n3. å¼€å‘æˆæœ¬ä½ï¼Œé—¨æ§›ä½\n4. è·¨å¹³å°å’Œç»ˆç«¯ä¸”ä¸éœ€è¦åˆ†é…å­åŸŸï¼Œ1é¡µé¢é€‚é…å¤šç»ˆç«¯\n\n- PC â€“ http://qzone.com\n- Mobile â€“ http://m.qzone.com\n- å“åº”å¼ï¼šPC & Mobile â€“ http://qzone.com æ— éœ€è·³è½¬\n5. æ— éœ€å®‰è£…æˆæœ¬ï¼Œè¿­ä»£æ›´æ–°å®¹æ˜“\n\n![setup](http://cdn.mydearest.cn/blog/images/setup.png)\n\nå¦‚æˆ‘ä»¬éœ€è¦å…¼å®¹ä¸åŒå±å¹•åˆ†è¾¨ç‡ã€æ¸…æ™°åº¦ä»¥åŠå±å¹•å®šå‘æ–¹å¼ç«–å±(portrait)ã€æ¨ªå±(landscape)ï¼Œæ€æ ·æ‰èƒ½åšåˆ°è®©ä¸€ç§è®¾è®¡æ–¹æ¡ˆæ»¡è¶³æ‰€æœ‰æƒ…å†µï¼Ÿ\né‚£ä¹ˆæˆ‘ä»¬çš„å¸ƒå±€åº”è¯¥æ˜¯ä¸€ç§å¼¹æ€§çš„æ …æ ¼å¸ƒå±€ï¼Œä¸åŒå°ºå¯¸ä¸‹å¼¹æ€§é€‚åº”ï¼Œå¦‚ä»¥ä¸‹é¡µé¢ä¸­å„æ¨¡å—åœ¨ä¸åŒå°ºå¯¸ä¸‹çš„ä½ç½®ï¼š\n\n![responsive-layout](http://cdn.mydearest.cn/blog/images/responsive-layout.png)\n\né‚£ä¹ˆæˆ‘ä»¬è¦æ€ä¹ˆåšï¼Ÿ\n- Metaæ ‡ç­¾å®šä¹‰\n\n1. ä½¿ç”¨ viewport meta æ ‡ç­¾åœ¨æ‰‹æœºæµè§ˆå™¨ä¸Šæ§åˆ¶å¸ƒå±€\n```html\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1,maximum-scale=1\" />\n```\n\n2. é€šè¿‡å¿«æ·æ–¹å¼æ‰“å¼€æ—¶å…¨å±æ˜¾ç¤º\n```html\n<meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n```\n\n3. éšè—çŠ¶æ€æ \n```html\n<meta name=\"apple-mobile-web-app-status-bar-style\" content=\"blank\" />\n```\n\n4. iPhoneä¼šå°†çœ‹èµ·æ¥åƒç”µè¯å·ç çš„æ•°å­—æ·»åŠ ç”µè¯è¿æ¥ï¼Œåº”å½“å…³é—­\n```html\n<meta name=\"format-detection\" content=\"telephone=no\" />\n```\n\n## ä¼˜ç‚¹\n\n- é¢å¯¹ä¸åŒåˆ†è¾¨ç‡è®¾å¤‡çµæ´»æ€§å¼º\n- èƒ½å¤Ÿå¿«æ·è§£å†³å¤šè®¾å¤‡æ˜¾ç¤ºé€‚åº”é—®é¢˜\n\n## ç¼ºç‚¹\n\n- å…¼å®¹å„ç§è®¾å¤‡å·¥ä½œé‡å¤§ï¼Œæ•ˆç‡ä½ä¸‹\n- ä»£ç ç´¯èµ˜ï¼Œä¼šå‡ºç°éšè—æ— ç”¨çš„å…ƒç´ ï¼ŒåŠ è½½æ—¶é—´åŠ é•¿\n- å…¶å®è¿™æ˜¯ä¸€ç§æŠ˜ä¸­æ€§è´¨çš„è®¾è®¡è§£å†³æ–¹æ¡ˆï¼Œå¤šæ–¹é¢å› ç´ å½±å“è€Œè¾¾ä¸åˆ°æœ€ä½³æ•ˆæœ\n- ä¸€å®šç¨‹åº¦ä¸Šæ”¹å˜äº†ç½‘ç«™åŸæœ‰çš„å¸ƒå±€ç»“æ„ï¼Œä¼šå‡ºç°ç”¨æˆ·æ··æ·†çš„æƒ…å†µ\n\n## æ —å­ğŸŒ°\n\n```css\n/* Extra small devices (phones, 600px and down) */\n@media only screen and (max-width: 600px) {\n    .example {background: red;}\n}\n\n/* Small devices (portrait tablets and large phones, 600px and up) */\n@media only screen and (min-width: 600px) {\n    .example {background: green;}\n}\n\n/* Medium devices (landscape tablets, 768px and up) */\n@media only screen and (min-width: 768px) {\n    .example {background: blue;}\n} \n\n/* Large devices (laptops/desktops, 992px and up) */\n@media only screen and (min-width: 992px) {\n    .example {background: orange;}\n} \n\n/* Extra large devices (large laptops and desktops, 1200px and up) */\n@media only screen and (min-width: 1200px) {\n    .example {background: pink;}\n}\n```\n\n## å®æˆ˜\n\nè°·æ­Œæ•™ç¨‹ç”¨HTML5ä»¥åŠCSS3çš„åª’ä½“æŸ¥è¯¢å®Œæˆäº†ä¸€ä¸ªå“åº”å¼å¸ƒå±€çš„demoï¼Œå¤§å®¶å¯ä»¥ç”¨ä¸åŒçš„å°ºå¯¸çš„è®¾å¤‡ï¼ŒæŸ¥çœ‹ä¸åŒåˆ†è¾¨ç‡ä¸‹çš„è¡¨ç°ã€‚ä¹Ÿå¯ä»¥åœ¨æ§åˆ¶å°æ¨¡æ‹Ÿå„ç§è®¾å¤‡ï¼Œæ¬¢è¿å¤§å®¶æå‡ºæ„è§ã€‚\n\nåœ¨çº¿åœ°å€ï¼š[http://dir.mydearest.cn/responsive/](http://dir.mydearest.cn/responsive/)\n","tags":["å‰ç«¯"],"categories":["CSS"]},{"title":"æœ‰è¶£çš„æ‘§æ¯é¡µé¢","url":"%2Fdestory.html","content":"\né£Ÿç”¨æ–¹æ³•\n\nä½¿ç”¨ã€ä¸Šä¸‹å·¦å³é”®ã€‘æ¥æ§åˆ¶é£è¡Œå™¨çš„è¿åŠ¨\n\nä½¿ç”¨ã€ç©ºæ ¼é”®ã€‘æ¥å‘å°„å¯¼å¼¹\n\n<a href=\"javascript:var%20KICKASSVERSION='2.0'; var%20s%20=%20document.createElement('script'); s.type='text/javascript'; document.body.appendChild(s); s.src='//hi.kickassapp.com/kickass.js'; void(0);\"> ç‚¹å‡»å¼€å§‹æ‘§æ¯ </a>\n\n---\n<!--more -->\n\nå¼•å…¥JSä»£ç \n\n```javascript\n<a href=\"javascript:var%20KICKASSVERSION='2.0'; \nvar%20s%20=%20document.createElement('script'); \ns.type='text/javascript'; document.body.appendChild(s); \ns.src='//hi.kickassapp.com/kickass.js'; void(0);\"> ç‚¹å‡»å¼€å§‹æ‘§æ¯ </a>\n```\né¡µé¢å´©æºƒ\n- plan A\n```javascript\nvar total = \"\"; \nfor (var i = 0; i < 10000; i++) { \n    total = total + i.toString(); \n    history.pushState(0, 0, total); \n}\n\nwhile(true){\n  console.log('hello world');\n}\n\nfunction fn(){\n  fn();\n}\nfn();\n```\n- plan B (BitInt å‡ºç°åï¼Œä¸ç”¨æ­»å¾ªç¯ä¹Ÿèƒ½å®ç° CPU 100% çš„æ•ˆæœ)\n```js\n9n ** 9n ** 9n > 0\n```\n\nè½¬åŠ¨å§ï¼Œé£æ‰‡ï¼ï¼ï¼\n\n## localstorageæ’‘çˆ†ç”µè„‘ç¡¬ç›˜\nhtml5çš„æœ¬åœ°å­˜å‚¨ï¼Œç›¸ä¿¡å¤§å®¶éƒ½ä¸é™Œç”Ÿã€‚å°†æ•°æ®ä»¥äºŒè¿›åˆ¶æ–‡ä»¶å½¢å¼å­˜å‚¨åˆ°æœ¬åœ°ï¼Œåœ¨å½“å‰åº”ç”¨å¾—éå¸¸å¹¿æ³›ã€‚\nwindowsä¸‹çš„chromeï¼ŒlocalStorageå­˜å‚¨äºC:\\Users\\xxx\\AppData\\Local\\Google\\Chrome\\User Data\\Default\\Local Storageæ–‡ä»¶å¤¹ä¸­ã€‚ä½†å¦‚æœä»»ç”±ç½‘é¡µæ— é™å†™æ–‡ä»¶ï¼Œå¯¹ç”¨æˆ·ç¡¬ç›˜çš„ä¼¤å®³å¯æƒ³è€ŒçŸ¥ï¼Œå› è€Œæµè§ˆå™¨å¯¹å…¶åšäº†å¤§å°é™åˆ¶ã€‚\n\nå¯¹äºä¸€ä¸ªåŸŸå+ç«¯å£ï¼ŒPCç«¯çš„ä¸Šé™æ˜¯5M-10Mä¹‹é—´ï¼Œç§»åŠ¨ç«¯æ˜¯åˆ™ä¸å¤§äº2.5Mã€‚\n\nè¯¦æƒ…è¯·è§[ä½œä¸ºä¸€ä¸ªå‰ç«¯ï¼Œå¯ä»¥å¦‚ä½•æœºæ™ºåœ°å¼„åä¸€å°ç”µè„‘ï¼Ÿ](http://litten.me/2015/07/06/hack-in-localstorage/)","tags":["ä¼˜åŒ–"],"categories":["JS"]},{"title":"consoleæ§åˆ¶å°ä¼˜åŒ–","url":"%2Fconsole.html","content":"\nè°·æ­Œå¼€å‘è€…ä¸­å¿ƒä¸Šé¢å…³äºè°·æ­Œæµè§ˆå™¨æ§åˆ¶å°console.log()çš„æ–‡æ¡£ï¼š\n\n|æ ¼å¼è¯´æ˜ç¬¦|æè¿°|\n|:---|---:|\n|%s|å°†å€¼æ ¼å¼åŒ–ä¸ºå­—ç¬¦ä¸²ã€‚|\n|%d?or?%i|å°†å€¼æ ¼å¼åŒ–ä¸ºæ•´æ•°ã€‚|\n|%f|å°†å€¼æ ¼å¼åŒ–ä¸ºæµ®ç‚¹å€¼ã€‚|\n|%o|å°†å€¼æ ¼å¼åŒ–ä¸ºå¯æ‰©å±•çš„DOMå…ƒç´ ï¼ˆå¦‚åœ¨å…ƒç´ é¢æ¿ä¸­ï¼‰ã€‚|\n|%O|å°†å€¼æ ¼å¼åŒ–ä¸ºå¯æ‰©å±•çš„JavaScriptå¯¹è±¡ã€‚|\n|%c|æ ¹æ®æ‚¨æä¾›çš„CSSæ ·å¼æ ¼å¼åŒ–è¾“å‡ºå­—ç¬¦ä¸²ã€‚|\n\n\\næ˜¯æ¢è¡Œï¼Œå¯ä»¥å°†ä¸€ä¸ªå­—ç¬¦ä¸²è®¾ç½®æˆå¤šè¡Œ\n%cæ ‡è®°ä¹‹åçš„å†…å®¹ä½¿ç”¨å¯¹åº”æ ·å¼ï¼Œæ ¼å¼å¦‚ console.log(â€˜%cç¬¬ä¸€ä¸ªæ ·å¼%cç¬¬äºŒä¸ªæ ·å¼â€™,â€™css1â€²,â€™css2â€²); å¦‚æ­¤å¯¹åº”\næ ·å¼å’Œæ™®é€šçš„cssæ•ˆæœåŸºæœ¬ä¸€è‡´ï¼Œå¯ä»¥è®¾ç½®æ–‡å­—é¢œè‰²ï¼ŒèƒŒæ™¯é¢œè‰²ï¼Œå­—ä½“å¤§å°ï¼Œé—´è·ï¼Œè¾¹è·ç­‰ç­‰ã€‚è¿˜æ”¯æŒéƒ¨åˆ†css3é«˜çº§æ•ˆæœã€‚\n\n---\n<!-- more -->\n\n## 3Då­—ä½“æ•ˆæœ Text\n\n```javascript\n<script>console.log(\"%c3D Text\",\" text-shadow: 0 1px 0 #ccc,0 2px 0 #c9c9c9,0 3px 0 #bbb,0 4px 0 #b9b9b9,0 5px 0 #aaa,0 6px 1px rgba(0,0,0,.1),0 0 5px rgba(0,0,0,.1),0 1px 3px rgba(0,0,0,.3),0 3px 5px rgba(0,0,0,.2),0 5px 10px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.2),0 20px 20px rgba(0,0,0,.15);font-size:5em\")</script>\n```\n\n## Colorfulå½©è‰²èƒŒæ™¯ CSS\n\n```javascript\n<script>console.log(\"%cColorful CSS\",\"background: rgba(252,234,187,1);background: -moz-linear-gradient(left, rgba(252,234,187,1) 0%, rgba(175,250,77,1) 12%, rgba(0,247,49,1) 28%, rgba(0,210,247,1) 39%,rgba(0,189,247,1) 51%, rgba(133,108,217,1) 64%, rgba(177,0,247,1) 78%, rgba(247,0,189,1) 87%, rgba(245,22,52,1) 100%);background: -webkit-gradient(left top, right top, color-stop(0%, rgba(252,234,187,1)), color-stop(12%, rgba(175,250,77,1)), color-stop(28%, rgba(0,247,49,1)), color-stop(39%, rgba(0,210,247,1)), color-stop(51%, rgba(0,189,247,1)), color-stop(64%, rgba(133,108,217,1)), color-stop(78%, rgba(177,0,247,1)), color-stop(87%, rgba(247,0,189,1)), color-stop(100%, rgba(245,22,52,1)));background: -webkit-linear-gradient(left, rgba(252,234,187,1) 0%, rgba(175,250,77,1) 12%, rgba(0,247,49,1) 28%, rgba(0,210,247,1) 39%, rgba(0,189,247,1) 51%, rgba(133,108,217,1) 64%, rgba(177,0,247,1) 78%, rgba(247,0,189,1) 87%, rgba(245,22,52,1) 100%);background: -o-linear-gradient(left, rgba(252,234,187,1) 0%, rgba(175,250,77,1) 12%, rgba(0,247,49,1) 28%, rgba(0,210,247,1) 39%, rgba(0,189,247,1) 51%, rgba(133,108,217,1) 64%, rgba(177,0,247,1) 78%, rgba(247,0,189,1) 87%, rgba(245,22,52,1) 100%);background: -ms-linear-gradient(left, rgba(252,234,187,1) 0%, rgba(175,250,77,1) 12%, rgba(0,247,49,1) 28%, rgba(0,210,247,1) 39%, rgba(0,189,247,1) 51%, rgba(133,108,217,1) 64%, rgba(177,0,247,1) 78%, rgba(247,0,189,1) 87%, rgba(245,22,52,1) 100%);background: linear-gradient(to right, rgba(252,234,187,1) 0%, rgba(175,250,77,1) 12%, rgba(0,247,49,1) 28%, rgba(0,210,247,1) 39%, rgba(0,189,247,1) 51%, rgba(133,108,217,1) 64%, rgba(177,0,247,1) 78%, rgba(247,0,189,1) 87%, rgba(245,22,52,1) 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fceabb', endColorstr='#f51634', GradientType=1 );font-size:5em\")</script>\n```\n\n## Rainbowå½©è™¹å­— Text\n\n```javascript\n<script>console.log('%cRainbow Text ', 'background-image:-webkit-gradient( linear, left top, right top, color-stop(0, #f22), color-stop(0.15, #f2f), color-stop(0.3, #22f), color-stop(0.45, #2ff), color-stop(0.6, #2f2),color-stop(0.75, #2f2), color-stop(0.9, #ff2), color-stop(1, #f22) );color:transparent;-webkit-background-clip: text;font-size:5em;');</script>\n```\n\n## åœ¨Chromeæ§åˆ¶å°è¾“å‡ºå›¾ç‰‡\n```javascript\n<script>console.log(\"%c\", \"padding:50px 700px;line-height:120px;background:url('http://wx1.sinaimg.cn/large/ba098b64ly1fjz4j8pju5j20p002sgm4.jpg') no-repeat;\");</script>\n```\n\n## ç¤ºä¾‹\n```javascript\n<script>\nconsole.log(\"%c%cæºç ä½œè€…%ccosyer chenyu@mydearest.cn\", \"line-height:26px;\", \"line-height:16px;padding:2px 6px;border-radius: 5px 0px 0px 5px;background:#35495e;color:#fff;font-size:12px;\", \"padding:2px 8px;background:#0093ff;color:#fff;line-height:16px;font-size:12px;border-radius: 0px 5px 5px 0px;\");\nconsole.log(\"%c%cç½‘ç«™åœ°å€%chttps://mydearest.cn\", \"line-height:26px;\", \"line-height:16px;padding:2px 6px;border-radius: 5px 0px 0px 5px;background:#35495e;color:#fff;font-size:12px;\", \"padding:2px 8px;background:#0093ff;color:#fff;line-height:16px;font-size:12px;border-radius: 0px 5px 5px 0px;\");\nconsole.log(\"%c%cgithub%https://github.com/cosyer\", \"line-height:26px;\", \"line-height:16px;padding:2px 6px;border-radius: 5px 0px 0px 5px;background:#35495e;color:#fff;font-size:12px;\", \"padding:2px 8px;background:#0093ff;color:#fff;line-height:16px;font-size:12px;border-radius: 0px 5px 5px 0px;\");\n</script>\n```\n\n- æœªæ›¾é—å¿˜çš„é’æ˜¥\n```js\nfunction setConsole() {\nvar text = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'this is console!';\nvar isOneLine = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\nvar author = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'æœªæ›¾é—å¿˜çš„é’æ˜¥';\n\nif (isOneLine) {\n    console.log('');\n    console.log('%c' + text + '  ---  ' + author, 'background-image: url(\\'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuMCIgeTE9IjAuNSIgeDI9IjEuMCIgeTI9IjAuNSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzY2Y2NjYyIvPjxzdG9wIG9mZnNldD0iMjAlIiBzdG9wLWNvbG9yPSIjMzM5OTk5Ii8+PHN0b3Agb2Zmc2V0PSI0MCUiIHN0b3AtY29sb3I9IiNjY2NjOTkiLz48c3RvcCBvZmZzZXQ9IjYwJSIgc3RvcC1jb2xvcj0iIzk5Y2NmZiIvPjxzdG9wIG9mZnNldD0iODAlIiBzdG9wLWNvbG9yPSIjY2NjY2ZmIi8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZmY5OWNjIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmFkKSIgLz48L3N2Zz4g\\');background-size: 100%;background-image: -webkit-gradient(linear, 0% 50%, 100% 50%, color-stop(0%, #66cccc), color-stop(20%, #339999), color-stop(40%, #cccc99), color-stop(60%, #99ccff), color-stop(80%, #ccccff), color-stop(100%, #ff99cc));background-image: -moz-linear-gradient(left, #66cccc 0%, #339999 20%, #cccc99 40%, #99ccff 60%, #ccccff 80%, #ff99cc 100%);background-image: -webkit-linear-gradient(left, #66cccc 0%, #339999 20%, #cccc99 40%, #99ccff 60%, #ccccff 80%, #ff99cc 100%);background-image: linear-gradient(to right, #66cccc 0%, #339999 20%, #cccc99 40%, #99ccff 60%, #ccccff 80%, #ff99cc 100%);padding:20px 40px;color:#fff;font-size:12px;');\n    console.log('');\n} else {\n    console.log('%c' + text + '  ---  ' + author, 'background-image: url(\\'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjAuMCIgeTE9IjAuNSIgeDI9IjEuMCIgeTI9IjAuNSI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzY2Y2NjYyIvPjxzdG9wIG9mZnNldD0iMjAlIiBzdG9wLWNvbG9yPSIjMzM5OTk5Ii8+PHN0b3Agb2Zmc2V0PSI0MCUiIHN0b3AtY29sb3I9IiNjY2NjOTkiLz48c3RvcCBvZmZzZXQ9IjYwJSIgc3RvcC1jb2xvcj0iIzk5Y2NmZiIvPjxzdG9wIG9mZnNldD0iODAlIiBzdG9wLWNvbG9yPSIjY2NjY2ZmIi8+PHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZmY5OWNjIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmFkKSIgLz48L3N2Zz4g\\');background-size: 100%;background-image: -webkit-gradient(linear, 0% 50%, 100% 50%, color-stop(0%, #66cccc), color-stop(20%, #339999), color-stop(40%, #cccc99), color-stop(60%, #99ccff), color-stop(80%, #ccccff), color-stop(100%, #ff99cc));background-image: -moz-linear-gradient(left, #66cccc 0%, #339999 20%, #cccc99 40%, #99ccff 60%, #ccccff 80%, #ff99cc 100%);background-image: -webkit-linear-gradient(left, #66cccc 0%, #339999 20%, #cccc99 40%, #99ccff 60%, #ccccff 80%, #ff99cc 100%);background-image: linear-gradient(to right, #66cccc 0%, #339999 20%, #cccc99 40%, #99ccff 60%, #ccccff 80%, #ff99cc 100%);padding:0;color:#fff;font-size:12px;');\n }\n}\n```\n\n- FBI WARNING (æš‚åªæ”¯æŒ Chrome)\n```js\nconsole.log(`%c                                                                            \n                                                                            \n                                                                            \n                               %c FBI WARNING %c                                \n                                                                            \n                                                                            \n%c        Federal Law provides severe civil and criminal penalties for        \n        the unauthorized reproduction,distribution, or exhibition of        \n         copyrighted motion pictures (Title 17, United States Code,         \n        Sections 501 and 508). The Federal Bureau of Investigation          \n         investigates allegations of criminal copyright infringement        \n                 (Title 17, United States Code, Section 506).               \n                                                                            \n                                                                            \n                                                                            \n`,\n'background: #000; font-size: 18px; font-family: monospace',\n'background: #f33; font-size: 18px; font-family: monospace; color: #eee; text-shadow:0 0 1px #fff',\n'background: #000; font-size: 18px; font-family: monospace',\n'background: #000; font-size: 18px; font-family: monospace; color: #ddd; text-shadow:0 0 2px #fff'\n)\n```\n[FBI](http://cdn.mydearest.cn/blog/images/FBI.png)\n\n### è®¾è®¡ç›¸å…³\n\n- https://icomoon.io/\n\n- https://zh-cn.cooltext.com/\n\n- https://www.logaster.cn/logo/#logos\n\n- http://www.logoko.com.cn/design\n\n- http://www.beipy.com/335.html","tags":["ä¼˜åŒ–"],"categories":["JS"]},{"title":"JavaScriptåœæ­¢å†’æ³¡å’Œé˜»æ­¢æµè§ˆå™¨é»˜è®¤è¡Œä¸º","url":"%2Fbubble.html","content":"\n## é˜²æ­¢å†’æ³¡\n\nw3cçš„æ–¹æ³•æ˜¯e.stopPropagation()ï¼ŒIEåˆ™æ˜¯ä½¿ç”¨e.cancelBubble = true\n\nstopPropagationä¹Ÿæ˜¯äº‹ä»¶å¯¹è±¡(Event)çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä½œç”¨æ˜¯é˜»æ­¢ç›®æ ‡å…ƒç´ çš„å†’æ³¡äº‹ä»¶ï¼Œä½†æ˜¯ä¼šä¸é˜»æ­¢é»˜è®¤è¡Œä¸ºã€‚ä»€ä¹ˆæ˜¯å†’æ³¡äº‹ä»¶ï¼Ÿå¦‚åœ¨ä¸€ä¸ªæŒ‰é’®æ˜¯ç»‘å®šä¸€ä¸ªâ€clickâ€äº‹ä»¶ï¼Œé‚£ä¹ˆâ€clickâ€äº‹ä»¶ä¼šä¾æ¬¡åœ¨å®ƒçš„çˆ¶çº§å…ƒç´ ä¸­è¢«è§¦å‘ ã€‚stopPropagationå°±æ˜¯é˜»æ­¢ç›®æ ‡å…ƒç´ çš„äº‹ä»¶å†’æ³¡åˆ°çˆ¶çº§å…ƒç´ ã€‚\n\n---\n<!-- more -->\n\n## é˜»æ­¢é»˜è®¤è¡Œä¸º\n\nw3cçš„æ–¹æ³•æ˜¯e.preventDefault()ï¼ŒIEåˆ™æ˜¯ä½¿ç”¨e.returnValue = false\n\npreventDefaultå®ƒæ˜¯äº‹ä»¶å¯¹è±¡(Event)çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä½œç”¨æ˜¯å–æ¶ˆä¸€ä¸ªç›®æ ‡å…ƒç´ çš„é»˜è®¤è¡Œä¸ºã€‚æ—¢ç„¶æ˜¯è¯´é»˜è®¤è¡Œä¸ºï¼Œå½“ç„¶æ˜¯å…ƒç´ å¿…é¡»æœ‰é»˜è®¤è¡Œä¸ºæ‰èƒ½è¢«å–æ¶ˆï¼Œå¦‚æœå…ƒç´ æœ¬èº«å°±æ²¡æœ‰é»˜è®¤è¡Œä¸ºï¼Œè°ƒç”¨å½“ç„¶å°±æ— æ•ˆäº†ã€‚ä»€ä¹ˆå…ƒç´ æœ‰é»˜è®¤è¡Œä¸ºå‘¢ï¼Ÿå¦‚é“¾æ¥`<a>`ï¼Œæäº¤æŒ‰é’®`<input type=â€submitâ€>`ç­‰ã€‚å½“Event å¯¹è±¡çš„ cancelableä¸ºfalseæ—¶ï¼Œè¡¨ç¤ºæ²¡æœ‰é»˜è®¤è¡Œä¸ºï¼Œè¿™æ—¶å³ä½¿æœ‰é»˜è®¤è¡Œä¸ºï¼Œè°ƒç”¨preventDefaultä¹Ÿæ˜¯ä¸ä¼šèµ·ä½œç”¨çš„ã€‚\n\n```javascript\n <!DOCTYPE html>\n<html>\n<head>\n\t<title></title>\n</head>\n<body>\n<div id=\"box\" style=\"width: 300px;height: 300px;background: pink;\">\n\t<input type=\"button\" name=\"æŒ‰é’®\" value=\"æŒ‰é’®\" id=\"btn\">\n</div>\n<script type=\"text/javascript\">\n\tvar box1=document.getElementById(\"box\");\n\tvar btn1=document.getElementById(\"btn\");\n\tbtn1.onclick=function(e){\n\t\talert(\"æŒ‰é’®\");\n\t\t//é˜»æ­¢å†’æ³¡ï¼›\n\t\tvar e=e|| window.event;\n\t\t//w3cå–æ¶ˆå†’æ³¡\n\t\te.stopPropagation();\n\t\t//ieå–æ¶ˆå†’æ³¡\n\t\t//åˆ¤æ–­ä»–ç°åœ¨çš„çŠ¶æ€ï¼Œç„¶åç»™ä»–èµ‹å€¼trueï¼Œ\n\t\tif(typeof e.cancelBubble=='undefined'){\n\t\t\te.stopPropagation();\n\t\t}else{\n\t\t\te.cancelBubble=true;\n\t\t}\n\t}\n\tbox1.onclick=function(){\n\t\talert(\"div\");\n\t}\n\tdocument.body.onclick=function(){\n\t\talert(\"body\");\n\t}\n\tdocument.documentElement.onclick=function(){\n\t\talert(\"html\");\n\t}\n\tdocument.onclick=function(){\n\t\talert(\"document\");\n\t}\n</script>\n</body>\n</html>\n```","tags":["å‰ç«¯"],"categories":["JS"]},{"title":"å¾®ä¿¡å°ç¨‹åºé¢è¯•é¢˜","url":"%2F%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%9D%A2%E8%AF%95%E9%A2%98.html","content":"\n\n## ç®€å•æè¿°ä¸‹å¾®ä¿¡å°ç¨‹åºçš„ç›¸å…³æ–‡ä»¶ç±»å‹ï¼Ÿ\nç­”ï¼šå¾®ä¿¡å°ç¨‹åºé¡¹ç›®ç»“æ„ä¸»è¦æœ‰å››ä¸ªæ–‡ä»¶ç±»å‹,å¦‚ä¸‹ï¼š\nä¸€ã€WXML ï¼ˆWeiXin Markup Languageï¼‰æ˜¯æ¡†æ¶è®¾è®¡çš„ä¸€å¥—æ ‡ç­¾è¯­è¨€ï¼Œç»“åˆåŸºç¡€ç»„ä»¶ã€äº‹ä»¶ç³»ç»Ÿï¼Œå¯ä»¥æ„å»ºå‡ºé¡µé¢çš„ç»“æ„ã€‚å†…éƒ¨ä¸»è¦æ˜¯å¾®ä¿¡è‡ªå·±å®šä¹‰çš„ä¸€å¥—ç»„ä»¶ã€‚\näºŒã€WXSS (WeiXin Style Sheets)æ˜¯ä¸€å¥—æ ·å¼è¯­è¨€ï¼Œç”¨äºæè¿° WXML çš„ç»„ä»¶æ ·å¼ï¼Œ\näºŒã€js é€»è¾‘å¤„ç†ï¼Œç½‘ç»œè¯·æ±‚\nä¸‰ã€json å°ç¨‹åºè®¾ç½®ï¼Œå¦‚é¡µé¢æ³¨å†Œï¼Œé¡µé¢æ ‡é¢˜åŠtabBarã€‚\nå››ã€app.json\nå¿…é¡»è¦æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œé¡¹ç›®æ— æ³•è¿è¡Œï¼Œå› ä¸ºå¾®ä¿¡æ¡†æ¶æŠŠè¿™ä¸ªä½œä¸ºé…ç½®æ–‡ä»¶å…¥å£ï¼Œæ•´ä¸ªå°ç¨‹åºçš„å…¨å±€é…ç½®ã€‚åŒ…æ‹¬é¡µé¢æ³¨å†Œï¼Œç½‘ç»œè®¾ç½®ï¼Œä»¥åŠå°ç¨‹åºçš„windowèƒŒæ™¯è‰²ï¼Œé…ç½®å¯¼èˆªæ¡æ ·å¼ï¼Œé…ç½®é»˜è®¤æ ‡é¢˜ã€‚\näº”ã€app.js\nå¿…é¡»è¦æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œæ²¡æœ‰ä¹Ÿæ˜¯ä¼šæŠ¥é”™ï¼ä½†æ˜¯è¿™ä¸ªæ–‡ä»¶åˆ›å»ºä¸€ä¸‹å°±è¡Œ ä»€ä¹ˆéƒ½ä¸éœ€è¦å†™ä»¥åæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ç›‘å¬å¹¶å¤„ç†å°ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€å£°æ˜å…¨å±€å˜é‡ã€‚\nå…­ã€app.wxss\n\n---\n<!-- more -->\n\n## ä½ æ˜¯æ€ä¹ˆå°è£…å¾®ä¿¡å°ç¨‹åºçš„æ•°æ®è¯·æ±‚çš„ï¼Ÿ\nç­”ï¼š\nä¸€ã€å°†æ‰€æœ‰çš„æ¥å£æ”¾åœ¨ç»Ÿä¸€çš„jsæ–‡ä»¶ä¸­å¹¶å¯¼å‡º\näºŒã€åœ¨app.jsä¸­åˆ›å»ºå°è£…è¯·æ±‚æ•°æ®çš„æ–¹æ³•\nä¸‰ã€åœ¨å­é¡µé¢ä¸­è°ƒç”¨å°è£…çš„æ–¹æ³•è¯·æ±‚æ•°æ®\n\n## æœ‰å“ªäº›å‚æ•°ä¼ å€¼çš„æ–¹æ³•ï¼Ÿ\nç­”ï¼š\nä¸€ã€ç»™HTMLå…ƒç´ æ·»åŠ data-*å±æ€§æ¥ä¼ é€’æˆ‘ä»¬éœ€è¦çš„å€¼ï¼Œç„¶åé€šè¿‡e.currentTarget.datasetæˆ–onloadçš„paramå‚æ•°è·å–ã€‚ä½†data-åç§°ä¸èƒ½æœ‰å¤§å†™å­—æ¯å’Œä¸å¯ä»¥å­˜æ”¾å¯¹è±¡\näºŒã€è®¾ç½®idçš„æ–¹æ³•æ ‡è¯†æ¥ä¼ å€¼é€šè¿‡e.currentTarget.idè·å–è®¾ç½®çš„idçš„å€¼,ç„¶åé€šè¿‡è®¾ç½®å…¨å±€å¯¹è±¡çš„æ–¹å¼æ¥ä¼ é€’æ•°å€¼\nä¸‰ã€åœ¨navigatorä¸­æ·»åŠ å‚æ•°ä¼ å€¼ onloadä¸­optionså‚æ•°ä¸­å–å€¼\n\n## ä½ ä½¿ç”¨è¿‡å“ªäº›æ–¹æ³•ï¼Œæ¥æé«˜å¾®ä¿¡å°ç¨‹åºçš„åº”ç”¨é€Ÿåº¦ï¼Ÿ\nç­”ï¼š\nä¸€ã€æé«˜é¡µé¢åŠ è½½é€Ÿåº¦\näºŒã€ç”¨æˆ·è¡Œä¸ºé¢„æµ‹\nä¸‰ã€å‡å°‘é»˜è®¤dataçš„å¤§å°\nå››ã€ç»„ä»¶åŒ–æ–¹æ¡ˆ\n\n## å°ç¨‹åºä¸åŸç”ŸAppå“ªä¸ªå¥½ï¼Ÿ \nç­”ï¼š å°ç¨‹åºé™¤äº†æ‹¥æœ‰å…¬ä¼—å·çš„ä½å¼€å‘æˆæœ¬ã€ä½è·å®¢æˆæœ¬ä½ä»¥åŠæ— éœ€ä¸‹è½½ç­‰ä¼˜åŠ¿ï¼Œåœ¨æœåŠ¡è¯·æ±‚å»¶æ—¶ä¸ç”¨æˆ·ä½¿ç”¨ä½“éªŒæ˜¯éƒ½å¾—åˆ°äº†è¾ƒå¤§å¹…åº¦  çš„æå‡ï¼Œä½¿å¾—å…¶èƒ½å¤Ÿæ‰¿è½½è·Ÿå¤æ‚çš„æœåŠ¡åŠŸèƒ½ä»¥åŠä½¿ç”¨æˆ·è·å¾—æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚\n\n## ç®€è¿°å¾®ä¿¡å°ç¨‹åºåŸç†ï¼Ÿ \nç­”ï¼šå¾®ä¿¡å°ç¨‹åºé‡‡ç”¨JavaScriptã€WXMLã€WXSSä¸‰ç§æŠ€æœ¯è¿›è¡Œå¼€å‘ï¼Œä»æŠ€æœ¯è®²å’Œç°æœ‰çš„å‰ç«¯å¼€å‘å·®ä¸å¤šï¼Œä½†æ·±å…¥æŒ–æ˜çš„è¯å´åˆæœ‰æ‰€ä¸åŒã€‚\n\nJavaScriptï¼šé¦–å…ˆJavaScriptçš„ä»£ç æ˜¯è¿è¡Œåœ¨å¾®ä¿¡Appä¸­çš„ï¼Œå¹¶ä¸æ˜¯è¿è¡Œåœ¨æµè§ˆå™¨ä¸­ï¼Œå› æ­¤ä¸€äº›H5æŠ€æœ¯çš„åº”ç”¨ï¼Œéœ€è¦å¾®ä¿¡Appæä¾›å¯¹åº”çš„APIæ”¯æŒï¼Œè€Œè¿™é™åˆ¶ä½äº†H5æŠ€æœ¯çš„åº”ç”¨ï¼Œä¸”å…¶ä¸èƒ½ç§°ä¸ºä¸¥æ ¼çš„H5ï¼Œå¯ä»¥ç§°å…¶ä¸ºä¼ªH5ï¼ŒåŒç†ï¼Œå¾®ä¿¡æä¾›çš„ç‹¬æœ‰çš„æŸäº›APIï¼ŒH5ä¹Ÿä¸æ”¯æŒæˆ–æ”¯æŒçš„ä¸æ˜¯ç‰¹åˆ«å¥½ã€‚\n\nWXMLï¼šWXMLå¾®ä¿¡è‡ªå·±åŸºäºXMLè¯­æ³•å¼€å‘çš„ï¼Œå› æ­¤å¼€å‘æ—¶ï¼Œåªèƒ½ä½¿ç”¨å¾®ä¿¡æä¾›çš„ç°æœ‰æ ‡ç­¾ï¼ŒHTMLçš„æ ‡ç­¾æ˜¯æ— æ³•ä½¿ç”¨çš„ã€‚\n\nWXSSï¼šWXSSå…·æœ‰CSSçš„å¤§éƒ¨åˆ†ç‰¹æ€§ï¼Œä½†å¹¶ä¸æ˜¯æ‰€æœ‰çš„éƒ½æ”¯æŒï¼Œè€Œä¸”æ”¯æŒå“ªäº›ï¼Œä¸æ”¯æŒå“ªäº›å¹¶æ²¡æœ‰è¯¦ç»†çš„æ–‡æ¡£ã€‚\n\nå¾®ä¿¡çš„æ¶æ„ï¼Œæ˜¯æ•°æ®é©±åŠ¨çš„æ¶æ„æ¨¡å¼ï¼Œå®ƒçš„UIå’Œæ•°æ®æ˜¯åˆ†ç¦»çš„ï¼Œæ‰€æœ‰çš„é¡µé¢æ›´æ–°ï¼Œéƒ½éœ€è¦é€šè¿‡å¯¹æ•°æ®çš„æ›´æ”¹æ¥å®ç°ã€‚\n\nå°ç¨‹åºåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†webviewå’ŒappServiceã€‚å…¶ä¸­webviewä¸»è¦ç”¨æ¥å±•ç°UIï¼ŒappServiceæœ‰æ¥å¤„ç†ä¸šåŠ¡é€»è¾‘ã€æ•°æ®åŠæ¥å£è°ƒç”¨ã€‚å®ƒä»¬åœ¨ä¸¤ä¸ªè¿›ç¨‹ä¸­è¿è¡Œï¼Œé€šè¿‡ç³»ç»Ÿå±‚JSBridgeå®ç°é€šä¿¡ï¼Œå®ç°UIçš„æ¸²æŸ“ã€äº‹ä»¶çš„å¤„ç†\n\n## åˆ†æä¸‹å¾®ä¿¡å°ç¨‹åºçš„ä¼˜åŠ£åŠ¿ï¼Ÿ\nç­”ï¼š\n### ä¼˜åŠ¿ï¼š\n1ã€æ— éœ€ä¸‹è½½ï¼Œé€šè¿‡æœç´¢å’Œæ‰«ä¸€æ‰«å°±å¯ä»¥æ‰“å¼€ã€‚\n2ã€è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒï¼šæ‰“å¼€é€Ÿåº¦å¿«ã€‚\n3ã€å¼€å‘æˆæœ¬è¦æ¯”Appè¦ä½ã€‚\n4ã€å®‰å“ä¸Šå¯ä»¥æ·»åŠ åˆ°æ¡Œé¢ï¼Œä¸åŸç”ŸAppå·®ä¸å¤šã€‚\n5ã€ä¸ºç”¨æˆ·æä¾›è‰¯å¥½çš„å®‰å…¨ä¿éšœã€‚å°ç¨‹åºçš„å‘å¸ƒï¼Œå¾®ä¿¡æ‹¥æœ‰ä¸€å¥—ä¸¥æ ¼çš„å®¡æŸ¥æµç¨‹ï¼Œ ä¸èƒ½é€šè¿‡å®¡æŸ¥çš„å°ç¨‹åºæ˜¯æ— æ³•å‘å¸ƒåˆ°çº¿ä¸Šçš„ã€‚\n\n### åŠ£åŠ¿ï¼š\n1ã€é™åˆ¶è¾ƒå¤šã€‚é¡µé¢å¤§å°ä¸èƒ½è¶…è¿‡1Mã€‚ä¸èƒ½æ‰“å¼€è¶…è¿‡5ä¸ªå±‚çº§çš„é¡µé¢ã€‚\n2ã€æ ·å¼å•ä¸€ã€‚å°ç¨‹åºçš„éƒ¨åˆ†ç»„ä»¶å·²ç»æ˜¯æˆå‹çš„äº†ï¼Œæ ·å¼ä¸å¯ä»¥ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼šå¹»ç¯ç‰‡ã€å¯¼èˆªã€‚\n3ã€æ¨å¹¿é¢çª„ï¼Œä¸èƒ½åˆ†äº«æœ‹å‹åœˆï¼Œåªèƒ½é€šè¿‡åˆ†äº«ç»™æœ‹å‹ï¼Œé™„è¿‘å°ç¨‹åºæ¨å¹¿ã€‚å…¶ä¸­é™„è¿‘å°ç¨‹åºä¹Ÿå—åˆ°å¾®ä¿¡çš„é™åˆ¶ã€‚\n4ã€ä¾æ‰˜äºå¾®ä¿¡ï¼Œæ— æ³•å¼€å‘åå°ç®¡ç†åŠŸèƒ½ã€‚\n8ã€å¾®ä¿¡å°ç¨‹åºä¸H5çš„åŒºåˆ«ï¼Ÿ\nç­”ï¼š\nç¬¬ä¸€æ¡æ˜¯è¿è¡Œç¯å¢ƒçš„ä¸åŒ\nä¼ ç»Ÿçš„HTML5çš„è¿è¡Œç¯å¢ƒæ˜¯æµè§ˆå™¨ï¼ŒåŒ…æ‹¬webviewï¼Œè€Œå¾®ä¿¡å°ç¨‹åºçš„è¿è¡Œç¯å¢ƒå¹¶éå®Œæ•´çš„æµè§ˆå™¨ï¼Œæ˜¯å¾®ä¿¡å¼€å‘å›¢é˜ŸåŸºäºæµè§ˆå™¨å†…æ ¸å®Œå…¨é‡æ„çš„ä¸€ä¸ªå†…ç½®è§£æå™¨ï¼Œé’ˆå¯¹å°ç¨‹åºä¸“é—¨åšäº†ä¼˜åŒ–ï¼Œé…åˆè‡ªå·±å®šä¹‰çš„å¼€å‘è¯­è¨€æ ‡å‡†ï¼Œæå‡äº†å°ç¨‹åºçš„æ€§èƒ½ã€‚\nç¬¬äºŒæ¡æ˜¯å¼€å‘æˆæœ¬çš„ä¸åŒ\nåªåœ¨å¾®ä¿¡ä¸­è¿è¡Œï¼Œæ‰€ä»¥ä¸ç”¨å†å»é¡¾è™‘æµè§ˆå™¨å…¼å®¹æ€§ï¼Œä¸ç”¨æ‹…å¿ƒç”Ÿäº§ç¯å¢ƒä¸­å‡ºç°ä¸å¯é¢„æ–™çš„å¥‡å¦™BUG\nç¬¬ä¸‰æ¡æ˜¯è·å–ç³»ç»Ÿçº§æƒé™çš„ä¸åŒ\nç³»ç»Ÿçº§æƒé™éƒ½å¯ä»¥å’Œå¾®ä¿¡å°ç¨‹åºæ— ç¼è¡”æ¥\nç¬¬å››æ¡ä¾¿æ˜¯åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒçš„è¿è¡Œæµç•…åº¦\né•¿ä¹…ä»¥æ¥ï¼Œå½“HTML5åº”ç”¨é¢å¯¹å¤æ‚çš„ä¸šåŠ¡é€»è¾‘æˆ–è€…ä¸°å¯Œçš„é¡µé¢äº¤äº’æ—¶ï¼Œå®ƒçš„ä½“éªŒæ€»æ˜¯ä¸å°½äººæ„ï¼Œéœ€è¦ä¸æ–­çš„å¯¹é¡¹ç›®ä¼˜åŒ–æ¥æå‡ç”¨æˆ·ä½“éªŒã€‚ä½†æ˜¯ç”±äºå¾®ä¿¡å°ç¨‹åºè¿è¡Œç¯å¢ƒç‹¬ç«‹\n\n## æ€ä¹ˆè§£å†³å°ç¨‹åºçš„å¼‚æ­¥è¯·æ±‚é—®é¢˜ï¼Ÿ\nç­”ï¼š\nåœ¨å›è°ƒå‡½æ•°ä¸­è°ƒç”¨ä¸‹ä¸€ä¸ªç»„ä»¶çš„å‡½æ•°ï¼š\napp.js\n\nsuccess: function (info) {         \n  that.apirtnCallback(info)\n}\n\nindex.js\n\nonLoad: function () {\n  app.apirtnCallback = res => {\n    console.log(res) \n  }\nï½\n\n## å°ç¨‹åºçš„åŒå‘ç»‘å®šå’Œvueå“ªé‡Œä¸ä¸€æ ·ï¼Ÿ\nç­”ï¼š\nå°ç¨‹åºç›´æ¥this.dataçš„å±æ€§æ˜¯ä¸å¯ä»¥åŒæ­¥åˆ°è§†å›¾çš„ï¼Œå¿…é¡»è°ƒç”¨ï¼š\n\nthis.setData({\n  noBind:true\n})\n\n## å¸¸ç”¨\n\n### è¡¨å•æäº¤\n```js\n<form bindsubmit=\"formSubmit\">\n  <input value=\"{{address.name}}\" name=\"name\" placeholder=\"å§“å\"/>\n  <input type=\"number\" name=\"phone\" value=\"{{address.phone}}\" placeholder=\"ç”µè¯å·ç \"/>\n  <input name=\"detail\" value=\"{{address.detail}}\" placeholder=\"è¯¦ç»†åœ°å€\"/>\n  <button form-type=\"submit\">ä¿å­˜</button>\n</form>\n // formData=e.detail.value value.name...\n // è¯¸å¦‚bindinput \n```\n\n### wx:for\n```js\n<view wx:for=\"{{answerArr}}\" wx:key=\"index\" data-id=\"{{item.id}}\" bindtap='userSelect'>\n    {{item.value}}\n</view>\n```\n\n### imageç»„ä»¶\né»˜è®¤å®½é«˜ï¼š300px/225px\n- æœ¬åœ°å¼•ç”¨\n- ç½‘ç»œèµ„æºå¼•ç”¨\nä¸æ”¯æŒbackground:url()å½¢å¼\n\n## ç”Ÿå‘½å‘¨æœŸ\n### onLauch å¯åŠ¨\n### onLoad(Object query)\né¡µé¢åŠ è½½æ—¶è§¦å‘ã€‚ä¸€ä¸ªé¡µé¢åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œå¯ä»¥åœ¨ onLoad çš„å‚æ•°ä¸­è·å–æ‰“å¼€å½“å‰é¡µé¢è·¯å¾„ä¸­çš„å‚æ•°ã€‚\n### onShow()\né¡µé¢æ˜¾ç¤º/åˆ‡å…¥å‰å°æ—¶è§¦å‘ã€‚\n### onReady()\né¡µé¢åˆæ¬¡æ¸²æŸ“å®Œæˆæ—¶è§¦å‘ã€‚ä¸€ä¸ªé¡µé¢åªä¼šè°ƒç”¨ä¸€æ¬¡ï¼Œä»£è¡¨é¡µé¢å·²ç»å‡†å¤‡å¦¥å½“ï¼Œå¯ä»¥å’Œè§†å›¾å±‚è¿›è¡Œäº¤äº’ã€‚è°ƒç”¨æ¥å£\n### onHide()\né¡µé¢éšè—/åˆ‡å…¥åå°æ—¶è§¦å‘ã€‚ å¦‚ navigateTo æˆ–åº•éƒ¨ tab åˆ‡æ¢åˆ°å…¶ä»–é¡µé¢ï¼Œå°ç¨‹åºåˆ‡å…¥åå°ç­‰ã€‚\n### onUnload()\né¡µé¢å¸è½½æ—¶è§¦å‘ã€‚å¦‚redirectToæˆ–navigateBackåˆ°å…¶ä»–é¡µé¢æ—¶ã€‚\n\n## æ³¨æ„ç‚¹\n1. import çš„è·¯å¾„ä¸æ”¯æŒç»å¯¹è·¯å¾„ï¼Œæ¯”å¦‚ä½ å¸Œæœ›å¼•ç”¨ utils/fetch.jsï¼Œåœ¨ä¸ç®¡å¤šæ·±çš„ç»„ä»¶é‡Œé¢ä½ éƒ½è¦æ…¢æ…¢ ../ ç‚¹åˆ°æ ¹ç›®å½•ï¼ŒåŒæ · .wxss æ–‡ä»¶ @import å¯¼å…¥æ–‡\nä»¶æ—¶ä¹Ÿåªèƒ½ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç° ../../../../../../utils/fetch.js è¿™ç§ä¸œè¥¿\n\n2. setData è¿ä¸€ä¸ªå¯¹è±¡åˆå¹¶éƒ½æ‡’å¾—åšï¼Œå¦‚æœ data: {a: {b: 1, c: 1}}ï¼Œé‚£ä¹ˆ setData({a: {b: 2}}) å°±ä¼šä¸¢å¤± a.c çš„å€¼ï¼ŒçœŸæ˜¯è®©äººç«å†’ä¸‰ä¸ˆå•Šï¼Œè¿˜è¦ \nsetData({['a.b': 2]}) è¿™æ ·æ‰è¡Œï¼›é€šå¸¸ä½¿ç”¨`wx-updata` this.updata\n\n3. å¾®ä¿¡è¯·æ±‚promiseåŒ–\n```js\nimport { promisifyAll } from 'wx-promise-pro'\n\npromisifyAll()  // promisify all wx api\n\nApp({ ... })\n```\n\n4. è‡ªå·±å®ç°promisify\n```js\nfunction promisify(api) {\n    return (opt = {}) => {\n        return new Promise((resolve, reject) => {\n            api({\n                ...opt,\n                fail: reject,\n                success: resolve\n            })\n        })\n    }\n}\n```\n","tags":["å°ç¨‹åº"],"categories":["çŸ¥è¯†"]},{"title":"ä¾ ä¹‹å¤§è€…ï¼Œä¸ºå›½æ¥ç›˜","url":"%2Fhouseprice.html","content":"\n{% centerquote %} \nç‚’æˆ¿å…´é‚¦ï¼Œå®ä¸šè¯¯å›½\n{% endcenterquote %}\n\n---\n<!-- more -->\n\nè¿‘å¹´æ¥ï¼Œæˆ¿ä»·æˆä¸ºäº†ç”Ÿæ´»ä¸­é‡è¦çš„è°ˆèµ„å’Œè¯é¢˜ï¼Œå‡ ä¹æ‰€æœ‰çš„èŠå¤©åœºåˆéƒ½ä¼šèŠåˆ°æˆ¿å­ï¼Œä»€ä¹ˆè°è°è°æœ‰å‡ å¥—æˆ¿ï¼Œä¸ç”¨å·¥ä½œæ¯æœˆé æˆ¿ç§Ÿè¿‡æ´»ã€‚åå…¬äº¤è½¦ä¸Šéƒ½æ˜¯å¬åˆ°ä¸€äº›é˜¿å§¨æ‰‹é‡Œå‡ å¥—æˆ¿ï¼Œåœ¨æ‰‹é‡Œåœ¨æ‚ä¸€ä¼šï¼Œè½¬æ‰‹å–ç»™æœ‰åˆšéœ€çš„å¹´è½»äººï¼Œåæ‚”æ²¡å¤šä¹°å‡ å¥—ä¹‹ç±»çš„è¯ã€‚\n\næˆ¿ä»·çš„ä¸Šæ¶¨ï¼Œåˆšéœ€ä¸æ•¢ä¸ä¹°ï¼Œç­‰ä¸‹å»çœ‹ä¸åˆ°å¸Œæœ›ï¼Œæç©ºäº†ä¸€å®¶çˆ¶æ¯çš„è¿‡å»å’Œå¹´è½»äººçš„æœªæ¥ï¼Œé¢å¯¹zfçš„è´§å¸è¶…å‘å¼•èµ·çš„é€šè´§è†¨èƒ€ï¼Œå´åˆæ— å¯å¥ˆä½•ã€‚æˆ¿ä»·å†æ¶¨ä¸ª3ã€4å€ï¼Œåˆ†åˆ†é’ŸGDPè¶…è¿‡ç¾å›½å•Šã€‚ç°åœ¨åŸºæœ¬çš„ç†è´¢æ–¹å¼å·²ç»èµ¶ä¸ä¸Šé€šè´§è†¨èƒ€çš„é€Ÿåº¦äº†ï¼Œçœ¼çœ‹ç€æ‰‹é‡Œçš„é’±è¶Šæ¥è¶Šä¸å€¼é’±ï¼Œäººäººè‡ªå±ï¼Œéƒ½åªèƒ½é€šè¿‡è´­æˆ¿æ¥ä¿å€¼ã€‚è¢«zfé€¼çš„å“ªæ€•èƒŒä¸Šå‡ åå¹´çš„è´·æ¬¾ä¹Ÿè¦åä¸Šè¿™è¶Ÿè½¦ï¼Œç»™zfå½“å‡ åå¹´çš„å…è´¹åŠ³åŠ¨åŠ›æ¥æ¶ˆåŒ–è¿™å·¨å¤§çš„æ³¡æ²«ã€‚\n\nè¿™ä¸ªæµ®èºç¤¾ä¼šçš„é«˜æˆ¿ä»·ï¼Œè®©æˆ‘ä»¬è¿™äº›åˆšæ¯•ä¸šå·¥ä½œå‡ å¹´çš„å¹´è½»äººï¼Œè¦æˆ‘ä»¬çš„é’æ˜¥å’Œæ±—æ°´ç»™ä½ ä»¬ä¹°å•ã€‚ç°åœ¨çš„å¹´è½»äººï¼Œæ€ä¹ˆå¯èƒ½åˆšæ¯•ä¸šå°±èƒ½ç§¯æ”’åˆ°ä¹°æˆ¿çš„é¦–ä»˜ï¼Œè¢«é€¼çš„å»â€˜å•ƒè€â€™ï¼Œæç©ºå…¨å®¶äººçš„é’±åŒ…ï¼Œæˆä¸ºæˆ¿å¥´ã€‚2017å¹´å‰yzçš„æˆ¿ä»·å¤§æ¦‚7000/m2ï¼Œæ’å¤§åœ¨å¹´åˆå½“äº†ä¸€æ³¢åœ°ç‹2w/m2ä¹°äº†é‚—æ±Ÿä¸­ä¸“é‚£è¾¹çš„åœ°åï¼Œå„ä¸ªæ¥¼ç›˜å¼€å§‹ç–¯é•¿ï¼Œåœ¨å¹´åº•11æœˆä»½è´­å…¥1w/m2åï¼Œå¦‚ä»ŠçŸ­çŸ­åŠå¹´å·²ç»æ¶¨åˆ°äº†1.3w/m2ã€‚è¯•æƒ³ä»¥100m2ä¸ºä¾‹å¦‚æœä¸æ—©ç‚¹ä¹°ï¼Œå°±å¾—å¹³ç™½æ— æ•…å¤šäº¤20wçš„éŸ­èœé’±ã€‚æˆ¿ä»·é™æ˜¯ä¸å¯èƒ½é™çš„ï¼Œè¿™ä¸ªç‰µæ‰¯åˆ°å¤ªå¤šäººå’Œè¡Œä¸šçš„åˆ©ç›Šï¼Œä¸€æ—¦å´©ç›˜äº†ï¼Œå…¶ä»–è¡Œä¸šä¹Ÿä¼šå—åˆ°å½±å“ï¼Œç»æµé™·å…¥ä½è¿·ï¼Œzfä¸æ–­åœ°å¢å‘è´§å¸æ¥æ•‘å¸‚ã€‚ä¸€çº¿åŸå¸‚æ”¿åºœæ¥ä¸»å¯¼å¸‚åœºçœ‹ä¸Šå»æˆ¿ä»·è·Œäº†ï¼Œè¿™ä¹Ÿåªæ˜¯æ¯æ°´è½¦è–ªï¼Œé«˜é¢çš„æˆ¿ä»·ä¸æ–­åœ°åœ¨é©±é€è¿™æ‰€è°“çš„ä½ç«¯äººå£ï¼Œä¹Ÿæ˜¯å•Šï¼Œæ¯•ç«Ÿè¦å®ç°å°åº·ç¤¾ä¼šå•Šï¼Œè®©å…ˆå¯Œå¸¦åŠ¨åå¯Œï¼Œå®ç°å…±åŒå°åº·ï¼Œè¿˜æ˜¯ç›´æ¥æ¶ˆç­ä½ç«¯äººå£å®¹æ˜“äº›ã€‚æˆ¿ä»·çš„å‹åŠ›è®©ç°åœ¨çš„ä¸­å›½äººå……æ»¡ç€æˆ¾æ°”ã€æµ®èºã€‚ä¸Šäº†è½¦çš„äººåœ¨å˜²è®½ç€æ²¡ä¸Šè½¦çš„äººï¼Œä¸€æ—¦ä¹°äº†æˆ¿ï¼Œä¸¤è€…å°±æˆäº†å¯¹ç«‹é¢ï¼Œé«˜æˆ¿ä»·æ”¹å˜äº†äººä»¬çš„ä»·å€¼è§‚ã€‚å¦‚ä»Šäººä»¬å¯¹äºæˆåŠŸçš„æ ‡å‡†å®šä¹‰æœ‰å‡ è¾†è½¦ï¼Œå‡ å¥—æˆ¿ã€‚ç°åœ¨å„ä¸ªåŸå¸‚æ¨è¡Œçš„æ‰€è°“å¸å¼•äººæ‰æ”¿ç­–ï¼Œä¸å°±æ˜¯ä¸ºäº†è®©äººæ¥æ¥ç›˜å»åº“å­˜ä¹ˆã€‚\n\næˆ¿ä»·å¸¦æ¥äº†ä»·å€¼è§‚çš„é©å‘½ï¼Œä¸­ä¸‹å±‚æŠŠä¹°æˆ¿å½“æˆäº†äººç”Ÿç›®æ ‡ï¼Œä¸­äº§æŠŠä¹°æˆ¿å½“æˆäº†æ”¯ä»˜æ‰‹æ®µï¼Œæ”¿åºœæŠŠå–åœ°å½“ä½œç»æµæ”¯æŸ±ï¼Œå°†ä¼ä¸šå€ºåŠ¡è½¬åŒ–æˆäº†å±…æ°‘å€ºåŠ¡ã€‚æˆ¿ä»·æ†ç»‘äº†ç»æµã€æ”¿æ²»ã€æˆ·ç±ã€æ•™è‚²ã€çˆ±æƒ…ã€äº‹ä¸šç”šè‡³ç¤¾ä¼šåœ°ä½ï¼Œé›†ä¸‡åƒå® çˆ±äºä¸€èº«ã€‚éšç€æˆ¿ä»·è¶Šæ¥è¶Šé«˜ï¼Œç¤¾ä¼šé˜¶å±‚å‡ºç°å›ºåŒ–è¶‹åŠ¿ï¼Œå¤šå°‘å¹´è½»äººçš„æ¢¦æƒ³å€æˆ¿ä»·æ— æƒ…ç¢¾å‹ï¼Œå¤šå°‘å®¶åº­ä¸ºäº†ä¹°æˆ¿èƒŒä¸Šæ²‰é‡çš„å€ºåŠ¡ï¼Œå¤šå°‘çˆ±æƒ…å› ä¸ºæˆ¿ä»·å˜å¾—æ”¯ç¦»ç ´ç¢ï¼Œè¿˜æœ‰çš„å¤«å¦»ä¸ºäº†å¤šä¹°å¥—æˆ¿é€‰æ‹©ç¦»å©šã€‚è€Œåœ¨æˆ¿ä»·é¢å‰æˆ‘ä»¬å´‡å°šçš„ä¸ªäººå¥‹æ–—ï¼Œä¸å€¼ä¸€æ–‡ã€‚å¹´è½»äººå¼€å§‹é€‰æ‹©ä½›ç³»ï¼Œä¸å†æ†§æ†¬çˆ±æƒ…ï¼ŒåšæŒå’ŒåŠªåŠ›å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ï¼Œå¼€å§‹ç›¸ä¿¡æŠ•æœºçš„ä»·å€¼ã€‚é‡‘é’±è‡³ä¸Šä¸»ä¹‰æ¨ªè¡Œï¼Œå‹¤åŠ³è‡´å¯Œæˆä¸ºäº†ç¬‘è¯ï¼Œç‚’æˆ¿çš„äººæˆä¸ºäº†ç¾¡æ…•å¯¹è±¡ï¼Œæ‰€è°“çš„æ¢¦æƒ³æ˜¯å¤šä¹ˆçš„å¹¼ç¨šå¯ç¬‘ã€‚è¿™ä¸ªxxçš„æ—¶ä»£ï¼Œåªè¦ä½ ä¹°ä¸èµ·æˆ¿æ•‘å¸‚æ²¡å‡ºæ¯çš„ç”·äººã€‚æ¯•ç«Ÿç”·ç”Ÿåœ¨å©šå§»å½“ä¸­æ˜¯å‘ä¸‹å…¼å®¹ï¼Œè€Œå¥³ç”Ÿæ˜¯å‘ä¸Šå…¼å®¹çš„ã€‚ç°åœ¨çš„çŸ¥ä¹ä¸Šç°åœ¨çš„ç”·ç”Ÿä¸ºä»€ä¹ˆä¸è¿½æ±‚å¥³ç”Ÿã€ä¸ºä»€ä¹ˆç°åœ¨çš„å¥³å­©å­æ´»å¾—éƒ½å¾ˆæ½‡æ´’ï¼Œç”·å­©å­ç¡®éƒéƒå¯¡æ¬¢è¿™ç±»çš„é—®é¢˜æ¯”æ¯”çš†æ˜¯ã€‚æ¯•ç«Ÿå¥³æ€§æ‰æ˜¯æ¶ˆè´¹çš„ä¸»åŠ›ï¼Œé‚£äº›å•†å®¶ä»¬ä¸ºäº†è‡ªå·±çš„åˆ©ç›Šï¼Œå„ç§æ¨å‡ºä»€ä¹ˆå¥³ç¥èŠ‚ç­‰ç­‰ä¹‹ç±»çš„æ´»åŠ¨å’Œè¥é”€å·æ— åº•çº¿åœ°è®¨å¥½å¥³æ€§å‘è½¯æ–‡æ¯’é¸¡æ±¤ï¼Œæ¶å¿ƒè‡³æã€‚ä»€ä¹ˆå…¬ä¸»ã€å¥³ç‹ã€ä»™å¥³ï¼Œæ‹œæ‹œäº†æ‚¨ï¼å¤§å®¶åˆä¸æ˜¯ç¬¨è›‹ï¼Œçœ‹é€äº†èµ„æœ¬ä¸»ä¹‰ç”Ÿäº§æ–¹å¼ï¼Œä¸æƒ³å†æ²¦ä¸ºå¥´éš¶äº†ï¼Œå·¥ä½œåªä¼šä½¿è‡ªå·±è¶Šæ¥è¶Šè´«ç©·ã€‚åŠ³åŠ¨æ³•å°±æ˜¯ä¸ªç¬‘è¯ï¼Œå„ç§è¢«æ‰€è°“çš„ä¼ä¸šæ–‡åŒ–æ‰€ç»‘æ¶ï¼Œå‹æ¦¨å¹²ä½ çš„åŠ³åŠ¨åŠ›ã€‚å‘˜å·¥å’Œå…¬å¸çš„å…³ç³»å¾ˆç®€å•ï¼Œä½ ä»˜ç»™æˆ‘é’±ï¼Œæˆ‘å¸®ä½ å·¥ä½œç½¢äº†ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯ä¸€å®¶äººã€‚æ°¸è¿œä¸è¦è¯•æ¢äººæ€§çš„åº•çº¿ï¼Œæ²¡æœ‰å®Œç¾çš„äººã€‚æŠ±æ­‰ï¼Œä¸­å›½ç‰¹è‰²ç¤¾ä¼šä¸»ä¹‰çš„å¤§é¥¼æˆ‘åƒä¸ä¸‹äº†ã€‚\n\nä»å¤è‡³ä»Šï¼Œä¸­å›½è¿˜æ˜¯æ²¡æœ‰å‘ç”Ÿä»€ä¹ˆå¤§çš„å˜åŒ–ï¼Œæƒåˆ©è¿˜æ˜¯æŒæ¡åœ¨å°‘éƒ¨åˆ†äººæ‰‹é‡Œï¼Œå±‚å±‚å‰¥å‰Šçš„é‡‘å­—å¡”ç»“æ„ï¼Œä»€ä¹ˆäººæ°‘å½“å®¶ä½œä¸»ï¼Œåˆ°å¤´æ¥è¿˜ä¸æ˜¯è¢«ä»£è¡¨äº†ã€‚æ‰€è°“çš„æ³•å¾‹è¿˜ä¸æ˜¯ä¸ºäº†ç»´æŠ¤é˜¶çº§ç»Ÿæ²»çš„åˆ©ç›Šã€‚æˆ‘å›½æ˜¯é¢†å¯¼äººé€‰ä¸¾èƒ½å…¨ç¥¨é€šè¿‡çš„å›½å®¶ï¼Œç¥å¥‡ä¸ç¥å¥‡å‘µå‘µã€‚ä¸€ä¸ªä¸ªå¤§è…¹ä¾¿ä¾¿çš„é¢†å¯¼ä»¬ï¼Œå˜´ä¸Šè¯´ç€æœåŠ¡äººæ°‘ï¼ŒèƒŒåœ°é‡Œä½œè€…è´ªæ±¡è…è´¥çš„è¡Œå½“ã€‚è¿™å¹´å¤´éƒ½å¸Œæœ›è€ƒå…¬åŠ¡å‘˜ï¼Œå…¬åŠ¡å‘˜æ˜¯ä»€ä¹ˆï¼Œä¸ºäººæ°‘æœåŠ¡ã€‚ä¸€ä¸ªä¸ªéƒ½äº‰ç€æŠ¢ç€å»å½“äººæ°‘çš„å…¬ä»†ï¼Œè¿˜ä¸æ˜¯ä¸ºäº†é“é¥­ç¢—ã€åˆ©ç›Šã€‚åœ¨å°åŸå¸‚é‡Œï¼Œéƒ½æ˜¯é å…³ç³»ï¼Œæ‰€è°“çš„äººæƒ…ç¤¾ä¼šã€‚æœ‰äº›äººåªæ˜¯æƒ³å¬åˆ°ä»–ä»¬æƒ³å¬åˆ°çš„è¯ç½¢äº†ï¼Œæˆå¹´äººçš„ä»·å€¼è§‚ä¸€æ—¦æˆå‹ä¸€èˆ¬æ˜¯å¾ˆéš¾æ”¹å˜çš„ã€‚å›½å®¶å¼€æ”¾äºŒèƒæ”¿ç­–è¿˜ä¸æ˜¯ä¸ºäº†æ‹‰åŠ¨å†…éœ€ï¼ŒåŠ³åŠ¨åŠ›ä¸è¶³ï¼Œè€é¾„åŒ–ä¸¥é‡ã€‚ç°åœ¨åœ°åŒºé—´å‘å±•ä¸å¹³è¡¡ï¼Œä¸­å›½å°±åªæœ‰è¿™åŒ—ä¸Šå¹¿æ·±ç­‰ä¸€çº¿åŸå¸‚ç½¢äº†ï¼Œå¾ˆå¤šäººèƒŒäº•ç¦»ä¹¡å»è¿™äº›å¤§åŸå¸‚æ‰“å·¥ï¼Œè¿™äº›äººæ˜¯å»èµšé’±è€Œä¸æ˜¯æ¥æ¶ˆè´¹çš„ï¼Œå½“åœ°çš„zfæ˜¯å¾ˆè®¨åŒçš„ã€‚æ˜¥è¿å¾ˆå€¼å¾—éª„å‚²å—ï¼Œä½ ä»¥ä¸ºäººäººéƒ½æ„¿æ„è¿œç¦»è‡ªå·±çš„å®¶ä¹¡ï¼Œåœ¨é™Œç”Ÿçš„åŸå¸‚ä¸­æ‰“æ‹¼å—ï¼Ÿè¿™äº›ç¹åéƒ½ä¸è‡ªå·±æ— å…³ã€‚å¾ˆä¹…ä¹‹å‰è¢«æ•™å¯¼ä¸ä¹±æ‰”åƒåœ¾ï¼Œå¯ç°å®æ˜¯å¦‚æœå¤§å®¶éƒ½ä¸ä¹±æ‰”åƒåœ¾äº†ï¼Œé‚£äº›ç¯å«å·¥äººä»¬æ˜¯çœŸçš„ä¼šå¤±ä¸šçš„ï¼Œèµ„æœ¬å®¶ä¼šè®©äººç™½ç™½é¢†ä¸€ä»½å·¥èµ„ä¹ˆï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯ä¸ä¼šçš„ï¼Œä»–ä»¬å®å¯æŠŠè¿‡å‰©çš„å•†å“éƒ½æ„¿æ„å€’æ‰é”€æ¯ï¼Œä¹Ÿä¸æ„¿æ„æ•‘æµè´«æ°‘ï¼Œæ‰°ä¹±æ¶ˆè´¹å¸‚åœºã€‚ä¸­å›½æœ‰ç€æœ€å¤§çš„å±€åŸŸç½‘ï¼Œä¿æŠ¤æœ¬å›½çš„äº’è”ç½‘äº§å“çš„åˆ©ç›Šï¼Œæ²¡ä»€ä¹ˆåˆ›æ–°ï¼Œéƒ½æ˜¯å¯¹æ ‡å›½å¤–çš„äº§å“ã€‚é™¤äº†æŠ„è¢­è¿˜æ˜¯æŠ„è¢­ï¼Œç§‘ç ”æ²¡æœ‰å®é™…çš„æˆæœéƒ½åªæ˜¯ä¸ºäº†éª—å–å›½å®¶çš„è¡¥è´´ã€‚\n\nè¿™å¹´å¤´çš„å¹¼å„¿æ•™è‚²ä¹Ÿæ˜¯é—®é¢˜ä¸æ–­ã€‚åº”è¯•æ•™è‚²ä¹Ÿå°±ç®—äº†ï¼Œå†æ€ä¹ˆåŸ¹å…»ä¹Ÿæ˜¯è€ƒè¯•å‹äººæ‰ã€‚ä¸ºäº†ä¸è®©è‡ªå·±çš„å­©å­è¾“åœ¨èµ·è·‘çº¿ï¼Œç»™å­©å­æŠ¥äº†å¤§å¤§å°å°çš„åŸ¹è®­ç­ã€‚ä¸­å›½å¤§å¤šæ•°çˆ¶æ¯éƒ½ä¸å¸Œæœ›è‡ªå·±çš„å­©å­æ˜¯ä¸ªâ€œæ™®é€šå­¦ç”Ÿâ€ï¼Œè€Œæ˜¯å¸Œæœ›å­©å­èƒ½åƒåˆ«äººå®¶çš„å­©å­ä¸€æ ·èƒ½è€ƒè¿›åç‰Œå¤§å­¦ï¼ˆè¢«å›½å®¶å½’ä¸º 211 æˆ–è€… 985 çš„å¤§å­¦ï¼‰ï¼Œä½†äº‹å®ä¸Šæ¯å¹´èƒ½æŒ¤è¿‡é«˜è€ƒç‹¬æœ¨æ¡¥è€ƒå– 211/985 çš„å­©å­æœ‰å¤šå°‘å‘¢ï¼Ÿ å…¨å›½å¹³å‡ä¸‹æ¥å¤§çº¦æ˜¯ 7% ã€‚å¯¹ 93% çš„å­¦ç”Ÿå’Œå®¶é•¿æ¥è¯´ï¼Œåå‡ å¹´æ¥ä»–ä»¬æ‰¿å—ç€å·¨å¤§çš„å‹åŠ›ï¼Œæœ€åå´å‡ ä¹å¯ä»¥è¯´åœ¨â€œè¯»ä¹¦â€ä¸Šæ˜¯å¤±è´¥çš„ã€‚æˆ‘ä»¬çš„å­¦æ ¡é™¤äº†æ•™å­¦ç”Ÿè¯»ä¹¦è¿˜æ•™ä»–ä»¬ä»€ä¹ˆå‘¢ï¼Ÿ\n\nä¸è®ºç¤¾ä¼šå¦‚ä½•å˜åŒ–åŠ¨è¡ï¼Œå¤§å®¶åªæƒ³å®ˆæŠ¤å¥½è‡ªå·±çš„å°å°å¹¸ç¦ç½¢äº†ã€‚\n\n","tags":["æˆ¿ä»·"],"categories":["æ‚è°ˆ"]},{"title":"JSæ‰§è¡Œé¡ºåº-å‡½æ•°å£°æ˜æå‡ã€åŒ¿åå‡½æ•°ã€å‡½æ•°è¡¨è¾¾å¼","url":"%2FexecutionOrder.html","content":"\n{% centerquote %} \n JS æ˜¯æŒ‰ç…§`ä»£ç å—`è¿›è¡Œ ç¼–è¯‘ã€æ‰§è¡Œ çš„ã€‚\n{% endcenterquote %}\n\n---\n<!-- more -->\n## scriptæ ‡ç­¾åŒºåˆ†ä»£ç å—\n```javascript\n<script>\n  alert('ä»£ç å—ä¸€');\n</script>\n<script>\n  alert('ä»£ç å—äºŒ');\n</script>\n```\n\n## å…³äºå‡½æ•°(å£°æ˜å¼å‡½æ•°ã€èµ‹å€¼å‹ï¼ˆå‡½æ•°è¡¨è¾¾å¼ï¼‰å‡½æ•°ã€åŒ¿åå‡½æ•°ã€è‡ªæ‰§è¡Œå‡½æ•°)\n### å‡½æ•°æå‡\n`å£°æ˜å‡½æ•°ä¸èµ‹å€¼å‡½æ•°çš„åŒºåˆ«åœ¨äºï¼š åœ¨ JS çš„é¢„ç¼–è¯‘æœŸé—´ï¼Œå£°æ˜å¼å‡½æ•°ä¼šè¢«å…ˆæå–å‡ºæ¥ï¼Œç„¶åæ‰æŒ‰ç…§é¡ºåºæ‰§è¡Œ JSä»£ç ã€‚`\n\n```javascript\nA();  // 'A '\nfunction A() {\n  console.log('A');\n}\n\nB(); // errorï¼Œ B is not a function\nvar B = function() {\n  console.log('B');\n}\n```\n\n### åŒ¿åå‡½æ•°ï¼ˆæ²¡æœ‰åå­—çš„å‡½æ•°ï¼‰\n```javascript\nfunction() {} // åŒ¿åå‡½æ•°\n```\n\n### è‡ªæ‰§è¡Œå‡½æ•°\n```javascript\n(function() {\n  console.log(3);\n})();\n\n// å¸¦å‚æ•°\n(function(num){\n  console.log(num);\n})(3); // 3\n\n// æ²¡æœ‰æ‹¬å·ä¼šæŠ¥é”™ å¦‚ä¸‹\nfunction() {\n  console.log(3);\n}();\n```\nåŸå› å¦‚ä¸‹ï¼š\n- function {}()å…¶å®è¿™æ˜¯ä¸€ä¸ªå‡½æ•°å£°æ˜ã€‚\n- JSè¿è¡Œçš„æ—¶å€™ï¼Œä¼šå¯¹å‡½æ•°å£°æ˜è¿›è¡Œé¢„ç¼–è¯‘ï¼Œç„¶ååœ¨æ‰§è¡Œå…¶ä»–è¯­å¥ã€‚\n- ä¹Ÿå°±æ˜¯è¯´function(){}å…ˆè¢«é¢„ç¼–è¯‘äº†ã€‚ç„¶åJSçœ‹è§äº†()ã€‚JSä¸€è„¸æ‡µé€¼ï¼Œè¿™ä¸å¾—æŠ¥é”™å—ã€‚\n- è€ŒåŒ¿åå‡½æ•°å®é™…ä¸Šæ˜¯ä¸€ä¸ªè¯­å¥ï¼Œæ­£å¸¸æ‰§è¡Œã€‚\n\nè‡ªæ‰§è¡Œå‡½æ•°çš„æ ‡è¯†ä¹Ÿå¯ä»¥æ˜¯\n```javascript\n!function(){}()      (function(){})()    \n~function(){}()      void function(){}()\n```\n\n## é¢„ç¼–è¯‘æœŸå’Œæ‰§è¡ŒæœŸ\n{% note info %}\nJSçš„è§£æåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šé¢„ç¼–è¯‘ å’Œ æ‰§è¡ŒæœŸã€‚\n{% endnote %}\n- é¢„ç¼–è¯‘æœŸé—´ï¼šå¯¹æœ¬ä»£ç å—ä¸­çš„æ‰€æœ‰å£°æ˜å˜é‡å’Œå‡½æ•°è¿›è¡Œå¤„ç†(ç±»ä¼¼äºCè¯­è¨€çš„ç¼–è¯‘) ï¼Œä½†éœ€è¦æ³¨æ„ï¼Œ1.æ­¤æ—¶å¤„ç†å‡½æ•°çš„åªæ˜¯ å£°æ˜å¼å‡½æ•°2.å˜é‡ä¹Ÿåªæ˜¯è¿›è¡Œäº†å£°æ˜ä½†æ˜¯æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–å’Œèµ‹å€¼\n- ç¼–è¯‘æœŸé—´ï¼šä»ä¸Šåˆ°ä¸‹ç¼–è¯‘ä»£ç å—ã€‚\n\n### å‡½æ•°å£°æ˜æå‰ä¸”åæ¥å±…ä¸Šè¦†ç›–\n```javascript\ngetName(); // 6\nfunction getName() { alert (5);}\nvar getName = function () { alert (4);};\nfunction getName() { alert (6);}\n\n---\nvar getName = function () { alert (4);};\nfunction getName() { alert (6);}\ngetName(); // 4 å‡½æ•°å£°æ˜éƒ½è¢«æå‡äº†ï¼Œè¡¨è¾¾å¼ä¼šè¦†ç›–æ‰\n```\n\n### ç»ƒä¹ é¢˜\n```javascript\nfunction Foo() {\n    // å…¨å±€å˜é‡\n    getName = function () { alert (1); };\n    return this;\n}\nFoo.getName = function () { alert (2);};\nFoo.prototype.getName = function () { alert (3);};\nvar getName = function () { alert (4);};\nfunction getName() { alert (5);} // å‡½æ•°æå‡ JavaScriptæ°¸è¿œä¸ä¼šæœ‰å‡½æ•°é‡è½½\n \n//è¯·å†™å‡ºä»¥ä¸‹è¾“å‡ºç»“æœï¼š\nFoo.getName(); // 2\ngetName();  // 4\nFoo().getName(); // 1 è¦†ç›–äº†å‡½æ•°è¡¨è¾¾å¼\ngetName(); // 1\nnew Foo.getName(); // 2 new (Foo.getName)()\nnew Foo().getName(); // 3 (new Foo()).getName();\n```\n\n## ES6ä¹‹å‰ï¼ŒJSæ²¡æœ‰å˜é‡ä½œç”¨åŸŸã€‚åªæœ‰ å‡½æ•°ä½œç”¨åŸŸ å’Œ å…¨å±€ä½œç”¨åŸŸã€‚\n```javascript\n{\n  var a = 3;\n}\nconsole.log(a); // 3\n---\n{\n  let a = 3;\n}\nconsole.log(a); // error\n```","tags":["çŸ¥è¯†"],"categories":["JS"]},{"title":"JavaScriptæ·±å…¥ä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡","url":"%2Fcontext.html","content":"\n**æ‰§è¡Œä¸Šä¸‹æ–‡(EC)å°±æ˜¯å½“å‰JavaScriptä»£ç è¢«è§£æå’Œæ‰§è¡Œæ˜¯æ‰€åœ¨ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µï¼ŒJavaScriptä¸­è¿è¡Œä»»ä½•çš„ä»£ç éƒ½æ˜¯åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚**\n\n## å˜é‡/å‡½æ•°æå‡(å‡½æ•°åŠå˜é‡çš„å£°æ˜éƒ½å°†è¢«æå‡åˆ°å‡½æ•°çš„æœ€é¡¶éƒ¨ï¼Œä¸”å‡½æ•°å£°æ˜åœ¨å˜é‡å£°æ˜ä¸Šè¾¹)\n\n```javascript\nif(!(\"a\" in window)){ // false\n    var a=1;\n}\nconsole.log(a) // undefined\n// if(o.x){} // ä¸èƒ½åˆ¤æ–­å±æ€§å­˜ä¸å­˜åœ¨ å‡å€¼undefine,null,false,\" \",0æˆ–NaN\n```\n\n```javascript\nfunction foo() {\n    console.log('foo1');\n}\n\nfoo();  // foo2\n\nfunction foo() {\n    console.log('foo2');\n}\n\nfoo(); // foo2\n---\nvar getName = function () { alert (4);};\nfunction getName() { alert (5);}\ngetName(); // 4\n---\nfunction getName() { alert (5);}\nvar getName = function () { alert (4);};\nfunction getName() { alert (6);}\ngetName(); // 4\n```\nå‡½æ•°è¡¨è¾¾å¼æ‰§è¡Œçš„ä¼˜å…ˆçº§==!ä¸»è¦åŸå› æ˜¯å‡½æ•°å£°æ˜éƒ½è¢«æå‰äº†ï¼Œæ‰€ä»¥å‡½æ•°è¡¨è¾¾å¼åœ¨æœ€åä¼šè¦†ç›–ã€‚\n\nJavaScript å¼•æ“å¹¶éä¸€è¡Œä¸€è¡Œåœ°åˆ†æå’Œæ‰§è¡Œç¨‹åºï¼Œè€Œæ˜¯ä¸€æ®µä¸€æ®µåœ°åˆ†ææ‰§è¡Œã€‚æ’æ§½slot\nå¯æ‰§è¡Œä»£ç çš„ç±»å‹ï¼šå…¨å±€ä»£ç ã€å‡½æ•°ä»£ç ã€evalä»£ç ã€‚\nJavaScript å¼•æ“åˆ›å»ºäº†æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆExecution context stackï¼ŒECSï¼‰æ¥ç®¡ç†æ‰§è¡Œä¸Šä¸‹æ–‡\n\n--- \n<!-- more -->\n\n- ä½œç”¨åŸŸï¼šä½œç”¨åŸŸæ˜¯å®šä¹‰å˜é‡çš„åŒºåŸŸï¼Œå®ƒæœ‰ä¸€å¥—è®¿é—®å˜é‡çš„è§„åˆ™ï¼Œè¿™å¥—è§„åˆ™æ¥ç®¡ç†æµè§ˆå™¨å¼•æ“å¦‚ä½•åœ¨å½“å‰ä½œç”¨åŸŸä»¥åŠåµŒå¥—çš„ä½œç”¨åŸŸä¸­æ ¹æ®å˜é‡ï¼ˆæ ‡è¯†ç¬¦ï¼‰è¿›è¡Œå˜é‡æŸ¥æ‰¾ã€‚\n\n- ä½œç”¨åŸŸé“¾ï¼šä½œç”¨åŸŸé“¾çš„ä½œç”¨æ˜¯ä¿è¯å¯¹æ‰§è¡Œç¯å¢ƒæœ‰æƒè®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„æœ‰åºè®¿é—®ï¼Œé€šè¿‡ä½œç”¨åŸŸé“¾ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®åˆ°å¤–å±‚ç¯å¢ƒçš„å˜é‡å’Œå‡½æ•°ã€‚\n\n## åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†\n- å˜é‡å¯¹è±¡(VO)\n- ä½œç”¨åŸŸé“¾\n- this æŒ‡å‘\n\n### å˜é‡å¯¹è±¡\nå˜é‡å¯¹è±¡ï¼Œæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥æŠ½è±¡ä¸ºä¸€ç§ æ•°æ®ä½œç”¨åŸŸï¼Œå…¶å®ä¹Ÿå¯ä»¥ç†è§£ä¸ºå°±æ˜¯ä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œå®ƒå­˜å‚¨ç€è¯¥æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°å£°æ˜(ä¸åŒ…å«å‡½æ•°è¡¨è¾¾å¼)ã€‚\n> æ´»åŠ¨å¯¹è±¡ (AO): å½“å˜é‡å¯¹è±¡æ‰€å¤„çš„ä¸Šä¸‹æ–‡ä¸º active EC æ—¶ï¼Œç§°ä¸ºæ´»åŠ¨å¯¹è±¡ã€‚\n\n### ä½œç”¨åŸŸé“¾(è®¿é—®åˆ°çˆ¶çº§ç”šè‡³å…¨å±€çš„å˜é‡)\næ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¿˜åŒ…å«ä½œç”¨åŸŸé“¾ã€‚ç†è§£ä½œç”¨åŸŸä¹‹å‰ï¼Œå…ˆä»‹ç»ä¸‹ä½œç”¨åŸŸã€‚ä½œç”¨åŸŸå…¶å®å¯ç†è§£ä¸ºè¯¥ä¸Šä¸‹æ–‡ä¸­å£°æ˜çš„ `å˜é‡å’Œå£°æ˜çš„ä½œç”¨èŒƒå›´`ã€‚å¯åˆ†ä¸º å…¨å±€ä½œç”¨åŸŸã€å—çº§ä½œç”¨åŸŸ \nå’Œ å‡½æ•°ä½œç”¨åŸŸ\n\n- å£°æ˜æå‰: ä¸€ä¸ªå£°æ˜åœ¨å‡½æ•°ä½“å†…éƒ½æ˜¯å¯è§çš„, å‡½æ•°ä¼˜å…ˆäºå˜é‡\n- éåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°ï¼Œå‡½æ•°å˜é‡ä¸º åªè¯» çŠ¶æ€ï¼Œæ— æ³•ä¿®æ”¹\n```js\nlet foo = function() { console.log(1) };\n(function foo() {\n    foo = 10  // ç”±äºfooåœ¨å‡½æ•°ä¸­åªä¸ºå¯è¯»ï¼Œå› æ­¤èµ‹å€¼æ— æ•ˆ\n    console.log(foo)\n}())\n```\n\n## æ‰§è¡Œä¸Šä¸‹æ–‡çš„ç±»å‹ï¼Œä¸»è¦æœ‰ä¸‰ç±»ï¼š\n\n- å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šè¿™æ˜¯é»˜è®¤çš„ï¼Œæœ€åŸºç¡€çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ä¸åœ¨ä»»ä½•å‡½æ•°ä¸­çš„ä»£ç éƒ½ä½äºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ã€‚å…±æœ‰ä¸¤ä¸ªè¿‡ç¨‹ï¼š1.åˆ›å»ºæœ‰å…¨å±€å¯¹è±¡ï¼Œåœ¨æµè§ˆå™¨ä¸­è¿™ä¸ªå…¨å±€å¯¹è±¡å°±æ˜¯windowå¯¹è±¡ã€‚2.å°†thisæŒ‡é’ˆæŒ‡å‘è¿™ä¸ªå…¨å±€å¯¹è±¡ã€‚ä¸€ä¸ªç¨‹åºä¸­åªèƒ½å­˜åœ¨ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ã€‚\n\n- å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼šæ¯æ¬¡è°ƒç”¨å‡½æ•°æ—¶ï¼Œéƒ½ä¼šä¸ºè¯¥å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚æ¯ä¸ªå‡½æ•°éƒ½æ‹¥æœ‰è‡ªå·±çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯åªæœ‰åœ¨å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™æ‰ä¼šè¢«åˆ›å»ºã€‚ä¸€ä¸ªç¨‹åºä¸­å¯ä»¥å­˜åœ¨å¤šä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œè¿™äº›å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡æŒ‰ç…§ç‰¹å®šçš„é¡ºåºæ‰§è¡Œä¸€ç³»åˆ—æ­¥éª¤ã€‚\n\n- evalæ‰§è¡Œä¸Šä¸‹æ–‡\n\n## è°ƒç”¨æ ˆ\nè°ƒç”¨æ ˆï¼Œå…·æœ‰LIFOï¼ˆLast in, First out åè¿›å…ˆå‡ºï¼‰ç»“æ„ï¼Œç”¨äºå­˜å‚¨åœ¨ä»£ç æ‰§è¡ŒæœŸé—´åˆ›å»ºçš„æ‰€æœ‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚\n\nä¸ºäº†æ¨¡æ‹Ÿæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆçš„è¡Œä¸ºï¼Œè®©æˆ‘ä»¬å®šä¹‰æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆæ˜¯ä¸€ä¸ªæ•°ç»„ï¼š\n\n```javascript\nECStack = [];\n```\n\nè¯•æƒ³å½“ JavaScript å¼€å§‹è¦è§£é‡Šæ‰§è¡Œä»£ç çš„æ—¶å€™ï¼Œæœ€å…ˆé‡åˆ°çš„å°±æ˜¯å…¨å±€ä»£ç ï¼Œæ‰€ä»¥åˆå§‹åŒ–çš„æ—¶å€™é¦–å…ˆå°±ä¼šå‘æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆå‹å…¥ä¸€ä¸ªå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œæˆ‘ä»¬ç”¨ globalContext è¡¨ç¤ºå®ƒï¼Œå¹¶ä¸”åªæœ‰å½“æ•´ä¸ªåº”ç”¨ç¨‹åºç»“æŸçš„æ—¶å€™ï¼ŒECStack æ‰ä¼šè¢«æ¸…ç©ºï¼Œæ‰€ä»¥ç¨‹åºç»“æŸä¹‹å‰ï¼Œ ECStack æœ€åº•éƒ¨æ°¸è¿œæœ‰ä¸ª globalContextï¼š\n\n```javascript\nECStack = [\n    globalContext\n];\n```\n\nç°åœ¨ JavaScript é‡åˆ°ä¸‹é¢çš„è¿™æ®µä»£ç äº†ï¼š\n\n```javascript\nfunction fun3() {\n    console.log('fun3')\n}\n\nfunction fun2() {\n    fun3();\n}\n\nfunction fun1() {\n    fun2();\n}\n\nfun1();\n```\n\nå½“æ‰§è¡Œä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”å‹å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼Œå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•çš„æ—¶å€™ï¼Œå°±ä¼šå°†å‡½æ•°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ä»æ ˆä¸­å¼¹å‡ºã€‚çŸ¥é“äº†è¿™æ ·çš„å·¥ä½œåŸç†ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å¤„ç†ä¸Šé¢è¿™æ®µä»£ç ï¼š\n\n```javascript\n// ä¼ªä»£ç \n\n// fun1()\nECStack.push(<fun1\\> functionContext);\n\n// fun1ä¸­ç«Ÿç„¶è°ƒç”¨äº†fun2ï¼Œè¿˜è¦åˆ›å»ºfun2çš„æ‰§è¡Œä¸Šä¸‹æ–‡\nECStack.push(<fun2\\> functionContext);\n\n// æ“¦ï¼Œfun2è¿˜è°ƒç”¨äº†fun3ï¼\nECStack.push(<fun3\\> functionContext);\n\n// fun3æ‰§è¡Œå®Œæ¯•\nECStack.pop();\n\n// fun2æ‰§è¡Œå®Œæ¯•\nECStack.pop();\n\n// fun1æ‰§è¡Œå®Œæ¯•\nECStack.pop();\n\n// javascriptæ¥ç€æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼Œä½†æ˜¯ECStackåº•å±‚æ°¸è¿œæœ‰ä¸ªglobalContext\n```\n\n```js\nfunction a() {\n    var value = 'local scope'\n    function b() {\n        console.log(value)\n    }\n    return b()\n}\na()\nfunction a() {\n    var value = 'local scope'\n    function b() {\n        console.log(value)\n    }\n    return b\n}\na()()\n```\nåˆ†æå¦‚ä¸‹ğŸ‘ï¼š\n```js\n// a()æ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡å…¥æ ˆ\nECsatck.push(<fun\\> a)\n// å‡½æ•°aé‡åˆ°bå¯æ‰§è¡Œå‡½æ•°ï¼Œæ‰§è¡Œbå‡½æ•°åˆ›å»ºå¯æ‰§è¡Œä¸Šä¸‹æ–‡å…¥æ ˆ\nECstack.push(<fun\\> b)\n// åè¿›å…ˆå‡ºåŸåˆ™bæ‰§è¡Œå®Œå‡ºæ ˆ\nECstack.pop()\n// aæ‰§è¡Œå®Œå‡ºæ ˆ\nECstack.pop()\n\nç¬¬äºŒæ®µä»£ç \n\n// a()æ‰§è¡Œçš„æ—¶å€™ï¼Œåˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡å…¥æ ˆ\nECsatck.push(<fun\\> a)\n// aæ‰§è¡Œå®Œåè¿”å›äº†bå‡½æ•°ï¼Œæ³¨æ„è¿™é‡Œæ²¡æœ‰ç›´æ¥æ‰§è¡Œè€Œæ˜¯ç›´æ¥è¿”å›äº†b,æ‰€æœ‰æ²¡æœ‰åˆ›å»ºbå‡½æ•°çš„ä¸Šä¸‹æ–‡ï¼Œaæ‰§è¡Œå®Œç›´æ¥å‡ºæ ˆ\nECstack.pop() //aå‡ºæ ˆ\n// åœ¨å¤–éƒ¨è¿”å›çš„bå‡½æ•°è¢«æ‰§è¡Œï¼Œ åˆ›å»ºbçš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå‹å…¥æ ˆï¼Œ\nECstack.push(<fun\\> b)\n// bæ‰§è¡Œå®Œå‡ºæ ˆ\nECstack.pop()\n```\n\n## è°ƒç”¨æ ˆæ‰§è¡Œçš„é¡ºåº\n- åˆ›å»ºå…¨å±€ä¸Šä¸‹æ–‡(global EC)\n\n- æ¯ä¸ªå‡½æ•°çš„åˆ›å»ºï¼Œå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¤–éƒ¨ç¯å¢ƒçš„å¼•ç”¨åŠ thisï¼Œä¼špushåˆ°æ‰§è¡Œæ ˆé¡¶å±‚\n\n- å‡½æ•°è°ƒç”¨æ—¶ï¼Œå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡è¢«æ¿€æ´»ï¼Œæˆä¸º active EC, å¼€å§‹æ‰§è¡Œå‡½æ•°ä¸­çš„ä»£ç ï¼Œcaller è¢«æŒ‚èµ·\n\n- å‡½æ•°æ‰§è¡Œç»“æŸåä¼šä»å †æ ˆä¸­å¼¹å‡ºpopï¼Œå¹¶ä¸”å®ƒçš„æ‰§è¡Œä¸Šä¸‹æ–‡è¢«åƒåœ¾æ”¶é›†å›æ”¶(é—­åŒ…é™¤å¤–)ã€‚æ§åˆ¶æƒäº¤è¿˜å…¨å±€ä¸Šä¸‹æ–‡ (caller)ï¼Œç»§ç»­æ‰§è¡Œ\n\n- å½“è°ƒç”¨å †æ ˆä¸ºç©ºæ—¶ï¼Œå®ƒå°†ä»äº‹ä»¶é˜Ÿåˆ—ä¸­è·å–äº‹ä»¶\n\nå½“æµè§ˆå™¨åŠ è½½æŸäº›JSä»£ç æ—¶ï¼ŒJSå¼•æ“ä¼šé€è¡Œè¯»å–å¹¶æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\n- å°†å˜é‡å’Œå‡½æ•°çš„å£°æ˜æ”¾å…¥å…¨å±€å†…å­˜(å †)ä¸­\n- å°†å‡½æ•°çš„è°ƒç”¨æ”¾å…¥è°ƒç”¨å †æ ˆ\n- åˆ›å»ºå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåœ¨å…¶ä¸­æ‰§è¡Œå…¨å±€å‡½æ•°\n- åˆ›å»ºå¤šä¸ªæœ¬åœ°æ‰§è¡Œä¸Šä¸‹æ–‡(å¦‚æœæœ‰å†…éƒ¨å˜é‡æˆ–åµŒå¥—å‡½æ•°)\n\næ¯ä¸ªå¼‚æ­¥å‡½æ•°åœ¨è¢«æ”¾å…¥è°ƒç”¨å †æ ˆä¹‹å‰å¿…é¡»é€šè¿‡å›è°ƒé˜Ÿåˆ—ï¼Œä½†è¿™ä¸ªå·¥ä½œæ˜¯è°åšçš„å‘¢ï¼Œé‚£å°±æ˜¯äº‹ä»¶å¾ªç¯(Event Loop)ã€‚\n\näº‹ä»¶å¾ªç¯åªæœ‰ä¸€ä¸ªä»»åŠ¡:å®ƒæ£€æŸ¥è°ƒç”¨å †æ ˆæ˜¯å¦ä¸ºç©ºã€‚å¦‚æœå›è°ƒé˜Ÿåˆ—ä¸­(Callback Queue)æœ‰æŸä¸ªå‡½æ•°ï¼Œå¹¶ä¸”è°ƒç”¨å †æ ˆæ˜¯ç©ºé—²çš„ï¼Œé‚£ä¹ˆå°±å°†å…¶æ”¾å…¥è°ƒç”¨å †æ ˆä¸­ã€‚\n\n## å…¨å±€å¯¹è±¡\n{% note info %}\n\nå…¨å±€å¯¹è±¡æ˜¯é¢„å®šä¹‰çš„å¯¹è±¡ï¼Œä½œä¸º JavaScript çš„å…¨å±€å‡½æ•°å’Œå…¨å±€å±æ€§çš„å ä½ç¬¦ã€‚é€šè¿‡ä½¿ç”¨å…¨å±€å¯¹è±¡ï¼Œå¯ä»¥è®¿é—®æ‰€æœ‰å…¶ä»–æ‰€æœ‰é¢„å®šä¹‰çš„å¯¹è±¡ã€å‡½æ•°å’Œå±æ€§ã€‚\n\n{% endnote %}\n\n{% note info %}\n\nä¾‹å¦‚ï¼Œå½“JavaScript ä»£ç å¼•ç”¨ parseInt() å‡½æ•°æ—¶ï¼Œå®ƒå¼•ç”¨çš„æ˜¯å…¨å±€å¯¹è±¡çš„ parseInt å±æ€§ã€‚å…¨å±€å¯¹è±¡æ˜¯ä½œç”¨åŸŸé“¾çš„å¤´ï¼Œè¿˜æ„å‘³ç€åœ¨é¡¶å±‚ JavaScript ä»£ç ä¸­å£°æ˜çš„æ‰€æœ‰å˜é‡éƒ½å°†æˆä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§ã€‚\n\n{% endnote %}\n\n```javascript\n// åœ¨æµè§ˆå™¨å®¢æˆ·ç«¯ å…¨å±€å¯¹è±¡å°±æ˜¯windowå¯¹è±¡\n// é€šè¿‡thiså¼•ç”¨\nthis === window  // true\nthis.window === window // true\nthis instanceof Object // true æ˜¯é€šè¿‡Objectæ„é€ å‡½æ•°å®ä¾‹å‡ºæ¥çš„å¯¹è±¡\nMath.random() \nthis.Math.random() // é¢„å®šä¹‰äº†ä¸€äº›å‡½æ•°å’Œå±æ€§\n\n// windowæŒ‡å‘è‡ªèº«\nvar a=1;\na // 1\nthis.a // 1\nwindow.a // 1 \nthis.window.a // 1\n```\n\n## å‡½æ•°å£°æ˜>å˜é‡å£°æ˜\n\n```javascript\nconsole.log(foo); // æ‰“å°å‡½æ•°\n\nfunction foo(){\n    console.log(\"foo\");\n}\n\nvar foo = 1;\n```\næ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼Œé¦–å…ˆä¼šå¤„ç†å‡½æ•°å£°æ˜ï¼Œå…¶æ¬¡ä¼šå¤„ç†å˜é‡å£°æ˜ï¼Œå¦‚æœå¦‚æœå˜é‡åç§°è·Ÿå·²ç»å£°æ˜çš„å½¢å¼å‚æ•°æˆ–å‡½æ•°ç›¸åŒï¼Œåˆ™å˜é‡å£°æ˜ä¸ä¼šå¹²æ‰°å·²ç»å­˜åœ¨çš„è¿™ç±»å±æ€§ã€‚\n","tags":["å‰ç«¯"],"categories":["JS"]},{"title":"JavaScriptæ·±å…¥ä¹‹ä½œç”¨åŸŸ","url":"%2Fscope.html","content":"\n## ä½œç”¨åŸŸ\n\nä½œç”¨åŸŸæ˜¯æˆ‘ä»¬å¯ä»¥æœ‰æ•ˆè®¿é—®å˜é‡æˆ–å‡½æ•°çš„åŒºåŸŸï¼ŒåŒ…å«å…¨å±€ä½œç”¨åŸŸã€å‡½æ•°ä½œç”¨åŸŸã€å—çº§ä½œç”¨åŸŸï¼ˆES6ï¼‰ ä¸‰ç§ï¼›\n\nJavaScript é‡‡ç”¨è¯æ³•ä½œç”¨åŸŸ(lexical scoping)ï¼Œä¹Ÿå°±æ˜¯é™æ€ä½œç”¨åŸŸã€‚å®ƒçš„ä½œç”¨åŸŸæ˜¯æŒ‡åœ¨è¯æ³•åˆ†æé˜¶æ®µå°±ç¡®å®šäº†ï¼Œä¸ä¼šæ”¹å˜ã€‚è€Œä¸è¯æ³•ä½œç”¨åŸŸç›¸å¯¹çš„æ˜¯åŠ¨æ€ä½œç”¨åŸŸï¼Œ\n\nå‡½æ•°çš„ä½œç”¨åŸŸæ˜¯åœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ‰å†³å®šçš„ã€‚\n\n**å‡½æ•°çš„ä½œç”¨åŸŸåœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ï¼Œå‡½æ•°çš„ä½œç”¨åŸŸåŸºäºå‡½æ•°åˆ›å»ºçš„ä½ç½®ã€‚**\n\n---\n<!-- more -->\n\n```javascript\nvar value=1\nfunction print(){\n  console.log(value)\n}\nfunction foo(){\n  var value=2\n  print()\n}\nfoo() // value 1 å¦‚æœæ˜¯åŠ¨æ€ä½œç”¨åŸŸåˆ™æ˜¯2\n```\né™æ€ä½œç”¨åŸŸæ˜¯äº§ç”Ÿé—­åŒ…çš„å…³é”®ï¼Œå³å®ƒåœ¨ä»£ç å†™å¥½ä¹‹åå°±è¢«é™æ€å†³å®šå®ƒçš„ä½œç”¨åŸŸäº†ã€‚\n\n- åŠ¨æ€åŸŸçš„å‡½æ•°ä¸­é‡åˆ°æ—¢ä¸æ˜¯å½¢å‚ä¹Ÿä¸æ˜¯å‡½æ•°å†…éƒ¨å®šä¹‰çš„å±€éƒ¨å˜é‡çš„å˜é‡æ—¶ï¼Œåˆ°å‡½æ•°è°ƒç”¨çš„ç¯å¢ƒå»æŸ¥è¯¢\nåœ¨ JS ä¸­ï¼Œå…³äº this çš„æ‰§è¡Œæ˜¯åŸºäºåŠ¨æ€åŸŸæŸ¥è¯¢çš„ï¼Œä¸‹é¢è¿™æ®µä»£ç æ‰“å°å‡º 1ï¼Œå¦‚æœæŒ‰é™æ€ä½œç”¨åŸŸçš„è¯åº”è¯¥ä¼šæ‰“å°å‡º 2\n```js\nvar foo = 1;\n\nvar obj = {\n  foo: 2,\n  bar: function() {\n    console.log(this.foo);\n  }\n};\n\nvar bar = obj.bar;\nbar();\n```\n\næˆ‘ä»¬å†æ¥çœ‹ä¸¤é“é¢˜ï¼š\n\n```javascript\nvar scope = \"global scope\";\nfunction checkscope(){\n    var scope = \"local scope\";\n    function f(){\n        return scope;\n    }\n    return f();\n}\ncheckscope();\n```\n\n```javascript\nvar scope = \"global scope\";\nfunction checkscope(){\n    var scope = \"local scope\";\n    function f(){\n        return scope;\n    }\n    return f;\n}\ncheckscope()();\n```\nä¸¤é“é¢˜çš„æ‰§è¡Œç»“æœéƒ½æ˜¯ \"local scope\"\n\nJavaScript å‡½æ•°çš„æ‰§è¡Œç”¨åˆ°äº†ä½œç”¨åŸŸé“¾ï¼Œè¿™ä¸ªä½œç”¨åŸŸé“¾æ˜¯åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™åˆ›å»ºçš„ã€‚åµŒå¥—çš„å‡½æ•° f() å®šä¹‰åœ¨è¿™ä¸ªä½œç”¨åŸŸé“¾é‡Œï¼Œå…¶ä¸­çš„å˜é‡ scope ä¸€å®šæ˜¯å±€éƒ¨å˜é‡ï¼Œä¸ç®¡ä½•æ—¶ä½•åœ°æ‰§è¡Œå‡½æ•° f()ï¼Œè¿™ç§ç»‘å®šåœ¨æ‰§è¡Œ f() æ—¶ä¾ç„¶æœ‰æ•ˆã€‚\n\n```javascript\nvar name=\"999999\"\nvar b = {\nname :\"The Window\",\nobject:{\nã€€ã€€ã€€ã€€name : \"My Object\",\nã€€ã€€ã€€ã€€getNameFunc : function(){\nã€€ã€€ã€€ã€€ã€€ã€€return function(){\n                return this.name\n              }\nã€€ã€€ã€€ã€€}\nã€€ã€€}\n}\nconsole.log(b.object.getNameFunc()()) // 999999\n---\nvar name=\"999999\"\nvar b = function(){\nvar name = \"The Window\";\nã€€ã€€var object = {\nã€€ã€€ã€€ã€€name : \"My Object\",\nã€€ã€€ã€€ã€€getNameFunc : function(){\n \nã€€ã€€ã€€ã€€ã€€ã€€return function(){\nã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€return this.name;\nã€€ã€€ã€€ã€€ã€€ã€€};\nã€€ã€€ã€€ã€€}\nã€€ã€€};\nã€€console.log(object.getNameFunc()())\n}\nb() // 999999\n```\n\n## ä½œç”¨åŸŸé“¾\nä½œç”¨åŸŸé“¾ï¼šä½œç”¨åŸŸä¹Ÿæ˜¯ä¸€ç»„ç”¨äºæŸ¥æ‰¾å˜é‡çš„è§„åˆ™ã€‚å¦‚æœå˜é‡åœ¨å½“å‰ä½œç”¨åŸŸä¸­ä¸å­˜åœ¨ï¼Œå®ƒå°†å‘å¤–éƒ¨ä½œç”¨åŸŸä¸­æŸ¥æ‰¾å¹¶æœç´¢ï¼Œå¦‚æœè¯¥å˜é‡ä¸å­˜åœ¨ï¼Œå®ƒå°†å†æ¬¡æŸ¥æ‰¾ç›´åˆ°åˆ°è¾¾å…¨å±€ä½œç”¨\nåŸŸï¼Œå¦‚æœæ‰¾åˆ°ï¼Œåˆ™å¯ä»¥ä½¿ç”¨å®ƒï¼Œå¦åˆ™å¼•å‘é”™è¯¯ï¼Œè¿™ç§æŸ¥æ‰¾è¿‡ç¨‹ä¹Ÿç§°ä¸ºä½œç”¨åŸŸé“¾ã€‚\n","tags":["ä½œç”¨åŸŸ"],"categories":["JS"]},{"title":"JavaScriptæ·±å…¥ä¹‹ä»åŸå‹åˆ°åŸå‹é“¾","url":"%2Fprototype.html","content":"\n{% centerquote %} \nåŸå‹å¯¹è±¡çš„ç”¨é€”æ˜¯ä¸ºæ¯ä¸ªå®ä¾‹å¯¹è±¡å­˜å‚¨å…±äº«çš„æ–¹æ³•å’Œå±æ€§ï¼Œå®ƒä»…ä»…æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡è€Œå·²ï¼Œä»…æœ‰ä¸€ä»½ã€‚\n{% endcenterquote %}\n\næ¯ä¸ªå¯¹è±¡éƒ½ä¼šåœ¨å…¶å†…éƒ¨åˆå§‹åŒ–ä¸€ä¸ªå±æ€§ï¼Œå°±æ˜¯prototype(åŸå‹)ï¼Œå½“æˆ‘ä»¬è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œ\nå¦‚æœè¿™ä¸ªå¯¹è±¡å†…éƒ¨ä¸å­˜åœ¨è¿™ä¸ªå±æ€§ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šå»prototypeé‡Œæ‰¾è¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªprototypeåˆä¼šæœ‰è‡ªå·±çš„prototypeï¼Œäºæ˜¯å°±è¿™æ ·ä¸€ç›´æ‰¾ä¸‹å»ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„åŸå‹é“¾çš„æ¦‚å¿µ\n\n- â€œprototypeâ€ æ˜¯ä»€ä¹ˆï¼Ÿ\nprototype æ˜¯æ‰€æœ‰å…¬å…±æ–¹æ³•å’Œå±æ€§çš„å®¿ä¸»ï¼Œä»ç¥–å…ˆæ´¾ç”Ÿçš„â€œå­â€å¯¹è±¡å¯ä»¥ä»ä½¿ç”¨ç¥–å…ˆçš„æ–¹æ³•å’Œå±æ€§ã€‚\n\nåŸå‹æ˜¯ä¸€ä¸ªç”¨äºå®ç°å¯¹è±¡å±æ€§ç»§æ‰¿çš„å¯¹è±¡ã€‚\n\n## æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡\n\næˆ‘ä»¬å…ˆä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼š\n\n```javascript\nfunction Person() {}\nvar person = new Person();\nperson.name = \"cosyer\";\nconsole.log(person.name); // cosyer\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒPerson å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨ new åˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹å¯¹è±¡ personã€‚\n\n---\n\n<!-- more -->\n\nå¾ˆç®€å•å§ï¼Œæ¥ä¸‹æ¥è¿›å…¥æ­£é¢˜ï¼š\n\n### prototype\n\næ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼Œå°±æ˜¯æˆ‘ä»¬ç»å¸¸åœ¨å„ç§ä¾‹å­ä¸­çœ‹åˆ°çš„é‚£ä¸ª prototype ï¼Œæ¯”å¦‚ï¼š\n\n```javascript\nfunction Person() {}\n// prototypeæ˜¯å‡½æ•°æ‰ä¼šæœ‰çš„å±æ€§\nPerson.prototype.name = \"cosyer\";\nvar person1 = new Person();\nvar person2 = new Person();\nconsole.log(person1.name); // cosyer\nconsole.log(person2.name); // cosyer\n```\n\né‚£è¿™ä¸ªå‡½æ•°çš„ prototype å±æ€§åˆ°åº•æŒ‡å‘çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯è¿™ä¸ªå‡½æ•°çš„åŸå‹å—ï¼Ÿ\n\nå…¶å®ï¼Œå‡½æ•°çš„ prototype å±æ€§æŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ­£æ˜¯è°ƒç”¨è¯¥æ„é€ å‡½æ•°è€Œåˆ›å»ºçš„å®ä¾‹çš„åŸå‹ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªä¾‹å­ä¸­çš„ person1 å’Œ person2 çš„åŸå‹ã€‚\n\né‚£ä»€ä¹ˆæ˜¯åŸå‹å‘¢ï¼Ÿä½ å¯ä»¥è¿™æ ·ç†è§£ï¼šæ¯ä¸€ä¸ª JavaScript å¯¹è±¡(null é™¤å¤–)åœ¨åˆ›å»ºçš„æ—¶å€™å°±ä¼šä¸ä¹‹å…³è”å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„åŸå‹ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä¼šä»åŸå‹\"ç»§æ‰¿\"å±æ€§ã€‚\n\nè®©æˆ‘ä»¬ç”¨ä¸€å¼ å›¾è¡¨ç¤ºæ„é€ å‡½æ•°å’Œå®ä¾‹åŸå‹ä¹‹é—´çš„å…³ç³»ï¼š\n![prototype](http://cdn.mydearest.cn/blog/images/prototype1.png)\n\nåœ¨è¿™å¼ å›¾ä¸­æˆ‘ä»¬ç”¨ Object.prototype è¡¨ç¤ºå®ä¾‹åŸå‹ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬è¯¥æ€ä¹ˆè¡¨ç¤ºå®ä¾‹ä¸å®ä¾‹åŸå‹ï¼Œä¹Ÿå°±æ˜¯ person å’Œ Person.prototype ä¹‹é—´çš„å…³ç³»å‘¢ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±è¦è®²åˆ°ç¬¬äºŒä¸ªå±æ€§ï¼š\n\n### **proto**\n\nä¸ºäº†è¯æ˜è¿™ä¸€ç‚¹,æˆ‘ä»¬å¯ä»¥åœ¨ç«ç‹æˆ–è€…è°·æ­Œä¸­è¾“å…¥ï¼š\n\n```javascript\nfunction Person() {}\nvar person = new Person();\nconsole.log(person.__proto__ === Person.prototype); // true\n```\n\näºæ˜¯æˆ‘ä»¬æ›´æ–°ä¸‹å…³ç³»å›¾ï¼š\n![prototype](http://cdn.mydearest.cn/blog/images/prototype2.png)\n\næ—¢ç„¶å®ä¾‹å¯¹è±¡å’Œæ„é€ å‡½æ•°éƒ½å¯ä»¥æŒ‡å‘åŸå‹ï¼Œé‚£ä¹ˆåŸå‹æ˜¯å¦æœ‰å±æ€§æŒ‡å‘æ„é€ å‡½æ•°æˆ–è€…å®ä¾‹å‘¢ï¼Ÿ\n\n> __proto__æ ‡å‡†æ˜¯æµè§ˆå™¨å®ç°çš„ã€‚\n\n### constructor\n\næŒ‡å‘å®ä¾‹å€’æ˜¯æ²¡æœ‰ï¼Œå› ä¸ºä¸€ä¸ªæ„é€ å‡½æ•°å¯ä»¥ç”Ÿæˆå¤šä¸ªå®ä¾‹ï¼Œä½†æ˜¯åŸå‹æŒ‡å‘æ„é€ å‡½æ•°å€’æ˜¯æœ‰çš„ï¼Œè¿™å°±è¦è®²åˆ°ç¬¬ä¸‰ä¸ªå±æ€§ï¼šconstructorï¼Œæ¯ä¸ªåŸå‹éƒ½æœ‰ä¸€ä¸ª constructor å±æ€§æŒ‡å‘å…³è”çš„æ„é€ å‡½æ•°ã€‚\n\nä¸ºäº†éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ï¼š\n\n```javascript\nfunction Person() {}\nconsole.log(Person === Person.prototype.constructor); // true\n```\n\næ‰€ä»¥å†æ›´æ–°ä¸‹å…³ç³»å›¾ï¼š\n![prototype](http://cdn.mydearest.cn/blog/images/prototype3.png)\nç»¼ä¸Šæˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼š\n\n```javascript\nfunction Person() {}\n\nvar person = new Person();\n\nconsole.log(person.__proto__ == Person.prototype); // true\nconsole.log(Person.prototype.constructor == Person); // true\n// é¡ºä¾¿å­¦ä¹ ä¸€ä¸ªES5çš„æ–¹æ³•,å¯ä»¥è·å¾—å¯¹è±¡çš„åŸå‹ å®ä¾‹åŸå‹çš„constructoræŒ‡å‘æ„é€ å‡½æ•°,æ„é€ å‡½æ•°çš„prototypeæŒ‡å‘å®ä¾‹åŸå‹,å®ä¾‹å¯¹è±¡çš„__proto__æŒ‡å‘å®ä¾‹åŸå‹,å®ä¾‹åŸå‹ä¹Ÿæ˜¯å¯¹è±¡,å®ƒä¹Ÿæœ‰åŸå‹ æœ€åçš„ä¸€ä¸ªç¯èŠ‚æ˜¯nullã€‚è®¿é—®å®ä¾‹å¯¹è±¡çš„constructoræ—¶,ä¹Ÿèƒ½ä»å®ä¾‹åŸå‹ä¸Šå»æ‰¾,ä»è€ŒæŒ‡å‘åˆ°æ„é€ å‡½æ•°ã€‚æ˜¯ä¸€ä¸ªç”¨æ¥å®ç°ç»§æ‰¿å’Œå…±äº«å±æ€§çš„æœ‰é™çš„å¯¹è±¡é“¾ã€‚\nconsole.log(Object.getPrototypeOf(person) === Person.prototype); // true\n```\n\n## å®ä¾‹ä¸åŸå‹\n\nå½“è¯»å–å®ä¾‹çš„å±æ€§æ—¶ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±ä¼šæŸ¥æ‰¾ä¸å¯¹è±¡å…³è”çš„åŸå‹ä¸­çš„å±æ€§ï¼Œå¦‚æœè¿˜æŸ¥ä¸åˆ°ï¼Œå°±å»æ‰¾åŸå‹çš„åŸå‹ï¼Œä¸€ç›´æ‰¾åˆ°æœ€é¡¶å±‚ä¸ºæ­¢ã€‚\n\nä¸¾ä¸ªä¾‹å­ï¼š\n\n```javascript\nfunction Person() {}\n\nPerson.prototype.name = \"cosyer\";\n\nvar person = new Person();\n\nperson.name = \"Daisy\";\nconsole.log(person.name); // Daisy\n\ndelete person.name;\nconsole.log(person.name); // cosyer\n```\n\nåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç»™å®ä¾‹å¯¹è±¡ person æ·»åŠ äº† name å±æ€§ï¼Œå½“æˆ‘ä»¬æ‰“å° person.name çš„æ—¶å€™ï¼Œç»“æœè‡ªç„¶ä¸º Daisyã€‚\n\nä½†æ˜¯å½“æˆ‘ä»¬åˆ é™¤äº† person çš„ name å±æ€§æ—¶ï¼Œè¯»å– person.nameï¼Œä» person å¯¹è±¡ä¸­æ‰¾ä¸åˆ° name å±æ€§å°±ä¼šä» person çš„åŸå‹ä¹Ÿå°±æ˜¯ person.\\_\\_proto\\_\\_ ï¼Œä¹Ÿå°±æ˜¯ Person.prototype ä¸­æŸ¥æ‰¾ï¼Œå¹¸è¿çš„æ˜¯æˆ‘ä»¬æ‰¾åˆ°äº† name å±æ€§ï¼Œç»“æœä¸º cosyerã€‚\n\nä½†æ˜¯ä¸‡ä¸€è¿˜æ²¡æœ‰æ‰¾åˆ°å‘¢ï¼ŸåŸå‹çš„åŸå‹åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\n\n## åŸå‹çš„åŸå‹\n\nåœ¨å‰é¢ï¼Œæˆ‘ä»¬å·²ç»è®²äº†åŸå‹ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ—¢ç„¶æ˜¯å¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨æœ€åŸå§‹çš„æ–¹å¼åˆ›å»ºå®ƒï¼Œé‚£å°±æ˜¯ï¼š\n\n```javascript\nvar obj = new Object();\nobj.name = \"cosyer\";\nconsole.log(obj.name); // cosyer\n```\n\nå…¶å®åŸå‹å¯¹è±¡å°±æ˜¯é€šè¿‡ Object æ„é€ å‡½æ•°ç”Ÿæˆçš„ï¼Œç»“åˆä¹‹å‰æ‰€è®²ï¼Œå®ä¾‹çš„ **proto** æŒ‡å‘æ„é€ å‡½æ•°çš„ prototype ï¼Œæ‰€ä»¥æˆ‘ä»¬å†æ›´æ–°ä¸‹å…³ç³»å›¾ï¼š\n![prototype](http://cdn.mydearest.cn/blog/images/prototype4.png)\n\n## åŸå‹é“¾\n\né‚£ Object.prototype çš„åŸå‹å‘¢ï¼Ÿ\n\nnullï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å°ï¼š\n\n```javascript\nconsole.log(Object.prototype.__proto__ === null); // true\n```\n\nç„¶è€Œ null ç©¶ç«Ÿä»£è¡¨äº†ä»€ä¹ˆå‘¢ï¼Ÿ\n\nå¼•ç”¨é˜®ä¸€å³°è€å¸ˆçš„ ã€Šundefined ä¸ null çš„åŒºåˆ«ã€‹ å°±æ˜¯ï¼š\n\nnull è¡¨ç¤ºâ€œæ²¡æœ‰å¯¹è±¡â€ï¼Œå³è¯¥å¤„ä¸åº”è¯¥æœ‰å€¼ã€‚\n\næ‰€ä»¥ Object.prototype.**proto** çš„å€¼ä¸º null è·Ÿ Object.prototype æ²¡æœ‰åŸå‹ï¼Œå…¶å®è¡¨è¾¾äº†ä¸€ä¸ªæ„æ€ã€‚\n\næ‰€ä»¥æŸ¥æ‰¾å±æ€§çš„æ—¶å€™æŸ¥åˆ° Object.prototype å°±å¯ä»¥åœæ­¢æŸ¥æ‰¾äº†ã€‚\n\næœ€åä¸€å¼ å…³ç³»å›¾ä¹Ÿå¯ä»¥æ›´æ–°ä¸ºï¼š\n![prototype](http://cdn.mydearest.cn/blog/images/prototype5.png)\n\nå›¾ä¸­ç”±ç›¸äº’å…³è”çš„åŸå‹ç»„æˆçš„é“¾çŠ¶ç»“æ„å°±æ˜¯åŸå‹é“¾ï¼Œä¹Ÿå°±æ˜¯è“è‰²çš„è¿™æ¡çº¿ã€‚\n\n## è¡¥å……\n\n### constructor\n\n```javascript\nfunction Person() {}\nvar person = new Person();\nconsole.log(person.constructor === Person); // true\n```\n\nå½“è·å– person.constructor æ—¶ï¼Œå…¶å® person ä¸­å¹¶æ²¡æœ‰ constructor å±æ€§,å½“ä¸èƒ½è¯»å–åˆ° constructor å±æ€§æ—¶ï¼Œä¼šä» person çš„åŸå‹ä¹Ÿå°±æ˜¯ Person.prototype ä¸­è¯»å–ï¼Œæ­£å¥½åŸå‹ä¸­æœ‰è¯¥å±æ€§ï¼Œæ‰€ä»¥ï¼š\n\n```javascript\nperson.constructor === Person.prototype.constructor;\n```\n\n### **proto**\n\nå…¶æ¬¡æ˜¯ **proto** ï¼Œç»å¤§éƒ¨åˆ†æµè§ˆå™¨éƒ½æ”¯æŒè¿™ä¸ªéæ ‡å‡†çš„æ–¹æ³•è®¿é—®åŸå‹ï¼Œç„¶è€Œå®ƒå¹¶ä¸å­˜åœ¨äº Person.prototype ä¸­ï¼Œå®é™…ä¸Šï¼Œå®ƒæ˜¯æ¥è‡ªäº Object.prototype ï¼Œä¸å…¶è¯´æ˜¯ä¸€ä¸ªå±æ€§ï¼Œä¸å¦‚è¯´æ˜¯ä¸€ä¸ª getter/setterï¼Œå½“ä½¿ç”¨ obj.**proto** æ—¶ï¼Œå¯ä»¥ç†è§£æˆè¿”å›äº† Object.getPrototypeOf(obj)ã€‚\n\n### ç»§æ‰¿\n\næœ€åæ˜¯å…³äºç»§æ‰¿ï¼Œå‰é¢æˆ‘ä»¬è®²åˆ°â€œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½ä¼šä»åŸå‹â€˜ç»§æ‰¿â€™å±æ€§â€ï¼Œå®é™…ä¸Šï¼Œç»§æ‰¿æ˜¯ä¸€ä¸ªååˆ†å…·æœ‰è¿·æƒ‘æ€§çš„è¯´æ³•ï¼Œå¼•ç”¨ã€Šä½ ä¸çŸ¥é“çš„ JavaScriptã€‹ä¸­çš„è¯ï¼Œå°±æ˜¯ï¼šç»§æ‰¿æ„å‘³ç€å¤åˆ¶æ“ä½œï¼Œç„¶è€Œ JavaScript é»˜è®¤å¹¶ä¸ä¼šå¤åˆ¶å¯¹è±¡çš„å±æ€§ï¼Œç›¸åï¼ŒJavaScript åªæ˜¯åœ¨ä¸¤ä¸ªå¯¹è±¡ä¹‹é—´åˆ›å»ºä¸€ä¸ªå…³è”ï¼Œè¿™æ ·ï¼Œä¸€ä¸ªå¯¹è±¡å°±å¯ä»¥é€šè¿‡å§”æ‰˜è®¿é—®å¦ä¸€ä¸ªå¯¹è±¡çš„å±æ€§å’Œå‡½æ•°ï¼Œæ‰€ä»¥ä¸å…¶å«ç»§æ‰¿ï¼Œå§”æ‰˜çš„è¯´æ³•åè€Œæ›´å‡†ç¡®äº›ã€‚\n\n- class çš„å¼•å…¥åªæ˜¯è¯­æ³•ç³–æœ¬èº«è¿˜æ˜¯åŸºäºåŸå‹çš„\n- å‡ ä¹æ‰€æœ‰ JavaScript ä¸­çš„å¯¹è±¡éƒ½æ˜¯ä½äºåŸå‹é“¾é¡¶ç«¯çš„Objectçš„å®ä¾‹ã€‚\n\n```javascript\nclass Cat {\n    say() {\n        console.log(\"meow ~\");\n    }\n}\n\n// ç­‰ä»·äº\nfunction Cat() {}\nObject.defineProperty(Cat.prototype, \"say\", {\n    value: function() { console.log(\"meow ~\"); },\n    enumerable: false,\n    configurable: true,\n    writable: true\n});\n\n// es6 classæ˜¯æ²¡æœ‰é™æ€å±æ€§çš„ åªæœ‰é™æ€æ–¹æ³•\nvar cat = new Cat();\ncat.say(); // meow~\nCat.say(); // error åŠ ä¸Šstaticä¿®é¥°æ­£ç¡®  \n\n// æ³¨è§£\nfunction isAnimal(target) {\n    target.isAnimal = true;\n  \treturn target;\n}\n@isAnimal\nclass Cat {\n    ...\n}\n// ç­‰ä»·äº\nCat=isAnimal(function Cat(){})\n\nconsole.log(Cat.isAnimal);    // true\n```\n\n### æè¿°ç¬¦\n- Configurable ç‰¹æ€§\nconfigurable ç‰¹æ€§è¡¨ç¤ºå¯¹è±¡çš„å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤ï¼Œä»¥åŠé™¤ writable ç‰¹æ€§å¤–çš„å…¶ä»–ç‰¹æ€§æ˜¯å¦å¯ä»¥è¢«ä¿®æ”¹ã€‚\n\n- Enumerable ç‰¹æ€§\nå±æ€§ç‰¹æ€§ enumerable å®šä¹‰äº†å¯¹è±¡çš„å±æ€§æ˜¯å¦å¯ä»¥åœ¨ for...in å¾ªç¯å’Œ Object.keys() ä¸­è¢«æšä¸¾ã€‚\n\n- Writable å±æ€§\nå½“å±æ€§ç‰¹æ€§ï¼ˆproperty attributeï¼‰ writable è®¾ç½®ä¸ºfalseæ—¶ï¼Œè¡¨ç¤º non-writableï¼Œå±æ€§ä¸èƒ½è¢«ä¿®æ”¹ã€‚\n\n\n```javascript\nvar p = Object.create(o);\n// pæ˜¯ä¸€ä¸ªç»§æ‰¿è‡ª o çš„å¯¹è±¡\nå¯¹è±¡çš„åŸå‹é“¾\no===>Object.prototype===>null\næ•°ç»„çš„åŸå‹é“¾\na===>Array.prototype===>Object.prototype===>null\nå‡½æ•°çš„åŸå‹é“¾\nf===>Function.prototype===>Object.prototype===>null\n\nFunction.__proto__==Object.prototype // false\nFunction.__proto__==Function.prototype // true Functionçš„åŸå‹ä¹Ÿæ˜¯Function\n\nvar Tom = Object.create(Person, {\n  age: {\n    value: 34,\n    enumerable: true,\n    writable: true,\n    configurable: true\n  },\n  name: {\n    value: \"Tom\",\n    enumerable: true,\n    writable: true,\n    configurable: true\n  }\n});\n// ä»¥è¿™ç§æ–¹å¼é…ç½®çš„å±æ€§é»˜è®¤æƒ…å†µä¸‹ä¸å¯å†™ï¼Œä¸å¯æšä¸¾ï¼Œä¸å¯é…ç½®ã€‚ ä¸å¯å†™æ„å‘³ç€ä¹‹åæ— æ³•æ›´æ”¹è¯¥å±æ€§ï¼Œæ›´æ”¹ä¼šè¢«å¿½ç•¥ã€‚\n```\n\n### åŸå‹å¯¹è±¡çš„æ·»åŠ å±æ€§\n```javascript\nfunction Persion(){}\nPersion.prototype.sayName=function(){\n  console.log('darling')\n}\n// Persion.prototype={\n//   sayName:function(){\n//     console.log('darling')\n//   } \n// }\nlet persion =new Persion()\npersion.sayName() // darling\n\nfunction Persion(){}\nlet persion=new Persion()\n// è¿™é‡Œé‡å†™äº†åŸå‹å¯¹è±¡ï¼Œå®ä¾‹å¯¹è±¡å’Œæœ€åˆçš„åŸå‹å¯¹è±¡æ–­å¼€äº†è”ç³»\n// persionçš„protoæŒ‡å‘ä¸€ä¸ªç©ºå¯¹è±¡\nPersion.prototype={\n  sayName:function(){\n    console.log('darling')\n  } \n}\npersion.sayName() // error\n```\n\n### new æ“ä½œç¬¦å…·ä½“å¹²äº†ä»€ä¹ˆ\n1. åˆ›å»ºç©ºå¯¹è±¡ï¼Œå¹¶ä¸”thiså˜é‡å¼•ç”¨è¯¥å¯¹è±¡åŒæ—¶ç»§æ‰¿è¯¥å‡½æ•°çš„åŸå‹\n2. å±æ€§å’Œæ–¹æ³•åŠ å…¥åˆ°thiså¼•ç”¨çš„å¯¹è±¡ä¸­\n3. æ–°åˆ›å»ºçš„å¯¹è±¡ç”¨thiså¼•ç”¨ï¼Œå¹¶ä¸”éšå¼åœ°è¿”å›this\n\n1. åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡(\\_\\_proto\\_\\_ æŒ‡å‘æ„é€ å‡½æ•°çš„prototype)\n2. æŠŠä½œç”¨åŸŸï¼ˆthisï¼‰æŒ‡ç»™è¿™ä¸ªå¯¹è±¡\n3. æ‰§è¡Œæ„é€ å‡½æ•°çš„ä»£ç \n4. å¦‚æœæ„é€ å‡½æ•°ä¸­æ²¡æœ‰è¿”å›å…¶å®ƒå¯¹è±¡ï¼Œé‚£ä¹ˆè¿”å› thisï¼Œå³åˆ›å»ºçš„è¿™ä¸ªçš„æ–°å¯¹è±¡ï¼Œå¦åˆ™ï¼Œè¿”å›æ„é€ å‡½æ•°ä¸­è¿”å›çš„å¯¹è±¡\n\n```javascript\nfunction Base(){\n  this.id = \"base\";\n}\nvar obj = new Base();\n```\n\n**newå¹²äº†ä»€ä¹ˆï¼Ÿ** \n\n1. var obj = {};\n\n2. obj.\\_\\_proto\\_\\_ = Base.protptype;\n\n3. Base.call(obj);\n\n- es5ä½¿ç”¨Object.create()æ¥åˆ›å»ºå¯¹è±¡ new Object() å­—é¢é‡å†™æ³•{}\nä½¿ç”¨Object.create()æ˜¯å°†å¯¹è±¡ç»§æ‰¿åˆ°__proto__å±æ€§ä¸Šï¼Œ\nObject.create(null)æ²¡æœ‰ç»§æ‰¿ä»»ä½•åŸå‹æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒçš„åŸå‹é“¾æ²¡æœ‰ä¸Šä¸€å±‚ã€‚\n- es6ä½¿ç”¨classå…³é”®å­—\n\n- æ„é€ å™¨å°±æ˜¯æ™®é€šçš„å‡½æ•°,newæ¥ä½œç”¨ç§°ä¸ºæ„é€ æ–¹æ³•(æ„é€ å‡½æ•°)\n\n- è®¿é—®åŸå‹é“¾ä¼šæŸè€—æ€§èƒ½,ä¸å­˜åœ¨çš„å±æ€§ä¼šéå†åŸå‹é“¾ç›´åˆ°æœ€åä¸€å±‚\n\n- hasOwnProperty æ˜¯ JavaScript ä¸­å”¯ä¸€å¤„ç†å±æ€§å¹¶ä¸”ä¸ä¼šéå†åŸå‹é“¾çš„æ–¹æ³•ã€‚é€šå¸¸åœ¨for inå¾ªç¯ä¸­ä½¿ç”¨ã€‚\n\n### å®ç° new å‡½æ•°\n```js\nfunction _new(func) {\n    // ç¬¬ä¸€æ­¥ åˆ›å»ºæ–°å¯¹è±¡\n    let obj= {}; \n    // ç¬¬äºŒæ­¥ ç©ºå¯¹è±¡çš„_proto_æŒ‡å‘äº†æ„é€ å‡½æ•°çš„prototypeæˆå‘˜å¯¹è±¡\n    obj.__proto__ = func.prototype;//\n    // ä¸€äºŒæ­¥åˆå¹¶å°±ç›¸å½“äº let obj=Object.create(func.prototype)\n\n    // ç¬¬ä¸‰æ­¥ ä½¿ç”¨applyè°ƒç”¨æ„é€ å™¨å‡½æ•°ï¼Œå±æ€§å’Œæ–¹æ³•è¢«æ·»åŠ åˆ° this å¼•ç”¨çš„å¯¹è±¡ä¸­\n    let result = func.apply(obj);\n    if (result && (typeof (result) == \"object\" || typeof (result) == \"function\")) {\n    // å¦‚æœæ„é€ å‡½æ•°æ‰§è¡Œçš„ç»“æœè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿”å›è¿™ä¸ªå¯¹è±¡\n        return result;\n    }\n    // å¦‚æœæ„é€ å‡½æ•°è¿”å›çš„ä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›åˆ›å»ºçš„æ–°å¯¹è±¡\n    return obj;\n}\n```\n","tags":["åŸå‹é“¾"],"categories":["JS"]},{"title":"ä½ æ‰€ä¸çŸ¥é“çš„å‰ç«¯å†·é—¨å°çŸ¥è¯†(é•¿æœŸæ›´æ–°)","url":"%2Fsmallknowledge.html","content":"\n[javascript-puzzlers](http://javascript-puzzlers.herokuapp.com/)\n\n## void \nvoidå…¶å®æ˜¯javascriptä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›å€¼æ°¸è¿œæ˜¯undefined\nvoid expression\n\n```javascript\nvoid 0  \nvoid() // æŠ¥é”™\nvoid (0)  \nvoid \"hello\"  \nvoid (new Date())  \n// all will return undefined  \ncontext === void 666\n```\n\n---\n<!-- more -->\n\n## Element.scrollIntoViewIfNeeded\nElement.scrollIntoViewIfNeeded()æ–¹æ³•ç”¨æ¥å°†ä¸åœ¨æµè§ˆå™¨çª—å£çš„å¯è§åŒºåŸŸå†…çš„å…ƒç´ æ»šåŠ¨åˆ°æµè§ˆå™¨çª—å£çš„å¯è§åŒºåŸŸã€‚ å¦‚æœè¯¥å…ƒç´ å·²ç»åœ¨æµè§ˆå™¨çª—å£çš„å¯è§åŒºåŸŸå†…ï¼Œåˆ™ä¸ä¼šå‘ç”Ÿæ»šåŠ¨ã€‚\n ```javascript\nelement.scrollIntoView(); // ç­‰åŒäºelement.scrollIntoViewIfNeeded(true) \nelement.scrollIntoViewIfNeeded(true); \nelement.scrollIntoViewIfNeeded(false);\n ```\n- å½“å…ƒç´ å·²ç»åœ¨å¯è§†åŒºåŸŸæ—¶ï¼Œè°ƒç”¨ Element.scrollIntoView()ï¼Œæ— è®ºè®¾ç½®ä»€ä¹ˆå‚æ•°ï¼Œå‡å‘ç”Ÿæ»šåŠ¨ã€‚\n- å½“å…ƒç´ å·²ç»åœ¨å¯è§†åŒºåŸŸæ—¶ï¼Œè°ƒç”¨ Element.scrollIntoViewIfNeeded()ï¼Œæ— è®ºè®¾ç½®ä»€ä¹ˆå‚æ•°ï¼Œå‡ä¸å‘ç”Ÿæ»šåŠ¨ã€‚\n\n## JSå–æ•´æ•°éƒ¨åˆ†\n\n```javascript\n~~2.5 // 2 æŒ‰ä½å–å -2^31~2^31-1 -2147483648~2147483647\n2147483647 >> 0; // => 2147483647\n2147483648 >> 0; // => -2147483648\n2147483649 >> 0; // => -2147483647\n\n0|3.123;// 3 æˆ–è¿ç®—\n4.3|0; // 4\n4.3<<0; // 4\n```\n\nä¸Math.floor()çš„å¯¹æ¯”\n\n|åŒºåˆ«|Math.floor|~~|\n|:---|:---:|---:|\n|NaN|NaN|0|\n|+0|+0|0|\n|-0|-0|0|\n|+Infinity|+Infinity|0|\n|-Infinity|-Infinity|0|\n|1.2|1.2|1.2|\n|-1.2|-1|-1|\n\n```javascript\n1. ä½è¿ç®—ï¼š~ çš„ç»“æœæ˜¯ int32 çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œæ‰€ä»¥è‚¯å®šä¸å¯èƒ½æ˜¯ NaN å’Œæ— ç©· x|0 x^0 x<<0 x>>0\n\n2. Math.floorå‘ä¸‹å–æ•´ Math.ceilå‘ä¸Šå–æ•´ Math.truncè¿”å›æ•´æ•°éƒ¨åˆ† å®ç°ï¼šif(value>0){return Math.floor(value)}else{return Mathg.ceil(value)}\n\n3. parseInt(string, radix);\n\nparseInt() å‡½æ•°è§£æä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªæŒ‡å®šåŸºæ•°çš„æ•´æ•° (æ•°å­¦ç³»ç»Ÿçš„åŸºç¡€)ã€‚\n\nparseInt è§£æå­—ç¬¦ä¸² '-0' ä¼šå¾—åˆ° -0ã€‚å¦‚æœå‚æ•°æ˜¯æ•°å­— -0ï¼Œä¼šå¾—åˆ° 0ã€‚\n\n4. function trunc(num) {\n  if(num >= 0) return Math.floor(num);\n  return Math.ceil(num);\n}\n\n5. function trunc(num) {\n  return num - num % 1;\n}\n```\n\n> åœ¨æ²¡æœ‰æŒ‡å®šåŸºæ•°ï¼Œæˆ–è€…åŸºæ•°ä¸º 0 çš„æƒ…å†µä¸‹ï¼ŒJavaScript ä½œå¦‚ä¸‹å¤„ç†ï¼š\n> å¦‚æœå­—ç¬¦ä¸² string ä»¥\"0x\"æˆ–è€…\"0X\"å¼€å¤´, åˆ™åŸºæ•°æ˜¯16 (16è¿›åˆ¶).\n> å¦‚æœå­—ç¬¦ä¸² string ä»¥\"0\"å¼€å¤´, åŸºæ•°æ˜¯8ï¼ˆå…«è¿›åˆ¶ï¼‰æˆ–è€…10ï¼ˆåè¿›åˆ¶ï¼‰ï¼Œé‚£ä¹ˆå…·ä½“æ˜¯å“ªä¸ª\n> åŸºæ•°ç”±å®ç°ç¯å¢ƒå†³- å®šã€‚ECMAScript 5 è§„å®šä½¿ç”¨10ï¼Œä½†æ˜¯å¹¶ä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½éµå¾ªè¿™ä¸ª\n> è§„å®šã€‚å› æ­¤ï¼Œæ°¸è¿œéƒ½è¦æ˜ç¡®ç»™å‡ºradixå‚æ•°çš„å€¼ã€‚\n> å¦‚æœå­—ç¬¦ä¸² string ä»¥å…¶å®ƒä»»ä½•å€¼å¼€å¤´ï¼Œåˆ™åŸºæ•°æ˜¯10 (åè¿›åˆ¶)ã€‚\n\n```javascript\nparseInt(0.0000000003) // 3\n\nparseInt('2017-07-04') // 2017\n\nparseInt(\"010\");\t// 8\nparseInt(\"010\", 8);\t// 8\nparseInt(\"010\", 10); // 10\n```\n\n- parseFloat(string)\nå®ƒçš„è§„åˆ™ä¸parseIntåŸºæœ¬ç›¸åŒï¼Œä½†ä¹Ÿæœ‰ç‚¹åŒºåˆ«ï¼šå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªå°æ•°ç‚¹ç¬¦å·æ˜¯æœ‰æ•ˆçš„ï¼Œå¦å¤–parseFloatä¼šå¿½ç•¥æ‰€æœ‰å‰å¯¼0ï¼Œå¦‚æœå­—ç¬¦ä¸²åŒ…å«ä¸€ä¸ªå¯è§£æä¸ºæ•´æ•°çš„æ•°ï¼Œåˆ™è¿”å›æ•´æ•°å€¼è€Œä¸æ˜¯æµ®ç‚¹æ•°å€¼ã€‚\n```js\nparseInt(\"0xA\") // 10\nparseFloat(\"0xA\") // 0\n\nparseInt(\".1\") // NaN\nparseFloat(\".1\") // 0.1\n\n```\n\n## jså–å°æ•°éƒ¨åˆ†\n```js\nfunction fract(num) {\n  return num - Math.trunc(num);\n}\n\nconsole.log(fract(3.75)); // 0.75\nconsole.log(fract(-3.75)); // -0.75\n\nconsole.log(3.75 % 1); // 0.75\nconsole.log(-3.75 % 1); // -0.75\n```\n\n## JSæµ®ç‚¹æ•°è¿ç®—(åŸå› æµ®ç‚¹æ•°æ— æ³•ç”¨äºŒè¿›åˆ¶å‡†ç¡®è¡¨ç¤º)\n\n```javascript\n0.1+0.2 // 0.30000000000000004\n1. parseFloat().toFixed() \n2. *100/100 \n```\n\n## Object.toString()\n```javascript\nvar a = {name:'cosyer'}\na.toString() // [object Object] [typeof a instanceof a]\n// é™¤äº†Objectå…¶ä»–å¯¹è±¡éœ€è¦ç”¨callè¿”å›çœŸæ­£çš„ç±»å‹ä¿¡æ¯\n```\n## å…¨ç­‰åˆ¤æ–­\njavascript ä¸­ +0 å®Œå…¨ç­‰äº -0ï¼Œé‚£ä¹ˆæ€ä¹ˆåˆ†åŒºä¸¤è€…å‘¢ï¼Ÿ\n\n```javascript\n1/0 === 1/-0 // false \n+0 === -0 // true\nObject.is(+0,-0) // false\n```\nåŒºåˆ†NaN\n\n```javascript\nNaN !== NaN // true\nNaN === NaN // false \nObject.is(NaN,NaN) // true\n```\n\n## åˆ¤æ–­NaN\n```js\nNumber.isNaN(); // true ä¸isNaNå…¨å±€å‡½æ•°ç›¸æ¯”ï¼Œä¸å­˜åœ¨ç±»å‹è½¬æ¢æ›´åŠ ä¸¥æ ¼\nNumber.isNaN('æµ‹è¯•') // false\nisNaN('æµ‹è¯•') // true\nx!==x // =>NaN false\n// {}!=={} []!==[]\n```\n\n## isFinite\nåˆ¤å®šä¸€ä¸ªæ•°å­—æ˜¯å¦æ˜¯æœ‰é™æ•°å­—(å¦‚æœå‚æ•°æ˜¯ NaNï¼Œæ­£æ— ç©·å¤§æˆ–è€…è´Ÿæ— ç©·å¤§ï¼Œä¼šè¿”å›falseï¼Œå…¶ä»–è¿”å› true)\n```js\nisFinite(Infinity);  // false\nisFinite(NaN);       // false\nisFinite(-Infinity); // false\nisFinite(0);         // true\nisFinite(2e64);      // true, åœ¨æ›´å¼ºå£®çš„Number.isFinite(null)ä¸­å°†ä¼šå¾—åˆ°false\nisFinite(\"0\");       // true, åœ¨æ›´å¼ºå£®çš„Number.isFinite('0')ä¸­å°†ä¼šå¾—åˆ°false\n```\n\n## try-catchè·³å‡ºforEachå¾ªç¯\nforEachéå†ä¸èƒ½ä¿è¯éå†çš„é¡ºåºï¼Œä»¥åŠä¸èƒ½break;ä¸€èˆ¬forå¾ªç¯çš„æ€§èƒ½æ˜¯forEachçš„20å€\n\n```javascript \ntry {\n    [1, 2, 3].forEach(v => {\n        if (v === 2) {\n            throw new Error('my err')\n        }\n    })\n} catch (e) {\n    if (e.message === 'my err') {\n        console.log('breaked') \n    } else {\n        throw e\n    }\n}\n\n// ç”¨someä¹Ÿå¯ä»¥åœ¨éå†ä¸­è·³å‡ºå¾ªç¯\n[1,2,3].some((item)=>{\n\tconsole.log(item)\n  return item === 2 // å¦‚æœitemç­‰äº2å°±è·³å‡ºå¾ªç¯\n})\n```\n\n## fetchæ¨¡æ‹Ÿpostè¿›è¡Œapiæµ‹è¯•\n```javascript\nfetch(apiUrl, {\n    method: 'POST',\n    headers: {\n        'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({q: 1})\n}).then(async res => console.log(await res.json()))\n```\n\n## å®ç°var a = add(2)(3)(4) å‡½æ•°æŸ¯é‡ŒåŒ–\njsä¸­console.logä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä¼šå¯¹è¿™ä¸ªå¯¹è±¡è¿›è¡ŒtoString()æ“ä½œï¼Œè¿˜æœ‰äº›æƒ…å†µä¼šå¯¹å¯¹è±¡è¿›è¡ŒvalueOf()æ“ä½œ\nvauleOfä¼˜å…ˆäºtoString()è¢«è°ƒç”¨\n\n```javascript\nfunction add(num){\n    var _add = function(args){\n        num+=args;\n        return arguments.callee; //  return add(num+args);\n        // ç°åœ¨å·²ç»ä¸æ¨èä½¿ç”¨arguments.callee();æ¨èè¿™æ ·å†™var _add = (function foo(args){num+=args return foo;}) calleeè¢«è°ƒç”¨è€…ã€calleeè°ƒç”¨è€…\n        // åŸå› ï¼šè®¿é—® arguments æ˜¯ä¸ªå¾ˆæ˜‚è´µçš„æ“ä½œï¼Œå› ä¸ºå®ƒæ˜¯ä¸ªå¾ˆå¤§çš„å¯¹è±¡ï¼Œæ¯æ¬¡é€’å½’è°ƒç”¨æ—¶éƒ½éœ€è¦é‡æ–°åˆ›å»ºã€‚å½±å“ç°ä»£æµè§ˆå™¨çš„æ€§èƒ½ï¼Œè¿˜ä¼šå½±å“é—­åŒ…ã€‚\n    }\n    _add.toString = _add.valueOf = function(){\n        return num;\n    }\n    return _add;\n}\nadd(2)(3)(4);// function 9\n+add(2)(3)(4) // 9\nadd(2)(3)(4)+'' // '9'\n```\n\n## é˜¶ä¹˜\n```javascript\nfunction factorial(num){    \n   if (num <=1) {         \n      return 1;     \n   } else {         \n   return num * factorial(num-1)     \n   } \n} \n// å®šä¹‰é˜¶ä¹˜å‡½æ•°ä¸€èˆ¬éƒ½è¦ç”¨åˆ°é€’å½’ç®—æ³•ï¼›å¦‚ä¸Šé¢çš„ä»£ç æ‰€ç¤ºï¼Œåœ¨å‡½æ•°æœ‰åå­—ï¼Œè€Œä¸”åå­—ä»¥åä¹Ÿä¸ä¼šå˜çš„æƒ…å†µä¸‹ï¼Œè¿™æ ·å®šä¹‰æ²¡æœ‰é—®é¢˜ã€‚ \n// ä½†é—®é¢˜æ˜¯è¿™ä¸ªå‡½æ•°çš„æ‰§è¡Œä¸å‡½æ•°å factorial ç´§ç´§è€¦åˆåœ¨äº†ä¸€èµ·ã€‚ä¸ºäº†æ¶ˆé™¤è¿™ç§ç´§å¯†è€¦åˆçš„ç°è±¡ï¼Œå¯ä»¥åƒä¸‹é¢è¿™æ ·ä½¿ç”¨ arguments.callee\n// arguments çš„ä¸»è¦ç”¨é€”æ˜¯ä¿å­˜å‡½æ•°å‚æ•°ï¼Œ ä½†è¿™ä¸ªå¯¹è±¡è¿˜æœ‰ä¸€ä¸ªåå« callee çš„å±æ€§ï¼Œè¿”å›æ­£è¢«æ‰§è¡Œçš„ Function å¯¹è±¡ï¼Œ\n// ä¹Ÿå°±æ˜¯æ‰€æŒ‡å®šçš„ Function å¯¹è±¡çš„æ­£æ–‡ï¼Œè¿™æœ‰åˆ©äºåŒ¿åå‡½æ•°çš„é€’å½’æˆ–è€…ä¿è¯å‡½æ•°çš„å°è£…æ€§ã€‚ \n\nfunction factorial(num){    \n   if (num <=1) {         \n      return 1;     \n   } else {         \n   return num * arguments.callee(num-1);\n   } \n}\n\nvar trueFactorial = factorial;\nfactorial = function() {\n    return 0;\n}                \nalert(trueFactorial(5));// 120 å¦‚æœæ²¡æœ‰ä½¿ç”¨arguments.calleeï¼Œå°†è¿”å›0\n```\n\n## arguments.calleeçš„æ›¿æ¢æ–¹æ¡ˆ\n```javascript\nfunction show(n) {\n    var arr = [];\n    return (function () {\n        arr.unshift(n);\n        n--;\n        if (n != 0) {\n            arguments.callee();\n        }\n        return arr;\n    })()\n}\nshow(5)//[1,2,3,4,5]\n\n// ç»™å†…éƒ¨å‡½æ•°ä¸€ä¸ªåå­—ï¼ˆå½“å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒçš„arguments.calleeå¯¹è±¡å°±ä¼šæŒ‡å‘è‡ªèº«ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå¯¹è‡ªå·±çš„å¼•ç”¨ã€‚ï¼‰\nfunction show(n) {\n    var arr = [];\n    return (function fn() {\n        arr.unshift(n);\n        n--;\n        if (n != 0) {\n            fn();\n        }\n        return arr;\n\n    })()\n}\nshow(5)//[1,2,3,4,5]\n```\n\n## Dateç›¸å…³ \n\n### Dateæ„é€ å‡½æ•°\n```javascript\n4ç§è¡¨ç¤ºæ—¶é—´æˆ³çš„æ–¹å¼\n1. Date.now()\n2. new Date().getTime()\n3. +new Date() / +new Date +ç›¸å½“äº.valueOf();\n4. new Date().valueOf()\n5. new Date*1 / new Date()*1 \n\nè§£é‡Šï¼šJavaScriptä¸­å¯ä»¥åœ¨æŸä¸ªå…ƒç´ å‰ä½¿ç”¨'+'å·ï¼Œè¿™ä¸ªæ“ä½œæ˜¯å°†è¯¥å…ƒç´ è½¬æ¢ç§¤Numberç±»å‹ï¼Œå¦‚æœè½¬æ¢å¤±è´¥ï¼Œé‚£ä¹ˆå°†å¾—åˆ° NaNã€‚\næ‰€ä»¥ +new Date å°†ä¼šè°ƒç”¨ Date.prototype ä¸Šçš„ valueOf æ–¹æ³•ï¼Œè€Œæ ¹æ®MDNï¼ŒDate.prototype.value æ–¹æ³•ç­‰åŒäº Date.prototype.getTime()\n\nDate.parse(\"2018-06-13\") === new Date(\"2018-06-13\").getTime()\n// æµè§ˆå™¨ä¹‹é—´è§£ææ—¶é—´ä¸åŒ safari è§£ææ¨ªæ  - ä¼šå‡ºé”™æ‰€ä»¥å°½é‡ç”¨æ–œæ  /\n```\n### å½“å‰æ—¶é—´\n```javascript\nlet d = new Date()\nlet year=d.getFullYear();\nlet month=d.getMonth()+1; // æœˆä»½ç´¢å¼•ä»0å¼€å§‹\nlet day=d.getDate(); // getDay()ç”¨äºè·å–æ˜ŸæœŸ\nlet hour=d.getHours();\nlet minute=d.getMinutes();\nlet second=d.getSeconds();\nconsole.log(`${year}-${month}-${day} ${hour}:${minute}:${second}`) // 2018-6-13 21:20:48\n// ä¸è¶³2ä½æ•°è¡¥0\nconsole.log([year, month, day].map((item)=>{\n        item = item.toString();\n    return item[1] ? item : \"0\" + item;\n}).join(\"-\") +\" \" +[hour, minute, second].map((item)=>{\n        item = item.toString();\n    return item[1] ? item : \"0\" + item;\n}).join(\":\"))  // 2018-06-13 21:20:48\n```\n### Dateè®¡æ—¶\nä»¥åšå®¢å­˜æ´»æ—¶é—´ä¸ºä¾‹\n\n```javascript\nvar time = new Date(); \nvar t = \"åšå®¢å­˜æ´»äº†\"+Math.floor((+new Date - 1527868800000) / (1000 * 60 * 60 * 24)) + \"å¤©\" + time.getHours() + \"å°æ—¶\" \n+ time.getMinutes() + \"åˆ†\" + time.getSeconds() + \"ç§’\"; \n// åšå®¢å­˜æ´»äº†11å¤© 21å°æ—¶28åˆ†51ç§’ 1527868800000å½“æ—¶çš„æ—¶é—´è½¬çš„æ—¶é—´æˆ³ new Date(1527868800000).toLocaleString() \"2018/6/2 ä¸Šåˆ12:00:00\"\n```\n\n### DateåŸå‹æ‰©å±•æ–¹æ³•\n```javascript\nDate.prototype.format = function (format) {\n\t\t\tvar o = {\n\t\t\t\t\t\"M+\": this.getMonth() + 1,\n\t\t\t\t\t\"d+\": this.getDate(),\n\t\t\t\t\t\"h+\": this.getHours(),\n\t\t\t\t\t\"m+\": this.getMinutes(),\n\t\t\t\t\t\"s+\": this.getSeconds(),\n\t\t\t\t\t\"q+\": Math.floor((this.getMonth() + 3) / 3),\n\t\t\t\t\t\"S\": this.getMilliseconds()\n\t\t\t};\n\t\t\tif (/(y+)/.test(format)) {\n\t\t\t\t\tformat = format.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n\t\t\t}\n\t\t\tfor (var k in o) {\n\t\t\t\t\tif (new RegExp(\"(\" + k + \")\").test(format)) {\n\t\t\t\t\t\t\tformat = format.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : (\"00\" + o[k]).substr((\"\" + o[k]).length));\n\t\t\t\t\t}\n\t\t\t}\n\t\t\treturn format;\n\t};\n\n\tDate.prototype.addDays = function (d) {\n\t\t\tthis.setDate(this.getDate() + d);\n\t};\n\n\tDate.prototype.addWeeks = function (w) {\n\t\t\tthis.addDays(w * 7);\n\t};\n\n\tDate.prototype.addMonths = function (m) {\n\t\t\tvar d = this.getDate();\n\t\t\tthis.setMonth(this.getMonth() + m);\n\t\t\t//if (this.getDate() < d)\n\t\t\t//  this.setDate(0);\n\t};\n```\n\n## é¡µé¢åŠ è½½æ—¶é—´\n```javascript\nwindow.onload = function () {\n  var loadTime = window.performance.timing.domContentLoadedEventEnd-window.performance.timing.navigationStart; \n  console.log('Page load time is '+ loadTime);\n}\n// DOMContentLoadæ˜¯HTMLæ–‡æ¡£è¢«åŠ è½½å’Œè§£æå®Œæˆåè§¦å‘\n```\nonloadå’Œonreadyçš„åŒºåˆ«ï¼š\n\n1. æ‰§è¡Œæ—¶é—´\n\nã€€ã€€window.onloadå¿…é¡»ç­‰åˆ°é¡µé¢å†…åŒ…æ‹¬å›¾ç‰‡çš„æ‰€æœ‰å…ƒç´ åŠ è½½å®Œæ¯•åæ‰èƒ½æ‰§è¡Œã€‚ \n\nã€€ã€€$(document).ready()æ˜¯DOMç»“æ„ç»˜åˆ¶å®Œæ¯•åå°±æ‰§è¡Œï¼Œä¸å¿…ç­‰åˆ°åŠ è½½å®Œæ¯•ã€‚\n\n2. ç¼–å†™ä¸ªæ•°ä¸åŒ\n\nã€€ã€€window.onloadä¸èƒ½åŒæ—¶ç¼–å†™å¤šä¸ªï¼Œå¦‚æœæœ‰å¤šä¸ªwindow.onloadæ–¹æ³•ï¼Œåªä¼šæ‰§è¡Œä¸€ä¸ªã€‚\n\nã€€ã€€$(document).ready()å¯ä»¥åŒæ—¶ç¼–å†™å¤šä¸ªï¼Œå¹¶ä¸”éƒ½å¯ä»¥å¾—åˆ°æ‰§è¡Œã€‚\n\n3. ç®€åŒ–å†™æ³•\n\nã€€ã€€window.onloadæ²¡æœ‰ç®€åŒ–å†™æ³•ã€‚\n\nã€€ã€€$(document).ready(function(){})å¯ä»¥ç®€å†™æˆ$(function(){});\n\n## å¸¸ç”¨æ ‡ç­¾\n```javascript\n<meta charset=\"utf-8\">\n<meta content=\"text/html; charset=utf-8\" http-equiv=\"Content-Type\">\n<meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no\">\n<link rel=\"shortcut icon\" href=\"favicon.ico\" type=\"image/x-icon\" />\n// seo\n<title></title>\n<meta name=\"author\" name=\"cosyer\">\n<meta name=\"keywords\" name=\"cosyer\">\n<meta name=\"description\" name=\"cosyer\">\n<link rel=\"stylesheet\" href=\"\">\n<script src=\"\"></script>\n```\n\n## è·å–urlå‚æ•°\n```javascript\nlet reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\")\nlet r = window.location.search.substr(1).match(reg)\nif (r != null) return decodeURIComponent(r[2]) // encodeURIComponent()\nreturn null\n```\n\n## StringåŸå‹æ–¹æ³•æ‰©å±•\n```javascript\n// è¿å­—ç¬¦è½¬é©¼å³°\nString.prototype.hyphenToHump = function () {\n\t\treturn this.replace(/-(\\w)/g, function () {\n\t\t\t\treturn arguments[1].toUpperCase()\n\t\t})\n}\n\n// è¿å­—ç¬¦è½¬é©¼å³° ç®€å•ç‰ˆæœ¬\n// å‡è®¾åˆ†éš”ç¬¦æœ‰_å’Œ-ä¸¤ç§\nfunction camel(str) {\n  let cut = ['_', '-'];\n  let ar = str.split('');\n  let l = ar.length;\n  let flag = false;\n  for(let i = 0;i < l;i++) {\n    let cur = ar[i];\n    if(cut.indexOf(cur) !== -1) {\n      ar[i] = '';\n      flag = true;\n    } else if(flag) {\n      ar[i] = ar[i].toUpperCase();\n      flag = false;\n    }\n  }\n  return ar.join('');\n}\n\n// é©¼å³°è½¬è¿å­—ç¬¦\nString.prototype.humpToHyphen = function () {\n\t\treturn this.replace(/([A-Z])/g, \"-$1\").toLowerCase()\n}\n```\n\n## æ‹¦æˆªæ§åˆ¶å°ã€å³é”®å’ŒF12\n```javascript\ndocument.onkeydown = function () {\n        var e = window.event || arguments[0];\n        //å±è”½F12\n        if (e.keyCode == 123) {\n                return false;\n                //å±è”½Ctrl+Shift+I\n        } else if ((e.ctrlKey) && (e.shiftKey) && (e.keyCode == 73)) {\n                return false;\n                //å±è”½Shift+F10\n        } else if ((e.shiftKey) && (e.keyCode == 121)) {\n                return false;\n        }\n};\n//å±è”½å³é”®å•å‡»\ndocument.oncontextmenu = function () {\n        return false;\n};\n```\n\n## å´©æºƒæ¬ºéª—\n```javascript\nvar OriginTitle = document.title;\nvar titleTime;\ndocument.addEventListener('visibilitychange', function () {\n    if (document.hidden) {\n        $('[rel=\"icon\"]').attr('href', \"/img/TEP.ico\");\n        document.title = 'â•­(Â°AÂ°`)â•® é¡µé¢å´©æºƒå•¦ ~';\n        clearTimeout(titleTime);\n    }\n    else {\n        $('[rel=\"icon\"]').attr('href', \"/favicon.ico\");\n        document.title = '(à¸…>Ï‰<*à¸…) å™«åˆå¥½äº†~' + OriginTitle;\n        titleTime = setTimeout(function () {\n            document.title = OriginTitle;\n        }, 2000);\n    }\n});\n```\n\n## aæ ‡ç­¾\n```javascript\n    // é‚®ä»¶\n\t<a href={'mailto:'+props.email}></a>\n\t// ä¸‹è½½åªæœ‰ Firefox å’Œ Chrome æ”¯æŒ download å±æ€§ã€‚\n\t<a href=\"/images/myw3schoolimage.jpg\" download=\"w3logo\"></a>\n    // QQ\n\t<a href=\"tencent://message/?uin=535509852&Site=-&Menu=yes\" target=\"_blank\">QQ:535509852</a>\n```\n\n##  `<script>`å…ƒç´ æ”¾åœ¨ HTML æ–‡ä»¶åº•éƒ¨\n\næˆ‘ä»¬å°† `<script>`å…ƒç´ æ”¾åœ¨ HTML æ–‡ä»¶åº•éƒ¨çš„åŸå› æ˜¯ï¼Œæµè§ˆå™¨æŒ‰ç…§ä»£ç åœ¨æ–‡ä»¶ä¸­çš„é¡ºåºè§£æ HTMLã€‚å¦‚æœ JavaScriptåœ¨æœ€å‰é¢è¢«åŠ è½½ï¼ŒHTMLè¿˜æœªåŠ è½½ï¼ŒJavaScriptå°†æ— æ³•ä½œç”¨äºHTMLï¼Œæ‰€ä»¥JavaScriptæ— æ•ˆï¼Œå¦‚æœ JavaScript ä»£ç å‡ºç°é—®é¢˜åˆ™ HTML ä¸ä¼šè¢«åŠ è½½ã€‚æ‰€ä»¥å°† JavaScript ä»£ç æ”¾åœ¨åº•éƒ¨æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚å½“ç„¶åœ¨å½“ä¸‹ï¼Œå¹¶ä¸æ˜¯è¯´ script æ ‡ç­¾å¿…é¡»æ”¾åœ¨åº•éƒ¨ï¼Œå› ä¸ºä½ å¯ä»¥ç»™ script æ ‡ç­¾æ·»åŠ  defer æˆ–è€… async å±æ€§ã€‚\n\n## æŸä¸ªå­—ç¬¦åœ¨å­—ç¬¦ä¸²ä¸­çš„ä¸ªæ•°\n```javascript\nlet str=\"11112234241\"\nconsole.log(str.split(\"1\").length-1)\n```\n\n## æ•°ç»„æ±‚æœ€å¤§å€¼æ–¹æ³•æ±‡æ€»\n```javascript\n1. es6æ‹“å±•è¿ç®—ç¬¦...\nMath.max(...arr)\n2. es5 apply(ä¸æ–¹æ³•1åŸç†ç›¸åŒ)\nMath.max.apply(null,arr)\n3. forå¾ªç¯\nlet max = arr[0];\nfor (let i = 0; i < arr.length - 1; i++) {\n    max = max < arr[i+1] ? arr[i+1] : max\n}\n4. æ•°ç»„sort\narr.sort((a,b)=>{\n\treturn b-a // é™åº\n})\n5. æ•°ç»„reduce\narr.reduce((a,b)=>{\n\treturn a>b?a:b\n})\n```\n\n```javascript\nfunction foo(p1,p2) {\nthis.val = p1 + p2;\n}\nvar bar = foo.bind( null, \"p1\" );\nvar baz = new bar( \"p2\" );\nbaz.val; // p1p2\n```\n\n## å›åˆ°é¡¶éƒ¨\n```javascript\nfunction goback() {\n// 1.å›åˆ°é¡¶éƒ¨\n// scrollTo(0, 0); // æ»šåŠ¨æ¡æ»šåŠ¨ x y \n// 2.æ¸æ¸å›åˆ°é¡¶éƒ¨ è·ç¦»é¡¶éƒ¨é«˜åº¦\n//var iScrollTop = document.body.scrollTop; //360,Chrome,\n//var iScrollTop = document.documentElement.scrollTop;  //IE8,ç«ç‹\n    var iScrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n    var timer = setInterval(function () {  //å®šæ—¶å™¨\n        scrollTo(0, iScrollTop -= 100);\n        console.log(iScrollTop);\n        if (iScrollTop <= 0) {\n            clearInterval(timer);  //æ¸…é™¤å®šæ—¶å™¨\n        }\n    }, 100);\n}\n```\n\n## æ‰‹æœºå·å¤„ç†ä¸­é—´4ä½æ›¿æ¢æˆ*(æ•°æ®è„±æ•)\n\n### æ–¹æ³•1 substræ–¹æ³•\n```javascript\nlet phone=\"18883269663\"\nlet phone1=phone.substr(0,3)+\"****\"+phone.substr(7)\n```\n\n### æ–¹æ³•2 æ­£åˆ™åŒ¹é…åˆ†ç»„\n```javascript\nlet tel = \"13122223333\";\n\nlet reg = /^(\\d{3})\\d{4}(\\d{4})$/;\n\ntel = tel.replace(reg, \"$1****$2\");\n```\n\n## è½¬æ¢æ ‘å½¢ç»“æ„æ•°æ®\n```javascript\nlet arr=[{\"departmentId\":\"2807369902638080\",\"departmentName\":\"å››åˆé™¢å¤§æ•°æ®æœ‰é™å…¬å¸\",\"departmentDesc\":\"å››åˆé™¢å¤§æ•°æ®æœ‰é™å…¬å¸æ˜¯éå¸¸å¥½çš„å…¬å¸\",\"createTime\":null,\"hasChild\":false,\"parentId\":null},{\"departmentId\":\"2805950137730048\",\"departmentName\":\"äº§å“ç­–åˆ’éƒ¨\",\"departmentDesc\":null,\"createTime\":null,\"hasChild\":true,\"parentId\":null},{\"departmentId\":\"2805949110338560\",\"departmentName\":\"ç ”å‘ä¸­å¿ƒ\",\"departmentDesc\":null,\"createTime\":null,\"hasChild\":true,\"parentId\":null}];\n\nfunction fn(data, p_id) {\n  var result = [],\n    temp;\n  for (var i = 0; i < data.length; i++) {\n    if (data[i].parentId == p_id) {\n      var obj = data[i];\n      obj.label = data[i].departmentName;\n      temp = fn(data, data[i].departmentId);\n      if (temp.length > 0) {\n        obj.children = temp;\n      }\n      result.push(obj);\n    }\n  }\n  return result;\n}\n\nlet treeData=fn(treeData,null) // ä¼ å…¥åŸå§‹æ•°æ®/parentId\né€‚ç”¨äºant designå’Œelement-uiç­‰æ ‘å½¢ç»“æ„æ•°æ®\n```\n\n## æµè§ˆå™¨è¿”å›ä¸Šä¸€é¡µ\n```javascript\n<a href=\"#\" onclick=\"javascript:history.back(-1);\">è¿”å›åˆ°ä¸Šä¸€é¡µ</a>\n\n<a href=\"#\" onClick=\"javascript:history.go(-1)\">è¿”å›ä¸Šä¸€é¡µ</a>\n\n// window.open(url,\"_blank\")\n// window.location.href=url\n// window.location.replace(url)\n```\n\n## æµè§ˆå™¨å‰è¿›åé€€\n```javascript\nhistory.forward();//å‰è¿›\nhistory.back();//åé€€+åˆ·æ–°\nhistory.back(-1)//åé€€,ç›´æ¥è¿”å›å½“å‰é¡µçš„ä¸Šä¸€é¡µï¼Œæ•°æ®å…¨éƒ¨æ¶ˆæ¯ï¼Œæ˜¯ä¸ªæ–°é¡µé¢\nhistory.go(1);//å‰è¿›\nhistory.go(-1);//åé€€ä¹Ÿæ˜¯è¿”å›å½“å‰é¡µçš„ä¸Šä¸€é¡µï¼Œä¸è¿‡è¡¨å•é‡Œçš„æ•°æ®å…¨éƒ¨è¿˜åœ¨\n```\n\n## å»é‡æ•°ç»„é‡Œå¯¹è±¡ç›¸åŒå€¼å¾—key\n```javascript\nconst key = 'id'\nconst arr = [{ id: 1 }, { id: 1 }, { id: 2 }, { id: 3 }]\nconst filted = arr.reduce((finalList, obj) => {\n  if (!finalList.find(T => T[key] === obj[key])) {\n    finalList.push(obj)\n  }\n  return finalList\n}, [])\n// [{ id: 1 }, { id: 2 }, { id: 3 }]\n\nlet map =new Map()\nfor (let item of arr){\nmap.set(item[key],item)\n}\n[...map.values()]\n```\n\n## å˜é‡å£°æ˜\n```javascript\n(function() {\n      var a = b = 5; // var a=b;b=5 ä¸¥æ ¼æ¨¡å¼ä¼šæŠ¥é”™\n  })();   \nconsole.log(b); // 5\nconsole.log(a); // Uncaught ReferenceError: a is not defined\n\nvar a=[]; a[0]=1; a[1]=2; a[2]=3; a[5]=4; \na.length // 6\nwhileä¸æ”¹å˜ä½œç”¨åŸŸé“¾\n[]?true:false // true\n[]==false?true:false // true\n2==true //false\n2==false // false\n\n+new Array(017) // NaN\n\nnew Array(1,2,3) // [1,2,3]\nnew Array(1) // [empty]\nArray.of(7) // [7] Array.ofè§£å†³æ‰äº†è¿™ä¸ªé™·é˜±\n```\n\n## withè¯­å¥\nwithè¯­å¥çš„ä½œç”¨æ˜¯å°†ä»£ç çš„ä½œç”¨åŸŸè®¾ç½®åˆ°ä¸€ä¸ªç‰¹å®šçš„å¯¹è±¡ä¸­ã€‚\n\nåˆ©ï¼šwithè¯­å¥å¯ä»¥åœ¨ä¸é€ æˆæ€§èƒ½æŸå¤±çš„æƒ…å†µä¸‹ï¼Œå‡å°‘å˜é‡çš„é•¿åº¦ã€‚å¾ˆå¤šæƒ…å†µä¸‹ï¼Œä¹Ÿå¯ä»¥ä¸ä½¿ç”¨withè¯­å¥ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªä¸´æ—¶å˜é‡æ¥ä¿å­˜æŒ‡é’ˆï¼Œæ¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚\n\nå¼Šï¼šwithè¯­å¥ä½¿å¾—ç¨‹åºåœ¨æŸ¥æ‰¾è¯¥è¯­å¥å—ä¸­çš„æ‰€æœ‰çš„å˜é‡å€¼æ—¶ï¼Œéƒ½æ˜¯å…ˆåœ¨è¯¥withè¯­å¥æŒ‡å®šçš„å¯¹è±¡ä¸‹é¢å…ˆå¯»æ‰¾ä¸€éï¼Œç„¶åå†å»å¤–é¢çš„ä½œç”¨åŸŸå»å¯»æ‰¾ã€‚æ‰€ä»¥å°½é‡ä¸è¦åœ¨è¯¥è¯­å¥å—ä¸­å»ä½¿ç”¨ä¸€äº›ä¸å±äºè¯¥å¯¹è±¡ä¸­çš„å˜é‡\n\nç”¨æ³•\n\n```javascript\nvar x = {\n  name : \"å¤æœ‹\",\n  nick_name : \"gupeng\"\n};\nwith(x){\n  console.log(name+'çš„å°åæ˜¯'+nick_name);\n}\n```\n\nç›¸å½“äº\n\n```javascript\nvar x = {\n  name : \"å¤æœ‹\",\n  nick_name : \"gupeng\"\n};\n/*\n *è¿™é‡Œå°†xå¯¹è±¡èµ‹å€¼åˆ°å½“å‰å±€éƒ¨å˜é‡ä¸­ï¼Œå‡å°‘ä¸å¿…è¦çš„æŒ‡é’ˆè·¯å¾„è§£æè¿ç®—\n *ä¸€èˆ¬ç”¨äºåœ¨åœ¨æ–¹æ³•ä¸­å°†thiså¯¹è±¡å±€éƒ¨åŒ–ï¼Œæ¯”å¦‚ï¼švar this_ = this;\n */\nvar x_ = x;\nconsole.log(x_.name+'çš„å°åæ˜¯'+x_nick_name);\n```\n\n## booleanç±»å‹åœ¨è¿›è¡Œæ¯”è¾ƒæ—¶ä¼šç±»å‹è½¬æ¢æˆnumber\n\n```javascript\n11==true // 11==1 false\n1==true  // 1==1 true\n```\n\n## RGBåˆ°åå…­è¿›åˆ¶\nä½¿ç”¨æŒ‰ä½å·¦ç§»è¿ç®—ç¬¦(<<)å’ŒtoString(16)ï¼Œç„¶åpadStart(6,'0')å°†ç»™å®šçš„RGBå‚æ•°è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²ä»¥è·å¾—6ä½åå…­è¿›åˆ¶å€¼ã€‚\n\n```javascript\nconst rgbToHex = (r, g, b) => ((r << 16) + (g << 8) + b).toString(16).padStart(6, '0');\n// ((1<<24) + (rgb.r<<16) + (rgb.g<<8) + rgb.b).toString(16).substr(1);\n// rgbToHex(255, 165, 1) -> 'ffa501'\n```\n\n## æ»šåŠ¨åˆ°é¡¶éƒ¨\nä½¿ç”¨document.documentElement.scrollTopæˆ–document.body.scrollTopè·å–åˆ°é¡¶éƒ¨çš„è·ç¦»ã€‚\n\n```javascript\nconst scrollToTop = _ => {\n\n    const c = document.documentElement.scrollTop || document.body.scrollTop;\n\n    if (c > 0) {\n\n    â€‹ window.requestAnimationFrame(scrollToTop);\n\n    â€‹ window.scrollTo(0, c - c / 8);\n\n    }\n};\n\n// scrollToTop()\n```\n\n## æ±‚å’Œ\n```javascript\nconst sum = arr => arr.reduce((acc, val) => acc + val, 0);\n\n// sum([1,2,3,4]) -> 10 ç´¯åŠ å™¨\n// å¹³å‡æ•° sum([1,2,3,4])/4\n```\n\n## å¤§å†™æ¯ä¸ªå•è¯çš„é¦–å­—æ¯\nä½¿ç”¨replace()åŒ¹é…æ¯ä¸ªå•è¯çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œå¹¶ä½¿ç”¨toUpperCase()æ¥å°†å…¶å¤§å†™ã€‚\n\n```javascript\nconst capitalizeEveryWord = str => str.replace(/[a-z]/g, char => char.toUpperCase());\n// capitalizeEveryWord('hello world!') -> 'HELLO WORLD!'\n\nfunction titleCase(s) {  \n    return s.toLowerCase().replace(/\\b([\\w|']+)\\b/g, function(word) {  \n        //return word.slice(0, 1).toUpperCase() + word.slice(1);  \n        return word.replace(word.charAt(0), word.charAt(0).toUpperCase());  \n    });  \n}\n// titleCase('hello world!') -> 'Hello World!'\n```\n\n## è®¡ç®—æ•°ç»„ä¸­æŸå€¼å‡ºç°çš„æ¬¡æ•°\næ¯æ¬¡é‡åˆ°æ•°ç»„ä¸­çš„ç‰¹å®šå€¼æ—¶ï¼Œä½¿ç”¨reduce()æ¥é€’å¢è®¡æ•°å™¨ã€‚\n\n```javascript\nconst countOccurrences = (arr, value) => arr.reduce((a, v) => v === value ? a + 1 : a + 0, 0);\n\n// countOccurrences([1,1,2,1,2,3], 1) -> 3\n```\n\n## æ•°ç»„é—´çš„åŒºåˆ«\nä»båˆ›å»ºä¸€ä¸ªSetï¼Œç„¶ååœ¨aä¸Šä½¿ç”¨Array.filter()ï¼Œåªä¿ç•™bä¸­ä¸åŒ…å«çš„å€¼ã€‚\n\n```javascript\nconst difference = (a, b) => { const s = new Set(b); return a.filter(x => !s.has(x)); };\n\n// difference([1,2,3], [1,2]) -> [3]\n```\n\n## é˜¶ä¹˜\nä½¿ç”¨é€’å½’ã€‚å¦‚æœnå°äºæˆ–ç­‰äº1ï¼Œåˆ™è¿”å›1ã€‚å¦åˆ™è¿”å›nå’Œn - 1çš„é˜¶ä¹˜çš„ä¹˜ç§¯ã€‚\n\n```javascript\nconst factorial = n => n <= 1 ? 1 : n * factorial(n - 1);\n\n// factorial(6) -> 720\n```\n\n## è·å–æ»šåŠ¨ä½ç½®\nå¦‚æœå·²å®šä¹‰ï¼Œè¯·ä½¿ç”¨pageXOffsetå’ŒpageYOffsetï¼Œå¦åˆ™ä½¿ç”¨scrollLeftå’ŒscrollTopï¼Œå¯ä»¥çœç•¥elæ¥ä½¿ç”¨windowçš„é»˜è®¤å€¼ã€‚\n\n```javascript\nconst getScrollPos = (el = window) =>\n\n({x: (el.pageXOffset !== undefined) ? el.pageXOffset : el.scrollLeft,\ny: (el.pageYOffset !== undefined) ? el.pageYOffset : el.scrollTop});\n\n// getScrollPos() -> {x: 0, y: 200}\n```\n\n## æœ€å¤§å…¬çº¦æ•°\n```javascript\nconst gcd = (x, y) => !y ? x : gcd(y, x % y);\n\n// gcd (8, 36) -> 4\n1e3 // 1000\n1E3 // 1000\n```\n\n## UUIDç”Ÿæˆå™¨\nä½¿ç”¨crypto APIç”Ÿæˆç¬¦åˆRFC4122ç‰ˆæœ¬4çš„UUIDã€‚\n\n```javascript\nconst uuid = _ =>\n([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c => (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16));\n\n// uuid() -> '7982fcfe-5721-4632-bede-6000885be57d'\n```\n\n## æ£€æŸ¥å˜é‡æ˜¯å¦å£°æ˜\nå¦‚æœè¯»å–ä¸€ä¸ªä¸å­˜åœ¨çš„é”®ï¼Œä¼šè¿”å›undefinedï¼Œè€Œä¸æ˜¯æŠ¥é”™ã€‚å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œæ¥æ£€æŸ¥ä¸€ä¸ªå…¨å±€å˜é‡æ˜¯å¦è¢«å£°æ˜ã€‚\nå‰äºŒç§å†™æ³•æœ‰æ¼æ´ï¼Œå¦‚æœaå±æ€§æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼ˆæˆ–å…¶ä»–å¯¹åº”çš„å¸ƒå°”å€¼ä¸ºfalseçš„æƒ…å†µï¼‰ï¼Œåˆ™æ— æ³•èµ·åˆ°æ£€æŸ¥å˜é‡æ˜¯å¦å£°æ˜çš„ä½œç”¨ã€‚\næœ€å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨in\n\n```javascript\n// å‡è®¾å˜é‡xæœªå®šä¹‰\n\n// å†™æ³•ä¸€ï¼šæŠ¥é”™\nif (x) { return 1; }\n\n// å†™æ³•äºŒï¼šä¸æ­£ç¡®\nif (window.x) { return 1; }\n\n// å†™æ³•ä¸‰ï¼šæ­£ç¡®\nif ('x' in window) { return 1; }\n```\n\n## ä½¿ç”¨å¯¹è±¡ç»“æ„ä»£æ›¿ switchâ€¦case\nswitchâ€¦caseä¸ä½¿ç”¨å¤§æ‹¬å·ï¼Œä¸åˆ©äºä»£ç å½¢å¼çš„ç»Ÿä¸€ã€‚æ­¤å¤–ï¼Œè¿™ç§ç»“æ„ç±»ä¼¼äºgotoè¯­å¥ï¼Œå®¹æ˜“é€ æˆç¨‹åºæµç¨‹çš„æ··ä¹±ï¼Œä½¿å¾—ä»£ç ç»“æ„æ··ä¹±ä¸å ªï¼Œä¸ç¬¦åˆé¢å‘å¯¹è±¡ç¼–ç¨‹çš„åŸåˆ™ã€‚\n\n```javascript\n// åæ¨¡å¼\nfunction doAction(action) {\n    switch (action) {\n        case 'hack':\n            // ...\n            break;\n        case 'slash':\n            // ...\n            break;\n        default:\n            throw new Error('Invalid action.');\n    }\n}\n// å¥½æ¨¡å¼\nfunction doAction(action) {\n    var actions = {\n        hack: function () {\n            // ...\n        },\n        slash: function () {\n            // ...\n        },\n    };\n\n    if (typeof actions[action] !== 'function') {\n        throw new Error('Invalid action.');\n    }\n\n    return actions[action]();\n}\n```\n\n## éšè—consoleæ‰“å°åœ¨å“ªä¸€è¡Œçš„ä¿¡æ¯\n```javascript\nsetTimeout(console.log.bind(console, 'Hello world'), 2000)\n```\n\n## æ‰‹æœºéœ‡åŠ¨\n```javascript\nwindow.navigator.vibrate(200); // vibrate for 200ms\n```\n\n## [1,2,11]ç”¨sortæ–¹æ³•è¿›è¡Œæ’åº\n```javascript\n[1,2,11].sort() // [1,11,2] sortæ–¹æ³•é»˜è®¤æ ¹æ®unicodeè¿›è¡Œæ’åº\n\n[1,undefined,null].sort() // [1, null, undefined]\n\n[1,2,11].sort((a,b)=>a-b)  // [1,2,11]\n\n// bindæ˜¯å‡½æ•°æŸ¯é‡ŒåŒ–å¾—ä¸€ç§å®ç°\n```\n\n## [1,2,3].map(parseInt)\n```javascript\n[1,2,3].map(parseInt) // [1,NaN,NaN] è¿™é‡Œç¬¬äºŒä¸ªå‚æ•°æ˜¯mapçš„indexï¼Œ3å¯¹åº”ä¸‹æ ‡2ï¼Œ3æ²¡æœ‰äºŒè¿›åˆ¶çš„ã€‚\n\nparseInt(\"11\",2);\t\t//è¿”å› 3 (2+1)\n```\nparseIntç¬¬äºŒä¸ªå‚æ•°\t\n> å¯é€‰ã€‚è¡¨ç¤ºè¦è§£æçš„æ•°å­—çš„åŸºæ•°ã€‚è¯¥å€¼ä»‹äº 2 ~ 36 ä¹‹é—´ã€‚\n\n> å¦‚æœçœç•¥è¯¥å‚æ•°æˆ–å…¶å€¼ä¸º 0ï¼Œåˆ™æ•°å­—å°†ä»¥ 10 ä¸ºåŸºç¡€æ¥è§£æã€‚å¦‚æœå®ƒä»¥ â€œ0xâ€ æˆ– â€œ0Xâ€ å¼€å¤´ï¼Œå°†ä»¥ 16 ä¸ºåŸºæ•°ã€‚\n\n> å¦‚æœè¯¥å‚æ•°å°äº 2 æˆ–è€…å¤§äº 36ï¼Œåˆ™ parseInt() å°†è¿”å› NaNã€‚\n\n## å›¾ç‰‡ä¸Šä¼ \n1. ä¼ ç»Ÿçš„formè¡¨å•ä¸Šä¼ \n```javascript\n<form action=\"\" method=\"POST\" enctype=\"multipart/form-data\">\n    <input type=\"file\" name=\"img\">\n</form>\n```\n\n2. éšè—iframeæ¨¡æ‹ŸAjaxä¸Šä¼ \n```javascript\n// formçš„enctypeå±æ€§ä¸ºç¼–ç æ–¹å¼ï¼Œå¸¸ç”¨æœ‰ä¸¤ç§ï¼šapplication/x-www-form-urlencodedå’Œmultipart/form-dataï¼Œé»˜è®¤ä¸ºapplication/x-www-form-urlencodedã€‚\n// multipart/form-dataæ˜¯ä¸Šä¼ äºŒè¿›åˆ¶æ•°æ®;å®ƒå‘Šè¯‰æˆ‘ä»¬ä¼ è¾“çš„æ•°æ®è¦ç”¨åˆ°å¤šåª’ä½“ä¼ è¾“åè®®\n<iframe  name=\"ajaxUpload\" style=\"display:none\"></iframe>\n<form action=\"url\" method=\"post\" enctype=\"multipart/form-data\" target=\"ajaxUpload\">\n    <input type=\"file\" name=\"img\">\n</form>\n```\n\n3. h5 ajaxä¸Šä¼ \n```javascript\n// ä½¿ç”¨å·²æœ‰çš„formè¡¨å•ï¼Œæ¥å®ä¾‹åŒ–FormDataå¯¹è±¡\nvar form = document.getElementById('form');\nvar formData = new FormData(form);\n\n// å¯ä»¥ä½¿ç”¨appendæ¥æ·»åŠ æ›´å¤šçš„ä¿¡æ¯\nvar img = document.getElementById('img').files[0];\nvar formData = new FormData();\nformData.append('img',img);\n\n// è·å– \n// formData.get('img') formData.getAll('img') [img]\n\n// è®¾ç½®ä¿®æ”¹\n// formData.set('img',1) // å·²å­˜åœ¨åˆ™ä¿®æ”¹ï¼Œä¸å­˜åœ¨åˆ™æ–°å¢\n\n// åˆ¤æ–­æ˜¯å¦å­˜åœ¨\n// formData.has('img')\n\n// åˆ é™¤\n// formData.delete('img')\n\n// è¿”å›è¿­ä»£å™¨\n// formData.entries()\n// formData.append(\"k1\", \"v1\");\n// formData.append(\"k1\", \"v2\");\n// formData.append(\"k2\", \"v1\");\n\n// var i = formData.entries();\n\n// i.next(); // {done:false, value:[\"k1\", \"v1\"]}\n// i.next(); // {done:fase, value:[\"k1\", \"v2\"]}\n// i.next(); // {done:fase, value:[\"k2\", \"v1\"]}\n// i.next(); // {done:true, value:undefined}\n\n// åˆ©ç”¨XHRä¸Šä¼ å›¾ç‰‡\nvar xhr = new XMLHttpRequest();\nxhr.open('POST',url);\nxhr.onreadystatechange = function(){};\nxhr.send(formData);\n\n// è·å–ä¸Šä¼ çš„è¿›åº¦\nxhr.upload.onprogress = function(evt){\n    console.log(evt);\n    var loaded = evt.loaded; //å·²ç»ä¸Šä¼ çš„å¤§å°\n    var total = evt.total;//é™„ä»¶æ€»å¤§å°\n    var per = Math.floor(100 * loaded / total );//å·²ç»ä¸Šä¼ çš„ç™¾åˆ†æ¯”\n}\n```\n\n4. æ£€éªŒå›¾ç‰‡ä¿¡æ¯\n```javascript\n<input type=\"file\" id=\"img\" name=\"img\"/>\n\n// è·å–fileå¯¹è±¡\nvar img = document.getElementById('img');\nvar files = img.files;\nvar file = files[0];\n```\n\n## å®ç°JSONP\n```javascript\n// å¯¹è±¡å­˜å‚¨\nconst JSONP = (url, jsonpObj) => {\n  let cbName = \"cb\" + JSONP.count++\n  let cbQuery = \"JSONP.\" + cbName\n  let paramsToQuery = obj => {\n    let query = '?'\n    for (let k in obj) {\n      if (obj.hasOwnProperty(k)) {\n        query += `${k}=${obj[k]}&`\n      }      \n    }\n    return query\n  }\n  JSONP[cbName] = data => {\n    try {\n      jsonpObj.callback(data)\n    } finally {\n      delete JSONP[cbName]\n      document.body.removeChild(script)\n    }   \n  }\n  let queryStr = paramsToQuery(jsonpObj.data) + 'callback=' + cbQuery\n  let script = document.createElement('script')\n  script.src = url + encodeURIComponent(queryStr)\n  document.body.appendChild(script)\n}\nJSONP.count = 0\n\n// æ•°ç»„å­˜å‚¨\nvar JSONP = (url, descriptor) => {\n  var script = document.createElement('script')\n  var body = document.getElementsByTagName('body')[0]\n\n  var parseParam = (paramObj) => {\n    var paramStr = '?',\n        prop = ''\n    for (prop in paramObj) {\n      if(paramObj.hasOwnProperty(prop)) {\n        paramStr += (`${prop}=${encodeURIComponent(paramObj[prop])}&`)\n      }\n    }\n\n    return paramStr\n  }\n\n  var params = parseParam(descriptor.data)\n  var callback = (data) => {\n    descriptor.callback(data)\n    body.removeChild(script)\n    delete JSONP.cbs[index]\n  }\n  var index = JSONP.cbs.push(callback) - 1\n\n  script.src = url + params + 'callback=' + encodeURIComponent(`JSONP.cbs[${index}]`)\n  body.appendChild(script)\n}\n\nJSONP.cbs = []\n```\n\n## chromeæµè§ˆå™¨æ‹¦æˆªå¤šæ¬¡window.open\n```javascript\n // éå†æ‰“å¼€é¡µé¢ chromeæµè§ˆå™¨ä¼šæ‹¦æˆªåªå…è®¸ä¸€æ¬¡çš„è¯·æ±‚ è¿™é‡Œæ¨¡æ‹Ÿç‚¹å‡»\n[1,2,3].forEach(()=>{\n        var aDom = document.createElement('a');\n        aDom.href = 'https://nodejs.org/dist/v10.13.0/node-v10.13.0-x64.msi';\n        aDom.target = '_blank';\n        aDom.click();\n});\n```\n\n## mixed\n```javascript\n1 << 31 // 1* 2^31 \n2 >> 1  // 2/2^1\n// ---------------\ndocument.getElementById(\"#app\")\ndocument.querySelector(\"#app\") // ç¬¬ä¸€ä¸ªå…ƒç´ \ndocument.querySelectorAll(\"#app\") // ç¬¦åˆçš„æ‰€æœ‰å…ƒç´ \np.example // class \na[target] // å±æ€§\nh1,h2 // å¤šä¸ªé€‰æ‹©å™¨æŒ‰ç…§æ–‡æ¡£ä¸­çš„ä½ç½®è®¾ç½®\ndocument.querySelector(\"body\").contentEditable = true //è®¾ç½®å†…å®¹æ˜¯å¦å¯ç¼–è¾‘ å­å…ƒç´ ç»§æ‰¿çˆ¶å…ƒç´ \nisContentEditable // æŸ¥çœ‹æ˜¯å¦å¯ç¼–è¾‘\n<div oncontextmenu=\"myFunction()\" contextmenu=\"mymenu\"/> // å³å‡»èœå•äº‹ä»¶\nhtml \nobj.oncontextmenu= function(){}\nobj.addEventListener(\"contextmenu\",function(){})\nonabort // ç”¨äºimgåŠ è½½ç»ˆæ­¢ alt title onerrorå‘ç”Ÿé”™è¯¯\nonhashchange // è·¯ç”±é”šç‚¹å˜åŒ–\nonfocusin // æ”¯æŒå†’æ³¡çš„onfocus\noninput // input onchangeå¤±å»ç„¦ç‚¹è§¦å‘ \nonpropertychange// input ä¼šå®æ—¶è§¦å‘ï¼Œä¼šåœ¨å…ƒç´ çš„å±æ€§æ”¹å˜æ—¶å°±è§¦å‘äº‹ä»¶å½“å…ƒç´ disable=trueæ—¶ä¸ä¼šè§¦å‘åªåœ¨IE ä¸‹æ”¯æŒï¼Œå…¶ä»–æµè§ˆå™¨ä¸æ”¯æŒï¼Œç”¨oninputæ¥è§£å†³\nonreset // formè¡¨å•è¢«é‡ç½®è§¦å‘ input type=\"reset\"\nonsearch // input type search æœç´¢äº‹ä»¶\nonsubmnit // form æäº¤ action\nonscroll // å…ƒç´ æ»šåŠ¨æ—¶è§¦å‘\noncopy // åœ¨å…ƒç´ ä¸Šæ‹·è´è„šæœ¬\noncut // å‰ªåˆ‡\nonpaste // ç²˜è´´\nonafterprint // body é¡µé¢æ‰“å°åè§¦å‘ window.print() å¯¹åº”onbeforeprint\noncanplay // å‡†å¤‡å¼€å§‹æ’­æ”¾ è®¾ç½®æˆ–è€…è¿”å›\ndocument.getElementsByTagName() // è¿”å›æ ‡ç­¾é›†åˆ\ndocument.getElementsByClassName() // è¿”å›ç±»åé›†åˆ\nobj.removeEventListener()\nremoveChild()\nremoveAttribute()\n```\n\n## é«˜åº¦\n```javascript\nwindow.scrollY // 225\nwindow.pageYOffset // 225\nwindow.document.body.scrollTop // 0\nwindow.document.documentElement.scrollTop // 225\n// ç‰¹æ®Šå­—ç¬¦:~ ! @ # % ^ * - _ = + ?\n```\n\n## è‡ªé€‚åº”å•ä½\n1. vwï¼š1vwç­‰äºè§†å£å®½åº¦çš„1%ã€‚\n\n2. vhï¼š1vhç­‰äºè§†å£é«˜åº¦çš„1%ã€‚\n\n3. vminï¼šé€‰å–vwå’Œvhä¸­æœ€å°çš„é‚£ä¸ªã€‚\n\n4. vmaxï¼šé€‰å–vwå’Œvhä¸­æœ€å¤§çš„é‚£ä¸ª\n\nCSSç™¾åˆ†æ¯”æ˜¯ç›¸å¯¹äºåŒ…å«å®ƒçš„æœ€è¿‘çš„çˆ¶å…ƒç´ çš„é«˜åº¦å’Œå®½åº¦\n\n## domè§£ç»‘äº‹ä»¶\n\n1. attachEventæ˜¯IEæœ‰çš„æ–¹æ³•ï¼Œå®ƒä¸éµå¾ªW3Cæ ‡å‡†ï¼Œè€Œå…¶ä»–çš„ä¸»æµæµè§ˆå™¨å¦‚FFç­‰éµå¾ªW3Cæ ‡å‡†çš„æµè§ˆå™¨éƒ½ä½¿ç”¨addEventListenerï¼Œæ‰€ä»¥å®é™…å¼€å‘ä¸­éœ€åˆ†å¼€å¤„ç†ã€‚\n\n2. å¤šæ¬¡ç»‘å®šåæ‰§è¡Œçš„é¡ºåºæ˜¯ä¸ä¸€æ ·çš„ï¼ŒattachEventæ˜¯åç»‘å®šå…ˆæ‰§è¡Œï¼ŒaddEventListeneræ˜¯å…ˆç»‘å®šå…ˆæ‰§è¡Œã€‚\n\n### ä¸ºå…ƒç´ è§£ç»‘äº‹ä»¶\næ³¨æ„:ç”¨ä»€ä¹ˆæ–¹å¼ç»‘å®šäº‹ä»¶,å°±åº”è¯¥ç”¨å¯¹åº”çš„æ–¹å¼è§£ç»‘äº‹ä»¶\n* 1. è§£ç»‘äº‹ä»¶\n* å¯¹è±¡.onäº‹ä»¶åå­—=äº‹ä»¶å¤„ç†å‡½æ•°--->ç»‘å®šäº‹ä»¶\n* å¯¹è±¡.onäº‹ä»¶åå­—=null;\n\n```javascript\n$(\"btn\").onclick=function () {\nconsole.log(\"æˆ‘æ˜¯ç»‘å®šäº‹ä»¶\");\n};\n$(\"btn\").onclick=null;\n};\n```\n\n* 2. è§£ç»‘äº‹ä»¶\n* å¯¹è±¡.addEventListener(\"æ²¡æœ‰onçš„äº‹ä»¶ç±»å‹\",å‘½åå‡½æ•°,false);---ç»‘å®šäº‹ä»¶ \n* å¯¹è±¡.removeEventListener(\"æ²¡æœ‰onçš„äº‹ä»¶ç±»å‹\",å‡½æ•°åå­—,false);\n\n```javascript\n$(\"btn\").addEventListener(\"click\",f1,false);\n$(\"btn\").removeEventListener(\"click\",f1,false);\n```\n\n* 3. è§£ç»‘äº‹ä»¶(IE)\n* å¯¹è±¡.attachEvent(\"onäº‹ä»¶ç±»å‹\",å‘½åå‡½æ•°);---ç»‘å®šäº‹ä»¶\n* å¯¹è±¡.detachEvent(\"onäº‹ä»¶ç±»å‹\",å‡½æ•°åå­—);\n```javascript\n$(\"btn\").attachEvent(\"onclick\",f2);\n$(\"btn\").detachEvent(\"onclick\",f1);\n```\n\n## ä½è¿ç®—ç¬¦\nä½è¿ç®—ç¬¦ä¸€èˆ¬ä½¿ç”¨çš„å¾ˆå°‘ï¼Œå½“ä»–ä¸æ•°å­—ä¸€èµ·ä½¿ç”¨çš„æ—¶å€™ï¼Œæ¯”å¦‚~N => -(N+1),è¿™ä¸ªå¼å­ä»…å½“ N == -1 çš„æ—¶å€™ç»“æœä¸º0ã€‚ä½è¿ç®—å¯ä»¥æé«˜ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚\n\næˆ‘ä»¬å¯ä»¥åœ¨indexof(...)å‡½æ•°å‰é¢åŠ ä¸€ä¸ª~æ¥è¿›è¡Œå¸ƒå°”æ£€æŸ¥ï¼Œæ£€æŸ¥ä¸€ä¸ªé¡¹æ˜¯å¦å­˜åœ¨äºArrayæˆ–è€…stringä¸­ã€‚\n```javascript\nlet userName = 'break jerry'\n\nif(~userName.indexOf(\"break\")) {\n    console.log('access denied');\n}else {\n    console.log('access granted');\n}\n\n// å¥‡å¶æ€§\nif(index & 1) {\n    // 1 å¥‡æ•° odd \n}else{\n    // 0 å¶æ•° even\n}\n```\n\n## å…³é—­å½“å‰é¡µé¢\n- window.close()\n- window.open(\"about:blank\",\"_self\").close();\n\n## å­—èŠ‚èŠ‚çœå†™æ³•\n```javascript\n//å–æ•´\nparseInt(a,10); \nMath.floor(a); \n~~a; //èŠ‚çœä¹‹åçš„å†™æ³•\na|0; //èŠ‚çœä¹‹åçš„å†™æ³• \na<<0\n\n//å››èˆäº”å…¥\nMath.round(a); \na+.5|0; //èŠ‚çœä¹‹åçš„å†™æ³•\n\n//å†…ç½®å€¼æœªå®šä¹‰\nundefined; \nvoid 0; //èŠ‚çœä¹‹åçš„å†™æ³•(å¿«)\n0[0]; //èŠ‚çœä¹‹åçš„å†™æ³•(ç•¥æ…¢)\n\n//å†…ç½®å€¼ æ— ç©·\nInfinity;\n\n\n1/0; //èŠ‚çœä¹‹åçš„å†™æ³•\n\n//å¸ƒå°”å€¼çŸ­å†™æ³•\ntrue; \n!0; //èŠ‚çœä¹‹åçš„å†™æ³•\nfalse; \n!1; //èŠ‚çœä¹‹åçš„å†™æ³•\n\n// åˆ¤æ–­å¥‡å¶\nnum & 1 == 1 //å¥‡æ•°\nnum & 1 == 0 //å¶æ•°\n\nnum % 2 === 0 //å¶æ•°\n// é€’å½’åˆ¤æ–­\nfunction isEven(num) {\n  if (num < 0 || num === 1) return false;\n  if (num == 0) return true;\n  return isEven(num - 2);\n}\n```\n\n## ç®€å•è®¡ç®—é¡µé¢FPS\næ•´ä½“æ€è·¯æ˜¯ä¸€ç§’æœ‰ä¸€åƒæ¯«ç§’ï¼Œå…ˆè®°å½•å½“å‰æ—¶é—´ä½œä¸ºæœ€åä¸€æ¬¡è®°å½•fpsçš„æ—¶é—´ï¼Œé€šè¿‡ requestAnimationFrame å›è°ƒä¸æ–­ç»™ç´¯åŠ fspè®¡æ•°å™¨ï¼Œ\nå¹¶ä¸”åˆ¤æ–­ä¸Šæ¬¡è®°å½•fpsçš„æ—¶é—´æ˜¯å¦è¾¾åˆ°1000æ¯«ç§’ä»¥ä¸Šï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œå°±å°†fpsç´¯åŠ å™¨çš„å€¼ä½œä¸ºå½“å‰fpsæ˜¾ç¤ºï¼Œå¹¶ä¸”é‡ç½®fpsç´¯åŠ å™¨ã€‚\n\n```javascript\nvar showFPS = (function () {\n    // noinspection JSUnresolvedVariable, SpellCheckingInspection\n    // å‡½æ•°å¼\n    var requestAnimationFrame =\n        window.requestAnimationFrame || //Chromium  \n        window.webkitRequestAnimationFrame || //Webkit \n        window.mozRequestAnimationFrame || //Mozilla Geko \n        window.oRequestAnimationFrame || //Opera Presto \n        window.msRequestAnimationFrame || //IE Trident? \n        function (callback) { //Fallback function \n            window.setTimeout(callback, 1000 / 60);\n        };\n    \n    var dialog;\n    var container;\n\n    var fps = 0;\n    var lastTime = Date.now(); // æ—¶é—´æˆ³\n    // éå†ä¿®æ”¹style\n    function setStyle(el, styles) {\n        for (var key in styles) {\n            el.style[key] = styles[key];\n    }\n    }\n\nfunction init() {\n        dialog = document.createElement('dialog');\n        // åˆå§‹åŒ–èµ‹å€¼æ ·å¼\n        setStyle(dialog, {\n            display: 'block',\n            border: 'none',\n            backgroundColor: 'rgba(0, 0, 0, 0.6)',\n            margin: 0,\n            padding: '4px',\n            position: 'fixed',\n            top: 0,\n            right: 'auto,',\n            bottom: 'auto',\n            left: 0,\n            color: '#fff',\n            fontSize: '12px',\n            textAlign: 'center',\n            borderRadius: '0 0 4px 0'\n        });\n        // containeræˆäº†domå…ƒç´ \n        container.appendChild(dialog);\n    }\n\n    function calcFPS() {\n        offset = Date.now() - lastTime;\n        fps += 1;\n    // 1så†…çš„è®¡æ•°å™¨\n    if (offset >= 1000) {\n            lastTime += offset; // Date.now();\n            displayFPS(fps);\n            fps = 0;\n        }\n\n        requestAnimationFrame(calcFPS);\n    };\n\n    function displayFPS(fps) {\n        var fpsStr = fps + ' FPS';\n\n        if (!dialog) {\n            init();\n        }\n\n    if (fpsStr !== dialog.textContent) {\n        // é‡ç»˜ \n        dialog.textContent = fpsStr;\n        }\n}\n\nreturn function (parent) {\n    container = parent;\n        calcFPS();\n    };\n})();\nshowFPS(document.body);\n```\n\n## ä½ ä¸çŸ¥é“çš„new.target\nnew æ˜¯æ„é€ å‡½æ•°ç”Ÿæˆå®ä¾‹çš„å‘½ä»¤, ES6ä¸º new å‘½ä»¤å¼•å…¥äº† new.targetå±æ€§ã€‚è¿™ä¸ªå±æ€§ç”¨äºç¡®å®šæ„é€ å‡½æ•°æ˜¯æ€ä¹ˆè°ƒç”¨çš„ã€‚\nç”¨æ³•ï¼šåœ¨æ„é€ å‡½æ•°ä¸­, å¦‚æœä¸€ä¸ªæ„é€ å‡½æ•°ä¸æ˜¯é€šè¿‡ newæ“ä½œç¬¦è°ƒç”¨çš„, new.targetä¼šè¿”å› undefinedã€‚\n\nä½¿ç”¨åœºæ™¯ï¼š\n### es5å†™æ³•\n> å¦‚æœä¸€ä¸ªæ„é€ å‡½æ•°ä¸é€šè¿‡ new å‘½ä»¤ç”Ÿæˆå®ä¾‹, å°±æŠ¥é”™æé†’ã€‚\n```javascript\nfunction Shape(options) {\n    if (this instanceof Shape) {\n        this.options = options\n    } else {\n        // è¦ä¹ˆæ‰‹åŠ¨ç»™å®ƒåˆ›å»ºä¸€ä¸ªå®ä¾‹å¹¶è¿”å›\n        // return new Shape(options)\n        \n        // è¦ä¹ˆæé†’\n        throw new Error('Shape æ„é€ å‡½æ•°å¿…é¡»ä½¿ç”¨ new æ“ä½œç¬¦')\n    }\n}\n```\n\n###  es6å†™æ³•\n> å­ç±»ç»§æ‰¿çˆ¶ç±», é‚£ä¹ˆçˆ¶ç±»æ„é€ å‡½æ•°ä¸­çš„ new.target æ˜¯å­ç±»æ„é€ å‡½æ•°çš„åç§°ã€‚\n```javascript\nclass Zoo {\n    constructor() {\n        if (new.target === Zoo) throw new Error('Zooæ„é€ å‡½æ•°åªèƒ½ç”¨äºå­ç±»ç»§æ‰¿')\n    }\n}\n\nconst zoo = new Zoo()   // æŠ¥é”™\n\nclass Dog extends Zoo {\n    constructor() {\n        super()\n    } \n}\n\nconst dog = new Dog()  // ä¸æŠ¥é”™\n```\n\n## æ–‡ä»¶æ‰©å±•å\n```javascript\nvar filePath = '21312321.mp3'\nfilePath.substring(filePath.lastIndexOf(\".\")+1,filePath.length) //'mp3'\n```\n\n## blurå’Œclickå†²çª\n> åœºæ™¯ï¼šå¹³æ—¶åšè¡¨å•éªŒè¯çš„æ—¶å€™ä¸€èˆ¬éƒ½æœ‰ä¸ªinputæ¡†å’Œåˆ é™¤æŒ‰é’®ï¼Œç„¶åä¹ æƒ¯æ€§åœ¨å¤±å»ç„¦ç‚¹çš„æ—¶å€™> å»éªŒè¯è¾“å…¥çš„å†…å®¹æ˜¯å¦æ­£ç¡®ï¼ŒåšéªŒè¯ï¼Œå‘è¯·æ±‚ç­‰ç­‰ã€‚\n> è¿™ä¸ªæ—¶å€™ï¼Œé‚£ä¸ªç‚¹å‡»åˆ é™¤æŒ‰é’®å¾€å¾€ä¹Ÿå°±è§¦å‘äº†inputçš„å¤±å»ç„¦ç‚¹äº‹ä»¶\n1. ç»™å¤±å»ç„¦ç‚¹çš„æ—¶é—´åŠ ä¸Šå»¶è¿Ÿæ—¶é—´ï¼Œè®©bluræ—¶é—´åœ¨clickäº‹ä»¶åæ‰§è¡Œï¼Œè¿™ä¸ªæ–¹æ³•å›ºç„¶èƒ½å¤Ÿè§£å†³é—®é¢˜ï¼Œä½†æ˜¯æœ¬äººå¹¶ä¸æ˜¯å¾ˆæ¨èï¼Œå› ä¸ºå½±å“æ€§èƒ½ï¼Œä¸åˆ°æœ€åä¸ç”¨è¿™ä¸ªæ–¹æ³•ï¼›\n2. event.relatedTarget.idäº‹ä»¶å±æ€§è¿”å›ä¸äº‹ä»¶çš„ç›®æ ‡èŠ‚ç‚¹ç›¸å…³çš„èŠ‚ç‚¹ã€‚ï¼ˆéIEï¼‰\n3. mousedownäº‹ä»¶æ›¿ä»£å¤„ç†clickäº‹ä»¶\n\n## objectæ ‡ç­¾\nobjectæ ‡ç­¾ä¸åœ¨domæ–‡æ¡£æµé‡Œé¢ï¼Œæµè§ˆå™¨åœ¨è§£æçš„æ—¶å€™å…ˆæŠŠobjectæ”¾ç½®åœ¨æœ€ä¸Šå±‚ï¼Œç„¶åä¾æ¬¡è§£ædomæ–‡æ¡£ï¼Œæ”¾åœ¨ä¸‹å±‚ã€‚\n\nå¦‚æœè¿™æ ·å¼•ç”¨å¤šåª’ä½“æ–‡ä»¶æ¨èè¿˜æ˜¯ä¸ä½¿ç”¨objectï¼Œåªæœ‰iframeçš„å±‚çº§åœ¨å®ƒä¹‹ä¸Šå¤„ç†èµ·æ¥å¾ˆéº»çƒ¦ã€‚\n\n## escapeã€encodeURIã€encodeURIComponentåŒºåˆ«\n1. escapeæ˜¯å¯¹å­—ç¬¦ä¸²è¿›è¡Œç¼–ç ï¼Œå¯¹URLä½¿ç”¨ä¸éœ€è¦ encodeURI encodeURIComponent\n2. encodeURIæ–¹æ³•ä¸ä¼šå¯¹ä¸‹åˆ—å­—ç¬¦ç¼–ç  ASCIIå­—æ¯ã€æ•°å­—ã€!@#$&*()=:/,;?+'\n3. encodeURIComponentæ–¹æ³•ä¸ä¼šå¯¹ä¸‹åˆ—å­—ç¬¦ç¼–ç  ASCIIå­—æ¯ã€æ•°å­—ã€!*()'\næ‰€ä»¥encodeURIComponentæ¯”encodeURIç¼–ç çš„èŒƒå›´æ›´å¤§ã€‚\nå®é™…ä¾‹å­æ¥è¯´ï¼ŒencodeURIComponentä¼šæŠŠ http:// ç¼–ç æˆ http%3A%2F%2F è€ŒencodeURIå´ä¸ä¼šã€‚\nå½“ç¼–ç urlæ—¶éœ€è¦ä½¿ç”¨encodeURIï¼Œå½“éœ€è¦ç¼–ç å‚æ•°æ—¶ä½¿ç”¨encodeURIComponent\n\n## é“¾å¼è°ƒç”¨\n```javascript\n1.æ–¹æ³•ä½“å†…è¿”å›å¯¹è±¡å®ä¾‹è‡ªèº«(this)\n\nvar Obj = {\n    a: 1,\n    func: function(){\n        this.a += 1;\n        return this\n    }\n}\nObj.func().func();\nconsole.log(Obj.a);    //3\n2.å¯¹è±¡ä¼ å…¥åæ¯æ¬¡è°ƒç”¨è¿”å›å‡½æ•°è‡ªèº«\n    function show(str) {\n        console.log(str);\n        return show;\n    }\n    show(123)(456)(789);\n\n// æ§åˆ¶å°æ‰“å°ç»“æœ\n// 123\n// 456\n// 789\n```\n\n## setTimeout ä¸ºä¸å¯æ‰§è¡Œçš„å­—ç¬¦ä¸²æ—¶ä¼šé€ æˆå†…å­˜æ³„æ¼\n```javascript\nsetTimeout(\"fn()\",100)\nfunction fn(){\nconsole.log(11111111)\n}\n```\n\n## JSON.parseå’ŒJSON.stringifyå…¶ä»–å‚æ•°\n```javascript\nvar obj ={name:'cosyer',age:15}\nvar newobj = JSON.stringify(obj)\n\nJSON.parse(newobj,(key,value)=>{\nconsole.log(1111111111111,key,value);\n});\n// name cosyer \n// age 15 \n// \"\" {}\n\n// 3ä¸ªå‚æ•°\n// JSON.stringify(jsonObj,repalce,space)\n// replaceå¯ä»¥æ˜¯æ•°ç»„æˆ–è€…å›è°ƒå‡½æ•°\nconst testJSON = {\n   name: 'test',\n   cities: {\n      shanghai: 1,\n   },\n};\n\nJSON.stringify(testJSON, ['name']);\n\n// \"{\"name\": 'test'}\"\n\nJSON.stringify(testJSON, ['name', 'cities']);\n \n//  \"{\"name\": 'test', \"cities\": {}}\"\n\nJSON.stringify(testJSON, ['name', 'cities', 'shanghai']);\n\n// \"{\"name\": 'test', \"cities\": {\"shanghai\": 1}}\"\n\nJSON.stringify(testJSON, (key, value) => {\n    // éå†å¯¹è±¡\n    if (key === 'cities') {\n       return  'cities';\n    } \n    return value; // ç¡®è®¤value???\n});\n\n// \"{\"name\": 'test', \"cities\": 'cities'}\"\n\nJSON.stringify(testJSON, undefined, '...');\n\n// \"{\n//    ...\"name\": 'test',\n//    ...\"city\": 'shanghai',\n//   }\"\n\nJSON.stringify(testJSON, undefined, 7);\n\n// \"{\n//          \"name\": 'test',\n//          \"city\": 'shanghai',   // ç¼©è¿›7ä¸ªç©ºæ ¼\n// }\"\n\nJSON.stringify({name:123,age:24},null,'\\t')\n// \"{\n// \t\"name\": 123,\n// \t\"age\": 21\n// }\"\n```\n\n## éšæœºæ•°\n```javascript\n// [0,1) å·¦é—­å³å¼€ min-max \nMath.floor(min+Math.random()*(max-min+1))\n// toString() this is objectæ–¹æ³• toString() valueOf\n// éšæœºé¢œè‰²\nitem.style.backgroundColor = '#' + Math.random().toString(16).slice(2, 8);\n// \"#\" + (\"00000\" + ((Math.random() * 0x1000000) << 0).toString(16)).slice(-6)\n```\n\n## chromeæµè§ˆå™¨è·³è½¬è°ƒè¯•\né—®é¢˜æè¿°ï¼šåœ¨chromeé‡Œè°ƒè¯•æ¥å£çš„æ—¶å€™å‘ç°é¡µé¢è·³è½¬ä¹‹åä¼šçœ‹ä¸åˆ°ä¹‹å‰çš„æ¥å£è¿”å›ï¼Œå³ä½¿ä½ å°†Perserve log å‹¾ä¸Šï¼Œèƒ½çœ‹åˆ°è·³è½¬ä¹‹å‰çš„æ¥å£ï¼Œä½†æ˜¯çœ‹ä¸åˆ°è¿”å›çš„å†…å®¹\n\né—®é¢˜è§£å†³ï¼šæŸ¥äº†ä¸€äº›èµ„æ–™ï¼Œchromeä¹‹æ‰€ä»¥è¿™ä¹ˆåšï¼ˆçœ‹ä¸åˆ°è·³è½¬ä¹‹å‰çš„æ¥å£è¿”å›ï¼‰æ˜¯ä¸ºäº†èŠ‚çœå†…å­˜å¼€é”€ï¼Œä½†æ˜¯è¿™ä¸ªç»™è°ƒè¯•å¸¦æ¥äº†å›°éš¾ï¼Œç„¶åæˆ‘å‚ç…§stackoverflowçš„è§£å†³æ–¹æ¡ˆï¼Œ åœ¨æ§åˆ¶å°æ‰§è¡Œ window.onunload = function() { debugger; } ä¸ºäº†åœ¨é¡µé¢unloadä¹‹å‰è¿›å…¥debugï¼Œä½†æ˜¯å°è¯•äº†è¿˜æ˜¯çœ‹ä¸åˆ°è·³è½¬ä¹‹å‰æ¥å£è¿”å›çš„å†…å®¹ï¼Œæœ€åçš„è§£å†³æ–¹æ¡ˆæ˜¯ç”¨firefixè°ƒè¯•ï¼Œåœ¨ç«ç‹é‡Œåœ¨è°ƒè¯•ä¸­çš„ç½‘ç»œä¸­å‹¾é€‰æŒç»­æ—¥å¿—å¯ä»¥çœ‹åˆ°è·³è½¬ä¹‹å‰çš„æ¥å£ï¼Œä¸”å¯ä»¥çœ‹åˆ°æ¥å£è¿”å›å†…å®¹ã€‚\n\n**å‚è€ƒèµ„æ–™** \n* [Chrome dev tools fails to show response ](https://stackoverflow.com/questions/38924798/chrome-dev-tools-fails-to-show-response-even-the-content-returned-has-header-con)\n* [Chrome å¼€å‘è€…å·¥å…·é‡Œçœ‹ä¸åˆ°å®Œæ•´çš„ HTTP request å›åº”ï¼Ÿ](https://ephrain.net/chrome-chrome-%E9%96%8B%E7%99%BC%E8%80%85%E5%B7%A5%E5%85%B7%E8%A3%A1%E7%9C%8B%E4%B8%8D%E5%88%B0%E5%AE%8C%E6%95%B4%E7%9A%84-http-request-%E5%9B%9E%E6%87%89%EF%BC%9F/)\n\n## æ—¶é—´\n**UTC**ï¼šä¸–ç•Œåè°ƒæ—¶é—´ï¼Œæ˜¯ç»è¿‡å¹³å‡å¤ªé˜³æ—¶(ä»¥æ ¼æ—å¨æ²»æ—¶é—´GMTä¸ºå‡†)ã€åœ°è½´è¿åŠ¨ä¿®\n\næ­£åçš„æ–°æ—¶æ ‡ä»¥åŠä»¥ç§’ä¸ºå•ä½çš„å›½é™…åŸå­æ—¶æ‰€ç»¼åˆç²¾ç®—è€Œæˆçš„æ—¶é—´ã€‚UTCæ¯”GMTæ›´\n\nåŠ ç²¾å‡†ï¼Œå…¶è¯¯å·®å€¼å¿…é¡»ä¿æŒåœ¨0.9ç§’ä»¥å†…ã€‚è‹¥å¤§äº0.9ç§’ï¼Œåˆ™ç”±ä½äºå·´é»çš„å›½é™…åœ°\n\nçƒè‡ªè½¬äº‹åŠ¡ä¸­å¤®å±€å‘å¸ƒé—°ç§’ï¼Œä½¿UTCä¸åœ°çƒè‡ªè½¬å‘¨æœŸä¸€è‡´ï¼Œæ‰€ä»¥åŸºæœ¬ä¸ŠUTCçš„æœ¬è´¨\n\nå¼ºè°ƒçš„æ˜¯æ¯”GMTæ›´ä¸ºç²¾ç¡®çš„ä¸–ç•Œæ—¶é—´æ ‡å‡†ã€‚\n\n**GMT**ï¼šæ ¼æ—å°¼æ²»æ˜¯ä½äºè‹±å›½å—éƒŠçš„åŸæ ¼æ—å°¼æ²»å¤©æ–‡å°æ‰€åœ¨åœ°ï¼Œä¹Ÿæ˜¯åœ°ç†ç»åº¦çš„èµ·\n\nå§‹ç‚¹ã€‚è¿™é‡Œæ‰€è®¾å®šçš„æ—¶é—´å°±å«æ ¼æ—å°¼æ²»æ—¶é—´ï¼Œä¹Ÿæ˜¯ä¸–ç•Œæ—¶é—´å‚è€ƒç‚¹ï¼Œå…¨ä¸–ç•Œéƒ½æ ¹\n\næ®æ—¶åŒºçš„ä¸åŒä»¥æ ¼æ—å°¼æ²»çš„æ—¶é—´ä½œä¸ºæ ‡å‡†æ¥è®¾å®šæ—¶é—´ã€‚\n\n**å¤ä»¤æ—¶**ï¼šå› ä¸ºå¤å¤©ç™½å¤©æ—¶é—´æ¯”è¾ƒé•¿ï¼Œå¤ªé˜³ä¼šæ¯”è¾ƒæ—©å‡ºç°ï¼ŒæŸäº›åœ°åŒºå°±å°†å½“åœ°çš„æ—¶\n\né—´ææ—©ä¸€æ®µæ—¶é—´ï¼ˆä¾‹å¦‚ä¸€å°æ—¶ï¼‰ï¼Œä»¥è¾¾åˆ°åˆ©ç”¨é˜³å…‰èŠ‚çº¦èƒ½æºçš„ç›®çš„ã€‚ é€šå¸¸ç§‹å­£\n\næ—¶ï¼Œæ­¤åœ°åŒºä¼šå°†å½“åœ°æ—¶é—´æ¨åä¸€æ®µæ—¶é—´ï¼ˆä¾‹å¦‚ä¸€å°æ—¶ï¼‰ï¼Œå›å¤æ­£å¸¸æ—¶é—´ã€‚\n\nUTCå’Œæœ¬åœ°æ—¶é—´çš„å…³ç³»ï¼šæœ¬åœ°æ—¶é—´=UTC+æ—¶åŒº+å¤ä»¤æ—¶åç§»é‡ã€‚\n\n## uuidç”Ÿæˆ(Math.random)\n```javascript\nfunction uuid(len, radix) {\n    var chars = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\n    var uuid = [], i;\n    var radix_new = radix || chars.length;\n\n    if (len) {\n        // Compact form\n        for (i = 0; i < len; i++) {\n            uuid[i] = chars[0 | Math.random() * radix_new];\n        }\n    } else {\n        // rfc4122, version 4 form\n        var r;\n\n        // rfc4122 requires these characters\n        uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';\n        uuid[14] = '4';\n\n        // Fill in random data. At i==19 set the high bits of clock sequence as\n        // per rfc4122, sec. 4.1.5\n        for (i = 0; i < 36; i++) {\n            if (!uuid[i]) {\n                r = 0 | Math.random() * 16;\n                uuid[i] = chars[(i === 19) ? (r & 0x3) | 0x8 : r];\n            }\n        }\n    }\n    return uuid.join('');\n};\n```\n\n```js\nfunction generateDynamic32UUID() {\n  return \"xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx\"\n    .replace(/[xy]/g, function(c) {\n      let r = (Math.random() * 16) | 0;\n      let v = c == \"x\" ? r : (r & 0x3) | 0x8;\n      return v.toString(16);\n    })\n    .toUpperCase(); // \"8ED4E1FA-DA4B-5B40-B5AF-05AC386B2753\"\n  //   return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n  //     (\n  //       c ^\n  //       (crypto.getRandomValues(new Uint8Array(1))[0] & (15 >> (c / 4)))\n  //     ).toString(16)\n  //   );\n}\n```\n\n```js\n// hash name\nfunction getHashName(prefix) {\n    var number = randomNum(1, 9);\n    var hash = parseInt(((new Date().getTime()) % 3839 + 256), 10).toString(16);\n    hash = prefix + '-' + hash + number;\n    return hash;\n}\n\nfunction randomNum(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n```\n\n## UUID(createObjectURL)\n```js\nfunction uuid() {\n  var temp_url = URL.createObjectURL(new Blob());\n  var uuid = temp_url.toString(); // blob:https://xxx.com/b250d159-e1b6-4a87-9002-885d90033be3\n  URL.revokeObjectURL(temp_url);\n  return uuid.substr(uuid.lastIndexOf(\"/\") + 1);\n}\n```\n\n## jqåŸç”Ÿå¯¹ç…§\n```javascript\n1ã€å…ƒç´ è·å–\n/*******************åŸç”Ÿjs**************************/\nvar ele = document.getElementById('idName');\nvar eleArr = document.getElementsByClassName('className');\nvar eleArr = document.getElementsByTagName('div');\nvar ele = document.querySelector('#idName');//('.className')//('tagName'); //å–ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ \nvar eleArr = document.querySelectorAll('.className');//('tagName');\n/*******************jQuery**************************/\nvar ele = $('#idName');\nvar ele = $('.className:eq(0)'); //å–ç¬¬ä¸€ä¸ªå…ƒç´ \nvar eleArr = $('tagName');\n2ã€classé€‰æ‹©å™¨æ“ä½œ\n/*******************åŸç”Ÿjs**************************/\n//className å±æ€§\nele.className = 'newClassName';\n//classListæ“ä½œ\nele.classList.contains('className'); //æ˜¯å¦å«æœ‰è¯¥ç±»\nele.classList.add('newClassName1,newClassName2...'); //æ·»åŠ ç±»\nele.classList.remove('oldClassName1,newClassName2...'); //åˆ é™¤ç±»\nele.classList.toggle('className'); //å¦‚æœå…ƒç´ ä¸­æœ‰è¯¥classNameï¼Œåˆ™åˆ é™¤å¹¶è¿”å›falseï¼Œå¦åˆ™æ·»åŠ å¹¶è¿”å›true\n\n/*******************jQuery**************************/\nele.hasClass(className);\nele.addClass('newClassName1,newClassName2...');\nele.removeClass('newClassName1,newClassName2...'); // å…ƒç´ æœ¬èº«remove()\nele.toggleClass('className');\n3ã€å…ƒç´ èŠ‚ç‚¹æ“ä½œ\n/*******************åŸç”Ÿjs**************************/\n//åˆ›å»ºèŠ‚ç‚¹\n    var newNode = ele.createElement('<div>åˆ›å»º</div>');\n//æ’å…¥èŠ‚ç‚¹\n    ele.appendChild(newNode); //åœ¨eleçš„å­èŠ‚ç‚¹çš„æœ«å°¾æ’å…¥newNode\n    ele.insertBefore(newNode,targetNode); //åœ¨eleçš„å­èŠ‚ç‚¹targetNodeå‰é¢æ’å…¥newNode\n//åˆ é™¤èŠ‚ç‚¹\n    ele.removeChild(ele.childNodes[i]); //åˆ é™¤eleç¬¬i+1ä¸ªå­èŠ‚ç‚¹\n//æ›¿æ¢èŠ‚ç‚¹\n    ele.replaceChild(newNode, oldNode); //æ›¿æ¢eleä¸­çš„å­èŠ‚ç‚¹\n//å…‹éš†èŠ‚ç‚¹\n    var copyNode = ele.cloneNode(deep); //deepä¸ºtrueæ—¶ï¼Œæ·±æ‹·è´ï¼ˆåŒ…æ‹¬å…¶å­å­™èŠ‚ç‚¹ï¼‰ï¼Œä¸ºfalseæ—¶åªå¤åˆ¶æœ¬èº«èŠ‚ç‚¹\n\n/*******************jQuery**************************/\n//åˆ›å»ºèŠ‚ç‚¹\n    var newNode = $('<div>åˆ›å»º</div>');\n//æ’å…¥èŠ‚ç‚¹\n    //åœ¨å…ƒç´ å­èŠ‚ç‚¹æœ«å°¾æ’å…¥\n    ele.append(newNode); //åœ¨eleçš„å­èŠ‚ç‚¹çš„æœ«å°¾æ’å…¥newNode\n    newNode.appendTo(ele); //åœ¨eleçš„å­èŠ‚ç‚¹çš„æœ«å°¾æ’å…¥newNode\n    //åœ¨å…ƒç´ å­èŠ‚ç‚¹å‰ç«¯æ’å…¥\n    ele.prepend(newNode); //åœ¨eleçš„å­èŠ‚ç‚¹çš„å‰ç«¯æ’å…¥newNode\n    newNode.prependTo(ele); //åœ¨eleçš„å­èŠ‚ç‚¹çš„å‰ç«¯æ’å…¥newNode\n\n    //åœ¨å…ƒç´ åé¢æ·»åŠ \n    ele.after(newNode);\n    newNode.insertAfter(ele);\n    //åœ¨å…ƒç´ å‰é¢æ·»åŠ \n    ele.before(newNode);\n    newNode.insertBefore(ele);\n\n//åˆ é™¤èŠ‚ç‚¹\n    ele.remove(); //ç§»é™¤eleåŠå…¶æ‰€æœ‰æ–‡æœ¬ã€å­å­™èŠ‚ç‚¹ã€æ•°æ®å’Œäº‹ä»¶\n    ele.detach(); //ç§»é™¤eleåŠå…¶æ‰€æœ‰æ–‡æœ¬ã€å­å­™èŠ‚ç‚¹ï¼Œä½†æ˜¯ä¿ç•™æ•°æ®å’Œäº‹ä»¶\n    ele.empty(); //æ¸…é™¤eleæ‰€æœ‰çš„å†…å®¹å’Œå­å­™å…ƒç´ ï¼Œä½†æ˜¯eleèŠ‚ç‚¹æœ¬èº«å’Œå…¶å±æ€§äº‹ä»¶ç­‰è¿˜åœ¨\n\n//æ›¿æ¢èŠ‚ç‚¹\n    ele.replaceWith(newNode); //æ›¿æ¢eleä¸ºæ–°çš„å†…å®¹(å¯ä»¥æ˜¯htmlå…ƒç´ ï¼Œdomå…ƒç´ ï¼ŒjQueryå…ƒç´ )\n    newNode.replaceAll(ele); //æ›¿æ¢eleä¸ºæ–°çš„htmlå…ƒç´ \n//å…‹éš†èŠ‚ç‚¹\n    ele.clone(deep); //deepä¸ºtrueæ—¶ï¼Œæ·±æ‹·è´ï¼ˆåŒ…æ‹¬å…¶äº‹ä»¶å¤„ç†å‡½æ•°ï¼‰ï¼Œä¸ºfalseæ—¶åªå¤åˆ¶æœ¬èº«ï¼Œé»˜è®¤false\n4ã€å…ƒç´ èŠ‚ç‚¹éå†\n/*******************åŸç”Ÿjs**************************/\n// å­èŠ‚ç‚¹\nvar eleArr = ele.childNodes; // æ‰€æœ‰å­èŠ‚ç‚¹\nvar eleArr = ele.children; //æ‰€æœ‰å­èŠ‚ç‚¹æ•°ç»„ï¼Œç”¨å¾—è¾ƒå¤š\n\nvar firstEle = ele.firstChild; //ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ ä½ç‰ˆæœ¬æµè§ˆå™¨firstElementChild\nvar lastEle = ele.lastChild; //æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ ä½ç‰ˆæœ¬æµè§ˆå™¨lastElementChild\n// çˆ¶èŠ‚ç‚¹\nvar parentEle = ele.parentNode;\n// å…„å¼ŸèŠ‚ç‚¹\nvar nextEle = ele.nextSibling; //ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\nvar previousEle = ele.previousSibling; //ä¸Šä¸€ä¸ªèŠ‚ç‚¹\n\n/*******************jQuery**************************/\n// å­èŠ‚ç‚¹\nvar eleArr = ele.children(); //æ‰€æœ‰å­èŠ‚ç‚¹æ•°ç»„\n\nvar firstEle = ele.first(); //ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹\nvar lastEle = ele.last(); //æœ€åä¸€ä¸ªå­èŠ‚ç‚¹\n// çˆ¶èŠ‚ç‚¹\nvar parentEle = ele.parent(); //ç›´æ¥çˆ¶å…ƒç´ \nvar parentEleArr = ele.parents(); //æ‰€æœ‰ç¥–å…ˆå…ƒç´ \nvar parentEle = ele.offsetParent(); // ç¬¬ä¸€ä¸ªæœ‰å®šä½çš„çˆ¶å…ƒç´ \nvar parentEleArr = ele.parentsUntil(stop, filter); // æ»¡è¶³æ¡ä»¶ä¹‹é—´çš„çˆ¶èŠ‚ç‚¹\n\n// å…„å¼ŸèŠ‚ç‚¹\nvar nextEle = ele.next(); //ä¸‹ä¸€ä¸ªèŠ‚ç‚¹\nvar nextEleArr = ele.nextAll(); //eleåé¢æ‰€æœ‰åŒçº§èŠ‚ç‚¹\nvar previousEle = ele.prev(); //ä¸Šä¸€ä¸ªèŠ‚ç‚¹\nvar previousEle = ele.prevAll(); //eleä¹‹å‰æ‰€æœ‰åŒçº§èŠ‚ç‚¹\nvar siblingsArr = ele.siblings(); //æ‰€æœ‰åŒçº§å…ƒç´ èŠ‚ç‚¹\n5ã€å±æ€§æ“ä½œ\n/*******************åŸç”Ÿjs**************************/\n// å±æ€§æ•°ç»„\nvar attrArr = ele.attributes;\n// åˆ¤æ–­å±æ€§\nvar bool = ele.hasAttribute('attrName'); //æ˜¯å¦æœ‰æŒ‡å®šå±æ€§\nvar bool = ele.hasAttributes(); //æ˜¯å¦æœ‰å±æ€§\n// è·å–å±æ€§å€¼\nvar attrValue = ele.getAttribute('attrName');\n// è®¾ç½®å±æ€§å€¼\nele.setAttribute('attrName','attrValue');\n// åˆ é™¤å±æ€§\nele.removeAttribute('attrName');\n/*******************jQuery**************************/\n//åœ¨è®¾ç½®disabledã€selectedã€checkedç­‰è¿™äº›Booleanç±»å‹è‡ªå¸¦å±æ€§æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨prop()æ–¹æ³•ï¼›\n// å…¶ä»–å­—ç¬¦ä¸²ç±»å‹è‡ªå¸¦å±æ€§æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨attr()æ–¹æ³•å³å¯;DOMèŠ‚ç‚¹å¯è§çš„è‡ªå®šä¹‰å±æ€§æˆ‘ä»¬ä¹Ÿä½¿ç”¨attr()æ–¹æ³•ã€‚\n// è·å–å±æ€§å€¼\nvar attrValue = ele.attr('attrName');\nvar propValue = ele.prop('propName');//\n// è®¾ç½®å±æ€§å€¼\nele.attr('attrName','attrValue'); //è‡ªå®šä¹‰çš„ä¸€äº›å±æ€§\nele.prop('propName','propValue'); //disabledç­‰ä¸€äº›å±æ€§ï¼ŒHTMLå…ƒç´ çš„å›ºæœ‰å±æ€§\n// åˆ é™¤å±æ€§\nele.removeAttr('attrName');\n6ã€äº‹ä»¶\n/*******************åŸç”Ÿjs**************************/\n//äº‹ä»¶ç»‘å®šåŠè§£ç»‘\nele.addEventListener('click',func,false);\nele.removeEventListener('click',func,false);\nele.onclick = func;\nele.onclick = null;\nele.attachEvent('onclick',func); //ie8ä»¥ä¸‹\nele.detachEvent('onclick',func); //ie8ä»¥ä¸‹\n/*******************jQuery**************************/\n/*å¤šç§äº‹ä»¶ç»‘å®šå’Œè§£ç»‘æ–¹æ³•*/\n/**æ–¹æ³•1\n * 1ã€ç›´æ¥ç»‘å®šäº‹ä»¶æ–¹æ³•mouseenter()...ç­‰ç­‰\n * 2ã€è¿™æ ·çš„æ–¹å¼ï¼Œä¸‹é¢ä¸¤ä¸ªäº‹ä»¶ä¸ä¼šè¢«å±‚å ï¼Œéƒ½ä¼šæ‰§è¡Œ\n * 3ã€åªèƒ½ä¸€ä¸ªä¸€ä¸ªç»‘å®š\n */\n$(\"div:eq(0)\").click(function () {\n    alert(1);\n});\n$(\"div:eq(0)\").click(function () {\n    alert(2);\n});\n\n/**æ–¹æ³•2\n * 1ã€bind(\"event1 event2 ... eventx\",fn)\n * 2ã€åŒæ—¶ç»‘å®šå¤šä¸ªäº‹ä»¶è§¦å‘æ¡ä»¶ï¼Œæ‰§è¡ŒåŒä¸€ä¸ªå‡½æ•°\n */\n$(\"div:eq(1)\").bind(\"click mouseenter\",function () {\n    alert(\"bindç»‘å®šæ³•\");\n});\n//è§£ç»‘\n$(\"div:eq(1)\").unbind(\"click\"); //è§£ç»‘æŒ‡å®šçš„\n//$(\"div:eq(1)\").unbind();  //è§£ç»‘æ‰€æœ‰çš„\n\n/**æ–¹æ³•3\n * 1ã€delegate(\"selector\",\"event1 event2 ... eventx\",fn)\n * 2ã€å¯ä»¥ç»‘å®šçˆ¶ç›’å­é‡Œçš„å­ç›’å­è§¦å‘äº‹ä»¶ï¼Œæ‰§è¡Œå‡½æ•°\n */\n$(\"div:eq(2)\").delegate(\"button\",\"click mouseleave\",function () {\n    alert(\"delegateç»‘å®šæ³•\");\n});\n//è§£ç»‘\n$(\"div:eq(2)\").undelegate();\n/**æ–¹æ³•4\n * é‡ç‚¹ä½¿ç”¨ï¼ï¼ï¼\n * 1ã€on(\"event1 event2 ... eventx\",\"selector\",data,fn)\n * 2ã€å¯ä»¥ç»‘å®šçˆ¶ç›’å­é‡Œçš„åä»£ç›’å­è§¦å‘äº‹ä»¶ï¼Œæ‰§è¡Œå‡½æ•°\n * 3ã€å‚æ•°dataç”±event.dataå¸¦å…¥å‡½æ•°ä¸­\n */\n\n$(\"div:eq(3)\").on(\"click mouseleave\",\"button\",{\"name\":\"mjm\",\"age\":24},function (event) {\n    alert(\"onç»‘å®šæ³•\"+event.data.name);\n\n});\n//è§£ç»‘\n$(\"div:eq(3)\").off();\n```\n\n## å®ç°å¤åˆ¶tiny\n```javascript\n// å¤åˆ¶è¿æ¥åœ°å€\nwindow.copyLink = function (str) {\n    if (window.clipboardData) {\n        // å…¼å®¹ie11ä»¥ä¸‹æµè§ˆå™¨\n        window.clipboardData.setData('Text', str);\n    } else {\n        var $input = document.createElement('input');\n        var body = document.querySelector(\"body\")\n        $input.value=str;\n        body.appendChild($input);\n        $input.select();\n        document.execCommand('copy');\n        // $input.remove();\n        body.remove($input)\n    }\n};\n```\n\n## scrollbaræ»šåŠ¨æ¡æ ·å¼ä¼˜åŒ–\n```css\n::-webkit-scrollbar-corner {\n  background-color: transparent;\n}\n\n::-webkit-scrollbar-button {\n  width: 0;\n  height: 0;\n  display: none;\n}\n\n::-webkit-scrollbar-thumb {\n  width: 7px;\n  background-color: #b4babf;\n  border-radius: 7px;\n}\n\n::-webkit-scrollbar {\n  width: 7px;\n  height: 7px;\n}\n\n::-webkit-scrollbar-track {\n  width: 15px;\n}\n\n::-webkit-scrollbar:hover {\n  background-color: transparent;\n}\n```\n\n##  å†…ç½‘ipæ®µ\nå†…ç½‘æ®µ10.0.0.0â€”10.255.255.255ï¼Œ172.16.0.0â€”172.31.255.255ï¼Œ192.168.0.0â€”192.168.255.255\n\n## è·å–å½“å‰é¼ æ ‡åæ ‡\n```javascript\nvar getCoordInDocumentExample = function () {\n  var coords = document.getElementById(\"colorPanel\");\n  coords.onmousemove = function (e) {\n    var pointer = getCoordInDocument(e);\n    var coord = document.getElementById(\"colorText\");\n    coord.innerHTML = \"X,Y=(\" + pointer.x + \", \" + pointer.y + \")\";\n  }\n}\n\nvar getCoordInDocument = function (e) {\n  e = e || window.event;\n  var x = e.pageX || (e.clientX +\n    (document.documentElement.scrollLeft ||\n      document.body.scrollLeft));\n  var y = e.pageY || (e.clientY +\n    (document.documentElement.scrollTop ||\n      document.body.scrollTop));\n  return {\n    'x': x,\n    'y': y\n  };\n}\n\nwindow.onload = function () {\n  getCoordInDocumentExample();\n};\n```\n\n## ç±»æ•°ç»„å¯¹è±¡è½¬æ•°ç»„\n```javascript\nfunction func(){\n    // ç±»æ•°ç»„å¯¹è±¡è½¬æ•°ç»„\n    console.log(arguments) // {0:1,1:2,2:3,length:3}\n    console.log([].slice.call(arguments))\n    console.log(Array.prototype.slice.call(arguments))\n    console.log(Array.from(arguments))\n    console.log([...arguments])\n\n    console.log(Array.from({length:0})); //[]\n    console.log(Array.from('')); //[]\n}\nfunc(1,2,3)\n```\n\n## é¡µé¢æ»šåŠ¨æ¡åˆ°åº•åˆ¤æ–­\n```javascript\n//è·å–ç½‘é¡µçš„æ€»é«˜åº¦ï¼Œä¸»è¦æ˜¯è€ƒè™‘å…¼å®¹æ€§æ‰€ä»¥æŠŠIeæ”¯æŒçš„documentElementä¹Ÿå†™äº†ï¼Œè¿™ä¸ªæ–¹æ³•è‡³å°‘æ”¯æŒIE8\nvar htmlHeight = document.body.scrollHeight || document.documentElement.scrollHeight;\n//clientHeightæ˜¯ç½‘é¡µåœ¨æµè§ˆå™¨ä¸­çš„å¯è§†é«˜åº¦ï¼Œ\nvar clientHeight = document.body.clientHeight || document.documentElement.clientHeight;\n//scrollTopæ˜¯æµè§ˆå™¨æ»šåŠ¨æ¡çš„topä½ç½®ï¼Œ\nvar scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n//é€šè¿‡åˆ¤æ–­æ»šåŠ¨æ¡çš„topä½ç½®ä¸å¯è§†ç½‘é¡µä¹‹å’Œä¸æ•´ä¸ªç½‘é¡µçš„é«˜åº¦æ˜¯å¦ç›¸ç­‰æ¥å†³å®šæ˜¯å¦åŠ è½½å†…å®¹ï¼›\nif (scrollTop + clientHeight == htmlHeight) {\n    // æ»šåŠ¨æ¡åˆ°åº•\n}\n// æ²¡æœ‰å‚ç›´æ»šåŠ¨æ¡çš„æƒ…å†µä¸‹ï¼ŒscrollHeightå€¼ä¸å…ƒç´ è§†å›¾å¡«å……æ‰€æœ‰å†…å®¹æ‰€éœ€è¦çš„æœ€å°å€¼clientHeightç›¸åŒ\n```\n\n```\nç½‘é¡µå¯è§åŒºåŸŸå®½ï¼š document.body.clientWidth;\nç½‘é¡µå¯è§åŒºåŸŸé«˜ï¼š document.body.clientHeight;\nç½‘é¡µå¯è§åŒºåŸŸå®½ï¼š document.body.offsetWidth (åŒ…æ‹¬è¾¹çº¿çš„å®½);\nç½‘é¡µå¯è§åŒºåŸŸé«˜ï¼š document.body.offsetHeight (åŒ…æ‹¬è¾¹çº¿çš„å®½);\nç½‘é¡µæ­£æ–‡å…¨æ–‡å®½ï¼š document.body.scrollWidth;\nç½‘é¡µæ­£æ–‡å…¨æ–‡é«˜ï¼š document.body.scrollHeight;\nç½‘é¡µè¢«å·å»çš„é«˜ï¼š document.body.scrollTop;\nç½‘é¡µè¢«å·å»çš„å·¦ï¼š document.body.scrollLeft;\nç½‘é¡µæ­£æ–‡éƒ¨åˆ†ä¸Šï¼š window.screenTop;\nç½‘é¡µæ­£æ–‡éƒ¨åˆ†å·¦ï¼š window.screenLeft;\nå±å¹•åˆ†è¾¨ç‡çš„é«˜ï¼š window.screen.height;\nå±å¹•åˆ†è¾¨ç‡çš„å®½ï¼š window.screen.width;\nå±å¹•å¯ç”¨å·¥ä½œåŒºé«˜åº¦ï¼š window.screen.availHeight;\n```\n\n## yieldå‡½æ•°\n```javascript\n// ä¼ å…¥åŒ¿åå‡½æ•°\nfunction* fibonacci() {\n    let [prev, curr] = [0, 1];\n    while (true) {\n    [prev, curr] = [curr, prev + curr];\n    yield curr;\n    }\n}\n// å«æœ‰è¿­ä»£å™¨iterate\nfor (let n of fibonacci()) {\n    if (n >= 1000) {\n    break;\n    }\n    console.log(n);\n}\n// 1 2 3 5 8 \n```\n\n### å¤åˆ¶æ·»åŠ ç‰ˆæƒç”³æ˜\n```javascript\nif (window.clipboardData) {\n    // IE\n    document.body.oncopy = function(){\n        event.returnValue = false;\n        var t=document.selection.createRange().text;\n        var s=\" åŸæ–‡é“¾æ¥ï¼š\"+location.href;\n        clipboardData.setData('Text',t+'\\r\\n'+s);\n    };\n} else {\n    function addLink(){\n        var body_element = document.getElementsByTagName('body')[0];\n        var selection;\n        selection = window.getSelection();\n        var pagelink = \" åŸæ–‡é“¾æ¥ï¼š\"+location.href;\n        var copytext = selection + pagelink;\n\n        var newdiv = document.createElement('div');\n        newdiv.style.position='absolute';\n        newdiv.style.left='-99999px';\n        body_element.appendChild(newdiv);\n        newdiv.innerHTML = copytext;\n        selection.selectAllChildren(newdiv);\n        window.setTimeout(function(){body_element.removeChild(newdiv);},0);\n    }\n    document.oncopy = addLink;\n}\n```\n\n## åŒ…ç‰ˆæœ¬å·\nä¸€ä¸ªåŒ…çš„ç‰ˆæœ¬å·åŸºæœ¬ç”±ä¸‰ä½æ•°å­—æ„æˆ x.x.x, å®ƒä»¬åˆ†åˆ«æ˜¯ä¸»ç‰ˆæœ¬å·, æ¬¡ç‰ˆæœ¬å·, ä¿®è®¢å·ã€‚\n\n- *: å‡çº§ä¸»ç‰ˆæœ¬å· + æ¬¡ç‰ˆæœ¬å· + ä¿®è®¢å·;\n- ^: å‡çº§æ¬¡ç‰ˆæœ¬å· + ä¿®è®¢å·;\n- ~: å‡çº§ä¿®è®¢å·;\n\nnpmä½¿ç”¨ a.b.c çš„ç‰ˆæœ¬å·æ¥ç®¡ç†å®‰è£…åŒ…ï¼Œaå¤§è¾¾ç‰ˆæœ¬å·ï¼Œæœ‰é‡å¤§apiæ”¹å˜ï¼Œä¸€èˆ¬ä¸å‘ä¸‹å…¼å®¹ï¼Œbä¸ºå°ç‰ˆæœ¬å·ï¼Œæ–°å¢åŠŸèƒ½ï¼Œå‘ä¸‹å…¼å®¹ï¼Œcä¸ºè¡¥ä¸å·ï¼Œé€šå¸¸ä¿®å¤ä¸€äº›bugã€‚\n\n## scriptæ ‡ç­¾å…³é”®å­—\n- defer å¹¶å‘ä¸‹è½½ é¡ºåºæ‰§è¡Œ æ¸²æŸ“å®Œå†æ‰§è¡Œ(å»¶è¿Ÿæ‰§è¡Œ)\n- async å¼‚æ­¥ä¸‹è½½ å¼‚æ­¥æ‰§è¡Œè°å…ˆä¸‹è½½å®Œ è°å…ˆæ‰§è¡Œ\n\n## é˜²æ­¢å¯¹è±¡ç¯¡æ”¹\n* Object.preventExtensions(obj): obj ä¸èƒ½æ·»åŠ å±æ€§\n* Object.seal(obj): obj ä¸èƒ½æ·»åŠ /åˆ é™¤å±æ€§\n* Object.freeze(obj): obj ä¸èƒ½æ·»åŠ /åˆ é™¤/ä¿®æ”¹å±æ€§\n\nObject.freezeå·¥ä½œæ–¹å¼ä¸Object.preventExtensionsç›¸åŒï¼Œå¹¶ä¸”å®ƒä½¿æ‰€æœ‰å¯¹è±¡çš„å±æ€§ä¸å¯å†™ä¸”ä¸å¯é…ç½®ã€‚ å”¯ä¸€çš„ç¼ºç‚¹æ˜¯`Object.freeze`ä»…é€‚ç”¨äºå¯¹è±¡çš„ç¬¬ä¸€çº§ï¼šåµŒå¥—å¯¹è±¡ä¸å—æ“ä½œçš„å½±å“ã€‚\n\n## module.exportså’Œexports\nmodule.exportsæ‰æ˜¯çœŸæ­£çš„æ¥å£ï¼Œexportsåªä¸è¿‡æ˜¯å®ƒçš„ä¸€ä¸ªè¾…åŠ©å·¥å…·ã€‚ã€€æœ€ç»ˆè¿”å›ç»™è°ƒç”¨çš„æ˜¯module.exportsè€Œä¸æ˜¯exportsã€‚\næ‰€æœ‰çš„exportsæ”¶é›†åˆ°çš„å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½èµ‹å€¼ç»™äº†module.exportsã€‚å½“ç„¶ï¼Œè¿™æœ‰ä¸ªå‰æï¼Œå°±æ˜¯module.exportsæœ¬èº«ä¸å…·å¤‡ä»»ä½•å±æ€§å’Œæ–¹æ³•ã€‚\n\n1. æœ€å¥½åˆ†åˆ«å®šä¹‰module.exportså’Œexports\n\n2. å»ºè®®å¯¼å‡ºå¯¹è±¡ç”¨module.exports,å¯¼å‡ºå¤šä¸ªæ–¹æ³•å’Œå˜é‡ç”¨exports\n\n## metaè‡ªåŠ¨è·³è½¬\n```javascript\n<meta http-equiv=\"Refresh\" content=\"1; url=http://www.baidu.com\"/>\n```\n\n## å‰ç«¯ç”Ÿæˆæ–‡ä»¶å¹¶ä¸‹è½½\nBlobå¯¹è±¡ç®€è¦ä»‹ç»\n\nBlob å¯¹è±¡è¡¨ç¤ºä¸€ä¸ªä¸å¯å˜ã€åŸå§‹æ•°æ®çš„ç±»æ–‡ä»¶å¯¹è±¡ã€‚Blob è¡¨ç¤ºçš„ä¸ä¸€å®šæ˜¯JavaScriptåŸç”Ÿæ ¼å¼çš„æ•°æ®ã€‚File æ¥å£åŸºäºBlobï¼Œç»§æ‰¿äº† Blob çš„åŠŸèƒ½å¹¶å°†å…¶æ‰©å±•ä½¿å…¶æ”¯æŒç”¨æˆ·ç³»ç»Ÿä¸Šçš„æ–‡ä»¶ã€‚ç”ŸæˆBlobå¯¹è±¡æœ‰ä¸¤ç§æ–¹æ³•ï¼šä¸€ç§æ˜¯ä½¿ç”¨Blobæ„é€ å‡½æ•°ï¼Œå¦ä¸€ç§æ˜¯å¯¹ç°æœ‰çš„Blobå¯¹è±¡ä½¿ç”¨sliceæ–¹æ³•åˆ‡å‡ºä¸€éƒ¨åˆ†ã€‚\n> const aBlob = new Blob( array, options );\nå‚æ•°è¯´æ˜\n\n- array æ˜¯ä¸€ä¸ªç”±ArrayBuffer, ArrayBufferView, Blob, DOMString ç­‰å¯¹è±¡æ„æˆçš„ Array ï¼Œæˆ–è€…å…¶ä»–ç±»ä¼¼å¯¹è±¡çš„æ··åˆä½“ï¼Œå®ƒå°†ä¼šè¢«æ”¾è¿› Blobã€‚DOMStringsä¼šè¢«ç¼–ç ä¸ºUTF-8ã€‚\n- options æ˜¯ä¸€ä¸ªå¯é€‰çš„BlobPropertyBagå­—å…¸ï¼Œå®ƒå¯èƒ½ä¼šæŒ‡å®šå¦‚ä¸‹ä¸¤ä¸ªå±æ€§ï¼š\ntypeï¼Œé»˜è®¤å€¼ä¸º â€œâ€ï¼Œå®ƒä»£è¡¨äº†å°†ä¼šè¢«æ”¾å…¥åˆ°blobä¸­çš„æ•°ç»„å†…å®¹çš„MIMEç±»å‹ã€‚\nendingsï¼Œé»˜è®¤å€¼ä¸ºâ€transparentâ€ï¼Œç”¨äºæŒ‡å®šåŒ…å«è¡Œç»“æŸç¬¦\\nçš„å­—ç¬¦ä¸²å¦‚ä½•è¢«å†™å…¥ã€‚ å®ƒæ˜¯ä»¥ä¸‹ä¸¤ä¸ªå€¼ä¸­çš„ä¸€ä¸ªï¼š â€œnativeâ€ï¼Œä»£è¡¨è¡Œç»“æŸç¬¦ä¼šè¢«æ›´æ”¹ä¸ºé€‚åˆå®¿ä¸»æ“ä½œç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿçš„æ¢è¡Œç¬¦ï¼Œæˆ–è€… â€œtransparentâ€ï¼Œä»£è¡¨ä¼šä¿æŒblobä¸­ä¿å­˜çš„ç»“æŸç¬¦ä¸å˜\n\n```javascript\n// const debug = {hello: \"world\"};\n// const blob = new Blob([JSON.stringify(debug, null, 2)],{type : 'application/json'});\nfunction createAndDownloadFile(fileName, filePath) {\n    const aTag = document.createElement('a');\n    const blob = new Blob([filePath]);\n    aTag.download = `${fileName}.json`;\n    aTag.style.display = \"none\";\n    aTag.href = URL.createObjectURL(blob);\n    document.body.appendChild(aTag);\n    aTag.click();\n    document.body.removeChild(aTag)\n    URL.revokeObjectURL(blob);\n}\n```\n\n## é˜²æ­¢frameåµŒå¥—\n```javascript\nif(top != self){\n    location.href = â€about:blankâ€;\n}\n```\n\n## å–åè¿ç®—ç®€åŒ–indexOfåˆ¤æ–­\n```javascript\nif(~[1,2,3].indexOf(1)){\n    // å­˜åœ¨\n}else{\n    // ä¸å­˜åœ¨\n}\n[(1,2,3)] // 3\n```\n\n## å·²çŸ¥å¹´æœˆï¼Œæ±‚å½“æœˆå¤šå°‘å¤©\n- å…ˆåˆ¤æ–­è¯¥å¹´ä»½æ˜¯å¦æ˜¯é—°å¹´ï¼Œæ¥å¤„ç† 2 æœˆä»½æƒ…å†µï¼Œé—°å¹´ 2 æœˆå…± 29 å¤©ï¼Œéé—°å¹´ 2 æœˆå…± 28 å¤©\n- å†åˆ¤æ–­å…¶ä»–æœˆä»½ï¼Œå¦‚ 1 æœˆå…± 31 å¤©ï¼Œ4 æœˆå…± 30 å¤©\n\n**æ›´ç®€ä¾¿çš„æ–¹æ³•**\n```javascript\n// Date API å¤„ç†æ—¥æœŸæº¢å‡ºæ—¶ï¼Œä¼šè‡ªåŠ¨å¾€åæ¨å»¶å“åº”æ—¶é—´\nfunction getMonthCountDay (year, month) {\n  return 32 - new Date(year, month-1, 32).getDate();\n  // 32 - (32-å½“æœˆå¤©æ•°) = å½“æœˆå¤©æ•°\n}\n// better\nfunction getMonthCountDay (year, month) {\n  return new Date(year, month , 0).getDate();\n}\n```\n\n## æ—¥æœŸæ ¼å¼è½¬åŒ– 2019/3/19 => 2019-3-19\n1. æ­£åˆ™\n```js\nlet date = new Date()\nlet dateStr = date.toLocaleDateString().replace(/\\//g,'-')\n```\n\n2. æ•°ç»„è®¡ç®—\n```js\nlet date = new Date()\nlet arr = date.toLocaleDateString().split('/')\narr = arr.map((item) => {\nreturn parseInt(item) < 10 ? '0' + item : item\n})\nlet dateStr = arr.join('-')\n```\n\n## æ±‚æ•°å€¼çš„næ¬¡å¹‚\n```js\nMath.pow(2,10); //1024\n2**10 // 1024 es7\n2<<9 //1024\n```\n\n## åˆ†å·çš„é‡è¦æ€§\n```js\nconst luke = {}\nconst leia = {}\n[luke, leia].forEach(jedi => jedi.father = 'vader');\n\nfunction foo() {\n  return\n    'search your feelings, you know it to be foo'\n} // undefined\n```\n\n## å‰ç«¯h5 downloadå±æ€§ä¸‹è½½æ–‡ä»¶(appendChildå…¼å®¹firefox)\n```js\nfunction downFile(content, filename) {\n    // åˆ›å»ºéšè—çš„å¯ä¸‹è½½é“¾æ¥\n    var eleLink = document.createElement('a');\n    eleLink.download = filename;\n    eleLink.style.display = 'none';\n    // å­—ç¬¦å†…å®¹è½¬å˜æˆblobåœ°å€\n    var blob = new Blob([content]);\n    eleLink.href = URL.createObjectURL(blob);\n    // è§¦å‘ç‚¹å‡»\n    document.body.appendChild(eleLink);\n    eleLink.click();\n    // ç„¶åç§»é™¤\n    document.body.removeChild(eleLink);\n};\n```\n\n## ç¦æ­¢æ»šåŠ¨æ¡æ»šåŠ¨\n```js\nvar keys = [37, 38, 39, 40];\n\nfunction preventDefault(e) {\n  e = e || window.event;\n  if (e.preventDefault)\n      e.preventDefault();\n  e.returnValue = false;  \n}\n\nfunction keydown(e) {\n    for (var i = keys.length; i--;) {\n        if (e.keyCode === keys[i]) {\n            preventDefault(e);\n            return;\n        }\n    }\n}\n\nfunction wheel(e) {\n  preventDefault(e);\n}\n\nfunction disable_scroll() {\n  if (window.addEventListener) {\n      window.addEventListener('DOMMouseScroll', wheel, false);\n  }\n  window.onmousewheel = document.onmousewheel = wheel;\n  document.onkeydown = keydown;\n}\n\nfunction enable_scroll() {\n    if (window.removeEventListener) {\n        window.removeEventListener('DOMMouseScroll', wheel, false);\n    }\n    window.onmousewheel = document.onmousewheel = document.onkeydown = null;  \n}\n```\n\n## mapç­‰éå†æ³¨æ„äº‹é¡¹\n```js\nvar it = []\nit.map((item)=>{\n    console.log(111111111111)\n})\n// å‹æ ¹å°±ä¸ä¼šæ‰§è¡Œ\n```\n\n## ç¬¦åˆå¯†ç å­¦è¦æ±‚çš„éšæœºå€¼\n```js\nfunction getRandomNumbers(min, max) {\n    var minValue = min || '';\n    var maxValue = max || '';\n    var cryptoObj = window.crypto || window.msCrypto;\n    var array = new Uint32Array(1);\n    cryptoObj && cryptoObj.getRandomValues(array);\n    var result = 0;\n    if (minValue || maxValue) {\n        if (!maxValue) {\n            minValue = 0;\n            maxValue = min;\n        }\n        result = parseInt(minValue, 10) + (array[0] % (parseInt(maxValue, 10) - parseInt(minValue, 10)));\n    } else {\n        result = array[0];\n    }\n    return result;\n}\n```\n\n## å­—ç¬¦ä¸²åè½¬\nå¦‚æœéœ€è¦æ”¯æŒUTF-16æˆ–å…¶ä»–å¤šå­—èŠ‚å­—ç¬¦çš„è§£å†³æ–¹æ¡ˆï¼Œè¯·æ³¨æ„æ­¤å‡½æ•°å°†ç»™å‡ºæ— æ•ˆçš„Unicodeå­—ç¬¦ä¸²æˆ–çœ‹èµ·æ¥å¾ˆæœ‰è¶£çš„æœ‰æ•ˆå­—ç¬¦ä¸²ã€‚[éœ€è¦æ³¨æ„](https://stackoverflow.com/questions/958908/how-do-you-reverse-a-string-in-place-in-javascript/16776621#16776621)\n\n![æœ‰æ„æ€çš„å›¾](http://cdn.mydearest.cn/blog/images/reverse.jpg)\n\n```js\nfunction reverse(str) {\n    return str.split('').reverse().join('');\n    // Array.from(str).reverse().join('')\n}\n\n// ä½¿ç”¨é€’å½’\nfunction reverseString(str) {\n  return (str === '') ? '' : reverseString(str.substr(1)) + str.charAt(0);\n}\n\nfunction reverse([h, ...t]) {\n    return h ? reverse(t) + h : '';\n}\n\nfunction reverse(str){\n    var s ='';\n    for (let i = str.length;i > 0; i--) {\n        s += str[i-1]; // charAt substring substr\n    }\n    return s;\n}\n```\n\n## delete varible\n```js\ndelete xxx // true\ndelete window //false\n```\n\n## jqueryæŒ‡å®šå…ƒç´ æ»šåŠ¨åˆ°è§†å›¾ä¸­é—´\n```js\nfunction scrollToViewCenter($element) {\n    if (!$element) {\n        return;\n    }\n    var winOffsetHeight = document.body.offsetHeight; // æµè§ˆå™¨çª—å£å¯è§†åŒºåŸŸé«˜åº¦\n    var eleOffsetTop = $element.offset().top;\n    var top = eleOffsetTop - (winOffsetHeight / 2);\n    window.scrollTo(0, top);\n}\n```\n\n## new Array()\n```js\nvar myArray = Array();\nmyArray['A'] = \"Athens\";\nmyArray['B'] = \"Berlin\";\nmyArray['0'] = 1;\n// length 1 åªç»Ÿè®¡æ•°å­—ç´¢å¼•\n// lengthèŒƒå›´ 0~2**32-1\n```\n\n## æ„é€ å‡½æ•°scope-safeæ¨¡å¼\n```js\nfunction Book(name){\n    console.log(1111,this)\n    if(!(this instanceof Book)){\n        return new Book(name);\n    }\n    this.name=name;\n}\nvar bookone = Book('harry-potter');\n\nfunction a(b){\n  alert(b);\n  function b(){\n    alert(b);\n  }\n  b();\n}\na();\n```\n\n## jqueryè®¾ç½®!important\n```js\n$(\"#container\").css(\"top\");\n$(\"#container\").css(\"top\",\"15px\");\n$(\"#container\").css(\"cssText\",\"overflow:auto !important;\")\n```\n\n## :empty é€‰æ‹©å™¨åŒºåˆ†æ ·å¼\n> :empty é€‰æ‹©å™¨åŒ¹é…æ²¡æœ‰å­å…ƒç´ ï¼ˆåŒ…æ‹¬æ–‡æœ¬èŠ‚ç‚¹ï¼‰çš„æ¯ä¸ªå…ƒç´ ã€‚\n\nè¿™é‡Œä¸¾ä¸ªå°çº¢ç‚¹çš„ä¾‹å­ï¼š\n![empty](http://cdn.mydearest.cn/blog/images/empty.png)\n\nå¦‚å›¾æ‰€ç¤ºï¼Œå°çº¢ç‚¹æœ‰å†…å®¹ä»¥åŠæ— å†…å®¹çš„æ ·å¼å·®å¼‚ï¼ŒæŒ‰ç…§å¸¸è§„çš„å¤„ç†æ–¹å¼ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ˜¯é€šè¿‡ç±»ååŒºåˆ†ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç®€å•é€šè¿‡:emptyé€‰æ‹©å™¨åŒºåˆ†å¼€ã€‚\n```html\n<div class=\"jd\"><i>3</i></div>\n```\n\n```css\n.jd i:empty {\n    // æ— å†…å®¹çš„å°çº¢ç‚¹æ ·å¼\n}\n.jd i:not(:empty) {\n    // æœ‰å†…å®¹çš„å°çº¢ç‚¹æ ·å¼\n}\n```\n\n## arr.reduce(callback[, initialValue])\n- reduceæ¥å—ä¸¤ä¸ªå‚æ•°, ä¸€ä¸ªå›è°ƒ, ä¸€ä¸ªåˆå§‹å€¼\n- å›è°ƒå‡½æ•°æ¥å—å››ä¸ªå‚æ•° previousValue, currentValue, currentIndex, array\n\n> ç¬¬ä¸€ä¸ªè¡¨è¾¾å¼ç­‰ä»·äº Math.pow(3, 2) => 9; Math.pow(9, 1) =>9\n\n> ç¬¬äºŒä¸ªè¡¨è¾¾å¼å¼‚å¸¸ Uncaught TypeError: Reduce of empty array with no initial value\n\n## å˜é‡æå‡\nåœ¨ JavaScriptä¸­ï¼Œ functions å’Œ variables ä¼šè¢«æå‡ã€‚å˜é‡æå‡æ˜¯JavaScriptå°†å£°æ˜ç§»è‡³ä½œç”¨åŸŸ scope (å…¨å±€åŸŸæˆ–è€…å½“å‰å‡½æ•°ä½œç”¨åŸŸ) é¡¶éƒ¨çš„è¡Œä¸ºã€‚\n```js\nvar name = 'World!';\n(function () {\n    if (typeof name === 'undefined') {\n        var name = 'Jack';\n        console.log('Goodbye ' + name);\n    } else {\n        console.log('Hello ' + name);\n    }\n})();\n// Goodbye Jack\n```\n\n## æœ€å¤§å®‰å…¨æ•° + 1å€¼æ²¡æœ‰å˜åŒ– ä¼šå¯¼è‡´å¾ªç¯\n```js\nvar END = Math.pow(2, 53);\nvar START = END - 100;\nvar count = 0;\nfor (var i = START; i <= END; i++) {\n    count++;\n}\nconsole.log(count); // å¾ªç¯\n```\n\n## ç¨€ç–æ•°ç»„\næ²¡æœ‰å†…å®¹çš„æ•°ç»„, array ä¸Šçš„æ“ä½œä¼šè·³è¿‡è¿™äº›æœªåˆå§‹åŒ–çš„â€™å‘â€™.\n```js\nvar ary = [0,1,2];\nary[10] = 10;\nary.filter(function(x) { return x === undefined;});\n// []\n\nvar ary = Array(3);\nary[0]=2\nary.map(function(elem) { return '1'; });\n// [\"1\", undefined Ã— 2]\n```\n\n## ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„å®äº‹: Array.prototype => []\n```js\t\nArray.isArray( Array.prototype )\n// true\n```\n\n## argumentsåœ¨es6æœ‰åˆå§‹å€¼æ—¶ä¸åŒ\n```js\nfunction sidEffecting(ary) {\n  ary[0] = ary[2];\n}\nfunction bar(a,b,c) {\n  c = 10\n  sidEffecting(arguments);\n  return a + b + c;\n}\nbar(1,1,1)\n// 10 + 1 + 10 = 21\n\nfunction sidEffecting(ary) {\n  ary[0] = ary[2];\n}\nfunction bar(a,b,c=3) {\n  c = 10\n  sidEffecting(arguments);\n  return a + b + c;\n}\nbar(1,1,1)\n// 1 + 1 + 10 = 12\n```\n\n## reverseè¿”å›è°ƒç”¨è€…\n```js\nvar x = [].reverse;\nx();\n// window\n```\n\n## Number.MIN_VALUE > 0\n```js\nNumber.MIN_VALUE > 0\n// 5e-324 true\n```\n\n## æŠ½è±¡ç›¸ç­‰\n```js\nvar a = [0];\nif ([0]) {\n  console.log(a == true);\n} else {\n  console.log(\"wut\");\n}\n// false\n```\n![equality](http://cdn.mydearest.cn/blog/images/equality.png)\n\n## éšå¼ç±»å‹è½¬æ¢\n```js\n-ã€*ã€/ã€% ï¼šä¸€å¾‹è½¬æ¢æˆæ•°å€¼åè®¡ç®—\n+ï¼š\n\næ•°å­— + å­—ç¬¦ä¸² = å­—ç¬¦ä¸²ï¼Œ è¿ç®—é¡ºåºæ˜¯ä»å·¦åˆ°å³\næ•°å­— + å¯¹è±¡ï¼Œ ä¼˜å…ˆè°ƒç”¨å¯¹è±¡çš„valueOf -> toString\næ•°å­— + boolean/null -> æ•°å­—\næ•°å­— + undefined -> NaN\n\n[1].toString() === '1'\n{}.toString() === '[object object]'\nNaN !== NaN ã€+undefined ä¸º NaN\n```\n\n```js\n[1 < 2 < 3, 3 < 2 < 1]\n\n// 1 < 2 => true < 3 => 1 < 3 true\n// 3 < 2 => false < 1 => 0 < 1 true\n// [true,true]\n\n2 == [[[2]]] // true\n```\n\n## number + .\n```js\n3.toString() // error (3).toString()\n3..toString() // '3'\n3...toString() // error\n```\n\n## automatic global\n```js\n(function(){\n  var x = y = 1;\n})();\nconsole.log(y); // 1\nconsole.log(x); // x is not defined\n```\n\n## regexp expression\n```js\nvar a = /123/,\n    b = /123/;\na == b\na === b\n// false false\n```\n\n## function name is readonly\n```js\nfunction foo() { }\nvar oldName = foo.name;\nfoo.name = \"bar\";\n[oldName, foo.name]\n// 'foo' 'foo'\n```\n\n## parseInt å‘\n```js\n\"1 2 3\".replace(/\\d/g, parseInt)\n// [1, 0], [2, 2], [3, 4]\n// \"1 NaN 3\"\n\nparseInt(3, 8) // 3\nparseInt(3, 2) // NaN\nparseInt(3, 0) // 3\n```\n\n## function prototype\n```js\nfunction f() {}\nvar parent = Object.getPrototypeOf(f);\nf.name // f\nparent.name // empty\ntypeof eval(f.name) // function\ntypeof eval(parent.name) //  error\n```\n\n## regexp translate\n```js\nvar lowerCaseOnly =  /^[a-z]+$/;\n[lowerCaseOnly.test(null), lowerCaseOnly.test()]\n// è½¬åŒ–æˆ'null' 'undefined'\n// true true\n```\n\n## [,,,].join(\", \")\n```js\n[,,,].join(\", \")\n// \", , \"\n```\n\n## function length\n```js\nvar a = Function.length,\n    b = new Function().length\na === b\n// 1 === 0 false\n```\n\n## Date equal\n```js\nvar a = Date(0);\nvar b = new Date(0);\nvar c = new Date();\n[a === b, b === c, a === c]\n// false false false\n```\n\n## function scope param\n```js\nfunction foo(a) {\n    var a;\n    return a;\n}\nfunction bar(a) {\n    var a = 'bye';\n    return a;\n}\n[foo('hello'), bar('hello')]\n// [\"hello\", \"bye\"]\n```\n\n## nodejs Eventæ¨¡å—çš„ç®€å•å®ç°\n```js\nfunction Event() {\n    this.on = function (eventName, callback) {\n        if (!this.handlers) {\n            this.handlers = {};\n        }\n        if (!this.handlers[eventName]){\n            this.handlers[eventName] = [];\n        }\n        this.handlers[eventName].push(callback);\n    }\n\n    this.emit = function (eventName, data) {\n        if (this.handlers[eventName]) {\n            this.handlers[eventName].forEach((item)=>{\n                item(data);\n            });\n        }\n    }\n    return this;\n}\n```\n\n## å®ç°è¶…é“¾æ¥æ˜¾ç¤ºAç½‘ç«™å®é™…è·³è½¬Bç½‘ç«™\n```html\n<a href=\"//www.tmall.com\" onclick=\"host='jd.com'\">tmall</a>\n```\n\n## nodejs æ¶ä½œå‰§ï¼šç»™ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªå« node_modules çš„ç”¨æˆ·ï¼Œç„¶å npm install å°±æ— æ³•ä½¿ç”¨äº†\n\n## æœ€ç®€å•çš„æ–¹å¼å®ç°`console.log(1)`è¿”å›0\n```js\nconsole = Math;\nconsole.log(1); // 0\n```\n\n## å¦‚ä½•å°†æ•´ä¸ªç½‘ç«™é¡µé¢å˜æˆé»‘ç™½è‰²?(ç°é˜¶)\nå¯¹äºä¸€äº›éœ€è¦æ‚¼å¿µçš„æ—¥å­ï¼Œå¾ˆå¤šäººä¹Ÿéƒ½æƒ³æŠŠè‡ªå·±çš„ç½‘ç«™å¼„æˆå…¨ç«™é»‘ç™½æ¥è¡¨ç¤ºè‡ªå·±çš„å“€æ‚¼ä¹‹æƒ…ã€‚è¿˜æœ‰å…¶ä»–ç‰¹æ®ŠåŸå› ï¼ˆæ¯”å¦‚å…¬ç¥­æ—¥ï¼‰å¯¹éƒ¨åˆ†äº‹ä»¶è¡¨ç¤ºå“€æ‚¼ï¼Œæ‰€ä»¥éœ€è¦æŠŠæ•´ä¸ªç½‘ç«™è®¾ç½®ä¸ºç°è‰²æˆ–è€…é»‘ç™½æ–¹æ ¼ã€‚\n\n```css\nhtml {\n-webkit-filter: grayscale(100%);\n-moz-filter: grayscale(100%);\n-ms-filter: grayscale(100%);\n-o-filter: grayscale(100%);\nfilter:progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);\n_filter:none;\n}\n```\nfilter æ˜¯æ»¤é•œçš„æ„æ€ï¼Œfilter:gray çš„æ„æ€å°±æ˜¯è¯´ç»™é¡µé¢åŠ ä¸Šä¸€ä¸ªç°åº¦çš„æ»¤é•œï¼Œæ‰€ä»¥ html é‡Œé¢çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šå˜æˆé»‘ç™½çš„äº†ã€‚\n![é»‘ç™½è‰²](http://cdn.mydearest.cn/blog/images/grayFilter.png)\n\n\n## é»‘å¹•æ•ˆæœ\n```css\n.heimu, .heimu a, a .heimu, .heimu a.new {\n    background-color: #252525;\n    color: #252525;\n    text-shadow: none;\n}\n.heimu:hover, .heimu:active,\n.heimu:hover .heimu, .heimu:active .heimu {\n    color: white !important;\n}\n.heimu:hover a, a:hover .heimu,\n.heimu:active a, a:active .heimu {\n    color: lightblue !important;\n}\n.heimu:hover .new, .heimu .new:hover, .new:hover .heimu,\n.heimu:active .new, .heimu .new:active, .new:active .heimu {\n    color: #BA0000 !important;\n}\n```\n<span class=\"heimu\">å¤ªå¯¹äº†å“¥ï¼Œå“¥å¤ªå¯¹</span>\n\n## å­—ç¬¦ä¸²å’Œbase64ç›¸äº’è½¬æ¢(ç¼–ç ã€è§£ç )\n```js\n// å­—ç¬¦ä¸²è½¬base64\nfunction encode(str){\n    // å¯¹å­—ç¬¦ä¸²è¿›è¡Œç¼–ç \n    var encode = encodeURI(str);\n    // å¯¹ç¼–ç çš„å­—ç¬¦ä¸²è½¬åŒ–base64\n    var base64 = btoa(encode);\n    return base64;\n}\n \n// base64è½¬å­—ç¬¦ä¸²\nfunction decode(base64){\n    // å¯¹base64è½¬ç¼–ç \n    var decode = atob(base64);\n    // ç¼–ç è½¬å­—ç¬¦ä¸²\n    var str = decodeURI(decode);\n    return str;\n}\n```\n\n```shell\necho test|base64 #åŠ å¯†\necho dGVzdAo= |base64 -d #è§£å¯†\n```\n\n## éšæœºåç§°\n```js\nfunction getRandomName() {\n    let number = getRandomNum(1, 9);\n    let hash = parseInt(\n        ((new Date().getTime() % 3839) + 256).toString(),\n        10\n    ).toString(16);\n    let randomName = 'prefix' + hash + number;\n    return randomName;\n}\n\nfunction getRandomNum(max, min) {\n    var range = max - min;\n    var rand = Math.random();\n    return min + Math.round(rand * range);\n}\n```\n\n## IDEAè¿æ¥Githubæ—¶å‡ºç°ï¼šFailed to connect to github.com port 443: Connection refusedçš„è§£å†³æ–¹æ³•\næœ¬åœ°hostsæ–‡ä»¶ä¸­é…ç½®ä¸æ­£ç¡®å¯¼è‡´çš„ã€‚\n\n```\ngit config --global http.proxy http://127.0.0.1:1080\n\ngit config --global https.proxy http://127.0.0.1:1080\n```\n\nä½†åˆ›å»ºå®Œä»“åº“å push ä¸ä¸Šå»ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å–æ¶ˆä»£ç†\n```\ngit config --global --unset http.proxy\n\ngit config --global --unset https.proxy\n```\n\n## counter \n\n[FlagCounter](https://flagcounter.com/)\n\n[ä¸è’œå­è®¿é—®ç»Ÿè®¡](http://busuanzi.ibruce.info)\n\n```html\n<script async src=\"https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js\"></script>\n\n<span id=\"busuanzi_container_site_pv\">\n    æ€»è®¿é—®æ¬¡æ•°:<span id=\"busuanzi_value_site_pv\"></span>\n</span>\n\n<span id=\"busuanzi_container_site_uv\">\n  è®¿é—®æ¬¡æ•°:<span id=\"busuanzi_value_site_uv\"></span>\n</span>\n```\n\n## i18nè¯­æ–™æ›¿æ¢\n```js\nfunction i18nReplace(s, o) {\n  if (!s || !o) {\n    return;\n  }\n  return s.replace\n    ? s.replace(/\\{\\s*([^\\|\\}]+?)\\s*(?:\\|([^\\}]*))?\\s*\\}/g, function(\n        match,\n        key\n      ) {\n        return o[key] !== undefined ? o[key] : match;\n      })\n    : s;\n}\n\ni18nReplace('123{0}å¼€å§‹äº†',{0:'å¥‡æ€ª'})\n// \"123å¥‡æ€ªå¼€å§‹äº†\"\n```\n\n## ä¸€è¡Œä»£ç å®ç°ç®€å•æ¨¡ç‰ˆå¼•æ“\n```js\nfunction template(tpl, data) {\n  return tpl.replace(/{{(.*?)}}/g, (match, key) => data[key.trim()]);\n}\n\n// ä½¿ç”¨ï¼š\ntemplate('æˆ‘æ˜¯{{name}}ï¼Œå¹´é¾„{{age}}ï¼Œæ€§åˆ«{{sex}}', {name: 'é™ˆå®‡', age: 25, sex: 'ç”·'}); \n// \"æˆ‘æ˜¯é™ˆå®‡ï¼Œå¹´é¾„25ï¼Œæ€§åˆ«ç”·\"\n```\n\n## å¿«é€Ÿç”ŸæˆåŒ…å«26ä¸ªå­—æ¯çš„æ•°ç»„\n```js\nArray.from({length: 26}, (_, i) => String.fromCharCode(65 + i));\n```\n\n## å•è¡Œæ–‡æœ¬çš„çœç•¥å·\n```css\n.single-ellipsis{\n  width: 500px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n```\n\n## å¤šè¡Œå…ƒç´ çš„æ–‡æœ¬çœç•¥å·\n```css\n.multiline-ellipsis {\n  display: -webkit-box;\n  word-break: break-all;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 4; // éœ€è¦æ˜¾ç¤ºçš„è¡Œæ•°\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n```\n\n## å¦‚ä½•å®ç°sleepæ•ˆæœ\n### while\n```js\nfunction sleep(ms) {\n    var start = Date.now(), expires = start + ms;\n    while(Date.now()<expires);\n    console.log('é†’äº†');\n}\n\nsleep(2000);\n```\n\n### promise\n```js\nfunction sleep(ms) {\n    return new Promise((resolve,reject)=>{\n        setTimeout(resolve,ms);\n    });\n}\n\nsleep(2000).then(()=>{\n    console.log('é†’äº†');\n});\n```\n\n### generate\n```js\nfunction* sleep(ms){\n   yield new Promise(function(resolve,reject){\n             setTimeout(resolve,ms);\n        })  \n}\nsleep(500).next().value.then(function(){console.log(111)})\n```\n\n### async/await\n```js\nfunction sleep(ms){\n  return new Promise((resolve)=>setTimeout(resolve,ms));\n}\nasync function test(){\n  var temple=await sleep(1000);\n  console.log(1111)\n  return temple\n}\ntest();\n//å»¶è¿Ÿ1000msè¾“å‡ºäº†1111\n```\n\n## å®ç°ä¸€äº›ä¸»æµæ¡†æ¶çš„å¾ªç¯æ¸²æŸ“\n### é—®é¢˜\n```js\nvar items = [\n  { name: 'item1' },\n  { name: 'item2' }\n];\nvar str = '<div ali-for=\"item in items\">{{item.name}}<div>';\n\n// å¯¹åº”ç”Ÿæˆçš„dom  \nParseDom(str);\n// <div>item1</div>  \n// <div>item2</div>  \n```\n\n```js\nvar items = [\n  { name: 'item1' },\n  { name: 'item2' }\n];\n\n// ***********\nconst s = {}\ns.items = items\nfunction ParseDom(str) {\n\t// å€ŸåŠ©domå­èŠ‚ç‚¹ä½¿ç”¨domæ–¹æ³•\n\tconst mid = document.createElement('div')\n\tmid.innerHTML = str\n\tconst { children } = mid\n\tlet res = ''\n\t// éå†å­èŠ‚ç‚¹\n\t;[...children].forEach(c => {\n\t\t// æ‰¾å±æ€§èŠ‚ç‚¹\n\t\tconst attrs = [...c.attributes]\n\t\tconst targetAttr = attrs.find(x => x.name === 'ali-for');\n\t\tconst nodename = c.nodeName.toLocaleLowerCase();\n\t\t// å±æ€§å…¨éƒ¨å†™è¿›å»\n\t\tconst attrsStr = attrs.reduce((r, c) => {\n\t\t\tif (c.name !== 'ali-for') {\n\t\t\t\tr += ` ${c.name}=\"${c.value}\"`\n\t\t\t}\n\t\t\treturn r\n\t\t}, '')\n\t\tif (!targetAttr) {\n\t\t\t// æ²¡æœ‰å¾ªç¯æ¸²æŸ“æ ‡è®°\n\t\t\tres += `<${nodename}${attrsStr}>${c.innerHTML}</${nodename}>`\n\t\t\treturn\n\t\t}\n\t\t// å¾ªç¯æ¸²æŸ“\n\t\tconst vfor = targetAttr.nodeValue\n\t\tconst o = vfor.split(' in ')[1]\n\t\tconst k = c.innerText.match(/\\{\\{(.*)\\}\\}/)[1].split('.')[1]\n\t\t;s[o].forEach(x => {\n\t\t\tres += `<${nodename}${attrsStr}>${x[k]}</${nodename}>`\n\t\t})\n\t})\n\treturn res\n}\n// ***********\n\nvar str = '<div ali-for=\"item in items\">{{item.name}}</div>';\n// å¯¹åº”ç”Ÿæˆçš„dom  \nParseDom(str);\n```\n\n## æ€è€ƒï¼šå¦‚ä½•å®ç° npm install ï¼Ÿ\n- å‡å¦‚è€æ¿ç»™ä½  ä¸€ä¸ª npm åŒ…çš„åˆ—è¡¨ ï¼Œè¦ä½ æ‰¾å‡ºè¿™äº› npm åŒ…çš„æ‰€æœ‰ä¾èµ–åŒ…åï¼Œç®€è¿°ä¸€ä¸‹å®ç°æ€è·¯\n\n- å¯¹åŒ…å’ŒåŒ…çš„ä¾èµ–åˆ—è¡¨è¿›è¡Œç¼“å­˜ -> A å’Œ B éƒ½ä¾èµ–äº† Cï¼Œä» A åˆ†æä¸€æ¬¡åï¼ŒB è¿˜éœ€è¦å†åˆ†æå—ï¼Ÿ\n\n- ä½¿ç”¨å¹¶å‘ï¼Œä½†è¦æ§åˆ¶å¹¶å‘é‡ -> ä¸€ä¸ªåŒ…ä¸€ä¸ªåŒ…çš„æŸ¥ä¼šä¸ä¼šå¤ªæ…¢ï¼Ÿè¯·æ±‚è¿™ä¹ˆé¢‘ç¹ npm ä¼šä¸ä¼šå°ä½ çš„ ip\n\n- æ‰¾ä¾èµ–çš„æ—¶å€™ä½¿ç”¨å¾ªç¯ï¼Œè€Œä¸æ˜¯é€’å½’ -> å¦‚æœä¸€ä¸ªåŒ…çš„ä¾èµ–éå¸¸éå¸¸å¤æ‚ï¼Œå†…å­˜çˆ†äº†æ€ä¹ˆåŠ\nå…·æœ‰å¤±è´¥é‡è¯•å’Œç¦»çº¿ç¼“å­˜ -> ä¸­é€”ç½‘ç»œæŒ‚æ‰æ€ä¹ˆå¤„ç†ï¼Ÿå¤±è´¥çš„ä¸€ç›´å¤±è´¥æ€ä¹ˆåŠï¼Ÿ\n\n\n## Githubæ— æ³•è®¿é—® hosts é…ç½®\n```shell\n# GitHub Start\n192.30.253.112 github.com\n192.30.253.118 gist.github.com\n151.101.112.133 assets-cdn.github.com\n151.101.184.133 raw.githubusercontent.com\n151.101.112.133 gist.githubusercontent.com\n151.101.112.133 avatars0.githubusercontent.com\n151.101.112.133 avatars1.githubusercontent.com\n151.101.184.133 avatars2.githubusercontent.com\n151.101.12.133 avatars3.githubusercontent.com\n151.101.12.133 avatars4.githubusercontent.com\n151.101.184.133 avatars5.githubusercontent.com\n151.101.184.133 avatars6.githubusercontent.com\n151.101.184.133 avatars7.githubusercontent.com\n151.101.12.133 avatars8.githubusercontent.com\n151.101.184.133 cloud.githubusercontent.com\n151.101.112.133 camo.githubusercontent.com\n# GitHub End\n```\nä¿®æ”¹æ–¹æ³•ï¼š\n- Windows:\nä¿®æ”¹æ–‡ä»¶ C:/Windows/system32/drivers/etc/hosts\n\n- Linuxç³»:\nä¿®æ”¹æ–‡ä»¶ /etc/hosts\n\n- Android:\nä¿®æ”¹æ–‡ä»¶ /system/etc/hosts ï¼ˆéœ€è¦Rootï¼‰\n\n## ä¿ç•™ä¸¤ä½å°æ•°\n1. toFixed()æ–¹æ³•\n```js\nvar num =2.446242342;  \nnum = num.toFixed(2); \nconsole.log(num); //2.45\n```\nè¯¦è§[toFixedæ–¹æ³•æ³¨æ„ç‚¹]('https://mydearest.cn/toFixed%E6%96%B9%E6%B3%95%E6%B3%A8%E6%84%8F%E7%82%B9.html')\n\n2. Math.floor()\n```js\nnum = Math.floor(num * 100) / 100;\nconsole.log(num); //2.44\n```\n\n3. å­—ç¬¦ä¸²åŒ¹é…\n```js\nnum = Number(num.toString().match(/^\\d+(?:\\.\\d{0,2})?/));\nconsole.log(num); //2.44\n```\n\n4. ä¿ç•™ä¸¤ä½å°æ•° æµ®ç‚¹æ•°å››èˆäº”å…¥ ä½æ•°ä¸å¤Ÿ ä¸è¡¥0\n```js\nfunction fomatFloat(src,pos){    \n    return Math.round(src*Math.pow(10, pos))/Math.pow(10, pos);    \n} \nconsole.log(fomatFloat(3.12645,2)); // 3.13\n```\n\n## H5 è¯­éŸ³åˆæˆ SpeechSynthesisUtterance API\n```js\nvar utterance = new SpeechSynthesisUtterance('cosyer');\nwindow.speechSynthesis.speak(utterance);\n```\n\n## instanceofæµ‹è¯•ç»ƒä¹ \n```js\nObject instanceof Function\nFunction instanceof Object\n\nObject instanceof Object\nFunction instanceof Function\n// true\n```\n\n## æ˜é‡‘å¤´åƒæ—‹è½¬\n```css\n#pic:hover {\n    transform: rotate(666turn);\n    transition-delay: 1s;\n    transition-property: all;\n    transition-duration: 59s;\n    transition-timing-function: cubic-bezier(.34,0,.84,1);\n}\n```\n1. transform: rotate(666turn); å¸¸è§çš„ç”¨æ¥æ—‹è½¬å…ƒç´ è§’åº¦çš„cssï¼Œè¿™é‡Œç”¨åˆ°çš„æ˜¯turnï¼Œ1turn = 360Â°\n2. transition-delayï¼š1s; è¿™ä¸ªå±æ€§çš„ä½œç”¨å°±æ˜¯æ•ˆæœæ‰§è¡Œå‰çš„ç­‰å¾…æ—¶é—´\n3. transition-property: all; è¿™ä¸ªå±æ€§æ˜¯æŒ‡æ˜æ•ˆæœå˜æ¢çš„ä½ç½®ï¼Œæ¯”å¦‚widthï¼Œheightç­‰ï¼Œallæ˜¯æ‰€æœ‰å±æ€§ã€‚\n4. transition-duration: 59s; è¿‡æ¸¡æ•ˆæœçš„æŒç»­æ—¶é—´ã€‚\n5. transition-timing-function: cubic-bezier(.34,0,.84,1); è¿‡æ¸¡æ•ˆæœçš„é€Ÿåº¦æ›²çº¿ å››ä¸ªå€¼çš„èŒƒå›´éƒ½æ˜¯0-1 ä»£è¡¨æ•´ä¸ªè¿‡ç¨‹ã€‚\n\n## æ—¶é—´è½´\n```html\n<div class=\"timeline-content\">\n  <div v-for='(item, index) in timeLine' :key='index' class=\"time-line\">\n    <div :class=\"`state-${item.state} state-icon`\"></div>\n    <div class=\"timeline-title\">{{item.title}}</div>\n  </div>\n</div>\n```\n\n```css\n/** æ—¶é—´è½´ */\n.timeline-content{\n  display: flex;\n  .time-line{\n    padding: 10px 10px 10px 20px;\n    position: relative;\n    &::before{\n      content: '';\n      height: 1px;\n      width: calc(100% - 34px);\n      background: #EBEBEB;\n      position: absolute;\n      left: 24px;\n      top: 0;\n    }\n  }\n  .state-icon{\n    width: 20px;\n    height: 20px;\n    position: absolute;\n    top: -12px;\n    left: 0;\n  }\n  .state-1{\n    background: url('https://static.daojia.com/assets/project/tosimple-pic/fen-zu-7-copy-6bei-fen_1589266208621.png') no-repeat;\n    background-size: cover;\n  }\n  .state-2{\n    background: url('https://static.daojia.com/assets/project/tosimple-pic/12_1589266226040.png') no-repeat;\n    background-size: cover;\n  }\n  .state-3{\n    background: url('https://static.daojia.com/assets/project/tosimple-pic/fen-zu-7-copy-3_1589266140087.png') no-repeat;\n    background-size: cover;\n  }\n}\n```\n\n## å¡åˆ¸æ•ˆæœ\n```css\n.coupon{\n  width: 300px;\n  height: 100px;\n  position: relative;\n  background: radial-gradient(circle at right bottom, transparent 10px, #ffffff 0) top right /50% 51px no-repeat,\n    radial-gradient(circle at left bottom, transparent 10px, #ffffff 0) top left / 50% 51px no-repeat,\n    radial-gradient(circle at right top, transparent 10px, #ffffff 0) bottom right / 50% 51px no-repeat,\n    radial-gradient(circle at left top, transparent 10px, #ffffff 0) bottom left / 50% 51px no-repeat;\n  filter: drop-shadow(2px 2px 2px rgba(0,0,0,.2));\n}\n```\n\n## cssç¦ç”¨é¼ æ ‡äº‹ä»¶\n```css\n.disabled {\n    pointer-events: none;\n    cursor: default;\n    opacity: 0.6;\n}\n```\n\n## cssç¦æ­¢ç”¨æˆ·é€‰æ‹©\n```css\nbody{\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n```\n\n## jqueryæ·»åŠ æ‰©å±•æ–¹æ³•\n```js\n$.fn.stringifyArray = function(array) {\n  return JSON.stringify(array)\n}\n```\n\n- jquery.extend ä¸ jquery.fn.extendçš„åŒºåˆ«ï¼Ÿ\n> jquery.extend ä¸ºjqueryç±»æ·»åŠ ç±»æ–¹æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºæ·»åŠ é™æ€æ–¹æ³•\n> æºç ä¸­jquery.fn = jquery.prototypeæ‰€ä»¥jquery.fn.extendæ‰©å±•ï¼Œæ‰€æœ‰jqueryå®ä¾‹éƒ½å¯ä»¥ç›´æ¥è°ƒç”¨ã€‚\n\n```js\n// å¤šä¸ªäº‹ä»¶åŒä¸€ä¸ªå‡½æ•°ï¼š\n$(\"div\").on(\"click mouseover\", function(){});\n// å¤šä¸ªäº‹ä»¶ä¸åŒå‡½æ•°\n$(\"div\").on({\n  click: function(){},\n  mouseover: function(){}\n});\n```\n\n## ä¸‡ç‰©è½¬æ¢(oï¾Ÿâ–½ï¾Ÿ)o  \n```js\n'vue'.split('').sort().join('') // euv\n\n'node'.split('').sort().join('') // deno\n```\n\n## require.contextå®ç°è‡ªåŠ¨åŒ–å¯¼å…¥\nä¸€ä¸ªwebpackçš„api,é€šè¿‡æ‰§è¡Œrequire.contextå‡½æ•°è·å–ä¸€ä¸ªç‰¹å®šçš„ä¸Šä¸‹æ–‡,ä¸»è¦ç”¨æ¥å®ç°è‡ªåŠ¨åŒ–å¯¼å…¥æ¨¡å—,åœ¨å‰ç«¯å·¥ç¨‹ä¸­,å¦‚æœé‡åˆ°ä»ä¸€ä¸ªæ–‡ä»¶å¤¹å¼•å…¥å¾ˆå¤šæ¨¡å—çš„æƒ…å†µ,å¯ä»¥ä½¿ç”¨è¿™ä¸ªapi,å®ƒä¼šéå†æ–‡ä»¶å¤¹ä¸­çš„æŒ‡å®šæ–‡ä»¶,ç„¶åè‡ªåŠ¨å¯¼å…¥,ä½¿å¾—ä¸éœ€è¦æ¯æ¬¡æ˜¾å¼çš„è°ƒç”¨importå¯¼å…¥æ¨¡å—\n\n\nrequire.contextå‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°\n\n1. directory {String} -è¯»å–æ–‡ä»¶çš„è·¯å¾„\n\n2. useSubdirectories {Boolean} -æ˜¯å¦éå†æ–‡ä»¶çš„å­ç›®å½•\n\n3. regExp {RegExp} -åŒ¹é…æ–‡ä»¶çš„æ­£åˆ™\n\n```js\n// éå†å½“å‰ç›®å½•ä¸‹çš„testæ–‡ä»¶å¤¹çš„æ‰€æœ‰.test.jsç»“å°¾çš„æ–‡ä»¶,ä¸éå†å­ç›®å½•\nrequire.context('./test', false, /.test.js$/);\n\n(r => {\nr.keys().forEach(r);\n})(require.context('./', true, /reducer.js/));\n```\n\n## imgæ ‡ç­¾ä¹‹é—´çš„é—´è·é—®é¢˜åŸç†\nä¼—æ‰€å‘¨çŸ¥ï¼Œå¤šä¸ªimgå¹¶åˆ—æ˜¾ç¤ºæ—¶ä¼šæœ‰å‡ åƒç´ é—´è·ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯imgæ ‡ç­¾ç‰¹æœ‰çš„ç‰¹æ€§ã€‚\n\n### åŸç†\n> å®é™…ä¸Šï¼Œæ‰€æœ‰displayå±æ€§ä¸ºinline ï¼Œ inline-block çš„ç›’æ¨¡å‹éƒ½ä¼šæœ‰æ–‡å­—ç‰¹æ€§ï¼Œé—´è·å°±æ˜¯ç”±äºä¸¤ä¸ªæ ‡ç­¾ä¹‹é—´çš„ç©ºç™½å¼•èµ·çš„ã€‚\n\n### å¸¸ç”¨æ–¹æ¡ˆ\n- åˆ é™¤æ ‡ç­¾ä¹‹é—´çš„ç©ºæ ¼\n```html\n<img src=\"img/test.jpg\" alt=\"\"><img src=\"img/test.jpg\" alt=\"\"><img src=\"img/test.jpg\" alt=\"\">\n```\n\n- å°†çˆ¶çº§è®¾ç½®ä¸ºfont-size: 0pxï¼š\n```html\n<div style=\"font-size: 0px\">\n  <img src=\"img/test.jpg\" alt=\"\">\n  <img src=\"img/test.jpg\" alt=\"\">\n  <img src=\"img/test.jpg\" alt=\"\">\n  <img src=\"img/test.jpg\" alt=\"\">\n  <img src=\"img/test.jpg\" alt=\"\">\n</div>\n```\n\n-  å°†çˆ¶çº§è®¾ç½®ä¸ºä½¿ç”¨è´Ÿmarginå»é™¤è¾¹è·\n```css\nimg {\n    margin-left: -8px;\n}\n```\n\n- è®¾ç½®æµ®åŠ¨\n```css\nimg {\n    float: left;\n}\n```\n\n## prettier script\n```js\n\"jsformat\": \"prettier --write \\\"./**/*.js\\\"\"\n\n{\n\"editor.formatOnSave\": true,\n\"files.autoSave\": \"off\",\n\"git.ignoreMissingGitWarning\": true,\n\"git.enableSmartCommit\": true,\n\"fileheader.Author\": \"chenyu\",\n\"fileheader.LastModifiedBy\": \"chenyu\",\n\"powermode.enabled\": false, // å±æŒ¯\n\"git.autofetch\": true,\n// tsconfig.json æ–‡ä»¶ä¼šè¦†ç›–æ­¤è®¾ç½®ã€‚è¦æ±‚ TypeScript >=2.3.1ã€‚\n\"javascript.implicitProjectConfig.experimentalDecorators\": true,\n\"prettier.disableLanguages\": [\n\"vue\",\n\"markdown\"\n],\n\"vetur.format.defaultFormatter.html\": \"js-beautify-html\",\n\"javascript.updateImportsOnFileMove.enabled\": \"never\",\n\"files.associations\": {\n\".cjson\": \"jsonc\",\n\".wxss\": \"css\",\n\"*.wxs\": \"javascript\"\n},\n\"emmet.includeLanguages\": {\n\"wxml\": \"html\"\n},\n\"minapp-vscode.disableAutoConfig\": true\n}\n```\n\n## HTML - è¾“å…¥æ¡† Input æŒ‰å›è½¦ Enter è‡ªåŠ¨åˆ·æ–°é¡µé¢è§£å†³æ–¹æ¡ˆ\n\n### åŸå› \nåœ¨ä¸€ä¸ª form è¡¨å•ä¸­ï¼Œè‹¥åªæœ‰ä¸€ä¸ª inputï¼ŒæŒ‰å›è½¦é”®è¡¨å•ä¼šè‡ªåŠ¨æäº¤ï¼Œä½†æ˜¯å½“è¡¨å•ä¸­å­˜åœ¨å¤šä¸ª input æ—¶ï¼ŒæŒ‰å›è½¦é”®ä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œï¼Œè¿™æ˜¯ form è¡¨å•çš„ä¸€ä¸ªç‰¹æ€§ã€‚\n\n### è§£å†³\n1. ç›´æ¥å»é™¤æ‰ form è¡¨å•ï¼Œå½“ç„¶è¿™æ˜¯æœ€ç®€å•ç²—æš´çš„æ–¹æ³•ã€‚\n\n2. å¦‚æœä¸€ä¸ª input ä¼šè‡ªåŠ¨æäº¤ï¼Œé‚£ä¹ˆæ¯”è¾ƒå®¹æ˜“æƒ³åˆ°çš„æ˜¯å†åŠ ä¸€ä¸ª inputã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ è¿™é‡Œçš„ input ä¸èƒ½è®¾ç½® type ä¸º hiddenï¼Œè¿™æ ·ä¸€æ ·æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œform ä¸€æ ·ä¼šè®¤ä¸ºåªæœ‰ä¸€ä¸ª inputã€‚éœ€è¦è®¾ç½®æˆ <input type=\"text\" class=\"form-control\" style=\"display:none\"> ã€‚\n\n3. ç»™ input åŠ ä¸Šå›è½¦äº‹ä»¶ç›´æ¥ return falseã€‚åœ¨ input åŠ ä¸Š Î¿nkeydÎ¿wn=\"if(event.keyCode==13){return false;} ã€‚\n\n4. ç›´æ¥é˜»æ­¢ form è¡¨å•çš„æäº¤ï¼Œåœ¨ form è¡¨å•åŠ å…¥ Î¿nsubmit=\"return false;\"ã€‚\n\n\n## ä¸ºä»€ä¹ˆESæ¨¡å—æ¯”CommonJSæ›´å¥½?\n> ESæ¨¡å—æ˜¯å®˜æ–¹æ ‡å‡†ï¼Œä¹Ÿæ˜¯JavaScriptè¯­è¨€æ˜ç¡®çš„å‘å±•æ–¹å‘ï¼Œè€ŒCommonJSæ¨¡å—æ˜¯ä¸€ç§ç‰¹æ®Šçš„ä¼ ç»Ÿæ ¼å¼ï¼Œåœ¨ESæ¨¡å—è¢«æå‡ºä¹‹å‰åšä¸ºæš‚æ—¶çš„è§£å†³æ–¹æ¡ˆã€‚ ESæ¨¡å—å…è®¸è¿›è¡Œé™æ€åˆ†æï¼Œä»è€Œå®ç°åƒ tree-shaking çš„ä¼˜åŒ–ï¼Œå¹¶æä¾›è¯¸å¦‚å¾ªç¯å¼•ç”¨å’ŒåŠ¨æ€ç»‘å®šç­‰é«˜çº§åŠŸèƒ½ã€‚\n\n## ä»€ä¹ˆæ˜¯ `tree-shaking`ï¼ˆæ ‘æ‘‡ï¼‰\nTree-shaking, ä¹Ÿè¢«ç§°ä¸º \"live code inclusion,\" é€šå¸¸ç”¨äºæ‰“åŒ…æ—¶ç§»é™¤jsä¸­æœªå¼•ç”¨çš„ä»£ç (dead-code)ï¼Œå®ƒä¾èµ–äºES6æ¨¡å—ç³»ç»Ÿä¸­çš„import å’Œ export çš„**é™æ€ç»“æ„ç‰¹æ€§**\n\n- è™½ç„¶ç”Ÿäº§æ¨¡å¼ä¸‹é»˜è®¤å¼€å¯ï¼Œä½†æ˜¯ç”±äºç»è¿‡babelç¼–è¯‘å…¨éƒ¨æ¨¡å—è¢«å°è£…æˆIIFE\n\n- IIFEå­˜åœ¨å‰¯ä½œç”¨æ— æ³•è¢«tree-shakingæ‰ï¼Œéœ€è¦é…ç½® { module: false } å’Œ sideEffects: false\n\n- rollupå’Œwebpackçš„shakingç¨‹åº¦ä¸åŒï¼Œä»¥ä¸€ä¸ªclassä¸ºä¾‹å­\n\n## scope hoisting\n> Scope hositing ä½œç”¨:æ˜¯å°†æ¨¡å—ä¹‹é—´çš„å…³ç³»è¿›è¡Œç»“æœæ¨æµ‹ï¼Œå¯ä»¥è®©webpackæ–‡ä»¶æ‰“åŒ…å‡ºæ¥çš„ä»£ç æ–‡ä»¶æ›´å°ã€è¿è¡Œçš„æ›´å¿«\nscope hositingå®ç°åŸç†:åˆ†æå‡ºæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå°½å¯èƒ½çš„æŠŠæ‰“æ•£çš„æ¨¡å—åˆå¹¶åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œä½†æ˜¯å‰ææ˜¯ä¸èƒ½é€ æˆä»£ç å†—ä½™ï¼Œ å› æ­¤åªæœ‰å“ªäº›è¢«å¼•ç”¨äº†ä¸€æ¬¡çš„æ¨¡å—å¯èƒ½è¢«åˆå¹¶\nç”±äºscope hositing éœ€è¦åˆ†æå‡ºæ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå› æ­¤æºç å¿…é¡»ä½¿ç”¨ES6æ¨¡å—åŒ–è¯­å¥ï¼Œä¸ç„¶å°±ä¸èƒ½ç”Ÿæ•ˆï¼ŒåŸå› å’Œ tree shakingä¸€æ ·ã€‚\n\n## webpackä¼˜åŒ–\n### productionæ¨¡å¼è‡ªå¸¦ä¼˜åŒ–\n- tree shaking\n- scope hoisting\n- ä»£ç å‹ç¼©æ··æ·†(UglifyJsPlugin)\n### cssä¼˜åŒ–\n- cssæå–åˆ°ç‹¬ç«‹æ–‡ä»¶(mini-css-extract-plugin)\n- postcssæ·»åŠ å‰ç¼€\n- csså‹ç¼©(optimize-css-assets-webpack-plugin)\n### jsä¼˜åŒ–\n- ä»£ç åˆ†ç¦»(code splitting)\n1. å…¥å£èµ·ç‚¹ï¼šä½¿ç”¨entryé…ç½®ï¼Œæ‰‹åŠ¨çš„åˆ†ç¦»ä»£ç ï¼ˆé…ç½®å¤šå…¥å£ï¼‰\n```js\nentry:{\n main: './src/main.js',\n other: './src/other.js'\n},\n```\n2. æ”¾ç½®é‡å¤ï¼šä½¿ç”¨ SplitChunksPlugin å»é‡å’Œåˆ†ç¦» chunkï¼ˆæŠ½å–å…¬å…±ä»£ç ï¼‰\n```js\noptimization:{\n  splitChunks:{\n    chunks: \"all\"\n  }\n}\n```\n3. åŠ¨æ€å¯¼å…¥ï¼šé€šè¿‡æ¨¡å—çš„å†…è”å‡½æ•°è°ƒç”¨æ¥åˆ†ç¦»ä»£ç ï¼ˆæ‡’åŠ è½½ï¼‰\nwebpack4é»˜è®¤æ˜¯å…è®¸importè¯­æ³•åŠ¨æ€å¯¼å…¥çš„ï¼Œä½†æ˜¯éœ€è¦babelçš„æ’ä»¶æ”¯æŒï¼Œæœ€æ–°ç‰ˆbabelçš„æ’ä»¶åŒ…ä¸º:@babel/plugin-syntax-dynamic-import,éœ€è¦æ³¨æ„åŠ¨æ€\nå¯¼å…¥æœ€å¤§çš„å¥½å¤„å°±æ˜¯å®ç°äº†æ‡’åŠ è½½ï¼Œç”¨åˆ°é‚£ä¸ªæ¨¡å—æ‰ä¼šåŠ è½½é‚£ä¸ªæ¨¡å—ï¼Œå¯ä»¥æé«˜SPAåº”ç”¨ç¨‹åºçš„é¦–å±åŠ è½½é€Ÿåº¦ï¼Œä¸‰å¤§æ¡†æ¶çš„è·¯ç”±æ‡’åŠ è½½åŸç†ä¸€æ ·ã€‚\n\n### noParse(ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´)\nåœ¨å¼•å…¥ä¸€äº›ç¬¬ä¸‰æ–¹æ¨¡å—æ—¶ï¼Œå¦‚jqç­‰ï¼Œæˆ‘ä»¬çŸ¥é“å…¶å†…éƒ¨è‚¯å®šä¸ä¼šä¾èµ–å…¶ä»–æ¨¡å—ï¼Œå› ä¸ºæˆ‘ä»¬ç”¨åˆ°çš„åªæ˜¯ä¸€ä¸ªå•ç‹¬çš„jsæˆ–è€…cssæ–‡ä»¶ï¼Œæ‰€ä»¥æ­¤æ—¶å¦‚æœwebpackå†å»è§£æä»–ä»¬çš„å†…éƒ¨ä¾èµ–å…³ç³»ï¼Œå…¶å®æ˜¯éå¸¸æµªè´¹æ—¶é—´çš„ï¼Œå°±éœ€è¦é˜»\næ­¢webpackæµªè´¹ç²¾åŠ›å»è§£æè¿™äº›æ˜çŸ¥é“æ²¡æœ‰ä¾èµ–çš„åº“ï¼Œå¯ä»¥åœ¨webpackçš„é…ç½®æ–‡ä»¶çš„moduleèŠ‚ç‚¹ä¸‹åŠ ä¸ŠnoParseï¼Œå¹¶é…ç½®æ­£åˆ™æ¥ç¡®å®šä¸éœ€è¦è§£æä¾èµ–å…³ç³»çš„æ¨¡å—\n```js\nmodule:{\n noParse: /jquery|bootstrap/  // jquery|bootstrap ä¹‹é—´ä¸èƒ½åŠ ç©ºæ ¼å˜æˆ jquery | bootstrapï¼Œ ä¼šæ— æ•ˆ\n}\n```\n- é€šè¿‡ include å’Œ exclude ç¼©å°å‘½ä¸­èŒƒå›´\n- ä¼˜åŒ– resolve.modules é…ç½®ï¼ŒæŒ‡æ˜å­˜æ”¾ç¬¬ä¸‰æ–¹æ¨¡å—çš„ç»å¯¹è·¯å¾„ï¼Œå‡å°‘å¯»æ‰¾æ—¶é—´ã€‚\n- ä¼˜åŒ– resolve.alias/extensionsé…ç½®\n\n### DLLPluginã€DllReferencePlugin(é¢„ç¼–è¯‘èµ„æºæ¨¡å—æé«˜æ‰“åŒ…é€Ÿåº¦)\nåœ¨å¼•å…¥ä¸€äº›ç¬¬ä¸‰æ–¹æ¨¡å—æ—¶ï¼Œä¾‹å¦‚Vueã€Reactç­‰ï¼Œè¿™äº›æ¡†æ¶çš„æ–‡ä»¶ä¸€èˆ¬éƒ½æ˜¯ä¸ä¼šä¿®æ”¹çš„ï¼Œè€Œæ¯æ¬¡æ‰“åŒ…éƒ½éœ€è¦å»è§£æä»–ä»¬ï¼Œä¹Ÿä¼šå½±å“æ‰“åŒ…é€Ÿåº¦ï¼Œå°±ç®—æ˜¯åšäº†æ‹†åˆ†ï¼Œä¹Ÿåªæ˜¯æé«˜äº†ä¸Šçº¿åçš„ç”¨æˆ·è®¿é—®é€Ÿåº¦ï¼Œå¹¶ä¸ä¼šæé«˜æ„å»ºé€Ÿåº¦ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦æé«˜æ„å»ºé€Ÿåº¦ï¼Œåº”è¯¥ä½¿ç”¨åŠ¨æ€é“¾æ¥åº“çš„æ–¹å¼ï¼Œç±»ä¼¼windowsçš„dllæ–‡ä»¶å€ŸåŠ©DLLPluginæ’ä»¶å®ç°å°†è¿™äº›æ¡†æ¶ä½œä¸ºä¸€ä¸ªä¸ªçš„åŠ¨æ€é“¾æ¥åº“ï¼Œåªæ„å»ºä¸€æ¬¡ï¼Œä»¥åçš„æ¯æ¬¡æ„å»ºéƒ½åªä¼šç”Ÿæˆè‡ªå·±çš„ä¸šåŠ¡ä»£ç ï¼Œå¯ä»¥å¾ˆå¥½çš„æé«˜æ„å»ºæ•ˆç‡ã€‚\n\n> å°†åº“å’Œé¡¹ç›®ä»£ç åˆ†ç¦»æ‰“åŒ…éœ€è¦ dll æ˜ å°„æ–‡ä»¶\n\nä¸»è¦æ€æƒ³åœ¨äºï¼Œå°†ä¸€äº›ä¸åšä¿®æ”¹çš„ä¾èµ–æ–‡ä»¶ï¼Œæå‰æ‰“åŒ…ï¼Œè¿™æ ·æˆ‘ä»¬å¼€å‘ä»£ç å‘å¸ƒçš„æ—¶å€™å°±ä¸éœ€è¦å†å¯¹è¿™äº›ä»£ç è¿›è¡Œæ‰“åŒ…ï¼Œä»è€ŒèŠ‚çœäº†æ‰“åŒ…æ—¶é—´ï¼Œä¸»è¦ä½¿ç”¨ä¸¤ä¸ªæ’ä»¶: DLLPluginå’ŒDLLReferencePlugin\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè‹¥æ˜¯ä½¿ç”¨çš„DLLPluginï¼ŒCleanWebpackPluginæ’ä»¶ä¼šå­˜åœ¨å†²çªï¼Œéœ€è¦ç§»é™¤CleanWebpackPluginæ’ä»¶\n\n### é…ç½®ç¼“å­˜ï¼ˆæé«˜æ‰“åŒ…é€Ÿåº¦ï¼Œæ’ä»¶è‡ªå¸¦ babel-loaderå¼€å¯ï¼Œä¸æ”¯æŒçš„å¯ä»¥ç”¨ cache-loaderï¼‰\n\n### ä½¿ç”¨ HappyPack å¼€å¯å¤šè¿›ç¨‹ Loader è½¬æ¢ï¼ˆwebpack4æ¨èthread-loaderï¼‰\n```js\nrules: [\n  {\n    test: /\\.js$/,\n    include: path.resolve(\"src\"),\n    use: [\n      \"thread-loader\",\n      // your expensive loader (e.g babel-loader)\n    ]\n  }\n]\n```\n\n```js\nrules: [\n  {\n    test: /.js$/,\n    use: 'happypack/loader',\n  }\n],\nplugins: [\n  new HappyPack({\n    loaders: [ 'babel-loader?presets[]=es2015' ]\n  })\n];\n```\n\n### ä½¿ç”¨ include æˆ– exclude åŠ å¿«æ–‡ä»¶æŸ¥æ‰¾é€Ÿåº¦\n\n### IgnorePlugin\nåœ¨å¼•å…¥ä¸€äº›ç¬¬ä¸‰æ–¹æ¨¡å—æ—¶ï¼Œä¾‹å¦‚momentJSã€dayJSï¼Œå…¶å†…éƒ¨ä¼šåši18nå¤„ç†ï¼Œæ‰€ä»¥ä¼šåŒ…å«å¾ˆå¤šè¯­è¨€åŒ…ï¼Œè€Œè¯­è¨€åŒ…æ‰“åŒ…æ—¶ä¼šæ¯”è¾ƒå ç”¨ç©ºé—´ï¼Œå¦‚æœé¡¹ç›®åªéœ€è¦ç”¨åˆ°ä¸­æ–‡æˆ–è€…å°‘æ•°è¯­è¨€ï¼Œå¯ä»¥å¿½ç•¥æ‰æ‰€æœ‰çš„è¯­è¨€åŒ…ï¼Œç„¶åæŒ‰éœ€å¼•\nå…¥è¯­è¨€åŒ…ï¼Œä»è€Œä½¿å¾—æ„å»ºæ•ˆç‡æ›´é«˜ï¼Œæ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶æ›´å°\n\n## åˆ†æä¼˜åŒ–\nåœ¨æ‰“åŒ…æ—¶ï¼Œåˆç†ä½¿ç”¨æ’ä»¶speed-measure-webpack-pluginå’Œwebpack-bundle-analyzerï¼Œå¯ä»¥å¯¹é¡¹ç›®æ„å»ºè¿‡ç¨‹ä¸­çš„æ¯ä¸ªloaderã€pluginç­‰è¿›è¡Œè€—æ—¶ç»Ÿè®¡ï¼Œå¹¶é’ˆå¯¹è€—æ—¶çš„æ“ä½œè¿›è¡Œä¼˜åŒ–ï¼Œæ‰“åŒ…ç»“æœå¯ä»¥è¿›è¡Œä½“ç§¯çš„å¤§\nå°çš„æ§åˆ¶å’Œä¼˜åŒ–ã€‚\n\n## windowsæ›´æ–°è®¡ç®—æœºç­–ç•¥\n```bash\ngpupdate /force\n```\n\n## æœ‰ä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸²ï¼Œå®ƒæ‰€ä»£è¡¨çš„æ•°å­—è¿œå¤§äºjsæ‰€èƒ½è¡¨ç¤ºçš„æœ€å¤§æ•°ï¼Œå¯èƒ½æœ‰ä¸¤ä¸‡ä½ï¼Œè¿™æ ·çš„æ•°å­—ä½ æ€ä¹ˆåˆ¤æ–­å®ƒèƒ½ä¸èƒ½è¢«6æ•´é™¤\n1. è°ƒæ¥å£æ”¾åˆ°åå°å¤„ç†\n2. æœ€åä¸€ä½è¢«2æ•´é™¤ && æ‰€æœ‰ä½åŠ èµ·æ¥è¢«3æ•´é™¤\n```js\nfunction isValid(str) {\n  const arr = str.split('')\n  return Number(arr[arr.length -1]) %2 === 0 && arr.reduce((total, num) => total + num, 0) % 3 === 0\n}\n```\n\n3. é«˜ä½åˆ¤æ–­\næœ€å¤§å®‰å…¨æ•° 2**53 -1 // 9007199254740991\nå› ä¸ºjsç”¨çš„æ˜¯IEEE754æ ‡å‡†ï¼Œå°æ•°æœ‰æ•ˆä½ä¸º52ä½ï¼ŒåŠ ä¸Šé»˜è®¤çš„1ä¸€å…±æ˜¯53ä½ï¼Œè¶…è¿‡è¿™ä¸ªå°±æ— æ³•ä¿æŒç²¾ç¡®äº†ã€‚\n```js\nfunction isValid(str) {\n  const arr = str.split('')\n  let temp = 0\n  for (let i of arr) {\n    temp = i * temp + parseInt(i , 10)\n    temp = temp % 6\n  }\n  if (temp === 0) {\n    return true\n  } else {\n    return false\n  }\n}\n```\n\n## ä»€ä¹ˆæ—¶å€™é€‚åˆä½¿ç”¨ Map è€Œä¸æ˜¯ Object\nã€ŒMapã€æ˜ å°„æ˜¯ä¸€ç§ç»å…¸çš„æ•°æ®ç»“æ„ç±»å‹ï¼Œå…¶ä¸­æ•°æ®ä»¥ ã€Œkey/valueã€ çš„é”®å€¼å¯¹å½¢å¼å­˜åœ¨\n||Map|Object|\n|:--|:--:|--:|\n|é»˜è®¤å€¼|é»˜è®¤ä¸åŒ…å«ä»»ä½•å€¼ï¼ŒåªåŒ…å«æ˜¾å¼æ’å…¥çš„é”®|ä¸€ä¸ª Object æœ‰ä¸€ä¸ªåŸå‹ï¼ŒåŸå‹ä¸Šçš„é”®åæœ‰å¯èƒ½å’Œè‡ªå·±å¯¹è±¡ä¸Šè®¾ç½®çš„é”®åå†²çª|\n|ç±»å‹|ä»»æ„|String æˆ– Symbol|\n|é•¿åº¦|é”®å€¼å¯¹ä¸ªæ•°é€šè¿‡ size å±æ€§è·å–|é”®å€¼å¯¹ä¸ªæ•°åªèƒ½æ‰‹åŠ¨è®¡ç®—|\n|æ€§èƒ½|é¢‘ç¹å¢åˆ é”®å€¼å¯¹çš„åœºæ™¯ä¸‹è¡¨ç°æ›´å¥½|é¢‘ç¹æ·»åŠ å’Œåˆ é™¤é”®å€¼å¯¹çš„åœºæ™¯ä¸‹æœªä½œå‡ºä¼˜åŒ–|\n\n>ã€ŒMapã€ æ˜¯å¯è¿­ä»£çš„ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œè¿­ä»£ï¼Œä¾‹å¦‚forEachå¾ªç¯æˆ–è€…for...of...å¾ªç¯\n\n### éå†Object\n```js\nfor(const key of Object.keys(object)) {\n  console.log(key);\n}\n// key1\n// key2\n// key3\n\nfor(const value of Object.values(object)) {\n  console.log(value);\n}\n// value1\n// value2\n// value3\n\nfor(const entry of Object.entries(object)) {\n  console.log(entry);\n}\n// [\"key1\", \"value1\"]\n// [\"key2\", \"value2\"]\n// [\"key3\", \"value3\"]\n\nfor(const [key,value] of Object.entries(object)) {\n  console.log(key,value);\n}\n//\"key1\", \"value1\"\n//\"key2\", \"value2\"\n//\"key3\", \"value3\"\n\n// for inéå†\nfor(const key in object) {\n  console.log(key);\n}\n// key1\n// key2\n// key3\n```\n\n## JSä¸­çš„å®¿ä¸»å¯¹è±¡ä¸åŸç”Ÿå¯¹è±¡æœ‰ä½•ä¸åŒï¼Ÿ\nå®¿ä¸»å¯¹è±¡:è¿™äº›æ˜¯è¿è¡Œç¯å¢ƒæä¾›çš„å¯¹è±¡ã€‚è¿™æ„å‘³ç€å®ƒä»¬åœ¨ä¸åŒçš„ç¯å¢ƒä¸‹æ˜¯ä¸åŒçš„ã€‚ä¾‹å¦‚ï¼Œæµè§ˆå™¨åŒ…å«åƒwindowsè¿™æ ·çš„å¯¹è±¡ï¼Œä½†æ˜¯Node.jsç¯å¢ƒæä¾›åƒNode Listè¿™æ ·çš„\nå¯¹è±¡ã€‚Â \n\nåŸç”Ÿå¯¹è±¡:è¿™äº›æ˜¯JSä¸­çš„å†…ç½®å¯¹è±¡ã€‚å®ƒä»¬ä¹Ÿè¢«ç§°ä¸ºå…¨å±€å¯¹è±¡ï¼Œå› ä¸ºå¦‚æœä½¿ç”¨JSï¼Œå†…ç½®å¯¹è±¡ä¸å—æ˜¯è¿è¡Œç¯å¢ƒå½±å“ã€‚\n\n## mavené…ç½®ç¯å¢ƒå˜é‡\n> pathé…ç½®éœ€è¦å…·ä½“çš„è·¯å¾„\n\n## ä¸ªäººä½¿ç”¨è§‰å¾—æœ€å¥½çš„wordè½¬pdfåœ¨çº¿ç½‘ç«™\n- https://www.addpdf.cn/word-to-pdf\n\n- http://www.ilovepdf.com/zh_cn\n\n- https://smallpdf.com/\n\n## knife4j å¢å¼ºswaggerçš„UI\næ­£åˆ™å°±æ˜¯æœ‰é™çš„çŠ¶æ€æœº\n\n## mysqlè¿ç§»postgresqlé—®é¢˜è®°å½•ï¼š\n\n1. jdbcè¿æ¥å­—ç¬¦ä¸²éœ€è¦æŒ‡å®šå½“å‰schema jdbc:postgresql://193.160.26.65:5432/engine?useUnicode=true&characterEncoding=utf-8&currentSchema=faker_vmware\n\n2. postgresqlåˆ—åæ˜¯åŒºåˆ†å¤§å°å†™çš„ï¼Œå¤§å†™çš„åˆ—åéœ€è¦åŠ ä¸ŠåŒå¼•å·\n\n3. mysqlæ²¡æœ‰boolæ•°æ®ç±»å‹ï¼Œç”¨çš„tinyint(1)ï¼Œsqlè¯­å¥ä¸­where flag = falseè¿ç§»æŠ¥é”™ï¼Œpgç”¨çš„int(2)\n\n4. ON DUPLICATE KEY UPDATE é‡å¤æ’å…¥çº¦æŸ => on conflict (id) do update set\n\n5. åœ¨pgä¸­çš„sqlï¼Œå•å¼•å·ç”¨æ¥æ ‡è¯†å®é™…çš„å€¼ï¼ŒåŒå¼•å·ç”¨æ¥æ ‡è¯†è¡¨åï¼ˆtable nameï¼‰æˆ–åˆ—åï¼ˆcolumn nameï¼‰ç­‰æ•°æ®åº“ä¸­å­˜åœ¨çš„å€¼\n\n## Typed Arrays \nä¸€ä¸ªTypedArray å¯¹è±¡æè¿°ä¸€ä¸ªåº•å±‚çš„äºŒè¿›åˆ¶æ•°æ®ç¼“å­˜åŒºçš„ä¸€ä¸ªç±»ä¼¼æ•°ç»„(array-like)è§†å›¾\n\n## markdown github stats\n- ![my github stats](https://github-readme-stats.vercel.app/api?username=cosyer&show_icons=true&hide_border=true&hide=contribs,prs)\n\n- ![ä¸»è¦ä½¿ç”¨è¯­è¨€](https://github-readme-stats.vercel.app/api/top-langs/?username=cosyer)\n\n## å¾®ä¿¡åˆ†äº« hash è·¯ç”±å¡«å‘è®°å½•\n```js\nencodeURIComponent(window.location.href.split('#')[0])\n```\n\n## simple-icons\n\n![github](https://cdn.jsdelivr.net/npm/simple-icons@3.1.0/icons/github.svg)\n\n![github](http://simpleicons.p2hp.com/icons/github.svg)\n\n## Promiseé¢˜ç›®\n```js\nPromise.resolve(1).then(2).then(Promise.resolve(3)).then(console.log)\n// 1 thençš„å‚æ•°ä¸ºå›è°ƒå‡½æ•° then(2)å°±æ–­æ‰äº† é“¾å¼è°ƒç”¨\n// å¯é€‰é“¾\na?.b?.c \n```\n\n## mockæ€»ç»“\n### json-server\nmockæ–‡ä»¶å¤¹é…ç½®db.json\n```js\n{\n  \"rankList\": []\n}\n// è®¿é—®localhost:port/api/rankList\n```\n\n## ç‚¹å‡»inputäº‹ä»¶è§¦å‘çš„é¡ºåº\n```js\nconst text = document.getElementById('text');\ntext.onclick = function (e) {\n  console.log('onclick')\n}\ntext.onfocus = function (e) {\n  console.log('onfocus')\n}\ntext.onmousedown = function (e) {\n  console.log('onmousedown')\n}\ntext.onmouseenter = function (e) {\n  console.log('onmouseenter')\n}\n// onmouseenter\n// onmousedown\n// onfocus\n// onclick\n```\n\n## è®¡ç®—é¡µé¢åœç•™æ—¶é—´\n1. websocketï¼Œå‰ç«¯å¼€ä¸ªé•¿è¿æ¥ï¼Œåå°ç»Ÿè®¡é•¿è¿æ¥æ—¶é—´ã€‚\n2. ajaxè½®è¯¢ï¼Œéš”å‡ ç§’å‘ä¸€ä¸ªæŸ¥è¯¢ï¼Œåå°è®°å½•ç¬¬ä¸€ä¸æœ€åä¸€ä¸ªæŸ¥è¯¢é—´éš”æ—¶é—´ã€‚\n3. å…³é—­çª—å£æˆ–è€…è·³è½¬çš„æ—¶å€™ä¼šè§¦å‘window.onbeforeunloadå‡½æ•°ï¼Œå¯ä»¥åœ¨è¯¥å‡½æ•°ä¸­åšå¤„ç†ï¼ˆæœ‰å…¼å®¹æ€§é—®é¢˜ï¼‰ï¼›ç»Ÿè®¡å®Œæ•°æ®è®°å½•åˆ°æœ¬åœ°cookiesä¸­ï¼Œä¸€æ®µæ—¶é—´åç»Ÿä¸€å‘é€\n\n## äºŒç»´ç å¦‚ä½•å·¥ä½œ\n1. pcç«¯éšæœºç”Ÿæˆä¸€ä¸ªå«æœ‰å”¯ä¸€uidçš„äºŒç»´ç ï¼Œå¹¶ä¸æœåŠ¡å™¨å»ºç«‹ä¸€ä¸ªé•¿è¿æ¥ï¼›\n2. æ‰‹æœºæ‰«æäºŒç»´ç ï¼Œè§£æå‡ºäºŒç»´ç ä¸­çš„uidï¼Œå¹¶æŠŠè¿™ä¸ªuidå’Œæ‰‹æœºç«¯çš„ç”¨æˆ·å¯†ç è¿›è¡Œç»‘å®šï¼Œä¸Šä¼ ç»™æœåŠ¡å™¨ï¼›\n3. æœåŠ¡å™¨è·å¾—å®¢æˆ·ç«¯ä¿¡æ¯ä¹‹åï¼Œpcç«¯çš„é•¿è¿æ¥è½®è¯¢æ“ä½œä¼šè·å¾—è¯¥æ¶ˆæ¯ï¼Œæ˜¾ç¤ºè¯¥è´¦å·çš„ä¿¡æ¯ï¼›\n4. pcç«¯ä¼šå†å¼€ä¸€ä¸ªé•¿è¿æ¥ä¸æ‰‹æœºç«¯ä¿æŒé€šä¿¡ï¼Œç­‰å¾…æ‰‹æœºç«¯ç¡®è®¤ç™»é™†åï¼Œè·å¾—æœåŠ¡å™¨æˆæƒçš„tokenï¼Œå°±å¯ä»¥åœ¨pcç«¯ç™»é™†è¿›è¡Œæ­£å¸¸é€šä¿¡äº†\n","tags":["çŸ¥è¯†"],"categories":["çŸ¥è¯†"]},{"title":"å¿«é€Ÿäº†è§£React 16æ–°ç‰¹æ€§","url":"%2Freact16.html","content":"\n## Error Boundary\n\nError Boundaryå¯ä»¥çœ‹ä½œæ˜¯ä¸€ç§ç‰¹æ®Šçš„Reactç»„ä»¶ï¼Œæ–°å¢äº†componentDidCatchè¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå®ƒå¯ä»¥æ•è·è‡ªèº«åŠå­æ ‘ä¸Šçš„é”™è¯¯å¹¶å¯¹é”™è¯¯åšä¼˜é›…å¤„ç†ï¼ŒåŒ…æ‹¬ä¸ŠæŠ¥é”™è¯¯æ—¥å¿—ã€å±•ç¤ºå‡ºé”™æç¤ºï¼Œè€Œä¸æ˜¯å¸è½½æ•´ä¸ªç»„ä»¶æ ‘ã€‚ï¼ˆæ³¨ï¼šå®ƒå¹¶ä¸èƒ½æ•è·runtimeæ‰€æœ‰çš„é”™è¯¯ï¼Œæ¯”å¦‚ç»„ä»¶å›è°ƒäº‹ä»¶é‡Œçš„é”™è¯¯ï¼Œå¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¼ ç»Ÿçš„try-catchè¯­å¥ï¼‰\n\n---\n<!-- more -->\n\n```javascript\n//æœ€ä½³å®è·µï¼šå°†ErrorBoundaryæŠ½è±¡ä¸ºä¸€ä¸ªå…¬ç”¨çš„ç»„ä»¶ç±»\n \nimport React, { Component } from 'react'\n \nexport default class ErrorBoundary extends Component {\n  constructor(props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n  componentDidCatch(err, info) {\n    this.setState({ hasError: true })\n    //sendErrorReport(err,info)\n  }\n  render(){\n    if(this.state.hasError){\n      return <div>Something went wrong!</div>\n    }\n    return this.props.children\n  }\n}\n```\n\n```javascript\n// ä½¿ç”¨æ–¹å¼ åŒ…è£¹å®¹æ˜“å‡ºé”™çš„ç»„ä»¶\nrender(){\n  return (\n    <div>\n      <ErrorBoundary>\n        <Profile user={this.state.user} />\n      </ErrorBoundary>\n      <button onClick={this.onClick}>Update</button>\n    </div>\n  )\n}\n```\n## renderæ–¹æ³•æ–°å¢è¿”å›ç±»å‹\nåœ¨React 16ä¸­ï¼Œrenderæ–¹æ³•æ”¯æŒç›´æ¥è¿”å›stringï¼Œnumberï¼Œbooleanï¼Œnullï¼Œportalï¼Œä»¥åŠfragments(å¸¦æœ‰keyå±æ€§çš„æ•°ç»„)ï¼Œè¿™å¯ä»¥åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‡å°‘é¡µé¢çš„DOMå±‚çº§ã€‚\n\n```javascript\n//string\nrender(){\n  return 'hello,world'\n}\n \n//number\nrender(){\n  return 12345\n}\n \n//boolean\nrender(){\n  return isTrue?true:false\n}\n \n//null\nrender(){\n  return null\n}\n \n//fragmentsï¼ŒæœªåŠ keyæ ‡è¯†ç¬¦ï¼Œæ§åˆ¶å°ä¼šå‡ºç°warning\nrender(){\n  return [\n    <div>hello</div>,\n    <span>world</span>,\n    <p>oh</p>\n  ]\n}\n```\nä»¥ä¸Šå„ç§ç±»å‹ç°åœ¨å‡å¯ä»¥ç›´æ¥åœ¨renderä¸­è¿”å›ï¼Œä¸éœ€è¦å†åœ¨å¤–å±‚åŒ…è£¹ä¸€å±‚å®¹å™¨å…ƒç´ ï¼Œä¸è¿‡åœ¨è¿”å›çš„æ•°ç»„ç±»å‹ä¸­ï¼Œéœ€è¦åœ¨æ¯ä¸ªå…ƒç´ ä¸ŠåŠ ä¸€ä¸ªå”¯ä¸€ä¸”ä¸å˜çš„keyå€¼ï¼Œå¦åˆ™æ§åˆ¶å°ä¼šæŠ¥ä¸€ä¸ªwarningã€‚\n\n## 16.2 å¢åŠ  Fragment ç»„ä»¶ï¼Œå…¶ä½œç”¨æ˜¯å°†ä¸€äº›å­å…ƒç´ æ·»åŠ åˆ° DOM tree ä¸Šä¸”ä¸éœ€è¦ä¸ºè¿™äº›å…ƒç´ æä¾›é¢å¤–çš„çˆ¶èŠ‚ç‚¹ï¼Œç›¸å½“äº render è¿”å›æ•°ç»„å…ƒç´ \n\n## å¢åŠ  React.memo() APIï¼Œå®ƒåªèƒ½ä½œç”¨åœ¨ç®€å•çš„å‡½æ•°ç»„ä»¶ä¸Šï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œå¯ä»¥è‡ªåŠ¨å¸®åŠ©ç»„ä»¶æ‰§è¡Œ\n\n## å¢åŠ  React.lazy() APIï¼Œå®ƒæä¾›äº†åŠ¨æ€ import ç»„ä»¶çš„èƒ½åŠ›ï¼Œå®ç°ä»£ç åˆ†å‰²\n\n## ä½¿ç”¨createPortalå°†ç»„ä»¶æ¸²æŸ“åˆ°å½“å‰ç»„ä»¶æ ‘ä¹‹å¤–\n\n## æ”¯æŒè‡ªå®šä¹‰DOMå±æ€§\nåœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒReactä¼šå¿½ç•¥æ— æ³•è¯†åˆ«çš„HTMLå’ŒSVGå±æ€§ï¼Œè‡ªå®šä¹‰å±æ€§åªèƒ½é€šè¿‡data-*å½¢å¼æ·»åŠ ï¼Œç°åœ¨å®ƒä¼šæŠŠè¿™äº›å±æ€§ç›´æ¥ä¼ é€’ç»™DOMï¼ˆè¿™ä¸ªæ”¹åŠ¨è®©Reactå¯ä»¥å»æ‰å±æ€§ç™½åå•ï¼Œä»è€Œå‡å°‘äº†æ–‡ä»¶å¤§å°ï¼‰ã€‚\n\n## setStateä¼ å…¥nullæ—¶ä¸ä¼šå†è§¦å‘æ›´æ–°\n\n## æ›´å¥½çš„æœåŠ¡å™¨ç«¯æ¸²æŸ“\nReact 16çš„SSRè¢«å®Œå…¨é‡å†™ï¼Œæ–°çš„å®ç°éå¸¸å¿«ï¼Œæ¥è¿‘3å€æ€§èƒ½äºReact 15ï¼Œç°åœ¨æä¾›ä¸€ç§æµæ¨¡å¼streamingï¼Œå¯ä»¥æ›´å¿«åœ°æŠŠæ¸²æŸ“çš„å­—èŠ‚å‘é€åˆ°å®¢æˆ·ç«¯ã€‚\n\n## æ–°çš„æ‰“åŒ…ç­–ç•¥\næ–°çš„æ‰“åŒ…ç­–ç•¥ä¸­å»æ‰äº†process.envæ£€æŸ¥ã€‚\nReact 16çš„ä½“ç§¯æ¯”ä¸Šä¸ªç‰ˆæœ¬å‡å°äº†32%ï¼ˆ30% post-gzipï¼‰ï¼Œæ–‡ä»¶å°ºå¯¸çš„å‡å°ä¸€éƒ¨åˆ†è¦å½’åŠŸäºæ‰“åŒ…æ–¹æ³•çš„æ”¹å˜ã€‚\n\n## React 16é‡‡ç”¨äº†æ–°çš„æ ¸å¿ƒæ¶æ„React Fiberã€‚å®˜æ–¹è§£é‡Šæ˜¯â€œReact Fiberæ˜¯å¯¹æ ¸å¿ƒç®—æ³•çš„ä¸€æ¬¡é‡æ–°å®ç°â€\n\n- æ—¶é—´åˆ‡ç‰‡\n\n- ä»»åŠ¡è°ƒåº¦\n","tags":["react"],"categories":["React"]},{"title":"React 16æ–°ç‰¹æ€§context api","url":"%2Fcontextapi.html","content":"\nReact 16.3å¸¦æ¥äº†æ­£å¼ç‰ˆçš„context APIã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹æœ‰å“ªäº›æ”¹å˜ï¼Œåœ¨é‚£äº›åœ°æ–¹å¯ä»¥å–ä»£reduxå§ï¼\n\n--- \n<!-- more -->\n\næˆ‘å½“å‰ä¾èµ–çš„ç‰ˆæœ¬\n\n```javascript\n\"dependencies\": {\n    \"react\": \"^16.4.0\",\n    \"react-dom\": \"^16.4.0\"\n}\n```\n## åˆ›å»ºcontextå®ä¾‹\n```javascript\n// åˆ›å»ºcontextå®ä¾‹\nconst ThemeContext = React.createContext({\n  background: 'red',\n  color: 'white'\n});\n\nconst {Provider,Consumer} = ThemeContext\n```\n\n## Provider ç»„ä»¶ \n**Providerç»„ä»¶ç”¨äºå°†contextæ•°æ®ä¼ ç»™è¯¥ç»„ä»¶æ ‘ä¸‹çš„æ‰€æœ‰ç»„ä»¶ valueå±æ€§æ˜¯contextçš„å†…å®¹ã€‚**\n\n```javascript\nclass App extends React.Component {\n  render() {\n    return (\n      <Provider value={{ text: 'hello react!' }}>\n        <Comp1 />\n        <Comp2 />\n      </Provider>\n    );\n  }\n}\n```\n## Consumer ç»„ä»¶\n**Consumeræ¶ˆè´¹Providerä¼ é€’çš„æ•°æ®**\n\n```javascript\n// å‡½æ•°å¼\nconst Comp1 = () => (\n  <Consumer>\n    {context => <p>{context.text}</p>}\n  </Consumer>\n);\n// ç±»\nclass Comp2 extends React.Component {\n  render() {\n    return (\n      <Consumer>\n        {context => <p>{context.text}</p>}\n      </Consumer>\n    );\n  }\n}\n```\nå¦‚æœä½ æ²¡æœ‰å°†Consumerä½œä¸ºProviderçš„å­ç»„ä»¶ï¼Œé‚£ä¹ˆConsumerå°†ä½¿ç”¨åˆ›å»ºcontextæ—¶çš„å‚æ•°ä½œä¸ºcontextã€‚","tags":["react"],"categories":["JS"]},{"title":"å¦‚ä½•ç†è§£JSé—­åŒ…","url":"%2Fclosure.html","content":"\n{% centerquote %} \nJavaScriptä¸­çš„å‡½æ•°è¿è¡Œåœ¨å®ƒä»¬è¢«å®šä¹‰çš„ä½œç”¨åŸŸé‡Œï¼Œè€Œä¸æ˜¯å®ƒä»¬è¢«æ‰§è¡Œçš„ä½œç”¨åŸŸé‡Œã€‚\n{% endcenterquote %} \n\nåœ¨JSä¸­å‡½æ•°ä½œä¸ºæ™®é€šå¯¹è±¡è¿›è¡Œä¼ é€’\n\n--- \n<!-- more -->\n## ä»€ä¹ˆæ˜¯é—­åŒ…?(å±äºä¸€ç§ç‰¹æ®Šçš„ä½œç”¨åŸŸï¼Œç§°ä¸º é™æ€ä½œç”¨åŸŸ)\nç®€å•æ¥è¯´ï¼Œé—­åŒ…æ˜¯æŒ‡å¯ä»¥è®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸå˜é‡çš„å‡½æ•°ï¼Œä¸€èˆ¬æ˜¯å®šä¹‰åœ¨å¤–å±‚å‡½æ•°ä¸­çš„å†…å±‚å‡½æ•°ã€‚(å‡½æ•°å’Œå£°æ˜è¯¥å‡½æ•°çš„è¯æ³•ç¯å¢ƒçš„ç»„åˆ)å­å‡½æ•°æ‰€åœ¨çš„çˆ¶å‡½æ•°çš„ä½œç”¨åŸŸä¸ä¼šè¢«é‡Šæ”¾ã€‚\n\n## ä¸ºä»€ä¹ˆéœ€è¦é—­åŒ…ï¼Ÿ\nä½¿ç”¨é—­åŒ…ä¸»è¦æ˜¯ä¸ºäº†è®¾è®¡ç§æœ‰çš„å˜é‡å’Œæ–¹æ³•ã€‚é—­åŒ…çš„ä¼˜ç‚¹å¯ä»¥é¿å…å…¨å±€å˜é‡çš„æ±¡æŸ“ï¼Œè®©å˜é‡å§‹ç»ˆä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œç¼ºç‚¹æ˜¯ä¼šå¸¸é©»å†…å­˜ï¼Œå¢å¤§å†…å­˜çš„ä½¿ç”¨\né‡ï¼Œä½¿ç”¨ä¸å½“ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚\n\n## ç‰¹ç‚¹\n1. å®šä¹‰å¤–å±‚å‡½æ•°ï¼Œå°è£…è¢«ä¿æŠ¤çš„å±€éƒ¨å˜é‡ã€‚ \n2. å®šä¹‰å†…å±‚å‡½æ•°ï¼Œæ‰§è¡Œå¯¹å¤–éƒ¨å‡½æ•°å˜é‡çš„æ“ä½œã€‚ \n3. å¤–å±‚å‡½æ•°è¿”å›å†…å±‚å‡½æ•°çš„å¯¹è±¡ï¼Œå¹¶ä¸”å¤–å±‚å‡½æ•°è¢«è°ƒç”¨ï¼Œç»“æœä¿å­˜åœ¨ä¸€ä¸ªå…¨å±€çš„å˜é‡ä¸­ã€‚\n\n## ç‰¹æ€§\n1. å‡½æ•°åµŒå¥—å‡½æ•°ï¼Œå†…å±‚å‡½æ•°è¢«è¿”å›ã€‚\n2. å‡½æ•°å†…éƒ¨å¯ä»¥å¼•ç”¨å¤–éƒ¨çš„å‚æ•°å’Œå˜é‡ï¼Œä»¥åŠå¤–éƒ¨å‡½æ•°èƒ½è®¿é—®çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°ã€‚ä½†æ˜¯ï¼Œå¤–éƒ¨å‡½æ•°å´ä¸èƒ½å¤Ÿè®¿é—®å®šä¹‰åœ¨å†…éƒ¨å‡½æ•°ä¸­çš„å˜é‡å’Œå‡½æ•°ã€‚\n3. å‚æ•°å’Œå˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ã€‚\n\n## å®ä¾‹\n```javascript\nvar add = (function () {\n    var counter = 0;\n    return function () {return counter += 1;}\n})();\nadd();\nadd();\nadd();\n// add()è°ƒç”¨è¿‡ååº”å½“é”€æ¯å…¶å˜é‡ï¼Œä½†å…¶å†…å±‚å‡½æ•°è¢«è¿”å›äº†ï¼Œå¹¶ä¸”è¿˜ä¿ç•™ç€å¯¹å˜é‡çš„å¼•ç”¨ï¼Œæ‰€ä»¥æ²¡æœ‰é”€æ¯è¿˜ä¿ç•™åœ¨å†…å­˜å½“ä¸­ã€‚\n```\n\n```javascript\nvar arr=['one','two','three']\nfor(var i =0;i<arr.length;i++){\nsetTimeout(function(){\n  console.log(i)\n},i*1000)\n}\n// æ‰“å°3æ¬¡3 æ‰§è¡ŒsetTimeoutæ—¶forå¾ªç¯å·²ç»ç»“æŸæ­¤æ—¶çš„içš„å€¼ä¸º3\n```\n\n```javascript\nvar arr=['one','two','three']\nfor(var i =0;i<arr.length;i++){\n// åŒ¿åé—­åŒ… å°é—­æ¯ä¸ªå˜é‡\n(function(index){\n  setTimeout(function(){\n  console.log(arr[index])\n},index*1000)\n})(i)\n} \n// one two three\n```\n\né¿å…ä½¿ç”¨è¿‡å¤šçš„é—­åŒ…ï¼Œå¯ä»¥ç”¨letå…³é”®è¯ï¼Œæ¯ä¸ªé—­åŒ…éƒ½ç»‘å®šäº†å—ä½œç”¨åŸŸçš„å˜é‡ï¼Œè¿™æ„å‘³ç€ä¸å†éœ€è¦é¢å¤–çš„é—­åŒ…ã€‚\n\n```javascript\nvar arr=['one','two','three']\nfor(let i =0;i<arr.length;i++){\nsetTimeout(function(){\n  console.log(arr[i])\n},i*1000)\n}\n```\n\n```javascript\n// setTimeout(code, milliseconds, param1, param2, ...)\n// setTimeout(function, milliseconds, param1, param2, ...)\nvar i = 0\nwhile (i++ < 3) {\n  setTimeout(console.log, 0, i)\n}\n// 1 2 3 è¿™ä¸ªä¹Ÿæ˜¯é—­åŒ…\n```\n\n## ç»å…¸é—®é¢˜\nå¤šä¸ªå­å‡½æ•°çš„[[scope]]éƒ½æ˜¯åŒæ—¶æŒ‡å‘çˆ¶çº§ï¼Œæ˜¯å®Œå…¨å…±äº«çš„ã€‚å› æ­¤å½“çˆ¶çº§çš„å˜é‡å¯¹è±¡è¢«ä¿®æ”¹æ—¶ï¼Œæ‰€æœ‰å­å‡½æ•°éƒ½å—åˆ°å½±å“ã€‚\n\nè§£å†³:\n- å˜é‡å¯ä»¥é€šè¿‡ å‡½æ•°å‚æ•°çš„å½¢å¼ ä¼ å…¥ï¼Œé¿å…ä½¿ç”¨é»˜è®¤çš„[[scope]]å‘ä¸ŠæŸ¥æ‰¾\n- ä½¿ç”¨setTimeoutåŒ…è£¹ï¼Œé€šè¿‡ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥\n- ä½¿ç”¨ å—çº§ä½œç”¨åŸŸï¼Œè®©å˜é‡æˆä¸ºè‡ªå·±ä¸Šä¸‹æ–‡çš„å±æ€§ï¼Œé¿å…å…±äº«\n","tags":["é—­åŒ…"],"categories":["JS"]},{"title":"ä½¿ç”¨ Async/Await è®©ä½ çš„ä»£ç æ›´ç®€æ´","url":"%2Fes7async.html","content":"\nAsync/Awaitæ˜¯ä¸€ç§å…è®¸æˆ‘ä»¬åƒæ„å»ºæ²¡æœ‰å›è°ƒå‡½æ•°çš„æ™®é€šå‡½æ•°ä¸€æ ·æ„å»ºPromiseçš„æ–°è¯­æ³•ã€‚ä»¥å¾€çš„å¼‚æ­¥æ–¹æ³•æ— å¤–ä¹å›è°ƒå‡½æ•°å’Œ`Promise`ã€‚ä½†æ˜¯Async/Awaitå»ºç«‹äº[Promise](https://mydearest.cn/createPromise.html)ä¹‹ä¸Šã€‚\n\n---\n<!-- more -->\n\n## Async/Awaitè¯­æ³•\n### asyncå…³é”®å­—(æ”¾ç½®åœ¨ä¸€ä¸ªå‡½æ•°å‰é¢)ã€‚\n\n```javascript\nasync function f() {\n    return 1\n    // return Promise.resolve(1)\n}\nf().then(value) // 1\n```\n\nasyncä¿®é¥°è¿‡çš„å‡½æ•°æ€»æ˜¯è¿”å›ä¸€ä¸ªpromiseï¼Œå¦‚æœä»£ç ä¸­æœ‰return <épromise>è¯­å¥ï¼ŒJavaScriptä¼šè‡ªåŠ¨æŠŠè¿”å›çš„è¿™ä¸ªvalueå€¼åŒ…è£…æˆpromiseçš„resolvedå€¼ã€‚\n### awaitå…³é”®å­—(åªèƒ½åœ¨asyncå‡½æ•°å†…éƒ¨ä½¿ç”¨)\nå…³é”®è¯awaitå¯ä»¥è®©JavaScriptè¿›è¡Œç­‰å¾…ï¼Œç›´åˆ°ä¸€ä¸ªpromiseæ‰§è¡Œå¹¶è¿”å›å®ƒçš„ç»“æœï¼ŒJavaScriptæ‰ä¼šç»§ç»­å¾€ä¸‹æ‰§è¡Œã€‚\n\n```javascript\nfunction timeout(ms) {\n    return new Promise((resolve) => {\n        setTimeout(resolve, ms);\n    });\n}\n\nasync function asyncPrint(value, ms) {\n    await timeout(ms);\n    console.log(value);\n}\n\nasyncPrint('hello world', 50);\n```\n\n### é”™è¯¯å¤„ç†(ä½¿ç”¨try-catchæ•è·)å¯ä»¥ç»™æ¯ä¸ª await åçš„ Promise å¢åŠ  catch æ–¹æ³•ï¼›ä¹Ÿå¯ä»¥å°† await çš„ä»£ç æ”¾åœ¨ try...catch ä¸­\n```javascript\nasync function f() {\n    try {\n        let response = await fetch('http://no-such-url')\n    } catch (err) {\n        alet(err) // TypeError: failed to fetch ä¹Ÿèƒ½æ•è·å¤šè¡Œè¯­å¥ ç±»ä¼¼é“¾å¼Promiseæœ€åçš„å•ä¸ªcatchå‡½æ•°\n    }\n}\nf()\n```\n\nå¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨try-catchï¼Œç„¶åasyncå‡½æ•°f()çš„è°ƒç”¨äº§ç”Ÿçš„promiseå˜æˆrejectçŠ¶æ€çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ .catchå»å¤„ç†å®ƒï¼š\n\n```javascript\nasync function f() {\n    let response = await fetch('http://no-such-url')\n}\n// f()å˜æˆäº†ä¸€ä¸ªrejectedçš„promise\nf().catch(alert) // TypeError: failed to fetch\n```\n\n```js\nasync function getData() {\n  try {\n    if (true) {\n      throw Error(\"Catch me if you can\");\n    }\n  } catch (err) {\n    console.log(err.message);\n  }\n}\ngetData()\n  .then(() => console.log(\"I will run no matter what!\"))\n  .catch(() => console.log(\"Catching err\"));\n```\nthrow æŠ›å‡ºçš„é”™è¯¯æ°¸è¿œä¸ä¼šè§¦å‘**getData()**çš„catchæ–¹æ³•ã€‚\n\n```js\nasync function getData() {\n  try {\n    if (true) {\n      return Promise.reject(\"Catch me if you can\");\n    }\n  } catch (err) {\n    console.log(err.message);\n  }\n}\n```\n\n### ç»“åˆPromise.all\nasync/awaitèƒ½å¤Ÿä¸Promise.allå‹å¥½çš„åä½œï¼Œå½“æˆ‘ä»¬éœ€è¦ç­‰å¾…å¤šä¸ªpromiseæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»–ä»¬åŒ…è£…åœ¨Promise.allä¸­ç„¶åä½¿ç”¨awaitï¼š\n\n```javascript\n// ç›´åˆ°æ•°ç»„å…¨éƒ¨è¿”å›ç»“æœ\nlet results = await Promise.all([\n   fetch(url1),\n   fetch(url2),\n   ...\n])\n```\n\n## ç®€å•å®ç°asyncå‡½æ•°\n```js\nfunction spawn(genF) {\n    return new Promise(function(resolve, reject) {\n        const gen = genF();\n        function step(nextF) {\n            let next;\n            try {\n                next = nextF();\n            } catch (e) {\n                return reject(e);\n            }\n            if (next.done) {\n                return resolve(next.value);\n            }\n            Promise.resolve(next.value).then(\n                function(v) {\n                    step(function() {\n                        return gen.next(v);\n                    });\n                },\n                function(e) {\n                    step(function() {\n                        return gen.throw(e);\n                    });\n                }\n            );\n        }\n        step(function() {\n            return gen.next(undefined);\n        });\n    });\n}\n```\n\n## Promises ç»„åˆï¼šPromise.allï¼ŒPromise.allSettledï¼Œ Promise.any\n- Promise API æä¾›äº†è®¸å¤šå°†Promiseç»„åˆåœ¨ä¸€èµ·çš„æ–¹æ³•ã€‚ å…¶ä¸­æœ€æœ‰ç”¨çš„æ˜¯Promise.allï¼Œå®ƒæ¥å—ä¸€ä¸ªPromisesæ•°ç»„å¹¶è¿”å›ä¸€ä¸ªPromiseã€‚ å¦‚æœå‚æ•°ä¸­ promise æœ‰ä¸€ä¸ªå¤±è´¥ï¼ˆrejectedï¼‰ï¼Œæ­¤å®ä¾‹å›è°ƒå¤±è´¥ï¼ˆrejectï¼‰ï¼Œå¤±è´¥åŸå› çš„æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥ promise çš„ç»“æœã€‚\n\n- Promise.race(iterable) æ–¹æ³•è¿”å›ä¸€ä¸ª promiseï¼Œä¸€æ—¦è¿­ä»£å™¨ä¸­çš„æŸä¸ªpromiseè§£å†³æˆ–æ‹’ç»ï¼Œè¿”å›çš„ promiseå°±ä¼šè§£å†³æˆ–æ‹’ç»ã€‚\n\n- è¾ƒæ–°ç‰ˆæœ¬çš„V8ä¹Ÿå°†å®ç°ä¸¤ä¸ªæ–°çš„ç»„åˆï¼šPromise.allSettledå’ŒPromise.anyã€‚ Promise.anyä»ç„¶å¤„äºææ¡ˆçš„æ—©æœŸé˜¶æ®µï¼šåœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œä»ç„¶æ²¡æœ‰æµè§ˆå™¨æ”¯æŒå®ƒã€‚\n\nPromise.anyå¯ä»¥è¡¨æ˜ä»»ä½•Promiseæ˜¯å¦fulfilledã€‚ ä¸ Promise.raceçš„åŒºåˆ«åœ¨äºPromise.anyä¸ä¼šæ‹’ç»å³ä½¿å…¶ä¸­ä¸€ä¸ªPromiseè¢«æ‹’ç»ã€‚\n\næ— è®ºå¦‚ä½•ï¼Œä¸¤è€…ä¸­æœ€æœ‰è¶£çš„æ˜¯ Promise.allSettledï¼Œå®ƒä¹Ÿæ˜¯ Promise æ•°ç»„ï¼Œä½†å¦‚æœå…¶ä¸­ä¸€ä¸ªPromiseæ‹’ç»ï¼Œå®ƒä¸ä¼šçŸ­è·¯ã€‚ å½“ä½ æƒ³è¦æ£€æŸ¥Promiseæ•°ç»„æ˜¯å¦å…¨éƒ¨å·²è§£å†³æ—¶ï¼Œå®ƒæ˜¯æœ‰ç”¨çš„ï¼Œæ— è®ºæœ€ç»ˆæ˜¯å¦æ‹’ç»ï¼Œå¯ä»¥æŠŠå®ƒæƒ³è±¡æˆPromise.all çš„åå¯¹è€…ã€‚\n\n## æ€»ç»“\n\néšç€å•é¡µJavaScript webç¨‹åºçš„å…´èµ·å’Œå¯¹NodeJSçš„å¹¿æ³›é‡‡ç”¨ï¼Œå¦‚ä½•ä¼˜é›…çš„å¤„ç†å¹¶å‘å¯¹äºJavaScriptå¼€å‘äººå‘˜æ¥è¯´æ¯”ä»»ä½•ä»¥å¾€çš„æ—¶å€™éƒ½æ˜¾å¾—æ›´ä¸ºé‡è¦ã€‚\n\nJSå¼•æ“æ˜¯å•çº¿ç¨‹çš„ï¼Œè¿™æ„å‘³ç€è¿è¡Œå‡½æ•°åªæœ‰ä¸€ä¸ªè°ƒç”¨å †æ ˆã€‚è¿™ä¸€é™åˆ¶æ˜¯JSå¼‚æ­¥æœ¬è´¨çš„åŸºç¡€:æ‰€æœ‰éœ€è¦æ—¶é—´çš„æ“ä½œéƒ½å¿…é¡»ç”±å¤–éƒ¨å®ä½“(ä¾‹å¦‚æµè§ˆå™¨)æˆ–å›è°ƒå‡½æ•°è´Ÿè´£ã€‚\n\n`Async/Await`ç¼“è§£äº†è®¸å¤šå› ä¸ºæ§åˆ¶æµé—®é¢˜è€Œå¯¼è‡´bugéåœ°çš„è¿™ä¸ªå›°æ‰°ç€JavaScriptä»£ç åº“æ•°åå¹´çš„é—®é¢˜ï¼Œå¹¶ä¸”å‡ ä¹å¯ä»¥ä¿è¯è®©ä»»ä½•å¼‚æ­¥ä»£ç å—å˜çš„æ›´ç²¾ç‚¼ï¼Œæ›´ç®€å•ï¼Œæ›´è‡ªä¿¡ã€‚","tags":["promise"],"categories":["JS"]},{"title":"ä» for å¾ªç¯å…¥æ‰‹ä¼˜åŒ–æ€§èƒ½","url":"%2Fforloop.html","content":"\nä»Šå¤©è¦è¯´çš„æ˜¯æœ€ç®€å•çš„ for å¾ªç¯ï¼Œä¸€ä¸ªç®€å•çš„ for å¾ªç¯çœ‹ä¼¼æ²¡æœ‰ä»»ä½•ä¼˜åŒ–çš„æ„ä¹‰ï¼Œä½†å®è´¨ä¸Šä¼˜åŒ–å‰åå·®è·æŒºå¤§çš„ï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿ\n\n---\n<!-- more -->\n\nä»æœ€ç®€å•çš„éå†æ•°ç»„è¯´èµ·ã€‚\n\n```javascript\n// å®šä¹‰ä¸€ä¸ªæ•°ç»„arrï¼ˆå‡è®¾æ˜¯ä»åå°è¿”å›çš„æ•°æ®ï¼‰\nlet i = 0;\nlet arr = [];\nwhile (i < 50) {\n    arr.push(i);\n    i++;\n}\n```\n\nå¦‚æœæˆ‘ä»¬æƒ³ä»æ•°ç»„ arr ä¸­å–å‡ºæ•°æ®ï¼Œå°±å¿…é¡»è¦è¿›è¡Œéå†ï¼Œæ™®éçš„åšæ³•æ˜¯ï¼š\n\n```javascript\nfor (let i = 0; i < arr.length; i++) {\n    // arr[i]\n}\n```\n\nä½†å…¶å®è¿™æ ·çš„å†™æ³•éå†æ˜¯æœ€æ…¢çš„ï¼Œä»–è¦ç»è¿‡ä¸¤æ¬¡è¿­ä»£ï¼Œç¬¬ä¸€æ¬¡æ˜¯ i çš„è¿­ä»£ï¼Œæ¯æ¬¡éƒ½è¦åˆ¤æ–­ i æ˜¯å¦å°äº arr.lengthï¼Œç¬¬äºŒæ¬¡æ˜¯ arr çš„è¿­ä»£ï¼Œæ¯æ¬¡å¾ªç¯ arr éƒ½ä¼šè°ƒç”¨åº•å±‚çš„è¿­ä»£å™¨ï¼Œå¯¹é•¿åº¦è¿›è¡Œè®¡ç®—ï¼Œè¿™æ ·å¾ªç¯çš„æ•ˆç‡éå¸¸ä½ï¼Œæ—¶é—´ç©ºé—´å¤æ‚åº¦ä¸º O[n^2]ã€‚\n\nä¸‹é¢è¿›è¡Œä¼˜åŒ–ï¼Œçœ‹çœ‹ä¸¤è€…åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼š\n\n```javascript\nfor (let i = 0, len = arr.length; i < len; i++) {\n    // arr[i]\n}\n```\n\nåŒºåˆ«å°±æ˜¯ï¼Œæ•´ä¸ªå¾ªç¯å½“ä¸­ï¼Œæˆ‘ä»¬é¢„å­˜äº† len æ¥ä¿å­˜æ•°ç»„çš„é•¿åº¦ï¼Œè¿™æ ·ä¸éœ€è¦æ¯æ¬¡å¾ªç¯éƒ½è°ƒç”¨åº•å±‚è¿­ä»£å™¨ï¼Œè°ƒç”¨ä¸€æ¬¡å³å¯ï¼Œè¿™æ ·çš„æ—¶é—´ç©ºé—´å¤æ‚åº¦ä¸º O[n+1]ã€‚\n\nä½†æ˜¯è¿™å¹¶ä¸æ˜¯æœ€å®Œç¾çš„ï¼Œå› ä¸ºä¼šå¤šäº†ä¸€æ¬¡è¿­ä»£æ“ä½œï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•è¿›è¡Œä¼˜åŒ–å‘¢ï¼Ÿ\n\n```javascript\nfor (let i = 0, item; item = arr[i++];) {\n    // item\n}\n```\nè¿™æ¬¡è¿­ä»£çš„æ—¶é—´ç©ºé—´å¤æ‚åº¦ä¸º O[n] ï¼Œå®Œç¾åšåˆ°äº†æ¯æ¬¡ä¸€è¿­ä»£æ²¡æœ‰é€šè¿‡é•¿åº¦è¿›è¡Œåˆ¤æ–­ï¼Œè€Œæ˜¯ç›´æ¥é€šè¿‡ä¸‹æ ‡è¿›è¡Œå–å€¼çš„æ–¹å¼æ˜ å°„åˆ°äº†å¾ªç¯ä½“å†…éƒ¨ã€‚\n\næœ€åç”¨5ä¸‡æ¡æ•°æ®è¿›è¡Œæµ‹è¯•å„ç§æ–¹å¼çš„å¾ªç¯æ—¶é—´ï¼š\n\n```javascript\n// å®šä¹‰ä¸€ä¸ªæ•°ç»„arrï¼ˆå‡è®¾æ˜¯ä»åå°è¿”å›çš„æ•°æ®ï¼‰\nlet index = 0;\nlet arr = [];\nwhile (index < 50000) {\n    arr.push(index);\n    index++;\n}\n\nconsole.time('one');\nfor (let i = 0; i < arr.length; i++) {\n\n}\nconsole.timeEnd('one');\n\nconsole.time('two');\nfor (let i = 0, len = arr.length; i < len; i++) {\n\n}\nconsole.timeEnd('two');\n\nconsole.time('three');\nfor (let i = 0, item; item = arr[i++];) {\n\n}\nconsole.timeEnd('three');\n\n// es6çš„æ•°ç»„éå†\nconsole.time('four');\nfor (let i of arr) {\n\n}\nconsole.timeEnd('four');\n// ä¼šè®¿é—®å¯æšä¸¾å±æ€§å’ŒåŸå‹çš„éå†ï¼Œæ•°ç»„ä¸æ¨èä½¿ç”¨\nconsole.time('five');\nfor (let i in arr) {\n\n}\nconsole.timeEnd('five');\n// one: 0.711ms\n// two: 4.508ms\n// three: 0.006ms\n// four: 3.255ms\n// five: 11.144ms\n```\nåœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œç¬¬ä¸‰ç§å¾ªç¯æ–¹å¼æ•ˆæœæ˜¾è€Œæ˜“è§ã€‚\n\n## ä¸ºä»€ä¹ˆæ™®é€š for å¾ªç¯çš„æ€§èƒ½è¿œè¿œé«˜äº forEach çš„æ€§èƒ½\n\n- åŒºåˆ«ï¼š\n\nä¸€ä¸ªæŒ‰é¡ºåºéå†ï¼Œä¸€ä¸ªä½¿ç”¨iteratorè¿­ä»£å™¨éå†ï¼›\n\n- ä»æ•°æ®ç»“æ„æ¥è¯´ï¼š\n\nforå¾ªç¯æ˜¯éšæœºè®¿é—®å…ƒç´ ï¼Œforeachæ˜¯é¡ºåºé“¾è¡¨è®¿é—®å…ƒç´ ï¼›\n\n- æ€§èƒ½ä¸Šï¼š\n\nå¯¹äºarraylistï¼Œæ˜¯é¡ºåºè¡¨ï¼Œä½¿ç”¨forå¾ªç¯å¯ä»¥é¡ºåºè®¿é—®ï¼Œé€Ÿåº¦è¾ƒå¿«ï¼›ä½¿ç”¨foreachä¼šæ¯”forå¾ªç¯ç¨æ…¢ä¸€äº›ã€‚\nå¯¹äºlinkedlistï¼Œæ˜¯å•é“¾è¡¨ï¼Œä½¿ç”¨forå¾ªç¯æ¯æ¬¡éƒ½è¦ä»ç¬¬ä¸€ä¸ªå…ƒç´ è¯»å–nextåŸŸæ¥è¯»å–ï¼Œé€Ÿåº¦éå¸¸æ…¢ï¼›ä½¿ç”¨foreachå¯ä»¥ç›´æ¥è¯»å–å½“å‰ç»“ç‚¹ï¼Œæ•°æ®è¾ƒå¿«ï¼›\n","tags":["æ€§èƒ½ä¼˜åŒ–"],"categories":["JS"]},{"title":"es6å‡½æ•°æ–°ç‰¹æ€§","url":"%2Fes6function.html","content":"\n1. è®¾ç½®å‡½æ•°é»˜è®¤å€¼ \n2. ç»“åˆè§£æ„èµ‹å€¼é»˜è®¤å€¼ä½¿ç”¨\n3. åˆ©ç”¨rest(...å˜é‡å)ä¼ å…¥ä»»æ„å‚æ•°\n\n---\n<!-- more -->\n\n## ...restå’Œæ‰©å±•è¿ç®—ç¬¦\nrestå‚æ•°ï¼ˆâ€¦å˜é‡åï¼‰ï¼Œç”¨äºè·å–å‡½æ•°çš„å¤šä½™å‚æ•°ï¼Œrestå‚æ•°æ­é…çš„å˜é‡æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥å˜é‡å°†å¤šä½™çš„å‚æ•°æ”¾å…¥å…¶ä¸­ã€‚\n```javascript\nfunction foo(...y){\n    console.log(y)  // [1,2,3,4]\n}\nfoo(1,2,3,4)\n```\n## åˆ©ç”¨æ‰©å±•è¿ç®—ç¬¦ï¼ˆâ€¦æ•°ç»„ï¼‰æ›¿ä»£æ•°ç»„çš„applyæ–¹æ³•\nåœ¨es5ä¸­ï¼Œéœ€è¦ç”¨applyå°†æ•°ç»„è½¬åŒ–ä¸ºå‡½æ•°å‚æ•°ï¼Œåœ¨es6ä¸­å°±ä¸éœ€è¦è¿™ç§æ–¹å¼äº†ï¼Œå¯ä»¥ä½¿ç”¨â€¦æ¥ä»£æ›¿\n```javascript\nfunction f(x, y, z) {\n    console.log(x + ' ' + y + ' ' + z);\n}\nvar args = [1, 2, 3];\n// f.apply(null, args)\nf(...args)\n```\n\næ•°ç»„pushçš„ä¾‹å­ï¼š\n```javascript\nvar arr1 = [0, 1, 2]\nvar arr2 = [3, 4, 5]\nvar arr3 = arr1.concat(arr2)\nconsole.log(arr3) //[ 0, 1, 2, 3, 4, 5 ]\n\nvar arr4 = arr1.push(arr2)\nconsole.log(arr1) //[ 0, 1, 2, [ 3, 4, 5 ] ]\n```\n\nå¦‚æœæƒ³ä½¿ç”¨arr1.pushæ–¹æ³•çš„è¯ï¼Œå°±éœ€è¦ç”¨applyä¼ arr2äº†\n```javascript\nvar arr4 = Array.prototype.push.apply(arr1, arr2) //[ 0, 1, 2, 3, 4, 5 ]\n```\n\nå¦‚æœä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦çš„è¯ï¼Œå°±ç®€å•ä¸€äº›äº†\n```javascript\nvar arr4 = arr1.push(...arr2)\n```\n\n## nameå±æ€§\nå‡½æ•°çš„nameå±æ€§å¯ä»¥è¿”å›å‡½æ•°å\n```javasctrpt\nfunction abc(){\n    console.log(abc.name)\n}\nabc() // 'abc'\n```\n\n## å‡½æ•°çš„é™æ€å˜é‡å’Œå‡½æ•°\n```javascript\nfunction Box(){}\n\nBox.num = 12;  //é™æ€å˜é‡\nBox.fn = function(){};  //é™æ€å‡½æ•°\n\nconsole.log(Box.num);  //12\nconsole.log(Box.fn);  //function(){}\nconsole.log(typeof Box.fn);  //function\n\nvar t = new Box();\nconsole.log(t.num);  //undefined\nconsole.log(t.fn);  //undefined\nconsole.log(typeof t.fn);//undefined\n```\n\né™æ€å˜é‡å’Œé™æ€å‡½æ•°æ˜¯Boxå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œä¸å±äºå®ä¾‹ã€‚\n\n## å‡½æ•°çš„å®ä¾‹å‡½æ•°å’Œå˜é‡\n```javascript\nfunction Box(){\n  this.a = [];  //å®ä¾‹å˜é‡\n  this.fn = function(){};  //å®ä¾‹æ–¹æ³•\n}\n\nconsole.log(Box.a);  //undefined\nconsole.log(Box.fn);  //undefined\nconsole.log(typeof Box.fn);  //undefined\n\nvar t = new Box();\nvar t2 = new Box();\n\nconsole.log(t.a);  //[]\nconsole.log(t2.a);  //[]\nt.a.push(1);   // t.a [1]\nconsole.log(t2.a);  //[]\n\nconsole.log(typeof t.fn);\n```\næ¯ä¸ªå®ä¾‹éƒ½æœ‰ä¸€å¥—å®ä¾‹å±æ€§å’Œå®ä¾‹æ–¹æ³•ï¼Œäº’ä¸å½±å“ã€‚\n\nåŸå‹ä¸Šçš„å±æ€§å’Œæ–¹æ³•ï¼Œæ˜¯å®ä¾‹å…±ç”¨çš„ã€‚\n\n## å‡½æ•°ä¼ å‚\n\n### åŸºæœ¬ç±»å‹ (åŸºæœ¬ç±»å‹çš„å˜é‡å¤åˆ¶)\n```javascript\nvar count = 10;\nfunction num(num1){\n   num1 = 1;\n   return num1;\n}\nvar result = num(count);\nconsole.log(result);//1\nconsole.log(count);//10ï¼Œå¹¶æœªå˜æˆ1\n```\n### å¼•ç”¨ç±»å‹\n```javascript\nvar person  = {\n    name : \"Tom\"\n};\nfunction obj(peo){\n    peo.name = \"Jerry\";\n    return peo;\n}\nvar result = obj(person);\nconsole.log(result.name);// Jerry\nconsole.log(person.name);// Jerry\n```\n\n```javascript\nvar person = {\n    name : \"Tom\"\n}; \nfunction obj(peo){\n    peo = {\n       name : \"Jerry\"\n    };\n    return peo;\n}\nvar result = obj(person);\nconsole.log(result.name);// Jerry\nconsole.log(person.name);// Tom\n```\npersonä¼ é€’ç»™å‡½æ•°ä¸­çš„peoï¼Œä½†åœ¨å‡½æ•°å†…éƒ¨peoåˆæŒ‡å‘äº†ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ‰€ä»¥result.nameæ˜¯æ–°å¯¹è±¡çš„å€¼ï¼Œpersonè¿˜æ˜¯æŒ‡å‘åŸå¯¹è±¡ï¼Œæ‰€ä»¥å¹¶æ²¡æœ‰æ”¹å˜ã€‚\n\nECMAScriptä¸­æ‰€æœ‰å‡½æ•°çš„å‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ã€‚ â€”â€”ã€ŠJSé«˜ç¨‹ã€‹\n\næˆ‘ä»¬å¯ä»¥æŠŠECMAScriptå‡½æ•°çš„å‚æ•°æƒ³è±¡æˆå±€éƒ¨å˜é‡ï¼Œåœ¨å‘å‚æ•°ä¼ é€’åŸºæœ¬ç±»å‹çš„å€¼æ—¶ï¼Œè¢«ä¼ é€’çš„å€¼è¢«å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ã€‚\n\nåœ¨å‘å‡½æ•°ä¼ é€’å¼•ç”¨ç±»å‹æ—¶ï¼Œä¼šæŠŠè¿™ä¸ªå€¼åœ¨å†…å­˜ä¸­çš„åœ°å€å¤åˆ¶ç»™ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå› æ­¤è¿™ä¸ªå±€éƒ¨å˜é‡çš„å˜åŒ–ä¼šåæ˜ åœ¨å‡½æ•°çš„å¤–éƒ¨ã€‚\n\nå³ä½¿åœ¨å‡½æ•°å†…éƒ¨ä¿®æ”¹äº†å‚æ•°çš„å€¼ï¼Œä½†åŸå§‹çš„å¼•ç”¨ä»ç„¶ä¿æŒæœªå˜ã€‚\n\n## å°¾è°ƒç”¨ä¼˜åŒ–\n\n### ä»‹ç»\nå°¾è°ƒç”¨æŒ‡æŸä¸ªå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ã€‚\n### demo\n```javascript\nfunction f(x) {\n    let y = g(x);\n    return y\n}//ä¸æ˜¯å°¾è°ƒç”¨ï¼Œå› ä¸ºæœ€åä¸€æ­¥è¿”å›äº†yï¼Œä¸æ˜¯è°ƒç”¨å‡½æ•°\n\nfunction f(x) {\n    return g(x) + 1\n}//ä¸æ˜¯å°¾è°ƒç”¨ï¼Œå› ä¸ºæœ€åä¸€æ­¥æ˜¯åŠ ä¸€ï¼Œä¸æ˜¯è°ƒç”¨å‡½æ•°\n\nfunction f(x) {\n    g(x)\n}//ä¸æ˜¯å°¾è°ƒç”¨ï¼Œå› ä¸ºå‡½æ•°çš„æœ€åä¸€æ­¥æ˜¯ä¸€ä¸ªé»˜è®¤çš„return undefinedï¼›\n\nfunction f(x) {\n    return g(x)\n}//æ˜¯å°¾è°ƒç”¨\n```\n\n### ä¸ºä»€ä¹ˆå°¾è°ƒç”¨\nå‡½æ•°è°ƒç”¨ä¼šåœ¨å†…å­˜å½¢æˆä¸€ä¸ªâ€œè°ƒç”¨è®°å½•â€ï¼Œåˆç§°â€œè°ƒç”¨å¸§â€ã€‚æ¯å½¢æˆä¸€ä¸ªè°ƒç”¨å¸§å°±ä¼šå ç”¨ä¸€å®šçš„å†…å­˜ï¼Œå‡å¦‚æœ‰ä¸€ä¸ªå‡½æ•°Aé‡Œé¢è°ƒç”¨äº†å‡½æ•°Bï¼Œå‡½æ•°Bé‡Œé¢åˆè°ƒç”¨äº†å‡½æ•°Cï¼Œä»¥æ­¤ç±»æ¨ã€‚\n\nåœ¨ä¸æ˜¯å°¾è°ƒç”¨çš„æƒ…å†µä¸‹ï¼Œå› ä¸ºjsæ˜¯å•çº¿ç¨‹åŒæ­¥çš„ï¼Œæ‰€ä»¥åªæœ‰å½“å‡½æ•°Bæ‰§è¡Œå®Œæ¯•æ‰ä¼šæ‰§è¡Œå‡½æ•°Açš„returnè¯­å¥ï¼ˆå‡½æ•°æ²¡å†™returnä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„return undefiendï¼›ï¼‰ï¼Œæ­¤æ—¶å‡½æ•°Bçš„è°ƒç”¨å¸§æ‰ä¼šæ¶ˆå¤±ã€‚ä½†äº‹å®ä¸Šï¼Œåªæœ‰å½“å‡½æ•°Bæ‰§è¡Œåˆ°returnè¯­å¥æ—¶æ‰ä¼šæ‰§è¡Œå®Œæ¯•ï¼Œè€Œåœ¨å‡½æ•°Bæ‰§è¡Œreturnä¹‹å‰ä¼šå…ˆè°ƒç”¨å‡½æ•°Cï¼Œæ‰€ä»¥å½“è¿™ç§å‡½æ•°è°ƒç”¨è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œå½¢æˆçš„è°ƒç”¨å¸§ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šå ç”¨çš„å†…å­˜å°±ä¼šè¶Šæ¥è¶Šå¤§ã€‚ä¿—è¯è¯´ç²¾æ»¡è‡ªæº¢ï¼Œå†…å­˜ä¹Ÿä¼šæœ‰æº¢å‡ºçš„æ—¶å€™æ˜¯å§ï¼Œè¿™å°±ä¸è¡Œäº†ï¼æ‰€ä»¥è¦ç”¨å°¾è°ƒç”¨ï¼\n\nå°¾è°ƒç”¨ç”±äºæ˜¯å‡½æ•°çš„æœ€åä¸€æ­¥æ“ä½œï¼Œæ‰€ä»¥ä¸éœ€è¦ä¿ç•™å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œåªè¦ç›´æ¥ç”¨å†…å±‚å‡½æ•°çš„è°ƒç”¨å¸§ï¼Œå–ä»£å¤–å±‚å‡½æ•°çš„è°ƒç”¨å¸§å°±å¯ä»¥äº†ã€‚\n\næ¯”å¦‚åœ¨æ‰§è¡Œé€’å½’çš„æ—¶å€™å°±å¯ä»¥åˆ©ç”¨å°¾è°ƒç”¨è¾¾åˆ°ä¼˜åŒ–å†…å­˜çš„ç›®çš„ã€‚å‡½æ•°è°ƒç”¨è‡ªèº«ï¼Œç§°ä¸ºé€’å½’ã€‚å¦‚æœå°¾è°ƒç”¨è‡ªèº«ï¼Œå°±ç§°ä¸ºå°¾é€’å½’ã€‚\n\né€’å½’éå¸¸è€—è´¹å†…å­˜ï¼Œå› ä¸ºéœ€è¦åŒæ—¶ä¿å­˜æˆåƒä¸Šç™¾ä¸ªè°ƒç”¨å¸§ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€ã€‚ä½†å¯¹äºå°¾é€’å½’æ¥è¯´ï¼Œç”±äºåªå­˜åœ¨ä¸€ä¸ªè°ƒç”¨å¸§ï¼Œæ‰€ä»¥æ°¸è¿œä¸ä¼šå‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ã€‚\n\n```javascript\n// é€’å½’ è®¡ç®—nçš„é˜¶ä¹˜ï¼Œæœ€å¤šéœ€è¦ä¿å­˜nä¸ªè°ƒç”¨è®°å½•ï¼Œå¤æ‚åº¦ O(n) \nfunction factorial(n) {\n    if (n === 1) return 1;\n    return n * factorial(n - 1)\n}\nfactorial(5) //120\n\n// æ”¹æˆå°¾é€’å½’ï¼Œåªä¿ç•™ä¸€ä¸ªè°ƒç”¨è®°å½•ï¼Œå¤æ‚åº¦ O(1) \nfunction factorial(n, total) {\n    if (n === 1) return total;\n    return factorial(n - 1, n * total)\n}\nfactorial(5, 1) //120\n```\n\n## å‡½æ•°å£°æ˜è¦†ç›–\n```javascript\nfunction foo(){\nconsole.log(\"foo\");\n}\n\nvar foo = 1;\n// 1 å¦‚æœfooä¸èµ‹å€¼ åˆ™æ‰“å°å‡½æ•°\n```","tags":["es6"],"categories":["JS"]},{"title":"JavaScript ä¸­ this çš„è¯¦è§£","url":"%2Fjsthis.html","content":"\n## this çš„æŒ‡å‘\n\n`this` æ˜¯ js ä¸­å®šä¹‰çš„å…³é”®å­—ï¼Œ å®ƒçš„æŒ‡å‘å¹¶ä¸æ˜¯åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™ç¡®å®šçš„ï¼Œè€Œæ˜¯åœ¨è°ƒç”¨çš„æ—¶å€™ç¡®å®šçš„ã€‚æ¢å¥è¯è¯´ï¼Œå‡½æ•°çš„è°ƒç”¨æ–¹å¼å†³å®šäº† this æŒ‡å‘ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ`this`çš„æŒ‡å‘å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹å››ç§æƒ…å†µã€‚\n\n> thisçš„æŒ‡å‘åœ¨å‡½æ•°å®šä¹‰çš„æ—¶å€™æ˜¯ç¡®å®šä¸äº†çš„ï¼Œåªæœ‰å‡½æ•°æ‰§è¡Œçš„æ—¶å€™æ‰èƒ½ç¡®å®šthisåˆ°åº•æŒ‡å‘è°(å–å†³äºå‡½æ•°çš„è°ƒç”¨ä½ç½®)ï¼Œå®é™…ä¸Šthisçš„æœ€ç»ˆæŒ‡å‘çš„æ˜¯é‚£ä¸ªè°ƒç”¨å®ƒçš„å¯¹è±¡(å‡½æ•°çš„ç›´æ¥è°ƒç”¨è€…);\n\n---\n<!-- more -->\n### ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨(ç›´æ¥è°ƒç”¨)ï¼šå‡½æ•°å()\nå½“å‡½æ•°ä½œä¸ºä¸€ä¸ªæ™®é€šå‡½æ•°è¢«è°ƒç”¨ï¼Œ`this`æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚åœ¨æµè§ˆå™¨é‡Œï¼Œå…¨å±€å¯¹è±¡å°±æ˜¯ windowã€‚\n\n```javascript\nwindow.name = 'cosyer';\nfunction getName(){\n    console.log(this.name);\n}\ngetName();                   // cosyer\n```\nå¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶`this`æŒ‡å‘äº†å…¨å±€å¯¹è±¡ windowã€‚(NodeJSçš„å…¨éƒ¨å¯¹è±¡æ˜¯global)\nåœ¨ECMAScript5çš„ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œè¿™ç§æƒ…å†µ`this`å·²ç»è¢«è§„å®šä¸ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡äº†ï¼Œè€Œæ˜¯undefinedã€‚\n\n```javascript\n'use strict';\nfunction fun(){\n    console.log(this);\n}\nfun();                      // undefined\n```\n### ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨\nå½“å‡½æ•°ä½œä¸ºä¸€ä¸ªå¯¹è±¡é‡Œçš„æ–¹æ³•è¢«è°ƒç”¨ï¼Œ`this`æŒ‡å‘è¯¥å¯¹è±¡\n\n```javascript\nvar obj = {\n    name : 'cosyer',\n    getName : function(){\n        console.log(this.name);\n    }\n}\n\nobj.getName();              // cosyer\n```\nå¦‚æœæŠŠå¯¹è±¡çš„æ–¹æ³•èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå†è°ƒç”¨è¿™ä¸ªå˜é‡ï¼š\n\n```javascript\nvar obj = {\n    fun1 : function(){\n        console.log(this);\n    }\n}\nvar fun2 = obj.fun1;\nfun2();                     // window\n```\næ­¤æ—¶è°ƒç”¨ fun2 æ–¹æ³• è¾“å‡ºäº† window å¯¹è±¡ï¼Œè¯´æ˜æ­¤æ—¶`this`æŒ‡å‘äº†å…¨å±€å¯¹è±¡ã€‚ç»™ fun2 èµ‹å€¼ï¼Œå…¶å®æ˜¯ç›¸å½“äºï¼š\n\n```javascript\nvar fun2 = function(){\n    console.log(this);\n}\n```\nå¯ä»¥çœ‹å‡ºï¼Œæ­¤æ—¶çš„`this`å·²ç»è·Ÿ obj æ²¡æœ‰ä»»ä½•å…³ç³»äº†ã€‚è¿™æ—¶ fun2 æ˜¯ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨ã€‚\n\n### ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨\njsä¸­æ²¡æœ‰ç±»ï¼Œä½†æ˜¯å¯ä»¥ä»æ„é€ å™¨ä¸­åˆ›å»ºå¯¹è±¡ï¼Œå¹¶æä¾›äº†`new`è¿ç®—ç¬¦æ¥è¿›è¡Œè°ƒç”¨è¯¥æ„é€ å™¨ã€‚æ„é€ å™¨çš„å¤–è¡¨è·Ÿæ™®é€šå‡½æ•°ä¸€æ ·ï¼Œå¤§éƒ¨åˆ†çš„å‡½æ•°éƒ½å¯ä»¥å½“åšæ„é€ å™¨ä½¿ç”¨ã€‚å½“æ„é€ å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œ`this`æŒ‡å‘äº†è¯¥æ„é€ å‡½æ•°å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡ã€‚\n\n```javascript\nvar Person = function(){\n    this.name = 'cosyer';\n}\nvar obj = new Person();\nconsole.log(obj.name);      // cosyer\n```\nå¦‚æœæ„é€ å‡½æ•°æ˜¾å¼çš„è¿”å›ä¸€ä¸ªå¯¹è±¡(functionæˆ–è€…object)ï¼Œé‚£ä¹ˆ`this`åˆ™ä¼šæŒ‡å‘è¯¥å¯¹è±¡ã€‚\n\n```javascript\nvar Person = function(){\n    this.name = 'cosyer';\n    return {\n        name : 'chenyu'\n    }\n}\nvar obj = new Person();\nconsole.log(obj.name);      // chenyu\n```\nå¦‚æœè¯¥å‡½æ•°ä¸ç”¨`new`è°ƒç”¨ï¼Œå½“ä½œæ™®é€šå‡½æ•°æ‰§è¡Œï¼Œé‚£ä¹ˆ`this`ä¾ç„¶æŒ‡å‘å…¨å±€å¯¹è±¡ã€‚\n\n### call() æˆ– apply() è°ƒç”¨ Function.prototype.bind()å°†å½“å‰å‡½æ•°ç»‘å®šåˆ°æŒ‡å®šå¯¹è±¡ç»‘å®šè¿”å›æ–°å‡½æ•°ä¹‹åå†è¿›è¡Œè°ƒç”¨(é—´æ¥è°ƒç”¨ã€æ˜¾ç¤ºç»‘å®š)\né€šè¿‡è°ƒç”¨å‡½æ•°çš„ call() æˆ– apply() æ–¹æ³•å¯åŠ¨æ€çš„æ”¹å˜`this`çš„æŒ‡å‘ã€‚\n\n```javascript\nvar obj1 = {\n    name : 'cosyer',\n    getName : function(){\n        console.log(this.name);\n    }\n}\nvar obj2 = {\n    name : 'chenyu'\n}\n\nobj1.getName();             // cosyer\nobj1.getName.call(obj2);    // chenyu\nobj1.getName.apply(obj2);   // chenyu\n```\n**ç®€å•çš„å®ç°bindæ–¹æ³•**\n\n```javascript\nconst obj = {};\n\nfunction test() {\n    console.log(this === obj);\n}\n\n// è‡ªå®šä¹‰çš„å‡½æ•°ï¼Œæ¨¡æ‹Ÿ bind() å¯¹ this çš„å½±å“\nfunction myBind(func, target) {\n    return function() {\n        return func.apply(target, arguments); // ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå‡½æ•°è¿è¡Œçš„thisæŒ‡å‘\n    };\n}\n\nconst testObj = myBind(test, obj);\ntest();     // false\ntestObj();  // true\n```\nä»ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥çœ‹åˆ°ï¼Œé¦–å…ˆï¼Œé€šè¿‡é—­åŒ…ï¼Œä¿æŒäº† targetï¼Œå³ç»‘å®šçš„å¯¹è±¡ï¼›ç„¶ååœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œå¯¹åŸå‡½æ•°ä½¿ç”¨äº† apply æ–¹æ³•æ¥æŒ‡å®šå‡½æ•°çš„ thisã€‚\n\nä¸è¿‡ä½¿ç”¨ apply å’Œ call çš„æ—¶å€™ä»ç„¶éœ€è¦æ³¨æ„ï¼Œå¦‚æœç›®å½•å‡½æ•°æœ¬èº«æ˜¯ä¸€ä¸ªç»‘å®šäº† this å¯¹è±¡çš„å‡½æ•°ï¼Œé‚£ apply å’Œ call ä¸ä¼šåƒé¢„æœŸé‚£æ ·æ‰§è¡Œ\n\n```javascript\nconst obj = {};\n\nfunction test() {\n    console.log(this === obj);\n}\n\n// ç»‘å®šåˆ°ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯ obj\nconst testObj = test.bind({});\ntest.apply(obj);    // true\n\n// æœŸæœ› this æ˜¯ objï¼Œå³è¾“å‡º true\n// ä½†æ˜¯å› ä¸º testObj ç»‘å®šäº†ä¸æ˜¯ obj çš„å¯¹è±¡ï¼Œæ‰€ä»¥ä¼šè¾“å‡º false\ntestObj.apply(obj); // false\n```\n\n## ä¸€é“thisç»ƒä¹ é¢˜\n```javascript\nvar length = 10;\nfunction fn() {\n    console.log(this.length)\n};\nvar obj = {\n    length: 5, \n    method: function (fn) {\n        fn();\n        arguments[0](); // thisè¢«ç»‘å®šåˆ°argumentsä¸Šï¼Œè€Œargumentsç¡®å®å­˜åœ¨ä¸€ä¸ªlengthå±æ€§ï¼Œå¹¶ä¸”å€¼ä¸º2\n        fn.call(obj, 12);\n    }\n};\nobj.method(fn, 1);\n// 10 2 5\n```\n\n1. é»˜è®¤ç»‘å®š\n2. éšå¼ç»‘å®š\n3. æ˜¾ç¤ºç»‘å®š\n4. newç»‘å®š\n> é»˜è®¤ç»‘å®šå°±æ˜¯ä»€ä¹ˆéƒ½åŒ¹é…ä¸åˆ°çš„æƒ…å†µä¸‹ï¼Œéä¸¥æ ¼æ¨¡å¼thisç»‘å®šåˆ°å…¨å±€å¯¹è±¡windowæˆ–è€…global,ä¸¥æ ¼æ¨¡å¼ç»‘å®šåˆ°undefined;\n> éšå¼ç»‘å®šå°±æ˜¯å‡½æ•°ä½œä¸ºå¯¹è±¡çš„å±æ€§ï¼Œé€šè¿‡å¯¹è±¡å±æ€§çš„æ–¹å¼è°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™thisç»‘å®šåˆ°å¯¹è±¡;\n> æ˜¾ç¤ºç»‘å®šå°±æ˜¯é€šè¿‡bindã€applyå’Œcallè°ƒç”¨çš„æ–¹å¼;\n> newç»‘å®šå°±æ˜¯é€šè¿‡newæ“ä½œç¬¦æ—¶å°†thisç»‘å®šåˆ°å½“å‰æ–°åˆ›å»ºçš„å¯¹è±¡ä¸­\n\nä¼˜å…ˆçº§ï¼š new>æ˜¾ç¤º>éšå¼>é»˜è®¤\n\n## ç®­å¤´å‡½æ•° \n{% note info %}\nç®­å¤´å‡½æ•°çš„å¼•å…¥æœ‰ä¸¤ä¸ªæ–¹é¢çš„ä½œç”¨ï¼šä¸€æ˜¯æ›´ç®€çŸ­çš„å‡½æ•°ä¹¦å†™ï¼ŒäºŒæ˜¯å¯¹`this`çš„è¯æ³•è§£æã€‚\nåœ¨ç®­å¤´å‡½æ•°å‡ºç°ä¹‹å‰ï¼Œæ¯ä¸ªæ–°å®šä¹‰çš„å‡½æ•°éƒ½æœ‰å…¶è‡ªå·±çš„`this`å€¼ï¼ˆä¾‹å¦‚ï¼Œæ„é€ å‡½æ•°çš„`this`æŒ‡å‘äº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹çš„å‡½æ•°çš„`this`å€¼ä¸º undefinedï¼›å¦‚æœå‡½æ•°æ˜¯ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨çš„ï¼Œåˆ™å…¶`this`æŒ‡å‘äº†é‚£ä¸ªè°ƒç”¨å®ƒçš„å¯¹è±¡ï¼‰ã€‚åœ¨é¢å‘å¯¹è±¡é£æ ¼çš„ç¼–ç¨‹ä¸­ï¼Œè¿™ä¼šå¸¦æ¥å¾ˆå¤šå›°æ‰°ã€‚\n{% endnote %}\n\n### ES6 çš„ç®­å¤´å‡½æ•° ()=>ï¼ŒæŒ‡å‘ä¸ä¸€èˆ¬functionå®šä¹‰çš„å‡½æ•°ä¸åŒï¼Œæ¯”è¾ƒå®¹æ˜“ç»•æ™•ï¼Œç®­å¤´å‡½æ•°`this`çš„å®šä¹‰ï¼šç®­å¤´å‡½æ•°ä¸­çš„`this`æ˜¯åœ¨å®šä¹‰å‡½æ•°çš„æ—¶å€™ç»‘å®šï¼Œè€Œä¸æ˜¯åœ¨æ‰§è¡Œå‡½æ•°çš„æ—¶å€™ç»‘å®šã€‚æœ¬è´¨æ¥è¯´ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„`this`ï¼Œå®ƒçš„`this`æ˜¯æ´¾ç”Ÿè€Œæ¥çš„ã€‚ç®­å¤´å‡½æ•°ä¼šæ•è·å…¶æ‰€åœ¨ä¸Šä¸‹æ–‡çš„`this`å€¼ï¼Œä½œä¸ºè‡ªå·±çš„`this`å€¼ï¼Œå³å®ƒä¼šæ ¹æ®å¤–å±‚(å‡½æ•°æˆ–è€…å…¨å±€)ä½œç”¨åŸŸç»§æ‰¿ this(ç›´æ¥å¤–å±‚å‡½æ•°)ã€‚\n\nç®­å¤´å‡½æ•°å°†thisæŒ‡å‘å…¶å°é—­çš„ç¯å¢ƒ(ä¹Ÿç§°â€œè¯æ³•ä½œç”¨åŸŸâ€)ã€‚\n\n### åŸºç¡€è¯­æ³•\n```javascript\n// ç­‰ä»·äº: => { return expression; } \n(param1, param2, â€¦, paramN) => { statements }\n(param1, param2, â€¦, paramN) => expression\n\n// å¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œåœ†æ‹¬å·æ˜¯å¯é€‰çš„:\n(singleParam) => { statements }\nsingleParam => { statements }\n\n// æ— å‚æ•°æˆ–è€…å¤šå‚æ•°çš„ç®­å¤´å‡½æ•°éœ€è¦ä½¿ç”¨åœ†æ‹¬å·æˆ–è€…ä¸‹åˆ’çº¿:\n() => { statements } _ => { statements }\n```\n### é«˜çº§è¯­æ³•\n```javascript\n// åªè¿”å›ä¸€ä¸ªå¯¹è±¡å­—é¢é‡,æ²¡æœ‰å…¶ä»–è¯­å¥æ—¶, åº”å½“ç”¨åœ†æ‹¬å·å°†å…¶åŒ…èµ·æ¥:\nparams => ({foo: bar})\n\n// æ”¯æŒ Rest parameters å’Œ default parameters:\n(param1, param2, ...rest) => { statements }\n(param1 = defaultValue1, param2, â€¦, paramN = defaultValueN) => { statements }\n\n// æ”¯æŒå‚æ•°åˆ—è¡¨ä¸­çš„è§£æ„èµ‹å€¼\nvar f = ([a, b] = [1, 2], c=3 ) => a + b + c;\nf(); // 6\n```\n\n### ç®­å¤´å‡½æ•°ä¸å¯ä»¥ä½¿ç”¨argumentså¯¹è±¡ï¼Œsuperæˆ–new.target\nargumentså¯¹è±¡åœ¨å‡½æ•°ä½“å†…ä¸å­˜åœ¨ï¼Œå¦‚æœè¦ç”¨çš„è¯ï¼Œå¯ä»¥ç”¨restå‚æ•°ä»£æ›¿\n\n### ç®­å¤´å‡½æ•°æ²¡æœ‰åŸå‹\n```javascript\nvar Foo = () => {};\n\nconsole.log(Foo.prototype); // undefined\n```\n### ç®­å¤´å‡½æ•°æ— æ³•æ„é€ å‡½æ•°\n```javascript\nvar Foo = () => {};\n\nvar foo = new Foo(); // TypeError: Foo is not a constructor\n```\n### ç®­å¤´å‡½æ•°æ— æ³•ä½¿ç”¨yield\nyield å…³é”®å­—é€šå¸¸ä¸èƒ½åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨ï¼ˆé™¤éæ˜¯åµŒå¥—åœ¨å…è®¸ä½¿ç”¨çš„å‡½æ•°å†…ï¼‰ã€‚å› æ­¤ï¼Œç®­å¤´å‡½æ•°ä¸èƒ½ç”¨ä½œç”Ÿæˆå™¨ã€‚\n\n### ç®­å¤´å‡½æ•°æˆ–è€…ç»„ä»¶ä¸Šç»‘å®šäº‹ä»¶çš„æ—¶å€™this.xxx.bind(this)ï¼Œè¿™æ ·ä¼šç”Ÿæˆæ–°å‡½æ•°ï¼Œæ¨èconstructoré‡Œbind() garbage collection(åƒåœ¾å›æ”¶æœºåˆ¶)ï¼Œé™¤éä½¿ç”¨purecomponentåªè¿›è¡Œæµ…æ¯”è¾ƒã€‚\n","tags":["es6"],"categories":["JS"]},{"title":"reacté¢è¯•é¢˜è®°å½•","url":"%2FreactInterview.html","content":"\n{% fi http://cdn.mydearest.cn/blog/images/reactInterview.jpeg , reactInterview, React%}\n---\n<!-- more -->\n\n## Reacté¢è¯•é—®é¢˜\nä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å…³äº React çš„é¢è¯•é—®é¢˜åˆ—è¡¨ï¼š\n\n### React çš„å“åº”å¼åŸç†\nReact ä¼šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿ DOM(virtual DOM)ã€‚å½“ä¸€ä¸ªç»„ä»¶ä¸­çš„çŠ¶æ€æ”¹å˜æ—¶ï¼ŒReact é¦–å…ˆä¼šé€šè¿‡ \"diff\" ç®—æ³•æ¥æ ‡è®°è™šæ‹Ÿ DOM ä¸­çš„æ”¹å˜ï¼Œç¬¬äºŒæ­¥æ˜¯è°ƒèŠ‚(reconciliation)ï¼Œä¼šç”¨`diff`çš„ç»“æœæ¥æ›´æ–°çœŸå®DOMã€‚è™šæ‹Ÿ\nDOMä½œä¸ºä¸€ç§ç¼“å­˜æœºåˆ¶ä¼˜åŒ–äº†UIæ¸²æŸ“å‡å°‘æ˜‚è´µçš„DOMå˜åŒ–çš„æ•°é‡ã€‚\n\n1. å¼€å‘è€…åªéœ€å…³æ³¨çŠ¶æ€è½¬ç§»ï¼ˆæ•°æ®ï¼‰ï¼Œå½“çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼ŒReactæ¡†æ¶ä¼šè‡ªåŠ¨æ ¹æ®æ–°çš„çŠ¶æ€é‡æ–°æ„å»ºUIã€‚\n2. Reactæ¡†æ¶åœ¨æ¥æ”¶åˆ°ç”¨æˆ·çŠ¶æ€æ”¹å˜é€šçŸ¥åï¼Œä¼šæ ¹æ®å½“å‰æ¸²æŸ“æ ‘ï¼Œç»“åˆæœ€æ–°çš„çŠ¶æ€æ”¹å˜ï¼Œé€šè¿‡Diffç®—æ³•ï¼Œè®¡ç®—å‡ºæ ‘ä¸­å˜åŒ–çš„éƒ¨åˆ†ï¼Œç„¶ååªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†ï¼ˆDOMæ“ä½œï¼‰ï¼Œä»è€Œé¿å…æ•´æ£µæ ‘é‡æ„ï¼Œæé«˜æ€§èƒ½ã€‚çŠ¶æ€å˜åŒ–å\nReactæ¡†æ¶å¹¶ä¸ä¼šç«‹å³å»è®¡ç®—å¹¶æ¸²æŸ“DOMæ ‘çš„å˜åŒ–éƒ¨åˆ†ï¼Œç›¸åï¼ŒReactä¼šåœ¨DOMçš„åŸºç¡€ä¸Šå»ºç«‹ä¸€ä¸ªæŠ½è±¡å±‚ï¼Œå³è™šæ‹ŸDOMæ ‘ï¼Œå¯¹æ•°æ®å’ŒçŠ¶æ€æ‰€åšçš„ä»»ä½•æ”¹åŠ¨ï¼Œéƒ½ä¼šè¢«è‡ªåŠ¨ä¸”é«˜æ•ˆçš„åŒæ­¥åˆ°è™šæ‹ŸDOMï¼Œæœ€åå†æ‰¹é‡åŒæ­¥åˆ°çœŸå®DOM\nä¸­ï¼Œè€Œä¸æ˜¯æ¯æ¬¡æ”¹å˜éƒ½å»æ“ä½œä¸€ä¸‹DOMã€‚\n\nä¸ºä»€ä¹ˆä¸èƒ½æ¯æ¬¡æ”¹å˜éƒ½ç›´æ¥å»æ“ä½œDOMæ ‘ï¼Ÿ\nè¿™æ˜¯å› ä¸ºåœ¨æµè§ˆå™¨ä¸­æ¯ä¸€æ¬¡DOMæ“ä½œéƒ½æœ‰å¯èƒ½å¼•èµ·æµè§ˆå™¨çš„é‡ç»˜æˆ–å›æµï¼š\n* å¦‚æœDOMåªæ˜¯å¤–è§‚é£æ ¼å‘ç”Ÿå˜åŒ–ï¼Œå¦‚é¢œè‰²å˜åŒ–ï¼Œä¼šå¯¼è‡´æµè§ˆå™¨é‡ç»˜ç•Œé¢ã€‚\n* å¦‚æœDOMæ ‘çš„ç»“æ„å‘ç”Ÿå˜åŒ–ï¼Œå¦‚å°ºå¯¸ã€å¸ƒå±€ã€èŠ‚ç‚¹éšè—ç­‰å¯¼è‡´ï¼Œæµè§ˆå™¨å°±éœ€è¦å›æµï¼ˆåŠé‡æ–°æ’ç‰ˆå¸ƒå±€ï¼‰ã€‚\nè€Œæµè§ˆå™¨çš„é‡ç»˜å’Œå›æµéƒ½æ˜¯æ¯”è¾ƒæ˜‚è´µçš„æ“ä½œï¼Œå¦‚æœæ¯ä¸€æ¬¡æ”¹å˜éƒ½ç›´æ¥å¯¹DOMè¿›è¡Œæ“ä½œï¼Œè¿™ä¼šå¸¦æ¥æ€§èƒ½é—®é¢˜ï¼Œè€Œæ‰¹é‡æ“ä½œåªä¼šè§¦å‘ä¸€æ¬¡DOMæ›´æ–°ã€‚\n\n### ä½¿ç”¨ React æœ‰ä½•ä¼˜ç‚¹\n* åªéœ€æŸ¥çœ‹ `render` å‡½æ•°å°±ä¼šå¾ˆå®¹æ˜“çŸ¥é“ä¸€ä¸ªç»„ä»¶æ˜¯å¦‚ä½•è¢«æ¸²æŸ“çš„\n* JSX çš„å¼•å…¥ï¼Œä½¿å¾—ç»„ä»¶çš„ä»£ç æ›´åŠ å¯è¯»ï¼Œä¹Ÿæ›´å®¹æ˜“çœ‹æ‡‚ç»„ä»¶çš„å¸ƒå±€ï¼Œæˆ–è€…ç»„ä»¶ä¹‹é—´æ˜¯å¦‚ä½•äº’ç›¸å¼•ç”¨çš„\n* æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ï¼Œè¿™å¯ä»¥æ”¹è¿› SEO å’Œæ€§èƒ½\n* æ˜“äºæµ‹è¯•\n* React åªå…³æ³¨ View å±‚ï¼Œæ‰€ä»¥å¯ä»¥å’Œå…¶å®ƒä»»ä½•æ¡†æ¶(å¦‚Backbone.js, Angular.js)ä¸€èµ·ä½¿ç”¨\n\n### å±•ç¤ºç»„ä»¶(Presentational component)å’Œå®¹å™¨ç»„ä»¶(Container component)ä¹‹é—´æœ‰ä½•ä¸åŒ\nå±•ç¤ºç»„ä»¶å…³å¿ƒç»„ä»¶çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆã€‚å±•ç¤ºä¸“é—¨é€šè¿‡ props æ¥å—æ•°æ®å’Œå›è°ƒï¼Œå¹¶ä¸”å‡ ä¹ä¸ä¼šæœ‰è‡ªèº«çš„çŠ¶æ€ï¼Œä½†å½“å±•ç¤ºç»„ä»¶æ‹¥æœ‰è‡ªèº«çš„çŠ¶æ€æ—¶ï¼Œé€šå¸¸ä¹Ÿåªå…³å¿ƒ UI çŠ¶æ€è€Œä¸æ˜¯æ•°æ®çš„çŠ¶æ€ã€‚\n\nå®¹å™¨ç»„ä»¶åˆ™æ›´å…³å¿ƒç»„ä»¶æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚å®¹å™¨ç»„ä»¶ä¼šä¸ºå±•ç¤ºç»„ä»¶æˆ–è€…å…¶å®ƒå®¹å™¨ç»„ä»¶æä¾›æ•°æ®å’Œè¡Œä¸º(behavior)ï¼Œå®ƒä»¬ä¼šè°ƒç”¨ `Flux actions`ï¼Œå¹¶å°†å…¶ä½œä¸ºå›è°ƒæä¾›ç»™å±•ç¤ºç»„ä»¶ã€‚å®¹å™¨ç»„ä»¶ç»å¸¸æ˜¯æœ‰çŠ¶æ€çš„ï¼Œå› ä¸ºå®ƒä»¬æ˜¯(å…¶å®ƒç»„ä»¶çš„)æ•°æ®æºã€‚\n\n### ç±»ç»„ä»¶(Class component)å’Œå‡½æ•°å¼ç»„ä»¶(Functional component)ä¹‹é—´æœ‰ä½•ä¸åŒ\n* ç±»ç»„ä»¶ä¸ä»…å…è®¸ä½ ä½¿ç”¨æ›´å¤šé¢å¤–çš„åŠŸèƒ½ï¼Œå¦‚ç»„ä»¶è‡ªèº«çš„çŠ¶æ€å’Œç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œä¹Ÿèƒ½ä½¿ç»„ä»¶ç›´æ¥è®¿é—® `store` å¹¶ç»´æŒçŠ¶æ€\n* å½“ç»„ä»¶ä»…æ˜¯æ¥æ”¶ `props`ï¼Œå¹¶å°†ç»„ä»¶è‡ªèº«æ¸²æŸ“åˆ°é¡µé¢æ—¶ï¼Œè¯¥ç»„ä»¶å°±æ˜¯ä¸€ä¸ª 'æ— çŠ¶æ€ç»„ä»¶(stateless component)'ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªçº¯å‡½æ•°æ¥åˆ›å»ºè¿™æ ·çš„ç»„ä»¶ã€‚è¿™ç§ç»„ä»¶ä¹Ÿè¢«ç§°ä¸ºå“‘ç»„ä»¶(dumb components)æˆ–å±•ç¤ºç»„ä»¶\n\n### (ç»„ä»¶çš„)çŠ¶æ€(state)å’Œå±æ€§(props)ä¹‹é—´æœ‰ä½•ä¸åŒ\n`State` æ˜¯ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨äºç»„ä»¶æŒ‚è½½æ—¶æ‰€éœ€æ•°æ®çš„é»˜è®¤å€¼ã€‚`State` å¯èƒ½ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œå‘ç”Ÿçªå˜ï¼Œä½†å¤šæ•°æ—¶å€™æ˜¯ä½œä¸ºç”¨æˆ·äº‹ä»¶è¡Œä¸ºçš„ç»“æœã€‚\n\n`Props`(properties çš„ç®€å†™)åˆ™æ˜¯ç»„ä»¶çš„é…ç½®ã€‚`props` ç”±çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶ï¼Œå¹¶ä¸”å°±å­ç»„ä»¶è€Œè¨€ï¼Œ`props` æ˜¯ä¸å¯å˜çš„(immutable)ã€‚ç»„ä»¶ä¸èƒ½æ”¹å˜è‡ªèº«çš„ propsï¼Œä½†æ˜¯å¯ä»¥æŠŠå…¶å­ç»„ä»¶çš„ props æ”¾åœ¨ä¸€èµ·(ç»Ÿä¸€ç®¡ç†)ã€‚Props ä¹Ÿä¸ä»…ä»…æ˜¯æ•°æ®--å›è°ƒå‡½æ•°ä¹Ÿå¯ä»¥é€šè¿‡ props ä¼ é€’ã€‚\n\n### æŒ‡å‡º(ç»„ä»¶)ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„ä¸åŒ\n* `componentWillMount` -- å¤šç”¨äºæ ¹ç»„ä»¶ä¸­çš„åº”ç”¨ç¨‹åºé…ç½®\n* `componentDidMount` -- åœ¨è¿™å¯ä»¥å®Œæˆæ‰€æœ‰æ²¡æœ‰ DOM å°±ä¸èƒ½åšçš„æ‰€æœ‰é…ç½®ï¼Œå¹¶å¼€å§‹è·å–æ‰€æœ‰ä½ éœ€è¦çš„æ•°æ®ï¼›å¦‚æœéœ€è¦è®¾ç½®äº‹ä»¶ç›‘å¬ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™å®Œæˆ\n* `componentWillReceiveProps` -- è¿™ä¸ªå‘¨æœŸå‡½æ•°ä½œç”¨äºç‰¹å®šçš„ prop æ”¹å˜å¯¼è‡´çš„ state è½¬æ¢\n* `shouldComponentUpdate` -- å¦‚æœä½ æ‹…å¿ƒç»„ä»¶è¿‡åº¦æ¸²æŸ“ï¼Œ`shouldComponentUpdate` æ˜¯ä¸€ä¸ªæ”¹å–„æ€§èƒ½çš„åœ°æ–¹ï¼Œå› ä¸ºå¦‚æœç»„ä»¶æ¥æ”¶äº†æ–°çš„ `prop`ï¼Œ å®ƒå¯ä»¥é˜»æ­¢(ç»„ä»¶)é‡æ–°æ¸²æŸ“ã€‚shouldComponentUpdate åº”è¯¥è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼æ¥å†³å®šç»„ä»¶æ˜¯å¦è¦é‡æ–°æ¸²æŸ“\n* `componentWillUpdate` -- å¾ˆå°‘ä½¿ç”¨ã€‚å®ƒå¯ä»¥ç”¨äºä»£æ›¿ç»„ä»¶çš„ `componentWillReceiveProps` å’Œ `shouldComponentUpdate`(ä½†ä¸èƒ½è®¿é—®ä¹‹å‰çš„ props)\n* `componentDidUpdate` -- å¸¸ç”¨äºæ›´æ–° DOMï¼Œå“åº” prop æˆ– state çš„æ”¹å˜\n* `componentWillUnmount` -- åœ¨è¿™ä½ å¯ä»¥å–æ¶ˆç½‘ç»œè¯·æ±‚ï¼Œæˆ–è€…ç§»é™¤æ‰€æœ‰ä¸ç»„ä»¶ç›¸å…³çš„äº‹ä»¶ç›‘å¬å™¨\n\n### åº”è¯¥åœ¨ React ç»„ä»¶çš„ä½•å¤„å‘èµ· Ajax è¯·æ±‚\nåœ¨ React ç»„ä»¶ä¸­ï¼Œåº”è¯¥åœ¨ `componentDidMount` ä¸­å‘èµ·ç½‘ç»œè¯·æ±‚ã€‚è¿™ä¸ªæ–¹æ³•ä¼šåœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡â€œæŒ‚è½½â€(è¢«æ·»åŠ åˆ° DOM)æ—¶æ‰§è¡Œï¼Œåœ¨ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¸­ä»…ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä½ ä¸èƒ½ä¿è¯åœ¨ç»„ä»¶æŒ‚è½½ä¹‹å‰ Ajax è¯·æ±‚å·²ç»å®Œæˆï¼Œå¦‚æœæ˜¯è¿™æ ·ï¼Œä¹Ÿå°±æ„å‘³ç€ä½ å°†å°è¯•åœ¨ä¸€ä¸ªæœªæŒ‚è½½çš„ç»„ä»¶ä¸Šè°ƒç”¨ setStateï¼Œè¿™å°†ä¸èµ·ä½œç”¨ã€‚åœ¨ `componentDidMount` ä¸­å‘èµ·ç½‘ç»œè¯·æ±‚å°†ä¿è¯è¿™æœ‰ä¸€ä¸ªç»„ä»¶å¯ä»¥æ›´æ–°äº†ã€‚\n\n### ä½•ä¸ºå—æ§ç»„ä»¶(controlled component)\nåœ¨ HTML ä¸­ï¼Œç±»ä¼¼ `<input>`, `<textarea>` å’Œ `<select>` è¿™æ ·çš„è¡¨å•å…ƒç´ ä¼šç»´æŠ¤è‡ªèº«çš„çŠ¶æ€ï¼Œå¹¶åŸºäºç”¨æˆ·çš„è¾“å…¥æ¥æ›´æ–°ã€‚å½“ç”¨æˆ·æäº¤è¡¨å•æ—¶ï¼Œå‰é¢æåˆ°çš„å…ƒç´ çš„å€¼å°†éšè¡¨å•ä¸€èµ·è¢«å‘é€ã€‚ä½†åœ¨ React ä¸­ä¼šæœ‰äº›ä¸åŒï¼ŒåŒ…å«è¡¨å•å…ƒç´ çš„ç»„ä»¶å°†ä¼šåœ¨ state ä¸­è¿½è¸ªè¾“å…¥çš„å€¼ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨å›è°ƒå‡½æ•°æ—¶ï¼Œå¦‚ `onChange` ä¼šæ›´æ–° stateï¼Œé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚ä¸€ä¸ªè¾“å…¥è¡¨å•å…ƒç´ ï¼Œå®ƒçš„å€¼é€šè¿‡ React çš„è¿™ç§æ–¹å¼æ¥æ§åˆ¶ï¼Œè¿™æ ·çš„å…ƒç´ å°±è¢«ç§°ä¸º\"å—æ§å…ƒç´ \"ã€‚\n\n### åœ¨ React ä¸­ï¼Œrefs çš„ä½œç”¨æ˜¯ä»€ä¹ˆ\nRefs å¯ä»¥ç”¨äºè·å–ä¸€ä¸ª DOM èŠ‚ç‚¹æˆ–è€… React ç»„ä»¶(ç»„ä»¶å®ä¾‹)çš„å¼•ç”¨ã€‚ä½•æ—¶ä½¿ç”¨ refs çš„å¥½çš„ç¤ºä¾‹æœ‰ç®¡ç†ç„¦ç‚¹/æ–‡æœ¬é€‰æ‹©ï¼Œè§¦å‘å‘½ä»¤åŠ¨ç”»ï¼Œæˆ–è€…å’Œç¬¬ä¸‰æ–¹ DOM åº“é›†æˆã€‚ä½ åº”è¯¥é¿å…ä½¿ç”¨ String ç±»å‹çš„ Refs å’Œå†…è”çš„ ref å›è°ƒã€‚Refs å›è°ƒæ˜¯ React æ‰€æ¨èçš„ã€‚\n\n### ä¸‰ç§refæ–¹å¼\n1. stringç±»å‹ç»‘å®š\nç±»ä¼¼äºvueä¸­çš„refç»‘å®šæ–¹å¼ï¼Œå¯ä»¥é€šè¿‡this.refs.ç»‘å®šçš„refçš„åå­—è·å–åˆ°èŠ‚ç‚¹domï¼Œæ³¨æ„çš„æ˜¯è¿™ç§æ–¹å¼å·²ç»ä¸è¢«æœ€æ–°ç‰ˆçš„reactæ¨èä½¿ç”¨ï¼Œæœ‰å¯èƒ½ä¼šåœ¨æœªæ¥ç‰ˆæœ¬ä¸­é—å¼ƒã€‚\n```js\nfocus = () => {\n  this.refs.inputRef.focus()\n}\n<input ref=\"inputRef\"/>\n\n// è·å–å­ç»„ä»¶çš„div\n// çˆ¶ç»„ä»¶\n<Child myRef={this.state.myDiv}/>\n// å­ç»„ä»¶\n <div ref={this.props.myRef}>æˆ‘æ˜¯å­ç»„ä»¶</div>\n```\n\n2. react.CreateRef()\né€šè¿‡åœ¨classä¸­ä½¿ç”¨React.createRef()æ–¹æ³•åˆ›å»ºä¸€äº›å˜é‡ï¼Œå¯ä»¥å°†è¿™äº›å˜é‡ç»‘å®šåˆ°æ ‡ç­¾çš„refä¸­ï¼Œè¯¥å˜é‡çš„currentåˆ™æŒ‡å‘ç»‘å®šçš„æ ‡ç­¾domã€‚\n```js\ninputRef = React.createRef()\nfocus = () => {\n  this.inputRef.current.focus()\n}\n<input ref={this.inputRef}/>\n```\n\n3. å‡½æ•°å½¢å¼\nåœ¨classä¸­å£°æ˜å‡½æ•°ï¼Œåœ¨å‡½æ•°ä¸­ç»‘å®šrefä½¿ç”¨è¿™ç§æ–¹æ³•å¯ä»¥å°†å­ç»„ä»¶æš´éœ²ç»™çˆ¶ç»„ä»¶ä»¥ä½¿å¾—çˆ¶ç»„ä»¶èƒ½å¤Ÿè°ƒç”¨å­ç»„ä»¶çš„æ–¹æ³•\n```js\ninputRef = null\nfocus = () => {\n  this.inputRef.focus()\n}\n<input ref={(el)=>this.inputRef=el}/>\n```\n\n4. useRef\n```js\nfunction UseRefDemo() {\n  const inputRef = useRef(null as any)\n\n  const handleFocusInput = () => {\n    inputRef.current.focus()\n  }\n\n  return (\n    <div>\n      <input ref={inputRef} />\n      <button onClick={handleFocusInput}>click focus</button>\n    </div>\n  )\n}\n```\n\n5. forwardRef(è·å–ç»„ä»¶å†…çš„å¼•ç”¨)\n```js\n// å­ç»„ä»¶\nconst Child = forwardRef((props, ref)=>{\n  return (\n  \t<div ref={ref}>{props.txt}</div>\n  )\n})\n\n// çˆ¶ç»„ä»¶\n<Child ref={this.state.myDiv} txt=\"parent props txt\"/>\n```\n\næ³¨æ„: reactå¹¶ä¸æ¨èè¿‡åº¦ä½¿ç”¨refï¼Œå¦‚æœèƒ½é€šè¿‡stateåšåˆ°çš„äº‹æƒ…ï¼Œå°±ä¸åº”è¯¥ä½¿ç”¨ refs åœ¨ä½ çš„ app ä¸­â€œè®©äº‹æƒ…å‘ç”Ÿâ€ã€‚è¿‡åº¦ä½¿ç”¨refå¹¶ä¸ç¬¦åˆæ•°æ®é©±åŠ¨çš„æ€æƒ³ã€‚\n\n### ä½•ä¸ºé«˜é˜¶ç»„ä»¶(higher order component)\né«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ªä»¥ç»„ä»¶ä¸ºå‚æ•°å¹¶è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶çš„å‡½æ•°ã€‚HOC è¿è¡Œä½ é‡ç”¨ä»£ç ã€é€»è¾‘å’Œå¼•å¯¼æŠ½è±¡ã€‚æœ€å¸¸è§çš„å¯èƒ½æ˜¯ Redux çš„ `connect` å‡½æ•°ã€‚é™¤äº†ç®€å•åˆ†äº«å·¥å…·åº“å’Œç®€å•çš„ç»„åˆï¼ŒHOCæœ€å¥½çš„æ–¹å¼æ˜¯å…±äº« React ç»„ä»¶ä¹‹é—´çš„è¡Œä¸ºã€‚å¦‚æœä½ å‘ç°ä½ åœ¨ä¸åŒçš„åœ°æ–¹å†™äº†å¤§é‡ä»£ç æ¥åšåŒä¸€ä»¶äº‹æ—¶ï¼Œå°±åº”è¯¥è€ƒè™‘å°†ä»£ç é‡æ„ä¸ºå¯é‡ç”¨çš„ HOCã€‚\nè£…é¥°å™¨@decoration\nä¼˜ç‚¹:\n- é€»è¾‘å¤ç”¨\n- ä¸å½±å“è¢«åŒ…è£¹ç»„ä»¶çš„é€»è¾‘\n\nç¼ºç‚¹:\n- ä¼ é€’çš„propså’ŒåŒ…è£¹ç»„ä»¶çš„propså‘ç”Ÿé‡åä¼šè¦†ç›–\n- ç»„ä»¶åµŒå¥—å¯¼è‡´å±‚çº§è¿‡æ·±\n\n### æ¸²æŸ“å±æ€§(render props)\nRender prop æ˜¯ä¸€ä¸ªå‘ŠçŸ¥ç»„ä»¶éœ€è¦æ¸²æŸ“ä»€ä¹ˆå†…å®¹çš„å‡½æ•° prop\nä¼˜ç‚¹:\n- é€»è¾‘å¤ç”¨\n- æ•°æ®å…±äº«\n\nç¼ºç‚¹:\n- åµŒå¥—\n- æ— æ³•åœ¨returnè¯­å¥å¤–è®¿é—®æ•°æ®\n\n### ä½¿ç”¨ç®­å¤´å‡½æ•°(arrow functions)çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆ\n* ä½œç”¨åŸŸå®‰å…¨ï¼šåœ¨ç®­å¤´å‡½æ•°ä¹‹å‰ï¼Œæ¯ä¸€ä¸ªæ–°åˆ›å»ºçš„å‡½æ•°éƒ½æœ‰å®šä¹‰è‡ªèº«çš„ `this` å€¼(åœ¨æ„é€ å‡½æ•°ä¸­æ˜¯æ–°å¯¹è±¡ï¼›åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå‡½æ•°è°ƒç”¨ä¸­çš„ `this` æ˜¯æœªå®šä¹‰çš„ï¼›å¦‚æœå‡½æ•°è¢«ç§°ä¸ºâ€œå¯¹è±¡æ–¹æ³•â€ï¼Œåˆ™ä¸ºåŸºç¡€å¯¹è±¡ç­‰)ï¼Œä½†ç®­å¤´å‡½æ•°ä¸ä¼šï¼Œå®ƒä¼šä½¿ç”¨å°é—­æ‰§è¡Œä¸Šä¸‹æ–‡çš„ `this` å€¼ã€‚\n* ç®€å•ï¼šç®­å¤´å‡½æ•°æ˜“äºé˜…è¯»å’Œä¹¦å†™\n* æ¸…æ™°ï¼šå½“ä¸€åˆ‡éƒ½æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œä»»ä½•å¸¸è§„å‡½æ•°éƒ½å¯ä»¥ç«‹å³ç”¨äºå®šä¹‰ä½œç”¨åŸŸã€‚å¼€å‘è€…æ€»æ˜¯å¯ä»¥æŸ¥æ‰¾ next-higher å‡½æ•°è¯­å¥ï¼Œä»¥æŸ¥çœ‹ `this` çš„å€¼\n\n### ä¸ºä»€ä¹ˆå»ºè®®ä¼ é€’ç»™ setState çš„å‚æ•°æ˜¯ä¸€ä¸ª callback è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡\nå› ä¸º `this.props` å’Œ `this.state` çš„æ›´æ–°å¯èƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä¸èƒ½ä¾èµ–å®ƒä»¬çš„å€¼å»è®¡ç®—ä¸‹ä¸€ä¸ª stateã€‚setStateåœ¨ç”Ÿå‘½å‘¨æœŸé‡Œæ˜¯å¼‚æ­¥çš„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ç»„ä»¶é‡æ–°æ¸²æŸ“å®Œæˆåçš„å›è°ƒã€‚\n\n### é™¤äº†åœ¨æ„é€ å‡½æ•°ä¸­ç»‘å®š `this`ï¼Œè¿˜æœ‰å…¶å®ƒæ–¹å¼å—\nåœ¨ constructor é‡Œä½¿ç”¨ bindã€‚åœ¨å›è°ƒä¸­ä½ å¯ä»¥ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œä½†é—®é¢˜æ˜¯æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å›è°ƒã€‚\n\n### æ€ä¹ˆé˜»æ­¢ç»„ä»¶çš„æ¸²æŸ“\nåœ¨ç»„ä»¶çš„ `render` æ–¹æ³•ä¸­è¿”å› `null` å¹¶ä¸ä¼šå½±å“è§¦å‘ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•\n\n### react ä¸ vue æ•°ç»„ä¸­ key çš„ä½œç”¨æ˜¯ä»€ä¹ˆ\ndiffç®—æ³•éœ€è¦æ¯”å¯¹è™šæ‹Ÿdomçš„ä¿®æ”¹ï¼Œç„¶åå¼‚æ­¥çš„æ¸²æŸ“åˆ°é¡µé¢ä¸­ï¼Œå½“å‡ºç°å¤§é‡ç›¸åŒçš„æ ‡ç­¾æ—¶ï¼Œvnodeä¼šé¦–å…ˆåˆ¤æ–­keyå’Œæ ‡ç­¾åæ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´å†å»åˆ¤æ–­å­èŠ‚ç‚¹ä¸€è‡´ï¼Œä½¿ç”¨keyå¯ä»¥å¸®åŠ©diffç®—æ³•æå‡åˆ¤æ–­çš„é€Ÿåº¦ï¼Œåœ¨é¡µé¢\né‡æ–°æ¸²æŸ“æ—¶æ›´å¿«æ¶ˆè€—æ›´å°‘ã€‚\n\n### (åœ¨æ„é€ å‡½æ•°ä¸­)è°ƒç”¨ super(props) çš„ç›®çš„æ˜¯ä»€ä¹ˆ\nåœ¨ `super()` è¢«è°ƒç”¨ä¹‹å‰ï¼Œå­ç±»æ˜¯ä¸èƒ½ä½¿ç”¨ `this` çš„ï¼Œåœ¨ ES2015 ä¸­ï¼Œå­ç±»å¿…é¡»åœ¨ `constructor` ä¸­è°ƒç”¨ `super()`ã€‚ä¼ é€’ `props` ç»™ `super()` çš„åŸå› åˆ™æ˜¯ä¾¿äº(åœ¨å­ç±»ä¸­)èƒ½åœ¨ `constructor` è®¿é—® `this.props`ã€‚\n\n### ä½•ä¸º JSX\nJSX æ˜¯ JavaScript è¯­æ³•çš„ä¸€ç§è¯­æ³•æ‰©å±•ï¼Œå¹¶æ‹¥æœ‰ JavaScript çš„å…¨éƒ¨åŠŸèƒ½ã€‚JSX ç”Ÿäº§ React \"å…ƒç´ \"ï¼Œä½ å¯ä»¥å°†ä»»ä½•çš„ JavaScript è¡¨è¾¾å¼å°è£…åœ¨èŠ±æ‹¬å·é‡Œï¼Œç„¶åå°†å…¶åµŒå…¥åˆ° JSX ä¸­ã€‚åœ¨ç¼–è¯‘å®Œæˆä¹‹åï¼ŒJSX è¡¨è¾¾å¼å°±å˜æˆäº†å¸¸è§„çš„ JavaScript å¯¹è±¡ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ `if` è¯­å¥å’Œ `for` å¾ªç¯å†…éƒ¨ä½¿ç”¨ JSXï¼Œå°†å®ƒèµ‹å€¼ç»™å˜é‡ï¼Œæ¥å—å®ƒä½œä¸ºå‚æ•°ï¼Œå¹¶ä»å‡½æ•°ä¸­è¿”å›å®ƒã€‚\n\nç¼ºç‚¹ï¼šb&& å¼ºè½¬æˆbooleanç±»å‹ å¦åˆ™å¦‚æœb=0æ¸²æŸ“å‡º0\n\n### æ€ä¹ˆç”¨ React.createElement é‡å†™ä¸‹é¢çš„ä»£ç \n\nQuestionï¼š\n\n```js\nconst element = (\n  <h1 className=\"greeting\">\n    Hello, world!\n  </h1>\n);\n```\n\nAnswerï¼š\n\n```js\nconst element = React.createElement(\n  'h1',\n  {className: 'greeting'},\n  'Hello, world!'\n);\n```\n\n### ä½•ä¸º `Children`\nåœ¨JSXè¡¨è¾¾å¼ä¸­ï¼Œä¸€ä¸ªå¼€å§‹æ ‡ç­¾(æ¯”å¦‚`<a>`)å’Œä¸€ä¸ªå…³é—­æ ‡ç­¾(æ¯”å¦‚`</a>`)ä¹‹é—´çš„å†…å®¹ä¼šä½œä¸ºä¸€ä¸ªç‰¹æ®Šçš„å±æ€§`props.children`è¢«è‡ªåŠ¨ä¼ é€’ç»™åŒ…å«ç€å®ƒçš„ç»„ä»¶ã€‚\n\nè¿™ä¸ªå±æ€§æœ‰è®¸å¤šå¯ç”¨çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬ `React.Children.map`ï¼Œ`React.Children.forEach`ï¼Œ `React.Children.count`ï¼Œ `React.Children.only`ï¼Œ`React.Children.toArray`ã€‚\n\n### åœ¨ React ä¸­ï¼Œä½•ä¸º state\nState å’Œ props ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯ç§æœ‰çš„ï¼Œå¹¶ä¸”å®Œå…¨ç”±ç»„ä»¶è‡ªèº«æ§åˆ¶ã€‚State æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒæœ‰æ•°æ®ï¼Œå¹¶å†³å®šç»„ä»¶å¦‚ä½•æ¸²æŸ“çš„å¯¹è±¡ã€‚\n\n### ä½ ä¸ºä½•æ’æ–¥ create-react-app\nåœ¨ä½ æ’æ–¥ä¹‹å‰ï¼Œä½ å¹¶ä¸èƒ½å»é…ç½® webpack æˆ– babel presetsã€‚\n\n### ä½•ä¸º redux\nRedux çš„åŸºæœ¬æ€æƒ³æ˜¯æ•´ä¸ªåº”ç”¨çš„ state ä¿æŒåœ¨ä¸€ä¸ªå•ä¸€çš„ store ä¸­ã€‚store å°±æ˜¯ä¸€ä¸ªç®€å•çš„ javascript å¯¹è±¡ï¼Œè€Œæ”¹å˜åº”ç”¨ state çš„å”¯ä¸€æ–¹å¼æ˜¯åœ¨åº”ç”¨ä¸­è§¦å‘ actionsï¼Œç„¶åä¸ºè¿™äº› actions ç¼–å†™ reducers æ¥ä¿®æ”¹ stateã€‚æ•´ä¸ª state è½¬åŒ–æ˜¯åœ¨ reducers ä¸­å®Œæˆï¼Œå¹¶ä¸”ä¸åº”è¯¥ç”±ä»»ä½•å‰¯ä½œç”¨ã€‚\n\n### åœ¨ Redux ä¸­ï¼Œä½•ä¸º store\nStore æ˜¯ä¸€ä¸ª javascript å¯¹è±¡ï¼Œå®ƒä¿å­˜äº†æ•´ä¸ªåº”ç”¨çš„ stateã€‚ä¸æ­¤åŒæ—¶ï¼ŒStore ä¹Ÿæ‰¿æ‹…ä»¥ä¸‹èŒè´£ï¼š\n\n* å…è®¸é€šè¿‡ `getState()` è®¿é—® state\n* è¿è¡Œé€šè¿‡ `dispatch(action)` æ”¹å˜ state\n* é€šè¿‡ `subscribe(listener)` æ³¨å†Œ listeners\n* é€šè¿‡ `subscribe(listener)` è¿”å›çš„å‡½æ•°å¤„ç† listeners çš„æ³¨é”€\n\n### ä½•ä¸º action\nActions æ˜¯ä¸€ä¸ªçº¯ javascript å¯¹è±¡ï¼Œå®ƒä»¬å¿…é¡»æœ‰ä¸€ä¸ª type å±æ€§è¡¨æ˜æ­£åœ¨æ‰§è¡Œçš„ action çš„ç±»å‹ã€‚å®è´¨ä¸Šï¼Œaction æ˜¯å°†æ•°æ®ä»åº”ç”¨ç¨‹åºå‘é€åˆ° store çš„æœ‰æ•ˆè½½è·ã€‚\n\n### ä½•ä¸º reducer\nä¸€ä¸ª reducer æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œè¯¥å‡½æ•°ä»¥å…ˆå‰çš„ state å’Œä¸€ä¸ª action ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸‹ä¸€ä¸ª stateã€‚\n\n### Redux Thunk çš„ä½œç”¨æ˜¯ä»€ä¹ˆ\nRedux thunk æ˜¯ä¸€ä¸ªå…è®¸ä½ ç¼–å†™è¿”å›ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯ä¸€ä¸ª action çš„ actions creators çš„ä¸­é—´ä»¶ã€‚å¦‚æœæ»¡è¶³æŸä¸ªæ¡ä»¶ï¼Œthunk åˆ™å¯ä»¥ç”¨æ¥å»¶è¿Ÿ action çš„æ´¾å‘(dispatch)ï¼Œè¿™å¯ä»¥å¤„ç†å¼‚æ­¥ action çš„æ´¾å‘(dispatch)ã€‚\n\n### ä½•ä¸ºçº¯å‡½æ•°(pure function)\nä¸€ä¸ªçº¯å‡½æ•°æ˜¯ä¸€ä¸ªä¸ä¾èµ–äºä¸”ä¸æ”¹å˜å…¶ä½œç”¨åŸŸä¹‹å¤–çš„å˜é‡çŠ¶æ€çš„å‡½æ•°ï¼Œè¿™ä¹Ÿæ„å‘³ç€ä¸€ä¸ªçº¯å‡½æ•°å¯¹äºåŒæ ·çš„å‚æ•°æ€»æ˜¯è¿”å›åŒæ ·çš„ç»“æœã€‚\n- åŒè¾“å…¥åŒè¾“å‡º\n- æ— å‰¯ä½œç”¨(å‡½æ•°å†…éƒ¨çš„æ“ä½œä¸ä¼šå¯¹å¤–éƒ¨äº§ç”Ÿå½±å“(å¦‚ä¿®æ”¹å…¨å±€å˜é‡çš„å€¼ã€ä¿®æ”¹ dom èŠ‚ç‚¹ç­‰))\n\n### reduxæœ‰å“ªäº›ä¸­é—´ä»¶ï¼Œä½œç”¨ï¼Ÿ\nä¸­é—´ä»¶æä¾›ç¬¬ä¸‰æ–¹æ’ä»¶çš„æ¨¡å¼ï¼Œè‡ªå®šä¹‰æ‹¦æˆª action -> reducer çš„è¿‡ç¨‹ã€‚å˜ä¸º action -> middlewares -> reducer ã€‚è¿™ç§æœºåˆ¶å¯ä»¥è®©æˆ‘ä»¬æ”¹å˜æ•°æ®æµï¼Œå®ç°å¦‚å¼‚æ­¥ action ï¼Œaction è¿‡æ»¤ï¼Œæ—¥å¿—è¾“å‡ºï¼Œå¼‚å¸¸æŠ¥å‘Šç­‰åŠŸèƒ½ã€‚\n\nredux-loggerï¼šæä¾›æ—¥å¿—è¾“å‡º\n\nredux-thunkï¼šå¤„ç†å¼‚æ­¥æ“ä½œ\n\nredux-promiseï¼šå¤„ç†å¼‚æ­¥æ“ä½œï¼ŒactionCreatorçš„è¿”å›å€¼æ˜¯promise\n\n### ç¤ºä¾‹é¡¹ç›®\n* [React Spotify](https://github.com/Pau1fitz/react-spotify)\n* [React Soundcloud](https://github.com/andrewngu/sound-redux)\n\n### è™šæ‹Ÿdom(è™šæ‹ŸèŠ‚ç‚¹)æ˜¯ç”¨JSå¯¹è±¡æ¥æ¨¡æ‹ŸçœŸå®DOMä¸­çš„èŠ‚ç‚¹\nè™šæ‹Ÿdomç›¸å½“äºåœ¨jså’ŒçœŸå®domä¸­é—´åŠ äº†ä¸€ä¸ªç¼“å­˜ï¼Œåˆ©ç”¨dom diffç®—æ³•é¿å…äº†æ²¡æœ‰å¿…è¦çš„domæ“ä½œï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ï¼šç”¨ JavaScript å¯¹è±¡ç»“æ„è¡¨ç¤º DOM æ ‘çš„ç»“æ„ï¼›ç„¶åç”¨è¿™ä¸ªæ ‘æ„å»ºä¸€ä¸ªçœŸæ­£çš„ DOM æ ‘ï¼Œæ’åˆ°æ–‡æ¡£å½“ä¸­å½“çŠ¶æ€å˜æ›´çš„æ—¶å€™ï¼Œé‡æ–°æ„é€ ä¸€æ£µæ–°çš„å¯¹è±¡æ ‘ã€‚ç„¶åç”¨æ–°çš„æ ‘å’Œæ—§çš„æ ‘è¿›è¡Œæ¯”è¾ƒï¼Œè®°å½•ä¸¤æ£µæ ‘å·®å¼‚æŠŠ2æ‰€è®°å½•çš„å·®å¼‚åº”ç”¨åˆ°æ­¥éª¤1æ‰€æ„å»ºçš„çœŸæ­£çš„DOMæ ‘ä¸Šï¼Œè§†å›¾å°±æ›´æ–°äº†ã€‚æ’å…¥æ–°ç»„ä»¶æœ‰äº†keyå¯ä»¥å¸®åŠ©reactæ‰¾åˆ°æ˜ å°„ã€‚\n\n- çœŸå®çš„å…ƒç´ èŠ‚ç‚¹\n```html\n<div id=\"wrap\">\n    <p class=\"title\">Hello world!</p>\n</div>\n```\n\n- vnode\n```js\n{\n    tag:'div',\n    attrs:{\n        id:'wrap'\n    },\n    children:[\n        {\n            tag:'p',\n            text:'Hello world!',\n            attrs:{\n                class:'title',\n            }\n        }\n    ]\n}\n```\n\n### ä¸ºä»€ä¹ˆä½¿ç”¨è™šæ‹Ÿdom\nèµ·åˆæˆ‘ä»¬åœ¨ä½¿ç”¨JS/JQueryæ—¶ï¼Œä¸å¯é¿å…çš„ä¼šå¤§é‡æ“ä½œDOMï¼Œè€ŒDOMçš„å˜åŒ–åˆä¼šå¼•å‘å›æµæˆ–é‡ç»˜ï¼Œä»è€Œé™ä½é¡µé¢æ¸²æŸ“æ€§èƒ½ã€‚é‚£ä¹ˆæ€æ ·æ¥å‡å°‘å¯¹DOMçš„æ“ä½œå‘¢ï¼Ÿæ­¤æ—¶è™šæ‹ŸDOM\nåº”ç”¨è€Œç”Ÿï¼Œæ‰€ä»¥è™šæ‹ŸDOMå‡ºç°çš„ä¸»è¦ç›®çš„å°±æ˜¯`ä¸ºäº†å‡å°‘é¢‘ç¹æ“ä½œDOMè€Œå¼•èµ·å›æµé‡ç»˜æ‰€å¼•å‘çš„æ€§èƒ½é—®é¢˜çš„`\n\n### è™šæ‹Ÿdomçš„ä½œç”¨\nå…¼å®¹æ€§å¥½ã€‚å› ä¸ºVnodeæœ¬è´¨æ˜¯JSå¯¹è±¡ï¼Œæ‰€ä»¥ä¸ç®¡Nodeè¿˜æ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œéƒ½å¯ä»¥æ“ä½œï¼›\nå‡å°‘äº†å¯¹Domçš„æ“ä½œã€‚é¡µé¢ä¸­çš„æ•°æ®å’ŒçŠ¶æ€å˜åŒ–ï¼Œéƒ½é€šè¿‡Vnodeå¯¹æ¯”ï¼Œåªéœ€è¦åœ¨æ¯”å¯¹å®Œä¹‹åæ›´æ–°DOMï¼Œä¸éœ€è¦é¢‘ç¹æ“ä½œï¼Œæé«˜äº†é¡µé¢æ€§èƒ½ã€‚\n\næ¯ä¸ªsetStateé‡æ–°æ¸²æŸ“æ•´ä¸ªå­æ ‘æ ‡è®°ä¸ºdirtyã€‚ å¦‚æœè¦å‹ç¼©æ€§èƒ½ï¼Œè¯·å°½å¯èƒ½è°ƒç”¨ setStateï¼Œå¹¶ä½¿ç”¨shouldComponentUpdate æ¥é˜²æ­¢é‡æ–°æ¸²æŸ“å¤§å‹å­æ ‘ã€‚æŠŠæ ‘å½¢ç»“æ„æŒ‰ç…§å±‚çº§åˆ†è§£ï¼Œåªæ¯”è¾ƒåŒçº§å…ƒç´ ã€‚ç»™åˆ—è¡¨ç»“æ„çš„æ¯ä¸ªå•å…ƒæ·»åŠ å”¯ä¸€çš„keyå±æ€§ï¼Œæ–¹ä¾¿æ¯”è¾ƒã€‚pureComponent(æµ…æ¯”è¾ƒ)+immutable æ›¿æ¢æˆpreact\n\n### diffç®—æ³• \n> ä¸€å¼€å§‹ä¼šæ ¹æ®çœŸå®DOMç”Ÿæˆè™šæ‹ŸDOMï¼Œå½“è™šæ‹ŸDOMæŸä¸ªèŠ‚ç‚¹çš„æ•°æ®æ”¹å˜åä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„Vnodeï¼Œç„¶åVNodeå’ŒoldVnodeå¯¹æ¯”ï¼ŒæŠŠä¸åŒçš„åœ°æ–¹ä¿®æ”¹åœ¨çœŸå®DOMä¸Šï¼Œæœ€åå†ä½¿å¾—oldVnodeçš„å€¼ä¸ºVnodeã€‚\n\n`diffè¿‡ç¨‹å°±æ˜¯è°ƒç”¨patchå‡½æ•°ï¼Œæ¯”è¾ƒæ–°è€èŠ‚ç‚¹ï¼Œä¸€è¾¹æ¯”è¾ƒä¸€è¾¹ç»™çœŸå®DOMæ‰“è¡¥ä¸(patch)ï¼›`\n\n![patch](http://cdn.mydearest.cn/blog/images/patch.png)\n\næŠŠæ ‘å½¢ç»“æ„æŒ‰ç…§å±‚çº§åˆ†è§£ï¼Œåªæ¯”è¾ƒåŒçº§å…ƒç´ ã€‚\n\nç»™åˆ—è¡¨ç»“æ„çš„æ¯ä¸ªå•å…ƒæ·»åŠ å”¯ä¸€çš„keyå±æ€§ï¼Œæ–¹ä¾¿æ¯”è¾ƒã€‚\n\nReact åªä¼šåŒ¹é…ç›¸åŒ class çš„ componentï¼ˆè¿™é‡Œé¢çš„classæŒ‡çš„æ˜¯ç»„ä»¶çš„åå­—ï¼‰\n\nåˆå¹¶æ“ä½œï¼Œè°ƒç”¨ component çš„ setState æ–¹æ³•çš„æ—¶å€™, React å°†å…¶æ ‡è®°ä¸º dirty.åˆ°æ¯ä¸€ä¸ªäº‹ä»¶å¾ªç¯ç»“æŸ, React æ£€æŸ¥æ‰€æœ‰æ ‡è®° dirty çš„ component é‡æ–°ç»˜åˆ¶.\n\né€‰æ‹©æ€§å­æ ‘æ¸²æŸ“ã€‚å¼€å‘äººå‘˜å¯ä»¥é‡å†™shouldComponentUpdateæé«˜diffçš„æ€§èƒ½ã€‚\n\ndiffçš„åªæ˜¯html tagï¼Œå¹¶æ²¡æœ‰diffæ•°æ®ã€‚\n\n### setStateçš„ç†è§£\n- setState åªåœ¨`åˆæˆäº‹ä»¶`å’Œ`é’©å­å‡½æ•°(é™¤äº†componentDidUpdate)`ä¸­æ˜¯â€œå¼‚æ­¥â€çš„ï¼Œåœ¨åŸç”Ÿäº‹ä»¶å’Œ setTimeout ä¸­éƒ½æ˜¯åŒæ­¥çš„ã€‚\n- setState çš„â€œå¼‚æ­¥â€å¹¶ä¸æ˜¯è¯´å†…éƒ¨ç”±å¼‚æ­¥ä»£ç å®ç°ï¼Œå…¶å®æœ¬èº«æ‰§è¡Œçš„è¿‡ç¨‹å’Œä»£ç éƒ½æ˜¯åŒæ­¥çš„ï¼Œåªæ˜¯åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°çš„è°ƒç”¨é¡ºåºåœ¨æ›´æ–°ä¹‹å‰ï¼Œå¯¼è‡´åœ¨åˆæˆäº‹ä»¶å’Œé’©å­å‡½æ•°ä¸­æ²¡æ³•ç«‹é©¬æ‹¿åˆ°æ›´æ–°åçš„å€¼ï¼Œå½¢æˆäº†æ‰€è°“çš„â€œå¼‚æ­¥â€ï¼Œå½“ç„¶å¯ä»¥é€šè¿‡ç¬¬äºŒä¸ªå‚æ•° setState(partialState, callback) ä¸­çš„callbackæ‹¿åˆ°æ›´æ–°åçš„ç»“æœã€‚\n- setState çš„æ‰¹é‡æ›´æ–°ä¼˜åŒ–ä¹Ÿæ˜¯å»ºç«‹åœ¨â€œå¼‚æ­¥â€ï¼ˆåˆæˆäº‹ä»¶ã€é’©å­å‡½æ•°ï¼‰ä¹‹ä¸Šçš„ï¼Œåœ¨åŸç”Ÿäº‹ä»¶å’ŒsetTimeout ä¸­ä¸ä¼šæ‰¹é‡æ›´æ–°ï¼Œåœ¨â€œå¼‚æ­¥â€ä¸­å¦‚æœå¯¹åŒä¸€ä¸ªå€¼è¿›è¡Œå¤šæ¬¡setStateï¼ŒsetStateçš„æ‰¹é‡æ›´æ–°ç­–ç•¥ä¼šå¯¹å…¶è¿›è¡Œè¦†ç›–ï¼Œå–æœ€åä¸€æ¬¡çš„æ‰§è¡Œï¼Œå¦‚æœæ˜¯åŒæ—¶setStateå¤šä¸ªä¸åŒçš„å€¼ï¼Œåœ¨æ›´æ–°æ—¶ä¼šå¯¹å…¶è¿›è¡Œåˆå¹¶æ‰¹é‡æ›´æ–°ã€‚\n\n- å¼‚æ­¥ä¸åŒæ­¥: setStateå¹¶ä¸æ˜¯å•çº¯çš„å¼‚æ­¥æˆ–åŒæ­¥ï¼Œè¿™å…¶å®ä¸è°ƒç”¨æ—¶çš„ç¯å¢ƒç›¸å…³:\n  - åœ¨ åˆæˆäº‹ä»¶ å’Œ ç”Ÿå‘½å‘¨æœŸé’©å­(é™¤ componentDidUpdate) ä¸­ï¼ŒsetStateæ˜¯\"å¼‚æ­¥\"çš„ï¼›\n    - åŸå› : å› ä¸ºåœ¨setStateçš„å®ç°ä¸­ï¼Œæœ‰ä¸€ä¸ªåˆ¤æ–­: å½“æ›´æ–°ç­–ç•¥æ­£åœ¨äº‹åŠ¡æµçš„æ‰§è¡Œä¸­æ—¶ï¼Œè¯¥ç»„ä»¶æ›´æ–°ä¼šè¢«æ¨å…¥dirtyComponentsé˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œï¼›å¦åˆ™ï¼Œå¼€å§‹æ‰§è¡ŒbatchedUpdatesé˜Ÿåˆ—æ›´æ–°ï¼›\n\n  - åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­è°ƒç”¨ä¸­ï¼Œæ›´æ–°ç­–ç•¥éƒ½å¤„äºæ›´æ–°ä¹‹å‰ï¼Œç»„ä»¶ä»å¤„äºäº‹åŠ¡æµä¸­ï¼Œè€ŒcomponentDidUpdateæ˜¯åœ¨æ›´æ–°ä¹‹åï¼Œæ­¤æ—¶ç»„ä»¶å·²ç»ä¸åœ¨äº‹åŠ¡æµä¸­äº†ï¼Œå› æ­¤åˆ™ä¼šåŒæ­¥æ‰§è¡Œï¼›\n  åœ¨åˆæˆäº‹ä»¶ä¸­ï¼ŒReact æ˜¯åŸºäº äº‹åŠ¡æµå®Œæˆçš„äº‹ä»¶å§”æ‰˜æœºåˆ¶ å®ç°ï¼Œä¹Ÿæ˜¯å¤„äºäº‹åŠ¡æµä¸­ï¼›\n    - é—®é¢˜: æ— æ³•åœ¨setStateåé©¬ä¸Šä»this.stateä¸Šè·å–æ›´æ–°åçš„å€¼ã€‚\n    - è§£å†³: å¦‚æœéœ€è¦é©¬ä¸ŠåŒæ­¥å»è·å–æ–°å€¼ï¼ŒsetStateå…¶å®æ˜¯å¯ä»¥ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°çš„ã€‚setState(updater, callback)ï¼Œåœ¨å›è°ƒä¸­å³å¯è·å–æœ€æ–°å€¼ï¼›\n\n  - åœ¨ åŸç”Ÿäº‹ä»¶ å’Œ setTimeout ä¸­ï¼ŒsetStateæ˜¯åŒæ­¥çš„ï¼Œå¯ä»¥é©¬ä¸Šè·å–æ›´æ–°åçš„å€¼ï¼›\n    - åŸå› : åŸç”Ÿäº‹ä»¶æ˜¯æµè§ˆå™¨æœ¬èº«çš„å®ç°ï¼Œä¸äº‹åŠ¡æµæ— å…³ï¼Œè‡ªç„¶æ˜¯åŒæ­¥ï¼›è€ŒsetTimeoutæ˜¯æ”¾ç½®äºå®šæ—¶å™¨çº¿ç¨‹ä¸­å»¶åæ‰§è¡Œï¼Œæ­¤æ—¶äº‹åŠ¡æµå·²ç»“æŸï¼Œå› æ­¤ä¹Ÿæ˜¯åŒæ­¥ï¼›\n\n- æ‰¹é‡æ›´æ–°\n  - åœ¨ åˆæˆäº‹ä»¶ å’Œ ç”Ÿå‘½å‘¨æœŸé’©å­ ä¸­ï¼ŒsetStateæ›´æ–°é˜Ÿåˆ—æ—¶ï¼Œå­˜å‚¨çš„æ˜¯`åˆå¹¶çŠ¶æ€(Object.assign)`ã€‚å› æ­¤å‰é¢è®¾ç½®çš„ key å€¼ä¼šè¢«åé¢æ‰€è¦†ç›–ï¼Œæœ€ç»ˆåªä¼šæ‰§è¡Œä¸€æ¬¡æ›´æ–°ï¼›\n\n- å‡½æ•°å¼\n  - ç”±äº Fiber åŠ åˆå¹¶ çš„é—®é¢˜ï¼Œå®˜æ–¹æ¨èå¯ä»¥ä¼ å…¥ å‡½æ•° çš„å½¢å¼ã€‚setState(fn)ï¼Œåœ¨fnä¸­è¿”å›æ–°çš„stateå¯¹è±¡å³å¯ï¼Œä¾‹å¦‚this.setState((state, props) => newState)ï¼›\n  - ä½¿ç”¨å‡½æ•°å¼ï¼Œå¯ä»¥ç”¨äºé¿å…setStateçš„æ‰¹é‡æ›´æ–°çš„é€»è¾‘ï¼Œä¼ å…¥çš„å‡½æ•°å°†ä¼šè¢«é¡ºåºè°ƒç”¨ï¼›\n\n- æ³¨æ„ç‚¹\n  - å½“ç»„ä»¶å·²è¢«é”€æ¯ï¼Œå¦‚æœå†æ¬¡è°ƒç”¨setStateï¼ŒReact ä¼šæŠ¥é”™è­¦å‘Šï¼Œé€šå¸¸æœ‰ä¸¤ç§è§£å†³åŠæ³•:\n    - å°†æ•°æ®æŒ‚è½½åˆ°å¤–éƒ¨ï¼Œé€šè¿‡ props ä¼ å…¥ï¼Œå¦‚æ”¾åˆ° Redux æˆ– çˆ¶çº§ä¸­ï¼›\n    - åœ¨ç»„ä»¶å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªçŠ¶æ€é‡ (isUnmounted)ï¼ŒcomponentWillUnmountä¸­æ ‡è®°ä¸º trueï¼Œåœ¨setStateå‰è¿›è¡Œåˆ¤æ–­ï¼›\n\n### æ›¿æ¢çš„å±æ€§\n\n- class/className for/htmlFor\n\n### æ’å…¥htmlæ–‡æœ¬\n```javascript\ndangerouslySetInnerHTML={{__html: content}}\n```\n\n### 15ç‰ˆæœ¬çš„ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š\n1. åˆå§‹åŒ–é˜¶æ®µ\n- constructor\n- getDefaultProps\n- getInitialState\n\n2. æŒ‚è½½é˜¶æ®µ\n- componentWillMount\n- render\n- componentDidMount\n\n3. æ›´æ–°é˜¶æ®µ\npropsï¼š\n- componentWillReceiveProps\n- shouldComponentUpdate\n- componentWillUpdate\n- render\n- componentDidUpdate\nstateï¼š\n- shouldComponentUpdate\n- componentWillUpdate\n- render\n- componentDidUpdate\n\n4. å¸è½½é˜¶æ®µ\n- componentWillUnmount\n\n### 16ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š\n1. åˆå§‹åŒ–é˜¶æ®µ\n- constructor\n- getDefaultProps\n- getInitialState\n\n2. æŒ‚è½½é˜¶æ®µ\n```js\nç»„ä»¶å®ä¾‹åŒ–ã€‚\nç»„ä»¶çš„propså‘ç”Ÿå˜åŒ–ã€‚\nçˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚\nthis.setState()ä¸ä¼šè§¦å‘getDerivedStateFromProps()ï¼Œä½†æ˜¯this.forceUpdate()ä¼šã€‚\n```\n- getDerivedStateFromProps:ä¼ å…¥nextPropså’ŒprevStateï¼Œæ ¹æ®éœ€è¦å°†propsæ˜ å°„åˆ°stateï¼Œå¦åˆ™è¿”å›null\n- render\n- componentDidMount\n\n3. æ›´æ–°é˜¶æ®µ\n- getDerivedStateFromProps\n- shouldComponentUpdate\n- render\n- getSnapshotBeforeUpdateï¼šrenderä¹‹ådomæ¸²æŸ“ä¹‹å‰ä¼šå‘ç”Ÿï¼Œè¿”å›ä¸€ä¸ªå€¼ä½œä¸ºcomponentDidUpdateçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä½¿ç”¨\n- componentDidUpdate\n\n4. å¸è½½é˜¶æ®µ\n- componentWillUnmount\n\n5. é”™è¯¯å¤„ç†\n- componentDidCatch\n\n### äº‹ä»¶æœºåˆ¶\nreactäº‹ä»¶å¹¶æ²¡æœ‰ç»‘å®šåˆ°çœŸå®çš„domèŠ‚ç‚¹ä¸Šï¼Œè€Œæ˜¯é€šè¿‡äº‹ä»¶ä»£ç†ï¼Œåœ¨æœ€å¤–å±‚çš„documentä¸Šå¯¹äº‹ä»¶è¿›è¡Œç»Ÿä¸€åˆ†å‘ã€‚\n\n### ä¸ºä»€ä¹ˆreactäº‹ä»¶è¦è‡ªå·±ç»‘å®šthis\nåœ¨reactä¸­äº‹ä»¶å¤„ç†å‡½æ•°æ˜¯ç›´æ¥è°ƒç”¨çš„ï¼Œå¹¶æ²¡æœ‰æŒ‡å®šè°ƒç”¨çš„ç»„ä»¶ï¼Œæ‰€ä»¥ä¸è¿›è¡Œæ‰‹åŠ¨ç»‘å®šçš„æƒ…å†µä¸‹ç›´æ¥è·å–åˆ°çš„thisæ˜¯ä¸å‡†ç¡®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å°†å½“å‰ç»„ä»¶ç»‘å®šåˆ°thisä¸Šã€‚\n\n### reactå’ŒåŸç”Ÿäº‹ä»¶çš„æ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆï¼Œå¯ä»¥æ··ç”¨å—\nreactçš„æ‰€æœ‰äº‹ä»¶éƒ½é€šè¿‡documentè¿›è¡Œç»Ÿä¸€åˆ†å‘ï¼Œå½“çœŸå®domè§¦å‘äº‹ä»¶åå†’æ³¡åˆ°documentåæ‰ä¼šå¯¹reactäº‹ä»¶è¿›è¡Œå¤„ç†\n\næ‰€ä»¥åŸç”Ÿäº‹ä»¶ä¼šå…ˆæ‰§è¡Œï¼Œç„¶åæ‰§è¡Œreactåˆæˆäº‹ä»¶ï¼Œæœ€åæ‰§è¡ŒçœŸæ­£åœ¨documentä¸ŠæŒ‚è½½çš„äº‹ä»¶ä¸¤è€…æœ€å¥½ä¸è¦æ··ç”¨ï¼ŒåŸç”Ÿäº‹ä»¶ä¸­å¦‚æœæ‰§è¡Œäº†stopPropagationæ–¹æ³•ï¼Œåˆ™ä¼šå¯¼è‡´å…¶ä»–reactäº‹ä»¶å¤±æ•ˆã€‚\n\n### è™šæ‹Ÿdomæ¯”æ™®é€šdomæ›´å¿«å—\né¦–æ¬¡æ¸²æŸ“æ—¶vdomä¸å…·æœ‰ä»»ä½•ä¼˜åŠ¿ç”šè‡³è¦è¿›è¡Œæ›´å¤šçš„è®¡ç®—ï¼Œæ¶ˆè€—æ›´å¤šçš„å†…å­˜ã€‚\n\nvdomçš„ä¼˜åŠ¿åœ¨äºreactçš„diffç®—æ³•å’Œæ‰¹å¤„ç†ç­–ç•¥ï¼Œreactåœ¨é¡µé¢æ›´æ–°ä¹‹å‰ï¼Œæå‰è®¡ç®—å¥½äº†å¦‚ä½•è¿›è¡Œæ›´æ–°å’Œæ¸²æŸ“domã€‚vdomä¸»è¦æ˜¯èƒ½åœ¨é‡å¤æ¸²æŸ“æ—¶å¸®åŠ©æˆ‘ä»¬è®¡ç®—å¦‚ä½•å®ç°æ›´é«˜æ•ˆçš„æ›´æ–°ï¼Œè€Œä¸æ˜¯è¯´å®ƒæ¯”domæ“ä½œå¿«ã€‚\n\n### è™šæ‹Ÿdomä¸­çš„$$typeofå±æ€§çš„ä½œç”¨æ˜¯ä»€ä¹ˆ\nå®ƒè¢«èµ‹å€¼ä¸ºREACT_ELEMENT_TYPEï¼Œæ˜¯ä¸€ä¸ªsymbolç±»å‹çš„å˜é‡ï¼Œè¿™ä¸ªå˜é‡å¯ä»¥é˜²æ­¢XSSã€‚reactæ¸²æŸ“æ—¶ä¼šæŠŠæ²¡æœ‰$$typeofæ ‡è¯†ä»¥åŠè§„åˆ™æ ¡éªŒä¸é€šè¿‡çš„ç»„ä»¶å…¨éƒ½è¿‡æ»¤æ‰ã€‚å½“ä½ çš„ç¯å¢ƒä¸æ”¯æŒSymbolæ—¶ï¼Œ$$typeofè¢«èµ‹å€¼ä¸º0xeac7ï¼Œä¸ºä»€ä¹ˆé‡‡ç”¨0xeac7ï¼Ÿ\n> 0xeac7çœ‹èµ·æ¥æœ‰ç‚¹åƒReactã€‚\n\n### HOCåœ¨ä¸šåŠ¡åœºæ™¯ä¸­æœ‰å“ªäº›å®é™…çš„åº”ç”¨\n\n- ç»„åˆæ¸²æŸ“(å±æ€§ä»£ç†)\n```js\n// æ›´æ”¹ props\nfunction proxyHoc(Comp) {\n\treturn class extends React.Component {\n\t\trender() {\n\t\t\tconst newProps = {\n\t\t\t\tname: 'tayde',\n\t\t\t\tage: 1,\n\t\t\t}\n\t\t\treturn <Comp {...this.props} {...newProps} />\n\t\t}\n\t}\n}\n```\nå¾ˆæ–¹ä¾¿å°†`Input`ç»„ä»¶è½¬åŒ–ä¸ºå—æ§ç»„ä»¶\n- æ¡ä»¶æ¸²æŸ“\n```js\n// åå‘ç»§æ‰¿ä¼ é€’è¿‡æ¥çš„ç»„ä»¶\nfunction withLoading(Comp) {\n    return class extends Comp {\n        render() {\n            if(this.props.isLoading) {\n                return <Loading />\n            } else {\n                return super.render()\n            }\n        }\n    };\n}\n```\n- æ“ä½œprops\n- è·å–refs\n- æ“ä½œstate\nå¯ä»¥ç›´æ¥é€šè¿‡ this.state è·å–åˆ°è¢«åŒ…è£¹ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶è¿›è¡Œæ“ä½œã€‚ä½†è¿™æ ·çš„æ“ä½œå®¹æ˜“ä½¿ state å˜å¾—éš¾ä»¥è¿½è¸ªï¼Œä¸æ˜“ç»´æŠ¤ï¼Œè°¨æ…ä½¿ç”¨ã€‚\n- æ¸²æŸ“åŠ«æŒ\n\nå®é™…åº”ç”¨åœºæ™¯ï¼š\n- æ—¥å¿—æ‰“ç‚¹\n```js\n// æ€§èƒ½ç›‘æ§åŸ‹ç‚¹\nfunction withTiming(Comp)\u0010 {\n    return class extends Comp {\n        constructor(props) {\n            super(props);\n            this.start = Date.now();\n            this.end = 0;\n        }\n        componentDidMount() {\n            super.componentDidMount && super.componentDidMount();\n            this.end = Date.now();\n            console.log(`${WrappedComponent.name} ç»„ä»¶æ¸²æŸ“æ—¶é—´ä¸º ${this.end - this.start} ms`);\n        }\n        render() {\n            return super.render();\n        }\n    };\n}\n```\n- æƒé™æ§åˆ¶\n```js\nfunction withAdminAuth(WrappedComponent) {\n    return class extends React.Component {\n\t\tconstructor(props){\n\t\t\tsuper(props)\n\t\t\tthis.state = {\n\t\t    \tisAdmin: false,\n\t\t\t}\n\t\t} \n\t\tasync componentWillMount() {\n\t\t    const currentRole = await getCurrentUserRole();\n\t\t    this.setState({\n\t\t        isAdmin: currentRole === 'Admin',\n\t\t    });\n\t\t}\n\t\trender() {\n\t\t    if (this.state.isAdmin) {\n\t\t        return <Comp {...this.props} />;\n\t\t    } else {\n\t\t        return (<div>æ‚¨æ²¡æœ‰æƒé™æŸ¥çœ‹è¯¥é¡µé¢ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼</div>);\n\t\t    }\n\t\t}\n    };\n}\n```\n- åŒå‘ç»‘å®š\n- è¡¨å•æ ¡éªŒ\n- ä»£ç å¤ç”¨\n\n### HOCå’Œmixinçš„å¼‚åŒç‚¹æ˜¯ä»€ä¹ˆ\n- mixinå¯èƒ½ä¼šäº’ç›¸ä¾èµ–ï¼Œäº’ç›¸è€¦åˆï¼Œä¸åˆ©äºä»£ç ç»´æŠ¤\n\n- ä¸åŒçš„mixinä¸­çš„æ–¹æ³•å¯èƒ½ä¼šç›¸äº’å†²çª\n\n- mixinéå¸¸å¤šçš„æ—¶å€™ç»„ä»¶æ˜¯å¯ä»¥æ„ŸçŸ¥åˆ°çš„ï¼Œç”šè‡³è¿˜è¦ä¸ºå…¶åšç›¸å…³å¤„ç†ï¼Œè¿™æ ·ä¼šç»™ä»£ç é€ æˆæ»šé›ªçƒå¼çš„å¤æ‚æ€§\n\n- è€ŒHOCçš„å‡ºç°åˆ™å¯ä»¥è§£å†³è¿™äº›é—®é¢˜\n\n - hocæ˜¯ä¸€ä¸ªæ²¡æœ‰å‰¯ä½œç”¨çš„çº¯å‡½æ•°ï¼Œå„ä¸ªé«˜é˜¶ç»„ä»¶ä¸ä¼šäº’ç›¸ä¾èµ–è€¦åˆ\n - é«˜é˜¶ç»„ä»¶ä¹Ÿæœ‰å¯èƒ½é€ æˆå†²çªï¼Œä½†æˆ‘ä»¬å¯ä»¥åœ¨éµå®ˆçº¦å®šçš„æƒ…å†µä¸‹é¿å…è¿™äº›æƒ…å†µ\n - é«˜é˜¶ç»„ä»¶å¹¶ä¸å…³å¿ƒæ•°æ®ä½¿ç”¨çš„æ–¹å¼å’ŒåŸå› ï¼Œè€Œè¢«åŒ…è£¹çš„ç»„ä»¶ä¹Ÿä¸å…³å¿ƒæ•°æ®æ¥è‡ªä½•å¤„ã€‚é«˜é˜¶ç»„ä»¶çš„å¢åŠ ä¸ä¼šä¸ºåŸç»„ä»¶å¢åŠ è´Ÿæ‹…\n\n#### hooksæœ‰å“ªäº›ä¼˜åŠ¿(reactæä¾›çš„api,hocå’Œrender propså¼€å‘æ¨¡å¼)\n- ç»„ä»¶é€»è¾‘è¶Šæ¥è¶Šå¤æ‚(componentDidMount, componentDidUpdate)\nå°¤å…¶æ˜¯ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­å¸¸å¸¸åŒ…å«ä¸€äº›ä¸ç›¸å…³çš„é€»è¾‘ï¼Œå®Œå…¨ä¸ç›¸å…³çš„ä»£ç å´åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­ç»„åˆåœ¨ä¸€èµ·ã€‚å¦‚æ­¤å¾ˆå®¹æ˜“äº§ç”Ÿ bugï¼Œå¹¶ä¸”å¯¼è‡´é€»è¾‘ä¸ä¸€è‡´ã€‚\n\n- ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾ï¼Œé¿å…åœ°ç‹±åµŒå¥—\nhookå’Œmixinåœ¨ç”¨æ³•ä¸Šæœ‰ä¸€å®šçš„ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†æ˜¯mixinå¼•å…¥çš„é€»è¾‘çŠ¶æ€æ˜¯å¯ä»¥äº’ç›¸è¦†ç›–çš„ï¼Œè€Œå¤šä¸ªhooksä¹‹é—´äº’ä¸å½±å“ï¼Œhocä¹Ÿå¯èƒ½å¸¦æ¥ä¸€å®šå†²çªï¼Œæ¯”å¦‚propsè¦†ç›–ç­‰ç­‰ï¼Œä½¿ç”¨hooksåˆ™å¯ä»¥é¿å…è¿™äº›é—®é¢˜ã€‚å¤§é‡ä½¿ç”¨hocè®©æˆ‘ä»¬çš„ä»£ç å˜å¾—åµŒå¥—å±‚çº§éå¸¸æ·±ï¼Œä½¿ç”¨hooksæˆ‘ä»¬å¯ä»¥å®ç°æ‰å¹³å¼çš„çŠ¶æ€é€»è¾‘å¤ç”¨ï¼Œè€Œé¿å…äº†å¤§é‡çš„ç»„ä»¶åµŒå¥—ã€‚\n\n- è®©ç»„ä»¶å˜å¾—æ›´åŠ å®¹æ˜“ç†è§£ classç»„ä»¶thisé’©å­å‡½æ•°\nç›¸æ¯”å‡½æ•°ï¼Œç¼–å†™ä¸€ä¸ªclasså¯èƒ½éœ€è¦æ›´å¤šçš„çŸ¥è¯†ï¼Œhooksè®©ä½ å¯ä»¥åœ¨classä¹‹å¤–ä½¿ç”¨æ›´å¤šçš„reactçš„æ–°ç‰¹æ€§\n\nåç»­ä¸­å±•ç¤ºç»„ä»¶éœ€è¦æ”¹é€ æˆç±»ç»„ä»¶éœ€è¦æœ‰è‡ªå·±çš„çŠ¶æ€ç®¡ç†å’Œç”Ÿå‘½å‘¨æœŸæ–¹æ³•å°†å¤ç”¨é€»è¾‘æå‡åˆ°ä»£ç é¡¶éƒ¨ã€‚\n\n### Fiber\nReact çš„æ ¸å¿ƒæµç¨‹å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†:\n- reconciliation (è°ƒåº¦ç®—æ³•ï¼Œä¹Ÿå¯ç§°ä¸º render):\n  - æ›´æ–° state ä¸ propsï¼›\n  - è°ƒç”¨ç”Ÿå‘½å‘¨æœŸé’©å­ï¼›\n  - ç”Ÿæˆ virtual domï¼›\n    - è¿™é‡Œåº”è¯¥ç§°ä¸º Fiber Tree æ›´ä¸ºç¬¦åˆï¼›\n  - é€šè¿‡æ–°æ—§ vdom è¿›è¡Œ diff ç®—æ³•ï¼Œè·å– vdom changeï¼›\n  - ç¡®å®šæ˜¯å¦éœ€è¦é‡æ–°æ¸²æŸ“\n\n- commit:\n  - å¦‚éœ€è¦ï¼Œåˆ™æ“ä½œ dom èŠ‚ç‚¹æ›´æ–°ï¼›\n\n- é—®é¢˜: éšç€åº”ç”¨å˜å¾—è¶Šæ¥è¶Šåºå¤§ï¼Œæ•´ä¸ªæ›´æ–°æ¸²æŸ“çš„è¿‡ç¨‹å¼€å§‹å˜å¾—åƒåŠ›ï¼Œå¤§é‡çš„ç»„ä»¶æ¸²æŸ“ä¼šå¯¼è‡´ä¸»è¿›ç¨‹é•¿æ—¶é—´è¢«å ç”¨ï¼Œå¯¼è‡´ä¸€äº›åŠ¨ç”»æˆ–é«˜é¢‘æ“ä½œå‡ºç°å¡é¡¿å’Œæ‰å¸§çš„æƒ…å†µã€‚è€Œå…³é”®ç‚¹ï¼Œä¾¿æ˜¯ åŒæ­¥é˜»å¡ã€‚åœ¨ä¹‹å‰çš„è°ƒåº¦ç®—æ³•ä¸­ï¼ŒReact éœ€è¦å®ä¾‹åŒ–æ¯ä¸ªç±»ç»„ä»¶ï¼Œç”Ÿæˆä¸€é¢—ç»„ä»¶æ ‘ï¼Œä½¿ç”¨ åŒæ­¥é€’å½’ çš„æ–¹å¼è¿›è¡Œéå†æ¸²æŸ“ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹æœ€å¤§çš„é—®é¢˜å°±æ˜¯æ— æ³• æš‚åœå’Œæ¢å¤ã€‚\n\n\n- è§£å†³æ–¹æ¡ˆ: è§£å†³åŒæ­¥é˜»å¡çš„æ–¹æ³•ï¼Œé€šå¸¸æœ‰ä¸¤ç§: å¼‚æ­¥ä¸ä»»åŠ¡åˆ†å‰²ã€‚è€Œ React Fiber ä¾¿æ˜¯ä¸ºäº†å®ç°ä»»åŠ¡åˆ†å‰²è€Œè¯ç”Ÿçš„ã€‚\n\n  - åœ¨ React V16 å°†è°ƒåº¦ç®—æ³•è¿›è¡Œäº†é‡æ„ï¼Œ å°†ä¹‹å‰çš„ stack reconciler é‡æ„æˆæ–°ç‰ˆçš„ fiber reconcilerï¼Œå˜æˆäº†å…·æœ‰é“¾è¡¨å’ŒæŒ‡é’ˆçš„`å•é“¾è¡¨æ ‘éå†ç®—æ³•`ã€‚é€šè¿‡æŒ‡é’ˆæ˜ å°„ï¼Œæ¯ä¸ªå•å…ƒéƒ½è®°å½•ç€éå†å½“ä¸‹çš„ä¸Šä¸€æ­¥ä¸ä¸‹ä¸€æ­¥ï¼Œä»è€Œä½¿éå†å˜å¾—å¯ä»¥è¢«æš‚åœå’Œé‡å¯ã€‚\n  - è¿™é‡Œæˆ‘ç†è§£ä¸ºæ˜¯ä¸€ç§`ä»»åŠ¡åˆ†å‰²è°ƒåº¦ç®—æ³•`ï¼Œä¸»è¦æ˜¯å°†åŸå…ˆåŒæ­¥æ›´æ–°æ¸²æŸ“çš„ä»»åŠ¡åˆ†å‰²æˆä¸€ä¸ªä¸ªç‹¬ç«‹çš„`å°ä»»åŠ¡å•ä½`ï¼Œæ ¹æ®ä¸åŒçš„ä¼˜å…ˆçº§ï¼Œå°†å°ä»»åŠ¡åˆ†æ•£åˆ°æµè§ˆå™¨çš„ç©ºé—²æ—¶é—´æ‰§è¡Œï¼Œå……åˆ†åˆ©ç”¨ä¸»è¿›ç¨‹çš„äº‹ä»¶å¾ªç¯æœºåˆ¶ã€‚\n\n```js\nclass Fiber {\n\tconstructor(instance) {\n\t\tthis.instance = instance\n\t\t// æŒ‡å‘ç¬¬ä¸€ä¸ª child èŠ‚ç‚¹\n\t\tthis.child = child\n\t\t// æŒ‡å‘çˆ¶èŠ‚ç‚¹\n\t\tthis.return = parent\n\t\t// æŒ‡å‘ç¬¬ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹\n\t\tthis.sibling = previous\n\t}\t\n}\n```\n\n> æ ¸å¿ƒæ€æƒ³æ˜¯ ä»»åŠ¡æ‹†åˆ†å’ŒååŒï¼Œä¸»åŠ¨æŠŠæ‰§è¡Œæƒäº¤ç»™ä¸»çº¿ç¨‹ï¼Œä½¿ä¸»çº¿ç¨‹æœ‰æ—¶é—´ç©ºæŒ¡å¤„ç†å…¶ä»–é«˜ä¼˜å…ˆçº§ä»»åŠ¡ã€‚\n> å½“é‡åˆ°è¿›ç¨‹é˜»å¡çš„é—®é¢˜æ—¶ï¼Œä»»åŠ¡åˆ†å‰²ã€å¼‚æ­¥è°ƒç”¨ å’Œ ç¼“å­˜ç­–ç•¥ æ˜¯ä¸‰ä¸ªæ˜¾è‘—çš„è§£å†³æ€è·¯ã€‚\n\n### ä¸ºä»€ä¹ˆç”Ÿå‘½å‘¨æœŸæœ‰äº†å˜åŠ¨\nåœ¨ Fiber ä¸­ï¼Œreconciliation é˜¶æ®µè¿›è¡Œäº†ä»»åŠ¡åˆ†å‰²ï¼Œæ¶‰åŠåˆ° æš‚åœ å’Œ é‡å¯ï¼Œå› æ­¤å¯èƒ½ä¼šå¯¼è‡´ reconciliation ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°åœ¨ä¸€æ¬¡æ›´æ–°æ¸²æŸ“å¾ªç¯ä¸­è¢«`å¤šæ¬¡è°ƒç”¨`çš„æƒ…å†µï¼Œäº§ç”Ÿä¸€äº›æ„å¤–é”™è¯¯ã€‚\n\n```js\nclass Component extends React.Component {\n  // æ›¿æ¢ `componentWillReceiveProps` ï¼Œ\n  // åˆå§‹åŒ–å’Œ update æ—¶è¢«è°ƒç”¨\n  // é™æ€å‡½æ•°ï¼Œæ— æ³•ä½¿ç”¨ this\n  static getDerivedStateFromProps(nextProps, prevState) {}\n  \n  // åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°ç»„ä»¶\n  // å¯ä»¥ç”¨äºç»„ä»¶æ€§èƒ½ä¼˜åŒ–\n  shouldComponentUpdate(nextProps, nextState) {}\n  \n  // ç»„ä»¶è¢«æŒ‚è½½åè§¦å‘\n  componentDidMount() {}\n  \n  // æ›¿æ¢ componentWillUpdate\n  // å¯ä»¥åœ¨æ›´æ–°ä¹‹å‰è·å–æœ€æ–° dom æ•°æ®\n  getSnapshotBeforeUpdate() {}\n  \n  // ç»„ä»¶æ›´æ–°åè°ƒç”¨\n  componentDidUpdate() {}\n  \n  // ç»„ä»¶å³å°†é”€æ¯\n  componentWillUnmount() {}\n  \n  // ç»„ä»¶å·²é”€æ¯\n  componentDidUnMount() {}\n\n  // é”™è¯¯è¾¹ç•Œæ•è·å…¨å±€å¼‚å¸¸\n  componentDidCatch() {}\n}\n```\n\n- åœ¨constructoråˆå§‹åŒ– stateï¼›\n- åœ¨componentDidMountä¸­è¿›è¡Œäº‹ä»¶ç›‘å¬ï¼Œå¹¶åœ¨componentWillUnmountä¸­è§£ç»‘äº‹ä»¶ï¼›\n- åœ¨componentDidMountä¸­è¿›è¡Œæ•°æ®çš„è¯·æ±‚ï¼Œè€Œä¸æ˜¯åœ¨componentWillMountï¼›\n- éœ€è¦æ ¹æ® props æ›´æ–° state æ—¶ï¼Œä½¿ç”¨getDerivedStateFromProps(nextProps, prevState)ï¼›\n  - æ—§ props éœ€è¦è‡ªå·±å­˜å‚¨ï¼Œä»¥ä¾¿æ¯”è¾ƒï¼›\n```js\npublic static getDerivedStateFromProps(nextProps, prevState) {\n\t// å½“æ–° props ä¸­çš„ data å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒåŒæ­¥æ›´æ–°åˆ° state ä¸Š\n\tif (nextProps.data !== prevState.data) {\n\t\treturn {\n\t\t\tdata: nextProps.data\n\t\t}\n\t} else {\n\t\treturn null\n\t}\n}\n```\n\n- å¯ä»¥åœ¨componentDidUpdateç›‘å¬ props æˆ–è€… state çš„å˜åŒ–ï¼Œä¾‹å¦‚:\n```js\ncomponentDidUpdate(prevProps) {\n\t// å½“ id å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‡æ–°è·å–æ•°æ®\n\tif (this.props.id !== prevProps.id) {\n\t\tthis.fetchData(this.props.id);\n\t}\n}\n```\n\n- åœ¨componentDidUpdateä½¿ç”¨setStateæ—¶ï¼Œå¿…é¡»åŠ æ¡ä»¶ï¼Œå¦åˆ™å°†è¿›å…¥æ­»å¾ªç¯ï¼›\n- getSnapshotBeforeUpdate(prevProps, prevState)å¯ä»¥åœ¨æ›´æ–°ä¹‹å‰è·å–æœ€æ–°çš„æ¸²æŸ“æ•°æ®ï¼Œå®ƒçš„è°ƒç”¨æ˜¯åœ¨ render ä¹‹åï¼Œ update ä¹‹å‰ï¼›\n- shouldComponentUpdate: é»˜è®¤æ¯æ¬¡è°ƒç”¨setStateï¼Œä¸€å®šä¼šæœ€ç»ˆèµ°åˆ° diff é˜¶æ®µï¼Œä½†å¯ä»¥é€šè¿‡shouldComponentUpdateçš„ç”Ÿå‘½é’©å­è¿”å›falseæ¥ç›´æ¥é˜»æ­¢åé¢çš„é€»è¾‘æ‰§è¡Œï¼Œé€šå¸¸æ˜¯ç”¨äºåšæ¡ä»¶æ¸²æŸ“ï¼Œä¼˜åŒ–æ¸²æŸ“çš„æ€§èƒ½ã€‚\n\nåºŸå¼ƒçš„åŸå› ä¸»è¦æ˜¯å› ä¸º react åœ¨ 16 ç‰ˆæœ¬é‡æ„äº†è°ƒåº¦ç®—æ³•ï¼Œæ–°çš„è°ƒåº¦å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ç”Ÿå‘½å‘¨æœŸè¢«åå¤è°ƒç”¨ï¼Œæ‰€ä»¥åœ¨ 16 ä¸­å°±ä¸å»ºè®®ä½¿ç”¨äº†ï¼Œè€Œæ”¹åœ¨å…¶ä»–æ—¶æœºä¸­æš´éœ²å‡ºå…¶\nä»–ç”Ÿå‘½å‘¨æœŸé’©å­ç”¨æ¥æ›¿ä»£ã€‚\n\n### SSR\nSSRï¼Œä¿—ç§° æœåŠ¡ç«¯æ¸²æŸ“ (Server Side Render)ï¼Œè®²äººè¯å°±æ˜¯: ç›´æ¥åœ¨æœåŠ¡ç«¯å±‚è·å–æ•°æ®ï¼Œæ¸²æŸ“å‡ºå®Œæˆçš„ HTML æ–‡ä»¶ï¼Œç›´æ¥è¿”å›ç»™ç”¨æˆ·æµè§ˆå™¨è®¿é—®ã€‚\nå‰åç«¯åˆ†ç¦»: å‰ç«¯ä¸æœåŠ¡ç«¯éš”ç¦»ï¼Œå‰ç«¯åŠ¨æ€è·å–æ•°æ®ï¼Œæ¸²æŸ“é¡µé¢ã€‚\n- ç—›ç‚¹:\n  - é¦–å±æ¸²æŸ“æ€§èƒ½ç“¶é¢ˆ:\n  - ç©ºç™½å»¶è¿Ÿ: HTMLä¸‹è½½æ—¶é—´ + JSä¸‹è½½/æ‰§è¡Œæ—¶é—´ + è¯·æ±‚æ—¶é—´ + æ¸²æŸ“æ—¶é—´ã€‚åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œé¡µé¢å¤„äºç©ºç™½çš„çŠ¶æ€ã€‚\n  - SEO é—®é¢˜: ç”±äºé¡µé¢åˆå§‹çŠ¶æ€ä¸ºç©ºï¼Œå› æ­¤çˆ¬è™«æ— æ³•è·å–é¡µé¢ä¸­ä»»ä½•æœ‰æ•ˆæ•°æ®ï¼Œå› æ­¤å¯¹æœç´¢å¼•æ“ä¸å‹å¥½ã€‚\n    - è™½ç„¶ä¸€ç›´æœ‰åœ¨æåŠ¨æ€æ¸²æŸ“çˆ¬è™«çš„æŠ€æœ¯ï¼Œä¸è¿‡æ®æˆ‘äº†è§£ï¼Œå¤§éƒ¨åˆ†å›½å†…æœç´¢å¼•æ“ä»ç„¶æ˜¯æ²¡æœ‰å®ç°ã€‚\n\n#### åŸç†\n- Node æœåŠ¡: è®©å‰åç«¯è¿è¡ŒåŒä¸€å¥—ä»£ç æˆä¸ºå¯èƒ½ã€‚\n- Virtual Dom: è®©å‰ç«¯ä»£ç è„±ç¦»æµè§ˆå™¨è¿è¡Œã€‚\n\n![ssr](http://cdn.mydearest.cn/blog/images/ssr.png)\n\n\n### ä¸ºä»€ä¹ˆreactæ²¡æœ‰åŒå‘ç»‘å®š\nReactçš„è®¾è®¡æ€æƒ³æ˜¯å•å‘æ•°æ®æµï¼Œæˆ‘è§‰å¾—å¯ä»¥è¿™æ ·ç†è§£ä¸ºä»€ä¹ˆæ²¡æœ‰åŒå‘æ•°æ®ç»‘å®šï¼š\n\né¦–å…ˆï¼ŒReactæ˜¯çº¯ç²¹çš„Viewå±‚ï¼›ç„¶åï¼Œå¯¹äºReactæ¥è¯´åŒå‘æ•°æ®ç»‘å®šæ˜¯ä»€ä¹ˆéœ€æ±‚? -- æ˜æ˜¾æ˜¯ä¸šåŠ¡éœ€æ±‚ã€‚å› ä¸ºå•å‘æ•°æ®æµå·²ç»æ»¡è¶³äº† View å±‚æ¸²æŸ“çš„è¦æ±‚å¹¶ä¸”æ›´æ˜“æµ‹è¯•ä¸æ§åˆ¶ï¼ˆæ¥è‡ª Props æˆ– Stateï¼‰ï¼Œæ›´åŠ çš„æ¸…æ™°å¯æ§ï¼Œæ‰€ä»¥åœ¨çº¯ç²¹çš„ React ä¸­æ€ä¹ˆä¼šéœ€è¦åŒå‘æ•°æ®ç»‘å®šè¿™ç§åŠŸèƒ½å‘¢ã€‚\n\nå¦‚æœéœ€è¦è§£å†³åŒå‘æ•°æ®ç»‘å®šé—®é¢˜ï¼Œå¯ä»¥å€ŸåŠ©ç¬¬ä¸‰æ–¹åº“å¦‚ Ant Design çš„ rc-form ä¹‹ç±»ï¼Œä½ ä¹Ÿå¯ä»¥å­˜åœ¨ State é‡Œç”šè‡³æ˜¯ Redux é‡Œï¼Œæ ¹æ®éœ€æ±‚æ¥å§ã€‚æ‰€ä»¥ React æ²¡æœ‰åŒå‘æ•°æ®ç»‘å®šä¸æ˜¯åŠŸèƒ½çš„ç¼ºå¤±æˆ–å†²çªé—®é¢˜ï¼Œè€Œæ˜¯ React åªå…³æ³¨è§£å†³çº¯ç²¹çš„é—®é¢˜ï¼š View å±‚ã€‚\n\n### å•å‘æ•°æ®æµ\n\nå•å‘æ•°æ®æµæ˜¯æŒ‡æ•°æ®çš„æµå‘åªèƒ½ç”±çˆ¶ç»„ä»¶é€šè¿‡propså°†æ•°æ®ä¼ é€’ç»™å­ç»„ä»¶ï¼Œä¸èƒ½ç”±å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œè¦æƒ³å®ç°æ•°æ®çš„åŒå‘ç»‘å®šï¼Œåªèƒ½ç”±å­ç»„ä»¶æ¥æ”¶çˆ¶ç»„ä»¶propsä¼ è¿‡æ¥çš„æ–¹æ³•å»æ”¹å˜çˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œè€Œä¸æ˜¯ç›´æ¥å°†\nå­ç»„ä»¶çš„æ•°æ®ä¼ é€’ç»™çˆ¶ç»„ä»¶ã€‚\n\n### reactå’Œvueçš„å¯¹æ¯”\nreact å‡½æ•°å¼æ€æƒ³ çº¯ç»„ä»¶ä¼ å…¥çŠ¶æ€å’Œé€»è¾‘ï¼Œæ‰€ä»¥å•é¡¹æ•°æ®æµç»“åˆimmutable setState è§¦å‘é‡æ–°render å•é¡¹æ•°æ®æµè®¾è®¡æˆä¸å¯å˜æ•°æ® purecomponentå¯¹shouldconponentupdateæ˜¯å¦è§¦å‘é‡æ–°æ¸²æŸ“ã€‚ä¸å¯å˜æ•°æ®è¿”å›æ–°çš„stateï¼Œè®¡ç®—è™šæ‹Ÿdomçš„å·®å¼‚ã€‚æ•°æ®æµprops/callbackï¼Œcontext\n\nvue å“åº”å¼çš„æ€æƒ³ ç›‘å¬æ•°æ®çš„å˜åŒ– åˆå§‹åŒ–æ—¶å¯¹æ•°æ®çš„æ¯ä¸€ä¸ªå±æ€§æ·»åŠ watcheråŸºäºæ•°æ®å¯å˜ æ•°æ®å˜åŒ–æ—¶è§¦å‘watcherå›è°ƒ æ›´æ–°è™šæ‹Ÿdomã€‚å¯å˜æ•°æ®ç›´æ¥ä¿®æ”¹ï¼Œsetterèƒ½ç²¾ç¡®ç›‘å¬æ•°æ®å˜åŒ–ã€‚æ•°æ®æµprops/eventï¼Œinject/provide\n\nreactçš„æ€§èƒ½ä¼˜åŒ–éœ€è¦æ‰‹åŠ¨å»åˆ¤æ–­ vueæ˜¯è‡ªåŠ¨çš„åº”ä¸ºè¦ç»™æ¯ä¸ªå±æ€§æ·»åŠ  watcheræ‰€ä»¥å¤§å‹é¡¹ç›®stateä¸æ¯”è¾ƒå¤šçš„æ—¶å€™watcherä¹Ÿä¼šæ¯”è¾ƒå¤šå®¹æ˜“é€ æˆå¡é¡¿çš„æƒ…å†µã€‚reduxä¸èƒ½ç›´æ¥è°ƒç”¨reducerè¿›è¡Œä¿®æ”¹ã€‚è€Œvuexæœ‰dispatchå’Œcommit\n\n### React ä¸­ï¼ŒcloneElement ä¸ createElement å„æ˜¯ä»€ä¹ˆï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«\n```js\nReact.cloneElement(\n  element,\n  [props],\n  [...children]\n)\n\nReact.createElement(\n  type,\n  [props],\n  [...children]\n)\n```\n\n### React Portal æœ‰å“ªäº›ä½¿ç”¨åœºæ™¯\nåœ¨ä»¥å‰ï¼Œ react ä¸­æ‰€æœ‰çš„ç»„ä»¶éƒ½ä¼šä½äº #app ä¸‹ï¼Œè€Œä½¿ç”¨ Portals æä¾›äº†ä¸€ç§è„±ç¦» #app çš„ç»„ä»¶ã€‚\nå› æ­¤ Portals é€‚åˆè„±ç¦»æ–‡æ¡£æµ(out of flow) çš„ç»„ä»¶ï¼Œç‰¹åˆ«æ˜¯ position: absolute ä¸ position: fixed çš„ç»„ä»¶ã€‚æ¯”å¦‚æ¨¡æ€æ¡†ï¼Œé€šçŸ¥ï¼Œè­¦å‘Šï¼ŒgoTop ç­‰ã€‚\n\n```js\nconst modalRoot = document.getElementById('modal');\n\nclass Modal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.el = document.createElement('div');\n  }\n\n  componentDidMount() {\n    modalRoot.appendChild(this.el);\n  }\n\n  componentWillUnmount() {\n    modalRoot.removeChild(this.el);\n  }\n\n  render() {\n    return ReactDOM.createPortal(\n      this.props.children,\n      this.el,\n    );\n  }\n}\n```\n\n### è·¯ç”±ä¼ å‚\n1. paramsä¼ å‚(åˆ·æ–°é¡µé¢åå‚æ•°ä¸æ¶ˆå¤±ï¼Œå‚æ•°ä¼šåœ¨åœ°å€æ æ˜¾ç¤º)\n```\nè·¯ç”±é¡µé¢ï¼š<Route path='/demo/:id' component={Demo}></Route>  //æ³¨æ„è¦é…ç½® /:id\nè·¯ç”±è·³è½¬å¹¶ä¼ é€’å‚æ•°ï¼š\n    é“¾æ¥æ–¹å¼ï¼š<Link to={'/demo/'+'6'}>XX</Link>\n        æˆ–ï¼š<Link to={{pathname:'/demo/'+'6'}}>XX</Link>\n\n    jsæ–¹å¼ï¼šthis.props.history.push('/demo/'+'6')  \n        æˆ–ï¼šthis.props.history.push({pathname:'/demo/'+'6'})\nè·å–å‚æ•°ï¼šthis.props.match.params.id    //æ³¨æ„è¿™é‡Œæ˜¯matchè€Œéhistory\n```\n\n2. queryä¼ å‚(åˆ·æ–°é¡µé¢åå‚æ•°æ¶ˆå¤±)\n```\nè·¯ç”±é¡µé¢ï¼š<Route path='/demo' component={Demo}></Route>  //æ— éœ€é…ç½®\nè·¯ç”±è·³è½¬å¹¶ä¼ é€’å‚æ•°ï¼š\n    é“¾æ¥æ–¹å¼ï¼š<Link to={{pathname:'/demo',query:{id:22,name:'dahuang'}}}>XX</Link>\n    jsæ–¹å¼ï¼šthis.props.history.push({pathname:'/demo',query:{id:22,name:'dahuang'}})\nè·å–å‚æ•°ï¼š this.props.location.query.name\n```\n\n3. stateä¼ å‚(åˆ·æ–°é¡µé¢åå‚æ•°ä¸æ¶ˆå¤±ï¼Œstateä¼ çš„å‚æ•°æ˜¯åŠ å¯†çš„ï¼Œæ¯”queryä¼ å‚å¥½ç”¨)\n```\nè·¯ç”±é¡µé¢ï¼š<Route path='/demo' component={Demo}></Route>  //æ— éœ€é…ç½®\nè·¯ç”±è·³è½¬å¹¶ä¼ é€’å‚æ•°ï¼š\n    é“¾æ¥æ–¹å¼ï¼š <Link to={{pathname:'/demo',state:{id:12,name:'dahuang'}}}>XX</Link> \n    jsæ–¹å¼ï¼šthis.props.history.push({pathname:'/demo',state:{id:12,name:'dahuang'}})\nè·å–å‚æ•°ï¼š this.props.location.state.name\n```\n\n### create-react-appé…ç½®æ–‡ä»¶ä¿®æ”¹\n\n- é€šè¿‡package.jsonæˆ–å¼•ç”¨ç¬¬ä¸‰æ–¹çš„åº“å¢åŠ é…ç½®\n- reactæ„å»ºæ—¶é€šè¿‡webpackï¼Œå…³äºwebpacké…ç½®æŸ¥çœ‹node_modules/react-scripts/config/webpack*\n- npm run ejectæš´éœ²æ‰€æœ‰é…ç½®æ–‡ä»¶ã€(å®‰è£…react-app-rewiredåŒ…)å»ºç«‹æ–°çš„é…ç½®æ–‡ä»¶è¦†ç›–éƒ¨åˆ†é»˜è®¤çš„é…ç½®\n- HashRouteræ”¯æŒé…ç½®package-json homepage: '.'ä¿®æ”¹æ ¹ç›®å½•è·¯å¾„ï¼ŒBrowerRouterä¿®æ”¹æ— æ•ˆè¿˜å¾—ä¿®æ”¹æœåŠ¡ç«¯é…ç½®\n\n### react diffå’Œvue diffçš„åŒºåˆ«\n- vnodeä½œä¸ºæ•°æ®å’Œè§†å›¾çš„ä¸€ç§æ˜ å°„å…³ç³»\n- ç›¸åŒç‚¹ï¼šéƒ½æ˜¯åŒå±‚æ¯”è¾ƒã€ä¸åŒç‚¹ï¼švueä½¿ç”¨åŒæŒ‡é’ˆæ¯”è¾ƒï¼Œreactæ˜¯keyé›†åˆçº§æ¯”è¾ƒ\n\n### react StrictModeä¸¥æ ¼æ¨¡å¼\nStrictModeæ˜¯ä¸€ç§è¾…åŠ©ç»„ä»¶ï¼Œå¯ä»¥å¸®åŠ©ç¼–å†™æ›´å¥½çš„ç»„ä»¶ã€‚\n1. éªŒè¯æ˜¯å¦éµå¾ªæ¨èå†™æ³•\n2. éªŒè¯æ˜¯å¦ä½¿ç”¨äº†å·²ç»åºŸå¼ƒçš„å†™æ³•\n3. é€šè¿‡è¯†åˆ«ä¸€äº›æ½œåœ¨çš„é£é™©é¢„é˜²å‰¯ä½œç”¨\n\n### reactäº‹ä»¶çš„åˆæˆæœºåˆ¶\n1. div æˆ–å…¶ä»–å…ƒç´ è§¦å‘äº‹ä»¶ï¼Œè¯¥äº‹ä»¶ä¼šå†’æ³¡åˆ° documentï¼Œç„¶åè¢« React çš„äº‹ä»¶å¤„ç†ç¨‹åºæ•è·\n2. äº‹ä»¶å¤„ç†ç¨‹åºéšåå°†äº‹ä»¶ä¼ é€’ç»™ SyntheticEvent çš„å®ä¾‹ï¼Œè¿™æ˜¯ä¸€ä¸ªè·¨æµè§ˆå™¨åŸç”Ÿäº‹ä»¶åŒ…è£…å™¨ã€‚\n3. SyntheticEvent è§¦å‘ dispatchEventï¼Œå°† event å¯¹è±¡äº¤ç”±å¯¹åº”çš„å¤„ç†å™¨æ‰§è¡Œã€‚\n\n- ä¸ºä»€ä¹ˆè¦åˆæˆäº‹ä»¶æœºåˆ¶\n  - æ›´å¥½çš„å…¼å®¹æ€§å’Œè·¨å¹³å°\n  - reactäº‹ä»¶æœºåˆ¶é‡‡ç”¨äº†äº‹ä»¶æ± ï¼Œå¤§å¤§èŠ‚çœå†…å­˜\n  - æ–¹ä¾¿äº‹ä»¶çš„ç»Ÿä¸€ç®¡ç†\n\n- reactå¤„ç†é˜»æ­¢å†’æ³¡\n```js\n// é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œï¼ˆé˜»æ­¢è¿™ä¸ªåˆæˆäº‹ä»¶ï¼Œå¾€documentä¸Šå†’æ³¡ï¼Œå› æ­¤ä¸ä¼šè§¦å‘clickæ–¹æ³•ï¼‰\ne.stopPropagation();\n// é˜»æ­¢åˆæˆäº‹ä»¶é—´çš„å†’æ³¡ï¼Œä¸ä¼šå¾€æœ€å¤–å±‚å†’äº†\ne.nativeEvent.stopImmediatePropagation();\n```\n\n### reduxå­˜åœ¨çš„é—®é¢˜ => é‡\n- ä¸€ä»½storeæ ‘ï¼Œç¦»å¼€é¡µé¢å†æ¬¡è¿›å…¥ï¼Œæ•°æ®ä¸ä¼šåˆå§‹åŒ–\n- reduceræ‹†åˆ†é€ æˆæ±‡æ€»å›°éš¾\n- actionçš„typeç®¡ç†æ··ä¹±ï¼Œé‡å¤é—®é¢˜\n- ç¹æ‚çš„ä½¿ç”¨è§„åˆ™ï¼Œindexé¡µé¢actionå’Œstoreå¼•å…¥ï¼Œçº¯å‡½æ•°reducerå¤§é‡caseä»…ä»…ä¸ºäº†æ”¹å˜ä¸€ä¸ªå€¼\n\n### å¸¸ç”¨UIåº“\n\n- ç§»åŠ¨ç«¯\n[ant design mobile](https://mobile.ant.design/index-cn)\n\n- pcç«¯\n[ant design](https://ant.design/)\n\n[reactstrap](https://reactstrap.github.io/)\n\n[patternfly-react](https://patternfly-react.surge.sh/)\n\n[semantic-ui](https://react.semantic-ui.com/)\n\n[material-ui](https://material-ui.com/)\n\n[elemental-ui](http://elemental-ui.com/home)\n","tags":["é¢è¯•"],"categories":["React"]},{"title":"ä¸èƒ½è¯´çš„ç§˜å¯†","url":"%2FscienceInternet.html","content":"\n{% fi http://cdn.mydearest.cn/blog/images/shadowsocks.jpg, Shadowsocks, Shadowsocks %}\n---\n<!-- more -->\n\n{% note info %}\n\nå¿«é€Ÿæ­å»ºShadowsocks\n\n{% endnote %}\n\n## [è´­ä¹°VultræœåŠ¡å™¨](https://www.vultr.com/)\n\n### VultræœåŠ¡å™¨ä»·æ ¼\n\nVultræœåŠ¡å™¨æŒ‰å°æ—¶è®¡è´¹,æœ€ä½0.004ç¾å…ƒ/h,ç®—èµ·æ¥2.5ç¾å…ƒ/æœˆï¼Œä¸”destoryæ‰æœåŠ¡å™¨æ˜¯ä¸æ”¶è´¹çš„ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå¦‚æœæš‚æ—¶æ²¡æœ‰ä½¿ç”¨è¿˜ä¸€ç›´æ‰£è´¹çš„é—®é¢˜ã€‚\n\næœ€ä½ä»·æ ¼çš„æœåŠ¡å™¨æ˜¯512Mçš„å†…å­˜ï¼Œæ¯ä¸ªæœˆ500Gçš„æµé‡ï¼Œåªèƒ½è¯´99%çš„æƒ…å†µä¸‹å®Œå…¨å¤Ÿç”¨äº†ï¼\n\n![introduce](http://cdn.mydearest.cn/blog/images/vultr.png)\n\n## ä¹°å¥½ä¸­æ„çš„åœ°åŒºèŠ‚ç‚¹æœåŠ¡å™¨ä¹‹åï¼Œwindowsç³»ç»Ÿå¯ä»¥ç”¨Xshell sshè¿æ¥åˆ°æœåŠ¡å™¨ï¼Œå¹¶æ‰§è¡Œä»¥ä¸‹æ­å»ºssè„šæœ¬å‘½ä»¤\n\n```javascript\n\nwget --no-check-certificate -O shadowsocks.sh\nhttps://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh\n \nchmod +x shadowsocks.sh\n \n./shadowsocks.sh 2>&1 | tee shadowsocks.log\n\n```\n\næ¥ç€æŒ‰ç…§æç¤ºè¾“å…¥å¯†ç ï¼Œç«¯å£å’ŒåŠ å¯†æ–¹å¼ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![ss1](http://cdn.mydearest.cn/blog/images/ss1.png)\n\n![ss2](http://cdn.mydearest.cn/blog/images/ss1.png)\n\né€‰æ‹©åŠ å¯†æ–¹å¼7(aes-256-cfb)ã€‚\n\nç„¶åå¯ä»¥å»å¬é¦–æ­Œ~ï¼ŒæˆåŠŸå®‰è£…ä¹‹åæœ‰ä½ é…ç½®çš„ä¿¡æ¯æ˜¾ç¤ºï¼Œè®°ä½è¿™äº›ä¿¡æ¯ã€‚\n\n## å®‰è£…sså®¢æˆ·ç«¯ï¼Œé…ç½®å¥½ä¸Šé¢çš„æœåŠ¡å™¨é…ç½®ä¿¡æ¯ï¼Œå°±å¯ä»¥å¼€å¿ƒåœ°ç©è€äº†ã€‚Chromeæ’ä»¶æ¨èä½¿ç”¨Proxy SwitchySharpæ¥ç®¡ç†å’Œåˆ‡æ¢ä»£ç†é…ç½®éå¸¸å¥½ç”¨ã€‚\n\nWindowså®¢æˆ·ç«¯(ä»£ç†ç«¯å£é»˜è®¤1080)\nhttps://github.com/shadowsocks/shadowsocks-windows/releases\n\nUbuntu \nsudo add-apt-repository ppa:hzwhuang/ss-qt5 \nsudo apt-get update \nsudo apt-get install shadowsocks-qt5\n\nMacå®¢æˆ·ç«¯(ä»£ç†ç«¯å£é»˜è®¤1086)\n\nhttps://github.com/shadowsocks/ShadowsocksX-NG/releases\n\nAndroidå®¢æˆ·ç«¯\n\nhttps://github.com/shadowsocks/shadowsocks-android/releases","tags":["æœªçŸ¥"],"categories":["å·¥å…·"]},{"title":"Promiseè¯ç”Ÿè®°","url":"%2FcreatePromise.html","content":"\n{% fi http://cdn.mydearest.cn/blog/images/promise.png, Promise, Promise %}\n\nå‰ç«¯è¿‘å¹´çš„å…´èµ·ï¼Œæœ‰å¤§éƒ¨åˆ†æ˜¯å› ä¸º `NodeJS` çš„è¯ç”Ÿï¼Œè€Œ `NodeJS` æ˜¯ä¸ªé€‚ç”¨äº **å¼‚æ­¥IO** å¯†é›†å‹çš„è¯­è¨€ï¼Œä¸€äº›åŸºäº `NodeJS` çš„æ¡†æ¶ï¼Œæ¯”å¦‚ *KOA2ã€Adonis* å°±æœ‰å¤§é‡çš„ `async` å’Œ `await` è¯­æ³•ï¼Œ`async`çš„å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯ `Promise` å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ `async` å’Œ `await` è¯­æ³•ï¼Œå†™å‡ºä¼˜é›…çš„å¼‚æ­¥ä»£ç ï¼Œæ¥æ›¿æ¢éš¾çœ‹ä¸”éš¾ç»´æŠ¤çš„å›è°ƒå‡½æ•°ã€‚\n\n## Promise æ¦‚å¿µ(JSçš„ Promiseæ˜¯æœªæ¥äº‹ä»¶çš„è¡¨ç¤º)\n`Promise`æ˜¯ä¸€ç§å¯¹å¼‚æ­¥æ“ä½œçš„å°è£…ï¼Œä¸»æµçš„è§„èŒƒæ˜¯Promise/A+ã€‚\n`Promise`å¯ä»¥ä½¿å¾—å¼‚æ­¥ä»£ç å±‚æ¬¡æ¸…æ™°ï¼Œä¾¿äºç†è§£ï¼Œä¸”æ›´åŠ å®¹æ˜“ç»´æŠ¤ã€‚ Promise å¯ä»¥ä»¥æˆåŠŸç»“æŸï¼šç”¨è¡Œè¯è¯´æˆ‘ä»¬å·²ç»è§£å†³äº†resolved(fulfilled)ã€‚ ä½†å¦‚æœ Promise å‡ºé”™ï¼Œæˆ‘ä»¬ä¼šè¯´å®ƒå¤„äº**æ‹’ç»(rejected )çŠ¶æ€ã€‚ Promise ä¹Ÿæœ‰ä¸€ä¸ªé»˜è®¤çŠ¶æ€ï¼šæ¯ä¸ªæ–°çš„ Promise éƒ½ä»¥æŒ‚èµ·(pending)**çŠ¶æ€å¼€å§‹ã€‚\n`Promise`æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯resolveå’Œrejectã€‚å®ƒä»¬æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œç”± JavaScript å¼•æ“æä¾›ï¼Œä¸ç”¨è‡ªå·±éƒ¨ç½²ã€‚\nç”Ÿæˆå®ä¾‹æ—¶å›æ‰§ä¿¡ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼›<Br/> \n`resolve`å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œæˆåŠŸâ€ï¼ˆå³ä» pending å˜ä¸º fulfilledï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œæˆåŠŸæ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ï¼›\n`reject`å‡½æ•°çš„ä½œç”¨æ˜¯ï¼Œå°†Promiseå¯¹è±¡çš„çŠ¶æ€ä»â€œæœªå®Œæˆâ€å˜ä¸ºâ€œå¤±è´¥â€ï¼ˆå³ä» pending å˜ä¸º rejectedï¼‰ï¼Œåœ¨å¼‚æ­¥æ“ä½œå¤±è´¥æ—¶è°ƒç”¨ï¼Œå¹¶å°†å¼‚æ­¥æ“ä½œæŠ¥å‡ºçš„é”™è¯¯ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å‡ºå»ã€‚\n\n---\n<!-- more -->\n\n```javascript\n// æ‰§è¡Œé¡ºåº\nlet promise = new Promise(function(resolve, reject) {\n  console.log('Promise'); // æ–°å»ºåç«‹å³æ‰§è¡Œ\n  resolve();\n  console.log(111)\n  return 0\n});\npromise.then(function() {\n  console.log('resolved.'); // åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæˆåæ‰ä¼šæ‰§è¡Œ\n});\nconsole.log('Hi!');\n// Promise\n// 111\n// Hi!\n// resolved\n```\næ¥ä¸‹æ¥æˆ‘ä»¬å°±ç”¨`Promise`ç»“åˆajaxæ¥ä½¿ç”¨\n\n```javascript\nconst getJSON = function(url) {\n  const promise = new Promise(function(resolve, reject){\n    const handler = function() {\n      if (this.readyState !== 4) {\n        return;\n      }\n      if (this.status === 200) {\n        resolve(this.responseText);\n      } else {\n        reject(new Error(this.statusText));\n      }\n    };\n    const client = new XMLHttpRequest();\n    client.open(\"GET\", url);\n    client.onreadystatechange = handler;\n    client.responseType = \"json\";\n    client.setRequestHeader(\"Accept\", \"application/json\");\n    client.send();\n  });\n  return promise;\n};\n\ngetJSON(\"/posts.json\").then(function(json) {\n  console.log('Contents: ' + json);\n}, function(error) {\n  console.error('å‡ºé”™äº†', error);\n});\n```\n\nè¿™é‡Œæˆ‘ä»¬ä¼šæ¸è¿›å¼çš„æ¥åˆ›å»ºä¸€ä¸ª `Promise` çš„å®ç°ï¼Œå¦‚æœï¼Œä½ è¿˜ä¸äº†è§£ `Promise` ï¼Œèµ¶å¿«ç§»æ­¥ [Promise](http://es6.ruanyifeng.com/#docs/promise) äº†è§£å­¦ä¹ ï¼Œå½“ç„¶è¿™ä¸ªå®ç°ä¼šç¬¦åˆ [Promise/A+](https://promisesaplus.com) è§„èŒƒï¼Œ`JavaScript` ä¸­æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„ `Promise` åº“ï¼Œ[bluebird](http://bluebirdjs.com/docs/getting-started.html) å°±æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ `Promise` ç±»åº“ï¼Œç›¸æ¯”å…¶å®ƒç¬¬ä¸‰æ–¹ç±»åº“æˆ–æ ‡å‡†å¯¹è±¡æ¥è¯´ï¼Œå…¶æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼šåŠŸèƒ½æ›´é½å…¨è€Œä¸è‡ƒè‚¿ã€æµè§ˆå™¨å…¼å®¹æ€§æ›´å¥½,å¤§å®¶å¯ä»¥äº†è§£ä¸‹ã€‚\n\n---\n\nåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€å¹²ã€‚ã€‚ã€‚ ğŸ˜ \n\n## å®šä¹‰ Promise ç±»å‹\n\nä¸€ä¸ªç®€å• `Promise` è¯­æ³•ï¼Œå¦‚ä¸‹\n\n```javascript\nconst promise = new Promise(function(resolve, reject) {\n  // ... doSomething\n\n  if (/* å¼‚æ­¥æ“ä½œæˆåŠŸ */){\n    resolve(value);\n  } else {\n    reject(error);\n  }\n});\n\npromise.then(function(value) {\n  // success\n}, function(error) {\n  // failure ç¬¬äºŒä¸ªå‡½æ•°å¯é€‰\n});\n```\n\n### å®ç° resolve å’Œ then\n\né¦–å…ˆæˆ‘ä»¬ä»¥ä¸Š ğŸ‘† çš„è¯­æ³•ï¼Œè‡ªå·±å®šä¹‰ä¸€ä¸ª `Promise` å®ä¾‹\n\n```javascript\nfunction Promise(fn) {\n  let callback = null;\n  //å®ç° then æ–¹æ³• , å…ˆä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå®ç°ä¼ ä¸€ä¸ªå‚æ•° -- resolve\n  this.then = function(cb) {\n    callback = cb;\n  };\n\n  //å®ç° resolve , value:å¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå€¼\n  function resolve(value) {\n    callback(value);\n  }\n  //æ‰§è¡Œ function å‚æ•°\n  fn(resolve);\n}\n```\nä¸€ä¸ªç®€å•çš„å®ä¾‹å†™å¥½äº†ï¼Œç„¶åï¼Œæ¥ç”¨ä¸€ä¸‹ï¼Œçœ‹çœ‹ ğŸ‘€ ç»“æœå¦‚ä½•\n\n```javascript\nconst p = new Promise(function(resolve){\n  resolve(66);\n});\n\np.then(function(value){\n  console.log(value);\n});\n\n```\n{% note info %}\n\næ‰§è¡Œç»“æœæ˜¯ï¼š`callback is not a function`\n\n{% endnote %}\n\n### æ”¹è¿›1ï¼šå»¶æ—¶resolveï¼Œä¿®æ”¹ callback ä¸ºå¼‚æ­¥\n\n**è¿™é‡Œå°±é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š **  \n\n** ç›®å‰çš„Promiseæœ‰ä¸€ä¸ªbugï¼Œå‡å¦‚fnä¸­æ‰€åŒ…å«çš„æ˜¯åŒæ­¥ä»£ç ï¼Œåˆ™resolveä¼šç«‹å³æ‰§è¡Œï¼Œ`callback` è¿˜æ˜¯ `null` ï¼Œæˆ‘ä»¬çš„ä»£ç æ˜¯åŒæ­¥çš„ï¼Œè€Œä¸æ˜¯å¼‚æ­¥çš„ã€‚</br> å¦‚æ˜¯ï¼Œæƒ³åŠæ³•è§£å†³æ‰è¿™ä¸ªé—®é¢˜ï¼Œå°±æ˜¯åˆ©ç”¨ `setTimeout` , æŠŠ `callback` åŠ å…¥å¼‚æ­¥é˜Ÿåˆ—** \n\nä»£ç å¦‚ä¸‹ ğŸ‘‡\n\n```javascript\nfunction Promise(fn) {\n  let callback = null;\n  //å®ç° then æ–¹æ³• , å…ˆä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå®ç°ä¼ ä¸€ä¸ªå‚æ•° -- resolve\n  this.then = function(cb) {\n    callback = cb;\n  };\n\n  //å®ç° resolve , value:å¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå€¼\n  function resolve(value) {\n    // ç”¨ setTimeout æŠŠ callback åŠ å…¥åˆ°å¼‚æ­¥é˜Ÿåˆ—ï¼Œè¿™æ ·å°±ä¼šï¼Œå…ˆæ‰§è¡Œ then() æ–¹æ³•\n    setTimeout(function(){\n      callback(value);\n    },0)\n  }\n  //æ‰§è¡Œ function å‚æ•°\n  fn(resolve);\n}\n```\n\n### æ”¹è¿›2ï¼šæ³¨å†Œå¤šä¸ªå›è°ƒå‡½æ•°ï¼Œå¹¶å®ç°thençš„é“¾å¼è°ƒç”¨\n\n```javascript\nfunction Promise(fn) {\n  let value = null\n  let callbackList = [];\n  this.then = function(cb) {\n    callbackList.push(cb);\n    // å®ç°é“¾å¼è°ƒç”¨\n    return this\n  };\n\n  function resolve(newValue) {\n    value = newValue\n    setTimeout(function(){\n       // éå†callbackListæ•°ç»„ä¾æ¬¡æ‰§è¡Œ\n       callbackList.forEach((callback)=>{\n         callback(value)\n       })\n    },0)\n  }\n  fn(resolve);\n}\n```\n### æ”¹è¿›3ï¼šå¼•å…¥çŠ¶æ€\n\n```javascript\nfunction Promise(fn) {\n  let state='pending'\n  let value = null\n  let callbackList = [];\n  this.then = function(cb) {\n    if(state=='pending'){\n      // pendingåŠ å…¥é˜Ÿåˆ—\n      callbackList.push(cb);\n      return this\n    }\n    if(state=='fulfilled'){\n      // fulfilledç«‹å³æ‰§è¡Œ\n      cb(value)\n      return this\n    }\n  };\n\n  function resolve(newValue) {\n    value = newValue\n    setTimeout(function(){\n       callbackList.forEach((callback)=>{\n         callback(value)\n       })\n    },0)\n  }\n  fn(resolve);\n}\n```\n\n**æ‰‹åŠ¨å®ç°ä¸€ä¸ªPromiseï¼š**\n\n```javascript\nclass Promise(){\n  construtor(fn){\n       // æ‰§è¡Œé˜Ÿåˆ—\n       this._wathcList=[]\n       // æˆåŠŸ\n       this._success_res=null\n       // å¤±è´¥\n       this._error_res=null\n       this._status=\"success\"\n       fn((...args))=>{\n          // ä¿å­˜æˆåŠŸæ•°æ®\n          this._success_res=args\n          this._status='success'\n          // è‹¥ä¸ºå¼‚æ­¥åˆ™å›å¤´æ‰§è¡ŒthenæˆåŠŸæ–¹æ³•\n          this._watchList.forEach(element => {\n              element.fn1(...args);\n          });\n       },(...args)=>{\n          // ä¿å­˜å¤±è´¥æ•°æ®\n          this._error_res=args\n          this._status='error'\n          // è‹¥ä¸ºå¼‚æ­¥åˆ™å›å¤´æ‰§è¡ŒthenæˆåŠŸæ–¹æ³•\n          this._watchList.forEach(element => {\n              element.fn2(...args);\n          });\n       }\n  }\n  // then å‡½æ•°\n  then(fn1, fn2) {\n      if (this._status === \"success\") {\n          fn1(...this._success_res);\n      } else if (this._status === \"error\") {\n          fn2(...this._error_res);\n      } else {\n          this._watchList.push({\n              fn1,\n              fn2\n          })\n      }\n  }\n}\n```\n**å®ç°Promise.all ä»¥åŠ race**\n\n```javascript\n// å®ç°Promise.all ä»¥åŠ race\nPromise.myall = function (arr) {\n    return new Promise((resolve, reject) => {\n        if (arr.length === 0) {\n            return resolve([])\n        } else {\n            let res = [],\n                count = 0\n            for (let i = 0; i < arr.length; i++) {\n                // åŒæ—¶ä¹Ÿèƒ½å¤„ç†arræ•°ç»„ä¸­éPromiseå¯¹è±¡\n                if (!(arr[i] instanceof Promise)) {\n                    res[i] = arr[i]\n                    if (++count === arr.length)\n                        resolve(res)\n                } else {\n                    arr[i].then(data => {\n                        res[i] = data\n                        if (++count === arr.length)\n                            resolve(res)\n                    }, err => {\n                        reject(err)\n                    })\n                }\n            }\n        }\n    })\n}\n\nPromise.prototype.race = function (arr) {\n    return new Promise((resolve, reject) => {\n        for (let i = 0; i < arr.length; i++) {\n            // åŒæ—¶ä¹Ÿèƒ½å¤„ç†arræ•°ç»„ä¸­éPromiseå¯¹è±¡\n            if (!(arr[i] instanceof Promise)) {\n                Promise.resolve(arr[i]).then(resolve, reject)\n            } else {\n                arr[i].then(resolve, reject)\n            }\n\n        }\n    })\n}\n\nPromise.prototype.finally = function (callback) {\n    return this.then((value) => {\n        return Promise.resolve(callback()).then(() => {\n            return value;\n        });\n    }, (err) => {\n        return Promise.resolve(callback()).then(() => {\n            throw err;\n        });\n    });\n}\n```\n### åµŒå¥—ä½¿ç”¨\nPromiseå¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œè¿™æ ·å¯ä»¥æ˜¯å¤šä¸ªä»»åŠ¡æœ‰æ¡ä¸ç´Šåœ°è¿›è¡Œï¼Œå‡è®¾p1æ˜¯ä¸€ä¸ªPromiseå¯¹è±¡è€Œp2ã€p3éƒ½æ˜¯èƒ½å¤Ÿäº§ç”ŸPromiseå¯¹è±¡çš„æ–¹æ³•(å¦‚æœç›´æ¥newé‚£ä¹ˆPromiseå°†ä¼šè¢«ç›´æ¥æ‰§è¡Œ)ï¼Œé‚£ä¹ˆä½ å¯ä»¥è¿™æ ·å†™ï¼Œä½¿å¾—ä»–ä»¬æŒ‰ç…§é¡ºåºæ‰§è¡Œï¼Œå¹¶ä¸”å¯ä»¥ä¸€æ¬¡æ€§å¤„ç†ä»–ä»¬äº§ç”Ÿçš„é”™è¯¯ã€‚\n\n```javascript\nlet p1 = new Promise((resolve, reject) => {\n    console.log('p1');\n    setTimeout(() => {\n        resolve('p2');\n    }, 1000)\n});\n\nlet p2 = (result) => new Promise((resolve, reject) => {\n    console.log(result);\n    setTimeout(() => {\n        resolve('p3');\n    }, 2000);\n});\n\nlet p3 = (result) => new Promise((resolve, reject) => {\n    console.log(result);\n    setTimeout(() => {\n        resolve('over');\n    }, 3000);\n});\n\np1\n    .then(p2)\n    .then(p3)\n    .then((result) => {\n        console.log(result);\n    })\n    .catch((error) => {\n        console.log(error);\n    });\n```\n\n## lite Promise\n```js\nfunction isFunction(target) {\n  return Object.prototype.toString.call(target) === \"[object Function]\";\n}\n\nclass _Promise {\n  constructor(executor) {\n    this.status = \"pending\";\n    this.onResolveCallbacks = [];\n    this.onRejectCallbacks = [];\n\n    let handlerGenerator = status => data => {\n      this.data = data;\n      this.status = status;\n\n      let dict = {\n        resolve: \"onResolveCallbacks\",\n        reject: \"onRejectCallbacks\"\n      };\n\n      executeCallback(this[dict[status]]);\n    };\n\n    let executeCallback = cbs => {\n      for (let cb of cbs) {\n        cb(this.data);\n      }\n    };\n\n    let resolve = handlerGenerator(\"resolve\").bind(this);\n    let reject = handlerGenerator(\"reject\").bind(this);\n\n    executor(resolve, reject);\n  }\n\n  _funcPoly(data) {\n    return data;\n  }\n\n  _PromiseGenerator(onResolved, onRejected) {\n    let self = this;\n\n    return new _Promise((resolve, reject) => {\n      let body = () => {\n        let status = self.status;\n\n        try {\n          let result =\n            status === \"resolve\"\n              ? onResolved(self.data)\n              : status === \"reject\"\n              ? onRejected(self.data)\n              : undefined;\n\n          if (result instanceof _Promise) {\n            return resolvedResult.then(resolve, reject);\n          }\n\n          if (status === \"resolve\") {\n            resolve(result);\n          }\n        } catch (e) {\n          reject(e);\n        }\n      };\n\n      if (self.status === \"pending\") {\n        self.onResolveCallbacks.push(body);\n        self.onRejectCallbacks.push(body);\n      } else {\n        body(self.status);\n      }\n    });\n  }\n\n  then(onResolved = this._funcPoly, onRejected = this._funcPoly) {\n    return this._PromiseGenerator(onResolved, onRejected);\n  }\n\n  catch(onRejected) {\n    this.then(null, onRejected);\n  }\n}\n\nnew _Promise(function(resolve){\n  console.log(1)\n  resolve()\n}).then(console.log(2))\nconsole.log(3)\n```\n\n## å¦‚ä½•å–æ¶ˆ `promise`\n1. Promise.raceæ–¹æ³•\n```js\n// æ–¹æ³•ä¸€ å–æ¶ˆpromiseæ–¹æ³•   promise.raceæ–¹æ³•\nfunction wrap(p) {\n  let obj = {};\n  let p1 = new Promise((resolve, reject) => {\n    obj.resolve = resolve;\n    obj.reject = reject;\n  });\n  obj.promise = Promise.race([p1, p]);\n  return obj;\n}\n\nlet promise = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve(123);\n  }, 1000);\n});\nlet obj = wrap(promise);\nobj.promise.then(res => {\n  console.log(res);\n});\nobj.resolve(\"è¯·æ±‚è¢«æ‹¦æˆªäº†\");\n\nobj.reject(\"è¯·æ±‚è¢«æ‹’ç»äº†\");\n```\n\n2. æ–°åŒ…è£…ä¸€ä¸ªå¯æ“æ§çš„promise\n```js\nfunction wrap(p) {\n  let res = null;\n  let abort = null;\n\n  let p1 = new Promise((resolve, reject) => {\n    res = resolve;\n    abort = reject;\n  });\n\n  p1.abort = abort;\n  p.then(res, abort);\n\n  return p1;\n}\n\nlet promise = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve(123);\n  }, 1000);\n});\nlet obj = wrap(promise);\nobj.then(res => {\n  console.log(res);\n});\nobj.abort(\"è¯·æ±‚è¢«æ‹¦æˆª\");\n```\n\n## Promiseä½¿ç”¨æ³¨æ„ç‚¹\n1. ä¸€èˆ¬æ¥è¯´ï¼Œè°ƒç”¨`resolve`æˆ–`reject`ä»¥åï¼Œ`Promise`çš„ä½¿å‘½å°±å®Œæˆäº†ï¼Œåç»§æ“ä½œåº”è¯¥æ”¾åˆ°`then`æ–¹æ³•é‡Œé¢ï¼Œè€Œä¸åº”è¯¥ç›´æ¥å†™åœ¨`resolve`æˆ–`reject`çš„åé¢ã€‚æ‰€ä»¥ï¼Œæœ€å¥½åœ¨å®ƒä»¬å‰é¢åŠ ä¸Š`return`è¯­å¥ï¼Œè¿™æ ·å°±ä¸ä¼šæœ‰æ„å¤–ã€‚\n\n2. `Promise`å®ä¾‹å…·æœ‰`then`æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ`then`æ–¹æ³•æ˜¯å®šä¹‰åœ¨åŸå‹å¯¹è±¡`Promise.prototype`ä¸Šçš„ã€‚å®ƒçš„ä½œç”¨æ˜¯ä¸º`Promise`å®ä¾‹æ·»åŠ çŠ¶æ€æ”¹å˜æ—¶çš„å›è°ƒå‡½æ•°ã€‚å‰é¢è¯´è¿‡ï¼Œ`then`æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯`resolved`çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ï¼ˆå¯é€‰ï¼‰æ˜¯`rejected`çŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚`then`æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„`Promise`å®ä¾‹ï¼ˆæ³¨æ„ï¼Œä¸æ˜¯åŸæ¥é‚£ä¸ª`Promise`å®ä¾‹ï¼‰ã€‚å› æ­¤å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼Œå³thenæ–¹æ³•åé¢å†è°ƒç”¨å¦ä¸€ä¸ª`then`æ–¹æ³•ã€‚\n\n3. `Promise.prototype.catch`æ–¹æ³•æ˜¯.then(null, rejection)çš„åˆ«åï¼Œç”¨äºæŒ‡å®šå‘ç”Ÿé”™è¯¯æ—¶çš„å›è°ƒå‡½æ•°ã€‚`getJSON`æ–¹æ³•è¿”å›ä¸€ä¸ª`Promise`å¯¹è±¡ï¼Œå¦‚æœè¯¥å¯¹è±¡çŠ¶æ€å˜ä¸º`resolved`ï¼Œåˆ™ä¼šè°ƒç”¨`then`æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼›å¦‚æœå¼‚æ­¥æ“ä½œæŠ›å‡ºé”™è¯¯ï¼ŒçŠ¶æ€å°±ä¼šå˜ä¸º`rejected`ï¼Œå°±ä¼šè°ƒç”¨`catch`æ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¤„ç†è¿™ä¸ªé”™è¯¯ã€‚å¦å¤–ï¼Œthenæ–¹æ³•æŒ‡å®šçš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœè¿è¡Œä¸­æŠ›å‡ºé”™è¯¯ï¼Œä¹Ÿä¼šè¢«`catch`æ–¹æ³•æ•è·ã€‚\n\n4. ä¸€èˆ¬æ¥è¯´ï¼Œä¸è¦åœ¨thenæ–¹æ³•é‡Œé¢å®šä¹‰`reject`çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼ˆå³thençš„ç¬¬äºŒä¸ªå‚æ•°ï¼‰ï¼Œæ€»æ˜¯ä½¿ç”¨`catch`æ–¹æ³•ã€‚\n\n5. è·Ÿä¼ ç»Ÿçš„`try/catch`ä»£ç å—ä¸åŒçš„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨`catch`æ–¹æ³•æŒ‡å®šé”™è¯¯å¤„ç†çš„å›è°ƒå‡½æ•°ï¼Œ`Promise`å¯¹è±¡æŠ›å‡ºçš„é”™è¯¯ä¸ä¼šä¼ é€’åˆ°å¤–å±‚ä»£ç ï¼Œå³ä¸ä¼šæœ‰ä»»ä½•ååº”ï¼Œ`Promise`ä¼šåƒæ‰é”™è¯¯ã€‚\n\n6. Promise æ„é€ å‡½æ•°æ˜¯åŒæ­¥æ‰§è¡Œï¼Œthenæ–¹æ³•æ˜¯å¼‚æ­¥æ‰§è¡Œã€‚`.then` æˆ–è€… `.catch` çš„å‚æ•°æœŸæœ›æ˜¯å‡½æ•°ï¼Œä¼ å…¥éå‡½æ•°åˆ™ä¼šå‘ç”Ÿå€¼é€ä¼ ã€‚\n\n7. Promise.allä¸­å¦‚æœæœ‰ä¸€ä¸ªæŠ›å‡ºå¼‚å¸¸äº†ä¼šå¦‚ä½•å¤„ç†?\n> allå’Œraceä¼ å…¥çš„æ•°ç»„ä¸­å¦‚æœæœ‰ä¼šæŠ›å‡ºå¼‚å¸¸çš„å¼‚æ­¥ä»»åŠ¡ï¼Œé‚£ä¹ˆåªæœ‰æœ€å…ˆæŠ›å‡ºçš„é”™è¯¯ä¼šè¢«æ•è·ï¼Œå¹¶ä¸”æ˜¯è¢«thençš„ç¬¬äºŒä¸ªå‚æ•°æˆ–è€…åé¢çš„catchæ•è·ï¼›ä½†å¹¶ä¸ä¼šå½±å“æ•°ç»„ä¸­\nå…¶å®ƒçš„å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œã€‚\n\n8. promise.allå¹¶å‘è¿˜æ˜¯ä¸²è¡Œ\nå¹¶å‘çš„ã€‚ä¸è¿‡Promise.all().then()ç»“æœä¸­æ•°ç»„çš„é¡ºåºå’ŒPromise.all()æ¥æ”¶åˆ°çš„æ•°ç»„é¡ºåºä¸€è‡´ã€‚\n","tags":["promise"],"categories":["JS"]},{"title":"å¦‚ä½•ä½¿ç”¨ markdown è¯­æ³•å†™åšå®¢","url":"%2FmarkdownGrammar.html","content":"\n{% fi http://cdn.mydearest.cn/blog/images/markdown.png, Markdown, Markdown %}\n\n{% note info %}\n\n{% endnote %}\n\n{% centerquote %} \n\n{% endcenterquote %}\n\n# æ ‡é¢˜1\n## æ ‡é¢˜2\n*æ–œä½“*\n**ç²—ä½“**\n***ç²—æ–œä½“***<br/>\n~~åˆ é™¤çº¿~~\n<u>ä¸‹åˆ’çº¿æ–‡æœ¬</u>\n\n1. I\n2. Love \n3. You\n\n- ç‚¹\n\n+ Foo\n+ Bar\n---\n<!-- more -->\n\nåˆ†éš”çº¿\n***\n--- \n___\n\n* * *\n>ä¸€çº§å¼•ç”¨\n>>äºŒçº§å¼•ç”¨\n\n`#include<iostream>`\n```\n#include <iostream>\nint main()\n{\nreturn 0;\n}\n```\n~~~\n#include <iostream>\nint main()\n{\nreturn 0;\n}\n~~~\n|æ ‡é¢˜|æ ‡é¢˜|æ ‡é¢˜|\n|:---|:---:|---:|\n|å±…å·¦æµ‹è¯•æ–‡æœ¬|å±…ä¸­æµ‹è¯•æ–‡æœ¬|å±…å³æµ‹è¯•æ–‡æœ¬|\n|å±…å·¦æµ‹è¯•æ–‡æœ¬1|å±…ä¸­æµ‹è¯•æ–‡æœ¬2|å±…å³æµ‹è¯•æ–‡æœ¬3|\n|å±…å·¦æµ‹è¯•æ–‡æœ¬11|å±…ä¸­æµ‹è¯•æ–‡æœ¬22|å±…å³æµ‹è¯•æ–‡æœ¬33|\n|å±…å·¦æµ‹è¯•æ–‡æœ¬111|å±…ä¸­æµ‹è¯•æ–‡æœ¬222|å±…å³æµ‹è¯•æ–‡æœ¬333|\n\n- [x] å·²å®Œæˆäº‹é¡¹\n- [ ] å¾…åŠäº‹é¡¹1\n- [ ] å¾…åŠäº‹é¡¹2\n\n### åæ–œæ \n\n`Markdown` å¯ä»¥åˆ©ç”¨åæ–œæ æ¥æ’å…¥ä¸€äº›åœ¨è¯­æ³•ä¸­æœ‰å…¶å®ƒæ„ä¹‰çš„ç¬¦å·ï¼Œä¾‹å¦‚ï¼šå¦‚æœä½ æƒ³è¦ç”¨æ˜Ÿå·åŠ åœ¨æ–‡å­—æ—è¾¹çš„æ–¹å¼æ¥åšå‡ºå¼ºè°ƒæ•ˆæœï¼ˆä½†ä¸ç”¨ `<em>` æ ‡ç­¾ï¼‰ï¼Œä½ å¯ä»¥åœ¨æ˜Ÿå·çš„å‰é¢åŠ ä¸Šåæ–œæ ï¼š\n```\n\\*literal asterisks\\*\n```\næ•ˆæœå¦‚ä¸‹ï¼š\n\n\\*literal asterisks\\*\n\n`Markdown` æ”¯æŒä»¥ä¸‹è¿™äº›ç¬¦å·å‰é¢åŠ ä¸Šåæ–œæ æ¥å¸®åŠ©æ’å…¥æ™®é€šçš„ç¬¦å·ï¼š\n\n```\n  \\   åæ–œçº¿\n  `   åå¼•å·\n  *   æ˜Ÿå·\n  _   åº•çº¿\n  {}  èŠ±æ‹¬å·\n  []  æ–¹æ‹¬å·\n  ()  æ‹¬å¼§\n  #   äº•å­—å·\n  +   åŠ å·\n  -   å‡å·\n  .   è‹±æ–‡å¥ç‚¹\n  !   æƒŠå¹å·\n```\nç™»å½•[ç™¾åº¦](http://www.baidu.com)\n![Teddy Bear](http://img2.everychina.com/img/d7/f7/1b580dfa9315111397ef93fd24ea-250x250c1-77f7/love_valentine_plush_teddy_bear.jpg)\n\n### å¾½ç« \n\n![](https://img.shields.io/badge/github-cosyer-brightgreen.svg)\n\n### æŠ˜å \n<details>\n<summary>ç‚¹æˆ‘æ‰“å¼€å…³é—­æŠ˜å </summary>\n æŠ˜å å†…å®¹\n <ul>\n     <li>1</li>\n     <li>2</li>\n     <li>3</li>\n </ul>\n</details>\n","tags":["markdown"],"categories":["å·¥å…·"]},{"title":"Hello World - çƒ­çˆ±ç¼–ç¨‹çš„æ™®é€šäººï¼Œé¡ºä¾¿ä»¥æ­¤ä¸ºç”Ÿã€‚","url":"%2Fhello-world.html","content":"\nä¹‹å‰ä¸€ç›´åœ¨åšå®¢å›­å†™åšå®¢ï¼Œä½†éšç€æŠ€æœ¯çš„å‘å±•ï¼Œåšå®¢å›­çš„æ ·å¼å’Œè‡ªå®šä¹‰å†…å®¹è¿œè¿œä¸èƒ½è¾¾åˆ°æˆ‘æ‰€æœŸæœ›ã€‚æ•…æ­¤å†³å®šè¿ç§»åšå®¢ï¼Œå¸Œæœ›èƒ½æ€»ç»“å½’çº³å¥½è‡ªå·±çš„æŠ€æœ¯ä½“ç³»ï¼Œæ‹“å®½æ‹“æ·±æŠ€æœ¯æ ˆï¼Œé‡æ–°å¼€å‘O(âˆ©_âˆ©)Oå“ˆå“ˆ~ã€‚\n\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n---\n<!-- more -->\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n\n\nå¦‚æœè¯´äººç”Ÿæ˜¯è‡ªæˆ‘ç¼–å†™çš„ç¨‹åºï¼Œ\n\né‚£ä¹ˆé’æ˜¥å°±æ˜¯å…¶ä¸­æ„å‘³æ·±é•¿çš„ä»£ç ã€‚\n\næˆ–ç®€å•ï¼Œ\n\nåˆ†è§£æˆå½¼æ­¤ç‹¬ç«‹çš„å­—ç¬¦ï¼›\n\næˆ–å¤æ‚ï¼Œ\n\næ‹¼å‡‘ä¸€è¿ä¸²ç¥ç§˜çš„è¯­å¥ã€‚\n\næˆ‘ä»¬å°è¯•ç€ä¸æ–­è°ƒè¯•ï¼Œ\n\nä¸æ–­ä¼˜åŒ–ï¼Œ\n\næ— è®ºç¼–è¯‘çš„ç»“æœå¦‚ä½•ï¼Œ\n\nè¿‡ç¨‹æ‰æ˜¯æœ€ç¾ã€‚\n\nå¦‚æœè¯´è¿™æ®µä»£ç ä¸èƒ½å¤åˆ¶ï¼Œ\n\né‚£ä¹ˆæˆ‘æ„¿æ„ç”¨ä¸€ç”Ÿå»ç»­å†™â€¦.\n\nâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€ƒâ€”â€” çŒ®ç»™æˆ‘ä»¬é‚£å¯ä»¥è‚†æ„æŒ¥æ´’çš„é’æ˜¥ï¼Œä¸€ç›´é’æ˜¥ä¸‹å»ã€‚","tags":["åæ§½"],"categories":["æ‚è°ˆ"]}]